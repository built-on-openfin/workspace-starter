/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/workspace-platform/index.js":
/*!***************************************************************!*\
  !*** ../../node_modules/@openfin/workspace-platform/index.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

(()=>{var e={847:(e,t)=>{var a={2346:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const o=n(a(6535));t.lightenColor=(e,t)=>r(e,"lighten",t),t.darkenColor=(e,t)=>r(e,"darken",t);const r=(e,t,a)=>{if(a&&(a<0||a>100))throw new Error(`${a} must be a number between 0 and 100`);return(0,o.default)(e)[t](a).toString()};t.getMostReadable=(e,t)=>o.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const n=a(2317),o=a(2346),r=a(5939),i={fontFamily:n.FontFamily,fontSize:n.FontSize,fontWeight:n.FontWeight,lineHeight:n.LineHeight,iconSize:n.IconSize,radius:n.Radius,shadow:n.Shadow,transition:n.Transition,unit:n.Unit,px:n.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,o.darkenColor)(t,2),[`${e}Hover`]:(0,o.lightenColor)(t,5),[`${e}Focused`]:(0,o.getMostReadable)(t,[n.Color.white,n.Color.darkGray5]),[`${e}Text`]:(0,o.getMostReadable)(t,[n.Color.white,n.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},e),s(r.Palette.brandPrimary,e.brandPrimary)),s(r.Palette.brandSecondary,e.brandSecondary))})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,a=/\s+$/;function n(o,r){if(r=r||{},(o=o||"")instanceof n)return o;if(!(this instanceof n))return new n(o,r);var i=function(n){var o,r,i,s={r:0,g:0,b:0},c=1,l=null,d=null,u=null,p=!1,w=!1;return"string"==typeof n&&(n=function(e){e=e.replace(t,"").replace(a,"").toLowerCase();var n,o=!1;if(f[e])e=f[e],o=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(n=B.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=B.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=B.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=B.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=B.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=B.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=B.hex8.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),a:W(n[4]),format:o?"name":"hex8"}:(n=B.hex6.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),format:o?"name":"hex"}:(n=B.hex4.exec(e))?{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),a:W(n[4]+""+n[4]),format:o?"name":"hex8"}:!!(n=B.hex3.exec(e))&&{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),format:o?"name":"hex"}}(n)),"object"==e(n)&&(E(n.r)&&E(n.g)&&E(n.b)?(o=n.r,r=n.g,i=n.b,s={r:255*P(o,255),g:255*P(r,255),b:255*P(i,255)},p=!0,w="%"===String(n.r).substr(-1)?"prgb":"rgb"):E(n.h)&&E(n.s)&&E(n.v)?(l=I(n.s),d=I(n.v),s=function(e,t,a){e=6*P(e,360),t=P(t,100),a=P(a,100);var n=Math.floor(e),o=e-n,r=a*(1-t),i=a*(1-o*t),s=a*(1-(1-o)*t),c=n%6;return{r:255*[a,i,r,r,s,a][c],g:255*[s,a,a,i,r,r][c],b:255*[r,r,s,a,a,i][c]}}(n.h,l,d),p=!0,w="hsv"):E(n.h)&&E(n.s)&&E(n.l)&&(l=I(n.s),u=I(n.l),s=function(e,t,a){var n,o,r;function i(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}if(e=P(e,360),t=P(t,100),a=P(a,100),0===t)n=o=r=a;else{var s=a<.5?a*(1+t):a+t-a*t,c=2*a-s;n=i(c,s,e+1/3),o=i(c,s,e),r=i(c,s,e-1/3)}return{r:255*n,g:255*o,b:255*r}}(n.h,l,u),p=!0,w="hsl"),n.hasOwnProperty("a")&&(c=n.a)),c=v(c),{ok:p,format:n.format||w,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(o);this._originalInput=o,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||i.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function o(e,t,a){e=P(e,255),t=P(t,255),a=P(a,255);var n,o,r=Math.max(e,t,a),i=Math.min(e,t,a),s=(r+i)/2;if(r==i)n=o=0;else{var c=r-i;switch(o=s>.5?c/(2-r-i):c/(r+i),r){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:o,l:s}}function r(e,t,a){e=P(e,255),t=P(t,255),a=P(a,255);var n,o,r=Math.max(e,t,a),i=Math.min(e,t,a),s=r,c=r-i;if(o=0===r?0:c/r,r==i)n=0;else{switch(r){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:o,v:s}}function i(e,t,a,n){var o=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function s(e,t,a,n){return[x(A(n)),x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.s-=t/100,a.s=C(a.s),n(a)}function l(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.s+=t/100,a.s=C(a.s),n(a)}function d(e){return n(e).desaturate(100)}function u(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.l+=t/100,a.l=C(a.l),n(a)}function p(e,t){t=0===t?0:t||10;var a=n(e).toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(-t/100*255))),a.g=Math.max(0,Math.min(255,a.g-Math.round(-t/100*255))),a.b=Math.max(0,Math.min(255,a.b-Math.round(-t/100*255))),n(a)}function w(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.l-=t/100,a.l=C(a.l),n(a)}function h(e,t){var a=n(e).toHsl(),o=(a.h+t)%360;return a.h=o<0?360+o:o,n(a)}function g(e){var t=n(e).toHsl();return t.h=(t.h+180)%360,n(t)}function m(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var a=n(e).toHsl(),o=[n(e)],r=360/t,i=1;i<t;i++)o.push(n({h:(a.h+i*r)%360,s:a.s,l:a.l}));return o}function k(e){var t=n(e).toHsl(),a=t.h;return[n(e),n({h:(a+72)%360,s:t.s,l:t.l}),n({h:(a+216)%360,s:t.s,l:t.l})]}function b(e,t,a){t=t||6,a=a||30;var o=n(e).toHsl(),r=360/a,i=[n(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,i.push(n(o));return i}function y(e,t){t=t||6;for(var a=n(e).toHsv(),o=a.h,r=a.s,i=a.v,s=[],c=1/t;t--;)s.push(n({h:o,s:r,v:i})),i=(i+c)%1;return s}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,a,n=this.toRgb();return e=n.r/255,t=n.g/255,a=n.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))},setAlpha:function(e){return this._a=v(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),n=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+a+"%, "+n+"%)":"hsva("+t+", "+a+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),n=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+a+"%, "+n+"%)":"hsla("+t+", "+a+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,a,n,o){var r=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16)),x(A(n))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*P(this._r,255))+"%",g:Math.round(100*P(this._g,255))+"%",b:Math.round(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%)":"rgba("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),a=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var r=n(e);a="#"+s(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+a+")"},toString:function(e){var t=!!e;e=e||this._format;var a=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(a=this.toRgbString()),"prgb"===e&&(a=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(a=this.toHexString()),"hex3"===e&&(a=this.toHexString(!0)),"hex4"===e&&(a=this.toHex8String(!0)),"hex8"===e&&(a=this.toHex8String()),"name"===e&&(a=this.toName()),"hsl"===e&&(a=this.toHslString()),"hsv"===e&&(a=this.toHsvString()),a||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(e,t){var a=e.apply(null,[this].concat([].slice.call(t)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(u,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(b,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(y,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},n.fromRatio=function(t,a){if("object"==e(t)){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]="a"===r?t[r]:I(t[r]));t=o}return n(t,a)},n.equals=function(e,t){return!(!e||!t)&&n(e).toRgbString()==n(t).toRgbString()},n.random=function(){return n.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},n.mix=function(e,t,a){a=0===a?0:a||50;var o=n(e).toRgb(),r=n(t).toRgb(),i=a/100;return n({r:(r.r-o.r)*i+o.r,g:(r.g-o.g)*i+o.g,b:(r.b-o.b)*i+o.b,a:(r.a-o.a)*i+o.a})},n.readability=function(e,t){var a=n(e),o=n(t);return(Math.max(a.getLuminance(),o.getLuminance())+.05)/(Math.min(a.getLuminance(),o.getLuminance())+.05)},n.isReadable=function(e,t,a){var o,r,i,s,c,l=n.readability(e,t);switch(r=!1,(i=a,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),o={level:s,size:c}).level+o.size){case"AAsmall":case"AAAlarge":r=l>=4.5;break;case"AAlarge":r=l>=3;break;case"AAAsmall":r=l>=7}return r},n.mostReadable=function(e,t,a){var o,r,i,s,c=null,l=0;r=(a=a||{}).includeFallbackColors,i=a.level,s=a.size;for(var d=0;d<t.length;d++)(o=n.readability(e,t[d]))>l&&(l=o,c=n(t[d]));return n.isReadable(e,c,{level:i,size:s})||!r?c:(a.includeFallbackColors=!1,n.mostReadable(e,["#fff","#000"],a))};var f=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=n.hexNames=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}(f);function v(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function P(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var a=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),a&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return Math.min(1,Math.max(0,e))}function M(e){return parseInt(e,16)}function x(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function A(e){return Math.round(255*parseFloat(e)).toString(16)}function W(e){return M(e)/255}var D,T,R,B=(T="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",R="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function E(e){return!!B.CSS_UNIT.exec(e)}return n}()}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return a[e].call(r.exports,r,r.exports,o),r.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=o(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var a=o(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return a.Palette}});var n=o(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return n.createTheme}})})();var i=t;for(var s in r)i[s]=r[s];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";a.r(n),a.d(n,{AppManifestType:()=>c,BookmarkItemContextMenuOptionType:()=>y,BrowserButtonType:()=>S,ColorSchemeOptionType:()=>m,CustomActionCallerType:()=>C,EnterpriseMainContextMenuOptionType:()=>b,GlobalContextMenuOptionType:()=>g,PageChangeEventType:()=>h,PageTabContextMenuOptionType:()=>k,PanelPosition:()=>w,SUPPORTED_LANGUAGES:()=>M,SaveButtonContextMenuOptionType:()=>v,SaveModalType:()=>x,ViewTabMenuOptionType:()=>f,WindowType:()=>P,getCurrentSync:()=>Aa,init:()=>os,initDockCompanion:()=>as,wrapSync:()=>Ia});var e,t,o,r,i,s,c,l,d={};a.r(d),a.d(d,{getItem:()=>ca,removeItem:()=>la,setItem:()=>sa}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(e||(e={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(t||(t={})),function(e){e.Active="active",e.Default="default"}(o||(o={})),function(e){e.Suggestion="suggestion"}(r||(r={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(i||(i={})),function(e){e.MultiSelect="MultiSelect"}(s||(s={})),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(c||(c={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(l||(l={}));var u,p,w,h,g,m,k,b,y,f,S,v,P,C;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(u||(u={})),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(p||(p={})),function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(w||(w={})),function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(h||(h={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(g||(g={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(m||(m={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(k||(k={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.Print="Print",e.Pin="Pin"}(b||(b={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(y||(y={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(f||(f={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(S||(S={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(v||(v={})),function(e){e.Browser="browser",e.Platform="platform"}(P||(P={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(C||(C={}));const M=["en-US","ja-JP","zh-CN","ko-KR","ru-RU","de-DE","zh-Hant"];var x,I;!function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(x||(x={})),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(I||(I={}));const A="undefined"!=typeof window&&"undefined"!=typeof fin,W=("undefined"==typeof process||process.env,"undefined"!=typeof window),D=W&&"undefined"!=typeof indexedDB,T=W?window.origin:I.Local,R=A&&fin.me.uuid,B=A&&fin.me.name,E=A&&fin.me.entityType,F=(I.Local,I.Dev,I.Staging,"prod"===I.Prod),V=e=>e.startsWith("http://")||e.startsWith("https://")?e:T+e,N=V("https://workspace.openfin.co/workspace/21.0.18"),L=V("https://workspace.openfin.co/workspace/21.0.18"),_=("undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&V(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&V(WORKSPACE_DOCS_CLIENT_URL),"41.134.102.7"),O="21.0.18";"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA;var U,G;!function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(U||(U={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseStorageProxy="/enterprise/storage-proxy",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/"}(G||(G={}));const H={...U,...G};var $;!function(e){e.Search="search"}($||($={}));const K=H;async function z(){const e="getManifestOverrides",{manifest:t,initialOptions:a}=await fin.Application.getCurrentSync().getInfo();return t?.platform.workspace||t?.platform.home||a?.workspace||a?.home||console.warn(`${e}: Missing Home development manifest overrides, using Desktop Owner Settings.`),t?.platform.workspace?(JSON.stringify(t?.platform.workspace),t?.platform.workspace):t?.platform.home?(JSON.stringify(t?.platform.home),t?.platform.home):a?.workspace?(JSON.stringify(a?.workspace),a?.workspace):a?.home?(JSON.stringify(a?.home),a?.home):{}}const J=e=>fin.System.getSystemAppConfig(e);async function q(){const e="getDOSOverrides";if(!A)return console.warn(`${e}: the fin API was not available, returning no result`),{};try{let t=await J("workspace").catch((t=>{console.warn(`${e}: customConfig entry for SystemApp workspace not available in Desktop Owner Settings. ${t?.message}`)}));return t||(t=await J("home")),JSON.stringify(t),t}catch(t){if(!F)return{};if(!(t instanceof Error))throw t;console.warn(`${e}: Missing Workspace Desktop Owner Settings configuration, using defaults. ${t?.message}`)}return{}}let Z,j;async function Q(){if(Z)return Z;const e="getOverrides";if(!A)return W&&console.warn(`${e}: The Fin API was not available. Returning an empty result.`),{};const[t,a]=await Promise.all([q(),z()]);return Z={...a,...t,disableRuntimeValidation:a.disableRuntimeValidation||t.disableRuntimeValidation},Z}function Y(e){j=e}const X=e=>e.replace(/\/$/,"");async function ee(){const e=(await Q()).browserBaseUrl;if(e)try{const t=new URL(e);if(t.pathname.endsWith("/"))t.pathname=X(t.pathname);else{if("/workspace"===t.pathname)return t.pathname+=`/${O}`,t.toString();console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url, with path: /workspace. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}}catch(t){console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}return j??L}async function te(e=!1){const t=await ee()+K.Browser;return e?t:X(t)}async function ae(e=!1){const t=await ee()+K.EnterpriseBrowser;return e?t:X(t)}async function ne(){return await ae()+"/landing/"}const oe=async(e,t=!1)=>e?ae(t):te(t);var re,ie;!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(re||(re={})),function(e){e.FinProtocol="fin-protocol"}(ie||(ie={}));const se={uuid:R},ce=(re.Workspace,e=>{if(!A)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)}),le=()=>ce(se);var de;!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion"}(de||(de={}));const ue=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2});function pe(e){if(!A)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const we={name:B,uuid:R};function he(){return pe(we)}de.Home,re.Workspace,de.Dock,re.Workspace;const ge={name:de.Storefront,uuid:re.Workspace};re.Workspace,re.Workspace;async function me(e){const t=pe(e);"minimized"===await t.getState()&&await t.restore(),await t.show(),await t.focus()}const ke=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function be(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map((async e=>ke(e.identity))));return e.filter(((e,a)=>t[a]))}async function ye(){return(await fin.Application.getCurrentSync().getChildWindows()).filter((e=>e.identity.name.startsWith(de.BrowserMenu)))}const fe=e=>pe(e).getOptions().then((()=>!0)).catch((()=>!1)),Se=()=>fe(ge);function ve(e,t){const a=e.top,n=e.left,o=e.top+e.height,r=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,l=t.monitorRect.right;if(a>c||o<i||n>l||r<s)return 0;const d=Math.max(a,i),u=Math.max(n,s);return(Math.min(o,c)-d)*(Math.min(r,l)-u)/(e.height*e.width)}async function Pe(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce(((t,a)=>{const n=ve(e,a);return n>t.percentage?{percentage:n,monitor:a}:t}),{percentage:0,monitor:t.primaryMonitor}).monitor}const Ce=(e,t)=>{const a=e;return a.workspacePlatform||(a.workspacePlatform={}),a.workspacePlatform._internalDeferShowOptions={setAsForeground:!!t,deferShowEnabled:!0,autoShow:a.workspacePlatform?._internalAutoShow||a.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===a.autoShow||a.autoShow},a.autoShow=!1,a};const Me=56,xe=728,Ie=150,Ae=async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),a=await t.getOptions();return a.workspacePlatform?.windowType&&"enterprise"===a.workspacePlatform.windowType},We=e=>{const t=e?.defaultWindowOptions?.workspacePlatform?.windowType;return"enterprise"===t};let De;const Te=e=>{if(e)try{return new URL(e).pathname.includes(K.EnterpriseBrowser)}catch(t){console.error("error parsing url: %O",e)}return!1},Re=(e,t=0)=>{let a,n,o=!1;const r=async n=>{const i=await e(...n);if(o){await new Promise((e=>setTimeout(e,t)));const e=a;return a=void 0,o=!1,r(e)}return i};return(...e)=>(n?(o=!0,a=e):n=r(e).catch((e=>{throw console.error("makeDebouncedFunc",e),e})).finally((()=>{n=void 0})),n)};var Be;!function(e){e.Top="top",e.Below="below"}(Be||(Be={}));const Ee=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};async function Fe(e,t,a,n,o,r){const i=!!e&&pe(e),s=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(i,r);if(n===Be.Below){if(!i||await Ee(i)){const e=i?(await Pe(s)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:ue(e).left-t/2,top:o?e.bottom-128:e.bottom+12,width:t,height:a}}return{left:ue(s).left-t/2,top:o?s.bottom-128:s.bottom+12,width:t,height:a}}if(!i||await Ee(i)){const e=i?(await Pe(s)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:ue(e).left-t/2,top:e.top+20,width:t,height:a}}return{left:ue(s).left-t/2,top:s.top+20,width:t,height:a}}Re((async function(e,t,a,n,o){const r=t.getBoundingClientRect(),i=await Fe(e,r.width,r.height,a,n,o);if(0===i.width||0===i.height)return;const s=he();await s.setBounds(i),await s.show();const c=setTimeout((()=>s.close()),n?5e3:3e3),l=()=>{clearTimeout(c),s.close()};if(e){const t=pe(e);t.on("bounds-changing",(()=>l())),t.on("blurred",(()=>l())),t.on("maximized",(()=>l())),t.on("minimized",(()=>l())),t.on("restored",(()=>l()))}}),10);const Ve=async e=>{const t=e&&await pe(e).getBounds(),a=e?await Pe(t):(await fin.System.getMonitorInfo()).primaryMonitor;return{left:((n=a.availableRect).left+n.right)/2,top:(n.top+n.bottom)/2};// removed by dead control flow
 var n; },Ne=async(e,t,a=!1)=>{let n;if(a)n=await Ve(t);else{const e=pe(t),a=await e.getBounds();n=n??ue(a)}const{defaultHeight:o,defaultWidth:r}=e;return((e,t)=>{const a=t.width/2,n=t.height/2;return{left:Math.round(e.left-a),top:Math.round(e.top-n),width:t.width,height:t.height}})(n,{height:o,width:r})};async function Le(e,t,a=!1){const n=t&&"maximized"===await pe(t).getState(),o=a||n||!t,r=await Ne(e,t,o);return await(async e=>{const t=await fin.System.getMonitorInfo(),a=[t.primaryMonitor,...t.nonPrimaryMonitors];for(const t of a)if(1===ve(e,t))return!1;return!0})(r)?(await pe(t).center(),Ne(e,t,o)):(console.warn("Response modal isn't off screen, not centering parent window"),r)}var _e;!function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(_e||(_e={}));const Oe=async(e,t,a="workspace-licensing")=>{const n={apiVersion:t.apiVersion||O,componentName:e,componentVersion:t.componentVersion||O,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:a,data:n})};let Ue=!1;const Ge=new Map,He=e=>{let t=Ge.get(e.uuid);return t||(t=Ia(e),t.once("closed",(()=>{Ge.delete(e.uuid)})),Ge.set(e.uuid,t)),t},$e=async(e,t)=>{try{await e._raiseAnalytics([t])}catch(e){console.error("failed to raise analytics event",e)}},Ke=async e=>{await $e(He(fin.me.identity),{source:"Browser",...e})};var ze=a(847);const Je=e=>e.replace(/[^\d,]/g,"").split(","),qe=e=>{if(e.length<2)throw new Error("Invalid color object, cannot convert to HSL.");const t=e[0]/255,a=e[1]/255,n=e[2]/255,o=Math.min(t,a,n),r=Math.max(t,a,n),i=r-o;let s=0,c=0,l=0;return s=0===i?0:r===t?(a-n)/i%6:r===a?(n-t)/i+2:(t-a)/i+4,s=Math.round(60*s),s<0&&(s+=360),l=(r+o)/2,c=0==i?0:i/(1-Math.abs(2*l-1)),c=+(100*c).toFixed(1),l=+(100*l).toFixed(1),{hsl:`hsl(${s}, ${c}%, ${l}%)`,hsla:`hsl(${s}, ${c}%, ${l}%, 1)`,hue:s,lightness:l,saturation:c}},Ze=e=>{if(!e)throw new Error("Color is not defined");const t=e.toLowerCase();let a;if(t.includes("rgb")){const e=Je(t);e.length>3&&e.pop(),a=qe(e).hue}if(t.includes("#")){const e=(e=>{if(!e.includes("#"))throw new Error("Invalid hex value, cannot convert to RGB. Hex value begins with a hashtag.");let t=0,a=0,n=0;if(4===e.length)t=`0x${e[1]}${e[1]}`,a=`0x${e[2]}${e[2]}`,n=`0x${e[3]}${e[3]}`;else{if(7!==e.length)throw new Error("Invalid hex string length, cannot convert to RGB.");t=`0x${e[1]}${e[2]}`,a=`0x${e[3]}${e[4]}`,n=`0x${e[5]}${e[6]}`}return[+t,+a,+n]})(t);a=qe(e).hue}if(t.includes("hsl")){a=Je(t)[0]}const n=a?.toString();if(!n)throw new Error(`Hue was unable to be extracted from "${t}", check color format. Accepted formats are: rgb(), rgba(), hex, hsl(), and hsla()`);return n},je=(e,t=!1)=>{const a=Ze(e);return t?{background1:`hsla(${a}, 0%, 100%, 1)`,background2:`hsla(${a}, 67%, 99%, 1)`,background3:`hsla(${a}, 26%, 96%, 1)`,background4:`hsla(${a}, 15%, 94%, 1)`,background5:`hsla(${a}, 10%, 88%, 1)`,background6:`hsla(${a}, 80%, 80%, 1)`}:{background1:`hsla(${a}, 8%, 7%, 1)`,background2:`hsla(${a}, 8%, 13%, 1)`,background3:`hsla(${a}, 9%, 15%, 1)`,background4:`hsla(${a}, 6%, 23%, 1)`,background5:`hsla(${a}, 21%, 28%, 1)`,background6:`hsla(${a}, 5%, 51%, 1)`}},Qe=(e,t)=>{const a={};return Object.keys(e).forEach((n=>{a[n]=t[n]?t[n]:e[n]})),a};var Ye=a(877),Xe=a.n(Ye),et=a(67),tt=a.n(et);const at={light:{symbol:tt()?.src||""},dark:{symbol:Xe()?.src||""}},nt=W&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function ot(e){let t;const a=new Set;return()=>{if(!A)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await nt;const n={clientAPIVersion:O},o=await fin.InterApplicationBus.Channel.connect(e,{payload:n});return o.onDisconnection((async()=>{a.forEach((e=>e())),a.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0})),o})().then((e=>(e.addDisconnectionListener=e=>{a.add(e)},e))).catch((a=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${a}`)}))),t}}var rt,it;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(rt||(rt={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(it||(it={}));const st=ot("__of_workspace_protocol__"),ct=st;ot("__search-openfin-browser-home-topic__");var lt;!function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.RestoreLastSavedWorkspaceInternal="restoreLastSavedWorkspaceInternal",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal"}(lt||(lt={}));const dt=async e=>fin.Platform.wrapSync(e).getClient(),ut=async e=>{const t=await dt(e),a="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let n;try{n=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(a)}if("boolean"==typeof n&&n)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),n;if("object"==typeof n&&n.isWorkspacePlatform)return n;throw new Error(a)},pt=async e=>(await ut(e),dt(e)),wt=async e=>{const t=await ut(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return dt(e)},ht="dark",gt={[ze.Palette.brandPrimary]:"#0A76D3",[ze.Palette.statusSuccess]:ze.Color.functional1,[ze.Palette.statusWarning]:ze.Color.functional10,[ze.Palette.statusCritical]:ze.Color.functional7,[ze.Palette.statusActive]:ze.Color.functional3,[ze.Palette.contentBackground1]:"#0A76D3",[ze.Palette.contentBackground2]:"#000000",[ze.Palette.contentBackground3]:"#000000",[ze.Palette.contentBackground4]:"#000000",[ze.Palette.contentBackground5]:"#000000"},mt={...gt,[ze.Palette.background1]:ze.Color.white,[ze.Palette.background2]:ze.Color.lightGray1,[ze.Palette.background3]:ze.Color.lightGray2,[ze.Palette.background4]:ze.Color.lightGray3,[ze.Palette.background5]:ze.Color.lightGray4,[ze.Palette.background6]:ze.Color.lightGray5,[ze.Palette.brandSecondary]:ze.Color.lightGray4,[ze.Palette.inputBackground]:ze.Color.lightGray3,[ze.Palette.inputColor]:ze.Color.darkGray5,[ze.Palette.inputPlaceholder]:ze.Color.darkGray2,[ze.Palette.inputDisabled]:ze.Color.neutralGray,[ze.Palette.inputFocused]:ze.Color.lightGray5,[ze.Palette.inputBorder]:ze.Color.neutralGray,[ze.Palette.textDefault]:ze.Color.darkGray5,[ze.Palette.textHelp]:ze.Color.darkGray3,[ze.Palette.textInactive]:ze.Color.neutralGray},kt={...gt,[ze.Palette.background1]:ze.Color.darkGray6,[ze.Palette.background2]:ze.Color.darkGray5,[ze.Palette.background3]:ze.Color.darkGray4,[ze.Palette.background4]:ze.Color.darkGray3,[ze.Palette.background5]:ze.Color.darkGray2,[ze.Palette.background6]:ze.Color.darkGray1,[ze.Palette.brandSecondary]:ze.Color.darkGray2,[ze.Palette.inputBackground]:ze.Color.darkGray1,[ze.Palette.inputColor]:ze.Color.white,[ze.Palette.inputPlaceholder]:ze.Color.lightGray5,[ze.Palette.inputDisabled]:ze.Color.neutralGray,[ze.Palette.inputFocused]:ze.Color.lightGray5,[ze.Palette.inputBorder]:ze.Color.neutralGray,[ze.Palette.textDefault]:ze.Color.white,[ze.Palette.textHelp]:ze.Color.lightGray5,[ze.Palette.textInactive]:ze.Color.neutralGray},bt=[{label:"OpenFin Default Light and Dark Theme",palettes:{light:{...mt,brandPrimary:"#0A76D3",brandSecondary:ze.Color.lightGray4,backgroundPrimary:ze.Color.darkGray5},dark:{...kt,brandPrimary:"#0A76D3",brandSecondary:ze.Color.darkGray2,backgroundPrimary:ze.Color.darkGray5}}}],yt=e=>{const{background:t,foreground:a}=e;return{background:t,foreground:a??"#FFFFFF"}},ft=(e,t)=>({icons:{symbol:e.brand?.icons?.[t]?.symbol||at[t].symbol}}),St=e=>{const{light:t,dark:a}="palettes"in e?e.palettes:{light:e.palette,dark:e.palette},n=Qe(kt,a),o=Qe(mt,t),r=((e,t)=>{const a={...e},n={...t};let o=t.backgroundPrimary?je(t.backgroundPrimary,!0):{},r=e.backgroundPrimary?je(e.backgroundPrimary):{};return o={...o,...n},r={...r,...a},{light:{...t,...o},dark:{...e,...r}}})(a,t),i={...(0,ze.createTheme)({...n,...r?.dark}),brand:ft(e,"dark")},s={...(0,ze.createTheme)({...o,...r?.light}),brand:ft(e,"light")},{light:c,dark:l}=(e=>{const t=Object.keys(e.notificationIndicatorColors??{});if(t?.length){const a={},n={};return t.forEach((t=>{const o=e.notificationIndicatorColors[t];"background"in o?(a[t]=yt(o),n[t]=yt(o)):(a[t]=yt(o.dark??o.light),n[t]=yt(o.light??o.dark))})),{light:n,dark:a}}return{light:null,dark:null}})(e);return i.notificationIndicatorColors=l,s.notificationIndicatorColors=c,{dark:i,light:s}},vt=async e=>{const{themes:t,selectedScheme:a}=await(async e=>{const t=fin?.__internal_?.initialOptions?.workspacePlatform?._themeData;if(!t||e.uuid!==we.uuid)return{themes:await Ia(e).Theme.getThemes(),selectedScheme:await Ia(e).Theme.getSelectedScheme()};return t})(e);var n,o;return(n=t?.length?t:bt,o=a,n.map((e=>{const t="palettes"in e?e.default:ht,{light:a,dark:n}=St(e);return{label:e.label,logoUrl:e.logoUrl,theme:{dark:n,light:a},defaultScheme:o??t}})))[0]},Pt=async e=>{const t=await pt(e||fin.me.identity),a=await t.dispatch(lt.GetSelectedScheme,void 0);return a===m.System?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a},Ct=async(e,t)=>{const a=await vt(fin.me.identity),n=await Pt(fin.me.identity)===m.Dark,o=a?.theme;return o?.[n?m.Dark:m.Light]?.palette?.[e]||t};let Mt;const xt=async e=>{Mt||(Mt=new TextEncoder);const t=Mt.encode(e),a=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(a)).map((e=>e.toString(16).padStart(2,"0"))).join("")};function It(e){return e&&"object"==typeof e&&!Array.isArray(e)}function At(e,...t){if(!t.length)return e;const a=t.shift();return It(e)&&It(a)&&Object.entries(a).forEach((([t,a])=>{if(It(a))return e[t]||(e[t]={}),At(e[t],a);e[t]=a})),At(e,...t)}const Wt=__webpack_require__(/*! lodash.debounce */ "../../node_modules/lodash.debounce/index.js");var Dt,Tt=a.n(Wt);function Rt(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(Dt||(Dt={}));const Bt=Dt;function Et(){return localStorage.getItem(Bt.MachineName)??"unknown"}let Ft;async function Vt(){return Ft||(Ft=await fin.System.getMachineId()),Ft}const Nt=e=>{if(Array.isArray(e.workspacePlatform?.pages)&&(e.layoutSnapshot||e.layout)){const t=e.workspacePlatform.pages.find((e=>e.isActive));if(t){const a=e.layoutSnapshot?e.layoutSnapshot.layouts[t.layoutContainerKey]:e.layout;if(a)if(t.isLocked){const n=_a(a,t.layout);t.layout=n,e.layout=n}else t.layout=a,e.layout=a}}return e};async function Lt(e){const t=e||await fin.Platform.getCurrentSync().getSnapshot();if(t.snapshotDetails?.machineId)return t;const a=Et();return{...t,snapshotDetails:{...t.snapshotDetails,machineId:await Vt(),machineName:a}}}const _t=async e=>({...e,layoutDetails:{machineId:await Vt(),machineName:Et()}}),Ot=async(e,t)=>({pageId:Rt(),title:e,layout:await _t(t),isReadOnly:!1}),Ut=async e=>{const t=await Ot(e.title,Fa(e.layout));return e.panels&&(t.panels=e.panels.map((e=>({...e,viewOptions:Ea(e.viewOptions)})))),{...e,...t}},Gt=e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const a=await t.getConfig(),{settings:n,dimensions:o}=a,r=await Ae(e);await t.replace({...a,settings:{...n,hasHeaders:!0,reorderEnabled:!0},dimensions:{...o,headerHeight:r?28:30}})},hide:async e=>{const a=await t.getConfig(),{settings:n,dimensions:o}=await a;await t.replace({...a,settings:{...n,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...o,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:a}=await e;return a.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}},Ht="of-workspace-";const $t=new class{mark(e){performance.mark(`${Ht}${e}`)}markStart(e){performance.mark(`${Ht}${e}-start`)}markEnd(e){performance.mark(`${Ht}${e}-end`)}markEndAndMeasure(e){performance.mark(`${Ht}${e}-end`);try{return performance.measure(`${Ht}${e}`,`${Ht}${e}-start`,`${Ht}${e}-end`)}catch(e){0}}markAndMeasure(e,t){performance.mark(`${Ht}${e}`);try{return performance.measure(`${Ht}${e}-measure`,`${Ht}${t}-start`,`${Ht}${e}`)}catch(e){0}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter((e=>e.name.startsWith(Ht)))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map((e=>({name:e.name.replace(`${Ht}`,"").replace("-measure",""),duration:e.duration})))}},Kt=(e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`,zt=new Map,Jt=e=>(zt.has(e)||zt.set(e,ot(e)),zt.get(e)()),qt=(e,t)=>{const a=Kt(e,t);return Jt(a)};var Zt,jt,Qt,Yt,Xt;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(Zt||(Zt={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(jt||(jt={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(Qt||(Qt={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(Yt||(Yt={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(Xt||(Xt={}));const ea={...Zt,...jt,...Xt},ta=ot(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`),aa=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await ta()).dispatch(Yt.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await ta()).dispatch(Yt.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await ta()).dispatch(Yt.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await ta()).dispatch(Yt.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await ta()).dispatch(Yt.DeleteBookmarkNode,e))(e)},getPages:async()=>(await wt(e)).dispatch(lt.GetPagesForWindow,e),getPage:async t=>(await wt(e)).dispatch(lt.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>Aa().Browser.wrapSync(e)._addPage(t),_addPage:async(t,a)=>{const n=await wt(e),o={identity:e,page:t,insertionIndex:a?.index,multiInstanceViewBehavior:a?.multiInstanceViewBehavior};return n.dispatch(lt.AddPage,o)},removePage:async t=>(await wt(e)).dispatch(lt.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>Aa().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:a}=t,n=await wt(e),o=(await n.dispatch(lt.GetAllAttachedPages,void 0)).find((({pageId:e})=>e===a));if(!o)throw new Error(`Reparent Page Error: Target page with pageId ${a} not found`);o.multiInstanceViewBehavior="reparent";const r={identity:e,pages:[o],insertionIndex:t.index};return n.dispatch(lt.AttachPagesToWindow,r)},setActivePage:async t=>(await wt(e)).dispatch(lt.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const a=await wt(e);return t.identity=e,a.dispatch(lt.UpdatePageForWindow,t)},reorderPages:async t=>{const a=await wt(e);return t.identity=e,a.dispatch(lt.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const a=await wt(e);return t.identity=e,a.dispatch(lt.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await wt(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await wt(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const a=fin.Window.wrapSync(e);"string"!=typeof t?await a.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const a=await wt(e);return t.identity=e,a.dispatch(lt.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const a=await wt(e);return t.identity=e,a.dispatch(lt.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>{await wt(e);return(await qt(e)).dispatch(ea.OpenSaveModalInternal,t)},_getLayoutsWithSelectedViews:async()=>(await qt(e)).dispatch(ea.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const a=await wt(e);return t.identity=e,a.dispatch(lt.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const a=await wt(e);return t.identity=e,a.dispatch(lt.AddDefaultPage,t)},_trackRemovedTab:async t=>(await wt(e)).dispatch(lt.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await wt(e)).dispatch(lt.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await wt(e)).dispatch(lt.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await wt(e)).dispatch(lt.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await wt(e)).dispatch(lt.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await wt(e)).dispatch(lt.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await wt(e)).dispatch(lt.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await wt(e)).dispatch(lt.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await wt(e)).dispatch(lt.HandleRequestNavigationInternal,t)}),na=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>aa(e),createWindow:async a=>{const n=(()=>{const e=`browser-window-startup-${Rt()}`;return $t.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",(()=>{$t.markAndMeasure("browser-window-shown",e)}))})(n),await wt(e);const o=await t.createWindow(a);return(e=>{$t.markAndMeasure("browser-window-started",e)})(n),aa(o.identity)},getAllAttachedPages:async()=>(await wt(e)).dispatch(lt.GetAllAttachedPages,void 0),getAllWindows:async()=>{await wt(e);return(await be()).map((e=>aa(e.identity)))},getUniquePageTitle:async t=>(await wt(e)).dispatch(lt.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await wt(e)).dispatch(lt.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await wt(e)).dispatch(lt.GetPageByViewIdentity,t)}},oa=e=>({createPage:async t=>(await wt(e)).dispatch(lt.CreateSavedPageInternal,t),deletePage:async t=>(await wt(e)).dispatch(lt.DeleteSavedPageInternal,t),updatePage:async t=>(await wt(e)).dispatch(lt.UpdateSavedPageInternal,t),getPage:async t=>(await wt(e)).dispatch(lt.GetSavedPage,t),getPages:async t=>(await wt(e)).dispatch(lt.GetSavedPages,t),savePage:async t=>(await wt(e)).dispatch(lt.SavePage,t),createWorkspace:async t=>(await pt(e)).dispatch(lt.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const a=Aa(),n=await a.getCurrentWorkspace();if(n.workspaceId===t)throw new Error(`Cannot delete current active workspace ${n.title}`);return(await pt(e)).dispatch(lt.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await pt(e)).dispatch(lt.UpdateSavedWorkspace,t),getWorkspace:async t=>(await pt(e)).dispatch(lt.GetSavedWorkspace,t),getWorkspaces:async t=>(await pt(e)).dispatch(lt.GetSavedWorkspaces,t),saveWorkspace:async t=>(await pt(e)).dispatch(lt.SaveWorkspace,t),getDockProviderConfig:async t=>(await pt(e)).dispatch(lt.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await pt(e)).dispatch(lt.SaveDockProviderConfig,t)});var ra;!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(ra||(ra={}));const ia=ot("of-workspace-notifications-sync"),sa=(e,t)=>{localStorage.setItem(`${R}-${e}`,t)},ca=e=>localStorage.getItem(`${R}-${e}`),la=e=>localStorage.removeItem(`${R}-${e}`),da=m.System,ua=e=>Object.entries(e).reduce(((e,[t,a])=>`${e}--workspace-palette-${t}: ${a};`),""),pa=(e,t)=>({selectedTab:"dark"===t?e.background3:e.background1});const wa=new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorageProxy=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=async()=>{if(this.workspaceStorage){const e=this.getScheme();if(await this.workspaceStorage.setItem(Bt.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)await this.workspaceStorage.setItem(Bt.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;await this.workspaceStorage.setItem(Bt.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t})=>{this.lightPaletteVars=ua({...e,...pa(e,"light")}),this.darkPaletteVars=ua({...t,...pa(t,"dark")})}}setScheme(e){this.providerStorage.setItem(Bt.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(Bt.SelectedColorScheme)&&this.providerStorage.setItem(Bt.SelectedColorScheme,da),this.providerStorage.getItem(Bt.SelectedColorScheme)}}(d),ha=()=>wa,ga=e=>({getThemes:async()=>(await pt(e)).dispatch(lt.GetThemes,void 0),setSelectedScheme:async t=>(await pt(e)).dispatch(lt.SetSelectedScheme,t),getSelectedScheme:async()=>(await pt(e)).dispatch(lt.GetSelectedScheme,void 0)}),ma=async e=>{const t=await ct();await t.dispatch("set-selected-scheme",e)},ka=async e=>{const t=await ia();await t.dispatch(ra.UpdatePlatformThemeScheme,{scheme:e})},ba=async e=>{const t=await be();return Promise.all(t.map((async t=>{const a=await qt(t.identity);await a.dispatch(ea.SetSelectedScheme,e)})))},ya=async e=>{const t=new Array,a=fin.Application.getCurrentSync(),n=await a.getViews();for(const e of n){-1!==e.identity.name.indexOf(de.BrowserAddressSearchPrefix)&&t.push(e.identity);-1!==(await e.getOptions()).url.indexOf(K.EnterpriseBrowser)&&t.push(e.identity)}return Promise.all(t.map((async t=>{const a=await qt(t,"theme-change-listener");await a.dispatch(ea.SetSelectedScheme,e)})))},fa=async e=>{const t=await ye();return Promise.all(t.map((async t=>{const a=await qt(t.identity);await a.dispatch(ea.SetSelectedScheme,e)})))},Sa=async e=>{const t=await qt({uuid:we.uuid,name:de.EnterpriseContextMenu});await t.dispatch(ea.SetSelectedScheme,e)},va=async e=>{const t=await qt({uuid:we.uuid,name:de.EnterpriseBookmarkDialogWindow});await t.dispatch(ea.SetSelectedScheme,e).catch((()=>{}))},Pa=async e=>{const t=await qt({uuid:we.uuid,name:de.DropdownMenu});await t.dispatch(ea.SetSelectedScheme,e).catch((()=>{}))},Ca=async e=>{const t=await qt({uuid:we.uuid,name:de.DockCompanion});await t.dispatch(ea.SetSelectedScheme,e).catch((()=>{}))},Ma=async e=>{try{const t=ha();t.setScheme(e),await Promise.all([t.trySynchronizeWorkspaceStorage(),ya(e),ka(e),ba(e),fa(e),Sa(e),ma(e),va(e),Pa(e),Ca(e)])}catch(e){console.error("failed to set the selected scheme: ",e)}},xa=()=>{try{return ha().getScheme()}catch(e){console.error("failed to get the selected scheme: ",e)}},Ia=e=>{const t=fin.Platform.wrapSync(e);let a;return Object.assign(t,{applySnapshot:async(t,a)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,a)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,a,n)=>fin.Platform.wrapSync(e).createView(t,a,n),launchApp:async t=>{console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:R,name:B,entityType:E||"unknown"});return(await pt(e)).dispatch(lt.LaunchApp,t)},_invokeCustomAction:async(t,a)=>{const n=await pt(e),o={actionId:t,payload:{...a,callerType:a.callerType||C.API}};return n.dispatch(lt.InvokeCustomActionInternal,o)},_requestQuitPlatformDialog:async t=>(await pt(e)).dispatch(lt.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await pt(e)).dispatch(lt.GetCurrentWorkspace,void 0),applyWorkspace:async(t,a)=>(await pt(e)).dispatch(lt.ApplyWorkspace,{...t,options:a}),restoreLastSavedWorkspace:async t=>(await pt(e)).dispatch(lt.RestoreLastSavedWorkspaceInternal,t),setActiveWorkspace:async t=>(await pt(e)).dispatch(lt.SetActiveWorkspace,t),getLanguage:async()=>(await pt(e)).dispatch(lt.GetLanguage),_getLanguageResources:async()=>(await pt(e)).dispatch(lt.GetLanguageResourcesInternal),setLanguage:async t=>(await pt(e)).dispatch(lt.SetLanguage,t),_raiseAnalytics:async t=>{if(a||(a=await ut(e)),"object"==typeof a&&a?.analytics?.isSupported){return(await pt(e)).dispatch(lt.Analytics,t)}e.uuid},getNotificationsConfig:async()=>(await pt(e)).dispatch(lt.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await pt(e)).dispatch(lt.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await pt(e)).dispatch(lt.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await pt(e)).dispatch(lt.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await pt(e)).dispatch(lt.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await pt(e)).dispatch(lt.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await pt(e)).dispatch(lt.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await pt(e)).dispatch(lt.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await pt(e)).dispatch(lt.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await pt(e)).dispatch(lt.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await pt(e)).dispatch(lt.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await pt(e)).dispatch(lt.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await pt(e)).dispatch(lt.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await pt(e)).dispatch(lt.FocusAndExpandSearchInternal),Theme:ga(e),Browser:na(e),Storage:oa(e)})},Aa=()=>Ia(fin.me.identity),Wa={contextMenuOptions:{enabled:!0,template:["spellCheck","separator","print","separator","cut","copy","paste","undo","redo","selectAll","inspect","reload"]},downloadShelf:{enabled:!0}};function Da(e,t){return At({},Wa,t,e)}const Ta="internal-generated-view-",Ra=(e,t)=>e.content?{...e,content:e.content.map((e=>Ra(e,t)))}:{...e,componentState:t(e.componentState)},Ba=(e,t)=>{return a=Da(e,t),{...a,name:a.name?a.name:`internal-generated-view-${Rt()}`,_internalWorkspaceData:{...a._internalWorkspaceData,viewIdentifier:a._internalWorkspaceData?.viewIdentifier||Rt()}};// removed by dead control flow
 var a; },Ea=e=>({...e,name:void 0}),Fa=e=>{const t={...e};return Ra(t,Ea)},Va=e=>{const t={...e};return Ra(t,(e=>e.name&&e.name.startsWith(Ta)?Ea(e):e))},Na=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const a=Na(e.content);t.push(...a)})),t},La=async(e,t,a=we)=>{let n;if(await ke(a)){n=(await pe(a).getOptions()).layout||{settings:{}}}return{...n,content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{title:e,url:t}}]}]}};new Map,new Map;const _a=(e,t)=>{const a=Na(t.content);return{...Ra(e,(e=>{const t=a.find((t=>t._internalWorkspaceData?.viewIdentifier===e._internalWorkspaceData?.viewIdentifier)),n=t?t.isClosable:e.isClosable;return{...e,isClosable:n}})),settings:t.settings}},Oa=e=>e?Na(e).length:0,Ua=(Tt()((async e=>{try{const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),a=t.content?Na(t.content):[],n=a.length;n>1?(e=>{"multiView"!==e.attachedPageType&&Aa().Browser.wrapSync(we).updatePage({pageId:e.pageId,page:{singleViewName:null,attachedPageType:"multiView"}})})(e):1===n&&(async(e,t)=>{const a=Aa().Browser.wrapSync(we);if("singleView"!==e.attachedPageType){const n=await Ut(e),o=await Aa().Browser.getUniquePageTitle();delete n.layout;const r={...n,singleViewName:t,title:o,hasUnsavedChanges:!1,attachedPageType:"singleView"};await a.updatePage({pageId:e.pageId,page:r})}})(e,a[0].name),await(async(e,t)=>{const a=Gt({...we,layoutName:e.layoutContainerKey}),n=await a.isShowingTabs();t>1?n||await a.show():1===t&&n&&await a.hide({settings:{reorderEnabled:!0}})})(e,n)}catch(e){}}),50,{leading:!1,trailing:!0}),__webpack_require__(/*! react-i18next */ "../../node_modules/react-i18next/dist/es/index.js")),Ga=__webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/cjs/i18next.js");var Ha=a.n(Ga);const $a=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":"","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":" Web ","contextMenu.openViews":" Web ","contextMenu.reload":"Reload CN","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate CN","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab CN","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value CN","saveModal.alreadyExists":"{{title}} ","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":" ({{count}}) ","defaultPageTitle":"Untitled Page CN","enterpriseDefaultPageTitle":"Untitled Supertab CN","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":" {{workspace}} ","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":" {{workspace}} ","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":" {{workspace}} ","closePlatform.warning":"","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":" {{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. CN","successIndicator.pageCopySaved":" {{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":" {{colorName}} ","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":" {{layoutName}} ","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete CN","appResults.header":"Featured Content CN","recentlyClosed.header":"Recently Closed CN","landingPage.subheader":"Apps and websites selected by an admin will show here CN","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":" {{title}} ","aria.closePage":" {{title}} ","aria.closeTab":" {{title}}","aria.title":"","aria.closeContextGroup":"","aria.colorLinking":"","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":" {{name}} ","aria.assignColorLinkingCurrentViews":" {{name}} ","aria.setColorLinkingActiveView":" {{name}} ","aria.setColorLinkingActiveViews":" {{name}} ","aria.escapeLayoutDialog":"","global.supertab":"Supertab CN","global.tab":"Tab CN","bookmarks.editBookmark":"Edit Bookmark CN","bookmarks.bookmarkAdded":"Bookmark added CN","bookmarks.done":"Done CN","bookmarks.remove":"Remove CN","bookmarks.bookmarksPanel":"Bookmarks Panel CN","bookmarks.closePanel":"Close Bookmarks Panel CN","bookmarks.bookmarks":"Bookmarks CN","bookmarks.allBookmarks":"All Bookmarks CN","bookmarks.favorites":"Favorites CN","bookmarks.searchBookmarks":"Search Bookmarks CN","bookmarks.clearSearchInput":"Clear Search Input CN","bookmarks.createFolder":"Create New Folder CN","bookmarks.exitFolder":"Exit Folder CN","bookmarks.newFolder":"New Folder CN","bookmarks.namedFolder":"{{name}} Folder CN","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings CN","bookmarks.folderSettings":"{{name}} Folder Settings CN","bookmarks.noResultsFound":"No results found CN","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search CN","bookmarks.nothingToShow":"Nothing to show yet CN","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder CN","bookmarks.resultsFoundIn":"Results found in {{name}} CN","bookmarks.resultsInOtherFolders":"Results found in other folders CN","bookmarks.allResultsFoundIn":"All results found in CN","bookmarks.editName":"Edit Name CN","bookmarks.move":"Move CN","bookmarks.bookmarkAddedTitle":"Bookmark Added CN","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" CN","bookmarks.bookmarkEditedTitle":"Bookmark Edited CN","enterpriseContextMenu.saveSupertab":"Save Supertab CN","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... CN","enterpriseContextMenu.duplicate":"Duplicate CN","enterpriseContextMenu.deleteSupertab":"Delete Supertab CN","enterpriseContextMenu.newTab":"New Tab CN","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As CN","enterpriseSaveModal.renameSupertab":"Rename CN","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. CN","enterpriseSaveModal.closeTab":"Close Tab CN","enterpriseSaveModal.closeSupertab":"Close Supertab CN","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? CN","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. CN","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? CN","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. CN","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved CN","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. CN","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted CN","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. CN","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab CN","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab CN","enterpriseCommandBar.switchToSupertab":"Switch to Supertab CN","enterpriseCommandBar.goTo":"Go to {{type}} CN","enterpriseCommandBar.viewMore":"View More CN","contextMenu.quitEnterpriseBrowser":"Quit CN"}'),Ka=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":" Storefront","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":"","contextMenu.openViews":"","contextMenu.reload":"Reload ZH","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate ZH","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab ZH","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value ZH","saveModal.alreadyExists":"{{title}} ","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":" ({{count}}) ","defaultPageTitle":"Untitled Page ZH","enterpriseDefaultPageTitle":"Untitled Supertab ZH","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":" {{workspace}}","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":" {{workspace}} ","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":" {{workspace}} ","closePlatform.warning":"APP ","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":" OS ","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":" {{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. ZH","successIndicator.pageCopySaved":" {{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":"{{colorName}} ","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":"{{layoutName}} ","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete ZH","appResults.header":"Featured Content ZH","recentlyClosed.header":"Recently Closed ZH","landingPage.subheader":"Apps and websites selected by an admin will show here ZH","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":"{{title}} ","aria.closePage":" {{title}} ","aria.closeTab":" {{title}}","aria.title":"","aria.closeContextGroup":" Esc ","aria.colorLinking":"","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":" {{name}} ","aria.assignColorLinkingCurrentViews":" {{name}} ","aria.setColorLinkingActiveView":" {{name}} ","aria.setColorLinkingActiveViews":" {{name}} ","aria.escapeLayoutDialog":" Esc ","global.supertab":"Supertab ZH","global.tab":"Tab ZH","bookmarks.editBookmark":"Edit Bookmark ZH","bookmarks.bookmarkAdded":"Bookmark added ZH","bookmarks.done":"Done ZH","bookmarks.remove":"Remove ZH","bookmarks.bookmarksPanel":"Bookmarks Panel ZH","bookmarks.closePanel":"Close Bookmarks Panel ZH","bookmarks.bookmarks":"Bookmarks ZH","bookmarks.allBookmarks":"All Bookmarks ZH","bookmarks.favorites":"Favorites ZH","bookmarks.searchBookmarks":"Search Bookmarks ZH","bookmarks.clearSearchInput":"Clear Search Input ZH","bookmarks.createFolder":"Create New Folder ZH","bookmarks.exitFolder":"Exit Folder ZH","bookmarks.newFolder":"New Folder ZH","bookmarks.namedFolder":"{{name}} Folder ZH","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings ZH","bookmarks.folderSettings":"{{name}} Folder Settings ZH","bookmarks.noResultsFound":"No results found ZH","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search ZH","bookmarks.nothingToShow":"Nothing to show yet ZH","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder ZH","bookmarks.resultsFoundIn":"Results found in {{name}} ZH","bookmarks.resultsInOtherFolders":"Results found in other folders ZH","bookmarks.allResultsFoundIn":"All results found in ZH","bookmarks.editName":"Edit Name ZH","bookmarks.move":"Move ZH","bookmarks.bookmarkAddedTitle":"Bookmark Added ZH","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" ZH","bookmarks.bookmarkEditedTitle":"Bookmark Edited ZH","enterpriseContextMenu.saveSupertab":"Save Supertab ZH","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... ZH","enterpriseContextMenu.duplicate":"Duplicate ZH","enterpriseContextMenu.deleteSupertab":"Delete Supertab ZH","enterpriseContextMenu.newTab":"New Tab ZH","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As ZH","enterpriseSaveModal.renameSupertab":"Rename ZH","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. ZH","enterpriseSaveModal.closeTab":"Close Tab ZH","enterpriseSaveModal.closeSupertab":"Close Supertab ZH","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? ZH","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. ZH","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? ZH","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. ZH","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved ZH","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. ZH","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted ZH","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. ZH","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab ZH","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab ZH","enterpriseCommandBar.switchToSupertab":"Switch to Supertab ZH","enterpriseCommandBar.goTo":"Go to {{type}} ZH","enterpriseCommandBar.viewMore":"View More ZH","contextMenu.quitEnterpriseBrowser":"Quit ZH"}'),za=JSON.parse('{"contextMenu.newWindow":"New Window","contextMenu.newPage":"New Page","contextMenu.restore":"Restore to Last Saved Changes","contextMenu.switchWorkspace":"Switch Workspace","contextMenu.appearance":"Appearance","contextMenu.saveWorkspace":"Save Workspace","contextMenu.saveWorkspaceAs":"Save Workspace As...","contextMenu.renameWorkspace":"Rename Workspace","contextMenu.deleteWorkspace":"Delete Workspace","contextMenu.downloads":"Downloads","contextMenu.savePage":"Save Page","contextMenu.savePageAs":"Save Page As...","contextMenu.print":"Print...","contextMenu.printScreen":"Print Screen","contextMenu.closeWindow":"Close Window","contextMenu.openStorefront":"Open Storefront","contextMenu.quitPlatform":"Quit {{platformLabel}}","contextMenu.newView":"New View","contextMenu.openView":"Open View with Default Web Browser","contextMenu.openViews":"Open Views with Default Web Browser","contextMenu.reload":"Reload","contextMenu.reloadView":"Reload View","contextMenu.reloadViews":"Reload Views","contextMenu.duplicate":"Duplicate","contextMenu.duplicateView":"Duplicate View","contextMenu.duplicateViews":"Duplicate Views","contextMenu.addView":"Add View to Channel","contextMenu.addViews":"Add Views to Channel","contextMenu.removeView":"Remove View from Channel","contextMenu.removeViews":"Remove Views from Channel","contextMenu.closeView":"Close View","contextMenu.closeViews":"Close Views","contextMenu.closeTab":"Close Tab","contextMenu.duplicatePage":"Duplicate Page","contextMenu.submenu.print":"Print","contextMenu.submenu.printAll":"Print All","saveMenu.saveWorkspaceAs":"Save Workspace As","saveMenu.savePageAs":"Save Page As","saveModal.enterValue":"Please enter a value","saveModal.alreadyExists":"{{title}} already exists.","saveModal.pleaseEnterValidName":"Please enter a valid name","saveModal.renamePage":"Rename Page","saveModal.closePage":"Close Page","saveModal.discardChanges":"Discard Changes","saveModal.discardAll":"Discard All","saveModal.saveAll":"Save All","saveModal.savePagesCount":"Save ({{count}}) pages before closing?","defaultPageTitle":"Untitled Page","enterpriseDefaultPageTitle":"Untitled Supertab","addNewPage":"New Page","addNewTab":"Add New Tab","addNewView":"New View","restoreModal":"Are you sure you want to restore to last saved changes?","modal.discardWarning":"Any unsaved changes will be discarded","modal.discardPageWarning":"Any unsaved changes to this page will be lost.","modal.saveChangesPrompt":"Save changes before closing?","modal.pageClose":"Page Close","switchWorkspaceModal":"Are you sure you want to switch to {{workspace}}?","switchWorkspaceModal.warning":"Any unsaved changes will be discarded","deleteWorkspaceModal":"Are you sure you want to permanently delete this workspace?","replaceWorkspaceModal.warning":"A Workspace with the name {{workspace}} already exists. Do you want to replace it?","replaceWorkspaceModal.warning.body":"A workspace with the same name already exists. Replacing it will overwrite its current contents.","replaceWorkspaceModal.replace":"Replace","closePlatform":"Close the platform","closePlatform.workspace":"Close the {{workspace}} Platform","closePlatform.warning":"Closing a platform will close any workspaces, apps or any processes that are running.","back":"Back","forward":"Forward","reload":"Reload","green":"Green","purple":"Purple","orange":"Orange","red":"Red","pink":"Pink","yellow":"Yellow","theme.light":"Light","theme.dark":"Dark","theme.system":"Sync with OS setting","toolbar.hideTabs":"Hide Tabs","toolbar.showTabs":"Show Tabs","toolbar.lock":"Lock","toolbar.unlock":"Unlock","toolbar.colorLinking":"Color Linking","toolbar.changeLayout":"Change Layout","toolbar.saveMenu":"Save Menu","toolbar.maximizeWindow":"Maximize Window","toolbar.restoreWindow":"Restore Window","toolbar.minimizeWindow":"Minimize Window","changeLayout.fullWidth":"Full Width","changeLayout.columns":"Columns","changeLayout.Rows":"Rows","changeLayout.Grid":"Grid","successIndicator.workspaceSwitched":"Workspace Switched","successIndicator.hidden":"Tabs are Hidden","successIndicator.shown":"Tabs are Shown","successIndicator.locked":"Page is Locked","successIndicator.unlocked":"Page is Unlocked","successIndicator.workspaceSaved":"Workspace saved","successIndicator.workspaceSavedAs":"Workspace saved as {{workspace}}","successIndicator.workspaceRenamed":"Workspace renamed","successIndicator.pageSaved":"Page Saved","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved.","successIndicator.pageCopySaved":"Page saved as {{title}}","successIndicator.pageRenamed":"Page renamed","successIndicator.contextGroupApplied":"Context group applied","successIndicator.namedContextGroupApplied":"{{colorName}} context group applied","successIndicator.viewRemoved":"View removed from context group","successIndicator.viewsRemoved":"Views removed from context group","successIndicator.layoutApplied":"{{layoutName}} layout applied","successIndicator.workspaceDeleted":"Workspace deleted","errorIndicator.pageSaveFailed":"Page failed to save","errorIndicator.workspaceSaveFailed":"Workspace failed to save","errorIndicator.failedToDuplicatePage":"Failed to duplicate Page","infoIndicator.colorLinkAttempt":"We attempted to color link this tab, but the site/content owner has not enabled it yet","global.cancel":"Cancel","global.confirm":"Confirm","global.save":"Save","global.delete":"Delete","appResults.header":"Featured Content","recentlyClosed.header":"Recently Closed","landingPage.subheader":"Apps and websites selected by an admin will show here","aria.openBrowser":"Open Browser Menu","aria.browserTabs":"Browser Tabs","aria.viewTab":"View Tab for {{title}}","aria.closePage":"Close Page Tab Button for {{title}}","aria.closeTab":"Close Tab {{title}}","aria.title":"Title","aria.closeContextGroup":"Use escape to close context group selection dialog","aria.colorLinking":"Show or hide color linking","aria.applyColorLinking":"Please select a view to apply color linking","aria.assignColorLinkingCurrentView":"Current view assigned to {{name}} context group","aria.assignColorLinkingCurrentViews":"Current views assigned to {{name}} context group","aria.setColorLinkingActiveView":"Set active view to {{name}} context group","aria.setColorLinkingActiveViews":"Set active views to {{name}} context group","aria.escapeLayoutDialog":"Use escape to close change layout dialog","global.supertab":"Supertab","global.tab":"Tab","bookmarks.editBookmark":"Edit Bookmark","bookmarks.bookmarkAdded":"Bookmark added","bookmarks.done":"Done","bookmarks.remove":"Remove","bookmarks.bookmarksPanel":"Bookmarks Panel","bookmarks.closePanel":"Close Bookmarks Panel","bookmarks.bookmarks":"Bookmarks","bookmarks.allBookmarks":"All Bookmarks","bookmarks.favorites":"Favorites","bookmarks.searchBookmarks":"Search Bookmarks","bookmarks.clearSearchInput":"Clear Search Input","bookmarks.createFolder":"Create New Folder","bookmarks.exitFolder":"Exit Folder","bookmarks.newFolder":"New Folder","bookmarks.namedFolder":"{{name}} Folder","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings","bookmarks.folderSettings":"{{name}} Folder Settings","bookmarks.noResultsFound":"No results found","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search","bookmarks.nothingToShow":"Nothing to show yet","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder","bookmarks.resultsFoundIn":"Results found in {{name}}","bookmarks.resultsInOtherFolders":"Results found in other folders","bookmarks.allResultsFoundIn":"All results found in","bookmarks.editName":"Edit Name","bookmarks.move":"Move","bookmarks.bookmarkAddedTitle":"Bookmark Added","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\"","bookmarks.bookmarkEditedTitle":"Bookmark Edited","enterpriseContextMenu.saveSupertab":"Save Supertab","enterpriseContextMenu.saveSupertabAs":"Save Supertab As...","enterpriseContextMenu.duplicate":"Duplicate","enterpriseContextMenu.deleteSupertab":"Delete Supertab","enterpriseContextMenu.newTab":"New Tab","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As","enterpriseSaveModal.renameSupertab":"Rename","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab.","enterpriseSaveModal.closeTab":"Close Tab","enterpriseSaveModal.closeSupertab":"Close Supertab","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing?","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost.","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab?","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent.","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved.","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted.","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab","enterpriseCommandBar.switchToSupertab":"Switch to Supertab","enterpriseCommandBar.goTo":"Go to {{type}}","enterpriseCommandBar.viewMore":"View More","contextMenu.quitEnterpriseBrowser":"Quit","dock.removeFavorite":"Remove"}'),Ja=JSON.parse('{"contextMenu.newWindow":"Neues Fenster","contextMenu.newPage":"Neue Seite","contextMenu.restore":"Wiederherstellen der zuletzt gespeicherten nderungen","contextMenu.switchWorkspace":"Workspace wechseln","contextMenu.appearance":"Erscheinungsbild","contextMenu.saveWorkspace":"Workspace speichern","contextMenu.saveWorkspaceAs":"Workspace speichern unter...","contextMenu.renameWorkspace":"Workspace umbenennen","contextMenu.deleteWorkspace":"Workspace lschen","contextMenu.downloads":"Downloads","contextMenu.savePage":"Seite speichern","contextMenu.savePageAs":"Seite speichern unter...","contextMenu.print":"Drucken...","contextMenu.printScreen":"Bildschirmansicht drucken","contextMenu.closeWindow":"Fenster schlieen","contextMenu.openStorefront":"Schaufenster ffnen","contextMenu.quitPlatform":"Plattform verlassen","contextMenu.newView":"Neue Ansicht","contextMenu.openView":"Ansicht mit Standard-Webbrowser ffnen","contextMenu.openViews":"Ansichten mit Standard-Webbrowser ffnen","contextMenu.reload":"Reload DE","contextMenu.reloadView":"Ansicht neu laden","contextMenu.reloadViews":"Ansichten neu laden","contextMenu.duplicate":"Duplicate DE","contextMenu.duplicateView":"Ansicht duplizieren","contextMenu.duplicateViews":"Ansichten duplizieren","contextMenu.addView":"Ansicht zum Channel hinzufgen","contextMenu.addViews":"Ansichten zum Channel hinzufgen","contextMenu.removeView":"Ansicht aus dem Channel entfernen","contextMenu.removeViews":"Ansichten aus dem Channel entfernen","contextMenu.closeView":"Ansicht schlieen","contextMenu.closeViews":"Ansichten schlieen","contextMenu.closeTab":"Close Tab DE","contextMenu.duplicatePage":"Seite duplizieren","contextMenu.submenu.print":"Drucken","contextMenu.submenu.printAll":"Alle drucken","saveMenu.saveWorkspaceAs":"Workspace speichern unter","saveMenu.savePageAs":"Seite speichern unter","saveModal.enterValue":"Please enter a value DE","saveModal.alreadyExists":"{{title}} existiert bereits.","saveModal.pleaseEnterValidName":"Bitte geben Sie einen gltigen Namen ein","saveModal.renamePage":"Seite umbenennen","saveModal.closePage":"Seite schlieen","saveModal.discardChanges":"nderungen verwerfen","saveModal.discardAll":"Alle verwerfen","saveModal.saveAll":"Alle speichern","saveModal.savePagesCount":"({{count}}) Seiten vor dem Schlieen speichern?","defaultPageTitle":"Untitled Page DE","enterpriseDefaultPageTitle":"Untitled Supertab DE","addNewPage":"Neue Seite hinzufgen","addNewTab":"Neuen Tab hinzufgen","addNewView":"Neue Ansicht","restoreModal":"Sind Sie sicher, dass Sie die zuletzt gespeicherten nderungen wiederherstellen wollen?","modal.discardWarning":"Alle nicht gespeicherten nderungen werden verworfen","modal.discardPageWarning":"Alle nicht gespeicherten nderungen auf dieser Seite gehen verloren.","modal.saveChangesPrompt":"nderungen vor dem Schlieen speichern?","modal.pageClose":"Seite schlieen","switchWorkspaceModal":"Sind Sie sicher, dass Sie zu {{workspace}}wechseln wollen?","switchWorkspaceModal.warning":"Alle nicht gespeicherten nderungen werden verworfen","deleteWorkspaceModal":"Sind Sie sicher, dass Sie diesen Workspace dauerhaft lschen wollen?","replaceWorkspaceModal.warning":"Ein Workspace mit dem Namen {{workspace}} existiert bereits. Mchten Sie ihn ersetzen?","replaceWorkspaceModal.warning.body":"Ein Workspace mit demselben Namen existiert bereits. Wenn Sie ihn ersetzen, wird der aktuelle Inhalt berschrieben.","replaceWorkspaceModal.replace":"Ersetzen","closePlatform":"Plattform schlieen","closePlatform.workspace":"Die {{workspace}} Plattform schlieen","closePlatform.warning":"Wenn Sie eine Plattform schlieen, werden alle Workspaces, Apps und laufenden Prozesse beendet.","back":"Zurck","forward":"Weiter","reload":"Neu laden","green":"Grn","purple":"Lila","orange":"Orange","red":"Rot","pink":"Pink","yellow":"Gelb","theme.light":"Hell","theme.dark":"Dunkel","theme.system":"Synchronisierung mit OS-Einstellung","toolbar.hideTabs":"Tabs ausblenden","toolbar.showTabs":"Tabs anzeigen","toolbar.lock":"Sperren","toolbar.unlock":"Freischalten","toolbar.colorLinking":"Farbverknpfung","toolbar.changeLayout":"Layout ndern","toolbar.saveMenu":"Men speichern","toolbar.maximizeWindow":"Fenster maximieren","toolbar.restoreWindow":"Fenster wiederherstellen","toolbar.minimizeWindow":"Fenster minimieren","changeLayout.fullWidth":"Volle Breite","changeLayout.columns":"Spalten","changeLayout.Rows":"Zeilen","changeLayout.Grid":"Raster","successIndicator.workspaceSwitched":"Workspace gewechselt","successIndicator.hidden":"Tabs sind ausgeblendet","successIndicator.shown":"Tabs werden angezeigt","successIndicator.locked":"Seite ist gesperrt","successIndicator.unlocked":"Seite ist freigeschaltet","successIndicator.workspaceSaved":"Workspace gespeichert","successIndicator.workspaceSavedAs":"Workspace gespeichert als {{workspace}}","successIndicator.workspaceRenamed":"Workspace umbenannt","successIndicator.pageSaved":"Seite gespeichert","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. DE","successIndicator.pageCopySaved":"Seite gespeichert als {{title}}","successIndicator.pageRenamed":"Seite umbenannt","successIndicator.contextGroupApplied":"Angewandte Kontextgruppe","successIndicator.namedContextGroupApplied":"{{colorName}} angewandte Kontextgruppe","successIndicator.viewRemoved":"Ansicht aus der Kontextgruppe entfernt","successIndicator.viewsRemoved":"Ansichten aus der Kontextgruppe entfernt","successIndicator.layoutApplied":"{{layoutName}} angewandtes Layout","successIndicator.workspaceDeleted":"Workspace gelscht","errorIndicator.pageSaveFailed":"Seite konnte nicht gespeichert werden","errorIndicator.workspaceSaveFailed":"Workspace konnte nicht gespeichert werden","errorIndicator.failedToDuplicatePage":"Seite kann nicht dupliziert werden","infoIndicator.colorLinkAttempt":"Wir haben versucht, diesem Tab eine Farbe zuordnen, aber der Eigentmer der Website/des Inhalts hat sie noch nicht aktiviert","global.cancel":"Abbrechen","global.confirm":"Besttigen","global.save":"Speichern","global.delete":"Delete DE","appResults.header":"Featured Content DC","recentlyClosed.header":"Recently Closed DC","landingPage.subheader":"Apps and websites selected by an admin will show here DE","aria.openBrowser":"Browser-Men ffnen","aria.browserTabs":"Browser-Tab","aria.viewTab":"Tab Ansicht fr {{title}}","aria.closePage":"Button Seite schlieen fr {{title}}","aria.closeTab":"Tab schlieen {{title}}","aria.title":"Bezeichnung","aria.closeContextGroup":"Verwenden Sie die Escape-Taste, um den Dialog zur Auswahl von Kontextgruppen zu schlieen","aria.colorLinking":"Farbverknpfung ein- oder ausblenden","aria.applyColorLinking":"Bitte whlen Sie eine Ansicht, um die Farbverknpfung anzuwenden","aria.assignColorLinkingCurrentView":"Aktuelle Ansicht, die der Kontextgruppe {{name}} zugeordnet ist","aria.assignColorLinkingCurrentViews":"Aktuelle Ansichten, die der Kontextgruppe {{name}} zugeordnet sind","aria.setColorLinkingActiveView":"Aktive Ansicht auf die Kontextgruppe {{name}} setzen","aria.setColorLinkingActiveViews":"Aktive Ansichten auf die Kontextgruppe {{name}} setzen","aria.escapeLayoutDialog":"Verwenden Sie die Escape-Taste, um den Dialog zur Layoutnderung zu schlieen","global.supertab":"Supertab DE","global.tab":"Tab DE","bookmarks.editBookmark":"Edit Bookmark DE","bookmarks.bookmarkAdded":"Bookmark added DE","bookmarks.done":"Done DE","bookmarks.remove":"Remove DE","bookmarks.bookmarksPanel":"Bookmarks Panel DE","bookmarks.closePanel":"Close Bookmarks Panel DE","bookmarks.bookmarks":"Bookmarks DE","bookmarks.allBookmarks":"All Bookmarks DE","bookmarks.favorites":"Favorites DE","bookmarks.searchBookmarks":"Search Bookmarks DE","bookmarks.clearSearchInput":"Clear Search Input DE","bookmarks.createFolder":"Create New Folder DE","bookmarks.exitFolder":"Exit Folder DE","bookmarks.newFolder":"New Folder DE","bookmarks.namedFolder":"{{name}} Folder DE","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings DE","bookmarks.folderSettings":"{{name}} Folder Settings DE","bookmarks.noResultsFound":"No results found DE","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search DE","bookmarks.nothingToShow":"Nothing to show yet DE","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder DE","bookmarks.resultsFoundIn":"Results found in {{name}} DE","bookmarks.resultsInOtherFolders":"Results found in other folders DE","bookmarks.allResultsFoundIn":"All results found in DE","bookmarks.editName":"Edit Name DE","bookmarks.move":"Move DE","bookmarks.bookmarkAddedTitle":"Bookmark Added DE","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" DE","bookmarks.bookmarkEditedTitle":"Bookmark Edited DE","enterpriseContextMenu.saveSupertab":"Save Supertab DE","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... DE","enterpriseContextMenu.duplicate":"Duplicate DE","enterpriseContextMenu.deleteSupertab":"Delete Supertab DE","enterpriseContextMenu.newTab":"New Tab DE","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As DE","enterpriseSaveModal.renameSupertab":"Rename DE","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. DE","enterpriseSaveModal.closeTab":"Close Tab DE","enterpriseSaveModal.closeSupertab":"Close Supertab DE","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? DE","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. DE","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? DE","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. DE","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved DE","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. DE","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted DE","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. DE","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab DE","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab DE","enterpriseCommandBar.switchToSupertab":"Switch to Supertab DE","enterpriseCommandBar.goTo":"Go to {{type}} DE","enterpriseCommandBar.viewMore":"View More DE","contextMenu.quitEnterpriseBrowser":"Quit DE"}'),qa=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":"","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":"","contextMenu.openViews":"","contextMenu.reload":"Reload JP","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate JP","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab JP","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value JP","saveModal.alreadyExists":"{{title}}","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":"{{count}}","defaultPageTitle":"Untitled Page JP","enterpriseDefaultPageTitle":"Untitled Supertab JP","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":"{{workspace}}","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":"{{workspace}}","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":"{{workspace}}","closePlatform.warning":"","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"OS","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":"{{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. JP","successIndicator.pageCopySaved":"{{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":"{{colorName}}","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":"{{layoutName}}","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete JP","appResults.header":"Featured content JP","recentlyClosed.header":"Recently Closed JP","landingPage.subheader":"Apps and websites selected by an admin will show here JP","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":"{{title}}","aria.closePage":"{{title}}","aria.closeTab":"{{title}}","aria.title":"","aria.closeContextGroup":"","aria.colorLinking":"/","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":"{{name}}","aria.assignColorLinkingCurrentViews":"{{name}}","aria.setColorLinkingActiveView":"{{name}}","aria.setColorLinkingActiveViews":"{{name}}","aria.escapeLayoutDialog":"","global.supertab":"Supertab JP","global.tab":"Tab JP","bookmarks.editBookmark":"Edit Bookmark JP","bookmarks.bookmarkAdded":"Bookmark added JP","bookmarks.done":"Done JP","bookmarks.remove":"Remove JP","bookmarks.bookmarksPanel":"Bookmarks Panel JP","bookmarks.closePanel":"Close Bookmarks Panel JP","bookmarks.bookmarks":"Bookmarks JP","bookmarks.allBookmarks":"All Bookmarks JP","bookmarks.favorites":"Favorites JP","bookmarks.searchBookmarks":"Search Bookmarks JP","bookmarks.clearSearchInput":"Clear Search Input JP","bookmarks.createFolder":"Create New Folder JP","bookmarks.exitFolder":"Exit Folder JP","bookmarks.newFolder":"New Folder JP","bookmarks.namedFolder":"{{name}} Folder JP","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings JP","bookmarks.folderSettings":"{{name}} Folder Settings JP","bookmarks.noResultsFound":"No results found JP","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search JP","bookmarks.nothingToShow":"Nothing to show yet JP","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder JP","bookmarks.resultsFoundIn":"Results found in {{name}} JP","bookmarks.resultsInOtherFolders":"Results found in other folders JP","bookmarks.allResultsFoundIn":"All results found in JP","bookmarks.editName":"Edit Name JP","bookmarks.move":"Move JP","bookmarks.bookmarkAddedTitle":"Bookmark Added JP","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" JP","bookmarks.bookmarkEditedTitle":"Bookmark Edited JP","enterpriseContextMenu.saveSupertab":"Save Supertab JP","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... JP","enterpriseContextMenu.duplicate":"Duplicate JP","enterpriseContextMenu.deleteSupertab":"Delete Supertab JP","enterpriseContextMenu.newTab":"New Tab JP","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As JP","enterpriseSaveModal.renameSupertab":"Rename JP","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. JP","enterpriseSaveModal.closeTab":"Close Tab JP","enterpriseSaveModal.closeSupertab":"Close Supertab JP","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? JP","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. JP","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? JP","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. JP","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved JP","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. JP","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted JP","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. JP","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab JP","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab JP","enterpriseCommandBar.switchToSupertab":"Switch to Supertab JP","enterpriseCommandBar.goTo":"Go to {{type}} JP","enterpriseCommandBar.viewMore":"View More JP","contextMenu.quitEnterpriseBrowser":"Quit JP"}'),Za=JSON.parse('{"contextMenu.newWindow":" ","contextMenu.newPage":" ","contextMenu.restore":"    ","contextMenu.switchWorkspace":"  ","contextMenu.appearance":"","contextMenu.saveWorkspace":"  ","contextMenu.saveWorkspaceAs":"    ...","contextMenu.renameWorkspace":"   ","contextMenu.deleteWorkspace":"  ","contextMenu.downloads":"","contextMenu.savePage":" ","contextMenu.savePageAs":"   ...","contextMenu.print":"...","contextMenu.printScreen":" ","contextMenu.closeWindow":" ","contextMenu.openStorefront":" ","contextMenu.quitPlatform":" ","contextMenu.newView":" ","contextMenu.openView":"    ","contextMenu.openViews":"    ","contextMenu.reload":"Reload KR","contextMenu.reloadView":"  ","contextMenu.reloadViews":"  ","contextMenu.duplicate":"Duplicate KR","contextMenu.duplicateView":" ","contextMenu.duplicateViews":" ","contextMenu.addView":"  ","contextMenu.addViews":"  ","contextMenu.removeView":"  ","contextMenu.removeViews":"  ","contextMenu.closeView":" ","contextMenu.closeViews":" ","contextMenu.closeTab":"Close Tab KR","contextMenu.duplicatePage":" ","contextMenu.submenu.print":"","contextMenu.submenu.printAll":" ","saveMenu.saveWorkspaceAs":"    ","saveMenu.savePageAs":"   ","saveModal.enterValue":"Please enter a value KR","saveModal.alreadyExists":"{{title}}()  .","saveModal.pleaseEnterValidName":"  .","saveModal.renamePage":"  ","saveModal.closePage":" ","saveModal.discardChanges":"  ","saveModal.discardAll":" ","saveModal.saveAll":" ","saveModal.savePagesCount":"  ({{count}}) ?","defaultPageTitle":"Untitled Page KR","enterpriseDefaultPageTitle":"Untitled Supertab KR","addNewPage":"  ","addNewTab":"  ","addNewView":" ","restoreModal":"    ?","modal.discardWarning":"     ","modal.discardPageWarning":"       .","modal.saveChangesPrompt":"    ?","modal.pageClose":" ","switchWorkspaceModal":"{{workspace}}() ?","switchWorkspaceModal.warning":"     ","deleteWorkspaceModal":"    ?","replaceWorkspaceModal.warning":"{{workspace}}()     . ?","replaceWorkspaceModal.warning.body":"     .     .","replaceWorkspaceModal.replace":"","closePlatform":" ","closePlatform.workspace":"{{workspace}}  ","closePlatform.warning":"      ,    .","back":" ","forward":" ","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"OS  ","toolbar.hideTabs":" ","toolbar.showTabs":" ","toolbar.lock":"","toolbar.unlock":" ","toolbar.colorLinking":" ","toolbar.changeLayout":" ","toolbar.saveMenu":" ","toolbar.maximizeWindow":" ","toolbar.restoreWindow":" ","toolbar.minimizeWindow":" ","changeLayout.fullWidth":" ","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"  ","successIndicator.hidden":" ","successIndicator.shown":" ","successIndicator.locked":" ","successIndicator.unlocked":"  ","successIndicator.workspaceSaved":"  ","successIndicator.workspaceSavedAs":"  {{workspace}}() ","successIndicator.workspaceRenamed":"   ","successIndicator.pageSaved":" ","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. KR","successIndicator.pageCopySaved":" {{title}}() ","successIndicator.pageRenamed":"  ","successIndicator.contextGroupApplied":"  ","successIndicator.namedContextGroupApplied":"{{colorName}}   ","successIndicator.viewRemoved":"   ","successIndicator.viewsRemoved":"   ","successIndicator.layoutApplied":"{{layoutName}}  ","successIndicator.workspaceDeleted":"  ","errorIndicator.pageSaveFailed":"  ","errorIndicator.workspaceSaveFailed":"   ","errorIndicator.failedToDuplicatePage":"  ","infoIndicator.colorLinkAttempt":"     /    .","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete KR","appResults.header":"Featured Content KR","recentlyClosed.header":"Recently Closed KR","landingPage.subheader":"Apps and websites selected by an admin will show here KR","aria.openBrowser":"  ","aria.browserTabs":" ","aria.viewTab":"{{title}}  ","aria.closePage":"{{title}}   ","aria.closeTab":" {{title}} ","aria.title":"","aria.closeContextGroup":"      ","aria.colorLinking":"    ","aria.applyColorLinking":"    .","aria.assignColorLinkingCurrentView":"{{name}}     ","aria.assignColorLinkingCurrentViews":"{{name}}     ","aria.setColorLinkingActiveView":"  {{name}}   ","aria.setColorLinkingActiveViews":"  {{name}}   ","aria.escapeLayoutDialog":"     ","global.supertab":"Supertab KR","global.tab":"Tab KR","bookmarks.editBookmark":"Edit Bookmark KR","bookmarks.bookmarkAdded":"Bookmark added KR","bookmarks.done":"Done KR","bookmarks.remove":"Remove KR","bookmarks.bookmarksPanel":"Bookmarks Panel KR","bookmarks.closePanel":"Close Bookmarks Panel KR","bookmarks.bookmarks":"Bookmarks KR","bookmarks.allBookmarks":"All Bookmarks KR","bookmarks.favorites":"Favorites KR","bookmarks.searchBookmarks":"Search Bookmarks KR","bookmarks.clearSearchInput":"Clear Search Input KR","bookmarks.createFolder":"Create New Folder KR","bookmarks.exitFolder":"Exit Folder KR","bookmarks.newFolder":"New Folder KR","bookmarks.namedFolder":"{{name}} Folder KR","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings KR","bookmarks.folderSettings":"{{name}} Folder Settings KR","bookmarks.noResultsFound":"No results found KR","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search KR","bookmarks.nothingToShow":"Nothing to show yet KR","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder KR","bookmarks.resultsFoundIn":"Results found in {{name}} KR","bookmarks.resultsInOtherFolders":"Results found in other folders KR","bookmarks.allResultsFoundIn":"All results found in KR","bookmarks.editName":"Edit Name KR","bookmarks.move":"Move KR","bookmarks.bookmarkAddedTitle":"Bookmark Added KR","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" KR","bookmarks.bookmarkEditedTitle":"Bookmark Edited KR","enterpriseContextMenu.saveSupertab":"Save Supertab KR","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... KR","enterpriseContextMenu.duplicate":"Duplicate KR","enterpriseContextMenu.deleteSupertab":"Delete Supertab KR","enterpriseContextMenu.newTab":"New Tab KR","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As KR","enterpriseSaveModal.renameSupertab":"Rename KR","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. KR","enterpriseSaveModal.closeTab":"Close Tab KR","enterpriseSaveModal.closeSupertab":"Close Supertab KR","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? KR","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. KR","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? KR","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. KR","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved KR","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. KR","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted KR","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. KR","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab KR","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab KR","enterpriseCommandBar.switchToSupertab":"Switch to Supertab KR","enterpriseCommandBar.goTo":"Go to {{type}} KR","enterpriseCommandBar.viewMore":"View More KR","contextMenu.quitEnterpriseBrowser":"Quit KR"}'),ja=JSON.parse('{"contextMenu.newWindow":" ","contextMenu.newPage":" ","contextMenu.restore":"   ","contextMenu.switchWorkspace":"  ","contextMenu.appearance":" ","contextMenu.saveWorkspace":"  ","contextMenu.saveWorkspaceAs":"   ...","contextMenu.renameWorkspace":"  ","contextMenu.deleteWorkspace":"  ","contextMenu.downloads":"","contextMenu.savePage":" ","contextMenu.savePageAs":"  ...","contextMenu.print":"...","contextMenu.printScreen":" ","contextMenu.closeWindow":" ","contextMenu.openStorefront":" Storefront","contextMenu.quitPlatform":"  ","contextMenu.newView":" ","contextMenu.openView":"    -  ","contextMenu.openViews":"    -  ","contextMenu.reload":"Reload RU","contextMenu.reloadView":" ","contextMenu.reloadViews":" ","contextMenu.duplicate":"Duplicate RU","contextMenu.duplicateView":" ","contextMenu.duplicateViews":" ","contextMenu.addView":"   ","contextMenu.addViews":"   ","contextMenu.removeView":"   ","contextMenu.removeViews":"   ","contextMenu.closeView":" ","contextMenu.closeViews":" ","contextMenu.closeTab":"Close Tab RU","contextMenu.duplicatePage":" ","contextMenu.submenu.print":"","contextMenu.submenu.printAll":" ","saveMenu.saveWorkspaceAs":"   ","saveMenu.savePageAs":"  ","saveModal.enterValue":"Please enter a value RU","saveModal.alreadyExists":"{{title}}  .","saveModal.pleaseEnterValidName":"  ","saveModal.renamePage":" ","saveModal.closePage":" ","saveModal.discardChanges":" ","saveModal.discardAll":" ","saveModal.saveAll":" ","saveModal.savePagesCount":" ({{count}})   ?","defaultPageTitle":"Untitled Page RU","enterpriseDefaultPageTitle":"Untitled Supertab RU","addNewPage":"  ","addNewTab":"  ","addNewView":" ","restoreModal":" ,      ?","modal.discardWarning":"    ","modal.discardPageWarning":"       .","modal.saveChangesPrompt":"   ?","modal.pageClose":" ","switchWorkspaceModal":" ,     {{workspace}}?","switchWorkspaceModal.warning":"    ","deleteWorkspaceModal":" ,       ?","replaceWorkspaceModal.warning":"    {{workspace}}  .    ?","replaceWorkspaceModal.warning.body":"       .       .","replaceWorkspaceModal.replace":"","closePlatform":" ","closePlatform.workspace":"  {{workspace}}","closePlatform.warning":"       ,    .","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"   ","toolbar.hideTabs":" ","toolbar.showTabs":" ","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"  ","toolbar.changeLayout":" ","toolbar.saveMenu":" ","toolbar.maximizeWindow":" ","toolbar.restoreWindow":" ","toolbar.minimizeWindow":" ","changeLayout.fullWidth":" ","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"  ","successIndicator.hidden":" ","successIndicator.shown":" ","successIndicator.locked":" ","successIndicator.unlocked":" ","successIndicator.workspaceSaved":"  ","successIndicator.workspaceSavedAs":"    {{workspace}}","successIndicator.workspaceRenamed":"  ","successIndicator.pageSaved":" ","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. RU","successIndicator.pageCopySaved":"   {{title}}","successIndicator.pageRenamed":" ","successIndicator.contextGroupApplied":"  ","successIndicator.namedContextGroupApplied":"  {{colorName}} ","successIndicator.viewRemoved":"    ","successIndicator.viewsRemoved":"    ","successIndicator.layoutApplied":" {{layoutName}} ","successIndicator.workspaceDeleted":"  ","errorIndicator.pageSaveFailed":"   ","errorIndicator.workspaceSaveFailed":"    ","errorIndicator.failedToDuplicatePage":"   ","infoIndicator.colorLinkAttempt":"      ,   /     ","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete RU","appResults.header":"Featured Content RU","recentlyClosed.header":"Recently Closed RU","landingPage.subheader":"Apps and websites selected by an admin will show here RU","aria.openBrowser":"  ","aria.browserTabs":" ","aria.viewTab":"  {{title}}","aria.closePage":"      {{title}}","aria.closeTab":"  {{title}}","aria.title":"","aria.closeContextGroup":"     ,  escape","aria.colorLinking":"     ","aria.applyColorLinking":" ,     ","aria.assignColorLinkingCurrentView":" ,    {{name}}","aria.assignColorLinkingCurrentViews":" ,    {{name}}","aria.setColorLinkingActiveView":"      {{name}}","aria.setColorLinkingActiveViews":"      {{name}}","aria.escapeLayoutDialog":"    ,  escape","global.supertab":"Supertab RU","global.tab":"Tab RU","bookmarks.editBookmark":"Edit Bookmark RU","bookmarks.bookmarkAdded":"Bookmark added RU","bookmarks.done":"Done RU","bookmarks.remove":"Remove RU","bookmarks.bookmarksPanel":"Bookmarks Panel RU","bookmarks.closePanel":"Close Bookmarks Panel RU","bookmarks.bookmarks":"Bookmarks RU","bookmarks.allBookmarks":"All Bookmarks RU","bookmarks.favorites":"Favorites RU","bookmarks.searchBookmarks":"Search Bookmarks RU","bookmarks.clearSearchInput":"Clear Search Input RU","bookmarks.createFolder":"Create New Folder RU","bookmarks.exitFolder":"Exit Folder RU","bookmarks.newFolder":"New Folder RU","bookmarks.namedFolder":"{{name}} Folder RU","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings RU","bookmarks.folderSettings":"{{name}} Folder Settings RU","bookmarks.noResultsFound":"No results found RU","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search RU","bookmarks.nothingToShow":"Nothing to show yet RU","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder RU","bookmarks.resultsFoundIn":"Results found in {{name}} RU","bookmarks.resultsInOtherFolders":"Results found in other folders RU","bookmarks.allResultsFoundIn":"All results found in RU","bookmarks.editName":"Edit Name RU","bookmarks.move":"Move RU","bookmarks.bookmarkAddedTitle":"Bookmark Added RU","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" RU","bookmarks.bookmarkEditedTitle":"Bookmark Edited RU","enterpriseContextMenu.saveSupertab":"Save Supertab RU","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... RU","enterpriseContextMenu.duplicate":"Duplicate RU","enterpriseContextMenu.deleteSupertab":"Delete Supertab RU","enterpriseContextMenu.newTab":"New Tab RU","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As RU","enterpriseSaveModal.renameSupertab":"Rename RU","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. RU","enterpriseSaveModal.closeTab":"Close Tab RU","enterpriseSaveModal.closeSupertab":"Close Supertab RU","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? RU","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. RU","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? RU","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. RU","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved RU","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved.RU","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted RU","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. RU","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab RU","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab RU","enterpriseCommandBar.switchToSupertab":"Switch to Supertab RU","enterpriseCommandBar.goTo":"Go to {{type}} RU","enterpriseCommandBar.viewMore":"View More RU","contextMenu.quitEnterpriseBrowser":"Quit RU"}');const Qa=Ha().t,Ya=async e=>{const t=await qt(e);return await t.dispatch(ea.GetPages)},Xa=async e=>(await qt(e.identity)).dispatch(ea.UpdatePageForWindow,e);let en=!1;async function tn(e,t){const a=!!t;let n=new Set;if(a){const{identity:e,pageId:a}=t,o=Aa().Browser.wrapSync(e),r=await o.getPage(a);r?.panels&&(n=new Set(r.panels.map((({viewOptions:e})=>e.name))))}return e.map((e=>{const t=e.viewOptions.name,o=t?.startsWith(Ta);o&&(!a||a&&!n.has(t))&&delete e.viewOptions.name;const r=(i=e.viewOptions,i.name||=`${Ta}${Rt()}`,i);var i;return{...e,viewOptions:{...r,uuid:we.uuid}}}))}async function an(e){for(const t of e)t.panels&&await on(t.panels)}const nn=e=>null!==e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&/ERR_([A-Z]+_*)+/.test(e.message);async function on(e){const t=e.map((e=>fin.Platform.getCurrentSync().createView(e.viewOptions,fin.me.identity).catch((e=>{if(!nn(e))throw e;console.error(e)}))));return await Promise.all(t)}const rn=(e,t)=>!t.find((t=>t===e)),sn=(e,t)=>`${e} (${t})`,cn=(e,t)=>{if(rn(e,t))return e;let a=1;const n=e.replace(/ *\(\d+\)$/,"");for(;!rn(sn(n,a),t);)a+=1;return sn(n,a)},ln=async()=>{const e=await be();return(await Promise.all(e.map((async e=>{try{return Ya(e.identity)}catch(t){JSON.stringify(e.identity);const a=await e.getOptions();return a.workspacePlatform?.pages||[]}})))).reduce(((e,t)=>e.concat(t)),[])},dn=async()=>(await pt(we)).dispatch(lt.GetSavedPages,void 0),un=async e=>(await pt(we)).dispatch(lt.GetSavedPage,e),pn=async(e,t)=>{const a=await(async e=>(await ln()).find((t=>t.pageId===e)))(e);return!a||a.title===t.title&&e===t.pageId||await Xa({identity:a.parentIdentity,pageId:e,page:{pageId:t.pageId,title:t.title}}),a},wn=async({page:e})=>{await pn(e.pageId,e),await(async e=>(await pt(we)).dispatch(lt.CreateSavedPage,e))({page:e})},hn=async e=>{await un(e)&&await(async e=>(await pt(we)).dispatch(lt.DeleteSavedPage,e))(e)},gn=async({pageId:e,page:t})=>{await pn(e,t);return await(async e=>(await pt(we)).dispatch(lt.UpdateSavedPage,e))({pageId:e,page:t})},mn=async e=>await un(e.pageId)?gn({pageId:e.pageId,page:e}):wn({page:e}),kn=async e=>{await(async e=>(await qt(e.identity)).dispatch(ea.AttachPagesToWindow,e))(e)},bn=async e=>{const t={...e.page,panels:e.page.panels&&await tn(e.page.panels,e)};t.panels&&await on(t.panels),await Xa({...e,page:t})},yn=async e=>{await(async e=>(await qt(e.identity)).dispatch(ea.DetachPagesFromWindow,e))(e)},fn=async e=>{await(async e=>(await qt(e.identity)).dispatch(ea.SetActivePageForWindow,e))(e)},Sn=e=>Ya(e),vn=async({identity:e,pageId:t})=>(await Sn(e)).find((e=>e.pageId===t)),Pn=async e=>{await(async e=>(await qt(e.identity)).dispatch(ea.ReorderPagesForWindow,e))(e)},Cn=new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise((e=>{this.locked?this.queue.push(e):(this.locked=!0,e())}))}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}};async function Mn(e){await Cn.lock();try{const t=Qa(en?"enterpriseDefaultPageTitle":"defaultPageTitle"),a=e??t,[n,o]=await Promise.all([dn(),ln()]),r=[...n,...o].map((({title:e})=>e));return cn(a,r)}finally{Cn.unlock()}}async function xn({page:e}){return{shouldShowModal:!(!e||!e.hasUnsavedChanges)}}async function In({page:e,identity:t}){const a=fin.Application.getCurrentSync();if((await a.getInfo()).initialOptions.enableBeforeUnload){const a=await fin.Application.getCurrentSync().getViews(),n=Na(e.layout.content).filter((e=>e.name&&a.some((t=>t.identity.name===e.name)))).map((e=>fin.View.wrapSync({name:e.name,uuid:t.uuid}))),o=await this.checkViewsForPreventUnload(n);if(o.viewsPreventingUnload.length>0){if((await this.getUserDecisionForBeforeUnload({...o,windowId:t,windowShouldClose:!1,closeType:"page"})).viewsToClose.length!==n.length)return e.pageId,{shouldPageClose:!1}}}return{shouldPageClose:!0}}async function An({pages:e,identity:t}){const a=await Promise.all(e.map((e=>this.shouldPageClose({page:e,closeType:"window",identity:t})))),{pagesPreventingClose:n,pagesNotPreventingClose:o}=e.reduce(((e,t,n)=>!a[n].shouldPageClose?{pagesNotPreventingClose:e.pagesNotPreventingClose,pagesPreventingClose:[...e.pagesPreventingClose,t]}:{pagesPreventingClose:e.pagesPreventingClose,pagesNotPreventingClose:[...e.pagesNotPreventingClose,t]}),{pagesPreventingClose:[],pagesNotPreventingClose:[]});return this.handlePagesAndWindowClose({pagesNotPreventingClose:o,pagesPreventingClose:n,identity:t})}async function Wn({pagesPreventingClose:e,pagesNotPreventingClose:t,identity:a}){return{shouldWindowClose:0===e.length}}async function Dn({page:e}){return Ut(e)}async function Tn(e){return{hasUnsavedChanges:!0}}const Rn=async()=>{const e=Aa(),t=(await be()).map((t=>e.Browser.wrapSync(t.identity)));await Promise.all(t.map((async e=>{const t=await e.getPages();await Promise.all(t.map((async t=>{t.title,await e.updatePage({pageId:t.pageId,page:{hasUnsavedChanges:!1}}),t.pageId,t.title,await mn({...t,hasUnsavedChanges:!1})})))})))},Bn=new Map,En=()=>Bn,Fn=e=>Bn.delete(e);let Vn=!1;const Nn=()=>{Vn||(Vn=!0,fin.Window.wrapSync(ge).once("closed",(()=>{Vn=!1,(async(e,t)=>{await $e(He(e),{source:"Store",...t})})(fin.me.identity,{type:"Navigation",action:"Close Store",skipValueHashing:!0})})))};let Ln,_n,On;const Un=async()=>(void 0===On&&(On=!!(await Q()).disableOpenFinAnalytics),On);async function Gn(e){e.forEach((e=>{var t,a;"Page"===e.type?"Open Page"===e.action?(t=e.data.uuid,a=e,Bn.set(t,a)):"Close Page"===e.action&&Fn(e.data.uuid):"Store"===e.source&&"Close"!==e.action&&Nn()})),await(async e=>{Ln?.sendToOpenFin&&(await Un()||e.forEach((async e=>{const t=At({},e);t.entityId&&(t.entityId.uuid=await xt(t.entityId.uuid),t.entityId.name=await xt(t.entityId.name)),!e.skipValueHashing&&"value"in t&&(t.value=await xt(t.value)),_n(t)})))})(e);const t=e.map((({skipValueHashing:e,...t})=>t));this.handleAnalytics(t)}const Hn=async e=>{Ln=e;Ln?.sendToOpenFin&&!await Un()&&(()=>{const e=N,t=e+K.Analytics,a=document.createElement("IFRAME");a.setAttribute("src",t),a.setAttribute("style","width: 0px !important"),a.setAttribute("style","height: 0px !important"),a.setAttribute("style","display: none !important"),document.body.appendChild(a),_n=async t=>{a.contentWindow.postMessage(t,e)}})();const t=fin.Application.getCurrentSync();t.addListener("view-created",(async e=>{var t;Ke({type:"View",action:"Open View",value:e.viewIdentity.name,data:{uuid:e.viewIdentity.uuid,url:await(t=e.viewIdentity,fin.View.wrapSync(t).getInfo().then((e=>e.url)))}})})),t.addListener("view-destroyed",(async e=>{Ke({type:"View",action:"Close View",value:e.viewIdentity.name,data:{uuid:e.viewIdentity.uuid}})})),t.addListener("window-closed",(e=>{e.name.startsWith(de.BrowserMenu)||(Ke({type:"Window",action:"Close Window",value:e.name,data:{uuid:e.uuid}}),(async()=>{const e=En(),t=await ln();if(t.length===e.size)return;const a=t.reduce(((e,t)=>e.set(t.pageId,1)),new Map);for(const[t,n]of e)a.has(t)||(n.action="Close Page",Ke(n),Fn(t))})())}))},$n=Ce({alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1});const Kn=function(e=$n){const t=new Map;return async(a,n,o,r,i)=>{if(t.has(a)){const{currentUrl:e,currentName:o}=t.get(a);if(e===n)return;const r=fin.Window.wrapSync({uuid:fin.me.uuid,name:o});await r.close()}const s=`${de.HomeInternal}-${Date.now()}${Math.random()}`;t.set(a,{currentUrl:n,currentName:s});const c=`New ${r} indicator: ${o} ${i}`,l=await fin.Platform.getCurrentSync().createWindow({...e,name:s,url:n});((e,t)=>{const a=document.createElement("div");a.setAttribute("role","alert"),a.setAttribute("aria-live",t||"polite"),(e=>{e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.padding="0",e.style.margin="-1px",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.border="0"})(a),document.body.appendChild(a),setTimeout((()=>{a.innerHTML=e}),300),setTimeout((()=>{document.body.removeChild(a)}),1e3)})(c),l.once("closed",(()=>{t.delete(a)}))}}();async function zn(e,t,a,n,o,r){if(a&&fin.me.name!==a){const i={type:e,message:t,parentBrowserName:a,secondaryMessage:n,icon:o,isEnterprise:r};return(await qt({uuid:fin.me.uuid,name:a})).dispatch(ea.ShowBrowserIndicator,i)}const i=new URLSearchParams;if(i.append("type",e),i.append("message",t),i.append("parentName",a||""),i.append("secondaryMessage",n||""),i.append("icon",o||""),i.append("isEnterprise",`${r}`||""),a){const e=pe(a?{uuid:R,name:a}:void 0),t=`${(s=await e.getBounds()).top},${s.left},${s.height},${s.width},${s.bottom},${s.right},${s.content.top},${s.content.left},${s.content.height},${s.content.width}`;i.append("parentBounds",t)}var s;const c=`${(r?await ae():await te())+K.BrowserIndicator}#${i.toString()}`;return Kn("browser"+a,c,t,e,n)}async function Jn(e,t,a,n){const o=await Ae(t);return zn("success",e,t.name,a,n,o)}const qn=async(e=we)=>{const{workspacePlatform:t}=await pe(e).getOptions(),a=t?.newPageUrl,n=t?.newTabUrl;return{newPageUrl:a,newTabUrl:n}},Zn=async(e=we)=>{const t=await Ae(e)||en,a=await Aa().Browser.getUniquePageTitle();let n;if(e&&await ke(e))n=await(async(e,t=we)=>{const{newPageUrl:a}=await qn(t);if(!a)throw new Error("Trying to create a new page without a newPageUrl set");return La(e,a,t)})(a,e);else if(t){const e=await ne();n=await La(a,e)}t&&(n.settings=n.settings??{},n.dimensions=n.dimensions??{},n.settings.hasHeaders=!1,n.settings.reorderEnabled=!0,n.dimensions.headerHeight=0);const o=await Ot(a,n);return t&&(o.hasUnsavedChanges=!1),o};var jn;!function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(jn||(jn={}));function Qn(e,t){return async(a,...n)=>{e.has(a)&&e.get(a).forEach((e=>e(...n))),t&&await t({event:a,payload:n})}}function Yn(e,t){return t&&t((t=>{const{event:a,payload:n}=t;e.has(a)&&e.get(a).forEach((e=>e(...n)))})),(t,a)=>{e.has(t)||e.set(t,new Set),e.get(t).add(a)}}function Xn(e){return(t,a)=>{e.has(t)||e.set(t,new Set);const n=e.get(t),o=(...e)=>{a(...e),n.delete(o)};n.add(o)}}function eo(e){return(t,a)=>{e.has(t)&&e.get(t).delete(a)}}const to={name:de.BrowserMenu,alwaysOnTop:!0,autoShow:!0,frame:!1,resizable:!1,backgroundColor:"#2f3136",smallWindow:!0,showTaskbarIcon:!1,backgroundThrottling:!1,saveWindowState:!1};function ao(e){const t={...to,...e};return t.url=function(e,t){if(!W)throw new Error("resolveAbsolutePath can only be used in a window");const a=t??window.location;if(/^(?:[a-z]+:)?\/\//i.test(e))return e;const n=`${a.protocol}//${a.hostname}`;return new URL(e,n).href}(t.url??""),t}const no=function(e){const t=new Map;return{emit:Qn(t,(t=>A&&fin.InterApplicationBus.publish(e,t))),addListener:Yn(t,(t=>A&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},e,t))),addListenerWithUUID:a=>Yn(t,(t=>A&&fin.InterApplicationBus.subscribe({uuid:a},e,t))),removeListener:eo(t),once:Xn(t)}}("window.menu"),oo=(e,t)=>fin.Window.wrapSync(e).updateOptions({opacity:t}),ro=e=>no.emit("response",e),io=Re((()=>le().getChildWindows()),500);const so=new Map;async function co(e,t){const a=ao(e),n={top:a.top,left:a.left,width:a.defaultWidth||a.width,height:a.defaultHeight||a.height};return t.set("parentName",fin.Window.getCurrentSync().identity.name),{name:a.name,bounds:n,route:`${a.url}#${t.toString()}`}}async function lo({options:e,parameters:t}){const a=t??new URLSearchParams,n=ao(e),{name:o,modalParentIdentity:r}=n;if(!a.has("isEnterprise")){const e=`${await(async e=>(De||(De=await Ae(e)),De))(r)}`;a.set("isEnterprise",e)}let i=await async function(e){return(await io()).find((t=>t.identity.name===e))}(o);if(i)await async function(e,t){const{name:a,bounds:n,route:o}=await co(e,t),r={uuid:fin.me.identity.uuid,name:a},i=fin.Window.wrapSync(r);await Promise.all([oo(r,0),i.setBounds(n)]),i.once("blurred",(()=>{oo(r,0),i.hide(),ro({name:r.name,data:{actionName:"Cancel"}})})),no.emit("update",a,n,o),await ro({name:a,data:{actionName:"Cancel"}})}(n,a);else{const{route:t,bounds:o}=await co(e,a);i=await async function(e,t,a){const n=ao(e),o=await vt(fin.me.identity),r=await Pt(fin.me.identity)===m.Dark,i=o?.theme;if(n.backgroundColor=i?.[r?m.Dark:m.Light]?.palette?.inputBackground||n.backgroundColor,!so.has(n.name))return new Promise((e=>{no.once("ready",(async t=>{if(t.name===n.name){const a=await so.get(n.name);a.once("blurred",(async()=>{if(oo(t,0),a.hide(),ro({name:n.name,data:{actionName:"Cancel"}}),a.identity.name===de.BrowserSaveMenu){const e=await a.getOptions();"submitting"!==e.customContext&&"error"!==e.customContext&&a.close()}else a.identity.name.startsWith(de.BrowserMenu)&&a.close()})),setTimeout((async()=>{await oo(t,1),1!==(await fin.Window.wrapSync(t).getOptions()).opacity&&oo(t,1)})),e(a)}}));const o=(async()=>{const e=await fin.Platform.getCurrentSync().createWindow(Ce({...n,opacity:0,url:t||n.url,defaultLeft:a?.left,defaultTop:a?.top,defaultWidth:a?.width,defaultHeight:a?.height},!0));return e.once("closed",(()=>{so.delete(n.name)})),e})();so.set(n.name,o)}));return so.get(n.name)}({...n},t,o)}return i}const uo=async({options:e,content:t,parameters:a})=>{const n=a??new URLSearchParams;n.set("content",JSON.stringify({...t,invocationId:Rt()}));const o={...e,name:`${e.name}--${e.modalParentIdentity?.name??""}`};return await lo({options:o,parameters:n}),new Promise((e=>{no.once("response",(async t=>{t.name===o.name&&e({data:t.data})}))}))},po=async(e,t,a)=>{const{windowOptions:n,content:o}=await(async(e,t)=>{const a=await Ae(t);return{title:"Switch Workspace",windowOptions:{url:await oe(a,!1)+K.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:t},content:{title:Qa("switchWorkspaceModal",{workspace:e}),body:Qa("switchWorkspaceModal.warning"),buttons:{right:[{label:Qa("global.cancel"),type:"secondary",id:"Cancel"},{label:Qa("global.confirm"),type:"primary",id:"Confirm"}]}}}})(t,a?void 0:e),r=await Le(n,e,a),i={...n,top:r.top,left:r.left};return"Confirm"===(await uo({options:i,content:o})).data.actionName},wo=async(e,t)=>{const{windowOptions:a,content:n}=await(async(e,t)=>{const a=await Ae(e);return{title:"Delete Workspace",windowOptions:{url:await oe(a,!1)+K.ResponseModal,name:de.BrowserMenu,defaultHeight:144,defaultWidth:410,modalParentIdentity:e},content:{title:Qa("deleteWorkspaceModal"),body:`${t}`,buttons:{right:[{label:Qa("global.cancel"),type:"secondary",id:"Cancel"},{label:Qa("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e,t),o=await Le(a,a.modalParentIdentity),r={...a,top:o.top,left:o.left};return"Confirm"===(await uo({options:r,content:n})).data.actionName},ho=async(e,t,a)=>{const{windowOptions:n,content:o}=await(async(e,t,a)=>{const n=await Ae(e);return{title:"Platform Quit",windowOptions:{url:await oe(n,!1)+K.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:a?void 0:e},content:{title:Qa("Platform"===t?"closePlatform":"closePlatform.workspace",{workspace:t}),body:Qa("closePlatform.warning"),buttons:{right:[{label:Qa("global.cancel"),type:"secondary",id:"Cancel"},{label:Qa("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e,t,a),r=await Le(n,e,a),i={...n,top:r.top,left:r.left};return"Confirm"===(await uo({options:i,content:o})).data.actionName},go=async e=>{const{windowOptions:t,content:a}=await(async e=>{const t=await Ae(e);return{title:"Restore Changes",windowOptions:{url:await oe(t,!1)+K.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:e},content:{title:Qa("restoreModal"),body:Qa("modal.discardWarning"),buttons:{right:[{label:Qa("global.cancel"),type:"secondary",id:"Cancel"},{label:Qa("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e),n=await Le(t,t.modalParentIdentity),o={...t,top:n.top,left:n.left};return"Confirm"===(await uo({options:o,content:a})).data.actionName},mo=async(e,t)=>{const{windowOptions:a,content:n}=await(async(e,t)=>{const a=await Ae(e);return{title:"Delete Page",windowOptions:{url:new URL(await oe(a,!1)+K.ResponseModal).toString(),name:de.BrowserMenu,defaultHeight:172,defaultWidth:464,modalParentIdentity:e},content:{title:Qa("enterpriseDeleteModal.deleteSupertab",{title:t}),body:Qa("enterpriseDeleteModal.deleteSupertabWarning"),buttons:{right:[{label:Qa("global.cancel"),type:"secondary",id:"Cancel",variant:a?"outline":void 0},{label:Qa("global.delete"),type:"primary",id:"Delete",variant:a?"submit":void 0}]}}}})(e,t),o=await Le(a,a.modalParentIdentity),r={...a,top:o.top,left:o.left};return"Delete"===(await uo({options:r,content:n})).data.actionName};async function ko({options:e,...t}){if(!(!!e?.skipPrompt||await po(e?.promptContainerWindowIdentity,t.title,e?.shouldCenterModalOnMonitor)))return!1;const a=Aa();return await a.applySnapshot(t.snapshot,{...e?.applySnapshotOptions??{},closeExistingWindows:e?.applySnapshotOptions?.closeExistingWindows??!0}),fo(t),zn("success",Qa("successIndicator.workspaceSwitched")).catch(console.warn),!0}async function bo(e){try{return await ko(e)}catch(e){return console.error("failed to apply the current workspace: ",e),!1}}async function yo(e){try{const t=await async function(){const e=Aa(),t=await e.getCurrentWorkspace();return(await e.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId))}();if(!t)return"not-saved-workspace";return!!e?.skipPrompt||await go(e?.promptContainerWindowIdentity)?(await ko({options:{skipPrompt:!0,applySnapshotOptions:e?.applySnapshotOptions},...t}),"success"):"user-declined"}catch(e){throw console.error("failed to restore last saved workspace: ",e),e}}function fo(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);sa(Bt.CurrentWorkspaceId,t)}catch(e){console.error("failed to set the active workspace: ",e)}}async function So(){const e=Aa(),t=await e.getSnapshot();return{workspaceId:Rt(),title:await Mo(),metadata:{APIVersion:O},snapshot:t}}async function vo(){if("undefined"==typeof localStorage)return So();const e=ca(Bt.CurrentWorkspaceId);if(!e)return So();const t=JSON.parse(e),a=Aa(),n=await a.getSnapshot();return{...t,metadata:{APIVersion:O},snapshot:n}}const Po=async()=>(await pt(we)).dispatch(lt.GetSavedWorkspaces,void 0),Co=async e=>await(async e=>(await pt(we)).dispatch(lt.GetSavedWorkspace,e))(e.workspaceId)?(async e=>(await pt(we)).dispatch(lt.UpdateSavedWorkspace,e))({workspaceId:e.workspaceId,workspace:e}):(async e=>(await pt(we)).dispatch(lt.CreateSavedWorkspace,e))({workspace:e});async function Mo(e="Untitled Workspace"){const t=(await Po()).map((({title:e})=>e));return cn(e,t)}const xo=e=>({...e,snapshot:{...e.snapshot,windows:e.snapshot.windows.map((e=>({...e,workspacePlatform:{...e.workspacePlatform,pages:e.workspacePlatform?.pages?.map((e=>({...e,hasUnsavedChanges:!1})))}})))}}),Io=async(e,t)=>{const a=t??Aa();await a.Storage.saveWorkspace(xo(e)),await(async()=>(await pt(we)).dispatch(lt.MarkUnsavedPagesAsSavedInternal,void 0))()},Ao=async e=>{const t=Aa(),a=await t.getCurrentWorkspace(),n=await t.Storage.getWorkspaces(),o=a.workspaceId;if(n.some((e=>e.workspaceId===o)))await Io(a,t),await t.setActiveWorkspace(a),await Jn(Qa("successIndicator.workspaceSaved"),e);else{const a=t.Browser.wrapSync(e);await a._openSaveModal({menuType:x.SAVE_WORKSPACE})}},Wo=e=>{Aa().Browser.wrapSync(e)._openSaveModal({menuType:x.SAVE_WORKSPACE_AS})},Do=async e=>{const t=Aa().Browser.wrapSync(e),{newPageUrl:a}=await qn(),n=await Zn(e),o=a||void 0;await t._addDefaultPage({identity:e,page:n,newPageUrl:o})},To=async(e,t)=>{const a=Aa().Browser.wrapSync(e),n=await Aa().Storage.getPages(),o=(await a.getPages()).find((e=>t?e.pageId===t:e.isActive)),r=n.some((e=>o.pageId===e.pageId)),i=await Ae(e);if(r)try{await Aa().Storage.savePage((d=o,{...d,hasUnsavedChanges:void 0,parentIdentity:void 0,isActive:void 0,layout:Va(d.layout)})),await a.updatePage({pageId:o.pageId,page:{hasUnsavedChanges:!1}}),Jn(Qa(i?"enterpriseSuccessIndicator.supertabSaved":"successIndicator.pageSaved"),e,Qa(i?"enterpriseSuccessIndicator.supertabHasBeenSaved":"successIndicator.pageHasBeenSaved",{title:o.title}))}catch{s=Qa("errorIndicator.pageSaveFailed"),c=o.parentIdentity.name,zn("error",s,c,l)}else a._openSaveModal({id:o.pageId,menuType:x.SAVE_PAGE});var s,c,l,d},Ro=async(e,t)=>{const a=Aa().Browser.wrapSync(e),n=(await a.getPages()).find((e=>t?e.pageId===t:e.isActive));a._openSaveModal({id:n.pageId,menuType:x.SAVE_PAGE_AS}),Ke({type:"Page Modal",action:"Select Save As",value:n.title,skipValueHashing:!0})},Bo={title:"Downloads",pageId:"downloads-page-id",layout:{content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{name:"show-download-view",url:"chrome://downloads/"}}]}]}},Eo=async e=>{const t=pe(e),a=await t.getCurrentViews(),n=(await Aa().Browser.wrapSync(t.identity).getPages()).find((e=>e.isActive));try{const t=(await Promise.all(a.map((async e=>({identity:e.identity,info:await fin.View.wrapSync(e.identity).getInfo()}))))).find((e=>"chrome://downloads/"===e.info.url));if(t)await fin.View.wrapSync(t.identity).focus();else{const t=Aa();if(n?.isLocked){const e=(await fin.Application.getCurrentSync().getChildWindows()).find((e=>"show-download-window"===e.identity.name));return void(e?await e.focus():t.Browser.createWindow({name:"show-download-window",workspacePlatform:{pages:[Bo]}}))}(await Aa().createView({name:"show-download-view",url:"chrome://downloads/",target:e},e)).focus()}}catch(e){console.error("Couldn't open downloads view",e)}},Fo=async e=>{const t=e.map((e=>fin.View.wrapSync(e).print()));await Promise.all(t)},Vo=e=>{const[t,a,n]=e.split(".").map((e=>"x"===e?0:1));return 100*t+10*a+1*n};class No extends Error{}const Lo=async e=>{try{const a=await async function(){const e=await Q(),t=e?.translationOverridesUrl??"https://workspace.openfin.co/workspace/assets/translation-override.json";if(""===t)throw new No("Empty string provided as url to translationOverridesUrl, overrides will not be fetched.");return await fetch(t).then((e=>e.json()))}();(t=(e=>{const t=O.split(".");return Object.keys(e).filter((e=>{const a=e.split(".");if(3!==a.length)return console.warn(`Encountered a translation override version string in an unsupported format: ${e}. Versions must be in A.B.C format where A, B, C are either integers or the wildcard symbol 'x'.`),!1;const[n,o,r]=a;return!(n!==t[0]&&"x"!==n||o!==t[1]&&"x"!==o||r!==t[2]&&"x"!==r)}))})(a),[...t].sort(((e,t)=>Vo(e)-Vo(t)))).forEach((t=>{const n=a[t];Object.keys(n).forEach((t=>{e.addResourceBundle(t,"translation",n[t],!0,!0)}))}))}catch(e){e instanceof No?console.warn(e.message):console.error("Error applying a translation override: ",e)}var t};function _o(){return Ha().language}const Oo=async e=>{Ho(e),(e=>{Ha().changeLanguage(e)})(e),await(async e=>{const t=await be();return Promise.all(t.map((async t=>{const a=await qt(t.identity);await a.dispatch(ea.SetSelectedLanguage,e)})))})(e)};function Uo(){if(!Ha().options.resources)throw new Error("No language resources found");return{currentLanguage:_o(),resources:Ha().options.resources}}async function Go(e="en-US"){Ho(e),function(e="en-US"){Ha().use(Ua.initReactI18next).init({lng:e,fallbackLng:"en-US",resources:{"en-US":{translation:za},"ja-JP":{translation:qa},"zh-CN":{translation:$a},"ko-KR":{translation:Za},"ru-RU":{translation:ja},"de-DE":{translation:Ja},"zh-Hant":{translation:Ka}},interpolation:{escapeValue:!1}})}(e),await Lo(Ha())}function Ho(e){if(!M.includes(e))throw new Error(`The ISO language provided ${e} is not supported`)}const $o=["green","purple","orange","red","pink","yellow"],Ko="CONTEXT_GROUP_PAGE",zo=()=>e=>class extends e{getContextGroups(){return super.getContextGroups().map((e=>$o.includes(e.displayMetadata?.name)?{...e,displayMetadata:{...e.displayMetadata,name:Qa(e.displayMetadata?.name)}}:e))}},Jo=()=>{const e=new Set;return t=>class extends t{constructor(){super(),this.onClientConnected=e=>{e.name.startsWith("internal-generated-view")&&this.joinContextGroup({contextGroupId:Ko,target:e},{uuid:this.fin.me.uuid,name:this.fin.me.name})};const e=this.interopClients.set;this.interopClients.set=(t,a)=>{e.call(this.interopClients,t,a),this.onClientConnected(a.clientIdentity)}}async joinContextGroup({contextGroupId:t,target:a},n){if(t!==Ko)return super.joinContextGroup({contextGroupId:t,target:a},n);try{const t=(await Aa().Browser.getPageByViewIdentity(a)).page.layoutName;if(!t)throw new Error("View does not belong to a page");if(!e.has(t)&&(e.add(t),!this.contextGroupsById.has(t))){const e=new Map;this.contextGroupsById.set(t,e)}await super.joinContextGroup({contextGroupId:t,target:a},n),a.name}catch(e){JSON.stringify(a),e.stack}}getContextGroups(){return Array.from(e).map((e=>({id:e,displayMetadata:{}})))}setContextForGroup(e,t){if(!this.contextGroupsById.has(t)){const e=new Map;this.contextGroupsById.set(t,e)}return super.setContextForGroup(e,t)}}},qo=(e,t)=>{const a=(e=>We(e)?Jo():zo())(t);try{return"function"==typeof e?t=>e(a(t)):Array.isArray(e)?[...e,a]:e=>new(a(e))}catch(e){throw new Error("WorkspacePlatform.init Error:",e)}},Zo=new Map;async function jo(){if("undefined"!=typeof localStorage)try{const e=ca(Bt.LastFocusedBrowserWindow);if(!e)return;const t=JSON.parse(e);if(await fe(t))return t}catch(e){throw new Error(`failed to get last focused browser window: ${e}`)}}async function Qo(e=fin.me.identity){await ke(e)&&(Zo.delete(e.name),Zo.set(e.name,e),function(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);sa(Bt.LastFocusedBrowserWindow,t)}catch(e){console.error("failed to save last focused browser window: ",e)}}(e))}async function Yo(e=fin.me.identity){Zo.delete(e.name)}const Xo=Tt()((async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,a=!1;for(const n of e)if(n.identity.name===de.BrowserMenu||n.identity.name===de.BrowserSaveMenu?t=n:await ke(n.identity)&&(a=!0),a)break;!a&&t&&t.close()}),100,{leading:!1,trailing:!0});let er={};const tr=async({actionId:e,payload:t})=>{if("function"!=typeof er[e])throw new Error(`Cannot find a configured function for the action '${e}'`);return er[e](t)},ar=()=>`custom-context-menu-${Aa().identity.uuid}-${O}`,nr=()=>`custom-bookmark-context-menu-${Aa().identity.uuid}-${O}`,or=()=>fin.InterApplicationBus.Channel.connect(ar());var rr,ir;!function(e){e.Save="Save",e.SaveAs="SaveAs"}(rr||(rr={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu"}(ir||(ir={}));const sr=__webpack_require__(/*! dexie */ "../../node_modules/dexie/import-wrapper.mjs"),cr=e=>e+"-"+fin.me.uuid,lr=(e,t)=>{const a=D&&A&&new sr.Dexie(e);return a&&a.version(.1).stores({[t]:""}),a},dr=(e,t)=>{const a=lr(cr(e),t),n=lr(e,t);if(!a||!n)throw new Error("Unable to migrate store - IndexDB not supported");return(async(e,t,a)=>{const n=ca(Bt.HasMovedStore),o=n?JSON.parse(n):{};if(o&&o[a])return;o[a]=!0,sa(Bt.HasMovedStore,JSON.stringify(o));const r=await e[a].toArray();await t[a].bulkPut(r)})(n,a,e),a},ur=(e,t="")=>e.toLowerCase().includes(t.toLowerCase()),pr="visited-sites",wr="removed-tab-stack",hr=D&&A&&dr("openfin-home-pages","pages"),gr=D&&A&&new sr.Dexie(cr("openfin-enterprise-site-history"));gr&&gr.version(.1).stores({[pr]:"id, url"});const mr=D&&A&&new sr.Dexie(cr("openfin-enterprise-tab-history"));async function kr(e){if(!hr)throw new Error("Unable to get page - IndexDB not supported");const t=await hr.pages.get(e);if(t)return t.pageId=e.toString(),t.title=t.title||t.pageId,t}async function br(e){if(!hr)throw new Error("Unable to get page list - IndexDB not supported");const t=await hr.pages.toCollection().keys(),a=(await Promise.all(t.map((e=>kr(e.toString()))))).filter((e=>!!e));return e?a.filter((t=>ur(t.title,e))):a}async function yr({page:e}){if(!hr)throw new Error("Unable to create page - IndexDB not supported");await hr.pages.put(e,e.pageId)}async function fr(e){if(!hr)throw new Error("Unable to delete page - IndexDB not supported");await hr.pages.delete(e)}async function Sr({pageId:e,page:t}){if(!hr)throw new Error("Unable to update page - IndexDB not supported");if(void 0===await kr(e))throw new Error("page not found");await yr({page:t}),e!==t.pageId&&await fr(e)}mr&&mr.version(.1).stores({[wr]:""});const vr=async e=>{if(!mr)throw new Error("Unable to add removed tab - IndexDB not supported");const t=Date.now().toString(),a={...e,id:t};await mr[wr].put(a,t)};function Pr(e){return"app"===e.type||"website"===e.type}const Cr=async e=>{if("website"===e.type){const t=e,a=t.url||"";let n=await gr[pr].get(a);n&&Pr(n)?(n.icon=t.icon,n.title=t.title,n.type=t.type,n.visitCount=(n.visitCount||0)+1,n.url=t.url):n={...t,id:a,visitCount:1,accessTime:void 0},n.accessTime=Date.now(),await gr[pr].put(n,a)}},Mr=async()=>{if(!gr)throw new Error("Unable to get frequently visited sites - IndexDB not supported");const e=gr[pr],t=await e.toCollection().toArray();t.sort(((e,t)=>(t.visitCount||0)-(e.visitCount||0)));return(t.length>5?t.slice(0,5):t).map((({id:e,...t})=>t))};const xr=async()=>(await fin.System.getHostSpecs()).name.toLowerCase().includes("windows"),Ir=async e=>{const{ctrlKey:t,metaKey:a,shiftKey:n}=e.sourceEvent,{url:o}=e.bookmark,{sourceIdentity:r}=e,i=await xr();if(!await ke(r))return await(async e=>{const t=Aa(),a=await La(e.url,e.url),n=await Ot(e.url,a);me((await t.Browser.createWindow({workspacePlatform:{pages:[n]}})).identity)})(e.bookmark);const s=Aa().Browser.wrapSync(r),c=await s.getPages(),l=(await s._getLayoutsWithSelectedViews()).find((e=>e.isActive));if(!l)throw Error(`Browser ${r} does not have any active layouts`);const d=c.find((e=>e.isActive)),u=1===Oa(d.layout.content),p=l.selectedViews[0];u?await(async({isWindows:e,ctrlKey:t,metaKey:a,currentViewId:n,browserIdentity:o,url:r,shiftKey:i,activePage:s,pages:c})=>{if(e?t:a){const e=Aa().Browser.wrapSync(o),t=await La(r,r,o),a={...await Ot(r,t),attachedPageType:"singleView",singleViewName:r},n=c.findIndex((e=>e.pageId===s.pageId));await e._addPage(a,{index:n+1}),i&&e.setActivePage(a.pageId)}else fin.View.wrapSync(n).navigate(r)})({isWindows:i,ctrlKey:t,metaKey:a,currentViewId:p,browserIdentity:r,url:o,shiftKey:n,activePage:d,pages:c}):await(async({isWindows:e,ctrlKey:t,metaKey:a,currentViewId:n,browserIdentity:o,url:r,shiftKey:i,activeLayout:s})=>{if(e?t:a){const e=fin.View.wrapSync(n),t=await e.getCurrentStack(),a=(await t.getViews()).findIndex((e=>e.name===n.name)),i={url:r,browserIdentity:o,title:r};await t.addView(i,{index:a+1})}else await fin.View.wrapSync(s.selectedViews[0]).navigate(r)})({isWindows:i,ctrlKey:t,metaKey:a,currentViewId:p,browserIdentity:r,url:o,shiftKey:n,activeLayout:l})};var Ar;!function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(Ar||(Ar={}));const Wr={type:Ar.Separator,data:void 0},Dr=async()=>({type:Ar.Submenu,label:Qa("contextMenu.print"),submenu:[{type:Ar.Label,label:Qa("contextMenu.submenu.print"),data:{type:f.Print}},{type:Ar.Label,label:Qa("contextMenu.submenu.printAll"),data:{type:f.PrintAll}},Wr,{type:Ar.Label,label:Qa("contextMenu.printScreen"),data:{type:f.PrintScreen}}]}),Tr=()=>({type:Ar.Label,label:Qa("contextMenu.closeWindow"),data:{type:g.CloseWindow}}),Rr=e=>({type:Ar.Label,label:Qa(e?"contextMenu.quitEnterpriseBrowser":"contextMenu.quitPlatform"),data:{type:g.Quit}}),Br=()=>({type:Ar.Label,label:Qa("contextMenu.newWindow"),data:{type:g.NewWindow}}),Er=e=>({type:Ar.Label,label:Qa(e?"enterpriseContextMenu.saveSupertab":"contextMenu.savePage"),data:{type:g.SavePage}}),Fr=e=>({type:Ar.Label,label:Qa(e?"enterpriseContextMenu.saveSupertabAs":"contextMenu.savePageAs"),data:{type:g.SavePageAs}}),Vr=(e,t)=>({type:Ar.Label,label:Qa(t?"enterpriseContextMenu.newTab":"contextMenu.newPage"),data:{type:g.NewPage},enabled:e}),Nr=()=>({label:Qa("contextMenu.switchWorkspace")}),Lr=()=>({label:Qa("contextMenu.deleteWorkspace")}),_r=()=>({label:Qa("contextMenu.appearance")}),Or=(e,t,a)=>t.map((t=>{const n=t.workspaceId===e.workspaceId;return{label:t.title,type:Ar.Checkbox,enabled:!n,checked:n,data:{type:a,workspaceId:t.workspaceId}}})),Ur=async()=>{const e=await Aa().Theme.getSelectedScheme();return[{label:Qa("theme.light"),type:Ar.Checkbox,checked:e===m.Light,data:{type:g.Appearance,scheme:m.Light}},{label:Qa("theme.dark"),type:Ar.Checkbox,checked:e===m.Dark,data:{type:g.Appearance,scheme:m.Dark}},{label:Qa("theme.system"),type:Ar.Checkbox,checked:e===m.System,data:{type:g.Appearance,scheme:m.System}}]},Gr=async(e,t=[])=>{const a=await Se(),{newPageUrl:n}=await qn(e),o=await(async e=>{const t=pe(e),{workspacePlatform:a}=await t.getOptions();return a?.disableMultiplePages})(e),r=await(async e=>{const t=pe(e),{workspacePlatform:a}=await t.getOptions();return a?.isLocked})(e),i=await Ae(e),s=[],c=t.length>0;n&&(s.push(Br()),o||s.push(Vr(!r,i))),s.push(Wr);const l=Aa(),d=await l.getCurrentWorkspace(),u=await l.Storage.getWorkspaces(),p=u.find((e=>e.workspaceId===d.workspaceId));s.push({type:Ar.Label,label:Qa("contextMenu.restore"),data:{type:g.RestoreChanges},enabled:!!p}),s.push({type:Ar.Label,label:Qa("contextMenu.saveWorkspace"),data:{type:g.SaveWorkspace},enabled:!!p}),s.push({type:Ar.Label,label:Qa("contextMenu.saveWorkspaceAs"),data:{type:g.SaveWorkspaceAs}}),s.push({type:Ar.Label,label:Qa("contextMenu.renameWorkspace"),data:{type:g.RenameWorkspace},enabled:!!p}),u.some((e=>e.workspaceId!==d.workspaceId))?s.push({label:Nr().label,submenu:Or(d,u,g.SwitchWorkspace),data:void 0},{label:Lr().label,submenu:Or(d,u,g.DeleteWorkspace),data:void 0}):s.push({label:Nr().label,enabled:!1,data:void 0},{label:Lr().label,enabled:!1,data:void 0}),s.push({label:Qa("contextMenu.downloads"),data:{type:g.Downloads}});const w=await l.Theme.getThemes();return(w[0]&&"palettes"in w[0]||!w[0]||0===w.length)&&s.push({label:_r().label,submenu:await Ur(),data:void 0}),s.push(Wr,Er(i),Fr(i),await(async e=>{const t=await xr();return{label:Qa("contextMenu.print"),submenu:[{type:Ar.Label,label:Qa("contextMenu.submenu.print"),data:{type:g.Print},enabled:e},{type:Ar.Label,label:Qa("contextMenu.submenu.printAll"),data:{type:g.PrintAll}},...t?[Wr,{type:Ar.Label,label:Qa("contextMenu.printScreen"),data:{type:g.PrintScreen}}]:[]],data:void 0}})(c)),a?[...s,Tr(),Wr,{type:Ar.Label,label:Qa("contextMenu.openStorefront"),data:{type:g.OpenStorefront}},Wr,Rr()]:[...s,Wr,Tr(),Wr,Rr()]},Hr=async(e,t)=>{const a=t.selectedViews[0],n=fin.View.wrapSync(a),o=await(async e=>{const{newTabUrl:t}=await qn(e);if(!t)throw new Error("Trying to create a new page without a newTabUrl set");return{url:t,target:e,title:"New Tab"}})(e);await Aa().createView(o,e,n.identity)},$r=async(e,t)=>{const a=Aa().Browser.wrapSync(e),n=(await a.getPages()).find((e=>e.isActive)),o=await fin.Window.wrapSync(e).getCurrentViews();if(t.length===o.length-(n.panels??[]).length){return void(await qt(e)).dispatch(ea.ClosePage,{pageId:n?.pageId})}const r=fin.Platform.getCurrentSync();t.forEach((async t=>{const o=await fin.View.wrapSync(t).getParentLayout();await r.closeView(t);const{hasUnsavedChanges:i}=await(async e=>(await wt(we)).dispatch(lt.HandlePageChanges,e))({page:{...n,layout:await o.getConfig()},identity:e,eventDetails:{type:h.ViewRemoved,viewIdentity:t}});i&&await a.updatePage({pageId:n.pageId,page:{hasUnsavedChanges:!0}})}))},Kr=async(e,t)=>{const a=await(e=>Promise.all(e.map((async e=>fin.View.wrapSync(e).getInfo()))))(t),{newPageUrl:n,newTabUrl:o}=await qn(e);a.forEach((async e=>{e.url!==n&&e.url!==o&&await fin.System.openUrlWithBrowser(e.url)}))},zr=(e,t)=>{t.forEach((async t=>{const a=fin.View.wrapSync(t);await(async(e,t)=>{const{url:a}=await t.getInfo(),n={...await t.getOptions(),url:a,target:e,name:void 0};await Aa().createView(n,e,t.identity)})(e,a)}))},Jr=async(e,t,a)=>{const n={newChannelId:t,selectedViews:a};(await qt(e)).dispatch(ea.AddToChannel,n)},qr=async(e,t)=>{(await qt(e)).dispatch(ea.RemoveFromChannel,t)},Zr=async(e,t)=>{if(!e)return;const a=t.identity,n=fin.Window.wrapSync(a);switch(Ke({type:"View Tab Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0}),e.type){case f.Back:await(async e=>{const t=e.map((e=>fin.View.wrapSync(e).navigateBack()));await Promise.all(t)})(t.selectedViews);break;case f.Forward:await(async e=>{const t=e.map((e=>fin.View.wrapSync(e).navigateForward()));await Promise.all(t)})(t.selectedViews);break;case f.Print:await Fo(t.selectedViews);break;case f.PrintAll:await n.print({content:"views",includeSelf:!1});break;case f.PrintScreen:await n.print({content:"screenshot"});break;case f.CloseViews:await $r(a,t.selectedViews);break;case f.OpenWithDefaultBrowser:await Kr(a,t.selectedViews);break;case f.ReloadViews:t.selectedViews.forEach((async e=>{const t=fin.View.wrapSync(e);await t.reload()}));break;case f.NewView:await Hr(a,t);break;case f.DuplicateViews:zr(a,t.selectedViews);break;case f.AddToChannel:Jr(a,e.option,t.selectedViews);break;case f.RemoveFromChannel:qr(a,t.selectedViews);break;case f.Custom:if(e.action){const n={callerType:C.ViewTabContextMenu,windowIdentity:a,selectedViews:t.selectedViews,customData:e.action.customData};Aa()._invokeCustomAction(e.action.id,n)}}};let jr="Platform";const Qr=async()=>jr;const Yr=async(e,t)=>{if(!e)return;const a=t.identity,n=await qt(a),o=Aa().Browser.wrapSync(a),r=fin.Window.wrapSync(a);if(Ke({type:"Global Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0,data:{action:e.action?.id}}),await Ae(a)){const a=await(async(e,t)=>{const a=t.identity,n=Aa().Browser.wrapSync(a),o=(await n.getPages()).find((e=>e.isActive)),r=Gt({...a,layoutName:o.layoutContainerKey}),i=t.selectedViews;switch(e?.type){case b.Lock:await n.updatePage({pageId:o.pageId,page:{isLocked:!o.isLocked}});break;case b.AddToChanel:e.option?await Jr(a,e.option,i):null===e.option&&await qr(a,i);break;case g.NewWindow:{const e=await Zn(a);await Aa().Browser.createWindow({workspacePlatform:{pages:[e],windowType:"enterprise"}});break}case b.Pin:{const{alwaysOnTop:e}=await n.openfinWindow.getOptions();await n.openfinWindow.updateOptions({alwaysOnTop:!e});break}case b.ShowHideTabs:await r.isShowingTabs()?await r.hide():await r.show();break;default:return!1}return!0})(e,t);if(a)return}switch(e.type){case g.NewWindow:{const{newPageUrl:e}=await qn(a);if(!e)throw new Error("Trying to create a new empty window without a newPageUrl set");Aa().createView({target:void 0,url:e});break}case g.NewPage:await Do(a);break;case g.CloseWindow:n.dispatch(ea.CloseBrowserWindow);break;case g.SaveWorkspace:await Ao(a);break;case g.SavePage:await To(a);break;case g.SavePageAs:await Ro(a);break;case g.SaveWorkspaceAs:await Wo(a);break;case g.RenameWorkspace:o._openSaveModal({menuType:x.RENAME_WORKSPACE});break;case g.SwitchWorkspace:await(async(e,t)=>{const a=Aa(),n=(await a.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));a.applyWorkspace(n,{skipPrompt:!1,promptContainerWindowIdentity:e})})(a,e);break;case g.DeleteWorkspace:await(async(e,t)=>{const a=Aa(),n=(await a.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));n&&await wo(e,n.title)&&(await a.Storage.deleteWorkspace(t.workspaceId),Jn(Qa("successIndicator.workspaceDeleted"),e))})(a,e);break;case g.Downloads:await Eo(a);break;case g.Appearance:await Aa().Theme.setSelectedScheme(e.scheme);break;case g.Quit:{const e=Qr();await ho(a,await e)&&fin.Platform.getCurrentSync().quit()}break;case g.OpenStorefront:(async()=>{await Se()&&me(ge)})();break;case g.RestoreChanges:await yo();break;case g.Print:await Fo(t.selectedViews);break;case g.PrintAll:await r.print({content:"views",includeSelf:!1});break;case g.PrintScreen:await r.print({content:"screenshot"});break;case g.Custom:if(e.action){const t={callerType:C.GlobalContextMenu,windowIdentity:a,customData:e.action.customData};Aa()._invokeCustomAction(e.action.id,t)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`)}},Xr=async(e,t,a)=>{const n=Aa().Browser.wrapSync(t.identity),o=fin.Window.wrapSync(t.identity),r=await qt(t.identity),i=await Ae();switch(e&&Ke({type:"Page Tab Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0}),e?.type){case k.Save:await To(t.identity,t.pageId);break;case k.SaveAs:await Ro(t.identity,t.pageId);break;case k.NewPage:await Do(t.identity);break;case k.DeletePage:await(async(e,t)=>{const a=Aa(),n=a.Browser.wrapSync(e),o=(await a.Storage.getPages()).find((e=>e.pageId===t));o&&await mo(e,o.title)&&(await a.Storage.deletePage(o.pageId),await n.removePage(t),Jn(Qa("enterpriseSuccessIndicator.supertabDeleted"),e,Qa("enterpriseSuccessIndicator.supertabHasBeenDeleted",{title:o.title})))})(t.identity,t.pageId);break;case k.Rename:if(await Ae(t.identity)){await n.setActivePage(t.pageId);const e=await or();await e.dispatch("open",{parentIdentity:t.identity,type:ir.RenameSupertab,anchorBehavior:ti.Center,x:a.left+a.width/2-164,y:a.bottom-8,payload:{pageId:t.pageId}})}else await n._openSaveModal({menuType:x.RENAME_PAGE,id:t.pageId});break;case k.Duplicate:r.dispatch(ea.DuplicatePage,t.pageId);break;case k.Close:i?await(async(e,t)=>{const a=Aa().Browser.wrapSync(e),n=await a.getPages();for(const o of n)if(o.pageId===t){await a.removePage(o.pageId),await a._trackRemovedTab({identity:e,page:o});break}})(t.identity,t.pageId):r.dispatch(ea.ClosePage,{pageId:t.pageId});break;case k.Custom:if(e.action){const a={callerType:C.PageTabContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};Aa()._invokeCustomAction(e.action.id,a)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`);break;case k.Refresh:await(async(e,t)=>{const a=Aa(),n=a.Browser.wrapSync(e),o=(await n.getPages()).find((e=>t?e.pageId===t:e.isActive));o?.layout?.content&&Na(o.layout.content).forEach((async e=>{(await fin.View.wrap({uuid:a.identity.uuid,name:e.name})).reload()}))})(t.identity,t.pageId);break;case k.CloseOthers:await(async(e,t)=>{const a=Aa().Browser.wrapSync(e),n=await a.getPages();for(const o of n)o.pageId!==t&&(await a.removePage(o.pageId),await a._trackRemovedTab({identity:e,page:o}))})(t.identity,t.pageId);break;case k.SaveWorkspaceAs:await Wo(t.identity);break;case k.Print:{const e=await n._getLayoutsWithSelectedViews(),{selectedViews:a}=e.find((e=>e.pageId===t.pageId));await Fo(a);break}case k.PrintAll:await n.setActivePage(t.pageId),await o.print({content:"views",includeSelf:!1});break;case k.PrintScreen:await n.setActivePage(t.pageId),await o.print({content:"screenshot"})}},ei=async(e,t)=>{if(e?.type){const a=t.identity;switch(e.type){case v.SavePage:await To(a);break;case v.SaveWorkspace:await Ao(a);break;case v.SavePageAs:await Ro(a);break;case v.SaveWorkspaceAs:await Wo(a);break;case v.Custom:if(e.action){const a={callerType:C.SaveButtonContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};Aa()._invokeCustomAction(e.action.id,a)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`)}}};var ti;!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(ti||(ti={}));const ai=async(e,t,a,n)=>{const{x:o,y:r,identity:i,template:s,callback:c}=e,l=await Ae(i),{data:d}=l?await(async(e,t,a,n)=>{if(!A)throw new Error("showEnterpriseContextMenu can only be used in a Here env. Avoid calling this method during pre-rendering.");if(!n&&!fin.me.isWindow)throw new Error("showEnterpriseContextMenu can only be used in a Here window.");const o=fin.Window.wrapSync({uuid:we.uuid,name:de.EnterpriseContextMenu});await o.isShowing()&&await o.blur();const r=await or(),i=new Promise(((e,t)=>{r.register("response",(t=>{e(t)}))})),{x:s,y:c,template:l}=e;return await r.dispatch("open",{parentIdentity:n.identity,responseIdentity:we,type:t,anchorBehavior:a,x:s,y:c,payload:{template:l}}),i})({x:o,y:r,template:s},a,n,fin.Window.wrapSync(i)):await function(e,t){if(!A)throw new Error("showContextMenu can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");if(!t&&!fin.me.isWindow)throw new Error("showContextMenu can only be used in an OpenFin window.");return(t||fin.Window.getCurrentSync()).showPopupMenu(e)}({x:o,y:r,template:s},fin.Window.wrapSync(i));c(d,e)};async function ni(e,t){const a=await Ae(e.identity),n=a?await(async({identity:e,selectedViews:t})=>{const a=Aa(),n=a.Browser.wrapSync(e),o=(await n.getPages()).find((e=>e.isActive)),r=Oa(o.layout.content)>1,i=await Ae(e),s=await a.Theme.getThemes(),c=s[0]&&"palettes"in s[0]||!s[0]||0===s.length,l={...Er(i),enabled:r},d={...Fr(i),enabled:r};return[Br(),Vr(!0,i),{type:Ar.Separator},l,d,{type:Ar.Separator},...c?[{type:Ar.Submenu,label:_r().label,submenu:await Ur()}]:[],{type:Ar.Separator},Tr(),{type:Ar.Separator},Rr(!0)]})({identity:e.identity,selectedViews:e.selectedViews}):await Gr(e.identity,e.selectedViews),o=await Qr();a||(n.find((e=>e.data?.type===g.Quit)).label=`Quit ${o}`);const{rect:r,...i}=e,{x:s,y:c}=a?{x:r.left+r.width,y:r.bottom}:e,l={...i,x:s,y:c,template:n,callback:Yr};await this.openGlobalContextMenu(l,t)}async function oi(e,t){const a={...e,callback:Zr};await this.openViewTabContextMenu(a,t)}async function ri(e,t){const a=await(async(e,t)=>{const a=await Aa().Storage.getPage(e),n=await ln(),o=await Ae(t),r=n.find((t=>t.pageId===e)),i=Oa(r.layout.content)>1,{workspacePlatform:s}=await pe(t).getOptions(),c=!(s.isLocked||s.preventPageClose||r.closeButton?.disabled||r.closeButton?.hidden),l=[{type:Ar.Label,label:Qa("enterpriseContextMenu.newTab"),data:{type:k.NewPage}},Wr,{type:Ar.Label,label:Qa("reload"),data:{type:k.Refresh}},{type:Ar.Label,label:Qa("enterpriseContextMenu.duplicate"),data:{type:k.Duplicate},enabled:!s.isLocked},await Dr(),Wr,{type:Ar.Label,label:Qa(i?"enterpriseSaveModal.closeSupertab":"enterpriseSaveModal.closeTab"),data:{type:k.Close},enabled:c}],d=[{type:Ar.Label,label:Qa("enterpriseContextMenu.newTab"),data:{type:k.NewPage}},Wr,{type:Ar.Label,label:Qa("enterpriseSaveModal.renameSupertab"),data:{type:k.Rename},enabled:!s.isLocked&&!!a&&i},{type:Ar.Label,label:Qa("enterpriseContextMenu.duplicate"),data:{type:k.Duplicate},enabled:!s.isLocked},Wr,{type:Ar.Label,label:Qa("enterpriseContextMenu.saveSupertab"),data:{type:k.Save},enabled:i},{type:Ar.Label,label:Qa("enterpriseContextMenu.saveSupertabAs"),data:{type:k.SaveAs},enabled:i},Wr,{type:Ar.Label,label:Qa("enterpriseContextMenu.deleteSupertab"),data:{type:k.DeletePage},enabled:!!a},Wr,{type:Ar.Label,label:Qa(i?"enterpriseSaveModal.closeSupertab":"enterpriseSaveModal.closeTab"),data:{type:k.Close},enabled:c}],u=[{type:Ar.Label,label:Qa("contextMenu.savePage"),data:{type:k.Save},enabled:!0},{type:Ar.Label,label:Qa("saveMenu.savePageAs"),data:{type:k.SaveAs},enabled:!0},{type:Ar.Label,label:"Save Workspace As",data:{type:k.SaveWorkspaceAs}},{type:Ar.Label,label:"Refresh",data:{type:k.Refresh}},Wr,{type:Ar.Label,label:Qa("saveModal.renamePage"),data:{type:k.Rename},enabled:!!a},{type:Ar.Label,label:Qa("contextMenu.duplicatePage"),data:{type:k.Duplicate},enabled:!s.isLocked},Wr,{type:Ar.Label,label:Qa("saveModal.closePage"),data:{type:k.Close},enabled:c}];return o?i?d:l:u})(e.pageId,e.identity),n={...e,template:a,callback:(t,a)=>{Xr(t,a,e.rect)}};await this.openPageTabContextMenu(n,t)}async function ii(e,t){const a={...e,template:await(async()=>{const e=Aa(),t=await e.getCurrentWorkspace(),a=(await e.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));return[{type:Ar.Label,label:Qa("contextMenu.saveWorkspace"),enabled:!!a,data:{type:v.SaveWorkspace}},{type:Ar.Label,label:Qa("saveMenu.saveWorkspaceAs"),data:{type:v.SaveWorkspaceAs}},{type:Ar.Separator,data:void 0},{type:Ar.Label,label:Qa("contextMenu.savePage"),data:{type:v.SavePage}},{type:Ar.Label,label:Qa("saveMenu.savePageAs"),data:{type:v.SavePageAs}}]})(),callback:ei};await this.openSaveButtonContextMenu(a,t)}const si="dock-companion-updates",ci=async()=>(await fin.Application.getCurrentSync().getChildWindows()).find((e=>e.identity.name===de.DockCompanion)),li=ot(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`),di=async()=>{const e=Aa();let t=await async function(){const e=Array.from(Zo.values());for(let t=e.length-1;t>=0;t--){const a=fin.Window.wrapSync(e[t]);if(await a.isShowing())return e[t]}}();if(t){const a=e.Browser.wrapSync(t),n=(await a.getPages()).at(-1),o=Na(n.layout.content);if(1===o.length&&Te(o[0].url))await a.setActivePage(n.pageId);else{const e=await Zn(t),{newPageUrl:n}=await qn();await a._addDefaultPage({identity:a.identity,page:e,newPageUrl:n||void 0})}}else{const a=fin.Window.wrapSync({uuid:fin.me.uuid,name:de.DockCompanion}),n=await Pe(await a.getBounds()),o=await async function(e,t,a){const n=await fin.System.getMonitorInfo(),o=a?.availableRect??n.primaryMonitor.availableRect,r={width:o.right-o.left,height:o.bottom-o.top},i=Math.min(e,r.height),s=Math.min(t,r.width),c=o.top+Math.floor((r.height-i)/2);return{height:i,width:s,left:o.left+Math.floor((r.width-s)/2),top:c}}(600,900,n),r=await Zn();t=(await e.Browser.createWindow({defaultHeight:600,defaultWidth:900,defaultLeft:o.left,defaultTop:o.top,workspacePlatform:{pages:[r]}})).identity}(await qt(t)).dispatch(ea.FocusAndExpandSearchInternal)},ui="dock-provider-configs",pi=D&&A&&new sr.Dexie(cr("dock-provider-configs"));async function wi(e){if(!pi)throw new Error("Unable to get Dock provider config - IndexDB not supported");try{return await pi[ui].get(e)}catch(e){return void console.warn("Failed to retrieve Dock provider config from IndexedDB",e)}}async function hi(e){if(!pi)throw new Error("Unable to save Dock provider config - IndexDB not supported");await pi[ui].put(e,e.id)}pi&&pi.version(.1).stores({[ui]:""});const gi="workspaces",mi=D&&A&&dr("openfin-workspace-platform-workspaces",gi);async function ki(e){if(!mi)throw new Error("Unable to get workspace - IndexDB not supported");const t=await mi[gi].get(e);return t&&(t.workspaceId=e.toString(),t.title=t.title||t.workspaceId),t}async function bi(e){if(!mi)throw new Error("Unable to get workspaces - IndexDB not supported");const t=await mi[gi].toCollection().keys(),a=(await Promise.all(t.map((e=>ki(e.toString()))))).filter((e=>!!e));return e?a.filter((t=>ur(t.title,e))):a}async function yi({workspace:e}){if(!mi)throw new Error("Unable to create workspace - IndexDB not supported");const t=(await bi()).find((t=>t.title===e.title));if(t&&t.workspaceId!==e.workspaceId)throw new Error(`Workspace with title '${e.title}' already exists.`);await mi[gi].put(e,e.workspaceId)}async function fi(e){if(!mi)throw new Error("Unable to delete workspace - IndexDB not supported");await mi[gi].delete(e)}async function Si({workspaceId:e,workspace:t}){if(!mi)throw new Error("Unable to update workspace - IndexDB not supported");if(!await ki(e))throw new Error("workspace not found");await yi({workspace:t}),e!==t.workspaceId&&await fi(e)}const vi=e=>{const t=e.layout,a=t.content?Na(t.content):[],n=a.length;return n>1?{...e,singleViewName:null}:1===n?{...e,singleViewName:a[0].name}:void 0},Pi=async(e,t,a)=>{const n=await Aa().Browser.getAllAttachedPages(),o=new Set(n.map((e=>e.title)).filter((e=>!!e))),r=new Set(n.map((e=>e.pageId)).filter((e=>!!e))),i=t?.defaultPageOptions,s="enterprise"===a?.workspacePlatform?.windowType||"enterprise"===t?.defaultWindowOptions?.workspacePlatform?.windowType,c=await ee(),l=await(async(e,t,a)=>{if(a)return ne();const n=t?.workspacePlatform?.newTabUrl;if(n)return n;const o=e?.defaultWindowOptions?.workspacePlatform?.newTabUrl;return o||void 0})(t,a,s);return Promise.all(e.map((async e=>{if("reparent"===e.multiInstanceViewBehavior)return{...e,layoutContainerKey:Rt()};((e,t)=>{e.pageId||=Rt(),t.has(e.pageId)&&(console.warn("PageID collision detected. All Page IDs should be unique. A random new pageId will be generated"),e.pageId=Rt()),t.add(e.pageId)})(e,r),s?e.iconUrl=`${c}/enterprise/icons/enterprise-page.svg`:e.title=cn(e.title,Array.from(o.keys())),o.add(e.title),e.panels?.reduce(((e,t)=>{const a=Object.values(w);if(!a.includes(t.position))throw new Error(`Encountered a panel with unsupported position "${t.position}". Supported positions are: ${a.toString()}`);if(1==e[t.position])throw new Error(`Found more than 1 panel at position: ${t.position}. Only 1 panel at a given position is currently supported.`);return{...e,[t.position]:e[t.position]+1}}),{[w.Left]:0,[w.Right]:0,[w.Top]:0,[w.Bottom]:0});const a="panels"in e?e.panels:i?.panels;let n=(d=e.layout,u=t?.defaultViewOptions,Ra({...d},(e=>Ba(e,u))));var d,u;l&&!n?.settings?.newTabButton&&(n={...n,settings:{...n?.settings,newTabButton:{url:l}}});return{...i,...e,panels:a&&await tn(a),layoutContainerKey:Rt(),layout:n,isLayoutCreated:!1}})))};async function Ci(e){return e?"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==":(await Q()).displayViewTabDefaultIcon?"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==":"data:image/svg+xml,%3Csvg%20style%3D%22background-color%3A%237D808A%22%20width%3D%2210%22%20height%3D%2210%22%20viewBox%3D%220%200%2010%2010%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M4.64648%200.874962C4.84174%200.6797%205.15833%200.6797%205.35359%200.874962L9.12482%204.6462C9.32009%204.84146%209.32009%205.15804%209.12482%205.3533L5.35359%209.12454C5.15833%209.3198%204.84174%209.3198%204.64648%209.12454L0.875245%205.3533C0.679982%205.15804%200.679982%204.84146%200.875245%204.6462L4.64648%200.874962ZM5.00003%201.93562L1.9359%204.99975L5.00003%208.06388L8.06416%204.99975L5.00003%201.93562Z%22%20fill%3D%22white%22%2F%3E%3C%2Fsvg%3E"}const Mi={dimensions:{borderWidth:3,headerHeight:30}},xi=(we.uuid,de.BrowserAddressSearchPrefix);async function Ii(e,t,a){let n=e;const o="enterprise"===n.workspacePlatform?.windowType||"enterprise"===t?.defaultWindowOptions?.workspacePlatform?.windowType;if(n.layout&&!n.workspacePlatform?.pages?.length){const e=await Mn(),a={...await Ot(e,n.layout),isActive:!0};n.workspacePlatform||={},n.workspacePlatform.pages=await Pi([a],t,n)}t?.browserIconSize&&(n.workspacePlatform||={},n.workspacePlatform.browserIconSize=t.browserIconSize);const r=a?.themes?.[0];if(n.workspacePlatform?.pages?.length){const e=await Pi(n.workspacePlatform.pages,t,n),i=e,s=(e=>{if(!e)return;let t=e.find((e=>e.isActive));return!t&&e.length>0&&(e[0].isActive=!0,t=e[0]),t})(i);if(i.forEach((e=>{e.pageId!==s?.pageId&&(e.isActive=!1)})),await an(i),n.workspacePlatform.pages=e,n=At({},await(async e=>({contextMenuOptions:{enabled:!1},experimental:{showFavicons:!0,defaultFaviconUrl:await Ci(e)},viewVisibility:{showViewsOnSplitterDrag:{enabled:!0},showViewsOnWindowResize:{enabled:!0}}}))(o),t?.defaultWindowOptions,n,await(async e=>({backgroundThrottling:!0,url:await oe(e,!0),contextMenu:!0,closeOnLastViewRemoved:!1,permissions:{System:{openUrlWithBrowser:{enabled:!0,protocols:["mailto"]}}}}))(o)),s.layout=At(s.layout,Mi),async function(e){if(e.icon||e.taskbarIcon){const t=fin.Application.getCurrentSync(),a=await(await t.getWindow()).getOptions();e.taskbarIconGroup||=a.taskbarIconGroup||fin.me.identity.uuid}if(e.workspacePlatform.icon)if("object"==typeof e.workspacePlatform.icon){const t=window.matchMedia("(prefers-color-scheme: dark)");e.icon=t.matches?e.workspacePlatform.icon.dark:e.workspacePlatform.icon.light}else e.icon=e.workspacePlatform.icon}(n),!n.backgroundColor&&r)if("palette"in r)n.backgroundColor=r?.palette?.background2||r?.palette?.backgroundPrimary;else{const e=a.selectedScheme===m.Dark||a.selectedScheme===m.System&&window.matchMedia("(prefers-color-scheme: dark)")?r?.palettes.dark:r?.palettes.light;n.backgroundColor=e?.background2||e?.backgroundPrimary}n=Ce(n,!0);const c=await oe(o,!0);c&&(n.url=c),n.layout=s.layout,n.layoutSnapshot=((e,t)=>({layouts:e.reduce(((e,a)=>{if(!a.isActive){if(!t)return e;if(!vi(a).singleViewName)return e}return e[a.layoutContainerKey]=a.layout,e}),{}),pages:e}))(n.workspacePlatform.pages,o),n.workspacePlatform.windowType=n.workspacePlatform.windowType??P.Browser}if(n.cornerRounding&&delete n.cornerRounding,n.name||n.layoutSnapshot?n.contextMenuOptions?.template?.length>0?n.contextMenuOptions.template=n.contextMenuOptions.template.filter((e=>"print"!==e)):n.contextMenuOptions={template:[],enabled:!1}:n.name=`${de.ClassicWindow}-${Rt()}`,n.workspacePlatform&&a&&(n.workspacePlatform._themeData=a),o){const e=await ne();n.workspacePlatform.newPageUrl=e,n.workspacePlatform.newTabUrl=e,n.layout&&(n.layout.dimensions.borderWidth=4,n.layout.dimensions.headerHeight=28),n.name=n.name||`${de.BrowserWindow}-${Rt()}`;const t=xi+n.name,a=fin.Application.getCurrentSync();if(!(await a.getViews()).some((e=>e.identity.name===t))&&n.name.startsWith(de.BrowserWindow)){const e=await ae()+K.BrowserPopupMenuAddressSearchResultsView;(await fin.View.create({name:t,contextMenuOptions:{enabled:!0},url:e,target:fin.me.identity,bounds:{top:0,left:0,width:0,height:0}})).navigate(e)}}return n}const Ai=async(e,t)=>{const a={uuid:t.uuid,name:t.name};await ho(a,e.title??await Qr(),e.shouldCenterOnMonitor)&&fin.Platform.getCurrentSync().quit()},Wi=e=>{const t=e.name===de.Home,a=e.name?.startsWith(de.HomeInternal),n=e.name?.startsWith(de.BrowserMenu)||e.name?.startsWith(de.BrowserSaveMenu);return!t&&!a&&!n};const Di=e=>JSON.parse(JSON.stringify(e));async function Ti(e,t,a){const n=e.manifestUrl?await t({manifestUrl:e.manifestUrl},a):void 0;if(n?.interop&&e.interop){const t={...e,...n,interop:e.interop};return delete t.manifestUrl,t}return e}const Ri=e=>{const t=Di(e);return t._internalWorkspaceData?.browserNavigationButtons&&(t.workspacePlatform={...t.workspacePlatform,browserNavigationButtons:t._internalWorkspaceData.browserNavigationButtons},delete t._internalWorkspaceData.browserNavigationButtons),t},Bi=e=>{const t=Di(e);return t.workspacePlatform&&(t._internalWorkspaceData={...t._internalWorkspaceData,...t.workspacePlatform},delete t.workspacePlatform),t},Ei={reload:[{keys:"Ctrl+R",preventDefault:!0}],back:[{keys:"Alt+Left",preventDefault:!0}],forward:[{keys:"Alt+Right",preventDefault:!0}]},Fi={reload:[{keys:"Cmd+R",preventDefault:!0}],back:[{keys:"Cmd+[",preventDefault:!0},{keys:"Cmd+Left",preventDefault:!0}],forward:[{keys:"Cmd+]",preventDefault:!0},{keys:"Cmd+Right",preventDefault:!0}]},Vi=async()=>await xr()?Ei:Fi,Ni=(e,t)=>{const a=fin.View.wrapSync(e);if(!t)return;const n=e=>{(async(e,t,a)=>{if("keyDown"!==a.inputType)return;const n=await(async e=>{const t=await e.getCurrentWindow(),a=await t.getOptions(),n=a.workspacePlatform?.navigationButtons;return n.enabled&&!n.hotkeysDisabled})(e),o=await xr();if(n){if(t.reload){const n=a.ctrlKey&&!a.altKey&&!a.metaKey&&!a.shiftKey&&"r"===a.key,r=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"r"===a.key;(o?n:r)&&t?.reload&&(e.reload(),Ke({type:"View",action:"Reload",value:e.identity.name}))}if(t.back){const n=!a.ctrlKey&&a.altKey&&!a.metaKey&&!a.shiftKey&&"ArrowLeft"===a.key,r=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"ArrowLeft"===a.key,i=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"["===a.key;(o?n:r||i)&&t?.back&&(e.navigateBack(),Ke({type:"View",action:"Back",value:e.identity.name}))}if(t.forward){const n=!a.ctrlKey&&a.altKey&&!a.metaKey&&!a.shiftKey&&"ArrowRight"===a.key,r=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"ArrowRight"===a.key,i=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"]"===a.key;(o?n:r||i)&&t?.forward&&(e.navigateForward(),Ke({type:"View",action:"Forward",value:e.identity.name}))}}})(a,t,e)};a.addListener("hotkey",n),a.once("destroyed",(()=>{a.removeListener("hotkey",n)}))},Li=(e,t)=>Di(e).map((e=>("componentState"in e?e.componentState=t(e.componentState):"content"in e&&(e.content=Li(e.content,t)),e))),_i=e=>{if(e){const t=Di(e);return t.content&&(t.content=Li(t.content,Ri)),t}return e},Oi=e=>{if(e){const t=Di(e);return t.content&&(t.content=Li(t.content,Bi)),t}return e};async function Ui({app:e,target:t}){const a=fin.Platform.getCurrentSync();switch(e.manifestType){case c.Snapshot:return a.applySnapshot(e.manifest);case c.View:return async function(e,t){const a=fin.Platform.getCurrentSync();if("view"===t.entityType){const a=fin.View.wrapSync(t),n=await a.getParentLayout();return await n.replaceView(t,{manifestUrl:e.manifest,url:void 0,target:void 0}),a.destroy()}return a.createView({name:void 0,url:void 0,manifestUrl:e.manifest,target:void 0})}(e,t);case c.External:return fin.System.launchExternalProcess({path:e.manifest,uuid:e.appId});default:return fin.Application.startFromManifest(e.manifest)}}let Gi;const Hi=()=>{if(!Gi){const e=ot(`${"undefined"!=typeof fin&&fin.me.identity.uuid}-enterprise-app-directory`);Gi=e()}return Gi};async function $i(e){if(!await Ae(e.identity))return[];return(await Hi()).dispatch(Qt.GetApps,e.req)}async function Ki(e){if(!await Ae(e.identity))return[];return(await Hi()).dispatch(Qt.GetSearchProviders,e)}async function zi(e){return(await Hi()).dispatch(Qt.GetCuratedContent,e)}async function Ji(e){return(await Hi()).dispatch(Qt.GetRecentlyVisited,e)}async function qi(e){const t=(await be()).map((async e=>{const t=await e.getOptions();t.workspacePlatform?.pages&&t.layout&&await(async e=>(await qt(e)).dispatch(ea.UpdatePagesWindowOptions))(e.identity)}));return await Promise.all(t),e?e():Lt()}let Zi=[];const ji=()=>Zi;async function Qi(e){const t=e=>{if(!e.includes("#")&&!e.includes("rgb")&&!e.includes("hsl"))throw new Error("Background primary color is not the right format.")};e.forEach((e=>{"palette"in e&&t(e.palette.backgroundPrimary),"palettes"in e&&(t(e.palettes.dark.backgroundPrimary),t(e.palettes.light.backgroundPrimary))})),(e=>{const t=e[0];if("palette"in t){const{palette:e}=t;wa.setPalettes({dark:e,light:e})}if("palettes"in t){const{dark:e,light:a}=t.palettes;wa.setPalettes({dark:e,light:a})}})(e),Zi=e}const Yi=(e,t)=>a=>{const n=null!==e;return class extends a{constructor(){super(),this.isWorkspacePlatform=()=>({isWorkspacePlatform:!0,isBrowserInitialized:!!e,analytics:{isSupported:!0}}),this.detachPagesFromWindow=yn,this.getAllAttachedPages=ln,this.getPagesForWindow=Sn,this.getPageForWindow=vn,this.markUnsavedPagesAsSavedInternal=Rn,this.launchApp=Ui,this.savePage=mn,this.saveWorkspace=Co,this.createSavedPageInternal=wn,this.updateSavedPageInternal=gn,this.deleteSavedPageInternal=hn,this.reorderPagesForWindow=Pn,this.getUniquePageTitle=Mn,this.updatePageForWindow=bn,this.getLastFocusedBrowserWindow=jo,this.getThemes=ji,this.invokeCustomActionInternal=tr,this.requestQuitPlatformDialogInternal=Ai,this.getCurrentWorkspace=vo,this.setActiveWorkspace=fo,this.getLanguageResourcesInternal=Uo,this.getPageByViewIdentity=async e=>{const t=await fin.Platform.Layout.getLayoutByViewIdentity(e),a=t.identity;if(!("layoutName"in a))throw new Error("Failed to get layout's identity");const n=await Aa().Browser.wrapSync(t.identity).getPages(),o=n.findIndex((e=>e.layoutName===a.layoutName));if(-1===o)throw new Error("Failed to get page's index");return{windowIdentity:{name:t.identity.name,uuid:t.identity.uuid},page:n[o],pageIndex:o}},this.openGlobalContextMenuInternal=this.openGlobalContextMenuInternal.bind(this),this.openGlobalContextMenu=this.openGlobalContextMenu.bind(this),this.getSavedPages=this.getSavedPages.bind(this),this.getSavedPage=this.getSavedPage.bind(this),this.createSavedPage=this.createSavedPage.bind(this),this.updateSavedPage=this.updateSavedPage.bind(this),this.deleteSavedPage=this.deleteSavedPage.bind(this),this.handlePageChanges=this.handlePageChanges.bind(this),this.attachPagesToWindow=this.attachPagesToWindow.bind(this),this.openViewTabContextMenuInternal=this.openViewTabContextMenuInternal.bind(this),this.openViewTabContextMenu=this.openViewTabContextMenu.bind(this),this.openPageTabContextMenuInternal=this.openPageTabContextMenuInternal.bind(this),this.openPageTabContextMenu=this.openPageTabContextMenu.bind(this),this.getSavedWorkspaces=this.getSavedWorkspaces.bind(this),this.getSavedWorkspace=this.getSavedWorkspace.bind(this),this.createSavedWorkspace=this.createSavedWorkspace.bind(this),this.updateSavedWorkspace=this.updateSavedWorkspace.bind(this),this.deleteSavedWorkspace=this.deleteSavedWorkspace.bind(this),this.getCurrentWorkspace=this.getCurrentWorkspace.bind(this),this.getDockProviderConfig=this.getDockProviderConfig.bind(this),this.saveDockProviderConfig=this.saveDockProviderConfig.bind(this),this.applyWorkspace=this.applyWorkspace.bind(this),this.restoreLastSavedWorkspaceInternal=this.restoreLastSavedWorkspaceInternal.bind(this),this.setActiveWorkspace=this.setActiveWorkspace.bind(this),this.openSaveButtonContextMenu=this.openSaveButtonContextMenu.bind(this),this.openSaveButtonContextMenuInternal=this.openSaveButtonContextMenuInternal.bind(this),this.getSelectedScheme=this.getSelectedScheme.bind(this),this.setSelectedScheme=this.setSelectedScheme.bind(this),this.analyticsInternal=this.analyticsInternal.bind(this),this.handleAnalytics=this.handleAnalytics.bind(this),this.getLanguage=this.getLanguage.bind(this),this.setLanguage=this.setLanguage.bind(this),this.handleSaveModalOnPageClose=this.handleSaveModalOnPageClose.bind(this),this.shouldPageClose=this.shouldPageClose.bind(this),this.shouldWindowClose=this.shouldWindowClose.bind(this),this.handlePagesAndWindowClose=this.handlePagesAndWindowClose.bind(this),this.setActivePage=this.setActivePage.bind(this),this.handlePageChanges=this.handlePageChanges.bind(this),this.copyPage=this.copyPage.bind(this),this.addPage=this.addPage.bind(this),this.addDefaultPage=this.addDefaultPage.bind(this),this.markUnsavedPagesAsSavedInternal=this.markUnsavedPagesAsSavedInternal.bind(this),this.trackRemovedTabInternal=this.trackRemovedTabInternal.bind(this),this.restoreRemovedTabInternal=this.restoreRemovedTabInternal.bind(this),this.trackVisitedSiteInternal=this.trackVisitedSiteInternal.bind(this),this.getRecentlyVisitedSitesInternal=this.getRecentlyVisitedSitesInternal.bind(this),this.getFrequentlyVisitedSitesInternal=this.getFrequentlyVisitedSitesInternal.bind(this),this.searchSitesInternal=this.searchSitesInternal.bind(this),this.getSearchProvidersInternal=this.getSearchProvidersInternal.bind(this),this.getCuratedContentInternal=this.getCuratedContentInternal.bind(this),this.handleRequestNavigationInternal=this.handleRequestNavigationInternal.bind(this),this.refreshBookmarksInternal=this.refreshBookmarksInternal.bind(this),this.launchBookmarkInternal=this.launchBookmarkInternal.bind(this),this.getNotificationsConfig=this.getNotificationsConfig.bind(this),this.updateDockFavoritesInternal=this.updateDockFavoritesInternal.bind(this),this.updateContentMenuInternal=this.updateContentMenuInternal.bind(this),this.launchDockEntryInternal=this.launchDockEntryInternal.bind(this),this.setDockFavoritesOrderInternal=this.setDockFavoritesOrderInternal.bind(this),this.navigateContentMenuInternal=this.navigateContentMenuInternal.bind(this),this.setDefaultDockButtonsOrderInternal=this.setDefaultDockButtonsOrderInternal.bind(this),this.getDockWorkspacesContextMenuInternal=this.getDockWorkspacesContextMenuInternal.bind(this),this.handleDockWorkspacesMenuResponseInternal=this.handleDockWorkspacesMenuResponseInternal.bind(this),this.removeDockFavoriteInternal=this.removeDockFavoriteInternal.bind(this),this.addDockFavoriteInternal=this.addDockFavoriteInternal.bind(this),this.focusAndExpandSearchInternal=this.focusAndExpandSearchInternal.bind(this)}async applyWorkspace(...e){return bo.apply(this,e)}async restoreLastSavedWorkspaceInternal(...e){return yo.apply(this,e)}async getSnapshot(){const e=n?await qi((async()=>Lt(await super.getSnapshot(void 0,fin.me.identity)))):await Lt(await super.getSnapshot(void 0,fin.me.identity));let t={...e,windows:e.windows.filter(Wi).map(Nt)};return t=(e=>{const t=Di(e);return t.windows.forEach((e=>{e.layout&&(e.layout=_i(e.layout)),e.workspacePlatform?.pages?.forEach((e=>{e?.layout&&(e.layout=_i(e.layout))}))})),t})(t),t}async getViewSnapshot(e){let t=await super.getViewSnapshot(e);return t=Ri(t),t}async applySnapshot({snapshot:e,options:t}){let a=e;"string"==typeof a&&(a=await super.fetchManifest({manifestUrl:a},fin.me.identity));const o=function(e){for(const t of e.windows)if(t.workspacePlatform?.pages?.length)return!0;return!1}(a);if(!n&&o)throw new Error("This snapshot cannot be applied as the platform has been initialized without the browser.");return a=(e=>{const t=Di(e);return t.windows.forEach((e=>{e.layout=Oi(e.layout),e.workspacePlatform?.pages?.forEach((e=>{e.layout=Oi(e.layout)}))})),t})(a),super.applySnapshot({snapshot:a,options:t})}async createWindow(t,a){if(n&&"tearout"===t.reason){const e=await fin.Window.wrapSync(a).getOptions(),n=e.workspacePlatform?.windowType;t.taskbarIconGroup=e.taskbarIconGroup,n&&(t.workspacePlatform||={},t.workspacePlatform.windowType=e.workspacePlatform.windowType,n===P.Platform&&(t.url=e.url))}if(!n||t.workspacePlatform?.windowType===P.Platform){const e=await super.createWindow(t,a);return Ke({type:"Window",action:"Open Window",value:e.identity.name,data:{uuid:e.identity.uuid}}),e}var o;o={allowed:!0},Ue||(Ue=!0,Oe(_e.Browser,o)),((e=[])=>{const t=e.filter((e=>e.type!==S.Custom)),a=new Set,n=[];for(const e of t)a.has(e.type)&&n.push(e.type),a.add(e.type);if(n.length>0){const e=n.join(", ");throw new Error(`Encountered a duplicate "${e}" toolbar button. No more than one instance of a button type may be provided.`)}})(t.workspacePlatform?.toolbarOptions?.buttons);let r=(e=>"workspacePlatform"in e?e:(({workstacks:e,pages:t,...a})=>({...a,workspacePlatform:{pages:t||e||null}}))(e))(t);e?.defaultWindowOptions?.hotkeys&&(r.hotkeys=e.defaultWindowOptions.hotkeys),r=await Ii(r,e,{themes:ji(),selectedScheme:this.getSelectedScheme()}),r=await(async e=>{const t=await fin.System.getMonitorInfo();let a=t.primaryMonitor;const n=e.defaultLeft,o=e.defaultTop;t.nonPrimaryMonitors.forEach((e=>{const{top:t,bottom:r,left:i,right:s}=e.availableRect;n>=i&&n<=s&&o>=t&&o<=r&&(a=e)}));const r=a.availableRect.bottom-a.availableRect.top,i=a.availableRect.right-a.availableRect.left;return e.defaultHeight=Math.min(e.defaultHeight||800,r),e.defaultWidth=Math.min(e.defaultWidth||800,i),e})(r);const i=await(e=>async(t,a)=>{let n=!1;const o=await e(t,a);return t?.workspacePlatform?._internalDeferShowOptions?.deferShowEnabled?(await o.addListener("show-requested",(async()=>{if(n)return;const e=await o.getOptions();await o.updateOptions({workspacePlatform:{...e.workspacePlatform,_internalDeferShowOptions:{...e.workspacePlatform._internalDeferShowOptions,autoShow:!0}}}),n=!0})),o):o})(((e,t)=>super.createWindow(e,t)))(r,a);return Ke({type:"Window",action:"Open Window",value:i.identity.name,data:{uuid:i.identity.uuid}}),i}async createView(t,a){t.opts=Da(t.opts,e?.defaultViewOptions),e?.defaultViewOptions?.hotkeys&&(t.opts.hotkeys=e.defaultViewOptions.hotkeys),t.opts=await Ti(t.opts,this.fetchManifest,a),t.opts=await(async e=>{const t=Di(e),a=t.workspacePlatform?.browserNavigationButtons;if(a){const e=Object.keys(a);for(const n of e)if(a[n]){const e=(await Vi())[n];t.hotkeys?t.hotkeys.push(...e):t.hotkeys=[...e]}}return t})(t.opts),t.opts=Bi(t.opts);const n=await super.createView(t,a);return Ni(n.identity,t.opts._internalWorkspaceData?.browserNavigationButtons),n}async replaceView(t,a){return t.opts.newView=await Da(t.opts.newView,e?.defaultViewOptions),t.opts.newView=await Ti(t.opts.newView,this.fetchManifest,a),super.replaceView(t,a)}async replaceLayout(e,t){return await Ae(t)||delete e.opts.layout?.dimensions,super.replaceLayout(e,t)}async getSavedPage(...e){return kr.apply(this,e)}async getSavedPages(...e){return br.apply(this,e)}async createSavedPage(...e){return yr.apply(this,e)}async deleteSavedPage(...e){return fr.apply(this,e)}async updateSavedPage(...e){return Sr.apply(this,e)}async getSavedWorkspace(...e){return ki.apply(this,e)}async getSavedWorkspaces(...e){return bi.apply(this,e)}async createSavedWorkspace(...e){return yi.apply(this,e)}async deleteSavedWorkspace(...e){return fi.apply(this,e)}async updateSavedWorkspace(...e){return Si.apply(this,e)}async getDockProviderConfig(...e){return wi.apply(this,e)}async saveDockProviderConfig(...e){return hi.apply(this,e)}async attachPagesToWindow(t){const a=await Pi(t.pages,e);await an(a),await kn({...t,pages:a})}async addPage(e){const t=await Ae(e.identity),a=await wt(e.identity),{page:n,insertionIndex:o}=e;n?.title||(n.title=await a.dispatch(lt.GetUniquePageTitle,void 0));const r=(await this.getAllAttachedPages()).find((e=>e.pageId===n.pageId||e.title===n.title));if(r){if(r.pageId===n.pageId)throw new Error(`page with id ${n.pageId} is already attached to a browser window ${r.parentIdentity.name}`);if(!t)throw new Error(`addPage title collision, page with title ${n.title} already exists, conflicting page id: ${r.pageId} with title ${r.title}`)}const i={identity:e.identity,pages:[{...n,multiInstanceViewBehavior:e.multiInstanceViewBehavior||"duplicate"}],insertionIndex:o};await this.attachPagesToWindow(i)}async addDefaultPage(e){await this.addPage(e),await this.setActivePage({identity:e.identity,pageId:e.page.pageId})}async setActivePage(...e){return fn.apply(this,e)}async openGlobalContextMenuInternal(...e){return ni.apply(this,e)}async openGlobalContextMenu(...e){return ai.apply(this,[...e,ir.GlobalMenu,ti.BottomRight])}async openViewTabContextMenuInternal(...e){return oi.apply(this,e)}async openViewTabContextMenu(...e){return ai.apply(this,[...e,ir.ContextMenu])}async openPageTabContextMenuInternal(...e){return ri.apply(this,e)}async openPageTabContextMenu(...e){return ai.apply(this,[...e,ir.ContextMenu])}async openSaveButtonContextMenu(...e){return ai.apply(this,e)}async openSaveButtonContextMenuInternal(...e){return ii.apply(this,e)}getSelectedScheme(...e){return xa.apply(this,e)}async setSelectedScheme(...e){return Ma.apply(this,e)}async handlePageChanges(...e){return Tn.apply(this,e)}async analyticsInternal(...e){return Gn.apply(this,e)}async handleAnalytics(...e){}async handleSaveModalOnPageClose(...e){return xn.apply(this,e)}async shouldPageClose(...e){return In.apply(this,e)}async shouldWindowClose(...e){return An.apply(this,e)}handlePagesAndWindowClose(...e){return Wn.apply(this,e)}async copyPage(...e){return Dn.apply(this,e)}async getNotificationsConfig(){return t}async setLanguage(...e){return Oo.apply(this,e)}async getLanguage(){return _o.apply(this)}async trackRemovedTabInternal(...e){return vr.apply(this,e)}async restoreRemovedTabInternal(){const e=await(async()=>{if(!mr)throw new Error("Unable to pop last removed tab - IndexDB not supported");const e=mr[wr],t=await e.toCollection().keys();if(t.length>0){const a=Math.max(...t.map((e=>Number(e)))).toString(),n=await e.get(a);if(n){await e.delete(a);const{id:t,...o}=n;return o}}})();if("page"in e)if(await fe(e.identity)){const t=Aa().Browser.wrapSync(e.identity);await t.addPage(e.page),await t.setActivePage(e.page.pageId)}else Aa().createWindow({name:e.identity.name,workspacePlatform:{pages:[e.page],windowType:P.Browser}});else(function(e){return"window"in e})(e)&&Aa().createWindow({workspacePlatform:{pages:e.window.pages,windowType:P.Browser}})}async trackVisitedSiteInternal(...e){return Cr.apply(this,e)}async getRecentlyVisitedSitesInternal(...e){return await Ji.apply(this,e)}async getFrequentlyVisitedSitesInternal(...e){return Mr.apply(this,e)}async searchSitesInternal(...e){return await $i.apply(this,e)}async getSearchProvidersInternal(...e){return await Ki.apply(this,e)}async getCuratedContentInternal(...e){return await zi.apply(this,e)}async handleRequestNavigationInternal(...e){}async refreshBookmarksInternal(){(await Aa().Browser.getAllWindows()).forEach((async({identity:e})=>{(await qt(e)).dispatch(ea.RefreshBookmarksInternal)}));(await Jt(nr())).dispatch(ea.RefreshBookmarksInternal),await(async()=>{const e=await ci();if(e){const t=await qt(e.identity,si);await t.dispatch(ea.RefreshBookmarksInternal)}})()}async launchBookmarkInternal(e){return Ir(e)}async updateDockFavoritesInternal(e){return(async e=>{const t=await ci();if(!t)throw new Error("Companion Dock window not found");{const a=await qt(t.identity,si);await a.dispatch(Xt.UpdateFavoriteEntries,e)}})(e)}async updateContentMenuInternal(e){return(async e=>{const t=await ci();if(!t)throw new Error("Companion Dock window not found");{const a=await qt(t.identity,si);await a.dispatch(Xt.UpdateContentMenu,e)}})(e)}async launchDockEntryInternal(e){return(async e=>(await li()).dispatch("launch-entry",e))(e)}async setDefaultDockButtonsOrderInternal(e){return(async e=>(await li()).dispatch("set-default-dock-buttons-order",e))(e)}async setDockFavoritesOrderInternal(e){return(async e=>(await li()).dispatch("set-dock-favorites-order",e))(e)}async addDockFavoriteInternal(e){return(async e=>(await li()).dispatch("add-favorite-entry",e))(e)}async removeDockFavoriteInternal(e){return(async e=>(await li()).dispatch("remove-favorite-entry",e))(e)}async navigateContentMenuInternal(e){return(async e=>{const t=await ci();if(!t)throw new Error("Companion Dock window not found");{const a=await qt(t.identity,si);await a.dispatch(Xt.NavigateContentMenu,e)}})(e)}async getDockWorkspacesContextMenuInternal(){return(async()=>(await li()).dispatch("get-dock-workspaces-context-menu",void 0))()}async handleDockWorkspacesMenuResponseInternal(e){return(async e=>(await li()).dispatch("handle-dock-workspaces-menu-response",e))(e)}async focusAndExpandSearchInternal(){return di()}}};function Xi(e,t,a){const n=Yi(e,a);try{return"function"==typeof t?e=>t(n(e)):Array.isArray(t)?[...t,n]:e=>new(n(e))}catch(e){throw new Error("WorkspacePlatform.init Error:",e)}}async function es(){(async()=>{le().on("window-closed",Xo)})(),async function(){const e=fin.Application.getCurrentSync();await e.addListener("window-focused",Qo),await e.addListener("window-closed",Yo)}();fo(await So())}let ts;async function as(e,t){if(!await fe({uuid:we.uuid,name:de.DockCompanion})){const a=await Ve(we);await t.createWindow(Ce({name:de.DockCompanion,url:await ae()+K.EnterpriseDock,autoShow:!0,frame:!1,smallWindow:!0,saveWindowState:!1,defaultHeight:Me,defaultWidth:xe,includeInSnapshots:!1,defaultTop:e.dockPosition?.top??Ie,defaultLeft:e.dockPosition?.left??a.left-xe/2,workspacePlatform:{windowType:"enterprise",...e},throttling:"disabled",resizable:!1,maximizable:!1,backgroundColor:await Ct("background1")}))}}function ns({overrideCallback:e,interopOverride:t,browser:a,notifications:n,analytics:o,integrations:r=[],workspaceAsar:i}){if(!A)throw new Error("Cannot be used outside an OpenFin env.");return ts||(ts=(async()=>{const s=fin.Platform.getCurrentSync();var c,l;if(s.once("platform-api-ready",(()=>es())),s.on("window-show-all-downloads",(({name:e,uuid:t})=>{Eo({name:e,uuid:t})})),a?.title&&(c=a.title,jr=c),Hn(o),i){const e=`workspace-${encodeURIComponent(fin.me.uuid)}`,{baseUrl:t}=await fin.System.serveAsset({...i,hostName:e});Y(t)}if(a?.browserBaseUrl&&Y(a.browserBaseUrl),We(a)){en=!0;const e=ha();e.setWorkspaceStorageProxy(await(async e=>{const t=`storage-proxy-window-${crypto.randomUUID()}`,[a,n]=await Promise.all([fin.InterApplicationBus.Channel.connect(`channel-${t}`,{wait:!0}),fin.Window.create({autoShow:!1,includeInSnapshots:!1,name:t,url:e})]);return{setItem:(e,t)=>a.dispatch("setItem",{key:e,value:t}),destroy:()=>n.close()}})(`${await ee()}${K.EnterpriseStorageProxy}`)),await e.trySynchronizeWorkspaceStorage()}return await fin.Platform.init({overrideCallback:Xi(a,e||a?.overrideCallback,n),interopOverride:qo(t||a?.interopOverride,a)}),l={allowed:!0},Oe(_e.Platform,l),await Promise.all(r.map((async e=>{((e,t)=>{Oe(`${_e.Microflow}:${e}`,t,"integration-feature")})(e.workflowIntegrationName,{allowed:!0,apiVersion:_}),await e._initializeWorkflows()}))),s})()),ts}const os=async({theme:e,customActions:t,language:a,...n})=>{const o=_.split(".").map((e=>parseInt(e))),r=await(async e=>{if((await Q()).disableRuntimeValidation)return!0;if(await Ae())return!0;const t=(await fin.System.getVersion()).split(".").map((e=>parseInt(e)));return e.every(((a,n)=>!(n<3)||t[n]===e[n]))})(o);if(!r)throw new Error(`Runtime version is not supported.  ${o[0]}.${o[1]}.${o[2]}.* is required`);var i;return e&&(Qi(e),i={allowed:!0},Oe(_e.Theming,i)),t&&(er=t),await Go(a?.initialLanguage),ns(n)}})(),module.exports=n})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/dexie/dist/dexie.js":
/*!**********************************************!*\
  !*** ../../node_modules/dexie/dist/dexie.js ***!
  \**********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*
 * Dexie.js - a minimalistic wrapper for IndexedDB
 * ===============================================
 *
 * By David Fahlander, david.fahlander@gmail.com
 *
 * Version 4.2.0, Wed Aug 13 2025
 *
 * https://dexie.org
 *
 * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/
 */
 
(function (global, factory) {
     true ? module.exports = factory() :
    0;
})(this, (function () { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
        return to.concat(ar || Array.prototype.slice.call(from));
    }

    var _global = typeof globalThis !== 'undefined' ? globalThis :
        typeof self !== 'undefined' ? self :
            typeof window !== 'undefined' ? window :
                __webpack_require__.g;

    var keys = Object.keys;
    var isArray = Array.isArray;
    if (typeof Promise !== 'undefined' && !_global.Promise) {
        _global.Promise = Promise;
    }
    function extend(obj, extension) {
        if (typeof extension !== 'object')
            return obj;
        keys(extension).forEach(function (key) {
            obj[key] = extension[key];
        });
        return obj;
    }
    var getProto = Object.getPrototypeOf;
    var _hasOwn = {}.hasOwnProperty;
    function hasOwn(obj, prop) {
        return _hasOwn.call(obj, prop);
    }
    function props(proto, extension) {
        if (typeof extension === 'function')
            extension = extension(getProto(proto));
        (typeof Reflect === "undefined" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {
            setProp(proto, key, extension[key]);
        });
    }
    var defineProperty = Object.defineProperty;
    function setProp(obj, prop, functionOrGetSet, options) {
        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, "get") && typeof functionOrGetSet.get === 'function' ?
            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :
            { value: functionOrGetSet, configurable: true, writable: true }, options));
    }
    function derive(Child) {
        return {
            from: function (Parent) {
                Child.prototype = Object.create(Parent.prototype);
                setProp(Child.prototype, "constructor", Child);
                return {
                    extend: props.bind(null, Child.prototype)
                };
            }
        };
    }
    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    function getPropertyDescriptor(obj, prop) {
        var pd = getOwnPropertyDescriptor(obj, prop);
        var proto;
        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);
    }
    var _slice = [].slice;
    function slice(args, start, end) {
        return _slice.call(args, start, end);
    }
    function override(origFunc, overridedFactory) {
        return overridedFactory(origFunc);
    }
    function assert(b) {
        if (!b)
            throw new Error("Assertion Failed");
    }
    function asap$1(fn) {
        if (_global.setImmediate)
            setImmediate(fn);
        else
            setTimeout(fn, 0);
    }
    function arrayToObject(array, extractor) {
        return array.reduce(function (result, item, i) {
            var nameAndValue = extractor(item, i);
            if (nameAndValue)
                result[nameAndValue[0]] = nameAndValue[1];
            return result;
        }, {});
    }
    function getByKeyPath(obj, keyPath) {
        if (typeof keyPath === 'string' && hasOwn(obj, keyPath))
            return obj[keyPath];
        if (!keyPath)
            return obj;
        if (typeof keyPath !== 'string') {
            var rv = [];
            for (var i = 0, l = keyPath.length; i < l; ++i) {
                var val = getByKeyPath(obj, keyPath[i]);
                rv.push(val);
            }
            return rv;
        }
        var period = keyPath.indexOf('.');
        if (period !== -1) {
            var innerObj = obj[keyPath.substr(0, period)];
            return innerObj == null ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));
        }
        return undefined;
    }
    function setByKeyPath(obj, keyPath, value) {
        if (!obj || keyPath === undefined)
            return;
        if ('isFrozen' in Object && Object.isFrozen(obj))
            return;
        if (typeof keyPath !== 'string' && 'length' in keyPath) {
            assert(typeof value !== 'string' && 'length' in value);
            for (var i = 0, l = keyPath.length; i < l; ++i) {
                setByKeyPath(obj, keyPath[i], value[i]);
            }
        }
        else {
            var period = keyPath.indexOf('.');
            if (period !== -1) {
                var currentKeyPath = keyPath.substr(0, period);
                var remainingKeyPath = keyPath.substr(period + 1);
                if (remainingKeyPath === "")
                    if (value === undefined) {
                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))
                            obj.splice(currentKeyPath, 1);
                        else
                            delete obj[currentKeyPath];
                    }
                    else
                        obj[currentKeyPath] = value;
                else {
                    var innerObj = obj[currentKeyPath];
                    if (!innerObj || !hasOwn(obj, currentKeyPath))
                        innerObj = (obj[currentKeyPath] = {});
                    setByKeyPath(innerObj, remainingKeyPath, value);
                }
            }
            else {
                if (value === undefined) {
                    if (isArray(obj) && !isNaN(parseInt(keyPath)))
                        obj.splice(keyPath, 1);
                    else
                        delete obj[keyPath];
                }
                else
                    obj[keyPath] = value;
            }
        }
    }
    function delByKeyPath(obj, keyPath) {
        if (typeof keyPath === 'string')
            setByKeyPath(obj, keyPath, undefined);
        else if ('length' in keyPath)
            [].map.call(keyPath, function (kp) {
                setByKeyPath(obj, kp, undefined);
            });
    }
    function shallowClone(obj) {
        var rv = {};
        for (var m in obj) {
            if (hasOwn(obj, m))
                rv[m] = obj[m];
        }
        return rv;
    }
    var concat = [].concat;
    function flatten(a) {
        return concat.apply([], a);
    }
    var intrinsicTypeNames = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey"
        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return ["Int", "Uint", "Float"].map(function (t) { return t + num + "Array"; }); }))).filter(function (t) { return _global[t]; });
    var intrinsicTypes = new Set(intrinsicTypeNames.map(function (t) { return _global[t]; }));
    function cloneSimpleObjectTree(o) {
        var rv = {};
        for (var k in o)
            if (hasOwn(o, k)) {
                var v = o[k];
                rv[k] = !v || typeof v !== 'object' || intrinsicTypes.has(v.constructor) ? v : cloneSimpleObjectTree(v);
            }
        return rv;
    }
    function objectIsEmpty(o) {
        for (var k in o)
            if (hasOwn(o, k))
                return false;
        return true;
    }
    var circularRefs = null;
    function deepClone(any) {
        circularRefs = new WeakMap();
        var rv = innerDeepClone(any);
        circularRefs = null;
        return rv;
    }
    function innerDeepClone(x) {
        if (!x || typeof x !== 'object')
            return x;
        var rv = circularRefs.get(x);
        if (rv)
            return rv;
        if (isArray(x)) {
            rv = [];
            circularRefs.set(x, rv);
            for (var i = 0, l = x.length; i < l; ++i) {
                rv.push(innerDeepClone(x[i]));
            }
        }
        else if (intrinsicTypes.has(x.constructor)) {
            rv = x;
        }
        else {
            var proto = getProto(x);
            rv = proto === Object.prototype ? {} : Object.create(proto);
            circularRefs.set(x, rv);
            for (var prop in x) {
                if (hasOwn(x, prop)) {
                    rv[prop] = innerDeepClone(x[prop]);
                }
            }
        }
        return rv;
    }
    var toString = {}.toString;
    function toStringTag(o) {
        return toString.call(o).slice(8, -1);
    }
    var iteratorSymbol = typeof Symbol !== 'undefined' ?
        Symbol.iterator :
        '@@iterator';
    var getIteratorOf = typeof iteratorSymbol === "symbol" ? function (x) {
        var i;
        return x != null && (i = x[iteratorSymbol]) && i.apply(x);
    } : function () { return null; };
    function delArrayItem(a, x) {
        var i = a.indexOf(x);
        if (i >= 0)
            a.splice(i, 1);
        return i >= 0;
    }
    var NO_CHAR_ARRAY = {};
    function getArrayOf(arrayLike) {
        var i, a, x, it;
        if (arguments.length === 1) {
            if (isArray(arrayLike))
                return arrayLike.slice();
            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')
                return [arrayLike];
            if ((it = getIteratorOf(arrayLike))) {
                a = [];
                while ((x = it.next()), !x.done)
                    a.push(x.value);
                return a;
            }
            if (arrayLike == null)
                return [arrayLike];
            i = arrayLike.length;
            if (typeof i === 'number') {
                a = new Array(i);
                while (i--)
                    a[i] = arrayLike[i];
                return a;
            }
            return [arrayLike];
        }
        i = arguments.length;
        a = new Array(i);
        while (i--)
            a[i] = arguments[i];
        return a;
    }
    var isAsyncFunction = typeof Symbol !== 'undefined'
        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }
        : function () { return false; };

    var dexieErrorNames = [
        'Modify',
        'Bulk',
        'OpenFailed',
        'VersionChange',
        'Schema',
        'Upgrade',
        'InvalidTable',
        'MissingAPI',
        'NoSuchDatabase',
        'InvalidArgument',
        'SubTransaction',
        'Unsupported',
        'Internal',
        'DatabaseClosed',
        'PrematureCommit',
        'ForeignAwait'
    ];
    var idbDomErrorNames = [
        'Unknown',
        'Constraint',
        'Data',
        'TransactionInactive',
        'ReadOnly',
        'Version',
        'NotFound',
        'InvalidState',
        'InvalidAccess',
        'Abort',
        'Timeout',
        'QuotaExceeded',
        'Syntax',
        'DataClone'
    ];
    var errorList = dexieErrorNames.concat(idbDomErrorNames);
    var defaultTexts = {
        VersionChanged: "Database version changed by other database connection",
        DatabaseClosed: "Database has been closed",
        Abort: "Transaction aborted",
        TransactionInactive: "Transaction has already completed or failed",
        MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"
    };
    function DexieError(name, msg) {
        this.name = name;
        this.message = msg;
    }
    derive(DexieError).from(Error).extend({
        toString: function () { return this.name + ": " + this.message; }
    });
    function getMultiErrorMessage(msg, failures) {
        return msg + ". Errors: " + Object.keys(failures)
            .map(function (key) { return failures[key].toString(); })
            .filter(function (v, i, s) { return s.indexOf(v) === i; })
            .join('\n');
    }
    function ModifyError(msg, failures, successCount, failedKeys) {
        this.failures = failures;
        this.failedKeys = failedKeys;
        this.successCount = successCount;
        this.message = getMultiErrorMessage(msg, failures);
    }
    derive(ModifyError).from(DexieError);
    function BulkError(msg, failures) {
        this.name = "BulkError";
        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });
        this.failuresByPos = failures;
        this.message = getMultiErrorMessage(msg, this.failures);
    }
    derive(BulkError).from(DexieError);
    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + "Error", obj); }, {});
    var BaseException = DexieError;
    var exceptions = errorList.reduce(function (obj, name) {
        var fullName = name + "Error";
        function DexieError(msgOrInner, inner) {
            this.name = fullName;
            if (!msgOrInner) {
                this.message = defaultTexts[name] || fullName;
                this.inner = null;
            }
            else if (typeof msgOrInner === 'string') {
                this.message = "".concat(msgOrInner).concat(!inner ? '' : '\n ' + inner);
                this.inner = inner || null;
            }
            else if (typeof msgOrInner === 'object') {
                this.message = "".concat(msgOrInner.name, " ").concat(msgOrInner.message);
                this.inner = msgOrInner;
            }
        }
        derive(DexieError).from(BaseException);
        obj[name] = DexieError;
        return obj;
    }, {});
    exceptions.Syntax = SyntaxError;
    exceptions.Type = TypeError;
    exceptions.Range = RangeError;
    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {
        obj[name + "Error"] = exceptions[name];
        return obj;
    }, {});
    function mapError(domError, message) {
        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])
            return domError;
        var rv = new exceptionMap[domError.name](message || domError.message, domError);
        if ("stack" in domError) {
            setProp(rv, "stack", { get: function () {
                    return this.inner.stack;
                } });
        }
        return rv;
    }
    var fullNameExceptions = errorList.reduce(function (obj, name) {
        if (["Syntax", "Type", "Range"].indexOf(name) === -1)
            obj[name + "Error"] = exceptions[name];
        return obj;
    }, {});
    fullNameExceptions.ModifyError = ModifyError;
    fullNameExceptions.DexieError = DexieError;
    fullNameExceptions.BulkError = BulkError;

    function nop() { }
    function mirror(val) { return val; }
    function pureFunctionChain(f1, f2) {
        if (f1 == null || f1 === mirror)
            return f2;
        return function (val) {
            return f2(f1(val));
        };
    }
    function callBoth(on1, on2) {
        return function () {
            on1.apply(this, arguments);
            on2.apply(this, arguments);
        };
    }
    function hookCreatingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            var res = f1.apply(this, arguments);
            if (res !== undefined)
                arguments[0] = res;
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = null;
            this.onerror = null;
            var res2 = f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
            return res2 !== undefined ? res2 : res;
        };
    }
    function hookDeletingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            f1.apply(this, arguments);
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = this.onerror = null;
            f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
        };
    }
    function hookUpdatingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function (modifications) {
            var res = f1.apply(this, arguments);
            extend(modifications, res);
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = null;
            this.onerror = null;
            var res2 = f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
            return res === undefined ?
                (res2 === undefined ? undefined : res2) :
                (extend(res, res2));
        };
    }
    function reverseStoppableEventChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            if (f2.apply(this, arguments) === false)
                return false;
            return f1.apply(this, arguments);
        };
    }
    function promisableChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            var res = f1.apply(this, arguments);
            if (res && typeof res.then === 'function') {
                var thiz = this, i = arguments.length, args = new Array(i);
                while (i--)
                    args[i] = arguments[i];
                return res.then(function () {
                    return f2.apply(thiz, args);
                });
            }
            return f2.apply(this, arguments);
        };
    }

    var debug = typeof location !== 'undefined' &&
        /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
    function setDebug(value, filter) {
        debug = value;
    }

    var INTERNAL = {};
    var ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?
        [] :
        (function () {
            var globalP = Promise.resolve();
            if (typeof crypto === 'undefined' || !crypto.subtle)
                return [globalP, getProto(globalP), globalP];
            var nativeP = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
            return [
                nativeP,
                getProto(nativeP),
                globalP
            ];
        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;
    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;
    var patchGlobalPromise = !!resolvedGlobalPromise;
    function schedulePhysicalTick() {
        queueMicrotask(physicalTick);
    }
    var asap = function (callback, args) {
        microtickQueue.push([callback, args]);
        if (needsNewPhysicalTick) {
            schedulePhysicalTick();
            needsNewPhysicalTick = false;
        }
    };
    var isOutsideMicroTick = true,
    needsNewPhysicalTick = true,
    unhandledErrors = [],
    rejectingErrors = [],
    rejectionMapper = mirror;
    var globalPSD = {
        id: 'global',
        global: true,
        ref: 0,
        unhandleds: [],
        onunhandled: nop,
        pgp: false,
        env: {},
        finalize: nop
    };
    var PSD = globalPSD;
    var microtickQueue = [];
    var numScheduledCalls = 0;
    var tickFinalizers = [];
    function DexiePromise(fn) {
        if (typeof this !== 'object')
            throw new TypeError('Promises must be constructed via new');
        this._listeners = [];
        this._lib = false;
        var psd = (this._PSD = PSD);
        if (typeof fn !== 'function') {
            if (fn !== INTERNAL)
                throw new TypeError('Not a function');
            this._state = arguments[1];
            this._value = arguments[2];
            if (this._state === false)
                handleRejection(this, this._value);
            return;
        }
        this._state = null;
        this._value = null;
        ++psd.ref;
        executePromiseTask(this, fn);
    }
    var thenProp = {
        get: function () {
            var psd = PSD, microTaskId = totalEchoes;
            function then(onFulfilled, onRejected) {
                var _this = this;
                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);
                var cleanup = possibleAwait && !decrementExpectedAwaits();
                var rv = new DexiePromise(function (resolve, reject) {
                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));
                });
                if (this._consoleTask)
                    rv._consoleTask = this._consoleTask;
                return rv;
            }
            then.prototype = INTERNAL;
            return then;
        },
        set: function (value) {
            setProp(this, 'then', value && value.prototype === INTERNAL ?
                thenProp :
                {
                    get: function () {
                        return value;
                    },
                    set: thenProp.set
                });
        }
    };
    props(DexiePromise.prototype, {
        then: thenProp,
        _then: function (onFulfilled, onRejected) {
            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));
        },
        catch: function (onRejected) {
            if (arguments.length === 1)
                return this.then(null, onRejected);
            var type = arguments[0], handler = arguments[1];
            return typeof type === 'function' ? this.then(null, function (err) {
                return err instanceof type ? handler(err) : PromiseReject(err);
            })
                : this.then(null, function (err) {
                    return err && err.name === type ? handler(err) : PromiseReject(err);
                });
        },
        finally: function (onFinally) {
            return this.then(function (value) {
                return DexiePromise.resolve(onFinally()).then(function () { return value; });
            }, function (err) {
                return DexiePromise.resolve(onFinally()).then(function () { return PromiseReject(err); });
            });
        },
        timeout: function (ms, msg) {
            var _this = this;
            return ms < Infinity ?
                new DexiePromise(function (resolve, reject) {
                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);
                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));
                }) : this;
        }
    });
    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)
        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');
    globalPSD.env = snapShot();
    function Listener(onFulfilled, onRejected, resolve, reject, zone) {
        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
        this.onRejected = typeof onRejected === 'function' ? onRejected : null;
        this.resolve = resolve;
        this.reject = reject;
        this.psd = zone;
    }
    props(DexiePromise, {
        all: function () {
            var values = getArrayOf.apply(null, arguments)
                .map(onPossibleParallellAsync);
            return new DexiePromise(function (resolve, reject) {
                if (values.length === 0)
                    resolve([]);
                var remaining = values.length;
                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {
                    values[i] = x;
                    if (!--remaining)
                        resolve(values);
                }, reject); });
            });
        },
        resolve: function (value) {
            if (value instanceof DexiePromise)
                return value;
            if (value && typeof value.then === 'function')
                return new DexiePromise(function (resolve, reject) {
                    value.then(resolve, reject);
                });
            var rv = new DexiePromise(INTERNAL, true, value);
            return rv;
        },
        reject: PromiseReject,
        race: function () {
            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
            return new DexiePromise(function (resolve, reject) {
                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });
            });
        },
        PSD: {
            get: function () { return PSD; },
            set: function (value) { return PSD = value; }
        },
        totalEchoes: { get: function () { return totalEchoes; } },
        newPSD: newScope,
        usePSD: usePSD,
        scheduler: {
            get: function () { return asap; },
            set: function (value) { asap = value; }
        },
        rejectionMapper: {
            get: function () { return rejectionMapper; },
            set: function (value) { rejectionMapper = value; }
        },
        follow: function (fn, zoneProps) {
            return new DexiePromise(function (resolve, reject) {
                return newScope(function (resolve, reject) {
                    var psd = PSD;
                    psd.unhandleds = [];
                    psd.onunhandled = reject;
                    psd.finalize = callBoth(function () {
                        var _this = this;
                        run_at_end_of_this_or_next_physical_tick(function () {
                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);
                        });
                    }, psd.finalize);
                    fn();
                }, zoneProps, resolve, reject);
            });
        }
    });
    if (NativePromise) {
        if (NativePromise.allSettled)
            setProp(DexiePromise, "allSettled", function () {
                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
                return new DexiePromise(function (resolve) {
                    if (possiblePromises.length === 0)
                        resolve([]);
                    var remaining = possiblePromises.length;
                    var results = new Array(remaining);
                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: "fulfilled", value: value }; }, function (reason) { return results[i] = { status: "rejected", reason: reason }; })
                        .then(function () { return --remaining || resolve(results); }); });
                });
            });
        if (NativePromise.any && typeof AggregateError !== 'undefined')
            setProp(DexiePromise, "any", function () {
                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
                return new DexiePromise(function (resolve, reject) {
                    if (possiblePromises.length === 0)
                        reject(new AggregateError([]));
                    var remaining = possiblePromises.length;
                    var failures = new Array(remaining);
                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {
                        failures[i] = failure;
                        if (!--remaining)
                            reject(new AggregateError(failures));
                    }); });
                });
            });
        if (NativePromise.withResolvers)
            DexiePromise.withResolvers = NativePromise.withResolvers;
    }
    function executePromiseTask(promise, fn) {
        try {
            fn(function (value) {
                if (promise._state !== null)
                    return;
                if (value === promise)
                    throw new TypeError('A promise cannot be resolved with itself.');
                var shouldExecuteTick = promise._lib && beginMicroTickScope();
                if (value && typeof value.then === 'function') {
                    executePromiseTask(promise, function (resolve, reject) {
                        value instanceof DexiePromise ?
                            value._then(resolve, reject) :
                            value.then(resolve, reject);
                    });
                }
                else {
                    promise._state = true;
                    promise._value = value;
                    propagateAllListeners(promise);
                }
                if (shouldExecuteTick)
                    endMicroTickScope();
            }, handleRejection.bind(null, promise));
        }
        catch (ex) {
            handleRejection(promise, ex);
        }
    }
    function handleRejection(promise, reason) {
        rejectingErrors.push(reason);
        if (promise._state !== null)
            return;
        var shouldExecuteTick = promise._lib && beginMicroTickScope();
        reason = rejectionMapper(reason);
        promise._state = false;
        promise._value = reason;
        addPossiblyUnhandledError(promise);
        propagateAllListeners(promise);
        if (shouldExecuteTick)
            endMicroTickScope();
    }
    function propagateAllListeners(promise) {
        var listeners = promise._listeners;
        promise._listeners = [];
        for (var i = 0, len = listeners.length; i < len; ++i) {
            propagateToListener(promise, listeners[i]);
        }
        var psd = promise._PSD;
        --psd.ref || psd.finalize();
        if (numScheduledCalls === 0) {
            ++numScheduledCalls;
            asap(function () {
                if (--numScheduledCalls === 0)
                    finalizePhysicalTick();
            }, []);
        }
    }
    function propagateToListener(promise, listener) {
        if (promise._state === null) {
            promise._listeners.push(listener);
            return;
        }
        var cb = promise._state ? listener.onFulfilled : listener.onRejected;
        if (cb === null) {
            return (promise._state ? listener.resolve : listener.reject)(promise._value);
        }
        ++listener.psd.ref;
        ++numScheduledCalls;
        asap(callListener, [cb, promise, listener]);
    }
    function callListener(cb, promise, listener) {
        try {
            var ret, value = promise._value;
            if (!promise._state && rejectingErrors.length)
                rejectingErrors = [];
            ret = debug && promise._consoleTask ? promise._consoleTask.run(function () { return cb(value); }) : cb(value);
            if (!promise._state && rejectingErrors.indexOf(value) === -1) {
                markErrorAsHandled(promise);
            }
            listener.resolve(ret);
        }
        catch (e) {
            listener.reject(e);
        }
        finally {
            if (--numScheduledCalls === 0)
                finalizePhysicalTick();
            --listener.psd.ref || listener.psd.finalize();
        }
    }
    function physicalTick() {
        usePSD(globalPSD, function () {
            beginMicroTickScope() && endMicroTickScope();
        });
    }
    function beginMicroTickScope() {
        var wasRootExec = isOutsideMicroTick;
        isOutsideMicroTick = false;
        needsNewPhysicalTick = false;
        return wasRootExec;
    }
    function endMicroTickScope() {
        var callbacks, i, l;
        do {
            while (microtickQueue.length > 0) {
                callbacks = microtickQueue;
                microtickQueue = [];
                l = callbacks.length;
                for (i = 0; i < l; ++i) {
                    var item = callbacks[i];
                    item[0].apply(null, item[1]);
                }
            }
        } while (microtickQueue.length > 0);
        isOutsideMicroTick = true;
        needsNewPhysicalTick = true;
    }
    function finalizePhysicalTick() {
        var unhandledErrs = unhandledErrors;
        unhandledErrors = [];
        unhandledErrs.forEach(function (p) {
            p._PSD.onunhandled.call(null, p._value, p);
        });
        var finalizers = tickFinalizers.slice(0);
        var i = finalizers.length;
        while (i)
            finalizers[--i]();
    }
    function run_at_end_of_this_or_next_physical_tick(fn) {
        function finalizer() {
            fn();
            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);
        }
        tickFinalizers.push(finalizer);
        ++numScheduledCalls;
        asap(function () {
            if (--numScheduledCalls === 0)
                finalizePhysicalTick();
        }, []);
    }
    function addPossiblyUnhandledError(promise) {
        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))
            unhandledErrors.push(promise);
    }
    function markErrorAsHandled(promise) {
        var i = unhandledErrors.length;
        while (i)
            if (unhandledErrors[--i]._value === promise._value) {
                unhandledErrors.splice(i, 1);
                return;
            }
    }
    function PromiseReject(reason) {
        return new DexiePromise(INTERNAL, false, reason);
    }
    function wrap(fn, errorCatcher) {
        var psd = PSD;
        return function () {
            var wasRootExec = beginMicroTickScope(), outerScope = PSD;
            try {
                switchToZone(psd, true);
                return fn.apply(this, arguments);
            }
            catch (e) {
                errorCatcher && errorCatcher(e);
            }
            finally {
                switchToZone(outerScope, false);
                if (wasRootExec)
                    endMicroTickScope();
            }
        };
    }
    var task = { awaits: 0, echoes: 0, id: 0 };
    var taskCounter = 0;
    var zoneStack = [];
    var zoneEchoes = 0;
    var totalEchoes = 0;
    var zone_id_counter = 0;
    function newScope(fn, props, a1, a2) {
        var parent = PSD, psd = Object.create(parent);
        psd.parent = parent;
        psd.ref = 0;
        psd.global = false;
        psd.id = ++zone_id_counter;
        globalPSD.env;
        psd.env = patchGlobalPromise ? {
            Promise: DexiePromise,
            PromiseProp: { value: DexiePromise, configurable: true, writable: true },
            all: DexiePromise.all,
            race: DexiePromise.race,
            allSettled: DexiePromise.allSettled,
            any: DexiePromise.any,
            resolve: DexiePromise.resolve,
            reject: DexiePromise.reject,
        } : {};
        if (props)
            extend(psd, props);
        ++parent.ref;
        psd.finalize = function () {
            --this.parent.ref || this.parent.finalize();
        };
        var rv = usePSD(psd, fn, a1, a2);
        if (psd.ref === 0)
            psd.finalize();
        return rv;
    }
    function incrementExpectedAwaits() {
        if (!task.id)
            task.id = ++taskCounter;
        ++task.awaits;
        task.echoes += ZONE_ECHO_LIMIT;
        return task.id;
    }
    function decrementExpectedAwaits() {
        if (!task.awaits)
            return false;
        if (--task.awaits === 0)
            task.id = 0;
        task.echoes = task.awaits * ZONE_ECHO_LIMIT;
        return true;
    }
    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {
        incrementExpectedAwaits = decrementExpectedAwaits = nop;
    }
    function onPossibleParallellAsync(possiblePromise) {
        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {
            incrementExpectedAwaits();
            return possiblePromise.then(function (x) {
                decrementExpectedAwaits();
                return x;
            }, function (e) {
                decrementExpectedAwaits();
                return rejection(e);
            });
        }
        return possiblePromise;
    }
    function zoneEnterEcho(targetZone) {
        ++totalEchoes;
        if (!task.echoes || --task.echoes === 0) {
            task.echoes = task.awaits = task.id = 0;
        }
        zoneStack.push(PSD);
        switchToZone(targetZone, true);
    }
    function zoneLeaveEcho() {
        var zone = zoneStack[zoneStack.length - 1];
        zoneStack.pop();
        switchToZone(zone, false);
    }
    function switchToZone(targetZone, bEnteringZone) {
        var currentZone = PSD;
        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {
            queueMicrotask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);
        }
        if (targetZone === PSD)
            return;
        PSD = targetZone;
        if (currentZone === globalPSD)
            globalPSD.env = snapShot();
        if (patchGlobalPromise) {
            var GlobalPromise = globalPSD.env.Promise;
            var targetEnv = targetZone.env;
            if (currentZone.global || targetZone.global) {
                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);
                GlobalPromise.all = targetEnv.all;
                GlobalPromise.race = targetEnv.race;
                GlobalPromise.resolve = targetEnv.resolve;
                GlobalPromise.reject = targetEnv.reject;
                if (targetEnv.allSettled)
                    GlobalPromise.allSettled = targetEnv.allSettled;
                if (targetEnv.any)
                    GlobalPromise.any = targetEnv.any;
            }
        }
    }
    function snapShot() {
        var GlobalPromise = _global.Promise;
        return patchGlobalPromise ? {
            Promise: GlobalPromise,
            PromiseProp: Object.getOwnPropertyDescriptor(_global, "Promise"),
            all: GlobalPromise.all,
            race: GlobalPromise.race,
            allSettled: GlobalPromise.allSettled,
            any: GlobalPromise.any,
            resolve: GlobalPromise.resolve,
            reject: GlobalPromise.reject,
        } : {};
    }
    function usePSD(psd, fn, a1, a2, a3) {
        var outerScope = PSD;
        try {
            switchToZone(psd, true);
            return fn(a1, a2, a3);
        }
        finally {
            switchToZone(outerScope, false);
        }
    }
    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {
        return typeof fn !== 'function' ? fn : function () {
            var outerZone = PSD;
            if (possibleAwait)
                incrementExpectedAwaits();
            switchToZone(zone, true);
            try {
                return fn.apply(this, arguments);
            }
            finally {
                switchToZone(outerZone, false);
                if (cleanup)
                    queueMicrotask(decrementExpectedAwaits);
            }
        };
    }
    function execInGlobalContext(cb) {
        if (Promise === NativePromise && task.echoes === 0) {
            if (zoneEchoes === 0) {
                cb();
            }
            else {
                enqueueNativeMicroTask(cb);
            }
        }
        else {
            setTimeout(cb, 0);
        }
    }
    var rejection = DexiePromise.reject;

    function tempTransaction(db, mode, storeNames, fn) {
        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {
            if (db._state.openComplete) {
                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));
            }
            if (!db._state.isBeingOpened) {
                if (!db._state.autoOpen)
                    return rejection(new exceptions.DatabaseClosed());
                db.open().catch(nop);
            }
            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });
        }
        else {
            var trans = db._createTransaction(mode, storeNames, db._dbSchema);
            try {
                trans.create();
                db._state.PR1398_maxLoop = 3;
            }
            catch (ex) {
                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {
                    console.warn('Dexie: Need to reopen db');
                    db.close({ disableAutoOpen: false });
                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });
                }
                return rejection(ex);
            }
            return trans._promise(mode, function (resolve, reject) {
                return newScope(function () {
                    PSD.trans = trans;
                    return fn(resolve, reject, trans);
                });
            }).then(function (result) {
                if (mode === 'readwrite')
                    try {
                        trans.idbtrans.commit();
                    }
                    catch (_a) { }
                return mode === 'readonly' ? result : trans._completion.then(function () { return result; });
            });
        }
    }

    var DEXIE_VERSION = '4.2.0';
    var maxString = String.fromCharCode(65535);
    var minKey = -Infinity;
    var INVALID_KEY_ARGUMENT = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";
    var STRING_EXPECTED = "String expected.";
    var connections = [];
    var DBNAMES_DB = '__dbnames';
    var READONLY = 'readonly';
    var READWRITE = 'readwrite';

    function combine(filter1, filter2) {
        return filter1 ?
            filter2 ?
                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :
                filter1 :
            filter2;
    }

    var AnyRange = {
        type: 3 ,
        lower: -Infinity,
        lowerOpen: false,
        upper: [[]],
        upperOpen: false
    };

    function workaroundForUndefinedPrimKey(keyPath) {
        return typeof keyPath === "string" && !/\./.test(keyPath)
            ? function (obj) {
                if (obj[keyPath] === undefined && (keyPath in obj)) {
                    obj = deepClone(obj);
                    delete obj[keyPath];
                }
                return obj;
            }
            : function (obj) { return obj; };
    }

    function Entity() {
        throw exceptions.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.");
    }

    function cmp(a, b) {
        try {
            var ta = type(a);
            var tb = type(b);
            if (ta !== tb) {
                if (ta === 'Array')
                    return 1;
                if (tb === 'Array')
                    return -1;
                if (ta === 'binary')
                    return 1;
                if (tb === 'binary')
                    return -1;
                if (ta === 'string')
                    return 1;
                if (tb === 'string')
                    return -1;
                if (ta === 'Date')
                    return 1;
                if (tb !== 'Date')
                    return NaN;
                return -1;
            }
            switch (ta) {
                case 'number':
                case 'Date':
                case 'string':
                    return a > b ? 1 : a < b ? -1 : 0;
                case 'binary': {
                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));
                }
                case 'Array':
                    return compareArrays(a, b);
            }
        }
        catch (_a) { }
        return NaN;
    }
    function compareArrays(a, b) {
        var al = a.length;
        var bl = b.length;
        var l = al < bl ? al : bl;
        for (var i = 0; i < l; ++i) {
            var res = cmp(a[i], b[i]);
            if (res !== 0)
                return res;
        }
        return al === bl ? 0 : al < bl ? -1 : 1;
    }
    function compareUint8Arrays(a, b) {
        var al = a.length;
        var bl = b.length;
        var l = al < bl ? al : bl;
        for (var i = 0; i < l; ++i) {
            if (a[i] !== b[i])
                return a[i] < b[i] ? -1 : 1;
        }
        return al === bl ? 0 : al < bl ? -1 : 1;
    }
    function type(x) {
        var t = typeof x;
        if (t !== 'object')
            return t;
        if (ArrayBuffer.isView(x))
            return 'binary';
        var tsTag = toStringTag(x);
        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;
    }
    function getUint8Array(a) {
        if (a instanceof Uint8Array)
            return a;
        if (ArrayBuffer.isView(a))
            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);
        return new Uint8Array(a);
    }

    function builtInDeletionTrigger(table, keys, res) {
        var yProps = table.schema.yProps;
        if (!yProps)
            return res;
        if (keys && res.numFailures > 0)
            keys = keys.filter(function (_, i) { return !res.failures[i]; });
        return Promise.all(yProps.map(function (_a) {
            var updatesTable = _a.updatesTable;
            return keys
                ? table.db.table(updatesTable).where('k').anyOf(keys).delete()
                : table.db.table(updatesTable).clear();
        })).then(function () { return res; });
    }

    var Table =  (function () {
        function Table() {
        }
        Table.prototype._trans = function (mode, fn, writeLocked) {
            var trans = this._tx || PSD.trans;
            var tableName = this.name;
            var task = debug && typeof console !== 'undefined' && console.createTask && console.createTask("Dexie: ".concat(mode === 'readonly' ? 'read' : 'write', " ").concat(this.name));
            function checkTableInTransaction(resolve, reject, trans) {
                if (!trans.schema[tableName])
                    throw new exceptions.NotFound("Table " + tableName + " not part of transaction");
                return fn(trans.idbtrans, trans);
            }
            var wasRootExec = beginMicroTickScope();
            try {
                var p = trans && trans.db._novip === this.db._novip ?
                    trans === PSD.trans ?
                        trans._promise(mode, checkTableInTransaction, writeLocked) :
                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :
                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);
                if (task) {
                    p._consoleTask = task;
                    p = p.catch(function (err) {
                        console.trace(err);
                        return rejection(err);
                    });
                }
                return p;
            }
            finally {
                if (wasRootExec)
                    endMicroTickScope();
            }
        };
        Table.prototype.get = function (keyOrCrit, cb) {
            var _this = this;
            if (keyOrCrit && keyOrCrit.constructor === Object)
                return this.where(keyOrCrit).first(cb);
            if (keyOrCrit == null)
                return rejection(new exceptions.Type("Invalid argument to Table.get()"));
            return this._trans('readonly', function (trans) {
                return _this.core.get({ trans: trans, key: keyOrCrit })
                    .then(function (res) { return _this.hook.reading.fire(res); });
            }).then(cb);
        };
        Table.prototype.where = function (indexOrCrit) {
            if (typeof indexOrCrit === 'string')
                return new this.db.WhereClause(this, indexOrCrit);
            if (isArray(indexOrCrit))
                return new this.db.WhereClause(this, "[".concat(indexOrCrit.join('+'), "]"));
            var keyPaths = keys(indexOrCrit);
            if (keyPaths.length === 1)
                return this
                    .where(keyPaths[0])
                    .equals(indexOrCrit[keyPaths[0]]);
            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {
                if (ix.compound &&
                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; })) {
                    for (var i = 0; i < keyPaths.length; ++i) {
                        if (keyPaths.indexOf(ix.keyPath[i]) === -1)
                            return false;
                    }
                    return true;
                }
                return false;
            }).sort(function (a, b) { return a.keyPath.length - b.keyPath.length; })[0];
            if (compoundIndex && this.db._maxKey !== maxString) {
                var keyPathsInValidOrder = compoundIndex.keyPath.slice(0, keyPaths.length);
                return this
                    .where(keyPathsInValidOrder)
                    .equals(keyPathsInValidOrder.map(function (kp) { return indexOrCrit[kp]; }));
            }
            if (!compoundIndex && debug)
                console.warn("The query ".concat(JSON.stringify(indexOrCrit), " on ").concat(this.name, " would benefit from a ") +
                    "compound index [".concat(keyPaths.join('+'), "]"));
            var idxByName = this.schema.idxByName;
            function equals(a, b) {
                return cmp(a, b) === 0;
            }
            var _a = keyPaths.reduce(function (_a, keyPath) {
                var prevIndex = _a[0], prevFilterFn = _a[1];
                var index = idxByName[keyPath];
                var value = indexOrCrit[keyPath];
                return [
                    prevIndex || index,
                    prevIndex || !index ?
                        combine(prevFilterFn, index && index.multi ?
                            function (x) {
                                var prop = getByKeyPath(x, keyPath);
                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });
                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })
                        : prevFilterFn
                ];
            }, [null, null]), idx = _a[0], filterFunction = _a[1];
            return idx ?
                this.where(idx.name).equals(indexOrCrit[idx.keyPath])
                    .filter(filterFunction) :
                compoundIndex ?
                    this.filter(filterFunction) :
                    this.where(keyPaths).equals('');
        };
        Table.prototype.filter = function (filterFunction) {
            return this.toCollection().and(filterFunction);
        };
        Table.prototype.count = function (thenShortcut) {
            return this.toCollection().count(thenShortcut);
        };
        Table.prototype.offset = function (offset) {
            return this.toCollection().offset(offset);
        };
        Table.prototype.limit = function (numRows) {
            return this.toCollection().limit(numRows);
        };
        Table.prototype.each = function (callback) {
            return this.toCollection().each(callback);
        };
        Table.prototype.toArray = function (thenShortcut) {
            return this.toCollection().toArray(thenShortcut);
        };
        Table.prototype.toCollection = function () {
            return new this.db.Collection(new this.db.WhereClause(this));
        };
        Table.prototype.orderBy = function (index) {
            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?
                "[".concat(index.join('+'), "]") :
                index));
        };
        Table.prototype.reverse = function () {
            return this.toCollection().reverse();
        };
        Table.prototype.mapToClass = function (constructor) {
            var _a = this, db = _a.db, tableName = _a.name;
            this.schema.mappedClass = constructor;
            if (constructor.prototype instanceof Entity) {
                constructor =  (function (_super) {
                    __extends(class_1, _super);
                    function class_1() {
                        return _super !== null && _super.apply(this, arguments) || this;
                    }
                    Object.defineProperty(class_1.prototype, "db", {
                        get: function () { return db; },
                        enumerable: false,
                        configurable: true
                    });
                    class_1.prototype.table = function () { return tableName; };
                    return class_1;
                }(constructor));
            }
            var inheritedProps = new Set();
            for (var proto = constructor.prototype; proto; proto = getProto(proto)) {
                Object.getOwnPropertyNames(proto).forEach(function (propName) { return inheritedProps.add(propName); });
            }
            var readHook = function (obj) {
                if (!obj)
                    return obj;
                var res = Object.create(constructor.prototype);
                for (var m in obj)
                    if (!inheritedProps.has(m))
                        try {
                            res[m] = obj[m];
                        }
                        catch (_) { }
                return res;
            };
            if (this.schema.readHook) {
                this.hook.reading.unsubscribe(this.schema.readHook);
            }
            this.schema.readHook = readHook;
            this.hook("reading", readHook);
            return constructor;
        };
        Table.prototype.defineClass = function () {
            function Class(content) {
                extend(this, content);
            }
            return this.mapToClass(Class);
        };
        Table.prototype.add = function (obj, key) {
            var _this = this;
            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
            var objToAdd = obj;
            if (keyPath && auto) {
                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);
            }
            return this._trans('readwrite', function (trans) {
                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });
            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })
                .then(function (lastResult) {
                if (keyPath) {
                    try {
                        setByKeyPath(obj, keyPath, lastResult);
                    }
                    catch (_) { }
                }
                return lastResult;
            });
        };
        Table.prototype.update = function (keyOrObject, modifications) {
            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {
                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);
                if (key === undefined)
                    return rejection(new exceptions.InvalidArgument("Given object does not contain its primary key"));
                return this.where(":id").equals(key).modify(modifications);
            }
            else {
                return this.where(":id").equals(keyOrObject).modify(modifications);
            }
        };
        Table.prototype.put = function (obj, key) {
            var _this = this;
            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
            var objToAdd = obj;
            if (keyPath && auto) {
                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);
            }
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })
                .then(function (lastResult) {
                if (keyPath) {
                    try {
                        setByKeyPath(obj, keyPath, lastResult);
                    }
                    catch (_) { }
                }
                return lastResult;
            });
        };
        Table.prototype.delete = function (key) {
            var _this = this;
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] })
                .then(function (res) { return builtInDeletionTrigger(_this, [key], res); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; }); });
        };
        Table.prototype.clear = function () {
            var _this = this;
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange })
                .then(function (res) { return builtInDeletionTrigger(_this, null, res); }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });
        };
        Table.prototype.bulkGet = function (keys) {
            var _this = this;
            return this._trans('readonly', function (trans) {
                return _this.core.getMany({
                    keys: keys,
                    trans: trans
                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });
            });
        };
        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {
            var _this = this;
            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;
            options = options || (keys ? undefined : keysOrOptions);
            var wantResults = options ? options.allKeys : undefined;
            return this._trans('readwrite', function (trans) {
                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
                if (keyPath && keys)
                    throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
                if (keys && keys.length !== objects.length)
                    throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");
                var numObjects = objects.length;
                var objectsToAdd = keyPath && auto ?
                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :
                    objects;
                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })
                    .then(function (_a) {
                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;
                    var result = wantResults ? results : lastResult;
                    if (numFailures === 0)
                        return result;
                    throw new BulkError("".concat(_this.name, ".bulkAdd(): ").concat(numFailures, " of ").concat(numObjects, " operations failed"), failures);
                });
            });
        };
        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {
            var _this = this;
            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;
            options = options || (keys ? undefined : keysOrOptions);
            var wantResults = options ? options.allKeys : undefined;
            return this._trans('readwrite', function (trans) {
                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
                if (keyPath && keys)
                    throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
                if (keys && keys.length !== objects.length)
                    throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");
                var numObjects = objects.length;
                var objectsToPut = keyPath && auto ?
                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :
                    objects;
                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })
                    .then(function (_a) {
                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;
                    var result = wantResults ? results : lastResult;
                    if (numFailures === 0)
                        return result;
                    throw new BulkError("".concat(_this.name, ".bulkPut(): ").concat(numFailures, " of ").concat(numObjects, " operations failed"), failures);
                });
            });
        };
        Table.prototype.bulkUpdate = function (keysAndChanges) {
            var _this = this;
            var coreTable = this.core;
            var keys = keysAndChanges.map(function (entry) { return entry.key; });
            var changeSpecs = keysAndChanges.map(function (entry) { return entry.changes; });
            var offsetMap = [];
            return this._trans('readwrite', function (trans) {
                return coreTable.getMany({ trans: trans, keys: keys, cache: 'clone' }).then(function (objs) {
                    var resultKeys = [];
                    var resultObjs = [];
                    keysAndChanges.forEach(function (_a, idx) {
                        var key = _a.key, changes = _a.changes;
                        var obj = objs[idx];
                        if (obj) {
                            for (var _i = 0, _b = Object.keys(changes); _i < _b.length; _i++) {
                                var keyPath = _b[_i];
                                var value = changes[keyPath];
                                if (keyPath === _this.schema.primKey.keyPath) {
                                    if (cmp(value, key) !== 0) {
                                        throw new exceptions.Constraint("Cannot update primary key in bulkUpdate()");
                                    }
                                }
                                else {
                                    setByKeyPath(obj, keyPath, value);
                                }
                            }
                            offsetMap.push(idx);
                            resultKeys.push(key);
                            resultObjs.push(obj);
                        }
                    });
                    var numEntries = resultKeys.length;
                    return coreTable
                        .mutate({
                        trans: trans,
                        type: 'put',
                        keys: resultKeys,
                        values: resultObjs,
                        updates: {
                            keys: keys,
                            changeSpecs: changeSpecs
                        }
                    })
                        .then(function (_a) {
                        var numFailures = _a.numFailures, failures = _a.failures;
                        if (numFailures === 0)
                            return numEntries;
                        for (var _i = 0, _b = Object.keys(failures); _i < _b.length; _i++) {
                            var offset = _b[_i];
                            var mappedOffset = offsetMap[Number(offset)];
                            if (mappedOffset != null) {
                                var failure = failures[offset];
                                delete failures[offset];
                                failures[mappedOffset] = failure;
                            }
                        }
                        throw new BulkError("".concat(_this.name, ".bulkUpdate(): ").concat(numFailures, " of ").concat(numEntries, " operations failed"), failures);
                    });
                });
            });
        };
        Table.prototype.bulkDelete = function (keys) {
            var _this = this;
            var numKeys = keys.length;
            return this._trans('readwrite', function (trans) {
                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys })
                    .then(function (res) { return builtInDeletionTrigger(_this, keys, res); });
            }).then(function (_a) {
                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;
                if (numFailures === 0)
                    return lastResult;
                throw new BulkError("".concat(_this.name, ".bulkDelete(): ").concat(numFailures, " of ").concat(numKeys, " operations failed"), failures);
            });
        };
        return Table;
    }());

    function Events(ctx) {
        var evs = {};
        var rv = function (eventName, subscriber) {
            if (subscriber) {
                var i = arguments.length, args = new Array(i - 1);
                while (--i)
                    args[i - 1] = arguments[i];
                evs[eventName].subscribe.apply(null, args);
                return ctx;
            }
            else if (typeof (eventName) === 'string') {
                return evs[eventName];
            }
        };
        rv.addEventType = add;
        for (var i = 1, l = arguments.length; i < l; ++i) {
            add(arguments[i]);
        }
        return rv;
        function add(eventName, chainFunction, defaultFunction) {
            if (typeof eventName === 'object')
                return addConfiguredEvents(eventName);
            if (!chainFunction)
                chainFunction = reverseStoppableEventChain;
            if (!defaultFunction)
                defaultFunction = nop;
            var context = {
                subscribers: [],
                fire: defaultFunction,
                subscribe: function (cb) {
                    if (context.subscribers.indexOf(cb) === -1) {
                        context.subscribers.push(cb);
                        context.fire = chainFunction(context.fire, cb);
                    }
                },
                unsubscribe: function (cb) {
                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });
                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);
                }
            };
            evs[eventName] = rv[eventName] = context;
            return context;
        }
        function addConfiguredEvents(cfg) {
            keys(cfg).forEach(function (eventName) {
                var args = cfg[eventName];
                if (isArray(args)) {
                    add(eventName, cfg[eventName][0], cfg[eventName][1]);
                }
                else if (args === 'asap') {
                    var context = add(eventName, mirror, function fire() {
                        var i = arguments.length, args = new Array(i);
                        while (i--)
                            args[i] = arguments[i];
                        context.subscribers.forEach(function (fn) {
                            asap$1(function fireEvent() {
                                fn.apply(null, args);
                            });
                        });
                    });
                }
                else
                    throw new exceptions.InvalidArgument("Invalid event config");
            });
        }
    }

    function makeClassConstructor(prototype, constructor) {
        derive(constructor).from({ prototype: prototype });
        return constructor;
    }

    function createTableConstructor(db) {
        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {
            this.db = db;
            this._tx = trans;
            this.name = name;
            this.schema = tableSchema;
            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {
                "creating": [hookCreatingChain, nop],
                "reading": [pureFunctionChain, mirror],
                "updating": [hookUpdatingChain, nop],
                "deleting": [hookDeletingChain, nop]
            });
        });
    }

    function isPlainKeyRange(ctx, ignoreLimitFilter) {
        return !(ctx.filter || ctx.algorithm || ctx.or) &&
            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);
    }
    function addFilter(ctx, fn) {
        ctx.filter = combine(ctx.filter, fn);
    }
    function addReplayFilter(ctx, factory, isLimitFilter) {
        var curr = ctx.replayFilter;
        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;
        ctx.justLimit = isLimitFilter && !curr;
    }
    function addMatchFilter(ctx, fn) {
        ctx.isMatch = combine(ctx.isMatch, fn);
    }
    function getIndexOrStore(ctx, coreSchema) {
        if (ctx.isPrimKey)
            return coreSchema.primaryKey;
        var index = coreSchema.getIndexByKeyPath(ctx.index);
        if (!index)
            throw new exceptions.Schema("KeyPath " + ctx.index + " on object store " + coreSchema.name + " is not indexed");
        return index;
    }
    function openCursor(ctx, coreTable, trans) {
        var index = getIndexOrStore(ctx, coreTable.schema);
        return coreTable.openCursor({
            trans: trans,
            values: !ctx.keysOnly,
            reverse: ctx.dir === 'prev',
            unique: !!ctx.unique,
            query: {
                index: index,
                range: ctx.range
            }
        });
    }
    function iter(ctx, fn, coreTrans, coreTable) {
        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;
        if (!ctx.or) {
            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);
        }
        else {
            var set_1 = {};
            var union = function (item, cursor, advance) {
                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {
                    var primaryKey = cursor.primaryKey;
                    var key = '' + primaryKey;
                    if (key === '[object ArrayBuffer]')
                        key = '' + new Uint8Array(primaryKey);
                    if (!hasOwn(set_1, key)) {
                        set_1[key] = true;
                        fn(item, cursor, advance);
                    }
                }
            };
            return Promise.all([
                ctx.or._iterate(union, coreTrans),
                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)
            ]);
        }
    }
    function iterate(cursorPromise, filter, fn, valueMapper) {
        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;
        var wrappedFn = wrap(mappedFn);
        return cursorPromise.then(function (cursor) {
            if (cursor) {
                return cursor.start(function () {
                    var c = function () { return cursor.continue(); };
                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))
                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });
                    c();
                });
            }
        });
    }

    var PropModification =  (function () {
        function PropModification(spec) {
            this["@@propmod"] = spec;
        }
        PropModification.prototype.execute = function (value) {
            var _a;
            var spec = this["@@propmod"];
            if (spec.add !== undefined) {
                var term = spec.add;
                if (isArray(term)) {
                    return __spreadArray(__spreadArray([], (isArray(value) ? value : []), true), term, true).sort();
                }
                if (typeof term === 'number')
                    return (Number(value) || 0) + term;
                if (typeof term === 'bigint') {
                    try {
                        return BigInt(value) + term;
                    }
                    catch (_b) {
                        return BigInt(0) + term;
                    }
                }
                throw new TypeError("Invalid term ".concat(term));
            }
            if (spec.remove !== undefined) {
                var subtrahend_1 = spec.remove;
                if (isArray(subtrahend_1)) {
                    return isArray(value) ? value.filter(function (item) { return !subtrahend_1.includes(item); }).sort() : [];
                }
                if (typeof subtrahend_1 === 'number')
                    return Number(value) - subtrahend_1;
                if (typeof subtrahend_1 === 'bigint') {
                    try {
                        return BigInt(value) - subtrahend_1;
                    }
                    catch (_c) {
                        return BigInt(0) - subtrahend_1;
                    }
                }
                throw new TypeError("Invalid subtrahend ".concat(subtrahend_1));
            }
            var prefixToReplace = (_a = spec.replacePrefix) === null || _a === void 0 ? void 0 : _a[0];
            if (prefixToReplace && typeof value === 'string' && value.startsWith(prefixToReplace)) {
                return spec.replacePrefix[1] + value.substring(prefixToReplace.length);
            }
            return value;
        };
        return PropModification;
    }());

    var Collection =  (function () {
        function Collection() {
        }
        Collection.prototype._read = function (fn, cb) {
            var ctx = this._ctx;
            return ctx.error ?
                ctx.table._trans(null, rejection.bind(null, ctx.error)) :
                ctx.table._trans('readonly', fn).then(cb);
        };
        Collection.prototype._write = function (fn) {
            var ctx = this._ctx;
            return ctx.error ?
                ctx.table._trans(null, rejection.bind(null, ctx.error)) :
                ctx.table._trans('readwrite', fn, "locked");
        };
        Collection.prototype._addAlgorithm = function (fn) {
            var ctx = this._ctx;
            ctx.algorithm = combine(ctx.algorithm, fn);
        };
        Collection.prototype._iterate = function (fn, coreTrans) {
            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);
        };
        Collection.prototype.clone = function (props) {
            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);
            if (props)
                extend(ctx, props);
            rv._ctx = ctx;
            return rv;
        };
        Collection.prototype.raw = function () {
            this._ctx.valueMapper = null;
            return this;
        };
        Collection.prototype.each = function (fn) {
            var ctx = this._ctx;
            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });
        };
        Collection.prototype.count = function (cb) {
            var _this = this;
            return this._read(function (trans) {
                var ctx = _this._ctx;
                var coreTable = ctx.table.core;
                if (isPlainKeyRange(ctx, true)) {
                    return coreTable.count({
                        trans: trans,
                        query: {
                            index: getIndexOrStore(ctx, coreTable.schema),
                            range: ctx.range
                        }
                    }).then(function (count) { return Math.min(count, ctx.limit); });
                }
                else {
                    var count = 0;
                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)
                        .then(function () { return count; });
                }
            }).then(cb);
        };
        Collection.prototype.sortBy = function (keyPath, cb) {
            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;
            function getval(obj, i) {
                if (i)
                    return getval(obj[parts[i]], i - 1);
                return obj[lastPart];
            }
            var order = this._ctx.dir === "next" ? 1 : -1;
            function sorter(a, b) {
                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);
                return cmp(aVal, bVal) * order;
            }
            return this.toArray(function (a) {
                return a.sort(sorter);
            }).then(cb);
        };
        Collection.prototype.toArray = function (cb) {
            var _this = this;
            return this._read(function (trans) {
                var ctx = _this._ctx;
                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {
                    var valueMapper_1 = ctx.valueMapper;
                    var index = getIndexOrStore(ctx, ctx.table.core.schema);
                    return ctx.table.core.query({
                        trans: trans,
                        limit: ctx.limit,
                        values: true,
                        query: {
                            index: index,
                            range: ctx.range
                        }
                    }).then(function (_a) {
                        var result = _a.result;
                        return valueMapper_1 ? result.map(valueMapper_1) : result;
                    });
                }
                else {
                    var a_1 = [];
                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });
                }
            }, cb);
        };
        Collection.prototype.offset = function (offset) {
            var ctx = this._ctx;
            if (offset <= 0)
                return this;
            ctx.offset += offset;
            if (isPlainKeyRange(ctx)) {
                addReplayFilter(ctx, function () {
                    var offsetLeft = offset;
                    return function (cursor, advance) {
                        if (offsetLeft === 0)
                            return true;
                        if (offsetLeft === 1) {
                            --offsetLeft;
                            return false;
                        }
                        advance(function () {
                            cursor.advance(offsetLeft);
                            offsetLeft = 0;
                        });
                        return false;
                    };
                });
            }
            else {
                addReplayFilter(ctx, function () {
                    var offsetLeft = offset;
                    return function () { return (--offsetLeft < 0); };
                });
            }
            return this;
        };
        Collection.prototype.limit = function (numRows) {
            this._ctx.limit = Math.min(this._ctx.limit, numRows);
            addReplayFilter(this._ctx, function () {
                var rowsLeft = numRows;
                return function (cursor, advance, resolve) {
                    if (--rowsLeft <= 0)
                        advance(resolve);
                    return rowsLeft >= 0;
                };
            }, true);
            return this;
        };
        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {
            addFilter(this._ctx, function (cursor, advance, resolve) {
                if (filterFunction(cursor.value)) {
                    advance(resolve);
                    return bIncludeStopEntry;
                }
                else {
                    return true;
                }
            });
            return this;
        };
        Collection.prototype.first = function (cb) {
            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);
        };
        Collection.prototype.last = function (cb) {
            return this.reverse().first(cb);
        };
        Collection.prototype.filter = function (filterFunction) {
            addFilter(this._ctx, function (cursor) {
                return filterFunction(cursor.value);
            });
            addMatchFilter(this._ctx, filterFunction);
            return this;
        };
        Collection.prototype.and = function (filter) {
            return this.filter(filter);
        };
        Collection.prototype.or = function (indexName) {
            return new this.db.WhereClause(this._ctx.table, indexName, this);
        };
        Collection.prototype.reverse = function () {
            this._ctx.dir = (this._ctx.dir === "prev" ? "next" : "prev");
            if (this._ondirectionchange)
                this._ondirectionchange(this._ctx.dir);
            return this;
        };
        Collection.prototype.desc = function () {
            return this.reverse();
        };
        Collection.prototype.eachKey = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            return this.each(function (val, cursor) { cb(cursor.key, cursor); });
        };
        Collection.prototype.eachUniqueKey = function (cb) {
            this._ctx.unique = "unique";
            return this.eachKey(cb);
        };
        Collection.prototype.eachPrimaryKey = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });
        };
        Collection.prototype.keys = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            var a = [];
            return this.each(function (item, cursor) {
                a.push(cursor.key);
            }).then(function () {
                return a;
            }).then(cb);
        };
        Collection.prototype.primaryKeys = function (cb) {
            var ctx = this._ctx;
            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {
                return this._read(function (trans) {
                    var index = getIndexOrStore(ctx, ctx.table.core.schema);
                    return ctx.table.core.query({
                        trans: trans,
                        values: false,
                        limit: ctx.limit,
                        query: {
                            index: index,
                            range: ctx.range
                        }
                    });
                }).then(function (_a) {
                    var result = _a.result;
                    return result;
                }).then(cb);
            }
            ctx.keysOnly = !ctx.isMatch;
            var a = [];
            return this.each(function (item, cursor) {
                a.push(cursor.primaryKey);
            }).then(function () {
                return a;
            }).then(cb);
        };
        Collection.prototype.uniqueKeys = function (cb) {
            this._ctx.unique = "unique";
            return this.keys(cb);
        };
        Collection.prototype.firstKey = function (cb) {
            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);
        };
        Collection.prototype.lastKey = function (cb) {
            return this.reverse().firstKey(cb);
        };
        Collection.prototype.distinct = function () {
            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];
            if (!idx || !idx.multi)
                return this;
            var set = {};
            addFilter(this._ctx, function (cursor) {
                var strKey = cursor.primaryKey.toString();
                var found = hasOwn(set, strKey);
                set[strKey] = true;
                return !found;
            });
            return this;
        };
        Collection.prototype.modify = function (changes) {
            var _this = this;
            var ctx = this._ctx;
            return this._write(function (trans) {
                var modifyer;
                if (typeof changes === 'function') {
                    modifyer = changes;
                }
                else {
                    var keyPaths = keys(changes);
                    var numKeys = keyPaths.length;
                    modifyer = function (item) {
                        var anythingModified = false;
                        for (var i = 0; i < numKeys; ++i) {
                            var keyPath = keyPaths[i];
                            var val = changes[keyPath];
                            var origVal = getByKeyPath(item, keyPath);
                            if (val instanceof PropModification) {
                                setByKeyPath(item, keyPath, val.execute(origVal));
                                anythingModified = true;
                            }
                            else if (origVal !== val) {
                                setByKeyPath(item, keyPath, val);
                                anythingModified = true;
                            }
                        }
                        return anythingModified;
                    };
                }
                var coreTable = ctx.table.core;
                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;
                var limit = 200;
                var modifyChunkSize = _this.db._options.modifyChunkSize;
                if (modifyChunkSize) {
                    if (typeof modifyChunkSize == 'object') {
                        limit = modifyChunkSize[coreTable.name] || modifyChunkSize['*'] || 200;
                    }
                    else {
                        limit = modifyChunkSize;
                    }
                }
                var totalFailures = [];
                var successCount = 0;
                var failedKeys = [];
                var applyMutateResult = function (expectedCount, res) {
                    var failures = res.failures, numFailures = res.numFailures;
                    successCount += expectedCount - numFailures;
                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {
                        var pos = _a[_i];
                        totalFailures.push(failures[pos]);
                    }
                };
                var isUnconditionalDelete = changes === deleteCallback;
                return _this.clone().primaryKeys().then(function (keys) {
                    var criteria = isPlainKeyRange(ctx) &&
                        ctx.limit === Infinity &&
                        (typeof changes !== 'function' || isUnconditionalDelete) && {
                        index: ctx.index,
                        range: ctx.range
                    };
                    var nextChunk = function (offset) {
                        var count = Math.min(limit, keys.length - offset);
                        var keysInChunk = keys.slice(offset, offset + count);
                        return (isUnconditionalDelete ? Promise.resolve([]) : coreTable.getMany({
                            trans: trans,
                            keys: keysInChunk,
                            cache: "immutable"
                        })).then(function (values) {
                            var addValues = [];
                            var putValues = [];
                            var putKeys = outbound ? [] : null;
                            var deleteKeys = isUnconditionalDelete ? keysInChunk : [];
                            if (!isUnconditionalDelete)
                                for (var i = 0; i < count; ++i) {
                                    var origValue = values[i];
                                    var ctx_1 = {
                                        value: deepClone(origValue),
                                        primKey: keys[offset + i]
                                    };
                                    if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {
                                        if (ctx_1.value == null) {
                                            deleteKeys.push(keys[offset + i]);
                                        }
                                        else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {
                                            deleteKeys.push(keys[offset + i]);
                                            addValues.push(ctx_1.value);
                                        }
                                        else {
                                            putValues.push(ctx_1.value);
                                            if (outbound)
                                                putKeys.push(keys[offset + i]);
                                        }
                                    }
                                }
                            return Promise.resolve(addValues.length > 0 &&
                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })
                                    .then(function (res) {
                                    for (var pos in res.failures) {
                                        deleteKeys.splice(parseInt(pos), 1);
                                    }
                                    applyMutateResult(addValues.length, res);
                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&
                                coreTable.mutate({
                                    trans: trans,
                                    type: 'put',
                                    keys: putKeys,
                                    values: putValues,
                                    criteria: criteria,
                                    changeSpec: typeof changes !== 'function'
                                        && changes,
                                    isAdditionalChunk: offset > 0
                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && isUnconditionalDelete)) &&
                                coreTable.mutate({
                                    trans: trans,
                                    type: 'delete',
                                    keys: deleteKeys,
                                    criteria: criteria,
                                    isAdditionalChunk: offset > 0
                                }).then(function (res) { return builtInDeletionTrigger(ctx.table, deleteKeys, res); })
                                    .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {
                                return keys.length > offset + count && nextChunk(offset + limit);
                            });
                        });
                    };
                    return nextChunk(0).then(function () {
                        if (totalFailures.length > 0)
                            throw new ModifyError("Error modifying one or more objects", totalFailures, successCount, failedKeys);
                        return keys.length;
                    });
                });
            });
        };
        Collection.prototype.delete = function () {
            var ctx = this._ctx, range = ctx.range;
            if (isPlainKeyRange(ctx) &&
                !ctx.table.schema.yProps &&
                (ctx.isPrimKey || range.type === 3 ))
             {
                return this._write(function (trans) {
                    var primaryKey = ctx.table.core.schema.primaryKey;
                    var coreRange = range;
                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {
                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })
                            .then(function (_a) {
                            var failures = _a.failures, numFailures = _a.numFailures;
                            if (numFailures)
                                throw new ModifyError("Could not delete some values", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);
                            return count - numFailures;
                        });
                    });
                });
            }
            return this.modify(deleteCallback);
        };
        return Collection;
    }());
    var deleteCallback = function (value, ctx) { return ctx.value = null; };

    function createCollectionConstructor(db) {
        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {
            this.db = db;
            var keyRange = AnyRange, error = null;
            if (keyRangeGenerator)
                try {
                    keyRange = keyRangeGenerator();
                }
                catch (ex) {
                    error = ex;
                }
            var whereCtx = whereClause._ctx;
            var table = whereCtx.table;
            var readingHook = table.hook.reading.fire;
            this._ctx = {
                table: table,
                index: whereCtx.index,
                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),
                range: keyRange,
                keysOnly: false,
                dir: "next",
                unique: "",
                algorithm: null,
                filter: null,
                replayFilter: null,
                justLimit: true,
                isMatch: null,
                offset: 0,
                limit: Infinity,
                error: error,
                or: whereCtx.or,
                valueMapper: readingHook !== mirror ? readingHook : null
            };
        });
    }

    function simpleCompare(a, b) {
        return a < b ? -1 : a === b ? 0 : 1;
    }
    function simpleCompareReverse(a, b) {
        return a > b ? -1 : a === b ? 0 : 1;
    }

    function fail(collectionOrWhereClause, err, T) {
        var collection = collectionOrWhereClause instanceof WhereClause ?
            new collectionOrWhereClause.Collection(collectionOrWhereClause) :
            collectionOrWhereClause;
        collection._ctx.error = T ? new T(err) : new TypeError(err);
        return collection;
    }
    function emptyCollection(whereClause) {
        return new whereClause.Collection(whereClause, function () { return rangeEqual(""); }).limit(0);
    }
    function upperFactory(dir) {
        return dir === "next" ?
            function (s) { return s.toUpperCase(); } :
            function (s) { return s.toLowerCase(); };
    }
    function lowerFactory(dir) {
        return dir === "next" ?
            function (s) { return s.toLowerCase(); } :
            function (s) { return s.toUpperCase(); };
    }
    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {
        var length = Math.min(key.length, lowerNeedle.length);
        var llp = -1;
        for (var i = 0; i < length; ++i) {
            var lwrKeyChar = lowerKey[i];
            if (lwrKeyChar !== lowerNeedle[i]) {
                if (cmp(key[i], upperNeedle[i]) < 0)
                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);
                if (cmp(key[i], lowerNeedle[i]) < 0)
                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);
                if (llp >= 0)
                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);
                return null;
            }
            if (cmp(key[i], lwrKeyChar) < 0)
                llp = i;
        }
        if (length < lowerNeedle.length && dir === "next")
            return key + upperNeedle.substr(key.length);
        if (length < key.length && dir === "prev")
            return key.substr(0, upperNeedle.length);
        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));
    }
    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {
        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;
        if (!needles.every(function (s) { return typeof s === 'string'; })) {
            return fail(whereClause, STRING_EXPECTED);
        }
        function initDirection(dir) {
            upper = upperFactory(dir);
            lower = lowerFactory(dir);
            compare = (dir === "next" ? simpleCompare : simpleCompareReverse);
            var needleBounds = needles.map(function (needle) {
                return { lower: lower(needle), upper: upper(needle) };
            }).sort(function (a, b) {
                return compare(a.lower, b.lower);
            });
            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });
            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });
            direction = dir;
            nextKeySuffix = (dir === "next" ? "" : suffix);
        }
        initDirection("next");
        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });
        c._ondirectionchange = function (direction) {
            initDirection(direction);
        };
        var firstPossibleNeedle = 0;
        c._addAlgorithm(function (cursor, advance, resolve) {
            var key = cursor.key;
            if (typeof key !== 'string')
                return false;
            var lowerKey = lower(key);
            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {
                return true;
            }
            else {
                var lowestPossibleCasing = null;
                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {
                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);
                    if (casing === null && lowestPossibleCasing === null)
                        firstPossibleNeedle = i + 1;
                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {
                        lowestPossibleCasing = casing;
                    }
                }
                if (lowestPossibleCasing !== null) {
                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });
                }
                else {
                    advance(resolve);
                }
                return false;
            }
        });
        return c;
    }
    function createRange(lower, upper, lowerOpen, upperOpen) {
        return {
            type: 2 ,
            lower: lower,
            upper: upper,
            lowerOpen: lowerOpen,
            upperOpen: upperOpen
        };
    }
    function rangeEqual(value) {
        return {
            type: 1 ,
            lower: value,
            upper: value
        };
    }

    var WhereClause =  (function () {
        function WhereClause() {
        }
        Object.defineProperty(WhereClause.prototype, "Collection", {
            get: function () {
                return this._ctx.table.db.Collection;
            },
            enumerable: false,
            configurable: true
        });
        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {
            includeLower = includeLower !== false;
            includeUpper = includeUpper === true;
            try {
                if ((this._cmp(lower, upper) > 0) ||
                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))
                    return emptyCollection(this);
                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
        };
        WhereClause.prototype.equals = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return rangeEqual(value); });
        };
        WhereClause.prototype.above = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(value, undefined, true); });
        };
        WhereClause.prototype.aboveOrEqual = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(value, undefined, false); });
        };
        WhereClause.prototype.below = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });
        };
        WhereClause.prototype.belowOrEqual = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(undefined, value); });
        };
        WhereClause.prototype.startsWith = function (str) {
            if (typeof str !== 'string')
                return fail(this, STRING_EXPECTED);
            return this.between(str, str + maxString, true, true);
        };
        WhereClause.prototype.startsWithIgnoreCase = function (str) {
            if (str === "")
                return this.startsWith(str);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);
        };
        WhereClause.prototype.equalsIgnoreCase = function (str) {
            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], "");
        };
        WhereClause.prototype.anyOfIgnoreCase = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return emptyCollection(this);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, "");
        };
        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return emptyCollection(this);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);
        };
        WhereClause.prototype.anyOf = function () {
            var _this = this;
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            var compare = this._cmp;
            try {
                set.sort(compare);
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            if (set.length === 0)
                return emptyCollection(this);
            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });
            c._ondirectionchange = function (direction) {
                compare = (direction === "next" ?
                    _this._ascending :
                    _this._descending);
                set.sort(compare);
            };
            var i = 0;
            c._addAlgorithm(function (cursor, advance, resolve) {
                var key = cursor.key;
                while (compare(key, set[i]) > 0) {
                    ++i;
                    if (i === set.length) {
                        advance(resolve);
                        return false;
                    }
                }
                if (compare(key, set[i]) === 0) {
                    return true;
                }
                else {
                    advance(function () { cursor.continue(set[i]); });
                    return false;
                }
            });
            return c;
        };
        WhereClause.prototype.notEqual = function (value) {
            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });
        };
        WhereClause.prototype.noneOf = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return new this.Collection(this);
            try {
                set.sort(this._ascending);
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            var ranges = set.reduce(function (res, val) { return res ?
                res.concat([[res[res.length - 1][1], val]]) :
                [[minKey, val]]; }, null);
            ranges.push([set[set.length - 1], this.db._maxKey]);
            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });
        };
        WhereClause.prototype.inAnyRange = function (ranges, options) {
            var _this = this;
            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;
            if (ranges.length === 0)
                return emptyCollection(this);
            if (!ranges.every(function (range) {
                return range[0] !== undefined &&
                    range[1] !== undefined &&
                    ascending(range[0], range[1]) <= 0;
            })) {
                return fail(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", exceptions.InvalidArgument);
            }
            var includeLowers = !options || options.includeLowers !== false;
            var includeUppers = options && options.includeUppers === true;
            function addRange(ranges, newRange) {
                var i = 0, l = ranges.length;
                for (; i < l; ++i) {
                    var range = ranges[i];
                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {
                        range[0] = min(range[0], newRange[0]);
                        range[1] = max(range[1], newRange[1]);
                        break;
                    }
                }
                if (i === l)
                    ranges.push(newRange);
                return ranges;
            }
            var sortDirection = ascending;
            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }
            var set;
            try {
                set = ranges.reduce(addRange, []);
                set.sort(rangeSorter);
            }
            catch (ex) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            var rangePos = 0;
            var keyIsBeyondCurrentEntry = includeUppers ?
                function (key) { return ascending(key, set[rangePos][1]) > 0; } :
                function (key) { return ascending(key, set[rangePos][1]) >= 0; };
            var keyIsBeforeCurrentEntry = includeLowers ?
                function (key) { return descending(key, set[rangePos][0]) > 0; } :
                function (key) { return descending(key, set[rangePos][0]) >= 0; };
            function keyWithinCurrentRange(key) {
                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);
            }
            var checkKey = keyIsBeyondCurrentEntry;
            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });
            c._ondirectionchange = function (direction) {
                if (direction === "next") {
                    checkKey = keyIsBeyondCurrentEntry;
                    sortDirection = ascending;
                }
                else {
                    checkKey = keyIsBeforeCurrentEntry;
                    sortDirection = descending;
                }
                set.sort(rangeSorter);
            };
            c._addAlgorithm(function (cursor, advance, resolve) {
                var key = cursor.key;
                while (checkKey(key)) {
                    ++rangePos;
                    if (rangePos === set.length) {
                        advance(resolve);
                        return false;
                    }
                }
                if (keyWithinCurrentRange(key)) {
                    return true;
                }
                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {
                    return false;
                }
                else {
                    advance(function () {
                        if (sortDirection === ascending)
                            cursor.continue(set[rangePos][0]);
                        else
                            cursor.continue(set[rangePos][1]);
                    });
                    return false;
                }
            });
            return c;
        };
        WhereClause.prototype.startsWithAnyOf = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (!set.every(function (s) { return typeof s === 'string'; })) {
                return fail(this, "startsWithAnyOf() only works with strings");
            }
            if (set.length === 0)
                return emptyCollection(this);
            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));
        };
        return WhereClause;
    }());

    function createWhereClauseConstructor(db) {
        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {
            this.db = db;
            this._ctx = {
                table: table,
                index: index === ":id" ? null : index,
                or: orCollection
            };
            this._cmp = this._ascending = cmp;
            this._descending = function (a, b) { return cmp(b, a); };
            this._max = function (a, b) { return cmp(a, b) > 0 ? a : b; };
            this._min = function (a, b) { return cmp(a, b) < 0 ? a : b; };
            this._IDBKeyRange = db._deps.IDBKeyRange;
            if (!this._IDBKeyRange)
                throw new exceptions.MissingAPI();
        });
    }

    function eventRejectHandler(reject) {
        return wrap(function (event) {
            preventDefault(event);
            reject(event.target.error);
            return false;
        });
    }
    function preventDefault(event) {
        if (event.stopPropagation)
            event.stopPropagation();
        if (event.preventDefault)
            event.preventDefault();
    }

    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';
    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';
    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);

    var Transaction =  (function () {
        function Transaction() {
        }
        Transaction.prototype._lock = function () {
            assert(!PSD.global);
            ++this._reculock;
            if (this._reculock === 1 && !PSD.global)
                PSD.lockOwnerFor = this;
            return this;
        };
        Transaction.prototype._unlock = function () {
            assert(!PSD.global);
            if (--this._reculock === 0) {
                if (!PSD.global)
                    PSD.lockOwnerFor = null;
                while (this._blockedFuncs.length > 0 && !this._locked()) {
                    var fnAndPSD = this._blockedFuncs.shift();
                    try {
                        usePSD(fnAndPSD[1], fnAndPSD[0]);
                    }
                    catch (e) { }
                }
            }
            return this;
        };
        Transaction.prototype._locked = function () {
            return this._reculock && PSD.lockOwnerFor !== this;
        };
        Transaction.prototype.create = function (idbtrans) {
            var _this = this;
            if (!this.mode)
                return this;
            var idbdb = this.db.idbdb;
            var dbOpenError = this.db._state.dbOpenError;
            assert(!this.idbtrans);
            if (!idbtrans && !idbdb) {
                switch (dbOpenError && dbOpenError.name) {
                    case "DatabaseClosedError":
                        throw new exceptions.DatabaseClosed(dbOpenError);
                    case "MissingAPIError":
                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);
                    default:
                        throw new exceptions.OpenFailed(dbOpenError);
                }
            }
            if (!this.active)
                throw new exceptions.TransactionInactive();
            assert(this._completion._state === null);
            idbtrans = this.idbtrans = idbtrans ||
                (this.db.core
                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })
                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));
            idbtrans.onerror = wrap(function (ev) {
                preventDefault(ev);
                _this._reject(idbtrans.error);
            });
            idbtrans.onabort = wrap(function (ev) {
                preventDefault(ev);
                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));
                _this.active = false;
                _this.on("abort").fire(ev);
            });
            idbtrans.oncomplete = wrap(function () {
                _this.active = false;
                _this._resolve();
                if ('mutatedParts' in idbtrans) {
                    globalEvents.storagemutated.fire(idbtrans["mutatedParts"]);
                }
            });
            return this;
        };
        Transaction.prototype._promise = function (mode, fn, bWriteLock) {
            var _this = this;
            if (mode === 'readwrite' && this.mode !== 'readwrite')
                return rejection(new exceptions.ReadOnly("Transaction is readonly"));
            if (!this.active)
                return rejection(new exceptions.TransactionInactive());
            if (this._locked()) {
                return new DexiePromise(function (resolve, reject) {
                    _this._blockedFuncs.push([function () {
                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);
                        }, PSD]);
                });
            }
            else if (bWriteLock) {
                return newScope(function () {
                    var p = new DexiePromise(function (resolve, reject) {
                        _this._lock();
                        var rv = fn(resolve, reject, _this);
                        if (rv && rv.then)
                            rv.then(resolve, reject);
                    });
                    p.finally(function () { return _this._unlock(); });
                    p._lib = true;
                    return p;
                });
            }
            else {
                var p = new DexiePromise(function (resolve, reject) {
                    var rv = fn(resolve, reject, _this);
                    if (rv && rv.then)
                        rv.then(resolve, reject);
                });
                p._lib = true;
                return p;
            }
        };
        Transaction.prototype._root = function () {
            return this.parent ? this.parent._root() : this;
        };
        Transaction.prototype.waitFor = function (promiseLike) {
            var root = this._root();
            var promise = DexiePromise.resolve(promiseLike);
            if (root._waitingFor) {
                root._waitingFor = root._waitingFor.then(function () { return promise; });
            }
            else {
                root._waitingFor = promise;
                root._waitingQueue = [];
                var store = root.idbtrans.objectStore(root.storeNames[0]);
                (function spin() {
                    ++root._spinCount;
                    while (root._waitingQueue.length)
                        (root._waitingQueue.shift())();
                    if (root._waitingFor)
                        store.get(-Infinity).onsuccess = spin;
                }());
            }
            var currentWaitPromise = root._waitingFor;
            return new DexiePromise(function (resolve, reject) {
                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {
                    if (root._waitingFor === currentWaitPromise) {
                        root._waitingFor = null;
                    }
                });
            });
        };
        Transaction.prototype.abort = function () {
            if (this.active) {
                this.active = false;
                if (this.idbtrans)
                    this.idbtrans.abort();
                this._reject(new exceptions.Abort());
            }
        };
        Transaction.prototype.table = function (tableName) {
            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));
            if (hasOwn(memoizedTables, tableName))
                return memoizedTables[tableName];
            var tableSchema = this.schema[tableName];
            if (!tableSchema) {
                throw new exceptions.NotFound("Table " + tableName + " not part of transaction");
            }
            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);
            transactionBoundTable.core = this.db.core.table(tableName);
            memoizedTables[tableName] = transactionBoundTable;
            return transactionBoundTable;
        };
        return Transaction;
    }());

    function createTransactionConstructor(db) {
        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {
            var _this = this;
            if (mode !== 'readonly')
                storeNames.forEach(function (storeName) {
                    var _a;
                    var yProps = (_a = dbschema[storeName]) === null || _a === void 0 ? void 0 : _a.yProps;
                    if (yProps)
                        storeNames = storeNames.concat(yProps.map(function (p) { return p.updatesTable; }));
                });
            this.db = db;
            this.mode = mode;
            this.storeNames = storeNames;
            this.schema = dbschema;
            this.chromeTransactionDurability = chromeTransactionDurability;
            this.idbtrans = null;
            this.on = Events(this, "complete", "error", "abort");
            this.parent = parent || null;
            this.active = true;
            this._reculock = 0;
            this._blockedFuncs = [];
            this._resolve = null;
            this._reject = null;
            this._waitingFor = null;
            this._waitingQueue = null;
            this._spinCount = 0;
            this._completion = new DexiePromise(function (resolve, reject) {
                _this._resolve = resolve;
                _this._reject = reject;
            });
            this._completion.then(function () {
                _this.active = false;
                _this.on.complete.fire();
            }, function (e) {
                var wasActive = _this.active;
                _this.active = false;
                _this.on.error.fire(e);
                _this.parent ?
                    _this.parent._reject(e) :
                    wasActive && _this.idbtrans && _this.idbtrans.abort();
                return rejection(e);
            });
        });
    }

    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey, type) {
        return {
            name: name,
            keyPath: keyPath,
            unique: unique,
            multi: multi,
            auto: auto,
            compound: compound,
            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? "++" : "") + nameFromKeyPath(keyPath),
            type: type
        };
    }
    function nameFromKeyPath(keyPath) {
        return typeof keyPath === 'string' ?
            keyPath :
            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : "";
    }

    function createTableSchema(name, primKey, indexes) {
        return {
            name: name,
            primKey: primKey,
            indexes: indexes,
            mappedClass: null,
            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; }),
        };
    }

    function safariMultiStoreFix(storeNames) {
        return storeNames.length === 1 ? storeNames[0] : storeNames;
    }
    var getMaxKey = function (IdbKeyRange) {
        try {
            IdbKeyRange.only([[]]);
            getMaxKey = function () { return [[]]; };
            return [[]];
        }
        catch (e) {
            getMaxKey = function () { return maxString; };
            return maxString;
        }
    };

    function getKeyExtractor(keyPath) {
        if (keyPath == null) {
            return function () { return undefined; };
        }
        else if (typeof keyPath === 'string') {
            return getSinglePathKeyExtractor(keyPath);
        }
        else {
            return function (obj) { return getByKeyPath(obj, keyPath); };
        }
    }
    function getSinglePathKeyExtractor(keyPath) {
        var split = keyPath.split('.');
        if (split.length === 1) {
            return function (obj) { return obj[keyPath]; };
        }
        else {
            return function (obj) { return getByKeyPath(obj, keyPath); };
        }
    }

    function arrayify(arrayLike) {
        return [].slice.call(arrayLike);
    }
    var _id_counter = 0;
    function getKeyPathAlias(keyPath) {
        return keyPath == null ?
            ":id" :
            typeof keyPath === 'string' ?
                keyPath :
                "[".concat(keyPath.join('+'), "]");
    }
    function createDBCore(db, IdbKeyRange, tmpTrans) {
        function extractSchema(db, trans) {
            var tables = arrayify(db.objectStoreNames);
            return {
                schema: {
                    name: db.name,
                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {
                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;
                        var compound = isArray(keyPath);
                        var outbound = keyPath == null;
                        var indexByKeyPath = {};
                        var result = {
                            name: store.name,
                            primaryKey: {
                                name: null,
                                isPrimaryKey: true,
                                outbound: outbound,
                                compound: compound,
                                keyPath: keyPath,
                                autoIncrement: autoIncrement,
                                unique: true,
                                extractKey: getKeyExtractor(keyPath)
                            },
                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })
                                .map(function (index) {
                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;
                                var compound = isArray(keyPath);
                                var result = {
                                    name: name,
                                    compound: compound,
                                    keyPath: keyPath,
                                    unique: unique,
                                    multiEntry: multiEntry,
                                    extractKey: getKeyExtractor(keyPath)
                                };
                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;
                                return result;
                            }),
                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }
                        };
                        indexByKeyPath[":id"] = result.primaryKey;
                        if (keyPath != null) {
                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;
                        }
                        return result;
                    })
                },
                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&
                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&
                        !/(Chrome\/|Edge\/)/.test(navigator.userAgent) &&
                        [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604)
            };
        }
        function makeIDBKeyRange(range) {
            if (range.type === 3 )
                return null;
            if (range.type === 4 )
                throw new Error("Cannot convert never type to IDBKeyRange");
            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;
            var idbRange = lower === undefined ?
                upper === undefined ?
                    null :
                    IdbKeyRange.upperBound(upper, !!upperOpen) :
                upper === undefined ?
                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :
                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);
            return idbRange;
        }
        function createDbCoreTable(tableSchema) {
            var tableName = tableSchema.name;
            function mutate(_a) {
                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;
                return new Promise(function (resolve, reject) {
                    resolve = wrap(resolve);
                    var store = trans.objectStore(tableName);
                    var outbound = store.keyPath == null;
                    var isAddOrPut = type === "put" || type === "add";
                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')
                        throw new Error("Invalid operation type: " + type);
                    var length = (keys || values || { length: 1 }).length;
                    if (keys && values && keys.length !== values.length) {
                        throw new Error("Given keys array must have same length as given values array.");
                    }
                    if (length === 0)
                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });
                    var req;
                    var reqs = [];
                    var failures = [];
                    var numFailures = 0;
                    var errorHandler = function (event) {
                        ++numFailures;
                        preventDefault(event);
                    };
                    if (type === 'deleteRange') {
                        if (range.type === 4 )
                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });
                        if (range.type === 3 )
                            reqs.push(req = store.clear());
                        else
                            reqs.push(req = store.delete(makeIDBKeyRange(range)));
                    }
                    else {
                        var _a = isAddOrPut ?
                            outbound ?
                                [values, keys] :
                                [values, null] :
                            [keys, null], args1 = _a[0], args2 = _a[1];
                        if (isAddOrPut) {
                            for (var i = 0; i < length; ++i) {
                                reqs.push(req = (args2 && args2[i] !== undefined ?
                                    store[type](args1[i], args2[i]) :
                                    store[type](args1[i])));
                                req.onerror = errorHandler;
                            }
                        }
                        else {
                            for (var i = 0; i < length; ++i) {
                                reqs.push(req = store[type](args1[i]));
                                req.onerror = errorHandler;
                            }
                        }
                    }
                    var done = function (event) {
                        var lastResult = event.target.result;
                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });
                        resolve({
                            numFailures: numFailures,
                            failures: failures,
                            results: type === "delete" ? keys : reqs.map(function (req) { return req.result; }),
                            lastResult: lastResult
                        });
                    };
                    req.onerror = function (event) {
                        errorHandler(event);
                        done(event);
                    };
                    req.onsuccess = done;
                });
            }
            function openCursor(_a) {
                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;
                return new Promise(function (resolve, reject) {
                    resolve = wrap(resolve);
                    var index = query.index, range = query.range;
                    var store = trans.objectStore(tableName);
                    var source = index.isPrimaryKey ?
                        store :
                        store.index(index.name);
                    var direction = reverse ?
                        unique ?
                            "prevunique" :
                            "prev" :
                        unique ?
                            "nextunique" :
                            "next";
                    var req = values || !('openKeyCursor' in source) ?
                        source.openCursor(makeIDBKeyRange(range), direction) :
                        source.openKeyCursor(makeIDBKeyRange(range), direction);
                    req.onerror = eventRejectHandler(reject);
                    req.onsuccess = wrap(function (ev) {
                        var cursor = req.result;
                        if (!cursor) {
                            resolve(null);
                            return;
                        }
                        cursor.___id = ++_id_counter;
                        cursor.done = false;
                        var _cursorContinue = cursor.continue.bind(cursor);
                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;
                        if (_cursorContinuePrimaryKey)
                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);
                        var _cursorAdvance = cursor.advance.bind(cursor);
                        var doThrowCursorIsNotStarted = function () { throw new Error("Cursor not started"); };
                        var doThrowCursorIsStopped = function () { throw new Error("Cursor not stopped"); };
                        cursor.trans = trans;
                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;
                        cursor.fail = wrap(reject);
                        cursor.next = function () {
                            var _this = this;
                            var gotOne = 1;
                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });
                        };
                        cursor.start = function (callback) {
                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {
                                resolveIteration = wrap(resolveIteration);
                                req.onerror = eventRejectHandler(rejectIteration);
                                cursor.fail = rejectIteration;
                                cursor.stop = function (value) {
                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;
                                    resolveIteration(value);
                                };
                            });
                            var guardedCallback = function () {
                                if (req.result) {
                                    try {
                                        callback();
                                    }
                                    catch (err) {
                                        cursor.fail(err);
                                    }
                                }
                                else {
                                    cursor.done = true;
                                    cursor.start = function () { throw new Error("Cursor behind last entry"); };
                                    cursor.stop();
                                }
                            };
                            req.onsuccess = wrap(function (ev) {
                                req.onsuccess = guardedCallback;
                                guardedCallback();
                            });
                            cursor.continue = _cursorContinue;
                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;
                            cursor.advance = _cursorAdvance;
                            guardedCallback();
                            return iterationPromise;
                        };
                        resolve(cursor);
                    }, reject);
                });
            }
            function query(hasGetAll) {
                return function (request) {
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;
                        var nonInfinitLimit = limit === Infinity ? undefined : limit;
                        var index = query.index, range = query.range;
                        var store = trans.objectStore(tableName);
                        var source = index.isPrimaryKey ? store : store.index(index.name);
                        var idbKeyRange = makeIDBKeyRange(range);
                        if (limit === 0)
                            return resolve({ result: [] });
                        if (hasGetAll) {
                            var req = values ?
                                source.getAll(idbKeyRange, nonInfinitLimit) :
                                source.getAllKeys(idbKeyRange, nonInfinitLimit);
                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };
                            req.onerror = eventRejectHandler(reject);
                        }
                        else {
                            var count_1 = 0;
                            var req_1 = values || !('openKeyCursor' in source) ?
                                source.openCursor(idbKeyRange) :
                                source.openKeyCursor(idbKeyRange);
                            var result_1 = [];
                            req_1.onsuccess = function (event) {
                                var cursor = req_1.result;
                                if (!cursor)
                                    return resolve({ result: result_1 });
                                result_1.push(values ? cursor.value : cursor.primaryKey);
                                if (++count_1 === limit)
                                    return resolve({ result: result_1 });
                                cursor.continue();
                            };
                            req_1.onerror = eventRejectHandler(reject);
                        }
                    });
                };
            }
            return {
                name: tableName,
                schema: tableSchema,
                mutate: mutate,
                getMany: function (_a) {
                    var trans = _a.trans, keys = _a.keys;
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var store = trans.objectStore(tableName);
                        var length = keys.length;
                        var result = new Array(length);
                        var keyCount = 0;
                        var callbackCount = 0;
                        var req;
                        var successHandler = function (event) {
                            var req = event.target;
                            if ((result[req._pos] = req.result) != null)
                                ;
                            if (++callbackCount === keyCount)
                                resolve(result);
                        };
                        var errorHandler = eventRejectHandler(reject);
                        for (var i = 0; i < length; ++i) {
                            var key = keys[i];
                            if (key != null) {
                                req = store.get(keys[i]);
                                req._pos = i;
                                req.onsuccess = successHandler;
                                req.onerror = errorHandler;
                                ++keyCount;
                            }
                        }
                        if (keyCount === 0)
                            resolve(result);
                    });
                },
                get: function (_a) {
                    var trans = _a.trans, key = _a.key;
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var store = trans.objectStore(tableName);
                        var req = store.get(key);
                        req.onsuccess = function (event) { return resolve(event.target.result); };
                        req.onerror = eventRejectHandler(reject);
                    });
                },
                query: query(hasGetAll),
                openCursor: openCursor,
                count: function (_a) {
                    var query = _a.query, trans = _a.trans;
                    var index = query.index, range = query.range;
                    return new Promise(function (resolve, reject) {
                        var store = trans.objectStore(tableName);
                        var source = index.isPrimaryKey ? store : store.index(index.name);
                        var idbKeyRange = makeIDBKeyRange(range);
                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();
                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });
                        req.onerror = eventRejectHandler(reject);
                    });
                }
            };
        }
        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;
        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });
        var tableMap = {};
        tables.forEach(function (table) { return tableMap[table.name] = table; });
        return {
            stack: "dbcore",
            transaction: db.transaction.bind(db),
            table: function (name) {
                var result = tableMap[name];
                if (!result)
                    throw new Error("Table '".concat(name, "' not found"));
                return tableMap[name];
            },
            MIN_KEY: -Infinity,
            MAX_KEY: getMaxKey(IdbKeyRange),
            schema: schema
        };
    }

    function createMiddlewareStack(stackImpl, middlewares) {
        return middlewares.reduce(function (down, _a) {
            var create = _a.create;
            return (__assign(__assign({}, down), create(down)));
        }, stackImpl);
    }
    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {
        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;
        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);
        return {
            dbcore: dbcore
        };
    }
    function generateMiddlewareStacks(db, tmpTrans) {
        var idbdb = tmpTrans.db;
        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);
        db.core = stacks.dbcore;
        db.tables.forEach(function (table) {
            var tableName = table.name;
            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {
                table.core = db.core.table(tableName);
                if (db[tableName] instanceof db.Table) {
                    db[tableName].core = table.core;
                }
            }
        });
    }

    function setApiOnPlace(db, objs, tableNames, dbschema) {
        tableNames.forEach(function (tableName) {
            var schema = dbschema[tableName];
            objs.forEach(function (obj) {
                var propDesc = getPropertyDescriptor(obj, tableName);
                if (!propDesc || ("value" in propDesc && propDesc.value === undefined)) {
                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {
                        setProp(obj, tableName, {
                            get: function () { return this.table(tableName); },
                            set: function (value) {
                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });
                            }
                        });
                    }
                    else {
                        obj[tableName] = new db.Table(tableName, schema);
                    }
                }
            });
        });
    }
    function removeTablesApi(db, objs) {
        objs.forEach(function (obj) {
            for (var key in obj) {
                if (obj[key] instanceof db.Table)
                    delete obj[key];
            }
        });
    }
    function lowerVersionFirst(a, b) {
        return a._cfg.version - b._cfg.version;
    }
    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {
        var globalSchema = db._dbSchema;
        if (idbUpgradeTrans.objectStoreNames.contains('$meta') && !globalSchema.$meta) {
            globalSchema.$meta = createTableSchema("$meta", parseIndexSyntax("")[0], []);
            db._storeNames.push('$meta');
        }
        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);
        trans.create(idbUpgradeTrans);
        trans._completion.catch(reject);
        var rejectTransaction = trans._reject.bind(trans);
        var transless = PSD.transless || PSD;
        newScope(function () {
            PSD.trans = trans;
            PSD.transless = transless;
            if (oldVersion === 0) {
                keys(globalSchema).forEach(function (tableName) {
                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);
                });
                generateMiddlewareStacks(db, idbUpgradeTrans);
                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);
            }
            else {
                generateMiddlewareStacks(db, idbUpgradeTrans);
                return getExistingVersion(db, trans, oldVersion)
                    .then(function (oldVersion) { return updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans); })
                    .catch(rejectTransaction);
            }
        });
    }
    function patchCurrentVersion(db, idbUpgradeTrans) {
        createMissingTables(db._dbSchema, idbUpgradeTrans);
        if (idbUpgradeTrans.db.version % 10 === 0 && !idbUpgradeTrans.objectStoreNames.contains('$meta')) {
            idbUpgradeTrans.db.createObjectStore('$meta').add(Math.ceil((idbUpgradeTrans.db.version / 10) - 1), 'version');
        }
        var globalSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);
        adjustToExistingIndexNames(db, db._dbSchema, idbUpgradeTrans);
        var diff = getSchemaDiff(globalSchema, db._dbSchema);
        var _loop_1 = function (tableChange) {
            if (tableChange.change.length || tableChange.recreate) {
                console.warn("Unable to patch indexes of table ".concat(tableChange.name, " because it has changes on the type of index or primary key."));
                return { value: void 0 };
            }
            var store = idbUpgradeTrans.objectStore(tableChange.name);
            tableChange.add.forEach(function (idx) {
                if (debug)
                    console.debug("Dexie upgrade patch: Creating missing index ".concat(tableChange.name, ".").concat(idx.src));
                addIndex(store, idx);
            });
        };
        for (var _i = 0, _a = diff.change; _i < _a.length; _i++) {
            var tableChange = _a[_i];
            var state_1 = _loop_1(tableChange);
            if (typeof state_1 === "object")
                return state_1.value;
        }
    }
    function getExistingVersion(db, trans, oldVersion) {
        if (trans.storeNames.includes('$meta')) {
            return trans.table('$meta').get('version').then(function (metaVersion) {
                return metaVersion != null ? metaVersion : oldVersion;
            });
        }
        else {
            return DexiePromise.resolve(oldVersion);
        }
    }
    function updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {
        var queue = [];
        var versions = db._versions;
        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);
        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });
        if (versToRun.length === 0) {
            return DexiePromise.resolve();
        }
        versToRun.forEach(function (version) {
            queue.push(function () {
                var oldSchema = globalSchema;
                var newSchema = version._cfg.dbschema;
                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);
                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);
                globalSchema = db._dbSchema = newSchema;
                var diff = getSchemaDiff(oldSchema, newSchema);
                diff.add.forEach(function (tuple) {
                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);
                });
                diff.change.forEach(function (change) {
                    if (change.recreate) {
                        throw new exceptions.Upgrade("Not yet support for changing primary key");
                    }
                    else {
                        var store_1 = idbUpgradeTrans.objectStore(change.name);
                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });
                        change.change.forEach(function (idx) {
                            store_1.deleteIndex(idx.name);
                            addIndex(store_1, idx);
                        });
                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });
                    }
                });
                var contentUpgrade = version._cfg.contentUpgrade;
                if (contentUpgrade && version._cfg.version > oldVersion) {
                    generateMiddlewareStacks(db, idbUpgradeTrans);
                    trans._memoizedTables = {};
                    var upgradeSchema_1 = shallowClone(newSchema);
                    diff.del.forEach(function (table) {
                        upgradeSchema_1[table] = oldSchema[table];
                    });
                    removeTablesApi(db, [db.Transaction.prototype]);
                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);
                    trans.schema = upgradeSchema_1;
                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);
                    if (contentUpgradeIsAsync_1) {
                        incrementExpectedAwaits();
                    }
                    var returnValue_1;
                    var promiseFollowed = DexiePromise.follow(function () {
                        returnValue_1 = contentUpgrade(trans);
                        if (returnValue_1) {
                            if (contentUpgradeIsAsync_1) {
                                var decrementor = decrementExpectedAwaits.bind(null, null);
                                returnValue_1.then(decrementor, decrementor);
                            }
                        }
                    });
                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?
                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));
                }
            });
            queue.push(function (idbtrans) {
                var newSchema = version._cfg.dbschema;
                deleteRemovedTables(newSchema, idbtrans);
                removeTablesApi(db, [db.Transaction.prototype]);
                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);
                trans.schema = db._dbSchema;
            });
            queue.push(function (idbtrans) {
                if (db.idbdb.objectStoreNames.contains('$meta')) {
                    if (Math.ceil(db.idbdb.version / 10) === version._cfg.version) {
                        db.idbdb.deleteObjectStore('$meta');
                        delete db._dbSchema.$meta;
                        db._storeNames = db._storeNames.filter(function (name) { return name !== '$meta'; });
                    }
                    else {
                        idbtrans.objectStore('$meta').put(version._cfg.version, 'version');
                    }
                }
            });
        });
        function runQueue() {
            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :
                DexiePromise.resolve();
        }
        return runQueue().then(function () {
            createMissingTables(globalSchema, idbUpgradeTrans);
        });
    }
    function getSchemaDiff(oldSchema, newSchema) {
        var diff = {
            del: [],
            add: [],
            change: []
        };
        var table;
        for (table in oldSchema) {
            if (!newSchema[table])
                diff.del.push(table);
        }
        for (table in newSchema) {
            var oldDef = oldSchema[table], newDef = newSchema[table];
            if (!oldDef) {
                diff.add.push([table, newDef]);
            }
            else {
                var change = {
                    name: table,
                    def: newDef,
                    recreate: false,
                    del: [],
                    add: [],
                    change: []
                };
                if ((
                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||
                    (oldDef.primKey.auto !== newDef.primKey.auto)) {
                    change.recreate = true;
                    diff.change.push(change);
                }
                else {
                    var oldIndexes = oldDef.idxByName;
                    var newIndexes = newDef.idxByName;
                    var idxName = void 0;
                    for (idxName in oldIndexes) {
                        if (!newIndexes[idxName])
                            change.del.push(idxName);
                    }
                    for (idxName in newIndexes) {
                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];
                        if (!oldIdx)
                            change.add.push(newIdx);
                        else if (oldIdx.src !== newIdx.src)
                            change.change.push(newIdx);
                    }
                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {
                        diff.change.push(change);
                    }
                }
            }
        }
        return diff;
    }
    function createTable(idbtrans, tableName, primKey, indexes) {
        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?
            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :
            { autoIncrement: primKey.auto });
        indexes.forEach(function (idx) { return addIndex(store, idx); });
        return store;
    }
    function createMissingTables(newSchema, idbtrans) {
        keys(newSchema).forEach(function (tableName) {
            if (!idbtrans.db.objectStoreNames.contains(tableName)) {
                if (debug)
                    console.debug('Dexie: Creating missing table', tableName);
                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);
            }
        });
    }
    function deleteRemovedTables(newSchema, idbtrans) {
        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {
            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);
        });
    }
    function addIndex(store, idx) {
        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });
    }
    function buildGlobalSchema(db, idbdb, tmpTrans) {
        var globalSchema = {};
        var dbStoreNames = slice(idbdb.objectStoreNames, 0);
        dbStoreNames.forEach(function (storeName) {
            var store = tmpTrans.objectStore(storeName);
            var keyPath = store.keyPath;
            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || "", true, false, !!store.autoIncrement, keyPath && typeof keyPath !== "string", true);
            var indexes = [];
            for (var j = 0; j < store.indexNames.length; ++j) {
                var idbindex = store.index(store.indexNames[j]);
                keyPath = idbindex.keyPath;
                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== "string", false);
                indexes.push(index);
            }
            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);
        });
        return globalSchema;
    }
    function readGlobalSchema(db, idbdb, tmpTrans) {
        db.verno = idbdb.version / 10;
        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);
        db._storeNames = slice(idbdb.objectStoreNames, 0);
        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);
    }
    function verifyInstalledSchema(db, tmpTrans) {
        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);
        var diff = getSchemaDiff(installedSchema, db._dbSchema);
        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));
    }
    function adjustToExistingIndexNames(db, schema, idbtrans) {
        var storeNames = idbtrans.db.objectStoreNames;
        for (var i = 0; i < storeNames.length; ++i) {
            var storeName = storeNames[i];
            var store = idbtrans.objectStore(storeName);
            db._hasGetAll = 'getAll' in store;
            for (var j = 0; j < store.indexNames.length; ++j) {
                var indexName = store.indexNames[j];
                var keyPath = store.index(indexName).keyPath;
                var dexieName = typeof keyPath === 'string' ? keyPath : "[" + slice(keyPath).join('+') + "]";
                if (schema[storeName]) {
                    var indexSpec = schema[storeName].idxByName[dexieName];
                    if (indexSpec) {
                        indexSpec.name = indexName;
                        delete schema[storeName].idxByName[dexieName];
                        schema[storeName].idxByName[indexName] = indexSpec;
                    }
                }
            }
        }
        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&
            !/(Chrome\/|Edge\/)/.test(navigator.userAgent) &&
            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&
            [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604) {
            db._hasGetAll = false;
        }
    }
    function parseIndexSyntax(primKeyAndIndexes) {
        return primKeyAndIndexes.split(',').map(function (index, indexNum) {
            var _a;
            var typeSplit = index.split(':');
            var type = (_a = typeSplit[1]) === null || _a === void 0 ? void 0 : _a.trim();
            index = typeSplit[0].trim();
            var name = index.replace(/([&*]|\+\+)/g, "");
            var keyPath = /^\[/.test(name) ? name.match(/^\[(.*)\]$/)[1].split('+') : name;
            return createIndexSpec(name, keyPath || null, /\&/.test(index), /\*/.test(index), /\+\+/.test(index), isArray(keyPath), indexNum === 0, type);
        });
    }

    var Version =  (function () {
        function Version() {
        }
        Version.prototype._createTableSchema = function (name, primKey, indexes) {
            return createTableSchema(name, primKey, indexes);
        };
        Version.prototype._parseIndexSyntax = function (primKeyAndIndexes) {
            return parseIndexSyntax(primKeyAndIndexes);
        };
        Version.prototype._parseStoresSpec = function (stores, outSchema) {
            var _this = this;
            keys(stores).forEach(function (tableName) {
                if (stores[tableName] !== null) {
                    var indexes = _this._parseIndexSyntax(stores[tableName]);
                    var primKey = indexes.shift();
                    if (!primKey) {
                        throw new exceptions.Schema('Invalid schema for table ' + tableName + ': ' + stores[tableName]);
                    }
                    primKey.unique = true;
                    if (primKey.multi)
                        throw new exceptions.Schema('Primary key cannot be multiEntry*');
                    indexes.forEach(function (idx) {
                        if (idx.auto)
                            throw new exceptions.Schema('Only primary key can be marked as autoIncrement (++)');
                        if (!idx.keyPath)
                            throw new exceptions.Schema('Index must have a name and cannot be an empty string');
                    });
                    var tblSchema = _this._createTableSchema(tableName, primKey, indexes);
                    outSchema[tableName] = tblSchema;
                }
            });
        };
        Version.prototype.stores = function (stores) {
            var db = this.db;
            this._cfg.storesSource = this._cfg.storesSource
                ? extend(this._cfg.storesSource, stores)
                : stores;
            var versions = db._versions;
            var storesSpec = {};
            var dbschema = {};
            versions.forEach(function (version) {
                extend(storesSpec, version._cfg.storesSource);
                dbschema = version._cfg.dbschema = {};
                version._parseStoresSpec(storesSpec, dbschema);
            });
            db._dbSchema = dbschema;
            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);
            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);
            db._storeNames = keys(dbschema);
            return this;
        };
        Version.prototype.upgrade = function (upgradeFunction) {
            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);
            return this;
        };
        return Version;
    }());

    function createVersionConstructor(db) {
        return makeClassConstructor(Version.prototype, function Version(versionNumber) {
            this.db = db;
            this._cfg = {
                version: versionNumber,
                storesSource: null,
                dbschema: {},
                tables: {},
                contentUpgrade: null
            };
        });
    }

    function getDbNamesTable(indexedDB, IDBKeyRange) {
        var dbNamesDB = indexedDB["_dbNamesDB"];
        if (!dbNamesDB) {
            dbNamesDB = indexedDB["_dbNamesDB"] = new Dexie$1(DBNAMES_DB, {
                addons: [],
                indexedDB: indexedDB,
                IDBKeyRange: IDBKeyRange,
            });
            dbNamesDB.version(1).stores({ dbnames: "name" });
        }
        return dbNamesDB.table("dbnames");
    }
    function hasDatabasesNative(indexedDB) {
        return indexedDB && typeof indexedDB.databases === "function";
    }
    function getDatabaseNames(_a) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        return hasDatabasesNative(indexedDB)
            ? Promise.resolve(indexedDB.databases()).then(function (infos) {
                return infos
                    .map(function (info) { return info.name; })
                    .filter(function (name) { return name !== DBNAMES_DB; });
            })
            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();
    }
    function _onDatabaseCreated(_a, name) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        !hasDatabasesNative(indexedDB) &&
            name !== DBNAMES_DB &&
            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);
    }
    function _onDatabaseDeleted(_a, name) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        !hasDatabasesNative(indexedDB) &&
            name !== DBNAMES_DB &&
            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);
    }

    function vip(fn) {
        return newScope(function () {
            PSD.letThrough = true;
            return fn();
        });
    }

    function idbReady() {
        var isSafari = !navigator.userAgentData &&
            /Safari\//.test(navigator.userAgent) &&
            !/Chrom(e|ium)\//.test(navigator.userAgent);
        if (!isSafari || !indexedDB.databases)
            return Promise.resolve();
        var intervalId;
        return new Promise(function (resolve) {
            var tryIdb = function () { return indexedDB.databases().finally(resolve); };
            intervalId = setInterval(tryIdb, 100);
            tryIdb();
        }).finally(function () { return clearInterval(intervalId); });
    }

    var _a;
    function isEmptyRange(node) {
        return !("from" in node);
    }
    var RangeSet = function (fromOrTree, to) {
        if (this) {
            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });
        }
        else {
            var rv = new RangeSet();
            if (fromOrTree && ("d" in fromOrTree)) {
                extend(rv, fromOrTree);
            }
            return rv;
        }
    };
    props(RangeSet.prototype, (_a = {
            add: function (rangeSet) {
                mergeRanges(this, rangeSet);
                return this;
            },
            addKey: function (key) {
                addRange(this, key, key);
                return this;
            },
            addKeys: function (keys) {
                var _this = this;
                keys.forEach(function (key) { return addRange(_this, key, key); });
                return this;
            },
            hasKey: function (key) {
                var node = getRangeSetIterator(this).next(key).value;
                return node && cmp(node.from, key) <= 0 && cmp(node.to, key) >= 0;
            }
        },
        _a[iteratorSymbol] = function () {
            return getRangeSetIterator(this);
        },
        _a));
    function addRange(target, from, to) {
        var diff = cmp(from, to);
        if (isNaN(diff))
            return;
        if (diff > 0)
            throw RangeError();
        if (isEmptyRange(target))
            return extend(target, { from: from, to: to, d: 1 });
        var left = target.l;
        var right = target.r;
        if (cmp(to, target.from) < 0) {
            left
                ? addRange(left, from, to)
                : (target.l = { from: from, to: to, d: 1, l: null, r: null });
            return rebalance(target);
        }
        if (cmp(from, target.to) > 0) {
            right
                ? addRange(right, from, to)
                : (target.r = { from: from, to: to, d: 1, l: null, r: null });
            return rebalance(target);
        }
        if (cmp(from, target.from) < 0) {
            target.from = from;
            target.l = null;
            target.d = right ? right.d + 1 : 1;
        }
        if (cmp(to, target.to) > 0) {
            target.to = to;
            target.r = null;
            target.d = target.l ? target.l.d + 1 : 1;
        }
        var rightWasCutOff = !target.r;
        if (left && !target.l) {
            mergeRanges(target, left);
        }
        if (right && rightWasCutOff) {
            mergeRanges(target, right);
        }
    }
    function mergeRanges(target, newSet) {
        function _addRangeSet(target, _a) {
            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;
            addRange(target, from, to);
            if (l)
                _addRangeSet(target, l);
            if (r)
                _addRangeSet(target, r);
        }
        if (!isEmptyRange(newSet))
            _addRangeSet(target, newSet);
    }
    function rangesOverlap(rangeSet1, rangeSet2) {
        var i1 = getRangeSetIterator(rangeSet2);
        var nextResult1 = i1.next();
        if (nextResult1.done)
            return false;
        var a = nextResult1.value;
        var i2 = getRangeSetIterator(rangeSet1);
        var nextResult2 = i2.next(a.from);
        var b = nextResult2.value;
        while (!nextResult1.done && !nextResult2.done) {
            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)
                return true;
            cmp(a.from, b.from) < 0
                ? (a = (nextResult1 = i1.next(b.from)).value)
                : (b = (nextResult2 = i2.next(a.from)).value);
        }
        return false;
    }
    function getRangeSetIterator(node) {
        var state = isEmptyRange(node) ? null : { s: 0, n: node };
        return {
            next: function (key) {
                var keyProvided = arguments.length > 0;
                while (state) {
                    switch (state.s) {
                        case 0:
                            state.s = 1;
                            if (keyProvided) {
                                while (state.n.l && cmp(key, state.n.from) < 0)
                                    state = { up: state, n: state.n.l, s: 1 };
                            }
                            else {
                                while (state.n.l)
                                    state = { up: state, n: state.n.l, s: 1 };
                            }
                        case 1:
                            state.s = 2;
                            if (!keyProvided || cmp(key, state.n.to) <= 0)
                                return { value: state.n, done: false };
                        case 2:
                            if (state.n.r) {
                                state.s = 3;
                                state = { up: state, n: state.n.r, s: 0 };
                                continue;
                            }
                        case 3:
                            state = state.up;
                    }
                }
                return { done: true };
            },
        };
    }
    function rebalance(target) {
        var _a, _b;
        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);
        var r = diff > 1 ? "r" : diff < -1 ? "l" : "";
        if (r) {
            var l = r === "r" ? "l" : "r";
            var rootClone = __assign({}, target);
            var oldRootRight = target[r];
            target.from = oldRootRight.from;
            target.to = oldRootRight.to;
            target[r] = oldRootRight[r];
            rootClone[r] = oldRootRight[l];
            target[l] = rootClone;
            rootClone.d = computeDepth(rootClone);
        }
        target.d = computeDepth(target);
    }
    function computeDepth(_a) {
        var r = _a.r, l = _a.l;
        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;
    }

    function extendObservabilitySet(target, newSet) {
        keys(newSet).forEach(function (part) {
            if (target[part])
                mergeRanges(target[part], newSet[part]);
            else
                target[part] = cloneSimpleObjectTree(newSet[part]);
        });
        return target;
    }

    function obsSetsOverlap(os1, os2) {
        return os1.all || os2.all || Object.keys(os1).some(function (key) { return os2[key] && rangesOverlap(os2[key], os1[key]); });
    }

    var cache = {};

    var unsignaledParts = {};
    var isTaskEnqueued = false;
    function signalSubscribersLazily(part, optimistic) {
        extendObservabilitySet(unsignaledParts, part);
        if (!isTaskEnqueued) {
            isTaskEnqueued = true;
            setTimeout(function () {
                isTaskEnqueued = false;
                var parts = unsignaledParts;
                unsignaledParts = {};
                signalSubscribersNow(parts, false);
            }, 0);
        }
    }
    function signalSubscribersNow(updatedParts, deleteAffectedCacheEntries) {
        if (deleteAffectedCacheEntries === void 0) { deleteAffectedCacheEntries = false; }
        var queriesToSignal = new Set();
        if (updatedParts.all) {
            for (var _i = 0, _a = Object.values(cache); _i < _a.length; _i++) {
                var tblCache = _a[_i];
                collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);
            }
        }
        else {
            for (var key in updatedParts) {
                var parts = /^idb\:\/\/(.*)\/(.*)\//.exec(key);
                if (parts) {
                    var dbName = parts[1], tableName = parts[2];
                    var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
                    if (tblCache)
                        collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);
                }
            }
        }
        queriesToSignal.forEach(function (requery) { return requery(); });
    }
    function collectTableSubscribers(tblCache, updatedParts, outQueriesToSignal, deleteAffectedCacheEntries) {
        var updatedEntryLists = [];
        for (var _i = 0, _a = Object.entries(tblCache.queries.query); _i < _a.length; _i++) {
            var _b = _a[_i], indexName = _b[0], entries = _b[1];
            var filteredEntries = [];
            for (var _c = 0, entries_1 = entries; _c < entries_1.length; _c++) {
                var entry = entries_1[_c];
                if (obsSetsOverlap(updatedParts, entry.obsSet)) {
                    entry.subscribers.forEach(function (requery) { return outQueriesToSignal.add(requery); });
                }
                else if (deleteAffectedCacheEntries) {
                    filteredEntries.push(entry);
                }
            }
            if (deleteAffectedCacheEntries)
                updatedEntryLists.push([indexName, filteredEntries]);
        }
        if (deleteAffectedCacheEntries) {
            for (var _d = 0, updatedEntryLists_1 = updatedEntryLists; _d < updatedEntryLists_1.length; _d++) {
                var _e = updatedEntryLists_1[_d], indexName = _e[0], filteredEntries = _e[1];
                tblCache.queries.query[indexName] = filteredEntries;
            }
        }
    }

    function dexieOpen(db) {
        var state = db._state;
        var indexedDB = db._deps.indexedDB;
        if (state.isBeingOpened || db.idbdb)
            return state.dbReadyPromise.then(function () { return state.dbOpenError ?
                rejection(state.dbOpenError) :
                db; });
        state.isBeingOpened = true;
        state.dbOpenError = null;
        state.openComplete = false;
        var openCanceller = state.openCanceller;
        var nativeVerToOpen = Math.round(db.verno * 10);
        var schemaPatchMode = false;
        function throwIfCancelled() {
            if (state.openCanceller !== openCanceller)
                throw new exceptions.DatabaseClosed('db.open() was cancelled');
        }
        var resolveDbReady = state.dbReadyResolve,
        upgradeTransaction = null, wasCreated = false;
        var tryOpenDB = function () { return new DexiePromise(function (resolve, reject) {
            throwIfCancelled();
            if (!indexedDB)
                throw new exceptions.MissingAPI();
            var dbName = db.name;
            var req = state.autoSchema || !nativeVerToOpen ?
                indexedDB.open(dbName) :
                indexedDB.open(dbName, nativeVerToOpen);
            if (!req)
                throw new exceptions.MissingAPI();
            req.onerror = eventRejectHandler(reject);
            req.onblocked = wrap(db._fireOnBlocked);
            req.onupgradeneeded = wrap(function (e) {
                upgradeTransaction = req.transaction;
                if (state.autoSchema && !db._options.allowEmptyDB) {
                    req.onerror = preventDefault;
                    upgradeTransaction.abort();
                    req.result.close();
                    var delreq = indexedDB.deleteDatabase(dbName);
                    delreq.onsuccess = delreq.onerror = wrap(function () {
                        reject(new exceptions.NoSuchDatabase("Database ".concat(dbName, " doesnt exist")));
                    });
                }
                else {
                    upgradeTransaction.onerror = eventRejectHandler(reject);
                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;
                    wasCreated = oldVer < 1;
                    db.idbdb = req.result;
                    if (schemaPatchMode) {
                        patchCurrentVersion(db, upgradeTransaction);
                    }
                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);
                }
            }, reject);
            req.onsuccess = wrap(function () {
                upgradeTransaction = null;
                var idbdb = db.idbdb = req.result;
                var objectStoreNames = slice(idbdb.objectStoreNames);
                if (objectStoreNames.length > 0)
                    try {
                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');
                        if (state.autoSchema)
                            readGlobalSchema(db, idbdb, tmpTrans);
                        else {
                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);
                            if (!verifyInstalledSchema(db, tmpTrans) && !schemaPatchMode) {
                                console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.");
                                idbdb.close();
                                nativeVerToOpen = idbdb.version + 1;
                                schemaPatchMode = true;
                                return resolve(tryOpenDB());
                            }
                        }
                        generateMiddlewareStacks(db, tmpTrans);
                    }
                    catch (e) {
                    }
                connections.push(db);
                idbdb.onversionchange = wrap(function (ev) {
                    state.vcFired = true;
                    db.on("versionchange").fire(ev);
                });
                idbdb.onclose = wrap(function (ev) {
                    db.on("close").fire(ev);
                });
                if (wasCreated)
                    _onDatabaseCreated(db._deps, dbName);
                resolve();
            }, reject);
        }).catch(function (err) {
            switch (err === null || err === void 0 ? void 0 : err.name) {
                case "UnknownError":
                    if (state.PR1398_maxLoop > 0) {
                        state.PR1398_maxLoop--;
                        console.warn('Dexie: Workaround for Chrome UnknownError on open()');
                        return tryOpenDB();
                    }
                    break;
                case "VersionError":
                    if (nativeVerToOpen > 0) {
                        nativeVerToOpen = 0;
                        return tryOpenDB();
                    }
                    break;
            }
            return DexiePromise.reject(err);
        }); };
        return DexiePromise.race([
            openCanceller,
            (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(tryOpenDB)
        ]).then(function () {
            throwIfCancelled();
            state.onReadyBeingFired = [];
            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {
                if (state.onReadyBeingFired.length > 0) {
                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);
                    state.onReadyBeingFired = [];
                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);
                }
            });
        }).finally(function () {
            if (state.openCanceller === openCanceller) {
                state.onReadyBeingFired = null;
                state.isBeingOpened = false;
            }
        }).catch(function (err) {
            state.dbOpenError = err;
            try {
                upgradeTransaction && upgradeTransaction.abort();
            }
            catch (_a) { }
            if (openCanceller === state.openCanceller) {
                db._close();
            }
            return rejection(err);
        }).finally(function () {
            state.openComplete = true;
            resolveDbReady();
        }).then(function () {
            if (wasCreated) {
                var everything_1 = {};
                db.tables.forEach(function (table) {
                    table.schema.indexes.forEach(function (idx) {
                        if (idx.name)
                            everything_1["idb://".concat(db.name, "/").concat(table.name, "/").concat(idx.name)] = new RangeSet(-Infinity, [[[]]]);
                    });
                    everything_1["idb://".concat(db.name, "/").concat(table.name, "/")] = everything_1["idb://".concat(db.name, "/").concat(table.name, "/:dels")] = new RangeSet(-Infinity, [[[]]]);
                });
                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME).fire(everything_1);
                signalSubscribersNow(everything_1, true);
            }
            return db;
        });
    }

    function awaitIterator(iterator) {
        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);
        function step(getNext) {
            return function (val) {
                var next = getNext(val), value = next.value;
                return next.done ? value :
                    (!value || typeof value.then !== 'function' ?
                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :
                        value.then(onSuccess, onError));
            };
        }
        return step(callNext)();
    }

    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {
        var i = arguments.length;
        if (i < 2)
            throw new exceptions.InvalidArgument("Too few arguments");
        var args = new Array(i - 1);
        while (--i)
            args[i - 1] = arguments[i];
        scopeFunc = args.pop();
        var tables = flatten(args);
        return [mode, tables, scopeFunc];
    }
    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {
        return DexiePromise.resolve().then(function () {
            var transless = PSD.transless || PSD;
            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);
            trans.explicit = true;
            var zoneProps = {
                trans: trans,
                transless: transless
            };
            if (parentTransaction) {
                trans.idbtrans = parentTransaction.idbtrans;
            }
            else {
                try {
                    trans.create();
                    trans.idbtrans._explicit = true;
                    db._state.PR1398_maxLoop = 3;
                }
                catch (ex) {
                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {
                        console.warn('Dexie: Need to reopen db');
                        db.close({ disableAutoOpen: false });
                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });
                    }
                    return rejection(ex);
                }
            }
            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);
            if (scopeFuncIsAsync) {
                incrementExpectedAwaits();
            }
            var returnValue;
            var promiseFollowed = DexiePromise.follow(function () {
                returnValue = scopeFunc.call(trans, trans);
                if (returnValue) {
                    if (scopeFuncIsAsync) {
                        var decrementor = decrementExpectedAwaits.bind(null, null);
                        returnValue.then(decrementor, decrementor);
                    }
                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {
                        returnValue = awaitIterator(returnValue);
                    }
                }
            }, zoneProps);
            return (returnValue && typeof returnValue.then === 'function' ?
                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?
                    x
                    : rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")); })
                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {
                if (parentTransaction)
                    trans._resolve();
                return trans._completion.then(function () { return x; });
            }).catch(function (e) {
                trans._reject(e);
                return rejection(e);
            });
        });
    }

    function pad(a, value, count) {
        var result = isArray(a) ? a.slice() : [a];
        for (var i = 0; i < count; ++i)
            result.push(value);
        return result;
    }
    function createVirtualIndexMiddleware(down) {
        return __assign(__assign({}, down), { table: function (tableName) {
                var table = down.table(tableName);
                var schema = table.schema;
                var indexLookup = {};
                var allVirtualIndexes = [];
                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {
                    var keyPathAlias = getKeyPathAlias(keyPath);
                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);
                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;
                    var isVirtual = keyTail > 0;
                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { name: isVirtual
                            ? "".concat(keyPathAlias, "(virtual-from:").concat(lowLevelIndex.name, ")")
                            : lowLevelIndex.name, lowLevelIndex: lowLevelIndex, isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });
                    indexList.push(virtualIndex);
                    if (!virtualIndex.isPrimaryKey) {
                        allVirtualIndexes.push(virtualIndex);
                    }
                    if (keyLength > 1) {
                        var virtualKeyPath = keyLength === 2 ?
                            keyPath[0] :
                            keyPath.slice(0, keyLength - 1);
                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);
                    }
                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });
                    return virtualIndex;
                }
                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);
                indexLookup[":id"] = [primaryKey];
                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {
                    var index = _a[_i];
                    addVirtualIndexes(index.keyPath, 0, index);
                }
                function findBestIndex(keyPath) {
                    var result = indexLookup[getKeyPathAlias(keyPath)];
                    return result && result[0];
                }
                function translateRange(range, keyTail) {
                    return {
                        type: range.type === 1  ?
                            2  :
                            range.type,
                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),
                        lowerOpen: true,
                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),
                        upperOpen: true
                    };
                }
                function translateRequest(req) {
                    var index = req.query.index;
                    return index.isVirtual ? __assign(__assign({}, req), { query: {
                            index: index.lowLevelIndex,
                            range: translateRange(req.query.range, index.keyTail)
                        } }) : req;
                }
                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {
                        return table.count(translateRequest(req));
                    }, query: function (req) {
                        return table.query(translateRequest(req));
                    }, openCursor: function (req) {
                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;
                        if (!isVirtual)
                            return table.openCursor(req);
                        function createVirtualCursor(cursor) {
                            function _continue(key) {
                                key != null ?
                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :
                                    req.unique ?
                                        cursor.continue(cursor.key.slice(0, keyLength)
                                            .concat(req.reverse
                                            ? down.MIN_KEY
                                            : down.MAX_KEY, keyTail)) :
                                        cursor.continue();
                            }
                            var virtualCursor = Object.create(cursor, {
                                continue: { value: _continue },
                                continuePrimaryKey: {
                                    value: function (key, primaryKey) {
                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);
                                    }
                                },
                                primaryKey: {
                                    get: function () {
                                        return cursor.primaryKey;
                                    }
                                },
                                key: {
                                    get: function () {
                                        var key = cursor.key;
                                        return keyLength === 1 ?
                                            key[0] :
                                            key.slice(0, keyLength);
                                    }
                                },
                                value: {
                                    get: function () {
                                        return cursor.value;
                                    }
                                }
                            });
                            return virtualCursor;
                        }
                        return table.openCursor(translateRequest(req))
                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });
                    } });
                return result;
            } });
    }
    var virtualIndexMiddleware = {
        stack: "dbcore",
        name: "VirtualIndexMiddleware",
        level: 1,
        create: createVirtualIndexMiddleware
    };

    function getObjectDiff(a, b, rv, prfx) {
        rv = rv || {};
        prfx = prfx || '';
        keys(a).forEach(function (prop) {
            if (!hasOwn(b, prop)) {
                rv[prfx + prop] = undefined;
            }
            else {
                var ap = a[prop], bp = b[prop];
                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {
                    var apTypeName = toStringTag(ap);
                    var bpTypeName = toStringTag(bp);
                    if (apTypeName !== bpTypeName) {
                        rv[prfx + prop] = b[prop];
                    }
                    else if (apTypeName === 'Object') {
                        getObjectDiff(ap, bp, rv, prfx + prop + '.');
                    }
                    else if (ap !== bp) {
                        rv[prfx + prop] = b[prop];
                    }
                }
                else if (ap !== bp)
                    rv[prfx + prop] = b[prop];
            }
        });
        keys(b).forEach(function (prop) {
            if (!hasOwn(a, prop)) {
                rv[prfx + prop] = b[prop];
            }
        });
        return rv;
    }

    function getEffectiveKeys(primaryKey, req) {
        if (req.type === 'delete')
            return req.keys;
        return req.keys || req.values.map(primaryKey.extractKey);
    }

    var hooksMiddleware = {
        stack: "dbcore",
        name: "HooksMiddleware",
        level: 2,
        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {
                var downTable = downCore.table(tableName);
                var primaryKey = downTable.schema.primaryKey;
                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {
                        var dxTrans = PSD.trans;
                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;
                        switch (req.type) {
                            case 'add':
                                if (creating.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'put':
                                if (creating.fire === nop && updating.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'delete':
                                if (deleting.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'deleteRange':
                                if (deleting.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);
                        }
                        return downTable.mutate(req);
                        function addPutOrDelete(req) {
                            var dxTrans = PSD.trans;
                            var keys = req.keys || getEffectiveKeys(primaryKey, req);
                            if (!keys)
                                throw new Error("Keys missing");
                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);
                            if (req.type !== 'delete')
                                req.values = __spreadArray([], req.values, true);
                            if (req.keys)
                                req.keys = __spreadArray([], req.keys, true);
                            return getExistingValues(downTable, req, keys).then(function (existingValues) {
                                var contexts = keys.map(function (key, i) {
                                    var existingValue = existingValues[i];
                                    var ctx = { onerror: null, onsuccess: null };
                                    if (req.type === 'delete') {
                                        deleting.fire.call(ctx, key, existingValue, dxTrans);
                                    }
                                    else if (req.type === 'add' || existingValue === undefined) {
                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);
                                        if (key == null && generatedPrimaryKey != null) {
                                            key = generatedPrimaryKey;
                                            req.keys[i] = key;
                                            if (!primaryKey.outbound) {
                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);
                                            }
                                        }
                                    }
                                    else {
                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);
                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);
                                        if (additionalChanges_1) {
                                            var requestedValue_1 = req.values[i];
                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {
                                                if (hasOwn(requestedValue_1, keyPath)) {
                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];
                                                }
                                                else {
                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);
                                                }
                                            });
                                        }
                                    }
                                    return ctx;
                                });
                                return downTable.mutate(req).then(function (_a) {
                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;
                                    for (var i = 0; i < keys.length; ++i) {
                                        var primKey = results ? results[i] : keys[i];
                                        var ctx = contexts[i];
                                        if (primKey == null) {
                                            ctx.onerror && ctx.onerror(failures[i]);
                                        }
                                        else {
                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?
                                                req.values[i] :
                                                primKey
                                            );
                                        }
                                    }
                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };
                                }).catch(function (error) {
                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });
                                    return Promise.reject(error);
                                });
                            });
                        }
                        function deleteRange(req) {
                            return deleteNextChunk(req.trans, req.range, 10000);
                        }
                        function deleteNextChunk(trans, range, limit) {
                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })
                                .then(function (_a) {
                                var result = _a.result;
                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {
                                    if (res.numFailures > 0)
                                        return Promise.reject(res.failures[0]);
                                    if (result.length < limit) {
                                        return { failures: [], numFailures: 0, lastResult: undefined };
                                    }
                                    else {
                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);
                                    }
                                });
                            });
                        }
                    } });
                return tableMiddleware;
            } })); }
    };
    function getExistingValues(table, req, effectiveKeys) {
        return req.type === "add"
            ? Promise.resolve([])
            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: "immutable" });
    }

    function getFromTransactionCache(keys, cache, clone) {
        try {
            if (!cache)
                return null;
            if (cache.keys.length < keys.length)
                return null;
            var result = [];
            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {
                if (cmp(cache.keys[i], keys[j]) !== 0)
                    continue;
                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);
                ++j;
            }
            return result.length === keys.length ? result : null;
        }
        catch (_a) {
            return null;
        }
    }
    var cacheExistingValuesMiddleware = {
        stack: "dbcore",
        level: -1,
        create: function (core) {
            return {
                table: function (tableName) {
                    var table = core.table(tableName);
                    return __assign(__assign({}, table), { getMany: function (req) {
                            if (!req.cache) {
                                return table.getMany(req);
                            }
                            var cachedResult = getFromTransactionCache(req.keys, req.trans["_cache"], req.cache === "clone");
                            if (cachedResult) {
                                return DexiePromise.resolve(cachedResult);
                            }
                            return table.getMany(req).then(function (res) {
                                req.trans["_cache"] = {
                                    keys: req.keys,
                                    values: req.cache === "clone" ? deepClone(res) : res,
                                };
                                return res;
                            });
                        }, mutate: function (req) {
                            if (req.type !== "add")
                                req.trans["_cache"] = null;
                            return table.mutate(req);
                        } });
                },
            };
        },
    };

    function isCachableContext(ctx, table) {
        return (ctx.trans.mode === 'readonly' &&
            !!ctx.subscr &&
            !ctx.trans.explicit &&
            ctx.trans.db._options.cache !== 'disabled' &&
            !table.schema.primaryKey.outbound);
    }

    function isCachableRequest(type, req) {
        switch (type) {
            case 'query':
                return req.values && !req.unique;
            case 'get':
                return false;
            case 'getMany':
                return false;
            case 'count':
                return false;
            case 'openCursor':
                return false;
        }
    }

    var observabilityMiddleware = {
        stack: "dbcore",
        level: 0,
        name: "Observability",
        create: function (core) {
            var dbName = core.schema.name;
            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);
            return __assign(__assign({}, core), { transaction: function (stores, mode, options) {
                    if (PSD.subscr && mode !== 'readonly') {
                        throw new exceptions.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(PSD.querier));
                    }
                    return core.transaction(stores, mode, options);
                }, table: function (tableName) {
                    var table = core.table(tableName);
                    var schema = table.schema;
                    var primaryKey = schema.primaryKey, indexes = schema.indexes;
                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;
                    var indexesWithAutoIncPK = primaryKey.autoIncrement && indexes.filter(function (index) { return index.compound && index.keyPath.includes(primaryKey.keyPath); });
                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {
                            var _a, _b;
                            var trans = req.trans;
                            var mutatedParts = req.mutatedParts || (req.mutatedParts = {});
                            var getRangeSet = function (indexName) {
                                var part = "idb://".concat(dbName, "/").concat(tableName, "/").concat(indexName);
                                return (mutatedParts[part] ||
                                    (mutatedParts[part] = new RangeSet()));
                            };
                            var pkRangeSet = getRangeSet("");
                            var delsRangeSet = getRangeSet(":dels");
                            var type = req.type;
                            var _c = req.type === "deleteRange"
                                ? [req.range]
                                : req.type === "delete"
                                    ? [req.keys]
                                    : req.values.length < 50
                                        ? [getEffectiveKeys(primaryKey, req).filter(function (id) { return id; }), req.values]
                                        : [], keys = _c[0], newObjs = _c[1];
                            var oldCache = req.trans["_cache"];
                            if (isArray(keys)) {
                                pkRangeSet.addKeys(keys);
                                var oldObjs = type === 'delete' || keys.length === newObjs.length ? getFromTransactionCache(keys, oldCache) : null;
                                if (!oldObjs) {
                                    delsRangeSet.addKeys(keys);
                                }
                                if (oldObjs || newObjs) {
                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);
                                }
                            }
                            else if (keys) {
                                var range = {
                                    from: (_a = keys.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY,
                                    to: (_b = keys.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY
                                };
                                delsRangeSet.add(range);
                                pkRangeSet.add(range);
                            }
                            else {
                                pkRangeSet.add(FULL_RANGE);
                                delsRangeSet.add(FULL_RANGE);
                                schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });
                            }
                            return table.mutate(req).then(function (res) {
                                if (keys && (req.type === 'add' || req.type === 'put')) {
                                    pkRangeSet.addKeys(res.results);
                                    if (indexesWithAutoIncPK) {
                                        indexesWithAutoIncPK.forEach(function (idx) {
                                            var idxVals = req.values.map(function (v) { return idx.extractKey(v); });
                                            var pkPos = idx.keyPath.findIndex(function (prop) { return prop === primaryKey.keyPath; });
                                            for (var i = 0, len = res.results.length; i < len; ++i) {
                                                idxVals[i][pkPos] = res.results[i];
                                            }
                                            getRangeSet(idx.name).addKeys(idxVals);
                                        });
                                    }
                                }
                                trans.mutatedParts = extendObservabilitySet(trans.mutatedParts || {}, mutatedParts);
                                return res;
                            });
                        } });
                    var getRange = function (_a) {
                        var _b, _c;
                        var _d = _a.query, index = _d.index, range = _d.range;
                        return [
                            index,
                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),
                        ];
                    };
                    var readSubscribers = {
                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },
                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },
                        count: getRange,
                        query: getRange,
                        openCursor: getRange,
                    };
                    keys(readSubscribers).forEach(function (method) {
                        tableClone[method] = function (req) {
                            var subscr = PSD.subscr;
                            var isLiveQuery = !!subscr;
                            var cachable = isCachableContext(PSD, table) && isCachableRequest(method, req);
                            var obsSet = cachable
                                ? req.obsSet = {}
                                : subscr;
                            if (isLiveQuery) {
                                var getRangeSet = function (indexName) {
                                    var part = "idb://".concat(dbName, "/").concat(tableName, "/").concat(indexName);
                                    return (obsSet[part] ||
                                        (obsSet[part] = new RangeSet()));
                                };
                                var pkRangeSet_1 = getRangeSet("");
                                var delsRangeSet_1 = getRangeSet(":dels");
                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];
                                if (method === 'query' && queriedIndex.isPrimaryKey && !req.values) {
                                    delsRangeSet_1.add(queriedRanges);
                                }
                                else {
                                    getRangeSet(queriedIndex.name || "").add(queriedRanges);
                                }
                                if (!queriedIndex.isPrimaryKey) {
                                    if (method === "count") {
                                        delsRangeSet_1.add(FULL_RANGE);
                                    }
                                    else {
                                        var keysPromise_1 = method === "query" &&
                                            outbound &&
                                            req.values &&
                                            table.query(__assign(__assign({}, req), { values: false }));
                                        return table[method].apply(this, arguments).then(function (res) {
                                            if (method === "query") {
                                                if (outbound && req.values) {
                                                    return keysPromise_1.then(function (_a) {
                                                        var resultingKeys = _a.result;
                                                        pkRangeSet_1.addKeys(resultingKeys);
                                                        return res;
                                                    });
                                                }
                                                var pKeys = req.values
                                                    ? res.result.map(extractKey)
                                                    : res.result;
                                                if (req.values) {
                                                    pkRangeSet_1.addKeys(pKeys);
                                                }
                                                else {
                                                    delsRangeSet_1.addKeys(pKeys);
                                                }
                                            }
                                            else if (method === "openCursor") {
                                                var cursor_1 = res;
                                                var wantValues_1 = req.values;
                                                return (cursor_1 &&
                                                    Object.create(cursor_1, {
                                                        key: {
                                                            get: function () {
                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);
                                                                return cursor_1.key;
                                                            },
                                                        },
                                                        primaryKey: {
                                                            get: function () {
                                                                var pkey = cursor_1.primaryKey;
                                                                delsRangeSet_1.addKey(pkey);
                                                                return pkey;
                                                            },
                                                        },
                                                        value: {
                                                            get: function () {
                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);
                                                                return cursor_1.value;
                                                            },
                                                        },
                                                    }));
                                            }
                                            return res;
                                        });
                                    }
                                }
                            }
                            return table[method].apply(this, arguments);
                        };
                    });
                    return tableClone;
                } });
        },
    };
    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {
        function addAffectedIndex(ix) {
            var rangeSet = getRangeSet(ix.name || "");
            function extractKey(obj) {
                return obj != null ? ix.extractKey(obj) : null;
            }
            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)
                ? key.forEach(function (key) { return rangeSet.addKey(key); })
                : rangeSet.addKey(key); };
            (oldObjs || newObjs).forEach(function (_, i) {
                var oldKey = oldObjs && extractKey(oldObjs[i]);
                var newKey = newObjs && extractKey(newObjs[i]);
                if (cmp(oldKey, newKey) !== 0) {
                    if (oldKey != null)
                        addKeyOrKeys(oldKey);
                    if (newKey != null)
                        addKeyOrKeys(newKey);
                }
            });
        }
        schema.indexes.forEach(addAffectedIndex);
    }

    function adjustOptimisticFromFailures(tblCache, req, res) {
        if (res.numFailures === 0)
            return req;
        if (req.type === 'deleteRange') {
            return null;
        }
        var numBulkOps = req.keys
            ? req.keys.length
            : 'values' in req && req.values
                ? req.values.length
                : 1;
        if (res.numFailures === numBulkOps) {
            return null;
        }
        var clone = __assign({}, req);
        if (isArray(clone.keys)) {
            clone.keys = clone.keys.filter(function (_, i) { return !(i in res.failures); });
        }
        if ('values' in clone && isArray(clone.values)) {
            clone.values = clone.values.filter(function (_, i) { return !(i in res.failures); });
        }
        return clone;
    }

    function isAboveLower(key, range) {
        return range.lower === undefined
            ? true
            : range.lowerOpen
                ? cmp(key, range.lower) > 0
                : cmp(key, range.lower) >= 0;
    }
    function isBelowUpper(key, range) {
        return range.upper === undefined
            ? true
            : range.upperOpen
                ? cmp(key, range.upper) < 0
                : cmp(key, range.upper) <= 0;
    }
    function isWithinRange(key, range) {
        return isAboveLower(key, range) && isBelowUpper(key, range);
    }

    function applyOptimisticOps(result, req, ops, table, cacheEntry, immutable) {
        if (!ops || ops.length === 0)
            return result;
        var index = req.query.index;
        var multiEntry = index.multiEntry;
        var queryRange = req.query.range;
        var primaryKey = table.schema.primaryKey;
        var extractPrimKey = primaryKey.extractKey;
        var extractIndex = index.extractKey;
        var extractLowLevelIndex = (index.lowLevelIndex || index).extractKey;
        var finalResult = ops.reduce(function (result, op) {
            var modifedResult = result;
            var includedValues = [];
            if (op.type === 'add' || op.type === 'put') {
                var includedPKs = new RangeSet();
                for (var i = op.values.length - 1; i >= 0; --i) {
                    var value = op.values[i];
                    var pk = extractPrimKey(value);
                    if (includedPKs.hasKey(pk))
                        continue;
                    var key = extractIndex(value);
                    if (multiEntry && isArray(key)
                        ? key.some(function (k) { return isWithinRange(k, queryRange); })
                        : isWithinRange(key, queryRange)) {
                        includedPKs.addKey(pk);
                        includedValues.push(value);
                    }
                }
            }
            switch (op.type) {
                case 'add': {
                    var existingKeys_1 = new RangeSet().addKeys(req.values ? result.map(function (v) { return extractPrimKey(v); }) : result);
                    modifedResult = result.concat(req.values
                        ? includedValues.filter(function (v) {
                            var key = extractPrimKey(v);
                            if (existingKeys_1.hasKey(key))
                                return false;
                            existingKeys_1.addKey(key);
                            return true;
                        })
                        : includedValues
                            .map(function (v) { return extractPrimKey(v); })
                            .filter(function (k) {
                            if (existingKeys_1.hasKey(k))
                                return false;
                            existingKeys_1.addKey(k);
                            return true;
                        }));
                    break;
                }
                case 'put': {
                    var keySet_1 = new RangeSet().addKeys(op.values.map(function (v) { return extractPrimKey(v); }));
                    modifedResult = result
                        .filter(
                    function (item) { return !keySet_1.hasKey(req.values ? extractPrimKey(item) : item); })
                        .concat(
                    req.values
                        ? includedValues
                        : includedValues.map(function (v) { return extractPrimKey(v); }));
                    break;
                }
                case 'delete':
                    var keysToDelete_1 = new RangeSet().addKeys(op.keys);
                    modifedResult = result.filter(function (item) {
                        return !keysToDelete_1.hasKey(req.values ? extractPrimKey(item) : item);
                    });
                    break;
                case 'deleteRange':
                    var range_1 = op.range;
                    modifedResult = result.filter(function (item) { return !isWithinRange(extractPrimKey(item), range_1); });
                    break;
            }
            return modifedResult;
        }, result);
        if (finalResult === result)
            return result;
        finalResult.sort(function (a, b) {
            return cmp(extractLowLevelIndex(a), extractLowLevelIndex(b)) ||
                cmp(extractPrimKey(a), extractPrimKey(b));
        });
        if (req.limit && req.limit < Infinity) {
            if (finalResult.length > req.limit) {
                finalResult.length = req.limit;
            }
            else if (result.length === req.limit && finalResult.length < req.limit) {
                cacheEntry.dirty = true;
            }
        }
        return immutable ? Object.freeze(finalResult) : finalResult;
    }

    function areRangesEqual(r1, r2) {
        return (cmp(r1.lower, r2.lower) === 0 &&
            cmp(r1.upper, r2.upper) === 0 &&
            !!r1.lowerOpen === !!r2.lowerOpen &&
            !!r1.upperOpen === !!r2.upperOpen);
    }

    function compareLowers(lower1, lower2, lowerOpen1, lowerOpen2) {
        if (lower1 === undefined)
            return lower2 !== undefined ? -1 : 0;
        if (lower2 === undefined)
            return 1;
        var c = cmp(lower1, lower2);
        if (c === 0) {
            if (lowerOpen1 && lowerOpen2)
                return 0;
            if (lowerOpen1)
                return 1;
            if (lowerOpen2)
                return -1;
        }
        return c;
    }
    function compareUppers(upper1, upper2, upperOpen1, upperOpen2) {
        if (upper1 === undefined)
            return upper2 !== undefined ? 1 : 0;
        if (upper2 === undefined)
            return -1;
        var c = cmp(upper1, upper2);
        if (c === 0) {
            if (upperOpen1 && upperOpen2)
                return 0;
            if (upperOpen1)
                return -1;
            if (upperOpen2)
                return 1;
        }
        return c;
    }
    function isSuperRange(r1, r2) {
        return (compareLowers(r1.lower, r2.lower, r1.lowerOpen, r2.lowerOpen) <= 0 &&
            compareUppers(r1.upper, r2.upper, r1.upperOpen, r2.upperOpen) >= 0);
    }

    function findCompatibleQuery(dbName, tableName, type, req) {
        var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
        if (!tblCache)
            return [];
        var queries = tblCache.queries[type];
        if (!queries)
            return [null, false, tblCache, null];
        var indexName = req.query ? req.query.index.name : null;
        var entries = queries[indexName || ''];
        if (!entries)
            return [null, false, tblCache, null];
        switch (type) {
            case 'query':
                var equalEntry = entries.find(function (entry) {
                    return entry.req.limit === req.limit &&
                        entry.req.values === req.values &&
                        areRangesEqual(entry.req.query.range, req.query.range);
                });
                if (equalEntry)
                    return [
                        equalEntry,
                        true,
                        tblCache,
                        entries,
                    ];
                var superEntry = entries.find(function (entry) {
                    var limit = 'limit' in entry.req ? entry.req.limit : Infinity;
                    return (limit >= req.limit &&
                        (req.values ? entry.req.values : true) &&
                        isSuperRange(entry.req.query.range, req.query.range));
                });
                return [superEntry, false, tblCache, entries];
            case 'count':
                var countQuery = entries.find(function (entry) {
                    return areRangesEqual(entry.req.query.range, req.query.range);
                });
                return [countQuery, !!countQuery, tblCache, entries];
        }
    }

    function subscribeToCacheEntry(cacheEntry, container, requery, signal) {
        cacheEntry.subscribers.add(requery);
        signal.addEventListener("abort", function () {
            cacheEntry.subscribers.delete(requery);
            if (cacheEntry.subscribers.size === 0) {
                enqueForDeletion(cacheEntry, container);
            }
        });
    }
    function enqueForDeletion(cacheEntry, container) {
        setTimeout(function () {
            if (cacheEntry.subscribers.size === 0) {
                delArrayItem(container, cacheEntry);
            }
        }, 3000);
    }

    var cacheMiddleware = {
        stack: 'dbcore',
        level: 0,
        name: 'Cache',
        create: function (core) {
            var dbName = core.schema.name;
            var coreMW = __assign(__assign({}, core), { transaction: function (stores, mode, options) {
                    var idbtrans = core.transaction(stores, mode, options);
                    if (mode === 'readwrite') {
                        var ac_1 = new AbortController();
                        var signal = ac_1.signal;
                        var endTransaction = function (wasCommitted) { return function () {
                            ac_1.abort();
                            if (mode === 'readwrite') {
                                var affectedSubscribers_1 = new Set();
                                for (var _i = 0, stores_1 = stores; _i < stores_1.length; _i++) {
                                    var storeName = stores_1[_i];
                                    var tblCache = cache["idb://".concat(dbName, "/").concat(storeName)];
                                    if (tblCache) {
                                        var table = core.table(storeName);
                                        var ops = tblCache.optimisticOps.filter(function (op) { return op.trans === idbtrans; });
                                        if (idbtrans._explicit && wasCommitted && idbtrans.mutatedParts) {
                                            for (var _a = 0, _b = Object.values(tblCache.queries.query); _a < _b.length; _a++) {
                                                var entries = _b[_a];
                                                for (var _c = 0, _d = entries.slice(); _c < _d.length; _c++) {
                                                    var entry = _d[_c];
                                                    if (obsSetsOverlap(entry.obsSet, idbtrans.mutatedParts)) {
                                                        delArrayItem(entries, entry);
                                                        entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                    }
                                                }
                                            }
                                        }
                                        else if (ops.length > 0) {
                                            tblCache.optimisticOps = tblCache.optimisticOps.filter(function (op) { return op.trans !== idbtrans; });
                                            for (var _e = 0, _f = Object.values(tblCache.queries.query); _e < _f.length; _e++) {
                                                var entries = _f[_e];
                                                for (var _g = 0, _h = entries.slice(); _g < _h.length; _g++) {
                                                    var entry = _h[_g];
                                                    if (entry.res != null &&
                                                        idbtrans.mutatedParts
    ) {
                                                        if (wasCommitted && !entry.dirty) {
                                                            var freezeResults = Object.isFrozen(entry.res);
                                                            var modRes = applyOptimisticOps(entry.res, entry.req, ops, table, entry, freezeResults);
                                                            if (entry.dirty) {
                                                                delArrayItem(entries, entry);
                                                                entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                            }
                                                            else if (modRes !== entry.res) {
                                                                entry.res = modRes;
                                                                entry.promise = DexiePromise.resolve({ result: modRes });
                                                            }
                                                        }
                                                        else {
                                                            if (entry.dirty) {
                                                                delArrayItem(entries, entry);
                                                            }
                                                            entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                affectedSubscribers_1.forEach(function (requery) { return requery(); });
                            }
                        }; };
                        idbtrans.addEventListener('abort', endTransaction(false), {
                            signal: signal,
                        });
                        idbtrans.addEventListener('error', endTransaction(false), {
                            signal: signal,
                        });
                        idbtrans.addEventListener('complete', endTransaction(true), {
                            signal: signal,
                        });
                    }
                    return idbtrans;
                }, table: function (tableName) {
                    var downTable = core.table(tableName);
                    var primKey = downTable.schema.primaryKey;
                    var tableMW = __assign(__assign({}, downTable), { mutate: function (req) {
                            var trans = PSD.trans;
                            if (primKey.outbound ||
                                trans.db._options.cache === 'disabled' ||
                                trans.explicit ||
                                trans.idbtrans.mode !== 'readwrite'
                            ) {
                                return downTable.mutate(req);
                            }
                            var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
                            if (!tblCache)
                                return downTable.mutate(req);
                            var promise = downTable.mutate(req);
                            if ((req.type === 'add' || req.type === 'put') && (req.values.length >= 50 || getEffectiveKeys(primKey, req).some(function (key) { return key == null; }))) {
                                promise.then(function (res) {
                                    var reqWithResolvedKeys = __assign(__assign({}, req), { values: req.values.map(function (value, i) {
                                            var _a;
                                            if (res.failures[i])
                                                return value;
                                            var valueWithKey = ((_a = primKey.keyPath) === null || _a === void 0 ? void 0 : _a.includes('.'))
                                                ? deepClone(value)
                                                : __assign({}, value);
                                            setByKeyPath(valueWithKey, primKey.keyPath, res.results[i]);
                                            return valueWithKey;
                                        }) });
                                    var adjustedReq = adjustOptimisticFromFailures(tblCache, reqWithResolvedKeys, res);
                                    tblCache.optimisticOps.push(adjustedReq);
                                    queueMicrotask(function () { return req.mutatedParts && signalSubscribersLazily(req.mutatedParts); });
                                });
                            }
                            else {
                                tblCache.optimisticOps.push(req);
                                req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                promise.then(function (res) {
                                    if (res.numFailures > 0) {
                                        delArrayItem(tblCache.optimisticOps, req);
                                        var adjustedReq = adjustOptimisticFromFailures(tblCache, req, res);
                                        if (adjustedReq) {
                                            tblCache.optimisticOps.push(adjustedReq);
                                        }
                                        req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                    }
                                });
                                promise.catch(function () {
                                    delArrayItem(tblCache.optimisticOps, req);
                                    req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                });
                            }
                            return promise;
                        }, query: function (req) {
                            var _a;
                            if (!isCachableContext(PSD, downTable) || !isCachableRequest("query", req))
                                return downTable.query(req);
                            var freezeResults = ((_a = PSD.trans) === null || _a === void 0 ? void 0 : _a.db._options.cache) === 'immutable';
                            var _b = PSD, requery = _b.requery, signal = _b.signal;
                            var _c = findCompatibleQuery(dbName, tableName, 'query', req), cacheEntry = _c[0], exactMatch = _c[1], tblCache = _c[2], container = _c[3];
                            if (cacheEntry && exactMatch) {
                                cacheEntry.obsSet = req.obsSet;
                            }
                            else {
                                var promise = downTable.query(req).then(function (res) {
                                    var result = res.result;
                                    if (cacheEntry)
                                        cacheEntry.res = result;
                                    if (freezeResults) {
                                        for (var i = 0, l = result.length; i < l; ++i) {
                                            Object.freeze(result[i]);
                                        }
                                        Object.freeze(result);
                                    }
                                    else {
                                        res.result = deepClone(result);
                                    }
                                    return res;
                                }).catch(function (error) {
                                    if (container && cacheEntry)
                                        delArrayItem(container, cacheEntry);
                                    return Promise.reject(error);
                                });
                                cacheEntry = {
                                    obsSet: req.obsSet,
                                    promise: promise,
                                    subscribers: new Set(),
                                    type: 'query',
                                    req: req,
                                    dirty: false,
                                };
                                if (container) {
                                    container.push(cacheEntry);
                                }
                                else {
                                    container = [cacheEntry];
                                    if (!tblCache) {
                                        tblCache = cache["idb://".concat(dbName, "/").concat(tableName)] = {
                                            queries: {
                                                query: {},
                                                count: {},
                                            },
                                            objs: new Map(),
                                            optimisticOps: [],
                                            unsignaledParts: {}
                                        };
                                    }
                                    tblCache.queries.query[req.query.index.name || ''] = container;
                                }
                            }
                            subscribeToCacheEntry(cacheEntry, container, requery, signal);
                            return cacheEntry.promise.then(function (res) {
                                return {
                                    result: applyOptimisticOps(res.result, req, tblCache === null || tblCache === void 0 ? void 0 : tblCache.optimisticOps, downTable, cacheEntry, freezeResults),
                                };
                            });
                        } });
                    return tableMW;
                } });
            return coreMW;
        },
    };

    function vipify(target, vipDb) {
        return new Proxy(target, {
            get: function (target, prop, receiver) {
                if (prop === 'db')
                    return vipDb;
                return Reflect.get(target, prop, receiver);
            }
        });
    }

    var Dexie$1 =  (function () {
        function Dexie(name, options) {
            var _this = this;
            this._middlewares = {};
            this.verno = 0;
            var deps = Dexie.dependencies;
            this._options = options = __assign({
                addons: Dexie.addons, autoOpen: true,
                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange, cache: 'cloned' }, options);
            this._deps = {
                indexedDB: options.indexedDB,
                IDBKeyRange: options.IDBKeyRange
            };
            var addons = options.addons;
            this._dbSchema = {};
            this._versions = [];
            this._storeNames = [];
            this._allTables = {};
            this.idbdb = null;
            this._novip = this;
            var state = {
                dbOpenError: null,
                isBeingOpened: false,
                onReadyBeingFired: null,
                openComplete: false,
                dbReadyResolve: nop,
                dbReadyPromise: null,
                cancelOpen: nop,
                openCanceller: null,
                autoSchema: true,
                PR1398_maxLoop: 3,
                autoOpen: options.autoOpen,
            };
            state.dbReadyPromise = new DexiePromise(function (resolve) {
                state.dbReadyResolve = resolve;
            });
            state.openCanceller = new DexiePromise(function (_, reject) {
                state.cancelOpen = reject;
            });
            this._state = state;
            this.name = name;
            this.on = Events(this, "populate", "blocked", "versionchange", "close", { ready: [promisableChain, nop] });
            this.once = function (event, callback) {
                var fn = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    _this.on(event).unsubscribe(fn);
                    callback.apply(_this, args);
                };
                return _this.on(event, fn);
            };
            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {
                return function (subscriber, bSticky) {
                    Dexie.vip(function () {
                        var state = _this._state;
                        if (state.openComplete) {
                            if (!state.dbOpenError)
                                DexiePromise.resolve().then(subscriber);
                            if (bSticky)
                                subscribe(subscriber);
                        }
                        else if (state.onReadyBeingFired) {
                            state.onReadyBeingFired.push(subscriber);
                            if (bSticky)
                                subscribe(subscriber);
                        }
                        else {
                            subscribe(subscriber);
                            var db_1 = _this;
                            if (!bSticky)
                                subscribe(function unsubscribe() {
                                    db_1.on.ready.unsubscribe(subscriber);
                                    db_1.on.ready.unsubscribe(unsubscribe);
                                });
                        }
                    });
                };
            });
            this.Collection = createCollectionConstructor(this);
            this.Table = createTableConstructor(this);
            this.Transaction = createTransactionConstructor(this);
            this.Version = createVersionConstructor(this);
            this.WhereClause = createWhereClauseConstructor(this);
            this.on("versionchange", function (ev) {
                if (ev.newVersion > 0)
                    console.warn("Another connection wants to upgrade database '".concat(_this.name, "'. Closing db now to resume the upgrade."));
                else
                    console.warn("Another connection wants to delete database '".concat(_this.name, "'. Closing db now to resume the delete request."));
                _this.close({ disableAutoOpen: false });
            });
            this.on("blocked", function (ev) {
                if (!ev.newVersion || ev.newVersion < ev.oldVersion)
                    console.warn("Dexie.delete('".concat(_this.name, "') was blocked"));
                else
                    console.warn("Upgrade '".concat(_this.name, "' blocked by other connection holding version ").concat(ev.oldVersion / 10));
            });
            this._maxKey = getMaxKey(options.IDBKeyRange);
            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };
            this._fireOnBlocked = function (ev) {
                _this.on("blocked").fire(ev);
                connections
                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })
                    .map(function (c) { return c.on("versionchange").fire(ev); });
            };
            this.use(cacheExistingValuesMiddleware);
            this.use(cacheMiddleware);
            this.use(observabilityMiddleware);
            this.use(virtualIndexMiddleware);
            this.use(hooksMiddleware);
            var vipDB = new Proxy(this, {
                get: function (_, prop, receiver) {
                    if (prop === '_vip')
                        return true;
                    if (prop === 'table')
                        return function (tableName) { return vipify(_this.table(tableName), vipDB); };
                    var rv = Reflect.get(_, prop, receiver);
                    if (rv instanceof Table)
                        return vipify(rv, vipDB);
                    if (prop === 'tables')
                        return rv.map(function (t) { return vipify(t, vipDB); });
                    if (prop === '_createTransaction')
                        return function () {
                            var tx = rv.apply(this, arguments);
                            return vipify(tx, vipDB);
                        };
                    return rv;
                }
            });
            this.vip = vipDB;
            addons.forEach(function (addon) { return addon(_this); });
        }
        Dexie.prototype.version = function (versionNumber) {
            if (isNaN(versionNumber) || versionNumber < 0.1)
                throw new exceptions.Type("Given version is not a positive number");
            versionNumber = Math.round(versionNumber * 10) / 10;
            if (this.idbdb || this._state.isBeingOpened)
                throw new exceptions.Schema("Cannot add version when database is open");
            this.verno = Math.max(this.verno, versionNumber);
            var versions = this._versions;
            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];
            if (versionInstance)
                return versionInstance;
            versionInstance = new this.Version(versionNumber);
            versions.push(versionInstance);
            versions.sort(lowerVersionFirst);
            versionInstance.stores({});
            this._state.autoSchema = false;
            return versionInstance;
        };
        Dexie.prototype._whenReady = function (fn) {
            var _this = this;
            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {
                if (_this._state.openComplete) {
                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));
                }
                if (!_this._state.isBeingOpened) {
                    if (!_this._state.autoOpen) {
                        reject(new exceptions.DatabaseClosed());
                        return;
                    }
                    _this.open().catch(nop);
                }
                _this._state.dbReadyPromise.then(resolve, reject);
            }).then(fn);
        };
        Dexie.prototype.use = function (_a) {
            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;
            if (name)
                this.unuse({ stack: stack, name: name });
            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);
            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });
            middlewares.sort(function (a, b) { return a.level - b.level; });
            return this;
        };
        Dexie.prototype.unuse = function (_a) {
            var stack = _a.stack, name = _a.name, create = _a.create;
            if (stack && this._middlewares[stack]) {
                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {
                    return create ? mw.create !== create :
                        name ? mw.name !== name :
                            false;
                });
            }
            return this;
        };
        Dexie.prototype.open = function () {
            var _this = this;
            return usePSD(globalPSD,
            function () { return dexieOpen(_this); });
        };
        Dexie.prototype._close = function () {
            this.on.close.fire(new CustomEvent('close'));
            var state = this._state;
            var idx = connections.indexOf(this);
            if (idx >= 0)
                connections.splice(idx, 1);
            if (this.idbdb) {
                try {
                    this.idbdb.close();
                }
                catch (e) { }
                this.idbdb = null;
            }
            if (!state.isBeingOpened) {
                state.dbReadyPromise = new DexiePromise(function (resolve) {
                    state.dbReadyResolve = resolve;
                });
                state.openCanceller = new DexiePromise(function (_, reject) {
                    state.cancelOpen = reject;
                });
            }
        };
        Dexie.prototype.close = function (_a) {
            var _b = _a === void 0 ? { disableAutoOpen: true } : _a, disableAutoOpen = _b.disableAutoOpen;
            var state = this._state;
            if (disableAutoOpen) {
                if (state.isBeingOpened) {
                    state.cancelOpen(new exceptions.DatabaseClosed());
                }
                this._close();
                state.autoOpen = false;
                state.dbOpenError = new exceptions.DatabaseClosed();
            }
            else {
                this._close();
                state.autoOpen = this._options.autoOpen ||
                    state.isBeingOpened;
                state.openComplete = false;
                state.dbOpenError = null;
            }
        };
        Dexie.prototype.delete = function (closeOptions) {
            var _this = this;
            if (closeOptions === void 0) { closeOptions = { disableAutoOpen: true }; }
            var hasInvalidArguments = arguments.length > 0 && typeof arguments[0] !== 'object';
            var state = this._state;
            return new DexiePromise(function (resolve, reject) {
                var doDelete = function () {
                    _this.close(closeOptions);
                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);
                    req.onsuccess = wrap(function () {
                        _onDatabaseDeleted(_this._deps, _this.name);
                        resolve();
                    });
                    req.onerror = eventRejectHandler(reject);
                    req.onblocked = _this._fireOnBlocked;
                };
                if (hasInvalidArguments)
                    throw new exceptions.InvalidArgument("Invalid closeOptions argument to db.delete()");
                if (state.isBeingOpened) {
                    state.dbReadyPromise.then(doDelete);
                }
                else {
                    doDelete();
                }
            });
        };
        Dexie.prototype.backendDB = function () {
            return this.idbdb;
        };
        Dexie.prototype.isOpen = function () {
            return this.idbdb !== null;
        };
        Dexie.prototype.hasBeenClosed = function () {
            var dbOpenError = this._state.dbOpenError;
            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');
        };
        Dexie.prototype.hasFailed = function () {
            return this._state.dbOpenError !== null;
        };
        Dexie.prototype.dynamicallyOpened = function () {
            return this._state.autoSchema;
        };
        Object.defineProperty(Dexie.prototype, "tables", {
            get: function () {
                var _this = this;
                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });
            },
            enumerable: false,
            configurable: true
        });
        Dexie.prototype.transaction = function () {
            var args = extractTransactionArgs.apply(this, arguments);
            return this._transaction.apply(this, args);
        };
        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {
            var _this = this;
            var parentTransaction = PSD.trans;
            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)
                parentTransaction = null;
            var onlyIfCompatible = mode.indexOf('?') !== -1;
            mode = mode.replace('!', '').replace('?', '');
            var idbMode, storeNames;
            try {
                storeNames = tables.map(function (table) {
                    var storeName = table instanceof _this.Table ? table.name : table;
                    if (typeof storeName !== 'string')
                        throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
                    return storeName;
                });
                if (mode == "r" || mode === READONLY)
                    idbMode = READONLY;
                else if (mode == "rw" || mode == READWRITE)
                    idbMode = READWRITE;
                else
                    throw new exceptions.InvalidArgument("Invalid transaction mode: " + mode);
                if (parentTransaction) {
                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {
                        if (onlyIfCompatible) {
                            parentTransaction = null;
                        }
                        else
                            throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
                    }
                    if (parentTransaction) {
                        storeNames.forEach(function (storeName) {
                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {
                                if (onlyIfCompatible) {
                                    parentTransaction = null;
                                }
                                else
                                    throw new exceptions.SubTransaction("Table " + storeName +
                                        " not included in parent transaction.");
                            }
                        });
                    }
                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {
                        parentTransaction = null;
                    }
                }
            }
            catch (e) {
                return parentTransaction ?
                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :
                    rejection(e);
            }
            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);
            return (parentTransaction ?
                parentTransaction._promise(idbMode, enterTransaction, "lock") :
                PSD.trans ?
                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :
                    this._whenReady(enterTransaction));
        };
        Dexie.prototype.table = function (tableName) {
            if (!hasOwn(this._allTables, tableName)) {
                throw new exceptions.InvalidTable("Table ".concat(tableName, " does not exist"));
            }
            return this._allTables[tableName];
        };
        return Dexie;
    }());

    var symbolObservable = typeof Symbol !== "undefined" && "observable" in Symbol
        ? Symbol.observable
        : "@@observable";
    var Observable =  (function () {
        function Observable(subscribe) {
            this._subscribe = subscribe;
        }
        Observable.prototype.subscribe = function (x, error, complete) {
            return this._subscribe(!x || typeof x === "function" ? { next: x, error: error, complete: complete } : x);
        };
        Observable.prototype[symbolObservable] = function () {
            return this;
        };
        return Observable;
    }());

    var domDeps;
    try {
        domDeps = {
            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,
            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange
        };
    }
    catch (e) {
        domDeps = { indexedDB: null, IDBKeyRange: null };
    }

    function liveQuery(querier) {
        var hasValue = false;
        var currentValue;
        var observable = new Observable(function (observer) {
            var scopeFuncIsAsync = isAsyncFunction(querier);
            function execute(ctx) {
                var wasRootExec = beginMicroTickScope();
                try {
                    if (scopeFuncIsAsync) {
                        incrementExpectedAwaits();
                    }
                    var rv = newScope(querier, ctx);
                    if (scopeFuncIsAsync) {
                        rv = rv.finally(decrementExpectedAwaits);
                    }
                    return rv;
                }
                finally {
                    wasRootExec && endMicroTickScope();
                }
            }
            var closed = false;
            var abortController;
            var accumMuts = {};
            var currentObs = {};
            var subscription = {
                get closed() {
                    return closed;
                },
                unsubscribe: function () {
                    if (closed)
                        return;
                    closed = true;
                    if (abortController)
                        abortController.abort();
                    if (startedListening)
                        globalEvents.storagemutated.unsubscribe(mutationListener);
                },
            };
            observer.start && observer.start(subscription);
            var startedListening = false;
            var doQuery = function () { return execInGlobalContext(_doQuery); };
            function shouldNotify() {
                return obsSetsOverlap(currentObs, accumMuts);
            }
            var mutationListener = function (parts) {
                extendObservabilitySet(accumMuts, parts);
                if (shouldNotify()) {
                    doQuery();
                }
            };
            var _doQuery = function () {
                if (closed ||
                    !domDeps.indexedDB)
                 {
                    return;
                }
                accumMuts = {};
                var subscr = {};
                if (abortController)
                    abortController.abort();
                abortController = new AbortController();
                var ctx = {
                    subscr: subscr,
                    signal: abortController.signal,
                    requery: doQuery,
                    querier: querier,
                    trans: null
                };
                var ret = execute(ctx);
                Promise.resolve(ret).then(function (result) {
                    hasValue = true;
                    currentValue = result;
                    if (closed || ctx.signal.aborted) {
                        return;
                    }
                    accumMuts = {};
                    currentObs = subscr;
                    if (!objectIsEmpty(currentObs) && !startedListening) {
                        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);
                        startedListening = true;
                    }
                    execInGlobalContext(function () { return !closed && observer.next && observer.next(result); });
                }, function (err) {
                    hasValue = false;
                    if (!['DatabaseClosedError', 'AbortError'].includes(err === null || err === void 0 ? void 0 : err.name)) {
                        if (!closed)
                            execInGlobalContext(function () {
                                if (closed)
                                    return;
                                observer.error && observer.error(err);
                            });
                    }
                });
            };
            setTimeout(doQuery, 0);
            return subscription;
        });
        observable.hasValue = function () { return hasValue; };
        observable.getValue = function () { return currentValue; };
        return observable;
    }

    var Dexie = Dexie$1;
    props(Dexie, __assign(__assign({}, fullNameExceptions), {
        delete: function (databaseName) {
            var db = new Dexie(databaseName, { addons: [] });
            return db.delete();
        },
        exists: function (name) {
            return new Dexie(name, { addons: [] }).open().then(function (db) {
                db.close();
                return true;
            }).catch('NoSuchDatabaseError', function () { return false; });
        },
        getDatabaseNames: function (cb) {
            try {
                return getDatabaseNames(Dexie.dependencies).then(cb);
            }
            catch (_a) {
                return rejection(new exceptions.MissingAPI());
            }
        },
        defineClass: function () {
            function Class(content) {
                extend(this, content);
            }
            return Class;
        }, ignoreTransaction: function (scopeFunc) {
            return PSD.trans ?
                usePSD(PSD.transless, scopeFunc) :
                scopeFunc();
        }, vip: vip, async: function (generatorFn) {
            return function () {
                try {
                    var rv = awaitIterator(generatorFn.apply(this, arguments));
                    if (!rv || typeof rv.then !== 'function')
                        return DexiePromise.resolve(rv);
                    return rv;
                }
                catch (e) {
                    return rejection(e);
                }
            };
        }, spawn: function (generatorFn, args, thiz) {
            try {
                var rv = awaitIterator(generatorFn.apply(thiz, args || []));
                if (!rv || typeof rv.then !== 'function')
                    return DexiePromise.resolve(rv);
                return rv;
            }
            catch (e) {
                return rejection(e);
            }
        },
        currentTransaction: {
            get: function () { return PSD.trans || null; }
        }, waitFor: function (promiseOrFunction, optionalTimeout) {
            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?
                Dexie.ignoreTransaction(promiseOrFunction) :
                promiseOrFunction)
                .timeout(optionalTimeout || 60000);
            return PSD.trans ?
                PSD.trans.waitFor(promise) :
                promise;
        },
        Promise: DexiePromise,
        debug: {
            get: function () { return debug; },
            set: function (value) {
                setDebug(value);
            }
        },
        derive: derive, extend: extend, props: props, override: override,
        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,
        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,
        minKey: minKey,
        addons: [],
        connections: connections,
        errnames: errnames,
        dependencies: domDeps, cache: cache,
        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')
            .map(function (n) { return parseInt(n); })
            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));
    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);

    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {
        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {
            if (!propagatingLocally) {
                var event_1;
                event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {
                    detail: updatedParts
                });
                propagatingLocally = true;
                dispatchEvent(event_1);
                propagatingLocally = false;
            }
        });
        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {
            var detail = _a.detail;
            if (!propagatingLocally) {
                propagateLocally(detail);
            }
        });
    }
    function propagateLocally(updateParts) {
        var wasMe = propagatingLocally;
        try {
            propagatingLocally = true;
            globalEvents.storagemutated.fire(updateParts);
            signalSubscribersNow(updateParts, true);
        }
        finally {
            propagatingLocally = wasMe;
        }
    }
    var propagatingLocally = false;

    var bc;
    var createBC = function () { };
    if (typeof BroadcastChannel !== 'undefined') {
        createBC = function () {
            bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);
            bc.onmessage = function (ev) { return ev.data && propagateLocally(ev.data); };
        };
        createBC();
        if (typeof bc.unref === 'function') {
            bc.unref();
        }
        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {
            if (!propagatingLocally) {
                bc.postMessage(changedParts);
            }
        });
    }

    if (typeof addEventListener !== 'undefined') {
        addEventListener('pagehide', function (event) {
            if (!Dexie$1.disableBfCache && event.persisted) {
                if (debug)
                    console.debug('Dexie: handling persisted pagehide');
                bc === null || bc === void 0 ? void 0 : bc.close();
                for (var _i = 0, connections_1 = connections; _i < connections_1.length; _i++) {
                    var db = connections_1[_i];
                    db.close({ disableAutoOpen: false });
                }
            }
        });
        addEventListener('pageshow', function (event) {
            if (!Dexie$1.disableBfCache && event.persisted) {
                if (debug)
                    console.debug('Dexie: handling persisted pageshow');
                createBC();
                propagateLocally({ all: new RangeSet(-Infinity, [[]]) });
            }
        });
    }

    function add(value) {
        return new PropModification({ add: value });
    }

    function remove(value) {
        return new PropModification({ remove: value });
    }

    function replacePrefix(a, b) {
        return new PropModification({ replacePrefix: [a, b] });
    }

    DexiePromise.rejectionMapper = mapError;
    setDebug(debug);

    var namedExports = /*#__PURE__*/Object.freeze({
        __proto__: null,
        Dexie: Dexie$1,
        liveQuery: liveQuery,
        Entity: Entity,
        cmp: cmp,
        PropModification: PropModification,
        replacePrefix: replacePrefix,
        add: add,
        remove: remove,
        'default': Dexie$1,
        RangeSet: RangeSet,
        mergeRanges: mergeRanges,
        rangesOverlap: rangesOverlap
    });

    __assign(Dexie$1, namedExports, { default: Dexie$1 });

    return Dexie$1;

}));
//# sourceMappingURL=dexie.js.map


/***/ }),

/***/ "../../node_modules/dexie/import-wrapper.mjs":
/*!***************************************************!*\
  !*** ../../node_modules/dexie/import-wrapper.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dexie: () => (/* binding */ Dexie),
/* harmony export */   DexieYProvider: () => (/* binding */ DexieYProvider),
/* harmony export */   Entity: () => (/* binding */ Entity),
/* harmony export */   PropModification: () => (/* binding */ PropModification),
/* harmony export */   RangeSet: () => (/* binding */ RangeSet),
/* harmony export */   add: () => (/* binding */ add),
/* harmony export */   cmp: () => (/* binding */ cmp),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   liveQuery: () => (/* binding */ liveQuery),
/* harmony export */   mergeRanges: () => (/* binding */ mergeRanges),
/* harmony export */   rangesOverlap: () => (/* binding */ rangesOverlap),
/* harmony export */   remove: () => (/* binding */ remove),
/* harmony export */   replacePrefix: () => (/* binding */ replacePrefix)
/* harmony export */ });
/* harmony import */ var _dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/dexie.js */ "../../node_modules/dexie/dist/dexie.js");
// Making the module version consumable via require - to prohibit
// multiple occurrancies of the same module in the same app
// (dual package hazard, https://nodejs.org/api/packages.html#dual-package-hazard)

const DexieSymbol = Symbol.for("Dexie");
const Dexie = globalThis[DexieSymbol] || (globalThis[DexieSymbol] = _dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__);
if (_dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__.semVer !== Dexie.semVer) {
    throw new Error(`Two different versions of Dexie loaded in the same app: ${_dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__.semVer} and ${Dexie.semVer}`);
}
const { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Entity,
    PropModification, replacePrefix, add, remove,
    DexieYProvider } = Dexie;

    
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dexie);


/***/ }),

/***/ "../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js":
/*!***********************************************************************************!*\
  !*** ../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var void_elements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! void-elements */ "../../node_modules/void-elements/index.js");
/* harmony import */ var void_elements__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(void_elements__WEBPACK_IMPORTED_MODULE_0__);
var t=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(n){var r={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},i=n.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(r.name=i[1],((void_elements__WEBPACK_IMPORTED_MODULE_0___default())[i[1]]||"/"===n.charAt(n.length-2))&&(r.voidElement=!0),r.name.startsWith("!--"))){var s=n.indexOf("--\x3e");return{type:"comment",comment:-1!==s?n.slice(4,s):""}}for(var a=new RegExp(t),c=null;null!==(c=a.exec(n));)if(c[0].trim())if(c[1]){var o=c[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),r.attrs[l[0]]=l[1],a.lastIndex--}else c[2]&&(r.attrs[c[2]]=c[3].trim().substring(1,c[3].length-1));return r}var r=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,i=/^\s*$/,s=Object.create(null);function a(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(a,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var c={parse:function(e,t){t||(t={}),t.components||(t.components=s);var a,c=[],o=[],l=-1,m=!1;if(0!==e.indexOf("<")){var u=e.indexOf("<");c.push({type:"text",content:-1===u?e:e.substring(0,u)})}return e.replace(r,function(r,s){if(m){if(r!=="</"+a.name+">")return;m=!1}var u,f="/"!==r.charAt(1),h=r.startsWith("\x3c!--"),p=s+r.length,d=e.charAt(p);if(h){var v=n(r);return l<0?(c.push(v),c):((u=o[l]).children.push(v),c)}if(f&&(l++,"tag"===(a=n(r)).type&&t.components[a.name]&&(a.type="component",m=!0),a.voidElement||m||!d||"<"===d||a.children.push({type:"text",content:e.slice(p,e.indexOf("<",p))}),0===l&&c.push(a),(u=o[l-1])&&u.children.push(a),o[l]=a),(!f||a.voidElement)&&(l>-1&&(a.voidElement||a.name===r.slice(2,-1))&&(l--,a=-1===l?c:o[l]),!m&&"<"!==d&&d)){u=-1===l?c:o[l].children;var x=e.indexOf("<",p),g=e.slice(p,-1===x?void 0:x);i.test(g)&&(g=" "),(x>-1&&l+u.length>=0||" "!==g)&&u.push({type:"text",content:g})}}),c},stringify:function(e){return e.reduce(function(e,t){return e+a("",t)},"")}};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (c);
//# sourceMappingURL=html-parse-stringify.module.js.map


/***/ }),

/***/ "../../node_modules/i18next/dist/cjs/i18next.js":
/*!******************************************************!*\
  !*** ../../node_modules/i18next/dist/cjs/i18next.js ***!
  \******************************************************/
/***/ ((module) => {

"use strict";


const isString = obj => typeof obj === 'string';
const defer = () => {
  let res;
  let rej;
  const promise = new Promise((resolve, reject) => {
    res = resolve;
    rej = reject;
  });
  promise.resolve = res;
  promise.reject = rej;
  return promise;
};
const makeString = object => {
  if (object == null) return '';
  return '' + object;
};
const copy = (a, s, t) => {
  a.forEach(m => {
    if (s[m]) t[m] = s[m];
  });
};
const lastOfPathSeparatorRegExp = /###/g;
const cleanKey = key => key && key.indexOf('###') > -1 ? key.replace(lastOfPathSeparatorRegExp, '.') : key;
const canNotTraverseDeeper = object => !object || isString(object);
const getLastOfPath = (object, path, Empty) => {
  const stack = !isString(path) ? path : path.split('.');
  let stackIndex = 0;
  while (stackIndex < stack.length - 1) {
    if (canNotTraverseDeeper(object)) return {};
    const key = cleanKey(stack[stackIndex]);
    if (!object[key] && Empty) object[key] = new Empty();
    if (Object.prototype.hasOwnProperty.call(object, key)) {
      object = object[key];
    } else {
      object = {};
    }
    ++stackIndex;
  }
  if (canNotTraverseDeeper(object)) return {};
  return {
    obj: object,
    k: cleanKey(stack[stackIndex])
  };
};
const setPath = (object, path, newValue) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  if (obj !== undefined || path.length === 1) {
    obj[k] = newValue;
    return;
  }
  let e = path[path.length - 1];
  let p = path.slice(0, path.length - 1);
  let last = getLastOfPath(object, p, Object);
  while (last.obj === undefined && p.length) {
    e = `${p[p.length - 1]}.${e}`;
    p = p.slice(0, p.length - 1);
    last = getLastOfPath(object, p, Object);
    if (last && last.obj && typeof last.obj[`${last.k}.${e}`] !== 'undefined') {
      last.obj = undefined;
    }
  }
  last.obj[`${last.k}.${e}`] = newValue;
};
const pushPath = (object, path, newValue, concat) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  obj[k] = obj[k] || [];
  obj[k].push(newValue);
};
const getPath = (object, path) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path);
  if (!obj) return undefined;
  return obj[k];
};
const getPathWithDefaults = (data, defaultData, key) => {
  const value = getPath(data, key);
  if (value !== undefined) {
    return value;
  }
  return getPath(defaultData, key);
};
const deepExtend = (target, source, overwrite) => {
  for (const prop in source) {
    if (prop !== '__proto__' && prop !== 'constructor') {
      if (prop in target) {
        if (isString(target[prop]) || target[prop] instanceof String || isString(source[prop]) || source[prop] instanceof String) {
          if (overwrite) target[prop] = source[prop];
        } else {
          deepExtend(target[prop], source[prop], overwrite);
        }
      } else {
        target[prop] = source[prop];
      }
    }
  }
  return target;
};
const regexEscape = str => str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
var _entityMap = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;',
  '/': '&#x2F;'
};
const escape = data => {
  if (isString(data)) {
    return data.replace(/[&<>"'\/]/g, s => _entityMap[s]);
  }
  return data;
};
class RegExpCache {
  constructor(capacity) {
    this.capacity = capacity;
    this.regExpMap = new Map();
    this.regExpQueue = [];
  }
  getRegExp(pattern) {
    const regExpFromCache = this.regExpMap.get(pattern);
    if (regExpFromCache !== undefined) {
      return regExpFromCache;
    }
    const regExpNew = new RegExp(pattern);
    if (this.regExpQueue.length === this.capacity) {
      this.regExpMap.delete(this.regExpQueue.shift());
    }
    this.regExpMap.set(pattern, regExpNew);
    this.regExpQueue.push(pattern);
    return regExpNew;
  }
}
const chars = [' ', ',', '?', '!', ';'];
const looksLikeObjectPathRegExpCache = new RegExpCache(20);
const looksLikeObjectPath = (key, nsSeparator, keySeparator) => {
  nsSeparator = nsSeparator || '';
  keySeparator = keySeparator || '';
  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);
  if (possibleChars.length === 0) return true;
  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map(c => c === '?' ? '\\?' : c).join('|')})`);
  let matched = !r.test(key);
  if (!matched) {
    const ki = key.indexOf(keySeparator);
    if (ki > 0 && !r.test(key.substring(0, ki))) {
      matched = true;
    }
  }
  return matched;
};
const deepFind = function (obj, path) {
  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';
  if (!obj) return undefined;
  if (obj[path]) return obj[path];
  const tokens = path.split(keySeparator);
  let current = obj;
  for (let i = 0; i < tokens.length;) {
    if (!current || typeof current !== 'object') {
      return undefined;
    }
    let next;
    let nextPath = '';
    for (let j = i; j < tokens.length; ++j) {
      if (j !== i) {
        nextPath += keySeparator;
      }
      nextPath += tokens[j];
      next = current[nextPath];
      if (next !== undefined) {
        if (['string', 'number', 'boolean'].indexOf(typeof next) > -1 && j < tokens.length - 1) {
          continue;
        }
        i += j - i + 1;
        break;
      }
    }
    current = next;
  }
  return current;
};
const getCleanedCode = code => code && code.replace('_', '-');

const consoleLogger = {
  type: 'logger',
  log(args) {
    this.output('log', args);
  },
  warn(args) {
    this.output('warn', args);
  },
  error(args) {
    this.output('error', args);
  },
  output(type, args) {
    if (console && console[type]) console[type].apply(console, args);
  }
};
class Logger {
  constructor(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.init(concreteLogger, options);
  }
  init(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.prefix = options.prefix || 'i18next:';
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  }
  log() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return this.forward(args, 'log', '', true);
  }
  warn() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    return this.forward(args, 'warn', '', true);
  }
  error() {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    return this.forward(args, 'error', '');
  }
  deprecate() {
    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }
    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);
  }
  forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return null;
    if (isString(args[0])) args[0] = `${prefix}${this.prefix} ${args[0]}`;
    return this.logger[lvl](args);
  }
  create(moduleName) {
    return new Logger(this.logger, {
      ...{
        prefix: `${this.prefix}:${moduleName}:`
      },
      ...this.options
    });
  }
  clone(options) {
    options = options || this.options;
    options.prefix = options.prefix || this.prefix;
    return new Logger(this.logger, options);
  }
}
var baseLogger = new Logger();

class EventEmitter {
  constructor() {
    this.observers = {};
  }
  on(events, listener) {
    events.split(' ').forEach(event => {
      if (!this.observers[event]) this.observers[event] = new Map();
      const numListeners = this.observers[event].get(listener) || 0;
      this.observers[event].set(listener, numListeners + 1);
    });
    return this;
  }
  off(event, listener) {
    if (!this.observers[event]) return;
    if (!listener) {
      delete this.observers[event];
      return;
    }
    this.observers[event].delete(listener);
  }
  emit(event) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    if (this.observers[event]) {
      const cloned = Array.from(this.observers[event].entries());
      cloned.forEach(_ref => {
        let [observer, numTimesAdded] = _ref;
        for (let i = 0; i < numTimesAdded; i++) {
          observer(...args);
        }
      });
    }
    if (this.observers['*']) {
      const cloned = Array.from(this.observers['*'].entries());
      cloned.forEach(_ref2 => {
        let [observer, numTimesAdded] = _ref2;
        for (let i = 0; i < numTimesAdded; i++) {
          observer.apply(observer, [event, ...args]);
        }
      });
    }
  }
}

class ResourceStore extends EventEmitter {
  constructor(data) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      ns: ['translation'],
      defaultNS: 'translation'
    };
    super();
    this.data = data || {};
    this.options = options;
    if (this.options.keySeparator === undefined) {
      this.options.keySeparator = '.';
    }
    if (this.options.ignoreJSONStructure === undefined) {
      this.options.ignoreJSONStructure = true;
    }
  }
  addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  }
  removeNamespaces(ns) {
    const index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  }
  getResource(lng, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;
    let path;
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
    } else {
      path = [lng, ns];
      if (key) {
        if (Array.isArray(key)) {
          path.push(...key);
        } else if (isString(key) && keySeparator) {
          path.push(...key.split(keySeparator));
        } else {
          path.push(key);
        }
      }
    }
    const result = getPath(this.data, path);
    if (!result && !ns && !key && lng.indexOf('.') > -1) {
      lng = path[0];
      ns = path[1];
      key = path.slice(2).join('.');
    }
    if (result || !ignoreJSONStructure || !isString(key)) return result;
    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);
  }
  addResource(lng, ns, key, value) {
    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {
      silent: false
    };
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    let path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      value = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    setPath(this.data, path, value);
    if (!options.silent) this.emit('added', lng, ns, key, value);
  }
  addResources(lng, ns, resources) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {
      silent: false
    };
    for (const m in resources) {
      if (isString(resources[m]) || Array.isArray(resources[m])) this.addResource(lng, ns, m, resources[m], {
        silent: true
      });
    }
    if (!options.silent) this.emit('added', lng, ns, resources);
  }
  addResourceBundle(lng, ns, resources, deep, overwrite) {
    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {
      silent: false,
      skipCopy: false
    };
    let path = [lng, ns];
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      deep = resources;
      resources = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    let pack = getPath(this.data, path) || {};
    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources));
    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = {
        ...pack,
        ...resources
      };
    }
    setPath(this.data, path, pack);
    if (!options.silent) this.emit('added', lng, ns, resources);
  }
  removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);
    this.emit('removed', lng, ns);
  }
  hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== undefined;
  }
  getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;
    if (this.options.compatibilityAPI === 'v1') return {
      ...{},
      ...this.getResource(lng, ns)
    };
    return this.getResource(lng, ns);
  }
  getDataByLanguage(lng) {
    return this.data[lng];
  }
  hasLanguageSomeTranslations(lng) {
    const data = this.getDataByLanguage(lng);
    const n = data && Object.keys(data) || [];
    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);
  }
  toJSON() {
    return this.data;
  }
}

var postProcessor = {
  processors: {},
  addPostProcessor(module) {
    this.processors[module.name] = module;
  },
  handle(processors, value, key, options, translator) {
    processors.forEach(processor => {
      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);
    });
    return value;
  }
};

const checkedLoadedFor = {};
class Translator extends EventEmitter {
  constructor(services) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    super();
    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);
    this.options = options;
    if (this.options.keySeparator === undefined) {
      this.options.keySeparator = '.';
    }
    this.logger = baseLogger.create('translator');
  }
  changeLanguage(lng) {
    if (lng) this.language = lng;
  }
  exists(key) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      interpolation: {}
    };
    if (key === undefined || key === null) {
      return false;
    }
    const resolved = this.resolve(key, options);
    return resolved && resolved.res !== undefined;
  }
  extractFromKey(key, options) {
    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;
    if (nsSeparator === undefined) nsSeparator = ':';
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    let namespaces = options.ns || this.options.defaultNS || [];
    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;
    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);
    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {
      const m = key.match(this.interpolator.nestingRegexp);
      if (m && m.length > 0) {
        return {
          key,
          namespaces: isString(namespaces) ? [namespaces] : namespaces
        };
      }
      const parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    return {
      key,
      namespaces: isString(namespaces) ? [namespaces] : namespaces
    };
  }
  translate(keys, options, lastKey) {
    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {
      options = this.options.overloadTranslationOptionHandler(arguments);
    }
    if (typeof options === 'object') options = {
      ...options
    };
    if (!options) options = {};
    if (keys === undefined || keys === null) return '';
    if (!Array.isArray(keys)) keys = [String(keys)];
    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    const {
      key,
      namespaces
    } = this.extractFromKey(keys[keys.length - 1], options);
    const namespace = namespaces[namespaces.length - 1];
    const lng = options.lng || this.language;
    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === 'cimode') {
      if (appendNamespaceToCIMode) {
        const nsSeparator = options.nsSeparator || this.options.nsSeparator;
        if (returnDetails) {
          return {
            res: `${namespace}${nsSeparator}${key}`,
            usedKey: key,
            exactUsedKey: key,
            usedLng: lng,
            usedNS: namespace,
            usedParams: this.getUsedParamsDetails(options)
          };
        }
        return `${namespace}${nsSeparator}${key}`;
      }
      if (returnDetails) {
        return {
          res: key,
          usedKey: key,
          exactUsedKey: key,
          usedLng: lng,
          usedNS: namespace,
          usedParams: this.getUsedParamsDetails(options)
        };
      }
      return key;
    }
    const resolved = this.resolve(keys, options);
    let res = resolved && resolved.res;
    const resUsedKey = resolved && resolved.usedKey || key;
    const resExactUsedKey = resolved && resolved.exactUsedKey || key;
    const resType = Object.prototype.toString.apply(res);
    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];
    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;
    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;
    const handleAsObject = !isString(res) && typeof res !== 'boolean' && typeof res !== 'number';
    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(isString(joinArrays) && Array.isArray(res))) {
      if (!options.returnObjects && !this.options.returnObjects) {
        if (!this.options.returnedObjectHandler) {
          this.logger.warn('accessing an object - but returnObjects options is not enabled!');
        }
        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {
          ...options,
          ns: namespaces
        }) : `key '${key} (${this.language})' returned an object instead of string.`;
        if (returnDetails) {
          resolved.res = r;
          resolved.usedParams = this.getUsedParamsDetails(options);
          return resolved;
        }
        return r;
      }
      if (keySeparator) {
        const resTypeIsArray = Array.isArray(res);
        const copy = resTypeIsArray ? [] : {};
        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;
        for (const m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            const deepKey = `${newKeyToUse}${keySeparator}${m}`;
            copy[m] = this.translate(deepKey, {
              ...options,
              ...{
                joinArrays: false,
                ns: namespaces
              }
            });
            if (copy[m] === deepKey) copy[m] = res[m];
          }
        }
        res = copy;
      }
    } else if (handleAsObjectInI18nFormat && isString(joinArrays) && Array.isArray(res)) {
      res = res.join(joinArrays);
      if (res) res = this.extendTranslation(res, keys, options, lastKey);
    } else {
      let usedDefault = false;
      let usedKey = false;
      const needsPluralHandling = options.count !== undefined && !isString(options.count);
      const hasDefaultValue = Translator.hasDefaultValue(options);
      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';
      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {
        ordinal: false
      }) : '';
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;
      if (!this.isValidLookup(res) && hasDefaultValue) {
        usedDefault = true;
        res = defaultValue;
      }
      if (!this.isValidLookup(res)) {
        usedKey = true;
        res = key;
      }
      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;
      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;
      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;
      if (usedKey || usedDefault || updateMissing) {
        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);
        if (keySeparator) {
          const fk = this.resolve(key, {
            ...options,
            keySeparator: false
          });
          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');
        }
        let lngs = [];
        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {
          for (let i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === 'all') {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }
        const send = (l, k, specificDefaultValue) => {
          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;
          if (this.options.missingKeyHandler) {
            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);
          } else if (this.backendConnector && this.backendConnector.saveMissing) {
            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);
          }
          this.emit('missingKey', l, namespace, k, res);
        };
        if (this.options.saveMissing) {
          if (this.options.saveMissingPlurals && needsPluralHandling) {
            lngs.forEach(language => {
              const suffixes = this.pluralResolver.getSuffixes(language, options);
              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {
                suffixes.push(`${this.options.pluralSeparator}zero`);
              }
              suffixes.forEach(suffix => {
                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);
              });
            });
          } else {
            send(lngs, key, defaultValue);
          }
        }
      }
      res = this.extendTranslation(res, keys, options, resolved, lastKey);
      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;
      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {
        if (this.options.compatibilityAPI !== 'v1') {
          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);
        } else {
          res = this.options.parseMissingKeyHandler(res);
        }
      }
    }
    if (returnDetails) {
      resolved.res = res;
      resolved.usedParams = this.getUsedParamsDetails(options);
      return resolved;
    }
    return res;
  }
  extendTranslation(res, key, options, resolved, lastKey) {
    var _this = this;
    if (this.i18nFormat && this.i18nFormat.parse) {
      res = this.i18nFormat.parse(res, {
        ...this.options.interpolation.defaultVariables,
        ...options
      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {
        resolved
      });
    } else if (!options.skipInterpolation) {
      if (options.interpolation) this.interpolator.init({
        ...options,
        ...{
          interpolation: {
            ...this.options.interpolation,
            ...options.interpolation
          }
        }
      });
      const skipOnVariables = isString(res) && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);
      let nestBef;
      if (skipOnVariables) {
        const nb = res.match(this.interpolator.nestingRegexp);
        nestBef = nb && nb.length;
      }
      let data = options.replace && !isString(options.replace) ? options.replace : options;
      if (this.options.interpolation.defaultVariables) data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);
      if (skipOnVariables) {
        const na = res.match(this.interpolator.nestingRegexp);
        const nestAft = na && na.length;
        if (nestBef < nestAft) options.nest = false;
      }
      if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = this.language || resolved.usedLng;
      if (options.nest !== false) res = this.interpolator.nest(res, function () {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        if (lastKey && lastKey[0] === args[0] && !options.context) {
          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);
          return null;
        }
        return _this.translate(...args, key);
      }, options);
      if (options.interpolation) this.interpolator.reset();
    }
    const postProcess = options.postProcess || this.options.postProcess;
    const postProcessorNames = isString(postProcess) ? [postProcess] : postProcess;
    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {
        i18nResolved: {
          ...resolved,
          usedParams: this.getUsedParamsDetails(options)
        },
        ...options
      } : options, this);
    }
    return res;
  }
  resolve(keys) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    let found;
    let usedKey;
    let exactUsedKey;
    let usedLng;
    let usedNS;
    if (isString(keys)) keys = [keys];
    keys.forEach(k => {
      if (this.isValidLookup(found)) return;
      const extracted = this.extractFromKey(k, options);
      const key = extracted.key;
      usedKey = key;
      let namespaces = extracted.namespaces;
      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);
      const needsPluralHandling = options.count !== undefined && !isString(options.count);
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const needsContextHandling = options.context !== undefined && (isString(options.context) || typeof options.context === 'number') && options.context !== '';
      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);
      namespaces.forEach(ns => {
        if (this.isValidLookup(found)) return;
        usedNS = ns;
        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {
          checkedLoadedFor[`${codes[0]}-${ns}`] = true;
          this.logger.warn(`key "${usedKey}" for languages "${codes.join(', ')}" won't get resolved as namespace "${usedNS}" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');
        }
        codes.forEach(code => {
          if (this.isValidLookup(found)) return;
          usedLng = code;
          const finalKeys = [key];
          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {
            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);
          } else {
            let pluralSuffix;
            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);
            const zeroSuffix = `${this.options.pluralSeparator}zero`;
            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;
            if (needsPluralHandling) {
              finalKeys.push(key + pluralSuffix);
              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
              }
              if (needsZeroSuffixLookup) {
                finalKeys.push(key + zeroSuffix);
              }
            }
            if (needsContextHandling) {
              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;
              finalKeys.push(contextKey);
              if (needsPluralHandling) {
                finalKeys.push(contextKey + pluralSuffix);
                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
                }
                if (needsZeroSuffixLookup) {
                  finalKeys.push(contextKey + zeroSuffix);
                }
              }
            }
          }
          let possibleKey;
          while (possibleKey = finalKeys.pop()) {
            if (!this.isValidLookup(found)) {
              exactUsedKey = possibleKey;
              found = this.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });
    return {
      res: found,
      usedKey,
      exactUsedKey,
      usedLng,
      usedNS
    };
  }
  isValidLookup(res) {
    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');
  }
  getResource(code, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);
    return this.resourceStore.getResource(code, ns, key, options);
  }
  getUsedParamsDetails() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    const optionsKeys = ['defaultValue', 'ordinal', 'context', 'replace', 'lng', 'lngs', 'fallbackLng', 'ns', 'keySeparator', 'nsSeparator', 'returnObjects', 'returnDetails', 'joinArrays', 'postProcess', 'interpolation'];
    const useOptionsReplaceForData = options.replace && !isString(options.replace);
    let data = useOptionsReplaceForData ? options.replace : options;
    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {
      data.count = options.count;
    }
    if (this.options.interpolation.defaultVariables) {
      data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
    }
    if (!useOptionsReplaceForData) {
      data = {
        ...data
      };
      for (const key of optionsKeys) {
        delete data[key];
      }
    }
    return data;
  }
  static hasDefaultValue(options) {
    const prefix = 'defaultValue';
    for (const option in options) {
      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {
        return true;
      }
    }
    return false;
  }
}

const capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);
class LanguageUtil {
  constructor(options) {
    this.options = options;
    this.supportedLngs = this.options.supportedLngs || false;
    this.logger = baseLogger.create('languageUtils');
  }
  getScriptPartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf('-') < 0) return null;
    const p = code.split('-');
    if (p.length === 2) return null;
    p.pop();
    if (p[p.length - 1].toLowerCase() === 'x') return null;
    return this.formatLanguageCode(p.join('-'));
  }
  getLanguagePartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf('-') < 0) return code;
    const p = code.split('-');
    return this.formatLanguageCode(p[0]);
  }
  formatLanguageCode(code) {
    if (isString(code) && code.indexOf('-') > -1) {
      if (typeof Intl !== 'undefined' && typeof Intl.getCanonicalLocales !== 'undefined') {
        try {
          let formattedCode = Intl.getCanonicalLocales(code)[0];
          if (formattedCode && this.options.lowerCaseLng) {
            formattedCode = formattedCode.toLowerCase();
          }
          if (formattedCode) return formattedCode;
        } catch (e) {}
      }
      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];
      let p = code.split('-');
      if (this.options.lowerCaseLng) {
        p = p.map(part => part.toLowerCase());
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }
      return p.join('-');
    }
    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  }
  isSupportedCode(code) {
    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;
  }
  getBestMatchFromCodes(codes) {
    if (!codes) return null;
    let found;
    codes.forEach(code => {
      if (found) return;
      const cleanedLng = this.formatLanguageCode(code);
      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;
    });
    if (!found && this.options.supportedLngs) {
      codes.forEach(code => {
        if (found) return;
        const lngOnly = this.getLanguagePartFromCode(code);
        if (this.isSupportedCode(lngOnly)) return found = lngOnly;
        found = this.options.supportedLngs.find(supportedLng => {
          if (supportedLng === lngOnly) return supportedLng;
          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;
          if (supportedLng.indexOf('-') > 0 && lngOnly.indexOf('-') < 0 && supportedLng.substring(0, supportedLng.indexOf('-')) === lngOnly) return supportedLng;
          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;
        });
      });
    }
    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];
    return found;
  }
  getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);
    if (isString(fallbacks)) fallbacks = [fallbacks];
    if (Array.isArray(fallbacks)) return fallbacks;
    if (!code) return fallbacks.default || [];
    let found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];
    if (!found) found = fallbacks.default;
    return found || [];
  }
  toResolveHierarchy(code, fallbackCode) {
    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);
    const codes = [];
    const addCode = c => {
      if (!c) return;
      if (this.isSupportedCode(c)) {
        codes.push(c);
      } else {
        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);
      }
    };
    if (isString(code) && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {
      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));
      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));
    } else if (isString(code)) {
      addCode(this.formatLanguageCode(code));
    }
    fallbackCodes.forEach(fc => {
      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));
    });
    return codes;
  }
}

let sets = [{
  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],
  nr: [1, 2],
  fc: 1
}, {
  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],
  nr: [1, 2],
  fc: 2
}, {
  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],
  nr: [1],
  fc: 3
}, {
  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],
  nr: [1, 2, 5],
  fc: 4
}, {
  lngs: ['ar'],
  nr: [0, 1, 2, 3, 11, 100],
  fc: 5
}, {
  lngs: ['cs', 'sk'],
  nr: [1, 2, 5],
  fc: 6
}, {
  lngs: ['csb', 'pl'],
  nr: [1, 2, 5],
  fc: 7
}, {
  lngs: ['cy'],
  nr: [1, 2, 3, 8],
  fc: 8
}, {
  lngs: ['fr'],
  nr: [1, 2],
  fc: 9
}, {
  lngs: ['ga'],
  nr: [1, 2, 3, 7, 11],
  fc: 10
}, {
  lngs: ['gd'],
  nr: [1, 2, 3, 20],
  fc: 11
}, {
  lngs: ['is'],
  nr: [1, 2],
  fc: 12
}, {
  lngs: ['jv'],
  nr: [0, 1],
  fc: 13
}, {
  lngs: ['kw'],
  nr: [1, 2, 3, 4],
  fc: 14
}, {
  lngs: ['lt'],
  nr: [1, 2, 10],
  fc: 15
}, {
  lngs: ['lv'],
  nr: [1, 2, 0],
  fc: 16
}, {
  lngs: ['mk'],
  nr: [1, 2],
  fc: 17
}, {
  lngs: ['mnk'],
  nr: [0, 1, 2],
  fc: 18
}, {
  lngs: ['mt'],
  nr: [1, 2, 11, 20],
  fc: 19
}, {
  lngs: ['or'],
  nr: [2, 1],
  fc: 2
}, {
  lngs: ['ro'],
  nr: [1, 2, 20],
  fc: 20
}, {
  lngs: ['sl'],
  nr: [5, 1, 2, 3],
  fc: 21
}, {
  lngs: ['he', 'iw'],
  nr: [1, 2, 20, 21],
  fc: 22
}];
let _rulesPluralsTypes = {
  1: n => Number(n > 1),
  2: n => Number(n != 1),
  3: n => 0,
  4: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  5: n => Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5),
  6: n => Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2),
  7: n => Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  8: n => Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3),
  9: n => Number(n >= 2),
  10: n => Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4),
  11: n => Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3),
  12: n => Number(n % 10 != 1 || n % 100 == 11),
  13: n => Number(n !== 0),
  14: n => Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3),
  15: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  16: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2),
  17: n => Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1),
  18: n => Number(n == 0 ? 0 : n == 1 ? 1 : 2),
  19: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3),
  20: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2),
  21: n => Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0),
  22: n => Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3)
};
const nonIntlVersions = ['v1', 'v2', 'v3'];
const intlVersions = ['v4'];
const suffixesOrder = {
  zero: 0,
  one: 1,
  two: 2,
  few: 3,
  many: 4,
  other: 5
};
const createRules = () => {
  const rules = {};
  sets.forEach(set => {
    set.lngs.forEach(l => {
      rules[l] = {
        numbers: set.nr,
        plurals: _rulesPluralsTypes[set.fc]
      };
    });
  });
  return rules;
};
class PluralResolver {
  constructor(languageUtils) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.languageUtils = languageUtils;
    this.options = options;
    this.logger = baseLogger.create('pluralResolver');
    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === 'undefined' || !Intl.PluralRules)) {
      this.options.compatibilityJSON = 'v3';
      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');
    }
    this.rules = createRules();
    this.pluralRulesCache = {};
  }
  addRule(lng, obj) {
    this.rules[lng] = obj;
  }
  clearCache() {
    this.pluralRulesCache = {};
  }
  getRule(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (this.shouldUseIntlApi()) {
      const cleanedCode = getCleanedCode(code === 'dev' ? 'en' : code);
      const type = options.ordinal ? 'ordinal' : 'cardinal';
      const cacheKey = JSON.stringify({
        cleanedCode,
        type
      });
      if (cacheKey in this.pluralRulesCache) {
        return this.pluralRulesCache[cacheKey];
      }
      let rule;
      try {
        rule = new Intl.PluralRules(cleanedCode, {
          type
        });
      } catch (err) {
        if (!code.match(/-|_/)) return;
        const lngPart = this.languageUtils.getLanguagePartFromCode(code);
        rule = this.getRule(lngPart, options);
      }
      this.pluralRulesCache[cacheKey] = rule;
      return rule;
    }
    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  }
  needsPlural(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (this.shouldUseIntlApi()) {
      return rule && rule.resolvedOptions().pluralCategories.length > 1;
    }
    return rule && rule.numbers.length > 1;
  }
  getPluralFormsOfKey(code, key) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);
  }
  getSuffixes(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (!rule) {
      return [];
    }
    if (this.shouldUseIntlApi()) {
      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);
    }
    return rule.numbers.map(number => this.getSuffix(code, number, options));
  }
  getSuffix(code, count) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    const rule = this.getRule(code, options);
    if (rule) {
      if (this.shouldUseIntlApi()) {
        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;
      }
      return this.getSuffixRetroCompatible(rule, count);
    }
    this.logger.warn(`no plural rule found for: ${code}`);
    return '';
  }
  getSuffixRetroCompatible(rule, count) {
    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
    let suffix = rule.numbers[idx];
    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      if (suffix === 2) {
        suffix = 'plural';
      } else if (suffix === 1) {
        suffix = '';
      }
    }
    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();
    if (this.options.compatibilityJSON === 'v1') {
      if (suffix === 1) return '';
      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;
      return returnSuffix();
    } else if (this.options.compatibilityJSON === 'v2') {
      return returnSuffix();
    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      return returnSuffix();
    }
    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
  }
  shouldUseIntlApi() {
    return !nonIntlVersions.includes(this.options.compatibilityJSON);
  }
}

const deepFindWithDefaults = function (data, defaultData, key) {
  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';
  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
  let path = getPathWithDefaults(data, defaultData, key);
  if (!path && ignoreJSONStructure && isString(key)) {
    path = deepFind(data, key, keySeparator);
    if (path === undefined) path = deepFind(defaultData, key, keySeparator);
  }
  return path;
};
const regexSafe = val => val.replace(/\$/g, '$$$$');
class Interpolator {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    this.logger = baseLogger.create('interpolator');
    this.options = options;
    this.format = options.interpolation && options.interpolation.format || (value => value);
    this.init(options);
  }
  init() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    if (!options.interpolation) options.interpolation = {
      escapeValue: true
    };
    const {
      escape: escape$1,
      escapeValue,
      useRawValueToEscape,
      prefix,
      prefixEscaped,
      suffix,
      suffixEscaped,
      formatSeparator,
      unescapeSuffix,
      unescapePrefix,
      nestingPrefix,
      nestingPrefixEscaped,
      nestingSuffix,
      nestingSuffixEscaped,
      nestingOptionsSeparator,
      maxReplaces,
      alwaysFormat
    } = options.interpolation;
    this.escape = escape$1 !== undefined ? escape$1 : escape;
    this.escapeValue = escapeValue !== undefined ? escapeValue : true;
    this.useRawValueToEscape = useRawValueToEscape !== undefined ? useRawValueToEscape : false;
    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || '{{';
    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || '}}';
    this.formatSeparator = formatSeparator || ',';
    this.unescapePrefix = unescapeSuffix ? '' : unescapePrefix || '-';
    this.unescapeSuffix = this.unescapePrefix ? '' : unescapeSuffix || '';
    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape('$t(');
    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(')');
    this.nestingOptionsSeparator = nestingOptionsSeparator || ',';
    this.maxReplaces = maxReplaces || 1000;
    this.alwaysFormat = alwaysFormat !== undefined ? alwaysFormat : false;
    this.resetRegExp();
  }
  reset() {
    if (this.options) this.init(this.options);
  }
  resetRegExp() {
    const getOrResetRegExp = (existingRegExp, pattern) => {
      if (existingRegExp && existingRegExp.source === pattern) {
        existingRegExp.lastIndex = 0;
        return existingRegExp;
      }
      return new RegExp(pattern, 'g');
    };
    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);
    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);
    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);
  }
  interpolate(str, data, lng, options) {
    let match;
    let value;
    let replaces;
    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};
    const handleFormat = key => {
      if (key.indexOf(this.formatSeparator) < 0) {
        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);
        return this.alwaysFormat ? this.format(path, undefined, lng, {
          ...options,
          ...data,
          interpolationkey: key
        }) : path;
      }
      const p = key.split(this.formatSeparator);
      const k = p.shift().trim();
      const f = p.join(this.formatSeparator).trim();
      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {
        ...options,
        ...data,
        interpolationkey: k
      });
    };
    this.resetRegExp();
    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;
    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;
    const todos = [{
      regex: this.regexpUnescape,
      safeValue: val => regexSafe(val)
    }, {
      regex: this.regexp,
      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)
    }];
    todos.forEach(todo => {
      replaces = 0;
      while (match = todo.regex.exec(str)) {
        const matchedVar = match[1].trim();
        value = handleFormat(matchedVar);
        if (value === undefined) {
          if (typeof missingInterpolationHandler === 'function') {
            const temp = missingInterpolationHandler(str, match, options);
            value = isString(temp) ? temp : '';
          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {
            value = '';
          } else if (skipOnVariables) {
            value = match[0];
            continue;
          } else {
            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);
            value = '';
          }
        } else if (!isString(value) && !this.useRawValueToEscape) {
          value = makeString(value);
        }
        const safeValue = todo.safeValue(value);
        str = str.replace(match[0], safeValue);
        if (skipOnVariables) {
          todo.regex.lastIndex += value.length;
          todo.regex.lastIndex -= match[0].length;
        } else {
          todo.regex.lastIndex = 0;
        }
        replaces++;
        if (replaces >= this.maxReplaces) {
          break;
        }
      }
    });
    return str;
  }
  nest(str, fc) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    let match;
    let value;
    let clonedOptions;
    const handleHasOptions = (key, inheritedOptions) => {
      const sep = this.nestingOptionsSeparator;
      if (key.indexOf(sep) < 0) return key;
      const c = key.split(new RegExp(`${sep}[ ]*{`));
      let optionsString = `{${c[1]}`;
      key = c[0];
      optionsString = this.interpolate(optionsString, clonedOptions);
      const matchedSingleQuotes = optionsString.match(/'/g);
      const matchedDoubleQuotes = optionsString.match(/"/g);
      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {
        optionsString = optionsString.replace(/'/g, '"');
      }
      try {
        clonedOptions = JSON.parse(optionsString);
        if (inheritedOptions) clonedOptions = {
          ...inheritedOptions,
          ...clonedOptions
        };
      } catch (e) {
        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);
        return `${key}${sep}${optionsString}`;
      }
      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1) delete clonedOptions.defaultValue;
      return key;
    };
    while (match = this.nestingRegexp.exec(str)) {
      let formatters = [];
      clonedOptions = {
        ...options
      };
      clonedOptions = clonedOptions.replace && !isString(clonedOptions.replace) ? clonedOptions.replace : clonedOptions;
      clonedOptions.applyPostProcessor = false;
      delete clonedOptions.defaultValue;
      let doReduce = false;
      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {
        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());
        match[1] = r.shift();
        formatters = r;
        doReduce = true;
      }
      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);
      if (value && match[0] === str && !isString(value)) return value;
      if (!isString(value)) value = makeString(value);
      if (!value) {
        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);
        value = '';
      }
      if (doReduce) {
        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {
          ...options,
          interpolationkey: match[1].trim()
        }), value.trim());
      }
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  }
}

const parseFormatStr = formatStr => {
  let formatName = formatStr.toLowerCase().trim();
  const formatOptions = {};
  if (formatStr.indexOf('(') > -1) {
    const p = formatStr.split('(');
    formatName = p[0].toLowerCase().trim();
    const optStr = p[1].substring(0, p[1].length - 1);
    if (formatName === 'currency' && optStr.indexOf(':') < 0) {
      if (!formatOptions.currency) formatOptions.currency = optStr.trim();
    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {
      if (!formatOptions.range) formatOptions.range = optStr.trim();
    } else {
      const opts = optStr.split(';');
      opts.forEach(opt => {
        if (opt) {
          const [key, ...rest] = opt.split(':');
          const val = rest.join(':').trim().replace(/^'+|'+$/g, '');
          const trimmedKey = key.trim();
          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;
          if (val === 'false') formatOptions[trimmedKey] = false;
          if (val === 'true') formatOptions[trimmedKey] = true;
          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);
        }
      });
    }
  }
  return {
    formatName,
    formatOptions
  };
};
const createCachedFormatter = fn => {
  const cache = {};
  return (val, lng, options) => {
    let optForCache = options;
    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {
      optForCache = {
        ...optForCache,
        [options.interpolationkey]: undefined
      };
    }
    const key = lng + JSON.stringify(optForCache);
    let formatter = cache[key];
    if (!formatter) {
      formatter = fn(getCleanedCode(lng), options);
      cache[key] = formatter;
    }
    return formatter(val);
  };
};
class Formatter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    this.logger = baseLogger.create('formatter');
    this.options = options;
    this.formats = {
      number: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      }),
      currency: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt,
          style: 'currency'
        });
        return val => formatter.format(val);
      }),
      datetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.DateTimeFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      }),
      relativetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.RelativeTimeFormat(lng, {
          ...opt
        });
        return val => formatter.format(val, opt.range || 'day');
      }),
      list: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.ListFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      })
    };
    this.init(options);
  }
  init(services) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      interpolation: {}
    };
    this.formatSeparator = options.interpolation.formatSeparator || ',';
  }
  add(name, fc) {
    this.formats[name.toLowerCase().trim()] = fc;
  }
  addCached(name, fc) {
    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);
  }
  format(value, format, lng) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    const formats = format.split(this.formatSeparator);
    if (formats.length > 1 && formats[0].indexOf('(') > 1 && formats[0].indexOf(')') < 0 && formats.find(f => f.indexOf(')') > -1)) {
      const lastIndex = formats.findIndex(f => f.indexOf(')') > -1);
      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);
    }
    const result = formats.reduce((mem, f) => {
      const {
        formatName,
        formatOptions
      } = parseFormatStr(f);
      if (this.formats[formatName]) {
        let formatted = mem;
        try {
          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};
          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;
          formatted = this.formats[formatName](mem, l, {
            ...formatOptions,
            ...options,
            ...valOptions
          });
        } catch (error) {
          this.logger.warn(error);
        }
        return formatted;
      } else {
        this.logger.warn(`there was no format function for ${formatName}`);
      }
      return mem;
    }, value);
    return result;
  }
}

const removePending = (q, name) => {
  if (q.pending[name] !== undefined) {
    delete q.pending[name];
    q.pendingCount--;
  }
};
class Connector extends EventEmitter {
  constructor(backend, store, services) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    super();
    this.backend = backend;
    this.store = store;
    this.services = services;
    this.languageUtils = services.languageUtils;
    this.options = options;
    this.logger = baseLogger.create('backendConnector');
    this.waitingReads = [];
    this.maxParallelReads = options.maxParallelReads || 10;
    this.readingCalls = 0;
    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;
    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;
    this.state = {};
    this.queue = [];
    if (this.backend && this.backend.init) {
      this.backend.init(services, options.backend, options);
    }
  }
  queueLoad(languages, namespaces, options, callback) {
    const toLoad = {};
    const pending = {};
    const toLoadLanguages = {};
    const toLoadNamespaces = {};
    languages.forEach(lng => {
      let hasAllNamespaces = true;
      namespaces.forEach(ns => {
        const name = `${lng}|${ns}`;
        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {
          this.state[name] = 2;
        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {
          if (pending[name] === undefined) pending[name] = true;
        } else {
          this.state[name] = 1;
          hasAllNamespaces = false;
          if (pending[name] === undefined) pending[name] = true;
          if (toLoad[name] === undefined) toLoad[name] = true;
          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;
        }
      });
      if (!hasAllNamespaces) toLoadLanguages[lng] = true;
    });
    if (Object.keys(toLoad).length || Object.keys(pending).length) {
      this.queue.push({
        pending,
        pendingCount: Object.keys(pending).length,
        loaded: {},
        errors: [],
        callback
      });
    }
    return {
      toLoad: Object.keys(toLoad),
      pending: Object.keys(pending),
      toLoadLanguages: Object.keys(toLoadLanguages),
      toLoadNamespaces: Object.keys(toLoadNamespaces)
    };
  }
  loaded(name, err, data) {
    const s = name.split('|');
    const lng = s[0];
    const ns = s[1];
    if (err) this.emit('failedLoading', lng, ns, err);
    if (!err && data) {
      this.store.addResourceBundle(lng, ns, data, undefined, undefined, {
        skipCopy: true
      });
    }
    this.state[name] = err ? -1 : 2;
    if (err && data) this.state[name] = 0;
    const loaded = {};
    this.queue.forEach(q => {
      pushPath(q.loaded, [lng], ns);
      removePending(q, name);
      if (err) q.errors.push(err);
      if (q.pendingCount === 0 && !q.done) {
        Object.keys(q.loaded).forEach(l => {
          if (!loaded[l]) loaded[l] = {};
          const loadedKeys = q.loaded[l];
          if (loadedKeys.length) {
            loadedKeys.forEach(n => {
              if (loaded[l][n] === undefined) loaded[l][n] = true;
            });
          }
        });
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });
    this.emit('loaded', loaded);
    this.queue = this.queue.filter(q => !q.done);
  }
  read(lng, ns, fcName) {
    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;
    let callback = arguments.length > 5 ? arguments[5] : undefined;
    if (!lng.length) return callback(null, {});
    if (this.readingCalls >= this.maxParallelReads) {
      this.waitingReads.push({
        lng,
        ns,
        fcName,
        tried,
        wait,
        callback
      });
      return;
    }
    this.readingCalls++;
    const resolver = (err, data) => {
      this.readingCalls--;
      if (this.waitingReads.length > 0) {
        const next = this.waitingReads.shift();
        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);
      }
      if (err && data && tried < this.maxRetries) {
        setTimeout(() => {
          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    };
    const fc = this.backend[fcName].bind(this.backend);
    if (fc.length === 2) {
      try {
        const r = fc(lng, ns);
        if (r && typeof r.then === 'function') {
          r.then(data => resolver(null, data)).catch(resolver);
        } else {
          resolver(null, r);
        }
      } catch (err) {
        resolver(err);
      }
      return;
    }
    return fc(lng, ns, resolver);
  }
  prepareLoading(languages, namespaces) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    let callback = arguments.length > 3 ? arguments[3] : undefined;
    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
      return callback && callback();
    }
    if (isString(languages)) languages = this.languageUtils.toResolveHierarchy(languages);
    if (isString(namespaces)) namespaces = [namespaces];
    const toLoad = this.queueLoad(languages, namespaces, options, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback();
      return null;
    }
    toLoad.toLoad.forEach(name => {
      this.loadOne(name);
    });
  }
  load(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {}, callback);
  }
  reload(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {
      reload: true
    }, callback);
  }
  loadOne(name) {
    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    const s = name.split('|');
    const lng = s[0];
    const ns = s[1];
    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {
      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);
      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);
      this.loaded(name, err, data);
    });
  }
  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {
    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};
    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};
    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {
      this.logger.warn(`did not save key "${key}" as the namespace "${namespace}" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');
      return;
    }
    if (key === undefined || key === null || key === '') return;
    if (this.backend && this.backend.create) {
      const opts = {
        ...options,
        isUpdate
      };
      const fc = this.backend.create.bind(this.backend);
      if (fc.length < 6) {
        try {
          let r;
          if (fc.length === 5) {
            r = fc(languages, namespace, key, fallbackValue, opts);
          } else {
            r = fc(languages, namespace, key, fallbackValue);
          }
          if (r && typeof r.then === 'function') {
            r.then(data => clb(null, data)).catch(clb);
          } else {
            clb(null, r);
          }
        } catch (err) {
          clb(err);
        }
      } else {
        fc(languages, namespace, key, fallbackValue, clb, opts);
      }
    }
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  }
}

const get = () => ({
  debug: false,
  initImmediate: true,
  ns: ['translation'],
  defaultNS: ['translation'],
  fallbackLng: ['dev'],
  fallbackNS: false,
  supportedLngs: false,
  nonExplicitSupportedLngs: false,
  load: 'all',
  preload: false,
  simplifyPluralSuffix: true,
  keySeparator: '.',
  nsSeparator: ':',
  pluralSeparator: '_',
  contextSeparator: '_',
  partialBundledLanguages: false,
  saveMissing: false,
  updateMissing: false,
  saveMissingTo: 'fallback',
  saveMissingPlurals: true,
  missingKeyHandler: false,
  missingInterpolationHandler: false,
  postProcess: false,
  postProcessPassResolved: false,
  returnNull: false,
  returnEmptyString: true,
  returnObjects: false,
  joinArrays: false,
  returnedObjectHandler: false,
  parseMissingKeyHandler: false,
  appendNamespaceToMissingKey: false,
  appendNamespaceToCIMode: false,
  overloadTranslationOptionHandler: args => {
    let ret = {};
    if (typeof args[1] === 'object') ret = args[1];
    if (isString(args[1])) ret.defaultValue = args[1];
    if (isString(args[2])) ret.tDescription = args[2];
    if (typeof args[2] === 'object' || typeof args[3] === 'object') {
      const options = args[3] || args[2];
      Object.keys(options).forEach(key => {
        ret[key] = options[key];
      });
    }
    return ret;
  },
  interpolation: {
    escapeValue: true,
    format: value => value,
    prefix: '{{',
    suffix: '}}',
    formatSeparator: ',',
    unescapePrefix: '-',
    nestingPrefix: '$t(',
    nestingSuffix: ')',
    nestingOptionsSeparator: ',',
    maxReplaces: 1000,
    skipOnVariables: true
  }
});
const transformOptions = options => {
  if (isString(options.ns)) options.ns = [options.ns];
  if (isString(options.fallbackLng)) options.fallbackLng = [options.fallbackLng];
  if (isString(options.fallbackNS)) options.fallbackNS = [options.fallbackNS];
  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {
    options.supportedLngs = options.supportedLngs.concat(['cimode']);
  }
  return options;
};

const noop = () => {};
const bindMemberFunctions = inst => {
  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));
  mems.forEach(mem => {
    if (typeof inst[mem] === 'function') {
      inst[mem] = inst[mem].bind(inst);
    }
  });
};
class I18n extends EventEmitter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    super();
    this.options = transformOptions(options);
    this.services = {};
    this.logger = baseLogger;
    this.modules = {
      external: []
    };
    bindMemberFunctions(this);
    if (callback && !this.isInitialized && !options.isClone) {
      if (!this.options.initImmediate) {
        this.init(options, callback);
        return this;
      }
      setTimeout(() => {
        this.init(options, callback);
      }, 0);
    }
  }
  init() {
    var _this = this;
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    this.isInitializing = true;
    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    if (!options.defaultNS && options.defaultNS !== false && options.ns) {
      if (isString(options.ns)) {
        options.defaultNS = options.ns;
      } else if (options.ns.indexOf('translation') < 0) {
        options.defaultNS = options.ns[0];
      }
    }
    const defOpts = get();
    this.options = {
      ...defOpts,
      ...this.options,
      ...transformOptions(options)
    };
    if (this.options.compatibilityAPI !== 'v1') {
      this.options.interpolation = {
        ...defOpts.interpolation,
        ...this.options.interpolation
      };
    }
    if (options.keySeparator !== undefined) {
      this.options.userDefinedKeySeparator = options.keySeparator;
    }
    if (options.nsSeparator !== undefined) {
      this.options.userDefinedNsSeparator = options.nsSeparator;
    }
    const createClassOnDemand = ClassOrObject => {
      if (!ClassOrObject) return null;
      if (typeof ClassOrObject === 'function') return new ClassOrObject();
      return ClassOrObject;
    };
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }
      let formatter;
      if (this.modules.formatter) {
        formatter = this.modules.formatter;
      } else if (typeof Intl !== 'undefined') {
        formatter = Formatter;
      }
      const lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);
      const s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, {
        prepend: this.options.pluralSeparator,
        compatibilityJSON: this.options.compatibilityJSON,
        simplifyPluralSuffix: this.options.simplifyPluralSuffix
      });
      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {
        s.formatter = createClassOnDemand(formatter);
        s.formatter.init(s, this.options);
        this.options.interpolation.format = s.formatter.format.bind(s.formatter);
      }
      s.interpolator = new Interpolator(this.options);
      s.utils = {
        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)
      };
      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      s.backendConnector.on('*', function (event) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        _this.emit(event, ...args);
      });
      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);
      }
      if (this.modules.i18nFormat) {
        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);
        if (s.i18nFormat.init) s.i18nFormat.init(this);
      }
      this.translator = new Translator(this.services, this.options);
      this.translator.on('*', function (event) {
        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }
        _this.emit(event, ...args);
      });
      this.modules.external.forEach(m => {
        if (m.init) m.init(this);
      });
    }
    this.format = this.options.interpolation.format;
    if (!callback) callback = noop;
    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {
      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];
    }
    if (!this.services.languageDetector && !this.options.lng) {
      this.logger.warn('init: no languageDetector is used and no lng is defined');
    }
    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];
    storeApi.forEach(fcName => {
      this[fcName] = function () {
        return _this.store[fcName](...arguments);
      };
    });
    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];
    storeApiChained.forEach(fcName => {
      this[fcName] = function () {
        _this.store[fcName](...arguments);
        return _this;
      };
    });
    const deferred = defer();
    const load = () => {
      const finish = (err, t) => {
        this.isInitializing = false;
        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');
        this.isInitialized = true;
        if (!this.options.isClone) this.logger.log('initialized', this.options);
        this.emit('initialized', this.options);
        deferred.resolve(t);
        callback(err, t);
      };
      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));
      this.changeLanguage(this.options.lng, finish);
    };
    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }
    return deferred;
  }
  loadResources(language) {
    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    let usedCallback = callback;
    const usedLng = isString(language) ? language : this.language;
    if (typeof language === 'function') usedCallback = language;
    if (!this.options.resources || this.options.partialBundledLanguages) {
      if (usedLng && usedLng.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();
      const toLoad = [];
      const append = lng => {
        if (!lng) return;
        if (lng === 'cimode') return;
        const lngs = this.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach(l => {
          if (l === 'cimode') return;
          if (toLoad.indexOf(l) < 0) toLoad.push(l);
        });
      };
      if (!usedLng) {
        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach(l => append(l));
      } else {
        append(usedLng);
      }
      if (this.options.preload) {
        this.options.preload.forEach(l => append(l));
      }
      this.services.backendConnector.load(toLoad, this.options.ns, e => {
        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);
        usedCallback(e);
      });
    } else {
      usedCallback(null);
    }
  }
  reloadResources(lngs, ns, callback) {
    const deferred = defer();
    if (typeof lngs === 'function') {
      callback = lngs;
      lngs = undefined;
    }
    if (typeof ns === 'function') {
      callback = ns;
      ns = undefined;
    }
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    if (!callback) callback = noop;
    this.services.backendConnector.reload(lngs, ns, err => {
      deferred.resolve();
      callback(err);
    });
    return deferred;
  }
  use(module) {
    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');
    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');
    if (module.type === 'backend') {
      this.modules.backend = module;
    }
    if (module.type === 'logger' || module.log && module.warn && module.error) {
      this.modules.logger = module;
    }
    if (module.type === 'languageDetector') {
      this.modules.languageDetector = module;
    }
    if (module.type === 'i18nFormat') {
      this.modules.i18nFormat = module;
    }
    if (module.type === 'postProcessor') {
      postProcessor.addPostProcessor(module);
    }
    if (module.type === 'formatter') {
      this.modules.formatter = module;
    }
    if (module.type === '3rdParty') {
      this.modules.external.push(module);
    }
    return this;
  }
  setResolvedLanguage(l) {
    if (!l || !this.languages) return;
    if (['cimode', 'dev'].indexOf(l) > -1) return;
    for (let li = 0; li < this.languages.length; li++) {
      const lngInLngs = this.languages[li];
      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;
      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {
        this.resolvedLanguage = lngInLngs;
        break;
      }
    }
  }
  changeLanguage(lng, callback) {
    var _this2 = this;
    this.isLanguageChangingTo = lng;
    const deferred = defer();
    this.emit('languageChanging', lng);
    const setLngProps = l => {
      this.language = l;
      this.languages = this.services.languageUtils.toResolveHierarchy(l);
      this.resolvedLanguage = undefined;
      this.setResolvedLanguage(l);
    };
    const done = (err, l) => {
      if (l) {
        setLngProps(l);
        this.translator.changeLanguage(l);
        this.isLanguageChangingTo = undefined;
        this.emit('languageChanged', l);
        this.logger.log('languageChanged', l);
      } else {
        this.isLanguageChangingTo = undefined;
      }
      deferred.resolve(function () {
        return _this2.t(...arguments);
      });
      if (callback) callback(err, function () {
        return _this2.t(...arguments);
      });
    };
    const setLng = lngs => {
      if (!lng && !lngs && this.services.languageDetector) lngs = [];
      const l = isString(lngs) ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);
      if (l) {
        if (!this.language) {
          setLngProps(l);
        }
        if (!this.translator.language) this.translator.changeLanguage(l);
        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);
      }
      this.loadResources(l, err => {
        done(err, l);
      });
    };
    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      if (this.services.languageDetector.detect.length === 0) {
        this.services.languageDetector.detect().then(setLng);
      } else {
        this.services.languageDetector.detect(setLng);
      }
    } else {
      setLng(lng);
    }
    return deferred;
  }
  getFixedT(lng, ns, keyPrefix) {
    var _this3 = this;
    const fixedT = function (key, opts) {
      let options;
      if (typeof opts !== 'object') {
        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {
          rest[_key3 - 2] = arguments[_key3];
        }
        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));
      } else {
        options = {
          ...opts
        };
      }
      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      if (options.keyPrefix !== '') options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;
      const keySeparator = _this3.options.keySeparator || '.';
      let resultKey;
      if (options.keyPrefix && Array.isArray(key)) {
        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);
      } else {
        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;
      }
      return _this3.t(resultKey, options);
    };
    if (isString(lng)) {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    fixedT.keyPrefix = keyPrefix;
    return fixedT;
  }
  t() {
    return this.translator && this.translator.translate(...arguments);
  }
  exists() {
    return this.translator && this.translator.exists(...arguments);
  }
  setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  }
  hasLoadedNamespace(ns) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (!this.isInitialized) {
      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);
      return false;
    }
    if (!this.languages || !this.languages.length) {
      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);
      return false;
    }
    const lng = options.lng || this.resolvedLanguage || this.languages[0];
    const fallbackLng = this.options ? this.options.fallbackLng : false;
    const lastLng = this.languages[this.languages.length - 1];
    if (lng.toLowerCase() === 'cimode') return true;
    const loadNotPending = (l, n) => {
      const loadState = this.services.backendConnector.state[`${l}|${n}`];
      return loadState === -1 || loadState === 0 || loadState === 2;
    };
    if (options.precheck) {
      const preResult = options.precheck(this, loadNotPending);
      if (preResult !== undefined) return preResult;
    }
    if (this.hasResourceBundle(lng, ns)) return true;
    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;
    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
    return false;
  }
  loadNamespaces(ns, callback) {
    const deferred = defer();
    if (!this.options.ns) {
      if (callback) callback();
      return Promise.resolve();
    }
    if (isString(ns)) ns = [ns];
    ns.forEach(n => {
      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);
    });
    this.loadResources(err => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  loadLanguages(lngs, callback) {
    const deferred = defer();
    if (isString(lngs)) lngs = [lngs];
    const preloaded = this.options.preload || [];
    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));
    if (!newLngs.length) {
      if (callback) callback();
      return Promise.resolve();
    }
    this.options.preload = preloaded.concat(newLngs);
    this.loadResources(err => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  dir(lng) {
    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);
    if (!lng) return 'rtl';
    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];
    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());
    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';
  }
  static createInstance() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    return new I18n(options, callback);
  }
  cloneInstance() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    const forkResourceStore = options.forkResourceStore;
    if (forkResourceStore) delete options.forkResourceStore;
    const mergedOptions = {
      ...this.options,
      ...options,
      ...{
        isClone: true
      }
    };
    const clone = new I18n(mergedOptions);
    if (options.debug !== undefined || options.prefix !== undefined) {
      clone.logger = clone.logger.clone(options);
    }
    const membersToCopy = ['store', 'services', 'language'];
    membersToCopy.forEach(m => {
      clone[m] = this[m];
    });
    clone.services = {
      ...this.services
    };
    clone.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    if (forkResourceStore) {
      clone.store = new ResourceStore(this.store.data, mergedOptions);
      clone.services.resourceStore = clone.store;
    }
    clone.translator = new Translator(clone.services, mergedOptions);
    clone.translator.on('*', function (event) {
      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
        args[_key4 - 1] = arguments[_key4];
      }
      clone.emit(event, ...args);
    });
    clone.init(mergedOptions, callback);
    clone.translator.options = mergedOptions;
    clone.translator.backendConnector.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    return clone;
  }
  toJSON() {
    return {
      options: this.options,
      store: this.store,
      language: this.language,
      languages: this.languages,
      resolvedLanguage: this.resolvedLanguage
    };
  }
}
const instance = I18n.createInstance();
instance.createInstance = I18n.createInstance;

module.exports = instance;


/***/ }),

/***/ "../../node_modules/lodash.debounce/index.js":
/*!***************************************************!*\
  !*** ../../node_modules/lodash.debounce/index.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof __webpack_require__.g == 'object' && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = debounce;


/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/I18nextProvider.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/I18nextProvider.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nextProvider: () => (/* binding */ I18nextProvider)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");


function I18nextProvider(_ref) {
  let {
    i18n,
    defaultNS,
    children
  } = _ref;
  const value = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({
    i18n,
    defaultNS
  }), [i18n, defaultNS]);
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext.Provider, {
    value
  }, children);
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/Trans.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/Trans.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Trans: () => (/* binding */ Trans),
/* harmony export */   nodesToString: () => (/* reexport safe */ _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.nodesToString)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransWithoutContext.js */ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");




function Trans(_ref) {
  let {
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions = {},
    values,
    defaults,
    components,
    ns,
    i18n: i18nFromProps,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  } = _ref;
  const {
    i18n: i18nFromContext,
    defaultNS: defaultNSFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_2__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_2__.getI18n)();
  const t = tFromProps || i18n && i18n.t.bind(i18n);
  return (0,_TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.Trans)({
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions,
    values,
    defaults,
    components,
    ns: ns || t && t.ns || defaultNSFromContext || i18n && i18n.options && i18n.options.defaultNS,
    i18n,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  });
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js":
/*!***********************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/TransWithoutContext.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Trans: () => (/* binding */ Trans),
/* harmony export */   nodesToString: () => (/* binding */ nodesToString)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var html_parse_stringify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-parse-stringify */ "../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");





const hasChildren = (node, checkLength) => {
  if (!node) return false;
  const base = node.props ? node.props.children : node.children;
  if (checkLength) return base.length > 0;
  return !!base;
};
const getChildren = node => {
  if (!node) return [];
  const children = node.props ? node.props.children : node.children;
  return node.props && node.props.i18nIsDynamicList ? getAsArray(children) : children;
};
const hasValidReactChildren = children => Array.isArray(children) && children.every(react__WEBPACK_IMPORTED_MODULE_0__.isValidElement);
const getAsArray = data => Array.isArray(data) ? data : [data];
const mergeProps = (source, target) => {
  const newTarget = {
    ...target
  };
  newTarget.props = Object.assign(source.props, target.props);
  return newTarget;
};
const nodesToString = (children, i18nOptions) => {
  if (!children) return '';
  let stringNode = '';
  const childrenArray = getAsArray(children);
  const keepArray = i18nOptions.transSupportBasicHtmlNodes && i18nOptions.transKeepBasicHtmlNodesFor ? i18nOptions.transKeepBasicHtmlNodesFor : [];
  childrenArray.forEach((child, childIndex) => {
    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) {
      stringNode += `${child}`;
    } else if ((0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) {
      const {
        props,
        type
      } = child;
      const childPropsCount = Object.keys(props).length;
      const shouldKeepChild = keepArray.indexOf(type) > -1;
      const childChildren = props.children;
      if (!childChildren && shouldKeepChild && !childPropsCount) {
        stringNode += `<${type}/>`;
      } else if (!childChildren && (!shouldKeepChild || childPropsCount) || props.i18nIsDynamicList) {
        stringNode += `<${childIndex}></${childIndex}>`;
      } else if (shouldKeepChild && childPropsCount === 1 && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(childChildren)) {
        stringNode += `<${type}>${childChildren}</${type}>`;
      } else {
        const content = nodesToString(childChildren, i18nOptions);
        stringNode += `<${childIndex}>${content}</${childIndex}>`;
      }
    } else if (child === null) {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`Trans: the passed in value is invalid - seems you passed in a null child.`);
    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child)) {
      const {
        format,
        ...clone
      } = child;
      const keys = Object.keys(clone);
      if (keys.length === 1) {
        const value = format ? `${keys[0]}, ${format}` : keys[0];
        stringNode += `{{${value}}}`;
      } else {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.`, child);
      }
    } else {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.`, child);
    }
  });
  return stringNode;
};
const renderNodes = (children, targetString, i18n, i18nOptions, combinedTOpts, shouldUnescape) => {
  if (targetString === '') return [];
  const keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];
  const emptyChildrenButNeedsHandling = targetString && new RegExp(keepArray.map(keep => `<${keep}`).join('|')).test(targetString);
  if (!children && !emptyChildrenButNeedsHandling && !shouldUnescape) return [targetString];
  const data = {};
  const getData = childs => {
    const childrenArray = getAsArray(childs);
    childrenArray.forEach(child => {
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) return;
      if (hasChildren(child)) getData(getChildren(child));else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && !(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) Object.assign(data, child);
    });
  };
  getData(children);
  const ast = html_parse_stringify__WEBPACK_IMPORTED_MODULE_1__["default"].parse(`<0>${targetString}</0>`);
  const opts = {
    ...data,
    ...combinedTOpts
  };
  const renderInner = (child, node, rootReactNode) => {
    const childs = getChildren(child);
    const mappedChildren = mapAST(childs, node.children, rootReactNode);
    return hasValidReactChildren(childs) && mappedChildren.length === 0 || child.props && child.props.i18nIsDynamicList ? childs : mappedChildren;
  };
  const pushTranslatedJSX = (child, inner, mem, i, isVoid) => {
    if (child.dummy) {
      child.children = inner;
      mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(child, {
        key: i
      }, isVoid ? undefined : inner));
    } else {
      mem.push(...react__WEBPACK_IMPORTED_MODULE_0__.Children.map([child], c => {
        const props = {
          ...c.props
        };
        delete props.i18nIsDynamicList;
        return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(c.type, {
          ...props,
          key: i,
          ref: c.ref
        }, isVoid ? null : inner);
      }));
    }
  };
  const mapAST = (reactNode, astNode, rootReactNode) => {
    const reactNodes = getAsArray(reactNode);
    const astNodes = getAsArray(astNode);
    return astNodes.reduce((mem, node, i) => {
      const translationContent = node.children && node.children[0] && node.children[0].content && i18n.services.interpolator.interpolate(node.children[0].content, opts, i18n.language);
      if (node.type === 'tag') {
        let tmp = reactNodes[parseInt(node.name, 10)];
        if (rootReactNode.length === 1 && !tmp) tmp = rootReactNode[0][node.name];
        if (!tmp) tmp = {};
        const child = Object.keys(node.attrs).length !== 0 ? mergeProps({
          props: node.attrs
        }, tmp) : tmp;
        const isElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child);
        const isValidTranslationWithChildren = isElement && hasChildren(node, true) && !node.voidElement;
        const isEmptyTransWithHTML = emptyChildrenButNeedsHandling && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && child.dummy && !isElement;
        const isKnownComponent = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(children) && Object.hasOwnProperty.call(children, node.name);
        if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) {
          const value = i18n.services.interpolator.interpolate(child, opts, i18n.language);
          mem.push(value);
        } else if (hasChildren(child) || isValidTranslationWithChildren) {
          const inner = renderInner(child, node, rootReactNode);
          pushTranslatedJSX(child, inner, mem, i);
        } else if (isEmptyTransWithHTML) {
          const inner = mapAST(reactNodes, node.children, rootReactNode);
          pushTranslatedJSX(child, inner, mem, i);
        } else if (Number.isNaN(parseFloat(node.name))) {
          if (isKnownComponent) {
            const inner = renderInner(child, node, rootReactNode);
            pushTranslatedJSX(child, inner, mem, i, node.voidElement);
          } else if (i18nOptions.transSupportBasicHtmlNodes && keepArray.indexOf(node.name) > -1) {
            if (node.voidElement) {
              mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(node.name, {
                key: `${node.name}-${i}`
              }));
            } else {
              const inner = mapAST(reactNodes, node.children, rootReactNode);
              mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(node.name, {
                key: `${node.name}-${i}`
              }, inner));
            }
          } else if (node.voidElement) {
            mem.push(`<${node.name} />`);
          } else {
            const inner = mapAST(reactNodes, node.children, rootReactNode);
            mem.push(`<${node.name}>${inner}</${node.name}>`);
          }
        } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && !isElement) {
          const content = node.children[0] ? translationContent : null;
          if (content) mem.push(content);
        } else {
          pushTranslatedJSX(child, translationContent, mem, i, node.children.length !== 1 || !translationContent);
        }
      } else if (node.type === 'text') {
        const wrapTextNodes = i18nOptions.transWrapTextNodes;
        const content = shouldUnescape ? i18nOptions.unescape(i18n.services.interpolator.interpolate(node.content, opts, i18n.language)) : i18n.services.interpolator.interpolate(node.content, opts, i18n.language);
        if (wrapTextNodes) {
          mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(wrapTextNodes, {
            key: `${node.name}-${i}`
          }, content));
        } else {
          mem.push(content);
        }
      }
      return mem;
    }, []);
  };
  const result = mapAST([{
    dummy: true,
    children: children || []
  }], ast, getAsArray(children || []));
  return getChildren(result[0]);
};
function Trans(_ref) {
  let {
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions = {},
    values,
    defaults,
    components,
    ns,
    i18n: i18nFromProps,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  } = _ref;
  const i18n = i18nFromProps || (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_4__.getI18n)();
  if (!i18n) {
    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('You will need to pass in an i18next instance by using i18nextReactModule');
    return children;
  }
  const t = tFromProps || i18n.t.bind(i18n) || (k => k);
  const reactI18nextOptions = {
    ...(0,_defaults_js__WEBPACK_IMPORTED_MODULE_3__.getDefaults)(),
    ...(i18n.options && i18n.options.react)
  };
  let namespaces = ns || t.ns || i18n.options && i18n.options.defaultNS;
  namespaces = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(namespaces) ? [namespaces] : namespaces || ['translation'];
  const nodeAsString = nodesToString(children, reactI18nextOptions);
  const defaultValue = defaults || nodeAsString || reactI18nextOptions.transEmptyNodeValue || i18nKey;
  const {
    hashTransKey
  } = reactI18nextOptions;
  const key = i18nKey || (hashTransKey ? hashTransKey(nodeAsString || defaultValue) : nodeAsString || defaultValue);
  if (i18n.options && i18n.options.interpolation && i18n.options.interpolation.defaultVariables) {
    values = values && Object.keys(values).length > 0 ? {
      ...values,
      ...i18n.options.interpolation.defaultVariables
    } : {
      ...i18n.options.interpolation.defaultVariables
    };
  }
  const interpolationOverride = values || count !== undefined || !children ? tOptions.interpolation : {
    interpolation: {
      ...tOptions.interpolation,
      prefix: '#$?',
      suffix: '?$#'
    }
  };
  const combinedTOpts = {
    ...tOptions,
    context: context || tOptions.context,
    count,
    ...values,
    ...interpolationOverride,
    defaultValue,
    ns: namespaces
  };
  const translation = key ? t(key, combinedTOpts) : defaultValue;
  if (components) {
    Object.keys(components).forEach(c => {
      const comp = components[c];
      if (typeof comp.type === 'function' || !comp.props || !comp.props.children || translation.indexOf(`${c}/>`) < 0 && translation.indexOf(`${c} />`) < 0) return;
      function Componentized() {
        return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, comp);
      }
      components[c] = (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(Componentized);
    });
  }
  const content = renderNodes(components || children, translation, i18n, reactI18nextOptions, combinedTOpts, shouldUnescape);
  const useAsParent = parent !== undefined ? parent : reactI18nextOptions.defaultTransParent;
  return useAsParent ? (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(useAsParent, additionalProps, content) : content;
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/Translation.js":
/*!***************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/Translation.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Translation: () => (/* binding */ Translation)
/* harmony export */ });
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");

function Translation(props) {
  const {
    ns,
    children,
    ...options
  } = props;
  const [t, i18n, ready] = (0,_useTranslation_js__WEBPACK_IMPORTED_MODULE_0__.useTranslation)(ns, options);
  return children(t, {
    i18n,
    lng: i18n.language
  }, ready);
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/context.js":
/*!***********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/context.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nContext: () => (/* binding */ I18nContext),
/* harmony export */   ReportNamespaces: () => (/* binding */ ReportNamespaces),
/* harmony export */   composeInitialProps: () => (/* binding */ composeInitialProps),
/* harmony export */   getDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_1__.getDefaults),
/* harmony export */   getI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.getI18n),
/* harmony export */   getInitialProps: () => (/* binding */ getInitialProps),
/* harmony export */   initReactI18next: () => (/* reexport safe */ _initReactI18next_js__WEBPACK_IMPORTED_MODULE_3__.initReactI18next),
/* harmony export */   setDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_1__.setDefaults),
/* harmony export */   setI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.setI18n)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");
/* harmony import */ var _initReactI18next_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./initReactI18next.js */ "../../node_modules/react-i18next/dist/es/initReactI18next.js");





const I18nContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)();
class ReportNamespaces {
  constructor() {
    this.usedNamespaces = {};
  }
  addUsedNamespaces(namespaces) {
    namespaces.forEach(ns => {
      if (!this.usedNamespaces[ns]) this.usedNamespaces[ns] = true;
    });
  }
  getUsedNamespaces = () => Object.keys(this.usedNamespaces);
}
const composeInitialProps = ForComponent => async ctx => {
  const componentsInitialProps = ForComponent.getInitialProps ? await ForComponent.getInitialProps(ctx) : {};
  const i18nInitialProps = getInitialProps();
  return {
    ...componentsInitialProps,
    ...i18nInitialProps
  };
};
const getInitialProps = () => {
  const i18n = (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.getI18n)();
  const namespaces = i18n.reportNamespaces ? i18n.reportNamespaces.getUsedNamespaces() : [];
  const ret = {};
  const initialI18nStore = {};
  i18n.languages.forEach(l => {
    initialI18nStore[l] = {};
    namespaces.forEach(ns => {
      initialI18nStore[l][ns] = i18n.getResourceBundle(l, ns) || {};
    });
  });
  ret.initialI18nStore = initialI18nStore;
  ret.initialLanguage = i18n.language;
  return ret;
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/defaults.js":
/*!************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/defaults.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaults: () => (/* binding */ getDefaults),
/* harmony export */   setDefaults: () => (/* binding */ setDefaults)
/* harmony export */ });
/* harmony import */ var _unescape_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./unescape.js */ "../../node_modules/react-i18next/dist/es/unescape.js");

let defaultOptions = {
  bindI18n: 'languageChanged',
  bindI18nStore: '',
  transEmptyNodeValue: '',
  transSupportBasicHtmlNodes: true,
  transWrapTextNodes: '',
  transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'p'],
  useSuspense: true,
  unescape: _unescape_js__WEBPACK_IMPORTED_MODULE_0__.unescape
};
const setDefaults = function () {
  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  defaultOptions = {
    ...defaultOptions,
    ...options
  };
};
const getDefaults = () => defaultOptions;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/i18nInstance.js":
/*!****************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/i18nInstance.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getI18n: () => (/* binding */ getI18n),
/* harmony export */   setI18n: () => (/* binding */ setI18n)
/* harmony export */ });
let i18nInstance;
const setI18n = instance => {
  i18nInstance = instance;
};
const getI18n = () => i18nInstance;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/index.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nContext: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.I18nContext),
/* harmony export */   I18nextProvider: () => (/* reexport safe */ _I18nextProvider_js__WEBPACK_IMPORTED_MODULE_5__.I18nextProvider),
/* harmony export */   Trans: () => (/* reexport safe */ _Trans_js__WEBPACK_IMPORTED_MODULE_0__.Trans),
/* harmony export */   TransWithoutContext: () => (/* reexport safe */ _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.Trans),
/* harmony export */   Translation: () => (/* reexport safe */ _Translation_js__WEBPACK_IMPORTED_MODULE_4__.Translation),
/* harmony export */   composeInitialProps: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.composeInitialProps),
/* harmony export */   date: () => (/* binding */ date),
/* harmony export */   getDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_9__.getDefaults),
/* harmony export */   getI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__.getI18n),
/* harmony export */   getInitialProps: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.getInitialProps),
/* harmony export */   initReactI18next: () => (/* reexport safe */ _initReactI18next_js__WEBPACK_IMPORTED_MODULE_8__.initReactI18next),
/* harmony export */   number: () => (/* binding */ number),
/* harmony export */   plural: () => (/* binding */ plural),
/* harmony export */   select: () => (/* binding */ select),
/* harmony export */   selectOrdinal: () => (/* binding */ selectOrdinal),
/* harmony export */   setDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_9__.setDefaults),
/* harmony export */   setI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__.setI18n),
/* harmony export */   time: () => (/* binding */ time),
/* harmony export */   useSSR: () => (/* reexport safe */ _useSSR_js__WEBPACK_IMPORTED_MODULE_7__.useSSR),
/* harmony export */   useTranslation: () => (/* reexport safe */ _useTranslation_js__WEBPACK_IMPORTED_MODULE_2__.useTranslation),
/* harmony export */   withSSR: () => (/* reexport safe */ _withSSR_js__WEBPACK_IMPORTED_MODULE_6__.withSSR),
/* harmony export */   withTranslation: () => (/* reexport safe */ _withTranslation_js__WEBPACK_IMPORTED_MODULE_3__.withTranslation)
/* harmony export */ });
/* harmony import */ var _Trans_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Trans.js */ "../../node_modules/react-i18next/dist/es/Trans.js");
/* harmony import */ var _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransWithoutContext.js */ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js");
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");
/* harmony import */ var _withTranslation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./withTranslation.js */ "../../node_modules/react-i18next/dist/es/withTranslation.js");
/* harmony import */ var _Translation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Translation.js */ "../../node_modules/react-i18next/dist/es/Translation.js");
/* harmony import */ var _I18nextProvider_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./I18nextProvider.js */ "../../node_modules/react-i18next/dist/es/I18nextProvider.js");
/* harmony import */ var _withSSR_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./withSSR.js */ "../../node_modules/react-i18next/dist/es/withSSR.js");
/* harmony import */ var _useSSR_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useSSR.js */ "../../node_modules/react-i18next/dist/es/useSSR.js");
/* harmony import */ var _initReactI18next_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./initReactI18next.js */ "../../node_modules/react-i18next/dist/es/initReactI18next.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");












const date = () => '';
const time = () => '';
const number = () => '';
const select = () => '';
const plural = () => '';
const selectOrdinal = () => '';

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/initReactI18next.js":
/*!********************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/initReactI18next.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initReactI18next: () => (/* binding */ initReactI18next)
/* harmony export */ });
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");


const initReactI18next = {
  type: '3rdParty',
  init(instance) {
    (0,_defaults_js__WEBPACK_IMPORTED_MODULE_0__.setDefaults)(instance.options.react);
    (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_1__.setI18n)(instance);
  }
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/unescape.js":
/*!************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/unescape.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   unescape: () => (/* binding */ unescape)
/* harmony export */ });
const matchHtmlEntity = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g;
const htmlEntities = {
  '&amp;': '&',
  '&#38;': '&',
  '&lt;': '<',
  '&#60;': '<',
  '&gt;': '>',
  '&#62;': '>',
  '&apos;': "'",
  '&#39;': "'",
  '&quot;': '"',
  '&#34;': '"',
  '&nbsp;': ' ',
  '&#160;': ' ',
  '&copy;': '',
  '&#169;': '',
  '&reg;': '',
  '&#174;': '',
  '&hellip;': '',
  '&#8230;': '',
  '&#x2F;': '/',
  '&#47;': '/'
};
const unescapeHtmlEntity = m => htmlEntities[m];
const unescape = text => text.replace(matchHtmlEntity, unescapeHtmlEntity);

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/useSSR.js":
/*!**********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/useSSR.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useSSR: () => (/* binding */ useSSR)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");


const useSSR = function (initialI18nStore, initialLanguage) {
  let props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const {
    i18n: i18nFromProps
  } = props;
  const {
    i18n: i18nFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getI18n)();
  if (i18n.options && i18n.options.isClone) return;
  if (initialI18nStore && !i18n.initializedStoreOnce) {
    i18n.services.resourceStore.data = initialI18nStore;
    i18n.options.ns = Object.values(initialI18nStore).reduce((mem, lngResources) => {
      Object.keys(lngResources).forEach(ns => {
        if (mem.indexOf(ns) < 0) mem.push(ns);
      });
      return mem;
    }, i18n.options.ns);
    i18n.initializedStoreOnce = true;
    i18n.isInitialized = true;
  }
  if (initialLanguage && !i18n.initializedLanguageOnce) {
    i18n.changeLanguage(initialLanguage);
    i18n.initializedLanguageOnce = true;
  }
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/useTranslation.js":
/*!******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/useTranslation.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useTranslation: () => (/* binding */ useTranslation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");



const usePrevious = (value, ignore) => {
  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    ref.current = ignore ? ref.current : value;
  }, [value, ignore]);
  return ref.current;
};
const alwaysNewT = (i18n, language, namespace, keyPrefix) => i18n.getFixedT(language, namespace, keyPrefix);
const useMemoizedT = (i18n, language, namespace, keyPrefix) => (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(alwaysNewT(i18n, language, namespace, keyPrefix), [i18n, language, namespace, keyPrefix]);
const useTranslation = function (ns) {
  let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  const {
    i18n: i18nFromProps
  } = props;
  const {
    i18n: i18nFromContext,
    defaultNS: defaultNSFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getI18n)();
  if (i18n && !i18n.reportNamespaces) i18n.reportNamespaces = new _context_js__WEBPACK_IMPORTED_MODULE_1__.ReportNamespaces();
  if (!i18n) {
    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('You will need to pass in an i18next instance by using initReactI18next');
    const notReadyT = (k, optsOrDefaultValue) => {
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(optsOrDefaultValue)) return optsOrDefaultValue;
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(optsOrDefaultValue) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(optsOrDefaultValue.defaultValue)) return optsOrDefaultValue.defaultValue;
      return Array.isArray(k) ? k[k.length - 1] : k;
    };
    const retNotReady = [notReadyT, {}, false];
    retNotReady.t = notReadyT;
    retNotReady.i18n = {};
    retNotReady.ready = false;
    return retNotReady;
  }
  if (i18n.options.react && i18n.options.react.wait !== undefined) (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.');
  const i18nOptions = {
    ...(0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getDefaults)(),
    ...i18n.options.react,
    ...props
  };
  const {
    useSuspense,
    keyPrefix
  } = i18nOptions;
  let namespaces = ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;
  namespaces = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(namespaces) ? [namespaces] : namespaces || ['translation'];
  if (i18n.reportNamespaces.addUsedNamespaces) i18n.reportNamespaces.addUsedNamespaces(namespaces);
  const ready = (i18n.isInitialized || i18n.initializedStoreOnce) && namespaces.every(n => (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.hasLoadedNamespace)(n, i18n, i18nOptions));
  const memoGetT = useMemoizedT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);
  const getT = () => memoGetT;
  const getNewT = () => alwaysNewT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);
  const [t, setT] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getT);
  let joinedNS = namespaces.join();
  if (props.lng) joinedNS = `${props.lng}${joinedNS}`;
  const previousJoinedNS = usePrevious(joinedNS);
  const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    const {
      bindI18n,
      bindI18nStore
    } = i18nOptions;
    isMounted.current = true;
    if (!ready && !useSuspense) {
      if (props.lng) {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadLanguages)(i18n, props.lng, namespaces, () => {
          if (isMounted.current) setT(getNewT);
        });
      } else {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadNamespaces)(i18n, namespaces, () => {
          if (isMounted.current) setT(getNewT);
        });
      }
    }
    if (ready && previousJoinedNS && previousJoinedNS !== joinedNS && isMounted.current) {
      setT(getNewT);
    }
    const boundReset = () => {
      if (isMounted.current) setT(getNewT);
    };
    if (bindI18n && i18n) i18n.on(bindI18n, boundReset);
    if (bindI18nStore && i18n) i18n.store.on(bindI18nStore, boundReset);
    return () => {
      isMounted.current = false;
      if (bindI18n && i18n) bindI18n.split(' ').forEach(e => i18n.off(e, boundReset));
      if (bindI18nStore && i18n) bindI18nStore.split(' ').forEach(e => i18n.store.off(e, boundReset));
    };
  }, [i18n, joinedNS]);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (isMounted.current && ready) {
      setT(getT);
    }
  }, [i18n, keyPrefix, ready]);
  const ret = [t, i18n, ready];
  ret.t = t;
  ret.i18n = i18n;
  ret.ready = ready;
  if (ready) return ret;
  if (!ready && !useSuspense) return ret;
  throw new Promise(resolve => {
    if (props.lng) {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadLanguages)(i18n, props.lng, namespaces, () => resolve());
    } else {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadNamespaces)(i18n, namespaces, () => resolve());
    }
  });
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/utils.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/utils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDisplayName: () => (/* binding */ getDisplayName),
/* harmony export */   hasLoadedNamespace: () => (/* binding */ hasLoadedNamespace),
/* harmony export */   isObject: () => (/* binding */ isObject),
/* harmony export */   isString: () => (/* binding */ isString),
/* harmony export */   loadLanguages: () => (/* binding */ loadLanguages),
/* harmony export */   loadNamespaces: () => (/* binding */ loadNamespaces),
/* harmony export */   warn: () => (/* binding */ warn),
/* harmony export */   warnOnce: () => (/* binding */ warnOnce)
/* harmony export */ });
function warn() {
  if (console && console.warn) {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    if (isString(args[0])) args[0] = `react-i18next:: ${args[0]}`;
    console.warn(...args);
  }
}
const alreadyWarned = {};
function warnOnce() {
  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }
  if (isString(args[0]) && alreadyWarned[args[0]]) return;
  if (isString(args[0])) alreadyWarned[args[0]] = new Date();
  warn(...args);
}
const loadedClb = (i18n, cb) => () => {
  if (i18n.isInitialized) {
    cb();
  } else {
    const initialized = () => {
      setTimeout(() => {
        i18n.off('initialized', initialized);
      }, 0);
      cb();
    };
    i18n.on('initialized', initialized);
  }
};
const loadNamespaces = (i18n, ns, cb) => {
  i18n.loadNamespaces(ns, loadedClb(i18n, cb));
};
const loadLanguages = (i18n, lng, ns, cb) => {
  if (isString(ns)) ns = [ns];
  ns.forEach(n => {
    if (i18n.options.ns.indexOf(n) < 0) i18n.options.ns.push(n);
  });
  i18n.loadLanguages(lng, loadedClb(i18n, cb));
};
const oldI18nextHasLoadedNamespace = function (ns, i18n) {
  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const lng = i18n.languages[0];
  const fallbackLng = i18n.options ? i18n.options.fallbackLng : false;
  const lastLng = i18n.languages[i18n.languages.length - 1];
  if (lng.toLowerCase() === 'cimode') return true;
  const loadNotPending = (l, n) => {
    const loadState = i18n.services.backendConnector.state[`${l}|${n}`];
    return loadState === -1 || loadState === 2;
  };
  if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18n.services.backendConnector.backend && i18n.isLanguageChangingTo && !loadNotPending(i18n.isLanguageChangingTo, ns)) return false;
  if (i18n.hasResourceBundle(lng, ns)) return true;
  if (!i18n.services.backendConnector.backend || i18n.options.resources && !i18n.options.partialBundledLanguages) return true;
  if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
  return false;
};
const hasLoadedNamespace = function (ns, i18n) {
  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  if (!i18n.languages || !i18n.languages.length) {
    warnOnce('i18n.languages were undefined or empty', i18n.languages);
    return true;
  }
  const isNewerI18next = i18n.options.ignoreJSONStructure !== undefined;
  if (!isNewerI18next) {
    return oldI18nextHasLoadedNamespace(ns, i18n, options);
  }
  return i18n.hasLoadedNamespace(ns, {
    lng: options.lng,
    precheck: (i18nInstance, loadNotPending) => {
      if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18nInstance.services.backendConnector.backend && i18nInstance.isLanguageChangingTo && !loadNotPending(i18nInstance.isLanguageChangingTo, ns)) return false;
    }
  });
};
const getDisplayName = Component => Component.displayName || Component.name || (isString(Component) && Component.length > 0 ? Component : 'Unknown');
const isString = obj => typeof obj === 'string';
const isObject = obj => typeof obj === 'object' && obj !== null;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/withSSR.js":
/*!***********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/withSSR.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withSSR: () => (/* binding */ withSSR)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _useSSR_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useSSR.js */ "../../node_modules/react-i18next/dist/es/useSSR.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");




const withSSR = () => function Extend(WrappedComponent) {
  function I18nextWithSSR(_ref) {
    let {
      initialI18nStore,
      initialLanguage,
      ...rest
    } = _ref;
    (0,_useSSR_js__WEBPACK_IMPORTED_MODULE_1__.useSSR)(initialI18nStore, initialLanguage);
    return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(WrappedComponent, {
      ...rest
    });
  }
  I18nextWithSSR.getInitialProps = (0,_context_js__WEBPACK_IMPORTED_MODULE_2__.composeInitialProps)(WrappedComponent);
  I18nextWithSSR.displayName = `withI18nextSSR(${(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.getDisplayName)(WrappedComponent)})`;
  I18nextWithSSR.WrappedComponent = WrappedComponent;
  return I18nextWithSSR;
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/withTranslation.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/withTranslation.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withTranslation: () => (/* binding */ withTranslation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");



const withTranslation = function (ns) {
  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return function Extend(WrappedComponent) {
    function I18nextWithTranslation(_ref) {
      let {
        forwardedRef,
        ...rest
      } = _ref;
      const [t, i18n, ready] = (0,_useTranslation_js__WEBPACK_IMPORTED_MODULE_1__.useTranslation)(ns, {
        ...rest,
        keyPrefix: options.keyPrefix
      });
      const passDownProps = {
        ...rest,
        t,
        i18n,
        tReady: ready
      };
      if (options.withRef && forwardedRef) {
        passDownProps.ref = forwardedRef;
      } else if (!options.withRef && forwardedRef) {
        passDownProps.forwardedRef = forwardedRef;
      }
      return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(WrappedComponent, passDownProps);
    }
    I18nextWithTranslation.displayName = `withI18nextTranslation(${(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.getDisplayName)(WrappedComponent)})`;
    I18nextWithTranslation.WrappedComponent = WrappedComponent;
    const forwardRef = (props, ref) => (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(I18nextWithTranslation, Object.assign({}, props, {
      forwardedRef: ref
    }));
    return options.withRef ? (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(forwardRef) : I18nextWithTranslation;
  };
};

/***/ }),

/***/ "../../node_modules/react/cjs/react.development.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react/cjs/react.development.js ***!
  \*********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
/* module decorator */ module = __webpack_require__.nmd(module);
/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */


 true &&
  (function () {
    function defineDeprecationWarning(methodName, info) {
      Object.defineProperty(Component.prototype, methodName, {
        get: function () {
          console.warn(
            "%s(...) is deprecated in plain JavaScript React classes. %s",
            info[0],
            info[1]
          );
        }
      });
    }
    function getIteratorFn(maybeIterable) {
      if (null === maybeIterable || "object" !== typeof maybeIterable)
        return null;
      maybeIterable =
        (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||
        maybeIterable["@@iterator"];
      return "function" === typeof maybeIterable ? maybeIterable : null;
    }
    function warnNoop(publicInstance, callerName) {
      publicInstance =
        ((publicInstance = publicInstance.constructor) &&
          (publicInstance.displayName || publicInstance.name)) ||
        "ReactClass";
      var warningKey = publicInstance + "." + callerName;
      didWarnStateUpdateForUnmountedComponent[warningKey] ||
        (console.error(
          "Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",
          callerName,
          publicInstance
        ),
        (didWarnStateUpdateForUnmountedComponent[warningKey] = !0));
    }
    function Component(props, context, updater) {
      this.props = props;
      this.context = context;
      this.refs = emptyObject;
      this.updater = updater || ReactNoopUpdateQueue;
    }
    function ComponentDummy() {}
    function PureComponent(props, context, updater) {
      this.props = props;
      this.context = context;
      this.refs = emptyObject;
      this.updater = updater || ReactNoopUpdateQueue;
    }
    function testStringCoercion(value) {
      return "" + value;
    }
    function checkKeyStringCoercion(value) {
      try {
        testStringCoercion(value);
        var JSCompiler_inline_result = !1;
      } catch (e) {
        JSCompiler_inline_result = !0;
      }
      if (JSCompiler_inline_result) {
        JSCompiler_inline_result = console;
        var JSCompiler_temp_const = JSCompiler_inline_result.error;
        var JSCompiler_inline_result$jscomp$0 =
          ("function" === typeof Symbol &&
            Symbol.toStringTag &&
            value[Symbol.toStringTag]) ||
          value.constructor.name ||
          "Object";
        JSCompiler_temp_const.call(
          JSCompiler_inline_result,
          "The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",
          JSCompiler_inline_result$jscomp$0
        );
        return testStringCoercion(value);
      }
    }
    function getComponentNameFromType(type) {
      if (null == type) return null;
      if ("function" === typeof type)
        return type.$$typeof === REACT_CLIENT_REFERENCE
          ? null
          : type.displayName || type.name || null;
      if ("string" === typeof type) return type;
      switch (type) {
        case REACT_FRAGMENT_TYPE:
          return "Fragment";
        case REACT_PROFILER_TYPE:
          return "Profiler";
        case REACT_STRICT_MODE_TYPE:
          return "StrictMode";
        case REACT_SUSPENSE_TYPE:
          return "Suspense";
        case REACT_SUSPENSE_LIST_TYPE:
          return "SuspenseList";
        case REACT_ACTIVITY_TYPE:
          return "Activity";
      }
      if ("object" === typeof type)
        switch (
          ("number" === typeof type.tag &&
            console.error(
              "Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."
            ),
          type.$$typeof)
        ) {
          case REACT_PORTAL_TYPE:
            return "Portal";
          case REACT_CONTEXT_TYPE:
            return (type.displayName || "Context") + ".Provider";
          case REACT_CONSUMER_TYPE:
            return (type._context.displayName || "Context") + ".Consumer";
          case REACT_FORWARD_REF_TYPE:
            var innerType = type.render;
            type = type.displayName;
            type ||
              ((type = innerType.displayName || innerType.name || ""),
              (type = "" !== type ? "ForwardRef(" + type + ")" : "ForwardRef"));
            return type;
          case REACT_MEMO_TYPE:
            return (
              (innerType = type.displayName || null),
              null !== innerType
                ? innerType
                : getComponentNameFromType(type.type) || "Memo"
            );
          case REACT_LAZY_TYPE:
            innerType = type._payload;
            type = type._init;
            try {
              return getComponentNameFromType(type(innerType));
            } catch (x) {}
        }
      return null;
    }
    function getTaskName(type) {
      if (type === REACT_FRAGMENT_TYPE) return "<>";
      if (
        "object" === typeof type &&
        null !== type &&
        type.$$typeof === REACT_LAZY_TYPE
      )
        return "<...>";
      try {
        var name = getComponentNameFromType(type);
        return name ? "<" + name + ">" : "<...>";
      } catch (x) {
        return "<...>";
      }
    }
    function getOwner() {
      var dispatcher = ReactSharedInternals.A;
      return null === dispatcher ? null : dispatcher.getOwner();
    }
    function UnknownOwner() {
      return Error("react-stack-top-frame");
    }
    function hasValidKey(config) {
      if (hasOwnProperty.call(config, "key")) {
        var getter = Object.getOwnPropertyDescriptor(config, "key").get;
        if (getter && getter.isReactWarning) return !1;
      }
      return void 0 !== config.key;
    }
    function defineKeyPropWarningGetter(props, displayName) {
      function warnAboutAccessingKey() {
        specialPropKeyWarningShown ||
          ((specialPropKeyWarningShown = !0),
          console.error(
            "%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",
            displayName
          ));
      }
      warnAboutAccessingKey.isReactWarning = !0;
      Object.defineProperty(props, "key", {
        get: warnAboutAccessingKey,
        configurable: !0
      });
    }
    function elementRefGetterWithDeprecationWarning() {
      var componentName = getComponentNameFromType(this.type);
      didWarnAboutElementRef[componentName] ||
        ((didWarnAboutElementRef[componentName] = !0),
        console.error(
          "Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release."
        ));
      componentName = this.props.ref;
      return void 0 !== componentName ? componentName : null;
    }
    function ReactElement(
      type,
      key,
      self,
      source,
      owner,
      props,
      debugStack,
      debugTask
    ) {
      self = props.ref;
      type = {
        $$typeof: REACT_ELEMENT_TYPE,
        type: type,
        key: key,
        props: props,
        _owner: owner
      };
      null !== (void 0 !== self ? self : null)
        ? Object.defineProperty(type, "ref", {
            enumerable: !1,
            get: elementRefGetterWithDeprecationWarning
          })
        : Object.defineProperty(type, "ref", { enumerable: !1, value: null });
      type._store = {};
      Object.defineProperty(type._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: 0
      });
      Object.defineProperty(type, "_debugInfo", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: null
      });
      Object.defineProperty(type, "_debugStack", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: debugStack
      });
      Object.defineProperty(type, "_debugTask", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: debugTask
      });
      Object.freeze && (Object.freeze(type.props), Object.freeze(type));
      return type;
    }
    function cloneAndReplaceKey(oldElement, newKey) {
      newKey = ReactElement(
        oldElement.type,
        newKey,
        void 0,
        void 0,
        oldElement._owner,
        oldElement.props,
        oldElement._debugStack,
        oldElement._debugTask
      );
      oldElement._store &&
        (newKey._store.validated = oldElement._store.validated);
      return newKey;
    }
    function isValidElement(object) {
      return (
        "object" === typeof object &&
        null !== object &&
        object.$$typeof === REACT_ELEMENT_TYPE
      );
    }
    function escape(key) {
      var escaperLookup = { "=": "=0", ":": "=2" };
      return (
        "$" +
        key.replace(/[=:]/g, function (match) {
          return escaperLookup[match];
        })
      );
    }
    function getElementKey(element, index) {
      return "object" === typeof element &&
        null !== element &&
        null != element.key
        ? (checkKeyStringCoercion(element.key), escape("" + element.key))
        : index.toString(36);
    }
    function noop$1() {}
    function resolveThenable(thenable) {
      switch (thenable.status) {
        case "fulfilled":
          return thenable.value;
        case "rejected":
          throw thenable.reason;
        default:
          switch (
            ("string" === typeof thenable.status
              ? thenable.then(noop$1, noop$1)
              : ((thenable.status = "pending"),
                thenable.then(
                  function (fulfilledValue) {
                    "pending" === thenable.status &&
                      ((thenable.status = "fulfilled"),
                      (thenable.value = fulfilledValue));
                  },
                  function (error) {
                    "pending" === thenable.status &&
                      ((thenable.status = "rejected"),
                      (thenable.reason = error));
                  }
                )),
            thenable.status)
          ) {
            case "fulfilled":
              return thenable.value;
            case "rejected":
              throw thenable.reason;
          }
      }
      throw thenable;
    }
    function mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {
      var type = typeof children;
      if ("undefined" === type || "boolean" === type) children = null;
      var invokeCallback = !1;
      if (null === children) invokeCallback = !0;
      else
        switch (type) {
          case "bigint":
          case "string":
          case "number":
            invokeCallback = !0;
            break;
          case "object":
            switch (children.$$typeof) {
              case REACT_ELEMENT_TYPE:
              case REACT_PORTAL_TYPE:
                invokeCallback = !0;
                break;
              case REACT_LAZY_TYPE:
                return (
                  (invokeCallback = children._init),
                  mapIntoArray(
                    invokeCallback(children._payload),
                    array,
                    escapedPrefix,
                    nameSoFar,
                    callback
                  )
                );
            }
        }
      if (invokeCallback) {
        invokeCallback = children;
        callback = callback(invokeCallback);
        var childKey =
          "" === nameSoFar ? "." + getElementKey(invokeCallback, 0) : nameSoFar;
        isArrayImpl(callback)
          ? ((escapedPrefix = ""),
            null != childKey &&
              (escapedPrefix =
                childKey.replace(userProvidedKeyEscapeRegex, "$&/") + "/"),
            mapIntoArray(callback, array, escapedPrefix, "", function (c) {
              return c;
            }))
          : null != callback &&
            (isValidElement(callback) &&
              (null != callback.key &&
                ((invokeCallback && invokeCallback.key === callback.key) ||
                  checkKeyStringCoercion(callback.key)),
              (escapedPrefix = cloneAndReplaceKey(
                callback,
                escapedPrefix +
                  (null == callback.key ||
                  (invokeCallback && invokeCallback.key === callback.key)
                    ? ""
                    : ("" + callback.key).replace(
                        userProvidedKeyEscapeRegex,
                        "$&/"
                      ) + "/") +
                  childKey
              )),
              "" !== nameSoFar &&
                null != invokeCallback &&
                isValidElement(invokeCallback) &&
                null == invokeCallback.key &&
                invokeCallback._store &&
                !invokeCallback._store.validated &&
                (escapedPrefix._store.validated = 2),
              (callback = escapedPrefix)),
            array.push(callback));
        return 1;
      }
      invokeCallback = 0;
      childKey = "" === nameSoFar ? "." : nameSoFar + ":";
      if (isArrayImpl(children))
        for (var i = 0; i < children.length; i++)
          (nameSoFar = children[i]),
            (type = childKey + getElementKey(nameSoFar, i)),
            (invokeCallback += mapIntoArray(
              nameSoFar,
              array,
              escapedPrefix,
              type,
              callback
            ));
      else if (((i = getIteratorFn(children)), "function" === typeof i))
        for (
          i === children.entries &&
            (didWarnAboutMaps ||
              console.warn(
                "Using Maps as children is not supported. Use an array of keyed ReactElements instead."
              ),
            (didWarnAboutMaps = !0)),
            children = i.call(children),
            i = 0;
          !(nameSoFar = children.next()).done;

        )
          (nameSoFar = nameSoFar.value),
            (type = childKey + getElementKey(nameSoFar, i++)),
            (invokeCallback += mapIntoArray(
              nameSoFar,
              array,
              escapedPrefix,
              type,
              callback
            ));
      else if ("object" === type) {
        if ("function" === typeof children.then)
          return mapIntoArray(
            resolveThenable(children),
            array,
            escapedPrefix,
            nameSoFar,
            callback
          );
        array = String(children);
        throw Error(
          "Objects are not valid as a React child (found: " +
            ("[object Object]" === array
              ? "object with keys {" + Object.keys(children).join(", ") + "}"
              : array) +
            "). If you meant to render a collection of children, use an array instead."
        );
      }
      return invokeCallback;
    }
    function mapChildren(children, func, context) {
      if (null == children) return children;
      var result = [],
        count = 0;
      mapIntoArray(children, result, "", "", function (child) {
        return func.call(context, child, count++);
      });
      return result;
    }
    function lazyInitializer(payload) {
      if (-1 === payload._status) {
        var ctor = payload._result;
        ctor = ctor();
        ctor.then(
          function (moduleObject) {
            if (0 === payload._status || -1 === payload._status)
              (payload._status = 1), (payload._result = moduleObject);
          },
          function (error) {
            if (0 === payload._status || -1 === payload._status)
              (payload._status = 2), (payload._result = error);
          }
        );
        -1 === payload._status &&
          ((payload._status = 0), (payload._result = ctor));
      }
      if (1 === payload._status)
        return (
          (ctor = payload._result),
          void 0 === ctor &&
            console.error(
              "lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))\n\nDid you accidentally put curly braces around the import?",
              ctor
            ),
          "default" in ctor ||
            console.error(
              "lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",
              ctor
            ),
          ctor.default
        );
      throw payload._result;
    }
    function resolveDispatcher() {
      var dispatcher = ReactSharedInternals.H;
      null === dispatcher &&
        console.error(
          "Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem."
        );
      return dispatcher;
    }
    function noop() {}
    function enqueueTask(task) {
      if (null === enqueueTaskImpl)
        try {
          var requireString = ("require" + Math.random()).slice(0, 7);
          enqueueTaskImpl = (module && module[requireString]).call(
            module,
            "timers"
          ).setImmediate;
        } catch (_err) {
          enqueueTaskImpl = function (callback) {
            !1 === didWarnAboutMessageChannel &&
              ((didWarnAboutMessageChannel = !0),
              "undefined" === typeof MessageChannel &&
                console.error(
                  "This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."
                ));
            var channel = new MessageChannel();
            channel.port1.onmessage = callback;
            channel.port2.postMessage(void 0);
          };
        }
      return enqueueTaskImpl(task);
    }
    function aggregateErrors(errors) {
      return 1 < errors.length && "function" === typeof AggregateError
        ? new AggregateError(errors)
        : errors[0];
    }
    function popActScope(prevActQueue, prevActScopeDepth) {
      prevActScopeDepth !== actScopeDepth - 1 &&
        console.error(
          "You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "
        );
      actScopeDepth = prevActScopeDepth;
    }
    function recursivelyFlushAsyncActWork(returnValue, resolve, reject) {
      var queue = ReactSharedInternals.actQueue;
      if (null !== queue)
        if (0 !== queue.length)
          try {
            flushActQueue(queue);
            enqueueTask(function () {
              return recursivelyFlushAsyncActWork(returnValue, resolve, reject);
            });
            return;
          } catch (error) {
            ReactSharedInternals.thrownErrors.push(error);
          }
        else ReactSharedInternals.actQueue = null;
      0 < ReactSharedInternals.thrownErrors.length
        ? ((queue = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          reject(queue))
        : resolve(returnValue);
    }
    function flushActQueue(queue) {
      if (!isFlushing) {
        isFlushing = !0;
        var i = 0;
        try {
          for (; i < queue.length; i++) {
            var callback = queue[i];
            do {
              ReactSharedInternals.didUsePromise = !1;
              var continuation = callback(!1);
              if (null !== continuation) {
                if (ReactSharedInternals.didUsePromise) {
                  queue[i] = callback;
                  queue.splice(0, i);
                  return;
                }
                callback = continuation;
              } else break;
            } while (1);
          }
          queue.length = 0;
        } catch (error) {
          queue.splice(0, i + 1), ReactSharedInternals.thrownErrors.push(error);
        } finally {
          isFlushing = !1;
        }
      }
    }
    "undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
      "function" ===
        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&
      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());
    var REACT_ELEMENT_TYPE = Symbol.for("react.transitional.element"),
      REACT_PORTAL_TYPE = Symbol.for("react.portal"),
      REACT_FRAGMENT_TYPE = Symbol.for("react.fragment"),
      REACT_STRICT_MODE_TYPE = Symbol.for("react.strict_mode"),
      REACT_PROFILER_TYPE = Symbol.for("react.profiler");
    Symbol.for("react.provider");
    var REACT_CONSUMER_TYPE = Symbol.for("react.consumer"),
      REACT_CONTEXT_TYPE = Symbol.for("react.context"),
      REACT_FORWARD_REF_TYPE = Symbol.for("react.forward_ref"),
      REACT_SUSPENSE_TYPE = Symbol.for("react.suspense"),
      REACT_SUSPENSE_LIST_TYPE = Symbol.for("react.suspense_list"),
      REACT_MEMO_TYPE = Symbol.for("react.memo"),
      REACT_LAZY_TYPE = Symbol.for("react.lazy"),
      REACT_ACTIVITY_TYPE = Symbol.for("react.activity"),
      MAYBE_ITERATOR_SYMBOL = Symbol.iterator,
      didWarnStateUpdateForUnmountedComponent = {},
      ReactNoopUpdateQueue = {
        isMounted: function () {
          return !1;
        },
        enqueueForceUpdate: function (publicInstance) {
          warnNoop(publicInstance, "forceUpdate");
        },
        enqueueReplaceState: function (publicInstance) {
          warnNoop(publicInstance, "replaceState");
        },
        enqueueSetState: function (publicInstance) {
          warnNoop(publicInstance, "setState");
        }
      },
      assign = Object.assign,
      emptyObject = {};
    Object.freeze(emptyObject);
    Component.prototype.isReactComponent = {};
    Component.prototype.setState = function (partialState, callback) {
      if (
        "object" !== typeof partialState &&
        "function" !== typeof partialState &&
        null != partialState
      )
        throw Error(
          "takes an object of state variables to update or a function which returns an object of state variables."
        );
      this.updater.enqueueSetState(this, partialState, callback, "setState");
    };
    Component.prototype.forceUpdate = function (callback) {
      this.updater.enqueueForceUpdate(this, callback, "forceUpdate");
    };
    var deprecatedAPIs = {
        isMounted: [
          "isMounted",
          "Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."
        ],
        replaceState: [
          "replaceState",
          "Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."
        ]
      },
      fnName;
    for (fnName in deprecatedAPIs)
      deprecatedAPIs.hasOwnProperty(fnName) &&
        defineDeprecationWarning(fnName, deprecatedAPIs[fnName]);
    ComponentDummy.prototype = Component.prototype;
    deprecatedAPIs = PureComponent.prototype = new ComponentDummy();
    deprecatedAPIs.constructor = PureComponent;
    assign(deprecatedAPIs, Component.prototype);
    deprecatedAPIs.isPureReactComponent = !0;
    var isArrayImpl = Array.isArray,
      REACT_CLIENT_REFERENCE = Symbol.for("react.client.reference"),
      ReactSharedInternals = {
        H: null,
        A: null,
        T: null,
        S: null,
        V: null,
        actQueue: null,
        isBatchingLegacy: !1,
        didScheduleLegacyUpdate: !1,
        didUsePromise: !1,
        thrownErrors: [],
        getCurrentStack: null,
        recentlyCreatedOwnerStacks: 0
      },
      hasOwnProperty = Object.prototype.hasOwnProperty,
      createTask = console.createTask
        ? console.createTask
        : function () {
            return null;
          };
    deprecatedAPIs = {
      react_stack_bottom_frame: function (callStackForError) {
        return callStackForError();
      }
    };
    var specialPropKeyWarningShown, didWarnAboutOldJSXRuntime;
    var didWarnAboutElementRef = {};
    var unknownOwnerDebugStack = deprecatedAPIs.react_stack_bottom_frame.bind(
      deprecatedAPIs,
      UnknownOwner
    )();
    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));
    var didWarnAboutMaps = !1,
      userProvidedKeyEscapeRegex = /\/+/g,
      reportGlobalError =
        "function" === typeof reportError
          ? reportError
          : function (error) {
              if (
                "object" === typeof window &&
                "function" === typeof window.ErrorEvent
              ) {
                var event = new window.ErrorEvent("error", {
                  bubbles: !0,
                  cancelable: !0,
                  message:
                    "object" === typeof error &&
                    null !== error &&
                    "string" === typeof error.message
                      ? String(error.message)
                      : String(error),
                  error: error
                });
                if (!window.dispatchEvent(event)) return;
              } else if (
                "object" === typeof process &&
                "function" === typeof process.emit
              ) {
                process.emit("uncaughtException", error);
                return;
              }
              console.error(error);
            },
      didWarnAboutMessageChannel = !1,
      enqueueTaskImpl = null,
      actScopeDepth = 0,
      didWarnNoAwaitAct = !1,
      isFlushing = !1,
      queueSeveralMicrotasks =
        "function" === typeof queueMicrotask
          ? function (callback) {
              queueMicrotask(function () {
                return queueMicrotask(callback);
              });
            }
          : enqueueTask;
    deprecatedAPIs = Object.freeze({
      __proto__: null,
      c: function (size) {
        return resolveDispatcher().useMemoCache(size);
      }
    });
    exports.Children = {
      map: mapChildren,
      forEach: function (children, forEachFunc, forEachContext) {
        mapChildren(
          children,
          function () {
            forEachFunc.apply(this, arguments);
          },
          forEachContext
        );
      },
      count: function (children) {
        var n = 0;
        mapChildren(children, function () {
          n++;
        });
        return n;
      },
      toArray: function (children) {
        return (
          mapChildren(children, function (child) {
            return child;
          }) || []
        );
      },
      only: function (children) {
        if (!isValidElement(children))
          throw Error(
            "React.Children.only expected to receive a single React element child."
          );
        return children;
      }
    };
    exports.Component = Component;
    exports.Fragment = REACT_FRAGMENT_TYPE;
    exports.Profiler = REACT_PROFILER_TYPE;
    exports.PureComponent = PureComponent;
    exports.StrictMode = REACT_STRICT_MODE_TYPE;
    exports.Suspense = REACT_SUSPENSE_TYPE;
    exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =
      ReactSharedInternals;
    exports.__COMPILER_RUNTIME = deprecatedAPIs;
    exports.act = function (callback) {
      var prevActQueue = ReactSharedInternals.actQueue,
        prevActScopeDepth = actScopeDepth;
      actScopeDepth++;
      var queue = (ReactSharedInternals.actQueue =
          null !== prevActQueue ? prevActQueue : []),
        didAwaitActCall = !1;
      try {
        var result = callback();
      } catch (error) {
        ReactSharedInternals.thrownErrors.push(error);
      }
      if (0 < ReactSharedInternals.thrownErrors.length)
        throw (
          (popActScope(prevActQueue, prevActScopeDepth),
          (callback = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          callback)
        );
      if (
        null !== result &&
        "object" === typeof result &&
        "function" === typeof result.then
      ) {
        var thenable = result;
        queueSeveralMicrotasks(function () {
          didAwaitActCall ||
            didWarnNoAwaitAct ||
            ((didWarnNoAwaitAct = !0),
            console.error(
              "You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"
            ));
        });
        return {
          then: function (resolve, reject) {
            didAwaitActCall = !0;
            thenable.then(
              function (returnValue) {
                popActScope(prevActQueue, prevActScopeDepth);
                if (0 === prevActScopeDepth) {
                  try {
                    flushActQueue(queue),
                      enqueueTask(function () {
                        return recursivelyFlushAsyncActWork(
                          returnValue,
                          resolve,
                          reject
                        );
                      });
                  } catch (error$0) {
                    ReactSharedInternals.thrownErrors.push(error$0);
                  }
                  if (0 < ReactSharedInternals.thrownErrors.length) {
                    var _thrownError = aggregateErrors(
                      ReactSharedInternals.thrownErrors
                    );
                    ReactSharedInternals.thrownErrors.length = 0;
                    reject(_thrownError);
                  }
                } else resolve(returnValue);
              },
              function (error) {
                popActScope(prevActQueue, prevActScopeDepth);
                0 < ReactSharedInternals.thrownErrors.length
                  ? ((error = aggregateErrors(
                      ReactSharedInternals.thrownErrors
                    )),
                    (ReactSharedInternals.thrownErrors.length = 0),
                    reject(error))
                  : reject(error);
              }
            );
          }
        };
      }
      var returnValue$jscomp$0 = result;
      popActScope(prevActQueue, prevActScopeDepth);
      0 === prevActScopeDepth &&
        (flushActQueue(queue),
        0 !== queue.length &&
          queueSeveralMicrotasks(function () {
            didAwaitActCall ||
              didWarnNoAwaitAct ||
              ((didWarnNoAwaitAct = !0),
              console.error(
                "A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:\n\nawait act(() => ...)"
              ));
          }),
        (ReactSharedInternals.actQueue = null));
      if (0 < ReactSharedInternals.thrownErrors.length)
        throw (
          ((callback = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          callback)
        );
      return {
        then: function (resolve, reject) {
          didAwaitActCall = !0;
          0 === prevActScopeDepth
            ? ((ReactSharedInternals.actQueue = queue),
              enqueueTask(function () {
                return recursivelyFlushAsyncActWork(
                  returnValue$jscomp$0,
                  resolve,
                  reject
                );
              }))
            : resolve(returnValue$jscomp$0);
        }
      };
    };
    exports.cache = function (fn) {
      return function () {
        return fn.apply(null, arguments);
      };
    };
    exports.captureOwnerStack = function () {
      var getCurrentStack = ReactSharedInternals.getCurrentStack;
      return null === getCurrentStack ? null : getCurrentStack();
    };
    exports.cloneElement = function (element, config, children) {
      if (null === element || void 0 === element)
        throw Error(
          "The argument must be a React element, but you passed " +
            element +
            "."
        );
      var props = assign({}, element.props),
        key = element.key,
        owner = element._owner;
      if (null != config) {
        var JSCompiler_inline_result;
        a: {
          if (
            hasOwnProperty.call(config, "ref") &&
            (JSCompiler_inline_result = Object.getOwnPropertyDescriptor(
              config,
              "ref"
            ).get) &&
            JSCompiler_inline_result.isReactWarning
          ) {
            JSCompiler_inline_result = !1;
            break a;
          }
          JSCompiler_inline_result = void 0 !== config.ref;
        }
        JSCompiler_inline_result && (owner = getOwner());
        hasValidKey(config) &&
          (checkKeyStringCoercion(config.key), (key = "" + config.key));
        for (propName in config)
          !hasOwnProperty.call(config, propName) ||
            "key" === propName ||
            "__self" === propName ||
            "__source" === propName ||
            ("ref" === propName && void 0 === config.ref) ||
            (props[propName] = config[propName]);
      }
      var propName = arguments.length - 2;
      if (1 === propName) props.children = children;
      else if (1 < propName) {
        JSCompiler_inline_result = Array(propName);
        for (var i = 0; i < propName; i++)
          JSCompiler_inline_result[i] = arguments[i + 2];
        props.children = JSCompiler_inline_result;
      }
      props = ReactElement(
        element.type,
        key,
        void 0,
        void 0,
        owner,
        props,
        element._debugStack,
        element._debugTask
      );
      for (key = 2; key < arguments.length; key++)
        (owner = arguments[key]),
          isValidElement(owner) && owner._store && (owner._store.validated = 1);
      return props;
    };
    exports.createContext = function (defaultValue) {
      defaultValue = {
        $$typeof: REACT_CONTEXT_TYPE,
        _currentValue: defaultValue,
        _currentValue2: defaultValue,
        _threadCount: 0,
        Provider: null,
        Consumer: null
      };
      defaultValue.Provider = defaultValue;
      defaultValue.Consumer = {
        $$typeof: REACT_CONSUMER_TYPE,
        _context: defaultValue
      };
      defaultValue._currentRenderer = null;
      defaultValue._currentRenderer2 = null;
      return defaultValue;
    };
    exports.createElement = function (type, config, children) {
      for (var i = 2; i < arguments.length; i++) {
        var node = arguments[i];
        isValidElement(node) && node._store && (node._store.validated = 1);
      }
      i = {};
      node = null;
      if (null != config)
        for (propName in (didWarnAboutOldJSXRuntime ||
          !("__self" in config) ||
          "key" in config ||
          ((didWarnAboutOldJSXRuntime = !0),
          console.warn(
            "Your app (or one of its dependencies) is using an outdated JSX transform. Update to the modern JSX transform for faster performance: https://react.dev/link/new-jsx-transform"
          )),
        hasValidKey(config) &&
          (checkKeyStringCoercion(config.key), (node = "" + config.key)),
        config))
          hasOwnProperty.call(config, propName) &&
            "key" !== propName &&
            "__self" !== propName &&
            "__source" !== propName &&
            (i[propName] = config[propName]);
      var childrenLength = arguments.length - 2;
      if (1 === childrenLength) i.children = children;
      else if (1 < childrenLength) {
        for (
          var childArray = Array(childrenLength), _i = 0;
          _i < childrenLength;
          _i++
        )
          childArray[_i] = arguments[_i + 2];
        Object.freeze && Object.freeze(childArray);
        i.children = childArray;
      }
      if (type && type.defaultProps)
        for (propName in ((childrenLength = type.defaultProps), childrenLength))
          void 0 === i[propName] && (i[propName] = childrenLength[propName]);
      node &&
        defineKeyPropWarningGetter(
          i,
          "function" === typeof type
            ? type.displayName || type.name || "Unknown"
            : type
        );
      var propName = 1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;
      return ReactElement(
        type,
        node,
        void 0,
        void 0,
        getOwner(),
        i,
        propName ? Error("react-stack-top-frame") : unknownOwnerDebugStack,
        propName ? createTask(getTaskName(type)) : unknownOwnerDebugTask
      );
    };
    exports.createRef = function () {
      var refObject = { current: null };
      Object.seal(refObject);
      return refObject;
    };
    exports.forwardRef = function (render) {
      null != render && render.$$typeof === REACT_MEMO_TYPE
        ? console.error(
            "forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."
          )
        : "function" !== typeof render
          ? console.error(
              "forwardRef requires a render function but was given %s.",
              null === render ? "null" : typeof render
            )
          : 0 !== render.length &&
            2 !== render.length &&
            console.error(
              "forwardRef render functions accept exactly two parameters: props and ref. %s",
              1 === render.length
                ? "Did you forget to use the ref parameter?"
                : "Any additional parameter will be undefined."
            );
      null != render &&
        null != render.defaultProps &&
        console.error(
          "forwardRef render functions do not support defaultProps. Did you accidentally pass a React component?"
        );
      var elementType = { $$typeof: REACT_FORWARD_REF_TYPE, render: render },
        ownName;
      Object.defineProperty(elementType, "displayName", {
        enumerable: !1,
        configurable: !0,
        get: function () {
          return ownName;
        },
        set: function (name) {
          ownName = name;
          render.name ||
            render.displayName ||
            (Object.defineProperty(render, "name", { value: name }),
            (render.displayName = name));
        }
      });
      return elementType;
    };
    exports.isValidElement = isValidElement;
    exports.lazy = function (ctor) {
      return {
        $$typeof: REACT_LAZY_TYPE,
        _payload: { _status: -1, _result: ctor },
        _init: lazyInitializer
      };
    };
    exports.memo = function (type, compare) {
      null == type &&
        console.error(
          "memo: The first argument must be a component. Instead received: %s",
          null === type ? "null" : typeof type
        );
      compare = {
        $$typeof: REACT_MEMO_TYPE,
        type: type,
        compare: void 0 === compare ? null : compare
      };
      var ownName;
      Object.defineProperty(compare, "displayName", {
        enumerable: !1,
        configurable: !0,
        get: function () {
          return ownName;
        },
        set: function (name) {
          ownName = name;
          type.name ||
            type.displayName ||
            (Object.defineProperty(type, "name", { value: name }),
            (type.displayName = name));
        }
      });
      return compare;
    };
    exports.startTransition = function (scope) {
      var prevTransition = ReactSharedInternals.T,
        currentTransition = {};
      ReactSharedInternals.T = currentTransition;
      currentTransition._updatedFibers = new Set();
      try {
        var returnValue = scope(),
          onStartTransitionFinish = ReactSharedInternals.S;
        null !== onStartTransitionFinish &&
          onStartTransitionFinish(currentTransition, returnValue);
        "object" === typeof returnValue &&
          null !== returnValue &&
          "function" === typeof returnValue.then &&
          returnValue.then(noop, reportGlobalError);
      } catch (error) {
        reportGlobalError(error);
      } finally {
        null === prevTransition &&
          currentTransition._updatedFibers &&
          ((scope = currentTransition._updatedFibers.size),
          currentTransition._updatedFibers.clear(),
          10 < scope &&
            console.warn(
              "Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."
            )),
          (ReactSharedInternals.T = prevTransition);
      }
    };
    exports.unstable_useCacheRefresh = function () {
      return resolveDispatcher().useCacheRefresh();
    };
    exports.use = function (usable) {
      return resolveDispatcher().use(usable);
    };
    exports.useActionState = function (action, initialState, permalink) {
      return resolveDispatcher().useActionState(
        action,
        initialState,
        permalink
      );
    };
    exports.useCallback = function (callback, deps) {
      return resolveDispatcher().useCallback(callback, deps);
    };
    exports.useContext = function (Context) {
      var dispatcher = resolveDispatcher();
      Context.$$typeof === REACT_CONSUMER_TYPE &&
        console.error(
          "Calling useContext(Context.Consumer) is not supported and will cause bugs. Did you mean to call useContext(Context) instead?"
        );
      return dispatcher.useContext(Context);
    };
    exports.useDebugValue = function (value, formatterFn) {
      return resolveDispatcher().useDebugValue(value, formatterFn);
    };
    exports.useDeferredValue = function (value, initialValue) {
      return resolveDispatcher().useDeferredValue(value, initialValue);
    };
    exports.useEffect = function (create, createDeps, update) {
      null == create &&
        console.warn(
          "React Hook useEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      var dispatcher = resolveDispatcher();
      if ("function" === typeof update)
        throw Error(
          "useEffect CRUD overload is not enabled in this build of React."
        );
      return dispatcher.useEffect(create, createDeps);
    };
    exports.useId = function () {
      return resolveDispatcher().useId();
    };
    exports.useImperativeHandle = function (ref, create, deps) {
      return resolveDispatcher().useImperativeHandle(ref, create, deps);
    };
    exports.useInsertionEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useInsertionEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useInsertionEffect(create, deps);
    };
    exports.useLayoutEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useLayoutEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useLayoutEffect(create, deps);
    };
    exports.useMemo = function (create, deps) {
      return resolveDispatcher().useMemo(create, deps);
    };
    exports.useOptimistic = function (passthrough, reducer) {
      return resolveDispatcher().useOptimistic(passthrough, reducer);
    };
    exports.useReducer = function (reducer, initialArg, init) {
      return resolveDispatcher().useReducer(reducer, initialArg, init);
    };
    exports.useRef = function (initialValue) {
      return resolveDispatcher().useRef(initialValue);
    };
    exports.useState = function (initialState) {
      return resolveDispatcher().useState(initialState);
    };
    exports.useSyncExternalStore = function (
      subscribe,
      getSnapshot,
      getServerSnapshot
    ) {
      return resolveDispatcher().useSyncExternalStore(
        subscribe,
        getSnapshot,
        getServerSnapshot
      );
    };
    exports.useTransition = function () {
      return resolveDispatcher().useTransition();
    };
    exports.version = "19.1.1";
    "undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
      "function" ===
        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&
      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());
  })();


/***/ }),

/***/ "../../node_modules/react/index.js":
/*!*****************************************!*\
  !*** ../../node_modules/react/index.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


if (false) // removed by dead control flow
{} else {
  module.exports = __webpack_require__(/*! ./cjs/react.development.js */ "../../node_modules/react/cjs/react.development.js");
}


/***/ }),

/***/ "../../node_modules/void-elements/index.js":
/*!*************************************************!*\
  !*** ../../node_modules/void-elements/index.js ***!
  \*************************************************/
/***/ ((module) => {

/**
 * This file automatically generated from `pre-publish.js`.
 * Do not manually edit.
 */

module.exports = {
  "area": true,
  "base": true,
  "br": true,
  "col": true,
  "embed": true,
  "hr": true,
  "img": true,
  "input": true,
  "link": true,
  "meta": true,
  "param": true,
  "source": true,
  "track": true,
  "wbr": true
};


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************!*\
  !*** ./client/src/launchbar.ts ***!
  \*********************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace-platform */ "../../node_modules/@openfin/workspace-platform/index.js");
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__);

document.addEventListener("DOMContentLoaded", async () => {
    // create browser window with view
    const createBrowserWinBtn = document.querySelector("#launch-browser-window");
    if (createBrowserWinBtn) {
        createBrowserWinBtn.addEventListener("click", async () => createBrowserWindow());
    }
    // create browser window with no save requirement
    const createBrowserWinNoSaveBtn = document.querySelector("#launch-browser-window-no-save");
    if (createBrowserWinNoSaveBtn) {
        createBrowserWinNoSaveBtn.addEventListener("click", createBrowserWindowWithoutRequiringSave);
    }
    // create browser window maximized
    const createBrowserMaximized = document.querySelector("#launch-browser-window-maximized");
    if (createBrowserMaximized) {
        createBrowserMaximized.addEventListener("click", createBrowserWindowMaximized);
    }
    // create browser window with custom save page button
    const customToolbarBtn = document.querySelector("#launch-browser-window-with-custom-btn");
    if (customToolbarBtn) {
        customToolbarBtn.addEventListener("click", createCustomToolbarWindow);
    }
    // create browser window with single page and no tab
    const singlePageBrowserWinNoTabBtn = document.querySelector("#launch-nopagetab-browser-window");
    if (singlePageBrowserWinNoTabBtn) {
        singlePageBrowserWinNoTabBtn.addEventListener("click", createSinglePageNoTabWindow);
    }
    // create browser window with multiple pages
    const multiPageBrowserWinBtn = document.querySelector("#launch-multipage-browser-window");
    if (multiPageBrowserWinBtn) {
        multiPageBrowserWinBtn.addEventListener("click", createMultiPageWindow);
    }
    // create browser window with fixed views
    const fixedViews = document.querySelector("#launch-fixed-views");
    if (fixedViews) {
        fixedViews.addEventListener("click", createWindowWithFixedViews);
    }
    // get all browser pages
    const getBrowserPagesBtn = document.querySelector("#get-browser-pages");
    if (getBrowserPagesBtn) {
        getBrowserPagesBtn.addEventListener("click", async () => {
            await fin.me.showDeveloperTools();
            const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
            const lastFocusedWindow = await platform.Browser.getLastFocusedWindow();
            if (lastFocusedWindow) {
                const pages = await platform.Browser.getAllAttachedPages();
                const lastFocusedWindowIdentity = await platform.Browser.getLastFocusedWindow();
                if (lastFocusedWindowIdentity) {
                    const { uuid, name } = lastFocusedWindowIdentity;
                    const wrappedBrowserWindow = platform.Browser.wrapSync({ uuid, name });
                    const lastBrowserWindowPages = await wrappedBrowserWindow.getPages();
                    const unsavedPages = lastBrowserWindowPages.filter((page) => page.hasUnsavedChanges);
                    console.dir({ message: "All PAGES", pages });
                    console.dir({ message: "UNSAVED PAGES", unsavedPages });
                    console.dir({ message: "LAST FOCUSED WINDOW", wrappedBrowserWindow });
                }
            }
        });
    }
    // Create browser window with fixed views
    const singleLockedPage = document.querySelector("#launch-single-locked-page");
    if (singleLockedPage) {
        singleLockedPage.addEventListener("click", createWindowWithLockedPage);
    }
    // quit launcher / browser
    const quitBtn = document.querySelector("#quit");
    if (quitBtn) {
        quitBtn.addEventListener("click", async () => {
            const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
            await platform.quit();
        });
    }
});
/**
 * Create a browser window.
 * @param hasUnsavedChanges Determines if the window has unsaved changed.
 * @returns The created window.
 */
async function createBrowserWindow(hasUnsavedChanges = true) {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout(), hasUnsavedChanges);
    const pages = [page];
    const options = {
        workspacePlatform: { pages }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a browser window which has changes so required saving.
 * @returns The created browser window.
 */
async function createBrowserWindowWithoutRequiringSave() {
    return createBrowserWindow(false);
}
/**
 * Create a browser window in its maximized state.
 * @returns The created browser window.
 */
async function createBrowserWindowMaximized() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const pages = [page];
    const options = {
        workspacePlatform: { pages },
        state: "maximized"
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a browser window which has a single page and hidden tabs.
 * @returns The created browser window.
 */
async function createSinglePageNoTabWindow() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const pages = [page];
    const options = {
        workspacePlatform: { pages, disableMultiplePages: true },
        experimental: {
            showFavicons: false
        }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a window which has a custom toolbar.
 * @returns The created browser window.
 */
async function createCustomToolbarWindow() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const pages = [page];
    const toolbarOptions = {
        buttons: [
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Save Current Page",
                iconUrl: "https://www.openfin.co/favicon.ico",
                action: {
                    id: "custom-save-page",
                    customData: {
                        pageId: page.pageId,
                        layout: page.layout
                    }
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Rename Current Page",
                iconUrl: "https://www.openfin.co/favicon.ico",
                action: {
                    id: "rename-current-page"
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Announce",
                iconUrl: "https://built-on-openfin.github.io/workspace-starter/workspace/v21.0.0/register-with-browser/icons/announce.svg",
                action: {
                    id: "announce"
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Print",
                iconUrl: "https://built-on-openfin.github.io/workspace-starter/workspace/v21.0.0/register-with-browser/icons/print.svg",
                action: {
                    id: "custom-print"
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.ShowHideTabs
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.ColorLinking
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.PresetLayouts
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.LockUnlockPage
            }
        ]
    };
    const options = {
        workspacePlatform: { pages, toolbarOptions }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a window which has multiple pages.
 * @returns The created browser window.
 */
async function createMultiPageWindow() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const page1 = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const page2 = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const pages = [page, page1, page2];
    const options = {
        workspacePlatform: { pages }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a window with a locked page.
 * @returns The created browser window.
 */
async function createWindowWithLockedPage() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const page1 = await createPageWithLayout("Locked Page", createDefaultPageLayout());
    const lockPage1 = { isLocked: true, ...page1 };
    const pages = [page, lockPage1];
    const toolbarOptions = {
        buttons: [
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Save Current Page",
                iconUrl: "https://www.openfin.co/favicon.ico",
                action: {
                    id: "custom-save-page",
                    customData: {
                        pageId: page.pageId,
                        layout: page.layout
                    }
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Manual Lock Page",
                iconUrl: "https://built-on-openfin.github.io/workspace-starter/workspace/v21.0.0/register-with-browser/icons/lock.svg",
                action: {
                    id: "lock-page-toggle"
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.ShowHideTabs
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.ColorLinking
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.PresetLayouts
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.SavePage
            }
        ]
    };
    const options = {
        workspacePlatform: { pages, toolbarOptions }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a window which has fixed views.
 * @returns The created browser window.
 */
async function createWindowWithFixedViews() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const page2 = await createPageWithLayout("Untitled Page (2)", createDefaultPageLayout());
    page.panels = [
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Top,
            height: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/workspace/v21.0.0/register-with-browser/html/top-panel.html"
            }
        },
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Left,
            width: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/workspace/v21.0.0/register-with-browser/html/left-panel.html"
            }
        },
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Right,
            width: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/workspace/v21.0.0/register-with-browser/html/right-panel.html"
            }
        },
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Bottom,
            height: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/workspace/v21.0.0/register-with-browser/html/bottom-panel.html"
            }
        }
    ];
    page2.panels = [
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Top,
            height: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/workspace/v21.0.0/register-with-browser/html/top-panel.html"
            }
        }
    ];
    const pages = [page, page2];
    const options = {
        workspacePlatform: { pages }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a page with a specific layout.
 * @param title The title of the page.
 * @param layout The layout for the page.
 * @param hasUnsavedChanges Flag to determine if it has unsaved changed.
 * @returns The created page.
 */
async function createPageWithLayout(title, layout, hasUnsavedChanges = true) {
    return {
        pageId: randomUUID(),
        title,
        layout: {
            ...layout,
            layoutDetails: { layoutId: `layout-${randomUUID()}` }
        },
        isReadOnly: false,
        hasUnsavedChanges
    };
}
/**
 * Create the default page layout.
 * @returns The default page layout.
 */
function createDefaultPageLayout() {
    return {
        content: [
            {
                type: "stack",
                content: [
                    {
                        type: "component",
                        componentName: "view",
                        componentState: {
                            uuid: fin.me.uuid,
                            name: `${randomUUID()}-v1`,
                            url: "https://examples.com"
                        }
                    },
                    {
                        type: "component",
                        componentName: "view",
                        componentState: {
                            uuid: fin.me.uuid,
                            name: `${randomUUID()}-v2`,
                            url: "https://openfin.co"
                        }
                    }
                ]
            }
        ]
    };
}
/**
 * Polyfills randomUUID if running in a non-secure context.
 * @returns The random UUID.
 */
function randomUUID() {
    if ("randomUUID" in window.crypto) {
        // eslint-disable-next-line no-restricted-syntax
        return window.crypto.randomUUID();
    }
    // Polyfill the window.crypto.randomUUID if we are running in a non secure context that doesn't have it
    // we are still using window.crypto.getRandomValues which is always available
    // https://stackoverflow.com/a/2117523/2800218
    /**
     * Get random hex value.
     * @param c The number to base the random value on.
     * @returns The random value.
     */
    function getRandomHex(c) {
        // eslint-disable-next-line no-bitwise
        const rnd = window.crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (Number(c) / 4));
        return (
        // eslint-disable-next-line no-bitwise
        (Number(c) ^ rnd).toString(16));
    }
    return "10000000-1000-4000-8000-100000000000".replace(/[018]/g, getRandomHex);
}

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LDRCQUE0QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLHVCQUF1QjtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCwyQ0FBMkMsSUFBSTtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNEVBQTRFLGVBQWU7QUFDM0YsYUFBYTtBQUNiLDRFQUE0RSw0QkFBNEI7QUFDeEcsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCw2Q0FBNkM7QUFDdkc7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7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QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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SztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsZ0ZBQWdGLEVBQUU7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtGQUErRixhQUFhO0FBQzVHO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRyxlQUFlO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsNEJBQTRCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCwrQ0FBK0MsNkJBQTZCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxQkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHlDQUF5QztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxP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QyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFGLE9BQU87UUFDTixzQ0FBc0M7UUFDdEMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUM5QixDQUFDO0lBQ0gsQ0FBQztJQUNELE9BQU8sc0NBQXNDLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUMvRSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtL2luZGV4LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL2RleGllL2Rpc3QvZGV4aWUuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvZGV4aWUvaW1wb3J0LXdyYXBwZXIubWpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL2h0bWwtcGFyc2Utc3RyaW5naWZ5L2Rpc3QvaHRtbC1wYXJzZS1zdHJpbmdpZnkubW9kdWxlLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL2kxOG5leHQvZGlzdC9janMvaTE4bmV4dC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2guZGVib3VuY2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL0kxOG5leHRQcm92aWRlci5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvVHJhbnMuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL1RyYW5zV2l0aG91dENvbnRleHQuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL1RyYW5zbGF0aW9uLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9jb250ZXh0LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvaTE4bkluc3RhbmNlLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvaW5pdFJlYWN0STE4bmV4dC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvdW5lc2NhcGUuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL3VzZVNTUi5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvdXNlVHJhbnNsYXRpb24uanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL3V0aWxzLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy93aXRoU1NSLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy93aXRoVHJhbnNsYXRpb24uanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QvY2pzL3JlYWN0LmRldmVsb3BtZW50LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0L2luZGV4LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3ZvaWQtZWxlbWVudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvd2VicGFjay9ydW50aW1lL25vZGUgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4vY2xpZW50L3NyYy9sYXVuY2hiYXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKCgpPT57dmFyIGU9ezg0NzooZSx0KT0+e3ZhciBhPXsyMzQ2OmZ1bmN0aW9uKGUsdCxhKXt2YXIgbj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmdldE1vc3RSZWFkYWJsZT10LmRhcmtlbkNvbG9yPXQubGlnaHRlbkNvbG9yPXZvaWQgMDtjb25zdCBvPW4oYSg2NTM1KSk7dC5saWdodGVuQ29sb3I9KGUsdCk9PnIoZSxcImxpZ2h0ZW5cIix0KSx0LmRhcmtlbkNvbG9yPShlLHQpPT5yKGUsXCJkYXJrZW5cIix0KTtjb25zdCByPShlLHQsYSk9PntpZihhJiYoYTwwfHxhPjEwMCkpdGhyb3cgbmV3IEVycm9yKGAke2F9IG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxMDBgKTtyZXR1cm4oMCxvLmRlZmF1bHQpKGUpW3RdKGEpLnRvU3RyaW5nKCl9O3QuZ2V0TW9zdFJlYWRhYmxlPShlLHQpPT5vLmRlZmF1bHQubW9zdFJlYWRhYmxlKGUsdCkudG9IZXhTdHJpbmcoKX0sMjMxNzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSWNvblNpemU9dC5UcmFuc2l0aW9uPXQuTGluZUhlaWdodD10LkZvbnRXZWlnaHQ9dC5Gb250U2l6ZT10LkZvbnRGYW1pbHk9dC5TaGFkb3c9dC5SYWRpdXM9dC5Vbml0UHg9dC5Vbml0PXQuU2l6ZU5hbWU9dC5TaXplPXQuQ29sb3I9dm9pZCAwLHQuQ29sb3I9e3doaXRlOlwiI0ZGRkZGRlwiLGxpZ2h0R3JheTE6XCIjRkFGQkZFXCIsbGlnaHRHcmF5MjpcIiNGM0Y1RjhcIixsaWdodEdyYXkzOlwiI0VDRUVGMVwiLGxpZ2h0R3JheTQ6XCIjRERERkU0XCIsbGlnaHRHcmF5NTpcIiNDOUNCRDJcIixuZXV0cmFsR3JheTpcIiM3RDgwOEFcIixuZXV0cmFsR3JheTgwOlwicmdiYSgxMjUsMTI4LDEzOCwwLjgpXCIsc2lsdmVyR3JheTpcIiNDMEMxQzJcIixkYXJrR3JheTE6XCIjNTM1NjVGXCIsZGFya0dyYXkyOlwiIzM4M0E0MFwiLGRhcmtHcmF5MzpcIiMyRjMxMzZcIixkYXJrR3JheTQ6XCIjMjQyNjJCXCIsZGFya0dyYXk1OlwiIzFFMUYyM1wiLGRhcmtHcmF5NjpcIiMxMTEyMTRcIixvcGVuRmluRGFya2VzdDpcIiMzRDM5Q0RcIixvcGVuRmluRGFya2VyOlwiIzQ2NDJFMFwiLG9wZW5GaW46XCIjNTA0Q0ZGXCIsb3BlbkZpbkxpZ2h0OlwiIzUyNTRGQlwiLG9wZW5GaW5MaWdodGVyOlwiIzVDNUVGRVwiLG9wZW5GaW5MaWdodGVzdDpcIiM2ODY0RkZcIixmdW5jdGlvbmFsMTpcIiMyMDc3MzVcIixmdW5jdGlvbmFsMjpcIiM0NkM4RjFcIixmdW5jdGlvbmFsMzpcIiMwQTc2RDNcIixmdW5jdGlvbmFsNDpcIiM2Q0FERTVcIixmdW5jdGlvbmFsNTpcIiMwQTc2RDNcIixmdW5jdGlvbmFsNjpcIiM4ODJCRkVcIixmdW5jdGlvbmFsNzpcIiNGMzE4MThcIixmdW5jdGlvbmFsODpcIiNDOTM0MDBcIixmdW5jdGlvbmFsOTpcIiNGRjVFNjBcIixmdW5jdGlvbmFsMTA6XCIjRjQ4RjAwXCIscHVycGxlOlwiIzhDNjFGRlwiLGxpZ2h0Ymx1ZTpcIiMzNkMzRkVcIixhcXVhOlwiIzAwQ0M4OFwiLHllbGxvdzpcIiNGRkVCMDBcIixzYWxtb246XCIjRkY4QzRDXCIscGluazpcIiNGRjVFNjBcIixsaWdodHBpbms6XCIjRkY4RkI4XCIsd2hpdGUwMDpcInJnYmEoMjU1LDI1NSwyNTUsMC4wKVwiLHdoaXRlMTA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuMSlcIix3aGl0ZTIwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjIpXCIsd2hpdGUzMDpcInJnYmEoMjU1LDI1NSwyNTUsMC4zKVwiLHdoaXRlNDA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuNClcIix3aGl0ZTUwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjUpXCIsd2hpdGU2MDpcInJnYmEoMjU1LDI1NSwyNTUsMC42KVwiLHdoaXRlNzA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuNylcIix3aGl0ZTgwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCIsd2hpdGU5MDpcInJnYmEoMjU1LDI1NSwyNTUsMC45KVwiLGJsYWNrMDA6XCJyZ2JhKDAsMCwwLDAuMClcIixibGFjazEwOlwicmdiYSgwLDAsMCwwLjEpXCIsYmxhY2syMDpcInJnYmEoMCwwLDAsMC4yKVwiLGJsYWNrMzA6XCJyZ2JhKDAsMCwwLDAuMylcIixibGFjazQwOlwicmdiYSgwLDAsMCwwLjQpXCIsYmxhY2s1MDpcInJnYmEoMCwwLDAsMC41KVwiLGJsYWNrNjA6XCJyZ2JhKDAsMCwwLDAuNilcIixibGFjazcwOlwicmdiYSgwLDAsMCwwLjcpXCIsYmxhY2s4MDpcInJnYmEoMCwwLDAsMC44KVwiLGJsYWNrOTA6XCJyZ2JhKDAsMCwwLDAuOSlcIix0cmFuc3BhcmVudDpcInRyYW5zcGFyZW50XCJ9LHQuU2l6ZT17eHNtYWxsOlwieHNtYWxsXCIsc21hbGw6XCJzbWFsbFwiLGJhc2U6XCJiYXNlXCIsbGFyZ2U6XCJsYXJnZVwiLHhsYXJnZTpcInhsYXJnZVwiLHh4bGFyZ2U6XCJ4eGxhcmdlXCIseHh4bGFyZ2U6XCJ4eHhsYXJnZVwiLHh4eHhsYXJnZTpcInh4eHhsYXJnZVwifSx0LlNpemVOYW1lPXtbdC5TaXplLnhzbWFsbF06XCJFeHRyYSBTbWFsbFwiLFt0LlNpemUuc21hbGxdOlwiU21hbGxcIixbdC5TaXplLmJhc2VdOlwiQmFzZVwiLFt0LlNpemUubGFyZ2VdOlwiTGFyZ2VcIixbdC5TaXplLnhsYXJnZV06XCJFeHRyYSBMYXJnZVwiLFt0LlNpemUueHhsYXJnZV06XCIyWCBMYXJnZVwiLFt0LlNpemUueHh4bGFyZ2VdOlwiM1ggTGFyZ2VcIixbdC5TaXplLnh4eHhsYXJnZV06XCI0WCBMYXJnZVwifSx0LlVuaXQ9e1t0LlNpemUueHNtYWxsXTo0LFt0LlNpemUuc21hbGxdOjgsW3QuU2l6ZS5iYXNlXToxMixbdC5TaXplLmxhcmdlXToxNixbdC5TaXplLnhsYXJnZV06MjAsW3QuU2l6ZS54eGxhcmdlXToyNCxbdC5TaXplLnh4eGxhcmdlXTozMixbdC5TaXplLnh4eHhsYXJnZV06NDh9LHQuVW5pdFB4PXtbdC5TaXplLnhzbWFsbF06XCI0cHhcIixbdC5TaXplLnNtYWxsXTpcIjhweFwiLFt0LlNpemUuYmFzZV06XCIxMnB4XCIsW3QuU2l6ZS5sYXJnZV06XCIxNnB4XCIsW3QuU2l6ZS54bGFyZ2VdOlwiMjBweFwiLFt0LlNpemUueHhsYXJnZV06XCIyNHB4XCIsW3QuU2l6ZS54eHhsYXJnZV06XCIzMnB4XCIsW3QuU2l6ZS54eHh4bGFyZ2VdOlwiNDhweFwifSx0LlJhZGl1cz17W3QuU2l6ZS54c21hbGxdOlwiMnB4XCIsW3QuU2l6ZS5zbWFsbF06XCI0cHhcIixbdC5TaXplLmJhc2VdOlwiOHB4XCIsW3QuU2l6ZS5sYXJnZV06XCIyNHB4XCIscGlsbDpcIjEwMHZoXCIscm91bmQ6XCI1MCVcIixub25lOlwiMFwifSx0LlNoYWRvdz17W3QuU2l6ZS5iYXNlXTpcIjAgNHB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMjUpXCJ9LHQuRm9udEZhbWlseT1bXCJJbnRlclwiLFwic3lzdGVtLXVpXCIsXCJCbGlua01hY1N5c3RlbUZvbnRcIixcIlNlZ29lIFVJXCIsXCJSb2JvdG9cIixcIk94eWdlbi1TYW5zXCIsXCJVYnVudHVcIixcIkNhbnRhcmVsbFwiLFwiSGVsdmV0aWNhIE5ldWVcIixcInNhbnMtc2VyaWZcIl0uam9pbihcIixcIiksdC5Gb250U2l6ZT17W3QuU2l6ZS54c21hbGxdOlwiOHB4XCIsW3QuU2l6ZS5zbWFsbF06XCIxMHB4XCIsW3QuU2l6ZS5iYXNlXTpcIjEycHhcIixbdC5TaXplLmxhcmdlXTpcIjE0cHhcIixbdC5TaXplLnhsYXJnZV06XCIxNnB4XCIsW3QuU2l6ZS54eGxhcmdlXTpcIjE4cHhcIixbdC5TaXplLnh4eGxhcmdlXTpcIjIwcHhcIixbdC5TaXplLnh4eHhsYXJnZV06XCI0MHB4XCJ9LHQuRm9udFdlaWdodD17bm9ybWFsOjQwMCxib2xkOjYwMH0sdC5MaW5lSGVpZ2h0PXt1aToxLGhlYWRpbmc6MS4yLHRleHQ6MS41fSx0LlRyYW5zaXRpb249e2Jhc2U6XCIyMDBtcyBjdWJpYy1iZXppZXIoMC4xNiwgMSwgMC4zLCAxKVwiLG5vbmU6XCIwbXNcIn0sdC5JY29uU2l6ZT17W3QuU2l6ZS54c21hbGxdOnQuVW5pdFB4LnNtYWxsLFt0LlNpemUuc21hbGxdOnQuVW5pdFB4LmJhc2UsW3QuU2l6ZS5iYXNlXTpcIjE1cHhcIixbdC5TaXplLmxhcmdlXTp0LlVuaXRQeC54bGFyZ2UsW3QuU2l6ZS54bGFyZ2VdOnQuVW5pdFB4Lnh4bGFyZ2UsW3QuU2l6ZS54eGxhcmdlXTp0LlVuaXRQeC54eHhsYXJnZSxbdC5TaXplLnh4eGxhcmdlXTp0LlVuaXRQeC54eHh4bGFyZ2V9fSw2ODkzOihlLHQsYSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmNyZWF0ZVRoZW1lPXZvaWQgMDtjb25zdCBuPWEoMjMxNyksbz1hKDIzNDYpLHI9YSg1OTM5KSxpPXtmb250RmFtaWx5Om4uRm9udEZhbWlseSxmb250U2l6ZTpuLkZvbnRTaXplLGZvbnRXZWlnaHQ6bi5Gb250V2VpZ2h0LGxpbmVIZWlnaHQ6bi5MaW5lSGVpZ2h0LGljb25TaXplOm4uSWNvblNpemUscmFkaXVzOm4uUmFkaXVzLHNoYWRvdzpuLlNoYWRvdyx0cmFuc2l0aW9uOm4uVHJhbnNpdGlvbix1bml0Om4uVW5pdCxweDpuLlVuaXRQeH0scz0oZSx0KT0+KHtbYCR7ZX1BY3RpdmVgXTooMCxvLmRhcmtlbkNvbG9yKSh0LDIpLFtgJHtlfUhvdmVyYF06KDAsby5saWdodGVuQ29sb3IpKHQsNSksW2Ake2V9Rm9jdXNlZGBdOigwLG8uZ2V0TW9zdFJlYWRhYmxlKSh0LFtuLkNvbG9yLndoaXRlLG4uQ29sb3IuZGFya0dyYXk1XSksW2Ake2V9VGV4dGBdOigwLG8uZ2V0TW9zdFJlYWRhYmxlKSh0LFtuLkNvbG9yLndoaXRlLG4uQ29sb3IuZGFya0dyYXk1XSl9KTt0LmNyZWF0ZVRoZW1lPWU9Pk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSx7cGFsZXR0ZTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSxzKHIuUGFsZXR0ZS5icmFuZFByaW1hcnksZS5icmFuZFByaW1hcnkpKSxzKHIuUGFsZXR0ZS5icmFuZFNlY29uZGFyeSxlLmJyYW5kU2Vjb25kYXJ5KSl9KX0sNTkzOTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUGFsZXR0ZT12b2lkIDAsdC5QYWxldHRlPXtiYWNrZ3JvdW5kMTpcImJhY2tncm91bmQxXCIsYmFja2dyb3VuZDI6XCJiYWNrZ3JvdW5kMlwiLGJhY2tncm91bmQzOlwiYmFja2dyb3VuZDNcIixiYWNrZ3JvdW5kNDpcImJhY2tncm91bmQ0XCIsYmFja2dyb3VuZDU6XCJiYWNrZ3JvdW5kNVwiLGJhY2tncm91bmQ2OlwiYmFja2dyb3VuZDZcIixicmFuZFByaW1hcnk6XCJicmFuZFByaW1hcnlcIixicmFuZFNlY29uZGFyeTpcImJyYW5kU2Vjb25kYXJ5XCIsYnJhbmRQcmltYXJ5QWN0aXZlOlwiYnJhbmRQcmltYXJ5QWN0aXZlXCIsYnJhbmRQcmltYXJ5SG92ZXI6XCJicmFuZFByaW1hcnlIb3ZlclwiLGJyYW5kUHJpbWFyeUZvY3VzZWQ6XCJicmFuZFByaW1hcnlGb2N1c2VkXCIsYnJhbmRQcmltYXJ5VGV4dDpcImJyYW5kUHJpbWFyeVRleHRcIixicmFuZFNlY29uZGFyeUFjdGl2ZTpcImJyYW5kU2Vjb25kYXJ5QWN0aXZlXCIsYnJhbmRTZWNvbmRhcnlIb3ZlcjpcImJyYW5kU2Vjb25kYXJ5SG92ZXJcIixicmFuZFNlY29uZGFyeUZvY3VzZWQ6XCJicmFuZFNlY29uZGFyeUZvY3VzZWRcIixicmFuZFNlY29uZGFyeVRleHQ6XCJicmFuZFNlY29uZGFyeVRleHRcIixpbnB1dEJhY2tncm91bmQ6XCJpbnB1dEJhY2tncm91bmRcIixpbnB1dENvbG9yOlwiaW5wdXRDb2xvclwiLGlucHV0UGxhY2Vob2xkZXI6XCJpbnB1dFBsYWNlaG9sZGVyXCIsaW5wdXREaXNhYmxlZDpcImlucHV0RGlzYWJsZWRcIixpbnB1dEZvY3VzZWQ6XCJpbnB1dEZvY3VzZWRcIixpbnB1dEJvcmRlcjpcImlucHV0Qm9yZGVyXCIsc3RhdHVzU3VjY2VzczpcInN0YXR1c1N1Y2Nlc3NcIixzdGF0dXNXYXJuaW5nOlwic3RhdHVzV2FybmluZ1wiLHN0YXR1c0NyaXRpY2FsOlwic3RhdHVzQ3JpdGljYWxcIixzdGF0dXNBY3RpdmU6XCJzdGF0dXNBY3RpdmVcIix0ZXh0RGVmYXVsdDpcInRleHREZWZhdWx0XCIsdGV4dEhlbHA6XCJ0ZXh0SGVscFwiLHRleHRJbmFjdGl2ZTpcInRleHRJbmFjdGl2ZVwiLGJvcmRlck5ldXRyYWw6XCJib3JkZXJOZXV0cmFsXCIsY29udGVudEJhY2tncm91bmQxOlwiY29udGVudEJhY2tncm91bmQxXCIsY29udGVudEJhY2tncm91bmQyOlwiY29udGVudEJhY2tncm91bmQyXCIsY29udGVudEJhY2tncm91bmQzOlwiY29udGVudEJhY2tncm91bmQzXCIsY29udGVudEJhY2tncm91bmQ0OlwiY29udGVudEJhY2tncm91bmQ0XCIsY29udGVudEJhY2tncm91bmQ1OlwiY29udGVudEJhY2tncm91bmQ1XCIsbGlua0RlZmF1bHQ6XCJsaW5rRGVmYXVsdFwiLGxpbmtIb3ZlcjpcImxpbmtIb3ZlclwifX0sNjUzNTpmdW5jdGlvbihlKXtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3JldHVybihlPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KSh0KX12YXIgdD0vXlxccysvLGE9L1xccyskLztmdW5jdGlvbiBuKG8scil7aWYocj1yfHx7fSwobz1vfHxcIlwiKWluc3RhbmNlb2YgbilyZXR1cm4gbztpZighKHRoaXMgaW5zdGFuY2VvZiBuKSlyZXR1cm4gbmV3IG4obyxyKTt2YXIgaT1mdW5jdGlvbihuKXt2YXIgbyxyLGkscz17cjowLGc6MCxiOjB9LGM9MSxsPW51bGwsZD1udWxsLHU9bnVsbCxwPSExLHc9ITE7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIG4mJihuPWZ1bmN0aW9uKGUpe2U9ZS5yZXBsYWNlKHQsXCJcIikucmVwbGFjZShhLFwiXCIpLnRvTG93ZXJDYXNlKCk7dmFyIG4sbz0hMTtpZihmW2VdKWU9ZltlXSxvPSEwO2Vsc2UgaWYoXCJ0cmFuc3BhcmVudFwiPT1lKXJldHVybntyOjAsZzowLGI6MCxhOjAsZm9ybWF0OlwibmFtZVwifTtyZXR1cm4obj1CLnJnYi5leGVjKGUpKT97cjpuWzFdLGc6blsyXSxiOm5bM119OihuPUIucmdiYS5leGVjKGUpKT97cjpuWzFdLGc6blsyXSxiOm5bM10sYTpuWzRdfToobj1CLmhzbC5leGVjKGUpKT97aDpuWzFdLHM6blsyXSxsOm5bM119OihuPUIuaHNsYS5leGVjKGUpKT97aDpuWzFdLHM6blsyXSxsOm5bM10sYTpuWzRdfToobj1CLmhzdi5leGVjKGUpKT97aDpuWzFdLHM6blsyXSx2Om5bM119OihuPUIuaHN2YS5leGVjKGUpKT97aDpuWzFdLHM6blsyXSx2Om5bM10sYTpuWzRdfToobj1CLmhleDguZXhlYyhlKSk/e3I6TShuWzFdKSxnOk0oblsyXSksYjpNKG5bM10pLGE6VyhuWzRdKSxmb3JtYXQ6bz9cIm5hbWVcIjpcImhleDhcIn06KG49Qi5oZXg2LmV4ZWMoZSkpP3tyOk0oblsxXSksZzpNKG5bMl0pLGI6TShuWzNdKSxmb3JtYXQ6bz9cIm5hbWVcIjpcImhleFwifToobj1CLmhleDQuZXhlYyhlKSk/e3I6TShuWzFdK1wiXCIrblsxXSksZzpNKG5bMl0rXCJcIituWzJdKSxiOk0oblszXStcIlwiK25bM10pLGE6VyhuWzRdK1wiXCIrbls0XSksZm9ybWF0Om8/XCJuYW1lXCI6XCJoZXg4XCJ9OiEhKG49Qi5oZXgzLmV4ZWMoZSkpJiZ7cjpNKG5bMV0rXCJcIituWzFdKSxnOk0oblsyXStcIlwiK25bMl0pLGI6TShuWzNdK1wiXCIrblszXSksZm9ybWF0Om8/XCJuYW1lXCI6XCJoZXhcIn19KG4pKSxcIm9iamVjdFwiPT1lKG4pJiYoRShuLnIpJiZFKG4uZykmJkUobi5iKT8obz1uLnIscj1uLmcsaT1uLmIscz17cjoyNTUqUChvLDI1NSksZzoyNTUqUChyLDI1NSksYjoyNTUqUChpLDI1NSl9LHA9ITAsdz1cIiVcIj09PVN0cmluZyhuLnIpLnN1YnN0cigtMSk/XCJwcmdiXCI6XCJyZ2JcIik6RShuLmgpJiZFKG4ucykmJkUobi52KT8obD1JKG4ucyksZD1JKG4udikscz1mdW5jdGlvbihlLHQsYSl7ZT02KlAoZSwzNjApLHQ9UCh0LDEwMCksYT1QKGEsMTAwKTt2YXIgbj1NYXRoLmZsb29yKGUpLG89ZS1uLHI9YSooMS10KSxpPWEqKDEtbyp0KSxzPWEqKDEtKDEtbykqdCksYz1uJTY7cmV0dXJue3I6MjU1KlthLGkscixyLHMsYV1bY10sZzoyNTUqW3MsYSxhLGkscixyXVtjXSxiOjI1NSpbcixyLHMsYSxhLGldW2NdfX0obi5oLGwsZCkscD0hMCx3PVwiaHN2XCIpOkUobi5oKSYmRShuLnMpJiZFKG4ubCkmJihsPUkobi5zKSx1PUkobi5sKSxzPWZ1bmN0aW9uKGUsdCxhKXt2YXIgbixvLHI7ZnVuY3Rpb24gaShlLHQsYSl7cmV0dXJuIGE8MCYmKGErPTEpLGE+MSYmKGEtPTEpLGE8MS82P2UrNioodC1lKSphOmE8LjU/dDphPDIvMz9lKyh0LWUpKigyLzMtYSkqNjplfWlmKGU9UChlLDM2MCksdD1QKHQsMTAwKSxhPVAoYSwxMDApLDA9PT10KW49bz1yPWE7ZWxzZXt2YXIgcz1hPC41P2EqKDErdCk6YSt0LWEqdCxjPTIqYS1zO249aShjLHMsZSsxLzMpLG89aShjLHMsZSkscj1pKGMscyxlLTEvMyl9cmV0dXJue3I6MjU1Km4sZzoyNTUqbyxiOjI1NSpyfX0obi5oLGwsdSkscD0hMCx3PVwiaHNsXCIpLG4uaGFzT3duUHJvcGVydHkoXCJhXCIpJiYoYz1uLmEpKSxjPXYoYykse29rOnAsZm9ybWF0Om4uZm9ybWF0fHx3LHI6TWF0aC5taW4oMjU1LE1hdGgubWF4KHMuciwwKSksZzpNYXRoLm1pbigyNTUsTWF0aC5tYXgocy5nLDApKSxiOk1hdGgubWluKDI1NSxNYXRoLm1heChzLmIsMCkpLGE6Y319KG8pO3RoaXMuX29yaWdpbmFsSW5wdXQ9byx0aGlzLl9yPWkucix0aGlzLl9nPWkuZyx0aGlzLl9iPWkuYix0aGlzLl9hPWkuYSx0aGlzLl9yb3VuZEE9TWF0aC5yb3VuZCgxMDAqdGhpcy5fYSkvMTAwLHRoaXMuX2Zvcm1hdD1yLmZvcm1hdHx8aS5mb3JtYXQsdGhpcy5fZ3JhZGllbnRUeXBlPXIuZ3JhZGllbnRUeXBlLHRoaXMuX3I8MSYmKHRoaXMuX3I9TWF0aC5yb3VuZCh0aGlzLl9yKSksdGhpcy5fZzwxJiYodGhpcy5fZz1NYXRoLnJvdW5kKHRoaXMuX2cpKSx0aGlzLl9iPDEmJih0aGlzLl9iPU1hdGgucm91bmQodGhpcy5fYikpLHRoaXMuX29rPWkub2t9ZnVuY3Rpb24gbyhlLHQsYSl7ZT1QKGUsMjU1KSx0PVAodCwyNTUpLGE9UChhLDI1NSk7dmFyIG4sbyxyPU1hdGgubWF4KGUsdCxhKSxpPU1hdGgubWluKGUsdCxhKSxzPShyK2kpLzI7aWYocj09aSluPW89MDtlbHNle3ZhciBjPXItaTtzd2l0Y2gobz1zPi41P2MvKDItci1pKTpjLyhyK2kpLHIpe2Nhc2UgZTpuPSh0LWEpL2MrKHQ8YT82OjApO2JyZWFrO2Nhc2UgdDpuPShhLWUpL2MrMjticmVhaztjYXNlIGE6bj0oZS10KS9jKzR9bi89Nn1yZXR1cm57aDpuLHM6byxsOnN9fWZ1bmN0aW9uIHIoZSx0LGEpe2U9UChlLDI1NSksdD1QKHQsMjU1KSxhPVAoYSwyNTUpO3ZhciBuLG8scj1NYXRoLm1heChlLHQsYSksaT1NYXRoLm1pbihlLHQsYSkscz1yLGM9ci1pO2lmKG89MD09PXI/MDpjL3Iscj09aSluPTA7ZWxzZXtzd2l0Y2gocil7Y2FzZSBlOm49KHQtYSkvYysodDxhPzY6MCk7YnJlYWs7Y2FzZSB0Om49KGEtZSkvYysyO2JyZWFrO2Nhc2UgYTpuPShlLXQpL2MrNH1uLz02fXJldHVybntoOm4sczpvLHY6c319ZnVuY3Rpb24gaShlLHQsYSxuKXt2YXIgbz1beChNYXRoLnJvdW5kKGUpLnRvU3RyaW5nKDE2KSkseChNYXRoLnJvdW5kKHQpLnRvU3RyaW5nKDE2KSkseChNYXRoLnJvdW5kKGEpLnRvU3RyaW5nKDE2KSldO3JldHVybiBuJiZvWzBdLmNoYXJBdCgwKT09b1swXS5jaGFyQXQoMSkmJm9bMV0uY2hhckF0KDApPT1vWzFdLmNoYXJBdCgxKSYmb1syXS5jaGFyQXQoMCk9PW9bMl0uY2hhckF0KDEpP29bMF0uY2hhckF0KDApK29bMV0uY2hhckF0KDApK29bMl0uY2hhckF0KDApOm8uam9pbihcIlwiKX1mdW5jdGlvbiBzKGUsdCxhLG4pe3JldHVyblt4KEEobikpLHgoTWF0aC5yb3VuZChlKS50b1N0cmluZygxNikpLHgoTWF0aC5yb3VuZCh0KS50b1N0cmluZygxNikpLHgoTWF0aC5yb3VuZChhKS50b1N0cmluZygxNikpXS5qb2luKFwiXCIpfWZ1bmN0aW9uIGMoZSx0KXt0PTA9PT10PzA6dHx8MTA7dmFyIGE9bihlKS50b0hzbCgpO3JldHVybiBhLnMtPXQvMTAwLGEucz1DKGEucyksbihhKX1mdW5jdGlvbiBsKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9Ic2woKTtyZXR1cm4gYS5zKz10LzEwMCxhLnM9QyhhLnMpLG4oYSl9ZnVuY3Rpb24gZChlKXtyZXR1cm4gbihlKS5kZXNhdHVyYXRlKDEwMCl9ZnVuY3Rpb24gdShlLHQpe3Q9MD09PXQ/MDp0fHwxMDt2YXIgYT1uKGUpLnRvSHNsKCk7cmV0dXJuIGEubCs9dC8xMDAsYS5sPUMoYS5sKSxuKGEpfWZ1bmN0aW9uIHAoZSx0KXt0PTA9PT10PzA6dHx8MTA7dmFyIGE9bihlKS50b1JnYigpO3JldHVybiBhLnI9TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsYS5yLU1hdGgucm91bmQoLXQvMTAwKjI1NSkpKSxhLmc9TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsYS5nLU1hdGgucm91bmQoLXQvMTAwKjI1NSkpKSxhLmI9TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsYS5iLU1hdGgucm91bmQoLXQvMTAwKjI1NSkpKSxuKGEpfWZ1bmN0aW9uIHcoZSx0KXt0PTA9PT10PzA6dHx8MTA7dmFyIGE9bihlKS50b0hzbCgpO3JldHVybiBhLmwtPXQvMTAwLGEubD1DKGEubCksbihhKX1mdW5jdGlvbiBoKGUsdCl7dmFyIGE9bihlKS50b0hzbCgpLG89KGEuaCt0KSUzNjA7cmV0dXJuIGEuaD1vPDA/MzYwK286byxuKGEpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9bihlKS50b0hzbCgpO3JldHVybiB0Lmg9KHQuaCsxODApJTM2MCxuKHQpfWZ1bmN0aW9uIG0oZSx0KXtpZihpc05hTih0KXx8dDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJBcmd1bWVudCB0byBwb2x5YWQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtmb3IodmFyIGE9bihlKS50b0hzbCgpLG89W24oZSldLHI9MzYwL3QsaT0xO2k8dDtpKyspby5wdXNoKG4oe2g6KGEuaCtpKnIpJTM2MCxzOmEucyxsOmEubH0pKTtyZXR1cm4gb31mdW5jdGlvbiBrKGUpe3ZhciB0PW4oZSkudG9Ic2woKSxhPXQuaDtyZXR1cm5bbihlKSxuKHtoOihhKzcyKSUzNjAsczp0LnMsbDp0Lmx9KSxuKHtoOihhKzIxNiklMzYwLHM6dC5zLGw6dC5sfSldfWZ1bmN0aW9uIGIoZSx0LGEpe3Q9dHx8NixhPWF8fDMwO3ZhciBvPW4oZSkudG9Ic2woKSxyPTM2MC9hLGk9W24oZSldO2ZvcihvLmg9KG8uaC0ocip0Pj4xKSs3MjApJTM2MDstLXQ7KW8uaD0oby5oK3IpJTM2MCxpLnB1c2gobihvKSk7cmV0dXJuIGl9ZnVuY3Rpb24geShlLHQpe3Q9dHx8Njtmb3IodmFyIGE9bihlKS50b0hzdigpLG89YS5oLHI9YS5zLGk9YS52LHM9W10sYz0xL3Q7dC0tOylzLnB1c2gobih7aDpvLHM6cix2Oml9KSksaT0oaStjKSUxO3JldHVybiBzfW4ucHJvdG90eXBlPXtpc0Rhcms6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRCcmlnaHRuZXNzKCk8MTI4fSxpc0xpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNEYXJrKCl9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2t9LGdldE9yaWdpbmFsSW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZ2luYWxJbnB1dH0sZ2V0Rm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Zvcm1hdH0sZ2V0QWxwaGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYX0sZ2V0QnJpZ2h0bmVzczpmdW5jdGlvbigpe3ZhciBlPXRoaXMudG9SZ2IoKTtyZXR1cm4oMjk5KmUucis1ODcqZS5nKzExNCplLmIpLzFlM30sZ2V0THVtaW5hbmNlOmZ1bmN0aW9uKCl7dmFyIGUsdCxhLG49dGhpcy50b1JnYigpO3JldHVybiBlPW4uci8yNTUsdD1uLmcvMjU1LGE9bi5iLzI1NSwuMjEyNiooZTw9LjAzOTI4P2UvMTIuOTI6TWF0aC5wb3coKGUrLjA1NSkvMS4wNTUsMi40KSkrLjcxNTIqKHQ8PS4wMzkyOD90LzEyLjkyOk1hdGgucG93KCh0Ky4wNTUpLzEuMDU1LDIuNCkpKy4wNzIyKihhPD0uMDM5Mjg/YS8xMi45MjpNYXRoLnBvdygoYSsuMDU1KS8xLjA1NSwyLjQpKX0sc2V0QWxwaGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2E9dihlKSx0aGlzLl9yb3VuZEE9TWF0aC5yb3VuZCgxMDAqdGhpcy5fYSkvMTAwLHRoaXN9LHRvSHN2OmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLl9yLHRoaXMuX2csdGhpcy5fYik7cmV0dXJue2g6MzYwKmUuaCxzOmUucyx2OmUudixhOnRoaXMuX2F9fSx0b0hzdlN0cmluZzpmdW5jdGlvbigpe3ZhciBlPXIodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpLHQ9TWF0aC5yb3VuZCgzNjAqZS5oKSxhPU1hdGgucm91bmQoMTAwKmUucyksbj1NYXRoLnJvdW5kKDEwMCplLnYpO3JldHVybiAxPT10aGlzLl9hP1wiaHN2KFwiK3QrXCIsIFwiK2ErXCIlLCBcIituK1wiJSlcIjpcImhzdmEoXCIrdCtcIiwgXCIrYStcIiUsIFwiK24rXCIlLCBcIit0aGlzLl9yb3VuZEErXCIpXCJ9LHRvSHNsOmZ1bmN0aW9uKCl7dmFyIGU9byh0aGlzLl9yLHRoaXMuX2csdGhpcy5fYik7cmV0dXJue2g6MzYwKmUuaCxzOmUucyxsOmUubCxhOnRoaXMuX2F9fSx0b0hzbFN0cmluZzpmdW5jdGlvbigpe3ZhciBlPW8odGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpLHQ9TWF0aC5yb3VuZCgzNjAqZS5oKSxhPU1hdGgucm91bmQoMTAwKmUucyksbj1NYXRoLnJvdW5kKDEwMCplLmwpO3JldHVybiAxPT10aGlzLl9hP1wiaHNsKFwiK3QrXCIsIFwiK2ErXCIlLCBcIituK1wiJSlcIjpcImhzbGEoXCIrdCtcIiwgXCIrYStcIiUsIFwiK24rXCIlLCBcIit0aGlzLl9yb3VuZEErXCIpXCJ9LHRvSGV4OmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iLGUpfSx0b0hleFN0cmluZzpmdW5jdGlvbihlKXtyZXR1cm5cIiNcIit0aGlzLnRvSGV4KGUpfSx0b0hleDg6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxhLG4sbyl7dmFyIHI9W3goTWF0aC5yb3VuZChlKS50b1N0cmluZygxNikpLHgoTWF0aC5yb3VuZCh0KS50b1N0cmluZygxNikpLHgoTWF0aC5yb3VuZChhKS50b1N0cmluZygxNikpLHgoQShuKSldO3JldHVybiBvJiZyWzBdLmNoYXJBdCgwKT09clswXS5jaGFyQXQoMSkmJnJbMV0uY2hhckF0KDApPT1yWzFdLmNoYXJBdCgxKSYmclsyXS5jaGFyQXQoMCk9PXJbMl0uY2hhckF0KDEpJiZyWzNdLmNoYXJBdCgwKT09clszXS5jaGFyQXQoMSk/clswXS5jaGFyQXQoMCkrclsxXS5jaGFyQXQoMCkrclsyXS5jaGFyQXQoMCkrclszXS5jaGFyQXQoMCk6ci5qb2luKFwiXCIpfSh0aGlzLl9yLHRoaXMuX2csdGhpcy5fYix0aGlzLl9hLGUpfSx0b0hleDhTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuXCIjXCIrdGhpcy50b0hleDgoZSl9LHRvUmdiOmZ1bmN0aW9uKCl7cmV0dXJue3I6TWF0aC5yb3VuZCh0aGlzLl9yKSxnOk1hdGgucm91bmQodGhpcy5fZyksYjpNYXRoLnJvdW5kKHRoaXMuX2IpLGE6dGhpcy5fYX19LHRvUmdiU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PXRoaXMuX2E/XCJyZ2IoXCIrTWF0aC5yb3VuZCh0aGlzLl9yKStcIiwgXCIrTWF0aC5yb3VuZCh0aGlzLl9nKStcIiwgXCIrTWF0aC5yb3VuZCh0aGlzLl9iKStcIilcIjpcInJnYmEoXCIrTWF0aC5yb3VuZCh0aGlzLl9yKStcIiwgXCIrTWF0aC5yb3VuZCh0aGlzLl9nKStcIiwgXCIrTWF0aC5yb3VuZCh0aGlzLl9iKStcIiwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b1BlcmNlbnRhZ2VSZ2I6ZnVuY3Rpb24oKXtyZXR1cm57cjpNYXRoLnJvdW5kKDEwMCpQKHRoaXMuX3IsMjU1KSkrXCIlXCIsZzpNYXRoLnJvdW5kKDEwMCpQKHRoaXMuX2csMjU1KSkrXCIlXCIsYjpNYXRoLnJvdW5kKDEwMCpQKHRoaXMuX2IsMjU1KSkrXCIlXCIsYTp0aGlzLl9hfX0sdG9QZXJjZW50YWdlUmdiU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PXRoaXMuX2E/XCJyZ2IoXCIrTWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9yLDI1NSkpK1wiJSwgXCIrTWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9nLDI1NSkpK1wiJSwgXCIrTWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9iLDI1NSkpK1wiJSlcIjpcInJnYmEoXCIrTWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9yLDI1NSkpK1wiJSwgXCIrTWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9nLDI1NSkpK1wiJSwgXCIrTWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9iLDI1NSkpK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b05hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX2E/XCJ0cmFuc3BhcmVudFwiOiEodGhpcy5fYTwxKSYmKFNbaSh0aGlzLl9yLHRoaXMuX2csdGhpcy5fYiwhMCldfHwhMSl9LHRvRmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciB0PVwiI1wiK3ModGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsdGhpcy5fYSksYT10LG89dGhpcy5fZ3JhZGllbnRUeXBlP1wiR3JhZGllbnRUeXBlID0gMSwgXCI6XCJcIjtpZihlKXt2YXIgcj1uKGUpO2E9XCIjXCIrcyhyLl9yLHIuX2csci5fYixyLl9hKX1yZXR1cm5cInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChcIitvK1wic3RhcnRDb2xvcnN0cj1cIit0K1wiLGVuZENvbG9yc3RyPVwiK2ErXCIpXCJ9LHRvU3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciB0PSEhZTtlPWV8fHRoaXMuX2Zvcm1hdDt2YXIgYT0hMSxuPXRoaXMuX2E8MSYmdGhpcy5fYT49MDtyZXR1cm4gdHx8IW58fFwiaGV4XCIhPT1lJiZcImhleDZcIiE9PWUmJlwiaGV4M1wiIT09ZSYmXCJoZXg0XCIhPT1lJiZcImhleDhcIiE9PWUmJlwibmFtZVwiIT09ZT8oXCJyZ2JcIj09PWUmJihhPXRoaXMudG9SZ2JTdHJpbmcoKSksXCJwcmdiXCI9PT1lJiYoYT10aGlzLnRvUGVyY2VudGFnZVJnYlN0cmluZygpKSxcImhleFwiIT09ZSYmXCJoZXg2XCIhPT1lfHwoYT10aGlzLnRvSGV4U3RyaW5nKCkpLFwiaGV4M1wiPT09ZSYmKGE9dGhpcy50b0hleFN0cmluZyghMCkpLFwiaGV4NFwiPT09ZSYmKGE9dGhpcy50b0hleDhTdHJpbmcoITApKSxcImhleDhcIj09PWUmJihhPXRoaXMudG9IZXg4U3RyaW5nKCkpLFwibmFtZVwiPT09ZSYmKGE9dGhpcy50b05hbWUoKSksXCJoc2xcIj09PWUmJihhPXRoaXMudG9Ic2xTdHJpbmcoKSksXCJoc3ZcIj09PWUmJihhPXRoaXMudG9Ic3ZTdHJpbmcoKSksYXx8dGhpcy50b0hleFN0cmluZygpKTpcIm5hbWVcIj09PWUmJjA9PT10aGlzLl9hP3RoaXMudG9OYW1lKCk6dGhpcy50b1JnYlN0cmluZygpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuKHRoaXMudG9TdHJpbmcoKSl9LF9hcHBseU1vZGlmaWNhdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBhPWUuYXBwbHkobnVsbCxbdGhpc10uY29uY2F0KFtdLnNsaWNlLmNhbGwodCkpKTtyZXR1cm4gdGhpcy5fcj1hLl9yLHRoaXMuX2c9YS5fZyx0aGlzLl9iPWEuX2IsdGhpcy5zZXRBbHBoYShhLl9hKSx0aGlzfSxsaWdodGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKHUsYXJndW1lbnRzKX0sYnJpZ2h0ZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24ocCxhcmd1bWVudHMpfSxkYXJrZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24odyxhcmd1bWVudHMpfSxkZXNhdHVyYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGMsYXJndW1lbnRzKX0sc2F0dXJhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24obCxhcmd1bWVudHMpfSxncmV5c2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oZCxhcmd1bWVudHMpfSxzcGluOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGgsYXJndW1lbnRzKX0sX2FwcGx5Q29tYmluYXRpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5hcHBseShudWxsLFt0aGlzXS5jb25jYXQoW10uc2xpY2UuY2FsbCh0KSkpfSxhbmFsb2dvdXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihiLGFyZ3VtZW50cyl9LGNvbXBsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihnLGFyZ3VtZW50cyl9LG1vbm9jaHJvbWF0aWM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbih5LGFyZ3VtZW50cyl9LHNwbGl0Y29tcGxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKGssYXJndW1lbnRzKX0sdHJpYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihtLFszXSl9LHRldHJhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKG0sWzRdKX19LG4uZnJvbVJhdGlvPWZ1bmN0aW9uKHQsYSl7aWYoXCJvYmplY3RcIj09ZSh0KSl7dmFyIG89e307Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKG9bcl09XCJhXCI9PT1yP3Rbcl06SSh0W3JdKSk7dD1vfXJldHVybiBuKHQsYSl9LG4uZXF1YWxzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuISghZXx8IXQpJiZuKGUpLnRvUmdiU3RyaW5nKCk9PW4odCkudG9SZ2JTdHJpbmcoKX0sbi5yYW5kb209ZnVuY3Rpb24oKXtyZXR1cm4gbi5mcm9tUmF0aW8oe3I6TWF0aC5yYW5kb20oKSxnOk1hdGgucmFuZG9tKCksYjpNYXRoLnJhbmRvbSgpfSl9LG4ubWl4PWZ1bmN0aW9uKGUsdCxhKXthPTA9PT1hPzA6YXx8NTA7dmFyIG89bihlKS50b1JnYigpLHI9bih0KS50b1JnYigpLGk9YS8xMDA7cmV0dXJuIG4oe3I6KHIuci1vLnIpKmkrby5yLGc6KHIuZy1vLmcpKmkrby5nLGI6KHIuYi1vLmIpKmkrby5iLGE6KHIuYS1vLmEpKmkrby5hfSl9LG4ucmVhZGFiaWxpdHk9ZnVuY3Rpb24oZSx0KXt2YXIgYT1uKGUpLG89bih0KTtyZXR1cm4oTWF0aC5tYXgoYS5nZXRMdW1pbmFuY2UoKSxvLmdldEx1bWluYW5jZSgpKSsuMDUpLyhNYXRoLm1pbihhLmdldEx1bWluYW5jZSgpLG8uZ2V0THVtaW5hbmNlKCkpKy4wNSl9LG4uaXNSZWFkYWJsZT1mdW5jdGlvbihlLHQsYSl7dmFyIG8scixpLHMsYyxsPW4ucmVhZGFiaWxpdHkoZSx0KTtzd2l0Y2gocj0hMSwoaT1hLFwiQUFcIiE9PShzPSgoaT1pfHx7bGV2ZWw6XCJBQVwiLHNpemU6XCJzbWFsbFwifSkubGV2ZWx8fFwiQUFcIikudG9VcHBlckNhc2UoKSkmJlwiQUFBXCIhPT1zJiYocz1cIkFBXCIpLFwic21hbGxcIiE9PShjPShpLnNpemV8fFwic21hbGxcIikudG9Mb3dlckNhc2UoKSkmJlwibGFyZ2VcIiE9PWMmJihjPVwic21hbGxcIiksbz17bGV2ZWw6cyxzaXplOmN9KS5sZXZlbCtvLnNpemUpe2Nhc2VcIkFBc21hbGxcIjpjYXNlXCJBQUFsYXJnZVwiOnI9bD49NC41O2JyZWFrO2Nhc2VcIkFBbGFyZ2VcIjpyPWw+PTM7YnJlYWs7Y2FzZVwiQUFBc21hbGxcIjpyPWw+PTd9cmV0dXJuIHJ9LG4ubW9zdFJlYWRhYmxlPWZ1bmN0aW9uKGUsdCxhKXt2YXIgbyxyLGkscyxjPW51bGwsbD0wO3I9KGE9YXx8e30pLmluY2x1ZGVGYWxsYmFja0NvbG9ycyxpPWEubGV2ZWwscz1hLnNpemU7Zm9yKHZhciBkPTA7ZDx0Lmxlbmd0aDtkKyspKG89bi5yZWFkYWJpbGl0eShlLHRbZF0pKT5sJiYobD1vLGM9bih0W2RdKSk7cmV0dXJuIG4uaXNSZWFkYWJsZShlLGMse2xldmVsOmksc2l6ZTpzfSl8fCFyP2M6KGEuaW5jbHVkZUZhbGxiYWNrQ29sb3JzPSExLG4ubW9zdFJlYWRhYmxlKGUsW1wiI2ZmZlwiLFwiIzAwMFwiXSxhKSl9O3ZhciBmPW4ubmFtZXM9e2FsaWNlYmx1ZTpcImYwZjhmZlwiLGFudGlxdWV3aGl0ZTpcImZhZWJkN1wiLGFxdWE6XCIwZmZcIixhcXVhbWFyaW5lOlwiN2ZmZmQ0XCIsYXp1cmU6XCJmMGZmZmZcIixiZWlnZTpcImY1ZjVkY1wiLGJpc3F1ZTpcImZmZTRjNFwiLGJsYWNrOlwiMDAwXCIsYmxhbmNoZWRhbG1vbmQ6XCJmZmViY2RcIixibHVlOlwiMDBmXCIsYmx1ZXZpb2xldDpcIjhhMmJlMlwiLGJyb3duOlwiYTUyYTJhXCIsYnVybHl3b29kOlwiZGViODg3XCIsYnVybnRzaWVubmE6XCJlYTdlNWRcIixjYWRldGJsdWU6XCI1ZjllYTBcIixjaGFydHJldXNlOlwiN2ZmZjAwXCIsY2hvY29sYXRlOlwiZDI2OTFlXCIsY29yYWw6XCJmZjdmNTBcIixjb3JuZmxvd2VyYmx1ZTpcIjY0OTVlZFwiLGNvcm5zaWxrOlwiZmZmOGRjXCIsY3JpbXNvbjpcImRjMTQzY1wiLGN5YW46XCIwZmZcIixkYXJrYmx1ZTpcIjAwMDA4YlwiLGRhcmtjeWFuOlwiMDA4YjhiXCIsZGFya2dvbGRlbnJvZDpcImI4ODYwYlwiLGRhcmtncmF5OlwiYTlhOWE5XCIsZGFya2dyZWVuOlwiMDA2NDAwXCIsZGFya2dyZXk6XCJhOWE5YTlcIixkYXJra2hha2k6XCJiZGI3NmJcIixkYXJrbWFnZW50YTpcIjhiMDA4YlwiLGRhcmtvbGl2ZWdyZWVuOlwiNTU2YjJmXCIsZGFya29yYW5nZTpcImZmOGMwMFwiLGRhcmtvcmNoaWQ6XCI5OTMyY2NcIixkYXJrcmVkOlwiOGIwMDAwXCIsZGFya3NhbG1vbjpcImU5OTY3YVwiLGRhcmtzZWFncmVlbjpcIjhmYmM4ZlwiLGRhcmtzbGF0ZWJsdWU6XCI0ODNkOGJcIixkYXJrc2xhdGVncmF5OlwiMmY0ZjRmXCIsZGFya3NsYXRlZ3JleTpcIjJmNGY0ZlwiLGRhcmt0dXJxdW9pc2U6XCIwMGNlZDFcIixkYXJrdmlvbGV0OlwiOTQwMGQzXCIsZGVlcHBpbms6XCJmZjE0OTNcIixkZWVwc2t5Ymx1ZTpcIjAwYmZmZlwiLGRpbWdyYXk6XCI2OTY5NjlcIixkaW1ncmV5OlwiNjk2OTY5XCIsZG9kZ2VyYmx1ZTpcIjFlOTBmZlwiLGZpcmVicmljazpcImIyMjIyMlwiLGZsb3JhbHdoaXRlOlwiZmZmYWYwXCIsZm9yZXN0Z3JlZW46XCIyMjhiMjJcIixmdWNoc2lhOlwiZjBmXCIsZ2FpbnNib3JvOlwiZGNkY2RjXCIsZ2hvc3R3aGl0ZTpcImY4ZjhmZlwiLGdvbGQ6XCJmZmQ3MDBcIixnb2xkZW5yb2Q6XCJkYWE1MjBcIixncmF5OlwiODA4MDgwXCIsZ3JlZW46XCIwMDgwMDBcIixncmVlbnllbGxvdzpcImFkZmYyZlwiLGdyZXk6XCI4MDgwODBcIixob25leWRldzpcImYwZmZmMFwiLGhvdHBpbms6XCJmZjY5YjRcIixpbmRpYW5yZWQ6XCJjZDVjNWNcIixpbmRpZ286XCI0YjAwODJcIixpdm9yeTpcImZmZmZmMFwiLGtoYWtpOlwiZjBlNjhjXCIsbGF2ZW5kZXI6XCJlNmU2ZmFcIixsYXZlbmRlcmJsdXNoOlwiZmZmMGY1XCIsbGF3bmdyZWVuOlwiN2NmYzAwXCIsbGVtb25jaGlmZm9uOlwiZmZmYWNkXCIsbGlnaHRibHVlOlwiYWRkOGU2XCIsbGlnaHRjb3JhbDpcImYwODA4MFwiLGxpZ2h0Y3lhbjpcImUwZmZmZlwiLGxpZ2h0Z29sZGVucm9keWVsbG93OlwiZmFmYWQyXCIsbGlnaHRncmF5OlwiZDNkM2QzXCIsbGlnaHRncmVlbjpcIjkwZWU5MFwiLGxpZ2h0Z3JleTpcImQzZDNkM1wiLGxpZ2h0cGluazpcImZmYjZjMVwiLGxpZ2h0c2FsbW9uOlwiZmZhMDdhXCIsbGlnaHRzZWFncmVlbjpcIjIwYjJhYVwiLGxpZ2h0c2t5Ymx1ZTpcIjg3Y2VmYVwiLGxpZ2h0c2xhdGVncmF5OlwiNzg5XCIsbGlnaHRzbGF0ZWdyZXk6XCI3ODlcIixsaWdodHN0ZWVsYmx1ZTpcImIwYzRkZVwiLGxpZ2h0eWVsbG93OlwiZmZmZmUwXCIsbGltZTpcIjBmMFwiLGxpbWVncmVlbjpcIjMyY2QzMlwiLGxpbmVuOlwiZmFmMGU2XCIsbWFnZW50YTpcImYwZlwiLG1hcm9vbjpcIjgwMDAwMFwiLG1lZGl1bWFxdWFtYXJpbmU6XCI2NmNkYWFcIixtZWRpdW1ibHVlOlwiMDAwMGNkXCIsbWVkaXVtb3JjaGlkOlwiYmE1NWQzXCIsbWVkaXVtcHVycGxlOlwiOTM3MGRiXCIsbWVkaXVtc2VhZ3JlZW46XCIzY2IzNzFcIixtZWRpdW1zbGF0ZWJsdWU6XCI3YjY4ZWVcIixtZWRpdW1zcHJpbmdncmVlbjpcIjAwZmE5YVwiLG1lZGl1bXR1cnF1b2lzZTpcIjQ4ZDFjY1wiLG1lZGl1bXZpb2xldHJlZDpcImM3MTU4NVwiLG1pZG5pZ2h0Ymx1ZTpcIjE5MTk3MFwiLG1pbnRjcmVhbTpcImY1ZmZmYVwiLG1pc3R5cm9zZTpcImZmZTRlMVwiLG1vY2Nhc2luOlwiZmZlNGI1XCIsbmF2YWpvd2hpdGU6XCJmZmRlYWRcIixuYXZ5OlwiMDAwMDgwXCIsb2xkbGFjZTpcImZkZjVlNlwiLG9saXZlOlwiODA4MDAwXCIsb2xpdmVkcmFiOlwiNmI4ZTIzXCIsb3JhbmdlOlwiZmZhNTAwXCIsb3JhbmdlcmVkOlwiZmY0NTAwXCIsb3JjaGlkOlwiZGE3MGQ2XCIscGFsZWdvbGRlbnJvZDpcImVlZThhYVwiLHBhbGVncmVlbjpcIjk4ZmI5OFwiLHBhbGV0dXJxdW9pc2U6XCJhZmVlZWVcIixwYWxldmlvbGV0cmVkOlwiZGI3MDkzXCIscGFwYXlhd2hpcDpcImZmZWZkNVwiLHBlYWNocHVmZjpcImZmZGFiOVwiLHBlcnU6XCJjZDg1M2ZcIixwaW5rOlwiZmZjMGNiXCIscGx1bTpcImRkYTBkZFwiLHBvd2RlcmJsdWU6XCJiMGUwZTZcIixwdXJwbGU6XCI4MDAwODBcIixyZWJlY2NhcHVycGxlOlwiNjYzMzk5XCIscmVkOlwiZjAwXCIscm9zeWJyb3duOlwiYmM4ZjhmXCIscm95YWxibHVlOlwiNDE2OWUxXCIsc2FkZGxlYnJvd246XCI4YjQ1MTNcIixzYWxtb246XCJmYTgwNzJcIixzYW5keWJyb3duOlwiZjRhNDYwXCIsc2VhZ3JlZW46XCIyZThiNTdcIixzZWFzaGVsbDpcImZmZjVlZVwiLHNpZW5uYTpcImEwNTIyZFwiLHNpbHZlcjpcImMwYzBjMFwiLHNreWJsdWU6XCI4N2NlZWJcIixzbGF0ZWJsdWU6XCI2YTVhY2RcIixzbGF0ZWdyYXk6XCI3MDgwOTBcIixzbGF0ZWdyZXk6XCI3MDgwOTBcIixzbm93OlwiZmZmYWZhXCIsc3ByaW5nZ3JlZW46XCIwMGZmN2ZcIixzdGVlbGJsdWU6XCI0NjgyYjRcIix0YW46XCJkMmI0OGNcIix0ZWFsOlwiMDA4MDgwXCIsdGhpc3RsZTpcImQ4YmZkOFwiLHRvbWF0bzpcImZmNjM0N1wiLHR1cnF1b2lzZTpcIjQwZTBkMFwiLHZpb2xldDpcImVlODJlZVwiLHdoZWF0OlwiZjVkZWIzXCIsd2hpdGU6XCJmZmZcIix3aGl0ZXNtb2tlOlwiZjVmNWY1XCIseWVsbG93OlwiZmYwXCIseWVsbG93Z3JlZW46XCI5YWNkMzJcIn0sUz1uLmhleE5hbWVzPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Zvcih2YXIgYSBpbiBlKWUuaGFzT3duUHJvcGVydHkoYSkmJih0W2VbYV1dPWEpO3JldHVybiB0fShmKTtmdW5jdGlvbiB2KGUpe3JldHVybiBlPXBhcnNlRmxvYXQoZSksKGlzTmFOKGUpfHxlPDB8fGU+MSkmJihlPTEpLGV9ZnVuY3Rpb24gUChlLHQpeyhmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmLTEhPWUuaW5kZXhPZihcIi5cIikmJjE9PT1wYXJzZUZsb2F0KGUpfSkoZSkmJihlPVwiMTAwJVwiKTt2YXIgYT1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmLTEhPWUuaW5kZXhPZihcIiVcIil9KGUpO3JldHVybiBlPU1hdGgubWluKHQsTWF0aC5tYXgoMCxwYXJzZUZsb2F0KGUpKSksYSYmKGU9cGFyc2VJbnQoZSp0LDEwKS8xMDApLE1hdGguYWJzKGUtdCk8MWUtNj8xOmUldC9wYXJzZUZsb2F0KHQpfWZ1bmN0aW9uIEMoZSl7cmV0dXJuIE1hdGgubWluKDEsTWF0aC5tYXgoMCxlKSl9ZnVuY3Rpb24gTShlKXtyZXR1cm4gcGFyc2VJbnQoZSwxNil9ZnVuY3Rpb24geChlKXtyZXR1cm4gMT09ZS5sZW5ndGg/XCIwXCIrZTpcIlwiK2V9ZnVuY3Rpb24gSShlKXtyZXR1cm4gZTw9MSYmKGU9MTAwKmUrXCIlXCIpLGV9ZnVuY3Rpb24gQShlKXtyZXR1cm4gTWF0aC5yb3VuZCgyNTUqcGFyc2VGbG9hdChlKSkudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIFcoZSl7cmV0dXJuIE0oZSkvMjU1fXZhciBELFQsUixCPShUPVwiW1xcXFxzfFxcXFwoXSsoXCIrKEQ9XCIoPzpbLVxcXFwrXT9cXFxcZCpcXFxcLlxcXFxkKyU/KXwoPzpbLVxcXFwrXT9cXFxcZCslPylcIikrXCIpWyx8XFxcXHNdKyhcIitEK1wiKVssfFxcXFxzXSsoXCIrRCtcIilcXFxccypcXFxcKT9cIixSPVwiW1xcXFxzfFxcXFwoXSsoXCIrRCtcIilbLHxcXFxcc10rKFwiK0QrXCIpWyx8XFxcXHNdKyhcIitEK1wiKVssfFxcXFxzXSsoXCIrRCtcIilcXFxccypcXFxcKT9cIix7Q1NTX1VOSVQ6bmV3IFJlZ0V4cChEKSxyZ2I6bmV3IFJlZ0V4cChcInJnYlwiK1QpLHJnYmE6bmV3IFJlZ0V4cChcInJnYmFcIitSKSxoc2w6bmV3IFJlZ0V4cChcImhzbFwiK1QpLGhzbGE6bmV3IFJlZ0V4cChcImhzbGFcIitSKSxoc3Y6bmV3IFJlZ0V4cChcImhzdlwiK1QpLGhzdmE6bmV3IFJlZ0V4cChcImhzdmFcIitSKSxoZXgzOi9eIz8oWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkkLyxoZXg2Oi9eIz8oWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkkLyxoZXg0Oi9eIz8oWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pJC8saGV4ODovXiM/KFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KSQvfSk7ZnVuY3Rpb24gRShlKXtyZXR1cm4hIUIuQ1NTX1VOSVQuZXhlYyhlKX1yZXR1cm4gbn0oKX19LG49e307ZnVuY3Rpb24gbyhlKXt2YXIgdD1uW2VdO2lmKHZvaWQgMCE9PXQpcmV0dXJuIHQuZXhwb3J0czt2YXIgcj1uW2VdPXtleHBvcnRzOnt9fTtyZXR1cm4gYVtlXS5jYWxsKHIuZXhwb3J0cyxyLHIuZXhwb3J0cyxvKSxyLmV4cG9ydHN9dmFyIHI9e307KCgpPT57dmFyIGU9cjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLmNyZWF0ZVRoZW1lPWUuUGFsZXR0ZT1lLkNvbG9yPXZvaWQgMDt2YXIgdD1vKDIzMTcpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiQ29sb3JcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5Db2xvcn19KTt2YXIgYT1vKDU5MzkpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiUGFsZXR0ZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBhLlBhbGV0dGV9fSk7dmFyIG49byg2ODkzKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcImNyZWF0ZVRoZW1lXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uY3JlYXRlVGhlbWV9fSl9KSgpO3ZhciBpPXQ7Zm9yKHZhciBzIGluIHIpaVtzXT1yW3NdO3IuX19lc01vZHVsZSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGksXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LDg3NzooKT0+e30sNjc6KCk9Pnt9fSx0PXt9O2Z1bmN0aW9uIGEobil7dmFyIG89dFtuXTtpZih2b2lkIDAhPT1vKXJldHVybiBvLmV4cG9ydHM7dmFyIHI9dFtuXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbbl0ocixyLmV4cG9ydHMsYSksci5leHBvcnRzfWEubj1lPT57dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlPygpPT5lLmRlZmF1bHQ6KCk9PmU7cmV0dXJuIGEuZCh0LHthOnR9KSx0fSxhLmQ9KGUsdCk9Pntmb3IodmFyIG4gaW4gdClhLm8odCxuKSYmIWEubyhlLG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOiEwLGdldDp0W25dfSl9LGEubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCksYS5yPWU9PntcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfTt2YXIgbj17fTsoKCk9PntcInVzZSBzdHJpY3RcIjthLnIobiksYS5kKG4se0FwcE1hbmlmZXN0VHlwZTooKT0+YyxCb29rbWFya0l0ZW1Db250ZXh0TWVudU9wdGlvblR5cGU6KCk9PnksQnJvd3NlckJ1dHRvblR5cGU6KCk9PlMsQ29sb3JTY2hlbWVPcHRpb25UeXBlOigpPT5tLEN1c3RvbUFjdGlvbkNhbGxlclR5cGU6KCk9PkMsRW50ZXJwcmlzZU1haW5Db250ZXh0TWVudU9wdGlvblR5cGU6KCk9PmIsR2xvYmFsQ29udGV4dE1lbnVPcHRpb25UeXBlOigpPT5nLFBhZ2VDaGFuZ2VFdmVudFR5cGU6KCk9PmgsUGFnZVRhYkNvbnRleHRNZW51T3B0aW9uVHlwZTooKT0+ayxQYW5lbFBvc2l0aW9uOigpPT53LFNVUFBPUlRFRF9MQU5HVUFHRVM6KCk9Pk0sU2F2ZUJ1dHRvbkNvbnRleHRNZW51T3B0aW9uVHlwZTooKT0+dixTYXZlTW9kYWxUeXBlOigpPT54LFZpZXdUYWJNZW51T3B0aW9uVHlwZTooKT0+ZixXaW5kb3dUeXBlOigpPT5QLGdldEN1cnJlbnRTeW5jOigpPT5BYSxpbml0OigpPT5vcyxpbml0RG9ja0NvbXBhbmlvbjooKT0+YXMsd3JhcFN5bmM6KCk9PklhfSk7dmFyIGUsdCxvLHIsaSxzLGMsbCxkPXt9O2EucihkKSxhLmQoZCx7Z2V0SXRlbTooKT0+Y2EscmVtb3ZlSXRlbTooKT0+bGEsc2V0SXRlbTooKT0+c2F9KSxmdW5jdGlvbihlKXtlLkZldGNoaW5nPVwiZmV0Y2hpbmdcIixlLkZldGNoZWQ9XCJmZXRjaGVkXCIsZS5Db21wbGV0ZT1cImNvbXBsZXRlXCJ9KGV8fChlPXt9KSksZnVuY3Rpb24oZSl7ZS5Vc2VyQWN0aW9uPVwidXNlci1hY3Rpb25cIixlLkZvY3VzQ2hhbmdlPVwiZm9jdXMtY2hhbmdlXCIsZS5SZWxvYWQ9XCJyZWxvYWRcIn0odHx8KHQ9e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2ZT1cImFjdGl2ZVwiLGUuRGVmYXVsdD1cImRlZmF1bHRcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlLlN1Z2dlc3Rpb249XCJzdWdnZXN0aW9uXCJ9KHJ8fChyPXt9KSksZnVuY3Rpb24oZSl7ZS5Db250YWN0PVwiQ29udGFjdFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCIsZS5MaXN0PVwiTGlzdFwiLGUuUGxhaW49XCJQbGFpblwiLGUuU2ltcGxlVGV4dD1cIlNpbXBsZVRleHRcIixlLkxvYWRpbmc9XCJMb2FkaW5nXCIsZS5FcnJvcj1cIkVycm9yXCJ9KGl8fChpPXt9KSksZnVuY3Rpb24oZSl7ZS5NdWx0aVNlbGVjdD1cIk11bHRpU2VsZWN0XCJ9KHN8fChzPXt9KSksZnVuY3Rpb24oZSl7ZS5TbmFwc2hvdD1cInNuYXBzaG90XCIsZS5NYW5pZmVzdD1cIm1hbmlmZXN0XCIsZS5WaWV3PVwidmlld1wiLGUuRXh0ZXJuYWw9XCJleHRlcm5hbFwifShjfHwoYz17fSkpLGZ1bmN0aW9uKGUpe2UuTGFuZGluZ1BhZ2U9XCJsYW5kaW5nUGFnZVwiLGUuQXBwR3JpZD1cImFwcEdyaWRcIn0obHx8KGw9e30pKTt2YXIgdSxwLHcsaCxnLG0sayxiLHksZixTLHYsUCxDOyFmdW5jdGlvbihlKXtlLlByaW1hcnk9XCJwcmltYXJ5XCIsZS5TZWNvbmRhcnk9XCJzZWNvbmRhcnlcIixlLlRleHRPbmx5PVwidGV4dE9ubHlcIn0odXx8KHU9e30pKSxmdW5jdGlvbihlKXtlLkFjdGlvbkJ1dHRvbj1cIkFjdGlvbkJ1dHRvblwiLGUuRHJvcGRvd25CdXR0b249XCJEcm9wZG93bkJ1dHRvblwifShwfHwocD17fSkpLGZ1bmN0aW9uKGUpe2UuTGVmdD1cIkxlZnRcIixlLlJpZ2h0PVwiUmlnaHRcIixlLlRvcD1cIlRvcFwiLGUuQm90dG9tPVwiQm90dG9tXCJ9KHd8fCh3PXt9KSksZnVuY3Rpb24oZSl7ZS5VcmxDaGFuZ2U9XCJVUkxfQ0hBTkdFXCIsZS5WaWV3QWRkZWQ9XCJWSUVXX0FEREVEXCIsZS5WaWV3UmVtb3ZlZD1cIlZJRVdfUkVNT1ZFRFwiLGUuUGFnZUNvbnRleHRBZGRlZD1cIlBBR0VfQ09OVEVYVF9BRERFRFwiLGUuUGFnZUNvbnRleHRSZW1vdmVkPVwiUEFHRV9DT05URVhUX1JFTU9WRURcIn0oaHx8KGg9e30pKSxmdW5jdGlvbihlKXtlLk5ld1dpbmRvdz1cIk5ld1dpbmRvd1wiLGUuTmV3UGFnZT1cIk5ld1BhZ2VcIixlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLlNhdmVQYWdlQXM9XCJTYXZlUGFnZUFzXCIsZS5QcmludD1cIlByaW50XCIsZS5QcmludEFsbD1cIlByaW50QWxsXCIsZS5QcmludFNjcmVlbj1cIlByaW50U2NyZWVuXCIsZS5DbG9zZVdpbmRvdz1cIkNsb3NlV2luZG93XCIsZS5SZXN0b3JlQ2hhbmdlcz1cIlJlc3RvcmVDaGFuZ2VzXCIsZS5TYXZlV29ya3NwYWNlPVwiU2F2ZVdvcmtzcGFjZVwiLGUuU2F2ZVdvcmtzcGFjZUFzPVwiU2F2ZVdvcmtzcGFjZUFzXCIsZS5SZW5hbWVXb3Jrc3BhY2U9XCJSZW5hbWVXb3Jrc3BhY2VcIixlLlN3aXRjaFdvcmtzcGFjZT1cIlN3aXRjaFdvcmtzcGFjZVwiLGUuRGVsZXRlV29ya3NwYWNlPVwiRGVsZXRlV29ya3NwYWNlXCIsZS5Eb3dubG9hZHM9XCJEb3dubG9hZHNcIixlLk9wZW5TdG9yZWZyb250PVwiT3BlblN0b3JlZnJvbnRcIixlLkFwcGVhcmFuY2U9XCJBcHBlYXJhbmNlXCIsZS5RdWl0PVwiUXVpdFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KGd8fChnPXt9KSksZnVuY3Rpb24oZSl7ZS5MaWdodD1cImxpZ2h0XCIsZS5EYXJrPVwiZGFya1wiLGUuU3lzdGVtPVwic3lzdGVtXCJ9KG18fChtPXt9KSksZnVuY3Rpb24oZSl7ZS5DbG9zZT1cIkNsb3NlXCIsZS5EdXBsaWNhdGU9XCJEdXBsaWNhdGVcIixlLlJlbmFtZT1cIlJlbmFtZVwiLGUuU2F2ZT1cIlNhdmVcIixlLlNhdmVBcz1cIlNhdmUgQXNcIixlLk5ld1BhZ2U9XCJOZXcgUGFnZVwiLGUuRGVsZXRlUGFnZT1cIkRlbGV0ZSBQYWdlXCIsZS5TYXZlV29ya3NwYWNlQXM9XCJTYXZlV29ya3NwYWNlQXNcIixlLlJlZnJlc2g9XCJSZWZyZXNoXCIsZS5DbG9zZU90aGVycz1cIkNsb3NlIG90aGVyc1wiLGUuRGVsZXRlPVwiRGVsZXRlXCIsZS5QcmludD1cIlByaW50XCIsZS5QcmludEFsbD1cIlByaW50QWxsXCIsZS5QcmludFNjcmVlbj1cIlByaW50U2NyZWVuXCIsZS5DdXN0b209XCJDdXN0b21cIn0oa3x8KGs9e30pKSxmdW5jdGlvbihlKXtlLkxvY2s9XCJMb2NrXCIsZS5TaG93SGlkZVRhYnM9XCJTaG93SGlkZVRhYnNcIixlLkFkZFRvQ2hhbmVsPVwiQWRkVG9DaGFubmVsXCIsZS5QcmludD1cIlByaW50XCIsZS5QaW49XCJQaW5cIn0oYnx8KGI9e30pKSxmdW5jdGlvbihlKXtlLkVkaXROYW1lPVwiRWRpdCBOYW1lXCIsZS5Nb3ZlPVwiTW92ZVwiLGUuRGVsZXRlPVwiRGVsZXRlXCJ9KHl8fCh5PXt9KSksZnVuY3Rpb24oZSl7ZS5OZXdWaWV3PVwiTmV3Vmlld1wiLGUuRHVwbGljYXRlVmlld3M9XCJEdXBsaWNhdGVWaWV3XCIsZS5PcGVuV2l0aERlZmF1bHRCcm93c2VyPVwiT3BlbldpdGhEZWZhdWx0QnJvd3NlclwiLGUuUmVsb2FkVmlld3M9XCJSZWxvYWRUYWJcIixlLkNsb3NlVmlld3M9XCJDbG9zZVRhYlwiLGUuQWRkVG9DaGFubmVsPVwiQWRkVG9DaGFubmVsXCIsZS5SZW1vdmVGcm9tQ2hhbm5lbD1cIlJlbW92ZUZyb21DaGFubmVsXCIsZS5CYWNrPVwiQmFja1wiLGUuRm9yd2FyZD1cIkZvcndhcmRcIixlLlByaW50PVwiUHJpbnRcIixlLlByaW50QWxsPVwiUHJpbnRBbGxcIixlLlByaW50U2NyZWVuPVwiUHJpbnRTY3JlZW5cIixlLkN1c3RvbT1cIkN1c3RvbVwifShmfHwoZj17fSkpLGZ1bmN0aW9uKGUpe2UuU2hvd0hpZGVUYWJzPVwiU2hvd0hpZGVUYWJzXCIsZS5Db2xvckxpbmtpbmc9XCJDb2xvckxpbmtpbmdcIixlLlByZXNldExheW91dHM9XCJQcmVzZXRMYXlvdXRzXCIsZS5Mb2NrVW5sb2NrUGFnZT1cIkxvY2tVbmxvY2tQYWdlXCIsZS5TYXZlTWVudT1cIlNhdmVNZW51XCIsZS5TYXZlUGFnZT1cIlNhdmVQYWdlXCIsZS5NaW5pbWlzZT1cIk1pbmltaXNlXCIsZS5NYXhpbWlzZT1cIk1heGltaXNlXCIsZS5DbG9zZT1cIkNsb3NlXCIsZS5DdXN0b209XCJDdXN0b21cIn0oU3x8KFM9e30pKSxmdW5jdGlvbihlKXtlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLlNhdmVXb3Jrc3BhY2U9XCJTYXZlV29ya3NwYWNlXCIsZS5TYXZlUGFnZUFzPVwiU2F2ZVBhZ2VBc1wiLGUuU2F2ZVdvcmtzcGFjZUFzPVwiU2F2ZVdvcmtzcGFjZUFzXCIsZS5DdXN0b209XCJDdXN0b21cIn0odnx8KHY9e30pKSxmdW5jdGlvbihlKXtlLkJyb3dzZXI9XCJicm93c2VyXCIsZS5QbGF0Zm9ybT1cInBsYXRmb3JtXCJ9KFB8fChQPXt9KSksZnVuY3Rpb24oZSl7ZS5DdXN0b21CdXR0b249XCJDdXN0b21CdXR0b25cIixlLlN0b3JlQ3VzdG9tQnV0dG9uPVwiU3RvcmVDdXN0b21CdXR0b25cIixlLkN1c3RvbURyb3Bkb3duSXRlbT1cIkN1c3RvbURyb3Bkb3duSXRlbVwiLGUuR2xvYmFsQ29udGV4dE1lbnU9XCJHbG9iYWxDb250ZXh0TWVudVwiLGUuVmlld1RhYkNvbnRleHRNZW51PVwiVmlld1RhYkNvbnRleHRNZW51XCIsZS5QYWdlVGFiQ29udGV4dE1lbnU9XCJQYWdlVGFiQ29udGV4dE1lbnVcIixlLlNhdmVCdXR0b25Db250ZXh0TWVudT1cIlNhdmVCdXR0b25Db250ZXh0TWVudVwiLGUuQVBJPVwiQVBJXCJ9KEN8fChDPXt9KSk7Y29uc3QgTT1bXCJlbi1VU1wiLFwiamEtSlBcIixcInpoLUNOXCIsXCJrby1LUlwiLFwicnUtUlVcIixcImRlLURFXCIsXCJ6aC1IYW50XCJdO3ZhciB4LEk7IWZ1bmN0aW9uKGUpe2UuU0FWRV9QQUdFPVwiU0FWRV9QQUdFXCIsZS5TQVZFX1dPUktTUEFDRT1cIlNBVkVfV09SS1NQQUNFXCIsZS5TQVZFX1BBR0VfQVM9XCJTQVZFX1BBR0VfQVNcIixlLlNBVkVfV09SS1NQQUNFX0FTPVwiU0FWRV9XT1JLU1BBQ0VfQVNcIixlLlJFTkFNRV9QQUdFPVwiUkVOQU1FX1BBR0VcIixlLlJFTkFNRV9XT1JLU1BBQ0U9XCJSRU5BTUVfV09SS1NQQUNFXCJ9KHh8fCh4PXt9KSksZnVuY3Rpb24oZSl7ZS5Mb2NhbD1cImxvY2FsXCIsZS5EZXY9XCJkZXZcIixlLlN0YWdpbmc9XCJzdGFnaW5nXCIsZS5Qcm9kPVwicHJvZFwifShJfHwoST17fSkpO2NvbnN0IEE9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbixXPShcInVuZGVmaW5lZFwiPT10eXBlb2YgcHJvY2Vzc3x8cHJvY2Vzcy5lbnYsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyksRD1XJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgaW5kZXhlZERCLFQ9Vz93aW5kb3cub3JpZ2luOkkuTG9jYWwsUj1BJiZmaW4ubWUudXVpZCxCPUEmJmZpbi5tZS5uYW1lLEU9QSYmZmluLm1lLmVudGl0eVR5cGUsRj0oSS5Mb2NhbCxJLkRldixJLlN0YWdpbmcsXCJwcm9kXCI9PT1JLlByb2QpLFY9ZT0+ZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKXx8ZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIik/ZTpUK2UsTj1WKFwiaHR0cHM6Ly93b3Jrc3BhY2Uub3BlbmZpbi5jby93b3Jrc3BhY2UvMjEuMC4xOFwiKSxMPVYoXCJodHRwczovL3dvcmtzcGFjZS5vcGVuZmluLmNvL3dvcmtzcGFjZS8yMS4wLjE4XCIpLF89KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwmJlYoV09SS1NQQUNFX0RPQ1NfUExBVEZPUk1fVVJMKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgV09SS1NQQUNFX0RPQ1NfQ0xJRU5UX1VSTCYmVihXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMKSxcIjQxLjEzNC4xMDIuN1wiKSxPPVwiMjEuMC4xOFwiO1widW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfQlVJTERfU0hBJiZXT1JLU1BBQ0VfQlVJTERfU0hBO3ZhciBVLEc7IWZ1bmN0aW9uKGUpe2UuSG9tZT1cIi9ob21lL1wiLGUuSG9tZVNlYXJjaD1cIi9ob21lLz9kZWVwbGluaz1zZWFyY2hcIixlLkhvbWVQYWdlc1JlbmFtZT1cIi9ob21lL3BhZ2VzL3JlbmFtZS9cIixlLkRvY2s9XCIvZG9jay9cIixlLkRvY3M9XCIvcHJvdmlkZXIvZG9jcy9cIixlLlN0b3JlZnJvbnQ9XCIvc3RvcmVmcm9udC9cIixlLkRlcHJlY2F0ZWRBbGVydD1cIi9wcm92aWRlci9kZXByZWNhdGVkLWFsZXJ0L1wiLGUuQW5hbHl0aWNzPVwiL3Byb3ZpZGVyL2FuYWx5dGljcy9cIixlLlByb3ZpZGVyPVwiL3Byb3ZpZGVyL1wifShVfHwoVT17fSkpLGZ1bmN0aW9uKGUpe2UuQnJvd3Nlcj1cIi9icm93c2VyL1wiLGUuQnJvd3NlclBvcHVwTWVudT1cIi9wb3B1cC1tZW51L1wiLGUuQnJvd3NlclBvcHVwTWVudVNhdmVNb2RhbD1cIi9wb3B1cC1tZW51L3NhdmUtbW9kYWwvXCIsZS5Ccm93c2VyUG9wdXBNZW51TGF5b3V0cz1cIi9wb3B1cC1tZW51L2xheW91dHMvbGF5b3V0cy9cIixlLkJyb3dzZXJQb3B1cE1lbnVDb2xvckxpbmtpbmc9XCIvcG9wdXAtbWVudS9jb2xvci1saW5raW5nL2NvbG9yLWxpbmtpbmcvXCIsZS5Ccm93c2VySW5kaWNhdG9yPVwiL2luZGljYXRvci9cIixlLkJyb3dzZXJQb3B1cE1lbnVBZGRyZXNzU2VhcmNoUmVzdWx0c1ZpZXc9XCIvcG9wdXAtbWVudS9hZGRyZXNzLXNlYXJjaC1yZXN1bHRzLXZpZXcvXCIsZS5SZXNwb25zZU1vZGFsPVwiL3BvcHVwLW1lbnUvcmVzcG9uc2UtbW9kYWwvXCIsZS5DbG9zZUNvbmZpcm1hdGlvbk1vZGFsPVwiL3BvcHVwLW1lbnUvY2xvc2UtY29uZmlybWF0aW9uLW1vZGFsL1wiLGUuRW50ZXJwcmlzZUJyb3dzZXI9XCIvZW50ZXJwcmlzZS9cIixlLkVudGVycHJpc2VDb250ZXh0TWVudT1cIi9jb250ZXh0LW1lbnUvXCIsZS5FbnRlcnByaXNlQm9va21hcmtEaWFsb2c9XCIvYm9va21hcmstZGlhbG9nL1wiLGUuRW50ZXJwcmlzZVN0b3JhZ2VQcm94eT1cIi9lbnRlcnByaXNlL3N0b3JhZ2UtcHJveHlcIixlLkRyb3Bkb3duTWVudT1cIi9kcm9wZG93bi1tZW51L1wiLGUuRW50ZXJwcmlzZURvY2s9XCIvZG9jay9cIn0oR3x8KEc9e30pKTtjb25zdCBIPXsuLi5VLC4uLkd9O3ZhciAkOyFmdW5jdGlvbihlKXtlLlNlYXJjaD1cInNlYXJjaFwifSgkfHwoJD17fSkpO2NvbnN0IEs9SDthc3luYyBmdW5jdGlvbiB6KCl7Y29uc3QgZT1cImdldE1hbmlmZXN0T3ZlcnJpZGVzXCIse21hbmlmZXN0OnQsaW5pdGlhbE9wdGlvbnM6YX09YXdhaXQgZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0SW5mbygpO3JldHVybiB0Py5wbGF0Zm9ybS53b3Jrc3BhY2V8fHQ/LnBsYXRmb3JtLmhvbWV8fGE/LndvcmtzcGFjZXx8YT8uaG9tZXx8Y29uc29sZS53YXJuKGAke2V9OiBNaXNzaW5nIEhvbWUgZGV2ZWxvcG1lbnQgbWFuaWZlc3Qgb3ZlcnJpZGVzLCB1c2luZyBEZXNrdG9wIE93bmVyIFNldHRpbmdzLmApLHQ/LnBsYXRmb3JtLndvcmtzcGFjZT8oSlNPTi5zdHJpbmdpZnkodD8ucGxhdGZvcm0ud29ya3NwYWNlKSx0Py5wbGF0Zm9ybS53b3Jrc3BhY2UpOnQ/LnBsYXRmb3JtLmhvbWU/KEpTT04uc3RyaW5naWZ5KHQ/LnBsYXRmb3JtLmhvbWUpLHQ/LnBsYXRmb3JtLmhvbWUpOmE/LndvcmtzcGFjZT8oSlNPTi5zdHJpbmdpZnkoYT8ud29ya3NwYWNlKSxhPy53b3Jrc3BhY2UpOmE/LmhvbWU/KEpTT04uc3RyaW5naWZ5KGE/LmhvbWUpLGE/LmhvbWUpOnt9fWNvbnN0IEo9ZT0+ZmluLlN5c3RlbS5nZXRTeXN0ZW1BcHBDb25maWcoZSk7YXN5bmMgZnVuY3Rpb24gcSgpe2NvbnN0IGU9XCJnZXRET1NPdmVycmlkZXNcIjtpZighQSlyZXR1cm4gY29uc29sZS53YXJuKGAke2V9OiB0aGUgZmluIEFQSSB3YXMgbm90IGF2YWlsYWJsZSwgcmV0dXJuaW5nIG5vIHJlc3VsdGApLHt9O3RyeXtsZXQgdD1hd2FpdCBKKFwid29ya3NwYWNlXCIpLmNhdGNoKCh0PT57Y29uc29sZS53YXJuKGAke2V9OiBjdXN0b21Db25maWcgZW50cnkgZm9yIFN5c3RlbUFwcCB3b3Jrc3BhY2Ugbm90IGF2YWlsYWJsZSBpbiBEZXNrdG9wIE93bmVyIFNldHRpbmdzLiAke3Q/Lm1lc3NhZ2V9YCl9KSk7cmV0dXJuIHR8fCh0PWF3YWl0IEooXCJob21lXCIpKSxKU09OLnN0cmluZ2lmeSh0KSx0fWNhdGNoKHQpe2lmKCFGKXJldHVybnt9O2lmKCEodCBpbnN0YW5jZW9mIEVycm9yKSl0aHJvdyB0O2NvbnNvbGUud2FybihgJHtlfTogTWlzc2luZyBXb3Jrc3BhY2UgRGVza3RvcCBPd25lciBTZXR0aW5ncyBjb25maWd1cmF0aW9uLCB1c2luZyBkZWZhdWx0cy4gJHt0Py5tZXNzYWdlfWApfXJldHVybnt9fWxldCBaLGo7YXN5bmMgZnVuY3Rpb24gUSgpe2lmKFopcmV0dXJuIFo7Y29uc3QgZT1cImdldE92ZXJyaWRlc1wiO2lmKCFBKXJldHVybiBXJiZjb25zb2xlLndhcm4oYCR7ZX06IFRoZSBGaW4gQVBJIHdhcyBub3QgYXZhaWxhYmxlLiBSZXR1cm5pbmcgYW4gZW1wdHkgcmVzdWx0LmApLHt9O2NvbnN0W3QsYV09YXdhaXQgUHJvbWlzZS5hbGwoW3EoKSx6KCldKTtyZXR1cm4gWj17Li4uYSwuLi50LGRpc2FibGVSdW50aW1lVmFsaWRhdGlvbjphLmRpc2FibGVSdW50aW1lVmFsaWRhdGlvbnx8dC5kaXNhYmxlUnVudGltZVZhbGlkYXRpb259LFp9ZnVuY3Rpb24gWShlKXtqPWV9Y29uc3QgWD1lPT5lLnJlcGxhY2UoL1xcLyQvLFwiXCIpO2FzeW5jIGZ1bmN0aW9uIGVlKCl7Y29uc3QgZT0oYXdhaXQgUSgpKS5icm93c2VyQmFzZVVybDtpZihlKXRyeXtjb25zdCB0PW5ldyBVUkwoZSk7aWYodC5wYXRobmFtZS5lbmRzV2l0aChcIi9cIikpdC5wYXRobmFtZT1YKHQucGF0aG5hbWUpO2Vsc2V7aWYoXCIvd29ya3NwYWNlXCI9PT10LnBhdGhuYW1lKXJldHVybiB0LnBhdGhuYW1lKz1gLyR7T31gLHQudG9TdHJpbmcoKTtjb25zb2xlLndhcm4oYEBvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybTogYnJvd3Nlck92ZXJyaWRlQmFzZVVybCBtdXN0IGJlIGEgdmFsaWQgdXJsLCB3aXRoIHBhdGg6IC93b3Jrc3BhY2UuIEV4cGVjdGVkIDxwcm90b2NvbD46Ly88b3B0aW9uYWwgc3ViZG9tYWluPi48ZG9tYWluPi93b3Jrc3BhY2UgYnV0IGdvdCAke2V9YCl9fWNhdGNoKHQpe2NvbnNvbGUud2FybihgQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtOiBicm93c2VyT3ZlcnJpZGVCYXNlVXJsIG11c3QgYmUgYSB2YWxpZCB1cmwuIEV4cGVjdGVkIDxwcm90b2NvbD46Ly88b3B0aW9uYWwgc3ViZG9tYWluPi48ZG9tYWluPi93b3Jrc3BhY2UgYnV0IGdvdCAke2V9YCl9cmV0dXJuIGo/P0x9YXN5bmMgZnVuY3Rpb24gdGUoZT0hMSl7Y29uc3QgdD1hd2FpdCBlZSgpK0suQnJvd3NlcjtyZXR1cm4gZT90OlgodCl9YXN5bmMgZnVuY3Rpb24gYWUoZT0hMSl7Y29uc3QgdD1hd2FpdCBlZSgpK0suRW50ZXJwcmlzZUJyb3dzZXI7cmV0dXJuIGU/dDpYKHQpfWFzeW5jIGZ1bmN0aW9uIG5lKCl7cmV0dXJuIGF3YWl0IGFlKCkrXCIvbGFuZGluZy9cIn1jb25zdCBvZT1hc3luYyhlLHQ9ITEpPT5lP2FlKHQpOnRlKHQpO3ZhciByZSxpZTshZnVuY3Rpb24oZSl7ZS5Xb3Jrc3BhY2U9XCJvcGVuZmluLXdvcmtzcGFjZVwiLGUuT2xkV29ya3NwYWNlPVwib3BlbmZpbi1icm93c2VyXCJ9KHJlfHwocmU9e30pKSxmdW5jdGlvbihlKXtlLkZpblByb3RvY29sPVwiZmluLXByb3RvY29sXCJ9KGllfHwoaWU9e30pKTtjb25zdCBzZT17dXVpZDpSfSxjZT0ocmUuV29ya3NwYWNlLGU9PntpZighQSl0aHJvdyBuZXcgRXJyb3IoXCJnZXRBcHBsaWNhdGlvbiBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbiBPcGVuRmluIGVudi4gQXZvaWQgdXNpbmcgdGhpcyBkdXJpbmcgcHJlLXJlbmRlcmluZy5cIik7cmV0dXJuIGZpbi5BcHBsaWNhdGlvbi53cmFwU3luYyhlKX0pLGxlPSgpPT5jZShzZSk7dmFyIGRlOyFmdW5jdGlvbihlKXtlLkhvbWU9XCJvcGVuZmluLWhvbWVcIixlLkRvY2s9XCJvcGVuZmluLWRvY2tcIixlLlN0b3JlZnJvbnQ9XCJvcGVuZmluLXN0b3JlZnJvbnRcIixlLkhvbWVJbnRlcm5hbD1cIm9wZW5maW4taG9tZS1pbnRlcm5hbFwiLGUuQnJvd3Nlck1lbnU9XCJvcGVuZmluLWJyb3dzZXItbWVudVwiLGUuQnJvd3NlclNhdmVNZW51PVwib3BlbmZpbi1icm93c2VyLXNhdmUtbWVudVwiLGUuQnJvd3NlckluZGljYXRvcj1cIm9wZW5maW4tYnJvd3Nlci1pbmRpY2F0b3JcIixlLkJyb3dzZXJXaW5kb3c9XCJpbnRlcm5hbC1nZW5lcmF0ZWQtd2luZG93XCIsZS5DbGFzc2ljV2luZG93PVwiaW50ZXJuYWwtZ2VuZXJhdGVkLWNsYXNzaWMtd2luZG93XCIsZS5FbnRlcnByaXNlQ29udGV4dE1lbnU9XCJvcGVuZmluLWVudGVycHJpc2UtY29udGV4dC1tZW51XCIsZS5Ccm93c2VyQWRkcmVzc1NlYXJjaFByZWZpeD1cIm9wZW5maW4tYnJvd3Nlci1tZW51LWFkZHJlc3Mtc2VhcmNoLVwiLGUuRW50ZXJwcmlzZUJvb2ttYXJrRGlhbG9nV2luZG93PVwib3BlbmZpbi1lbnRlcnByaXNlLWJvb2ttYXJrLWRpYWxvZ1wiLGUuRHJvcGRvd25NZW51PVwib3BlbmZpbi1lbnRlcnByaXNlLWRyb3Bkb3duLW1lbnVcIixlLkRvY2tDb21wYW5pb249XCJvcGVuZmluLWRvY2stY29tcGFuaW9uXCJ9KGRlfHwoZGU9e30pKTtjb25zdCB1ZT1lPT4oe2xlZnQ6KGUubGVmdCsoZS5yaWdodD8/ZS5sZWZ0K2Uud2lkdGgpKS8yLHRvcDooZS50b3ArKGUuYm90dG9tPz9lLnRvcCtlLmhlaWdodCkpLzJ9KTtmdW5jdGlvbiBwZShlKXtpZighQSl0aHJvdyBuZXcgRXJyb3IoXCJnZXRPRldpbmRvdyBjYW4gb25seSBiZSB1c2VkIGluIGFuIE9wZW5GaW4gZW52LiBBdm9pZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gZmluLldpbmRvdy53cmFwU3luYyhlKX1jb25zdCB3ZT17bmFtZTpCLHV1aWQ6Un07ZnVuY3Rpb24gaGUoKXtyZXR1cm4gcGUod2UpfWRlLkhvbWUscmUuV29ya3NwYWNlLGRlLkRvY2sscmUuV29ya3NwYWNlO2NvbnN0IGdlPXtuYW1lOmRlLlN0b3JlZnJvbnQsdXVpZDpyZS5Xb3Jrc3BhY2V9O3JlLldvcmtzcGFjZSxyZS5Xb3Jrc3BhY2U7YXN5bmMgZnVuY3Rpb24gbWUoZSl7Y29uc3QgdD1wZShlKTtcIm1pbmltaXplZFwiPT09YXdhaXQgdC5nZXRTdGF0ZSgpJiZhd2FpdCB0LnJlc3RvcmUoKSxhd2FpdCB0LnNob3coKSxhd2FpdCB0LmZvY3VzKCl9Y29uc3Qga2U9YXN5bmMgZT0+e3RyeXtjb25zdCB0PWF3YWl0IGZpbi5XaW5kb3cud3JhcFN5bmMoe25hbWU6ZS5uYW1lLHV1aWQ6ZS51dWlkPz9maW4ubWUudXVpZH0pLmdldE9wdGlvbnMoKTtyZXR1cm4oXCJicm93c2VyXCI9PT10LndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlfHxcImVudGVycHJpc2VcIj09PXQud29ya3NwYWNlUGxhdGZvcm0/LndpbmRvd1R5cGUpJiZ0LndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlc31jYXRjaChlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiaXNCcm93c2VyV2luZG93IGVycm9yOiBcIixlKSwhMX19O2FzeW5jIGZ1bmN0aW9uIGJlKCl7Y29uc3QgZT1hd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRDaGlsZFdpbmRvd3MoKSx0PWF3YWl0IFByb21pc2UuYWxsKGUubWFwKChhc3luYyBlPT5rZShlLmlkZW50aXR5KSkpKTtyZXR1cm4gZS5maWx0ZXIoKChlLGEpPT50W2FdKSl9YXN5bmMgZnVuY3Rpb24geWUoKXtyZXR1cm4oYXdhaXQgZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0Q2hpbGRXaW5kb3dzKCkpLmZpbHRlcigoZT0+ZS5pZGVudGl0eS5uYW1lLnN0YXJ0c1dpdGgoZGUuQnJvd3Nlck1lbnUpKSl9Y29uc3QgZmU9ZT0+cGUoZSkuZ2V0T3B0aW9ucygpLnRoZW4oKCgpPT4hMCkpLmNhdGNoKCgoKT0+ITEpKSxTZT0oKT0+ZmUoZ2UpO2Z1bmN0aW9uIHZlKGUsdCl7Y29uc3QgYT1lLnRvcCxuPWUubGVmdCxvPWUudG9wK2UuaGVpZ2h0LHI9ZS5sZWZ0K2Uud2lkdGgsaT10Lm1vbml0b3JSZWN0LnRvcCxzPXQubW9uaXRvclJlY3QubGVmdCxjPXQubW9uaXRvclJlY3QuYm90dG9tLGw9dC5tb25pdG9yUmVjdC5yaWdodDtpZihhPmN8fG88aXx8bj5sfHxyPHMpcmV0dXJuIDA7Y29uc3QgZD1NYXRoLm1heChhLGkpLHU9TWF0aC5tYXgobixzKTtyZXR1cm4oTWF0aC5taW4obyxjKS1kKSooTWF0aC5taW4ocixsKS11KS8oZS5oZWlnaHQqZS53aWR0aCl9YXN5bmMgZnVuY3Rpb24gUGUoZSl7Y29uc3QgdD1hd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCk7cmV0dXJuW3QucHJpbWFyeU1vbml0b3IsLi4udC5ub25QcmltYXJ5TW9uaXRvcnNdLnJlZHVjZSgoKHQsYSk9Pntjb25zdCBuPXZlKGUsYSk7cmV0dXJuIG4+dC5wZXJjZW50YWdlP3twZXJjZW50YWdlOm4sbW9uaXRvcjphfTp0fSkse3BlcmNlbnRhZ2U6MCxtb25pdG9yOnQucHJpbWFyeU1vbml0b3J9KS5tb25pdG9yfWNvbnN0IENlPShlLHQpPT57Y29uc3QgYT1lO3JldHVybiBhLndvcmtzcGFjZVBsYXRmb3JtfHwoYS53b3Jrc3BhY2VQbGF0Zm9ybT17fSksYS53b3Jrc3BhY2VQbGF0Zm9ybS5faW50ZXJuYWxEZWZlclNob3dPcHRpb25zPXtzZXRBc0ZvcmVncm91bmQ6ISF0LGRlZmVyU2hvd0VuYWJsZWQ6ITAsYXV0b1Nob3c6YS53b3Jrc3BhY2VQbGF0Zm9ybT8uX2ludGVybmFsQXV0b1Nob3d8fGEud29ya3NwYWNlUGxhdGZvcm0/Ll9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnM/LmF1dG9TaG93fHx2b2lkIDA9PT1hLmF1dG9TaG93fHxhLmF1dG9TaG93fSxhLmF1dG9TaG93PSExLGF9O2NvbnN0IE1lPTU2LHhlPTcyOCxJZT0xNTAsQWU9YXN5bmMgZT0+e2NvbnN0IHQ9ZT9maW4uV2luZG93LndyYXBTeW5jKGUpOmZpbi5XaW5kb3cuZ2V0Q3VycmVudFN5bmMoKSxhPWF3YWl0IHQuZ2V0T3B0aW9ucygpO3JldHVybiBhLndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlJiZcImVudGVycHJpc2VcIj09PWEud29ya3NwYWNlUGxhdGZvcm0ud2luZG93VHlwZX0sV2U9ZT0+e2NvbnN0IHQ9ZT8uZGVmYXVsdFdpbmRvd09wdGlvbnM/LndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlO3JldHVyblwiZW50ZXJwcmlzZVwiPT09dH07bGV0IERlO2NvbnN0IFRlPWU9PntpZihlKXRyeXtyZXR1cm4gbmV3IFVSTChlKS5wYXRobmFtZS5pbmNsdWRlcyhLLkVudGVycHJpc2VCcm93c2VyKX1jYXRjaCh0KXtjb25zb2xlLmVycm9yKFwiZXJyb3IgcGFyc2luZyB1cmw6ICVPXCIsZSl9cmV0dXJuITF9LFJlPShlLHQ9MCk9PntsZXQgYSxuLG89ITE7Y29uc3Qgcj1hc3luYyBuPT57Y29uc3QgaT1hd2FpdCBlKC4uLm4pO2lmKG8pe2F3YWl0IG5ldyBQcm9taXNlKChlPT5zZXRUaW1lb3V0KGUsdCkpKTtjb25zdCBlPWE7cmV0dXJuIGE9dm9pZCAwLG89ITEscihlKX1yZXR1cm4gaX07cmV0dXJuKC4uLmUpPT4obj8obz0hMCxhPWUpOm49cihlKS5jYXRjaCgoZT0+e3Rocm93IGNvbnNvbGUuZXJyb3IoXCJtYWtlRGVib3VuY2VkRnVuY1wiLGUpLGV9KSkuZmluYWxseSgoKCk9PntuPXZvaWQgMH0pKSxuKX07dmFyIEJlOyFmdW5jdGlvbihlKXtlLlRvcD1cInRvcFwiLGUuQmVsb3c9XCJiZWxvd1wifShCZXx8KEJlPXt9KSk7Y29uc3QgRWU9YXN5bmMgZT0+e3RyeXtyZXR1cm4hIWUmJlwibWF4aW1pemVkXCI9PT1hd2FpdCBlLmdldFN0YXRlKCl9Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUud2FybihcInBhcmVudFdpbmRvd01heGltaXplZCAtIEZhaWxlZCB0byBnZXQgcGFyZW50IHdpbmRvdyBzdGF0ZVwiLGUpLCExfX07YXN5bmMgZnVuY3Rpb24gRmUoZSx0LGEsbixvLHIpe2NvbnN0IGk9ISFlJiZwZShlKSxzPWF3YWl0KGFzeW5jKGUsdCk9Pnt0cnl7cmV0dXJuIGU/YXdhaXQgZS5nZXRCb3VuZHMoKTp0fWNhdGNoKGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJnZXRQYXJlbnRXaW5kb3dCb3VuZHMgLSBGYWlsZWQgdG8gZ2V0IHBhcmVudCB3aW5kb3cgYm91bmRzXCIsZSksdH19KShpLHIpO2lmKG49PT1CZS5CZWxvdyl7aWYoIWl8fGF3YWl0IEVlKGkpKXtjb25zdCBlPWk/KGF3YWl0IFBlKHMpKS5hdmFpbGFibGVSZWN0Oihhd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCkpLnByaW1hcnlNb25pdG9yLmF2YWlsYWJsZVJlY3Q7cmV0dXJue2xlZnQ6dWUoZSkubGVmdC10LzIsdG9wOm8/ZS5ib3R0b20tMTI4OmUuYm90dG9tKzEyLHdpZHRoOnQsaGVpZ2h0OmF9fXJldHVybntsZWZ0OnVlKHMpLmxlZnQtdC8yLHRvcDpvP3MuYm90dG9tLTEyODpzLmJvdHRvbSsxMix3aWR0aDp0LGhlaWdodDphfX1pZighaXx8YXdhaXQgRWUoaSkpe2NvbnN0IGU9aT8oYXdhaXQgUGUocykpLmF2YWlsYWJsZVJlY3Q6KGF3YWl0IGZpbi5TeXN0ZW0uZ2V0TW9uaXRvckluZm8oKSkucHJpbWFyeU1vbml0b3IuYXZhaWxhYmxlUmVjdDtyZXR1cm57bGVmdDp1ZShlKS5sZWZ0LXQvMix0b3A6ZS50b3ArMjAsd2lkdGg6dCxoZWlnaHQ6YX19cmV0dXJue2xlZnQ6dWUocykubGVmdC10LzIsdG9wOnMudG9wKzIwLHdpZHRoOnQsaGVpZ2h0OmF9fVJlKChhc3luYyBmdW5jdGlvbihlLHQsYSxuLG8pe2NvbnN0IHI9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPWF3YWl0IEZlKGUsci53aWR0aCxyLmhlaWdodCxhLG4sbyk7aWYoMD09PWkud2lkdGh8fDA9PT1pLmhlaWdodClyZXR1cm47Y29uc3Qgcz1oZSgpO2F3YWl0IHMuc2V0Qm91bmRzKGkpLGF3YWl0IHMuc2hvdygpO2NvbnN0IGM9c2V0VGltZW91dCgoKCk9PnMuY2xvc2UoKSksbj81ZTM6M2UzKSxsPSgpPT57Y2xlYXJUaW1lb3V0KGMpLHMuY2xvc2UoKX07aWYoZSl7Y29uc3QgdD1wZShlKTt0Lm9uKFwiYm91bmRzLWNoYW5naW5nXCIsKCgpPT5sKCkpKSx0Lm9uKFwiYmx1cnJlZFwiLCgoKT0+bCgpKSksdC5vbihcIm1heGltaXplZFwiLCgoKT0+bCgpKSksdC5vbihcIm1pbmltaXplZFwiLCgoKT0+bCgpKSksdC5vbihcInJlc3RvcmVkXCIsKCgpPT5sKCkpKX19KSwxMCk7Y29uc3QgVmU9YXN5bmMgZT0+e2NvbnN0IHQ9ZSYmYXdhaXQgcGUoZSkuZ2V0Qm91bmRzKCksYT1lP2F3YWl0IFBlKHQpOihhd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCkpLnByaW1hcnlNb25pdG9yO3JldHVybntsZWZ0Oigobj1hLmF2YWlsYWJsZVJlY3QpLmxlZnQrbi5yaWdodCkvMix0b3A6KG4udG9wK24uYm90dG9tKS8yfTt2YXIgbn0sTmU9YXN5bmMoZSx0LGE9ITEpPT57bGV0IG47aWYoYSluPWF3YWl0IFZlKHQpO2Vsc2V7Y29uc3QgZT1wZSh0KSxhPWF3YWl0IGUuZ2V0Qm91bmRzKCk7bj1uPz91ZShhKX1jb25zdHtkZWZhdWx0SGVpZ2h0Om8sZGVmYXVsdFdpZHRoOnJ9PWU7cmV0dXJuKChlLHQpPT57Y29uc3QgYT10LndpZHRoLzIsbj10LmhlaWdodC8yO3JldHVybntsZWZ0Ok1hdGgucm91bmQoZS5sZWZ0LWEpLHRvcDpNYXRoLnJvdW5kKGUudG9wLW4pLHdpZHRoOnQud2lkdGgsaGVpZ2h0OnQuaGVpZ2h0fX0pKG4se2hlaWdodDpvLHdpZHRoOnJ9KX07YXN5bmMgZnVuY3Rpb24gTGUoZSx0LGE9ITEpe2NvbnN0IG49dCYmXCJtYXhpbWl6ZWRcIj09PWF3YWl0IHBlKHQpLmdldFN0YXRlKCksbz1hfHxufHwhdCxyPWF3YWl0IE5lKGUsdCxvKTtyZXR1cm4gYXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZmluLlN5c3RlbS5nZXRNb25pdG9ySW5mbygpLGE9W3QucHJpbWFyeU1vbml0b3IsLi4udC5ub25QcmltYXJ5TW9uaXRvcnNdO2Zvcihjb25zdCB0IG9mIGEpaWYoMT09PXZlKGUsdCkpcmV0dXJuITE7cmV0dXJuITB9KShyKT8oYXdhaXQgcGUodCkuY2VudGVyKCksTmUoZSx0LG8pKTooY29uc29sZS53YXJuKFwiUmVzcG9uc2UgbW9kYWwgaXNuJ3Qgb2ZmIHNjcmVlbiwgbm90IGNlbnRlcmluZyBwYXJlbnQgd2luZG93XCIpLHIpfXZhciBfZTshZnVuY3Rpb24oZSl7ZS5Ccm93c2VyPVwiQnJvd3NlclwiLGUuRG9jaz1cIkRvY2tcIixlLkVudGVycHJpc2VEb2NrPVwiRW50ZXJwcmlzZURvY2tcIixlLkhvbWU9XCJIb21lXCIsZS5Ob3RpZmljYXRpb249XCJOb3RpZmljYXRpb25cIixlLlN0b3JlZnJvbnQ9XCJTdG9yZWZyb250XCIsZS5QbGF0Zm9ybT1cIlBsYXRmb3JtXCIsZS5UaGVtaW5nPVwiVGhlbWluZ1wiLGUuTWljcm9mbG93PVwiTWljcm9mbG93XCJ9KF9lfHwoX2U9e30pKTtjb25zdCBPZT1hc3luYyhlLHQsYT1cIndvcmtzcGFjZS1saWNlbnNpbmdcIik9Pntjb25zdCBuPXthcGlWZXJzaW9uOnQuYXBpVmVyc2lvbnx8Tyxjb21wb25lbnROYW1lOmUsY29tcG9uZW50VmVyc2lvbjp0LmNvbXBvbmVudFZlcnNpb258fE8sYWxsb3dlZDp0LmFsbG93ZWQscmVqZWN0aW9uQ29kZTp0LnJlamVjdGlvbkNvZGV9O2Zpbi5TeXN0ZW0ucmVnaXN0ZXJVc2FnZSh7dHlwZTphLGRhdGE6bn0pfTtsZXQgVWU9ITE7Y29uc3QgR2U9bmV3IE1hcCxIZT1lPT57bGV0IHQ9R2UuZ2V0KGUudXVpZCk7cmV0dXJuIHR8fCh0PUlhKGUpLHQub25jZShcImNsb3NlZFwiLCgoKT0+e0dlLmRlbGV0ZShlLnV1aWQpfSkpLEdlLnNldChlLnV1aWQsdCkpLHR9LCRlPWFzeW5jKGUsdCk9Pnt0cnl7YXdhaXQgZS5fcmFpc2VBbmFseXRpY3MoW3RdKX1jYXRjaChlKXtjb25zb2xlLmVycm9yKFwiZmFpbGVkIHRvIHJhaXNlIGFuYWx5dGljcyBldmVudFwiLGUpfX0sS2U9YXN5bmMgZT0+e2F3YWl0ICRlKEhlKGZpbi5tZS5pZGVudGl0eSkse3NvdXJjZTpcIkJyb3dzZXJcIiwuLi5lfSl9O3ZhciB6ZT1hKDg0Nyk7Y29uc3QgSmU9ZT0+ZS5yZXBsYWNlKC9bXlxcZCxdL2csXCJcIikuc3BsaXQoXCIsXCIpLHFlPWU9PntpZihlLmxlbmd0aDwyKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29sb3Igb2JqZWN0LCBjYW5ub3QgY29udmVydCB0byBIU0wuXCIpO2NvbnN0IHQ9ZVswXS8yNTUsYT1lWzFdLzI1NSxuPWVbMl0vMjU1LG89TWF0aC5taW4odCxhLG4pLHI9TWF0aC5tYXgodCxhLG4pLGk9ci1vO2xldCBzPTAsYz0wLGw9MDtyZXR1cm4gcz0wPT09aT8wOnI9PT10PyhhLW4pL2klNjpyPT09YT8obi10KS9pKzI6KHQtYSkvaSs0LHM9TWF0aC5yb3VuZCg2MCpzKSxzPDAmJihzKz0zNjApLGw9KHIrbykvMixjPTA9PWk/MDppLygxLU1hdGguYWJzKDIqbC0xKSksYz0rKDEwMCpjKS50b0ZpeGVkKDEpLGw9KygxMDAqbCkudG9GaXhlZCgxKSx7aHNsOmBoc2woJHtzfSwgJHtjfSUsICR7bH0lKWAsaHNsYTpgaHNsKCR7c30sICR7Y30lLCAke2x9JSwgMSlgLGh1ZTpzLGxpZ2h0bmVzczpsLHNhdHVyYXRpb246Y319LFplPWU9PntpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDb2xvciBpcyBub3QgZGVmaW5lZFwiKTtjb25zdCB0PWUudG9Mb3dlckNhc2UoKTtsZXQgYTtpZih0LmluY2x1ZGVzKFwicmdiXCIpKXtjb25zdCBlPUplKHQpO2UubGVuZ3RoPjMmJmUucG9wKCksYT1xZShlKS5odWV9aWYodC5pbmNsdWRlcyhcIiNcIikpe2NvbnN0IGU9KGU9PntpZighZS5pbmNsdWRlcyhcIiNcIikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBoZXggdmFsdWUsIGNhbm5vdCBjb252ZXJ0IHRvIFJHQi4gSGV4IHZhbHVlIGJlZ2lucyB3aXRoIGEgaGFzaHRhZy5cIik7bGV0IHQ9MCxhPTAsbj0wO2lmKDQ9PT1lLmxlbmd0aCl0PWAweCR7ZVsxXX0ke2VbMV19YCxhPWAweCR7ZVsyXX0ke2VbMl19YCxuPWAweCR7ZVszXX0ke2VbM119YDtlbHNle2lmKDchPT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleCBzdHJpbmcgbGVuZ3RoLCBjYW5ub3QgY29udmVydCB0byBSR0IuXCIpO3Q9YDB4JHtlWzFdfSR7ZVsyXX1gLGE9YDB4JHtlWzNdfSR7ZVs0XX1gLG49YDB4JHtlWzVdfSR7ZVs2XX1gfXJldHVyblsrdCwrYSwrbl19KSh0KTthPXFlKGUpLmh1ZX1pZih0LmluY2x1ZGVzKFwiaHNsXCIpKXthPUplKHQpWzBdfWNvbnN0IG49YT8udG9TdHJpbmcoKTtpZighbil0aHJvdyBuZXcgRXJyb3IoYEh1ZSB3YXMgdW5hYmxlIHRvIGJlIGV4dHJhY3RlZCBmcm9tIFwiJHt0fVwiLCBjaGVjayBjb2xvciBmb3JtYXQuIEFjY2VwdGVkIGZvcm1hdHMgYXJlOiByZ2IoKSwgcmdiYSgpLCBoZXgsIGhzbCgpLCBhbmQgaHNsYSgpYCk7cmV0dXJuIG59LGplPShlLHQ9ITEpPT57Y29uc3QgYT1aZShlKTtyZXR1cm4gdD97YmFja2dyb3VuZDE6YGhzbGEoJHthfSwgMCUsIDEwMCUsIDEpYCxiYWNrZ3JvdW5kMjpgaHNsYSgke2F9LCA2NyUsIDk5JSwgMSlgLGJhY2tncm91bmQzOmBoc2xhKCR7YX0sIDI2JSwgOTYlLCAxKWAsYmFja2dyb3VuZDQ6YGhzbGEoJHthfSwgMTUlLCA5NCUsIDEpYCxiYWNrZ3JvdW5kNTpgaHNsYSgke2F9LCAxMCUsIDg4JSwgMSlgLGJhY2tncm91bmQ2OmBoc2xhKCR7YX0sIDgwJSwgODAlLCAxKWB9OntiYWNrZ3JvdW5kMTpgaHNsYSgke2F9LCA4JSwgNyUsIDEpYCxiYWNrZ3JvdW5kMjpgaHNsYSgke2F9LCA4JSwgMTMlLCAxKWAsYmFja2dyb3VuZDM6YGhzbGEoJHthfSwgOSUsIDE1JSwgMSlgLGJhY2tncm91bmQ0OmBoc2xhKCR7YX0sIDYlLCAyMyUsIDEpYCxiYWNrZ3JvdW5kNTpgaHNsYSgke2F9LCAyMSUsIDI4JSwgMSlgLGJhY2tncm91bmQ2OmBoc2xhKCR7YX0sIDUlLCA1MSUsIDEpYH19LFFlPShlLHQpPT57Y29uc3QgYT17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgobj0+e2Fbbl09dFtuXT90W25dOmVbbl19KSksYX07dmFyIFllPWEoODc3KSxYZT1hLm4oWWUpLGV0PWEoNjcpLHR0PWEubihldCk7Y29uc3QgYXQ9e2xpZ2h0OntzeW1ib2w6dHQoKT8uc3JjfHxcIlwifSxkYXJrOntzeW1ib2w6WGUoKT8uc3JjfHxcIlwifX0sbnQ9VyYmXCJjb21wbGV0ZVwiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmbmV3IFByb21pc2UoKGU9PmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsKCgpPT57XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmZSgpfSkpKSk7ZnVuY3Rpb24gb3QoZSl7bGV0IHQ7Y29uc3QgYT1uZXcgU2V0O3JldHVybigpPT57aWYoIUEpdGhyb3cgbmV3IEVycm9yKFwiZ2V0Q2hhbm5lbENsaWVudCBjYW5ub3QgYmUgdXNlZCBvdXRzaWRlIGFuIE9wZW5GaW4gZW52LiBBdm9pZCB1c2luZyB0aGlzIG1ldGhvZCBkdXJpbmcgcHJlLXJlbmRlcmluZy5cIik7cmV0dXJuIHR8fCh0PShhc3luYygpPT57YXdhaXQgbnQ7Y29uc3Qgbj17Y2xpZW50QVBJVmVyc2lvbjpPfSxvPWF3YWl0IGZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChlLHtwYXlsb2FkOm59KTtyZXR1cm4gby5vbkRpc2Nvbm5lY3Rpb24oKGFzeW5jKCk9PnthLmZvckVhY2goKGU9PmUoKSkpLGEuY2xlYXIoKSxjb25zb2xlLndhcm4oYGRpc2Nvbm5lY3RlZCBmcm9tIGNoYW5uZWwgcHJvdmlkZXIgJHtlfWApLHQ9dm9pZCAwfSkpLG99KSgpLnRoZW4oKGU9PihlLmFkZERpc2Nvbm5lY3Rpb25MaXN0ZW5lcj1lPT57YS5hZGQoZSl9LGUpKSkuY2F0Y2goKGE9Pnt0aHJvdyB0PXZvaWQgMCxuZXcgRXJyb3IoYGZhaWxlZCB0byBjb25uZWN0IHRvIGNoYW5uZWwgcHJvdmlkZXIgJHtlfTogJHthfWApfSkpKSx0fX12YXIgcnQsaXQ7IWZ1bmN0aW9uKGUpe2UuRmV0Y2hpbmc9XCJmZXRjaGluZ1wiLGUuRmV0Y2hlZD1cImZldGNoZWRcIixlLkNvbXBsZXRlPVwiY29tcGxldGVcIn0ocnR8fChydD17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Jbml0aWFsPTBdPVwiSW5pdGlhbFwiLGVbZS5PcGVuPTFdPVwiT3BlblwiLGVbZS5DbG9zZT0yXT1cIkNsb3NlXCJ9KGl0fHwoaXQ9e30pKTtjb25zdCBzdD1vdChcIl9fb2Zfd29ya3NwYWNlX3Byb3RvY29sX19cIiksY3Q9c3Q7b3QoXCJfX3NlYXJjaC1vcGVuZmluLWJyb3dzZXItaG9tZS10b3BpY19fXCIpO3ZhciBsdDshZnVuY3Rpb24oZSl7ZS5MYXVuY2hBcHA9XCJsYXVuY2hBcHBcIixlLlNhdmVQYWdlPVwic2F2ZVBhZ2VcIixlLkdldFNhdmVkUGFnZT1cImdldFNhdmVkUGFnZVwiLGUuQ3JlYXRlU2F2ZWRQYWdlPVwiY3JlYXRlU2F2ZWRQYWdlXCIsZS5VcGRhdGVTYXZlZFBhZ2U9XCJ1cGRhdGVTYXZlZFBhZ2VcIixlLkRlbGV0ZVNhdmVkUGFnZT1cImRlbGV0ZVNhdmVkUGFnZVwiLGUuR2V0U2F2ZWRQYWdlcz1cImdldFNhdmVkUGFnZXNcIixlLkNyZWF0ZVNhdmVkUGFnZUludGVybmFsPVwiY3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLlVwZGF0ZVNhdmVkUGFnZUludGVybmFsPVwidXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLkRlbGV0ZVNhdmVkUGFnZUludGVybmFsPVwiZGVsZXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLlVwZGF0ZVBhZ2VGb3JXaW5kb3c9XCJ1cGRhdGVQYWdlRm9yV2luZG93XCIsZS5BdHRhY2hQYWdlc1RvV2luZG93PVwiYXR0YWNoUGFnZXNUb1dpbmRvd1wiLGUuRGV0YWNoUGFnZXNGcm9tV2luZG93PVwiZGV0YWNoUGFnZXNGcm9tV2luZG93XCIsZS5SZW9yZGVyUGFnZXNGb3JXaW5kb3c9XCJyZW9yZGVyUGFnZXNGb3JXaW5kb3dcIixlLlNldEFjdGl2ZVBhZ2U9XCJzZXRBY3RpdmVQYWdlXCIsZS5BZGRQYWdlPVwiYWRkUGFnZVwiLGUuQWRkRGVmYXVsdFBhZ2U9XCJhZGREZWZhdWx0UGFnZVwiLGUuR2V0QWxsQXR0YWNoZWRQYWdlcz1cImdldEFsbEF0dGFjaGVkUGFnZXNcIixlLkdldEFjdGl2ZVBhZ2VJZEZvcldpbmRvdz1cImdldEFjdGl2ZVBhZ2VJZEZvcldpbmRvd1wiLGUuR2V0UGFnZXNGb3JXaW5kb3c9XCJnZXRQYWdlc0ZvcldpbmRvd1wiLGUuR2V0UGFnZUZvcldpbmRvdz1cImdldFBhZ2VGb3JXaW5kb3dcIixlLkdldFNhdmVkUGFnZU1ldGFkYXRhPVwiZ2V0U2F2ZWRQYWdlTWV0YWRhdGFcIixlLkdldFVuaXF1ZVBhZ2VUaXRsZT1cImdldFVuaXF1ZVBhZ2VUaXRsZVwiLGUuR2V0TGFzdEZvY3VzZWRCcm93c2VyV2luZG93PVwiZ2V0TGFzdEZvY3VzZWRCcm93c2VyV2luZG93XCIsZS5HZXRQYWdlQnlWaWV3SWRlbnRpdHk9XCJnZXRQYWdlQnlWaWV3SWRlbnRpdHlcIixlLkdldFRoZW1lcz1cImdldFRoZW1lc1wiLGUuR2V0U2VsZWN0ZWRTY2hlbWU9XCJnZXRTZWxlY3RlZFNjaGVtZVwiLGUuU2V0U2VsZWN0ZWRTY2hlbWU9XCJzZXRTZWxlY3RlZFNjaGVtZVwiLGUuT3Blbkdsb2JhbENvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuT3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsPVwib3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsXCIsZS5PcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWxcIixlLk9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuSW52b2tlQ3VzdG9tQWN0aW9uSW50ZXJuYWw9XCJpbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbFwiLGUuUmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsPVwicmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsXCIsZS5HZXRTYXZlZFdvcmtzcGFjZT1cImdldFNhdmVkV29ya3NwYWNlXCIsZS5DcmVhdGVTYXZlZFdvcmtzcGFjZT1cImNyZWF0ZVNhdmVkV29ya3NwYWNlXCIsZS5VcGRhdGVTYXZlZFdvcmtzcGFjZT1cInVwZGF0ZVNhdmVkV29ya3NwYWNlXCIsZS5EZWxldGVTYXZlZFdvcmtzcGFjZT1cImRlbGV0ZVNhdmVkV29ya3NwYWNlXCIsZS5HZXRTYXZlZFdvcmtzcGFjZXM9XCJnZXRTYXZlZFdvcmtzcGFjZXNcIixlLlNhdmVXb3Jrc3BhY2U9XCJzYXZlV29ya3NwYWNlXCIsZS5HZXRDdXJyZW50V29ya3NwYWNlPVwiZ2V0Q3VycmVudFdvcmtzcGFjZVwiLGUuQXBwbHlXb3Jrc3BhY2U9XCJhcHBseVdvcmtzcGFjZVwiLGUuUmVzdG9yZUxhc3RTYXZlZFdvcmtzcGFjZUludGVybmFsPVwicmVzdG9yZUxhc3RTYXZlZFdvcmtzcGFjZUludGVybmFsXCIsZS5TZXRBY3RpdmVXb3Jrc3BhY2U9XCJzZXRBY3RpdmVXb3Jrc3BhY2VcIixlLklzQnJvd3NlckluaXRpYWxpemVkPVwiaXNCcm93c2VySW5pdGlhbGl6ZWRcIixlLkFuYWx5dGljcz1cImFuYWx5dGljc0ludGVybmFsXCIsZS5HZXRMYW5ndWFnZT1cImdldExhbmd1YWdlXCIsZS5HZXRMYW5ndWFnZVJlc291cmNlc0ludGVybmFsPVwiZ2V0TGFuZ3VhZ2VSZXNvdXJjZXNJbnRlcm5hbFwiLGUuU2V0TGFuZ3VhZ2U9XCJzZXRMYW5ndWFnZVwiLGUuR2V0RG9ja1Byb3ZpZGVyQ29uZmlnPVwiZ2V0RG9ja1Byb3ZpZGVyQ29uZmlnXCIsZS5TYXZlRG9ja1Byb3ZpZGVyQ29uZmlnPVwic2F2ZURvY2tQcm92aWRlckNvbmZpZ1wiLGUuSGFuZGxlU2F2ZU1vZGFsT25QYWdlQ2xvc2U9XCJoYW5kbGVTYXZlTW9kYWxPblBhZ2VDbG9zZVwiLGUuU2hvdWxkUGFnZUNsb3NlPVwic2hvdWxkUGFnZUNsb3NlXCIsZS5TaG91bGRXaW5kb3dDbG9zZT1cInNob3VsZFdpbmRvd0Nsb3NlXCIsZS5Db3B5UGFnZT1cImNvcHlQYWdlXCIsZS5IYW5kbGVQYWdlQ2hhbmdlcz1cImhhbmRsZVBhZ2VDaGFuZ2VzXCIsZS5NYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsPVwibWFya1Vuc2F2ZWRQYWdlc0FzU2F2ZWRJbnRlcm5hbFwiLGUuVHJhY2tSZW1vdmVkVGFiSW50ZXJuYWw9XCJ0cmFja1JlbW92ZWRUYWJJbnRlcm5hbFwiLGUuUmVzdG9yZVJlbW92ZWRUYWJJbnRlcm5hbD1cInJlc3RvcmVSZW1vdmVkVGFiSW50ZXJuYWxcIixlLlRyYWNrVmlzaXRlZFNpdGVJbnRlcm5hbD1cInRyYWNrVmlzaXRlZFNpdGVJbnRlcm5hbFwiLGUuR2V0UmVjZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbD1cImdldFJlY2VudGx5VmlzaXRlZFNpdGVzSW50ZXJuYWxcIixlLkdldEZyZXF1ZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbD1cImdldEZyZXF1ZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbFwiLGUuU2VhcmNoU2l0ZXNJbnRlcm5hbD1cInNlYXJjaFNpdGVzSW50ZXJuYWxcIixlLkdldFNlYXJjaFByb3ZpZGVyc0ludGVybmFsPVwiZ2V0U2VhcmNoUHJvdmlkZXJzSW50ZXJuYWxcIixlLkdldEN1cmF0ZWRDb250ZW50SW50ZXJuYWw9XCJnZXRDdXJhdGVkQ29udGVudEludGVybmFsXCIsZS5IYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbkludGVybmFsPVwiaGFuZGxlUmVxdWVzdE5hdmlnYXRpb25JbnRlcm5hbFwiLGUuUmVmcmVzaEJvb2ttYXJrc0ludGVybmFsPVwicmVmcmVzaEJvb2ttYXJrc0ludGVybmFsXCIsZS5MYXVuY2hCb29rbWFya0ludGVybmFsPVwibGF1bmNoQm9va21hcmtJbnRlcm5hbFwiLGUuR2V0Tm90aWZpY2F0aW9uc0NvbmZpZz1cImdldE5vdGlmaWNhdGlvbnNDb25maWdcIixlLlVwZGF0ZURvY2tGYXZvcml0ZXNJbnRlcm5hbD1cInVwZGF0ZURvY2tGYXZvcml0ZXNJbnRlcm5hbFwiLGUuVXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbD1cInVwZGF0ZUNvbnRlbnRNZW51SW50ZXJuYWxcIixlLkxhdW5jaERvY2tFbnRyeUludGVybmFsPVwibGF1bmNoRG9ja0VudHJ5SW50ZXJuYWxcIixlLlNldERvY2tGYXZvcml0ZXNPcmRlckludGVybmFsPVwic2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWxcIixlLk5hdmlnYXRlQ29udGVudE1lbnVJbnRlcm5hbD1cIm5hdmlnYXRlQ29udGVudE1lbnVJbnRlcm5hbFwiLGUuU2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbD1cInNldERlZmF1bHREb2NrQnV0dG9uc09yZGVySW50ZXJuYWxcIixlLkdldERvY2tXb3Jrc3BhY2VzQ29udGV4dE1lbnVJbnRlcm5hbD1cImdldERvY2tXb3Jrc3BhY2VzQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuSGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbD1cImhhbmRsZURvY2tXb3Jrc3BhY2VzTWVudVJlc3BvbnNlSW50ZXJuYWxcIixlLlJlbW92ZURvY2tGYXZvcml0ZUludGVybmFsPVwicmVtb3ZlRG9ja0Zhdm9yaXRlSW50ZXJuYWxcIixlLkFkZERvY2tGYXZvcml0ZUludGVybmFsPVwiYWRkRG9ja0Zhdm9yaXRlSW50ZXJuYWxcIixlLkZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWw9XCJmb2N1c0FuZEV4cGFuZFNlYXJjaEludGVybmFsXCJ9KGx0fHwobHQ9e30pKTtjb25zdCBkdD1hc3luYyBlPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuZ2V0Q2xpZW50KCksdXQ9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZHQoZSksYT1cIlRhcmdldCBpcyBub3QgYSBXb3Jrc3BhY2UgUGxhdGZvcm0uIFRhcmdldCBtdXN0IGNhbGwgV29ya3NwYWNlUGxhdGZvcm0uaW5pdFwiO2xldCBuO3RyeXtuPWF3YWl0IHQuZGlzcGF0Y2goXCJpc1dvcmtzcGFjZVBsYXRmb3JtXCIpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihhKX1pZihcImJvb2xlYW5cIj09dHlwZW9mIG4mJm4pcmV0dXJuIGNvbnNvbGUud2FybihcIllvdSBhcmUgdXNpbmcgYW4gb2xkZXIgdmVyc2lvbiBvZiB0aGUgd29ya3NwYWNlIHBsYXRmb3JtLiBQbGVhc2UgdXBkYXRlIHlvdXIgd29ya3NwYWNlIHBsYXRmb3JtLlwiKSxuO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBuJiZuLmlzV29ya3NwYWNlUGxhdGZvcm0pcmV0dXJuIG47dGhyb3cgbmV3IEVycm9yKGEpfSxwdD1hc3luYyBlPT4oYXdhaXQgdXQoZSksZHQoZSkpLHd0PWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IHV0KGUpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0JiYhMCE9PXQ/LmlzQnJvd3NlckluaXRpYWxpemVkKXRocm93IG5ldyBFcnJvcihcIlRhcmdldCBpcyBub3QgYSBCcm93c2VyLWVuYWJsZWQgV29ya3NwYWNlIFBsYXRmb3JtLlwiKTtyZXR1cm4gZHQoZSl9LGh0PVwiZGFya1wiLGd0PXtbemUuUGFsZXR0ZS5icmFuZFByaW1hcnldOlwiIzBBNzZEM1wiLFt6ZS5QYWxldHRlLnN0YXR1c1N1Y2Nlc3NdOnplLkNvbG9yLmZ1bmN0aW9uYWwxLFt6ZS5QYWxldHRlLnN0YXR1c1dhcm5pbmddOnplLkNvbG9yLmZ1bmN0aW9uYWwxMCxbemUuUGFsZXR0ZS5zdGF0dXNDcml0aWNhbF06emUuQ29sb3IuZnVuY3Rpb25hbDcsW3plLlBhbGV0dGUuc3RhdHVzQWN0aXZlXTp6ZS5Db2xvci5mdW5jdGlvbmFsMyxbemUuUGFsZXR0ZS5jb250ZW50QmFja2dyb3VuZDFdOlwiIzBBNzZEM1wiLFt6ZS5QYWxldHRlLmNvbnRlbnRCYWNrZ3JvdW5kMl06XCIjMDAwMDAwXCIsW3plLlBhbGV0dGUuY29udGVudEJhY2tncm91bmQzXTpcIiMwMDAwMDBcIixbemUuUGFsZXR0ZS5jb250ZW50QmFja2dyb3VuZDRdOlwiIzAwMDAwMFwiLFt6ZS5QYWxldHRlLmNvbnRlbnRCYWNrZ3JvdW5kNV06XCIjMDAwMDAwXCJ9LG10PXsuLi5ndCxbemUuUGFsZXR0ZS5iYWNrZ3JvdW5kMV06emUuQ29sb3Iud2hpdGUsW3plLlBhbGV0dGUuYmFja2dyb3VuZDJdOnplLkNvbG9yLmxpZ2h0R3JheTEsW3plLlBhbGV0dGUuYmFja2dyb3VuZDNdOnplLkNvbG9yLmxpZ2h0R3JheTIsW3plLlBhbGV0dGUuYmFja2dyb3VuZDRdOnplLkNvbG9yLmxpZ2h0R3JheTMsW3plLlBhbGV0dGUuYmFja2dyb3VuZDVdOnplLkNvbG9yLmxpZ2h0R3JheTQsW3plLlBhbGV0dGUuYmFja2dyb3VuZDZdOnplLkNvbG9yLmxpZ2h0R3JheTUsW3plLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnldOnplLkNvbG9yLmxpZ2h0R3JheTQsW3plLlBhbGV0dGUuaW5wdXRCYWNrZ3JvdW5kXTp6ZS5Db2xvci5saWdodEdyYXkzLFt6ZS5QYWxldHRlLmlucHV0Q29sb3JdOnplLkNvbG9yLmRhcmtHcmF5NSxbemUuUGFsZXR0ZS5pbnB1dFBsYWNlaG9sZGVyXTp6ZS5Db2xvci5kYXJrR3JheTIsW3plLlBhbGV0dGUuaW5wdXREaXNhYmxlZF06emUuQ29sb3IubmV1dHJhbEdyYXksW3plLlBhbGV0dGUuaW5wdXRGb2N1c2VkXTp6ZS5Db2xvci5saWdodEdyYXk1LFt6ZS5QYWxldHRlLmlucHV0Qm9yZGVyXTp6ZS5Db2xvci5uZXV0cmFsR3JheSxbemUuUGFsZXR0ZS50ZXh0RGVmYXVsdF06emUuQ29sb3IuZGFya0dyYXk1LFt6ZS5QYWxldHRlLnRleHRIZWxwXTp6ZS5Db2xvci5kYXJrR3JheTMsW3plLlBhbGV0dGUudGV4dEluYWN0aXZlXTp6ZS5Db2xvci5uZXV0cmFsR3JheX0sa3Q9ey4uLmd0LFt6ZS5QYWxldHRlLmJhY2tncm91bmQxXTp6ZS5Db2xvci5kYXJrR3JheTYsW3plLlBhbGV0dGUuYmFja2dyb3VuZDJdOnplLkNvbG9yLmRhcmtHcmF5NSxbemUuUGFsZXR0ZS5iYWNrZ3JvdW5kM106emUuQ29sb3IuZGFya0dyYXk0LFt6ZS5QYWxldHRlLmJhY2tncm91bmQ0XTp6ZS5Db2xvci5kYXJrR3JheTMsW3plLlBhbGV0dGUuYmFja2dyb3VuZDVdOnplLkNvbG9yLmRhcmtHcmF5MixbemUuUGFsZXR0ZS5iYWNrZ3JvdW5kNl06emUuQ29sb3IuZGFya0dyYXkxLFt6ZS5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5XTp6ZS5Db2xvci5kYXJrR3JheTIsW3plLlBhbGV0dGUuaW5wdXRCYWNrZ3JvdW5kXTp6ZS5Db2xvci5kYXJrR3JheTEsW3plLlBhbGV0dGUuaW5wdXRDb2xvcl06emUuQ29sb3Iud2hpdGUsW3plLlBhbGV0dGUuaW5wdXRQbGFjZWhvbGRlcl06emUuQ29sb3IubGlnaHRHcmF5NSxbemUuUGFsZXR0ZS5pbnB1dERpc2FibGVkXTp6ZS5Db2xvci5uZXV0cmFsR3JheSxbemUuUGFsZXR0ZS5pbnB1dEZvY3VzZWRdOnplLkNvbG9yLmxpZ2h0R3JheTUsW3plLlBhbGV0dGUuaW5wdXRCb3JkZXJdOnplLkNvbG9yLm5ldXRyYWxHcmF5LFt6ZS5QYWxldHRlLnRleHREZWZhdWx0XTp6ZS5Db2xvci53aGl0ZSxbemUuUGFsZXR0ZS50ZXh0SGVscF06emUuQ29sb3IubGlnaHRHcmF5NSxbemUuUGFsZXR0ZS50ZXh0SW5hY3RpdmVdOnplLkNvbG9yLm5ldXRyYWxHcmF5fSxidD1be2xhYmVsOlwiT3BlbkZpbiBEZWZhdWx0IExpZ2h0IGFuZCBEYXJrIFRoZW1lXCIscGFsZXR0ZXM6e2xpZ2h0OnsuLi5tdCxicmFuZFByaW1hcnk6XCIjMEE3NkQzXCIsYnJhbmRTZWNvbmRhcnk6emUuQ29sb3IubGlnaHRHcmF5NCxiYWNrZ3JvdW5kUHJpbWFyeTp6ZS5Db2xvci5kYXJrR3JheTV9LGRhcms6ey4uLmt0LGJyYW5kUHJpbWFyeTpcIiMwQTc2RDNcIixicmFuZFNlY29uZGFyeTp6ZS5Db2xvci5kYXJrR3JheTIsYmFja2dyb3VuZFByaW1hcnk6emUuQ29sb3IuZGFya0dyYXk1fX19XSx5dD1lPT57Y29uc3R7YmFja2dyb3VuZDp0LGZvcmVncm91bmQ6YX09ZTtyZXR1cm57YmFja2dyb3VuZDp0LGZvcmVncm91bmQ6YT8/XCIjRkZGRkZGXCJ9fSxmdD0oZSx0KT0+KHtpY29uczp7c3ltYm9sOmUuYnJhbmQ/Lmljb25zPy5bdF0/LnN5bWJvbHx8YXRbdF0uc3ltYm9sfX0pLFN0PWU9Pntjb25zdHtsaWdodDp0LGRhcms6YX09XCJwYWxldHRlc1wiaW4gZT9lLnBhbGV0dGVzOntsaWdodDplLnBhbGV0dGUsZGFyazplLnBhbGV0dGV9LG49UWUoa3QsYSksbz1RZShtdCx0KSxyPSgoZSx0KT0+e2NvbnN0IGE9ey4uLmV9LG49ey4uLnR9O2xldCBvPXQuYmFja2dyb3VuZFByaW1hcnk/amUodC5iYWNrZ3JvdW5kUHJpbWFyeSwhMCk6e30scj1lLmJhY2tncm91bmRQcmltYXJ5P2plKGUuYmFja2dyb3VuZFByaW1hcnkpOnt9O3JldHVybiBvPXsuLi5vLC4uLm59LHI9ey4uLnIsLi4uYX0se2xpZ2h0OnsuLi50LC4uLm99LGRhcms6ey4uLmUsLi4ucn19fSkoYSx0KSxpPXsuLi4oMCx6ZS5jcmVhdGVUaGVtZSkoey4uLm4sLi4ucj8uZGFya30pLGJyYW5kOmZ0KGUsXCJkYXJrXCIpfSxzPXsuLi4oMCx6ZS5jcmVhdGVUaGVtZSkoey4uLm8sLi4ucj8ubGlnaHR9KSxicmFuZDpmdChlLFwibGlnaHRcIil9LHtsaWdodDpjLGRhcms6bH09KGU9Pntjb25zdCB0PU9iamVjdC5rZXlzKGUubm90aWZpY2F0aW9uSW5kaWNhdG9yQ29sb3JzPz97fSk7aWYodD8ubGVuZ3RoKXtjb25zdCBhPXt9LG49e307cmV0dXJuIHQuZm9yRWFjaCgodD0+e2NvbnN0IG89ZS5ub3RpZmljYXRpb25JbmRpY2F0b3JDb2xvcnNbdF07XCJiYWNrZ3JvdW5kXCJpbiBvPyhhW3RdPXl0KG8pLG5bdF09eXQobykpOihhW3RdPXl0KG8uZGFyaz8/by5saWdodCksblt0XT15dChvLmxpZ2h0Pz9vLmRhcmspKX0pKSx7bGlnaHQ6bixkYXJrOmF9fXJldHVybntsaWdodDpudWxsLGRhcms6bnVsbH19KShlKTtyZXR1cm4gaS5ub3RpZmljYXRpb25JbmRpY2F0b3JDb2xvcnM9bCxzLm5vdGlmaWNhdGlvbkluZGljYXRvckNvbG9ycz1jLHtkYXJrOmksbGlnaHQ6c319LHZ0PWFzeW5jIGU9Pntjb25zdHt0aGVtZXM6dCxzZWxlY3RlZFNjaGVtZTphfT1hd2FpdChhc3luYyBlPT57Y29uc3QgdD1maW4/Ll9faW50ZXJuYWxfPy5pbml0aWFsT3B0aW9ucz8ud29ya3NwYWNlUGxhdGZvcm0/Ll90aGVtZURhdGE7aWYoIXR8fGUudXVpZCE9PXdlLnV1aWQpcmV0dXJue3RoZW1lczphd2FpdCBJYShlKS5UaGVtZS5nZXRUaGVtZXMoKSxzZWxlY3RlZFNjaGVtZTphd2FpdCBJYShlKS5UaGVtZS5nZXRTZWxlY3RlZFNjaGVtZSgpfTtyZXR1cm4gdH0pKGUpO3ZhciBuLG87cmV0dXJuKG49dD8ubGVuZ3RoP3Q6YnQsbz1hLG4ubWFwKChlPT57Y29uc3QgdD1cInBhbGV0dGVzXCJpbiBlP2UuZGVmYXVsdDpodCx7bGlnaHQ6YSxkYXJrOm59PVN0KGUpO3JldHVybntsYWJlbDplLmxhYmVsLGxvZ29Vcmw6ZS5sb2dvVXJsLHRoZW1lOntkYXJrOm4sbGlnaHQ6YX0sZGVmYXVsdFNjaGVtZTpvPz90fX0pKSlbMF19LFB0PWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IHB0KGV8fGZpbi5tZS5pZGVudGl0eSksYT1hd2FpdCB0LmRpc3BhdGNoKGx0LkdldFNlbGVjdGVkU2NoZW1lLHZvaWQgMCk7cmV0dXJuIGE9PT1tLlN5c3RlbT93aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIikubWF0Y2hlcz9cImRhcmtcIjpcImxpZ2h0XCI6YX0sQ3Q9YXN5bmMoZSx0KT0+e2NvbnN0IGE9YXdhaXQgdnQoZmluLm1lLmlkZW50aXR5KSxuPWF3YWl0IFB0KGZpbi5tZS5pZGVudGl0eSk9PT1tLkRhcmssbz1hPy50aGVtZTtyZXR1cm4gbz8uW24/bS5EYXJrOm0uTGlnaHRdPy5wYWxldHRlPy5bZV18fHR9O2xldCBNdDtjb25zdCB4dD1hc3luYyBlPT57TXR8fChNdD1uZXcgVGV4dEVuY29kZXIpO2NvbnN0IHQ9TXQuZW5jb2RlKGUpLGE9YXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTI1NlwiLHQpO3JldHVybiBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGEpKS5tYXAoKGU9PmUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsXCIwXCIpKSkuam9pbihcIlwiKX07ZnVuY3Rpb24gSXQoZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiYhQXJyYXkuaXNBcnJheShlKX1mdW5jdGlvbiBBdChlLC4uLnQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gZTtjb25zdCBhPXQuc2hpZnQoKTtyZXR1cm4gSXQoZSkmJkl0KGEpJiZPYmplY3QuZW50cmllcyhhKS5mb3JFYWNoKCgoW3QsYV0pPT57aWYoSXQoYSkpcmV0dXJuIGVbdF18fChlW3RdPXt9KSxBdChlW3RdLGEpO2VbdF09YX0pKSxBdChlLC4uLnQpfWNvbnN0IFd0PXJlcXVpcmUoXCJsb2Rhc2guZGVib3VuY2VcIik7dmFyIER0LFR0PWEubihXdCk7ZnVuY3Rpb24gUnQoKXtyZXR1cm4gdm9pZCAwIT09dHlwZW9mIGNyeXB0byYmXCJyYW5kb21VVUlEXCJpbiBjcnlwdG8mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNyeXB0by5yYW5kb21VVUlEP2NyeXB0by5yYW5kb21VVUlEKCk6XCIxMDAwMDAwMC0xMDAwLTQwMDAtODAwMC0xMDAwMDAwMDAwMDBcIi5yZXBsYWNlKC9bMDE4XS9nLChlPT4oZV5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSYxNT4+ZS80KS50b1N0cmluZygxNikpKX0hZnVuY3Rpb24oZSl7ZS5DdXJyZW50V29ya3NwYWNlSWQ9XCJjdXJyZW50V29ya3NwYWNlSWRcIixlLkxhc3RGb2N1c2VkQnJvd3NlcldpbmRvdz1cImxhc3RGb2N1c2VkQnJvd3NlcldpbmRvd1wiLGUuTWFjaGluZU5hbWU9XCJtYWNoaW5lTmFtZVwiLGUuTmV3VGFiUGFnZUxheW91dD1cIk5ld1RhYlBhZ2VMYXlvdXRcIixlLk5ld1RhYlBhZ2VTb3J0PVwiTmV3VGFiUGFnZVNvcnRcIixlLkRvY2tQb3NpdGlvbj1cIkRvY2tQb3NpdGlvblwiLGUuU2VsZWN0ZWRDb2xvclNjaGVtZT1cIlNlbGVjdGVkQ29sb3JTY2hlbWVcIixlLlRoZW1lUGFsZXR0ZVNoZWV0PVwiVGhlbWVQYWxldHRlU2hlZXRcIixlLkhhc01vdmVkU3RvcmU9XCJIYXNNb3ZlZFN0b3JlXCIsZS5QYWdlRHJhZ1N0YXRlPVwiQnJvd3NlclBhZ2VEcmFnU3RhdGVcIn0oRHR8fChEdD17fSkpO2NvbnN0IEJ0PUR0O2Z1bmN0aW9uIEV0KCl7cmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKEJ0Lk1hY2hpbmVOYW1lKT8/XCJ1bmtub3duXCJ9bGV0IEZ0O2FzeW5jIGZ1bmN0aW9uIFZ0KCl7cmV0dXJuIEZ0fHwoRnQ9YXdhaXQgZmluLlN5c3RlbS5nZXRNYWNoaW5lSWQoKSksRnR9Y29uc3QgTnQ9ZT0+e2lmKEFycmF5LmlzQXJyYXkoZS53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXMpJiYoZS5sYXlvdXRTbmFwc2hvdHx8ZS5sYXlvdXQpKXtjb25zdCB0PWUud29ya3NwYWNlUGxhdGZvcm0ucGFnZXMuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpO2lmKHQpe2NvbnN0IGE9ZS5sYXlvdXRTbmFwc2hvdD9lLmxheW91dFNuYXBzaG90LmxheW91dHNbdC5sYXlvdXRDb250YWluZXJLZXldOmUubGF5b3V0O2lmKGEpaWYodC5pc0xvY2tlZCl7Y29uc3Qgbj1fYShhLHQubGF5b3V0KTt0LmxheW91dD1uLGUubGF5b3V0PW59ZWxzZSB0LmxheW91dD1hLGUubGF5b3V0PWF9fXJldHVybiBlfTthc3luYyBmdW5jdGlvbiBMdChlKXtjb25zdCB0PWV8fGF3YWl0IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLmdldFNuYXBzaG90KCk7aWYodC5zbmFwc2hvdERldGFpbHM/Lm1hY2hpbmVJZClyZXR1cm4gdDtjb25zdCBhPUV0KCk7cmV0dXJuey4uLnQsc25hcHNob3REZXRhaWxzOnsuLi50LnNuYXBzaG90RGV0YWlscyxtYWNoaW5lSWQ6YXdhaXQgVnQoKSxtYWNoaW5lTmFtZTphfX19Y29uc3QgX3Q9YXN5bmMgZT0+KHsuLi5lLGxheW91dERldGFpbHM6e21hY2hpbmVJZDphd2FpdCBWdCgpLG1hY2hpbmVOYW1lOkV0KCl9fSksT3Q9YXN5bmMoZSx0KT0+KHtwYWdlSWQ6UnQoKSx0aXRsZTplLGxheW91dDphd2FpdCBfdCh0KSxpc1JlYWRPbmx5OiExfSksVXQ9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgT3QoZS50aXRsZSxGYShlLmxheW91dCkpO3JldHVybiBlLnBhbmVscyYmKHQucGFuZWxzPWUucGFuZWxzLm1hcCgoZT0+KHsuLi5lLHZpZXdPcHRpb25zOkVhKGUudmlld09wdGlvbnMpfSkpKSksey4uLmUsLi4udH19LEd0PWU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS5MYXlvdXQud3JhcFN5bmMoZSk7cmV0dXJue3Nob3c6YXN5bmMoKT0+e2NvbnN0IGE9YXdhaXQgdC5nZXRDb25maWcoKSx7c2V0dGluZ3M6bixkaW1lbnNpb25zOm99PWEscj1hd2FpdCBBZShlKTthd2FpdCB0LnJlcGxhY2Uoey4uLmEsc2V0dGluZ3M6ey4uLm4saGFzSGVhZGVyczohMCxyZW9yZGVyRW5hYmxlZDohMH0sZGltZW5zaW9uczp7Li4ubyxoZWFkZXJIZWlnaHQ6cj8yODozMH19KX0saGlkZTphc3luYyBlPT57Y29uc3QgYT1hd2FpdCB0LmdldENvbmZpZygpLHtzZXR0aW5nczpuLGRpbWVuc2lvbnM6b309YXdhaXQgYTthd2FpdCB0LnJlcGxhY2Uoey4uLmEsc2V0dGluZ3M6ey4uLm4saGFzSGVhZGVyczohMSxyZW9yZGVyRW5hYmxlZDplPy5zZXR0aW5ncz8ucmVvcmRlckVuYWJsZWQ/PyExfSxkaW1lbnNpb25zOnsuLi5vLGhlYWRlckhlaWdodDowfX0pfSxpc1Nob3dpbmdUYWJzOmFzeW5jKCk9Pnt0cnl7Y29uc3QgZT1hd2FpdCB0LmdldENvbmZpZygpLHtzZXR0aW5nczphfT1hd2FpdCBlO3JldHVybiBhLmhhc0hlYWRlcnN9Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gZ2V0IGxheW91dCBjb25maWc6IFwiLGUpLCEwfX19fSxIdD1cIm9mLXdvcmtzcGFjZS1cIjtjb25zdCAkdD1uZXcgY2xhc3N7bWFyayhlKXtwZXJmb3JtYW5jZS5tYXJrKGAke0h0fSR7ZX1gKX1tYXJrU3RhcnQoZSl7cGVyZm9ybWFuY2UubWFyayhgJHtIdH0ke2V9LXN0YXJ0YCl9bWFya0VuZChlKXtwZXJmb3JtYW5jZS5tYXJrKGAke0h0fSR7ZX0tZW5kYCl9bWFya0VuZEFuZE1lYXN1cmUoZSl7cGVyZm9ybWFuY2UubWFyayhgJHtIdH0ke2V9LWVuZGApO3RyeXtyZXR1cm4gcGVyZm9ybWFuY2UubWVhc3VyZShgJHtIdH0ke2V9YCxgJHtIdH0ke2V9LXN0YXJ0YCxgJHtIdH0ke2V9LWVuZGApfWNhdGNoKGUpezB9fW1hcmtBbmRNZWFzdXJlKGUsdCl7cGVyZm9ybWFuY2UubWFyayhgJHtIdH0ke2V9YCk7dHJ5e3JldHVybiBwZXJmb3JtYW5jZS5tZWFzdXJlKGAke0h0fSR7ZX0tbWVhc3VyZWAsYCR7SHR9JHt0fS1zdGFydGAsYCR7SHR9JHtlfWApfWNhdGNoKGUpezB9fXJlcG9ydFdvcmtzcGFjZVBlcmZvcm1hbmNlRW50cmllcygpe3JldHVybiBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibWVhc3VyZVwiKS5maWx0ZXIoKGU9PmUubmFtZS5zdGFydHNXaXRoKEh0KSkpfXJlcG9ydFdvcmtzcGFjZVBlcmZvcm1hbmNlKCl7cmV0dXJuIHRoaXMucmVwb3J0V29ya3NwYWNlUGVyZm9ybWFuY2VFbnRyaWVzKCkubWFwKChlPT4oe25hbWU6ZS5uYW1lLnJlcGxhY2UoYCR7SHR9YCxcIlwiKS5yZXBsYWNlKFwiLW1lYXN1cmVcIixcIlwiKSxkdXJhdGlvbjplLmR1cmF0aW9ufSkpKX19LEt0PShlLHQpPT50P2Ake3R9LSR7ZS51dWlkfS0ke2UubmFtZX1gOmBfX2Jyb3dzZXJfd2luZG93X18tJHtlLnV1aWR9LSR7ZS5uYW1lfWAsenQ9bmV3IE1hcCxKdD1lPT4oenQuaGFzKGUpfHx6dC5zZXQoZSxvdChlKSksenQuZ2V0KGUpKCkpLHF0PShlLHQpPT57Y29uc3QgYT1LdChlLHQpO3JldHVybiBKdChhKX07dmFyIFp0LGp0LFF0LFl0LFh0OyFmdW5jdGlvbihlKXtlLkNsb3NlQnJvd3NlcldpbmRvdz1cImNsb3NlLWJyb3dzZXItd2luZG93XCIsZS5RdWl0UGxhdGZvcm09XCJxdWl0LXBsYXRmb3JtXCIsZS5DbG9zZVBhZ2U9XCJjbG9zZS1wYWdlXCIsZS5BZGRUb0NoYW5uZWw9XCJhZGQtdG8tY2hhbm5lbFwiLGUuUmVtb3ZlRnJvbUNoYW5uZWw9XCJyZW1vdmUtZnJvbS1jaGFubmVsXCIsZS5PcGVuU2F2ZU1vZGFsSW50ZXJuYWw9XCJvcGVuLXNhdmUtbW9kYWwtaW50ZXJuYWxcIixlLkR1cGxpY2F0ZVBhZ2U9XCJkdXBsaWNhdGUtcGFnZVwiLGUuU2V0U2VsZWN0ZWRTY2hlbWU9XCJzZXQtc2VsZWN0ZWQtc2NoZW1lXCIsZS5TaG93QnJvd3NlckluZGljYXRvcj1cInNob3ctYnJvd3Nlci1pbmRpY2F0b3JcIixlLlNldFNlbGVjdGVkTGFuZ3VhZ2U9XCJzZXQtc2VsZWN0ZWQtbGFuZ3VhZ2VcIixlLlJlZnJlc2hCb29rbWFya3NJbnRlcm5hbD1cInJlZnJlc2gtYm9va21hcmtzXCIsZS5HZXRMYXlvdXRzV2l0aFNlbGVjdGVkVmlld3NJbnRlcm5hbD1cImdldC1sYXlvdXRzLXdpdGgtc2VsZWN0ZWQtdmlld3NcIixlLkZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWw9XCJmb2N1cy1hbmQtZXhwYW5kLXNlYXJjaFwifShadHx8KFp0PXt9KSksZnVuY3Rpb24oZSl7ZS5HZXRQYWdlcz1cImdldC1wYWdlc1wiLGUuR2V0QWN0aXZlUGFnZUZvcldpbmRvdz1cImdldC1hY3RpdmUtcGFnZS1mb3Itd2luZG93XCIsZS5BdHRhY2hQYWdlc1RvV2luZG93PVwiYXR0YWNoLXBhZ2VzLXRvLXdpbmRvd1wiLGUuRGV0YWNoUGFnZXNGcm9tV2luZG93PVwiZGV0YWNoLXBhZ2VzLWZyb20td2luZG93XCIsZS5TZXRBY3RpdmVQYWdlRm9yV2luZG93PVwic2V0LWFjdGl2ZS1wYWdlLWZvci13aW5kb3dcIixlLlJlbmFtZVBhZ2U9XCJyZW5hbWUtcGFnZVwiLGUuUmVvcmRlclBhZ2VzRm9yV2luZG93PVwicmVvcmRlci1wYWdlcy1mb3Itd2luZG93XCIsZS5VcGRhdGVQYWdlRm9yV2luZG93PVwidXBkYXRlLXBhZ2UtZm9yLXdpbmRvd1wiLGUuVXBkYXRlUGFnZXNXaW5kb3dPcHRpb25zPVwidXBkYXRlLXBhZ2VzLXdpbmRvdy1vcHRpb25zXCIsZS5Jc0RldGFjaGluZ1BhZ2VzPVwiaXMtZGV0YWNoaW5nLXBhZ2VzXCIsZS5Jc0FjdGl2ZVBhZ2VDaGFuZ2luZz1cImlzLWFjdGl2ZS1wYWdlLWNoYW5naW5nXCJ9KGp0fHwoanQ9e30pKSxmdW5jdGlvbihlKXtlLkdldEFwcHM9XCJnZXQtYXBwc1wiLGUuR2V0Q3VyYXRlZENvbnRlbnQ9XCJnZXQtY3VyYXRlZC1jb250ZW50XCIsZS5HZXRSZWNlbnRseVZpc2l0ZWQ9XCJnZXQtcmVjZW50bHktdmlzaXRlZFwiLGUuR2V0U2VhcmNoUHJvdmlkZXJzPVwiZ2V0LXNlYXJjaC1wcm92aWRlcnNcIn0oUXR8fChRdD17fSkpLGZ1bmN0aW9uKGUpe2UuQ3JlYXRlQm9va21hcmtOb2RlPVwiY3JlYXRlLWJvb2ttYXJrLW5vZGVcIixlLkdldEJvb2ttYXJrTm9kZT1cImdldC1ib29rbWFyay1ub2RlXCIsZS5TZWFyY2hCb29rbWFya05vZGVzPVwic2VhcmNoLWJvb2ttYXJrLW5vZGVzXCIsZS5VcGRhdGVCb29rbWFya05vZGU9XCJ1cGRhdGUtYm9va21hcmstbm9kZVwiLGUuRGVsZXRlQm9va21hcmtOb2RlPVwiZGVsZXRlLWJvb2ttYXJrLW5vZGVcIn0oWXR8fChZdD17fSkpLGZ1bmN0aW9uKGUpe2UuVXBkYXRlRmF2b3JpdGVFbnRyaWVzPVwidXBkYXRlLWZhdm9yaXRlLWVudHJpZXNcIixlLlVwZGF0ZUNvbnRlbnRNZW51PVwidXBkYXRlLWNvbnRlbnQtbWVudVwiLGUuTmF2aWdhdGVDb250ZW50TWVudT1cIm5hdmlnYXRlLWNvbnRlbnQtbWVudVwifShYdHx8KFh0PXt9KSk7Y29uc3QgZWE9ey4uLlp0LC4uLmp0LC4uLlh0fSx0YT1vdChgJHtcInVuZGVmaW5lZFwiIT10eXBlb2YgZmluJiZmaW4/Lm1lLmlkZW50aXR5LnV1aWR9LWVudGVycHJpc2UtYm9va21hcmtzYCksYWE9ZT0+KHtpZGVudGl0eTplLG9wZW5maW5XaW5kb3c6ZmluLldpbmRvdy53cmFwU3luYyhlKSxfYm9va21hcmtzOntfY3JlYXRlQm9va21hcmtOb2RlOmFzeW5jIGU9Pihhc3luYyBlPT4oYXdhaXQgdGEoKSkuZGlzcGF0Y2goWXQuQ3JlYXRlQm9va21hcmtOb2RlLGUpKShlKSxfZ2V0Qm9va21hcmtOb2RlOmFzeW5jIGU9Pihhc3luYyBlPT4oYXdhaXQgdGEoKSkuZGlzcGF0Y2goWXQuR2V0Qm9va21hcmtOb2RlLGUpKShlKSxfc2VhcmNoQm9va21hcmtOb2Rlczphc3luYyBlPT4oYXN5bmMgZT0+KGF3YWl0IHRhKCkpLmRpc3BhdGNoKFl0LlNlYXJjaEJvb2ttYXJrTm9kZXMsZSkpKGUpLF91cGRhdGVCb29rbWFya05vZGU6YXN5bmMgZT0+KGFzeW5jIGU9Pihhd2FpdCB0YSgpKS5kaXNwYXRjaChZdC5VcGRhdGVCb29rbWFya05vZGUsZSkpKGUpLF9kZWxldGVCb29rbWFya05vZGU6YXN5bmMgZT0+KGFzeW5jIGU9Pihhd2FpdCB0YSgpKS5kaXNwYXRjaChZdC5EZWxldGVCb29rbWFya05vZGUsZSkpKGUpfSxnZXRQYWdlczphc3luYygpPT4oYXdhaXQgd3QoZSkpLmRpc3BhdGNoKGx0LkdldFBhZ2VzRm9yV2luZG93LGUpLGdldFBhZ2U6YXN5bmMgdD0+KGF3YWl0IHd0KGUpKS5kaXNwYXRjaChsdC5HZXRQYWdlRm9yV2luZG93LHtpZGVudGl0eTplLHBhZ2VJZDp0fSksYWRkUGFnZTphc3luYyB0PT5BYSgpLkJyb3dzZXIud3JhcFN5bmMoZSkuX2FkZFBhZ2UodCksX2FkZFBhZ2U6YXN5bmModCxhKT0+e2NvbnN0IG49YXdhaXQgd3QoZSksbz17aWRlbnRpdHk6ZSxwYWdlOnQsaW5zZXJ0aW9uSW5kZXg6YT8uaW5kZXgsbXVsdGlJbnN0YW5jZVZpZXdCZWhhdmlvcjphPy5tdWx0aUluc3RhbmNlVmlld0JlaGF2aW9yfTtyZXR1cm4gbi5kaXNwYXRjaChsdC5BZGRQYWdlLG8pfSxyZW1vdmVQYWdlOmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuRGV0YWNoUGFnZXNGcm9tV2luZG93LHtpZGVudGl0eTplLHBhZ2VJZHM6W3RdfSkscmVwYXJlbnRQYWdlOmFzeW5jIHQ9PkFhKCkuQnJvd3Nlci53cmFwU3luYyhlKS5fcmVwYXJlbnRQYWdlKHQpLF9yZXBhcmVudFBhZ2U6YXN5bmMgdD0+e2NvbnN0e3BhZ2VJZDphfT10LG49YXdhaXQgd3QoZSksbz0oYXdhaXQgbi5kaXNwYXRjaChsdC5HZXRBbGxBdHRhY2hlZFBhZ2VzLHZvaWQgMCkpLmZpbmQoKCh7cGFnZUlkOmV9KT0+ZT09PWEpKTtpZighbyl0aHJvdyBuZXcgRXJyb3IoYFJlcGFyZW50IFBhZ2UgRXJyb3I6IFRhcmdldCBwYWdlIHdpdGggcGFnZUlkICR7YX0gbm90IGZvdW5kYCk7by5tdWx0aUluc3RhbmNlVmlld0JlaGF2aW9yPVwicmVwYXJlbnRcIjtjb25zdCByPXtpZGVudGl0eTplLHBhZ2VzOltvXSxpbnNlcnRpb25JbmRleDp0LmluZGV4fTtyZXR1cm4gbi5kaXNwYXRjaChsdC5BdHRhY2hQYWdlc1RvV2luZG93LHIpfSxzZXRBY3RpdmVQYWdlOmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuU2V0QWN0aXZlUGFnZSx7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pLHVwZGF0ZVBhZ2U6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgd3QoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKGx0LlVwZGF0ZVBhZ2VGb3JXaW5kb3csdCl9LHJlb3JkZXJQYWdlczphc3luYyB0PT57Y29uc3QgYT1hd2FpdCB3dChlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2gobHQuUmVvcmRlclBhZ2VzRm9yV2luZG93LHQpfSxfb3Blbkdsb2JhbENvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHd0KGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaChsdC5PcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbCx0KX0scmVwbGFjZVRvb2xiYXJPcHRpb25zOmFzeW5jIHQ9Pnthd2FpdCB3dChlKTtjb25zdCBhPWZpbi5XaW5kb3cud3JhcFN5bmMoZSk7YXdhaXQgYS51cGRhdGVPcHRpb25zKHt3b3Jrc3BhY2VQbGF0Zm9ybTp7dG9vbGJhck9wdGlvbnM6dH19KX0scmVwbGFjZVdpbmRvd1N0YXRlQnV0dG9uT3B0aW9uczphc3luYyB0PT57YXdhaXQgd3QoZSk7Y29uc3QgYT1maW4uV2luZG93LndyYXBTeW5jKGUpO2F3YWl0IGEudXBkYXRlT3B0aW9ucyh7d29ya3NwYWNlUGxhdGZvcm06e3dpbmRvd1N0YXRlQnV0dG9uT3B0aW9uczp0fX0pfSx1cGRhdGVCcm93c2VyV2luZG93VGl0bGU6YXN5bmMgdD0+e2NvbnN0IGE9ZmluLldpbmRvdy53cmFwU3luYyhlKTtcInN0cmluZ1wiIT10eXBlb2YgdD9hd2FpdCBhLnVwZGF0ZU9wdGlvbnMoe3dvcmtzcGFjZVBsYXRmb3JtOnt0aXRsZTp0fX0pOmNvbnNvbGUud2FybihcIlR5cGUgc3RyaW5nIGZvciB3aW5kb3cgdGl0bGUgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBXaW5kb3dUaXRsZSB0eXBlIGluc3RlYWRcIix0KX0sX29wZW5WaWV3VGFiQ29udGV4dE1lbnU6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgd3QoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKGx0Lk9wZW5WaWV3VGFiQ29udGV4dE1lbnVJbnRlcm5hbCx0KX0sX29wZW5QYWdlVGFiQ29udGV4dE1lbnU6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgd3QoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKGx0Lk9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbCx0KX0sX29wZW5TYXZlTW9kYWw6YXN5bmMgdD0+e2F3YWl0IHd0KGUpO3JldHVybihhd2FpdCBxdChlKSkuZGlzcGF0Y2goZWEuT3BlblNhdmVNb2RhbEludGVybmFsLHQpfSxfZ2V0TGF5b3V0c1dpdGhTZWxlY3RlZFZpZXdzOmFzeW5jKCk9Pihhd2FpdCBxdChlKSkuZGlzcGF0Y2goZWEuR2V0TGF5b3V0c1dpdGhTZWxlY3RlZFZpZXdzSW50ZXJuYWwsZSksX29wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnU6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgd3QoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKGx0Lk9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbCx0KX0sX2FkZERlZmF1bHRQYWdlOmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHd0KGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaChsdC5BZGREZWZhdWx0UGFnZSx0KX0sX3RyYWNrUmVtb3ZlZFRhYjphc3luYyB0PT4oYXdhaXQgd3QoZSkpLmRpc3BhdGNoKGx0LlRyYWNrUmVtb3ZlZFRhYkludGVybmFsLHQpLF9yZXN0b3JlUmVtb3ZlZFRhYjphc3luYyB0PT4oYXdhaXQgd3QoZSkpLmRpc3BhdGNoKGx0LlJlc3RvcmVSZW1vdmVkVGFiSW50ZXJuYWwsdCksX3RyYWNrVmlzaXRlZFNpdGU6YXN5bmMgdD0+KGF3YWl0IHd0KGUpKS5kaXNwYXRjaChsdC5UcmFja1Zpc2l0ZWRTaXRlSW50ZXJuYWwsdCksX2dldFJlY2VudGx5VmlzaXRlZFNpdGVzOmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuR2V0UmVjZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbCx0KSxfZ2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlczphc3luYyB0PT4oYXdhaXQgd3QoZSkpLmRpc3BhdGNoKGx0LkdldEZyZXF1ZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbCx0KSxfc2VhcmNoU2l0ZXM6YXN5bmMgdD0+KGF3YWl0IHd0KGUpKS5kaXNwYXRjaChsdC5TZWFyY2hTaXRlc0ludGVybmFsLHtpZGVudGl0eTplLHJlcTp0fSksX2dldFNlYXJjaFByb3ZpZGVyczphc3luYygpPT4oYXdhaXQgd3QoZSkpLmRpc3BhdGNoKGx0LkdldFNlYXJjaFByb3ZpZGVyc0ludGVybmFsLHtpZGVudGl0eTplfSksX2dldEN1cmF0ZWRDb250ZW50OmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuR2V0Q3VyYXRlZENvbnRlbnRJbnRlcm5hbCx7aWRlbnRpdHk6ZSxyZXE6dH0pLF9oYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbjphc3luYyB0PT4oYXdhaXQgd3QoZSkpLmRpc3BhdGNoKGx0LkhhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uSW50ZXJuYWwsdCl9KSxuYT1lPT57Y29uc3QgdD1maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSk7cmV0dXJue3dyYXBTeW5jOmU9PmFhKGUpLGNyZWF0ZVdpbmRvdzphc3luYyBhPT57Y29uc3Qgbj0oKCk9Pntjb25zdCBlPWBicm93c2VyLXdpbmRvdy1zdGFydHVwLSR7UnQoKX1gO3JldHVybiAkdC5tYXJrU3RhcnQoZSksZX0pKCk7KGU9PntmaW4uQXBwbGljYXRpb24ud3JhcFN5bmMoe3V1aWQ6ZmluLm1lLmlkZW50aXR5LnV1aWR9KS5vbmNlKFwid2luZG93LXNob3duXCIsKCgpPT57JHQubWFya0FuZE1lYXN1cmUoXCJicm93c2VyLXdpbmRvdy1zaG93blwiLGUpfSkpfSkobiksYXdhaXQgd3QoZSk7Y29uc3Qgbz1hd2FpdCB0LmNyZWF0ZVdpbmRvdyhhKTtyZXR1cm4oZT0+eyR0Lm1hcmtBbmRNZWFzdXJlKFwiYnJvd3Nlci13aW5kb3ctc3RhcnRlZFwiLGUpfSkobiksYWEoby5pZGVudGl0eSl9LGdldEFsbEF0dGFjaGVkUGFnZXM6YXN5bmMoKT0+KGF3YWl0IHd0KGUpKS5kaXNwYXRjaChsdC5HZXRBbGxBdHRhY2hlZFBhZ2VzLHZvaWQgMCksZ2V0QWxsV2luZG93czphc3luYygpPT57YXdhaXQgd3QoZSk7cmV0dXJuKGF3YWl0IGJlKCkpLm1hcCgoZT0+YWEoZS5pZGVudGl0eSkpKX0sZ2V0VW5pcXVlUGFnZVRpdGxlOmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuR2V0VW5pcXVlUGFnZVRpdGxlLHQpLGdldExhc3RGb2N1c2VkV2luZG93OmFzeW5jKCk9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuR2V0TGFzdEZvY3VzZWRCcm93c2VyV2luZG93LHZvaWQgMCksZ2V0UGFnZUJ5Vmlld0lkZW50aXR5OmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuR2V0UGFnZUJ5Vmlld0lkZW50aXR5LHQpfX0sb2E9ZT0+KHtjcmVhdGVQYWdlOmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuQ3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWwsdCksZGVsZXRlUGFnZTphc3luYyB0PT4oYXdhaXQgd3QoZSkpLmRpc3BhdGNoKGx0LkRlbGV0ZVNhdmVkUGFnZUludGVybmFsLHQpLHVwZGF0ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0IHd0KGUpKS5kaXNwYXRjaChsdC5VcGRhdGVTYXZlZFBhZ2VJbnRlcm5hbCx0KSxnZXRQYWdlOmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuR2V0U2F2ZWRQYWdlLHQpLGdldFBhZ2VzOmFzeW5jIHQ9Pihhd2FpdCB3dChlKSkuZGlzcGF0Y2gobHQuR2V0U2F2ZWRQYWdlcyx0KSxzYXZlUGFnZTphc3luYyB0PT4oYXdhaXQgd3QoZSkpLmRpc3BhdGNoKGx0LlNhdmVQYWdlLHQpLGNyZWF0ZVdvcmtzcGFjZTphc3luYyB0PT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkNyZWF0ZVNhdmVkV29ya3NwYWNlLHQpLGRlbGV0ZVdvcmtzcGFjZTphc3luYyB0PT57Y29uc3QgYT1BYSgpLG49YXdhaXQgYS5nZXRDdXJyZW50V29ya3NwYWNlKCk7aWYobi53b3Jrc3BhY2VJZD09PXQpdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZGVsZXRlIGN1cnJlbnQgYWN0aXZlIHdvcmtzcGFjZSAke24udGl0bGV9YCk7cmV0dXJuKGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5EZWxldGVTYXZlZFdvcmtzcGFjZSx0KX0sdXBkYXRlV29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuVXBkYXRlU2F2ZWRXb3Jrc3BhY2UsdCksZ2V0V29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuR2V0U2F2ZWRXb3Jrc3BhY2UsdCksZ2V0V29ya3NwYWNlczphc3luYyB0PT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkdldFNhdmVkV29ya3NwYWNlcyx0KSxzYXZlV29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuU2F2ZVdvcmtzcGFjZSx0KSxnZXREb2NrUHJvdmlkZXJDb25maWc6YXN5bmMgdD0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5HZXREb2NrUHJvdmlkZXJDb25maWcsdCksc2F2ZURvY2tQcm92aWRlckNvbmZpZzphc3luYyB0PT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LlNhdmVEb2NrUHJvdmlkZXJDb25maWcsdCl9KTt2YXIgcmE7IWZ1bmN0aW9uKGUpe2UuVXBkYXRlUGxhdGZvcm1UaGVtZVNjaGVtZT1cInVwZGF0ZS1wbGF0Zm9ybS10aGVtZS1zY2hlbWVcIn0ocmF8fChyYT17fSkpO2NvbnN0IGlhPW90KFwib2Ytd29ya3NwYWNlLW5vdGlmaWNhdGlvbnMtc3luY1wiKSxzYT0oZSx0KT0+e2xvY2FsU3RvcmFnZS5zZXRJdGVtKGAke1J9LSR7ZX1gLHQpfSxjYT1lPT5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtSfS0ke2V9YCksbGE9ZT0+bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYCR7Un0tJHtlfWApLGRhPW0uU3lzdGVtLHVhPWU9Pk9iamVjdC5lbnRyaWVzKGUpLnJlZHVjZSgoKGUsW3QsYV0pPT5gJHtlfS0td29ya3NwYWNlLXBhbGV0dGUtJHt0fTogJHthfTtgKSxcIlwiKSxwYT0oZSx0KT0+KHtzZWxlY3RlZFRhYjpcImRhcmtcIj09PXQ/ZS5iYWNrZ3JvdW5kMzplLmJhY2tncm91bmQxfSk7Y29uc3Qgd2E9bmV3IGNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMucHJvdmlkZXJTdG9yYWdlPWUsdGhpcy5nZXRWYXJzQnlTY2hlbWU9ZT0+XCJkYXJrXCI9PT1lP3RoaXMuZGFya1BhbGV0dGVWYXJzOnRoaXMubGlnaHRQYWxldHRlVmFycyx0aGlzLnNldFdvcmtzcGFjZVN0b3JhZ2VQcm94eT1lPT57dGhpcy53b3Jrc3BhY2VTdG9yYWdlPWV9LHRoaXMudHJ5U3luY2hyb25pemVXb3Jrc3BhY2VTdG9yYWdlPWFzeW5jKCk9PntpZih0aGlzLndvcmtzcGFjZVN0b3JhZ2Upe2NvbnN0IGU9dGhpcy5nZXRTY2hlbWUoKTtpZihhd2FpdCB0aGlzLndvcmtzcGFjZVN0b3JhZ2Uuc2V0SXRlbShCdC5TZWxlY3RlZENvbG9yU2NoZW1lLGUpLHRoaXMuZGFya1BhbGV0dGVWYXJzJiZ0aGlzLmxpZ2h0UGFsZXR0ZVZhcnMpaWYoXCJkYXJrXCI9PT1lfHxcImxpZ2h0XCI9PT1lKWF3YWl0IHRoaXMud29ya3NwYWNlU3RvcmFnZS5zZXRJdGVtKEJ0LlRoZW1lUGFsZXR0ZVNoZWV0LGA6cm9vdHske3RoaXMuZ2V0VmFyc0J5U2NoZW1lKGUpfX1gKTtlbHNle2NvbnN0IGU9YEBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspezpyb290IHske3RoaXMuZ2V0VmFyc0J5U2NoZW1lKFwiZGFya1wiKX19fWAsdD1gQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTogbGlnaHQpezpyb290eyR7dGhpcy5nZXRWYXJzQnlTY2hlbWUoXCJsaWdodFwiKX19fWA7YXdhaXQgdGhpcy53b3Jrc3BhY2VTdG9yYWdlLnNldEl0ZW0oQnQuVGhlbWVQYWxldHRlU2hlZXQsYCR7dH0ke2V9YCl9fX0sdGhpcy5zZXRQYWxldHRlcz1hc3luYyh7bGlnaHQ6ZSxkYXJrOnR9KT0+e3RoaXMubGlnaHRQYWxldHRlVmFycz11YSh7Li4uZSwuLi5wYShlLFwibGlnaHRcIil9KSx0aGlzLmRhcmtQYWxldHRlVmFycz11YSh7Li4udCwuLi5wYSh0LFwiZGFya1wiKX0pfX1zZXRTY2hlbWUoZSl7dGhpcy5wcm92aWRlclN0b3JhZ2Uuc2V0SXRlbShCdC5TZWxlY3RlZENvbG9yU2NoZW1lLGUpfWdldFNjaGVtZSgpe3JldHVybiBudWxsPT09dGhpcy5wcm92aWRlclN0b3JhZ2UuZ2V0SXRlbShCdC5TZWxlY3RlZENvbG9yU2NoZW1lKSYmdGhpcy5wcm92aWRlclN0b3JhZ2Uuc2V0SXRlbShCdC5TZWxlY3RlZENvbG9yU2NoZW1lLGRhKSx0aGlzLnByb3ZpZGVyU3RvcmFnZS5nZXRJdGVtKEJ0LlNlbGVjdGVkQ29sb3JTY2hlbWUpfX0oZCksaGE9KCk9PndhLGdhPWU9Pih7Z2V0VGhlbWVzOmFzeW5jKCk9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuR2V0VGhlbWVzLHZvaWQgMCksc2V0U2VsZWN0ZWRTY2hlbWU6YXN5bmMgdD0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5TZXRTZWxlY3RlZFNjaGVtZSx0KSxnZXRTZWxlY3RlZFNjaGVtZTphc3luYygpPT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkdldFNlbGVjdGVkU2NoZW1lLHZvaWQgMCl9KSxtYT1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCBjdCgpO2F3YWl0IHQuZGlzcGF0Y2goXCJzZXQtc2VsZWN0ZWQtc2NoZW1lXCIsZSl9LGthPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IGlhKCk7YXdhaXQgdC5kaXNwYXRjaChyYS5VcGRhdGVQbGF0Zm9ybVRoZW1lU2NoZW1lLHtzY2hlbWU6ZX0pfSxiYT1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCBiZSgpO3JldHVybiBQcm9taXNlLmFsbCh0Lm1hcCgoYXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgcXQodC5pZGVudGl0eSk7YXdhaXQgYS5kaXNwYXRjaChlYS5TZXRTZWxlY3RlZFNjaGVtZSxlKX0pKSl9LHlhPWFzeW5jIGU9Pntjb25zdCB0PW5ldyBBcnJheSxhPWZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLG49YXdhaXQgYS5nZXRWaWV3cygpO2Zvcihjb25zdCBlIG9mIG4pey0xIT09ZS5pZGVudGl0eS5uYW1lLmluZGV4T2YoZGUuQnJvd3NlckFkZHJlc3NTZWFyY2hQcmVmaXgpJiZ0LnB1c2goZS5pZGVudGl0eSk7LTEhPT0oYXdhaXQgZS5nZXRPcHRpb25zKCkpLnVybC5pbmRleE9mKEsuRW50ZXJwcmlzZUJyb3dzZXIpJiZ0LnB1c2goZS5pZGVudGl0eSl9cmV0dXJuIFByb21pc2UuYWxsKHQubWFwKChhc3luYyB0PT57Y29uc3QgYT1hd2FpdCBxdCh0LFwidGhlbWUtY2hhbmdlLWxpc3RlbmVyXCIpO2F3YWl0IGEuZGlzcGF0Y2goZWEuU2V0U2VsZWN0ZWRTY2hlbWUsZSl9KSkpfSxmYT1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCB5ZSgpO3JldHVybiBQcm9taXNlLmFsbCh0Lm1hcCgoYXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgcXQodC5pZGVudGl0eSk7YXdhaXQgYS5kaXNwYXRjaChlYS5TZXRTZWxlY3RlZFNjaGVtZSxlKX0pKSl9LFNhPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IHF0KHt1dWlkOndlLnV1aWQsbmFtZTpkZS5FbnRlcnByaXNlQ29udGV4dE1lbnV9KTthd2FpdCB0LmRpc3BhdGNoKGVhLlNldFNlbGVjdGVkU2NoZW1lLGUpfSx2YT1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCBxdCh7dXVpZDp3ZS51dWlkLG5hbWU6ZGUuRW50ZXJwcmlzZUJvb2ttYXJrRGlhbG9nV2luZG93fSk7YXdhaXQgdC5kaXNwYXRjaChlYS5TZXRTZWxlY3RlZFNjaGVtZSxlKS5jYXRjaCgoKCk9Pnt9KSl9LFBhPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IHF0KHt1dWlkOndlLnV1aWQsbmFtZTpkZS5Ecm9wZG93bk1lbnV9KTthd2FpdCB0LmRpc3BhdGNoKGVhLlNldFNlbGVjdGVkU2NoZW1lLGUpLmNhdGNoKCgoKT0+e30pKX0sQ2E9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgcXQoe3V1aWQ6d2UudXVpZCxuYW1lOmRlLkRvY2tDb21wYW5pb259KTthd2FpdCB0LmRpc3BhdGNoKGVhLlNldFNlbGVjdGVkU2NoZW1lLGUpLmNhdGNoKCgoKT0+e30pKX0sTWE9YXN5bmMgZT0+e3RyeXtjb25zdCB0PWhhKCk7dC5zZXRTY2hlbWUoZSksYXdhaXQgUHJvbWlzZS5hbGwoW3QudHJ5U3luY2hyb25pemVXb3Jrc3BhY2VTdG9yYWdlKCkseWEoZSksa2EoZSksYmEoZSksZmEoZSksU2EoZSksbWEoZSksdmEoZSksUGEoZSksQ2EoZSldKX1jYXRjaChlKXtjb25zb2xlLmVycm9yKFwiZmFpbGVkIHRvIHNldCB0aGUgc2VsZWN0ZWQgc2NoZW1lOiBcIixlKX19LHhhPSgpPT57dHJ5e3JldHVybiBoYSgpLmdldFNjaGVtZSgpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gZ2V0IHRoZSBzZWxlY3RlZCBzY2hlbWU6IFwiLGUpfX0sSWE9ZT0+e2NvbnN0IHQ9ZmluLlBsYXRmb3JtLndyYXBTeW5jKGUpO2xldCBhO3JldHVybiBPYmplY3QuYXNzaWduKHQse2FwcGx5U25hcHNob3Q6YXN5bmModCxhKT0+e2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0JiYhdD8ud2luZG93cyl0aHJvdyBuZXcgRXJyb3IoXCJOb3QgYSB2YWxpZCBicm93c2VyIHNuYXBzaG90XCIpO3JldHVybiBmaW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuYXBwbHlTbmFwc2hvdCh0LGEpfSxnZXRTbmFwc2hvdDooKT0+ZmluLlBsYXRmb3JtLndyYXBTeW5jKGUpLmdldFNuYXBzaG90KCkudGhlbigoZT0+ZSkpLGdldFZpZXdTbmFwc2hvdDp0PT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuZ2V0Vmlld1NuYXBzaG90KHQpLGNyZWF0ZVZpZXc6KHQsYSxuKT0+ZmluLlBsYXRmb3JtLndyYXBTeW5jKGUpLmNyZWF0ZVZpZXcodCxhLG4pLGxhdW5jaEFwcDphc3luYyB0PT57Y29uc29sZS53YXJuKFwibGF1bmNoQXBwIG1ldGhvZCBpcyBkZXByZWNhdGVkLiBJdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgY3JlYXRlVmlldyAtIGh0dHBzOi8vZGV2ZWxvcGVycy5vcGVuZmluLmNvL29mLWRvY3MvZG9jcy9wbGF0Zm9ybS1nZXR0aW5nLXN0YXJ0ZWQjYWRkLWEtdmlldy10by1hbi1leGlzdGluZy13aW5kb3cgb3IgIGNyZWF0ZVdpbmRvdyAtIGh0dHBzOi8vZGV2ZWxvcGVycy5vcGVuZmluLmNvL29mLWRvY3MvZG9jcy9wbGF0Zm9ybS1nZXR0aW5nLXN0YXJ0ZWQjY3JlYXRlLWEtcGxhdGZvcm0td2luZG93IGluc3RlYWQuXCIpLHQudGFyZ2V0fHwodC50YXJnZXQ9e3V1aWQ6UixuYW1lOkIsZW50aXR5VHlwZTpFfHxcInVua25vd25cIn0pO3JldHVybihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuTGF1bmNoQXBwLHQpfSxfaW52b2tlQ3VzdG9tQWN0aW9uOmFzeW5jKHQsYSk9Pntjb25zdCBuPWF3YWl0IHB0KGUpLG89e2FjdGlvbklkOnQscGF5bG9hZDp7Li4uYSxjYWxsZXJUeXBlOmEuY2FsbGVyVHlwZXx8Qy5BUEl9fTtyZXR1cm4gbi5kaXNwYXRjaChsdC5JbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbCxvKX0sX3JlcXVlc3RRdWl0UGxhdGZvcm1EaWFsb2c6YXN5bmMgdD0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5SZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWwsdCksZ2V0Q3VycmVudFdvcmtzcGFjZTphc3luYygpPT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkdldEN1cnJlbnRXb3Jrc3BhY2Usdm9pZCAwKSxhcHBseVdvcmtzcGFjZTphc3luYyh0LGEpPT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkFwcGx5V29ya3NwYWNlLHsuLi50LG9wdGlvbnM6YX0pLHJlc3RvcmVMYXN0U2F2ZWRXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5SZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWwsdCksc2V0QWN0aXZlV29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuU2V0QWN0aXZlV29ya3NwYWNlLHQpLGdldExhbmd1YWdlOmFzeW5jKCk9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuR2V0TGFuZ3VhZ2UpLF9nZXRMYW5ndWFnZVJlc291cmNlczphc3luYygpPT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkdldExhbmd1YWdlUmVzb3VyY2VzSW50ZXJuYWwpLHNldExhbmd1YWdlOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuU2V0TGFuZ3VhZ2UsdCksX3JhaXNlQW5hbHl0aWNzOmFzeW5jIHQ9PntpZihhfHwoYT1hd2FpdCB1dChlKSksXCJvYmplY3RcIj09dHlwZW9mIGEmJmE/LmFuYWx5dGljcz8uaXNTdXBwb3J0ZWQpe3JldHVybihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuQW5hbHl0aWNzLHQpfWUudXVpZH0sZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZzphc3luYygpPT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkdldE5vdGlmaWNhdGlvbnNDb25maWcpLF9yZWZyZXNoQm9va21hcmtzSW50ZXJuYWw6YXN5bmMoKT0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5SZWZyZXNoQm9va21hcmtzSW50ZXJuYWwpLF9sYXVuY2hCb29rbWFya0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuTGF1bmNoQm9va21hcmtJbnRlcm5hbCx0KSxfdXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuVXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsLHQpLF91cGRhdGVDb250ZW50TWVudUludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuVXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbCx0KSxfbGF1bmNoRG9ja0VudHJ5SW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5MYXVuY2hEb2NrRW50cnlJbnRlcm5hbCx0KSxfc2V0RG9ja0Zhdm9yaXRlc0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuU2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWwsdCksX3NldERlZmF1bHREb2NrQnV0dG9uc09yZGVySW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5TZXREZWZhdWx0RG9ja0J1dHRvbnNPcmRlckludGVybmFsLHQpLF9yZW1vdmVEb2NrRmF2b3JpdGVJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LlJlbW92ZURvY2tGYXZvcml0ZUludGVybmFsLHQpLF9hZGREb2NrRmF2b3JpdGVJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkFkZERvY2tGYXZvcml0ZUludGVybmFsLHQpLF9uYXZpZ2F0ZUNvbnRlbnRNZW51SW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5OYXZpZ2F0ZUNvbnRlbnRNZW51SW50ZXJuYWwsdCksX29wZW5Eb2NrV29ya3NwYWNlc0NvbnRleHRNZW51SW50ZXJuYWw6YXN5bmMoKT0+KGF3YWl0IHB0KGUpKS5kaXNwYXRjaChsdC5HZXREb2NrV29ya3NwYWNlc0NvbnRleHRNZW51SW50ZXJuYWwpLF9oYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBwdChlKSkuZGlzcGF0Y2gobHQuSGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbCx0KSxfZm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbDphc3luYygpPT4oYXdhaXQgcHQoZSkpLmRpc3BhdGNoKGx0LkZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWwpLFRoZW1lOmdhKGUpLEJyb3dzZXI6bmEoZSksU3RvcmFnZTpvYShlKX0pfSxBYT0oKT0+SWEoZmluLm1lLmlkZW50aXR5KSxXYT17Y29udGV4dE1lbnVPcHRpb25zOntlbmFibGVkOiEwLHRlbXBsYXRlOltcInNwZWxsQ2hlY2tcIixcInNlcGFyYXRvclwiLFwicHJpbnRcIixcInNlcGFyYXRvclwiLFwiY3V0XCIsXCJjb3B5XCIsXCJwYXN0ZVwiLFwidW5kb1wiLFwicmVkb1wiLFwic2VsZWN0QWxsXCIsXCJpbnNwZWN0XCIsXCJyZWxvYWRcIl19LGRvd25sb2FkU2hlbGY6e2VuYWJsZWQ6ITB9fTtmdW5jdGlvbiBEYShlLHQpe3JldHVybiBBdCh7fSxXYSx0LGUpfWNvbnN0IFRhPVwiaW50ZXJuYWwtZ2VuZXJhdGVkLXZpZXctXCIsUmE9KGUsdCk9PmUuY29udGVudD97Li4uZSxjb250ZW50OmUuY29udGVudC5tYXAoKGU9PlJhKGUsdCkpKX06ey4uLmUsY29tcG9uZW50U3RhdGU6dChlLmNvbXBvbmVudFN0YXRlKX0sQmE9KGUsdCk9PntyZXR1cm4gYT1EYShlLHQpLHsuLi5hLG5hbWU6YS5uYW1lP2EubmFtZTpgaW50ZXJuYWwtZ2VuZXJhdGVkLXZpZXctJHtSdCgpfWAsX2ludGVybmFsV29ya3NwYWNlRGF0YTp7Li4uYS5faW50ZXJuYWxXb3Jrc3BhY2VEYXRhLHZpZXdJZGVudGlmaWVyOmEuX2ludGVybmFsV29ya3NwYWNlRGF0YT8udmlld0lkZW50aWZpZXJ8fFJ0KCl9fTt2YXIgYX0sRWE9ZT0+KHsuLi5lLG5hbWU6dm9pZCAwfSksRmE9ZT0+e2NvbnN0IHQ9ey4uLmV9O3JldHVybiBSYSh0LEVhKX0sVmE9ZT0+e2NvbnN0IHQ9ey4uLmV9O3JldHVybiBSYSh0LChlPT5lLm5hbWUmJmUubmFtZS5zdGFydHNXaXRoKFRhKT9FYShlKTplKSl9LE5hPWU9Pntjb25zdCB0PVtdO3JldHVybihlJiZBcnJheS5pc0FycmF5KGUpP2U6W10pLmZvckVhY2goKGU9PntpZihcImNvbXBvbmVudFwiPT09ZS50eXBlKXJldHVybiB0LnB1c2goZS5jb21wb25lbnRTdGF0ZSk7Y29uc3QgYT1OYShlLmNvbnRlbnQpO3QucHVzaCguLi5hKX0pKSx0fSxMYT1hc3luYyhlLHQsYT13ZSk9PntsZXQgbjtpZihhd2FpdCBrZShhKSl7bj0oYXdhaXQgcGUoYSkuZ2V0T3B0aW9ucygpKS5sYXlvdXR8fHtzZXR0aW5nczp7fX19cmV0dXJuey4uLm4sY29udGVudDpbe3R5cGU6XCJzdGFja1wiLGNvbnRlbnQ6W3t0eXBlOlwiY29tcG9uZW50XCIsY29tcG9uZW50TmFtZTpcInZpZXdcIixjb21wb25lbnRTdGF0ZTp7dGl0bGU6ZSx1cmw6dH19XX1dfX07bmV3IE1hcCxuZXcgTWFwO2NvbnN0IF9hPShlLHQpPT57Y29uc3QgYT1OYSh0LmNvbnRlbnQpO3JldHVybnsuLi5SYShlLChlPT57Y29uc3QgdD1hLmZpbmQoKHQ9PnQuX2ludGVybmFsV29ya3NwYWNlRGF0YT8udmlld0lkZW50aWZpZXI9PT1lLl9pbnRlcm5hbFdvcmtzcGFjZURhdGE/LnZpZXdJZGVudGlmaWVyKSksbj10P3QuaXNDbG9zYWJsZTplLmlzQ2xvc2FibGU7cmV0dXJuey4uLmUsaXNDbG9zYWJsZTpufX0pKSxzZXR0aW5nczp0LnNldHRpbmdzfX0sT2E9ZT0+ZT9OYShlKS5sZW5ndGg6MCxVYT0oVHQoKSgoYXN5bmMgZT0+e3RyeXtjb25zdCB0PWF3YWl0KGFzeW5jIGU9PmZpbi5QbGF0Zm9ybS5MYXlvdXQud3JhcFN5bmMoey4uLmZpbi5tZS5pZGVudGl0eSxsYXlvdXROYW1lOmV9KS5nZXRDb25maWcoKSkoZS5sYXlvdXRDb250YWluZXJLZXkpLGE9dC5jb250ZW50P05hKHQuY29udGVudCk6W10sbj1hLmxlbmd0aDtuPjE/KGU9PntcIm11bHRpVmlld1wiIT09ZS5hdHRhY2hlZFBhZ2VUeXBlJiZBYSgpLkJyb3dzZXIud3JhcFN5bmMod2UpLnVwZGF0ZVBhZ2Uoe3BhZ2VJZDplLnBhZ2VJZCxwYWdlOntzaW5nbGVWaWV3TmFtZTpudWxsLGF0dGFjaGVkUGFnZVR5cGU6XCJtdWx0aVZpZXdcIn19KX0pKGUpOjE9PT1uJiYoYXN5bmMoZSx0KT0+e2NvbnN0IGE9QWEoKS5Ccm93c2VyLndyYXBTeW5jKHdlKTtpZihcInNpbmdsZVZpZXdcIiE9PWUuYXR0YWNoZWRQYWdlVHlwZSl7Y29uc3Qgbj1hd2FpdCBVdChlKSxvPWF3YWl0IEFhKCkuQnJvd3Nlci5nZXRVbmlxdWVQYWdlVGl0bGUoKTtkZWxldGUgbi5sYXlvdXQ7Y29uc3Qgcj17Li4ubixzaW5nbGVWaWV3TmFtZTp0LHRpdGxlOm8saGFzVW5zYXZlZENoYW5nZXM6ITEsYXR0YWNoZWRQYWdlVHlwZTpcInNpbmdsZVZpZXdcIn07YXdhaXQgYS51cGRhdGVQYWdlKHtwYWdlSWQ6ZS5wYWdlSWQscGFnZTpyfSl9fSkoZSxhWzBdLm5hbWUpLGF3YWl0KGFzeW5jKGUsdCk9Pntjb25zdCBhPUd0KHsuLi53ZSxsYXlvdXROYW1lOmUubGF5b3V0Q29udGFpbmVyS2V5fSksbj1hd2FpdCBhLmlzU2hvd2luZ1RhYnMoKTt0PjE/bnx8YXdhaXQgYS5zaG93KCk6MT09PXQmJm4mJmF3YWl0IGEuaGlkZSh7c2V0dGluZ3M6e3Jlb3JkZXJFbmFibGVkOiEwfX0pfSkoZSxuKX1jYXRjaChlKXt9fSksNTAse2xlYWRpbmc6ITEsdHJhaWxpbmc6ITB9KSxyZXF1aXJlKFwicmVhY3QtaTE4bmV4dFwiKSksR2E9cmVxdWlyZShcImkxOG5leHRcIik7dmFyIEhhPWEubihHYSk7Y29uc3QgJGE9SlNPTi5wYXJzZSgne1wiY29udGV4dE1lbnUubmV3V2luZG93XCI6XCLmlrDlu7rnqpflj6NcIixcImNvbnRleHRNZW51Lm5ld1BhZ2VcIjpcIuaWsOW7uumhtemdolwiLFwiY29udGV4dE1lbnUucmVzdG9yZVwiOlwi6L+Y5Y6f5Yiw5LiK5qyh5L+d5a2Y55qE5pu05pS5XCIsXCJjb250ZXh0TWVudS5zd2l0Y2hXb3Jrc3BhY2VcIjpcIuWIh+aNouW3peS9nOWMulwiLFwiY29udGV4dE1lbnUuYXBwZWFyYW5jZVwiOlwi5aSW6KeCXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlXCI6XCLkv53lrZjlt6XkvZzljLpcIixcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi5bCG5bel5L2c5Yy65Y+m5a2Y5Li6Li4uXCIsXCJjb250ZXh0TWVudS5yZW5hbWVXb3Jrc3BhY2VcIjpcIumHjeWRveWQjeW3peS9nOWMulwiLFwiY29udGV4dE1lbnUuZGVsZXRlV29ya3NwYWNlXCI6XCLliKDpmaTlt6XkvZzljLpcIixcImNvbnRleHRNZW51LmRvd25sb2Fkc1wiOlwi5LiL6L29XCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiOlwi5L+d5a2Y6aG16Z2iXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZUFzXCI6XCLlsIbpobXpnaLlj6blrZjkuLouLi5cIixcImNvbnRleHRNZW51LnByaW50XCI6XCLmiZPljbAuLi5cIixcImNvbnRleHRNZW51LnByaW50U2NyZWVuXCI6XCLmiZPljbDlsY/luZVcIixcImNvbnRleHRNZW51LmNsb3NlV2luZG93XCI6XCLlhbPpl63nqpflj6NcIixcImNvbnRleHRNZW51Lm9wZW5TdG9yZWZyb250XCI6XCLlvIDmlL7lvI/lupfpnaJcIixcImNvbnRleHRNZW51LnF1aXRQbGF0Zm9ybVwiOlwi6YCA5Ye65bmz5Y+wXCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCLmlrDlu7rop4blm75cIixcImNvbnRleHRNZW51Lm9wZW5WaWV3XCI6XCLkvb/nlKjpu5jorqQgV2ViIOa1j+iniOWZqOaJk+W8gOinhuWbvlwiLFwiY29udGV4dE1lbnUub3BlblZpZXdzXCI6XCLkvb/nlKjpu5jorqQgV2ViIOa1j+iniOWZqOaJk+W8gOinhuWbvlwiLFwiY29udGV4dE1lbnUucmVsb2FkXCI6XCJSZWxvYWQgQ05cIixcImNvbnRleHRNZW51LnJlbG9hZFZpZXdcIjpcIumHjeaWsOWKoOi9veinhuWbvlwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld3NcIjpcIumHjeaWsOWKoOi9veinhuWbvlwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgQ05cIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdcIjpcIuWkjeWItuinhuWbvlwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlVmlld3NcIjpcIuWkjeWItuinhuWbvlwiLFwiY29udGV4dE1lbnUuYWRkVmlld1wiOlwi5bCG6KeG5Zu+5re75Yqg5Yiw6aKR6YGTXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3c1wiOlwi5bCG6KeG5Zu+5re75Yqg5Yiw6aKR6YGTXCIsXCJjb250ZXh0TWVudS5yZW1vdmVWaWV3XCI6XCLku47popHpgZPkuK3np7vpmaTop4blm75cIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdzXCI6XCLku47popHpgZPkuK3np7vpmaTop4blm75cIixcImNvbnRleHRNZW51LmNsb3NlVmlld1wiOlwi5YWz6Zet6KeG5Zu+XCIsXCJjb250ZXh0TWVudS5jbG9zZVZpZXdzXCI6XCLlhbPpl63op4blm75cIixcImNvbnRleHRNZW51LmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgQ05cIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIjpcIuWkjeWItumhtemdolwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludFwiOlwi5omT5Y2wXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50QWxsXCI6XCLlhajpg6jmiZPljbBcIixcInNhdmVNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi5bCG5bel5L2c5Yy65Y+m5a2Y5Li6XCIsXCJzYXZlTWVudS5zYXZlUGFnZUFzXCI6XCLlsIbpobXpnaLlj6blrZjkuLpcIixcInNhdmVNb2RhbC5lbnRlclZhbHVlXCI6XCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBDTlwiLFwic2F2ZU1vZGFsLmFscmVhZHlFeGlzdHNcIjpcInt7dGl0bGV9fSDlt7LlrZjlnKjjgIJcIixcInNhdmVNb2RhbC5wbGVhc2VFbnRlclZhbGlkTmFtZVwiOlwi6K+36L6T5YWl5pyJ5pWI5ZCN56ewXCIsXCJzYXZlTW9kYWwucmVuYW1lUGFnZVwiOlwi6YeN5paw5ZG95ZCN6aG16Z2iXCIsXCJzYXZlTW9kYWwuY2xvc2VQYWdlXCI6XCLlhbPpl63pobXpnaJcIixcInNhdmVNb2RhbC5kaXNjYXJkQ2hhbmdlc1wiOlwi5pS+5byD5pu05pS5XCIsXCJzYXZlTW9kYWwuZGlzY2FyZEFsbFwiOlwi5YWo6YOo5pS+5byDXCIsXCJzYXZlTW9kYWwuc2F2ZUFsbFwiOlwi5YWo6YOo5L+d5a2YXCIsXCJzYXZlTW9kYWwuc2F2ZVBhZ2VzQ291bnRcIjpcIuWFs+mXreWJjeS/neWtmCAoe3tjb3VudH19KSDkuKrpobXpnaLvvJ9cIixcImRlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFBhZ2UgQ05cIixcImVudGVycHJpc2VEZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBTdXBlcnRhYiBDTlwiLFwiYWRkTmV3UGFnZVwiOlwi5re75Yqg5paw6aG16Z2iXCIsXCJhZGROZXdUYWJcIjpcIua3u+WKoOaWsOmAiemhueWNoVwiLFwiYWRkTmV3Vmlld1wiOlwi5paw5bu66KeG5Zu+XCIsXCJyZXN0b3JlTW9kYWxcIjpcIuaCqOehruWumuimgei/mOWOn+WIsOS4iuasoeS/neWtmOeahOabtOaUueWQl++8n1wiLFwibW9kYWwuZGlzY2FyZFdhcm5pbmdcIjpcIuS7u+S9leacquS/neWtmOeahOabtOaUuemDveWwhuS4ouWksVwiLFwibW9kYWwuZGlzY2FyZFBhZ2VXYXJuaW5nXCI6XCLlr7nmraTpobXnmoTku7vkvZXmnKrkv53lrZjnmoTmm7TmlLnpg73lsIbkuKLlpLHjgIJcIixcIm1vZGFsLnNhdmVDaGFuZ2VzUHJvbXB0XCI6XCLlhbPpl63liY3kv53lrZjmm7TmlLnvvJ9cIixcIm1vZGFsLnBhZ2VDbG9zZVwiOlwi5YWz6Zet6aG16Z2iXCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbFwiOlwi5oKo56Gu5a6a6KaB5YiH5o2i5YiwIHt7d29ya3NwYWNlfX0g5ZCX77yfXCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCLku7vkvZXmnKrkv53lrZjnmoTmm7TmlLnpg73lsIbkuKLlpLFcIixcImRlbGV0ZVdvcmtzcGFjZU1vZGFsXCI6XCLmgqjnoa7lrpropoHmsLjkuYXliKDpmaTmraTlt6XkvZzljLrlkJfvvJ9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCLlkI3np7DkuLoge3t3b3Jrc3BhY2V9fSDnmoTlt6XkvZzljLrlt7LlrZjlnKjjgILmgqjmmK/lkKbopoHmm7/mjaLlroPvvJ9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nLmJvZHlcIjpcIuW3suWtmOWcqOWQjOWQjeeahOW3peS9nOWMuuOAguabv+aNouWug+WwhuimhuebluWFtuW9k+WJjeWGheWuueOAglwiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLnJlcGxhY2VcIjpcIuabv+aNolwiLFwiY2xvc2VQbGF0Zm9ybVwiOlwi5YWz6Zet5bmz5Y+wXCIsXCJjbG9zZVBsYXRmb3JtLndvcmtzcGFjZVwiOlwi5YWz6ZetIHt7d29ya3NwYWNlfX0g5bmz5Y+wXCIsXCJjbG9zZVBsYXRmb3JtLndhcm5pbmdcIjpcIuWFs+mXreW5s+WPsOWwhuWFs+mXreaJgOacieW3peS9nOWMuuOAgeW6lOeUqOaIluS7u+S9leato+WcqOi/kOihjOeahOi/m+eoi+OAglwiLFwiYmFja1wiOlwi5ZCO6YCAXCIsXCJmb3J3YXJkXCI6XCLliY3ov5tcIixcInJlbG9hZFwiOlwi6YeN5paw5Yqg6L29XCIsXCJncmVlblwiOlwi57u/6ImyXCIsXCJwdXJwbGVcIjpcIue0q+iJslwiLFwib3JhbmdlXCI6XCLmqZnoibJcIixcInJlZFwiOlwi57qi6ImyXCIsXCJwaW5rXCI6XCLnsonnuqLoibJcIixcInllbGxvd1wiOlwi6buE6ImyXCIsXCJ0aGVtZS5saWdodFwiOlwi5rWF6ImyXCIsXCJ0aGVtZS5kYXJrXCI6XCLmt7HoibJcIixcInRoZW1lLnN5c3RlbVwiOlwi5LiO5pON5L2c57O757uf6K6+572u5ZCM5q2lXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCLpmpDol4/pgInpobnljaFcIixcInRvb2xiYXIuc2hvd1RhYnNcIjpcIuaYvuekuumAiemhueWNoVwiLFwidG9vbGJhci5sb2NrXCI6XCLplIHlrppcIixcInRvb2xiYXIudW5sb2NrXCI6XCLop6PplIFcIixcInRvb2xiYXIuY29sb3JMaW5raW5nXCI6XCLpopzoibLpk77mjqVcIixcInRvb2xiYXIuY2hhbmdlTGF5b3V0XCI6XCLmm7TmlLnluIPlsYBcIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcIuS/neWtmOiPnOWNlVwiLFwidG9vbGJhci5tYXhpbWl6ZVdpbmRvd1wiOlwi5pyA5aSn5YyW56qX5Y+jXCIsXCJ0b29sYmFyLnJlc3RvcmVXaW5kb3dcIjpcIui/mOWOn+eql+WPo1wiLFwidG9vbGJhci5taW5pbWl6ZVdpbmRvd1wiOlwi5pyA5bCP5YyW56qX5Y+jXCIsXCJjaGFuZ2VMYXlvdXQuZnVsbFdpZHRoXCI6XCLlhajlrr1cIixcImNoYW5nZUxheW91dC5jb2x1bW5zXCI6XCLliJfmlbBcIixcImNoYW5nZUxheW91dC5Sb3dzXCI6XCLooYzmlbBcIixcImNoYW5nZUxheW91dC5HcmlkXCI6XCLnvZHmoLxcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcIuW3suWIh+aNouW3peS9nOWMulwiLFwic3VjY2Vzc0luZGljYXRvci5oaWRkZW5cIjpcIumAiemhueWNoeW3sumakOiXj1wiLFwic3VjY2Vzc0luZGljYXRvci5zaG93blwiOlwi6YCJ6aG55Y2h5bey5pi+56S6XCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxvY2tlZFwiOlwi6aG16Z2i5bey6ZSB5a6aXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnVubG9ja2VkXCI6XCLpobXpnaLlt7Lop6PplIFcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRcIjpcIuW3peS9nOWMuuW3suS/neWtmFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZEFzXCI6XCLlt6XkvZzljLrlt7Llj6blrZjkuLoge3t3b3Jrc3BhY2V9fVwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VSZW5hbWVkXCI6XCLlt6XkvZzljLrlt7Lph43lkb3lkI1cIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZVNhdmVkXCI6XCLpobXpnaLlt7Lkv53lrZhcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIGhhcyBiZWVuIHNhdmVkLiBDTlwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlQ29weVNhdmVkXCI6XCLpobXpnaLlt7Llj6blrZjkuLoge3t0aXRsZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCLpobXpnaLlt7Lph43lkb3lkI1cIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwi5bey5bqU55So5LiK5LiL5paH57uEXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwi5bey5bqU55SoIHt7Y29sb3JOYW1lfX0g5LiK5LiL5paH57uEXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnZpZXdSZW1vdmVkXCI6XCLku47kuIrkuIvmlofnu4TkuK3np7vpmaTop4blm75cIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld3NSZW1vdmVkXCI6XCLku47kuIrkuIvmlofnu4TkuK3np7vpmaTop4blm75cIixcInN1Y2Nlc3NJbmRpY2F0b3IubGF5b3V0QXBwbGllZFwiOlwi5bey5bqU55SoIHt7bGF5b3V0TmFtZX19IOW4g+WxgFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VEZWxldGVkXCI6XCLlt6XkvZzljLrlt7LliKDpmaRcIixcImVycm9ySW5kaWNhdG9yLnBhZ2VTYXZlRmFpbGVkXCI6XCLpobXpnaLkv53lrZjlpLHotKVcIixcImVycm9ySW5kaWNhdG9yLndvcmtzcGFjZVNhdmVGYWlsZWRcIjpcIuW3peS9nOWMuuS/neWtmOWksei0pVwiLFwiZXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVQYWdlXCI6XCLlpI3liLbpobXpnaLlpLHotKVcIixcImluZm9JbmRpY2F0b3IuY29sb3JMaW5rQXR0ZW1wdFwiOlwi5oiR5Lus5bCd6K+V5a+55q2k6YCJ6aG55Y2h6L+b6KGM6aKc6Imy6ZO+5o6l77yM5L2G572R56uZL+WGheWuueaJgOacieiAheWwmuacquWQr+eUqOivpeWKn+iDvVwiLFwiZ2xvYmFsLmNhbmNlbFwiOlwi5Y+W5raIXCIsXCJnbG9iYWwuY29uZmlybVwiOlwi56Gu6K6kXCIsXCJnbG9iYWwuc2F2ZVwiOlwi5L+d5a2YXCIsXCJnbG9iYWwuZGVsZXRlXCI6XCJEZWxldGUgQ05cIixcImFwcFJlc3VsdHMuaGVhZGVyXCI6XCJGZWF0dXJlZCBDb250ZW50IENOXCIsXCJyZWNlbnRseUNsb3NlZC5oZWFkZXJcIjpcIlJlY2VudGx5IENsb3NlZCBDTlwiLFwibGFuZGluZ1BhZ2Uuc3ViaGVhZGVyXCI6XCJBcHBzIGFuZCB3ZWJzaXRlcyBzZWxlY3RlZCBieSBhbiBhZG1pbiB3aWxsIHNob3cgaGVyZSBDTlwiLFwiYXJpYS5vcGVuQnJvd3NlclwiOlwi5omT5byA5rWP6KeI5Zmo6I+c5Y2VXCIsXCJhcmlhLmJyb3dzZXJUYWJzXCI6XCLmtY/op4jlmajpgInpobnljaFcIixcImFyaWEudmlld1RhYlwiOlwi5p+l55yLIHt7dGl0bGV9fSDnmoTpgInpobnljaFcIixcImFyaWEuY2xvc2VQYWdlXCI6XCLlhbPpl60ge3t0aXRsZX19IOeahOmhtemdoumAiemhueWNoeaMiemSrlwiLFwiYXJpYS5jbG9zZVRhYlwiOlwi5YWz6Zet6YCJ6aG55Y2hIHt7dGl0bGV9fVwiLFwiYXJpYS50aXRsZVwiOlwi5qCH6aKYXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCLkvb/nlKjovazkuYnlhbPpl63kuIrkuIvmlofnu4TpgInmi6nlr7nor53moYZcIixcImFyaWEuY29sb3JMaW5raW5nXCI6XCLmmL7npLrmiJbpmpDol4/popzoibLpk77mjqVcIixcImFyaWEuYXBwbHlDb2xvckxpbmtpbmdcIjpcIuivt+mAieaLqeS4gOS4quinhuWbvuS7peW6lOeUqOminOiJsumTvuaOpVwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld1wiOlwi5YiG6YWN57uZIHt7bmFtZX19IOS4iuS4i+aWh+e7hOeahOW9k+WJjeinhuWbvlwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld3NcIjpcIuWIhumFjee7mSB7e25hbWV9fSDkuIrkuIvmlofnu4TnmoTlvZPliY3op4blm75cIixcImFyaWEuc2V0Q29sb3JMaW5raW5nQWN0aXZlVmlld1wiOlwi5bCG5rS75Yqo6KeG5Zu+6K6+572u5Li6IHt7bmFtZX19IOS4iuS4i+aWh+e7hFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3c1wiOlwi5bCG5rS75Yqo6KeG5Zu+6K6+572u5Li6IHt7bmFtZX19IOS4iuS4i+aWh+e7hFwiLFwiYXJpYS5lc2NhcGVMYXlvdXREaWFsb2dcIjpcIuS9v+eUqOi9rOS5ieWFs+mXreabtOaUueW4g+WxgOWvueivneahhlwiLFwiZ2xvYmFsLnN1cGVydGFiXCI6XCJTdXBlcnRhYiBDTlwiLFwiZ2xvYmFsLnRhYlwiOlwiVGFiIENOXCIsXCJib29rbWFya3MuZWRpdEJvb2ttYXJrXCI6XCJFZGl0IEJvb2ttYXJrIENOXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFwiOlwiQm9va21hcmsgYWRkZWQgQ05cIixcImJvb2ttYXJrcy5kb25lXCI6XCJEb25lIENOXCIsXCJib29rbWFya3MucmVtb3ZlXCI6XCJSZW1vdmUgQ05cIixcImJvb2ttYXJrcy5ib29rbWFya3NQYW5lbFwiOlwiQm9va21hcmtzIFBhbmVsIENOXCIsXCJib29rbWFya3MuY2xvc2VQYW5lbFwiOlwiQ2xvc2UgQm9va21hcmtzIFBhbmVsIENOXCIsXCJib29rbWFya3MuYm9va21hcmtzXCI6XCJCb29rbWFya3MgQ05cIixcImJvb2ttYXJrcy5hbGxCb29rbWFya3NcIjpcIkFsbCBCb29rbWFya3MgQ05cIixcImJvb2ttYXJrcy5mYXZvcml0ZXNcIjpcIkZhdm9yaXRlcyBDTlwiLFwiYm9va21hcmtzLnNlYXJjaEJvb2ttYXJrc1wiOlwiU2VhcmNoIEJvb2ttYXJrcyBDTlwiLFwiYm9va21hcmtzLmNsZWFyU2VhcmNoSW5wdXRcIjpcIkNsZWFyIFNlYXJjaCBJbnB1dCBDTlwiLFwiYm9va21hcmtzLmNyZWF0ZUZvbGRlclwiOlwiQ3JlYXRlIE5ldyBGb2xkZXIgQ05cIixcImJvb2ttYXJrcy5leGl0Rm9sZGVyXCI6XCJFeGl0IEZvbGRlciBDTlwiLFwiYm9va21hcmtzLm5ld0ZvbGRlclwiOlwiTmV3IEZvbGRlciBDTlwiLFwiYm9va21hcmtzLm5hbWVkRm9sZGVyXCI6XCJ7e25hbWV9fSBGb2xkZXIgQ05cIixcImJvb2ttYXJrcy5ib29rbWFya1NldHRpbmdzXCI6XCJ7e25hbWV9fSBCb29rbWFyayBTZXR0aW5ncyBDTlwiLFwiYm9va21hcmtzLmZvbGRlclNldHRpbmdzXCI6XCJ7e25hbWV9fSBGb2xkZXIgU2V0dGluZ3MgQ05cIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFwiOlwiTm8gcmVzdWx0cyBmb3VuZCBDTlwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kU3VidGV4dFwiOlwiVGhlcmUgYXJlIG5vIGJvb2ttYXJrcyB0aGF0IG1hdGNoIHlvdXIgc2VhcmNoIENOXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1wiOlwiTm90aGluZyB0byBzaG93IHlldCBDTlwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dTdWJ0ZXh0XCI6XCJBZGQgYSBib29rbWFyayB0byB0aGlzIGZvbGRlciBDTlwiLFwiYm9va21hcmtzLnJlc3VsdHNGb3VuZEluXCI6XCJSZXN1bHRzIGZvdW5kIGluIHt7bmFtZX19IENOXCIsXCJib29rbWFya3MucmVzdWx0c0luT3RoZXJGb2xkZXJzXCI6XCJSZXN1bHRzIGZvdW5kIGluIG90aGVyIGZvbGRlcnMgQ05cIixcImJvb2ttYXJrcy5hbGxSZXN1bHRzRm91bmRJblwiOlwiQWxsIHJlc3VsdHMgZm91bmQgaW4gQ05cIixcImJvb2ttYXJrcy5lZGl0TmFtZVwiOlwiRWRpdCBOYW1lIENOXCIsXCJib29rbWFya3MubW92ZVwiOlwiTW92ZSBDTlwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUaXRsZVwiOlwiQm9va21hcmsgQWRkZWQgQ05cIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVG9Gb2xkZXJcIjpcIllvdXIgYm9va21hcmsgd2FzIGFkZGVkIHRvIFxcXFxcInt7Zm9sZGVyTmFtZX19XFxcXFwiIENOXCIsXCJib29rbWFya3MuYm9va21hcmtFZGl0ZWRUaXRsZVwiOlwiQm9va21hcmsgRWRpdGVkIENOXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCI6XCJTYXZlIFN1cGVydGFiIENOXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMuLi4gQ05cIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBDTlwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgU3VwZXJ0YWIgQ05cIixcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIjpcIk5ldyBUYWIgQ05cIixcImVudGVycHJpc2VTYXZlTWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBcyBDTlwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5yZW5hbWVTdXBlcnRhYlwiOlwiUmVuYW1lIENOXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnVuc2F2ZWRDaGFuZ2VzXCI6XCJZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMgaW4gdGhpcyBUYWIuIENOXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgQ05cIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VTdXBlcnRhYlwiOlwiQ2xvc2UgU3VwZXJ0YWIgQ05cIixcImVudGVycHJpc2VTYXZlTW9kYWwuc2F2ZVN1cGVydGFiQ291bnRcIjpcIlNhdmUge3tjb3VudH19IFN1cGVydGFicyBiZWZvcmUgY2xvc2luZz8gQ05cIixcImVudGVycHJpc2VNb2RhbC5kaXNjYXJkU3VwZXJ0YWJXYXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHRvIHRoaXMgU3VwZXJ0YWIgd2lsbCBiZSBsb3N0LiBDTlwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgdGhlIFxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYj8gQ05cIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYldhcm5pbmdcIjpcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBTdXBlcnRhYj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSBhbmQgaXMgcGVybWFuZW50LiBDTlwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJTYXZlZFwiOlwiU3VwZXJ0YWIgU2F2ZWQgQ05cIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gc2F2ZWQuIENOXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIjpcIlN1cGVydGFiIERlbGV0ZWQgQ05cIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlbkRlbGV0ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBkZWxldGVkLiBDTlwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlVGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFRhYiBDTlwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlU3VwZXJ0YWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgU3VwZXJ0YWIgQ05cIixcImVudGVycHJpc2VDb21tYW5kQmFyLnN3aXRjaFRvU3VwZXJ0YWJcIjpcIlN3aXRjaCB0byBTdXBlcnRhYiBDTlwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuZ29Ub1wiOlwiR28gdG8ge3t0eXBlfX0gQ05cIixcImVudGVycHJpc2VDb21tYW5kQmFyLnZpZXdNb3JlXCI6XCJWaWV3IE1vcmUgQ05cIixcImNvbnRleHRNZW51LnF1aXRFbnRlcnByaXNlQnJvd3NlclwiOlwiUXVpdCBDTlwifScpLEthPUpTT04ucGFyc2UoJ3tcImNvbnRleHRNZW51Lm5ld1dpbmRvd1wiOlwi5paw6KaW56qXXCIsXCJjb250ZXh0TWVudS5uZXdQYWdlXCI6XCLmlrDpoIHpnaJcIixcImNvbnRleHRNZW51LnJlc3RvcmVcIjpcIumChOWOn+WIsOS4iuasoeWEsuWtmOeahOiuiuabtFwiLFwiY29udGV4dE1lbnUuc3dpdGNoV29ya3NwYWNlXCI6XCLliIfmj5vlt6XkvZznqbrplpNcIixcImNvbnRleHRNZW51LmFwcGVhcmFuY2VcIjpcIuWkluingFwiLFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZVwiOlwi5YSy5a2Y5bel5L2c56m66ZaTXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlQXNcIjpcIuWwh+W3peS9nOepuumWk+WPpuWtmOeCui4uLlwiLFwiY29udGV4dE1lbnUucmVuYW1lV29ya3NwYWNlXCI6XCLph43mlrDlkb3lkI3lt6XkvZznqbrplpNcIixcImNvbnRleHRNZW51LmRlbGV0ZVdvcmtzcGFjZVwiOlwi5Yiq6Zmk5bel5L2c56m66ZaTXCIsXCJjb250ZXh0TWVudS5kb3dubG9hZHNcIjpcIuS4i+i8iVwiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VcIjpcIuWEsuWtmOmggemdolwiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VBc1wiOlwi5bCH6aCB6Z2i5Y+m5a2Y54K6Li4uXCIsXCJjb250ZXh0TWVudS5wcmludFwiOlwi5YiX5Y2wLi4uXCIsXCJjb250ZXh0TWVudS5wcmludFNjcmVlblwiOlwi5pO35Y+W55Wr6Z2iXCIsXCJjb250ZXh0TWVudS5jbG9zZVdpbmRvd1wiOlwi6Zec6ZaJ6KaW56qXXCIsXCJjb250ZXh0TWVudS5vcGVuU3RvcmVmcm9udFwiOlwi5omT6ZaLIFN0b3JlZnJvbnRcIixcImNvbnRleHRNZW51LnF1aXRQbGF0Zm9ybVwiOlwi6YCA5Ye65bmz5Y+wXCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCLmlrDoppblnJZcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3XCI6XCLkvb/nlKjpoJDoqK3ntrLpoIHngI/opr3lmajmiZPplovoppblnJZcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3c1wiOlwi5L2/55So6aCQ6Kit57ay6aCB54CP6Ka95Zmo5omT6ZaL6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5yZWxvYWRcIjpcIlJlbG9hZCBaSFwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld1wiOlwi6YeN5paw6LyJ5YWl6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3c1wiOlwi6YeN5paw6LyJ5YWl6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBaSFwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlVmlld1wiOlwi6KSH5a+r6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3c1wiOlwi6KSH5a+r6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3XCI6XCLlsIfoppblnJbmlrDlop7oh7PpoLvpgZNcIixcImNvbnRleHRNZW51LmFkZFZpZXdzXCI6XCLlsIfoppblnJbmlrDlop7oh7PpoLvpgZNcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdcIjpcIuW+numgu+mBk+S4reenu+mZpOimluWcllwiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld3NcIjpcIuW+numgu+mBk+S4reenu+mZpOimluWcllwiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3XCI6XCLpl5zplonoppblnJZcIixcImNvbnRleHRNZW51LmNsb3NlVmlld3NcIjpcIumXnOmWieimluWcllwiLFwiY29udGV4dE1lbnUuY2xvc2VUYWJcIjpcIkNsb3NlIFRhYiBaSFwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlUGFnZVwiOlwi6KSH5a+r6aCB6Z2iXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCI6XCLliJfljbBcIixcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRBbGxcIjpcIuWIl+WNsOWFqOmDqFwiLFwic2F2ZU1lbnUuc2F2ZVdvcmtzcGFjZUFzXCI6XCLlsIflt6XkvZznqbrplpPlj6blrZjngrpcIixcInNhdmVNZW51LnNhdmVQYWdlQXNcIjpcIumggemdouWPpuWtmOeCulwiLFwic2F2ZU1vZGFsLmVudGVyVmFsdWVcIjpcIlBsZWFzZSBlbnRlciBhIHZhbHVlIFpIXCIsXCJzYXZlTW9kYWwuYWxyZWFkeUV4aXN0c1wiOlwie3t0aXRsZX19IOW3sue2k+WtmOWcqOOAglwiLFwic2F2ZU1vZGFsLnBsZWFzZUVudGVyVmFsaWROYW1lXCI6XCLoq4vovLjlhaXkuIDlgIvmnInmlYjnmoTlkI3nqLFcIixcInNhdmVNb2RhbC5yZW5hbWVQYWdlXCI6XCLph43mlrDlkb3lkI3poIHpnaJcIixcInNhdmVNb2RhbC5jbG9zZVBhZ2VcIjpcIumXnOmWiemggemdolwiLFwic2F2ZU1vZGFsLmRpc2NhcmRDaGFuZ2VzXCI6XCLmjajmo4Torormm7RcIixcInNhdmVNb2RhbC5kaXNjYXJkQWxsXCI6XCLlhajpg6jmjajmo4RcIixcInNhdmVNb2RhbC5zYXZlQWxsXCI6XCLlhLLlrZjlhajpg6hcIixcInNhdmVNb2RhbC5zYXZlUGFnZXNDb3VudFwiOlwi6KaB5YWI5YSy5a2YICh7e2NvdW50fX0pIOWAi+mggemdouWGjemXnOmWieWXju+8n1wiLFwiZGVmYXVsdFBhZ2VUaXRsZVwiOlwiVW50aXRsZWQgUGFnZSBaSFwiLFwiZW50ZXJwcmlzZURlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFN1cGVydGFiIFpIXCIsXCJhZGROZXdQYWdlXCI6XCLmlrDlop7mlrDpoIHpnaJcIixcImFkZE5ld1RhYlwiOlwi5paw5aKe5paw57Si5byV5qiZ57GkXCIsXCJhZGROZXdWaWV3XCI6XCLmlrDoppblnJZcIixcInJlc3RvcmVNb2RhbFwiOlwi5oKo56K65a6a6KaB6YKE5Y6f5Yiw5LiK5qyh5YSy5a2Y55qE6K6K5pu05ZeO77yfXCIsXCJtb2RhbC5kaXNjYXJkV2FybmluZ1wiOlwi5Lu75L2V5pyq5YSy5a2Y55qE6K6K5pu06YO95bCH6KKr5o2o5qOEXCIsXCJtb2RhbC5kaXNjYXJkUGFnZVdhcm5pbmdcIjpcIuWcqOatpOmggemdouS7u+S9leacquWEsuWtmOeahOiuiuabtOmDveWwh+mBuuWkseOAglwiLFwibW9kYWwuc2F2ZUNoYW5nZXNQcm9tcHRcIjpcIuimgeWFiOWEsuWtmOiuiuabtOWGjemXnOmWieWXju+8n1wiLFwibW9kYWwucGFnZUNsb3NlXCI6XCLpoIHpnaLpl5zplolcIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsXCI6XCLmgqjnorrlrpropoHliIfmj5vliLAge3t3b3Jrc3BhY2V9fe+8n1wiLFwic3dpdGNoV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwi5Lu75L2V5pyq5YSy5a2Y55qE6K6K5pu06YO95bCH6KKr5o2o5qOEXCIsXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiOlwi5oKo56K65a6a6KaB5rC45LmF5Yiq6Zmk5q2k5bel5L2c56m66ZaT5ZeO77yfXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwi5YW35pyJ5ZCN56ixIHt7d29ya3NwYWNlfX0g55qE5bel5L2c56m66ZaT5bey57aT5a2Y5Zyo44CC5L2g6KaB5pu05o+b5a6D5ZeO77yfXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZy5ib2R5XCI6XCLnm7jlkIzlkI3nqLHnmoTlt6XkvZznqbrplpPlt7LntpPlrZjlnKjjgILmm7Tmj5vlroPlvozvvIzlsIfmnIPopobok4vnm67liY3lhaflrrnjgIJcIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC5yZXBsYWNlXCI6XCLmm7Tmj5tcIixcImNsb3NlUGxhdGZvcm1cIjpcIumXnOmWieW5s+WPsFwiLFwiY2xvc2VQbGF0Zm9ybS53b3Jrc3BhY2VcIjpcIumXnOmWiSB7e3dvcmtzcGFjZX19IOW5s+WPsFwiLFwiY2xvc2VQbGF0Zm9ybS53YXJuaW5nXCI6XCLpl5zplonlubPlj7DlvozvvIzlsIfpl5zplonmraPlnKjln7fooYznmoTku7vkvZXlt6XkvZznqbrplpPjgIFBUFAg5oiW5rWB56iL44CCXCIsXCJiYWNrXCI6XCLkuIrkuIDpoIFcIixcImZvcndhcmRcIjpcIuS4i+S4gOmggVwiLFwicmVsb2FkXCI6XCLph43mlrDovInlhaVcIixcImdyZWVuXCI6XCLntqBcIixcInB1cnBsZVwiOlwi57SrXCIsXCJvcmFuZ2VcIjpcIuapmFwiLFwicmVkXCI6XCLntIXoibJcIixcInBpbmtcIjpcIueyiee0hVwiLFwieWVsbG93XCI6XCLpu4NcIixcInRoZW1lLmxpZ2h0XCI6XCLmt7pcIixcInRoZW1lLmRhcmtcIjpcIua3sVwiLFwidGhlbWUuc3lzdGVtXCI6XCLoiIcgT1Mg6Kit5a6a5ZCM5q2lXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCLpmrHol4/ntKLlvJXmqJnnsaRcIixcInRvb2xiYXIuc2hvd1RhYnNcIjpcIumhr+ekuue0ouW8leaomeexpFwiLFwidG9vbGJhci5sb2NrXCI6XCLkuIrpjpZcIixcInRvb2xiYXIudW5sb2NrXCI6XCLop6PpjpZcIixcInRvb2xiYXIuY29sb3JMaW5raW5nXCI6XCLpoY/oibLpgKPntZBcIixcInRvb2xiYXIuY2hhbmdlTGF5b3V0XCI6XCLorormm7TniYjpnaJcIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcIuWEsuWtmOmBuOWWrlwiLFwidG9vbGJhci5tYXhpbWl6ZVdpbmRvd1wiOlwi5pyA5aSn5YyW6KaW56qXXCIsXCJ0b29sYmFyLnJlc3RvcmVXaW5kb3dcIjpcIumChOWOn+imlueql1wiLFwidG9vbGJhci5taW5pbWl6ZVdpbmRvd1wiOlwi5pyA5bCP5YyW6KaW56qXXCIsXCJjaGFuZ2VMYXlvdXQuZnVsbFdpZHRoXCI6XCLlhajonqLluZXlr6zluqZcIixcImNoYW5nZUxheW91dC5jb2x1bW5zXCI6XCLooYxcIixcImNoYW5nZUxheW91dC5Sb3dzXCI6XCLliJdcIixcImNoYW5nZUxheW91dC5HcmlkXCI6XCLntrLmoLxcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcIuW3peS9nOepuumWk+W3suWIh+aPm1wiLFwic3VjY2Vzc0luZGljYXRvci5oaWRkZW5cIjpcIue0ouW8leaomeexpOW3sumaseiXj1wiLFwic3VjY2Vzc0luZGljYXRvci5zaG93blwiOlwi57Si5byV5qiZ57Gk5bey6aGv56S6XCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxvY2tlZFwiOlwi6aCB6Z2i5bey5LiK6Y6WXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnVubG9ja2VkXCI6XCLpoIHpnaLlt7Lop6PpjpZcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRcIjpcIuW3peS9nOepuumWk+W3suWEsuWtmFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZEFzXCI6XCLlt6XkvZznqbrplpPlt7Llj6blrZjngroge3t3b3Jrc3BhY2V9fVwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VSZW5hbWVkXCI6XCLlt6XkvZznqbrplpPlt7Lph43mlrDlkb3lkI1cIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZVNhdmVkXCI6XCLpoIHpnaLlt7LlhLLlrZhcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIGhhcyBiZWVuIHNhdmVkLiBaSFwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlQ29weVNhdmVkXCI6XCLpoIHpnaLlt7Llj6blrZjngroge3t0aXRsZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCLpoIHpnaLlt7Lph43mlrDlkb3lkI1cIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwi6ISI57Wh576k57WE5bey5aWX55SoXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwie3tjb2xvck5hbWV9fSDohIjntaHnvqTntYTlt7LlpZfnlKhcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld1JlbW92ZWRcIjpcIuW+nuiEiOe1oee+pOe1hOS4reenu+mZpOeahOimluWcllwiLFwic3VjY2Vzc0luZGljYXRvci52aWV3c1JlbW92ZWRcIjpcIuW+nuiEiOe1oee+pOe1hOS4reenu+mZpOeahOimluWcllwiLFwic3VjY2Vzc0luZGljYXRvci5sYXlvdXRBcHBsaWVkXCI6XCJ7e2xheW91dE5hbWV9fSDniYjpnaLlt7LlpZfnlKhcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlRGVsZXRlZFwiOlwi5bel5L2c56m66ZaT5bey5Yiq6ZmkXCIsXCJlcnJvckluZGljYXRvci5wYWdlU2F2ZUZhaWxlZFwiOlwi6aCB6Z2i54Sh5rOV5YSy5a2YXCIsXCJlcnJvckluZGljYXRvci53b3Jrc3BhY2VTYXZlRmFpbGVkXCI6XCLlt6XkvZznqbrplpPnhKHms5XlhLLlrZhcIixcImVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlUGFnZVwiOlwi54Sh5rOV6KSH5a+r6aCB6Z2iXCIsXCJpbmZvSW5kaWNhdG9yLmNvbG9yTGlua0F0dGVtcHRcIjpcIuaIkeWAkeWYl+ippuWwjeatpOe0ouW8leaomeexpOmAsuihjOmhj+iJsumAo+e1kO+8jOS9hue2suermS/lhaflrrnmiYDmnInogIXlsJrmnKrllZ/nlKjoqbLlip/og71cIixcImdsb2JhbC5jYW5jZWxcIjpcIuWPlua2iFwiLFwiZ2xvYmFsLmNvbmZpcm1cIjpcIueiuuiqjVwiLFwiZ2xvYmFsLnNhdmVcIjpcIuWEsuWtmFwiLFwiZ2xvYmFsLmRlbGV0ZVwiOlwiRGVsZXRlIFpIXCIsXCJhcHBSZXN1bHRzLmhlYWRlclwiOlwiRmVhdHVyZWQgQ29udGVudCBaSFwiLFwicmVjZW50bHlDbG9zZWQuaGVhZGVyXCI6XCJSZWNlbnRseSBDbG9zZWQgWkhcIixcImxhbmRpbmdQYWdlLnN1YmhlYWRlclwiOlwiQXBwcyBhbmQgd2Vic2l0ZXMgc2VsZWN0ZWQgYnkgYW4gYWRtaW4gd2lsbCBzaG93IGhlcmUgWkhcIixcImFyaWEub3BlbkJyb3dzZXJcIjpcIumWi+WVn+eAj+imveWZqOmBuOWWrlwiLFwiYXJpYS5icm93c2VyVGFic1wiOlwi54CP6Ka95Zmo57Si5byV5qiZ57GkXCIsXCJhcmlhLnZpZXdUYWJcIjpcInt7dGl0bGV9fSDnmoToppblnJbntKLlvJXmqJnnsaRcIixcImFyaWEuY2xvc2VQYWdlXCI6XCLpl5zplokge3t0aXRsZX19IOeahOmggemdoue0ouW8leaomeexpOaMiemIlVwiLFwiYXJpYS5jbG9zZVRhYlwiOlwi6Zec6ZaJ57Si5byV5qiZ57GkIHt7dGl0bGV9fVwiLFwiYXJpYS50aXRsZVwiOlwi5qiZ6aGMXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCLkvb/nlKggRXNjIOmNtemXnOmWieiEiOe1oee+pOe1hOmBuOWPluWwjeipseahhlwiLFwiYXJpYS5jb2xvckxpbmtpbmdcIjpcIumhr+ekuuaIlumaseiXj+mhj+iJsumAo+e1kFwiLFwiYXJpYS5hcHBseUNvbG9yTGlua2luZ1wiOlwi6KuL6YG45Y+W6KaB5aWX55So6aGP6Imy6YCj57WQ55qE6KaW5ZyWXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3XCI6XCLnm67liY3oppblnJbliIbphY3ntaYge3tuYW1lfX0g6ISI57Wh576k57WEXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3c1wiOlwi55uu5YmN6KaW5ZyW5YiG6YWN57WmIHt7bmFtZX19IOiEiOe1oee+pOe1hFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3XCI6XCLlsIfllZ/nlKjoppblnJboqK3lrprngroge3tuYW1lfX0g6ISI57Wh576k57WEXCIsXCJhcmlhLnNldENvbG9yTGlua2luZ0FjdGl2ZVZpZXdzXCI6XCLlsIfllZ/nlKjoppblnJboqK3lrprngroge3tuYW1lfX0g6ISI57Wh576k57WEXCIsXCJhcmlhLmVzY2FwZUxheW91dERpYWxvZ1wiOlwi5L2/55SoIEVzYyDpjbXpl5zplonorormm7TniYjpnaLlsI3oqbHmoYZcIixcImdsb2JhbC5zdXBlcnRhYlwiOlwiU3VwZXJ0YWIgWkhcIixcImdsb2JhbC50YWJcIjpcIlRhYiBaSFwiLFwiYm9va21hcmtzLmVkaXRCb29rbWFya1wiOlwiRWRpdCBCb29rbWFyayBaSFwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRcIjpcIkJvb2ttYXJrIGFkZGVkIFpIXCIsXCJib29rbWFya3MuZG9uZVwiOlwiRG9uZSBaSFwiLFwiYm9va21hcmtzLnJlbW92ZVwiOlwiUmVtb3ZlIFpIXCIsXCJib29rbWFya3MuYm9va21hcmtzUGFuZWxcIjpcIkJvb2ttYXJrcyBQYW5lbCBaSFwiLFwiYm9va21hcmtzLmNsb3NlUGFuZWxcIjpcIkNsb3NlIEJvb2ttYXJrcyBQYW5lbCBaSFwiLFwiYm9va21hcmtzLmJvb2ttYXJrc1wiOlwiQm9va21hcmtzIFpIXCIsXCJib29rbWFya3MuYWxsQm9va21hcmtzXCI6XCJBbGwgQm9va21hcmtzIFpIXCIsXCJib29rbWFya3MuZmF2b3JpdGVzXCI6XCJGYXZvcml0ZXMgWkhcIixcImJvb2ttYXJrcy5zZWFyY2hCb29rbWFya3NcIjpcIlNlYXJjaCBCb29rbWFya3MgWkhcIixcImJvb2ttYXJrcy5jbGVhclNlYXJjaElucHV0XCI6XCJDbGVhciBTZWFyY2ggSW5wdXQgWkhcIixcImJvb2ttYXJrcy5jcmVhdGVGb2xkZXJcIjpcIkNyZWF0ZSBOZXcgRm9sZGVyIFpIXCIsXCJib29rbWFya3MuZXhpdEZvbGRlclwiOlwiRXhpdCBGb2xkZXIgWkhcIixcImJvb2ttYXJrcy5uZXdGb2xkZXJcIjpcIk5ldyBGb2xkZXIgWkhcIixcImJvb2ttYXJrcy5uYW1lZEZvbGRlclwiOlwie3tuYW1lfX0gRm9sZGVyIFpIXCIsXCJib29rbWFya3MuYm9va21hcmtTZXR0aW5nc1wiOlwie3tuYW1lfX0gQm9va21hcmsgU2V0dGluZ3MgWkhcIixcImJvb2ttYXJrcy5mb2xkZXJTZXR0aW5nc1wiOlwie3tuYW1lfX0gRm9sZGVyIFNldHRpbmdzIFpIXCIsXCJib29rbWFya3Mubm9SZXN1bHRzRm91bmRcIjpcIk5vIHJlc3VsdHMgZm91bmQgWkhcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFN1YnRleHRcIjpcIlRoZXJlIGFyZSBubyBib29rbWFya3MgdGhhdCBtYXRjaCB5b3VyIHNlYXJjaCBaSFwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dcIjpcIk5vdGhpbmcgdG8gc2hvdyB5ZXQgWkhcIixcImJvb2ttYXJrcy5ub3RoaW5nVG9TaG93U3VidGV4dFwiOlwiQWRkIGEgYm9va21hcmsgdG8gdGhpcyBmb2xkZXIgWkhcIixcImJvb2ttYXJrcy5yZXN1bHRzRm91bmRJblwiOlwiUmVzdWx0cyBmb3VuZCBpbiB7e25hbWV9fSBaSFwiLFwiYm9va21hcmtzLnJlc3VsdHNJbk90aGVyRm9sZGVyc1wiOlwiUmVzdWx0cyBmb3VuZCBpbiBvdGhlciBmb2xkZXJzIFpIXCIsXCJib29rbWFya3MuYWxsUmVzdWx0c0ZvdW5kSW5cIjpcIkFsbCByZXN1bHRzIGZvdW5kIGluIFpIXCIsXCJib29rbWFya3MuZWRpdE5hbWVcIjpcIkVkaXQgTmFtZSBaSFwiLFwiYm9va21hcmtzLm1vdmVcIjpcIk1vdmUgWkhcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVGl0bGVcIjpcIkJvb2ttYXJrIEFkZGVkIFpIXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFRvRm9sZGVyXCI6XCJZb3VyIGJvb2ttYXJrIHdhcyBhZGRlZCB0byBcXFxcXCJ7e2ZvbGRlck5hbWV9fVxcXFxcIiBaSFwiLFwiYm9va21hcmtzLmJvb2ttYXJrRWRpdGVkVGl0bGVcIjpcIkJvb2ttYXJrIEVkaXRlZCBaSFwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYlwiOlwiU2F2ZSBTdXBlcnRhYiBaSFwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYkFzXCI6XCJTYXZlIFN1cGVydGFiIEFzLi4uIFpIXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgWkhcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kZWxldGVTdXBlcnRhYlwiOlwiRGVsZXRlIFN1cGVydGFiIFpIXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUubmV3VGFiXCI6XCJOZXcgVGFiIFpIXCIsXCJlbnRlcnByaXNlU2F2ZU1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMgWkhcIixcImVudGVycHJpc2VTYXZlTW9kYWwucmVuYW1lU3VwZXJ0YWJcIjpcIlJlbmFtZSBaSFwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC51bnNhdmVkQ2hhbmdlc1wiOlwiWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzIGluIHRoaXMgVGFiLiBaSFwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVRhYlwiOlwiQ2xvc2UgVGFiIFpIXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlU3VwZXJ0YWJcIjpcIkNsb3NlIFN1cGVydGFiIFpIXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnNhdmVTdXBlcnRhYkNvdW50XCI6XCJTYXZlIHt7Y291bnR9fSBTdXBlcnRhYnMgYmVmb3JlIGNsb3Npbmc/IFpIXCIsXCJlbnRlcnByaXNlTW9kYWwuZGlzY2FyZFN1cGVydGFiV2FybmluZ1wiOlwiQW55IHVuc2F2ZWQgY2hhbmdlcyB0byB0aGlzIFN1cGVydGFiIHdpbGwgYmUgbG9zdC4gWkhcIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYlwiOlwiRGVsZXRlIHRoZSBcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWI/IFpIXCIsXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJXYXJuaW5nXCI6XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgU3VwZXJ0YWI/IFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUgYW5kIGlzIHBlcm1hbmVudC4gWkhcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiU2F2ZWRcIjpcIlN1cGVydGFiIFNhdmVkIFpIXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiIGhhcyBiZWVuIHNhdmVkLiBaSFwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJEZWxldGVkXCI6XCJTdXBlcnRhYiBEZWxldGVkIFpIXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5EZWxldGVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gZGVsZXRlZC4gWkhcIixcImVudGVycHJpc2VFcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVRhYlwiOlwiRmFpbGVkIHRvIGR1cGxpY2F0ZSBUYWIgWkhcIixcImVudGVycHJpc2VFcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVN1cGVydGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFN1cGVydGFiIFpIXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci5zd2l0Y2hUb1N1cGVydGFiXCI6XCJTd2l0Y2ggdG8gU3VwZXJ0YWIgWkhcIixcImVudGVycHJpc2VDb21tYW5kQmFyLmdvVG9cIjpcIkdvIHRvIHt7dHlwZX19IFpIXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci52aWV3TW9yZVwiOlwiVmlldyBNb3JlIFpIXCIsXCJjb250ZXh0TWVudS5xdWl0RW50ZXJwcmlzZUJyb3dzZXJcIjpcIlF1aXQgWkhcIn0nKSx6YT1KU09OLnBhcnNlKCd7XCJjb250ZXh0TWVudS5uZXdXaW5kb3dcIjpcIk5ldyBXaW5kb3dcIixcImNvbnRleHRNZW51Lm5ld1BhZ2VcIjpcIk5ldyBQYWdlXCIsXCJjb250ZXh0TWVudS5yZXN0b3JlXCI6XCJSZXN0b3JlIHRvIExhc3QgU2F2ZWQgQ2hhbmdlc1wiLFwiY29udGV4dE1lbnUuc3dpdGNoV29ya3NwYWNlXCI6XCJTd2l0Y2ggV29ya3NwYWNlXCIsXCJjb250ZXh0TWVudS5hcHBlYXJhbmNlXCI6XCJBcHBlYXJhbmNlXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlXCI6XCJTYXZlIFdvcmtzcGFjZVwiLFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZUFzXCI6XCJTYXZlIFdvcmtzcGFjZSBBcy4uLlwiLFwiY29udGV4dE1lbnUucmVuYW1lV29ya3NwYWNlXCI6XCJSZW5hbWUgV29ya3NwYWNlXCIsXCJjb250ZXh0TWVudS5kZWxldGVXb3Jrc3BhY2VcIjpcIkRlbGV0ZSBXb3Jrc3BhY2VcIixcImNvbnRleHRNZW51LmRvd25sb2Fkc1wiOlwiRG93bmxvYWRzXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiOlwiU2F2ZSBQYWdlXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZUFzXCI6XCJTYXZlIFBhZ2UgQXMuLi5cIixcImNvbnRleHRNZW51LnByaW50XCI6XCJQcmludC4uLlwiLFwiY29udGV4dE1lbnUucHJpbnRTY3JlZW5cIjpcIlByaW50IFNjcmVlblwiLFwiY29udGV4dE1lbnUuY2xvc2VXaW5kb3dcIjpcIkNsb3NlIFdpbmRvd1wiLFwiY29udGV4dE1lbnUub3BlblN0b3JlZnJvbnRcIjpcIk9wZW4gU3RvcmVmcm9udFwiLFwiY29udGV4dE1lbnUucXVpdFBsYXRmb3JtXCI6XCJRdWl0IHt7cGxhdGZvcm1MYWJlbH19XCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCJOZXcgVmlld1wiLFwiY29udGV4dE1lbnUub3BlblZpZXdcIjpcIk9wZW4gVmlldyB3aXRoIERlZmF1bHQgV2ViIEJyb3dzZXJcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3c1wiOlwiT3BlbiBWaWV3cyB3aXRoIERlZmF1bHQgV2ViIEJyb3dzZXJcIixcImNvbnRleHRNZW51LnJlbG9hZFwiOlwiUmVsb2FkXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3XCI6XCJSZWxvYWQgVmlld1wiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld3NcIjpcIlJlbG9hZCBWaWV3c1wiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGVcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdcIjpcIkR1cGxpY2F0ZSBWaWV3XCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3c1wiOlwiRHVwbGljYXRlIFZpZXdzXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3XCI6XCJBZGQgVmlldyB0byBDaGFubmVsXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3c1wiOlwiQWRkIFZpZXdzIHRvIENoYW5uZWxcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdcIjpcIlJlbW92ZSBWaWV3IGZyb20gQ2hhbm5lbFwiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld3NcIjpcIlJlbW92ZSBWaWV3cyBmcm9tIENoYW5uZWxcIixcImNvbnRleHRNZW51LmNsb3NlVmlld1wiOlwiQ2xvc2UgVmlld1wiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3c1wiOlwiQ2xvc2UgVmlld3NcIixcImNvbnRleHRNZW51LmNsb3NlVGFiXCI6XCJDbG9zZSBUYWJcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIjpcIkR1cGxpY2F0ZSBQYWdlXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCI6XCJQcmludFwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludEFsbFwiOlwiUHJpbnQgQWxsXCIsXCJzYXZlTWVudS5zYXZlV29ya3NwYWNlQXNcIjpcIlNhdmUgV29ya3NwYWNlIEFzXCIsXCJzYXZlTWVudS5zYXZlUGFnZUFzXCI6XCJTYXZlIFBhZ2UgQXNcIixcInNhdmVNb2RhbC5lbnRlclZhbHVlXCI6XCJQbGVhc2UgZW50ZXIgYSB2YWx1ZVwiLFwic2F2ZU1vZGFsLmFscmVhZHlFeGlzdHNcIjpcInt7dGl0bGV9fSBhbHJlYWR5IGV4aXN0cy5cIixcInNhdmVNb2RhbC5wbGVhc2VFbnRlclZhbGlkTmFtZVwiOlwiUGxlYXNlIGVudGVyIGEgdmFsaWQgbmFtZVwiLFwic2F2ZU1vZGFsLnJlbmFtZVBhZ2VcIjpcIlJlbmFtZSBQYWdlXCIsXCJzYXZlTW9kYWwuY2xvc2VQYWdlXCI6XCJDbG9zZSBQYWdlXCIsXCJzYXZlTW9kYWwuZGlzY2FyZENoYW5nZXNcIjpcIkRpc2NhcmQgQ2hhbmdlc1wiLFwic2F2ZU1vZGFsLmRpc2NhcmRBbGxcIjpcIkRpc2NhcmQgQWxsXCIsXCJzYXZlTW9kYWwuc2F2ZUFsbFwiOlwiU2F2ZSBBbGxcIixcInNhdmVNb2RhbC5zYXZlUGFnZXNDb3VudFwiOlwiU2F2ZSAoe3tjb3VudH19KSBwYWdlcyBiZWZvcmUgY2xvc2luZz9cIixcImRlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFBhZ2VcIixcImVudGVycHJpc2VEZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBTdXBlcnRhYlwiLFwiYWRkTmV3UGFnZVwiOlwiTmV3IFBhZ2VcIixcImFkZE5ld1RhYlwiOlwiQWRkIE5ldyBUYWJcIixcImFkZE5ld1ZpZXdcIjpcIk5ldyBWaWV3XCIsXCJyZXN0b3JlTW9kYWxcIjpcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZXN0b3JlIHRvIGxhc3Qgc2F2ZWQgY2hhbmdlcz9cIixcIm1vZGFsLmRpc2NhcmRXYXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgZGlzY2FyZGVkXCIsXCJtb2RhbC5kaXNjYXJkUGFnZVdhcm5pbmdcIjpcIkFueSB1bnNhdmVkIGNoYW5nZXMgdG8gdGhpcyBwYWdlIHdpbGwgYmUgbG9zdC5cIixcIm1vZGFsLnNhdmVDaGFuZ2VzUHJvbXB0XCI6XCJTYXZlIGNoYW5nZXMgYmVmb3JlIGNsb3Npbmc/XCIsXCJtb2RhbC5wYWdlQ2xvc2VcIjpcIlBhZ2UgQ2xvc2VcIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsXCI6XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc3dpdGNoIHRvIHt7d29ya3NwYWNlfX0/XCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgZGlzY2FyZGVkXCIsXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiOlwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHBlcm1hbmVudGx5IGRlbGV0ZSB0aGlzIHdvcmtzcGFjZT9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCJBIFdvcmtzcGFjZSB3aXRoIHRoZSBuYW1lIHt7d29ya3NwYWNlfX0gYWxyZWFkeSBleGlzdHMuIERvIHlvdSB3YW50IHRvIHJlcGxhY2UgaXQ/XCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZy5ib2R5XCI6XCJBIHdvcmtzcGFjZSB3aXRoIHRoZSBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHMuIFJlcGxhY2luZyBpdCB3aWxsIG92ZXJ3cml0ZSBpdHMgY3VycmVudCBjb250ZW50cy5cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC5yZXBsYWNlXCI6XCJSZXBsYWNlXCIsXCJjbG9zZVBsYXRmb3JtXCI6XCJDbG9zZSB0aGUgcGxhdGZvcm1cIixcImNsb3NlUGxhdGZvcm0ud29ya3NwYWNlXCI6XCJDbG9zZSB0aGUge3t3b3Jrc3BhY2V9fSBQbGF0Zm9ybVwiLFwiY2xvc2VQbGF0Zm9ybS53YXJuaW5nXCI6XCJDbG9zaW5nIGEgcGxhdGZvcm0gd2lsbCBjbG9zZSBhbnkgd29ya3NwYWNlcywgYXBwcyBvciBhbnkgcHJvY2Vzc2VzIHRoYXQgYXJlIHJ1bm5pbmcuXCIsXCJiYWNrXCI6XCJCYWNrXCIsXCJmb3J3YXJkXCI6XCJGb3J3YXJkXCIsXCJyZWxvYWRcIjpcIlJlbG9hZFwiLFwiZ3JlZW5cIjpcIkdyZWVuXCIsXCJwdXJwbGVcIjpcIlB1cnBsZVwiLFwib3JhbmdlXCI6XCJPcmFuZ2VcIixcInJlZFwiOlwiUmVkXCIsXCJwaW5rXCI6XCJQaW5rXCIsXCJ5ZWxsb3dcIjpcIlllbGxvd1wiLFwidGhlbWUubGlnaHRcIjpcIkxpZ2h0XCIsXCJ0aGVtZS5kYXJrXCI6XCJEYXJrXCIsXCJ0aGVtZS5zeXN0ZW1cIjpcIlN5bmMgd2l0aCBPUyBzZXR0aW5nXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCJIaWRlIFRhYnNcIixcInRvb2xiYXIuc2hvd1RhYnNcIjpcIlNob3cgVGFic1wiLFwidG9vbGJhci5sb2NrXCI6XCJMb2NrXCIsXCJ0b29sYmFyLnVubG9ja1wiOlwiVW5sb2NrXCIsXCJ0b29sYmFyLmNvbG9yTGlua2luZ1wiOlwiQ29sb3IgTGlua2luZ1wiLFwidG9vbGJhci5jaGFuZ2VMYXlvdXRcIjpcIkNoYW5nZSBMYXlvdXRcIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcIlNhdmUgTWVudVwiLFwidG9vbGJhci5tYXhpbWl6ZVdpbmRvd1wiOlwiTWF4aW1pemUgV2luZG93XCIsXCJ0b29sYmFyLnJlc3RvcmVXaW5kb3dcIjpcIlJlc3RvcmUgV2luZG93XCIsXCJ0b29sYmFyLm1pbmltaXplV2luZG93XCI6XCJNaW5pbWl6ZSBXaW5kb3dcIixcImNoYW5nZUxheW91dC5mdWxsV2lkdGhcIjpcIkZ1bGwgV2lkdGhcIixcImNoYW5nZUxheW91dC5jb2x1bW5zXCI6XCJDb2x1bW5zXCIsXCJjaGFuZ2VMYXlvdXQuUm93c1wiOlwiUm93c1wiLFwiY2hhbmdlTGF5b3V0LkdyaWRcIjpcIkdyaWRcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcIldvcmtzcGFjZSBTd2l0Y2hlZFwiLFwic3VjY2Vzc0luZGljYXRvci5oaWRkZW5cIjpcIlRhYnMgYXJlIEhpZGRlblwiLFwic3VjY2Vzc0luZGljYXRvci5zaG93blwiOlwiVGFicyBhcmUgU2hvd25cIixcInN1Y2Nlc3NJbmRpY2F0b3IubG9ja2VkXCI6XCJQYWdlIGlzIExvY2tlZFwiLFwic3VjY2Vzc0luZGljYXRvci51bmxvY2tlZFwiOlwiUGFnZSBpcyBVbmxvY2tlZFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZFwiOlwiV29ya3NwYWNlIHNhdmVkXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVNhdmVkQXNcIjpcIldvcmtzcGFjZSBzYXZlZCBhcyB7e3dvcmtzcGFjZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVJlbmFtZWRcIjpcIldvcmtzcGFjZSByZW5hbWVkXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VTYXZlZFwiOlwiUGFnZSBTYXZlZFwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgaGFzIGJlZW4gc2F2ZWQuXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VDb3B5U2F2ZWRcIjpcIlBhZ2Ugc2F2ZWQgYXMge3t0aXRsZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCJQYWdlIHJlbmFtZWRcIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwiQ29udGV4dCBncm91cCBhcHBsaWVkXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwie3tjb2xvck5hbWV9fSBjb250ZXh0IGdyb3VwIGFwcGxpZWRcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld1JlbW92ZWRcIjpcIlZpZXcgcmVtb3ZlZCBmcm9tIGNvbnRleHQgZ3JvdXBcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld3NSZW1vdmVkXCI6XCJWaWV3cyByZW1vdmVkIGZyb20gY29udGV4dCBncm91cFwiLFwic3VjY2Vzc0luZGljYXRvci5sYXlvdXRBcHBsaWVkXCI6XCJ7e2xheW91dE5hbWV9fSBsYXlvdXQgYXBwbGllZFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VEZWxldGVkXCI6XCJXb3Jrc3BhY2UgZGVsZXRlZFwiLFwiZXJyb3JJbmRpY2F0b3IucGFnZVNhdmVGYWlsZWRcIjpcIlBhZ2UgZmFpbGVkIHRvIHNhdmVcIixcImVycm9ySW5kaWNhdG9yLndvcmtzcGFjZVNhdmVGYWlsZWRcIjpcIldvcmtzcGFjZSBmYWlsZWQgdG8gc2F2ZVwiLFwiZXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVQYWdlXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFBhZ2VcIixcImluZm9JbmRpY2F0b3IuY29sb3JMaW5rQXR0ZW1wdFwiOlwiV2UgYXR0ZW1wdGVkIHRvIGNvbG9yIGxpbmsgdGhpcyB0YWIsIGJ1dCB0aGUgc2l0ZS9jb250ZW50IG93bmVyIGhhcyBub3QgZW5hYmxlZCBpdCB5ZXRcIixcImdsb2JhbC5jYW5jZWxcIjpcIkNhbmNlbFwiLFwiZ2xvYmFsLmNvbmZpcm1cIjpcIkNvbmZpcm1cIixcImdsb2JhbC5zYXZlXCI6XCJTYXZlXCIsXCJnbG9iYWwuZGVsZXRlXCI6XCJEZWxldGVcIixcImFwcFJlc3VsdHMuaGVhZGVyXCI6XCJGZWF0dXJlZCBDb250ZW50XCIsXCJyZWNlbnRseUNsb3NlZC5oZWFkZXJcIjpcIlJlY2VudGx5IENsb3NlZFwiLFwibGFuZGluZ1BhZ2Uuc3ViaGVhZGVyXCI6XCJBcHBzIGFuZCB3ZWJzaXRlcyBzZWxlY3RlZCBieSBhbiBhZG1pbiB3aWxsIHNob3cgaGVyZVwiLFwiYXJpYS5vcGVuQnJvd3NlclwiOlwiT3BlbiBCcm93c2VyIE1lbnVcIixcImFyaWEuYnJvd3NlclRhYnNcIjpcIkJyb3dzZXIgVGFic1wiLFwiYXJpYS52aWV3VGFiXCI6XCJWaWV3IFRhYiBmb3Ige3t0aXRsZX19XCIsXCJhcmlhLmNsb3NlUGFnZVwiOlwiQ2xvc2UgUGFnZSBUYWIgQnV0dG9uIGZvciB7e3RpdGxlfX1cIixcImFyaWEuY2xvc2VUYWJcIjpcIkNsb3NlIFRhYiB7e3RpdGxlfX1cIixcImFyaWEudGl0bGVcIjpcIlRpdGxlXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCJVc2UgZXNjYXBlIHRvIGNsb3NlIGNvbnRleHQgZ3JvdXAgc2VsZWN0aW9uIGRpYWxvZ1wiLFwiYXJpYS5jb2xvckxpbmtpbmdcIjpcIlNob3cgb3IgaGlkZSBjb2xvciBsaW5raW5nXCIsXCJhcmlhLmFwcGx5Q29sb3JMaW5raW5nXCI6XCJQbGVhc2Ugc2VsZWN0IGEgdmlldyB0byBhcHBseSBjb2xvciBsaW5raW5nXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3XCI6XCJDdXJyZW50IHZpZXcgYXNzaWduZWQgdG8ge3tuYW1lfX0gY29udGV4dCBncm91cFwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld3NcIjpcIkN1cnJlbnQgdmlld3MgYXNzaWduZWQgdG8ge3tuYW1lfX0gY29udGV4dCBncm91cFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3XCI6XCJTZXQgYWN0aXZlIHZpZXcgdG8ge3tuYW1lfX0gY29udGV4dCBncm91cFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3c1wiOlwiU2V0IGFjdGl2ZSB2aWV3cyB0byB7e25hbWV9fSBjb250ZXh0IGdyb3VwXCIsXCJhcmlhLmVzY2FwZUxheW91dERpYWxvZ1wiOlwiVXNlIGVzY2FwZSB0byBjbG9zZSBjaGFuZ2UgbGF5b3V0IGRpYWxvZ1wiLFwiZ2xvYmFsLnN1cGVydGFiXCI6XCJTdXBlcnRhYlwiLFwiZ2xvYmFsLnRhYlwiOlwiVGFiXCIsXCJib29rbWFya3MuZWRpdEJvb2ttYXJrXCI6XCJFZGl0IEJvb2ttYXJrXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFwiOlwiQm9va21hcmsgYWRkZWRcIixcImJvb2ttYXJrcy5kb25lXCI6XCJEb25lXCIsXCJib29rbWFya3MucmVtb3ZlXCI6XCJSZW1vdmVcIixcImJvb2ttYXJrcy5ib29rbWFya3NQYW5lbFwiOlwiQm9va21hcmtzIFBhbmVsXCIsXCJib29rbWFya3MuY2xvc2VQYW5lbFwiOlwiQ2xvc2UgQm9va21hcmtzIFBhbmVsXCIsXCJib29rbWFya3MuYm9va21hcmtzXCI6XCJCb29rbWFya3NcIixcImJvb2ttYXJrcy5hbGxCb29rbWFya3NcIjpcIkFsbCBCb29rbWFya3NcIixcImJvb2ttYXJrcy5mYXZvcml0ZXNcIjpcIkZhdm9yaXRlc1wiLFwiYm9va21hcmtzLnNlYXJjaEJvb2ttYXJrc1wiOlwiU2VhcmNoIEJvb2ttYXJrc1wiLFwiYm9va21hcmtzLmNsZWFyU2VhcmNoSW5wdXRcIjpcIkNsZWFyIFNlYXJjaCBJbnB1dFwiLFwiYm9va21hcmtzLmNyZWF0ZUZvbGRlclwiOlwiQ3JlYXRlIE5ldyBGb2xkZXJcIixcImJvb2ttYXJrcy5leGl0Rm9sZGVyXCI6XCJFeGl0IEZvbGRlclwiLFwiYm9va21hcmtzLm5ld0ZvbGRlclwiOlwiTmV3IEZvbGRlclwiLFwiYm9va21hcmtzLm5hbWVkRm9sZGVyXCI6XCJ7e25hbWV9fSBGb2xkZXJcIixcImJvb2ttYXJrcy5ib29rbWFya1NldHRpbmdzXCI6XCJ7e25hbWV9fSBCb29rbWFyayBTZXR0aW5nc1wiLFwiYm9va21hcmtzLmZvbGRlclNldHRpbmdzXCI6XCJ7e25hbWV9fSBGb2xkZXIgU2V0dGluZ3NcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFwiOlwiTm8gcmVzdWx0cyBmb3VuZFwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kU3VidGV4dFwiOlwiVGhlcmUgYXJlIG5vIGJvb2ttYXJrcyB0aGF0IG1hdGNoIHlvdXIgc2VhcmNoXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1wiOlwiTm90aGluZyB0byBzaG93IHlldFwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dTdWJ0ZXh0XCI6XCJBZGQgYSBib29rbWFyayB0byB0aGlzIGZvbGRlclwiLFwiYm9va21hcmtzLnJlc3VsdHNGb3VuZEluXCI6XCJSZXN1bHRzIGZvdW5kIGluIHt7bmFtZX19XCIsXCJib29rbWFya3MucmVzdWx0c0luT3RoZXJGb2xkZXJzXCI6XCJSZXN1bHRzIGZvdW5kIGluIG90aGVyIGZvbGRlcnNcIixcImJvb2ttYXJrcy5hbGxSZXN1bHRzRm91bmRJblwiOlwiQWxsIHJlc3VsdHMgZm91bmQgaW5cIixcImJvb2ttYXJrcy5lZGl0TmFtZVwiOlwiRWRpdCBOYW1lXCIsXCJib29rbWFya3MubW92ZVwiOlwiTW92ZVwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUaXRsZVwiOlwiQm9va21hcmsgQWRkZWRcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVG9Gb2xkZXJcIjpcIllvdXIgYm9va21hcmsgd2FzIGFkZGVkIHRvIFxcXFxcInt7Zm9sZGVyTmFtZX19XFxcXFwiXCIsXCJib29rbWFya3MuYm9va21hcmtFZGl0ZWRUaXRsZVwiOlwiQm9va21hcmsgRWRpdGVkXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCI6XCJTYXZlIFN1cGVydGFiXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMuLi5cIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZVwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgU3VwZXJ0YWJcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIjpcIk5ldyBUYWJcIixcImVudGVycHJpc2VTYXZlTWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBc1wiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5yZW5hbWVTdXBlcnRhYlwiOlwiUmVuYW1lXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnVuc2F2ZWRDaGFuZ2VzXCI6XCJZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMgaW4gdGhpcyBUYWIuXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlVGFiXCI6XCJDbG9zZSBUYWJcIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VTdXBlcnRhYlwiOlwiQ2xvc2UgU3VwZXJ0YWJcIixcImVudGVycHJpc2VTYXZlTW9kYWwuc2F2ZVN1cGVydGFiQ291bnRcIjpcIlNhdmUge3tjb3VudH19IFN1cGVydGFicyBiZWZvcmUgY2xvc2luZz9cIixcImVudGVycHJpc2VNb2RhbC5kaXNjYXJkU3VwZXJ0YWJXYXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHRvIHRoaXMgU3VwZXJ0YWIgd2lsbCBiZSBsb3N0LlwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgdGhlIFxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYj9cIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYldhcm5pbmdcIjpcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBTdXBlcnRhYj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSBhbmQgaXMgcGVybWFuZW50LlwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJTYXZlZFwiOlwiU3VwZXJ0YWIgU2F2ZWRcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gc2F2ZWQuXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIjpcIlN1cGVydGFiIERlbGV0ZWRcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlbkRlbGV0ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBkZWxldGVkLlwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlVGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFRhYlwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlU3VwZXJ0YWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgU3VwZXJ0YWJcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnN3aXRjaFRvU3VwZXJ0YWJcIjpcIlN3aXRjaCB0byBTdXBlcnRhYlwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuZ29Ub1wiOlwiR28gdG8ge3t0eXBlfX1cIixcImVudGVycHJpc2VDb21tYW5kQmFyLnZpZXdNb3JlXCI6XCJWaWV3IE1vcmVcIixcImNvbnRleHRNZW51LnF1aXRFbnRlcnByaXNlQnJvd3NlclwiOlwiUXVpdFwiLFwiZG9jay5yZW1vdmVGYXZvcml0ZVwiOlwiUmVtb3ZlXCJ9JyksSmE9SlNPTi5wYXJzZSgne1wiY29udGV4dE1lbnUubmV3V2luZG93XCI6XCJOZXVlcyBGZW5zdGVyXCIsXCJjb250ZXh0TWVudS5uZXdQYWdlXCI6XCJOZXVlIFNlaXRlXCIsXCJjb250ZXh0TWVudS5yZXN0b3JlXCI6XCJXaWVkZXJoZXJzdGVsbGVuIGRlciB6dWxldHp0IGdlc3BlaWNoZXJ0ZW4gw4RuZGVydW5nZW5cIixcImNvbnRleHRNZW51LnN3aXRjaFdvcmtzcGFjZVwiOlwiV29ya3NwYWNlIHdlY2hzZWxuXCIsXCJjb250ZXh0TWVudS5hcHBlYXJhbmNlXCI6XCJFcnNjaGVpbnVuZ3NiaWxkXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlXCI6XCJXb3Jrc3BhY2Ugc3BlaWNoZXJuXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlQXNcIjpcIldvcmtzcGFjZSBzcGVpY2hlcm4gdW50ZXIuLi5cIixcImNvbnRleHRNZW51LnJlbmFtZVdvcmtzcGFjZVwiOlwiV29ya3NwYWNlIHVtYmVuZW5uZW5cIixcImNvbnRleHRNZW51LmRlbGV0ZVdvcmtzcGFjZVwiOlwiV29ya3NwYWNlIGzDtnNjaGVuXCIsXCJjb250ZXh0TWVudS5kb3dubG9hZHNcIjpcIkRvd25sb2Fkc1wiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VcIjpcIlNlaXRlIHNwZWljaGVyblwiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VBc1wiOlwiU2VpdGUgc3BlaWNoZXJuIHVudGVyLi4uXCIsXCJjb250ZXh0TWVudS5wcmludFwiOlwiRHJ1Y2tlbi4uLlwiLFwiY29udGV4dE1lbnUucHJpbnRTY3JlZW5cIjpcIkJpbGRzY2hpcm1hbnNpY2h0IGRydWNrZW5cIixcImNvbnRleHRNZW51LmNsb3NlV2luZG93XCI6XCJGZW5zdGVyIHNjaGxpZcOfZW5cIixcImNvbnRleHRNZW51Lm9wZW5TdG9yZWZyb250XCI6XCJTY2hhdWZlbnN0ZXIgw7ZmZm5lblwiLFwiY29udGV4dE1lbnUucXVpdFBsYXRmb3JtXCI6XCJQbGF0dGZvcm0gdmVybGFzc2VuXCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCJOZXVlIEFuc2ljaHRcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3XCI6XCJBbnNpY2h0IG1pdCBTdGFuZGFyZC1XZWJicm93c2VyIMO2ZmZuZW5cIixcImNvbnRleHRNZW51Lm9wZW5WaWV3c1wiOlwiQW5zaWNodGVuIG1pdCBTdGFuZGFyZC1XZWJicm93c2VyIMO2ZmZuZW5cIixcImNvbnRleHRNZW51LnJlbG9hZFwiOlwiUmVsb2FkIERFXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3XCI6XCJBbnNpY2h0IG5ldSBsYWRlblwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld3NcIjpcIkFuc2ljaHRlbiBuZXUgbGFkZW5cIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVwiOlwiRHVwbGljYXRlIERFXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3XCI6XCJBbnNpY2h0IGR1cGxpemllcmVuXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3c1wiOlwiQW5zaWNodGVuIGR1cGxpemllcmVuXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3XCI6XCJBbnNpY2h0IHp1bSBDaGFubmVsIGhpbnp1ZsO8Z2VuXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3c1wiOlwiQW5zaWNodGVuIHp1bSBDaGFubmVsIGhpbnp1ZsO8Z2VuXCIsXCJjb250ZXh0TWVudS5yZW1vdmVWaWV3XCI6XCJBbnNpY2h0IGF1cyBkZW0gQ2hhbm5lbCBlbnRmZXJuZW5cIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdzXCI6XCJBbnNpY2h0ZW4gYXVzIGRlbSBDaGFubmVsIGVudGZlcm5lblwiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3XCI6XCJBbnNpY2h0IHNjaGxpZcOfZW5cIixcImNvbnRleHRNZW51LmNsb3NlVmlld3NcIjpcIkFuc2ljaHRlbiBzY2hsaWXDn2VuXCIsXCJjb250ZXh0TWVudS5jbG9zZVRhYlwiOlwiQ2xvc2UgVGFiIERFXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVQYWdlXCI6XCJTZWl0ZSBkdXBsaXppZXJlblwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludFwiOlwiRHJ1Y2tlblwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludEFsbFwiOlwiQWxsZSBkcnVja2VuXCIsXCJzYXZlTWVudS5zYXZlV29ya3NwYWNlQXNcIjpcIldvcmtzcGFjZSBzcGVpY2hlcm4gdW50ZXJcIixcInNhdmVNZW51LnNhdmVQYWdlQXNcIjpcIlNlaXRlIHNwZWljaGVybiB1bnRlclwiLFwic2F2ZU1vZGFsLmVudGVyVmFsdWVcIjpcIlBsZWFzZSBlbnRlciBhIHZhbHVlIERFXCIsXCJzYXZlTW9kYWwuYWxyZWFkeUV4aXN0c1wiOlwie3t0aXRsZX19IGV4aXN0aWVydCBiZXJlaXRzLlwiLFwic2F2ZU1vZGFsLnBsZWFzZUVudGVyVmFsaWROYW1lXCI6XCJCaXR0ZSBnZWJlbiBTaWUgZWluZW4gZ8O8bHRpZ2VuIE5hbWVuIGVpblwiLFwic2F2ZU1vZGFsLnJlbmFtZVBhZ2VcIjpcIlNlaXRlIHVtYmVuZW5uZW5cIixcInNhdmVNb2RhbC5jbG9zZVBhZ2VcIjpcIlNlaXRlIHNjaGxpZcOfZW5cIixcInNhdmVNb2RhbC5kaXNjYXJkQ2hhbmdlc1wiOlwiw4RuZGVydW5nZW4gdmVyd2VyZmVuXCIsXCJzYXZlTW9kYWwuZGlzY2FyZEFsbFwiOlwiQWxsZSB2ZXJ3ZXJmZW5cIixcInNhdmVNb2RhbC5zYXZlQWxsXCI6XCJBbGxlIHNwZWljaGVyblwiLFwic2F2ZU1vZGFsLnNhdmVQYWdlc0NvdW50XCI6XCIoe3tjb3VudH19KSBTZWl0ZW4gdm9yIGRlbSBTY2hsaWXDn2VuIHNwZWljaGVybj9cIixcImRlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFBhZ2UgREVcIixcImVudGVycHJpc2VEZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBTdXBlcnRhYiBERVwiLFwiYWRkTmV3UGFnZVwiOlwiTmV1ZSBTZWl0ZSBoaW56dWbDvGdlblwiLFwiYWRkTmV3VGFiXCI6XCJOZXVlbiBUYWIgaGluenVmw7xnZW5cIixcImFkZE5ld1ZpZXdcIjpcIk5ldWUgQW5zaWNodFwiLFwicmVzdG9yZU1vZGFsXCI6XCJTaW5kIFNpZSBzaWNoZXIsIGRhc3MgU2llIGRpZSB6dWxldHp0IGdlc3BlaWNoZXJ0ZW4gw4RuZGVydW5nZW4gd2llZGVyaGVyc3RlbGxlbiB3b2xsZW4/XCIsXCJtb2RhbC5kaXNjYXJkV2FybmluZ1wiOlwiQWxsZSBuaWNodCBnZXNwZWljaGVydGVuIMOEbmRlcnVuZ2VuIHdlcmRlbiB2ZXJ3b3JmZW5cIixcIm1vZGFsLmRpc2NhcmRQYWdlV2FybmluZ1wiOlwiQWxsZSBuaWNodCBnZXNwZWljaGVydGVuIMOEbmRlcnVuZ2VuIGF1ZiBkaWVzZXIgU2VpdGUgZ2VoZW4gdmVybG9yZW4uXCIsXCJtb2RhbC5zYXZlQ2hhbmdlc1Byb21wdFwiOlwiw4RuZGVydW5nZW4gdm9yIGRlbSBTY2hsaWXDn2VuIHNwZWljaGVybj9cIixcIm1vZGFsLnBhZ2VDbG9zZVwiOlwiU2VpdGUgc2NobGllw59lblwiLFwic3dpdGNoV29ya3NwYWNlTW9kYWxcIjpcIlNpbmQgU2llIHNpY2hlciwgZGFzcyBTaWUgenUge3t3b3Jrc3BhY2V9fXdlY2hzZWxuIHdvbGxlbj9cIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsLndhcm5pbmdcIjpcIkFsbGUgbmljaHQgZ2VzcGVpY2hlcnRlbiDDhG5kZXJ1bmdlbiB3ZXJkZW4gdmVyd29yZmVuXCIsXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiOlwiU2luZCBTaWUgc2ljaGVyLCBkYXNzIFNpZSBkaWVzZW4gV29ya3NwYWNlIGRhdWVyaGFmdCBsw7ZzY2hlbiB3b2xsZW4/XCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwiRWluIFdvcmtzcGFjZSBtaXQgZGVtIE5hbWVuIHt7d29ya3NwYWNlfX0gZXhpc3RpZXJ0IGJlcmVpdHMuIE3DtmNodGVuIFNpZSBpaG4gZXJzZXR6ZW4/XCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZy5ib2R5XCI6XCJFaW4gV29ya3NwYWNlIG1pdCBkZW1zZWxiZW4gTmFtZW4gZXhpc3RpZXJ0IGJlcmVpdHMuIFdlbm4gU2llIGlobiBlcnNldHplbiwgd2lyZCBkZXIgYWt0dWVsbGUgSW5oYWx0IMO8YmVyc2NocmllYmVuLlwiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLnJlcGxhY2VcIjpcIkVyc2V0emVuXCIsXCJjbG9zZVBsYXRmb3JtXCI6XCJQbGF0dGZvcm0gc2NobGllw59lblwiLFwiY2xvc2VQbGF0Zm9ybS53b3Jrc3BhY2VcIjpcIkRpZSB7e3dvcmtzcGFjZX19IFBsYXR0Zm9ybSBzY2hsaWXDn2VuXCIsXCJjbG9zZVBsYXRmb3JtLndhcm5pbmdcIjpcIldlbm4gU2llIGVpbmUgUGxhdHRmb3JtIHNjaGxpZcOfZW4sIHdlcmRlbiBhbGxlIFdvcmtzcGFjZXMsIEFwcHMgdW5kIGxhdWZlbmRlbiBQcm96ZXNzZSBiZWVuZGV0LlwiLFwiYmFja1wiOlwiWnVyw7xja1wiLFwiZm9yd2FyZFwiOlwiV2VpdGVyXCIsXCJyZWxvYWRcIjpcIk5ldSBsYWRlblwiLFwiZ3JlZW5cIjpcIkdyw7xuXCIsXCJwdXJwbGVcIjpcIkxpbGFcIixcIm9yYW5nZVwiOlwiT3JhbmdlXCIsXCJyZWRcIjpcIlJvdFwiLFwicGlua1wiOlwiUGlua1wiLFwieWVsbG93XCI6XCJHZWxiXCIsXCJ0aGVtZS5saWdodFwiOlwiSGVsbFwiLFwidGhlbWUuZGFya1wiOlwiRHVua2VsXCIsXCJ0aGVtZS5zeXN0ZW1cIjpcIlN5bmNocm9uaXNpZXJ1bmcgbWl0IE9TLUVpbnN0ZWxsdW5nXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCJUYWJzIGF1c2JsZW5kZW5cIixcInRvb2xiYXIuc2hvd1RhYnNcIjpcIlRhYnMgYW56ZWlnZW5cIixcInRvb2xiYXIubG9ja1wiOlwiU3BlcnJlblwiLFwidG9vbGJhci51bmxvY2tcIjpcIkZyZWlzY2hhbHRlblwiLFwidG9vbGJhci5jb2xvckxpbmtpbmdcIjpcIkZhcmJ2ZXJrbsO8cGZ1bmdcIixcInRvb2xiYXIuY2hhbmdlTGF5b3V0XCI6XCJMYXlvdXQgw6RuZGVyblwiLFwidG9vbGJhci5zYXZlTWVudVwiOlwiTWVuw7wgc3BlaWNoZXJuXCIsXCJ0b29sYmFyLm1heGltaXplV2luZG93XCI6XCJGZW5zdGVyIG1heGltaWVyZW5cIixcInRvb2xiYXIucmVzdG9yZVdpbmRvd1wiOlwiRmVuc3RlciB3aWVkZXJoZXJzdGVsbGVuXCIsXCJ0b29sYmFyLm1pbmltaXplV2luZG93XCI6XCJGZW5zdGVyIG1pbmltaWVyZW5cIixcImNoYW5nZUxheW91dC5mdWxsV2lkdGhcIjpcIlZvbGxlIEJyZWl0ZVwiLFwiY2hhbmdlTGF5b3V0LmNvbHVtbnNcIjpcIlNwYWx0ZW5cIixcImNoYW5nZUxheW91dC5Sb3dzXCI6XCJaZWlsZW5cIixcImNoYW5nZUxheW91dC5HcmlkXCI6XCJSYXN0ZXJcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcIldvcmtzcGFjZSBnZXdlY2hzZWx0XCIsXCJzdWNjZXNzSW5kaWNhdG9yLmhpZGRlblwiOlwiVGFicyBzaW5kIGF1c2dlYmxlbmRldFwiLFwic3VjY2Vzc0luZGljYXRvci5zaG93blwiOlwiVGFicyB3ZXJkZW4gYW5nZXplaWd0XCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxvY2tlZFwiOlwiU2VpdGUgaXN0IGdlc3BlcnJ0XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnVubG9ja2VkXCI6XCJTZWl0ZSBpc3QgZnJlaWdlc2NoYWx0ZXRcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRcIjpcIldvcmtzcGFjZSBnZXNwZWljaGVydFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZEFzXCI6XCJXb3Jrc3BhY2UgZ2VzcGVpY2hlcnQgYWxzIHt7d29ya3NwYWNlfX1cIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlUmVuYW1lZFwiOlwiV29ya3NwYWNlIHVtYmVuYW5udFwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlU2F2ZWRcIjpcIlNlaXRlIGdlc3BlaWNoZXJ0XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VIYXNCZWVuU2F2ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBoYXMgYmVlbiBzYXZlZC4gREVcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUNvcHlTYXZlZFwiOlwiU2VpdGUgZ2VzcGVpY2hlcnQgYWxzIHt7dGl0bGV9fVwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlUmVuYW1lZFwiOlwiU2VpdGUgdW1iZW5hbm50XCIsXCJzdWNjZXNzSW5kaWNhdG9yLmNvbnRleHRHcm91cEFwcGxpZWRcIjpcIkFuZ2V3YW5kdGUgS29udGV4dGdydXBwZVwiLFwic3VjY2Vzc0luZGljYXRvci5uYW1lZENvbnRleHRHcm91cEFwcGxpZWRcIjpcInt7Y29sb3JOYW1lfX0gYW5nZXdhbmR0ZSBLb250ZXh0Z3J1cHBlXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnZpZXdSZW1vdmVkXCI6XCJBbnNpY2h0IGF1cyBkZXIgS29udGV4dGdydXBwZSBlbnRmZXJudFwiLFwic3VjY2Vzc0luZGljYXRvci52aWV3c1JlbW92ZWRcIjpcIkFuc2ljaHRlbiBhdXMgZGVyIEtvbnRleHRncnVwcGUgZW50ZmVybnRcIixcInN1Y2Nlc3NJbmRpY2F0b3IubGF5b3V0QXBwbGllZFwiOlwie3tsYXlvdXROYW1lfX0gYW5nZXdhbmR0ZXMgTGF5b3V0XCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZURlbGV0ZWRcIjpcIldvcmtzcGFjZSBnZWzDtnNjaHRcIixcImVycm9ySW5kaWNhdG9yLnBhZ2VTYXZlRmFpbGVkXCI6XCJTZWl0ZSBrb25udGUgbmljaHQgZ2VzcGVpY2hlcnQgd2VyZGVuXCIsXCJlcnJvckluZGljYXRvci53b3Jrc3BhY2VTYXZlRmFpbGVkXCI6XCJXb3Jrc3BhY2Uga29ubnRlIG5pY2h0IGdlc3BlaWNoZXJ0IHdlcmRlblwiLFwiZXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVQYWdlXCI6XCJTZWl0ZSBrYW5uIG5pY2h0IGR1cGxpemllcnQgd2VyZGVuXCIsXCJpbmZvSW5kaWNhdG9yLmNvbG9yTGlua0F0dGVtcHRcIjpcIldpciBoYWJlbiB2ZXJzdWNodCwgZGllc2VtIFRhYiBlaW5lIEZhcmJlIHp1b3JkbmVuLCBhYmVyIGRlciBFaWdlbnTDvG1lciBkZXIgV2Vic2l0ZS9kZXMgSW5oYWx0cyBoYXQgc2llIG5vY2ggbmljaHQgYWt0aXZpZXJ0XCIsXCJnbG9iYWwuY2FuY2VsXCI6XCJBYmJyZWNoZW5cIixcImdsb2JhbC5jb25maXJtXCI6XCJCZXN0w6R0aWdlblwiLFwiZ2xvYmFsLnNhdmVcIjpcIlNwZWljaGVyblwiLFwiZ2xvYmFsLmRlbGV0ZVwiOlwiRGVsZXRlIERFXCIsXCJhcHBSZXN1bHRzLmhlYWRlclwiOlwiRmVhdHVyZWQgQ29udGVudCBEQ1wiLFwicmVjZW50bHlDbG9zZWQuaGVhZGVyXCI6XCJSZWNlbnRseSBDbG9zZWQgRENcIixcImxhbmRpbmdQYWdlLnN1YmhlYWRlclwiOlwiQXBwcyBhbmQgd2Vic2l0ZXMgc2VsZWN0ZWQgYnkgYW4gYWRtaW4gd2lsbCBzaG93IGhlcmUgREVcIixcImFyaWEub3BlbkJyb3dzZXJcIjpcIkJyb3dzZXItTWVuw7wgw7ZmZm5lblwiLFwiYXJpYS5icm93c2VyVGFic1wiOlwiQnJvd3Nlci1UYWJcIixcImFyaWEudmlld1RhYlwiOlwiVGFiIOKAnkFuc2ljaHTigJwgZsO8ciB7e3RpdGxlfX1cIixcImFyaWEuY2xvc2VQYWdlXCI6XCJCdXR0b24g4oCeU2VpdGUgc2NobGllw59lbuKAnCBmw7xyIHt7dGl0bGV9fVwiLFwiYXJpYS5jbG9zZVRhYlwiOlwiVGFiIHNjaGxpZcOfZW4ge3t0aXRsZX19XCIsXCJhcmlhLnRpdGxlXCI6XCJCZXplaWNobnVuZ1wiLFwiYXJpYS5jbG9zZUNvbnRleHRHcm91cFwiOlwiVmVyd2VuZGVuIFNpZSBkaWUgRXNjYXBlLVRhc3RlLCB1bSBkZW4gRGlhbG9nIHp1ciBBdXN3YWhsIHZvbiBLb250ZXh0Z3J1cHBlbiB6dSBzY2hsaWXDn2VuXCIsXCJhcmlhLmNvbG9yTGlua2luZ1wiOlwiRmFyYnZlcmtuw7xwZnVuZyBlaW4tIG9kZXIgYXVzYmxlbmRlblwiLFwiYXJpYS5hcHBseUNvbG9yTGlua2luZ1wiOlwiQml0dGUgd8OkaGxlbiBTaWUgZWluZSBBbnNpY2h0LCB1bSBkaWUgRmFyYnZlcmtuw7xwZnVuZyBhbnp1d2VuZGVuXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3XCI6XCJBa3R1ZWxsZSBBbnNpY2h0LCBkaWUgZGVyIEtvbnRleHRncnVwcGUge3tuYW1lfX0genVnZW9yZG5ldCBpc3RcIixcImFyaWEuYXNzaWduQ29sb3JMaW5raW5nQ3VycmVudFZpZXdzXCI6XCJBa3R1ZWxsZSBBbnNpY2h0ZW4sIGRpZSBkZXIgS29udGV4dGdydXBwZSB7e25hbWV9fSB6dWdlb3JkbmV0IHNpbmRcIixcImFyaWEuc2V0Q29sb3JMaW5raW5nQWN0aXZlVmlld1wiOlwiQWt0aXZlIEFuc2ljaHQgYXVmIGRpZSBLb250ZXh0Z3J1cHBlIHt7bmFtZX19IHNldHplblwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3c1wiOlwiQWt0aXZlIEFuc2ljaHRlbiBhdWYgZGllIEtvbnRleHRncnVwcGUge3tuYW1lfX0gc2V0emVuXCIsXCJhcmlhLmVzY2FwZUxheW91dERpYWxvZ1wiOlwiVmVyd2VuZGVuIFNpZSBkaWUgRXNjYXBlLVRhc3RlLCB1bSBkZW4gRGlhbG9nIHp1ciBMYXlvdXTDpG5kZXJ1bmcgenUgc2NobGllw59lblwiLFwiZ2xvYmFsLnN1cGVydGFiXCI6XCJTdXBlcnRhYiBERVwiLFwiZ2xvYmFsLnRhYlwiOlwiVGFiIERFXCIsXCJib29rbWFya3MuZWRpdEJvb2ttYXJrXCI6XCJFZGl0IEJvb2ttYXJrIERFXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFwiOlwiQm9va21hcmsgYWRkZWQgREVcIixcImJvb2ttYXJrcy5kb25lXCI6XCJEb25lIERFXCIsXCJib29rbWFya3MucmVtb3ZlXCI6XCJSZW1vdmUgREVcIixcImJvb2ttYXJrcy5ib29rbWFya3NQYW5lbFwiOlwiQm9va21hcmtzIFBhbmVsIERFXCIsXCJib29rbWFya3MuY2xvc2VQYW5lbFwiOlwiQ2xvc2UgQm9va21hcmtzIFBhbmVsIERFXCIsXCJib29rbWFya3MuYm9va21hcmtzXCI6XCJCb29rbWFya3MgREVcIixcImJvb2ttYXJrcy5hbGxCb29rbWFya3NcIjpcIkFsbCBCb29rbWFya3MgREVcIixcImJvb2ttYXJrcy5mYXZvcml0ZXNcIjpcIkZhdm9yaXRlcyBERVwiLFwiYm9va21hcmtzLnNlYXJjaEJvb2ttYXJrc1wiOlwiU2VhcmNoIEJvb2ttYXJrcyBERVwiLFwiYm9va21hcmtzLmNsZWFyU2VhcmNoSW5wdXRcIjpcIkNsZWFyIFNlYXJjaCBJbnB1dCBERVwiLFwiYm9va21hcmtzLmNyZWF0ZUZvbGRlclwiOlwiQ3JlYXRlIE5ldyBGb2xkZXIgREVcIixcImJvb2ttYXJrcy5leGl0Rm9sZGVyXCI6XCJFeGl0IEZvbGRlciBERVwiLFwiYm9va21hcmtzLm5ld0ZvbGRlclwiOlwiTmV3IEZvbGRlciBERVwiLFwiYm9va21hcmtzLm5hbWVkRm9sZGVyXCI6XCJ7e25hbWV9fSBGb2xkZXIgREVcIixcImJvb2ttYXJrcy5ib29rbWFya1NldHRpbmdzXCI6XCJ7e25hbWV9fSBCb29rbWFyayBTZXR0aW5ncyBERVwiLFwiYm9va21hcmtzLmZvbGRlclNldHRpbmdzXCI6XCJ7e25hbWV9fSBGb2xkZXIgU2V0dGluZ3MgREVcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFwiOlwiTm8gcmVzdWx0cyBmb3VuZCBERVwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kU3VidGV4dFwiOlwiVGhlcmUgYXJlIG5vIGJvb2ttYXJrcyB0aGF0IG1hdGNoIHlvdXIgc2VhcmNoIERFXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1wiOlwiTm90aGluZyB0byBzaG93IHlldCBERVwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dTdWJ0ZXh0XCI6XCJBZGQgYSBib29rbWFyayB0byB0aGlzIGZvbGRlciBERVwiLFwiYm9va21hcmtzLnJlc3VsdHNGb3VuZEluXCI6XCJSZXN1bHRzIGZvdW5kIGluIHt7bmFtZX19IERFXCIsXCJib29rbWFya3MucmVzdWx0c0luT3RoZXJGb2xkZXJzXCI6XCJSZXN1bHRzIGZvdW5kIGluIG90aGVyIGZvbGRlcnMgREVcIixcImJvb2ttYXJrcy5hbGxSZXN1bHRzRm91bmRJblwiOlwiQWxsIHJlc3VsdHMgZm91bmQgaW4gREVcIixcImJvb2ttYXJrcy5lZGl0TmFtZVwiOlwiRWRpdCBOYW1lIERFXCIsXCJib29rbWFya3MubW92ZVwiOlwiTW92ZSBERVwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUaXRsZVwiOlwiQm9va21hcmsgQWRkZWQgREVcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVG9Gb2xkZXJcIjpcIllvdXIgYm9va21hcmsgd2FzIGFkZGVkIHRvIFxcXFxcInt7Zm9sZGVyTmFtZX19XFxcXFwiIERFXCIsXCJib29rbWFya3MuYm9va21hcmtFZGl0ZWRUaXRsZVwiOlwiQm9va21hcmsgRWRpdGVkIERFXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCI6XCJTYXZlIFN1cGVydGFiIERFXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMuLi4gREVcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBERVwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgU3VwZXJ0YWIgREVcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIjpcIk5ldyBUYWIgREVcIixcImVudGVycHJpc2VTYXZlTWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBcyBERVwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5yZW5hbWVTdXBlcnRhYlwiOlwiUmVuYW1lIERFXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnVuc2F2ZWRDaGFuZ2VzXCI6XCJZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMgaW4gdGhpcyBUYWIuIERFXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgREVcIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VTdXBlcnRhYlwiOlwiQ2xvc2UgU3VwZXJ0YWIgREVcIixcImVudGVycHJpc2VTYXZlTW9kYWwuc2F2ZVN1cGVydGFiQ291bnRcIjpcIlNhdmUge3tjb3VudH19IFN1cGVydGFicyBiZWZvcmUgY2xvc2luZz8gREVcIixcImVudGVycHJpc2VNb2RhbC5kaXNjYXJkU3VwZXJ0YWJXYXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHRvIHRoaXMgU3VwZXJ0YWIgd2lsbCBiZSBsb3N0LiBERVwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgdGhlIFxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYj8gREVcIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYldhcm5pbmdcIjpcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBTdXBlcnRhYj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSBhbmQgaXMgcGVybWFuZW50LiBERVwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJTYXZlZFwiOlwiU3VwZXJ0YWIgU2F2ZWQgREVcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gc2F2ZWQuIERFXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIjpcIlN1cGVydGFiIERlbGV0ZWQgREVcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlbkRlbGV0ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBkZWxldGVkLiBERVwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlVGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFRhYiBERVwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlU3VwZXJ0YWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgU3VwZXJ0YWIgREVcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnN3aXRjaFRvU3VwZXJ0YWJcIjpcIlN3aXRjaCB0byBTdXBlcnRhYiBERVwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuZ29Ub1wiOlwiR28gdG8ge3t0eXBlfX0gREVcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnZpZXdNb3JlXCI6XCJWaWV3IE1vcmUgREVcIixcImNvbnRleHRNZW51LnF1aXRFbnRlcnByaXNlQnJvd3NlclwiOlwiUXVpdCBERVwifScpLHFhPUpTT04ucGFyc2UoJ3tcImNvbnRleHRNZW51Lm5ld1dpbmRvd1wiOlwi5paw44GX44GE44Km44Kj44Oz44OJ44KmXCIsXCJjb250ZXh0TWVudS5uZXdQYWdlXCI6XCLmlrDjgZfjgYTjg5rjg7zjgrhcIixcImNvbnRleHRNZW51LnJlc3RvcmVcIjpcIuacgOW+jOOBq+S/neWtmOOBleOCjOOBn+WkieabtOOBq+aIu+OBmVwiLFwiY29udGV4dE1lbnUuc3dpdGNoV29ya3NwYWNlXCI6XCLjg6/jg7zjgq/jgrnjg5rjg7zjgrnjgavliIfjgormm7/jgYjjgotcIixcImNvbnRleHRNZW51LmFwcGVhcmFuY2VcIjpcIuWkluims1wiLFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZVwiOlwi44Ov44O844Kv44K544Oa44O844K544KS5L+d5a2YXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlQXNcIjpcIuODr+ODvOOCr+OCueODmuODvOOCueOCkuWIpeWQjeOBp+S/neWtmC4uLlwiLFwiY29udGV4dE1lbnUucmVuYW1lV29ya3NwYWNlXCI6XCLjg6/jg7zjgq/jgrnjg5rjg7zjgrnlkI3jgpLlpInmm7RcIixcImNvbnRleHRNZW51LmRlbGV0ZVdvcmtzcGFjZVwiOlwi44Ov44O844Kv44K544Oa44O844K544KS5YmK6ZmkXCIsXCJjb250ZXh0TWVudS5kb3dubG9hZHNcIjpcIuODgOOCpuODs+ODreODvOODiVwiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VcIjpcIuODmuODvOOCuOOCkuS/neWtmFwiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VBc1wiOlwi44Oa44O844K444KS5Yil5ZCN44Gn5L+d5a2YLi4uXCIsXCJjb250ZXh0TWVudS5wcmludFwiOlwi5Y2w5Yi3Li4uXCIsXCJjb250ZXh0TWVudS5wcmludFNjcmVlblwiOlwi44OX44Oq44Oz44OI44K544Kv44Oq44O844OzXCIsXCJjb250ZXh0TWVudS5jbG9zZVdpbmRvd1wiOlwi44Km44Kj44Oz44OJ44Km44KS6ZaJ44GY44KLXCIsXCJjb250ZXh0TWVudS5vcGVuU3RvcmVmcm9udFwiOlwi44K544OI44Ki44OV44Ot44Oz44OI44KS6ZaL44GPXCIsXCJjb250ZXh0TWVudS5xdWl0UGxhdGZvcm1cIjpcIuODl+ODqeODg+ODiOODleOCqeODvOODoOOCkue1guS6huOBmeOCi1wiLFwiY29udGV4dE1lbnUubmV3Vmlld1wiOlwi5paw44GX44GE44OT44Ol44O8XCIsXCJjb250ZXh0TWVudS5vcGVuVmlld1wiOlwi44OH44OV44Kp44Or44OI44Gu44Km44Kn44OW44OW44Op44Km44K244O844Gn44OT44Ol44O844KS6ZaL44GPXCIsXCJjb250ZXh0TWVudS5vcGVuVmlld3NcIjpcIuODh+ODleOCqeODq+ODiOOBruOCpuOCp+ODluODluODqeOCpuOCtuODvOOBp+ODk+ODpeODvOOCkumWi+OBj1wiLFwiY29udGV4dE1lbnUucmVsb2FkXCI6XCJSZWxvYWQgSlBcIixcImNvbnRleHRNZW51LnJlbG9hZFZpZXdcIjpcIuODk+ODpeODvOOCkuODquODreODvOODiVwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld3NcIjpcIuODk+ODpeODvOOCkuODquODreODvOODiVwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgSlBcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdcIjpcIuODk+ODpeODvOOCkuikh+ijvVwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlVmlld3NcIjpcIuODk+ODpeODvOOCkuikh+ijvVwiLFwiY29udGV4dE1lbnUuYWRkVmlld1wiOlwi44OT44Ol44O844KS44OB44Oj44ON44Or44Gr6L+95YqgXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3c1wiOlwi44OT44Ol44O844KS44OB44Oj44ON44Or44Gr6L+95YqgXCIsXCJjb250ZXh0TWVudS5yZW1vdmVWaWV3XCI6XCLjg4Hjg6Pjg43jg6vjgYvjgonjg5Pjg6Xjg7zjgpLliYrpmaRcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdzXCI6XCLjg4Hjg6Pjg43jg6vjgYvjgonjg5Pjg6Xjg7zjgpLliYrpmaRcIixcImNvbnRleHRNZW51LmNsb3NlVmlld1wiOlwi44OT44Ol44O844KS6ZaJ44GY44KLXCIsXCJjb250ZXh0TWVudS5jbG9zZVZpZXdzXCI6XCLjg5Pjg6Xjg7zjgpLplonjgZjjgotcIixcImNvbnRleHRNZW51LmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgSlBcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIjpcIuODmuODvOOCuOOCkuikh+ijvVwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludFwiOlwi5Y2w5Yi3XCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50QWxsXCI6XCLjgZnjgbnjgabjgpLljbDliLdcIixcInNhdmVNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi44Ov44O844Kv44K544Oa44O844K544KS5Yil5ZCN44Gn5L+d5a2YXCIsXCJzYXZlTWVudS5zYXZlUGFnZUFzXCI6XCLjg5rjg7zjgrjjgpLliKXlkI3jgafkv53lrZhcIixcInNhdmVNb2RhbC5lbnRlclZhbHVlXCI6XCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBKUFwiLFwic2F2ZU1vZGFsLmFscmVhZHlFeGlzdHNcIjpcInt7dGl0bGV9feOBr+OBmeOBp+OBq+WtmOWcqOOBl+OBpuOBhOOBvuOBmeOAglwiLFwic2F2ZU1vZGFsLnBsZWFzZUVudGVyVmFsaWROYW1lXCI6XCLmnInlirnjgarlkI3liY3jgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYRcIixcInNhdmVNb2RhbC5yZW5hbWVQYWdlXCI6XCLjg5rjg7zjgrjlkI3jgpLlpInmm7RcIixcInNhdmVNb2RhbC5jbG9zZVBhZ2VcIjpcIuODmuODvOOCuOOCkumWieOBmOOCi1wiLFwic2F2ZU1vZGFsLmRpc2NhcmRDaGFuZ2VzXCI6XCLlpInmm7TjgpLnoLTmo4RcIixcInNhdmVNb2RhbC5kaXNjYXJkQWxsXCI6XCLjgZnjgbnjgabnoLTmo4RcIixcInNhdmVNb2RhbC5zYXZlQWxsXCI6XCLjgZnjgbnjgabkv53lrZhcIixcInNhdmVNb2RhbC5zYXZlUGFnZXNDb3VudFwiOlwi6ZaJ44GY44KL5YmN44Gr77yIe3tjb3VudH1977yJ44Gk44Gu44Oa44O844K444KS5L+d5a2Y44GX44G+44GZ44GL77yfXCIsXCJkZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBQYWdlIEpQXCIsXCJlbnRlcnByaXNlRGVmYXVsdFBhZ2VUaXRsZVwiOlwiVW50aXRsZWQgU3VwZXJ0YWIgSlBcIixcImFkZE5ld1BhZ2VcIjpcIuaWsOOBl+OBhOODmuODvOOCuOOCkui/veWKoFwiLFwiYWRkTmV3VGFiXCI6XCLmlrDjgZfjgYTjgr/jg5bjgpLov73liqBcIixcImFkZE5ld1ZpZXdcIjpcIuaWsOOBl+OBhOODk+ODpeODvFwiLFwicmVzdG9yZU1vZGFsXCI6XCLmnKzlvZPjgavmnIDlvozjgavkv53lrZjjgZXjgozjgZ/lpInmm7TjgavmiLvjgZfjgb7jgZnjgYvvvJ9cIixcIm1vZGFsLmRpc2NhcmRXYXJuaW5nXCI6XCLkv53lrZjjgZXjgozjgabjgYTjgarjgYTlpInmm7Tjga/noLTmo4TjgZXjgozjgb7jgZlcIixcIm1vZGFsLmRpc2NhcmRQYWdlV2FybmluZ1wiOlwi5L+d5a2Y44GV44KM44Gm44GE44Gq44GE44GT44Gu44Oa44O844K444G444Gu5aSJ5pu044Gv5aSx44KP44KM44G+44GZ44CCXCIsXCJtb2RhbC5zYXZlQ2hhbmdlc1Byb21wdFwiOlwi6ZaJ44GY44KL5YmN44Gr5aSJ5pu044KS5L+d5a2Y44GX44G+44GZ44GL77yfXCIsXCJtb2RhbC5wYWdlQ2xvc2VcIjpcIuODmuODvOOCuOOCkumWieOBmOOCi1wiLFwic3dpdGNoV29ya3NwYWNlTW9kYWxcIjpcIuacrOW9k+OBq3t7d29ya3NwYWNlfX3jgavliIfjgormm7/jgYjjgb7jgZnjgYvvvJ9cIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsLndhcm5pbmdcIjpcIuS/neWtmOOBleOCjOOBpuOBhOOBquOBhOWkieabtOOBr+egtOajhOOBleOCjOOBvuOBmVwiLFwiZGVsZXRlV29ya3NwYWNlTW9kYWxcIjpcIuOBk+OBruODr+ODvOOCr+OCueODmuODvOOCueOCkuawuOS5heOBq+WJiumZpOOBl+OBpuOCguOCiOOCjeOBl+OBhOOBp+OBmeOBi++8n1wiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLndhcm5pbmdcIjpcInt7d29ya3NwYWNlfX3jgajjgYTjgYblkI3liY3jga7jg6/jg7zjgq/jgrnjg5rjg7zjgrnjgYzjgZnjgafjgavlrZjlnKjjgZfjgb7jgZnjgILnva7jgY3mj5vjgYjjgb7jgZnjgYvvvJ9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nLmJvZHlcIjpcIuWQjOOBmOWQjeWJjeOBruODr+ODvOOCr+OCueODmuODvOOCueOBjOOBmeOBp+OBq+WtmOWcqOOBl+OBvuOBmeOAgue9ruOBjeaPm+OBiOOCi+OBqOOAgeePvuWcqOOBruWGheWuueOBr+S4iuabuOOBjeOBleOCjOOBvuOBmeOAglwiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLnJlcGxhY2VcIjpcIue9ruOBjeaPm+OBiOOCi1wiLFwiY2xvc2VQbGF0Zm9ybVwiOlwi44OX44Op44OD44OI44OV44Kp44O844Og44KS6ZaJ44GY44KLXCIsXCJjbG9zZVBsYXRmb3JtLndvcmtzcGFjZVwiOlwie3t3b3Jrc3BhY2V9feODl+ODqeODg+ODiOODleOCqeODvOODoOOCkumWieOBmOOCi1wiLFwiY2xvc2VQbGF0Zm9ybS53YXJuaW5nXCI6XCLjg5fjg6njg4Pjg4jjg5Xjgqnjg7zjg6DjgpLplonjgZjjgovjgajjgIHlrp/ooYzkuK3jga7jg6/jg7zjgq/jgrnjg5rjg7zjgrnjgIHjgqLjg5fjg6rjgIHjg5fjg63jgrvjgrnjgYzjgZnjgbnjgabplonjgZjjgb7jgZnjgIJcIixcImJhY2tcIjpcIuaIu+OCi1wiLFwiZm9yd2FyZFwiOlwi6YCy44KAXCIsXCJyZWxvYWRcIjpcIuODquODreODvOODiVwiLFwiZ3JlZW5cIjpcIuOCsOODquODvOODs1wiLFwicHVycGxlXCI6XCLjg5Hjg7zjg5fjg6tcIixcIm9yYW5nZVwiOlwi44Kq44Os44Oz44K4XCIsXCJyZWRcIjpcIuODrOODg+ODiVwiLFwicGlua1wiOlwi44OU44Oz44KvXCIsXCJ5ZWxsb3dcIjpcIuOCpOOCqOODreODvFwiLFwidGhlbWUubGlnaHRcIjpcIuODqeOCpOODiFwiLFwidGhlbWUuZGFya1wiOlwi44OA44O844KvXCIsXCJ0aGVtZS5zeXN0ZW1cIjpcIk9T44Gu6Kit5a6a44Go5ZCM5pyfXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCLjgr/jg5bjgpLpnZ7ooajnpLpcIixcInRvb2xiYXIuc2hvd1RhYnNcIjpcIuOCv+ODluOCkuihqOekulwiLFwidG9vbGJhci5sb2NrXCI6XCLjg63jg4Pjgq9cIixcInRvb2xiYXIudW5sb2NrXCI6XCLjg63jg4Pjgq/op6PpmaRcIixcInRvb2xiYXIuY29sb3JMaW5raW5nXCI6XCLjgqvjg6njg7zjg6rjg7Pjgq9cIixcInRvb2xiYXIuY2hhbmdlTGF5b3V0XCI6XCLjg6zjgqTjgqLjgqbjg4jjgpLlpInmm7RcIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcIuODoeODi+ODpeODvOOCkuS/neWtmFwiLFwidG9vbGJhci5tYXhpbWl6ZVdpbmRvd1wiOlwi44Km44Kj44Oz44OJ44Km44KS5pyA5aSn5YyW44GZ44KLXCIsXCJ0b29sYmFyLnJlc3RvcmVXaW5kb3dcIjpcIuOCpuOCo+ODs+ODieOCpuOCkuW+qeWFg1wiLFwidG9vbGJhci5taW5pbWl6ZVdpbmRvd1wiOlwi44Km44Kj44Oz44OJ44Km44KS5pyA5bCP5YyW44GZ44KLXCIsXCJjaGFuZ2VMYXlvdXQuZnVsbFdpZHRoXCI6XCLlhajluYVcIixcImNoYW5nZUxheW91dC5jb2x1bW5zXCI6XCLliJdcIixcImNoYW5nZUxheW91dC5Sb3dzXCI6XCLooYxcIixcImNoYW5nZUxheW91dC5HcmlkXCI6XCLjgrDjg6rjg4Pjg4lcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcIuODr+ODvOOCr+OCueODmuODvOOCueOBjOWIh+OCiuabv+OCj+OCiuOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci5oaWRkZW5cIjpcIuOCv+ODluOBjOmdnuihqOekuuOBq+OBquOBo+OBpuOBhOOBvuOBmVwiLFwic3VjY2Vzc0luZGljYXRvci5zaG93blwiOlwi44K/44OW44GM6KGo56S644GV44KM44Gm44GE44G+44GZXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxvY2tlZFwiOlwi44Oa44O844K444GM44Ot44OD44Kv44GV44KM44Gm44GE44G+44GZXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnVubG9ja2VkXCI6XCLjg5rjg7zjgrjjga7jg63jg4Pjgq/jgYzop6PpmaTjgZXjgozjgabjgYTjgb7jgZlcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRcIjpcIuODr+ODvOOCr+OCueODmuODvOOCueOBjOS/neWtmOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZEFzXCI6XCLjg6/jg7zjgq/jgrnjg5rjg7zjgrnjgYx7e3dvcmtzcGFjZX1944Go44GX44Gm5L+d5a2Y44GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVJlbmFtZWRcIjpcIuODr+ODvOOCr+OCueODmuODvOOCueWQjeOBjOWkieabtOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlU2F2ZWRcIjpcIuODmuODvOOCuOOBjOS/neWtmOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgaGFzIGJlZW4gc2F2ZWQuIEpQXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VDb3B5U2F2ZWRcIjpcIuODmuODvOOCuOOBjHt7dGl0bGV9feOBqOOBl+OBpuS/neWtmOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlUmVuYW1lZFwiOlwi44Oa44O844K45ZCN44GM5aSJ5pu044GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmNvbnRleHRHcm91cEFwcGxpZWRcIjpcIuOCs+ODs+ODhuOCreOCueODiOOCsOODq+ODvOODl+OBjOmBqeeUqOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci5uYW1lZENvbnRleHRHcm91cEFwcGxpZWRcIjpcInt7Y29sb3JOYW1lfX3jgrPjg7Pjg4bjgq3jgrnjg4jjgrDjg6vjg7zjg5fjgYzpgannlKjjgZXjgozjgb7jgZfjgZ9cIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld1JlbW92ZWRcIjpcIuOCs+ODs+ODhuOCreOCueODiOOCsOODq+ODvOODl+OBi+OCieODk+ODpeODvOOBjOWJiumZpOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci52aWV3c1JlbW92ZWRcIjpcIuOCs+ODs+ODhuOCreOCueODiOOCsOODq+ODvOODl+OBi+OCieODk+ODpeODvOOBjOWJiumZpOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci5sYXlvdXRBcHBsaWVkXCI6XCJ7e2xheW91dE5hbWV9feODrOOCpOOCouOCpuODiOOBjOmBqeeUqOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VEZWxldGVkXCI6XCLjg6/jg7zjgq/jgrnjg5rjg7zjgrnjgYzliYrpmaTjgZXjgozjgb7jgZfjgZ9cIixcImVycm9ySW5kaWNhdG9yLnBhZ2VTYXZlRmFpbGVkXCI6XCLjg5rjg7zjgrjjgpLkv53lrZjjgafjgY3jgb7jgZvjgpPjgafjgZfjgZ9cIixcImVycm9ySW5kaWNhdG9yLndvcmtzcGFjZVNhdmVGYWlsZWRcIjpcIuODr+ODvOOCr+OCueODmuODvOOCueOCkuS/neWtmOOBp+OBjeOBvuOBm+OCk+OBp+OBl+OBn1wiLFwiZXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVQYWdlXCI6XCLjg5rjg7zjgrjjgpLopIfoo73jgafjgY3jgb7jgZvjgpPjgafjgZfjgZ9cIixcImluZm9JbmRpY2F0b3IuY29sb3JMaW5rQXR0ZW1wdFwiOlwi44GT44Gu44K/44OW44KS44Kr44Op44O844Oq44Oz44Kv44GX44KI44GG44Go44GX44G+44GX44Gf44GM44CB44K144Kk44OIL+OCs+ODs+ODhuODs+ODhOOBruOCquODvOODiuODvOOBjOOBvuOBoOOBk+OCjOOCkuacieWKueOBq+OBl+OBpuOBhOOBvuOBm+OCk1wiLFwiZ2xvYmFsLmNhbmNlbFwiOlwi44Kt44Oj44Oz44K744OrXCIsXCJnbG9iYWwuY29uZmlybVwiOlwi56K66KqNXCIsXCJnbG9iYWwuc2F2ZVwiOlwi5L+d5a2YXCIsXCJnbG9iYWwuZGVsZXRlXCI6XCJEZWxldGUgSlBcIixcImFwcFJlc3VsdHMuaGVhZGVyXCI6XCJGZWF0dXJlZCBjb250ZW50IEpQXCIsXCJyZWNlbnRseUNsb3NlZC5oZWFkZXJcIjpcIlJlY2VudGx5IENsb3NlZCBKUFwiLFwibGFuZGluZ1BhZ2Uuc3ViaGVhZGVyXCI6XCJBcHBzIGFuZCB3ZWJzaXRlcyBzZWxlY3RlZCBieSBhbiBhZG1pbiB3aWxsIHNob3cgaGVyZSBKUFwiLFwiYXJpYS5vcGVuQnJvd3NlclwiOlwi44OW44Op44Km44K244O844Oh44OL44Ol44O844KS6ZaL44GPXCIsXCJhcmlhLmJyb3dzZXJUYWJzXCI6XCLjg5bjg6njgqbjgrbjg7zjgr/jg5ZcIixcImFyaWEudmlld1RhYlwiOlwie3t0aXRsZX1944Gu44K/44OW44KS6KGo56S6XCIsXCJhcmlhLmNsb3NlUGFnZVwiOlwie3t0aXRsZX1944Gu44Oa44O844K444K/44OW44Oc44K/44Oz44KS6ZaJ44GY44KLXCIsXCJhcmlhLmNsb3NlVGFiXCI6XCJ7e3RpdGxlfX3jgr/jg5bjgpLplonjgZjjgotcIixcImFyaWEudGl0bGVcIjpcIuOCv+OCpOODiOODq1wiLFwiYXJpYS5jbG9zZUNvbnRleHRHcm91cFwiOlwi44Ko44K544Kx44O844OX44KS5L2/55So44GX44Gm44CB44Kz44Oz44OG44Kt44K544OI44Kw44Or44O844OX6YG45oqe44OA44Kk44Ki44Ot44Kw44KS6ZaJ44GY44KLXCIsXCJhcmlhLmNvbG9yTGlua2luZ1wiOlwi44Kr44Op44O844Oq44Oz44Kv44Gu6KGo56S6L+mdnuihqOekulwiLFwiYXJpYS5hcHBseUNvbG9yTGlua2luZ1wiOlwi44Kr44Op44O844Oq44Oz44Kv44KS6YGp55So44GZ44KL44OT44Ol44O844KS6YG45oqe44GX44Gm44GP44Gg44GV44GEXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3XCI6XCLnj77lnKjjga7jg5Pjg6Xjg7zjga97e25hbWV9feOCs+ODs+ODhuOCreOCueODiOOCsOODq+ODvOODl+OBq+WJsuOCiuW9k+OBpuOCieOCjOOBpuOBhOOBvuOBmVwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld3NcIjpcIuePvuWcqOOBruODk+ODpeODvOOBr3t7bmFtZX1944Kz44Oz44OG44Kt44K544OI44Kw44Or44O844OX44Gr5Ymy44KK5b2T44Gm44KJ44KM44Gm44GE44G+44GZXCIsXCJhcmlhLnNldENvbG9yTGlua2luZ0FjdGl2ZVZpZXdcIjpcIuOCouOCr+ODhuOCo+ODluODk+ODpeODvOOCknt7bmFtZX1944Kz44Oz44OG44Kt44K544OI44Kw44Or44O844OX44Gr6Kit5a6aXCIsXCJhcmlhLnNldENvbG9yTGlua2luZ0FjdGl2ZVZpZXdzXCI6XCLjgqLjgq/jg4bjgqPjg5bjg5Pjg6Xjg7zjgpJ7e25hbWV9feOCs+ODs+ODhuOCreOCueODiOOCsOODq+ODvOODl+OBq+ioreWumlwiLFwiYXJpYS5lc2NhcGVMYXlvdXREaWFsb2dcIjpcIuOCqOOCueOCseODvOODl+OCkuS9v+eUqOOBl+OBpuOAgeODrOOCpOOCouOCpuODiOWkieabtOmBuOaKnuODgOOCpOOCouODreOCsOOCkumWieOBmOOCi1wiLFwiZ2xvYmFsLnN1cGVydGFiXCI6XCJTdXBlcnRhYiBKUFwiLFwiZ2xvYmFsLnRhYlwiOlwiVGFiIEpQXCIsXCJib29rbWFya3MuZWRpdEJvb2ttYXJrXCI6XCJFZGl0IEJvb2ttYXJrIEpQXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFwiOlwiQm9va21hcmsgYWRkZWQgSlBcIixcImJvb2ttYXJrcy5kb25lXCI6XCJEb25lIEpQXCIsXCJib29rbWFya3MucmVtb3ZlXCI6XCJSZW1vdmUgSlBcIixcImJvb2ttYXJrcy5ib29rbWFya3NQYW5lbFwiOlwiQm9va21hcmtzIFBhbmVsIEpQXCIsXCJib29rbWFya3MuY2xvc2VQYW5lbFwiOlwiQ2xvc2UgQm9va21hcmtzIFBhbmVsIEpQXCIsXCJib29rbWFya3MuYm9va21hcmtzXCI6XCJCb29rbWFya3MgSlBcIixcImJvb2ttYXJrcy5hbGxCb29rbWFya3NcIjpcIkFsbCBCb29rbWFya3MgSlBcIixcImJvb2ttYXJrcy5mYXZvcml0ZXNcIjpcIkZhdm9yaXRlcyBKUFwiLFwiYm9va21hcmtzLnNlYXJjaEJvb2ttYXJrc1wiOlwiU2VhcmNoIEJvb2ttYXJrcyBKUFwiLFwiYm9va21hcmtzLmNsZWFyU2VhcmNoSW5wdXRcIjpcIkNsZWFyIFNlYXJjaCBJbnB1dCBKUFwiLFwiYm9va21hcmtzLmNyZWF0ZUZvbGRlclwiOlwiQ3JlYXRlIE5ldyBGb2xkZXIgSlBcIixcImJvb2ttYXJrcy5leGl0Rm9sZGVyXCI6XCJFeGl0IEZvbGRlciBKUFwiLFwiYm9va21hcmtzLm5ld0ZvbGRlclwiOlwiTmV3IEZvbGRlciBKUFwiLFwiYm9va21hcmtzLm5hbWVkRm9sZGVyXCI6XCJ7e25hbWV9fSBGb2xkZXIgSlBcIixcImJvb2ttYXJrcy5ib29rbWFya1NldHRpbmdzXCI6XCJ7e25hbWV9fSBCb29rbWFyayBTZXR0aW5ncyBKUFwiLFwiYm9va21hcmtzLmZvbGRlclNldHRpbmdzXCI6XCJ7e25hbWV9fSBGb2xkZXIgU2V0dGluZ3MgSlBcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFwiOlwiTm8gcmVzdWx0cyBmb3VuZCBKUFwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kU3VidGV4dFwiOlwiVGhlcmUgYXJlIG5vIGJvb2ttYXJrcyB0aGF0IG1hdGNoIHlvdXIgc2VhcmNoIEpQXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1wiOlwiTm90aGluZyB0byBzaG93IHlldCBKUFwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dTdWJ0ZXh0XCI6XCJBZGQgYSBib29rbWFyayB0byB0aGlzIGZvbGRlciBKUFwiLFwiYm9va21hcmtzLnJlc3VsdHNGb3VuZEluXCI6XCJSZXN1bHRzIGZvdW5kIGluIHt7bmFtZX19IEpQXCIsXCJib29rbWFya3MucmVzdWx0c0luT3RoZXJGb2xkZXJzXCI6XCJSZXN1bHRzIGZvdW5kIGluIG90aGVyIGZvbGRlcnMgSlBcIixcImJvb2ttYXJrcy5hbGxSZXN1bHRzRm91bmRJblwiOlwiQWxsIHJlc3VsdHMgZm91bmQgaW4gSlBcIixcImJvb2ttYXJrcy5lZGl0TmFtZVwiOlwiRWRpdCBOYW1lIEpQXCIsXCJib29rbWFya3MubW92ZVwiOlwiTW92ZSBKUFwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUaXRsZVwiOlwiQm9va21hcmsgQWRkZWQgSlBcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVG9Gb2xkZXJcIjpcIllvdXIgYm9va21hcmsgd2FzIGFkZGVkIHRvIFxcXFxcInt7Zm9sZGVyTmFtZX19XFxcXFwiIEpQXCIsXCJib29rbWFya3MuYm9va21hcmtFZGl0ZWRUaXRsZVwiOlwiQm9va21hcmsgRWRpdGVkIEpQXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCI6XCJTYXZlIFN1cGVydGFiIEpQXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMuLi4gSlBcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBKUFwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgU3VwZXJ0YWIgSlBcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIjpcIk5ldyBUYWIgSlBcIixcImVudGVycHJpc2VTYXZlTWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBcyBKUFwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5yZW5hbWVTdXBlcnRhYlwiOlwiUmVuYW1lIEpQXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnVuc2F2ZWRDaGFuZ2VzXCI6XCJZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMgaW4gdGhpcyBUYWIuIEpQXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgSlBcIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VTdXBlcnRhYlwiOlwiQ2xvc2UgU3VwZXJ0YWIgSlBcIixcImVudGVycHJpc2VTYXZlTW9kYWwuc2F2ZVN1cGVydGFiQ291bnRcIjpcIlNhdmUge3tjb3VudH19IFN1cGVydGFicyBiZWZvcmUgY2xvc2luZz8gSlBcIixcImVudGVycHJpc2VNb2RhbC5kaXNjYXJkU3VwZXJ0YWJXYXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHRvIHRoaXMgU3VwZXJ0YWIgd2lsbCBiZSBsb3N0LiBKUFwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgdGhlIFxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYj8gSlBcIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYldhcm5pbmdcIjpcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBTdXBlcnRhYj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSBhbmQgaXMgcGVybWFuZW50LiBKUFwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJTYXZlZFwiOlwiU3VwZXJ0YWIgU2F2ZWQgSlBcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gc2F2ZWQuIEpQXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIjpcIlN1cGVydGFiIERlbGV0ZWQgSlBcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlbkRlbGV0ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBkZWxldGVkLiBKUFwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlVGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFRhYiBKUFwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlU3VwZXJ0YWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgU3VwZXJ0YWIgSlBcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnN3aXRjaFRvU3VwZXJ0YWJcIjpcIlN3aXRjaCB0byBTdXBlcnRhYiBKUFwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuZ29Ub1wiOlwiR28gdG8ge3t0eXBlfX0gSlBcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnZpZXdNb3JlXCI6XCJWaWV3IE1vcmUgSlBcIixcImNvbnRleHRNZW51LnF1aXRFbnRlcnByaXNlQnJvd3NlclwiOlwiUXVpdCBKUFwifScpLFphPUpTT04ucGFyc2UoJ3tcImNvbnRleHRNZW51Lm5ld1dpbmRvd1wiOlwi7IOIIOywvVwiLFwiY29udGV4dE1lbnUubmV3UGFnZVwiOlwi7IOIIO2OmOydtOyngFwiLFwiY29udGV4dE1lbnUucmVzdG9yZVwiOlwi66eI7KeA66eJ7Jy866GcIOyggOyepe2VnCDrs4Dqsr0g7IKs7ZWt7Jy866GcIOuzteybkFwiLFwiY29udGV4dE1lbnUuc3dpdGNoV29ya3NwYWNlXCI6XCLsnpHsl4Ug6rO16rCEIOyghO2ZmFwiLFwiY29udGV4dE1lbnUuYXBwZWFyYW5jZVwiOlwi66qo7JaRXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlXCI6XCLsnpHsl4Ug6rO16rCEIOyggOyepVwiLFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZUFzXCI6XCLri6Trpbgg7J2066aE7Jy866GcIOyekeyXhSDqs7XqsIQg7KCA7J6lLi4uXCIsXCJjb250ZXh0TWVudS5yZW5hbWVXb3Jrc3BhY2VcIjpcIuyekeyXhSDqs7XqsIQg7J2066aEIOuwlOq+uOq4sFwiLFwiY29udGV4dE1lbnUuZGVsZXRlV29ya3NwYWNlXCI6XCLsnpHsl4Ug6rO16rCEIOyCreygnFwiLFwiY29udGV4dE1lbnUuZG93bmxvYWRzXCI6XCLri6TsmrTroZzrk5xcIixcImNvbnRleHRNZW51LnNhdmVQYWdlXCI6XCLtjpjsnbTsp4Ag7KCA7J6lXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZUFzXCI6XCLri6Trpbgg7J2066aE7Jy866GcIO2OmOydtOyngCDsoIDsnqUuLi5cIixcImNvbnRleHRNZW51LnByaW50XCI6XCLsnbjsh4QuLi5cIixcImNvbnRleHRNZW51LnByaW50U2NyZWVuXCI6XCLtmZTrqbQg7J247IeEXCIsXCJjb250ZXh0TWVudS5jbG9zZVdpbmRvd1wiOlwi7LC9IOuLq+q4sFwiLFwiY29udGV4dE1lbnUub3BlblN0b3JlZnJvbnRcIjpcIuunpOyepSDsl7TquLBcIixcImNvbnRleHRNZW51LnF1aXRQbGF0Zm9ybVwiOlwi7ZSM656r7Y+8IOyiheujjFwiLFwiY29udGV4dE1lbnUubmV3Vmlld1wiOlwi7IOIIOu3sFwiLFwiY29udGV4dE1lbnUub3BlblZpZXdcIjpcIuq4sOuzuCDsm7kg67iM65287Jqw7KCA66GcIOu3sCDsl7TquLBcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3c1wiOlwi6riw67O4IOybuSDruIzrnbzsmrDsoIDroZwg67ewIOyXtOq4sFwiLFwiY29udGV4dE1lbnUucmVsb2FkXCI6XCJSZWxvYWQgS1JcIixcImNvbnRleHRNZW51LnJlbG9hZFZpZXdcIjpcIuu3sCDri6Tsi5wg66Gc65OcXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3c1wiOlwi67ewIOuLpOyLnCDroZzrk5xcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVwiOlwiRHVwbGljYXRlIEtSXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3XCI6XCLrt7Ag67O17KCcXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3c1wiOlwi67ewIOuzteygnFwiLFwiY29udGV4dE1lbnUuYWRkVmlld1wiOlwi7LGE64SQ7JeQIOu3sCDstpTqsIBcIixcImNvbnRleHRNZW51LmFkZFZpZXdzXCI6XCLssYTrhJDsl5Ag67ewIOy2lOqwgFwiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld1wiOlwi7LGE64SQ7JeQ7IScIOu3sCDsoJzqsbBcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdzXCI6XCLssYTrhJDsl5DshJwg67ewIOygnOqxsFwiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3XCI6XCLrt7Ag64ur6riwXCIsXCJjb250ZXh0TWVudS5jbG9zZVZpZXdzXCI6XCLrt7Ag64ur6riwXCIsXCJjb250ZXh0TWVudS5jbG9zZVRhYlwiOlwiQ2xvc2UgVGFiIEtSXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVQYWdlXCI6XCLtjpjsnbTsp4Ag67O17KCcXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCI6XCLsnbjsh4RcIixcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRBbGxcIjpcIuuqqOuRkCDsnbjsh4RcIixcInNhdmVNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi64uk66W4IOydtOumhOycvOuhnCDsnpHsl4Ug6rO16rCEIOyggOyepVwiLFwic2F2ZU1lbnUuc2F2ZVBhZ2VBc1wiOlwi64uk66W4IOydtOumhOycvOuhnCDtjpjsnbTsp4Ag7KCA7J6lXCIsXCJzYXZlTW9kYWwuZW50ZXJWYWx1ZVwiOlwiUGxlYXNlIGVudGVyIGEgdmFsdWUgS1JcIixcInNhdmVNb2RhbC5hbHJlYWR5RXhpc3RzXCI6XCJ7e3RpdGxlfX3snbQo6rCAKSDsnbTrr7gg7KG07J6s7ZWp64uI64ukLlwiLFwic2F2ZU1vZGFsLnBsZWFzZUVudGVyVmFsaWROYW1lXCI6XCLsnKDtmqjtlZwg7J2066aE7J2EIOyeheugpe2VmOyLreyLnOyYpC5cIixcInNhdmVNb2RhbC5yZW5hbWVQYWdlXCI6XCLtjpjsnbTsp4Ag7J2066aEIOuwlOq+uOq4sFwiLFwic2F2ZU1vZGFsLmNsb3NlUGFnZVwiOlwi7Y6Y7J207KeAIOuLq+q4sFwiLFwic2F2ZU1vZGFsLmRpc2NhcmRDaGFuZ2VzXCI6XCLrs4Dqsr0g7IKs7ZWtIO2PkOq4sFwiLFwic2F2ZU1vZGFsLmRpc2NhcmRBbGxcIjpcIuuqqOuRkCDtj5DquLBcIixcInNhdmVNb2RhbC5zYXZlQWxsXCI6XCLrqqjrkZAg7KCA7J6lXCIsXCJzYXZlTW9kYWwuc2F2ZVBhZ2VzQ291bnRcIjpcIuuLq+q4sCDsoITsl5Ag7Y6Y7J207KeAKHt7Y291bnR9feqwnCnrpbwg7KCA7J6l7ZWY7Iuc6rKg7Iq164uI6rmMP1wiLFwiZGVmYXVsdFBhZ2VUaXRsZVwiOlwiVW50aXRsZWQgUGFnZSBLUlwiLFwiZW50ZXJwcmlzZURlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFN1cGVydGFiIEtSXCIsXCJhZGROZXdQYWdlXCI6XCLsg4gg7Y6Y7J207KeAIOy2lOqwgFwiLFwiYWRkTmV3VGFiXCI6XCLsg4gg7YOtIOy2lOqwgFwiLFwiYWRkTmV3Vmlld1wiOlwi7IOIIOu3sFwiLFwicmVzdG9yZU1vZGFsXCI6XCLrp4jsp4Drp4nsnLzroZwg7KCA7J6l7ZWcIOuzgOqyvSDsgqztla3snLzroZwg67O17JuQ7ZWY7Iuc6rKg7Iq164uI6rmMP1wiLFwibW9kYWwuZGlzY2FyZFdhcm5pbmdcIjpcIuyggOyepe2VmOyngCDslYrsnYAg67OA6rK9IOyCrO2VreydgCDrqqjrkZAg7Y+Q6riw65Cp64uI64ukXCIsXCJtb2RhbC5kaXNjYXJkUGFnZVdhcm5pbmdcIjpcIuydtCDtjpjsnbTsp4DsnZgg7KCA7J6l7ZWY7KeAIOyViuydgCDrs4Dqsr0g7IKs7ZWt7J2AIOuqqOuRkCDshpDsi6TrkKnri4jri6QuXCIsXCJtb2RhbC5zYXZlQ2hhbmdlc1Byb21wdFwiOlwi64ur6riwIOyghOyXkCDrs4Dqsr0g7IKs7ZWt7J2EIOyggOyepe2VmOyLnOqyoOyKteuLiOq5jD9cIixcIm1vZGFsLnBhZ2VDbG9zZVwiOlwi7Y6Y7J207KeAIOuLq+q4sFwiLFwic3dpdGNoV29ya3NwYWNlTW9kYWxcIjpcInt7d29ya3NwYWNlfX0o7Jy8KeuhnCDsoITtmZjtlZjsi5zqsqDsirXri4jquYw/XCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCLsoIDsnqXtlZjsp4Ag7JWK7J2AIOuzgOqyvSDsgqztla3snYAg66qo65GQIO2PkOq4sOuQqeuLiOuLpFwiLFwiZGVsZXRlV29ya3NwYWNlTW9kYWxcIjpcIuydtCDsnpHsl4Ug6rO16rCE7J2EIOyYgeq1rOyggeycvOuhnCDsgq3soJztlZjsi5zqsqDsirXri4jquYw/XCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwie3t3b3Jrc3BhY2V9fSjsnbQp652864qUIOydtOumhOydmCDsnpHsl4Ug6rO16rCE7J20IOydtOuvuCDsobTsnqztlanri4jri6QuIOq1kOyytO2VmOyLnOqyoOyKteuLiOq5jD9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nLmJvZHlcIjpcIuqwmeydgCDsnbTrpoTsnZgg7J6R7JeFIOqzteqwhOydtCDsnbTrr7gg7KG07J6s7ZWp64uI64ukLiDqtZDssrTtlZjrqbQg7ZiE7J6sIOuCtOyaqeydhCDrja7slrTsk7Dqsowg65Cp64uI64ukLlwiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLnJlcGxhY2VcIjpcIuq1kOyytFwiLFwiY2xvc2VQbGF0Zm9ybVwiOlwi7ZSM656r7Y+8IOuLq+q4sFwiLFwiY2xvc2VQbGF0Zm9ybS53b3Jrc3BhY2VcIjpcInt7d29ya3NwYWNlfX0g7ZSM656r7Y+8IOuLq+q4sFwiLFwiY2xvc2VQbGF0Zm9ybS53YXJuaW5nXCI6XCLtlIzrnqvtj7zsnYQg64ur7Jy866m0IOyLpO2WiSDspJHsnbgg66qo65OgIOyekeyXhSDqs7XqsIQsIOyVsSDrmJDripQg7ZSE66Gc7IS47Iqk6rCAIOuLq+2emeuLiOuLpC5cIixcImJhY2tcIjpcIuuSpOuhnCDqsIDquLBcIixcImZvcndhcmRcIjpcIuyVnuycvOuhnCDqsIDquLBcIixcInJlbG9hZFwiOlwi7IOI66Gc6rOg7LmoXCIsXCJncmVlblwiOlwi64W57IOJXCIsXCJwdXJwbGVcIjpcIuuztOudvOyDiVwiLFwib3JhbmdlXCI6XCLsmKTroIzsp4Dsg4lcIixcInJlZFwiOlwi67mo6rCE7IOJXCIsXCJwaW5rXCI6XCLtlZHtgazsg4lcIixcInllbGxvd1wiOlwi64W4656A7IOJXCIsXCJ0aGVtZS5saWdodFwiOlwi67Cd7J2AXCIsXCJ0aGVtZS5kYXJrXCI6XCLslrTrkZDsmrRcIixcInRoZW1lLnN5c3RlbVwiOlwiT1Mg7ISk7KCV6rO8IOuPmeq4sO2ZlFwiLFwidG9vbGJhci5oaWRlVGFic1wiOlwi7YOtIOyIqOq4sOq4sFwiLFwidG9vbGJhci5zaG93VGFic1wiOlwi7YOtIO2RnOyLnFwiLFwidG9vbGJhci5sb2NrXCI6XCLsnqDquIhcIixcInRvb2xiYXIudW5sb2NrXCI6XCLsnqDquIgg7ZW07KCcXCIsXCJ0b29sYmFyLmNvbG9yTGlua2luZ1wiOlwi7IOJ7IOBIOyXsOqysFwiLFwidG9vbGJhci5jaGFuZ2VMYXlvdXRcIjpcIuugiOydtOyVhOybgyDrs4Dqsr1cIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcIuyggOyepSDrqZTribRcIixcInRvb2xiYXIubWF4aW1pemVXaW5kb3dcIjpcIuywvSDstZzrjIDtmZRcIixcInRvb2xiYXIucmVzdG9yZVdpbmRvd1wiOlwi7LC9IOuzteybkFwiLFwidG9vbGJhci5taW5pbWl6ZVdpbmRvd1wiOlwi7LC9IOy1nOyGjO2ZlFwiLFwiY2hhbmdlTGF5b3V0LmZ1bGxXaWR0aFwiOlwi7KCE7LK0IOuEiOu5hFwiLFwiY2hhbmdlTGF5b3V0LmNvbHVtbnNcIjpcIuyXtFwiLFwiY2hhbmdlTGF5b3V0LlJvd3NcIjpcIu2WiVwiLFwiY2hhbmdlTGF5b3V0LkdyaWRcIjpcIuq3uOumrOuTnFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTd2l0Y2hlZFwiOlwi7J6R7JeFIOqzteqwhCDsoITtmZhcIixcInN1Y2Nlc3NJbmRpY2F0b3IuaGlkZGVuXCI6XCLtg60g7Iio6rmAXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnNob3duXCI6XCLtg60g7ZGc7IucXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxvY2tlZFwiOlwi7Y6Y7J207KeAIOyeoOq4iFwiLFwic3VjY2Vzc0luZGljYXRvci51bmxvY2tlZFwiOlwi7Y6Y7J207KeAIOyeoOq4iCDtlbTsoJzrkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRcIjpcIuyekeyXhSDqs7XqsIQg7KCA7J6l65CoXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVNhdmVkQXNcIjpcIuyekeyXhSDqs7XqsITsnbQge3t3b3Jrc3BhY2V9fSjsnLwp66GcIOyggOyepeuQqFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VSZW5hbWVkXCI6XCLsnpHsl4Ug6rO16rCEIOydtOumhCDrs4Dqsr3rkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZVNhdmVkXCI6XCLtjpjsnbTsp4Ag7KCA7J6l65CoXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VIYXNCZWVuU2F2ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBoYXMgYmVlbiBzYXZlZC4gS1JcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUNvcHlTYXZlZFwiOlwi7Y6Y7J207KeA6rCAIHt7dGl0bGV9fSjsnLwp66GcIOyggOyepeuQqFwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlUmVuYW1lZFwiOlwi7Y6Y7J207KeAIOydtOumhCDrs4Dqsr3rkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwi7Luo7YWN7Iqk7Yq4IOq3uOujuSDsoIHsmqnrkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3IubmFtZWRDb250ZXh0R3JvdXBBcHBsaWVkXCI6XCJ7e2NvbG9yTmFtZX19IOy7qO2FjeyKpO2KuCDqt7jro7kg7KCB7Jqp65CoXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnZpZXdSZW1vdmVkXCI6XCLsu6jthY3siqTtirgg6re466O57JeQ7IScIOu3sCDsoJzqsbDrkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld3NSZW1vdmVkXCI6XCLsu6jthY3siqTtirgg6re466O57JeQ7IScIOu3sCDsoJzqsbDrkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3IubGF5b3V0QXBwbGllZFwiOlwie3tsYXlvdXROYW1lfX0g66CI7J207JWE7JuDIOyggeyaqeuQqFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VEZWxldGVkXCI6XCLsnpHsl4Ug6rO16rCEIOyCreygnOuQqFwiLFwiZXJyb3JJbmRpY2F0b3IucGFnZVNhdmVGYWlsZWRcIjpcIu2OmOydtOyngCDsoIDsnqUg7Iuk7YyoXCIsXCJlcnJvckluZGljYXRvci53b3Jrc3BhY2VTYXZlRmFpbGVkXCI6XCLsnpHsl4Ug6rO16rCEIOyggOyepSDsi6TtjKhcIixcImVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlUGFnZVwiOlwi7Y6Y7J207KeAIOuzteygnCDsi6TtjKhcIixcImluZm9JbmRpY2F0b3IuY29sb3JMaW5rQXR0ZW1wdFwiOlwi7J20IO2DreydmCDsg4nsg4Eg66eB7YGs66W8IOyLnOuPhO2WiOyngOunjCDsgqzsnbTtirgv7L2Y7YWQ7LigIOyGjOycoOyekOqwgCDslYTsp4Eg7Zmc7ISx7ZmU7ZWY7KeAIOyViuyVmOyKteuLiOuLpC5cIixcImdsb2JhbC5jYW5jZWxcIjpcIuy3qOyGjFwiLFwiZ2xvYmFsLmNvbmZpcm1cIjpcIu2ZleyduFwiLFwiZ2xvYmFsLnNhdmVcIjpcIuyggOyepVwiLFwiZ2xvYmFsLmRlbGV0ZVwiOlwiRGVsZXRlIEtSXCIsXCJhcHBSZXN1bHRzLmhlYWRlclwiOlwiRmVhdHVyZWQgQ29udGVudCBLUlwiLFwicmVjZW50bHlDbG9zZWQuaGVhZGVyXCI6XCJSZWNlbnRseSBDbG9zZWQgS1JcIixcImxhbmRpbmdQYWdlLnN1YmhlYWRlclwiOlwiQXBwcyBhbmQgd2Vic2l0ZXMgc2VsZWN0ZWQgYnkgYW4gYWRtaW4gd2lsbCBzaG93IGhlcmUgS1JcIixcImFyaWEub3BlbkJyb3dzZXJcIjpcIuu4jOudvOyasOyggCDrqZTribQg7Je06riwXCIsXCJhcmlhLmJyb3dzZXJUYWJzXCI6XCLruIzrnbzsmrDsoIAg7YOtXCIsXCJhcmlhLnZpZXdUYWJcIjpcInt7dGl0bGV9feydmCDrt7Ag7YOtXCIsXCJhcmlhLmNsb3NlUGFnZVwiOlwie3t0aXRsZX197J2YIO2OmOydtOyngCDri6vquLAg7YOtXCIsXCJhcmlhLmNsb3NlVGFiXCI6XCLtg60ge3t0aXRsZX19IOuLq+q4sFwiLFwiYXJpYS50aXRsZVwiOlwi7KCc66qpXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCLsnbTsiqTsvIDsnbTtlITrpbwg7IKs7Jqp7ZWY7JesIOy7qO2FjeyKpO2KuCDqt7jro7kg7ISg7YOdIOuMgO2ZlOyDgeyekCDri6vquLBcIixcImFyaWEuY29sb3JMaW5raW5nXCI6XCLsg4nsg4Eg7Jew6rKwIO2RnOyLnCDrmJDripQg7Iio6riw6riwXCIsXCJhcmlhLmFwcGx5Q29sb3JMaW5raW5nXCI6XCLsg4nsg4Eg7Jew6rKw7J2EIOyggeyaqe2VmOugpOuptCDrt7Drpbwg7ISg7YOd7ZWY7Iut7Iuc7JikLlwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld1wiOlwie3tuYW1lfX0g7Luo7YWN7Iqk7Yq4IOq3uOujueyXkCDtlaDri7nrkJwg7ZiE7J6sIOu3sFwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld3NcIjpcInt7bmFtZX19IOy7qO2FjeyKpO2KuCDqt7jro7nsl5Ag7ZWg64u565CcIO2YhOyerCDrt7BcIixcImFyaWEuc2V0Q29sb3JMaW5raW5nQWN0aXZlVmlld1wiOlwi7Zmc7ISxIOu3sOulvCB7e25hbWV9fSDsu6jthY3siqTtirgg6re466O57Jy866GcIOyEpOyglVwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3c1wiOlwi7Zmc7ISxIOu3sOulvCB7e25hbWV9fSDsu6jthY3siqTtirgg6re466O57Jy866GcIOyEpOyglVwiLFwiYXJpYS5lc2NhcGVMYXlvdXREaWFsb2dcIjpcIuydtOyKpOy8gOydtO2UhOulvCDsgqzsmqntlZjsl6wg66CI7J207JWE7JuDIOuzgOqyvSDrjIDtmZTsg4HsnpAg64ur6riwXCIsXCJnbG9iYWwuc3VwZXJ0YWJcIjpcIlN1cGVydGFiIEtSXCIsXCJnbG9iYWwudGFiXCI6XCJUYWIgS1JcIixcImJvb2ttYXJrcy5lZGl0Qm9va21hcmtcIjpcIkVkaXQgQm9va21hcmsgS1JcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkXCI6XCJCb29rbWFyayBhZGRlZCBLUlwiLFwiYm9va21hcmtzLmRvbmVcIjpcIkRvbmUgS1JcIixcImJvb2ttYXJrcy5yZW1vdmVcIjpcIlJlbW92ZSBLUlwiLFwiYm9va21hcmtzLmJvb2ttYXJrc1BhbmVsXCI6XCJCb29rbWFya3MgUGFuZWwgS1JcIixcImJvb2ttYXJrcy5jbG9zZVBhbmVsXCI6XCJDbG9zZSBCb29rbWFya3MgUGFuZWwgS1JcIixcImJvb2ttYXJrcy5ib29rbWFya3NcIjpcIkJvb2ttYXJrcyBLUlwiLFwiYm9va21hcmtzLmFsbEJvb2ttYXJrc1wiOlwiQWxsIEJvb2ttYXJrcyBLUlwiLFwiYm9va21hcmtzLmZhdm9yaXRlc1wiOlwiRmF2b3JpdGVzIEtSXCIsXCJib29rbWFya3Muc2VhcmNoQm9va21hcmtzXCI6XCJTZWFyY2ggQm9va21hcmtzIEtSXCIsXCJib29rbWFya3MuY2xlYXJTZWFyY2hJbnB1dFwiOlwiQ2xlYXIgU2VhcmNoIElucHV0IEtSXCIsXCJib29rbWFya3MuY3JlYXRlRm9sZGVyXCI6XCJDcmVhdGUgTmV3IEZvbGRlciBLUlwiLFwiYm9va21hcmtzLmV4aXRGb2xkZXJcIjpcIkV4aXQgRm9sZGVyIEtSXCIsXCJib29rbWFya3MubmV3Rm9sZGVyXCI6XCJOZXcgRm9sZGVyIEtSXCIsXCJib29rbWFya3MubmFtZWRGb2xkZXJcIjpcInt7bmFtZX19IEZvbGRlciBLUlwiLFwiYm9va21hcmtzLmJvb2ttYXJrU2V0dGluZ3NcIjpcInt7bmFtZX19IEJvb2ttYXJrIFNldHRpbmdzIEtSXCIsXCJib29rbWFya3MuZm9sZGVyU2V0dGluZ3NcIjpcInt7bmFtZX19IEZvbGRlciBTZXR0aW5ncyBLUlwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kXCI6XCJObyByZXN1bHRzIGZvdW5kIEtSXCIsXCJib29rbWFya3Mubm9SZXN1bHRzRm91bmRTdWJ0ZXh0XCI6XCJUaGVyZSBhcmUgbm8gYm9va21hcmtzIHRoYXQgbWF0Y2ggeW91ciBzZWFyY2ggS1JcIixcImJvb2ttYXJrcy5ub3RoaW5nVG9TaG93XCI6XCJOb3RoaW5nIHRvIHNob3cgeWV0IEtSXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1N1YnRleHRcIjpcIkFkZCBhIGJvb2ttYXJrIHRvIHRoaXMgZm9sZGVyIEtSXCIsXCJib29rbWFya3MucmVzdWx0c0ZvdW5kSW5cIjpcIlJlc3VsdHMgZm91bmQgaW4ge3tuYW1lfX0gS1JcIixcImJvb2ttYXJrcy5yZXN1bHRzSW5PdGhlckZvbGRlcnNcIjpcIlJlc3VsdHMgZm91bmQgaW4gb3RoZXIgZm9sZGVycyBLUlwiLFwiYm9va21hcmtzLmFsbFJlc3VsdHNGb3VuZEluXCI6XCJBbGwgcmVzdWx0cyBmb3VuZCBpbiBLUlwiLFwiYm9va21hcmtzLmVkaXROYW1lXCI6XCJFZGl0IE5hbWUgS1JcIixcImJvb2ttYXJrcy5tb3ZlXCI6XCJNb3ZlIEtSXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFRpdGxlXCI6XCJCb29rbWFyayBBZGRlZCBLUlwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUb0ZvbGRlclwiOlwiWW91ciBib29rbWFyayB3YXMgYWRkZWQgdG8gXFxcXFwie3tmb2xkZXJOYW1lfX1cXFxcXCIgS1JcIixcImJvb2ttYXJrcy5ib29rbWFya0VkaXRlZFRpdGxlXCI6XCJCb29rbWFyayBFZGl0ZWQgS1JcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5zYXZlU3VwZXJ0YWJcIjpcIlNhdmUgU3VwZXJ0YWIgS1JcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBcy4uLiBLUlwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmR1cGxpY2F0ZVwiOlwiRHVwbGljYXRlIEtSXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZGVsZXRlU3VwZXJ0YWJcIjpcIkRlbGV0ZSBTdXBlcnRhYiBLUlwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51Lm5ld1RhYlwiOlwiTmV3IFRhYiBLUlwiLFwiZW50ZXJwcmlzZVNhdmVNZW51LnNhdmVTdXBlcnRhYkFzXCI6XCJTYXZlIFN1cGVydGFiIEFzIEtSXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnJlbmFtZVN1cGVydGFiXCI6XCJSZW5hbWUgS1JcIixcImVudGVycHJpc2VTYXZlTW9kYWwudW5zYXZlZENoYW5nZXNcIjpcIllvdSBoYXZlIHVuc2F2ZWQgY2hhbmdlcyBpbiB0aGlzIFRhYi4gS1JcIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VUYWJcIjpcIkNsb3NlIFRhYiBLUlwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVN1cGVydGFiXCI6XCJDbG9zZSBTdXBlcnRhYiBLUlwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5zYXZlU3VwZXJ0YWJDb3VudFwiOlwiU2F2ZSB7e2NvdW50fX0gU3VwZXJ0YWJzIGJlZm9yZSBjbG9zaW5nPyBLUlwiLFwiZW50ZXJwcmlzZU1vZGFsLmRpc2NhcmRTdXBlcnRhYldhcm5pbmdcIjpcIkFueSB1bnNhdmVkIGNoYW5nZXMgdG8gdGhpcyBTdXBlcnRhYiB3aWxsIGJlIGxvc3QuIEtSXCIsXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJcIjpcIkRlbGV0ZSB0aGUgXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiPyBLUlwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiV2FybmluZ1wiOlwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIFN1cGVydGFiPyBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lIGFuZCBpcyBwZXJtYW5lbnQuIEtSXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYlNhdmVkXCI6XCJTdXBlcnRhYiBTYXZlZCBLUlwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJIYXNCZWVuU2F2ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBzYXZlZC4gS1JcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiRGVsZXRlZFwiOlwiU3VwZXJ0YWIgRGVsZXRlZCBLUlwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJIYXNCZWVuRGVsZXRlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiIGhhcyBiZWVuIGRlbGV0ZWQuIEtSXCIsXCJlbnRlcnByaXNlRXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVUYWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgVGFiIEtSXCIsXCJlbnRlcnByaXNlRXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVTdXBlcnRhYlwiOlwiRmFpbGVkIHRvIGR1cGxpY2F0ZSBTdXBlcnRhYiBLUlwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuc3dpdGNoVG9TdXBlcnRhYlwiOlwiU3dpdGNoIHRvIFN1cGVydGFiIEtSXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci5nb1RvXCI6XCJHbyB0byB7e3R5cGV9fSBLUlwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIudmlld01vcmVcIjpcIlZpZXcgTW9yZSBLUlwiLFwiY29udGV4dE1lbnUucXVpdEVudGVycHJpc2VCcm93c2VyXCI6XCJRdWl0IEtSXCJ9JyksamE9SlNPTi5wYXJzZSgne1wiY29udGV4dE1lbnUubmV3V2luZG93XCI6XCLQndC+0LLQvtC1INC+0LrQvdC+XCIsXCJjb250ZXh0TWVudS5uZXdQYWdlXCI6XCLQndC+0LLQsNGPINGB0YLRgNCw0L3QuNGG0LBcIixcImNvbnRleHRNZW51LnJlc3RvcmVcIjpcItCS0L7RgdGB0YLQsNC90L7QstC40YLRjCDQv9C+0YHQu9C10LTQvdC40LUg0YHQvtGF0YDQsNC90LXQvdC90YvQtSDQuNC30LzQtdC90LXQvdC40Y9cIixcImNvbnRleHRNZW51LnN3aXRjaFdvcmtzcGFjZVwiOlwi0J/QtdGA0LXQutC70Y7Rh9C40YLRjCDRgNCw0LHQvtGH0YPRjiDQvtCx0LvQsNGB0YLRjFwiLFwiY29udGV4dE1lbnUuYXBwZWFyYW5jZVwiOlwi0JLQvdC10YjQvdC40Lkg0LLQuNC0XCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlXCI6XCLQodC+0YXRgNCw0L3QuNGC0Ywg0YDQsNCx0L7Rh9GD0Y4g0L7QsdC70LDRgdGC0YxcIixcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi0KHQvtGF0YDQsNC90LjRgtGMINGA0LDQsdC+0YfRg9GOINC+0LHQu9Cw0YHRgtGMINC60LDQui4uLlwiLFwiY29udGV4dE1lbnUucmVuYW1lV29ya3NwYWNlXCI6XCLQn9C10YDQtdC40LzQtdC90L7QstCw0YLRjCDRgNCw0LHQvtGH0YPRjiDQvtCx0LvQsNGB0YLRjFwiLFwiY29udGV4dE1lbnUuZGVsZXRlV29ya3NwYWNlXCI6XCLQo9C00LDQu9C40YLRjCDRgNCw0LHQvtGH0YPRjiDQvtCx0LvQsNGB0YLRjFwiLFwiY29udGV4dE1lbnUuZG93bmxvYWRzXCI6XCLQl9Cw0LPRgNGD0LfQutC4XCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiOlwi0KHQvtGF0YDQsNC90LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcIixcImNvbnRleHRNZW51LnNhdmVQYWdlQXNcIjpcItCh0L7RhdGA0LDQvdC40YLRjCDRgdGC0YDQsNC90LjRhtGDINC60LDQui4uLlwiLFwiY29udGV4dE1lbnUucHJpbnRcIjpcItCf0LXRh9Cw0YLRjC4uLlwiLFwiY29udGV4dE1lbnUucHJpbnRTY3JlZW5cIjpcItCg0LDRgdC/0LXRh9Cw0YLQsNGC0Ywg0Y3QutGA0LDQvVwiLFwiY29udGV4dE1lbnUuY2xvc2VXaW5kb3dcIjpcItCX0LDQutGA0YvRgtGMINC+0LrQvdC+XCIsXCJjb250ZXh0TWVudS5vcGVuU3RvcmVmcm9udFwiOlwi0J7RgtC60YDRi9GC0YwgU3RvcmVmcm9udFwiLFwiY29udGV4dE1lbnUucXVpdFBsYXRmb3JtXCI6XCLQktGL0LnRgtC4INC40Lcg0L/Qu9Cw0YLRhNC+0YDQvNGLXCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCLQndC+0LLQvtC1INC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1XCIsXCJjb250ZXh0TWVudS5vcGVuVmlld1wiOlwi0J7RgtC60YDRi9GC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0YEg0L/QvtC80L7RidGM0Y4g0LLQtdCxLdCx0YDQsNGD0LfQtdGA0LAg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y5cIixcImNvbnRleHRNZW51Lm9wZW5WaWV3c1wiOlwi0J7RgtC60YDRi9GC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40Y8g0YEg0L/QvtC80L7RidGM0Y4g0LLQtdCxLdCx0YDQsNGD0LfQtdGA0LAg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y5cIixcImNvbnRleHRNZW51LnJlbG9hZFwiOlwiUmVsb2FkIFJVXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3XCI6XCLQn9C10YDQtdC30LDQs9GA0YPQt9C40YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtVwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld3NcIjpcItCf0LXRgNC10LfQsNCz0YDRg9C30LjRgtGMINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNGPXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBSVVwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlVmlld1wiOlwi0JTRg9Cx0LvQuNGA0L7QstCw0YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtVwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlVmlld3NcIjpcItCU0YPQsdC70LjRgNC+0LLQsNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40Y9cIixcImNvbnRleHRNZW51LmFkZFZpZXdcIjpcItCU0L7QsdCw0LLQuNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0L3QsCDQutCw0L3QsNC7XCIsXCJjb250ZXh0TWVudS5hZGRWaWV3c1wiOlwi0JTQvtCx0LDQstC40YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjRjyDQvdCwINC60LDQvdCw0LtcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdcIjpcItCj0LTQsNC70LjRgtGMINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1INC40Lcg0LrQsNC90LDQu9CwXCIsXCJjb250ZXh0TWVudS5yZW1vdmVWaWV3c1wiOlwi0KPQtNCw0LvQuNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40Y8g0LjQtyDQutCw0L3QsNC70LBcIixcImNvbnRleHRNZW51LmNsb3NlVmlld1wiOlwi0JfQsNC60YDRi9GC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LVcIixcImNvbnRleHRNZW51LmNsb3NlVmlld3NcIjpcItCX0LDQutGA0YvRgtGMINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNGPXCIsXCJjb250ZXh0TWVudS5jbG9zZVRhYlwiOlwiQ2xvc2UgVGFiIFJVXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVQYWdlXCI6XCLQlNGD0LHQu9C40YDQvtCy0LDRgtGMINGB0YLRgNCw0L3QuNGG0YNcIixcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRcIjpcItCf0LXRh9Cw0YLQsNGC0YxcIixcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRBbGxcIjpcItCf0LXRh9Cw0YLQsNGC0Ywg0LLRgdC1XCIsXCJzYXZlTWVudS5zYXZlV29ya3NwYWNlQXNcIjpcItCh0L7RhdGA0LDQvdC40YLRjCDRgNCw0LHQvtGH0YPRjiDQvtCx0LvQsNGB0YLRjCDQutCw0LpcIixcInNhdmVNZW51LnNhdmVQYWdlQXNcIjpcItCh0L7RhdGA0LDQvdC40YLRjCDRgdGC0YDQsNC90LjRhtGDINC60LDQulwiLFwic2F2ZU1vZGFsLmVudGVyVmFsdWVcIjpcIlBsZWFzZSBlbnRlciBhIHZhbHVlIFJVXCIsXCJzYXZlTW9kYWwuYWxyZWFkeUV4aXN0c1wiOlwie3t0aXRsZX19INGD0LbQtSDRgdGD0YnQtdGB0YLQstGD0LXRgi5cIixcInNhdmVNb2RhbC5wbGVhc2VFbnRlclZhbGlkTmFtZVwiOlwi0JLQstC10LTQuNGC0LUg0L/QvtC00YXQvtC00Y/RidC10LUg0LjQvNGPXCIsXCJzYXZlTW9kYWwucmVuYW1lUGFnZVwiOlwi0J/QtdGA0LXQuNC80LXQvdC+0LLQsNGC0Ywg0YHRgtGA0LDQvdC40YbRg1wiLFwic2F2ZU1vZGFsLmNsb3NlUGFnZVwiOlwi0JfQsNC60YDRi9GC0Ywg0YHRgtGA0LDQvdC40YbRg1wiLFwic2F2ZU1vZGFsLmRpc2NhcmRDaGFuZ2VzXCI6XCLQntGC0LzQtdC90LjRgtGMINC40LfQvNC10L3QtdC90LjRj1wiLFwic2F2ZU1vZGFsLmRpc2NhcmRBbGxcIjpcItCe0YLQvNC10L3QuNGC0Ywg0LLRgdC1XCIsXCJzYXZlTW9kYWwuc2F2ZUFsbFwiOlwi0KHQvtGF0YDQsNC90LjRgtGMINCy0YHQtVwiLFwic2F2ZU1vZGFsLnNhdmVQYWdlc0NvdW50XCI6XCLQodC+0YXRgNCw0L3QuNGC0YwgKHt7Y291bnR9fSkg0YHRgtGA0LDQvdC40YYg0L/QtdGA0LXQtCDQt9Cw0LrRgNGL0YLQuNC10Lw/XCIsXCJkZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBQYWdlIFJVXCIsXCJlbnRlcnByaXNlRGVmYXVsdFBhZ2VUaXRsZVwiOlwiVW50aXRsZWQgU3VwZXJ0YWIgUlVcIixcImFkZE5ld1BhZ2VcIjpcItCU0L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YPRjiDRgdGC0YDQsNC90LjRhtGDXCIsXCJhZGROZXdUYWJcIjpcItCU0L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YPRjiDQstC60LvQsNC00LrRg1wiLFwiYWRkTmV3Vmlld1wiOlwi0J3QvtCy0L7QtSDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtVwiLFwicmVzdG9yZU1vZGFsXCI6XCLQktGLINGD0LLQtdGA0LXQvdGLLCDRh9GC0L4g0YXQvtGC0LjRgtC1INCy0L7RgdGB0YLQsNC90L7QstC40YLRjCDQv9C+0YHQu9C10LTQvdC40LUg0YHQvtGF0YDQsNC90LXQvdC90YvQtSDQuNC30LzQtdC90LXQvdC40Y8/XCIsXCJtb2RhbC5kaXNjYXJkV2FybmluZ1wiOlwi0JLRgdC1INC90LXRgdC+0YXRgNCw0L3QtdC90L3Ri9C1INC40LfQvNC10L3QtdC90LjRjyDQsdGD0LTRg9GCINC+0YLQvNC10L3QtdC90YtcIixcIm1vZGFsLmRpc2NhcmRQYWdlV2FybmluZ1wiOlwi0JLRgdC1INC90LXRgdC+0YXRgNCw0L3QtdC90L3Ri9C1INC40LfQvNC10L3QtdC90LjRjyDQvdCwINGN0YLQvtC5INGB0YLRgNCw0L3QuNGG0LUg0LHRg9C00YPRgiDQv9C+0YLQtdGA0Y/QvdGLLlwiLFwibW9kYWwuc2F2ZUNoYW5nZXNQcm9tcHRcIjpcItCh0L7RhdGA0LDQvdC40YLRjCDQuNC30LzQtdC90LXQvdC40Y8g0L/QtdGA0LXQtCDQt9Cw0LrRgNGL0YLQuNC10Lw/XCIsXCJtb2RhbC5wYWdlQ2xvc2VcIjpcItCX0LDQutGA0YvRgtGMINGB0YLRgNCw0L3QuNGG0YNcIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsXCI6XCLQktGLINGD0LLQtdGA0LXQvdGLLCDRh9GC0L4g0YXQvtGC0LjRgtC1INC/0LXRgNC10LnRgtC4INCyIHt7d29ya3NwYWNlfX0/XCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCLQktGB0LUg0L3QtdGB0L7RhdGA0LDQvdC10L3QvdGL0LUg0LjQt9C80LXQvdC10L3QuNGPINCx0YPQtNGD0YIg0L7RgtC80LXQvdC10L3Ri1wiLFwiZGVsZXRlV29ya3NwYWNlTW9kYWxcIjpcItCS0Ysg0YPQstC10YDQtdC90YssINGH0YLQviDRhdC+0YLQuNGC0LUg0L3QsNCy0YHQtdCz0LTQsCDRg9C00LDQu9C40YLRjCDRjdGC0YMg0YDQsNCx0L7Rh9GD0Y4g0L7QsdC70LDRgdGC0Yw/XCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwi0KDQsNCx0L7Rh9Cw0Y8g0L7QsdC70LDRgdGC0Ywg0YEg0LjQvNC10L3QtdC8IHt7d29ya3NwYWNlfX0g0YPQttC1INGB0YPRidC10YHRgtCy0YPQtdGCLiDQktGLINGF0L7RgtC40YLQtSDQt9Cw0LzQtdC90LjRgtGMINC10LU/XCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZy5ib2R5XCI6XCLQoNCw0LHQvtGH0LDRjyDQvtCx0LvQsNGB0YLRjCDRgSDRgtCw0LrQuNC8INC20LUg0LjQvNC10L3QtdC8INGD0LbQtSDRgdGD0YnQtdGB0YLQstGD0LXRgi4g0J/RgNC4INC10LUg0LfQsNC80LXQvdC1INGC0LXQutGD0YnQtdC1INGB0L7QtNC10YDQttC40LzQvtC1INCx0YPQtNC10YIg0L/QtdGA0LXQt9Cw0L/QuNGB0LDQvdC+LlwiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLnJlcGxhY2VcIjpcItCX0LDQvNC10L3QuNGC0YxcIixcImNsb3NlUGxhdGZvcm1cIjpcItCX0LDQutGA0YvRgtGMINC/0LvQsNGC0YTQvtGA0LzRg1wiLFwiY2xvc2VQbGF0Zm9ybS53b3Jrc3BhY2VcIjpcItCX0LDQutGA0YvRgtGMINC/0LvQsNGC0YTQvtGA0LzRgyB7e3dvcmtzcGFjZX19XCIsXCJjbG9zZVBsYXRmb3JtLndhcm5pbmdcIjpcItCX0LDQutGA0YvRgtC40LUg0L/Qu9Cw0YLRhNC+0YDQvNGLINC/0YDQuNCy0LXQtNC10YIg0Log0LfQsNC60YDRi9GC0LjRjiDQstGB0LXRhSDRgNCw0LHQvtGH0LjRhSDQvtCx0LvQsNGB0YLQtdC5LCDQv9GA0LjQu9C+0LbQtdC90LjQuSDQuCDQt9Cw0L/Rg9GJ0LXQvdC90YvRhSDQv9GA0L7RhtC10YHRgdC+0LIuXCIsXCJiYWNrXCI6XCLQndCw0LfQsNC0XCIsXCJmb3J3YXJkXCI6XCLQktC/0LXRgNC10LRcIixcInJlbG9hZFwiOlwi0J/QtdGA0LXQt9Cw0LPRgNGD0LfQuNGC0YzCoFwiLFwiZ3JlZW5cIjpcItCX0LXQu9C10L3Ri9C5XCIsXCJwdXJwbGVcIjpcItCk0LjQvtC70LXRgtC+0LLRi9C5XCIsXCJvcmFuZ2VcIjpcItCe0YDQsNC90LbQtdCy0YvQuVwiLFwicmVkXCI6XCLQmtGA0LDRgdC90YvQuVwiLFwicGlua1wiOlwi0KDQvtC30L7QstGL0LlcIixcInllbGxvd1wiOlwi0JbQtdC70YLRi9C5XCIsXCJ0aGVtZS5saWdodFwiOlwi0KHQstC10YLQu9GL0LlcIixcInRoZW1lLmRhcmtcIjpcItCi0LXQvNC90YvQuVwiLFwidGhlbWUuc3lzdGVtXCI6XCLQodC40L3RhdGA0L7QvdC40LfQuNGA0L7QstCw0YLRjCDRgSDQvdCw0YHRgtGA0L7QudC60LDQvNC4INCe0KFcIixcInRvb2xiYXIuaGlkZVRhYnNcIjpcItCh0LrRgNGL0YLRjCDQstC60LvQsNC00LrQuFwiLFwidG9vbGJhci5zaG93VGFic1wiOlwi0J/QvtC60LDQt9Cw0YLRjCDQstC60LvQsNC00LrQuFwiLFwidG9vbGJhci5sb2NrXCI6XCLQl9Cw0LHQu9C+0LrQuNGA0L7QstCw0YLRjFwiLFwidG9vbGJhci51bmxvY2tcIjpcItCg0LDQt9Cx0LvQvtC60LjRgNC+0LLQsNGC0YxcIixcInRvb2xiYXIuY29sb3JMaW5raW5nXCI6XCLQn9GA0LjQstGP0LfQutCwINC6INGG0LLQtdGC0YNcIixcInRvb2xiYXIuY2hhbmdlTGF5b3V0XCI6XCLQmNC30LzQtdC90LjRgtGMINC80LDQutC10YJcIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcItCc0LXQvdGOINGB0L7RhdGA0LDQvdC10L3QuNGPXCIsXCJ0b29sYmFyLm1heGltaXplV2luZG93XCI6XCLQo9Cy0LXQu9C40YfQuNGC0Ywg0L7QutC90L5cIixcInRvb2xiYXIucmVzdG9yZVdpbmRvd1wiOlwi0JLQvtGB0YHRgtCw0L3QvtCy0LjRgtGMINC+0LrQvdC+XCIsXCJ0b29sYmFyLm1pbmltaXplV2luZG93XCI6XCLQodCy0LXRgNC90YPRgtGMINC+0LrQvdC+XCIsXCJjaGFuZ2VMYXlvdXQuZnVsbFdpZHRoXCI6XCLQn9C+0LvQvdCw0Y8g0YjQuNGA0LjQvdCwXCIsXCJjaGFuZ2VMYXlvdXQuY29sdW1uc1wiOlwi0KHRgtC+0LvQsdGG0YtcIixcImNoYW5nZUxheW91dC5Sb3dzXCI6XCLQodGC0YDQvtC60LhcIixcImNoYW5nZUxheW91dC5HcmlkXCI6XCLQodC10YLQutCwXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVN3aXRjaGVkXCI6XCLQoNCw0LHQvtGH0LDRjyDQvtCx0LvQsNGB0YLRjCDQv9C10YDQtdC60LvRjtGH0LXQvdCwXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmhpZGRlblwiOlwi0JLQutC70LDQtNC60Lgg0YHQutGA0YvRgtGLXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnNob3duXCI6XCLQktC60LvQsNC00LrQuCDQv9C+0LrQsNC30LDQvdGLXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxvY2tlZFwiOlwi0KHRgtGA0LDQvdC40YbQsCDQt9Cw0LHQu9C+0LrQuNGA0L7QstCw0L3QsFwiLFwic3VjY2Vzc0luZGljYXRvci51bmxvY2tlZFwiOlwi0KHRgtGA0LDQvdC40YbQsCDRgNCw0LfQsdC70L7QutC40YDQvtCy0LDQvdCwXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVNhdmVkXCI6XCLQoNCw0LHQvtGH0LDRjyDQvtCx0LvQsNGB0YLRjCDRgdC+0YXRgNCw0L3QtdC90LBcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRBc1wiOlwi0KDQsNCx0L7Rh9Cw0Y8g0L7QsdC70LDRgdGC0Ywg0YHQvtGF0YDQsNC90LXQvdCwINC60LDQuiB7e3dvcmtzcGFjZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVJlbmFtZWRcIjpcItCg0LDQsdC+0YfQsNGPINC+0LHQu9Cw0YHRgtGMINC/0LXRgNC10LjQvNC10L3QvtCy0LDQvdCwXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VTYXZlZFwiOlwi0KHRgtGA0LDQvdC40YbQsCDRgdC+0YXRgNCw0L3QtdC90LBcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIGhhcyBiZWVuIHNhdmVkLiBSVVwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlQ29weVNhdmVkXCI6XCLQodGC0YDQsNC90LjRhtCwINGB0L7RhdGA0LDQvdC10L3QsCDQutCw0Loge3t0aXRsZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCLQodGC0YDQsNC90LjRhtCwINC/0LXRgNC10LjQvNC10L3QvtCy0LDQvdCwXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmNvbnRleHRHcm91cEFwcGxpZWRcIjpcItCa0L7QvdGC0LXQutGB0YLQvdCw0Y8g0LPRgNGD0L/Qv9CwINC/0YDQuNC80LXQvdC10L3QsFwiLFwic3VjY2Vzc0luZGljYXRvci5uYW1lZENvbnRleHRHcm91cEFwcGxpZWRcIjpcItCa0L7QvdGC0LXQutGB0YLQvdCw0Y8g0LPRgNGD0L/Qv9CwIHt7Y29sb3JOYW1lfX0g0L/RgNC40LzQtdC90LXQvdCwXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnZpZXdSZW1vdmVkXCI6XCLQn9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDRg9C00LDQu9C10L3QviDQuNC3INC60L7QvdGC0LXQutGB0YLQvdC+0Lkg0LPRgNGD0L/Qv9GLXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnZpZXdzUmVtb3ZlZFwiOlwi0J/RgNC10LTRgdGC0LDQstC70LXQvdC40Y8g0YPQtNCw0LvQtdC90Ysg0LjQtyDQutC+0L3RgtC10LrRgdGC0L3QvtC5INCz0YDRg9C/0L/Ri1wiLFwic3VjY2Vzc0luZGljYXRvci5sYXlvdXRBcHBsaWVkXCI6XCLQnNCw0LrQtdGCIHt7bGF5b3V0TmFtZX19INC/0YDQuNC80LXQvdC10L1cIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlRGVsZXRlZFwiOlwi0KDQsNCx0L7Rh9Cw0Y8g0L7QsdC70LDRgdGC0Ywg0YPQtNCw0LvQtdC90LBcIixcImVycm9ySW5kaWNhdG9yLnBhZ2VTYXZlRmFpbGVkXCI6XCLQndC1INGD0LTQsNC70L7RgdGMINGB0L7RhdGA0LDQvdC40YLRjCDRgdGC0YDQsNC90LjRhtGDXCIsXCJlcnJvckluZGljYXRvci53b3Jrc3BhY2VTYXZlRmFpbGVkXCI6XCLQndC1INGD0LTQsNC70L7RgdGMINGB0L7RhdGA0LDQvdC40YLRjCDRgNCw0LHQvtGH0YPRjiDQvtCx0LvQsNGB0YLRjFwiLFwiZXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVQYWdlXCI6XCLQndC1INGD0LTQsNC70L7RgdGMINC/0YDQvtC00YPQsdC70LjRgNC+0LLQsNGC0Ywg0YHRgtGA0LDQvdC40YbRg1wiLFwiaW5mb0luZGljYXRvci5jb2xvckxpbmtBdHRlbXB0XCI6XCLQnNGLINC/0L7Qv9GL0YLQsNC70LjRgdGMINC/0YDQuNCy0Y/Qt9Cw0YLRjCDRhtCy0LXRgiDQuiDRjdGC0L7QuSDQstC60LvQsNC00LrQtSwg0L3QviDQstC70LDQtNC10LvQtdGGINGB0LDQudGC0LAv0LrQvtC90YLQtdC90YLQsCDQtdGJ0LUg0L3QtSDQstC60LvRjtGH0LjQuyDRjdGC0YMg0LLQvtC30LzQvtC20L3QvtGB0YLRjFwiLFwiZ2xvYmFsLmNhbmNlbFwiOlwi0J7RgtC80LXQvdC40YLRjFwiLFwiZ2xvYmFsLmNvbmZpcm1cIjpcItCf0L7QtNGC0LLQtdGA0LTQuNGC0YxcIixcImdsb2JhbC5zYXZlXCI6XCLQodC+0YXRgNCw0L3QuNGC0YxcIixcImdsb2JhbC5kZWxldGVcIjpcIkRlbGV0ZSBSVVwiLFwiYXBwUmVzdWx0cy5oZWFkZXJcIjpcIkZlYXR1cmVkIENvbnRlbnQgUlVcIixcInJlY2VudGx5Q2xvc2VkLmhlYWRlclwiOlwiUmVjZW50bHkgQ2xvc2VkIFJVXCIsXCJsYW5kaW5nUGFnZS5zdWJoZWFkZXJcIjpcIkFwcHMgYW5kIHdlYnNpdGVzIHNlbGVjdGVkIGJ5IGFuIGFkbWluIHdpbGwgc2hvdyBoZXJlIFJVXCIsXCJhcmlhLm9wZW5Ccm93c2VyXCI6XCLQntGC0LrRgNGL0YLRjCDQvNC10L3RjiDQsdGA0LDRg9C30LXRgNCwXCIsXCJhcmlhLmJyb3dzZXJUYWJzXCI6XCLQktC60LvQsNC00LrQuCDQsdGA0LDRg9C30LXRgNCwXCIsXCJhcmlhLnZpZXdUYWJcIjpcItCS0LrQu9Cw0LTQutCwINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNGPIHt7dGl0bGV9fVwiLFwiYXJpYS5jbG9zZVBhZ2VcIjpcItCa0L3QvtC/0LrQsCDCq9CX0LDQutGA0YvRgtGMwrsg0L3QsCDQstC60LvQsNC00LrQtSDQtNC70Y8g0YHRgtGA0LDQvdC40YbRiyB7e3RpdGxlfX1cIixcImFyaWEuY2xvc2VUYWJcIjpcItCX0LDQutGA0YvRgtGMINCy0LrQu9Cw0LTQutGDIHt7dGl0bGV9fVwiLFwiYXJpYS50aXRsZVwiOlwi0J3QsNC30LLQsNC90LjQtVwiLFwiYXJpYS5jbG9zZUNvbnRleHRHcm91cFwiOlwi0KfRgtC+0LHRiyDQt9Cw0LrRgNGL0YLRjCDQtNC40LDQu9C+0LMg0LLRi9Cx0L7RgNCwINC60L7QvdGC0LXQutGB0YLQvdC+0Lkg0LPRgNGD0L/Qv9GLLCDQuNGB0L/QvtC70YzQt9GD0LnRgtC1IGVzY2FwZVwiLFwiYXJpYS5jb2xvckxpbmtpbmdcIjpcItCf0L7QutCw0LfQsNGC0Ywg0LjQu9C4INGB0LrRgNGL0YLRjCDQv9GA0LjQstGP0LfQutGDINC6INGG0LLQtdGC0YNcIixcImFyaWEuYXBwbHlDb2xvckxpbmtpbmdcIjpcItCS0YvQsdC10YDQuNGC0LUg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUsINGH0YLQvtCx0Ysg0L/RgNC40LzQtdC90LjRgtGMINC/0YDQuNCy0Y/Qt9C60YMg0Log0YbQstC10YLRg1wiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld1wiOlwi0KLQtdC60YPRidC10LUg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUsINC90LDQt9C90LDRh9C10L3QvdC+0LUg0LrQvtC90YLQtdC60YHRgtC90L7QuSDQs9GA0YPQv9C/0LUge3tuYW1lfX1cIixcImFyaWEuYXNzaWduQ29sb3JMaW5raW5nQ3VycmVudFZpZXdzXCI6XCLQotC10LrRg9GJ0LjQtSDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjRjywg0L3QsNC30L3QsNGH0LXQvdC90YvQtSDQutC+0L3RgtC10LrRgdGC0L3QvtC5INCz0YDRg9C/0L/QtSB7e25hbWV9fVwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3XCI6XCLQo9GB0YLQsNC90L7QstC40YLRjCDQsNC60YLQuNCy0L3QvtC1INC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1INCyINC60L7QvdGC0LXQutGB0YLQvdGD0Y4g0LPRgNGD0L/Qv9GDIHt7bmFtZX19XCIsXCJhcmlhLnNldENvbG9yTGlua2luZ0FjdGl2ZVZpZXdzXCI6XCLQo9GB0YLQsNC90L7QstC40YLRjCDQsNC60YLQuNCy0L3Ri9C1INC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNGPINCyINC60L7QvdGC0LXQutGB0YLQvdGD0Y4g0LPRgNGD0L/Qv9GDIHt7bmFtZX19XCIsXCJhcmlhLmVzY2FwZUxheW91dERpYWxvZ1wiOlwi0KfRgtC+0LHRiyDQt9Cw0LrRgNGL0YLRjCDQtNC40LDQu9C+0LMg0LjQt9C80LXQvdC10L3QuNGPINC80LDQutC10YLQsCwg0LjRgdC/0L7Qu9GM0LfRg9C50YLQtSBlc2NhcGVcIixcImdsb2JhbC5zdXBlcnRhYlwiOlwiU3VwZXJ0YWIgUlVcIixcImdsb2JhbC50YWJcIjpcIlRhYiBSVVwiLFwiYm9va21hcmtzLmVkaXRCb29rbWFya1wiOlwiRWRpdCBCb29rbWFyayBSVVwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRcIjpcIkJvb2ttYXJrIGFkZGVkIFJVXCIsXCJib29rbWFya3MuZG9uZVwiOlwiRG9uZSBSVVwiLFwiYm9va21hcmtzLnJlbW92ZVwiOlwiUmVtb3ZlIFJVXCIsXCJib29rbWFya3MuYm9va21hcmtzUGFuZWxcIjpcIkJvb2ttYXJrcyBQYW5lbCBSVVwiLFwiYm9va21hcmtzLmNsb3NlUGFuZWxcIjpcIkNsb3NlIEJvb2ttYXJrcyBQYW5lbCBSVVwiLFwiYm9va21hcmtzLmJvb2ttYXJrc1wiOlwiQm9va21hcmtzIFJVXCIsXCJib29rbWFya3MuYWxsQm9va21hcmtzXCI6XCJBbGwgQm9va21hcmtzIFJVXCIsXCJib29rbWFya3MuZmF2b3JpdGVzXCI6XCJGYXZvcml0ZXMgUlVcIixcImJvb2ttYXJrcy5zZWFyY2hCb29rbWFya3NcIjpcIlNlYXJjaCBCb29rbWFya3MgUlVcIixcImJvb2ttYXJrcy5jbGVhclNlYXJjaElucHV0XCI6XCJDbGVhciBTZWFyY2ggSW5wdXQgUlVcIixcImJvb2ttYXJrcy5jcmVhdGVGb2xkZXJcIjpcIkNyZWF0ZSBOZXcgRm9sZGVyIFJVXCIsXCJib29rbWFya3MuZXhpdEZvbGRlclwiOlwiRXhpdCBGb2xkZXIgUlVcIixcImJvb2ttYXJrcy5uZXdGb2xkZXJcIjpcIk5ldyBGb2xkZXIgUlVcIixcImJvb2ttYXJrcy5uYW1lZEZvbGRlclwiOlwie3tuYW1lfX0gRm9sZGVyIFJVXCIsXCJib29rbWFya3MuYm9va21hcmtTZXR0aW5nc1wiOlwie3tuYW1lfX0gQm9va21hcmsgU2V0dGluZ3MgUlVcIixcImJvb2ttYXJrcy5mb2xkZXJTZXR0aW5nc1wiOlwie3tuYW1lfX0gRm9sZGVyIFNldHRpbmdzIFJVXCIsXCJib29rbWFya3Mubm9SZXN1bHRzRm91bmRcIjpcIk5vIHJlc3VsdHMgZm91bmQgUlVcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFN1YnRleHRcIjpcIlRoZXJlIGFyZSBubyBib29rbWFya3MgdGhhdCBtYXRjaCB5b3VyIHNlYXJjaCBSVVwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dcIjpcIk5vdGhpbmcgdG8gc2hvdyB5ZXQgUlVcIixcImJvb2ttYXJrcy5ub3RoaW5nVG9TaG93U3VidGV4dFwiOlwiQWRkIGEgYm9va21hcmsgdG8gdGhpcyBmb2xkZXIgUlVcIixcImJvb2ttYXJrcy5yZXN1bHRzRm91bmRJblwiOlwiUmVzdWx0cyBmb3VuZCBpbiB7e25hbWV9fSBSVVwiLFwiYm9va21hcmtzLnJlc3VsdHNJbk90aGVyRm9sZGVyc1wiOlwiUmVzdWx0cyBmb3VuZCBpbiBvdGhlciBmb2xkZXJzIFJVXCIsXCJib29rbWFya3MuYWxsUmVzdWx0c0ZvdW5kSW5cIjpcIkFsbCByZXN1bHRzIGZvdW5kIGluIFJVXCIsXCJib29rbWFya3MuZWRpdE5hbWVcIjpcIkVkaXQgTmFtZSBSVVwiLFwiYm9va21hcmtzLm1vdmVcIjpcIk1vdmUgUlVcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVGl0bGVcIjpcIkJvb2ttYXJrIEFkZGVkIFJVXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFRvRm9sZGVyXCI6XCJZb3VyIGJvb2ttYXJrIHdhcyBhZGRlZCB0byBcXFxcXCJ7e2ZvbGRlck5hbWV9fVxcXFxcIiBSVVwiLFwiYm9va21hcmtzLmJvb2ttYXJrRWRpdGVkVGl0bGVcIjpcIkJvb2ttYXJrIEVkaXRlZCBSVVwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYlwiOlwiU2F2ZSBTdXBlcnRhYiBSVVwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYkFzXCI6XCJTYXZlIFN1cGVydGFiIEFzLi4uIFJVXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgUlVcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kZWxldGVTdXBlcnRhYlwiOlwiRGVsZXRlIFN1cGVydGFiIFJVXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUubmV3VGFiXCI6XCJOZXcgVGFiIFJVXCIsXCJlbnRlcnByaXNlU2F2ZU1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMgUlVcIixcImVudGVycHJpc2VTYXZlTW9kYWwucmVuYW1lU3VwZXJ0YWJcIjpcIlJlbmFtZSBSVVwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC51bnNhdmVkQ2hhbmdlc1wiOlwiWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzIGluIHRoaXMgVGFiLiBSVVwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVRhYlwiOlwiQ2xvc2UgVGFiIFJVXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlU3VwZXJ0YWJcIjpcIkNsb3NlIFN1cGVydGFiIFJVXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnNhdmVTdXBlcnRhYkNvdW50XCI6XCJTYXZlIHt7Y291bnR9fSBTdXBlcnRhYnMgYmVmb3JlIGNsb3Npbmc/IFJVXCIsXCJlbnRlcnByaXNlTW9kYWwuZGlzY2FyZFN1cGVydGFiV2FybmluZ1wiOlwiQW55IHVuc2F2ZWQgY2hhbmdlcyB0byB0aGlzIFN1cGVydGFiIHdpbGwgYmUgbG9zdC4gUlVcIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYlwiOlwiRGVsZXRlIHRoZSBcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWI/IFJVXCIsXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJXYXJuaW5nXCI6XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgU3VwZXJ0YWI/IFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUgYW5kIGlzIHBlcm1hbmVudC4gUlVcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiU2F2ZWRcIjpcIlN1cGVydGFiIFNhdmVkIFJVXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiIGhhcyBiZWVuIHNhdmVkLlJVXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIjpcIlN1cGVydGFiIERlbGV0ZWQgUlVcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlbkRlbGV0ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBkZWxldGVkLiBSVVwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlVGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFRhYiBSVVwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlU3VwZXJ0YWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgU3VwZXJ0YWIgUlVcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnN3aXRjaFRvU3VwZXJ0YWJcIjpcIlN3aXRjaCB0byBTdXBlcnRhYiBSVVwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuZ29Ub1wiOlwiR28gdG8ge3t0eXBlfX0gUlVcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnZpZXdNb3JlXCI6XCJWaWV3IE1vcmUgUlVcIixcImNvbnRleHRNZW51LnF1aXRFbnRlcnByaXNlQnJvd3NlclwiOlwiUXVpdCBSVVwifScpO2NvbnN0IFFhPUhhKCkudCxZYT1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCBxdChlKTtyZXR1cm4gYXdhaXQgdC5kaXNwYXRjaChlYS5HZXRQYWdlcyl9LFhhPWFzeW5jIGU9Pihhd2FpdCBxdChlLmlkZW50aXR5KSkuZGlzcGF0Y2goZWEuVXBkYXRlUGFnZUZvcldpbmRvdyxlKTtsZXQgZW49ITE7YXN5bmMgZnVuY3Rpb24gdG4oZSx0KXtjb25zdCBhPSEhdDtsZXQgbj1uZXcgU2V0O2lmKGEpe2NvbnN0e2lkZW50aXR5OmUscGFnZUlkOmF9PXQsbz1BYSgpLkJyb3dzZXIud3JhcFN5bmMoZSkscj1hd2FpdCBvLmdldFBhZ2UoYSk7cj8ucGFuZWxzJiYobj1uZXcgU2V0KHIucGFuZWxzLm1hcCgoKHt2aWV3T3B0aW9uczplfSk9PmUubmFtZSkpKSl9cmV0dXJuIGUubWFwKChlPT57Y29uc3QgdD1lLnZpZXdPcHRpb25zLm5hbWUsbz10Py5zdGFydHNXaXRoKFRhKTtvJiYoIWF8fGEmJiFuLmhhcyh0KSkmJmRlbGV0ZSBlLnZpZXdPcHRpb25zLm5hbWU7Y29uc3Qgcj0oaT1lLnZpZXdPcHRpb25zLGkubmFtZXx8PWAke1RhfSR7UnQoKX1gLGkpO3ZhciBpO3JldHVybnsuLi5lLHZpZXdPcHRpb25zOnsuLi5yLHV1aWQ6d2UudXVpZH19fSkpfWFzeW5jIGZ1bmN0aW9uIGFuKGUpe2Zvcihjb25zdCB0IG9mIGUpdC5wYW5lbHMmJmF3YWl0IG9uKHQucGFuZWxzKX1jb25zdCBubj1lPT5udWxsIT09ZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJlwibWVzc2FnZVwiaW4gZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUubWVzc2FnZSYmL0VSUl8oW0EtWl0rXyopKy8udGVzdChlLm1lc3NhZ2UpO2FzeW5jIGZ1bmN0aW9uIG9uKGUpe2NvbnN0IHQ9ZS5tYXAoKGU9PmZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLmNyZWF0ZVZpZXcoZS52aWV3T3B0aW9ucyxmaW4ubWUuaWRlbnRpdHkpLmNhdGNoKChlPT57aWYoIW5uKGUpKXRocm93IGU7Y29uc29sZS5lcnJvcihlKX0pKSkpO3JldHVybiBhd2FpdCBQcm9taXNlLmFsbCh0KX1jb25zdCBybj0oZSx0KT0+IXQuZmluZCgodD0+dD09PWUpKSxzbj0oZSx0KT0+YCR7ZX0gKCR7dH0pYCxjbj0oZSx0KT0+e2lmKHJuKGUsdCkpcmV0dXJuIGU7bGV0IGE9MTtjb25zdCBuPWUucmVwbGFjZSgvICpcXChcXGQrXFwpJC8sXCJcIik7Zm9yKDshcm4oc24obixhKSx0KTspYSs9MTtyZXR1cm4gc24obixhKX0sbG49YXN5bmMoKT0+e2NvbnN0IGU9YXdhaXQgYmUoKTtyZXR1cm4oYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGFzeW5jIGU9Pnt0cnl7cmV0dXJuIFlhKGUuaWRlbnRpdHkpfWNhdGNoKHQpe0pTT04uc3RyaW5naWZ5KGUuaWRlbnRpdHkpO2NvbnN0IGE9YXdhaXQgZS5nZXRPcHRpb25zKCk7cmV0dXJuIGEud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzfHxbXX19KSkpKS5yZWR1Y2UoKChlLHQpPT5lLmNvbmNhdCh0KSksW10pfSxkbj1hc3luYygpPT4oYXdhaXQgcHQod2UpKS5kaXNwYXRjaChsdC5HZXRTYXZlZFBhZ2VzLHZvaWQgMCksdW49YXN5bmMgZT0+KGF3YWl0IHB0KHdlKSkuZGlzcGF0Y2gobHQuR2V0U2F2ZWRQYWdlLGUpLHBuPWFzeW5jKGUsdCk9Pntjb25zdCBhPWF3YWl0KGFzeW5jIGU9Pihhd2FpdCBsbigpKS5maW5kKCh0PT50LnBhZ2VJZD09PWUpKSkoZSk7cmV0dXJuIWF8fGEudGl0bGU9PT10LnRpdGxlJiZlPT09dC5wYWdlSWR8fGF3YWl0IFhhKHtpZGVudGl0eTphLnBhcmVudElkZW50aXR5LHBhZ2VJZDplLHBhZ2U6e3BhZ2VJZDp0LnBhZ2VJZCx0aXRsZTp0LnRpdGxlfX0pLGF9LHduPWFzeW5jKHtwYWdlOmV9KT0+e2F3YWl0IHBuKGUucGFnZUlkLGUpLGF3YWl0KGFzeW5jIGU9Pihhd2FpdCBwdCh3ZSkpLmRpc3BhdGNoKGx0LkNyZWF0ZVNhdmVkUGFnZSxlKSkoe3BhZ2U6ZX0pfSxobj1hc3luYyBlPT57YXdhaXQgdW4oZSkmJmF3YWl0KGFzeW5jIGU9Pihhd2FpdCBwdCh3ZSkpLmRpc3BhdGNoKGx0LkRlbGV0ZVNhdmVkUGFnZSxlKSkoZSl9LGduPWFzeW5jKHtwYWdlSWQ6ZSxwYWdlOnR9KT0+e2F3YWl0IHBuKGUsdCk7cmV0dXJuIGF3YWl0KGFzeW5jIGU9Pihhd2FpdCBwdCh3ZSkpLmRpc3BhdGNoKGx0LlVwZGF0ZVNhdmVkUGFnZSxlKSkoe3BhZ2VJZDplLHBhZ2U6dH0pfSxtbj1hc3luYyBlPT5hd2FpdCB1bihlLnBhZ2VJZCk/Z24oe3BhZ2VJZDplLnBhZ2VJZCxwYWdlOmV9KTp3bih7cGFnZTplfSksa249YXN5bmMgZT0+e2F3YWl0KGFzeW5jIGU9Pihhd2FpdCBxdChlLmlkZW50aXR5KSkuZGlzcGF0Y2goZWEuQXR0YWNoUGFnZXNUb1dpbmRvdyxlKSkoZSl9LGJuPWFzeW5jIGU9Pntjb25zdCB0PXsuLi5lLnBhZ2UscGFuZWxzOmUucGFnZS5wYW5lbHMmJmF3YWl0IHRuKGUucGFnZS5wYW5lbHMsZSl9O3QucGFuZWxzJiZhd2FpdCBvbih0LnBhbmVscyksYXdhaXQgWGEoey4uLmUscGFnZTp0fSl9LHluPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgcXQoZS5pZGVudGl0eSkpLmRpc3BhdGNoKGVhLkRldGFjaFBhZ2VzRnJvbVdpbmRvdyxlKSkoZSl9LGZuPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgcXQoZS5pZGVudGl0eSkpLmRpc3BhdGNoKGVhLlNldEFjdGl2ZVBhZ2VGb3JXaW5kb3csZSkpKGUpfSxTbj1lPT5ZYShlKSx2bj1hc3luYyh7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pPT4oYXdhaXQgU24oZSkpLmZpbmQoKGU9PmUucGFnZUlkPT09dCkpLFBuPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgcXQoZS5pZGVudGl0eSkpLmRpc3BhdGNoKGVhLlJlb3JkZXJQYWdlc0ZvcldpbmRvdyxlKSkoZSl9LENuPW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMucXVldWU9W10sdGhpcy5sb2NrZWQ9ITF9bG9jaygpe3JldHVybiBuZXcgUHJvbWlzZSgoZT0+e3RoaXMubG9ja2VkP3RoaXMucXVldWUucHVzaChlKToodGhpcy5sb2NrZWQ9ITAsZSgpKX0pKX11bmxvY2soKXtpZih0aGlzLnF1ZXVlLmxlbmd0aD4wKXtjb25zdCBlPXRoaXMucXVldWUuc2hpZnQoKTtlJiZlKCl9ZWxzZSB0aGlzLmxvY2tlZD0hMX19O2FzeW5jIGZ1bmN0aW9uIE1uKGUpe2F3YWl0IENuLmxvY2soKTt0cnl7Y29uc3QgdD1RYShlbj9cImVudGVycHJpc2VEZWZhdWx0UGFnZVRpdGxlXCI6XCJkZWZhdWx0UGFnZVRpdGxlXCIpLGE9ZT8/dCxbbixvXT1hd2FpdCBQcm9taXNlLmFsbChbZG4oKSxsbigpXSkscj1bLi4ubiwuLi5vXS5tYXAoKCh7dGl0bGU6ZX0pPT5lKSk7cmV0dXJuIGNuKGEscil9ZmluYWxseXtDbi51bmxvY2soKX19YXN5bmMgZnVuY3Rpb24geG4oe3BhZ2U6ZX0pe3JldHVybntzaG91bGRTaG93TW9kYWw6ISghZXx8IWUuaGFzVW5zYXZlZENoYW5nZXMpfX1hc3luYyBmdW5jdGlvbiBJbih7cGFnZTplLGlkZW50aXR5OnR9KXtjb25zdCBhPWZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpO2lmKChhd2FpdCBhLmdldEluZm8oKSkuaW5pdGlhbE9wdGlvbnMuZW5hYmxlQmVmb3JlVW5sb2FkKXtjb25zdCBhPWF3YWl0IGZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLmdldFZpZXdzKCksbj1OYShlLmxheW91dC5jb250ZW50KS5maWx0ZXIoKGU9PmUubmFtZSYmYS5zb21lKCh0PT50LmlkZW50aXR5Lm5hbWU9PT1lLm5hbWUpKSkpLm1hcCgoZT0+ZmluLlZpZXcud3JhcFN5bmMoe25hbWU6ZS5uYW1lLHV1aWQ6dC51dWlkfSkpKSxvPWF3YWl0IHRoaXMuY2hlY2tWaWV3c0ZvclByZXZlbnRVbmxvYWQobik7aWYoby52aWV3c1ByZXZlbnRpbmdVbmxvYWQubGVuZ3RoPjApe2lmKChhd2FpdCB0aGlzLmdldFVzZXJEZWNpc2lvbkZvckJlZm9yZVVubG9hZCh7Li4ubyx3aW5kb3dJZDp0LHdpbmRvd1Nob3VsZENsb3NlOiExLGNsb3NlVHlwZTpcInBhZ2VcIn0pKS52aWV3c1RvQ2xvc2UubGVuZ3RoIT09bi5sZW5ndGgpcmV0dXJuIGUucGFnZUlkLHtzaG91bGRQYWdlQ2xvc2U6ITF9fX1yZXR1cm57c2hvdWxkUGFnZUNsb3NlOiEwfX1hc3luYyBmdW5jdGlvbiBBbih7cGFnZXM6ZSxpZGVudGl0eTp0fSl7Y29uc3QgYT1hd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoZT0+dGhpcy5zaG91bGRQYWdlQ2xvc2Uoe3BhZ2U6ZSxjbG9zZVR5cGU6XCJ3aW5kb3dcIixpZGVudGl0eTp0fSkpKSkse3BhZ2VzUHJldmVudGluZ0Nsb3NlOm4scGFnZXNOb3RQcmV2ZW50aW5nQ2xvc2U6b309ZS5yZWR1Y2UoKChlLHQsbik9PiFhW25dLnNob3VsZFBhZ2VDbG9zZT97cGFnZXNOb3RQcmV2ZW50aW5nQ2xvc2U6ZS5wYWdlc05vdFByZXZlbnRpbmdDbG9zZSxwYWdlc1ByZXZlbnRpbmdDbG9zZTpbLi4uZS5wYWdlc1ByZXZlbnRpbmdDbG9zZSx0XX06e3BhZ2VzUHJldmVudGluZ0Nsb3NlOmUucGFnZXNQcmV2ZW50aW5nQ2xvc2UscGFnZXNOb3RQcmV2ZW50aW5nQ2xvc2U6Wy4uLmUucGFnZXNOb3RQcmV2ZW50aW5nQ2xvc2UsdF19KSx7cGFnZXNQcmV2ZW50aW5nQ2xvc2U6W10scGFnZXNOb3RQcmV2ZW50aW5nQ2xvc2U6W119KTtyZXR1cm4gdGhpcy5oYW5kbGVQYWdlc0FuZFdpbmRvd0Nsb3NlKHtwYWdlc05vdFByZXZlbnRpbmdDbG9zZTpvLHBhZ2VzUHJldmVudGluZ0Nsb3NlOm4saWRlbnRpdHk6dH0pfWFzeW5jIGZ1bmN0aW9uIFduKHtwYWdlc1ByZXZlbnRpbmdDbG9zZTplLHBhZ2VzTm90UHJldmVudGluZ0Nsb3NlOnQsaWRlbnRpdHk6YX0pe3JldHVybntzaG91bGRXaW5kb3dDbG9zZTowPT09ZS5sZW5ndGh9fWFzeW5jIGZ1bmN0aW9uIERuKHtwYWdlOmV9KXtyZXR1cm4gVXQoZSl9YXN5bmMgZnVuY3Rpb24gVG4oZSl7cmV0dXJue2hhc1Vuc2F2ZWRDaGFuZ2VzOiEwfX1jb25zdCBSbj1hc3luYygpPT57Y29uc3QgZT1BYSgpLHQ9KGF3YWl0IGJlKCkpLm1hcCgodD0+ZS5Ccm93c2VyLndyYXBTeW5jKHQuaWRlbnRpdHkpKSk7YXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IGUuZ2V0UGFnZXMoKTthd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgoYXN5bmMgdD0+e3QudGl0bGUsYXdhaXQgZS51cGRhdGVQYWdlKHtwYWdlSWQ6dC5wYWdlSWQscGFnZTp7aGFzVW5zYXZlZENoYW5nZXM6ITF9fSksdC5wYWdlSWQsdC50aXRsZSxhd2FpdCBtbih7Li4udCxoYXNVbnNhdmVkQ2hhbmdlczohMX0pfSkpKX0pKSl9LEJuPW5ldyBNYXAsRW49KCk9PkJuLEZuPWU9PkJuLmRlbGV0ZShlKTtsZXQgVm49ITE7Y29uc3QgTm49KCk9PntWbnx8KFZuPSEwLGZpbi5XaW5kb3cud3JhcFN5bmMoZ2UpLm9uY2UoXCJjbG9zZWRcIiwoKCk9PntWbj0hMSwoYXN5bmMoZSx0KT0+e2F3YWl0ICRlKEhlKGUpLHtzb3VyY2U6XCJTdG9yZVwiLC4uLnR9KX0pKGZpbi5tZS5pZGVudGl0eSx7dHlwZTpcIk5hdmlnYXRpb25cIixhY3Rpb246XCJDbG9zZSBTdG9yZVwiLHNraXBWYWx1ZUhhc2hpbmc6ITB9KX0pKSl9O2xldCBMbixfbixPbjtjb25zdCBVbj1hc3luYygpPT4odm9pZCAwPT09T24mJihPbj0hIShhd2FpdCBRKCkpLmRpc2FibGVPcGVuRmluQW5hbHl0aWNzKSxPbik7YXN5bmMgZnVuY3Rpb24gR24oZSl7ZS5mb3JFYWNoKChlPT57dmFyIHQsYTtcIlBhZ2VcIj09PWUudHlwZT9cIk9wZW4gUGFnZVwiPT09ZS5hY3Rpb24/KHQ9ZS5kYXRhLnV1aWQsYT1lLEJuLnNldCh0LGEpKTpcIkNsb3NlIFBhZ2VcIj09PWUuYWN0aW9uJiZGbihlLmRhdGEudXVpZCk6XCJTdG9yZVwiPT09ZS5zb3VyY2UmJlwiQ2xvc2VcIiE9PWUuYWN0aW9uJiZObigpfSkpLGF3YWl0KGFzeW5jIGU9PntMbj8uc2VuZFRvT3BlbkZpbiYmKGF3YWl0IFVuKCl8fGUuZm9yRWFjaCgoYXN5bmMgZT0+e2NvbnN0IHQ9QXQoe30sZSk7dC5lbnRpdHlJZCYmKHQuZW50aXR5SWQudXVpZD1hd2FpdCB4dCh0LmVudGl0eUlkLnV1aWQpLHQuZW50aXR5SWQubmFtZT1hd2FpdCB4dCh0LmVudGl0eUlkLm5hbWUpKSwhZS5za2lwVmFsdWVIYXNoaW5nJiZcInZhbHVlXCJpbiB0JiYodC52YWx1ZT1hd2FpdCB4dCh0LnZhbHVlKSksX24odCl9KSkpfSkoZSk7Y29uc3QgdD1lLm1hcCgoKHtza2lwVmFsdWVIYXNoaW5nOmUsLi4udH0pPT50KSk7dGhpcy5oYW5kbGVBbmFseXRpY3ModCl9Y29uc3QgSG49YXN5bmMgZT0+e0xuPWU7TG4/LnNlbmRUb09wZW5GaW4mJiFhd2FpdCBVbigpJiYoKCk9Pntjb25zdCBlPU4sdD1lK0suQW5hbHl0aWNzLGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIklGUkFNRVwiKTthLnNldEF0dHJpYnV0ZShcInNyY1wiLHQpLGEuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcIndpZHRoOiAwcHggIWltcG9ydGFudFwiKSxhLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJoZWlnaHQ6IDBweCAhaW1wb3J0YW50XCIpLGEuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcImRpc3BsYXk6IG5vbmUgIWltcG9ydGFudFwiKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpLF9uPWFzeW5jIHQ9PnthLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UodCxlKX19KSgpO2NvbnN0IHQ9ZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCk7dC5hZGRMaXN0ZW5lcihcInZpZXctY3JlYXRlZFwiLChhc3luYyBlPT57dmFyIHQ7S2Uoe3R5cGU6XCJWaWV3XCIsYWN0aW9uOlwiT3BlbiBWaWV3XCIsdmFsdWU6ZS52aWV3SWRlbnRpdHkubmFtZSxkYXRhOnt1dWlkOmUudmlld0lkZW50aXR5LnV1aWQsdXJsOmF3YWl0KHQ9ZS52aWV3SWRlbnRpdHksZmluLlZpZXcud3JhcFN5bmModCkuZ2V0SW5mbygpLnRoZW4oKGU9PmUudXJsKSkpfX0pfSkpLHQuYWRkTGlzdGVuZXIoXCJ2aWV3LWRlc3Ryb3llZFwiLChhc3luYyBlPT57S2Uoe3R5cGU6XCJWaWV3XCIsYWN0aW9uOlwiQ2xvc2UgVmlld1wiLHZhbHVlOmUudmlld0lkZW50aXR5Lm5hbWUsZGF0YTp7dXVpZDplLnZpZXdJZGVudGl0eS51dWlkfX0pfSkpLHQuYWRkTGlzdGVuZXIoXCJ3aW5kb3ctY2xvc2VkXCIsKGU9PntlLm5hbWUuc3RhcnRzV2l0aChkZS5Ccm93c2VyTWVudSl8fChLZSh7dHlwZTpcIldpbmRvd1wiLGFjdGlvbjpcIkNsb3NlIFdpbmRvd1wiLHZhbHVlOmUubmFtZSxkYXRhOnt1dWlkOmUudXVpZH19KSwoYXN5bmMoKT0+e2NvbnN0IGU9RW4oKSx0PWF3YWl0IGxuKCk7aWYodC5sZW5ndGg9PT1lLnNpemUpcmV0dXJuO2NvbnN0IGE9dC5yZWR1Y2UoKChlLHQpPT5lLnNldCh0LnBhZ2VJZCwxKSksbmV3IE1hcCk7Zm9yKGNvbnN0W3Qsbl1vZiBlKWEuaGFzKHQpfHwobi5hY3Rpb249XCJDbG9zZSBQYWdlXCIsS2UobiksRm4odCkpfSkoKSl9KSl9LCRuPUNlKHthbHdheXNPblRvcDohMCxhdXRvU2hvdzohMSxmcmFtZTohMSxyZXNpemFibGU6ITEsc2hvd1Rhc2tiYXJJY29uOiExfSk7Y29uc3QgS249ZnVuY3Rpb24oZT0kbil7Y29uc3QgdD1uZXcgTWFwO3JldHVybiBhc3luYyhhLG4sbyxyLGkpPT57aWYodC5oYXMoYSkpe2NvbnN0e2N1cnJlbnRVcmw6ZSxjdXJyZW50TmFtZTpvfT10LmdldChhKTtpZihlPT09bilyZXR1cm47Y29uc3Qgcj1maW4uV2luZG93LndyYXBTeW5jKHt1dWlkOmZpbi5tZS51dWlkLG5hbWU6b30pO2F3YWl0IHIuY2xvc2UoKX1jb25zdCBzPWAke2RlLkhvbWVJbnRlcm5hbH0tJHtEYXRlLm5vdygpfSR7TWF0aC5yYW5kb20oKX1gO3Quc2V0KGEse2N1cnJlbnRVcmw6bixjdXJyZW50TmFtZTpzfSk7Y29uc3QgYz1gTmV3ICR7cn0gaW5kaWNhdG9yOiAke299ICR7aX1gLGw9YXdhaXQgZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkuY3JlYXRlV2luZG93KHsuLi5lLG5hbWU6cyx1cmw6bn0pOygoZSx0KT0+e2NvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImFsZXJ0XCIpLGEuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsdHx8XCJwb2xpdGVcIiksKGU9PntlLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixlLnN0eWxlLndpZHRoPVwiMXB4XCIsZS5zdHlsZS5oZWlnaHQ9XCIxcHhcIixlLnN0eWxlLnBhZGRpbmc9XCIwXCIsZS5zdHlsZS5tYXJnaW49XCItMXB4XCIsZS5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLGUuc3R5bGUud2hpdGVTcGFjZT1cIm5vd3JhcFwiLGUuc3R5bGUuYm9yZGVyPVwiMFwifSkoYSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKSxzZXRUaW1lb3V0KCgoKT0+e2EuaW5uZXJIVE1MPWV9KSwzMDApLHNldFRpbWVvdXQoKCgpPT57ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKX0pLDFlMyl9KShjKSxsLm9uY2UoXCJjbG9zZWRcIiwoKCk9Pnt0LmRlbGV0ZShhKX0pKX19KCk7YXN5bmMgZnVuY3Rpb24gem4oZSx0LGEsbixvLHIpe2lmKGEmJmZpbi5tZS5uYW1lIT09YSl7Y29uc3QgaT17dHlwZTplLG1lc3NhZ2U6dCxwYXJlbnRCcm93c2VyTmFtZTphLHNlY29uZGFyeU1lc3NhZ2U6bixpY29uOm8saXNFbnRlcnByaXNlOnJ9O3JldHVybihhd2FpdCBxdCh7dXVpZDpmaW4ubWUudXVpZCxuYW1lOmF9KSkuZGlzcGF0Y2goZWEuU2hvd0Jyb3dzZXJJbmRpY2F0b3IsaSl9Y29uc3QgaT1uZXcgVVJMU2VhcmNoUGFyYW1zO2lmKGkuYXBwZW5kKFwidHlwZVwiLGUpLGkuYXBwZW5kKFwibWVzc2FnZVwiLHQpLGkuYXBwZW5kKFwicGFyZW50TmFtZVwiLGF8fFwiXCIpLGkuYXBwZW5kKFwic2Vjb25kYXJ5TWVzc2FnZVwiLG58fFwiXCIpLGkuYXBwZW5kKFwiaWNvblwiLG98fFwiXCIpLGkuYXBwZW5kKFwiaXNFbnRlcnByaXNlXCIsYCR7cn1gfHxcIlwiKSxhKXtjb25zdCBlPXBlKGE/e3V1aWQ6UixuYW1lOmF9OnZvaWQgMCksdD1gJHsocz1hd2FpdCBlLmdldEJvdW5kcygpKS50b3B9LCR7cy5sZWZ0fSwke3MuaGVpZ2h0fSwke3Mud2lkdGh9LCR7cy5ib3R0b219LCR7cy5yaWdodH0sJHtzLmNvbnRlbnQudG9wfSwke3MuY29udGVudC5sZWZ0fSwke3MuY29udGVudC5oZWlnaHR9LCR7cy5jb250ZW50LndpZHRofWA7aS5hcHBlbmQoXCJwYXJlbnRCb3VuZHNcIix0KX12YXIgcztjb25zdCBjPWAkeyhyP2F3YWl0IGFlKCk6YXdhaXQgdGUoKSkrSy5Ccm93c2VySW5kaWNhdG9yfSMke2kudG9TdHJpbmcoKX1gO3JldHVybiBLbihcImJyb3dzZXJcIithLGMsdCxlLG4pfWFzeW5jIGZ1bmN0aW9uIEpuKGUsdCxhLG4pe2NvbnN0IG89YXdhaXQgQWUodCk7cmV0dXJuIHpuKFwic3VjY2Vzc1wiLGUsdC5uYW1lLGEsbixvKX1jb25zdCBxbj1hc3luYyhlPXdlKT0+e2NvbnN0e3dvcmtzcGFjZVBsYXRmb3JtOnR9PWF3YWl0IHBlKGUpLmdldE9wdGlvbnMoKSxhPXQ/Lm5ld1BhZ2VVcmwsbj10Py5uZXdUYWJVcmw7cmV0dXJue25ld1BhZ2VVcmw6YSxuZXdUYWJVcmw6bn19LFpuPWFzeW5jKGU9d2UpPT57Y29uc3QgdD1hd2FpdCBBZShlKXx8ZW4sYT1hd2FpdCBBYSgpLkJyb3dzZXIuZ2V0VW5pcXVlUGFnZVRpdGxlKCk7bGV0IG47aWYoZSYmYXdhaXQga2UoZSkpbj1hd2FpdChhc3luYyhlLHQ9d2UpPT57Y29uc3R7bmV3UGFnZVVybDphfT1hd2FpdCBxbih0KTtpZighYSl0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gY3JlYXRlIGEgbmV3IHBhZ2Ugd2l0aG91dCBhIG5ld1BhZ2VVcmwgc2V0XCIpO3JldHVybiBMYShlLGEsdCl9KShhLGUpO2Vsc2UgaWYodCl7Y29uc3QgZT1hd2FpdCBuZSgpO249YXdhaXQgTGEoYSxlKX10JiYobi5zZXR0aW5ncz1uLnNldHRpbmdzPz97fSxuLmRpbWVuc2lvbnM9bi5kaW1lbnNpb25zPz97fSxuLnNldHRpbmdzLmhhc0hlYWRlcnM9ITEsbi5zZXR0aW5ncy5yZW9yZGVyRW5hYmxlZD0hMCxuLmRpbWVuc2lvbnMuaGVhZGVySGVpZ2h0PTApO2NvbnN0IG89YXdhaXQgT3QoYSxuKTtyZXR1cm4gdCYmKG8uaGFzVW5zYXZlZENoYW5nZXM9ITEpLG99O3ZhciBqbjshZnVuY3Rpb24oZSl7ZS5Ib21lPVwiL2hvbWVcIixlLkJyb3dzZXI9XCIvYnJvd3NlclwiLGUuRW50ZXJwcmlzZT1cIi9lbnRlcnByaXNlXCIsZS5Qcm92aWRlcj1cIi9wcm92aWRlclwiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250XCIsZS5Eb2NrPVwiL2RvY2tcIn0oam58fChqbj17fSkpO2Z1bmN0aW9uIFFuKGUsdCl7cmV0dXJuIGFzeW5jKGEsLi4ubik9PntlLmhhcyhhKSYmZS5nZXQoYSkuZm9yRWFjaCgoZT0+ZSguLi5uKSkpLHQmJmF3YWl0IHQoe2V2ZW50OmEscGF5bG9hZDpufSl9fWZ1bmN0aW9uIFluKGUsdCl7cmV0dXJuIHQmJnQoKHQ9Pntjb25zdHtldmVudDphLHBheWxvYWQ6bn09dDtlLmhhcyhhKSYmZS5nZXQoYSkuZm9yRWFjaCgoZT0+ZSguLi5uKSkpfSkpLCh0LGEpPT57ZS5oYXModCl8fGUuc2V0KHQsbmV3IFNldCksZS5nZXQodCkuYWRkKGEpfX1mdW5jdGlvbiBYbihlKXtyZXR1cm4odCxhKT0+e2UuaGFzKHQpfHxlLnNldCh0LG5ldyBTZXQpO2NvbnN0IG49ZS5nZXQodCksbz0oLi4uZSk9PnthKC4uLmUpLG4uZGVsZXRlKG8pfTtuLmFkZChvKX19ZnVuY3Rpb24gZW8oZSl7cmV0dXJuKHQsYSk9PntlLmhhcyh0KSYmZS5nZXQodCkuZGVsZXRlKGEpfX1jb25zdCB0bz17bmFtZTpkZS5Ccm93c2VyTWVudSxhbHdheXNPblRvcDohMCxhdXRvU2hvdzohMCxmcmFtZTohMSxyZXNpemFibGU6ITEsYmFja2dyb3VuZENvbG9yOlwiIzJmMzEzNlwiLHNtYWxsV2luZG93OiEwLHNob3dUYXNrYmFySWNvbjohMSxiYWNrZ3JvdW5kVGhyb3R0bGluZzohMSxzYXZlV2luZG93U3RhdGU6ITF9O2Z1bmN0aW9uIGFvKGUpe2NvbnN0IHQ9ey4uLnRvLC4uLmV9O3JldHVybiB0LnVybD1mdW5jdGlvbihlLHQpe2lmKCFXKXRocm93IG5ldyBFcnJvcihcInJlc29sdmVBYnNvbHV0ZVBhdGggY2FuIG9ubHkgYmUgdXNlZCBpbiBhIHdpbmRvd1wiKTtjb25zdCBhPXQ/P3dpbmRvdy5sb2NhdGlvbjtpZigvXig/OlthLXpdKzopP1xcL1xcLy9pLnRlc3QoZSkpcmV0dXJuIGU7Y29uc3Qgbj1gJHthLnByb3RvY29sfS8vJHthLmhvc3RuYW1lfWA7cmV0dXJuIG5ldyBVUkwoZSxuKS5ocmVmfSh0LnVybD8/XCJcIiksdH1jb25zdCBubz1mdW5jdGlvbihlKXtjb25zdCB0PW5ldyBNYXA7cmV0dXJue2VtaXQ6UW4odCwodD0+QSYmZmluLkludGVyQXBwbGljYXRpb25CdXMucHVibGlzaChlLHQpKSksYWRkTGlzdGVuZXI6WW4odCwodD0+QSYmZmluLkludGVyQXBwbGljYXRpb25CdXMuc3Vic2NyaWJlKHt1dWlkOmZpbi5tZS51dWlkfSxlLHQpKSksYWRkTGlzdGVuZXJXaXRoVVVJRDphPT5Zbih0LCh0PT5BJiZmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5zdWJzY3JpYmUoe3V1aWQ6YX0sZSx0KSkpLHJlbW92ZUxpc3RlbmVyOmVvKHQpLG9uY2U6WG4odCl9fShcIndpbmRvdy5tZW51XCIpLG9vPShlLHQpPT5maW4uV2luZG93LndyYXBTeW5jKGUpLnVwZGF0ZU9wdGlvbnMoe29wYWNpdHk6dH0pLHJvPWU9Pm5vLmVtaXQoXCJyZXNwb25zZVwiLGUpLGlvPVJlKCgoKT0+bGUoKS5nZXRDaGlsZFdpbmRvd3MoKSksNTAwKTtjb25zdCBzbz1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIGNvKGUsdCl7Y29uc3QgYT1hbyhlKSxuPXt0b3A6YS50b3AsbGVmdDphLmxlZnQsd2lkdGg6YS5kZWZhdWx0V2lkdGh8fGEud2lkdGgsaGVpZ2h0OmEuZGVmYXVsdEhlaWdodHx8YS5oZWlnaHR9O3JldHVybiB0LnNldChcInBhcmVudE5hbWVcIixmaW4uV2luZG93LmdldEN1cnJlbnRTeW5jKCkuaWRlbnRpdHkubmFtZSkse25hbWU6YS5uYW1lLGJvdW5kczpuLHJvdXRlOmAke2EudXJsfSMke3QudG9TdHJpbmcoKX1gfX1hc3luYyBmdW5jdGlvbiBsbyh7b3B0aW9uczplLHBhcmFtZXRlcnM6dH0pe2NvbnN0IGE9dD8/bmV3IFVSTFNlYXJjaFBhcmFtcyxuPWFvKGUpLHtuYW1lOm8sbW9kYWxQYXJlbnRJZGVudGl0eTpyfT1uO2lmKCFhLmhhcyhcImlzRW50ZXJwcmlzZVwiKSl7Y29uc3QgZT1gJHthd2FpdChhc3luYyBlPT4oRGV8fChEZT1hd2FpdCBBZShlKSksRGUpKShyKX1gO2Euc2V0KFwiaXNFbnRlcnByaXNlXCIsZSl9bGV0IGk9YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7cmV0dXJuKGF3YWl0IGlvKCkpLmZpbmQoKHQ9PnQuaWRlbnRpdHkubmFtZT09PWUpKX0obyk7aWYoaSlhd2FpdCBhc3luYyBmdW5jdGlvbihlLHQpe2NvbnN0e25hbWU6YSxib3VuZHM6bixyb3V0ZTpvfT1hd2FpdCBjbyhlLHQpLHI9e3V1aWQ6ZmluLm1lLmlkZW50aXR5LnV1aWQsbmFtZTphfSxpPWZpbi5XaW5kb3cud3JhcFN5bmMocik7YXdhaXQgUHJvbWlzZS5hbGwoW29vKHIsMCksaS5zZXRCb3VuZHMobildKSxpLm9uY2UoXCJibHVycmVkXCIsKCgpPT57b28ociwwKSxpLmhpZGUoKSxybyh7bmFtZTpyLm5hbWUsZGF0YTp7YWN0aW9uTmFtZTpcIkNhbmNlbFwifX0pfSkpLG5vLmVtaXQoXCJ1cGRhdGVcIixhLG4sbyksYXdhaXQgcm8oe25hbWU6YSxkYXRhOnthY3Rpb25OYW1lOlwiQ2FuY2VsXCJ9fSl9KG4sYSk7ZWxzZXtjb25zdHtyb3V0ZTp0LGJvdW5kczpvfT1hd2FpdCBjbyhlLGEpO2k9YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSx0LGEpe2NvbnN0IG49YW8oZSksbz1hd2FpdCB2dChmaW4ubWUuaWRlbnRpdHkpLHI9YXdhaXQgUHQoZmluLm1lLmlkZW50aXR5KT09PW0uRGFyayxpPW8/LnRoZW1lO2lmKG4uYmFja2dyb3VuZENvbG9yPWk/LltyP20uRGFyazptLkxpZ2h0XT8ucGFsZXR0ZT8uaW5wdXRCYWNrZ3JvdW5kfHxuLmJhY2tncm91bmRDb2xvciwhc28uaGFzKG4ubmFtZSkpcmV0dXJuIG5ldyBQcm9taXNlKChlPT57bm8ub25jZShcInJlYWR5XCIsKGFzeW5jIHQ9PntpZih0Lm5hbWU9PT1uLm5hbWUpe2NvbnN0IGE9YXdhaXQgc28uZ2V0KG4ubmFtZSk7YS5vbmNlKFwiYmx1cnJlZFwiLChhc3luYygpPT57aWYob28odCwwKSxhLmhpZGUoKSxybyh7bmFtZTpuLm5hbWUsZGF0YTp7YWN0aW9uTmFtZTpcIkNhbmNlbFwifX0pLGEuaWRlbnRpdHkubmFtZT09PWRlLkJyb3dzZXJTYXZlTWVudSl7Y29uc3QgZT1hd2FpdCBhLmdldE9wdGlvbnMoKTtcInN1Ym1pdHRpbmdcIiE9PWUuY3VzdG9tQ29udGV4dCYmXCJlcnJvclwiIT09ZS5jdXN0b21Db250ZXh0JiZhLmNsb3NlKCl9ZWxzZSBhLmlkZW50aXR5Lm5hbWUuc3RhcnRzV2l0aChkZS5Ccm93c2VyTWVudSkmJmEuY2xvc2UoKX0pKSxzZXRUaW1lb3V0KChhc3luYygpPT57YXdhaXQgb28odCwxKSwxIT09KGF3YWl0IGZpbi5XaW5kb3cud3JhcFN5bmModCkuZ2V0T3B0aW9ucygpKS5vcGFjaXR5JiZvbyh0LDEpfSkpLGUoYSl9fSkpO2NvbnN0IG89KGFzeW5jKCk9Pntjb25zdCBlPWF3YWl0IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLmNyZWF0ZVdpbmRvdyhDZSh7Li4ubixvcGFjaXR5OjAsdXJsOnR8fG4udXJsLGRlZmF1bHRMZWZ0OmE/LmxlZnQsZGVmYXVsdFRvcDphPy50b3AsZGVmYXVsdFdpZHRoOmE/LndpZHRoLGRlZmF1bHRIZWlnaHQ6YT8uaGVpZ2h0fSwhMCkpO3JldHVybiBlLm9uY2UoXCJjbG9zZWRcIiwoKCk9Pntzby5kZWxldGUobi5uYW1lKX0pKSxlfSkoKTtzby5zZXQobi5uYW1lLG8pfSkpO3JldHVybiBzby5nZXQobi5uYW1lKX0oey4uLm59LHQsbyl9cmV0dXJuIGl9Y29uc3QgdW89YXN5bmMoe29wdGlvbnM6ZSxjb250ZW50OnQscGFyYW1ldGVyczphfSk9Pntjb25zdCBuPWE/P25ldyBVUkxTZWFyY2hQYXJhbXM7bi5zZXQoXCJjb250ZW50XCIsSlNPTi5zdHJpbmdpZnkoey4uLnQsaW52b2NhdGlvbklkOlJ0KCl9KSk7Y29uc3Qgbz17Li4uZSxuYW1lOmAke2UubmFtZX0tLSR7ZS5tb2RhbFBhcmVudElkZW50aXR5Py5uYW1lPz9cIlwifWB9O3JldHVybiBhd2FpdCBsbyh7b3B0aW9uczpvLHBhcmFtZXRlcnM6bn0pLG5ldyBQcm9taXNlKChlPT57bm8ub25jZShcInJlc3BvbnNlXCIsKGFzeW5jIHQ9Pnt0Lm5hbWU9PT1vLm5hbWUmJmUoe2RhdGE6dC5kYXRhfSl9KSl9KSl9LHBvPWFzeW5jKGUsdCxhKT0+e2NvbnN0e3dpbmRvd09wdGlvbnM6bixjb250ZW50Om99PWF3YWl0KGFzeW5jKGUsdCk9Pntjb25zdCBhPWF3YWl0IEFlKHQpO3JldHVybnt0aXRsZTpcIlN3aXRjaCBXb3Jrc3BhY2VcIix3aW5kb3dPcHRpb25zOnt1cmw6YXdhaXQgb2UoYSwhMSkrSy5SZXNwb25zZU1vZGFsLG5hbWU6ZGUuQnJvd3Nlck1lbnUsZGVmYXVsdEhlaWdodDoxMzQsZGVmYXVsdFdpZHRoOjQxMCxtb2RhbFBhcmVudElkZW50aXR5OnR9LGNvbnRlbnQ6e3RpdGxlOlFhKFwic3dpdGNoV29ya3NwYWNlTW9kYWxcIix7d29ya3NwYWNlOmV9KSxib2R5OlFhKFwic3dpdGNoV29ya3NwYWNlTW9kYWwud2FybmluZ1wiKSxidXR0b25zOntyaWdodDpbe2xhYmVsOlFhKFwiZ2xvYmFsLmNhbmNlbFwiKSx0eXBlOlwic2Vjb25kYXJ5XCIsaWQ6XCJDYW5jZWxcIn0se2xhYmVsOlFhKFwiZ2xvYmFsLmNvbmZpcm1cIiksdHlwZTpcInByaW1hcnlcIixpZDpcIkNvbmZpcm1cIn1dfX19fSkodCxhP3ZvaWQgMDplKSxyPWF3YWl0IExlKG4sZSxhKSxpPXsuLi5uLHRvcDpyLnRvcCxsZWZ0OnIubGVmdH07cmV0dXJuXCJDb25maXJtXCI9PT0oYXdhaXQgdW8oe29wdGlvbnM6aSxjb250ZW50Om99KSkuZGF0YS5hY3Rpb25OYW1lfSx3bz1hc3luYyhlLHQpPT57Y29uc3R7d2luZG93T3B0aW9uczphLGNvbnRlbnQ6bn09YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9YXdhaXQgQWUoZSk7cmV0dXJue3RpdGxlOlwiRGVsZXRlIFdvcmtzcGFjZVwiLHdpbmRvd09wdGlvbnM6e3VybDphd2FpdCBvZShhLCExKStLLlJlc3BvbnNlTW9kYWwsbmFtZTpkZS5Ccm93c2VyTWVudSxkZWZhdWx0SGVpZ2h0OjE0NCxkZWZhdWx0V2lkdGg6NDEwLG1vZGFsUGFyZW50SWRlbnRpdHk6ZX0sY29udGVudDp7dGl0bGU6UWEoXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiKSxib2R5OmAke3R9YCxidXR0b25zOntyaWdodDpbe2xhYmVsOlFhKFwiZ2xvYmFsLmNhbmNlbFwiKSx0eXBlOlwic2Vjb25kYXJ5XCIsaWQ6XCJDYW5jZWxcIn0se2xhYmVsOlFhKFwiZ2xvYmFsLmNvbmZpcm1cIiksdHlwZTpcInByaW1hcnlcIixpZDpcIkNvbmZpcm1cIn1dfX19fSkoZSx0KSxvPWF3YWl0IExlKGEsYS5tb2RhbFBhcmVudElkZW50aXR5KSxyPXsuLi5hLHRvcDpvLnRvcCxsZWZ0Om8ubGVmdH07cmV0dXJuXCJDb25maXJtXCI9PT0oYXdhaXQgdW8oe29wdGlvbnM6cixjb250ZW50Om59KSkuZGF0YS5hY3Rpb25OYW1lfSxobz1hc3luYyhlLHQsYSk9Pntjb25zdHt3aW5kb3dPcHRpb25zOm4sY29udGVudDpvfT1hd2FpdChhc3luYyhlLHQsYSk9Pntjb25zdCBuPWF3YWl0IEFlKGUpO3JldHVybnt0aXRsZTpcIlBsYXRmb3JtIFF1aXRcIix3aW5kb3dPcHRpb25zOnt1cmw6YXdhaXQgb2UobiwhMSkrSy5SZXNwb25zZU1vZGFsLG5hbWU6ZGUuQnJvd3Nlck1lbnUsZGVmYXVsdEhlaWdodDoxMzQsZGVmYXVsdFdpZHRoOjQxMCxtb2RhbFBhcmVudElkZW50aXR5OmE/dm9pZCAwOmV9LGNvbnRlbnQ6e3RpdGxlOlFhKFwiUGxhdGZvcm1cIj09PXQ/XCJjbG9zZVBsYXRmb3JtXCI6XCJjbG9zZVBsYXRmb3JtLndvcmtzcGFjZVwiLHt3b3Jrc3BhY2U6dH0pLGJvZHk6UWEoXCJjbG9zZVBsYXRmb3JtLndhcm5pbmdcIiksYnV0dG9uczp7cmlnaHQ6W3tsYWJlbDpRYShcImdsb2JhbC5jYW5jZWxcIiksdHlwZTpcInNlY29uZGFyeVwiLGlkOlwiQ2FuY2VsXCJ9LHtsYWJlbDpRYShcImdsb2JhbC5jb25maXJtXCIpLHR5cGU6XCJwcmltYXJ5XCIsaWQ6XCJDb25maXJtXCJ9XX19fX0pKGUsdCxhKSxyPWF3YWl0IExlKG4sZSxhKSxpPXsuLi5uLHRvcDpyLnRvcCxsZWZ0OnIubGVmdH07cmV0dXJuXCJDb25maXJtXCI9PT0oYXdhaXQgdW8oe29wdGlvbnM6aSxjb250ZW50Om99KSkuZGF0YS5hY3Rpb25OYW1lfSxnbz1hc3luYyBlPT57Y29uc3R7d2luZG93T3B0aW9uczp0LGNvbnRlbnQ6YX09YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgQWUoZSk7cmV0dXJue3RpdGxlOlwiUmVzdG9yZSBDaGFuZ2VzXCIsd2luZG93T3B0aW9uczp7dXJsOmF3YWl0IG9lKHQsITEpK0suUmVzcG9uc2VNb2RhbCxuYW1lOmRlLkJyb3dzZXJNZW51LGRlZmF1bHRIZWlnaHQ6MTM0LGRlZmF1bHRXaWR0aDo0MTAsbW9kYWxQYXJlbnRJZGVudGl0eTplfSxjb250ZW50Ont0aXRsZTpRYShcInJlc3RvcmVNb2RhbFwiKSxib2R5OlFhKFwibW9kYWwuZGlzY2FyZFdhcm5pbmdcIiksYnV0dG9uczp7cmlnaHQ6W3tsYWJlbDpRYShcImdsb2JhbC5jYW5jZWxcIiksdHlwZTpcInNlY29uZGFyeVwiLGlkOlwiQ2FuY2VsXCJ9LHtsYWJlbDpRYShcImdsb2JhbC5jb25maXJtXCIpLHR5cGU6XCJwcmltYXJ5XCIsaWQ6XCJDb25maXJtXCJ9XX19fX0pKGUpLG49YXdhaXQgTGUodCx0Lm1vZGFsUGFyZW50SWRlbnRpdHkpLG89ey4uLnQsdG9wOm4udG9wLGxlZnQ6bi5sZWZ0fTtyZXR1cm5cIkNvbmZpcm1cIj09PShhd2FpdCB1byh7b3B0aW9uczpvLGNvbnRlbnQ6YX0pKS5kYXRhLmFjdGlvbk5hbWV9LG1vPWFzeW5jKGUsdCk9Pntjb25zdHt3aW5kb3dPcHRpb25zOmEsY29udGVudDpufT1hd2FpdChhc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdCBBZShlKTtyZXR1cm57dGl0bGU6XCJEZWxldGUgUGFnZVwiLHdpbmRvd09wdGlvbnM6e3VybDpuZXcgVVJMKGF3YWl0IG9lKGEsITEpK0suUmVzcG9uc2VNb2RhbCkudG9TdHJpbmcoKSxuYW1lOmRlLkJyb3dzZXJNZW51LGRlZmF1bHRIZWlnaHQ6MTcyLGRlZmF1bHRXaWR0aDo0NjQsbW9kYWxQYXJlbnRJZGVudGl0eTplfSxjb250ZW50Ont0aXRsZTpRYShcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYlwiLHt0aXRsZTp0fSksYm9keTpRYShcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYldhcm5pbmdcIiksYnV0dG9uczp7cmlnaHQ6W3tsYWJlbDpRYShcImdsb2JhbC5jYW5jZWxcIiksdHlwZTpcInNlY29uZGFyeVwiLGlkOlwiQ2FuY2VsXCIsdmFyaWFudDphP1wib3V0bGluZVwiOnZvaWQgMH0se2xhYmVsOlFhKFwiZ2xvYmFsLmRlbGV0ZVwiKSx0eXBlOlwicHJpbWFyeVwiLGlkOlwiRGVsZXRlXCIsdmFyaWFudDphP1wic3VibWl0XCI6dm9pZCAwfV19fX19KShlLHQpLG89YXdhaXQgTGUoYSxhLm1vZGFsUGFyZW50SWRlbnRpdHkpLHI9ey4uLmEsdG9wOm8udG9wLGxlZnQ6by5sZWZ0fTtyZXR1cm5cIkRlbGV0ZVwiPT09KGF3YWl0IHVvKHtvcHRpb25zOnIsY29udGVudDpufSkpLmRhdGEuYWN0aW9uTmFtZX07YXN5bmMgZnVuY3Rpb24ga28oe29wdGlvbnM6ZSwuLi50fSl7aWYoISghIWU/LnNraXBQcm9tcHR8fGF3YWl0IHBvKGU/LnByb21wdENvbnRhaW5lcldpbmRvd0lkZW50aXR5LHQudGl0bGUsZT8uc2hvdWxkQ2VudGVyTW9kYWxPbk1vbml0b3IpKSlyZXR1cm4hMTtjb25zdCBhPUFhKCk7cmV0dXJuIGF3YWl0IGEuYXBwbHlTbmFwc2hvdCh0LnNuYXBzaG90LHsuLi5lPy5hcHBseVNuYXBzaG90T3B0aW9ucz8/e30sY2xvc2VFeGlzdGluZ1dpbmRvd3M6ZT8uYXBwbHlTbmFwc2hvdE9wdGlvbnM/LmNsb3NlRXhpc3RpbmdXaW5kb3dzPz8hMH0pLGZvKHQpLHpuKFwic3VjY2Vzc1wiLFFhKFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTd2l0Y2hlZFwiKSkuY2F0Y2goY29uc29sZS53YXJuKSwhMH1hc3luYyBmdW5jdGlvbiBibyhlKXt0cnl7cmV0dXJuIGF3YWl0IGtvKGUpfWNhdGNoKGUpe3JldHVybiBjb25zb2xlLmVycm9yKFwiZmFpbGVkIHRvIGFwcGx5IHRoZSBjdXJyZW50IHdvcmtzcGFjZTogXCIsZSksITF9fWFzeW5jIGZ1bmN0aW9uIHlvKGUpe3RyeXtjb25zdCB0PWF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7Y29uc3QgZT1BYSgpLHQ9YXdhaXQgZS5nZXRDdXJyZW50V29ya3NwYWNlKCk7cmV0dXJuKGF3YWl0IGUuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzKCkpLmZpbmQoKGU9PmUud29ya3NwYWNlSWQ9PT10LndvcmtzcGFjZUlkKSl9KCk7aWYoIXQpcmV0dXJuXCJub3Qtc2F2ZWQtd29ya3NwYWNlXCI7cmV0dXJuISFlPy5za2lwUHJvbXB0fHxhd2FpdCBnbyhlPy5wcm9tcHRDb250YWluZXJXaW5kb3dJZGVudGl0eSk/KGF3YWl0IGtvKHtvcHRpb25zOntza2lwUHJvbXB0OiEwLGFwcGx5U25hcHNob3RPcHRpb25zOmU/LmFwcGx5U25hcHNob3RPcHRpb25zfSwuLi50fSksXCJzdWNjZXNzXCIpOlwidXNlci1kZWNsaW5lZFwifWNhdGNoKGUpe3Rocm93IGNvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gcmVzdG9yZSBsYXN0IHNhdmVkIHdvcmtzcGFjZTogXCIsZSksZX19ZnVuY3Rpb24gZm8oZSl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGxvY2FsU3RvcmFnZSl0cnl7Y29uc3QgdD1KU09OLnN0cmluZ2lmeShlKTtzYShCdC5DdXJyZW50V29ya3NwYWNlSWQsdCl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcImZhaWxlZCB0byBzZXQgdGhlIGFjdGl2ZSB3b3Jrc3BhY2U6IFwiLGUpfX1hc3luYyBmdW5jdGlvbiBTbygpe2NvbnN0IGU9QWEoKSx0PWF3YWl0IGUuZ2V0U25hcHNob3QoKTtyZXR1cm57d29ya3NwYWNlSWQ6UnQoKSx0aXRsZTphd2FpdCBNbygpLG1ldGFkYXRhOntBUElWZXJzaW9uOk99LHNuYXBzaG90OnR9fWFzeW5jIGZ1bmN0aW9uIHZvKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGxvY2FsU3RvcmFnZSlyZXR1cm4gU28oKTtjb25zdCBlPWNhKEJ0LkN1cnJlbnRXb3Jrc3BhY2VJZCk7aWYoIWUpcmV0dXJuIFNvKCk7Y29uc3QgdD1KU09OLnBhcnNlKGUpLGE9QWEoKSxuPWF3YWl0IGEuZ2V0U25hcHNob3QoKTtyZXR1cm57Li4udCxtZXRhZGF0YTp7QVBJVmVyc2lvbjpPfSxzbmFwc2hvdDpufX1jb25zdCBQbz1hc3luYygpPT4oYXdhaXQgcHQod2UpKS5kaXNwYXRjaChsdC5HZXRTYXZlZFdvcmtzcGFjZXMsdm9pZCAwKSxDbz1hc3luYyBlPT5hd2FpdChhc3luYyBlPT4oYXdhaXQgcHQod2UpKS5kaXNwYXRjaChsdC5HZXRTYXZlZFdvcmtzcGFjZSxlKSkoZS53b3Jrc3BhY2VJZCk/KGFzeW5jIGU9Pihhd2FpdCBwdCh3ZSkpLmRpc3BhdGNoKGx0LlVwZGF0ZVNhdmVkV29ya3NwYWNlLGUpKSh7d29ya3NwYWNlSWQ6ZS53b3Jrc3BhY2VJZCx3b3Jrc3BhY2U6ZX0pOihhc3luYyBlPT4oYXdhaXQgcHQod2UpKS5kaXNwYXRjaChsdC5DcmVhdGVTYXZlZFdvcmtzcGFjZSxlKSkoe3dvcmtzcGFjZTplfSk7YXN5bmMgZnVuY3Rpb24gTW8oZT1cIlVudGl0bGVkIFdvcmtzcGFjZVwiKXtjb25zdCB0PShhd2FpdCBQbygpKS5tYXAoKCh7dGl0bGU6ZX0pPT5lKSk7cmV0dXJuIGNuKGUsdCl9Y29uc3QgeG89ZT0+KHsuLi5lLHNuYXBzaG90OnsuLi5lLnNuYXBzaG90LHdpbmRvd3M6ZS5zbmFwc2hvdC53aW5kb3dzLm1hcCgoZT0+KHsuLi5lLHdvcmtzcGFjZVBsYXRmb3JtOnsuLi5lLndvcmtzcGFjZVBsYXRmb3JtLHBhZ2VzOmUud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzPy5tYXAoKGU9Pih7Li4uZSxoYXNVbnNhdmVkQ2hhbmdlczohMX0pKSl9fSkpKX19KSxJbz1hc3luYyhlLHQpPT57Y29uc3QgYT10Pz9BYSgpO2F3YWl0IGEuU3RvcmFnZS5zYXZlV29ya3NwYWNlKHhvKGUpKSxhd2FpdChhc3luYygpPT4oYXdhaXQgcHQod2UpKS5kaXNwYXRjaChsdC5NYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsLHZvaWQgMCkpKCl9LEFvPWFzeW5jIGU9Pntjb25zdCB0PUFhKCksYT1hd2FpdCB0LmdldEN1cnJlbnRXb3Jrc3BhY2UoKSxuPWF3YWl0IHQuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzKCksbz1hLndvcmtzcGFjZUlkO2lmKG4uc29tZSgoZT0+ZS53b3Jrc3BhY2VJZD09PW8pKSlhd2FpdCBJbyhhLHQpLGF3YWl0IHQuc2V0QWN0aXZlV29ya3NwYWNlKGEpLGF3YWl0IEpuKFFhKFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZFwiKSxlKTtlbHNle2NvbnN0IGE9dC5Ccm93c2VyLndyYXBTeW5jKGUpO2F3YWl0IGEuX29wZW5TYXZlTW9kYWwoe21lbnVUeXBlOnguU0FWRV9XT1JLU1BBQ0V9KX19LFdvPWU9PntBYSgpLkJyb3dzZXIud3JhcFN5bmMoZSkuX29wZW5TYXZlTW9kYWwoe21lbnVUeXBlOnguU0FWRV9XT1JLU1BBQ0VfQVN9KX0sRG89YXN5bmMgZT0+e2NvbnN0IHQ9QWEoKS5Ccm93c2VyLndyYXBTeW5jKGUpLHtuZXdQYWdlVXJsOmF9PWF3YWl0IHFuKCksbj1hd2FpdCBabihlKSxvPWF8fHZvaWQgMDthd2FpdCB0Ll9hZGREZWZhdWx0UGFnZSh7aWRlbnRpdHk6ZSxwYWdlOm4sbmV3UGFnZVVybDpvfSl9LFRvPWFzeW5jKGUsdCk9Pntjb25zdCBhPUFhKCkuQnJvd3Nlci53cmFwU3luYyhlKSxuPWF3YWl0IEFhKCkuU3RvcmFnZS5nZXRQYWdlcygpLG89KGF3YWl0IGEuZ2V0UGFnZXMoKSkuZmluZCgoZT0+dD9lLnBhZ2VJZD09PXQ6ZS5pc0FjdGl2ZSkpLHI9bi5zb21lKChlPT5vLnBhZ2VJZD09PWUucGFnZUlkKSksaT1hd2FpdCBBZShlKTtpZihyKXRyeXthd2FpdCBBYSgpLlN0b3JhZ2Uuc2F2ZVBhZ2UoKGQ9byx7Li4uZCxoYXNVbnNhdmVkQ2hhbmdlczp2b2lkIDAscGFyZW50SWRlbnRpdHk6dm9pZCAwLGlzQWN0aXZlOnZvaWQgMCxsYXlvdXQ6VmEoZC5sYXlvdXQpfSkpLGF3YWl0IGEudXBkYXRlUGFnZSh7cGFnZUlkOm8ucGFnZUlkLHBhZ2U6e2hhc1Vuc2F2ZWRDaGFuZ2VzOiExfX0pLEpuKFFhKGk/XCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYlNhdmVkXCI6XCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VTYXZlZFwiKSxlLFFhKGk/XCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5TYXZlZFwiOlwic3VjY2Vzc0luZGljYXRvci5wYWdlSGFzQmVlblNhdmVkXCIse3RpdGxlOm8udGl0bGV9KSl9Y2F0Y2h7cz1RYShcImVycm9ySW5kaWNhdG9yLnBhZ2VTYXZlRmFpbGVkXCIpLGM9by5wYXJlbnRJZGVudGl0eS5uYW1lLHpuKFwiZXJyb3JcIixzLGMsbCl9ZWxzZSBhLl9vcGVuU2F2ZU1vZGFsKHtpZDpvLnBhZ2VJZCxtZW51VHlwZTp4LlNBVkVfUEFHRX0pO3ZhciBzLGMsbCxkfSxSbz1hc3luYyhlLHQpPT57Y29uc3QgYT1BYSgpLkJyb3dzZXIud3JhcFN5bmMoZSksbj0oYXdhaXQgYS5nZXRQYWdlcygpKS5maW5kKChlPT50P2UucGFnZUlkPT09dDplLmlzQWN0aXZlKSk7YS5fb3BlblNhdmVNb2RhbCh7aWQ6bi5wYWdlSWQsbWVudVR5cGU6eC5TQVZFX1BBR0VfQVN9KSxLZSh7dHlwZTpcIlBhZ2UgTW9kYWxcIixhY3Rpb246XCJTZWxlY3QgU2F2ZSBBc1wiLHZhbHVlOm4udGl0bGUsc2tpcFZhbHVlSGFzaGluZzohMH0pfSxCbz17dGl0bGU6XCJEb3dubG9hZHNcIixwYWdlSWQ6XCJkb3dubG9hZHMtcGFnZS1pZFwiLGxheW91dDp7Y29udGVudDpbe3R5cGU6XCJzdGFja1wiLGNvbnRlbnQ6W3t0eXBlOlwiY29tcG9uZW50XCIsY29tcG9uZW50TmFtZTpcInZpZXdcIixjb21wb25lbnRTdGF0ZTp7bmFtZTpcInNob3ctZG93bmxvYWQtdmlld1wiLHVybDpcImNocm9tZTovL2Rvd25sb2Fkcy9cIn19XX1dfX0sRW89YXN5bmMgZT0+e2NvbnN0IHQ9cGUoZSksYT1hd2FpdCB0LmdldEN1cnJlbnRWaWV3cygpLG49KGF3YWl0IEFhKCkuQnJvd3Nlci53cmFwU3luYyh0LmlkZW50aXR5KS5nZXRQYWdlcygpKS5maW5kKChlPT5lLmlzQWN0aXZlKSk7dHJ5e2NvbnN0IHQ9KGF3YWl0IFByb21pc2UuYWxsKGEubWFwKChhc3luYyBlPT4oe2lkZW50aXR5OmUuaWRlbnRpdHksaW5mbzphd2FpdCBmaW4uVmlldy53cmFwU3luYyhlLmlkZW50aXR5KS5nZXRJbmZvKCl9KSkpKSkuZmluZCgoZT0+XCJjaHJvbWU6Ly9kb3dubG9hZHMvXCI9PT1lLmluZm8udXJsKSk7aWYodClhd2FpdCBmaW4uVmlldy53cmFwU3luYyh0LmlkZW50aXR5KS5mb2N1cygpO2Vsc2V7Y29uc3QgdD1BYSgpO2lmKG4/LmlzTG9ja2VkKXtjb25zdCBlPShhd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRDaGlsZFdpbmRvd3MoKSkuZmluZCgoZT0+XCJzaG93LWRvd25sb2FkLXdpbmRvd1wiPT09ZS5pZGVudGl0eS5uYW1lKSk7cmV0dXJuIHZvaWQoZT9hd2FpdCBlLmZvY3VzKCk6dC5Ccm93c2VyLmNyZWF0ZVdpbmRvdyh7bmFtZTpcInNob3ctZG93bmxvYWQtd2luZG93XCIsd29ya3NwYWNlUGxhdGZvcm06e3BhZ2VzOltCb119fSkpfShhd2FpdCBBYSgpLmNyZWF0ZVZpZXcoe25hbWU6XCJzaG93LWRvd25sb2FkLXZpZXdcIix1cmw6XCJjaHJvbWU6Ly9kb3dubG9hZHMvXCIsdGFyZ2V0OmV9LGUpKS5mb2N1cygpfX1jYXRjaChlKXtjb25zb2xlLmVycm9yKFwiQ291bGRuJ3Qgb3BlbiBkb3dubG9hZHMgdmlld1wiLGUpfX0sRm89YXN5bmMgZT0+e2NvbnN0IHQ9ZS5tYXAoKGU9PmZpbi5WaWV3LndyYXBTeW5jKGUpLnByaW50KCkpKTthd2FpdCBQcm9taXNlLmFsbCh0KX0sVm89ZT0+e2NvbnN0W3QsYSxuXT1lLnNwbGl0KFwiLlwiKS5tYXAoKGU9PlwieFwiPT09ZT8wOjEpKTtyZXR1cm4gMTAwKnQrMTAqYSsxKm59O2NsYXNzIE5vIGV4dGVuZHMgRXJyb3J7fWNvbnN0IExvPWFzeW5jIGU9Pnt0cnl7Y29uc3QgYT1hd2FpdCBhc3luYyBmdW5jdGlvbigpe2NvbnN0IGU9YXdhaXQgUSgpLHQ9ZT8udHJhbnNsYXRpb25PdmVycmlkZXNVcmw/P1wiaHR0cHM6Ly93b3Jrc3BhY2Uub3BlbmZpbi5jby93b3Jrc3BhY2UvYXNzZXRzL3RyYW5zbGF0aW9uLW92ZXJyaWRlLmpzb25cIjtpZihcIlwiPT09dCl0aHJvdyBuZXcgTm8oXCJFbXB0eSBzdHJpbmcgcHJvdmlkZWQgYXMgdXJsIHRvIHRyYW5zbGF0aW9uT3ZlcnJpZGVzVXJsLCBvdmVycmlkZXMgd2lsbCBub3QgYmUgZmV0Y2hlZC5cIik7cmV0dXJuIGF3YWl0IGZldGNoKHQpLnRoZW4oKGU9PmUuanNvbigpKSl9KCk7KHQ9KGU9Pntjb25zdCB0PU8uc3BsaXQoXCIuXCIpO3JldHVybiBPYmplY3Qua2V5cyhlKS5maWx0ZXIoKGU9Pntjb25zdCBhPWUuc3BsaXQoXCIuXCIpO2lmKDMhPT1hLmxlbmd0aClyZXR1cm4gY29uc29sZS53YXJuKGBFbmNvdW50ZXJlZCBhIHRyYW5zbGF0aW9uIG92ZXJyaWRlIHZlcnNpb24gc3RyaW5nIGluIGFuIHVuc3VwcG9ydGVkIGZvcm1hdDogJHtlfS4gVmVyc2lvbnMgbXVzdCBiZSBpbiBBLkIuQyBmb3JtYXQgd2hlcmUgQSwgQiwgQyBhcmUgZWl0aGVyIGludGVnZXJzIG9yIHRoZSB3aWxkY2FyZCBzeW1ib2wgJ3gnLmApLCExO2NvbnN0W24sbyxyXT1hO3JldHVybiEobiE9PXRbMF0mJlwieFwiIT09bnx8byE9PXRbMV0mJlwieFwiIT09b3x8ciE9PXRbMl0mJlwieFwiIT09cil9KSl9KShhKSxbLi4udF0uc29ydCgoKGUsdCk9PlZvKGUpLVZvKHQpKSkpLmZvckVhY2goKHQ9Pntjb25zdCBuPWFbdF07T2JqZWN0LmtleXMobikuZm9yRWFjaCgodD0+e2UuYWRkUmVzb3VyY2VCdW5kbGUodCxcInRyYW5zbGF0aW9uXCIsblt0XSwhMCwhMCl9KSl9KSl9Y2F0Y2goZSl7ZSBpbnN0YW5jZW9mIE5vP2NvbnNvbGUud2FybihlLm1lc3NhZ2UpOmNvbnNvbGUuZXJyb3IoXCJFcnJvciBhcHBseWluZyBhIHRyYW5zbGF0aW9uIG92ZXJyaWRlOiBcIixlKX12YXIgdH07ZnVuY3Rpb24gX28oKXtyZXR1cm4gSGEoKS5sYW5ndWFnZX1jb25zdCBPbz1hc3luYyBlPT57SG8oZSksKGU9PntIYSgpLmNoYW5nZUxhbmd1YWdlKGUpfSkoZSksYXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgYmUoKTtyZXR1cm4gUHJvbWlzZS5hbGwodC5tYXAoKGFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHF0KHQuaWRlbnRpdHkpO2F3YWl0IGEuZGlzcGF0Y2goZWEuU2V0U2VsZWN0ZWRMYW5ndWFnZSxlKX0pKSl9KShlKX07ZnVuY3Rpb24gVW8oKXtpZighSGEoKS5vcHRpb25zLnJlc291cmNlcyl0aHJvdyBuZXcgRXJyb3IoXCJObyBsYW5ndWFnZSByZXNvdXJjZXMgZm91bmRcIik7cmV0dXJue2N1cnJlbnRMYW5ndWFnZTpfbygpLHJlc291cmNlczpIYSgpLm9wdGlvbnMucmVzb3VyY2VzfX1hc3luYyBmdW5jdGlvbiBHbyhlPVwiZW4tVVNcIil7SG8oZSksZnVuY3Rpb24oZT1cImVuLVVTXCIpe0hhKCkudXNlKFVhLmluaXRSZWFjdEkxOG5leHQpLmluaXQoe2xuZzplLGZhbGxiYWNrTG5nOlwiZW4tVVNcIixyZXNvdXJjZXM6e1wiZW4tVVNcIjp7dHJhbnNsYXRpb246emF9LFwiamEtSlBcIjp7dHJhbnNsYXRpb246cWF9LFwiemgtQ05cIjp7dHJhbnNsYXRpb246JGF9LFwia28tS1JcIjp7dHJhbnNsYXRpb246WmF9LFwicnUtUlVcIjp7dHJhbnNsYXRpb246amF9LFwiZGUtREVcIjp7dHJhbnNsYXRpb246SmF9LFwiemgtSGFudFwiOnt0cmFuc2xhdGlvbjpLYX19LGludGVycG9sYXRpb246e2VzY2FwZVZhbHVlOiExfX0pfShlKSxhd2FpdCBMbyhIYSgpKX1mdW5jdGlvbiBIbyhlKXtpZighTS5pbmNsdWRlcyhlKSl0aHJvdyBuZXcgRXJyb3IoYFRoZSBJU08gbGFuZ3VhZ2UgcHJvdmlkZWQgJHtlfSBpcyBub3Qgc3VwcG9ydGVkYCl9Y29uc3QgJG89W1wiZ3JlZW5cIixcInB1cnBsZVwiLFwib3JhbmdlXCIsXCJyZWRcIixcInBpbmtcIixcInllbGxvd1wiXSxLbz1cIkNPTlRFWFRfR1JPVVBfUEFHRVwiLHpvPSgpPT5lPT5jbGFzcyBleHRlbmRzIGV7Z2V0Q29udGV4dEdyb3Vwcygpe3JldHVybiBzdXBlci5nZXRDb250ZXh0R3JvdXBzKCkubWFwKChlPT4kby5pbmNsdWRlcyhlLmRpc3BsYXlNZXRhZGF0YT8ubmFtZSk/ey4uLmUsZGlzcGxheU1ldGFkYXRhOnsuLi5lLmRpc3BsYXlNZXRhZGF0YSxuYW1lOlFhKGUuZGlzcGxheU1ldGFkYXRhPy5uYW1lKX19OmUpKX19LEpvPSgpPT57Y29uc3QgZT1uZXcgU2V0O3JldHVybiB0PT5jbGFzcyBleHRlbmRzIHR7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMub25DbGllbnRDb25uZWN0ZWQ9ZT0+e2UubmFtZS5zdGFydHNXaXRoKFwiaW50ZXJuYWwtZ2VuZXJhdGVkLXZpZXdcIikmJnRoaXMuam9pbkNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6S28sdGFyZ2V0OmV9LHt1dWlkOnRoaXMuZmluLm1lLnV1aWQsbmFtZTp0aGlzLmZpbi5tZS5uYW1lfSl9O2NvbnN0IGU9dGhpcy5pbnRlcm9wQ2xpZW50cy5zZXQ7dGhpcy5pbnRlcm9wQ2xpZW50cy5zZXQ9KHQsYSk9PntlLmNhbGwodGhpcy5pbnRlcm9wQ2xpZW50cyx0LGEpLHRoaXMub25DbGllbnRDb25uZWN0ZWQoYS5jbGllbnRJZGVudGl0eSl9fWFzeW5jIGpvaW5Db250ZXh0R3JvdXAoe2NvbnRleHRHcm91cElkOnQsdGFyZ2V0OmF9LG4pe2lmKHQhPT1LbylyZXR1cm4gc3VwZXIuam9pbkNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6dCx0YXJnZXQ6YX0sbik7dHJ5e2NvbnN0IHQ9KGF3YWl0IEFhKCkuQnJvd3Nlci5nZXRQYWdlQnlWaWV3SWRlbnRpdHkoYSkpLnBhZ2UubGF5b3V0TmFtZTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJWaWV3IGRvZXMgbm90IGJlbG9uZyB0byBhIHBhZ2VcIik7aWYoIWUuaGFzKHQpJiYoZS5hZGQodCksIXRoaXMuY29udGV4dEdyb3Vwc0J5SWQuaGFzKHQpKSl7Y29uc3QgZT1uZXcgTWFwO3RoaXMuY29udGV4dEdyb3Vwc0J5SWQuc2V0KHQsZSl9YXdhaXQgc3VwZXIuam9pbkNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6dCx0YXJnZXQ6YX0sbiksYS5uYW1lfWNhdGNoKGUpe0pTT04uc3RyaW5naWZ5KGEpLGUuc3RhY2t9fWdldENvbnRleHRHcm91cHMoKXtyZXR1cm4gQXJyYXkuZnJvbShlKS5tYXAoKGU9Pih7aWQ6ZSxkaXNwbGF5TWV0YWRhdGE6e319KSkpfXNldENvbnRleHRGb3JHcm91cChlLHQpe2lmKCF0aGlzLmNvbnRleHRHcm91cHNCeUlkLmhhcyh0KSl7Y29uc3QgZT1uZXcgTWFwO3RoaXMuY29udGV4dEdyb3Vwc0J5SWQuc2V0KHQsZSl9cmV0dXJuIHN1cGVyLnNldENvbnRleHRGb3JHcm91cChlLHQpfX19LHFvPShlLHQpPT57Y29uc3QgYT0oZT0+V2UoZSk/Sm8oKTp6bygpKSh0KTt0cnl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT90PT5lKGEodCkpOkFycmF5LmlzQXJyYXkoZSk/Wy4uLmUsYV06ZT0+bmV3KGEoZSkpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcIldvcmtzcGFjZVBsYXRmb3JtLmluaXQgRXJyb3I6XCIsZSl9fSxabz1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIGpvKCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGxvY2FsU3RvcmFnZSl0cnl7Y29uc3QgZT1jYShCdC5MYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3cpO2lmKCFlKXJldHVybjtjb25zdCB0PUpTT04ucGFyc2UoZSk7aWYoYXdhaXQgZmUodCkpcmV0dXJuIHR9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGBmYWlsZWQgdG8gZ2V0IGxhc3QgZm9jdXNlZCBicm93c2VyIHdpbmRvdzogJHtlfWApfX1hc3luYyBmdW5jdGlvbiBRbyhlPWZpbi5tZS5pZGVudGl0eSl7YXdhaXQga2UoZSkmJihaby5kZWxldGUoZS5uYW1lKSxaby5zZXQoZS5uYW1lLGUpLGZ1bmN0aW9uKGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhbFN0b3JhZ2UpdHJ5e2NvbnN0IHQ9SlNPTi5zdHJpbmdpZnkoZSk7c2EoQnQuTGFzdEZvY3VzZWRCcm93c2VyV2luZG93LHQpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gc2F2ZSBsYXN0IGZvY3VzZWQgYnJvd3NlciB3aW5kb3c6IFwiLGUpfX0oZSkpfWFzeW5jIGZ1bmN0aW9uIFlvKGU9ZmluLm1lLmlkZW50aXR5KXtaby5kZWxldGUoZS5uYW1lKX1jb25zdCBYbz1UdCgpKChhc3luYygpPT57Y29uc3QgZT1hd2FpdCBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5BcHBsaWNhdGlvbi5nZXRDaGlsZFdpbmRvd3MoKTtsZXQgdCxhPSExO2Zvcihjb25zdCBuIG9mIGUpaWYobi5pZGVudGl0eS5uYW1lPT09ZGUuQnJvd3Nlck1lbnV8fG4uaWRlbnRpdHkubmFtZT09PWRlLkJyb3dzZXJTYXZlTWVudT90PW46YXdhaXQga2Uobi5pZGVudGl0eSkmJihhPSEwKSxhKWJyZWFrOyFhJiZ0JiZ0LmNsb3NlKCl9KSwxMDAse2xlYWRpbmc6ITEsdHJhaWxpbmc6ITB9KTtsZXQgZXI9e307Y29uc3QgdHI9YXN5bmMoe2FjdGlvbklkOmUscGF5bG9hZDp0fSk9PntpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlcltlXSl0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBmaW5kIGEgY29uZmlndXJlZCBmdW5jdGlvbiBmb3IgdGhlIGFjdGlvbiAnJHtlfSdgKTtyZXR1cm4gZXJbZV0odCl9LGFyPSgpPT5gY3VzdG9tLWNvbnRleHQtbWVudS0ke0FhKCkuaWRlbnRpdHkudXVpZH0tJHtPfWAsbnI9KCk9PmBjdXN0b20tYm9va21hcmstY29udGV4dC1tZW51LSR7QWEoKS5pZGVudGl0eS51dWlkfS0ke099YCxvcj0oKT0+ZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGFyKCkpO3ZhciBycixpcjshZnVuY3Rpb24oZSl7ZS5TYXZlPVwiU2F2ZVwiLGUuU2F2ZUFzPVwiU2F2ZUFzXCJ9KHJyfHwocnI9e30pKSxmdW5jdGlvbihlKXtlLkdsb2JhbE1lbnU9XCJnbG9iYWwtbWVudVwiLGUuQ29udGV4dE1lbnU9XCJjb250ZXh0LW1lbnVcIixlLlJlbmFtZVN1cGVydGFiPVwicmVuYW1lLXN1cGVydGFiXCIsZS5BZGRFZGl0Qm9va21hcms9XCJhZGQtZWRpdC1ib29rbWFya1wiLGUuRHJvcGRvd25NZW51PVwiZHJvcGRvd24tbWVudVwifShpcnx8KGlyPXt9KSk7Y29uc3Qgc3I9cmVxdWlyZShcImRleGllXCIpLGNyPWU9PmUrXCItXCIrZmluLm1lLnV1aWQsbHI9KGUsdCk9Pntjb25zdCBhPUQmJkEmJm5ldyBzci5EZXhpZShlKTtyZXR1cm4gYSYmYS52ZXJzaW9uKC4xKS5zdG9yZXMoe1t0XTpcIlwifSksYX0sZHI9KGUsdCk9Pntjb25zdCBhPWxyKGNyKGUpLHQpLG49bHIoZSx0KTtpZighYXx8IW4pdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIG1pZ3JhdGUgc3RvcmUgLSBJbmRleERCIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuKGFzeW5jKGUsdCxhKT0+e2NvbnN0IG49Y2EoQnQuSGFzTW92ZWRTdG9yZSksbz1uP0pTT04ucGFyc2Uobik6e307aWYobyYmb1thXSlyZXR1cm47b1thXT0hMCxzYShCdC5IYXNNb3ZlZFN0b3JlLEpTT04uc3RyaW5naWZ5KG8pKTtjb25zdCByPWF3YWl0IGVbYV0udG9BcnJheSgpO2F3YWl0IHRbYV0uYnVsa1B1dChyKX0pKG4sYSxlKSxhfSx1cj0oZSx0PVwiXCIpPT5lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModC50b0xvd2VyQ2FzZSgpKSxwcj1cInZpc2l0ZWQtc2l0ZXNcIix3cj1cInJlbW92ZWQtdGFiLXN0YWNrXCIsaHI9RCYmQSYmZHIoXCJvcGVuZmluLWhvbWUtcGFnZXNcIixcInBhZ2VzXCIpLGdyPUQmJkEmJm5ldyBzci5EZXhpZShjcihcIm9wZW5maW4tZW50ZXJwcmlzZS1zaXRlLWhpc3RvcnlcIikpO2dyJiZnci52ZXJzaW9uKC4xKS5zdG9yZXMoe1twcl06XCJpZCwgdXJsXCJ9KTtjb25zdCBtcj1EJiZBJiZuZXcgc3IuRGV4aWUoY3IoXCJvcGVuZmluLWVudGVycHJpc2UtdGFiLWhpc3RvcnlcIikpO2FzeW5jIGZ1bmN0aW9uIGtyKGUpe2lmKCFocil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IHBhZ2UgLSBJbmRleERCIG5vdCBzdXBwb3J0ZWRcIik7Y29uc3QgdD1hd2FpdCBoci5wYWdlcy5nZXQoZSk7aWYodClyZXR1cm4gdC5wYWdlSWQ9ZS50b1N0cmluZygpLHQudGl0bGU9dC50aXRsZXx8dC5wYWdlSWQsdH1hc3luYyBmdW5jdGlvbiBicihlKXtpZighaHIpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCBwYWdlIGxpc3QgLSBJbmRleERCIG5vdCBzdXBwb3J0ZWRcIik7Y29uc3QgdD1hd2FpdCBoci5wYWdlcy50b0NvbGxlY3Rpb24oKS5rZXlzKCksYT0oYXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKGU9PmtyKGUudG9TdHJpbmcoKSkpKSkpLmZpbHRlcigoZT0+ISFlKSk7cmV0dXJuIGU/YS5maWx0ZXIoKHQ9PnVyKHQudGl0bGUsZSkpKTphfWFzeW5jIGZ1bmN0aW9uIHlyKHtwYWdlOmV9KXtpZighaHIpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSBwYWdlIC0gSW5kZXhEQiBub3Qgc3VwcG9ydGVkXCIpO2F3YWl0IGhyLnBhZ2VzLnB1dChlLGUucGFnZUlkKX1hc3luYyBmdW5jdGlvbiBmcihlKXtpZighaHIpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGRlbGV0ZSBwYWdlIC0gSW5kZXhEQiBub3Qgc3VwcG9ydGVkXCIpO2F3YWl0IGhyLnBhZ2VzLmRlbGV0ZShlKX1hc3luYyBmdW5jdGlvbiBTcih7cGFnZUlkOmUscGFnZTp0fSl7aWYoIWhyKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byB1cGRhdGUgcGFnZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtpZih2b2lkIDA9PT1hd2FpdCBrcihlKSl0aHJvdyBuZXcgRXJyb3IoXCJwYWdlIG5vdCBmb3VuZFwiKTthd2FpdCB5cih7cGFnZTp0fSksZSE9PXQucGFnZUlkJiZhd2FpdCBmcihlKX1tciYmbXIudmVyc2lvbiguMSkuc3RvcmVzKHtbd3JdOlwiXCJ9KTtjb25zdCB2cj1hc3luYyBlPT57aWYoIW1yKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBhZGQgcmVtb3ZlZCB0YWIgLSBJbmRleERCIG5vdCBzdXBwb3J0ZWRcIik7Y29uc3QgdD1EYXRlLm5vdygpLnRvU3RyaW5nKCksYT17Li4uZSxpZDp0fTthd2FpdCBtclt3cl0ucHV0KGEsdCl9O2Z1bmN0aW9uIFByKGUpe3JldHVyblwiYXBwXCI9PT1lLnR5cGV8fFwid2Vic2l0ZVwiPT09ZS50eXBlfWNvbnN0IENyPWFzeW5jIGU9PntpZihcIndlYnNpdGVcIj09PWUudHlwZSl7Y29uc3QgdD1lLGE9dC51cmx8fFwiXCI7bGV0IG49YXdhaXQgZ3JbcHJdLmdldChhKTtuJiZQcihuKT8obi5pY29uPXQuaWNvbixuLnRpdGxlPXQudGl0bGUsbi50eXBlPXQudHlwZSxuLnZpc2l0Q291bnQ9KG4udmlzaXRDb3VudHx8MCkrMSxuLnVybD10LnVybCk6bj17Li4udCxpZDphLHZpc2l0Q291bnQ6MSxhY2Nlc3NUaW1lOnZvaWQgMH0sbi5hY2Nlc3NUaW1lPURhdGUubm93KCksYXdhaXQgZ3JbcHJdLnB1dChuLGEpfX0sTXI9YXN5bmMoKT0+e2lmKCFncil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IGZyZXF1ZW50bHkgdmlzaXRlZCBzaXRlcyAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCBlPWdyW3ByXSx0PWF3YWl0IGUudG9Db2xsZWN0aW9uKCkudG9BcnJheSgpO3Quc29ydCgoKGUsdCk9Pih0LnZpc2l0Q291bnR8fDApLShlLnZpc2l0Q291bnR8fDApKSk7cmV0dXJuKHQubGVuZ3RoPjU/dC5zbGljZSgwLDUpOnQpLm1hcCgoKHtpZDplLC4uLnR9KT0+dCkpfTtjb25zdCB4cj1hc3luYygpPT4oYXdhaXQgZmluLlN5c3RlbS5nZXRIb3N0U3BlY3MoKSkubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwid2luZG93c1wiKSxJcj1hc3luYyBlPT57Y29uc3R7Y3RybEtleTp0LG1ldGFLZXk6YSxzaGlmdEtleTpufT1lLnNvdXJjZUV2ZW50LHt1cmw6b309ZS5ib29rbWFyayx7c291cmNlSWRlbnRpdHk6cn09ZSxpPWF3YWl0IHhyKCk7aWYoIWF3YWl0IGtlKHIpKXJldHVybiBhd2FpdChhc3luYyBlPT57Y29uc3QgdD1BYSgpLGE9YXdhaXQgTGEoZS51cmwsZS51cmwpLG49YXdhaXQgT3QoZS51cmwsYSk7bWUoKGF3YWl0IHQuQnJvd3Nlci5jcmVhdGVXaW5kb3coe3dvcmtzcGFjZVBsYXRmb3JtOntwYWdlczpbbl19fSkpLmlkZW50aXR5KX0pKGUuYm9va21hcmspO2NvbnN0IHM9QWEoKS5Ccm93c2VyLndyYXBTeW5jKHIpLGM9YXdhaXQgcy5nZXRQYWdlcygpLGw9KGF3YWl0IHMuX2dldExheW91dHNXaXRoU2VsZWN0ZWRWaWV3cygpKS5maW5kKChlPT5lLmlzQWN0aXZlKSk7aWYoIWwpdGhyb3cgRXJyb3IoYEJyb3dzZXIgJHtyfSBkb2VzIG5vdCBoYXZlIGFueSBhY3RpdmUgbGF5b3V0c2ApO2NvbnN0IGQ9Yy5maW5kKChlPT5lLmlzQWN0aXZlKSksdT0xPT09T2EoZC5sYXlvdXQuY29udGVudCkscD1sLnNlbGVjdGVkVmlld3NbMF07dT9hd2FpdChhc3luYyh7aXNXaW5kb3dzOmUsY3RybEtleTp0LG1ldGFLZXk6YSxjdXJyZW50Vmlld0lkOm4sYnJvd3NlcklkZW50aXR5Om8sdXJsOnIsc2hpZnRLZXk6aSxhY3RpdmVQYWdlOnMscGFnZXM6Y30pPT57aWYoZT90OmEpe2NvbnN0IGU9QWEoKS5Ccm93c2VyLndyYXBTeW5jKG8pLHQ9YXdhaXQgTGEocixyLG8pLGE9ey4uLmF3YWl0IE90KHIsdCksYXR0YWNoZWRQYWdlVHlwZTpcInNpbmdsZVZpZXdcIixzaW5nbGVWaWV3TmFtZTpyfSxuPWMuZmluZEluZGV4KChlPT5lLnBhZ2VJZD09PXMucGFnZUlkKSk7YXdhaXQgZS5fYWRkUGFnZShhLHtpbmRleDpuKzF9KSxpJiZlLnNldEFjdGl2ZVBhZ2UoYS5wYWdlSWQpfWVsc2UgZmluLlZpZXcud3JhcFN5bmMobikubmF2aWdhdGUocil9KSh7aXNXaW5kb3dzOmksY3RybEtleTp0LG1ldGFLZXk6YSxjdXJyZW50Vmlld0lkOnAsYnJvd3NlcklkZW50aXR5OnIsdXJsOm8sc2hpZnRLZXk6bixhY3RpdmVQYWdlOmQscGFnZXM6Y30pOmF3YWl0KGFzeW5jKHtpc1dpbmRvd3M6ZSxjdHJsS2V5OnQsbWV0YUtleTphLGN1cnJlbnRWaWV3SWQ6bixicm93c2VySWRlbnRpdHk6byx1cmw6cixzaGlmdEtleTppLGFjdGl2ZUxheW91dDpzfSk9PntpZihlP3Q6YSl7Y29uc3QgZT1maW4uVmlldy53cmFwU3luYyhuKSx0PWF3YWl0IGUuZ2V0Q3VycmVudFN0YWNrKCksYT0oYXdhaXQgdC5nZXRWaWV3cygpKS5maW5kSW5kZXgoKGU9PmUubmFtZT09PW4ubmFtZSkpLGk9e3VybDpyLGJyb3dzZXJJZGVudGl0eTpvLHRpdGxlOnJ9O2F3YWl0IHQuYWRkVmlldyhpLHtpbmRleDphKzF9KX1lbHNlIGF3YWl0IGZpbi5WaWV3LndyYXBTeW5jKHMuc2VsZWN0ZWRWaWV3c1swXSkubmF2aWdhdGUocil9KSh7aXNXaW5kb3dzOmksY3RybEtleTp0LG1ldGFLZXk6YSxjdXJyZW50Vmlld0lkOnAsYnJvd3NlcklkZW50aXR5OnIsdXJsOm8sc2hpZnRLZXk6bixhY3RpdmVMYXlvdXQ6bH0pfTt2YXIgQXI7IWZ1bmN0aW9uKGUpe2UuTGFiZWw9XCJub3JtYWxcIixlLlNlcGFyYXRvcj1cInNlcGFyYXRvclwiLGUuU3VibWVudT1cInN1Ym1lbnVcIixlLkNoZWNrYm94PVwiY2hlY2tib3hcIn0oQXJ8fChBcj17fSkpO2NvbnN0IFdyPXt0eXBlOkFyLlNlcGFyYXRvcixkYXRhOnZvaWQgMH0sRHI9YXN5bmMoKT0+KHt0eXBlOkFyLlN1Ym1lbnUsbGFiZWw6UWEoXCJjb250ZXh0TWVudS5wcmludFwiKSxzdWJtZW51Olt7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRcIiksZGF0YTp7dHlwZTpmLlByaW50fX0se3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50QWxsXCIpLGRhdGE6e3R5cGU6Zi5QcmludEFsbH19LFdyLHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwiY29udGV4dE1lbnUucHJpbnRTY3JlZW5cIiksZGF0YTp7dHlwZTpmLlByaW50U2NyZWVufX1dfSksVHI9KCk9Pih7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImNvbnRleHRNZW51LmNsb3NlV2luZG93XCIpLGRhdGE6e3R5cGU6Zy5DbG9zZVdpbmRvd319KSxScj1lPT4oe3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoZT9cImNvbnRleHRNZW51LnF1aXRFbnRlcnByaXNlQnJvd3NlclwiOlwiY29udGV4dE1lbnUucXVpdFBsYXRmb3JtXCIpLGRhdGE6e3R5cGU6Zy5RdWl0fX0pLEJyPSgpPT4oe3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJjb250ZXh0TWVudS5uZXdXaW5kb3dcIiksZGF0YTp7dHlwZTpnLk5ld1dpbmRvd319KSxFcj1lPT4oe3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoZT9cImVudGVycHJpc2VDb250ZXh0TWVudS5zYXZlU3VwZXJ0YWJcIjpcImNvbnRleHRNZW51LnNhdmVQYWdlXCIpLGRhdGE6e3R5cGU6Zy5TYXZlUGFnZX19KSxGcj1lPT4oe3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoZT9cImVudGVycHJpc2VDb250ZXh0TWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiY29udGV4dE1lbnUuc2F2ZVBhZ2VBc1wiKSxkYXRhOnt0eXBlOmcuU2F2ZVBhZ2VBc319KSxWcj0oZSx0KT0+KHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKHQ/XCJlbnRlcnByaXNlQ29udGV4dE1lbnUubmV3VGFiXCI6XCJjb250ZXh0TWVudS5uZXdQYWdlXCIpLGRhdGE6e3R5cGU6Zy5OZXdQYWdlfSxlbmFibGVkOmV9KSxOcj0oKT0+KHtsYWJlbDpRYShcImNvbnRleHRNZW51LnN3aXRjaFdvcmtzcGFjZVwiKX0pLExyPSgpPT4oe2xhYmVsOlFhKFwiY29udGV4dE1lbnUuZGVsZXRlV29ya3NwYWNlXCIpfSksX3I9KCk9Pih7bGFiZWw6UWEoXCJjb250ZXh0TWVudS5hcHBlYXJhbmNlXCIpfSksT3I9KGUsdCxhKT0+dC5tYXAoKHQ9Pntjb25zdCBuPXQud29ya3NwYWNlSWQ9PT1lLndvcmtzcGFjZUlkO3JldHVybntsYWJlbDp0LnRpdGxlLHR5cGU6QXIuQ2hlY2tib3gsZW5hYmxlZDohbixjaGVja2VkOm4sZGF0YTp7dHlwZTphLHdvcmtzcGFjZUlkOnQud29ya3NwYWNlSWR9fX0pKSxVcj1hc3luYygpPT57Y29uc3QgZT1hd2FpdCBBYSgpLlRoZW1lLmdldFNlbGVjdGVkU2NoZW1lKCk7cmV0dXJuW3tsYWJlbDpRYShcInRoZW1lLmxpZ2h0XCIpLHR5cGU6QXIuQ2hlY2tib3gsY2hlY2tlZDplPT09bS5MaWdodCxkYXRhOnt0eXBlOmcuQXBwZWFyYW5jZSxzY2hlbWU6bS5MaWdodH19LHtsYWJlbDpRYShcInRoZW1lLmRhcmtcIiksdHlwZTpBci5DaGVja2JveCxjaGVja2VkOmU9PT1tLkRhcmssZGF0YTp7dHlwZTpnLkFwcGVhcmFuY2Usc2NoZW1lOm0uRGFya319LHtsYWJlbDpRYShcInRoZW1lLnN5c3RlbVwiKSx0eXBlOkFyLkNoZWNrYm94LGNoZWNrZWQ6ZT09PW0uU3lzdGVtLGRhdGE6e3R5cGU6Zy5BcHBlYXJhbmNlLHNjaGVtZTptLlN5c3RlbX19XX0sR3I9YXN5bmMoZSx0PVtdKT0+e2NvbnN0IGE9YXdhaXQgU2UoKSx7bmV3UGFnZVVybDpufT1hd2FpdCBxbihlKSxvPWF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PXBlKGUpLHt3b3Jrc3BhY2VQbGF0Zm9ybTphfT1hd2FpdCB0LmdldE9wdGlvbnMoKTtyZXR1cm4gYT8uZGlzYWJsZU11bHRpcGxlUGFnZXN9KShlKSxyPWF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PXBlKGUpLHt3b3Jrc3BhY2VQbGF0Zm9ybTphfT1hd2FpdCB0LmdldE9wdGlvbnMoKTtyZXR1cm4gYT8uaXNMb2NrZWR9KShlKSxpPWF3YWl0IEFlKGUpLHM9W10sYz10Lmxlbmd0aD4wO24mJihzLnB1c2goQnIoKSksb3x8cy5wdXNoKFZyKCFyLGkpKSkscy5wdXNoKFdyKTtjb25zdCBsPUFhKCksZD1hd2FpdCBsLmdldEN1cnJlbnRXb3Jrc3BhY2UoKSx1PWF3YWl0IGwuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzKCkscD11LmZpbmQoKGU9PmUud29ya3NwYWNlSWQ9PT1kLndvcmtzcGFjZUlkKSk7cy5wdXNoKHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwiY29udGV4dE1lbnUucmVzdG9yZVwiKSxkYXRhOnt0eXBlOmcuUmVzdG9yZUNoYW5nZXN9LGVuYWJsZWQ6ISFwfSkscy5wdXNoKHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZVwiKSxkYXRhOnt0eXBlOmcuU2F2ZVdvcmtzcGFjZX0sZW5hYmxlZDohIXB9KSxzLnB1c2goe3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlQXNcIiksZGF0YTp7dHlwZTpnLlNhdmVXb3Jrc3BhY2VBc319KSxzLnB1c2goe3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJjb250ZXh0TWVudS5yZW5hbWVXb3Jrc3BhY2VcIiksZGF0YTp7dHlwZTpnLlJlbmFtZVdvcmtzcGFjZX0sZW5hYmxlZDohIXB9KSx1LnNvbWUoKGU9PmUud29ya3NwYWNlSWQhPT1kLndvcmtzcGFjZUlkKSk/cy5wdXNoKHtsYWJlbDpOcigpLmxhYmVsLHN1Ym1lbnU6T3IoZCx1LGcuU3dpdGNoV29ya3NwYWNlKSxkYXRhOnZvaWQgMH0se2xhYmVsOkxyKCkubGFiZWwsc3VibWVudTpPcihkLHUsZy5EZWxldGVXb3Jrc3BhY2UpLGRhdGE6dm9pZCAwfSk6cy5wdXNoKHtsYWJlbDpOcigpLmxhYmVsLGVuYWJsZWQ6ITEsZGF0YTp2b2lkIDB9LHtsYWJlbDpMcigpLmxhYmVsLGVuYWJsZWQ6ITEsZGF0YTp2b2lkIDB9KSxzLnB1c2goe2xhYmVsOlFhKFwiY29udGV4dE1lbnUuZG93bmxvYWRzXCIpLGRhdGE6e3R5cGU6Zy5Eb3dubG9hZHN9fSk7Y29uc3Qgdz1hd2FpdCBsLlRoZW1lLmdldFRoZW1lcygpO3JldHVybih3WzBdJiZcInBhbGV0dGVzXCJpbiB3WzBdfHwhd1swXXx8MD09PXcubGVuZ3RoKSYmcy5wdXNoKHtsYWJlbDpfcigpLmxhYmVsLHN1Ym1lbnU6YXdhaXQgVXIoKSxkYXRhOnZvaWQgMH0pLHMucHVzaChXcixFcihpKSxGcihpKSxhd2FpdChhc3luYyBlPT57Y29uc3QgdD1hd2FpdCB4cigpO3JldHVybntsYWJlbDpRYShcImNvbnRleHRNZW51LnByaW50XCIpLHN1Ym1lbnU6W3t0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludFwiKSxkYXRhOnt0eXBlOmcuUHJpbnR9LGVuYWJsZWQ6ZX0se3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50QWxsXCIpLGRhdGE6e3R5cGU6Zy5QcmludEFsbH19LC4uLnQ/W1dyLHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwiY29udGV4dE1lbnUucHJpbnRTY3JlZW5cIiksZGF0YTp7dHlwZTpnLlByaW50U2NyZWVufX1dOltdXSxkYXRhOnZvaWQgMH19KShjKSksYT9bLi4ucyxUcigpLFdyLHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwiY29udGV4dE1lbnUub3BlblN0b3JlZnJvbnRcIiksZGF0YTp7dHlwZTpnLk9wZW5TdG9yZWZyb250fX0sV3IsUnIoKV06Wy4uLnMsV3IsVHIoKSxXcixScigpXX0sSHI9YXN5bmMoZSx0KT0+e2NvbnN0IGE9dC5zZWxlY3RlZFZpZXdzWzBdLG49ZmluLlZpZXcud3JhcFN5bmMoYSksbz1hd2FpdChhc3luYyBlPT57Y29uc3R7bmV3VGFiVXJsOnR9PWF3YWl0IHFuKGUpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBjcmVhdGUgYSBuZXcgcGFnZSB3aXRob3V0IGEgbmV3VGFiVXJsIHNldFwiKTtyZXR1cm57dXJsOnQsdGFyZ2V0OmUsdGl0bGU6XCJOZXcgVGFiXCJ9fSkoZSk7YXdhaXQgQWEoKS5jcmVhdGVWaWV3KG8sZSxuLmlkZW50aXR5KX0sJHI9YXN5bmMoZSx0KT0+e2NvbnN0IGE9QWEoKS5Ccm93c2VyLndyYXBTeW5jKGUpLG49KGF3YWl0IGEuZ2V0UGFnZXMoKSkuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpLG89YXdhaXQgZmluLldpbmRvdy53cmFwU3luYyhlKS5nZXRDdXJyZW50Vmlld3MoKTtpZih0Lmxlbmd0aD09PW8ubGVuZ3RoLShuLnBhbmVscz8/W10pLmxlbmd0aCl7cmV0dXJuIHZvaWQoYXdhaXQgcXQoZSkpLmRpc3BhdGNoKGVhLkNsb3NlUGFnZSx7cGFnZUlkOm4/LnBhZ2VJZH0pfWNvbnN0IHI9ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCk7dC5mb3JFYWNoKChhc3luYyB0PT57Y29uc3Qgbz1hd2FpdCBmaW4uVmlldy53cmFwU3luYyh0KS5nZXRQYXJlbnRMYXlvdXQoKTthd2FpdCByLmNsb3NlVmlldyh0KTtjb25zdHtoYXNVbnNhdmVkQ2hhbmdlczppfT1hd2FpdChhc3luYyBlPT4oYXdhaXQgd3Qod2UpKS5kaXNwYXRjaChsdC5IYW5kbGVQYWdlQ2hhbmdlcyxlKSkoe3BhZ2U6ey4uLm4sbGF5b3V0OmF3YWl0IG8uZ2V0Q29uZmlnKCl9LGlkZW50aXR5OmUsZXZlbnREZXRhaWxzOnt0eXBlOmguVmlld1JlbW92ZWQsdmlld0lkZW50aXR5OnR9fSk7aSYmYXdhaXQgYS51cGRhdGVQYWdlKHtwYWdlSWQ6bi5wYWdlSWQscGFnZTp7aGFzVW5zYXZlZENoYW5nZXM6ITB9fSl9KSl9LEtyPWFzeW5jKGUsdCk9Pntjb25zdCBhPWF3YWl0KGU9PlByb21pc2UuYWxsKGUubWFwKChhc3luYyBlPT5maW4uVmlldy53cmFwU3luYyhlKS5nZXRJbmZvKCkpKSkpKHQpLHtuZXdQYWdlVXJsOm4sbmV3VGFiVXJsOm99PWF3YWl0IHFuKGUpO2EuZm9yRWFjaCgoYXN5bmMgZT0+e2UudXJsIT09biYmZS51cmwhPT1vJiZhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3NlcihlLnVybCl9KSl9LHpyPShlLHQpPT57dC5mb3JFYWNoKChhc3luYyB0PT57Y29uc3QgYT1maW4uVmlldy53cmFwU3luYyh0KTthd2FpdChhc3luYyhlLHQpPT57Y29uc3R7dXJsOmF9PWF3YWl0IHQuZ2V0SW5mbygpLG49ey4uLmF3YWl0IHQuZ2V0T3B0aW9ucygpLHVybDphLHRhcmdldDplLG5hbWU6dm9pZCAwfTthd2FpdCBBYSgpLmNyZWF0ZVZpZXcobixlLHQuaWRlbnRpdHkpfSkoZSxhKX0pKX0sSnI9YXN5bmMoZSx0LGEpPT57Y29uc3Qgbj17bmV3Q2hhbm5lbElkOnQsc2VsZWN0ZWRWaWV3czphfTsoYXdhaXQgcXQoZSkpLmRpc3BhdGNoKGVhLkFkZFRvQ2hhbm5lbCxuKX0scXI9YXN5bmMoZSx0KT0+eyhhd2FpdCBxdChlKSkuZGlzcGF0Y2goZWEuUmVtb3ZlRnJvbUNoYW5uZWwsdCl9LFpyPWFzeW5jKGUsdCk9PntpZighZSlyZXR1cm47Y29uc3QgYT10LmlkZW50aXR5LG49ZmluLldpbmRvdy53cmFwU3luYyhhKTtzd2l0Y2goS2Uoe3R5cGU6XCJWaWV3IFRhYiBNZW51XCIsYWN0aW9uOlwiU2VsZWN0IE1lbnUgSXRlbVwiLHZhbHVlOmUudHlwZSxza2lwVmFsdWVIYXNoaW5nOiEwfSksZS50eXBlKXtjYXNlIGYuQmFjazphd2FpdChhc3luYyBlPT57Y29uc3QgdD1lLm1hcCgoZT0+ZmluLlZpZXcud3JhcFN5bmMoZSkubmF2aWdhdGVCYWNrKCkpKTthd2FpdCBQcm9taXNlLmFsbCh0KX0pKHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBmLkZvcndhcmQ6YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9ZS5tYXAoKGU9PmZpbi5WaWV3LndyYXBTeW5jKGUpLm5hdmlnYXRlRm9yd2FyZCgpKSk7YXdhaXQgUHJvbWlzZS5hbGwodCl9KSh0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZi5QcmludDphd2FpdCBGbyh0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZi5QcmludEFsbDphd2FpdCBuLnByaW50KHtjb250ZW50Olwidmlld3NcIixpbmNsdWRlU2VsZjohMX0pO2JyZWFrO2Nhc2UgZi5QcmludFNjcmVlbjphd2FpdCBuLnByaW50KHtjb250ZW50Olwic2NyZWVuc2hvdFwifSk7YnJlYWs7Y2FzZSBmLkNsb3NlVmlld3M6YXdhaXQgJHIoYSx0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZi5PcGVuV2l0aERlZmF1bHRCcm93c2VyOmF3YWl0IEtyKGEsdC5zZWxlY3RlZFZpZXdzKTticmVhaztjYXNlIGYuUmVsb2FkVmlld3M6dC5zZWxlY3RlZFZpZXdzLmZvckVhY2goKGFzeW5jIGU9Pntjb25zdCB0PWZpbi5WaWV3LndyYXBTeW5jKGUpO2F3YWl0IHQucmVsb2FkKCl9KSk7YnJlYWs7Y2FzZSBmLk5ld1ZpZXc6YXdhaXQgSHIoYSx0KTticmVhaztjYXNlIGYuRHVwbGljYXRlVmlld3M6enIoYSx0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZi5BZGRUb0NoYW5uZWw6SnIoYSxlLm9wdGlvbix0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZi5SZW1vdmVGcm9tQ2hhbm5lbDpxcihhLHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBmLkN1c3RvbTppZihlLmFjdGlvbil7Y29uc3Qgbj17Y2FsbGVyVHlwZTpDLlZpZXdUYWJDb250ZXh0TWVudSx3aW5kb3dJZGVudGl0eTphLHNlbGVjdGVkVmlld3M6dC5zZWxlY3RlZFZpZXdzLGN1c3RvbURhdGE6ZS5hY3Rpb24uY3VzdG9tRGF0YX07QWEoKS5faW52b2tlQ3VzdG9tQWN0aW9uKGUuYWN0aW9uLmlkLG4pfX19O2xldCBqcj1cIlBsYXRmb3JtXCI7Y29uc3QgUXI9YXN5bmMoKT0+anI7Y29uc3QgWXI9YXN5bmMoZSx0KT0+e2lmKCFlKXJldHVybjtjb25zdCBhPXQuaWRlbnRpdHksbj1hd2FpdCBxdChhKSxvPUFhKCkuQnJvd3Nlci53cmFwU3luYyhhKSxyPWZpbi5XaW5kb3cud3JhcFN5bmMoYSk7aWYoS2Uoe3R5cGU6XCJHbG9iYWwgTWVudVwiLGFjdGlvbjpcIlNlbGVjdCBNZW51IEl0ZW1cIix2YWx1ZTplLnR5cGUsc2tpcFZhbHVlSGFzaGluZzohMCxkYXRhOnthY3Rpb246ZS5hY3Rpb24/LmlkfX0pLGF3YWl0IEFlKGEpKXtjb25zdCBhPWF3YWl0KGFzeW5jKGUsdCk9Pntjb25zdCBhPXQuaWRlbnRpdHksbj1BYSgpLkJyb3dzZXIud3JhcFN5bmMoYSksbz0oYXdhaXQgbi5nZXRQYWdlcygpKS5maW5kKChlPT5lLmlzQWN0aXZlKSkscj1HdCh7Li4uYSxsYXlvdXROYW1lOm8ubGF5b3V0Q29udGFpbmVyS2V5fSksaT10LnNlbGVjdGVkVmlld3M7c3dpdGNoKGU/LnR5cGUpe2Nhc2UgYi5Mb2NrOmF3YWl0IG4udXBkYXRlUGFnZSh7cGFnZUlkOm8ucGFnZUlkLHBhZ2U6e2lzTG9ja2VkOiFvLmlzTG9ja2VkfX0pO2JyZWFrO2Nhc2UgYi5BZGRUb0NoYW5lbDplLm9wdGlvbj9hd2FpdCBKcihhLGUub3B0aW9uLGkpOm51bGw9PT1lLm9wdGlvbiYmYXdhaXQgcXIoYSxpKTticmVhaztjYXNlIGcuTmV3V2luZG93Ontjb25zdCBlPWF3YWl0IFpuKGEpO2F3YWl0IEFhKCkuQnJvd3Nlci5jcmVhdGVXaW5kb3coe3dvcmtzcGFjZVBsYXRmb3JtOntwYWdlczpbZV0sd2luZG93VHlwZTpcImVudGVycHJpc2VcIn19KTticmVha31jYXNlIGIuUGluOntjb25zdHthbHdheXNPblRvcDplfT1hd2FpdCBuLm9wZW5maW5XaW5kb3cuZ2V0T3B0aW9ucygpO2F3YWl0IG4ub3BlbmZpbldpbmRvdy51cGRhdGVPcHRpb25zKHthbHdheXNPblRvcDohZX0pO2JyZWFrfWNhc2UgYi5TaG93SGlkZVRhYnM6YXdhaXQgci5pc1Nob3dpbmdUYWJzKCk/YXdhaXQgci5oaWRlKCk6YXdhaXQgci5zaG93KCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4hMX1yZXR1cm4hMH0pKGUsdCk7aWYoYSlyZXR1cm59c3dpdGNoKGUudHlwZSl7Y2FzZSBnLk5ld1dpbmRvdzp7Y29uc3R7bmV3UGFnZVVybDplfT1hd2FpdCBxbihhKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gY3JlYXRlIGEgbmV3IGVtcHR5IHdpbmRvdyB3aXRob3V0IGEgbmV3UGFnZVVybCBzZXRcIik7QWEoKS5jcmVhdGVWaWV3KHt0YXJnZXQ6dm9pZCAwLHVybDplfSk7YnJlYWt9Y2FzZSBnLk5ld1BhZ2U6YXdhaXQgRG8oYSk7YnJlYWs7Y2FzZSBnLkNsb3NlV2luZG93Om4uZGlzcGF0Y2goZWEuQ2xvc2VCcm93c2VyV2luZG93KTticmVhaztjYXNlIGcuU2F2ZVdvcmtzcGFjZTphd2FpdCBBbyhhKTticmVhaztjYXNlIGcuU2F2ZVBhZ2U6YXdhaXQgVG8oYSk7YnJlYWs7Y2FzZSBnLlNhdmVQYWdlQXM6YXdhaXQgUm8oYSk7YnJlYWs7Y2FzZSBnLlNhdmVXb3Jrc3BhY2VBczphd2FpdCBXbyhhKTticmVhaztjYXNlIGcuUmVuYW1lV29ya3NwYWNlOm8uX29wZW5TYXZlTW9kYWwoe21lbnVUeXBlOnguUkVOQU1FX1dPUktTUEFDRX0pO2JyZWFrO2Nhc2UgZy5Td2l0Y2hXb3Jrc3BhY2U6YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9QWEoKSxuPShhd2FpdCBhLlN0b3JhZ2UuZ2V0V29ya3NwYWNlcygpKS5maW5kKChlPT5lLndvcmtzcGFjZUlkPT09dC53b3Jrc3BhY2VJZCkpO2EuYXBwbHlXb3Jrc3BhY2Uobix7c2tpcFByb21wdDohMSxwcm9tcHRDb250YWluZXJXaW5kb3dJZGVudGl0eTplfSl9KShhLGUpO2JyZWFrO2Nhc2UgZy5EZWxldGVXb3Jrc3BhY2U6YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9QWEoKSxuPShhd2FpdCBhLlN0b3JhZ2UuZ2V0V29ya3NwYWNlcygpKS5maW5kKChlPT5lLndvcmtzcGFjZUlkPT09dC53b3Jrc3BhY2VJZCkpO24mJmF3YWl0IHdvKGUsbi50aXRsZSkmJihhd2FpdCBhLlN0b3JhZ2UuZGVsZXRlV29ya3NwYWNlKHQud29ya3NwYWNlSWQpLEpuKFFhKFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VEZWxldGVkXCIpLGUpKX0pKGEsZSk7YnJlYWs7Y2FzZSBnLkRvd25sb2Fkczphd2FpdCBFbyhhKTticmVhaztjYXNlIGcuQXBwZWFyYW5jZTphd2FpdCBBYSgpLlRoZW1lLnNldFNlbGVjdGVkU2NoZW1lKGUuc2NoZW1lKTticmVhaztjYXNlIGcuUXVpdDp7Y29uc3QgZT1RcigpO2F3YWl0IGhvKGEsYXdhaXQgZSkmJmZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLnF1aXQoKX1icmVhaztjYXNlIGcuT3BlblN0b3JlZnJvbnQ6KGFzeW5jKCk9Pnthd2FpdCBTZSgpJiZtZShnZSl9KSgpO2JyZWFrO2Nhc2UgZy5SZXN0b3JlQ2hhbmdlczphd2FpdCB5bygpO2JyZWFrO2Nhc2UgZy5QcmludDphd2FpdCBGbyh0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZy5QcmludEFsbDphd2FpdCByLnByaW50KHtjb250ZW50Olwidmlld3NcIixpbmNsdWRlU2VsZjohMX0pO2JyZWFrO2Nhc2UgZy5QcmludFNjcmVlbjphd2FpdCByLnByaW50KHtjb250ZW50Olwic2NyZWVuc2hvdFwifSk7YnJlYWs7Y2FzZSBnLkN1c3RvbTppZihlLmFjdGlvbil7Y29uc3QgdD17Y2FsbGVyVHlwZTpDLkdsb2JhbENvbnRleHRNZW51LHdpbmRvd0lkZW50aXR5OmEsY3VzdG9tRGF0YTplLmFjdGlvbi5jdXN0b21EYXRhfTtBYSgpLl9pbnZva2VDdXN0b21BY3Rpb24oZS5hY3Rpb24uaWQsdCl9ZWxzZSBjb25zb2xlLndhcm4oYEVuY291bnRlcmVkIGEgQ3VzdG9tIGNvbnRleHQgbWVudSBvcHRpb24gd2l0aCBhbiBcImFjdGlvblwiIHByb3BlcnR5IHdpdGggdmFsdWUgXCIke2UuYWN0aW9ufVwiYCl9fSxYcj1hc3luYyhlLHQsYSk9Pntjb25zdCBuPUFhKCkuQnJvd3Nlci53cmFwU3luYyh0LmlkZW50aXR5KSxvPWZpbi5XaW5kb3cud3JhcFN5bmModC5pZGVudGl0eSkscj1hd2FpdCBxdCh0LmlkZW50aXR5KSxpPWF3YWl0IEFlKCk7c3dpdGNoKGUmJktlKHt0eXBlOlwiUGFnZSBUYWIgTWVudVwiLGFjdGlvbjpcIlNlbGVjdCBNZW51IEl0ZW1cIix2YWx1ZTplLnR5cGUsc2tpcFZhbHVlSGFzaGluZzohMH0pLGU/LnR5cGUpe2Nhc2Ugay5TYXZlOmF3YWl0IFRvKHQuaWRlbnRpdHksdC5wYWdlSWQpO2JyZWFrO2Nhc2Ugay5TYXZlQXM6YXdhaXQgUm8odC5pZGVudGl0eSx0LnBhZ2VJZCk7YnJlYWs7Y2FzZSBrLk5ld1BhZ2U6YXdhaXQgRG8odC5pZGVudGl0eSk7YnJlYWs7Y2FzZSBrLkRlbGV0ZVBhZ2U6YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9QWEoKSxuPWEuQnJvd3Nlci53cmFwU3luYyhlKSxvPShhd2FpdCBhLlN0b3JhZ2UuZ2V0UGFnZXMoKSkuZmluZCgoZT0+ZS5wYWdlSWQ9PT10KSk7byYmYXdhaXQgbW8oZSxvLnRpdGxlKSYmKGF3YWl0IGEuU3RvcmFnZS5kZWxldGVQYWdlKG8ucGFnZUlkKSxhd2FpdCBuLnJlbW92ZVBhZ2UodCksSm4oUWEoXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIiksZSxRYShcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlbkRlbGV0ZWRcIix7dGl0bGU6by50aXRsZX0pKSl9KSh0LmlkZW50aXR5LHQucGFnZUlkKTticmVhaztjYXNlIGsuUmVuYW1lOmlmKGF3YWl0IEFlKHQuaWRlbnRpdHkpKXthd2FpdCBuLnNldEFjdGl2ZVBhZ2UodC5wYWdlSWQpO2NvbnN0IGU9YXdhaXQgb3IoKTthd2FpdCBlLmRpc3BhdGNoKFwib3BlblwiLHtwYXJlbnRJZGVudGl0eTp0LmlkZW50aXR5LHR5cGU6aXIuUmVuYW1lU3VwZXJ0YWIsYW5jaG9yQmVoYXZpb3I6dGkuQ2VudGVyLHg6YS5sZWZ0K2Eud2lkdGgvMi0xNjQseTphLmJvdHRvbS04LHBheWxvYWQ6e3BhZ2VJZDp0LnBhZ2VJZH19KX1lbHNlIGF3YWl0IG4uX29wZW5TYXZlTW9kYWwoe21lbnVUeXBlOnguUkVOQU1FX1BBR0UsaWQ6dC5wYWdlSWR9KTticmVhaztjYXNlIGsuRHVwbGljYXRlOnIuZGlzcGF0Y2goZWEuRHVwbGljYXRlUGFnZSx0LnBhZ2VJZCk7YnJlYWs7Y2FzZSBrLkNsb3NlOmk/YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9QWEoKS5Ccm93c2VyLndyYXBTeW5jKGUpLG49YXdhaXQgYS5nZXRQYWdlcygpO2Zvcihjb25zdCBvIG9mIG4paWYoby5wYWdlSWQ9PT10KXthd2FpdCBhLnJlbW92ZVBhZ2Uoby5wYWdlSWQpLGF3YWl0IGEuX3RyYWNrUmVtb3ZlZFRhYih7aWRlbnRpdHk6ZSxwYWdlOm99KTticmVha319KSh0LmlkZW50aXR5LHQucGFnZUlkKTpyLmRpc3BhdGNoKGVhLkNsb3NlUGFnZSx7cGFnZUlkOnQucGFnZUlkfSk7YnJlYWs7Y2FzZSBrLkN1c3RvbTppZihlLmFjdGlvbil7Y29uc3QgYT17Y2FsbGVyVHlwZTpDLlBhZ2VUYWJDb250ZXh0TWVudSx3aW5kb3dJZGVudGl0eTp0LmlkZW50aXR5LHBhZ2VJZDp0LnBhZ2VJZCxjdXN0b21EYXRhOmUuYWN0aW9uLmN1c3RvbURhdGF9O0FhKCkuX2ludm9rZUN1c3RvbUFjdGlvbihlLmFjdGlvbi5pZCxhKX1lbHNlIGNvbnNvbGUud2FybihgRW5jb3VudGVyZWQgYSBDdXN0b20gY29udGV4dCBtZW51IG9wdGlvbiB3aXRoIGFuIFwiYWN0aW9uXCIgcHJvcGVydHkgd2l0aCB2YWx1ZSBcIiR7ZS5hY3Rpb259XCJgKTticmVhaztjYXNlIGsuUmVmcmVzaDphd2FpdChhc3luYyhlLHQpPT57Y29uc3QgYT1BYSgpLG49YS5Ccm93c2VyLndyYXBTeW5jKGUpLG89KGF3YWl0IG4uZ2V0UGFnZXMoKSkuZmluZCgoZT0+dD9lLnBhZ2VJZD09PXQ6ZS5pc0FjdGl2ZSkpO28/LmxheW91dD8uY29udGVudCYmTmEoby5sYXlvdXQuY29udGVudCkuZm9yRWFjaCgoYXN5bmMgZT0+eyhhd2FpdCBmaW4uVmlldy53cmFwKHt1dWlkOmEuaWRlbnRpdHkudXVpZCxuYW1lOmUubmFtZX0pKS5yZWxvYWQoKX0pKX0pKHQuaWRlbnRpdHksdC5wYWdlSWQpO2JyZWFrO2Nhc2Ugay5DbG9zZU90aGVyczphd2FpdChhc3luYyhlLHQpPT57Y29uc3QgYT1BYSgpLkJyb3dzZXIud3JhcFN5bmMoZSksbj1hd2FpdCBhLmdldFBhZ2VzKCk7Zm9yKGNvbnN0IG8gb2YgbilvLnBhZ2VJZCE9PXQmJihhd2FpdCBhLnJlbW92ZVBhZ2Uoby5wYWdlSWQpLGF3YWl0IGEuX3RyYWNrUmVtb3ZlZFRhYih7aWRlbnRpdHk6ZSxwYWdlOm99KSl9KSh0LmlkZW50aXR5LHQucGFnZUlkKTticmVhaztjYXNlIGsuU2F2ZVdvcmtzcGFjZUFzOmF3YWl0IFdvKHQuaWRlbnRpdHkpO2JyZWFrO2Nhc2Ugay5QcmludDp7Y29uc3QgZT1hd2FpdCBuLl9nZXRMYXlvdXRzV2l0aFNlbGVjdGVkVmlld3MoKSx7c2VsZWN0ZWRWaWV3czphfT1lLmZpbmQoKGU9PmUucGFnZUlkPT09dC5wYWdlSWQpKTthd2FpdCBGbyhhKTticmVha31jYXNlIGsuUHJpbnRBbGw6YXdhaXQgbi5zZXRBY3RpdmVQYWdlKHQucGFnZUlkKSxhd2FpdCBvLnByaW50KHtjb250ZW50Olwidmlld3NcIixpbmNsdWRlU2VsZjohMX0pO2JyZWFrO2Nhc2Ugay5QcmludFNjcmVlbjphd2FpdCBuLnNldEFjdGl2ZVBhZ2UodC5wYWdlSWQpLGF3YWl0IG8ucHJpbnQoe2NvbnRlbnQ6XCJzY3JlZW5zaG90XCJ9KX19LGVpPWFzeW5jKGUsdCk9PntpZihlPy50eXBlKXtjb25zdCBhPXQuaWRlbnRpdHk7c3dpdGNoKGUudHlwZSl7Y2FzZSB2LlNhdmVQYWdlOmF3YWl0IFRvKGEpO2JyZWFrO2Nhc2Ugdi5TYXZlV29ya3NwYWNlOmF3YWl0IEFvKGEpO2JyZWFrO2Nhc2Ugdi5TYXZlUGFnZUFzOmF3YWl0IFJvKGEpO2JyZWFrO2Nhc2Ugdi5TYXZlV29ya3NwYWNlQXM6YXdhaXQgV28oYSk7YnJlYWs7Y2FzZSB2LkN1c3RvbTppZihlLmFjdGlvbil7Y29uc3QgYT17Y2FsbGVyVHlwZTpDLlNhdmVCdXR0b25Db250ZXh0TWVudSx3aW5kb3dJZGVudGl0eTp0LmlkZW50aXR5LHBhZ2VJZDp0LnBhZ2VJZCxjdXN0b21EYXRhOmUuYWN0aW9uLmN1c3RvbURhdGF9O0FhKCkuX2ludm9rZUN1c3RvbUFjdGlvbihlLmFjdGlvbi5pZCxhKX1lbHNlIGNvbnNvbGUud2FybihgRW5jb3VudGVyZWQgYSBDdXN0b20gY29udGV4dCBtZW51IG9wdGlvbiB3aXRoIGFuIFwiYWN0aW9uXCIgcHJvcGVydHkgd2l0aCB2YWx1ZSBcIiR7ZS5hY3Rpb259XCJgKX19fTt2YXIgdGk7IWZ1bmN0aW9uKGUpe2VbZS5Ub3BMZWZ0PTBdPVwiVG9wTGVmdFwiLGVbZS5Ub3BSaWdodD0xXT1cIlRvcFJpZ2h0XCIsZVtlLkJvdHRvbUxlZnQ9Ml09XCJCb3R0b21MZWZ0XCIsZVtlLkJvdHRvbVJpZ2h0PTNdPVwiQm90dG9tUmlnaHRcIixlW2UuQ2VudGVyPTRdPVwiQ2VudGVyXCJ9KHRpfHwodGk9e30pKTtjb25zdCBhaT1hc3luYyhlLHQsYSxuKT0+e2NvbnN0e3g6byx5OnIsaWRlbnRpdHk6aSx0ZW1wbGF0ZTpzLGNhbGxiYWNrOmN9PWUsbD1hd2FpdCBBZShpKSx7ZGF0YTpkfT1sP2F3YWl0KGFzeW5jKGUsdCxhLG4pPT57aWYoIUEpdGhyb3cgbmV3IEVycm9yKFwic2hvd0VudGVycHJpc2VDb250ZXh0TWVudSBjYW4gb25seSBiZSB1c2VkIGluIGEgSGVyZSBlbnYuIEF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO2lmKCFuJiYhZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcInNob3dFbnRlcnByaXNlQ29udGV4dE1lbnUgY2FuIG9ubHkgYmUgdXNlZCBpbiBhIEhlcmUgd2luZG93LlwiKTtjb25zdCBvPWZpbi5XaW5kb3cud3JhcFN5bmMoe3V1aWQ6d2UudXVpZCxuYW1lOmRlLkVudGVycHJpc2VDb250ZXh0TWVudX0pO2F3YWl0IG8uaXNTaG93aW5nKCkmJmF3YWl0IG8uYmx1cigpO2NvbnN0IHI9YXdhaXQgb3IoKSxpPW5ldyBQcm9taXNlKCgoZSx0KT0+e3IucmVnaXN0ZXIoXCJyZXNwb25zZVwiLCh0PT57ZSh0KX0pKX0pKSx7eDpzLHk6Yyx0ZW1wbGF0ZTpsfT1lO3JldHVybiBhd2FpdCByLmRpc3BhdGNoKFwib3BlblwiLHtwYXJlbnRJZGVudGl0eTpuLmlkZW50aXR5LHJlc3BvbnNlSWRlbnRpdHk6d2UsdHlwZTp0LGFuY2hvckJlaGF2aW9yOmEseDpzLHk6YyxwYXlsb2FkOnt0ZW1wbGF0ZTpsfX0pLGl9KSh7eDpvLHk6cix0ZW1wbGF0ZTpzfSxhLG4sZmluLldpbmRvdy53cmFwU3luYyhpKSk6YXdhaXQgZnVuY3Rpb24oZSx0KXtpZighQSl0aHJvdyBuZXcgRXJyb3IoXCJzaG93Q29udGV4dE1lbnUgY2FuIG9ubHkgYmUgdXNlZCBpbiBhbiBPcGVuRmluIGVudi4gQXZvaWQgY2FsbGluZyB0aGlzIG1ldGhvZCBkdXJpbmcgcHJlLXJlbmRlcmluZy5cIik7aWYoIXQmJiFmaW4ubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwic2hvd0NvbnRleHRNZW51IGNhbiBvbmx5IGJlIHVzZWQgaW4gYW4gT3BlbkZpbiB3aW5kb3cuXCIpO3JldHVybih0fHxmaW4uV2luZG93LmdldEN1cnJlbnRTeW5jKCkpLnNob3dQb3B1cE1lbnUoZSl9KHt4Om8seTpyLHRlbXBsYXRlOnN9LGZpbi5XaW5kb3cud3JhcFN5bmMoaSkpO2MoZCxlKX07YXN5bmMgZnVuY3Rpb24gbmkoZSx0KXtjb25zdCBhPWF3YWl0IEFlKGUuaWRlbnRpdHkpLG49YT9hd2FpdChhc3luYyh7aWRlbnRpdHk6ZSxzZWxlY3RlZFZpZXdzOnR9KT0+e2NvbnN0IGE9QWEoKSxuPWEuQnJvd3Nlci53cmFwU3luYyhlKSxvPShhd2FpdCBuLmdldFBhZ2VzKCkpLmZpbmQoKGU9PmUuaXNBY3RpdmUpKSxyPU9hKG8ubGF5b3V0LmNvbnRlbnQpPjEsaT1hd2FpdCBBZShlKSxzPWF3YWl0IGEuVGhlbWUuZ2V0VGhlbWVzKCksYz1zWzBdJiZcInBhbGV0dGVzXCJpbiBzWzBdfHwhc1swXXx8MD09PXMubGVuZ3RoLGw9ey4uLkVyKGkpLGVuYWJsZWQ6cn0sZD17Li4uRnIoaSksZW5hYmxlZDpyfTtyZXR1cm5bQnIoKSxWcighMCxpKSx7dHlwZTpBci5TZXBhcmF0b3J9LGwsZCx7dHlwZTpBci5TZXBhcmF0b3J9LC4uLmM/W3t0eXBlOkFyLlN1Ym1lbnUsbGFiZWw6X3IoKS5sYWJlbCxzdWJtZW51OmF3YWl0IFVyKCl9XTpbXSx7dHlwZTpBci5TZXBhcmF0b3J9LFRyKCkse3R5cGU6QXIuU2VwYXJhdG9yfSxScighMCldfSkoe2lkZW50aXR5OmUuaWRlbnRpdHksc2VsZWN0ZWRWaWV3czplLnNlbGVjdGVkVmlld3N9KTphd2FpdCBHcihlLmlkZW50aXR5LGUuc2VsZWN0ZWRWaWV3cyksbz1hd2FpdCBRcigpO2F8fChuLmZpbmQoKGU9PmUuZGF0YT8udHlwZT09PWcuUXVpdCkpLmxhYmVsPWBRdWl0ICR7b31gKTtjb25zdHtyZWN0OnIsLi4uaX09ZSx7eDpzLHk6Y309YT97eDpyLmxlZnQrci53aWR0aCx5OnIuYm90dG9tfTplLGw9ey4uLmkseDpzLHk6Yyx0ZW1wbGF0ZTpuLGNhbGxiYWNrOllyfTthd2FpdCB0aGlzLm9wZW5HbG9iYWxDb250ZXh0TWVudShsLHQpfWFzeW5jIGZ1bmN0aW9uIG9pKGUsdCl7Y29uc3QgYT17Li4uZSxjYWxsYmFjazpacn07YXdhaXQgdGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51KGEsdCl9YXN5bmMgZnVuY3Rpb24gcmkoZSx0KXtjb25zdCBhPWF3YWl0KGFzeW5jKGUsdCk9Pntjb25zdCBhPWF3YWl0IEFhKCkuU3RvcmFnZS5nZXRQYWdlKGUpLG49YXdhaXQgbG4oKSxvPWF3YWl0IEFlKHQpLHI9bi5maW5kKCh0PT50LnBhZ2VJZD09PWUpKSxpPU9hKHIubGF5b3V0LmNvbnRlbnQpPjEse3dvcmtzcGFjZVBsYXRmb3JtOnN9PWF3YWl0IHBlKHQpLmdldE9wdGlvbnMoKSxjPSEocy5pc0xvY2tlZHx8cy5wcmV2ZW50UGFnZUNsb3NlfHxyLmNsb3NlQnV0dG9uPy5kaXNhYmxlZHx8ci5jbG9zZUJ1dHRvbj8uaGlkZGVuKSxsPVt7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIiksZGF0YTp7dHlwZTprLk5ld1BhZ2V9fSxXcix7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcInJlbG9hZFwiKSxkYXRhOnt0eXBlOmsuUmVmcmVzaH19LHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmR1cGxpY2F0ZVwiKSxkYXRhOnt0eXBlOmsuRHVwbGljYXRlfSxlbmFibGVkOiFzLmlzTG9ja2VkfSxhd2FpdCBEcigpLFdyLHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKGk/XCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlU3VwZXJ0YWJcIjpcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VUYWJcIiksZGF0YTp7dHlwZTprLkNsb3NlfSxlbmFibGVkOmN9XSxkPVt7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIiksZGF0YTp7dHlwZTprLk5ld1BhZ2V9fSxXcix7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImVudGVycHJpc2VTYXZlTW9kYWwucmVuYW1lU3VwZXJ0YWJcIiksZGF0YTp7dHlwZTprLlJlbmFtZX0sZW5hYmxlZDohcy5pc0xvY2tlZCYmISFhJiZpfSx7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImVudGVycHJpc2VDb250ZXh0TWVudS5kdXBsaWNhdGVcIiksZGF0YTp7dHlwZTprLkR1cGxpY2F0ZX0sZW5hYmxlZDohcy5pc0xvY2tlZH0sV3Ise3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCIpLGRhdGE6e3R5cGU6ay5TYXZlfSxlbmFibGVkOml9LHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYkFzXCIpLGRhdGE6e3R5cGU6ay5TYXZlQXN9LGVuYWJsZWQ6aX0sV3Ise3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZGVsZXRlU3VwZXJ0YWJcIiksZGF0YTp7dHlwZTprLkRlbGV0ZVBhZ2V9LGVuYWJsZWQ6ISFhfSxXcix7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShpP1wiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVN1cGVydGFiXCI6XCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlVGFiXCIpLGRhdGE6e3R5cGU6ay5DbG9zZX0sZW5hYmxlZDpjfV0sdT1be3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiKSxkYXRhOnt0eXBlOmsuU2F2ZX0sZW5hYmxlZDohMH0se3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJzYXZlTWVudS5zYXZlUGFnZUFzXCIpLGRhdGE6e3R5cGU6ay5TYXZlQXN9LGVuYWJsZWQ6ITB9LHt0eXBlOkFyLkxhYmVsLGxhYmVsOlwiU2F2ZSBXb3Jrc3BhY2UgQXNcIixkYXRhOnt0eXBlOmsuU2F2ZVdvcmtzcGFjZUFzfX0se3R5cGU6QXIuTGFiZWwsbGFiZWw6XCJSZWZyZXNoXCIsZGF0YTp7dHlwZTprLlJlZnJlc2h9fSxXcix7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcInNhdmVNb2RhbC5yZW5hbWVQYWdlXCIpLGRhdGE6e3R5cGU6ay5SZW5hbWV9LGVuYWJsZWQ6ISFhfSx7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIiksZGF0YTp7dHlwZTprLkR1cGxpY2F0ZX0sZW5hYmxlZDohcy5pc0xvY2tlZH0sV3Ise3R5cGU6QXIuTGFiZWwsbGFiZWw6UWEoXCJzYXZlTW9kYWwuY2xvc2VQYWdlXCIpLGRhdGE6e3R5cGU6ay5DbG9zZX0sZW5hYmxlZDpjfV07cmV0dXJuIG8/aT9kOmw6dX0pKGUucGFnZUlkLGUuaWRlbnRpdHkpLG49ey4uLmUsdGVtcGxhdGU6YSxjYWxsYmFjazoodCxhKT0+e1hyKHQsYSxlLnJlY3QpfX07YXdhaXQgdGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51KG4sdCl9YXN5bmMgZnVuY3Rpb24gaWkoZSx0KXtjb25zdCBhPXsuLi5lLHRlbXBsYXRlOmF3YWl0KGFzeW5jKCk9Pntjb25zdCBlPUFhKCksdD1hd2FpdCBlLmdldEN1cnJlbnRXb3Jrc3BhY2UoKSxhPShhd2FpdCBlLlN0b3JhZ2UuZ2V0V29ya3NwYWNlcygpKS5maW5kKChlPT5lLndvcmtzcGFjZUlkPT09dC53b3Jrc3BhY2VJZCkpO3JldHVyblt7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VcIiksZW5hYmxlZDohIWEsZGF0YTp7dHlwZTp2LlNhdmVXb3Jrc3BhY2V9fSx7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcInNhdmVNZW51LnNhdmVXb3Jrc3BhY2VBc1wiKSxkYXRhOnt0eXBlOnYuU2F2ZVdvcmtzcGFjZUFzfX0se3R5cGU6QXIuU2VwYXJhdG9yLGRhdGE6dm9pZCAwfSx7dHlwZTpBci5MYWJlbCxsYWJlbDpRYShcImNvbnRleHRNZW51LnNhdmVQYWdlXCIpLGRhdGE6e3R5cGU6di5TYXZlUGFnZX19LHt0eXBlOkFyLkxhYmVsLGxhYmVsOlFhKFwic2F2ZU1lbnUuc2F2ZVBhZ2VBc1wiKSxkYXRhOnt0eXBlOnYuU2F2ZVBhZ2VBc319XX0pKCksY2FsbGJhY2s6ZWl9O2F3YWl0IHRoaXMub3BlblNhdmVCdXR0b25Db250ZXh0TWVudShhLHQpfWNvbnN0IHNpPVwiZG9jay1jb21wYW5pb24tdXBkYXRlc1wiLGNpPWFzeW5jKCk9Pihhd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRDaGlsZFdpbmRvd3MoKSkuZmluZCgoZT0+ZS5pZGVudGl0eS5uYW1lPT09ZGUuRG9ja0NvbXBhbmlvbikpLGxpPW90KGAke1widW5kZWZpbmVkXCIhPXR5cGVvZiBmaW4mJmZpbj8ubWUuaWRlbnRpdHkudXVpZH0tZW50ZXJwcmlzZS1kb2NrYCksZGk9YXN5bmMoKT0+e2NvbnN0IGU9QWEoKTtsZXQgdD1hd2FpdCBhc3luYyBmdW5jdGlvbigpe2NvbnN0IGU9QXJyYXkuZnJvbShaby52YWx1ZXMoKSk7Zm9yKGxldCB0PWUubGVuZ3RoLTE7dD49MDt0LS0pe2NvbnN0IGE9ZmluLldpbmRvdy53cmFwU3luYyhlW3RdKTtpZihhd2FpdCBhLmlzU2hvd2luZygpKXJldHVybiBlW3RdfX0oKTtpZih0KXtjb25zdCBhPWUuQnJvd3Nlci53cmFwU3luYyh0KSxuPShhd2FpdCBhLmdldFBhZ2VzKCkpLmF0KC0xKSxvPU5hKG4ubGF5b3V0LmNvbnRlbnQpO2lmKDE9PT1vLmxlbmd0aCYmVGUob1swXS51cmwpKWF3YWl0IGEuc2V0QWN0aXZlUGFnZShuLnBhZ2VJZCk7ZWxzZXtjb25zdCBlPWF3YWl0IFpuKHQpLHtuZXdQYWdlVXJsOm59PWF3YWl0IHFuKCk7YXdhaXQgYS5fYWRkRGVmYXVsdFBhZ2Uoe2lkZW50aXR5OmEuaWRlbnRpdHkscGFnZTplLG5ld1BhZ2VVcmw6bnx8dm9pZCAwfSl9fWVsc2V7Y29uc3QgYT1maW4uV2luZG93LndyYXBTeW5jKHt1dWlkOmZpbi5tZS51dWlkLG5hbWU6ZGUuRG9ja0NvbXBhbmlvbn0pLG49YXdhaXQgUGUoYXdhaXQgYS5nZXRCb3VuZHMoKSksbz1hd2FpdCBhc3luYyBmdW5jdGlvbihlLHQsYSl7Y29uc3Qgbj1hd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCksbz1hPy5hdmFpbGFibGVSZWN0Pz9uLnByaW1hcnlNb25pdG9yLmF2YWlsYWJsZVJlY3Qscj17d2lkdGg6by5yaWdodC1vLmxlZnQsaGVpZ2h0Om8uYm90dG9tLW8udG9wfSxpPU1hdGgubWluKGUsci5oZWlnaHQpLHM9TWF0aC5taW4odCxyLndpZHRoKSxjPW8udG9wK01hdGguZmxvb3IoKHIuaGVpZ2h0LWkpLzIpO3JldHVybntoZWlnaHQ6aSx3aWR0aDpzLGxlZnQ6by5sZWZ0K01hdGguZmxvb3IoKHIud2lkdGgtcykvMiksdG9wOmN9fSg2MDAsOTAwLG4pLHI9YXdhaXQgWm4oKTt0PShhd2FpdCBlLkJyb3dzZXIuY3JlYXRlV2luZG93KHtkZWZhdWx0SGVpZ2h0OjYwMCxkZWZhdWx0V2lkdGg6OTAwLGRlZmF1bHRMZWZ0Om8ubGVmdCxkZWZhdWx0VG9wOm8udG9wLHdvcmtzcGFjZVBsYXRmb3JtOntwYWdlczpbcl19fSkpLmlkZW50aXR5fShhd2FpdCBxdCh0KSkuZGlzcGF0Y2goZWEuRm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbCl9LHVpPVwiZG9jay1wcm92aWRlci1jb25maWdzXCIscGk9RCYmQSYmbmV3IHNyLkRleGllKGNyKFwiZG9jay1wcm92aWRlci1jb25maWdzXCIpKTthc3luYyBmdW5jdGlvbiB3aShlKXtpZighcGkpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCBEb2NrIHByb3ZpZGVyIGNvbmZpZyAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTt0cnl7cmV0dXJuIGF3YWl0IHBpW3VpXS5nZXQoZSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIHJldHJpZXZlIERvY2sgcHJvdmlkZXIgY29uZmlnIGZyb20gSW5kZXhlZERCXCIsZSl9fWFzeW5jIGZ1bmN0aW9uIGhpKGUpe2lmKCFwaSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gc2F2ZSBEb2NrIHByb3ZpZGVyIGNvbmZpZyAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTthd2FpdCBwaVt1aV0ucHV0KGUsZS5pZCl9cGkmJnBpLnZlcnNpb24oLjEpLnN0b3Jlcyh7W3VpXTpcIlwifSk7Y29uc3QgZ2k9XCJ3b3Jrc3BhY2VzXCIsbWk9RCYmQSYmZHIoXCJvcGVuZmluLXdvcmtzcGFjZS1wbGF0Zm9ybS13b3Jrc3BhY2VzXCIsZ2kpO2FzeW5jIGZ1bmN0aW9uIGtpKGUpe2lmKCFtaSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IHdvcmtzcGFjZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PWF3YWl0IG1pW2dpXS5nZXQoZSk7cmV0dXJuIHQmJih0LndvcmtzcGFjZUlkPWUudG9TdHJpbmcoKSx0LnRpdGxlPXQudGl0bGV8fHQud29ya3NwYWNlSWQpLHR9YXN5bmMgZnVuY3Rpb24gYmkoZSl7aWYoIW1pKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgd29ya3NwYWNlcyAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PWF3YWl0IG1pW2dpXS50b0NvbGxlY3Rpb24oKS5rZXlzKCksYT0oYXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKGU9PmtpKGUudG9TdHJpbmcoKSkpKSkpLmZpbHRlcigoZT0+ISFlKSk7cmV0dXJuIGU/YS5maWx0ZXIoKHQ9PnVyKHQudGl0bGUsZSkpKTphfWFzeW5jIGZ1bmN0aW9uIHlpKHt3b3Jrc3BhY2U6ZX0pe2lmKCFtaSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIHdvcmtzcGFjZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PShhd2FpdCBiaSgpKS5maW5kKCh0PT50LnRpdGxlPT09ZS50aXRsZSkpO2lmKHQmJnQud29ya3NwYWNlSWQhPT1lLndvcmtzcGFjZUlkKXRocm93IG5ldyBFcnJvcihgV29ya3NwYWNlIHdpdGggdGl0bGUgJyR7ZS50aXRsZX0nIGFscmVhZHkgZXhpc3RzLmApO2F3YWl0IG1pW2dpXS5wdXQoZSxlLndvcmtzcGFjZUlkKX1hc3luYyBmdW5jdGlvbiBmaShlKXtpZighbWkpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGRlbGV0ZSB3b3Jrc3BhY2UgLSBJbmRleERCIG5vdCBzdXBwb3J0ZWRcIik7YXdhaXQgbWlbZ2ldLmRlbGV0ZShlKX1hc3luYyBmdW5jdGlvbiBTaSh7d29ya3NwYWNlSWQ6ZSx3b3Jrc3BhY2U6dH0pe2lmKCFtaSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gdXBkYXRlIHdvcmtzcGFjZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtpZighYXdhaXQga2koZSkpdGhyb3cgbmV3IEVycm9yKFwid29ya3NwYWNlIG5vdCBmb3VuZFwiKTthd2FpdCB5aSh7d29ya3NwYWNlOnR9KSxlIT09dC53b3Jrc3BhY2VJZCYmYXdhaXQgZmkoZSl9Y29uc3Qgdmk9ZT0+e2NvbnN0IHQ9ZS5sYXlvdXQsYT10LmNvbnRlbnQ/TmEodC5jb250ZW50KTpbXSxuPWEubGVuZ3RoO3JldHVybiBuPjE/ey4uLmUsc2luZ2xlVmlld05hbWU6bnVsbH06MT09PW4/ey4uLmUsc2luZ2xlVmlld05hbWU6YVswXS5uYW1lfTp2b2lkIDB9LFBpPWFzeW5jKGUsdCxhKT0+e2NvbnN0IG49YXdhaXQgQWEoKS5Ccm93c2VyLmdldEFsbEF0dGFjaGVkUGFnZXMoKSxvPW5ldyBTZXQobi5tYXAoKGU9PmUudGl0bGUpKS5maWx0ZXIoKGU9PiEhZSkpKSxyPW5ldyBTZXQobi5tYXAoKGU9PmUucGFnZUlkKSkuZmlsdGVyKChlPT4hIWUpKSksaT10Py5kZWZhdWx0UGFnZU9wdGlvbnMscz1cImVudGVycHJpc2VcIj09PWE/LndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlfHxcImVudGVycHJpc2VcIj09PXQ/LmRlZmF1bHRXaW5kb3dPcHRpb25zPy53b3Jrc3BhY2VQbGF0Zm9ybT8ud2luZG93VHlwZSxjPWF3YWl0IGVlKCksbD1hd2FpdChhc3luYyhlLHQsYSk9PntpZihhKXJldHVybiBuZSgpO2NvbnN0IG49dD8ud29ya3NwYWNlUGxhdGZvcm0/Lm5ld1RhYlVybDtpZihuKXJldHVybiBuO2NvbnN0IG89ZT8uZGVmYXVsdFdpbmRvd09wdGlvbnM/LndvcmtzcGFjZVBsYXRmb3JtPy5uZXdUYWJVcmw7cmV0dXJuIG98fHZvaWQgMH0pKHQsYSxzKTtyZXR1cm4gUHJvbWlzZS5hbGwoZS5tYXAoKGFzeW5jIGU9PntpZihcInJlcGFyZW50XCI9PT1lLm11bHRpSW5zdGFuY2VWaWV3QmVoYXZpb3IpcmV0dXJuey4uLmUsbGF5b3V0Q29udGFpbmVyS2V5OlJ0KCl9OygoZSx0KT0+e2UucGFnZUlkfHw9UnQoKSx0LmhhcyhlLnBhZ2VJZCkmJihjb25zb2xlLndhcm4oXCJQYWdlSUQgY29sbGlzaW9uIGRldGVjdGVkLiBBbGwgUGFnZSBJRHMgc2hvdWxkIGJlIHVuaXF1ZS4gQSByYW5kb20gbmV3IHBhZ2VJZCB3aWxsIGJlIGdlbmVyYXRlZFwiKSxlLnBhZ2VJZD1SdCgpKSx0LmFkZChlLnBhZ2VJZCl9KShlLHIpLHM/ZS5pY29uVXJsPWAke2N9L2VudGVycHJpc2UvaWNvbnMvZW50ZXJwcmlzZS1wYWdlLnN2Z2A6ZS50aXRsZT1jbihlLnRpdGxlLEFycmF5LmZyb20oby5rZXlzKCkpKSxvLmFkZChlLnRpdGxlKSxlLnBhbmVscz8ucmVkdWNlKCgoZSx0KT0+e2NvbnN0IGE9T2JqZWN0LnZhbHVlcyh3KTtpZighYS5pbmNsdWRlcyh0LnBvc2l0aW9uKSl0aHJvdyBuZXcgRXJyb3IoYEVuY291bnRlcmVkIGEgcGFuZWwgd2l0aCB1bnN1cHBvcnRlZCBwb3NpdGlvbiBcIiR7dC5wb3NpdGlvbn1cIi4gU3VwcG9ydGVkIHBvc2l0aW9ucyBhcmU6ICR7YS50b1N0cmluZygpfWApO2lmKDE9PWVbdC5wb3NpdGlvbl0pdGhyb3cgbmV3IEVycm9yKGBGb3VuZCBtb3JlIHRoYW4gMSBwYW5lbCBhdCBwb3NpdGlvbjogJHt0LnBvc2l0aW9ufS4gT25seSAxIHBhbmVsIGF0IGEgZ2l2ZW4gcG9zaXRpb24gaXMgY3VycmVudGx5IHN1cHBvcnRlZC5gKTtyZXR1cm57Li4uZSxbdC5wb3NpdGlvbl06ZVt0LnBvc2l0aW9uXSsxfX0pLHtbdy5MZWZ0XTowLFt3LlJpZ2h0XTowLFt3LlRvcF06MCxbdy5Cb3R0b21dOjB9KTtjb25zdCBhPVwicGFuZWxzXCJpbiBlP2UucGFuZWxzOmk/LnBhbmVscztsZXQgbj0oZD1lLmxheW91dCx1PXQ/LmRlZmF1bHRWaWV3T3B0aW9ucyxSYSh7Li4uZH0sKGU9PkJhKGUsdSkpKSk7dmFyIGQsdTtsJiYhbj8uc2V0dGluZ3M/Lm5ld1RhYkJ1dHRvbiYmKG49ey4uLm4sc2V0dGluZ3M6ey4uLm4/LnNldHRpbmdzLG5ld1RhYkJ1dHRvbjp7dXJsOmx9fX0pO3JldHVybnsuLi5pLC4uLmUscGFuZWxzOmEmJmF3YWl0IHRuKGEpLGxheW91dENvbnRhaW5lcktleTpSdCgpLGxheW91dDpuLGlzTGF5b3V0Q3JlYXRlZDohMX19KSkpfTthc3luYyBmdW5jdGlvbiBDaShlKXtyZXR1cm4gZT9cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQVAvLy93QUFBQ0g1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlDUkFFQU93PT1cIjooYXdhaXQgUSgpKS5kaXNwbGF5Vmlld1RhYkRlZmF1bHRJY29uP1wiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBQUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT1cIjpcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmclMjBzdHlsZSUzRCUyMmJhY2tncm91bmQtY29sb3IlM0ElMjM3RDgwOEElMjIlMjB3aWR0aCUzRCUyMjEwJTIyJTIwaGVpZ2h0JTNEJTIyMTAlMjIlMjB2aWV3Qm94JTNEJTIyMCUyMDAlMjAxMCUyMDEwJTIyJTIwZmlsbCUzRCUyMm5vbmUlMjIlMjB4bWxucyUzRCUyMmh0dHAlM0ElMkYlMkZ3d3cudzMub3JnJTJGMjAwMCUyRnN2ZyUyMiUzRSUzQ3BhdGglMjBmaWxsLXJ1bGUlM0QlMjJldmVub2RkJTIyJTIwY2xpcC1ydWxlJTNEJTIyZXZlbm9kZCUyMiUyMGQlM0QlMjJNNC42NDY0OCUyMDAuODc0OTYyQzQuODQxNzQlMjAwLjY3OTclMjA1LjE1ODMzJTIwMC42Nzk3JTIwNS4zNTM1OSUyMDAuODc0OTYyTDkuMTI0ODIlMjA0LjY0NjJDOS4zMjAwOSUyMDQuODQxNDYlMjA5LjMyMDA5JTIwNS4xNTgwNCUyMDkuMTI0ODIlMjA1LjM1MzNMNS4zNTM1OSUyMDkuMTI0NTRDNS4xNTgzMyUyMDkuMzE5OCUyMDQuODQxNzQlMjA5LjMxOTglMjA0LjY0NjQ4JTIwOS4xMjQ1NEwwLjg3NTI0NSUyMDUuMzUzM0MwLjY3OTk4MiUyMDUuMTU4MDQlMjAwLjY3OTk4MiUyMDQuODQxNDYlMjAwLjg3NTI0NSUyMDQuNjQ2Mkw0LjY0NjQ4JTIwMC44NzQ5NjJaTTUuMDAwMDMlMjAxLjkzNTYyTDEuOTM1OSUyMDQuOTk5NzVMNS4wMDAwMyUyMDguMDYzODhMOC4wNjQxNiUyMDQuOTk5NzVMNS4wMDAwMyUyMDEuOTM1NjJaJTIyJTIwZmlsbCUzRCUyMndoaXRlJTIyJTJGJTNFJTNDJTJGc3ZnJTNFXCJ9Y29uc3QgTWk9e2RpbWVuc2lvbnM6e2JvcmRlcldpZHRoOjMsaGVhZGVySGVpZ2h0OjMwfX0seGk9KHdlLnV1aWQsZGUuQnJvd3NlckFkZHJlc3NTZWFyY2hQcmVmaXgpO2FzeW5jIGZ1bmN0aW9uIElpKGUsdCxhKXtsZXQgbj1lO2NvbnN0IG89XCJlbnRlcnByaXNlXCI9PT1uLndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlfHxcImVudGVycHJpc2VcIj09PXQ/LmRlZmF1bHRXaW5kb3dPcHRpb25zPy53b3Jrc3BhY2VQbGF0Zm9ybT8ud2luZG93VHlwZTtpZihuLmxheW91dCYmIW4ud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzPy5sZW5ndGgpe2NvbnN0IGU9YXdhaXQgTW4oKSxhPXsuLi5hd2FpdCBPdChlLG4ubGF5b3V0KSxpc0FjdGl2ZTohMH07bi53b3Jrc3BhY2VQbGF0Zm9ybXx8PXt9LG4ud29ya3NwYWNlUGxhdGZvcm0ucGFnZXM9YXdhaXQgUGkoW2FdLHQsbil9dD8uYnJvd3Nlckljb25TaXplJiYobi53b3Jrc3BhY2VQbGF0Zm9ybXx8PXt9LG4ud29ya3NwYWNlUGxhdGZvcm0uYnJvd3Nlckljb25TaXplPXQuYnJvd3Nlckljb25TaXplKTtjb25zdCByPWE/LnRoZW1lcz8uWzBdO2lmKG4ud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzPy5sZW5ndGgpe2NvbnN0IGU9YXdhaXQgUGkobi53b3Jrc3BhY2VQbGF0Zm9ybS5wYWdlcyx0LG4pLGk9ZSxzPShlPT57aWYoIWUpcmV0dXJuO2xldCB0PWUuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpO3JldHVybiF0JiZlLmxlbmd0aD4wJiYoZVswXS5pc0FjdGl2ZT0hMCx0PWVbMF0pLHR9KShpKTtpZihpLmZvckVhY2goKGU9PntlLnBhZ2VJZCE9PXM/LnBhZ2VJZCYmKGUuaXNBY3RpdmU9ITEpfSkpLGF3YWl0IGFuKGkpLG4ud29ya3NwYWNlUGxhdGZvcm0ucGFnZXM9ZSxuPUF0KHt9LGF3YWl0KGFzeW5jIGU9Pih7Y29udGV4dE1lbnVPcHRpb25zOntlbmFibGVkOiExfSxleHBlcmltZW50YWw6e3Nob3dGYXZpY29uczohMCxkZWZhdWx0RmF2aWNvblVybDphd2FpdCBDaShlKX0sdmlld1Zpc2liaWxpdHk6e3Nob3dWaWV3c09uU3BsaXR0ZXJEcmFnOntlbmFibGVkOiEwfSxzaG93Vmlld3NPbldpbmRvd1Jlc2l6ZTp7ZW5hYmxlZDohMH19fSkpKG8pLHQ/LmRlZmF1bHRXaW5kb3dPcHRpb25zLG4sYXdhaXQoYXN5bmMgZT0+KHtiYWNrZ3JvdW5kVGhyb3R0bGluZzohMCx1cmw6YXdhaXQgb2UoZSwhMCksY29udGV4dE1lbnU6ITAsY2xvc2VPbkxhc3RWaWV3UmVtb3ZlZDohMSxwZXJtaXNzaW9uczp7U3lzdGVtOntvcGVuVXJsV2l0aEJyb3dzZXI6e2VuYWJsZWQ6ITAscHJvdG9jb2xzOltcIm1haWx0b1wiXX19fX0pKShvKSkscy5sYXlvdXQ9QXQocy5sYXlvdXQsTWkpLGFzeW5jIGZ1bmN0aW9uKGUpe2lmKGUuaWNvbnx8ZS50YXNrYmFySWNvbil7Y29uc3QgdD1maW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKSxhPWF3YWl0KGF3YWl0IHQuZ2V0V2luZG93KCkpLmdldE9wdGlvbnMoKTtlLnRhc2tiYXJJY29uR3JvdXB8fD1hLnRhc2tiYXJJY29uR3JvdXB8fGZpbi5tZS5pZGVudGl0eS51dWlkfWlmKGUud29ya3NwYWNlUGxhdGZvcm0uaWNvbilpZihcIm9iamVjdFwiPT10eXBlb2YgZS53b3Jrc3BhY2VQbGF0Zm9ybS5pY29uKXtjb25zdCB0PXdpbmRvdy5tYXRjaE1lZGlhKFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKTtlLmljb249dC5tYXRjaGVzP2Uud29ya3NwYWNlUGxhdGZvcm0uaWNvbi5kYXJrOmUud29ya3NwYWNlUGxhdGZvcm0uaWNvbi5saWdodH1lbHNlIGUuaWNvbj1lLndvcmtzcGFjZVBsYXRmb3JtLmljb259KG4pLCFuLmJhY2tncm91bmRDb2xvciYmcilpZihcInBhbGV0dGVcImluIHIpbi5iYWNrZ3JvdW5kQ29sb3I9cj8ucGFsZXR0ZT8uYmFja2dyb3VuZDJ8fHI/LnBhbGV0dGU/LmJhY2tncm91bmRQcmltYXJ5O2Vsc2V7Y29uc3QgZT1hLnNlbGVjdGVkU2NoZW1lPT09bS5EYXJrfHxhLnNlbGVjdGVkU2NoZW1lPT09bS5TeXN0ZW0mJndpbmRvdy5tYXRjaE1lZGlhKFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKT9yPy5wYWxldHRlcy5kYXJrOnI/LnBhbGV0dGVzLmxpZ2h0O24uYmFja2dyb3VuZENvbG9yPWU/LmJhY2tncm91bmQyfHxlPy5iYWNrZ3JvdW5kUHJpbWFyeX1uPUNlKG4sITApO2NvbnN0IGM9YXdhaXQgb2UobywhMCk7YyYmKG4udXJsPWMpLG4ubGF5b3V0PXMubGF5b3V0LG4ubGF5b3V0U25hcHNob3Q9KChlLHQpPT4oe2xheW91dHM6ZS5yZWR1Y2UoKChlLGEpPT57aWYoIWEuaXNBY3RpdmUpe2lmKCF0KXJldHVybiBlO2lmKCF2aShhKS5zaW5nbGVWaWV3TmFtZSlyZXR1cm4gZX1yZXR1cm4gZVthLmxheW91dENvbnRhaW5lcktleV09YS5sYXlvdXQsZX0pLHt9KSxwYWdlczplfSkpKG4ud29ya3NwYWNlUGxhdGZvcm0ucGFnZXMsbyksbi53b3Jrc3BhY2VQbGF0Zm9ybS53aW5kb3dUeXBlPW4ud29ya3NwYWNlUGxhdGZvcm0ud2luZG93VHlwZT8/UC5Ccm93c2VyfWlmKG4uY29ybmVyUm91bmRpbmcmJmRlbGV0ZSBuLmNvcm5lclJvdW5kaW5nLG4ubmFtZXx8bi5sYXlvdXRTbmFwc2hvdD9uLmNvbnRleHRNZW51T3B0aW9ucz8udGVtcGxhdGU/Lmxlbmd0aD4wP24uY29udGV4dE1lbnVPcHRpb25zLnRlbXBsYXRlPW4uY29udGV4dE1lbnVPcHRpb25zLnRlbXBsYXRlLmZpbHRlcigoZT0+XCJwcmludFwiIT09ZSkpOm4uY29udGV4dE1lbnVPcHRpb25zPXt0ZW1wbGF0ZTpbXSxlbmFibGVkOiExfTpuLm5hbWU9YCR7ZGUuQ2xhc3NpY1dpbmRvd30tJHtSdCgpfWAsbi53b3Jrc3BhY2VQbGF0Zm9ybSYmYSYmKG4ud29ya3NwYWNlUGxhdGZvcm0uX3RoZW1lRGF0YT1hKSxvKXtjb25zdCBlPWF3YWl0IG5lKCk7bi53b3Jrc3BhY2VQbGF0Zm9ybS5uZXdQYWdlVXJsPWUsbi53b3Jrc3BhY2VQbGF0Zm9ybS5uZXdUYWJVcmw9ZSxuLmxheW91dCYmKG4ubGF5b3V0LmRpbWVuc2lvbnMuYm9yZGVyV2lkdGg9NCxuLmxheW91dC5kaW1lbnNpb25zLmhlYWRlckhlaWdodD0yOCksbi5uYW1lPW4ubmFtZXx8YCR7ZGUuQnJvd3NlcldpbmRvd30tJHtSdCgpfWA7Y29uc3QgdD14aStuLm5hbWUsYT1maW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKTtpZighKGF3YWl0IGEuZ2V0Vmlld3MoKSkuc29tZSgoZT0+ZS5pZGVudGl0eS5uYW1lPT09dCkpJiZuLm5hbWUuc3RhcnRzV2l0aChkZS5Ccm93c2VyV2luZG93KSl7Y29uc3QgZT1hd2FpdCBhZSgpK0suQnJvd3NlclBvcHVwTWVudUFkZHJlc3NTZWFyY2hSZXN1bHRzVmlldzsoYXdhaXQgZmluLlZpZXcuY3JlYXRlKHtuYW1lOnQsY29udGV4dE1lbnVPcHRpb25zOntlbmFibGVkOiEwfSx1cmw6ZSx0YXJnZXQ6ZmluLm1lLmlkZW50aXR5LGJvdW5kczp7dG9wOjAsbGVmdDowLHdpZHRoOjAsaGVpZ2h0OjB9fSkpLm5hdmlnYXRlKGUpfX1yZXR1cm4gbn1jb25zdCBBaT1hc3luYyhlLHQpPT57Y29uc3QgYT17dXVpZDp0LnV1aWQsbmFtZTp0Lm5hbWV9O2F3YWl0IGhvKGEsZS50aXRsZT8/YXdhaXQgUXIoKSxlLnNob3VsZENlbnRlck9uTW9uaXRvcikmJmZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLnF1aXQoKX0sV2k9ZT0+e2NvbnN0IHQ9ZS5uYW1lPT09ZGUuSG9tZSxhPWUubmFtZT8uc3RhcnRzV2l0aChkZS5Ib21lSW50ZXJuYWwpLG49ZS5uYW1lPy5zdGFydHNXaXRoKGRlLkJyb3dzZXJNZW51KXx8ZS5uYW1lPy5zdGFydHNXaXRoKGRlLkJyb3dzZXJTYXZlTWVudSk7cmV0dXJuIXQmJiFhJiYhbn07Y29uc3QgRGk9ZT0+SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSk7YXN5bmMgZnVuY3Rpb24gVGkoZSx0LGEpe2NvbnN0IG49ZS5tYW5pZmVzdFVybD9hd2FpdCB0KHttYW5pZmVzdFVybDplLm1hbmlmZXN0VXJsfSxhKTp2b2lkIDA7aWYobj8uaW50ZXJvcCYmZS5pbnRlcm9wKXtjb25zdCB0PXsuLi5lLC4uLm4saW50ZXJvcDplLmludGVyb3B9O3JldHVybiBkZWxldGUgdC5tYW5pZmVzdFVybCx0fXJldHVybiBlfWNvbnN0IFJpPWU9Pntjb25zdCB0PURpKGUpO3JldHVybiB0Ll9pbnRlcm5hbFdvcmtzcGFjZURhdGE/LmJyb3dzZXJOYXZpZ2F0aW9uQnV0dG9ucyYmKHQud29ya3NwYWNlUGxhdGZvcm09ey4uLnQud29ya3NwYWNlUGxhdGZvcm0sYnJvd3Nlck5hdmlnYXRpb25CdXR0b25zOnQuX2ludGVybmFsV29ya3NwYWNlRGF0YS5icm93c2VyTmF2aWdhdGlvbkJ1dHRvbnN9LGRlbGV0ZSB0Ll9pbnRlcm5hbFdvcmtzcGFjZURhdGEuYnJvd3Nlck5hdmlnYXRpb25CdXR0b25zKSx0fSxCaT1lPT57Y29uc3QgdD1EaShlKTtyZXR1cm4gdC53b3Jrc3BhY2VQbGF0Zm9ybSYmKHQuX2ludGVybmFsV29ya3NwYWNlRGF0YT17Li4udC5faW50ZXJuYWxXb3Jrc3BhY2VEYXRhLC4uLnQud29ya3NwYWNlUGxhdGZvcm19LGRlbGV0ZSB0LndvcmtzcGFjZVBsYXRmb3JtKSx0fSxFaT17cmVsb2FkOlt7a2V5czpcIkN0cmwrUlwiLHByZXZlbnREZWZhdWx0OiEwfV0sYmFjazpbe2tleXM6XCJBbHQrTGVmdFwiLHByZXZlbnREZWZhdWx0OiEwfV0sZm9yd2FyZDpbe2tleXM6XCJBbHQrUmlnaHRcIixwcmV2ZW50RGVmYXVsdDohMH1dfSxGaT17cmVsb2FkOlt7a2V5czpcIkNtZCtSXCIscHJldmVudERlZmF1bHQ6ITB9XSxiYWNrOlt7a2V5czpcIkNtZCtbXCIscHJldmVudERlZmF1bHQ6ITB9LHtrZXlzOlwiQ21kK0xlZnRcIixwcmV2ZW50RGVmYXVsdDohMH1dLGZvcndhcmQ6W3trZXlzOlwiQ21kK11cIixwcmV2ZW50RGVmYXVsdDohMH0se2tleXM6XCJDbWQrUmlnaHRcIixwcmV2ZW50RGVmYXVsdDohMH1dfSxWaT1hc3luYygpPT5hd2FpdCB4cigpP0VpOkZpLE5pPShlLHQpPT57Y29uc3QgYT1maW4uVmlldy53cmFwU3luYyhlKTtpZighdClyZXR1cm47Y29uc3Qgbj1lPT57KGFzeW5jKGUsdCxhKT0+e2lmKFwia2V5RG93blwiIT09YS5pbnB1dFR5cGUpcmV0dXJuO2NvbnN0IG49YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZS5nZXRDdXJyZW50V2luZG93KCksYT1hd2FpdCB0LmdldE9wdGlvbnMoKSxuPWEud29ya3NwYWNlUGxhdGZvcm0/Lm5hdmlnYXRpb25CdXR0b25zO3JldHVybiBuLmVuYWJsZWQmJiFuLmhvdGtleXNEaXNhYmxlZH0pKGUpLG89YXdhaXQgeHIoKTtpZihuKXtpZih0LnJlbG9hZCl7Y29uc3Qgbj1hLmN0cmxLZXkmJiFhLmFsdEtleSYmIWEubWV0YUtleSYmIWEuc2hpZnRLZXkmJlwiclwiPT09YS5rZXkscj0hYS5jdHJsS2V5JiYhYS5hbHRLZXkmJmEubWV0YUtleSYmIWEuc2hpZnRLZXkmJlwiclwiPT09YS5rZXk7KG8/bjpyKSYmdD8ucmVsb2FkJiYoZS5yZWxvYWQoKSxLZSh7dHlwZTpcIlZpZXdcIixhY3Rpb246XCJSZWxvYWRcIix2YWx1ZTplLmlkZW50aXR5Lm5hbWV9KSl9aWYodC5iYWNrKXtjb25zdCBuPSFhLmN0cmxLZXkmJmEuYWx0S2V5JiYhYS5tZXRhS2V5JiYhYS5zaGlmdEtleSYmXCJBcnJvd0xlZnRcIj09PWEua2V5LHI9IWEuY3RybEtleSYmIWEuYWx0S2V5JiZhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiZcIkFycm93TGVmdFwiPT09YS5rZXksaT0hYS5jdHJsS2V5JiYhYS5hbHRLZXkmJmEubWV0YUtleSYmIWEuc2hpZnRLZXkmJlwiW1wiPT09YS5rZXk7KG8/bjpyfHxpKSYmdD8uYmFjayYmKGUubmF2aWdhdGVCYWNrKCksS2Uoe3R5cGU6XCJWaWV3XCIsYWN0aW9uOlwiQmFja1wiLHZhbHVlOmUuaWRlbnRpdHkubmFtZX0pKX1pZih0LmZvcndhcmQpe2NvbnN0IG49IWEuY3RybEtleSYmYS5hbHRLZXkmJiFhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiZcIkFycm93UmlnaHRcIj09PWEua2V5LHI9IWEuY3RybEtleSYmIWEuYWx0S2V5JiZhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiZcIkFycm93UmlnaHRcIj09PWEua2V5LGk9IWEuY3RybEtleSYmIWEuYWx0S2V5JiZhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiZcIl1cIj09PWEua2V5OyhvP246cnx8aSkmJnQ/LmZvcndhcmQmJihlLm5hdmlnYXRlRm9yd2FyZCgpLEtlKHt0eXBlOlwiVmlld1wiLGFjdGlvbjpcIkZvcndhcmRcIix2YWx1ZTplLmlkZW50aXR5Lm5hbWV9KSl9fX0pKGEsdCxlKX07YS5hZGRMaXN0ZW5lcihcImhvdGtleVwiLG4pLGEub25jZShcImRlc3Ryb3llZFwiLCgoKT0+e2EucmVtb3ZlTGlzdGVuZXIoXCJob3RrZXlcIixuKX0pKX0sTGk9KGUsdCk9PkRpKGUpLm1hcCgoZT0+KFwiY29tcG9uZW50U3RhdGVcImluIGU/ZS5jb21wb25lbnRTdGF0ZT10KGUuY29tcG9uZW50U3RhdGUpOlwiY29udGVudFwiaW4gZSYmKGUuY29udGVudD1MaShlLmNvbnRlbnQsdCkpLGUpKSksX2k9ZT0+e2lmKGUpe2NvbnN0IHQ9RGkoZSk7cmV0dXJuIHQuY29udGVudCYmKHQuY29udGVudD1MaSh0LmNvbnRlbnQsUmkpKSx0fXJldHVybiBlfSxPaT1lPT57aWYoZSl7Y29uc3QgdD1EaShlKTtyZXR1cm4gdC5jb250ZW50JiYodC5jb250ZW50PUxpKHQuY29udGVudCxCaSkpLHR9cmV0dXJuIGV9O2FzeW5jIGZ1bmN0aW9uIFVpKHthcHA6ZSx0YXJnZXQ6dH0pe2NvbnN0IGE9ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCk7c3dpdGNoKGUubWFuaWZlc3RUeXBlKXtjYXNlIGMuU25hcHNob3Q6cmV0dXJuIGEuYXBwbHlTbmFwc2hvdChlLm1hbmlmZXN0KTtjYXNlIGMuVmlldzpyZXR1cm4gYXN5bmMgZnVuY3Rpb24oZSx0KXtjb25zdCBhPWZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpO2lmKFwidmlld1wiPT09dC5lbnRpdHlUeXBlKXtjb25zdCBhPWZpbi5WaWV3LndyYXBTeW5jKHQpLG49YXdhaXQgYS5nZXRQYXJlbnRMYXlvdXQoKTtyZXR1cm4gYXdhaXQgbi5yZXBsYWNlVmlldyh0LHttYW5pZmVzdFVybDplLm1hbmlmZXN0LHVybDp2b2lkIDAsdGFyZ2V0OnZvaWQgMH0pLGEuZGVzdHJveSgpfXJldHVybiBhLmNyZWF0ZVZpZXcoe25hbWU6dm9pZCAwLHVybDp2b2lkIDAsbWFuaWZlc3RVcmw6ZS5tYW5pZmVzdCx0YXJnZXQ6dm9pZCAwfSl9KGUsdCk7Y2FzZSBjLkV4dGVybmFsOnJldHVybiBmaW4uU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2Vzcyh7cGF0aDplLm1hbmlmZXN0LHV1aWQ6ZS5hcHBJZH0pO2RlZmF1bHQ6cmV0dXJuIGZpbi5BcHBsaWNhdGlvbi5zdGFydEZyb21NYW5pZmVzdChlLm1hbmlmZXN0KX19bGV0IEdpO2NvbnN0IEhpPSgpPT57aWYoIUdpKXtjb25zdCBlPW90KGAke1widW5kZWZpbmVkXCIhPXR5cGVvZiBmaW4mJmZpbi5tZS5pZGVudGl0eS51dWlkfS1lbnRlcnByaXNlLWFwcC1kaXJlY3RvcnlgKTtHaT1lKCl9cmV0dXJuIEdpfTthc3luYyBmdW5jdGlvbiAkaShlKXtpZighYXdhaXQgQWUoZS5pZGVudGl0eSkpcmV0dXJuW107cmV0dXJuKGF3YWl0IEhpKCkpLmRpc3BhdGNoKFF0LkdldEFwcHMsZS5yZXEpfWFzeW5jIGZ1bmN0aW9uIEtpKGUpe2lmKCFhd2FpdCBBZShlLmlkZW50aXR5KSlyZXR1cm5bXTtyZXR1cm4oYXdhaXQgSGkoKSkuZGlzcGF0Y2goUXQuR2V0U2VhcmNoUHJvdmlkZXJzLGUpfWFzeW5jIGZ1bmN0aW9uIHppKGUpe3JldHVybihhd2FpdCBIaSgpKS5kaXNwYXRjaChRdC5HZXRDdXJhdGVkQ29udGVudCxlKX1hc3luYyBmdW5jdGlvbiBKaShlKXtyZXR1cm4oYXdhaXQgSGkoKSkuZGlzcGF0Y2goUXQuR2V0UmVjZW50bHlWaXNpdGVkLGUpfWFzeW5jIGZ1bmN0aW9uIHFpKGUpe2NvbnN0IHQ9KGF3YWl0IGJlKCkpLm1hcCgoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZS5nZXRPcHRpb25zKCk7dC53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXMmJnQubGF5b3V0JiZhd2FpdChhc3luYyBlPT4oYXdhaXQgcXQoZSkpLmRpc3BhdGNoKGVhLlVwZGF0ZVBhZ2VzV2luZG93T3B0aW9ucykpKGUuaWRlbnRpdHkpfSkpO3JldHVybiBhd2FpdCBQcm9taXNlLmFsbCh0KSxlP2UoKTpMdCgpfWxldCBaaT1bXTtjb25zdCBqaT0oKT0+Wmk7YXN5bmMgZnVuY3Rpb24gUWkoZSl7Y29uc3QgdD1lPT57aWYoIWUuaW5jbHVkZXMoXCIjXCIpJiYhZS5pbmNsdWRlcyhcInJnYlwiKSYmIWUuaW5jbHVkZXMoXCJoc2xcIikpdGhyb3cgbmV3IEVycm9yKFwiQmFja2dyb3VuZCBwcmltYXJ5IGNvbG9yIGlzIG5vdCB0aGUgcmlnaHQgZm9ybWF0LlwiKX07ZS5mb3JFYWNoKChlPT57XCJwYWxldHRlXCJpbiBlJiZ0KGUucGFsZXR0ZS5iYWNrZ3JvdW5kUHJpbWFyeSksXCJwYWxldHRlc1wiaW4gZSYmKHQoZS5wYWxldHRlcy5kYXJrLmJhY2tncm91bmRQcmltYXJ5KSx0KGUucGFsZXR0ZXMubGlnaHQuYmFja2dyb3VuZFByaW1hcnkpKX0pKSwoZT0+e2NvbnN0IHQ9ZVswXTtpZihcInBhbGV0dGVcImluIHQpe2NvbnN0e3BhbGV0dGU6ZX09dDt3YS5zZXRQYWxldHRlcyh7ZGFyazplLGxpZ2h0OmV9KX1pZihcInBhbGV0dGVzXCJpbiB0KXtjb25zdHtkYXJrOmUsbGlnaHQ6YX09dC5wYWxldHRlczt3YS5zZXRQYWxldHRlcyh7ZGFyazplLGxpZ2h0OmF9KX19KShlKSxaaT1lfWNvbnN0IFlpPShlLHQpPT5hPT57Y29uc3Qgbj1udWxsIT09ZTtyZXR1cm4gY2xhc3MgZXh0ZW5kcyBhe2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmlzV29ya3NwYWNlUGxhdGZvcm09KCk9Pih7aXNXb3Jrc3BhY2VQbGF0Zm9ybTohMCxpc0Jyb3dzZXJJbml0aWFsaXplZDohIWUsYW5hbHl0aWNzOntpc1N1cHBvcnRlZDohMH19KSx0aGlzLmRldGFjaFBhZ2VzRnJvbVdpbmRvdz15bix0aGlzLmdldEFsbEF0dGFjaGVkUGFnZXM9bG4sdGhpcy5nZXRQYWdlc0ZvcldpbmRvdz1Tbix0aGlzLmdldFBhZ2VGb3JXaW5kb3c9dm4sdGhpcy5tYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsPVJuLHRoaXMubGF1bmNoQXBwPVVpLHRoaXMuc2F2ZVBhZ2U9bW4sdGhpcy5zYXZlV29ya3NwYWNlPUNvLHRoaXMuY3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWw9d24sdGhpcy51cGRhdGVTYXZlZFBhZ2VJbnRlcm5hbD1nbix0aGlzLmRlbGV0ZVNhdmVkUGFnZUludGVybmFsPWhuLHRoaXMucmVvcmRlclBhZ2VzRm9yV2luZG93PVBuLHRoaXMuZ2V0VW5pcXVlUGFnZVRpdGxlPU1uLHRoaXMudXBkYXRlUGFnZUZvcldpbmRvdz1ibix0aGlzLmdldExhc3RGb2N1c2VkQnJvd3NlcldpbmRvdz1qbyx0aGlzLmdldFRoZW1lcz1qaSx0aGlzLmludm9rZUN1c3RvbUFjdGlvbkludGVybmFsPXRyLHRoaXMucmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsPUFpLHRoaXMuZ2V0Q3VycmVudFdvcmtzcGFjZT12byx0aGlzLnNldEFjdGl2ZVdvcmtzcGFjZT1mbyx0aGlzLmdldExhbmd1YWdlUmVzb3VyY2VzSW50ZXJuYWw9VW8sdGhpcy5nZXRQYWdlQnlWaWV3SWRlbnRpdHk9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZmluLlBsYXRmb3JtLkxheW91dC5nZXRMYXlvdXRCeVZpZXdJZGVudGl0eShlKSxhPXQuaWRlbnRpdHk7aWYoIShcImxheW91dE5hbWVcImluIGEpKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgbGF5b3V0J3MgaWRlbnRpdHlcIik7Y29uc3Qgbj1hd2FpdCBBYSgpLkJyb3dzZXIud3JhcFN5bmModC5pZGVudGl0eSkuZ2V0UGFnZXMoKSxvPW4uZmluZEluZGV4KChlPT5lLmxheW91dE5hbWU9PT1hLmxheW91dE5hbWUpKTtpZigtMT09PW8pdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCBwYWdlJ3MgaW5kZXhcIik7cmV0dXJue3dpbmRvd0lkZW50aXR5OntuYW1lOnQuaWRlbnRpdHkubmFtZSx1dWlkOnQuaWRlbnRpdHkudXVpZH0scGFnZTpuW29dLHBhZ2VJbmRleDpvfX0sdGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbD10aGlzLm9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnU9dGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnUuYmluZCh0aGlzKSx0aGlzLmdldFNhdmVkUGFnZXM9dGhpcy5nZXRTYXZlZFBhZ2VzLmJpbmQodGhpcyksdGhpcy5nZXRTYXZlZFBhZ2U9dGhpcy5nZXRTYXZlZFBhZ2UuYmluZCh0aGlzKSx0aGlzLmNyZWF0ZVNhdmVkUGFnZT10aGlzLmNyZWF0ZVNhdmVkUGFnZS5iaW5kKHRoaXMpLHRoaXMudXBkYXRlU2F2ZWRQYWdlPXRoaXMudXBkYXRlU2F2ZWRQYWdlLmJpbmQodGhpcyksdGhpcy5kZWxldGVTYXZlZFBhZ2U9dGhpcy5kZWxldGVTYXZlZFBhZ2UuYmluZCh0aGlzKSx0aGlzLmhhbmRsZVBhZ2VDaGFuZ2VzPXRoaXMuaGFuZGxlUGFnZUNoYW5nZXMuYmluZCh0aGlzKSx0aGlzLmF0dGFjaFBhZ2VzVG9XaW5kb3c9dGhpcy5hdHRhY2hQYWdlc1RvV2luZG93LmJpbmQodGhpcyksdGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWw9dGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLm9wZW5WaWV3VGFiQ29udGV4dE1lbnU9dGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51LmJpbmQodGhpcyksdGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWw9dGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLm9wZW5QYWdlVGFiQ29udGV4dE1lbnU9dGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51LmJpbmQodGhpcyksdGhpcy5nZXRTYXZlZFdvcmtzcGFjZXM9dGhpcy5nZXRTYXZlZFdvcmtzcGFjZXMuYmluZCh0aGlzKSx0aGlzLmdldFNhdmVkV29ya3NwYWNlPXRoaXMuZ2V0U2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmNyZWF0ZVNhdmVkV29ya3NwYWNlPXRoaXMuY3JlYXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLnVwZGF0ZVNhdmVkV29ya3NwYWNlPXRoaXMudXBkYXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmRlbGV0ZVNhdmVkV29ya3NwYWNlPXRoaXMuZGVsZXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmdldEN1cnJlbnRXb3Jrc3BhY2U9dGhpcy5nZXRDdXJyZW50V29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5nZXREb2NrUHJvdmlkZXJDb25maWc9dGhpcy5nZXREb2NrUHJvdmlkZXJDb25maWcuYmluZCh0aGlzKSx0aGlzLnNhdmVEb2NrUHJvdmlkZXJDb25maWc9dGhpcy5zYXZlRG9ja1Byb3ZpZGVyQ29uZmlnLmJpbmQodGhpcyksdGhpcy5hcHBseVdvcmtzcGFjZT10aGlzLmFwcGx5V29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5yZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWw9dGhpcy5yZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLnNldEFjdGl2ZVdvcmtzcGFjZT10aGlzLnNldEFjdGl2ZVdvcmtzcGFjZS5iaW5kKHRoaXMpLHRoaXMub3BlblNhdmVCdXR0b25Db250ZXh0TWVudT10aGlzLm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnUuYmluZCh0aGlzKSx0aGlzLm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbD10aGlzLm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0U2VsZWN0ZWRTY2hlbWU9dGhpcy5nZXRTZWxlY3RlZFNjaGVtZS5iaW5kKHRoaXMpLHRoaXMuc2V0U2VsZWN0ZWRTY2hlbWU9dGhpcy5zZXRTZWxlY3RlZFNjaGVtZS5iaW5kKHRoaXMpLHRoaXMuYW5hbHl0aWNzSW50ZXJuYWw9dGhpcy5hbmFseXRpY3NJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuaGFuZGxlQW5hbHl0aWNzPXRoaXMuaGFuZGxlQW5hbHl0aWNzLmJpbmQodGhpcyksdGhpcy5nZXRMYW5ndWFnZT10aGlzLmdldExhbmd1YWdlLmJpbmQodGhpcyksdGhpcy5zZXRMYW5ndWFnZT10aGlzLnNldExhbmd1YWdlLmJpbmQodGhpcyksdGhpcy5oYW5kbGVTYXZlTW9kYWxPblBhZ2VDbG9zZT10aGlzLmhhbmRsZVNhdmVNb2RhbE9uUGFnZUNsb3NlLmJpbmQodGhpcyksdGhpcy5zaG91bGRQYWdlQ2xvc2U9dGhpcy5zaG91bGRQYWdlQ2xvc2UuYmluZCh0aGlzKSx0aGlzLnNob3VsZFdpbmRvd0Nsb3NlPXRoaXMuc2hvdWxkV2luZG93Q2xvc2UuYmluZCh0aGlzKSx0aGlzLmhhbmRsZVBhZ2VzQW5kV2luZG93Q2xvc2U9dGhpcy5oYW5kbGVQYWdlc0FuZFdpbmRvd0Nsb3NlLmJpbmQodGhpcyksdGhpcy5zZXRBY3RpdmVQYWdlPXRoaXMuc2V0QWN0aXZlUGFnZS5iaW5kKHRoaXMpLHRoaXMuaGFuZGxlUGFnZUNoYW5nZXM9dGhpcy5oYW5kbGVQYWdlQ2hhbmdlcy5iaW5kKHRoaXMpLHRoaXMuY29weVBhZ2U9dGhpcy5jb3B5UGFnZS5iaW5kKHRoaXMpLHRoaXMuYWRkUGFnZT10aGlzLmFkZFBhZ2UuYmluZCh0aGlzKSx0aGlzLmFkZERlZmF1bHRQYWdlPXRoaXMuYWRkRGVmYXVsdFBhZ2UuYmluZCh0aGlzKSx0aGlzLm1hcmtVbnNhdmVkUGFnZXNBc1NhdmVkSW50ZXJuYWw9dGhpcy5tYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsLmJpbmQodGhpcyksdGhpcy50cmFja1JlbW92ZWRUYWJJbnRlcm5hbD10aGlzLnRyYWNrUmVtb3ZlZFRhYkludGVybmFsLmJpbmQodGhpcyksdGhpcy5yZXN0b3JlUmVtb3ZlZFRhYkludGVybmFsPXRoaXMucmVzdG9yZVJlbW92ZWRUYWJJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMudHJhY2tWaXNpdGVkU2l0ZUludGVybmFsPXRoaXMudHJhY2tWaXNpdGVkU2l0ZUludGVybmFsLmJpbmQodGhpcyksdGhpcy5nZXRSZWNlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsPXRoaXMuZ2V0UmVjZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsPXRoaXMuZ2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsLmJpbmQodGhpcyksdGhpcy5zZWFyY2hTaXRlc0ludGVybmFsPXRoaXMuc2VhcmNoU2l0ZXNJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0U2VhcmNoUHJvdmlkZXJzSW50ZXJuYWw9dGhpcy5nZXRTZWFyY2hQcm92aWRlcnNJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0Q3VyYXRlZENvbnRlbnRJbnRlcm5hbD10aGlzLmdldEN1cmF0ZWRDb250ZW50SW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLmhhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uSW50ZXJuYWw9dGhpcy5oYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbkludGVybmFsLmJpbmQodGhpcyksdGhpcy5yZWZyZXNoQm9va21hcmtzSW50ZXJuYWw9dGhpcy5yZWZyZXNoQm9va21hcmtzSW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLmxhdW5jaEJvb2ttYXJrSW50ZXJuYWw9dGhpcy5sYXVuY2hCb29rbWFya0ludGVybmFsLmJpbmQodGhpcyksdGhpcy5nZXROb3RpZmljYXRpb25zQ29uZmlnPXRoaXMuZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZy5iaW5kKHRoaXMpLHRoaXMudXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsPXRoaXMudXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsLmJpbmQodGhpcyksdGhpcy51cGRhdGVDb250ZW50TWVudUludGVybmFsPXRoaXMudXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMubGF1bmNoRG9ja0VudHJ5SW50ZXJuYWw9dGhpcy5sYXVuY2hEb2NrRW50cnlJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuc2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWw9dGhpcy5zZXREb2NrRmF2b3JpdGVzT3JkZXJJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMubmF2aWdhdGVDb250ZW50TWVudUludGVybmFsPXRoaXMubmF2aWdhdGVDb250ZW50TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5zZXREZWZhdWx0RG9ja0J1dHRvbnNPcmRlckludGVybmFsPXRoaXMuc2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0RG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsPXRoaXMuZ2V0RG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5oYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsPXRoaXMuaGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMucmVtb3ZlRG9ja0Zhdm9yaXRlSW50ZXJuYWw9dGhpcy5yZW1vdmVEb2NrRmF2b3JpdGVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuYWRkRG9ja0Zhdm9yaXRlSW50ZXJuYWw9dGhpcy5hZGREb2NrRmF2b3JpdGVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbD10aGlzLmZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWwuYmluZCh0aGlzKX1hc3luYyBhcHBseVdvcmtzcGFjZSguLi5lKXtyZXR1cm4gYm8uYXBwbHkodGhpcyxlKX1hc3luYyByZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWwoLi4uZSl7cmV0dXJuIHlvLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0U25hcHNob3QoKXtjb25zdCBlPW4/YXdhaXQgcWkoKGFzeW5jKCk9Pkx0KGF3YWl0IHN1cGVyLmdldFNuYXBzaG90KHZvaWQgMCxmaW4ubWUuaWRlbnRpdHkpKSkpOmF3YWl0IEx0KGF3YWl0IHN1cGVyLmdldFNuYXBzaG90KHZvaWQgMCxmaW4ubWUuaWRlbnRpdHkpKTtsZXQgdD17Li4uZSx3aW5kb3dzOmUud2luZG93cy5maWx0ZXIoV2kpLm1hcChOdCl9O3JldHVybiB0PShlPT57Y29uc3QgdD1EaShlKTtyZXR1cm4gdC53aW5kb3dzLmZvckVhY2goKGU9PntlLmxheW91dCYmKGUubGF5b3V0PV9pKGUubGF5b3V0KSksZS53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXM/LmZvckVhY2goKGU9PntlPy5sYXlvdXQmJihlLmxheW91dD1faShlLmxheW91dCkpfSkpfSkpLHR9KSh0KSx0fWFzeW5jIGdldFZpZXdTbmFwc2hvdChlKXtsZXQgdD1hd2FpdCBzdXBlci5nZXRWaWV3U25hcHNob3QoZSk7cmV0dXJuIHQ9UmkodCksdH1hc3luYyBhcHBseVNuYXBzaG90KHtzbmFwc2hvdDplLG9wdGlvbnM6dH0pe2xldCBhPWU7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPWF3YWl0IHN1cGVyLmZldGNoTWFuaWZlc3Qoe21hbmlmZXN0VXJsOmF9LGZpbi5tZS5pZGVudGl0eSkpO2NvbnN0IG89ZnVuY3Rpb24oZSl7Zm9yKGNvbnN0IHQgb2YgZS53aW5kb3dzKWlmKHQud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzPy5sZW5ndGgpcmV0dXJuITA7cmV0dXJuITF9KGEpO2lmKCFuJiZvKXRocm93IG5ldyBFcnJvcihcIlRoaXMgc25hcHNob3QgY2Fubm90IGJlIGFwcGxpZWQgYXMgdGhlIHBsYXRmb3JtIGhhcyBiZWVuIGluaXRpYWxpemVkIHdpdGhvdXQgdGhlIGJyb3dzZXIuXCIpO3JldHVybiBhPShlPT57Y29uc3QgdD1EaShlKTtyZXR1cm4gdC53aW5kb3dzLmZvckVhY2goKGU9PntlLmxheW91dD1PaShlLmxheW91dCksZS53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXM/LmZvckVhY2goKGU9PntlLmxheW91dD1PaShlLmxheW91dCl9KSl9KSksdH0pKGEpLHN1cGVyLmFwcGx5U25hcHNob3Qoe3NuYXBzaG90OmEsb3B0aW9uczp0fSl9YXN5bmMgY3JlYXRlV2luZG93KHQsYSl7aWYobiYmXCJ0ZWFyb3V0XCI9PT10LnJlYXNvbil7Y29uc3QgZT1hd2FpdCBmaW4uV2luZG93LndyYXBTeW5jKGEpLmdldE9wdGlvbnMoKSxuPWUud29ya3NwYWNlUGxhdGZvcm0/LndpbmRvd1R5cGU7dC50YXNrYmFySWNvbkdyb3VwPWUudGFza2Jhckljb25Hcm91cCxuJiYodC53b3Jrc3BhY2VQbGF0Zm9ybXx8PXt9LHQud29ya3NwYWNlUGxhdGZvcm0ud2luZG93VHlwZT1lLndvcmtzcGFjZVBsYXRmb3JtLndpbmRvd1R5cGUsbj09PVAuUGxhdGZvcm0mJih0LnVybD1lLnVybCkpfWlmKCFufHx0LndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlPT09UC5QbGF0Zm9ybSl7Y29uc3QgZT1hd2FpdCBzdXBlci5jcmVhdGVXaW5kb3codCxhKTtyZXR1cm4gS2Uoe3R5cGU6XCJXaW5kb3dcIixhY3Rpb246XCJPcGVuIFdpbmRvd1wiLHZhbHVlOmUuaWRlbnRpdHkubmFtZSxkYXRhOnt1dWlkOmUuaWRlbnRpdHkudXVpZH19KSxlfXZhciBvO289e2FsbG93ZWQ6ITB9LFVlfHwoVWU9ITAsT2UoX2UuQnJvd3NlcixvKSksKChlPVtdKT0+e2NvbnN0IHQ9ZS5maWx0ZXIoKGU9PmUudHlwZSE9PVMuQ3VzdG9tKSksYT1uZXcgU2V0LG49W107Zm9yKGNvbnN0IGUgb2YgdClhLmhhcyhlLnR5cGUpJiZuLnB1c2goZS50eXBlKSxhLmFkZChlLnR5cGUpO2lmKG4ubGVuZ3RoPjApe2NvbnN0IGU9bi5qb2luKFwiLCBcIik7dGhyb3cgbmV3IEVycm9yKGBFbmNvdW50ZXJlZCBhIGR1cGxpY2F0ZSBcIiR7ZX1cIiB0b29sYmFyIGJ1dHRvbi4gTm8gbW9yZSB0aGFuIG9uZSBpbnN0YW5jZSBvZiBhIGJ1dHRvbiB0eXBlIG1heSBiZSBwcm92aWRlZC5gKX19KSh0LndvcmtzcGFjZVBsYXRmb3JtPy50b29sYmFyT3B0aW9ucz8uYnV0dG9ucyk7bGV0IHI9KGU9Plwid29ya3NwYWNlUGxhdGZvcm1cImluIGU/ZTooKHt3b3Jrc3RhY2tzOmUscGFnZXM6dCwuLi5hfSk9Pih7Li4uYSx3b3Jrc3BhY2VQbGF0Zm9ybTp7cGFnZXM6dHx8ZXx8bnVsbH19KSkoZSkpKHQpO2U/LmRlZmF1bHRXaW5kb3dPcHRpb25zPy5ob3RrZXlzJiYoci5ob3RrZXlzPWUuZGVmYXVsdFdpbmRvd09wdGlvbnMuaG90a2V5cykscj1hd2FpdCBJaShyLGUse3RoZW1lczpqaSgpLHNlbGVjdGVkU2NoZW1lOnRoaXMuZ2V0U2VsZWN0ZWRTY2hlbWUoKX0pLHI9YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZmluLlN5c3RlbS5nZXRNb25pdG9ySW5mbygpO2xldCBhPXQucHJpbWFyeU1vbml0b3I7Y29uc3Qgbj1lLmRlZmF1bHRMZWZ0LG89ZS5kZWZhdWx0VG9wO3Qubm9uUHJpbWFyeU1vbml0b3JzLmZvckVhY2goKGU9Pntjb25zdHt0b3A6dCxib3R0b206cixsZWZ0OmkscmlnaHQ6c309ZS5hdmFpbGFibGVSZWN0O24+PWkmJm48PXMmJm8+PXQmJm88PXImJihhPWUpfSkpO2NvbnN0IHI9YS5hdmFpbGFibGVSZWN0LmJvdHRvbS1hLmF2YWlsYWJsZVJlY3QudG9wLGk9YS5hdmFpbGFibGVSZWN0LnJpZ2h0LWEuYXZhaWxhYmxlUmVjdC5sZWZ0O3JldHVybiBlLmRlZmF1bHRIZWlnaHQ9TWF0aC5taW4oZS5kZWZhdWx0SGVpZ2h0fHw4MDAsciksZS5kZWZhdWx0V2lkdGg9TWF0aC5taW4oZS5kZWZhdWx0V2lkdGh8fDgwMCxpKSxlfSkocik7Y29uc3QgaT1hd2FpdChlPT5hc3luYyh0LGEpPT57bGV0IG49ITE7Y29uc3Qgbz1hd2FpdCBlKHQsYSk7cmV0dXJuIHQ/LndvcmtzcGFjZVBsYXRmb3JtPy5faW50ZXJuYWxEZWZlclNob3dPcHRpb25zPy5kZWZlclNob3dFbmFibGVkPyhhd2FpdCBvLmFkZExpc3RlbmVyKFwic2hvdy1yZXF1ZXN0ZWRcIiwoYXN5bmMoKT0+e2lmKG4pcmV0dXJuO2NvbnN0IGU9YXdhaXQgby5nZXRPcHRpb25zKCk7YXdhaXQgby51cGRhdGVPcHRpb25zKHt3b3Jrc3BhY2VQbGF0Zm9ybTp7Li4uZS53b3Jrc3BhY2VQbGF0Zm9ybSxfaW50ZXJuYWxEZWZlclNob3dPcHRpb25zOnsuLi5lLndvcmtzcGFjZVBsYXRmb3JtLl9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnMsYXV0b1Nob3c6ITB9fX0pLG49ITB9KSksbyk6b30pKCgoZSx0KT0+c3VwZXIuY3JlYXRlV2luZG93KGUsdCkpKShyLGEpO3JldHVybiBLZSh7dHlwZTpcIldpbmRvd1wiLGFjdGlvbjpcIk9wZW4gV2luZG93XCIsdmFsdWU6aS5pZGVudGl0eS5uYW1lLGRhdGE6e3V1aWQ6aS5pZGVudGl0eS51dWlkfX0pLGl9YXN5bmMgY3JlYXRlVmlldyh0LGEpe3Qub3B0cz1EYSh0Lm9wdHMsZT8uZGVmYXVsdFZpZXdPcHRpb25zKSxlPy5kZWZhdWx0Vmlld09wdGlvbnM/LmhvdGtleXMmJih0Lm9wdHMuaG90a2V5cz1lLmRlZmF1bHRWaWV3T3B0aW9ucy5ob3RrZXlzKSx0Lm9wdHM9YXdhaXQgVGkodC5vcHRzLHRoaXMuZmV0Y2hNYW5pZmVzdCxhKSx0Lm9wdHM9YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9RGkoZSksYT10LndvcmtzcGFjZVBsYXRmb3JtPy5icm93c2VyTmF2aWdhdGlvbkJ1dHRvbnM7aWYoYSl7Y29uc3QgZT1PYmplY3Qua2V5cyhhKTtmb3IoY29uc3QgbiBvZiBlKWlmKGFbbl0pe2NvbnN0IGU9KGF3YWl0IFZpKCkpW25dO3QuaG90a2V5cz90LmhvdGtleXMucHVzaCguLi5lKTp0LmhvdGtleXM9Wy4uLmVdfX1yZXR1cm4gdH0pKHQub3B0cyksdC5vcHRzPUJpKHQub3B0cyk7Y29uc3Qgbj1hd2FpdCBzdXBlci5jcmVhdGVWaWV3KHQsYSk7cmV0dXJuIE5pKG4uaWRlbnRpdHksdC5vcHRzLl9pbnRlcm5hbFdvcmtzcGFjZURhdGE/LmJyb3dzZXJOYXZpZ2F0aW9uQnV0dG9ucyksbn1hc3luYyByZXBsYWNlVmlldyh0LGEpe3JldHVybiB0Lm9wdHMubmV3Vmlldz1hd2FpdCBEYSh0Lm9wdHMubmV3VmlldyxlPy5kZWZhdWx0Vmlld09wdGlvbnMpLHQub3B0cy5uZXdWaWV3PWF3YWl0IFRpKHQub3B0cy5uZXdWaWV3LHRoaXMuZmV0Y2hNYW5pZmVzdCxhKSxzdXBlci5yZXBsYWNlVmlldyh0LGEpfWFzeW5jIHJlcGxhY2VMYXlvdXQoZSx0KXtyZXR1cm4gYXdhaXQgQWUodCl8fGRlbGV0ZSBlLm9wdHMubGF5b3V0Py5kaW1lbnNpb25zLHN1cGVyLnJlcGxhY2VMYXlvdXQoZSx0KX1hc3luYyBnZXRTYXZlZFBhZ2UoLi4uZSl7cmV0dXJuIGtyLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0U2F2ZWRQYWdlcyguLi5lKXtyZXR1cm4gYnIuYXBwbHkodGhpcyxlKX1hc3luYyBjcmVhdGVTYXZlZFBhZ2UoLi4uZSl7cmV0dXJuIHlyLmFwcGx5KHRoaXMsZSl9YXN5bmMgZGVsZXRlU2F2ZWRQYWdlKC4uLmUpe3JldHVybiBmci5hcHBseSh0aGlzLGUpfWFzeW5jIHVwZGF0ZVNhdmVkUGFnZSguLi5lKXtyZXR1cm4gU3IuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRTYXZlZFdvcmtzcGFjZSguLi5lKXtyZXR1cm4ga2kuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRTYXZlZFdvcmtzcGFjZXMoLi4uZSl7cmV0dXJuIGJpLmFwcGx5KHRoaXMsZSl9YXN5bmMgY3JlYXRlU2F2ZWRXb3Jrc3BhY2UoLi4uZSl7cmV0dXJuIHlpLmFwcGx5KHRoaXMsZSl9YXN5bmMgZGVsZXRlU2F2ZWRXb3Jrc3BhY2UoLi4uZSl7cmV0dXJuIGZpLmFwcGx5KHRoaXMsZSl9YXN5bmMgdXBkYXRlU2F2ZWRXb3Jrc3BhY2UoLi4uZSl7cmV0dXJuIFNpLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0RG9ja1Byb3ZpZGVyQ29uZmlnKC4uLmUpe3JldHVybiB3aS5hcHBseSh0aGlzLGUpfWFzeW5jIHNhdmVEb2NrUHJvdmlkZXJDb25maWcoLi4uZSl7cmV0dXJuIGhpLmFwcGx5KHRoaXMsZSl9YXN5bmMgYXR0YWNoUGFnZXNUb1dpbmRvdyh0KXtjb25zdCBhPWF3YWl0IFBpKHQucGFnZXMsZSk7YXdhaXQgYW4oYSksYXdhaXQga24oey4uLnQscGFnZXM6YX0pfWFzeW5jIGFkZFBhZ2UoZSl7Y29uc3QgdD1hd2FpdCBBZShlLmlkZW50aXR5KSxhPWF3YWl0IHd0KGUuaWRlbnRpdHkpLHtwYWdlOm4saW5zZXJ0aW9uSW5kZXg6b309ZTtuPy50aXRsZXx8KG4udGl0bGU9YXdhaXQgYS5kaXNwYXRjaChsdC5HZXRVbmlxdWVQYWdlVGl0bGUsdm9pZCAwKSk7Y29uc3Qgcj0oYXdhaXQgdGhpcy5nZXRBbGxBdHRhY2hlZFBhZ2VzKCkpLmZpbmQoKGU9PmUucGFnZUlkPT09bi5wYWdlSWR8fGUudGl0bGU9PT1uLnRpdGxlKSk7aWYocil7aWYoci5wYWdlSWQ9PT1uLnBhZ2VJZCl0aHJvdyBuZXcgRXJyb3IoYHBhZ2Ugd2l0aCBpZCAke24ucGFnZUlkfSBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGEgYnJvd3NlciB3aW5kb3cgJHtyLnBhcmVudElkZW50aXR5Lm5hbWV9YCk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKGBhZGRQYWdlIHRpdGxlIGNvbGxpc2lvbiwgcGFnZSB3aXRoIHRpdGxlICR7bi50aXRsZX0gYWxyZWFkeSBleGlzdHMsIGNvbmZsaWN0aW5nIHBhZ2UgaWQ6ICR7ci5wYWdlSWR9IHdpdGggdGl0bGUgJHtyLnRpdGxlfWApfWNvbnN0IGk9e2lkZW50aXR5OmUuaWRlbnRpdHkscGFnZXM6W3suLi5uLG11bHRpSW5zdGFuY2VWaWV3QmVoYXZpb3I6ZS5tdWx0aUluc3RhbmNlVmlld0JlaGF2aW9yfHxcImR1cGxpY2F0ZVwifV0saW5zZXJ0aW9uSW5kZXg6b307YXdhaXQgdGhpcy5hdHRhY2hQYWdlc1RvV2luZG93KGkpfWFzeW5jIGFkZERlZmF1bHRQYWdlKGUpe2F3YWl0IHRoaXMuYWRkUGFnZShlKSxhd2FpdCB0aGlzLnNldEFjdGl2ZVBhZ2Uoe2lkZW50aXR5OmUuaWRlbnRpdHkscGFnZUlkOmUucGFnZS5wYWdlSWR9KX1hc3luYyBzZXRBY3RpdmVQYWdlKC4uLmUpe3JldHVybiBmbi5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsKC4uLmUpe3JldHVybiBuaS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5HbG9iYWxDb250ZXh0TWVudSguLi5lKXtyZXR1cm4gYWkuYXBwbHkodGhpcyxbLi4uZSxpci5HbG9iYWxNZW51LHRpLkJvdHRvbVJpZ2h0XSl9YXN5bmMgb3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsKC4uLmUpe3JldHVybiBvaS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5WaWV3VGFiQ29udGV4dE1lbnUoLi4uZSl7cmV0dXJuIGFpLmFwcGx5KHRoaXMsWy4uLmUsaXIuQ29udGV4dE1lbnVdKX1hc3luYyBvcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWwoLi4uZSl7cmV0dXJuIHJpLmFwcGx5KHRoaXMsZSl9YXN5bmMgb3BlblBhZ2VUYWJDb250ZXh0TWVudSguLi5lKXtyZXR1cm4gYWkuYXBwbHkodGhpcyxbLi4uZSxpci5Db250ZXh0TWVudV0pfWFzeW5jIG9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnUoLi4uZSl7cmV0dXJuIGFpLmFwcGx5KHRoaXMsZSl9YXN5bmMgb3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsKC4uLmUpe3JldHVybiBpaS5hcHBseSh0aGlzLGUpfWdldFNlbGVjdGVkU2NoZW1lKC4uLmUpe3JldHVybiB4YS5hcHBseSh0aGlzLGUpfWFzeW5jIHNldFNlbGVjdGVkU2NoZW1lKC4uLmUpe3JldHVybiBNYS5hcHBseSh0aGlzLGUpfWFzeW5jIGhhbmRsZVBhZ2VDaGFuZ2VzKC4uLmUpe3JldHVybiBUbi5hcHBseSh0aGlzLGUpfWFzeW5jIGFuYWx5dGljc0ludGVybmFsKC4uLmUpe3JldHVybiBHbi5hcHBseSh0aGlzLGUpfWFzeW5jIGhhbmRsZUFuYWx5dGljcyguLi5lKXt9YXN5bmMgaGFuZGxlU2F2ZU1vZGFsT25QYWdlQ2xvc2UoLi4uZSl7cmV0dXJuIHhuLmFwcGx5KHRoaXMsZSl9YXN5bmMgc2hvdWxkUGFnZUNsb3NlKC4uLmUpe3JldHVybiBJbi5hcHBseSh0aGlzLGUpfWFzeW5jIHNob3VsZFdpbmRvd0Nsb3NlKC4uLmUpe3JldHVybiBBbi5hcHBseSh0aGlzLGUpfWhhbmRsZVBhZ2VzQW5kV2luZG93Q2xvc2UoLi4uZSl7cmV0dXJuIFduLmFwcGx5KHRoaXMsZSl9YXN5bmMgY29weVBhZ2UoLi4uZSl7cmV0dXJuIERuLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZygpe3JldHVybiB0fWFzeW5jIHNldExhbmd1YWdlKC4uLmUpe3JldHVybiBPby5hcHBseSh0aGlzLGUpfWFzeW5jIGdldExhbmd1YWdlKCl7cmV0dXJuIF9vLmFwcGx5KHRoaXMpfWFzeW5jIHRyYWNrUmVtb3ZlZFRhYkludGVybmFsKC4uLmUpe3JldHVybiB2ci5hcHBseSh0aGlzLGUpfWFzeW5jIHJlc3RvcmVSZW1vdmVkVGFiSW50ZXJuYWwoKXtjb25zdCBlPWF3YWl0KGFzeW5jKCk9PntpZighbXIpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHBvcCBsYXN0IHJlbW92ZWQgdGFiIC0gSW5kZXhEQiBub3Qgc3VwcG9ydGVkXCIpO2NvbnN0IGU9bXJbd3JdLHQ9YXdhaXQgZS50b0NvbGxlY3Rpb24oKS5rZXlzKCk7aWYodC5sZW5ndGg+MCl7Y29uc3QgYT1NYXRoLm1heCguLi50Lm1hcCgoZT0+TnVtYmVyKGUpKSkpLnRvU3RyaW5nKCksbj1hd2FpdCBlLmdldChhKTtpZihuKXthd2FpdCBlLmRlbGV0ZShhKTtjb25zdHtpZDp0LC4uLm99PW47cmV0dXJuIG99fX0pKCk7aWYoXCJwYWdlXCJpbiBlKWlmKGF3YWl0IGZlKGUuaWRlbnRpdHkpKXtjb25zdCB0PUFhKCkuQnJvd3Nlci53cmFwU3luYyhlLmlkZW50aXR5KTthd2FpdCB0LmFkZFBhZ2UoZS5wYWdlKSxhd2FpdCB0LnNldEFjdGl2ZVBhZ2UoZS5wYWdlLnBhZ2VJZCl9ZWxzZSBBYSgpLmNyZWF0ZVdpbmRvdyh7bmFtZTplLmlkZW50aXR5Lm5hbWUsd29ya3NwYWNlUGxhdGZvcm06e3BhZ2VzOltlLnBhZ2VdLHdpbmRvd1R5cGU6UC5Ccm93c2VyfX0pO2Vsc2UoZnVuY3Rpb24oZSl7cmV0dXJuXCJ3aW5kb3dcImluIGV9KShlKSYmQWEoKS5jcmVhdGVXaW5kb3coe3dvcmtzcGFjZVBsYXRmb3JtOntwYWdlczplLndpbmRvdy5wYWdlcyx3aW5kb3dUeXBlOlAuQnJvd3Nlcn19KX1hc3luYyB0cmFja1Zpc2l0ZWRTaXRlSW50ZXJuYWwoLi4uZSl7cmV0dXJuIENyLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0UmVjZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbCguLi5lKXtyZXR1cm4gYXdhaXQgSmkuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRGcmVxdWVudGx5VmlzaXRlZFNpdGVzSW50ZXJuYWwoLi4uZSl7cmV0dXJuIE1yLmFwcGx5KHRoaXMsZSl9YXN5bmMgc2VhcmNoU2l0ZXNJbnRlcm5hbCguLi5lKXtyZXR1cm4gYXdhaXQgJGkuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRTZWFyY2hQcm92aWRlcnNJbnRlcm5hbCguLi5lKXtyZXR1cm4gYXdhaXQgS2kuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRDdXJhdGVkQ29udGVudEludGVybmFsKC4uLmUpe3JldHVybiBhd2FpdCB6aS5hcHBseSh0aGlzLGUpfWFzeW5jIGhhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uSW50ZXJuYWwoLi4uZSl7fWFzeW5jIHJlZnJlc2hCb29rbWFya3NJbnRlcm5hbCgpeyhhd2FpdCBBYSgpLkJyb3dzZXIuZ2V0QWxsV2luZG93cygpKS5mb3JFYWNoKChhc3luYyh7aWRlbnRpdHk6ZX0pPT57KGF3YWl0IHF0KGUpKS5kaXNwYXRjaChlYS5SZWZyZXNoQm9va21hcmtzSW50ZXJuYWwpfSkpOyhhd2FpdCBKdChucigpKSkuZGlzcGF0Y2goZWEuUmVmcmVzaEJvb2ttYXJrc0ludGVybmFsKSxhd2FpdChhc3luYygpPT57Y29uc3QgZT1hd2FpdCBjaSgpO2lmKGUpe2NvbnN0IHQ9YXdhaXQgcXQoZS5pZGVudGl0eSxzaSk7YXdhaXQgdC5kaXNwYXRjaChlYS5SZWZyZXNoQm9va21hcmtzSW50ZXJuYWwpfX0pKCl9YXN5bmMgbGF1bmNoQm9va21hcmtJbnRlcm5hbChlKXtyZXR1cm4gSXIoZSl9YXN5bmMgdXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsKGUpe3JldHVybihhc3luYyBlPT57Y29uc3QgdD1hd2FpdCBjaSgpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIkNvbXBhbmlvbiBEb2NrIHdpbmRvdyBub3QgZm91bmRcIik7e2NvbnN0IGE9YXdhaXQgcXQodC5pZGVudGl0eSxzaSk7YXdhaXQgYS5kaXNwYXRjaChYdC5VcGRhdGVGYXZvcml0ZUVudHJpZXMsZSl9fSkoZSl9YXN5bmMgdXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbChlKXtyZXR1cm4oYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgY2koKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJDb21wYW5pb24gRG9jayB3aW5kb3cgbm90IGZvdW5kXCIpO3tjb25zdCBhPWF3YWl0IHF0KHQuaWRlbnRpdHksc2kpO2F3YWl0IGEuZGlzcGF0Y2goWHQuVXBkYXRlQ29udGVudE1lbnUsZSl9fSkoZSl9YXN5bmMgbGF1bmNoRG9ja0VudHJ5SW50ZXJuYWwoZSl7cmV0dXJuKGFzeW5jIGU9Pihhd2FpdCBsaSgpKS5kaXNwYXRjaChcImxhdW5jaC1lbnRyeVwiLGUpKShlKX1hc3luYyBzZXREZWZhdWx0RG9ja0J1dHRvbnNPcmRlckludGVybmFsKGUpe3JldHVybihhc3luYyBlPT4oYXdhaXQgbGkoKSkuZGlzcGF0Y2goXCJzZXQtZGVmYXVsdC1kb2NrLWJ1dHRvbnMtb3JkZXJcIixlKSkoZSl9YXN5bmMgc2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWwoZSl7cmV0dXJuKGFzeW5jIGU9Pihhd2FpdCBsaSgpKS5kaXNwYXRjaChcInNldC1kb2NrLWZhdm9yaXRlcy1vcmRlclwiLGUpKShlKX1hc3luYyBhZGREb2NrRmF2b3JpdGVJbnRlcm5hbChlKXtyZXR1cm4oYXN5bmMgZT0+KGF3YWl0IGxpKCkpLmRpc3BhdGNoKFwiYWRkLWZhdm9yaXRlLWVudHJ5XCIsZSkpKGUpfWFzeW5jIHJlbW92ZURvY2tGYXZvcml0ZUludGVybmFsKGUpe3JldHVybihhc3luYyBlPT4oYXdhaXQgbGkoKSkuZGlzcGF0Y2goXCJyZW1vdmUtZmF2b3JpdGUtZW50cnlcIixlKSkoZSl9YXN5bmMgbmF2aWdhdGVDb250ZW50TWVudUludGVybmFsKGUpe3JldHVybihhc3luYyBlPT57Y29uc3QgdD1hd2FpdCBjaSgpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIkNvbXBhbmlvbiBEb2NrIHdpbmRvdyBub3QgZm91bmRcIik7e2NvbnN0IGE9YXdhaXQgcXQodC5pZGVudGl0eSxzaSk7YXdhaXQgYS5kaXNwYXRjaChYdC5OYXZpZ2F0ZUNvbnRlbnRNZW51LGUpfX0pKGUpfWFzeW5jIGdldERvY2tXb3Jrc3BhY2VzQ29udGV4dE1lbnVJbnRlcm5hbCgpe3JldHVybihhc3luYygpPT4oYXdhaXQgbGkoKSkuZGlzcGF0Y2goXCJnZXQtZG9jay13b3Jrc3BhY2VzLWNvbnRleHQtbWVudVwiLHZvaWQgMCkpKCl9YXN5bmMgaGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbChlKXtyZXR1cm4oYXN5bmMgZT0+KGF3YWl0IGxpKCkpLmRpc3BhdGNoKFwiaGFuZGxlLWRvY2std29ya3NwYWNlcy1tZW51LXJlc3BvbnNlXCIsZSkpKGUpfWFzeW5jIGZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWwoKXtyZXR1cm4gZGkoKX19fTtmdW5jdGlvbiBYaShlLHQsYSl7Y29uc3Qgbj1ZaShlLGEpO3RyeXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P2U9PnQobihlKSk6QXJyYXkuaXNBcnJheSh0KT9bLi4udCxuXTplPT5uZXcobihlKSl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiV29ya3NwYWNlUGxhdGZvcm0uaW5pdCBFcnJvcjpcIixlKX19YXN5bmMgZnVuY3Rpb24gZXMoKXsoYXN5bmMoKT0+e2xlKCkub24oXCJ3aW5kb3ctY2xvc2VkXCIsWG8pfSkoKSxhc3luYyBmdW5jdGlvbigpe2NvbnN0IGU9ZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCk7YXdhaXQgZS5hZGRMaXN0ZW5lcihcIndpbmRvdy1mb2N1c2VkXCIsUW8pLGF3YWl0IGUuYWRkTGlzdGVuZXIoXCJ3aW5kb3ctY2xvc2VkXCIsWW8pfSgpO2ZvKGF3YWl0IFNvKCkpfWxldCB0czthc3luYyBmdW5jdGlvbiBhcyhlLHQpe2lmKCFhd2FpdCBmZSh7dXVpZDp3ZS51dWlkLG5hbWU6ZGUuRG9ja0NvbXBhbmlvbn0pKXtjb25zdCBhPWF3YWl0IFZlKHdlKTthd2FpdCB0LmNyZWF0ZVdpbmRvdyhDZSh7bmFtZTpkZS5Eb2NrQ29tcGFuaW9uLHVybDphd2FpdCBhZSgpK0suRW50ZXJwcmlzZURvY2ssYXV0b1Nob3c6ITAsZnJhbWU6ITEsc21hbGxXaW5kb3c6ITAsc2F2ZVdpbmRvd1N0YXRlOiExLGRlZmF1bHRIZWlnaHQ6TWUsZGVmYXVsdFdpZHRoOnhlLGluY2x1ZGVJblNuYXBzaG90czohMSxkZWZhdWx0VG9wOmUuZG9ja1Bvc2l0aW9uPy50b3A/P0llLGRlZmF1bHRMZWZ0OmUuZG9ja1Bvc2l0aW9uPy5sZWZ0Pz9hLmxlZnQteGUvMix3b3Jrc3BhY2VQbGF0Zm9ybTp7d2luZG93VHlwZTpcImVudGVycHJpc2VcIiwuLi5lfSx0aHJvdHRsaW5nOlwiZGlzYWJsZWRcIixyZXNpemFibGU6ITEsbWF4aW1pemFibGU6ITEsYmFja2dyb3VuZENvbG9yOmF3YWl0IEN0KFwiYmFja2dyb3VuZDFcIil9KSl9fWZ1bmN0aW9uIG5zKHtvdmVycmlkZUNhbGxiYWNrOmUsaW50ZXJvcE92ZXJyaWRlOnQsYnJvd3NlcjphLG5vdGlmaWNhdGlvbnM6bixhbmFseXRpY3M6byxpbnRlZ3JhdGlvbnM6cj1bXSx3b3Jrc3BhY2VBc2FyOml9KXtpZighQSl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgYmUgdXNlZCBvdXRzaWRlIGFuIE9wZW5GaW4gZW52LlwiKTtyZXR1cm4gdHN8fCh0cz0oYXN5bmMoKT0+e2NvbnN0IHM9ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCk7dmFyIGMsbDtpZihzLm9uY2UoXCJwbGF0Zm9ybS1hcGktcmVhZHlcIiwoKCk9PmVzKCkpKSxzLm9uKFwid2luZG93LXNob3ctYWxsLWRvd25sb2Fkc1wiLCgoe25hbWU6ZSx1dWlkOnR9KT0+e0VvKHtuYW1lOmUsdXVpZDp0fSl9KSksYT8udGl0bGUmJihjPWEudGl0bGUsanI9YyksSG4obyksaSl7Y29uc3QgZT1gd29ya3NwYWNlLSR7ZW5jb2RlVVJJQ29tcG9uZW50KGZpbi5tZS51dWlkKX1gLHtiYXNlVXJsOnR9PWF3YWl0IGZpbi5TeXN0ZW0uc2VydmVBc3NldCh7Li4uaSxob3N0TmFtZTplfSk7WSh0KX1pZihhPy5icm93c2VyQmFzZVVybCYmWShhLmJyb3dzZXJCYXNlVXJsKSxXZShhKSl7ZW49ITA7Y29uc3QgZT1oYSgpO2Uuc2V0V29ya3NwYWNlU3RvcmFnZVByb3h5KGF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PWBzdG9yYWdlLXByb3h5LXdpbmRvdy0ke2NyeXB0by5yYW5kb21VVUlEKCl9YCxbYSxuXT1hd2FpdCBQcm9taXNlLmFsbChbZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGBjaGFubmVsLSR7dH1gLHt3YWl0OiEwfSksZmluLldpbmRvdy5jcmVhdGUoe2F1dG9TaG93OiExLGluY2x1ZGVJblNuYXBzaG90czohMSxuYW1lOnQsdXJsOmV9KV0pO3JldHVybntzZXRJdGVtOihlLHQpPT5hLmRpc3BhdGNoKFwic2V0SXRlbVwiLHtrZXk6ZSx2YWx1ZTp0fSksZGVzdHJveTooKT0+bi5jbG9zZSgpfX0pKGAke2F3YWl0IGVlKCl9JHtLLkVudGVycHJpc2VTdG9yYWdlUHJveHl9YCkpLGF3YWl0IGUudHJ5U3luY2hyb25pemVXb3Jrc3BhY2VTdG9yYWdlKCl9cmV0dXJuIGF3YWl0IGZpbi5QbGF0Zm9ybS5pbml0KHtvdmVycmlkZUNhbGxiYWNrOlhpKGEsZXx8YT8ub3ZlcnJpZGVDYWxsYmFjayxuKSxpbnRlcm9wT3ZlcnJpZGU6cW8odHx8YT8uaW50ZXJvcE92ZXJyaWRlLGEpfSksbD17YWxsb3dlZDohMH0sT2UoX2UuUGxhdGZvcm0sbCksYXdhaXQgUHJvbWlzZS5hbGwoci5tYXAoKGFzeW5jIGU9PnsoKGUsdCk9PntPZShgJHtfZS5NaWNyb2Zsb3d9OiR7ZX1gLHQsXCJpbnRlZ3JhdGlvbi1mZWF0dXJlXCIpfSkoZS53b3JrZmxvd0ludGVncmF0aW9uTmFtZSx7YWxsb3dlZDohMCxhcGlWZXJzaW9uOl99KSxhd2FpdCBlLl9pbml0aWFsaXplV29ya2Zsb3dzKCl9KSkpLHN9KSgpKSx0c31jb25zdCBvcz1hc3luYyh7dGhlbWU6ZSxjdXN0b21BY3Rpb25zOnQsbGFuZ3VhZ2U6YSwuLi5ufSk9Pntjb25zdCBvPV8uc3BsaXQoXCIuXCIpLm1hcCgoZT0+cGFyc2VJbnQoZSkpKSxyPWF3YWl0KGFzeW5jIGU9PntpZigoYXdhaXQgUSgpKS5kaXNhYmxlUnVudGltZVZhbGlkYXRpb24pcmV0dXJuITA7aWYoYXdhaXQgQWUoKSlyZXR1cm4hMDtjb25zdCB0PShhd2FpdCBmaW4uU3lzdGVtLmdldFZlcnNpb24oKSkuc3BsaXQoXCIuXCIpLm1hcCgoZT0+cGFyc2VJbnQoZSkpKTtyZXR1cm4gZS5ldmVyeSgoKGEsbik9PiEobjwzKXx8dFtuXT09PWVbbl0pKX0pKG8pO2lmKCFyKXRocm93IG5ldyBFcnJvcihgUnVudGltZSB2ZXJzaW9uIGlzIG5vdCBzdXBwb3J0ZWQuICAke29bMF19LiR7b1sxXX0uJHtvWzJdfS4qIGlzIHJlcXVpcmVkYCk7dmFyIGk7cmV0dXJuIGUmJihRaShlKSxpPXthbGxvd2VkOiEwfSxPZShfZS5UaGVtaW5nLGkpKSx0JiYoZXI9dCksYXdhaXQgR28oYT8uaW5pdGlhbExhbmd1YWdlKSxucyhuKX19KSgpLG1vZHVsZS5leHBvcnRzPW59KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiLypcbiAqIERleGllLmpzIC0gYSBtaW5pbWFsaXN0aWMgd3JhcHBlciBmb3IgSW5kZXhlZERCXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICpcbiAqIEJ5IERhdmlkIEZhaGxhbmRlciwgZGF2aWQuZmFobGFuZGVyQGdtYWlsLmNvbVxuICpcbiAqIFZlcnNpb24gNC4yLjAsIFdlZCBBdWcgMTMgMjAyNVxuICpcbiAqIGh0dHBzOi8vZGV4aWUub3JnXG4gKlxuICogQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAsIEphbnVhcnkgMjAwNCwgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL1xuICovXG4gXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5EZXhpZSA9IGZhY3RvcnkoKSk7XG59KSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgICAvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cbiAgICBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXG4gICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxuICAgIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcbiAgICBJTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxuICAgIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcbiAgICBQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9XG4gICAgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG4gICAgfVxuXG4gICAgdmFyIF9nbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDpcbiAgICAgICAgdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6XG4gICAgICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6XG4gICAgICAgICAgICAgICAgZ2xvYmFsO1xuXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cztcbiAgICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG4gICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiAhX2dsb2JhbC5Qcm9taXNlKSB7XG4gICAgICAgIF9nbG9iYWwuUHJvbWlzZSA9IFByb21pc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4dGVuZChvYmosIGV4dGVuc2lvbikge1xuICAgICAgICBpZiAodHlwZW9mIGV4dGVuc2lvbiAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICBrZXlzKGV4dGVuc2lvbikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBvYmpba2V5XSA9IGV4dGVuc2lvbltrZXldO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICAgIHZhciBfaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG4gICAgZnVuY3Rpb24gaGFzT3duKG9iaiwgcHJvcCkge1xuICAgICAgICByZXR1cm4gX2hhc093bi5jYWxsKG9iaiwgcHJvcCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb3BzKHByb3RvLCBleHRlbnNpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBleHRlbnNpb24gPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb24oZ2V0UHJvdG8ocHJvdG8pKTtcbiAgICAgICAgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiID8ga2V5cyA6IFJlZmxlY3Qub3duS2V5cykoZXh0ZW5zaW9uKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHNldFByb3AocHJvdG8sIGtleSwgZXh0ZW5zaW9uW2tleV0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuICAgIGZ1bmN0aW9uIHNldFByb3Aob2JqLCBwcm9wLCBmdW5jdGlvbk9yR2V0U2V0LCBvcHRpb25zKSB7XG4gICAgICAgIGRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZXh0ZW5kKGZ1bmN0aW9uT3JHZXRTZXQgJiYgaGFzT3duKGZ1bmN0aW9uT3JHZXRTZXQsIFwiZ2V0XCIpICYmIHR5cGVvZiBmdW5jdGlvbk9yR2V0U2V0LmdldCA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICB7IGdldDogZnVuY3Rpb25PckdldFNldC5nZXQsIHNldDogZnVuY3Rpb25PckdldFNldC5zZXQsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IDpcbiAgICAgICAgICAgIHsgdmFsdWU6IGZ1bmN0aW9uT3JHZXRTZXQsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSwgb3B0aW9ucykpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZXJpdmUoQ2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZyb206IGZ1bmN0aW9uIChQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBDaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhcmVudC5wcm90b3R5cGUpO1xuICAgICAgICAgICAgICAgIHNldFByb3AoQ2hpbGQucHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIENoaWxkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBleHRlbmQ6IHByb3BzLmJpbmQobnVsbCwgQ2hpbGQucHJvdG90eXBlKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgIGZ1bmN0aW9uIGdldFByb3BlcnR5RGVzY3JpcHRvcihvYmosIHByb3ApIHtcbiAgICAgICAgdmFyIHBkID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCk7XG4gICAgICAgIHZhciBwcm90bztcbiAgICAgICAgcmV0dXJuIHBkIHx8IChwcm90byA9IGdldFByb3RvKG9iaikpICYmIGdldFByb3BlcnR5RGVzY3JpcHRvcihwcm90bywgcHJvcCk7XG4gICAgfVxuICAgIHZhciBfc2xpY2UgPSBbXS5zbGljZTtcbiAgICBmdW5jdGlvbiBzbGljZShhcmdzLCBzdGFydCwgZW5kKSB7XG4gICAgICAgIHJldHVybiBfc2xpY2UuY2FsbChhcmdzLCBzdGFydCwgZW5kKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb3ZlcnJpZGUob3JpZ0Z1bmMsIG92ZXJyaWRlZEZhY3RvcnkpIHtcbiAgICAgICAgcmV0dXJuIG92ZXJyaWRlZEZhY3Rvcnkob3JpZ0Z1bmMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhc3NlcnQoYikge1xuICAgICAgICBpZiAoIWIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBc3NlcnRpb24gRmFpbGVkXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhc2FwJDEoZm4pIHtcbiAgICAgICAgaWYgKF9nbG9iYWwuc2V0SW1tZWRpYXRlKVxuICAgICAgICAgICAgc2V0SW1tZWRpYXRlKGZuKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFycmF5VG9PYmplY3QoYXJyYXksIGV4dHJhY3Rvcikge1xuICAgICAgICByZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGl0ZW0sIGkpIHtcbiAgICAgICAgICAgIHZhciBuYW1lQW5kVmFsdWUgPSBleHRyYWN0b3IoaXRlbSwgaSk7XG4gICAgICAgICAgICBpZiAobmFtZUFuZFZhbHVlKVxuICAgICAgICAgICAgICAgIHJlc3VsdFtuYW1lQW5kVmFsdWVbMF1dID0gbmFtZUFuZFZhbHVlWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoKSB7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycgJiYgaGFzT3duKG9iaiwga2V5UGF0aCkpXG4gICAgICAgICAgICByZXR1cm4gb2JqW2tleVBhdGhdO1xuICAgICAgICBpZiAoIWtleVBhdGgpXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICBpZiAodHlwZW9mIGtleVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB2YXIgcnYgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5UGF0aC5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gZ2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aFtpXSk7XG4gICAgICAgICAgICAgICAgcnYucHVzaCh2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICB9XG4gICAgICAgIHZhciBwZXJpb2QgPSBrZXlQYXRoLmluZGV4T2YoJy4nKTtcbiAgICAgICAgaWYgKHBlcmlvZCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHZhciBpbm5lck9iaiA9IG9ialtrZXlQYXRoLnN1YnN0cigwLCBwZXJpb2QpXTtcbiAgICAgICAgICAgIHJldHVybiBpbm5lck9iaiA9PSBudWxsID8gdW5kZWZpbmVkIDogZ2V0QnlLZXlQYXRoKGlubmVyT2JqLCBrZXlQYXRoLnN1YnN0cihwZXJpb2QgKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCFvYmogfHwga2V5UGF0aCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoJ2lzRnJvemVuJyBpbiBPYmplY3QgJiYgT2JqZWN0LmlzRnJvemVuKG9iaikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycgJiYgJ2xlbmd0aCcgaW4ga2V5UGF0aCkge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgJ2xlbmd0aCcgaW4gdmFsdWUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlQYXRoLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGhbaV0sIHZhbHVlW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwZXJpb2QgPSBrZXlQYXRoLmluZGV4T2YoJy4nKTtcbiAgICAgICAgICAgIGlmIChwZXJpb2QgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRLZXlQYXRoID0ga2V5UGF0aC5zdWJzdHIoMCwgcGVyaW9kKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nS2V5UGF0aCA9IGtleVBhdGguc3Vic3RyKHBlcmlvZCArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdLZXlQYXRoID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkob2JqKSAmJiAhaXNOYU4ocGFyc2VJbnQoY3VycmVudEtleVBhdGgpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc3BsaWNlKGN1cnJlbnRLZXlQYXRoLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqW2N1cnJlbnRLZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbY3VycmVudEtleVBhdGhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lck9iaiA9IG9ialtjdXJyZW50S2V5UGF0aF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5uZXJPYmogfHwgIWhhc093bihvYmosIGN1cnJlbnRLZXlQYXRoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyT2JqID0gKG9ialtjdXJyZW50S2V5UGF0aF0gPSB7fSk7XG4gICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChpbm5lck9iaiwgcmVtYWluaW5nS2V5UGF0aCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KG9iaikgJiYgIWlzTmFOKHBhcnNlSW50KGtleVBhdGgpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zcGxpY2Uoa2V5UGF0aCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqW2tleVBhdGhdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZGVsQnlLZXlQYXRoKG9iaiwga2V5UGF0aCkge1xuICAgICAgICBpZiAodHlwZW9mIGtleVBhdGggPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgdW5kZWZpbmVkKTtcbiAgICAgICAgZWxzZSBpZiAoJ2xlbmd0aCcgaW4ga2V5UGF0aClcbiAgICAgICAgICAgIFtdLm1hcC5jYWxsKGtleVBhdGgsIGZ1bmN0aW9uIChrcCkge1xuICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtwLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNoYWxsb3dDbG9uZShvYmopIHtcbiAgICAgICAgdmFyIHJ2ID0ge307XG4gICAgICAgIGZvciAodmFyIG0gaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duKG9iaiwgbSkpXG4gICAgICAgICAgICAgICAgcnZbbV0gPSBvYmpbbV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICB2YXIgY29uY2F0ID0gW10uY29uY2F0O1xuICAgIGZ1bmN0aW9uIGZsYXR0ZW4oYSkge1xuICAgICAgICByZXR1cm4gY29uY2F0LmFwcGx5KFtdLCBhKTtcbiAgICB9XG4gICAgdmFyIGludHJpbnNpY1R5cGVOYW1lcyA9IFwiQmlnVWludDY0QXJyYXksQmlnSW50NjRBcnJheSxBcnJheSxCb29sZWFuLFN0cmluZyxEYXRlLFJlZ0V4cCxCbG9iLEZpbGUsRmlsZUxpc3QsRmlsZVN5c3RlbUZpbGVIYW5kbGUsRmlsZVN5c3RlbURpcmVjdG9yeUhhbmRsZSxBcnJheUJ1ZmZlcixEYXRhVmlldyxVaW50OENsYW1wZWRBcnJheSxJbWFnZUJpdG1hcCxJbWFnZURhdGEsTWFwLFNldCxDcnlwdG9LZXlcIlxuICAgICAgICAuc3BsaXQoJywnKS5jb25jYXQoZmxhdHRlbihbOCwgMTYsIDMyLCA2NF0ubWFwKGZ1bmN0aW9uIChudW0pIHsgcmV0dXJuIFtcIkludFwiLCBcIlVpbnRcIiwgXCJGbG9hdFwiXS5tYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgKyBudW0gKyBcIkFycmF5XCI7IH0pOyB9KSkpLmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gX2dsb2JhbFt0XTsgfSk7XG4gICAgdmFyIGludHJpbnNpY1R5cGVzID0gbmV3IFNldChpbnRyaW5zaWNUeXBlTmFtZXMubWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiBfZ2xvYmFsW3RdOyB9KSk7XG4gICAgZnVuY3Rpb24gY2xvbmVTaW1wbGVPYmplY3RUcmVlKG8pIHtcbiAgICAgICAgdmFyIHJ2ID0ge307XG4gICAgICAgIGZvciAodmFyIGsgaW4gbylcbiAgICAgICAgICAgIGlmIChoYXNPd24obywgaykpIHtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IG9ba107XG4gICAgICAgICAgICAgICAgcnZba10gPSAhdiB8fCB0eXBlb2YgdiAhPT0gJ29iamVjdCcgfHwgaW50cmluc2ljVHlwZXMuaGFzKHYuY29uc3RydWN0b3IpID8gdiA6IGNsb25lU2ltcGxlT2JqZWN0VHJlZSh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBvYmplY3RJc0VtcHR5KG8pIHtcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKVxuICAgICAgICAgICAgaWYgKGhhc093bihvLCBrKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgY2lyY3VsYXJSZWZzID0gbnVsbDtcbiAgICBmdW5jdGlvbiBkZWVwQ2xvbmUoYW55KSB7XG4gICAgICAgIGNpcmN1bGFyUmVmcyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIHZhciBydiA9IGlubmVyRGVlcENsb25lKGFueSk7XG4gICAgICAgIGNpcmN1bGFyUmVmcyA9IG51bGw7XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5uZXJEZWVwQ2xvbmUoeCkge1xuICAgICAgICBpZiAoIXggfHwgdHlwZW9mIHggIT09ICdvYmplY3QnKVxuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIHZhciBydiA9IGNpcmN1bGFyUmVmcy5nZXQoeCk7XG4gICAgICAgIGlmIChydilcbiAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgaWYgKGlzQXJyYXkoeCkpIHtcbiAgICAgICAgICAgIHJ2ID0gW107XG4gICAgICAgICAgICBjaXJjdWxhclJlZnMuc2V0KHgsIHJ2KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0geC5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgICAgICBydi5wdXNoKGlubmVyRGVlcENsb25lKHhbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnRyaW5zaWNUeXBlcy5oYXMoeC5jb25zdHJ1Y3RvcikpIHtcbiAgICAgICAgICAgIHJ2ID0geDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm90byA9IGdldFByb3RvKHgpO1xuICAgICAgICAgICAgcnYgPSBwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSA/IHt9IDogT2JqZWN0LmNyZWF0ZShwcm90byk7XG4gICAgICAgICAgICBjaXJjdWxhclJlZnMuc2V0KHgsIHJ2KTtcbiAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4geCkge1xuICAgICAgICAgICAgICAgIGlmIChoYXNPd24oeCwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcnZbcHJvcF0gPSBpbm5lckRlZXBDbG9uZSh4W3Byb3BdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICB2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcbiAgICBmdW5jdGlvbiB0b1N0cmluZ1RhZyhvKSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgICB9XG4gICAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgP1xuICAgICAgICBTeW1ib2wuaXRlcmF0b3IgOlxuICAgICAgICAnQEBpdGVyYXRvcic7XG4gICAgdmFyIGdldEl0ZXJhdG9yT2YgPSB0eXBlb2YgaXRlcmF0b3JTeW1ib2wgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAoeCkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgcmV0dXJuIHggIT0gbnVsbCAmJiAoaSA9IHhbaXRlcmF0b3JTeW1ib2xdKSAmJiBpLmFwcGx5KHgpO1xuICAgIH0gOiBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9O1xuICAgIGZ1bmN0aW9uIGRlbEFycmF5SXRlbShhLCB4KSB7XG4gICAgICAgIHZhciBpID0gYS5pbmRleE9mKHgpO1xuICAgICAgICBpZiAoaSA+PSAwKVxuICAgICAgICAgICAgYS5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiBpID49IDA7XG4gICAgfVxuICAgIHZhciBOT19DSEFSX0FSUkFZID0ge307XG4gICAgZnVuY3Rpb24gZ2V0QXJyYXlPZihhcnJheUxpa2UpIHtcbiAgICAgICAgdmFyIGksIGEsIHgsIGl0O1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkoYXJyYXlMaWtlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlMaWtlLnNsaWNlKCk7XG4gICAgICAgICAgICBpZiAodGhpcyA9PT0gTk9fQ0hBUl9BUlJBWSAmJiB0eXBlb2YgYXJyYXlMaWtlID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FycmF5TGlrZV07XG4gICAgICAgICAgICBpZiAoKGl0ID0gZ2V0SXRlcmF0b3JPZihhcnJheUxpa2UpKSkge1xuICAgICAgICAgICAgICAgIGEgPSBbXTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoKHggPSBpdC5uZXh0KCkpLCAheC5kb25lKVxuICAgICAgICAgICAgICAgICAgICBhLnB1c2goeC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJyYXlMaWtlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFthcnJheUxpa2VdO1xuICAgICAgICAgICAgaSA9IGFycmF5TGlrZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgYSA9IG5ldyBBcnJheShpKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgICAgICBhW2ldID0gYXJyYXlMaWtlW2ldO1xuICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFthcnJheUxpa2VdO1xuICAgICAgICB9XG4gICAgICAgIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICBhID0gbmV3IEFycmF5KGkpO1xuICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgYVtpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICAgIHZhciBpc0FzeW5jRnVuY3Rpb24gPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm5bU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ0FzeW5jRnVuY3Rpb24nOyB9XG4gICAgICAgIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH07XG5cbiAgICB2YXIgZGV4aWVFcnJvck5hbWVzID0gW1xuICAgICAgICAnTW9kaWZ5JyxcbiAgICAgICAgJ0J1bGsnLFxuICAgICAgICAnT3BlbkZhaWxlZCcsXG4gICAgICAgICdWZXJzaW9uQ2hhbmdlJyxcbiAgICAgICAgJ1NjaGVtYScsXG4gICAgICAgICdVcGdyYWRlJyxcbiAgICAgICAgJ0ludmFsaWRUYWJsZScsXG4gICAgICAgICdNaXNzaW5nQVBJJyxcbiAgICAgICAgJ05vU3VjaERhdGFiYXNlJyxcbiAgICAgICAgJ0ludmFsaWRBcmd1bWVudCcsXG4gICAgICAgICdTdWJUcmFuc2FjdGlvbicsXG4gICAgICAgICdVbnN1cHBvcnRlZCcsXG4gICAgICAgICdJbnRlcm5hbCcsXG4gICAgICAgICdEYXRhYmFzZUNsb3NlZCcsXG4gICAgICAgICdQcmVtYXR1cmVDb21taXQnLFxuICAgICAgICAnRm9yZWlnbkF3YWl0J1xuICAgIF07XG4gICAgdmFyIGlkYkRvbUVycm9yTmFtZXMgPSBbXG4gICAgICAgICdVbmtub3duJyxcbiAgICAgICAgJ0NvbnN0cmFpbnQnLFxuICAgICAgICAnRGF0YScsXG4gICAgICAgICdUcmFuc2FjdGlvbkluYWN0aXZlJyxcbiAgICAgICAgJ1JlYWRPbmx5JyxcbiAgICAgICAgJ1ZlcnNpb24nLFxuICAgICAgICAnTm90Rm91bmQnLFxuICAgICAgICAnSW52YWxpZFN0YXRlJyxcbiAgICAgICAgJ0ludmFsaWRBY2Nlc3MnLFxuICAgICAgICAnQWJvcnQnLFxuICAgICAgICAnVGltZW91dCcsXG4gICAgICAgICdRdW90YUV4Y2VlZGVkJyxcbiAgICAgICAgJ1N5bnRheCcsXG4gICAgICAgICdEYXRhQ2xvbmUnXG4gICAgXTtcbiAgICB2YXIgZXJyb3JMaXN0ID0gZGV4aWVFcnJvck5hbWVzLmNvbmNhdChpZGJEb21FcnJvck5hbWVzKTtcbiAgICB2YXIgZGVmYXVsdFRleHRzID0ge1xuICAgICAgICBWZXJzaW9uQ2hhbmdlZDogXCJEYXRhYmFzZSB2ZXJzaW9uIGNoYW5nZWQgYnkgb3RoZXIgZGF0YWJhc2UgY29ubmVjdGlvblwiLFxuICAgICAgICBEYXRhYmFzZUNsb3NlZDogXCJEYXRhYmFzZSBoYXMgYmVlbiBjbG9zZWRcIixcbiAgICAgICAgQWJvcnQ6IFwiVHJhbnNhY3Rpb24gYWJvcnRlZFwiLFxuICAgICAgICBUcmFuc2FjdGlvbkluYWN0aXZlOiBcIlRyYW5zYWN0aW9uIGhhcyBhbHJlYWR5IGNvbXBsZXRlZCBvciBmYWlsZWRcIixcbiAgICAgICAgTWlzc2luZ0FQSTogXCJJbmRleGVkREIgQVBJIG1pc3NpbmcuIFBsZWFzZSB2aXNpdCBodHRwczovL3Rpbnl1cmwuY29tL3kydXV2c2tiXCJcbiAgICB9O1xuICAgIGZ1bmN0aW9uIERleGllRXJyb3IobmFtZSwgbXNnKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1zZztcbiAgICB9XG4gICAgZGVyaXZlKERleGllRXJyb3IpLmZyb20oRXJyb3IpLmV4dGVuZCh7XG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm5hbWUgKyBcIjogXCIgKyB0aGlzLm1lc3NhZ2U7IH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiBnZXRNdWx0aUVycm9yTWVzc2FnZShtc2csIGZhaWx1cmVzKSB7XG4gICAgICAgIHJldHVybiBtc2cgKyBcIi4gRXJyb3JzOiBcIiArIE9iamVjdC5rZXlzKGZhaWx1cmVzKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBmYWlsdXJlc1trZXldLnRvU3RyaW5nKCk7IH0pXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh2LCBpLCBzKSB7IHJldHVybiBzLmluZGV4T2YodikgPT09IGk7IH0pXG4gICAgICAgICAgICAuam9pbignXFxuJyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIE1vZGlmeUVycm9yKG1zZywgZmFpbHVyZXMsIHN1Y2Nlc3NDb3VudCwgZmFpbGVkS2V5cykge1xuICAgICAgICB0aGlzLmZhaWx1cmVzID0gZmFpbHVyZXM7XG4gICAgICAgIHRoaXMuZmFpbGVkS2V5cyA9IGZhaWxlZEtleXM7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0NvdW50ID0gc3VjY2Vzc0NvdW50O1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNdWx0aUVycm9yTWVzc2FnZShtc2csIGZhaWx1cmVzKTtcbiAgICB9XG4gICAgZGVyaXZlKE1vZGlmeUVycm9yKS5mcm9tKERleGllRXJyb3IpO1xuICAgIGZ1bmN0aW9uIEJ1bGtFcnJvcihtc2csIGZhaWx1cmVzKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiQnVsa0Vycm9yXCI7XG4gICAgICAgIHRoaXMuZmFpbHVyZXMgPSBPYmplY3Qua2V5cyhmYWlsdXJlcykubWFwKGZ1bmN0aW9uIChwb3MpIHsgcmV0dXJuIGZhaWx1cmVzW3Bvc107IH0pO1xuICAgICAgICB0aGlzLmZhaWx1cmVzQnlQb3MgPSBmYWlsdXJlcztcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZ2V0TXVsdGlFcnJvck1lc3NhZ2UobXNnLCB0aGlzLmZhaWx1cmVzKTtcbiAgICB9XG4gICAgZGVyaXZlKEJ1bGtFcnJvcikuZnJvbShEZXhpZUVycm9yKTtcbiAgICB2YXIgZXJybmFtZXMgPSBlcnJvckxpc3QucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHsgcmV0dXJuIChvYmpbbmFtZV0gPSBuYW1lICsgXCJFcnJvclwiLCBvYmopOyB9LCB7fSk7XG4gICAgdmFyIEJhc2VFeGNlcHRpb24gPSBEZXhpZUVycm9yO1xuICAgIHZhciBleGNlcHRpb25zID0gZXJyb3JMaXN0LnJlZHVjZShmdW5jdGlvbiAob2JqLCBuYW1lKSB7XG4gICAgICAgIHZhciBmdWxsTmFtZSA9IG5hbWUgKyBcIkVycm9yXCI7XG4gICAgICAgIGZ1bmN0aW9uIERleGllRXJyb3IobXNnT3JJbm5lciwgaW5uZXIpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICAgICAgaWYgKCFtc2dPcklubmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZGVmYXVsdFRleHRzW25hbWVdIHx8IGZ1bGxOYW1lO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1zZ09ySW5uZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gXCJcIi5jb25jYXQobXNnT3JJbm5lcikuY29uY2F0KCFpbm5lciA/ICcnIDogJ1xcbiAnICsgaW5uZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXIgPSBpbm5lciB8fCBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1zZ09ySW5uZXIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gXCJcIi5jb25jYXQobXNnT3JJbm5lci5uYW1lLCBcIiBcIikuY29uY2F0KG1zZ09ySW5uZXIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lciA9IG1zZ09ySW5uZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVyaXZlKERleGllRXJyb3IpLmZyb20oQmFzZUV4Y2VwdGlvbik7XG4gICAgICAgIG9ialtuYW1lXSA9IERleGllRXJyb3I7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSwge30pO1xuICAgIGV4Y2VwdGlvbnMuU3ludGF4ID0gU3ludGF4RXJyb3I7XG4gICAgZXhjZXB0aW9ucy5UeXBlID0gVHlwZUVycm9yO1xuICAgIGV4Y2VwdGlvbnMuUmFuZ2UgPSBSYW5nZUVycm9yO1xuICAgIHZhciBleGNlcHRpb25NYXAgPSBpZGJEb21FcnJvck5hbWVzLnJlZHVjZShmdW5jdGlvbiAob2JqLCBuYW1lKSB7XG4gICAgICAgIG9ialtuYW1lICsgXCJFcnJvclwiXSA9IGV4Y2VwdGlvbnNbbmFtZV07XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSwge30pO1xuICAgIGZ1bmN0aW9uIG1hcEVycm9yKGRvbUVycm9yLCBtZXNzYWdlKSB7XG4gICAgICAgIGlmICghZG9tRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBEZXhpZUVycm9yIHx8IGRvbUVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yIHx8IGRvbUVycm9yIGluc3RhbmNlb2YgU3ludGF4RXJyb3IgfHwgIWRvbUVycm9yLm5hbWUgfHwgIWV4Y2VwdGlvbk1hcFtkb21FcnJvci5uYW1lXSlcbiAgICAgICAgICAgIHJldHVybiBkb21FcnJvcjtcbiAgICAgICAgdmFyIHJ2ID0gbmV3IGV4Y2VwdGlvbk1hcFtkb21FcnJvci5uYW1lXShtZXNzYWdlIHx8IGRvbUVycm9yLm1lc3NhZ2UsIGRvbUVycm9yKTtcbiAgICAgICAgaWYgKFwic3RhY2tcIiBpbiBkb21FcnJvcikge1xuICAgICAgICAgICAgc2V0UHJvcChydiwgXCJzdGFja1wiLCB7IGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbm5lci5zdGFjaztcbiAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9XG4gICAgdmFyIGZ1bGxOYW1lRXhjZXB0aW9ucyA9IGVycm9yTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkge1xuICAgICAgICBpZiAoW1wiU3ludGF4XCIsIFwiVHlwZVwiLCBcIlJhbmdlXCJdLmluZGV4T2YobmFtZSkgPT09IC0xKVxuICAgICAgICAgICAgb2JqW25hbWUgKyBcIkVycm9yXCJdID0gZXhjZXB0aW9uc1tuYW1lXTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gICAgZnVsbE5hbWVFeGNlcHRpb25zLk1vZGlmeUVycm9yID0gTW9kaWZ5RXJyb3I7XG4gICAgZnVsbE5hbWVFeGNlcHRpb25zLkRleGllRXJyb3IgPSBEZXhpZUVycm9yO1xuICAgIGZ1bGxOYW1lRXhjZXB0aW9ucy5CdWxrRXJyb3IgPSBCdWxrRXJyb3I7XG5cbiAgICBmdW5jdGlvbiBub3AoKSB7IH1cbiAgICBmdW5jdGlvbiBtaXJyb3IodmFsKSB7IHJldHVybiB2YWw7IH1cbiAgICBmdW5jdGlvbiBwdXJlRnVuY3Rpb25DaGFpbihmMSwgZjIpIHtcbiAgICAgICAgaWYgKGYxID09IG51bGwgfHwgZjEgPT09IG1pcnJvcilcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiBmMihmMSh2YWwpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2FsbEJvdGgob24xLCBvbjIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9uMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgb24yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhvb2tDcmVhdGluZ0NoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBmMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHJlcyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IHJlcztcbiAgICAgICAgICAgIHZhciBvbnN1Y2Nlc3MgPSB0aGlzLm9uc3VjY2VzcyxcbiAgICAgICAgICAgIG9uZXJyb3IgPSB0aGlzLm9uZXJyb3I7XG4gICAgICAgICAgICB0aGlzLm9uc3VjY2VzcyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgdmFyIHJlczIgPSBmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKG9uc3VjY2VzcylcbiAgICAgICAgICAgICAgICB0aGlzLm9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzID8gY2FsbEJvdGgob25zdWNjZXNzLCB0aGlzLm9uc3VjY2VzcykgOiBvbnN1Y2Nlc3M7XG4gICAgICAgICAgICBpZiAob25lcnJvcilcbiAgICAgICAgICAgICAgICB0aGlzLm9uZXJyb3IgPSB0aGlzLm9uZXJyb3IgPyBjYWxsQm90aChvbmVycm9yLCB0aGlzLm9uZXJyb3IpIDogb25lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiByZXMyICE9PSB1bmRlZmluZWQgPyByZXMyIDogcmVzO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBob29rRGVsZXRpbmdDaGFpbihmMSwgZjIpIHtcbiAgICAgICAgaWYgKGYxID09PSBub3ApXG4gICAgICAgICAgICByZXR1cm4gZjI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgb25lcnJvciA9IHRoaXMub25lcnJvcjtcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAob25zdWNjZXNzKVxuICAgICAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgICAgIGlmIChvbmVycm9yKVxuICAgICAgICAgICAgICAgIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBob29rVXBkYXRpbmdDaGFpbihmMSwgZjIpIHtcbiAgICAgICAgaWYgKGYxID09PSBub3ApXG4gICAgICAgICAgICByZXR1cm4gZjI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobW9kaWZpY2F0aW9ucykge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBleHRlbmQobW9kaWZpY2F0aW9ucywgcmVzKTtcbiAgICAgICAgICAgIHZhciBvbnN1Y2Nlc3MgPSB0aGlzLm9uc3VjY2VzcyxcbiAgICAgICAgICAgIG9uZXJyb3IgPSB0aGlzLm9uZXJyb3I7XG4gICAgICAgICAgICB0aGlzLm9uc3VjY2VzcyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgdmFyIHJlczIgPSBmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKG9uc3VjY2VzcylcbiAgICAgICAgICAgICAgICB0aGlzLm9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzID8gY2FsbEJvdGgob25zdWNjZXNzLCB0aGlzLm9uc3VjY2VzcykgOiBvbnN1Y2Nlc3M7XG4gICAgICAgICAgICBpZiAob25lcnJvcilcbiAgICAgICAgICAgICAgICB0aGlzLm9uZXJyb3IgPSB0aGlzLm9uZXJyb3IgPyBjYWxsQm90aChvbmVycm9yLCB0aGlzLm9uZXJyb3IpIDogb25lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiByZXMgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgKHJlczIgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHJlczIpIDpcbiAgICAgICAgICAgICAgICAoZXh0ZW5kKHJlcywgcmVzMikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiByZXZlcnNlU3RvcHBhYmxlRXZlbnRDaGFpbihmMSwgZjIpIHtcbiAgICAgICAgaWYgKGYxID09PSBub3ApXG4gICAgICAgICAgICByZXR1cm4gZjI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb21pc2FibGVDaGFpbihmMSwgZjIpIHtcbiAgICAgICAgaWYgKGYxID09PSBub3ApXG4gICAgICAgICAgICByZXR1cm4gZjI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gZjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChyZXMgJiYgdHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoaXogPSB0aGlzLCBpID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShpKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmMi5hcHBseSh0aGl6LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciBkZWJ1ZyA9IHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgL14oaHR0cHxodHRwcyk6XFwvXFwvKGxvY2FsaG9zdHwxMjdcXC4wXFwuMFxcLjEpLy50ZXN0KGxvY2F0aW9uLmhyZWYpO1xuICAgIGZ1bmN0aW9uIHNldERlYnVnKHZhbHVlLCBmaWx0ZXIpIHtcbiAgICAgICAgZGVidWcgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICB2YXIgSU5URVJOQUwgPSB7fTtcbiAgICB2YXIgWk9ORV9FQ0hPX0xJTUlUID0gMTAwLCBfYSQxID0gdHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnID9cbiAgICAgICAgW10gOlxuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdsb2JhbFAgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY3J5cHRvID09PSAndW5kZWZpbmVkJyB8fCAhY3J5cHRvLnN1YnRsZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gW2dsb2JhbFAsIGdldFByb3RvKGdsb2JhbFApLCBnbG9iYWxQXTtcbiAgICAgICAgICAgIHZhciBuYXRpdmVQID0gY3J5cHRvLnN1YnRsZS5kaWdlc3QoXCJTSEEtNTEyXCIsIG5ldyBVaW50OEFycmF5KFswXSkpO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBuYXRpdmVQLFxuICAgICAgICAgICAgICAgIGdldFByb3RvKG5hdGl2ZVApLFxuICAgICAgICAgICAgICAgIGdsb2JhbFBcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pKCksIHJlc29sdmVkTmF0aXZlUHJvbWlzZSA9IF9hJDFbMF0sIG5hdGl2ZVByb21pc2VQcm90byA9IF9hJDFbMV0sIHJlc29sdmVkR2xvYmFsUHJvbWlzZSA9IF9hJDFbMl0sIG5hdGl2ZVByb21pc2VUaGVuID0gbmF0aXZlUHJvbWlzZVByb3RvICYmIG5hdGl2ZVByb21pc2VQcm90by50aGVuO1xuICAgIHZhciBOYXRpdmVQcm9taXNlID0gcmVzb2x2ZWROYXRpdmVQcm9taXNlICYmIHJlc29sdmVkTmF0aXZlUHJvbWlzZS5jb25zdHJ1Y3RvcjtcbiAgICB2YXIgcGF0Y2hHbG9iYWxQcm9taXNlID0gISFyZXNvbHZlZEdsb2JhbFByb21pc2U7XG4gICAgZnVuY3Rpb24gc2NoZWR1bGVQaHlzaWNhbFRpY2soKSB7XG4gICAgICAgIHF1ZXVlTWljcm90YXNrKHBoeXNpY2FsVGljayk7XG4gICAgfVxuICAgIHZhciBhc2FwID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBhcmdzKSB7XG4gICAgICAgIG1pY3JvdGlja1F1ZXVlLnB1c2goW2NhbGxiYWNrLCBhcmdzXSk7XG4gICAgICAgIGlmIChuZWVkc05ld1BoeXNpY2FsVGljaykge1xuICAgICAgICAgICAgc2NoZWR1bGVQaHlzaWNhbFRpY2soKTtcbiAgICAgICAgICAgIG5lZWRzTmV3UGh5c2ljYWxUaWNrID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBpc091dHNpZGVNaWNyb1RpY2sgPSB0cnVlLFxuICAgIG5lZWRzTmV3UGh5c2ljYWxUaWNrID0gdHJ1ZSxcbiAgICB1bmhhbmRsZWRFcnJvcnMgPSBbXSxcbiAgICByZWplY3RpbmdFcnJvcnMgPSBbXSxcbiAgICByZWplY3Rpb25NYXBwZXIgPSBtaXJyb3I7XG4gICAgdmFyIGdsb2JhbFBTRCA9IHtcbiAgICAgICAgaWQ6ICdnbG9iYWwnLFxuICAgICAgICBnbG9iYWw6IHRydWUsXG4gICAgICAgIHJlZjogMCxcbiAgICAgICAgdW5oYW5kbGVkczogW10sXG4gICAgICAgIG9udW5oYW5kbGVkOiBub3AsXG4gICAgICAgIHBncDogZmFsc2UsXG4gICAgICAgIGVudjoge30sXG4gICAgICAgIGZpbmFsaXplOiBub3BcbiAgICB9O1xuICAgIHZhciBQU0QgPSBnbG9iYWxQU0Q7XG4gICAgdmFyIG1pY3JvdGlja1F1ZXVlID0gW107XG4gICAgdmFyIG51bVNjaGVkdWxlZENhbGxzID0gMDtcbiAgICB2YXIgdGlja0ZpbmFsaXplcnMgPSBbXTtcbiAgICBmdW5jdGlvbiBEZXhpZVByb21pc2UoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzICE9PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2VzIG11c3QgYmUgY29uc3RydWN0ZWQgdmlhIG5ldycpO1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fbGliID0gZmFsc2U7XG4gICAgICAgIHZhciBwc2QgPSAodGhpcy5fUFNEID0gUFNEKTtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgaWYgKGZuICE9PSBJTlRFUk5BTClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgYSBmdW5jdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgaGFuZGxlUmVqZWN0aW9uKHRoaXMsIHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdGF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gbnVsbDtcbiAgICAgICAgKytwc2QucmVmO1xuICAgICAgICBleGVjdXRlUHJvbWlzZVRhc2sodGhpcywgZm4pO1xuICAgIH1cbiAgICB2YXIgdGhlblByb3AgPSB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBzZCA9IFBTRCwgbWljcm9UYXNrSWQgPSB0b3RhbEVjaG9lcztcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBwb3NzaWJsZUF3YWl0ID0gIXBzZC5nbG9iYWwgJiYgKHBzZCAhPT0gUFNEIHx8IG1pY3JvVGFza0lkICE9PSB0b3RhbEVjaG9lcyk7XG4gICAgICAgICAgICAgICAgdmFyIGNsZWFudXAgPSBwb3NzaWJsZUF3YWl0ICYmICFkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgIHZhciBydiA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wYWdhdGVUb0xpc3RlbmVyKF90aGlzLCBuZXcgTGlzdGVuZXIobmF0aXZlQXdhaXRDb21wYXRpYmxlV3JhcChvbkZ1bGZpbGxlZCwgcHNkLCBwb3NzaWJsZUF3YWl0LCBjbGVhbnVwKSwgbmF0aXZlQXdhaXRDb21wYXRpYmxlV3JhcChvblJlamVjdGVkLCBwc2QsIHBvc3NpYmxlQXdhaXQsIGNsZWFudXApLCByZXNvbHZlLCByZWplY3QsIHBzZCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jb25zb2xlVGFzaylcbiAgICAgICAgICAgICAgICAgICAgcnYuX2NvbnNvbGVUYXNrID0gdGhpcy5fY29uc29sZVRhc2s7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhlbi5wcm90b3R5cGUgPSBJTlRFUk5BTDtcbiAgICAgICAgICAgIHJldHVybiB0aGVuO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgc2V0UHJvcCh0aGlzLCAndGhlbicsIHZhbHVlICYmIHZhbHVlLnByb3RvdHlwZSA9PT0gSU5URVJOQUwgP1xuICAgICAgICAgICAgICAgIHRoZW5Qcm9wIDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IHRoZW5Qcm9wLnNldFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBwcm9wcyhEZXhpZVByb21pc2UucHJvdG90eXBlLCB7XG4gICAgICAgIHRoZW46IHRoZW5Qcm9wLFxuICAgICAgICBfdGhlbjogZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gICAgICAgICAgICBwcm9wYWdhdGVUb0xpc3RlbmVyKHRoaXMsIG5ldyBMaXN0ZW5lcihudWxsLCBudWxsLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgUFNEKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGNoOiBmdW5jdGlvbiAob25SZWplY3RlZCkge1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcbiAgICAgICAgICAgIHZhciB0eXBlID0gYXJndW1lbnRzWzBdLCBoYW5kbGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nID8gdGhpcy50aGVuKG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyIGluc3RhbmNlb2YgdHlwZSA/IGhhbmRsZXIoZXJyKSA6IFByb21pc2VSZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiB0aGlzLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyICYmIGVyci5uYW1lID09PSB0eXBlID8gaGFuZGxlcihlcnIpIDogUHJvbWlzZVJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBmaW5hbGx5OiBmdW5jdGlvbiAob25GaW5hbGx5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZShvbkZpbmFsbHkoKSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFByb21pc2VSZWplY3QoZXJyKTsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dDogZnVuY3Rpb24gKG1zLCBtc2cpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gbXMgPCBJbmZpbml0eSA/XG4gICAgICAgICAgICAgICAgbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlamVjdChuZXcgZXhjZXB0aW9ucy5UaW1lb3V0KG1zZykpOyB9LCBtcyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KS5maW5hbGx5KGNsZWFyVGltZW91dC5iaW5kKG51bGwsIGhhbmRsZSkpO1xuICAgICAgICAgICAgICAgIH0pIDogdGhpcztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpXG4gICAgICAgIHNldFByb3AoRGV4aWVQcm9taXNlLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCAnRGV4aWUuUHJvbWlzZScpO1xuICAgIGdsb2JhbFBTRC5lbnYgPSBzbmFwU2hvdCgpO1xuICAgIGZ1bmN0aW9uIExpc3RlbmVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXNvbHZlLCByZWplY3QsIHpvbmUpIHtcbiAgICAgICAgdGhpcy5vbkZ1bGZpbGxlZCA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogbnVsbDtcbiAgICAgICAgdGhpcy5vblJlamVjdGVkID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicgPyBvblJlamVjdGVkIDogbnVsbDtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIHRoaXMucHNkID0gem9uZTtcbiAgICB9XG4gICAgcHJvcHMoRGV4aWVQcm9taXNlLCB7XG4gICAgICAgIGFsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGdldEFycmF5T2YuYXBwbHkobnVsbCwgYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIC5tYXAob25Qb3NzaWJsZVBhcmFsbGVsbEFzeW5jKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XG4gICAgICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IHZhbHVlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGEsIGkpIHsgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKGEpLnRoZW4oZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzW2ldID0geDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEtLXJlbWFpbmluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWVzKTtcbiAgICAgICAgICAgICAgICB9LCByZWplY3QpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERleGllUHJvbWlzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgcnYgPSBuZXcgRGV4aWVQcm9taXNlKElOVEVSTkFMLCB0cnVlLCB2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdDogUHJvbWlzZVJlamVjdCxcbiAgICAgICAgcmFjZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGdldEFycmF5T2YuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5tYXAob25Qb3NzaWJsZVBhcmFsbGVsbEFzeW5jKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgUFNEOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBTRDsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBQU0QgPSB2YWx1ZTsgfVxuICAgICAgICB9LFxuICAgICAgICB0b3RhbEVjaG9lczogeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRvdGFsRWNob2VzOyB9IH0sXG4gICAgICAgIG5ld1BTRDogbmV3U2NvcGUsXG4gICAgICAgIHVzZVBTRDogdXNlUFNELFxuICAgICAgICBzY2hlZHVsZXI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYXNhcDsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7IGFzYXAgPSB2YWx1ZTsgfVxuICAgICAgICB9LFxuICAgICAgICByZWplY3Rpb25NYXBwZXI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVqZWN0aW9uTWFwcGVyOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHsgcmVqZWN0aW9uTWFwcGVyID0gdmFsdWU7IH1cbiAgICAgICAgfSxcbiAgICAgICAgZm9sbG93OiBmdW5jdGlvbiAoZm4sIHpvbmVQcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwc2QgPSBQU0Q7XG4gICAgICAgICAgICAgICAgICAgIHBzZC51bmhhbmRsZWRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHBzZC5vbnVuaGFuZGxlZCA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICAgICAgcHNkLmZpbmFsaXplID0gY2FsbEJvdGgoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hdF9lbmRfb2ZfdGhpc19vcl9uZXh0X3BoeXNpY2FsX3RpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVuaGFuZGxlZHMubGVuZ3RoID09PSAwID8gcmVzb2x2ZSgpIDogcmVqZWN0KF90aGlzLnVuaGFuZGxlZHNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHBzZC5maW5hbGl6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfSwgem9uZVByb3BzLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoTmF0aXZlUHJvbWlzZSkge1xuICAgICAgICBpZiAoTmF0aXZlUHJvbWlzZS5hbGxTZXR0bGVkKVxuICAgICAgICAgICAgc2V0UHJvcChEZXhpZVByb21pc2UsIFwiYWxsU2V0dGxlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3NpYmxlUHJvbWlzZXMgPSBnZXRBcnJheU9mLmFwcGx5KG51bGwsIGFyZ3VtZW50cykubWFwKG9uUG9zc2libGVQYXJhbGxlbGxBc3luYyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3NpYmxlUHJvbWlzZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSBwb3NzaWJsZVByb21pc2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBuZXcgQXJyYXkocmVtYWluaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zc2libGVQcm9taXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChwLCBpKSB7IHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZShwKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gcmVzdWx0c1tpXSA9IHsgc3RhdHVzOiBcImZ1bGZpbGxlZFwiLCB2YWx1ZTogdmFsdWUgfTsgfSwgZnVuY3Rpb24gKHJlYXNvbikgeyByZXR1cm4gcmVzdWx0c1tpXSA9IHsgc3RhdHVzOiBcInJlamVjdGVkXCIsIHJlYXNvbjogcmVhc29uIH07IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHJlc3VsdHMpOyB9KTsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKE5hdGl2ZVByb21pc2UuYW55ICYmIHR5cGVvZiBBZ2dyZWdhdGVFcnJvciAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICBzZXRQcm9wKERleGllUHJvbWlzZSwgXCJhbnlcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBwb3NzaWJsZVByb21pc2VzID0gZ2V0QXJyYXlPZi5hcHBseShudWxsLCBhcmd1bWVudHMpLm1hcChvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3NpYmxlUHJvbWlzZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBBZ2dyZWdhdGVFcnJvcihbXSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gcG9zc2libGVQcm9taXNlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IG5ldyBBcnJheShyZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZVByb21pc2VzLmZvckVhY2goZnVuY3Rpb24gKHAsIGkpIHsgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHApLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiByZXNvbHZlKHZhbHVlKTsgfSwgZnVuY3Rpb24gKGZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVzW2ldID0gZmFpbHVyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLS1yZW1haW5pbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBBZ2dyZWdhdGVFcnJvcihmYWlsdXJlcykpO1xuICAgICAgICAgICAgICAgICAgICB9KTsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKE5hdGl2ZVByb21pc2Uud2l0aFJlc29sdmVycylcbiAgICAgICAgICAgIERleGllUHJvbWlzZS53aXRoUmVzb2x2ZXJzID0gTmF0aXZlUHJvbWlzZS53aXRoUmVzb2x2ZXJzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBleGVjdXRlUHJvbWlzZVRhc2socHJvbWlzZSwgZm4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gcHJvbWlzZSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQSBwcm9taXNlIGNhbm5vdCBiZSByZXNvbHZlZCB3aXRoIGl0c2VsZi4nKTtcbiAgICAgICAgICAgICAgICB2YXIgc2hvdWxkRXhlY3V0ZVRpY2sgPSBwcm9taXNlLl9saWIgJiYgYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBleGVjdXRlUHJvbWlzZVRhc2socHJvbWlzZSwgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiBEZXhpZVByb21pc2UgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLl90aGVuKHJlc29sdmUsIHJlamVjdCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLl9zdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZEV4ZWN1dGVUaWNrKVxuICAgICAgICAgICAgICAgICAgICBlbmRNaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgfSwgaGFuZGxlUmVqZWN0aW9uLmJpbmQobnVsbCwgcHJvbWlzZSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgaGFuZGxlUmVqZWN0aW9uKHByb21pc2UsIGV4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVSZWplY3Rpb24ocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgICAgIHJlamVjdGluZ0Vycm9ycy5wdXNoKHJlYXNvbik7XG4gICAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHNob3VsZEV4ZWN1dGVUaWNrID0gcHJvbWlzZS5fbGliICYmIGJlZ2luTWljcm9UaWNrU2NvcGUoKTtcbiAgICAgICAgcmVhc29uID0gcmVqZWN0aW9uTWFwcGVyKHJlYXNvbik7XG4gICAgICAgIHByb21pc2UuX3N0YXRlID0gZmFsc2U7XG4gICAgICAgIHByb21pc2UuX3ZhbHVlID0gcmVhc29uO1xuICAgICAgICBhZGRQb3NzaWJseVVuaGFuZGxlZEVycm9yKHByb21pc2UpO1xuICAgICAgICBwcm9wYWdhdGVBbGxMaXN0ZW5lcnMocHJvbWlzZSk7XG4gICAgICAgIGlmIChzaG91bGRFeGVjdXRlVGljaylcbiAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSBwcm9taXNlLl9saXN0ZW5lcnM7XG4gICAgICAgIHByb21pc2UuX2xpc3RlbmVycyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBwcm9wYWdhdGVUb0xpc3RlbmVyKHByb21pc2UsIGxpc3RlbmVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBzZCA9IHByb21pc2UuX1BTRDtcbiAgICAgICAgLS1wc2QucmVmIHx8IHBzZC5maW5hbGl6ZSgpO1xuICAgICAgICBpZiAobnVtU2NoZWR1bGVkQ2FsbHMgPT09IDApIHtcbiAgICAgICAgICAgICsrbnVtU2NoZWR1bGVkQ2FsbHM7XG4gICAgICAgICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoLS1udW1TY2hlZHVsZWRDYWxscyA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgZmluYWxpemVQaHlzaWNhbFRpY2soKTtcbiAgICAgICAgICAgIH0sIFtdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9wYWdhdGVUb0xpc3RlbmVyKHByb21pc2UsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcHJvbWlzZS5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYiA9IHByb21pc2UuX3N0YXRlID8gbGlzdGVuZXIub25GdWxmaWxsZWQgOiBsaXN0ZW5lci5vblJlamVjdGVkO1xuICAgICAgICBpZiAoY2IgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiAocHJvbWlzZS5fc3RhdGUgPyBsaXN0ZW5lci5yZXNvbHZlIDogbGlzdGVuZXIucmVqZWN0KShwcm9taXNlLl92YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgKytsaXN0ZW5lci5wc2QucmVmO1xuICAgICAgICArK251bVNjaGVkdWxlZENhbGxzO1xuICAgICAgICBhc2FwKGNhbGxMaXN0ZW5lciwgW2NiLCBwcm9taXNlLCBsaXN0ZW5lcl0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjYWxsTGlzdGVuZXIoY2IsIHByb21pc2UsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcmV0LCB2YWx1ZSA9IHByb21pc2UuX3ZhbHVlO1xuICAgICAgICAgICAgaWYgKCFwcm9taXNlLl9zdGF0ZSAmJiByZWplY3RpbmdFcnJvcnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJlamVjdGluZ0Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgcmV0ID0gZGVidWcgJiYgcHJvbWlzZS5fY29uc29sZVRhc2sgPyBwcm9taXNlLl9jb25zb2xlVGFzay5ydW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY2IodmFsdWUpOyB9KSA6IGNiKHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghcHJvbWlzZS5fc3RhdGUgJiYgcmVqZWN0aW5nRXJyb3JzLmluZGV4T2YodmFsdWUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIG1hcmtFcnJvckFzSGFuZGxlZChwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpc3RlbmVyLnJlc29sdmUocmV0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbGlzdGVuZXIucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKC0tbnVtU2NoZWR1bGVkQ2FsbHMgPT09IDApXG4gICAgICAgICAgICAgICAgZmluYWxpemVQaHlzaWNhbFRpY2soKTtcbiAgICAgICAgICAgIC0tbGlzdGVuZXIucHNkLnJlZiB8fCBsaXN0ZW5lci5wc2QuZmluYWxpemUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBwaHlzaWNhbFRpY2soKSB7XG4gICAgICAgIHVzZVBTRChnbG9iYWxQU0QsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJlZ2luTWljcm9UaWNrU2NvcGUoKSAmJiBlbmRNaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmVnaW5NaWNyb1RpY2tTY29wZSgpIHtcbiAgICAgICAgdmFyIHdhc1Jvb3RFeGVjID0gaXNPdXRzaWRlTWljcm9UaWNrO1xuICAgICAgICBpc091dHNpZGVNaWNyb1RpY2sgPSBmYWxzZTtcbiAgICAgICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHdhc1Jvb3RFeGVjO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbmRNaWNyb1RpY2tTY29wZSgpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrcywgaSwgbDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgd2hpbGUgKG1pY3JvdGlja1F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3MgPSBtaWNyb3RpY2tRdWV1ZTtcbiAgICAgICAgICAgICAgICBtaWNyb3RpY2tRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIGwgPSBjYWxsYmFja3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYWxsYmFja3NbaV07XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMF0uYXBwbHkobnVsbCwgaXRlbVsxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChtaWNyb3RpY2tRdWV1ZS5sZW5ndGggPiAwKTtcbiAgICAgICAgaXNPdXRzaWRlTWljcm9UaWNrID0gdHJ1ZTtcbiAgICAgICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSB0cnVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmaW5hbGl6ZVBoeXNpY2FsVGljaygpIHtcbiAgICAgICAgdmFyIHVuaGFuZGxlZEVycnMgPSB1bmhhbmRsZWRFcnJvcnM7XG4gICAgICAgIHVuaGFuZGxlZEVycm9ycyA9IFtdO1xuICAgICAgICB1bmhhbmRsZWRFcnJzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIHAuX1BTRC5vbnVuaGFuZGxlZC5jYWxsKG51bGwsIHAuX3ZhbHVlLCBwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBmaW5hbGl6ZXJzID0gdGlja0ZpbmFsaXplcnMuc2xpY2UoMCk7XG4gICAgICAgIHZhciBpID0gZmluYWxpemVycy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpKVxuICAgICAgICAgICAgZmluYWxpemVyc1stLWldKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJ1bl9hdF9lbmRfb2ZfdGhpc19vcl9uZXh0X3BoeXNpY2FsX3RpY2soZm4pIHtcbiAgICAgICAgZnVuY3Rpb24gZmluYWxpemVyKCkge1xuICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIHRpY2tGaW5hbGl6ZXJzLnNwbGljZSh0aWNrRmluYWxpemVycy5pbmRleE9mKGZpbmFsaXplciksIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRpY2tGaW5hbGl6ZXJzLnB1c2goZmluYWxpemVyKTtcbiAgICAgICAgKytudW1TY2hlZHVsZWRDYWxscztcbiAgICAgICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoLS1udW1TY2hlZHVsZWRDYWxscyA9PT0gMClcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgICAgICB9LCBbXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZFBvc3NpYmx5VW5oYW5kbGVkRXJyb3IocHJvbWlzZSkge1xuICAgICAgICBpZiAoIXVuaGFuZGxlZEVycm9ycy5zb21lKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLl92YWx1ZSA9PT0gcHJvbWlzZS5fdmFsdWU7IH0pKVxuICAgICAgICAgICAgdW5oYW5kbGVkRXJyb3JzLnB1c2gocHJvbWlzZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hcmtFcnJvckFzSGFuZGxlZChwcm9taXNlKSB7XG4gICAgICAgIHZhciBpID0gdW5oYW5kbGVkRXJyb3JzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGkpXG4gICAgICAgICAgICBpZiAodW5oYW5kbGVkRXJyb3JzWy0taV0uX3ZhbHVlID09PSBwcm9taXNlLl92YWx1ZSkge1xuICAgICAgICAgICAgICAgIHVuaGFuZGxlZEVycm9ycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBQcm9taXNlUmVqZWN0KHJlYXNvbikge1xuICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShJTlRFUk5BTCwgZmFsc2UsIHJlYXNvbik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHdyYXAoZm4sIGVycm9yQ2F0Y2hlcikge1xuICAgICAgICB2YXIgcHNkID0gUFNEO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdhc1Jvb3RFeGVjID0gYmVnaW5NaWNyb1RpY2tTY29wZSgpLCBvdXRlclNjb3BlID0gUFNEO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2hUb1pvbmUocHNkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JDYXRjaGVyICYmIGVycm9yQ2F0Y2hlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHN3aXRjaFRvWm9uZShvdXRlclNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKHdhc1Jvb3RFeGVjKVxuICAgICAgICAgICAgICAgICAgICBlbmRNaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgdGFzayA9IHsgYXdhaXRzOiAwLCBlY2hvZXM6IDAsIGlkOiAwIH07XG4gICAgdmFyIHRhc2tDb3VudGVyID0gMDtcbiAgICB2YXIgem9uZVN0YWNrID0gW107XG4gICAgdmFyIHpvbmVFY2hvZXMgPSAwO1xuICAgIHZhciB0b3RhbEVjaG9lcyA9IDA7XG4gICAgdmFyIHpvbmVfaWRfY291bnRlciA9IDA7XG4gICAgZnVuY3Rpb24gbmV3U2NvcGUoZm4sIHByb3BzLCBhMSwgYTIpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IFBTRCwgcHNkID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQpO1xuICAgICAgICBwc2QucGFyZW50ID0gcGFyZW50O1xuICAgICAgICBwc2QucmVmID0gMDtcbiAgICAgICAgcHNkLmdsb2JhbCA9IGZhbHNlO1xuICAgICAgICBwc2QuaWQgPSArK3pvbmVfaWRfY291bnRlcjtcbiAgICAgICAgZ2xvYmFsUFNELmVudjtcbiAgICAgICAgcHNkLmVudiA9IHBhdGNoR2xvYmFsUHJvbWlzZSA/IHtcbiAgICAgICAgICAgIFByb21pc2U6IERleGllUHJvbWlzZSxcbiAgICAgICAgICAgIFByb21pc2VQcm9wOiB7IHZhbHVlOiBEZXhpZVByb21pc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSxcbiAgICAgICAgICAgIGFsbDogRGV4aWVQcm9taXNlLmFsbCxcbiAgICAgICAgICAgIHJhY2U6IERleGllUHJvbWlzZS5yYWNlLFxuICAgICAgICAgICAgYWxsU2V0dGxlZDogRGV4aWVQcm9taXNlLmFsbFNldHRsZWQsXG4gICAgICAgICAgICBhbnk6IERleGllUHJvbWlzZS5hbnksXG4gICAgICAgICAgICByZXNvbHZlOiBEZXhpZVByb21pc2UucmVzb2x2ZSxcbiAgICAgICAgICAgIHJlamVjdDogRGV4aWVQcm9taXNlLnJlamVjdCxcbiAgICAgICAgfSA6IHt9O1xuICAgICAgICBpZiAocHJvcHMpXG4gICAgICAgICAgICBleHRlbmQocHNkLCBwcm9wcyk7XG4gICAgICAgICsrcGFyZW50LnJlZjtcbiAgICAgICAgcHNkLmZpbmFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLS10aGlzLnBhcmVudC5yZWYgfHwgdGhpcy5wYXJlbnQuZmluYWxpemUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJ2ID0gdXNlUFNEKHBzZCwgZm4sIGExLCBhMik7XG4gICAgICAgIGlmIChwc2QucmVmID09PSAwKVxuICAgICAgICAgICAgcHNkLmZpbmFsaXplKCk7XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKSB7XG4gICAgICAgIGlmICghdGFzay5pZClcbiAgICAgICAgICAgIHRhc2suaWQgPSArK3Rhc2tDb3VudGVyO1xuICAgICAgICArK3Rhc2suYXdhaXRzO1xuICAgICAgICB0YXNrLmVjaG9lcyArPSBaT05FX0VDSE9fTElNSVQ7XG4gICAgICAgIHJldHVybiB0YXNrLmlkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpIHtcbiAgICAgICAgaWYgKCF0YXNrLmF3YWl0cylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKC0tdGFzay5hd2FpdHMgPT09IDApXG4gICAgICAgICAgICB0YXNrLmlkID0gMDtcbiAgICAgICAgdGFzay5lY2hvZXMgPSB0YXNrLmF3YWl0cyAqIFpPTkVfRUNIT19MSU1JVDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgoJycgKyBuYXRpdmVQcm9taXNlVGhlbikuaW5kZXhPZignW25hdGl2ZSBjb2RlXScpID09PSAtMSkge1xuICAgICAgICBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cyA9IGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzID0gbm9wO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMocG9zc2libGVQcm9taXNlKSB7XG4gICAgICAgIGlmICh0YXNrLmVjaG9lcyAmJiBwb3NzaWJsZVByb21pc2UgJiYgcG9zc2libGVQcm9taXNlLmNvbnN0cnVjdG9yID09PSBOYXRpdmVQcm9taXNlKSB7XG4gICAgICAgICAgICBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3NpYmxlUHJvbWlzZS50aGVuKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvc3NpYmxlUHJvbWlzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gem9uZUVudGVyRWNobyh0YXJnZXRab25lKSB7XG4gICAgICAgICsrdG90YWxFY2hvZXM7XG4gICAgICAgIGlmICghdGFzay5lY2hvZXMgfHwgLS10YXNrLmVjaG9lcyA9PT0gMCkge1xuICAgICAgICAgICAgdGFzay5lY2hvZXMgPSB0YXNrLmF3YWl0cyA9IHRhc2suaWQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHpvbmVTdGFjay5wdXNoKFBTRCk7XG4gICAgICAgIHN3aXRjaFRvWm9uZSh0YXJnZXRab25lLCB0cnVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gem9uZUxlYXZlRWNobygpIHtcbiAgICAgICAgdmFyIHpvbmUgPSB6b25lU3RhY2tbem9uZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICB6b25lU3RhY2sucG9wKCk7XG4gICAgICAgIHN3aXRjaFRvWm9uZSh6b25lLCBmYWxzZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN3aXRjaFRvWm9uZSh0YXJnZXRab25lLCBiRW50ZXJpbmdab25lKSB7XG4gICAgICAgIHZhciBjdXJyZW50Wm9uZSA9IFBTRDtcbiAgICAgICAgaWYgKGJFbnRlcmluZ1pvbmUgPyB0YXNrLmVjaG9lcyAmJiAoIXpvbmVFY2hvZXMrKyB8fCB0YXJnZXRab25lICE9PSBQU0QpIDogem9uZUVjaG9lcyAmJiAoIS0tem9uZUVjaG9lcyB8fCB0YXJnZXRab25lICE9PSBQU0QpKSB7XG4gICAgICAgICAgICBxdWV1ZU1pY3JvdGFzayhiRW50ZXJpbmdab25lID8gem9uZUVudGVyRWNoby5iaW5kKG51bGwsIHRhcmdldFpvbmUpIDogem9uZUxlYXZlRWNobyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldFpvbmUgPT09IFBTRClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgUFNEID0gdGFyZ2V0Wm9uZTtcbiAgICAgICAgaWYgKGN1cnJlbnRab25lID09PSBnbG9iYWxQU0QpXG4gICAgICAgICAgICBnbG9iYWxQU0QuZW52ID0gc25hcFNob3QoKTtcbiAgICAgICAgaWYgKHBhdGNoR2xvYmFsUHJvbWlzZSkge1xuICAgICAgICAgICAgdmFyIEdsb2JhbFByb21pc2UgPSBnbG9iYWxQU0QuZW52LlByb21pc2U7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RW52ID0gdGFyZ2V0Wm9uZS5lbnY7XG4gICAgICAgICAgICBpZiAoY3VycmVudFpvbmUuZ2xvYmFsIHx8IHRhcmdldFpvbmUuZ2xvYmFsKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9nbG9iYWwsICdQcm9taXNlJywgdGFyZ2V0RW52LlByb21pc2VQcm9wKTtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLmFsbCA9IHRhcmdldEVudi5hbGw7XG4gICAgICAgICAgICAgICAgR2xvYmFsUHJvbWlzZS5yYWNlID0gdGFyZ2V0RW52LnJhY2U7XG4gICAgICAgICAgICAgICAgR2xvYmFsUHJvbWlzZS5yZXNvbHZlID0gdGFyZ2V0RW52LnJlc29sdmU7XG4gICAgICAgICAgICAgICAgR2xvYmFsUHJvbWlzZS5yZWplY3QgPSB0YXJnZXRFbnYucmVqZWN0O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbnYuYWxsU2V0dGxlZClcbiAgICAgICAgICAgICAgICAgICAgR2xvYmFsUHJvbWlzZS5hbGxTZXR0bGVkID0gdGFyZ2V0RW52LmFsbFNldHRsZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVudi5hbnkpXG4gICAgICAgICAgICAgICAgICAgIEdsb2JhbFByb21pc2UuYW55ID0gdGFyZ2V0RW52LmFueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzbmFwU2hvdCgpIHtcbiAgICAgICAgdmFyIEdsb2JhbFByb21pc2UgPSBfZ2xvYmFsLlByb21pc2U7XG4gICAgICAgIHJldHVybiBwYXRjaEdsb2JhbFByb21pc2UgPyB7XG4gICAgICAgICAgICBQcm9taXNlOiBHbG9iYWxQcm9taXNlLFxuICAgICAgICAgICAgUHJvbWlzZVByb3A6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2dsb2JhbCwgXCJQcm9taXNlXCIpLFxuICAgICAgICAgICAgYWxsOiBHbG9iYWxQcm9taXNlLmFsbCxcbiAgICAgICAgICAgIHJhY2U6IEdsb2JhbFByb21pc2UucmFjZSxcbiAgICAgICAgICAgIGFsbFNldHRsZWQ6IEdsb2JhbFByb21pc2UuYWxsU2V0dGxlZCxcbiAgICAgICAgICAgIGFueTogR2xvYmFsUHJvbWlzZS5hbnksXG4gICAgICAgICAgICByZXNvbHZlOiBHbG9iYWxQcm9taXNlLnJlc29sdmUsXG4gICAgICAgICAgICByZWplY3Q6IEdsb2JhbFByb21pc2UucmVqZWN0LFxuICAgICAgICB9IDoge307XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVzZVBTRChwc2QsIGZuLCBhMSwgYTIsIGEzKSB7XG4gICAgICAgIHZhciBvdXRlclNjb3BlID0gUFNEO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3dpdGNoVG9ab25lKHBzZCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gZm4oYTEsIGEyLCBhMyk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzd2l0Y2hUb1pvbmUob3V0ZXJTY29wZSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5hdGl2ZUF3YWl0Q29tcGF0aWJsZVdyYXAoZm4sIHpvbmUsIHBvc3NpYmxlQXdhaXQsIGNsZWFudXApIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJyA/IGZuIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG91dGVyWm9uZSA9IFBTRDtcbiAgICAgICAgICAgIGlmIChwb3NzaWJsZUF3YWl0KVxuICAgICAgICAgICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICBzd2l0Y2hUb1pvbmUoem9uZSwgdHJ1ZSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoVG9ab25lKG91dGVyWm9uZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlmIChjbGVhbnVwKVxuICAgICAgICAgICAgICAgICAgICBxdWV1ZU1pY3JvdGFzayhkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4ZWNJbkdsb2JhbENvbnRleHQoY2IpIHtcbiAgICAgICAgaWYgKFByb21pc2UgPT09IE5hdGl2ZVByb21pc2UgJiYgdGFzay5lY2hvZXMgPT09IDApIHtcbiAgICAgICAgICAgIGlmICh6b25lRWNob2VzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVucXVldWVOYXRpdmVNaWNyb1Rhc2soY2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dChjYiwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHJlamVjdGlvbiA9IERleGllUHJvbWlzZS5yZWplY3Q7XG5cbiAgICBmdW5jdGlvbiB0ZW1wVHJhbnNhY3Rpb24oZGIsIG1vZGUsIHN0b3JlTmFtZXMsIGZuKSB7XG4gICAgICAgIGlmICghZGIuaWRiZGIgfHwgKCFkYi5fc3RhdGUub3BlbkNvbXBsZXRlICYmICghUFNELmxldFRocm91Z2ggJiYgIWRiLl92aXApKSkge1xuICAgICAgICAgICAgaWYgKGRiLl9zdGF0ZS5vcGVuQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKGRiLl9zdGF0ZS5kYk9wZW5FcnJvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkYi5fc3RhdGUuaXNCZWluZ09wZW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICghZGIuX3N0YXRlLmF1dG9PcGVuKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgIGRiLm9wZW4oKS5jYXRjaChub3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRiLl9zdGF0ZS5kYlJlYWR5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRlbXBUcmFuc2FjdGlvbihkYiwgbW9kZSwgc3RvcmVOYW1lcywgZm4pOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0cmFucyA9IGRiLl9jcmVhdGVUcmFuc2FjdGlvbihtb2RlLCBzdG9yZU5hbWVzLCBkYi5fZGJTY2hlbWEpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0cmFucy5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBkYi5fc3RhdGUuUFIxMzk4X21heExvb3AgPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4Lm5hbWUgPT09IGVycm5hbWVzLkludmFsaWRTdGF0ZSAmJiBkYi5pc09wZW4oKSAmJiAtLWRiLl9zdGF0ZS5QUjEzOThfbWF4TG9vcCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdEZXhpZTogTmVlZCB0byByZW9wZW4gZGInKTtcbiAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoeyBkaXNhYmxlQXV0b09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGIub3BlbigpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdGVtcFRyYW5zYWN0aW9uKGRiLCBtb2RlLCBzdG9yZU5hbWVzLCBmbik7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cmFucy5fcHJvbWlzZShtb2RlLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgUFNELnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihyZXNvbHZlLCByZWplY3QsIHRyYW5zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAncmVhZHdyaXRlJylcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLmlkYnRyYW5zLmNvbW1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGUgPT09ICdyZWFkb25seScgPyByZXN1bHQgOiB0cmFucy5fY29tcGxldGlvbi50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBERVhJRV9WRVJTSU9OID0gJzQuMi4wJztcbiAgICB2YXIgbWF4U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZSg2NTUzNSk7XG4gICAgdmFyIG1pbktleSA9IC1JbmZpbml0eTtcbiAgICB2YXIgSU5WQUxJRF9LRVlfQVJHVU1FTlQgPSBcIkludmFsaWQga2V5IHByb3ZpZGVkLiBLZXlzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgRGF0ZSBvciBBcnJheTxzdHJpbmcgfCBudW1iZXIgfCBEYXRlPi5cIjtcbiAgICB2YXIgU1RSSU5HX0VYUEVDVEVEID0gXCJTdHJpbmcgZXhwZWN0ZWQuXCI7XG4gICAgdmFyIGNvbm5lY3Rpb25zID0gW107XG4gICAgdmFyIERCTkFNRVNfREIgPSAnX19kYm5hbWVzJztcbiAgICB2YXIgUkVBRE9OTFkgPSAncmVhZG9ubHknO1xuICAgIHZhciBSRUFEV1JJVEUgPSAncmVhZHdyaXRlJztcblxuICAgIGZ1bmN0aW9uIGNvbWJpbmUoZmlsdGVyMSwgZmlsdGVyMikge1xuICAgICAgICByZXR1cm4gZmlsdGVyMSA/XG4gICAgICAgICAgICBmaWx0ZXIyID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBmaWx0ZXIxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgJiYgZmlsdGVyMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IDpcbiAgICAgICAgICAgICAgICBmaWx0ZXIxIDpcbiAgICAgICAgICAgIGZpbHRlcjI7XG4gICAgfVxuXG4gICAgdmFyIEFueVJhbmdlID0ge1xuICAgICAgICB0eXBlOiAzICxcbiAgICAgICAgbG93ZXI6IC1JbmZpbml0eSxcbiAgICAgICAgbG93ZXJPcGVuOiBmYWxzZSxcbiAgICAgICAgdXBwZXI6IFtbXV0sXG4gICAgICAgIHVwcGVyT3BlbjogZmFsc2VcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gd29ya2Fyb3VuZEZvclVuZGVmaW5lZFByaW1LZXkoa2V5UGF0aCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGtleVBhdGggPT09IFwic3RyaW5nXCIgJiYgIS9cXC4vLnRlc3Qoa2V5UGF0aClcbiAgICAgICAgICAgID8gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChvYmpba2V5UGF0aF0gPT09IHVuZGVmaW5lZCAmJiAoa2V5UGF0aCBpbiBvYmopKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IGRlZXBDbG9uZShvYmopO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmo7IH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRW50aXR5KCkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb25zLlR5cGUoXCJFbnRpdHkgaW5zdGFuY2VzIG11c3QgbmV2ZXIgYmUgbmV3OmVkLiBJbnN0YW5jZXMgYXJlIGdlbmVyYXRlZCBieSB0aGUgZnJhbWV3b3JrIGJ5cGFzc2luZyB0aGUgY29uc3RydWN0b3IuXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNtcChhLCBiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGEgPSB0eXBlKGEpO1xuICAgICAgICAgICAgdmFyIHRiID0gdHlwZShiKTtcbiAgICAgICAgICAgIGlmICh0YSAhPT0gdGIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGEgPT09ICdBcnJheScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGlmICh0YiA9PT0gJ0FycmF5JylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIGlmICh0YSA9PT0gJ2JpbmFyeScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGlmICh0YiA9PT0gJ2JpbmFyeScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBpZiAodGEgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAodGIgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKHRhID09PSAnRGF0ZScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGlmICh0YiAhPT0gJ0RhdGUnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodGEpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0RhdGUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhID4gYiA/IDEgOiBhIDwgYiA/IC0xIDogMDtcbiAgICAgICAgICAgICAgICBjYXNlICdiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlVWludDhBcnJheXMoZ2V0VWludDhBcnJheShhKSwgZ2V0VWludDhBcnJheShiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVBcnJheXMoYSwgYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgcmV0dXJuIE5hTjtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29tcGFyZUFycmF5cyhhLCBiKSB7XG4gICAgICAgIHZhciBhbCA9IGEubGVuZ3RoO1xuICAgICAgICB2YXIgYmwgPSBiLmxlbmd0aDtcbiAgICAgICAgdmFyIGwgPSBhbCA8IGJsID8gYWwgOiBibDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBjbXAoYVtpXSwgYltpXSk7XG4gICAgICAgICAgICBpZiAocmVzICE9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFsID09PSBibCA/IDAgOiBhbCA8IGJsID8gLTEgOiAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlVWludDhBcnJheXMoYSwgYikge1xuICAgICAgICB2YXIgYWwgPSBhLmxlbmd0aDtcbiAgICAgICAgdmFyIGJsID0gYi5sZW5ndGg7XG4gICAgICAgIHZhciBsID0gYWwgPCBibCA/IGFsIDogYmw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoYVtpXSAhPT0gYltpXSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYVtpXSA8IGJbaV0gPyAtMSA6IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFsID09PSBibCA/IDAgOiBhbCA8IGJsID8gLTEgOiAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0eXBlKHgpIHtcbiAgICAgICAgdmFyIHQgPSB0eXBlb2YgeDtcbiAgICAgICAgaWYgKHQgIT09ICdvYmplY3QnKVxuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoeCkpXG4gICAgICAgICAgICByZXR1cm4gJ2JpbmFyeSc7XG4gICAgICAgIHZhciB0c1RhZyA9IHRvU3RyaW5nVGFnKHgpO1xuICAgICAgICByZXR1cm4gdHNUYWcgPT09ICdBcnJheUJ1ZmZlcicgPyAnYmluYXJ5JyA6IHRzVGFnO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRVaW50OEFycmF5KGEpIHtcbiAgICAgICAgaWYgKGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KVxuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoYSkpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYS5idWZmZXIsIGEuYnl0ZU9mZnNldCwgYS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWx0SW5EZWxldGlvblRyaWdnZXIodGFibGUsIGtleXMsIHJlcykge1xuICAgICAgICB2YXIgeVByb3BzID0gdGFibGUuc2NoZW1hLnlQcm9wcztcbiAgICAgICAgaWYgKCF5UHJvcHMpXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICBpZiAoa2V5cyAmJiByZXMubnVtRmFpbHVyZXMgPiAwKVxuICAgICAgICAgICAga2V5cyA9IGtleXMuZmlsdGVyKGZ1bmN0aW9uIChfLCBpKSB7IHJldHVybiAhcmVzLmZhaWx1cmVzW2ldOyB9KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHlQcm9wcy5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdXBkYXRlc1RhYmxlID0gX2EudXBkYXRlc1RhYmxlO1xuICAgICAgICAgICAgcmV0dXJuIGtleXNcbiAgICAgICAgICAgICAgICA/IHRhYmxlLmRiLnRhYmxlKHVwZGF0ZXNUYWJsZSkud2hlcmUoJ2snKS5hbnlPZihrZXlzKS5kZWxldGUoKVxuICAgICAgICAgICAgICAgIDogdGFibGUuZGIudGFibGUodXBkYXRlc1RhYmxlKS5jbGVhcigpO1xuICAgICAgICB9KSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiByZXM7IH0pO1xuICAgIH1cblxuICAgIHZhciBUYWJsZSA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBUYWJsZSgpIHtcbiAgICAgICAgfVxuICAgICAgICBUYWJsZS5wcm90b3R5cGUuX3RyYW5zID0gZnVuY3Rpb24gKG1vZGUsIGZuLCB3cml0ZUxvY2tlZCkge1xuICAgICAgICAgICAgdmFyIHRyYW5zID0gdGhpcy5fdHggfHwgUFNELnRyYW5zO1xuICAgICAgICAgICAgdmFyIHRhYmxlTmFtZSA9IHRoaXMubmFtZTtcbiAgICAgICAgICAgIHZhciB0YXNrID0gZGVidWcgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuY3JlYXRlVGFzayAmJiBjb25zb2xlLmNyZWF0ZVRhc2soXCJEZXhpZTogXCIuY29uY2F0KG1vZGUgPT09ICdyZWFkb25seScgPyAncmVhZCcgOiAnd3JpdGUnLCBcIiBcIikuY29uY2F0KHRoaXMubmFtZSkpO1xuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tUYWJsZUluVHJhbnNhY3Rpb24ocmVzb2x2ZSwgcmVqZWN0LCB0cmFucykge1xuICAgICAgICAgICAgICAgIGlmICghdHJhbnMuc2NoZW1hW3RhYmxlTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk5vdEZvdW5kKFwiVGFibGUgXCIgKyB0YWJsZU5hbWUgKyBcIiBub3QgcGFydCBvZiB0cmFuc2FjdGlvblwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4odHJhbnMuaWRidHJhbnMsIHRyYW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3YXNSb290RXhlYyA9IGJlZ2luTWljcm9UaWNrU2NvcGUoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHAgPSB0cmFucyAmJiB0cmFucy5kYi5fbm92aXAgPT09IHRoaXMuZGIuX25vdmlwID9cbiAgICAgICAgICAgICAgICAgICAgdHJhbnMgPT09IFBTRC50cmFucyA/XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFucy5fcHJvbWlzZShtb2RlLCBjaGVja1RhYmxlSW5UcmFuc2FjdGlvbiwgd3JpdGVMb2NrZWQpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRyYW5zLl9wcm9taXNlKG1vZGUsIGNoZWNrVGFibGVJblRyYW5zYWN0aW9uLCB3cml0ZUxvY2tlZCk7IH0sIHsgdHJhbnM6IHRyYW5zLCB0cmFuc2xlc3M6IFBTRC50cmFuc2xlc3MgfHwgUFNEIH0pIDpcbiAgICAgICAgICAgICAgICAgICAgdGVtcFRyYW5zYWN0aW9uKHRoaXMuZGIsIG1vZGUsIFt0aGlzLm5hbWVdLCBjaGVja1RhYmxlSW5UcmFuc2FjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgcC5fY29uc29sZVRhc2sgPSB0YXNrO1xuICAgICAgICAgICAgICAgICAgICBwID0gcC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnRyYWNlKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmICh3YXNSb290RXhlYylcbiAgICAgICAgICAgICAgICAgICAgZW5kTWljcm9UaWNrU2NvcGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXlPckNyaXQsIGNiKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGtleU9yQ3JpdCAmJiBrZXlPckNyaXQuY29uc3RydWN0b3IgPT09IE9iamVjdClcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aGVyZShrZXlPckNyaXQpLmZpcnN0KGNiKTtcbiAgICAgICAgICAgIGlmIChrZXlPckNyaXQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLlR5cGUoXCJJbnZhbGlkIGFyZ3VtZW50IHRvIFRhYmxlLmdldCgpXCIpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZG9ubHknLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5nZXQoeyB0cmFuczogdHJhbnMsIGtleToga2V5T3JDcml0IH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIF90aGlzLmhvb2sucmVhZGluZy5maXJlKHJlcyk7IH0pO1xuICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS53aGVyZSA9IGZ1bmN0aW9uIChpbmRleE9yQ3JpdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmRleE9yQ3JpdCA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmRiLldoZXJlQ2xhdXNlKHRoaXMsIGluZGV4T3JDcml0KTtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGluZGV4T3JDcml0KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuZGIuV2hlcmVDbGF1c2UodGhpcywgXCJbXCIuY29uY2F0KGluZGV4T3JDcml0LmpvaW4oJysnKSwgXCJdXCIpKTtcbiAgICAgICAgICAgIHZhciBrZXlQYXRocyA9IGtleXMoaW5kZXhPckNyaXQpO1xuICAgICAgICAgICAgaWYgKGtleVBhdGhzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAud2hlcmUoa2V5UGF0aHNbMF0pXG4gICAgICAgICAgICAgICAgICAgIC5lcXVhbHMoaW5kZXhPckNyaXRba2V5UGF0aHNbMF1dKTtcbiAgICAgICAgICAgIHZhciBjb21wb3VuZEluZGV4ID0gdGhpcy5zY2hlbWEuaW5kZXhlcy5jb25jYXQodGhpcy5zY2hlbWEucHJpbUtleSkuZmlsdGVyKGZ1bmN0aW9uIChpeCkge1xuICAgICAgICAgICAgICAgIGlmIChpeC5jb21wb3VuZCAmJlxuICAgICAgICAgICAgICAgICAgICBrZXlQYXRocy5ldmVyeShmdW5jdGlvbiAoa2V5UGF0aCkgeyByZXR1cm4gaXgua2V5UGF0aC5pbmRleE9mKGtleVBhdGgpID49IDA7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5UGF0aHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlQYXRocy5pbmRleE9mKGl4LmtleVBhdGhbaV0pID09PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEua2V5UGF0aC5sZW5ndGggLSBiLmtleVBhdGgubGVuZ3RoOyB9KVswXTtcbiAgICAgICAgICAgIGlmIChjb21wb3VuZEluZGV4ICYmIHRoaXMuZGIuX21heEtleSAhPT0gbWF4U3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleVBhdGhzSW5WYWxpZE9yZGVyID0gY29tcG91bmRJbmRleC5rZXlQYXRoLnNsaWNlKDAsIGtleVBhdGhzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKGtleVBhdGhzSW5WYWxpZE9yZGVyKVxuICAgICAgICAgICAgICAgICAgICAuZXF1YWxzKGtleVBhdGhzSW5WYWxpZE9yZGVyLm1hcChmdW5jdGlvbiAoa3ApIHsgcmV0dXJuIGluZGV4T3JDcml0W2twXTsgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjb21wb3VuZEluZGV4ICYmIGRlYnVnKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlRoZSBxdWVyeSBcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoaW5kZXhPckNyaXQpLCBcIiBvbiBcIikuY29uY2F0KHRoaXMubmFtZSwgXCIgd291bGQgYmVuZWZpdCBmcm9tIGEgXCIpICtcbiAgICAgICAgICAgICAgICAgICAgXCJjb21wb3VuZCBpbmRleCBbXCIuY29uY2F0KGtleVBhdGhzLmpvaW4oJysnKSwgXCJdXCIpKTtcbiAgICAgICAgICAgIHZhciBpZHhCeU5hbWUgPSB0aGlzLnNjaGVtYS5pZHhCeU5hbWU7XG4gICAgICAgICAgICBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbXAoYSwgYikgPT09IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2EgPSBrZXlQYXRocy5yZWR1Y2UoZnVuY3Rpb24gKF9hLCBrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZJbmRleCA9IF9hWzBdLCBwcmV2RmlsdGVyRm4gPSBfYVsxXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBpZHhCeU5hbWVba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaW5kZXhPckNyaXRba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgcHJldkluZGV4IHx8IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICBwcmV2SW5kZXggfHwgIWluZGV4ID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmUocHJldkZpbHRlckZuLCBpbmRleCAmJiBpbmRleC5tdWx0aSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSBnZXRCeUtleVBhdGgoeCwga2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0FycmF5KHByb3ApICYmIHByb3Auc29tZShmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gZXF1YWxzKHZhbHVlLCBpdGVtKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uICh4KSB7IHJldHVybiBlcXVhbHModmFsdWUsIGdldEJ5S2V5UGF0aCh4LCBrZXlQYXRoKSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHByZXZGaWx0ZXJGblxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9LCBbbnVsbCwgbnVsbF0pLCBpZHggPSBfYVswXSwgZmlsdGVyRnVuY3Rpb24gPSBfYVsxXTtcbiAgICAgICAgICAgIHJldHVybiBpZHggP1xuICAgICAgICAgICAgICAgIHRoaXMud2hlcmUoaWR4Lm5hbWUpLmVxdWFscyhpbmRleE9yQ3JpdFtpZHgua2V5UGF0aF0pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZmlsdGVyRnVuY3Rpb24pIDpcbiAgICAgICAgICAgICAgICBjb21wb3VuZEluZGV4ID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXIoZmlsdGVyRnVuY3Rpb24pIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVyZShrZXlQYXRocykuZXF1YWxzKCcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXJGdW5jdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkuYW5kKGZpbHRlckZ1bmN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmNvdW50ID0gZnVuY3Rpb24gKHRoZW5TaG9ydGN1dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkuY291bnQodGhlblNob3J0Y3V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLm9mZnNldCA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLm9mZnNldChvZmZzZXQpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUubGltaXQgPSBmdW5jdGlvbiAobnVtUm93cykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkubGltaXQobnVtUm93cyk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5lYWNoKGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAodGhlblNob3J0Y3V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS50b0FycmF5KHRoZW5TaG9ydGN1dCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS50b0NvbGxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuZGIuQ29sbGVjdGlvbihuZXcgdGhpcy5kYi5XaGVyZUNsYXVzZSh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5vcmRlckJ5ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuZGIuQ29sbGVjdGlvbihuZXcgdGhpcy5kYi5XaGVyZUNsYXVzZSh0aGlzLCBpc0FycmF5KGluZGV4KSA/XG4gICAgICAgICAgICAgICAgXCJbXCIuY29uY2F0KGluZGV4LmpvaW4oJysnKSwgXCJdXCIpIDpcbiAgICAgICAgICAgICAgICBpbmRleCkpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUucmV2ZXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLnJldmVyc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLm1hcFRvQ2xhc3MgPSBmdW5jdGlvbiAoY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMsIGRiID0gX2EuZGIsIHRhYmxlTmFtZSA9IF9hLm5hbWU7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYS5tYXBwZWRDbGFzcyA9IGNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgaWYgKGNvbnN0cnVjdG9yLnByb3RvdHlwZSBpbnN0YW5jZW9mIEVudGl0eSkge1xuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yID0gIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIF9fZXh0ZW5kcyhjbGFzc18xLCBfc3VwZXIpO1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbGFzc18xKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbGFzc18xLnByb3RvdHlwZSwgXCJkYlwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRiOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzXzEucHJvdG90eXBlLnRhYmxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGFibGVOYW1lOyB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3NfMTtcbiAgICAgICAgICAgICAgICB9KGNvbnN0cnVjdG9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW5oZXJpdGVkUHJvcHMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBwcm90byA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZTsgcHJvdG87IHByb3RvID0gZ2V0UHJvdG8ocHJvdG8pKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvdG8pLmZvckVhY2goZnVuY3Rpb24gKHByb3BOYW1lKSB7IHJldHVybiBpbmhlcml0ZWRQcm9wcy5hZGQocHJvcE5hbWUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZWFkSG9vayA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9iailcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShjb25zdHJ1Y3Rvci5wcm90b3R5cGUpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG0gaW4gb2JqKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWluaGVyaXRlZFByb3BzLmhhcyhtKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzW21dID0gb2JqW21dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuc2NoZW1hLnJlYWRIb29rKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ob29rLnJlYWRpbmcudW5zdWJzY3JpYmUodGhpcy5zY2hlbWEucmVhZEhvb2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zY2hlbWEucmVhZEhvb2sgPSByZWFkSG9vaztcbiAgICAgICAgICAgIHRoaXMuaG9vayhcInJlYWRpbmdcIiwgcmVhZEhvb2spO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuZGVmaW5lQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBDbGFzcyhjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwVG9DbGFzcyhDbGFzcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLnNjaGVtYS5wcmltS2V5LCBhdXRvID0gX2EuYXV0bywga2V5UGF0aCA9IF9hLmtleVBhdGg7XG4gICAgICAgICAgICB2YXIgb2JqVG9BZGQgPSBvYmo7XG4gICAgICAgICAgICBpZiAoa2V5UGF0aCAmJiBhdXRvKSB7XG4gICAgICAgICAgICAgICAgb2JqVG9BZGQgPSB3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKShvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdhZGQnLCBrZXlzOiBrZXkgIT0gbnVsbCA/IFtrZXldIDogbnVsbCwgdmFsdWVzOiBbb2JqVG9BZGRdIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMubnVtRmFpbHVyZXMgPyBEZXhpZVByb21pc2UucmVqZWN0KHJlcy5mYWlsdXJlc1swXSkgOiByZXMubGFzdFJlc3VsdDsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobGFzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCBsYXN0UmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoa2V5T3JPYmplY3QsIG1vZGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5T3JPYmplY3QgPT09ICdvYmplY3QnICYmICFpc0FycmF5KGtleU9yT2JqZWN0KSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBnZXRCeUtleVBhdGgoa2V5T3JPYmplY3QsIHRoaXMuc2NoZW1hLnByaW1LZXkua2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkdpdmVuIG9iamVjdCBkb2VzIG5vdCBjb250YWluIGl0cyBwcmltYXJ5IGtleVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoXCI6aWRcIikuZXF1YWxzKGtleSkubW9kaWZ5KG1vZGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoXCI6aWRcIikuZXF1YWxzKGtleU9yT2JqZWN0KS5tb2RpZnkobW9kaWZpY2F0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLnNjaGVtYS5wcmltS2V5LCBhdXRvID0gX2EuYXV0bywga2V5UGF0aCA9IF9hLmtleVBhdGg7XG4gICAgICAgICAgICB2YXIgb2JqVG9BZGQgPSBvYmo7XG4gICAgICAgICAgICBpZiAoa2V5UGF0aCAmJiBhdXRvKSB7XG4gICAgICAgICAgICAgICAgb2JqVG9BZGQgPSB3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKShvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHsgcmV0dXJuIF90aGlzLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAncHV0JywgdmFsdWVzOiBbb2JqVG9BZGRdLCBrZXlzOiBrZXkgIT0gbnVsbCA/IFtrZXldIDogbnVsbCB9KTsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMubnVtRmFpbHVyZXMgPyBEZXhpZVByb21pc2UucmVqZWN0KHJlcy5mYWlsdXJlc1swXSkgOiByZXMubGFzdFJlc3VsdDsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobGFzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCBsYXN0UmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHsgcmV0dXJuIF90aGlzLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAnZGVsZXRlJywga2V5czogW2tleV0gfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBidWlsdEluRGVsZXRpb25UcmlnZ2VyKF90aGlzLCBba2V5XSwgcmVzKTsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMubnVtRmFpbHVyZXMgPyBEZXhpZVByb21pc2UucmVqZWN0KHJlcy5mYWlsdXJlc1swXSkgOiB1bmRlZmluZWQ7IH0pOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZHdyaXRlJywgZnVuY3Rpb24gKHRyYW5zKSB7IHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2RlbGV0ZVJhbmdlJywgcmFuZ2U6IEFueVJhbmdlIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gYnVpbHRJbkRlbGV0aW9uVHJpZ2dlcihfdGhpcywgbnVsbCwgcmVzKTsgfSk7IH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcmVzLm51bUZhaWx1cmVzID8gRGV4aWVQcm9taXNlLnJlamVjdChyZXMuZmFpbHVyZXNbMF0pIDogdW5kZWZpbmVkOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmJ1bGtHZXQgPSBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZG9ubHknLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5nZXRNYW55KHtcbiAgICAgICAgICAgICAgICAgICAga2V5czoga2V5cyxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiByZXN1bHQubWFwKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIF90aGlzLmhvb2sucmVhZGluZy5maXJlKHJlcyk7IH0pOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYnVsa0FkZCA9IGZ1bmN0aW9uIChvYmplY3RzLCBrZXlzT3JPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBBcnJheS5pc0FycmF5KGtleXNPck9wdGlvbnMpID8ga2V5c09yT3B0aW9ucyA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IChrZXlzID8gdW5kZWZpbmVkIDoga2V5c09yT3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgd2FudFJlc3VsdHMgPSBvcHRpb25zID8gb3B0aW9ucy5hbGxLZXlzIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zY2hlbWEucHJpbUtleSwgYXV0byA9IF9hLmF1dG8sIGtleVBhdGggPSBfYS5rZXlQYXRoO1xuICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoICYmIGtleXMpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcImJ1bGtBZGQoKToga2V5cyBhcmd1bWVudCBpbnZhbGlkIG9uIHRhYmxlcyB3aXRoIGluYm91bmQga2V5c1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCAhPT0gb2JqZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkFyZ3VtZW50cyBvYmplY3RzIGFuZCBrZXlzIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGhcIik7XG4gICAgICAgICAgICAgICAgdmFyIG51bU9iamVjdHMgPSBvYmplY3RzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0c1RvQWRkID0ga2V5UGF0aCAmJiBhdXRvID9cbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cy5tYXAod29ya2Fyb3VuZEZvclVuZGVmaW5lZFByaW1LZXkoa2V5UGF0aCkpIDpcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cztcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdhZGQnLCBrZXlzOiBrZXlzLCB2YWx1ZXM6IG9iamVjdHNUb0FkZCwgd2FudFJlc3VsdHM6IHdhbnRSZXN1bHRzIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgcmVzdWx0cyA9IF9hLnJlc3VsdHMsIGxhc3RSZXN1bHQgPSBfYS5sYXN0UmVzdWx0LCBmYWlsdXJlcyA9IF9hLmZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gd2FudFJlc3VsdHMgPyByZXN1bHRzIDogbGFzdFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bUZhaWx1cmVzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJ1bGtFcnJvcihcIlwiLmNvbmNhdChfdGhpcy5uYW1lLCBcIi5idWxrQWRkKCk6IFwiKS5jb25jYXQobnVtRmFpbHVyZXMsIFwiIG9mIFwiKS5jb25jYXQobnVtT2JqZWN0cywgXCIgb3BlcmF0aW9ucyBmYWlsZWRcIiksIGZhaWx1cmVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYnVsa1B1dCA9IGZ1bmN0aW9uIChvYmplY3RzLCBrZXlzT3JPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBBcnJheS5pc0FycmF5KGtleXNPck9wdGlvbnMpID8ga2V5c09yT3B0aW9ucyA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IChrZXlzID8gdW5kZWZpbmVkIDoga2V5c09yT3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgd2FudFJlc3VsdHMgPSBvcHRpb25zID8gb3B0aW9ucy5hbGxLZXlzIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zY2hlbWEucHJpbUtleSwgYXV0byA9IF9hLmF1dG8sIGtleVBhdGggPSBfYS5rZXlQYXRoO1xuICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoICYmIGtleXMpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcImJ1bGtQdXQoKToga2V5cyBhcmd1bWVudCBpbnZhbGlkIG9uIHRhYmxlcyB3aXRoIGluYm91bmQga2V5c1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCAhPT0gb2JqZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkFyZ3VtZW50cyBvYmplY3RzIGFuZCBrZXlzIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGhcIik7XG4gICAgICAgICAgICAgICAgdmFyIG51bU9iamVjdHMgPSBvYmplY3RzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0c1RvUHV0ID0ga2V5UGF0aCAmJiBhdXRvID9cbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cy5tYXAod29ya2Fyb3VuZEZvclVuZGVmaW5lZFByaW1LZXkoa2V5UGF0aCkpIDpcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cztcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdwdXQnLCBrZXlzOiBrZXlzLCB2YWx1ZXM6IG9iamVjdHNUb1B1dCwgd2FudFJlc3VsdHM6IHdhbnRSZXN1bHRzIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgcmVzdWx0cyA9IF9hLnJlc3VsdHMsIGxhc3RSZXN1bHQgPSBfYS5sYXN0UmVzdWx0LCBmYWlsdXJlcyA9IF9hLmZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gd2FudFJlc3VsdHMgPyByZXN1bHRzIDogbGFzdFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bUZhaWx1cmVzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJ1bGtFcnJvcihcIlwiLmNvbmNhdChfdGhpcy5uYW1lLCBcIi5idWxrUHV0KCk6IFwiKS5jb25jYXQobnVtRmFpbHVyZXMsIFwiIG9mIFwiKS5jb25jYXQobnVtT2JqZWN0cywgXCIgb3BlcmF0aW9ucyBmYWlsZWRcIiksIGZhaWx1cmVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYnVsa1VwZGF0ZSA9IGZ1bmN0aW9uIChrZXlzQW5kQ2hhbmdlcykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb3JlVGFibGUgPSB0aGlzLmNvcmU7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGtleXNBbmRDaGFuZ2VzLm1hcChmdW5jdGlvbiAoZW50cnkpIHsgcmV0dXJuIGVudHJ5LmtleTsgfSk7XG4gICAgICAgICAgICB2YXIgY2hhbmdlU3BlY3MgPSBrZXlzQW5kQ2hhbmdlcy5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7IHJldHVybiBlbnRyeS5jaGFuZ2VzOyB9KTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRNYXAgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZHdyaXRlJywgZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvcmVUYWJsZS5nZXRNYW55KHsgdHJhbnM6IHRyYW5zLCBrZXlzOiBrZXlzLCBjYWNoZTogJ2Nsb25lJyB9KS50aGVuKGZ1bmN0aW9uIChvYmpzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRLZXlzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRPYmpzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGtleXNBbmRDaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKF9hLCBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYS5rZXksIGNoYW5nZXMgPSBfYS5jaGFuZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IG9ianNbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9iID0gT2JqZWN0LmtleXMoY2hhbmdlcyk7IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoID0gX2JbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjaGFuZ2VzW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aCA9PT0gX3RoaXMuc2NoZW1hLnByaW1LZXkua2V5UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNtcCh2YWx1ZSwga2V5KSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkNvbnN0cmFpbnQoXCJDYW5ub3QgdXBkYXRlIHByaW1hcnkga2V5IGluIGJ1bGtVcGRhdGUoKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRNYXAucHVzaChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdEtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdE9ianMucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bUVudHJpZXMgPSByZXN1bHRLZXlzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvcmVUYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLm11dGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IHJlc3VsdEtleXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHJlc3VsdE9ianMsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czoga2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTcGVjczogY2hhbmdlU3BlY3NcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bUZhaWx1cmVzID0gX2EubnVtRmFpbHVyZXMsIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bUVudHJpZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9iID0gT2JqZWN0LmtleXMoZmFpbHVyZXMpOyBfaSA8IF9iLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBfYltfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBlZE9mZnNldCA9IG9mZnNldE1hcFtOdW1iZXIob2Zmc2V0KV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcHBlZE9mZnNldCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlID0gZmFpbHVyZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZhaWx1cmVzW29mZnNldF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVzW21hcHBlZE9mZnNldF0gPSBmYWlsdXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBCdWxrRXJyb3IoXCJcIi5jb25jYXQoX3RoaXMubmFtZSwgXCIuYnVsa1VwZGF0ZSgpOiBcIikuY29uY2F0KG51bUZhaWx1cmVzLCBcIiBvZiBcIikuY29uY2F0KG51bUVudHJpZXMsIFwiIG9wZXJhdGlvbnMgZmFpbGVkXCIpLCBmYWlsdXJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5idWxrRGVsZXRlID0gZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgbnVtS2V5cyA9IGtleXMubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdkZWxldGUnLCBrZXlzOiBrZXlzIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIGJ1aWx0SW5EZWxldGlvblRyaWdnZXIoX3RoaXMsIGtleXMsIHJlcyk7IH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgbGFzdFJlc3VsdCA9IF9hLmxhc3RSZXN1bHQsIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgaWYgKG51bUZhaWx1cmVzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQnVsa0Vycm9yKFwiXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiLmJ1bGtEZWxldGUoKTogXCIpLmNvbmNhdChudW1GYWlsdXJlcywgXCIgb2YgXCIpLmNvbmNhdChudW1LZXlzLCBcIiBvcGVyYXRpb25zIGZhaWxlZFwiKSwgZmFpbHVyZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUYWJsZTtcbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gRXZlbnRzKGN0eCkge1xuICAgICAgICB2YXIgZXZzID0ge307XG4gICAgICAgIHZhciBydiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkgLSAxKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoLS1pKVxuICAgICAgICAgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgICAgICBldnNbZXZlbnROYW1lXS5zdWJzY3JpYmUuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiAoZXZlbnROYW1lKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZzW2V2ZW50TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJ2LmFkZEV2ZW50VHlwZSA9IGFkZDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICBhZGQoYXJndW1lbnRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIGZ1bmN0aW9uIGFkZChldmVudE5hbWUsIGNoYWluRnVuY3Rpb24sIGRlZmF1bHRGdW5jdGlvbikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudE5hbWUgPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgICAgIHJldHVybiBhZGRDb25maWd1cmVkRXZlbnRzKGV2ZW50TmFtZSk7XG4gICAgICAgICAgICBpZiAoIWNoYWluRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgY2hhaW5GdW5jdGlvbiA9IHJldmVyc2VTdG9wcGFibGVFdmVudENoYWluO1xuICAgICAgICAgICAgaWYgKCFkZWZhdWx0RnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZ1bmN0aW9uID0gbm9wO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnM6IFtdLFxuICAgICAgICAgICAgICAgIGZpcmU6IGRlZmF1bHRGdW5jdGlvbixcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5zdWJzY3JpYmVycy5pbmRleE9mKGNiKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaWJlcnMucHVzaChjYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpcmUgPSBjaGFpbkZ1bmN0aW9uKGNvbnRleHQuZmlyZSwgY2IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaWJlcnMgPSBjb250ZXh0LnN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuICE9PSBjYjsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlyZSA9IGNvbnRleHQuc3Vic2NyaWJlcnMucmVkdWNlKGNoYWluRnVuY3Rpb24sIGRlZmF1bHRGdW5jdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV2c1tldmVudE5hbWVdID0gcnZbZXZlbnROYW1lXSA9IGNvbnRleHQ7XG4gICAgICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZGRDb25maWd1cmVkRXZlbnRzKGNmZykge1xuICAgICAgICAgICAga2V5cyhjZmcpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gY2ZnW2V2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkKGV2ZW50TmFtZSwgY2ZnW2V2ZW50TmFtZV1bMF0sIGNmZ1tldmVudE5hbWVdWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJncyA9PT0gJ2FzYXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gYWRkKGV2ZW50TmFtZSwgbWlycm9yLCBmdW5jdGlvbiBmaXJlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzYXAkMShmdW5jdGlvbiBmaXJlRXZlbnQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkludmFsaWQgZXZlbnQgY29uZmlnXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlQ2xhc3NDb25zdHJ1Y3Rvcihwcm90b3R5cGUsIGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGRlcml2ZShjb25zdHJ1Y3RvcikuZnJvbSh7IHByb3RvdHlwZTogcHJvdG90eXBlIH0pO1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3I7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVGFibGVDb25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoVGFibGUucHJvdG90eXBlLCBmdW5jdGlvbiBUYWJsZShuYW1lLCB0YWJsZVNjaGVtYSwgdHJhbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgICAgIHRoaXMuX3R4ID0gdHJhbnM7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgdGhpcy5zY2hlbWEgPSB0YWJsZVNjaGVtYTtcbiAgICAgICAgICAgIHRoaXMuaG9vayA9IGRiLl9hbGxUYWJsZXNbbmFtZV0gPyBkYi5fYWxsVGFibGVzW25hbWVdLmhvb2sgOiBFdmVudHMobnVsbCwge1xuICAgICAgICAgICAgICAgIFwiY3JlYXRpbmdcIjogW2hvb2tDcmVhdGluZ0NoYWluLCBub3BdLFxuICAgICAgICAgICAgICAgIFwicmVhZGluZ1wiOiBbcHVyZUZ1bmN0aW9uQ2hhaW4sIG1pcnJvcl0sXG4gICAgICAgICAgICAgICAgXCJ1cGRhdGluZ1wiOiBbaG9va1VwZGF0aW5nQ2hhaW4sIG5vcF0sXG4gICAgICAgICAgICAgICAgXCJkZWxldGluZ1wiOiBbaG9va0RlbGV0aW5nQ2hhaW4sIG5vcF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1BsYWluS2V5UmFuZ2UoY3R4LCBpZ25vcmVMaW1pdEZpbHRlcikge1xuICAgICAgICByZXR1cm4gIShjdHguZmlsdGVyIHx8IGN0eC5hbGdvcml0aG0gfHwgY3R4Lm9yKSAmJlxuICAgICAgICAgICAgKGlnbm9yZUxpbWl0RmlsdGVyID8gY3R4Lmp1c3RMaW1pdCA6ICFjdHgucmVwbGF5RmlsdGVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRmlsdGVyKGN0eCwgZm4pIHtcbiAgICAgICAgY3R4LmZpbHRlciA9IGNvbWJpbmUoY3R4LmZpbHRlciwgZm4pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRSZXBsYXlGaWx0ZXIoY3R4LCBmYWN0b3J5LCBpc0xpbWl0RmlsdGVyKSB7XG4gICAgICAgIHZhciBjdXJyID0gY3R4LnJlcGxheUZpbHRlcjtcbiAgICAgICAgY3R4LnJlcGxheUZpbHRlciA9IGN1cnIgPyBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21iaW5lKGN1cnIoKSwgZmFjdG9yeSgpKTsgfSA6IGZhY3Rvcnk7XG4gICAgICAgIGN0eC5qdXN0TGltaXQgPSBpc0xpbWl0RmlsdGVyICYmICFjdXJyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRNYXRjaEZpbHRlcihjdHgsIGZuKSB7XG4gICAgICAgIGN0eC5pc01hdGNoID0gY29tYmluZShjdHguaXNNYXRjaCwgZm4pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRJbmRleE9yU3RvcmUoY3R4LCBjb3JlU2NoZW1hKSB7XG4gICAgICAgIGlmIChjdHguaXNQcmltS2V5KVxuICAgICAgICAgICAgcmV0dXJuIGNvcmVTY2hlbWEucHJpbWFyeUtleTtcbiAgICAgICAgdmFyIGluZGV4ID0gY29yZVNjaGVtYS5nZXRJbmRleEJ5S2V5UGF0aChjdHguaW5kZXgpO1xuICAgICAgICBpZiAoIWluZGV4KVxuICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiS2V5UGF0aCBcIiArIGN0eC5pbmRleCArIFwiIG9uIG9iamVjdCBzdG9yZSBcIiArIGNvcmVTY2hlbWEubmFtZSArIFwiIGlzIG5vdCBpbmRleGVkXCIpO1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZW5DdXJzb3IoY3R4LCBjb3JlVGFibGUsIHRyYW5zKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGdldEluZGV4T3JTdG9yZShjdHgsIGNvcmVUYWJsZS5zY2hlbWEpO1xuICAgICAgICByZXR1cm4gY29yZVRhYmxlLm9wZW5DdXJzb3Ioe1xuICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgdmFsdWVzOiAhY3R4LmtleXNPbmx5LFxuICAgICAgICAgICAgcmV2ZXJzZTogY3R4LmRpciA9PT0gJ3ByZXYnLFxuICAgICAgICAgICAgdW5pcXVlOiAhIWN0eC51bmlxdWUsXG4gICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICByYW5nZTogY3R4LnJhbmdlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpdGVyKGN0eCwgZm4sIGNvcmVUcmFucywgY29yZVRhYmxlKSB7XG4gICAgICAgIHZhciBmaWx0ZXIgPSBjdHgucmVwbGF5RmlsdGVyID8gY29tYmluZShjdHguZmlsdGVyLCBjdHgucmVwbGF5RmlsdGVyKCkpIDogY3R4LmZpbHRlcjtcbiAgICAgICAgaWYgKCFjdHgub3IpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVyYXRlKG9wZW5DdXJzb3IoY3R4LCBjb3JlVGFibGUsIGNvcmVUcmFucyksIGNvbWJpbmUoY3R4LmFsZ29yaXRobSwgZmlsdGVyKSwgZm4sICFjdHgua2V5c09ubHkgJiYgY3R4LnZhbHVlTWFwcGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzZXRfMSA9IHt9O1xuICAgICAgICAgICAgdmFyIHVuaW9uID0gZnVuY3Rpb24gKGl0ZW0sIGN1cnNvciwgYWR2YW5jZSkge1xuICAgICAgICAgICAgICAgIGlmICghZmlsdGVyIHx8IGZpbHRlcihjdXJzb3IsIGFkdmFuY2UsIGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIGN1cnNvci5zdG9wKHJlc3VsdCk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIGN1cnNvci5mYWlsKGVycik7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gY3Vyc29yLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAnJyArIHByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSAnJyArIG5ldyBVaW50OEFycmF5KHByaW1hcnlLZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc093bihzZXRfMSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0XzFba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbihpdGVtLCBjdXJzb3IsIGFkdmFuY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgY3R4Lm9yLl9pdGVyYXRlKHVuaW9uLCBjb3JlVHJhbnMpLFxuICAgICAgICAgICAgICAgIGl0ZXJhdGUob3BlbkN1cnNvcihjdHgsIGNvcmVUYWJsZSwgY29yZVRyYW5zKSwgY3R4LmFsZ29yaXRobSwgdW5pb24sICFjdHgua2V5c09ubHkgJiYgY3R4LnZhbHVlTWFwcGVyKVxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gaXRlcmF0ZShjdXJzb3JQcm9taXNlLCBmaWx0ZXIsIGZuLCB2YWx1ZU1hcHBlcikge1xuICAgICAgICB2YXIgbWFwcGVkRm4gPSB2YWx1ZU1hcHBlciA/IGZ1bmN0aW9uICh4LCBjLCBhKSB7IHJldHVybiBmbih2YWx1ZU1hcHBlcih4KSwgYywgYSk7IH0gOiBmbjtcbiAgICAgICAgdmFyIHdyYXBwZWRGbiA9IHdyYXAobWFwcGVkRm4pO1xuICAgICAgICByZXR1cm4gY3Vyc29yUHJvbWlzZS50aGVuKGZ1bmN0aW9uIChjdXJzb3IpIHtcbiAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjdXJzb3IuY29udGludWUoKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIgfHwgZmlsdGVyKGN1cnNvciwgZnVuY3Rpb24gKGFkdmFuY2VyKSB7IHJldHVybiBjID0gYWR2YW5jZXI7IH0sIGZ1bmN0aW9uICh2YWwpIHsgY3Vyc29yLnN0b3AodmFsKTsgYyA9IG5vcDsgfSwgZnVuY3Rpb24gKGUpIHsgY3Vyc29yLmZhaWwoZSk7IGMgPSBub3A7IH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlZEZuKGN1cnNvci52YWx1ZSwgY3Vyc29yLCBmdW5jdGlvbiAoYWR2YW5jZXIpIHsgcmV0dXJuIGMgPSBhZHZhbmNlcjsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIFByb3BNb2RpZmljYXRpb24gPSAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUHJvcE1vZGlmaWNhdGlvbihzcGVjKSB7XG4gICAgICAgICAgICB0aGlzW1wiQEBwcm9wbW9kXCJdID0gc3BlYztcbiAgICAgICAgfVxuICAgICAgICBQcm9wTW9kaWZpY2F0aW9uLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgc3BlYyA9IHRoaXNbXCJAQHByb3Btb2RcIl07XG4gICAgICAgICAgICBpZiAoc3BlYy5hZGQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXJtID0gc3BlYy5hZGQ7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkodGVybSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgKGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbXSksIHRydWUpLCB0ZXJtLCB0cnVlKS5zb3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVybSA9PT0gJ251bWJlcicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoTnVtYmVyKHZhbHVlKSB8fCAwKSArIHRlcm07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtID09PSAnYmlnaW50Jykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJpZ0ludCh2YWx1ZSkgKyB0ZXJtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJpZ0ludCgwKSArIHRlcm07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdGVybSBcIi5jb25jYXQodGVybSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwZWMucmVtb3ZlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VidHJhaGVuZF8xID0gc3BlYy5yZW1vdmU7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoc3VidHJhaGVuZF8xKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuICFzdWJ0cmFoZW5kXzEuaW5jbHVkZXMoaXRlbSk7IH0pLnNvcnQoKSA6IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN1YnRyYWhlbmRfMSA9PT0gJ251bWJlcicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpIC0gc3VidHJhaGVuZF8xO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3VidHJhaGVuZF8xID09PSAnYmlnaW50Jykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJpZ0ludCh2YWx1ZSkgLSBzdWJ0cmFoZW5kXzE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmlnSW50KDApIC0gc3VidHJhaGVuZF8xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN1YnRyYWhlbmQgXCIuY29uY2F0KHN1YnRyYWhlbmRfMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZWZpeFRvUmVwbGFjZSA9IChfYSA9IHNwZWMucmVwbGFjZVByZWZpeCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdO1xuICAgICAgICAgICAgaWYgKHByZWZpeFRvUmVwbGFjZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnN0YXJ0c1dpdGgocHJlZml4VG9SZXBsYWNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzcGVjLnJlcGxhY2VQcmVmaXhbMV0gKyB2YWx1ZS5zdWJzdHJpbmcocHJlZml4VG9SZXBsYWNlLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQcm9wTW9kaWZpY2F0aW9uO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgQ29sbGVjdGlvbiA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb2xsZWN0aW9uKCkge1xuICAgICAgICB9XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKGZuLCBjYikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIHJldHVybiBjdHguZXJyb3IgP1xuICAgICAgICAgICAgICAgIGN0eC50YWJsZS5fdHJhbnMobnVsbCwgcmVqZWN0aW9uLmJpbmQobnVsbCwgY3R4LmVycm9yKSkgOlxuICAgICAgICAgICAgICAgIGN0eC50YWJsZS5fdHJhbnMoJ3JlYWRvbmx5JywgZm4pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICByZXR1cm4gY3R4LmVycm9yID9cbiAgICAgICAgICAgICAgICBjdHgudGFibGUuX3RyYW5zKG51bGwsIHJlamVjdGlvbi5iaW5kKG51bGwsIGN0eC5lcnJvcikpIDpcbiAgICAgICAgICAgICAgICBjdHgudGFibGUuX3RyYW5zKCdyZWFkd3JpdGUnLCBmbiwgXCJsb2NrZWRcIik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLl9hZGRBbGdvcml0aG0gPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBjdHguYWxnb3JpdGhtID0gY29tYmluZShjdHguYWxnb3JpdGhtLCBmbik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLl9pdGVyYXRlID0gZnVuY3Rpb24gKGZuLCBjb3JlVHJhbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVyKHRoaXMuX2N0eCwgZm4sIGNvcmVUcmFucywgdGhpcy5fY3R4LnRhYmxlLmNvcmUpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICAgICAgdmFyIHJ2ID0gT2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZSksIGN0eCA9IE9iamVjdC5jcmVhdGUodGhpcy5fY3R4KTtcbiAgICAgICAgICAgIGlmIChwcm9wcylcbiAgICAgICAgICAgICAgICBleHRlbmQoY3R4LCBwcm9wcyk7XG4gICAgICAgICAgICBydi5fY3R4ID0gY3R4O1xuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHgudmFsdWVNYXBwZXIgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAodHJhbnMpIHsgcmV0dXJuIGl0ZXIoY3R4LCBmbiwgdHJhbnMsIGN0eC50YWJsZS5jb3JlKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNvdW50ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWQoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IF90aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgdmFyIGNvcmVUYWJsZSA9IGN0eC50YWJsZS5jb3JlO1xuICAgICAgICAgICAgICAgIGlmIChpc1BsYWluS2V5UmFuZ2UoY3R4LCB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29yZVRhYmxlLmNvdW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGdldEluZGV4T3JTdG9yZShjdHgsIGNvcmVUYWJsZS5zY2hlbWEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBjdHgucmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY291bnQpIHsgcmV0dXJuIE1hdGgubWluKGNvdW50LCBjdHgubGltaXQpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVyKGN0eCwgZnVuY3Rpb24gKCkgeyArK2NvdW50OyByZXR1cm4gZmFsc2U7IH0sIHRyYW5zLCBjb3JlVGFibGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBjb3VudDsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnNvcnRCeSA9IGZ1bmN0aW9uIChrZXlQYXRoLCBjYikge1xuICAgICAgICAgICAgdmFyIHBhcnRzID0ga2V5UGF0aC5zcGxpdCgnLicpLnJldmVyc2UoKSwgbGFzdFBhcnQgPSBwYXJ0c1swXSwgbGFzdEluZGV4ID0gcGFydHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldHZhbChvYmosIGkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldHZhbChvYmpbcGFydHNbaV1dLCBpIC0gMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ialtsYXN0UGFydF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3JkZXIgPSB0aGlzLl9jdHguZGlyID09PSBcIm5leHRcIiA/IDEgOiAtMTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNvcnRlcihhLCBiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFWYWwgPSBnZXR2YWwoYSwgbGFzdEluZGV4KSwgYlZhbCA9IGdldHZhbChiLCBsYXN0SW5kZXgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjbXAoYVZhbCwgYlZhbCkgKiBvcmRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zb3J0KHNvcnRlcik7XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkKGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSBfdGhpcy5fY3R4O1xuICAgICAgICAgICAgICAgIGlmIChjdHguZGlyID09PSAnbmV4dCcgJiYgaXNQbGFpbktleVJhbmdlKGN0eCwgdHJ1ZSkgJiYgY3R4LmxpbWl0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVNYXBwZXJfMSA9IGN0eC52YWx1ZU1hcHBlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgY3R4LnRhYmxlLmNvcmUuc2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC50YWJsZS5jb3JlLnF1ZXJ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0OiBjdHgubGltaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogY3R4LnJhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX2EucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlTWFwcGVyXzEgPyByZXN1bHQubWFwKHZhbHVlTWFwcGVyXzEpIDogcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhXzEgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXIoY3R4LCBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gYV8xLnB1c2goaXRlbSk7IH0sIHRyYW5zLCBjdHgudGFibGUuY29yZSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBhXzE7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUub2Zmc2V0ID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPD0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIGN0eC5vZmZzZXQgKz0gb2Zmc2V0O1xuICAgICAgICAgICAgaWYgKGlzUGxhaW5LZXlSYW5nZShjdHgpKSB7XG4gICAgICAgICAgICAgICAgYWRkUmVwbGF5RmlsdGVyKGN0eCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IG9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXRMZWZ0ID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldExlZnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLW9mZnNldExlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmFkdmFuY2Uob2Zmc2V0TGVmdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0TGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkZFJlcGxheUZpbHRlcihjdHgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldExlZnQgPSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiAoLS1vZmZzZXRMZWZ0IDwgMCk7IH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUubGltaXQgPSBmdW5jdGlvbiAobnVtUm93cykge1xuICAgICAgICAgICAgdGhpcy5fY3R4LmxpbWl0ID0gTWF0aC5taW4odGhpcy5fY3R4LmxpbWl0LCBudW1Sb3dzKTtcbiAgICAgICAgICAgIGFkZFJlcGxheUZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93c0xlZnQgPSBudW1Sb3dzO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgtLXJvd3NMZWZ0IDw9IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93c0xlZnQgPj0gMDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUudW50aWwgPSBmdW5jdGlvbiAoZmlsdGVyRnVuY3Rpb24sIGJJbmNsdWRlU3RvcEVudHJ5KSB7XG4gICAgICAgICAgICBhZGRGaWx0ZXIodGhpcy5fY3R4LCBmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlckZ1bmN0aW9uKGN1cnNvci52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJJbmNsdWRlU3RvcEVudHJ5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZmlyc3QgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpbWl0KDEpLnRvQXJyYXkoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGFbMF07IH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkuZmlyc3QoY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGFkZEZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyRnVuY3Rpb24oY3Vyc29yLnZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWRkTWF0Y2hGaWx0ZXIodGhpcy5fY3R4LCBmaWx0ZXJGdW5jdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24gKGZpbHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGZpbHRlcik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLm9yID0gZnVuY3Rpb24gKGluZGV4TmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmRiLldoZXJlQ2xhdXNlKHRoaXMuX2N0eC50YWJsZSwgaW5kZXhOYW1lLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmV2ZXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5kaXIgPSAodGhpcy5fY3R4LmRpciA9PT0gXCJwcmV2XCIgPyBcIm5leHRcIiA6IFwicHJldlwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbmRpcmVjdGlvbmNoYW5nZSlcbiAgICAgICAgICAgICAgICB0aGlzLl9vbmRpcmVjdGlvbmNoYW5nZSh0aGlzLl9jdHguZGlyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5kZXNjID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5lYWNoS2V5ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgY3R4LmtleXNPbmx5ID0gIWN0eC5pc01hdGNoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodmFsLCBjdXJzb3IpIHsgY2IoY3Vyc29yLmtleSwgY3Vyc29yKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmVhY2hVbmlxdWVLZXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC51bmlxdWUgPSBcInVuaXF1ZVwiO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaEtleShjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmVhY2hQcmltYXJ5S2V5ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgY3R4LmtleXNPbmx5ID0gIWN0eC5pc01hdGNoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodmFsLCBjdXJzb3IpIHsgY2IoY3Vyc29yLnByaW1hcnlLZXksIGN1cnNvcik7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgY3R4LmtleXNPbmx5ID0gIWN0eC5pc01hdGNoO1xuICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKGl0ZW0sIGN1cnNvcikge1xuICAgICAgICAgICAgICAgIGEucHVzaChjdXJzb3Iua2V5KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnByaW1hcnlLZXlzID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgaWYgKGN0eC5kaXIgPT09ICduZXh0JyAmJiBpc1BsYWluS2V5UmFuZ2UoY3R4LCB0cnVlKSAmJiBjdHgubGltaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWQoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGdldEluZGV4T3JTdG9yZShjdHgsIGN0eC50YWJsZS5jb3JlLnNjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgudGFibGUuY29yZS5xdWVyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ6IGN0eC5saW1pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBjdHgucmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF9hLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5rZXlzT25seSA9ICFjdHguaXNNYXRjaDtcbiAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICBhLnB1c2goY3Vyc29yLnByaW1hcnlLZXkpO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUudW5pcXVlS2V5cyA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdGhpcy5fY3R4LnVuaXF1ZSA9IFwidW5pcXVlXCI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5rZXlzKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZmlyc3RLZXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpbWl0KDEpLmtleXMoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGFbMF07IH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5sYXN0S2V5ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkuZmlyc3RLZXkoY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5kaXN0aW5jdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHgsIGlkeCA9IGN0eC5pbmRleCAmJiBjdHgudGFibGUuc2NoZW1hLmlkeEJ5TmFtZVtjdHguaW5kZXhdO1xuICAgICAgICAgICAgaWYgKCFpZHggfHwgIWlkeC5tdWx0aSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIHZhciBzZXQgPSB7fTtcbiAgICAgICAgICAgIGFkZEZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RyS2V5ID0gY3Vyc29yLnByaW1hcnlLZXkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBoYXNPd24oc2V0LCBzdHJLZXkpO1xuICAgICAgICAgICAgICAgIHNldFtzdHJLZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWZvdW5kO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUubW9kaWZ5ID0gZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dyaXRlKGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBtb2RpZnllcjtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoYW5nZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZ5ZXIgPSBjaGFuZ2VzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGhzID0ga2V5cyhjaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bUtleXMgPSBrZXlQYXRocy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmeWVyID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnl0aGluZ01vZGlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUtleXM7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoID0ga2V5UGF0aHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IGNoYW5nZXNba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdWYWwgPSBnZXRCeUtleVBhdGgoaXRlbSwga2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIFByb3BNb2RpZmljYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGl0ZW0sIGtleVBhdGgsIHZhbC5leGVjdXRlKG9yaWdWYWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW55dGhpbmdNb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9yaWdWYWwgIT09IHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgoaXRlbSwga2V5UGF0aCwgdmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW55dGhpbmdNb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFueXRoaW5nTW9kaWZpZWQ7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjb3JlVGFibGUgPSBjdHgudGFibGUuY29yZTtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBjb3JlVGFibGUuc2NoZW1hLnByaW1hcnlLZXksIG91dGJvdW5kID0gX2Eub3V0Ym91bmQsIGV4dHJhY3RLZXkgPSBfYS5leHRyYWN0S2V5O1xuICAgICAgICAgICAgICAgIHZhciBsaW1pdCA9IDIwMDtcbiAgICAgICAgICAgICAgICB2YXIgbW9kaWZ5Q2h1bmtTaXplID0gX3RoaXMuZGIuX29wdGlvbnMubW9kaWZ5Q2h1bmtTaXplO1xuICAgICAgICAgICAgICAgIGlmIChtb2RpZnlDaHVua1NpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtb2RpZnlDaHVua1NpemUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0ID0gbW9kaWZ5Q2h1bmtTaXplW2NvcmVUYWJsZS5uYW1lXSB8fCBtb2RpZnlDaHVua1NpemVbJyonXSB8fCAyMDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdCA9IG1vZGlmeUNodW5rU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdG90YWxGYWlsdXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBmYWlsZWRLZXlzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGFwcGx5TXV0YXRlUmVzdWx0ID0gZnVuY3Rpb24gKGV4cGVjdGVkQ291bnQsIHJlcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmFpbHVyZXMgPSByZXMuZmFpbHVyZXMsIG51bUZhaWx1cmVzID0gcmVzLm51bUZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ291bnQgKz0gZXhwZWN0ZWRDb3VudCAtIG51bUZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0ga2V5cyhmYWlsdXJlcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxGYWlsdXJlcy5wdXNoKGZhaWx1cmVzW3Bvc10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgaXNVbmNvbmRpdGlvbmFsRGVsZXRlID0gY2hhbmdlcyA9PT0gZGVsZXRlQ2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNsb25lKCkucHJpbWFyeUtleXMoKS50aGVuKGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjcml0ZXJpYSA9IGlzUGxhaW5LZXlSYW5nZShjdHgpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubGltaXQgPT09IEluZmluaXR5ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGNoYW5nZXMgIT09ICdmdW5jdGlvbicgfHwgaXNVbmNvbmRpdGlvbmFsRGVsZXRlKSAmJiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogY3R4LmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IGN0eC5yYW5nZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dENodW5rID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gTWF0aC5taW4obGltaXQsIGtleXMubGVuZ3RoIC0gb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlzSW5DaHVuayA9IGtleXMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBjb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGlzVW5jb25kaXRpb25hbERlbGV0ZSA/IFByb21pc2UucmVzb2x2ZShbXSkgOiBjb3JlVGFibGUuZ2V0TWFueSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGtleXNJbkNodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiBcImltbXV0YWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSkudGhlbihmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZFZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwdXRWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHV0S2V5cyA9IG91dGJvdW5kID8gW10gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxldGVLZXlzID0gaXNVbmNvbmRpdGlvbmFsRGVsZXRlID8ga2V5c0luQ2h1bmsgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVW5jb25kaXRpb25hbERlbGV0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ1ZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eF8xID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkZWVwQ2xvbmUob3JpZ1ZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltS2V5OiBrZXlzW29mZnNldCArIGldXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGlmeWVyLmNhbGwoY3R4XzEsIGN0eF8xLnZhbHVlLCBjdHhfMSkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eF8xLnZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlS2V5cy5wdXNoKGtleXNbb2Zmc2V0ICsgaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghb3V0Ym91bmQgJiYgY21wKGV4dHJhY3RLZXkob3JpZ1ZhbHVlKSwgZXh0cmFjdEtleShjdHhfMS52YWx1ZSkpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUtleXMucHVzaChrZXlzW29mZnNldCArIGldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkVmFsdWVzLnB1c2goY3R4XzEudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHV0VmFsdWVzLnB1c2goY3R4XzEudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0Ym91bmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXRLZXlzLnB1c2goa2V5c1tvZmZzZXQgKyBpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhZGRWYWx1ZXMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlVGFibGUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAnYWRkJywgdmFsdWVzOiBhZGRWYWx1ZXMgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHBvcyBpbiByZXMuZmFpbHVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVLZXlzLnNwbGljZShwYXJzZUludChwb3MpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5TXV0YXRlUmVzdWx0KGFkZFZhbHVlcy5sZW5ndGgsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIChwdXRWYWx1ZXMubGVuZ3RoID4gMCB8fCAoY3JpdGVyaWEgJiYgdHlwZW9mIGNoYW5nZXMgPT09ICdvYmplY3QnKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZVRhYmxlLm11dGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IHB1dEtleXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHB1dFZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyaXRlcmlhOiBjcml0ZXJpYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVNwZWM6IHR5cGVvZiBjaGFuZ2VzICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgY2hhbmdlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRkaXRpb25hbENodW5rOiBvZmZzZXQgPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gYXBwbHlNdXRhdGVSZXN1bHQocHV0VmFsdWVzLmxlbmd0aCwgcmVzKTsgfSk7IH0pLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gKGRlbGV0ZUtleXMubGVuZ3RoID4gMCB8fCAoY3JpdGVyaWEgJiYgaXNVbmNvbmRpdGlvbmFsRGVsZXRlKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZVRhYmxlLm11dGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGRlbGV0ZUtleXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJpYTogY3JpdGVyaWEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FkZGl0aW9uYWxDaHVuazogb2Zmc2V0ID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIGJ1aWx0SW5EZWxldGlvblRyaWdnZXIoY3R4LnRhYmxlLCBkZWxldGVLZXlzLCByZXMpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gYXBwbHlNdXRhdGVSZXN1bHQoZGVsZXRlS2V5cy5sZW5ndGgsIHJlcyk7IH0pOyB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleXMubGVuZ3RoID4gb2Zmc2V0ICsgY291bnQgJiYgbmV4dENodW5rKG9mZnNldCArIGxpbWl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dENodW5rKDApLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsRmFpbHVyZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kaWZ5RXJyb3IoXCJFcnJvciBtb2RpZnlpbmcgb25lIG9yIG1vcmUgb2JqZWN0c1wiLCB0b3RhbEZhaWx1cmVzLCBzdWNjZXNzQ291bnQsIGZhaWxlZEtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4LCByYW5nZSA9IGN0eC5yYW5nZTtcbiAgICAgICAgICAgIGlmIChpc1BsYWluS2V5UmFuZ2UoY3R4KSAmJlxuICAgICAgICAgICAgICAgICFjdHgudGFibGUuc2NoZW1hLnlQcm9wcyAmJlxuICAgICAgICAgICAgICAgIChjdHguaXNQcmltS2V5IHx8IHJhbmdlLnR5cGUgPT09IDMgKSlcbiAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dyaXRlKGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbWFyeUtleSA9IGN0eC50YWJsZS5jb3JlLnNjaGVtYS5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29yZVJhbmdlID0gcmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgudGFibGUuY29yZS5jb3VudCh7IHRyYW5zOiB0cmFucywgcXVlcnk6IHsgaW5kZXg6IHByaW1hcnlLZXksIHJhbmdlOiBjb3JlUmFuZ2UgfSB9KS50aGVuKGZ1bmN0aW9uIChjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC50YWJsZS5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2RlbGV0ZVJhbmdlJywgcmFuZ2U6IGNvcmVSYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IF9hLmZhaWx1cmVzLCBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1GYWlsdXJlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGlmeUVycm9yKFwiQ291bGQgbm90IGRlbGV0ZSBzb21lIHZhbHVlc1wiLCBPYmplY3Qua2V5cyhmYWlsdXJlcykubWFwKGZ1bmN0aW9uIChwb3MpIHsgcmV0dXJuIGZhaWx1cmVzW3Bvc107IH0pLCBjb3VudCAtIG51bUZhaWx1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnQgLSBudW1GYWlsdXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGlmeShkZWxldGVDYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2xsZWN0aW9uO1xuICAgIH0oKSk7XG4gICAgdmFyIGRlbGV0ZUNhbGxiYWNrID0gZnVuY3Rpb24gKHZhbHVlLCBjdHgpIHsgcmV0dXJuIGN0eC52YWx1ZSA9IG51bGw7IH07XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDb2xsZWN0aW9uQ29uc3RydWN0b3IoZGIpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VDbGFzc0NvbnN0cnVjdG9yKENvbGxlY3Rpb24ucHJvdG90eXBlLCBmdW5jdGlvbiBDb2xsZWN0aW9uKHdoZXJlQ2xhdXNlLCBrZXlSYW5nZUdlbmVyYXRvcikge1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdmFyIGtleVJhbmdlID0gQW55UmFuZ2UsIGVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChrZXlSYW5nZUdlbmVyYXRvcilcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBrZXlSYW5nZSA9IGtleVJhbmdlR2VuZXJhdG9yKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3aGVyZUN0eCA9IHdoZXJlQ2xhdXNlLl9jdHg7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB3aGVyZUN0eC50YWJsZTtcbiAgICAgICAgICAgIHZhciByZWFkaW5nSG9vayA9IHRhYmxlLmhvb2sucmVhZGluZy5maXJlO1xuICAgICAgICAgICAgdGhpcy5fY3R4ID0ge1xuICAgICAgICAgICAgICAgIHRhYmxlOiB0YWJsZSxcbiAgICAgICAgICAgICAgICBpbmRleDogd2hlcmVDdHguaW5kZXgsXG4gICAgICAgICAgICAgICAgaXNQcmltS2V5OiAoIXdoZXJlQ3R4LmluZGV4IHx8ICh0YWJsZS5zY2hlbWEucHJpbUtleS5rZXlQYXRoICYmIHdoZXJlQ3R4LmluZGV4ID09PSB0YWJsZS5zY2hlbWEucHJpbUtleS5uYW1lKSksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IGtleVJhbmdlLFxuICAgICAgICAgICAgICAgIGtleXNPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkaXI6IFwibmV4dFwiLFxuICAgICAgICAgICAgICAgIHVuaXF1ZTogXCJcIixcbiAgICAgICAgICAgICAgICBhbGdvcml0aG06IG51bGwsXG4gICAgICAgICAgICAgICAgZmlsdGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIHJlcGxheUZpbHRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBqdXN0TGltaXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNNYXRjaDogbnVsbCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgbGltaXQ6IEluZmluaXR5LFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBvcjogd2hlcmVDdHgub3IsXG4gICAgICAgICAgICAgICAgdmFsdWVNYXBwZXI6IHJlYWRpbmdIb29rICE9PSBtaXJyb3IgPyByZWFkaW5nSG9vayA6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNpbXBsZUNvbXBhcmUoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2ltcGxlQ29tcGFyZVJldmVyc2UoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmYWlsKGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlLCBlcnIsIFQpIHtcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZSBpbnN0YW5jZW9mIFdoZXJlQ2xhdXNlID9cbiAgICAgICAgICAgIG5ldyBjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZS5Db2xsZWN0aW9uKGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlKSA6XG4gICAgICAgICAgICBjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZTtcbiAgICAgICAgY29sbGVjdGlvbi5fY3R4LmVycm9yID0gVCA/IG5ldyBUKGVycikgOiBuZXcgVHlwZUVycm9yKGVycik7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbXB0eUNvbGxlY3Rpb24od2hlcmVDbGF1c2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3aGVyZUNsYXVzZS5Db2xsZWN0aW9uKHdoZXJlQ2xhdXNlLCBmdW5jdGlvbiAoKSB7IHJldHVybiByYW5nZUVxdWFsKFwiXCIpOyB9KS5saW1pdCgwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBwZXJGYWN0b3J5KGRpcikge1xuICAgICAgICByZXR1cm4gZGlyID09PSBcIm5leHRcIiA/XG4gICAgICAgICAgICBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50b1VwcGVyQ2FzZSgpOyB9IDpcbiAgICAgICAgICAgIGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRvTG93ZXJDYXNlKCk7IH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxvd2VyRmFjdG9yeShkaXIpIHtcbiAgICAgICAgcmV0dXJuIGRpciA9PT0gXCJuZXh0XCIgP1xuICAgICAgICAgICAgZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9Mb3dlckNhc2UoKTsgfSA6XG4gICAgICAgICAgICBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50b1VwcGVyQ2FzZSgpOyB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBuZXh0Q2FzaW5nKGtleSwgbG93ZXJLZXksIHVwcGVyTmVlZGxlLCBsb3dlck5lZWRsZSwgY21wLCBkaXIpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGtleS5sZW5ndGgsIGxvd2VyTmVlZGxlLmxlbmd0aCk7XG4gICAgICAgIHZhciBsbHAgPSAtMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGx3cktleUNoYXIgPSBsb3dlcktleVtpXTtcbiAgICAgICAgICAgIGlmIChsd3JLZXlDaGFyICE9PSBsb3dlck5lZWRsZVtpXSkge1xuICAgICAgICAgICAgICAgIGlmIChjbXAoa2V5W2ldLCB1cHBlck5lZWRsZVtpXSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCBpKSArIHVwcGVyTmVlZGxlW2ldICsgdXBwZXJOZWVkbGUuc3Vic3RyKGkgKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAoY21wKGtleVtpXSwgbG93ZXJOZWVkbGVbaV0pIDwgMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleS5zdWJzdHIoMCwgaSkgKyBsb3dlck5lZWRsZVtpXSArIHVwcGVyTmVlZGxlLnN1YnN0cihpICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGxscCA+PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCBsbHApICsgbG93ZXJLZXlbbGxwXSArIHVwcGVyTmVlZGxlLnN1YnN0cihsbHAgKyAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbXAoa2V5W2ldLCBsd3JLZXlDaGFyKSA8IDApXG4gICAgICAgICAgICAgICAgbGxwID0gaTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoIDwgbG93ZXJOZWVkbGUubGVuZ3RoICYmIGRpciA9PT0gXCJuZXh0XCIpXG4gICAgICAgICAgICByZXR1cm4ga2V5ICsgdXBwZXJOZWVkbGUuc3Vic3RyKGtleS5sZW5ndGgpO1xuICAgICAgICBpZiAobGVuZ3RoIDwga2V5Lmxlbmd0aCAmJiBkaXIgPT09IFwicHJldlwiKVxuICAgICAgICAgICAgcmV0dXJuIGtleS5zdWJzdHIoMCwgdXBwZXJOZWVkbGUubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIChsbHAgPCAwID8gbnVsbCA6IGtleS5zdWJzdHIoMCwgbGxwKSArIGxvd2VyTmVlZGxlW2xscF0gKyB1cHBlck5lZWRsZS5zdWJzdHIobGxwICsgMSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRJZ25vcmVDYXNlQWxnb3JpdGhtKHdoZXJlQ2xhdXNlLCBtYXRjaCwgbmVlZGxlcywgc3VmZml4KSB7XG4gICAgICAgIHZhciB1cHBlciwgbG93ZXIsIGNvbXBhcmUsIHVwcGVyTmVlZGxlcywgbG93ZXJOZWVkbGVzLCBkaXJlY3Rpb24sIG5leHRLZXlTdWZmaXgsIG5lZWRsZXNMZW4gPSBuZWVkbGVzLmxlbmd0aDtcbiAgICAgICAgaWYgKCFuZWVkbGVzLmV2ZXJ5KGZ1bmN0aW9uIChzKSB7IHJldHVybiB0eXBlb2YgcyA9PT0gJ3N0cmluZyc7IH0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFpbCh3aGVyZUNsYXVzZSwgU1RSSU5HX0VYUEVDVEVEKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBpbml0RGlyZWN0aW9uKGRpcikge1xuICAgICAgICAgICAgdXBwZXIgPSB1cHBlckZhY3RvcnkoZGlyKTtcbiAgICAgICAgICAgIGxvd2VyID0gbG93ZXJGYWN0b3J5KGRpcik7XG4gICAgICAgICAgICBjb21wYXJlID0gKGRpciA9PT0gXCJuZXh0XCIgPyBzaW1wbGVDb21wYXJlIDogc2ltcGxlQ29tcGFyZVJldmVyc2UpO1xuICAgICAgICAgICAgdmFyIG5lZWRsZUJvdW5kcyA9IG5lZWRsZXMubWFwKGZ1bmN0aW9uIChuZWVkbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBsb3dlcjogbG93ZXIobmVlZGxlKSwgdXBwZXI6IHVwcGVyKG5lZWRsZSkgfTtcbiAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZShhLmxvd2VyLCBiLmxvd2VyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXBwZXJOZWVkbGVzID0gbmVlZGxlQm91bmRzLm1hcChmdW5jdGlvbiAobmIpIHsgcmV0dXJuIG5iLnVwcGVyOyB9KTtcbiAgICAgICAgICAgIGxvd2VyTmVlZGxlcyA9IG5lZWRsZUJvdW5kcy5tYXAoZnVuY3Rpb24gKG5iKSB7IHJldHVybiBuYi5sb3dlcjsgfSk7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXI7XG4gICAgICAgICAgICBuZXh0S2V5U3VmZml4ID0gKGRpciA9PT0gXCJuZXh0XCIgPyBcIlwiIDogc3VmZml4KTtcbiAgICAgICAgfVxuICAgICAgICBpbml0RGlyZWN0aW9uKFwibmV4dFwiKTtcbiAgICAgICAgdmFyIGMgPSBuZXcgd2hlcmVDbGF1c2UuQ29sbGVjdGlvbih3aGVyZUNsYXVzZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UodXBwZXJOZWVkbGVzWzBdLCBsb3dlck5lZWRsZXNbbmVlZGxlc0xlbiAtIDFdICsgc3VmZml4KTsgfSk7XG4gICAgICAgIGMuX29uZGlyZWN0aW9uY2hhbmdlID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaW5pdERpcmVjdGlvbihkaXJlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZmlyc3RQb3NzaWJsZU5lZWRsZSA9IDA7XG4gICAgICAgIGMuX2FkZEFsZ29yaXRobShmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gY3Vyc29yLmtleTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB2YXIgbG93ZXJLZXkgPSBsb3dlcihrZXkpO1xuICAgICAgICAgICAgaWYgKG1hdGNoKGxvd2VyS2V5LCBsb3dlck5lZWRsZXMsIGZpcnN0UG9zc2libGVOZWVkbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbG93ZXN0UG9zc2libGVDYXNpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBmaXJzdFBvc3NpYmxlTmVlZGxlOyBpIDwgbmVlZGxlc0xlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXNpbmcgPSBuZXh0Q2FzaW5nKGtleSwgbG93ZXJLZXksIHVwcGVyTmVlZGxlc1tpXSwgbG93ZXJOZWVkbGVzW2ldLCBjb21wYXJlLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FzaW5nID09PSBudWxsICYmIGxvd2VzdFBvc3NpYmxlQ2FzaW5nID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RQb3NzaWJsZU5lZWRsZSA9IGkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsb3dlc3RQb3NzaWJsZUNhc2luZyA9PT0gbnVsbCB8fCBjb21wYXJlKGxvd2VzdFBvc3NpYmxlQ2FzaW5nLCBjYXNpbmcpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXN0UG9zc2libGVDYXNpbmcgPSBjYXNpbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvd2VzdFBvc3NpYmxlQ2FzaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkgeyBjdXJzb3IuY29udGludWUobG93ZXN0UG9zc2libGVDYXNpbmcgKyBuZXh0S2V5U3VmZml4KTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlUmFuZ2UobG93ZXIsIHVwcGVyLCBsb3dlck9wZW4sIHVwcGVyT3Blbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogMiAsXG4gICAgICAgICAgICBsb3dlcjogbG93ZXIsXG4gICAgICAgICAgICB1cHBlcjogdXBwZXIsXG4gICAgICAgICAgICBsb3dlck9wZW46IGxvd2VyT3BlbixcbiAgICAgICAgICAgIHVwcGVyT3BlbjogdXBwZXJPcGVuXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJhbmdlRXF1YWwodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IDEgLFxuICAgICAgICAgICAgbG93ZXI6IHZhbHVlLFxuICAgICAgICAgICAgdXBwZXI6IHZhbHVlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIFdoZXJlQ2xhdXNlID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFdoZXJlQ2xhdXNlKCkge1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaGVyZUNsYXVzZS5wcm90b3R5cGUsIFwiQ29sbGVjdGlvblwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY3R4LnRhYmxlLmRiLkNvbGxlY3Rpb247XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5iZXR3ZWVuID0gZnVuY3Rpb24gKGxvd2VyLCB1cHBlciwgaW5jbHVkZUxvd2VyLCBpbmNsdWRlVXBwZXIpIHtcbiAgICAgICAgICAgIGluY2x1ZGVMb3dlciA9IGluY2x1ZGVMb3dlciAhPT0gZmFsc2U7XG4gICAgICAgICAgICBpbmNsdWRlVXBwZXIgPSBpbmNsdWRlVXBwZXIgPT09IHRydWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy5fY21wKGxvd2VyLCB1cHBlcikgPiAwKSB8fFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5fY21wKGxvd2VyLCB1cHBlcikgPT09IDAgJiYgKGluY2x1ZGVMb3dlciB8fCBpbmNsdWRlVXBwZXIpICYmICEoaW5jbHVkZUxvd2VyICYmIGluY2x1ZGVVcHBlcikpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKGxvd2VyLCB1cHBlciwgIWluY2x1ZGVMb3dlciwgIWluY2x1ZGVVcHBlcik7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJhbmdlRXF1YWwodmFsdWUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmFib3ZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZSh2YWx1ZSwgdW5kZWZpbmVkLCB0cnVlKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5hYm92ZU9yRXF1YWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKHZhbHVlLCB1bmRlZmluZWQsIGZhbHNlKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5iZWxvdyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UodW5kZWZpbmVkLCB2YWx1ZSwgZmFsc2UsIHRydWUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmJlbG93T3JFcXVhbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UodW5kZWZpbmVkLCB2YWx1ZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBTVFJJTkdfRVhQRUNURUQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmV0d2VlbihzdHIsIHN0ciArIG1heFN0cmluZywgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5zdGFydHNXaXRoSWdub3JlQ2FzZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIGlmIChzdHIgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRzV2l0aChzdHIpO1xuICAgICAgICAgICAgcmV0dXJuIGFkZElnbm9yZUNhc2VBbGdvcml0aG0odGhpcywgZnVuY3Rpb24gKHgsIGEpIHsgcmV0dXJuIHguaW5kZXhPZihhWzBdKSA9PT0gMDsgfSwgW3N0cl0sIG1heFN0cmluZyk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5lcXVhbHNJZ25vcmVDYXNlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIGFkZElnbm9yZUNhc2VBbGdvcml0aG0odGhpcywgZnVuY3Rpb24gKHgsIGEpIHsgcmV0dXJuIHggPT09IGFbMF07IH0sIFtzdHJdLCBcIlwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmFueU9mSWdub3JlQ2FzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBnZXRBcnJheU9mLmFwcGx5KE5PX0NIQVJfQVJSQVksIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIGFkZElnbm9yZUNhc2VBbGdvcml0aG0odGhpcywgZnVuY3Rpb24gKHgsIGEpIHsgcmV0dXJuIGEuaW5kZXhPZih4KSAhPT0gLTE7IH0sIHNldCwgXCJcIik7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5zdGFydHNXaXRoQW55T2ZJZ25vcmVDYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4gYS5zb21lKGZ1bmN0aW9uIChuKSB7IHJldHVybiB4LmluZGV4T2YobikgPT09IDA7IH0pOyB9LCBzZXQsIG1heFN0cmluZyk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5hbnlPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgdmFyIGNvbXBhcmUgPSB0aGlzLl9jbXA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNldC5zb3J0KGNvbXBhcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGMgPSBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKHNldFswXSwgc2V0W3NldC5sZW5ndGggLSAxXSk7IH0pO1xuICAgICAgICAgICAgYy5fb25kaXJlY3Rpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29tcGFyZSA9IChkaXJlY3Rpb24gPT09IFwibmV4dFwiID9cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2FzY2VuZGluZyA6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9kZXNjZW5kaW5nKTtcbiAgICAgICAgICAgICAgICBzZXQuc29ydChjb21wYXJlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBjLl9hZGRBbGdvcml0aG0oZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjdXJzb3Iua2V5O1xuICAgICAgICAgICAgICAgIHdoaWxlIChjb21wYXJlKGtleSwgc2V0W2ldKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gc2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZShrZXksIHNldFtpXSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKGZ1bmN0aW9uICgpIHsgY3Vyc29yLmNvbnRpbnVlKHNldFtpXSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLm5vdEVxdWFsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbkFueVJhbmdlKFtbbWluS2V5LCB2YWx1ZV0sIFt2YWx1ZSwgdGhpcy5kYi5fbWF4S2V5XV0sIHsgaW5jbHVkZUxvd2VyczogZmFsc2UsIGluY2x1ZGVVcHBlcnM6IGZhbHNlIH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUubm9uZU9mID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzZXQuc29ydCh0aGlzLl9hc2NlbmRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmFuZ2VzID0gc2V0LnJlZHVjZShmdW5jdGlvbiAocmVzLCB2YWwpIHsgcmV0dXJuIHJlcyA/XG4gICAgICAgICAgICAgICAgcmVzLmNvbmNhdChbW3Jlc1tyZXMubGVuZ3RoIC0gMV1bMV0sIHZhbF1dKSA6XG4gICAgICAgICAgICAgICAgW1ttaW5LZXksIHZhbF1dOyB9LCBudWxsKTtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKFtzZXRbc2V0Lmxlbmd0aCAtIDFdLCB0aGlzLmRiLl9tYXhLZXldKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluQW55UmFuZ2UocmFuZ2VzLCB7IGluY2x1ZGVMb3dlcnM6IGZhbHNlLCBpbmNsdWRlVXBwZXJzOiBmYWxzZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmluQW55UmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2VzLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNtcCA9IHRoaXMuX2NtcCwgYXNjZW5kaW5nID0gdGhpcy5fYXNjZW5kaW5nLCBkZXNjZW5kaW5nID0gdGhpcy5fZGVzY2VuZGluZywgbWluID0gdGhpcy5fbWluLCBtYXggPSB0aGlzLl9tYXg7XG4gICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCFyYW5nZXMuZXZlcnkoZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlWzBdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VbMV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBhc2NlbmRpbmcocmFuZ2VbMF0sIHJhbmdlWzFdKSA8PSAwO1xuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBcIkZpcnN0IGFyZ3VtZW50IHRvIGluQW55UmFuZ2UoKSBtdXN0IGJlIGFuIEFycmF5IG9mIHR3by12YWx1ZSBBcnJheXMgW2xvd2VyLHVwcGVyXSB3aGVyZSB1cHBlciBtdXN0IG5vdCBiZSBsb3dlciB0aGFuIGxvd2VyXCIsIGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmNsdWRlTG93ZXJzID0gIW9wdGlvbnMgfHwgb3B0aW9ucy5pbmNsdWRlTG93ZXJzICE9PSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBpbmNsdWRlVXBwZXJzID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGVVcHBlcnMgPT09IHRydWU7XG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRSYW5nZShyYW5nZXMsIG5ld1JhbmdlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwLCBsID0gcmFuZ2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbXAobmV3UmFuZ2VbMF0sIHJhbmdlWzFdKSA8IDAgJiYgY21wKG5ld1JhbmdlWzFdLCByYW5nZVswXSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZVswXSA9IG1pbihyYW5nZVswXSwgbmV3UmFuZ2VbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VbMV0gPSBtYXgocmFuZ2VbMV0sIG5ld1JhbmdlWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpID09PSBsKVxuICAgICAgICAgICAgICAgICAgICByYW5nZXMucHVzaChuZXdSYW5nZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzb3J0RGlyZWN0aW9uID0gYXNjZW5kaW5nO1xuICAgICAgICAgICAgZnVuY3Rpb24gcmFuZ2VTb3J0ZXIoYSwgYikgeyByZXR1cm4gc29ydERpcmVjdGlvbihhWzBdLCBiWzBdKTsgfVxuICAgICAgICAgICAgdmFyIHNldDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2V0ID0gcmFuZ2VzLnJlZHVjZShhZGRSYW5nZSwgW10pO1xuICAgICAgICAgICAgICAgIHNldC5zb3J0KHJhbmdlU29ydGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByYW5nZVBvcyA9IDA7XG4gICAgICAgICAgICB2YXIga2V5SXNCZXlvbmRDdXJyZW50RW50cnkgPSBpbmNsdWRlVXBwZXJzID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBhc2NlbmRpbmcoa2V5LCBzZXRbcmFuZ2VQb3NdWzFdKSA+IDA7IH0gOlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGFzY2VuZGluZyhrZXksIHNldFtyYW5nZVBvc11bMV0pID49IDA7IH07XG4gICAgICAgICAgICB2YXIga2V5SXNCZWZvcmVDdXJyZW50RW50cnkgPSBpbmNsdWRlTG93ZXJzID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBkZXNjZW5kaW5nKGtleSwgc2V0W3JhbmdlUG9zXVswXSkgPiAwOyB9IDpcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBkZXNjZW5kaW5nKGtleSwgc2V0W3JhbmdlUG9zXVswXSkgPj0gMDsgfTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGtleVdpdGhpbkN1cnJlbnRSYW5nZShrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWtleUlzQmV5b25kQ3VycmVudEVudHJ5KGtleSkgJiYgIWtleUlzQmVmb3JlQ3VycmVudEVudHJ5KGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2hlY2tLZXkgPSBrZXlJc0JleW9uZEN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgIHZhciBjID0gbmV3IHRoaXMuQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZShzZXRbMF1bMF0sIHNldFtzZXQubGVuZ3RoIC0gMV1bMV0sICFpbmNsdWRlTG93ZXJzLCAhaW5jbHVkZVVwcGVycyk7IH0pO1xuICAgICAgICAgICAgYy5fb25kaXJlY3Rpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tLZXkgPSBrZXlJc0JleW9uZEN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbiA9IGFzY2VuZGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrS2V5ID0ga2V5SXNCZWZvcmVDdXJyZW50RW50cnk7XG4gICAgICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb24gPSBkZXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXQuc29ydChyYW5nZVNvcnRlcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYy5fYWRkQWxnb3JpdGhtKGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gY3Vyc29yLmtleTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY2hlY2tLZXkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICArK3JhbmdlUG9zO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VQb3MgPT09IHNldC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGtleVdpdGhpbkN1cnJlbnRSYW5nZShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChfdGhpcy5fY21wKGtleSwgc2V0W3JhbmdlUG9zXVsxXSkgPT09IDAgfHwgX3RoaXMuX2NtcChrZXksIHNldFtyYW5nZVBvc11bMF0pID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnREaXJlY3Rpb24gPT09IGFzY2VuZGluZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoc2V0W3JhbmdlUG9zXVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKHNldFtyYW5nZVBvc11bMV0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5zdGFydHNXaXRoQW55T2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKCFzZXQuZXZlcnkoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHR5cGVvZiBzID09PSAnc3RyaW5nJzsgfSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBcInN0YXJ0c1dpdGhBbnlPZigpIG9ubHkgd29ya3Mgd2l0aCBzdHJpbmdzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNldC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluQW55UmFuZ2Uoc2V0Lm1hcChmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBbc3RyLCBzdHIgKyBtYXhTdHJpbmddOyB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBXaGVyZUNsYXVzZTtcbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlV2hlcmVDbGF1c2VDb25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoV2hlcmVDbGF1c2UucHJvdG90eXBlLCBmdW5jdGlvbiBXaGVyZUNsYXVzZSh0YWJsZSwgaW5kZXgsIG9yQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdGhpcy5fY3R4ID0ge1xuICAgICAgICAgICAgICAgIHRhYmxlOiB0YWJsZSxcbiAgICAgICAgICAgICAgICBpbmRleDogaW5kZXggPT09IFwiOmlkXCIgPyBudWxsIDogaW5kZXgsXG4gICAgICAgICAgICAgICAgb3I6IG9yQ29sbGVjdGlvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuX2NtcCA9IHRoaXMuX2FzY2VuZGluZyA9IGNtcDtcbiAgICAgICAgICAgIHRoaXMuX2Rlc2NlbmRpbmcgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gY21wKGIsIGEpOyB9O1xuICAgICAgICAgICAgdGhpcy5fbWF4ID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA+IDAgPyBhIDogYjsgfTtcbiAgICAgICAgICAgIHRoaXMuX21pbiA9IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBjbXAoYSwgYikgPCAwID8gYSA6IGI7IH07XG4gICAgICAgICAgICB0aGlzLl9JREJLZXlSYW5nZSA9IGRiLl9kZXBzLklEQktleVJhbmdlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9JREJLZXlSYW5nZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5NaXNzaW5nQVBJKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldmVudCk7XG4gICAgICAgICAgICByZWplY3QoZXZlbnQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KVxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICB2YXIgREVYSUVfU1RPUkFHRV9NVVRBVEVEX0VWRU5UX05BTUUgPSAnc3RvcmFnZW11dGF0ZWQnO1xuICAgIHZhciBTVE9SQUdFX01VVEFURURfRE9NX0VWRU5UX05BTUUgPSAneC1zdG9yYWdlbXV0YXRlZC0xJztcbiAgICB2YXIgZ2xvYmFsRXZlbnRzID0gRXZlbnRzKG51bGwsIERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FKTtcblxuICAgIHZhciBUcmFuc2FjdGlvbiA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBUcmFuc2FjdGlvbigpIHtcbiAgICAgICAgfVxuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuX2xvY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhc3NlcnQoIVBTRC5nbG9iYWwpO1xuICAgICAgICAgICAgKyt0aGlzLl9yZWN1bG9jaztcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZWN1bG9jayA9PT0gMSAmJiAhUFNELmdsb2JhbClcbiAgICAgICAgICAgICAgICBQU0QubG9ja093bmVyRm9yID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuX3VubG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFzc2VydCghUFNELmdsb2JhbCk7XG4gICAgICAgICAgICBpZiAoLS10aGlzLl9yZWN1bG9jayA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmICghUFNELmdsb2JhbClcbiAgICAgICAgICAgICAgICAgICAgUFNELmxvY2tPd25lckZvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuX2Jsb2NrZWRGdW5jcy5sZW5ndGggPiAwICYmICF0aGlzLl9sb2NrZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm5BbmRQU0QgPSB0aGlzLl9ibG9ja2VkRnVuY3Muc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZVBTRChmbkFuZFBTRFsxXSwgZm5BbmRQU0RbMF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLl9sb2NrZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjdWxvY2sgJiYgUFNELmxvY2tPd25lckZvciAhPT0gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpZGJ0cmFucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICghdGhpcy5tb2RlKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgdmFyIGlkYmRiID0gdGhpcy5kYi5pZGJkYjtcbiAgICAgICAgICAgIHZhciBkYk9wZW5FcnJvciA9IHRoaXMuZGIuX3N0YXRlLmRiT3BlbkVycm9yO1xuICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLmlkYnRyYW5zKTtcbiAgICAgICAgICAgIGlmICghaWRidHJhbnMgJiYgIWlkYmRiKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChkYk9wZW5FcnJvciAmJiBkYk9wZW5FcnJvci5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJEYXRhYmFzZUNsb3NlZEVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZChkYk9wZW5FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJNaXNzaW5nQVBJRXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoZGJPcGVuRXJyb3IubWVzc2FnZSwgZGJPcGVuRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuT3BlbkZhaWxlZChkYk9wZW5FcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5UcmFuc2FjdGlvbkluYWN0aXZlKCk7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5fY29tcGxldGlvbi5fc3RhdGUgPT09IG51bGwpO1xuICAgICAgICAgICAgaWRidHJhbnMgPSB0aGlzLmlkYnRyYW5zID0gaWRidHJhbnMgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5kYi5jb3JlXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5kYi5jb3JlLnRyYW5zYWN0aW9uKHRoaXMuc3RvcmVOYW1lcywgdGhpcy5tb2RlLCB7IGR1cmFiaWxpdHk6IHRoaXMuY2hyb21lVHJhbnNhY3Rpb25EdXJhYmlsaXR5IH0pXG4gICAgICAgICAgICAgICAgICAgIDogaWRiZGIudHJhbnNhY3Rpb24odGhpcy5zdG9yZU5hbWVzLCB0aGlzLm1vZGUsIHsgZHVyYWJpbGl0eTogdGhpcy5jaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHkgfSkpO1xuICAgICAgICAgICAgaWRidHJhbnMub25lcnJvciA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQoZXYpO1xuICAgICAgICAgICAgICAgIF90aGlzLl9yZWplY3QoaWRidHJhbnMuZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmFib3J0ID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlICYmIF90aGlzLl9yZWplY3QobmV3IGV4Y2VwdGlvbnMuQWJvcnQoaWRidHJhbnMuZXJyb3IpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbihcImFib3J0XCIpLmZpcmUoZXYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmNvbXBsZXRlID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Jlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoJ211dGF0ZWRQYXJ0cycgaW4gaWRidHJhbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRXZlbnRzLnN0b3JhZ2VtdXRhdGVkLmZpcmUoaWRidHJhbnNbXCJtdXRhdGVkUGFydHNcIl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5fcHJvbWlzZSA9IGZ1bmN0aW9uIChtb2RlLCBmbiwgYldyaXRlTG9jaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChtb2RlID09PSAncmVhZHdyaXRlJyAmJiB0aGlzLm1vZGUgIT09ICdyZWFkd3JpdGUnKVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuUmVhZE9ubHkoXCJUcmFuc2FjdGlvbiBpcyByZWFkb25seVwiKSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuVHJhbnNhY3Rpb25JbmFjdGl2ZSgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9sb2NrZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Jsb2NrZWRGdW5jcy5wdXNoKFtmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3Byb21pc2UobW9kZSwgZm4sIGJXcml0ZUxvY2spLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIFBTRF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYldyaXRlTG9jaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbG9jaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ2ID0gZm4ocmVzb2x2ZSwgcmVqZWN0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnYgJiYgcnYudGhlbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydi50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBwLmZpbmFsbHkoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX3VubG9jaygpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcC5fbGliID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBmbihyZXNvbHZlLCByZWplY3QsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ2ICYmIHJ2LnRoZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBydi50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcC5fbGliID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLl9yb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuX3Jvb3QoKSA6IHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS53YWl0Rm9yID0gZnVuY3Rpb24gKHByb21pc2VMaWtlKSB7XG4gICAgICAgICAgICB2YXIgcm9vdCA9IHRoaXMuX3Jvb3QoKTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gRGV4aWVQcm9taXNlLnJlc29sdmUocHJvbWlzZUxpa2UpO1xuICAgICAgICAgICAgaWYgKHJvb3QuX3dhaXRpbmdGb3IpIHtcbiAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nRm9yID0gcm9vdC5fd2FpdGluZ0Zvci50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb21pc2U7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcm9vdC5fd2FpdGluZ0ZvciA9IHByb21pc2U7XG4gICAgICAgICAgICAgICAgcm9vdC5fd2FpdGluZ1F1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gcm9vdC5pZGJ0cmFucy5vYmplY3RTdG9yZShyb290LnN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgICAgIChmdW5jdGlvbiBzcGluKCkge1xuICAgICAgICAgICAgICAgICAgICArK3Jvb3QuX3NwaW5Db3VudDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJvb3QuX3dhaXRpbmdRdWV1ZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAocm9vdC5fd2FpdGluZ1F1ZXVlLnNoaWZ0KCkpKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb290Ll93YWl0aW5nRm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuZ2V0KC1JbmZpbml0eSkub25zdWNjZXNzID0gc3BpbjtcbiAgICAgICAgICAgICAgICB9KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGN1cnJlbnRXYWl0UHJvbWlzZSA9IHJvb3QuX3dhaXRpbmdGb3I7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJvb3QuX3dhaXRpbmdRdWV1ZS5wdXNoKHdyYXAocmVzb2x2ZS5iaW5kKG51bGwsIHJlcykpKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcm9vdC5fd2FpdGluZ1F1ZXVlLnB1c2god3JhcChyZWplY3QuYmluZChudWxsLCBlcnIpKSk7IH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdC5fd2FpdGluZ0ZvciA9PT0gY3VycmVudFdhaXRQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nRm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaWRidHJhbnMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWRidHJhbnMuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QobmV3IGV4Y2VwdGlvbnMuQWJvcnQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS50YWJsZSA9IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBtZW1vaXplZFRhYmxlcyA9ICh0aGlzLl9tZW1vaXplZFRhYmxlcyB8fCAodGhpcy5fbWVtb2l6ZWRUYWJsZXMgPSB7fSkpO1xuICAgICAgICAgICAgaWYgKGhhc093bihtZW1vaXplZFRhYmxlcywgdGFibGVOYW1lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVtb2l6ZWRUYWJsZXNbdGFibGVOYW1lXTtcbiAgICAgICAgICAgIHZhciB0YWJsZVNjaGVtYSA9IHRoaXMuc2NoZW1hW3RhYmxlTmFtZV07XG4gICAgICAgICAgICBpZiAoIXRhYmxlU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTm90Rm91bmQoXCJUYWJsZSBcIiArIHRhYmxlTmFtZSArIFwiIG5vdCBwYXJ0IG9mIHRyYW5zYWN0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uQm91bmRUYWJsZSA9IG5ldyB0aGlzLmRiLlRhYmxlKHRhYmxlTmFtZSwgdGFibGVTY2hlbWEsIHRoaXMpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25Cb3VuZFRhYmxlLmNvcmUgPSB0aGlzLmRiLmNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgIG1lbW9pemVkVGFibGVzW3RhYmxlTmFtZV0gPSB0cmFuc2FjdGlvbkJvdW5kVGFibGU7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Cb3VuZFRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVHJhbnNhY3Rpb247XG4gICAgfSgpKTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRyYW5zYWN0aW9uQ29uc3RydWN0b3IoZGIpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VDbGFzc0NvbnN0cnVjdG9yKFRyYW5zYWN0aW9uLnByb3RvdHlwZSwgZnVuY3Rpb24gVHJhbnNhY3Rpb24obW9kZSwgc3RvcmVOYW1lcywgZGJzY2hlbWEsIGNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eSwgcGFyZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKG1vZGUgIT09ICdyZWFkb25seScpXG4gICAgICAgICAgICAgICAgc3RvcmVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeVByb3BzID0gKF9hID0gZGJzY2hlbWFbc3RvcmVOYW1lXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnlQcm9wcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHlQcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlTmFtZXMgPSBzdG9yZU5hbWVzLmNvbmNhdCh5UHJvcHMubWFwKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLnVwZGF0ZXNUYWJsZTsgfSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmVOYW1lcyA9IHN0b3JlTmFtZXM7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYSA9IGRic2NoZW1hO1xuICAgICAgICAgICAgdGhpcy5jaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHkgPSBjaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHk7XG4gICAgICAgICAgICB0aGlzLmlkYnRyYW5zID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub24gPSBFdmVudHModGhpcywgXCJjb21wbGV0ZVwiLCBcImVycm9yXCIsIFwiYWJvcnRcIik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudCB8fCBudWxsO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fcmVjdWxvY2sgPSAwO1xuICAgICAgICAgICAgdGhpcy5fYmxvY2tlZEZ1bmNzID0gW107XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl93YWl0aW5nRm9yID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3dhaXRpbmdRdWV1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9zcGluQ291bnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5fY29tcGxldGlvbiA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0aW9uLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uLmNvbXBsZXRlLmZpcmUoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdhc0FjdGl2ZSA9IF90aGlzLmFjdGl2ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbi5lcnJvci5maXJlKGUpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudCA/XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5fcmVqZWN0KGUpIDpcbiAgICAgICAgICAgICAgICAgICAgd2FzQWN0aXZlICYmIF90aGlzLmlkYnRyYW5zICYmIF90aGlzLmlkYnRyYW5zLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVJbmRleFNwZWMobmFtZSwga2V5UGF0aCwgdW5pcXVlLCBtdWx0aSwgYXV0bywgY29tcG91bmQsIGlzUHJpbUtleSwgdHlwZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGtleVBhdGg6IGtleVBhdGgsXG4gICAgICAgICAgICB1bmlxdWU6IHVuaXF1ZSxcbiAgICAgICAgICAgIG11bHRpOiBtdWx0aSxcbiAgICAgICAgICAgIGF1dG86IGF1dG8sXG4gICAgICAgICAgICBjb21wb3VuZDogY29tcG91bmQsXG4gICAgICAgICAgICBzcmM6ICh1bmlxdWUgJiYgIWlzUHJpbUtleSA/ICcmJyA6ICcnKSArIChtdWx0aSA/ICcqJyA6ICcnKSArIChhdXRvID8gXCIrK1wiIDogXCJcIikgKyBuYW1lRnJvbUtleVBhdGgoa2V5UGF0aCksXG4gICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5hbWVGcm9tS2V5UGF0aChrZXlQYXRoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAga2V5UGF0aCA6XG4gICAgICAgICAgICBrZXlQYXRoID8gKCdbJyArIFtdLmpvaW4uY2FsbChrZXlQYXRoLCAnKycpICsgJ10nKSA6IFwiXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVGFibGVTY2hlbWEobmFtZSwgcHJpbUtleSwgaW5kZXhlcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHByaW1LZXk6IHByaW1LZXksXG4gICAgICAgICAgICBpbmRleGVzOiBpbmRleGVzLFxuICAgICAgICAgICAgbWFwcGVkQ2xhc3M6IG51bGwsXG4gICAgICAgICAgICBpZHhCeU5hbWU6IGFycmF5VG9PYmplY3QoaW5kZXhlcywgZnVuY3Rpb24gKGluZGV4KSB7IHJldHVybiBbaW5kZXgubmFtZSwgaW5kZXhdOyB9KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzYWZhcmlNdWx0aVN0b3JlRml4KHN0b3JlTmFtZXMpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JlTmFtZXMubGVuZ3RoID09PSAxID8gc3RvcmVOYW1lc1swXSA6IHN0b3JlTmFtZXM7XG4gICAgfVxuICAgIHZhciBnZXRNYXhLZXkgPSBmdW5jdGlvbiAoSWRiS2V5UmFuZ2UpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIElkYktleVJhbmdlLm9ubHkoW1tdXSk7XG4gICAgICAgICAgICBnZXRNYXhLZXkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbW11dOyB9O1xuICAgICAgICAgICAgcmV0dXJuIFtbXV07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGdldE1heEtleSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1heFN0cmluZzsgfTtcbiAgICAgICAgICAgIHJldHVybiBtYXhTdHJpbmc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0S2V5RXh0cmFjdG9yKGtleVBhdGgpIHtcbiAgICAgICAgaWYgKGtleVBhdGggPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRTaW5nbGVQYXRoS2V5RXh0cmFjdG9yKGtleVBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIGdldEJ5S2V5UGF0aChvYmosIGtleVBhdGgpOyB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFNpbmdsZVBhdGhLZXlFeHRyYWN0b3Ioa2V5UGF0aCkge1xuICAgICAgICB2YXIgc3BsaXQgPSBrZXlQYXRoLnNwbGl0KCcuJyk7XG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmpba2V5UGF0aF07IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gZ2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCk7IH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcnJheWlmeShhcnJheUxpa2UpIHtcbiAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoYXJyYXlMaWtlKTtcbiAgICB9XG4gICAgdmFyIF9pZF9jb3VudGVyID0gMDtcbiAgICBmdW5jdGlvbiBnZXRLZXlQYXRoQWxpYXMoa2V5UGF0aCkge1xuICAgICAgICByZXR1cm4ga2V5UGF0aCA9PSBudWxsID9cbiAgICAgICAgICAgIFwiOmlkXCIgOlxuICAgICAgICAgICAgdHlwZW9mIGtleVBhdGggPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAgICAgICBrZXlQYXRoIDpcbiAgICAgICAgICAgICAgICBcIltcIi5jb25jYXQoa2V5UGF0aC5qb2luKCcrJyksIFwiXVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlREJDb3JlKGRiLCBJZGJLZXlSYW5nZSwgdG1wVHJhbnMpIHtcbiAgICAgICAgZnVuY3Rpb24gZXh0cmFjdFNjaGVtYShkYiwgdHJhbnMpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZXMgPSBhcnJheWlmeShkYi5vYmplY3RTdG9yZU5hbWVzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGRiLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlczogdGFibGVzLm1hcChmdW5jdGlvbiAodGFibGUpIHsgcmV0dXJuIHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlKTsgfSkubWFwKGZ1bmN0aW9uIChzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBzdG9yZS5rZXlQYXRoLCBhdXRvSW5jcmVtZW50ID0gc3RvcmUuYXV0b0luY3JlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21wb3VuZCA9IGlzQXJyYXkoa2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3V0Ym91bmQgPSBrZXlQYXRoID09IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhCeUtleVBhdGggPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RvcmUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0Ym91bmQ6IG91dGJvdW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb3VuZDogY29tcG91bmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IGtleVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IGF1dG9JbmNyZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEtleTogZ2V0S2V5RXh0cmFjdG9yKGtleVBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleGVzOiBhcnJheWlmeShzdG9yZS5pbmRleE5hbWVzKS5tYXAoZnVuY3Rpb24gKGluZGV4TmFtZSkgeyByZXR1cm4gc3RvcmUuaW5kZXgoaW5kZXhOYW1lKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBpbmRleC5uYW1lLCB1bmlxdWUgPSBpbmRleC51bmlxdWUsIG11bHRpRW50cnkgPSBpbmRleC5tdWx0aUVudHJ5LCBrZXlQYXRoID0gaW5kZXgua2V5UGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvdW5kID0gaXNBcnJheShrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb3VuZDogY29tcG91bmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBrZXlQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiB1bmlxdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aUVudHJ5OiBtdWx0aUVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEtleTogZ2V0S2V5RXh0cmFjdG9yKGtleVBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4QnlLZXlQYXRoW2dldEtleVBhdGhBbGlhcyhrZXlQYXRoKV0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0SW5kZXhCeUtleVBhdGg6IGZ1bmN0aW9uIChrZXlQYXRoKSB7IHJldHVybiBpbmRleEJ5S2V5UGF0aFtnZXRLZXlQYXRoQWxpYXMoa2V5UGF0aCldOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhCeUtleVBhdGhbXCI6aWRcIl0gPSByZXN1bHQucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleEJ5S2V5UGF0aFtnZXRLZXlQYXRoQWxpYXMoa2V5UGF0aCldID0gcmVzdWx0LnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaGFzR2V0QWxsOiB0YWJsZXMubGVuZ3RoID4gMCAmJiAoJ2dldEFsbCcgaW4gdHJhbnMub2JqZWN0U3RvcmUodGFibGVzWzBdKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgISh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhLyhDaHJvbWVcXC98RWRnZVxcLykvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIFtdLmNvbmNhdChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9TYWZhcmlcXC8oXFxkKikvKSlbMV0gPCA2MDQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VJREJLZXlSYW5nZShyYW5nZSkge1xuICAgICAgICAgICAgaWYgKHJhbmdlLnR5cGUgPT09IDMgKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgaWYgKHJhbmdlLnR5cGUgPT09IDQgKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjb252ZXJ0IG5ldmVyIHR5cGUgdG8gSURCS2V5UmFuZ2VcIik7XG4gICAgICAgICAgICB2YXIgbG93ZXIgPSByYW5nZS5sb3dlciwgdXBwZXIgPSByYW5nZS51cHBlciwgbG93ZXJPcGVuID0gcmFuZ2UubG93ZXJPcGVuLCB1cHBlck9wZW4gPSByYW5nZS51cHBlck9wZW47XG4gICAgICAgICAgICB2YXIgaWRiUmFuZ2UgPSBsb3dlciA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICB1cHBlciA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgbnVsbCA6XG4gICAgICAgICAgICAgICAgICAgIElkYktleVJhbmdlLnVwcGVyQm91bmQodXBwZXIsICEhdXBwZXJPcGVuKSA6XG4gICAgICAgICAgICAgICAgdXBwZXIgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgIElkYktleVJhbmdlLmxvd2VyQm91bmQobG93ZXIsICEhbG93ZXJPcGVuKSA6XG4gICAgICAgICAgICAgICAgICAgIElkYktleVJhbmdlLmJvdW5kKGxvd2VyLCB1cHBlciwgISFsb3dlck9wZW4sICEhdXBwZXJPcGVuKTtcbiAgICAgICAgICAgIHJldHVybiBpZGJSYW5nZTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVEYkNvcmVUYWJsZSh0YWJsZVNjaGVtYSkge1xuICAgICAgICAgICAgdmFyIHRhYmxlTmFtZSA9IHRhYmxlU2NoZW1hLm5hbWU7XG4gICAgICAgICAgICBmdW5jdGlvbiBtdXRhdGUoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSBfYS50cmFucywgdHlwZSA9IF9hLnR5cGUsIGtleXMgPSBfYS5rZXlzLCB2YWx1ZXMgPSBfYS52YWx1ZXMsIHJhbmdlID0gX2EucmFuZ2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IHdyYXAocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvdXRib3VuZCA9IHN0b3JlLmtleVBhdGggPT0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQWRkT3JQdXQgPSB0eXBlID09PSBcInB1dFwiIHx8IHR5cGUgPT09IFwiYWRkXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNBZGRPclB1dCAmJiB0eXBlICE9PSAnZGVsZXRlJyAmJiB0eXBlICE9PSAnZGVsZXRlUmFuZ2UnKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcGVyYXRpb24gdHlwZTogXCIgKyB0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IChrZXlzIHx8IHZhbHVlcyB8fCB7IGxlbmd0aDogMSB9KS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlzICYmIHZhbHVlcyAmJiBrZXlzLmxlbmd0aCAhPT0gdmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2l2ZW4ga2V5cyBhcnJheSBtdXN0IGhhdmUgc2FtZSBsZW5ndGggYXMgZ2l2ZW4gdmFsdWVzIGFycmF5LlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyBudW1GYWlsdXJlczogMCwgZmFpbHVyZXM6IHt9LCByZXN1bHRzOiBbXSwgbGFzdFJlc3VsdDogdW5kZWZpbmVkIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmFpbHVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bUZhaWx1cmVzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKytudW1GYWlsdXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdkZWxldGVSYW5nZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS50eXBlID09PSA0IClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IG51bUZhaWx1cmVzOiBudW1GYWlsdXJlcywgZmFpbHVyZXM6IGZhaWx1cmVzLCByZXN1bHRzOiBbXSwgbGFzdFJlc3VsdDogdW5kZWZpbmVkIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlLnR5cGUgPT09IDMgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXMucHVzaChyZXEgPSBzdG9yZS5jbGVhcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXFzLnB1c2gocmVxID0gc3RvcmUuZGVsZXRlKG1ha2VJREJLZXlSYW5nZShyYW5nZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IGlzQWRkT3JQdXQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGJvdW5kID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3ZhbHVlcywga2V5c10gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWVzLCBudWxsXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2tleXMsIG51bGxdLCBhcmdzMSA9IF9hWzBdLCBhcmdzMiA9IF9hWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWRkT3JQdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXMucHVzaChyZXEgPSAoYXJnczIgJiYgYXJnczJbaV0gIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVt0eXBlXShhcmdzMVtpXSwgYXJnczJbaV0pIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlW3R5cGVdKGFyZ3MxW2ldKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGVycm9ySGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXMucHVzaChyZXEgPSBzdG9yZVt0eXBlXShhcmdzMVtpXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGVycm9ySGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvbmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0UmVzdWx0ID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXMuZm9yRWFjaChmdW5jdGlvbiAocmVxLCBpKSB7IHJldHVybiByZXEuZXJyb3IgIT0gbnVsbCAmJiAoZmFpbHVyZXNbaV0gPSByZXEuZXJyb3IpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUZhaWx1cmVzOiBudW1GYWlsdXJlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlczogZmFpbHVyZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogdHlwZSA9PT0gXCJkZWxldGVcIiA/IGtleXMgOiByZXFzLm1hcChmdW5jdGlvbiAocmVxKSB7IHJldHVybiByZXEucmVzdWx0OyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVzdWx0OiBsYXN0UmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlcihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGRvbmU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBvcGVuQ3Vyc29yKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gX2EudHJhbnMsIHZhbHVlcyA9IF9hLnZhbHVlcywgcXVlcnkgPSBfYS5xdWVyeSwgcmV2ZXJzZSA9IF9hLnJldmVyc2UsIHVuaXF1ZSA9IF9hLnVuaXF1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gd3JhcChyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcXVlcnkuaW5kZXgsIHJhbmdlID0gcXVlcnkucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBpbmRleC5pc1ByaW1hcnlLZXkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuaW5kZXgoaW5kZXgubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSByZXZlcnNlID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwcmV2dW5pcXVlXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHJldlwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuZXh0dW5pcXVlXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmV4dFwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gdmFsdWVzIHx8ICEoJ29wZW5LZXlDdXJzb3InIGluIHNvdXJjZSkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLm9wZW5DdXJzb3IobWFrZUlEQktleVJhbmdlKHJhbmdlKSwgZGlyZWN0aW9uKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2Uub3BlbktleUN1cnNvcihtYWtlSURCS2V5UmFuZ2UocmFuZ2UpLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5fX19pZCA9ICsrX2lkX2NvdW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jdXJzb3JDb250aW51ZSA9IGN1cnNvci5jb250aW51ZS5iaW5kKGN1cnNvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2N1cnNvckNvbnRpbnVlUHJpbWFyeUtleSA9IGN1cnNvci5jb250aW51ZVByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2N1cnNvckNvbnRpbnVlUHJpbWFyeUtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5ID0gX2N1cnNvckNvbnRpbnVlUHJpbWFyeUtleS5iaW5kKGN1cnNvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2N1cnNvckFkdmFuY2UgPSBjdXJzb3IuYWR2YW5jZS5iaW5kKGN1cnNvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9UaHJvd0N1cnNvcklzTm90U3RhcnRlZCA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiQ3Vyc29yIG5vdCBzdGFydGVkXCIpOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvVGhyb3dDdXJzb3JJc1N0b3BwZWQgPSBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIkN1cnNvciBub3Qgc3RvcHBlZFwiKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci50cmFucyA9IHRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnN0b3AgPSBjdXJzb3IuY29udGludWUgPSBjdXJzb3IuY29udGludWVQcmltYXJ5S2V5ID0gY3Vyc29yLmFkdmFuY2UgPSBkb1Rocm93Q3Vyc29ySXNOb3RTdGFydGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmZhaWwgPSB3cmFwKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnb3RPbmUgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXJ0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdvdE9uZS0tID8gX3RoaXMuY29udGludWUoKSA6IF90aGlzLnN0b3AoKTsgfSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpczsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnN0YXJ0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZUl0ZXJhdGlvbiwgcmVqZWN0SXRlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVJdGVyYXRpb24gPSB3cmFwKHJlc29sdmVJdGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3RJdGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZmFpbCA9IHJlamVjdEl0ZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnN0b3AgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5zdG9wID0gY3Vyc29yLmNvbnRpbnVlID0gY3Vyc29yLmNvbnRpbnVlUHJpbWFyeUtleSA9IGN1cnNvci5hZHZhbmNlID0gZG9UaHJvd0N1cnNvcklzU3RvcHBlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVJdGVyYXRpb24odmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBndWFyZGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmZhaWwoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5zdGFydCA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiQ3Vyc29yIGJlaGluZCBsYXN0IGVudHJ5XCIpOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBndWFyZGVkQ2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSA9IF9jdXJzb3JDb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWVQcmltYXJ5S2V5ID0gX2N1cnNvckNvbnRpbnVlUHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuYWR2YW5jZSA9IF9jdXJzb3JBZHZhbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVyYXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHF1ZXJ5KGhhc0dldEFsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IHdyYXAocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSByZXF1ZXN0LnRyYW5zLCB2YWx1ZXMgPSByZXF1ZXN0LnZhbHVlcywgbGltaXQgPSByZXF1ZXN0LmxpbWl0LCBxdWVyeSA9IHJlcXVlc3QucXVlcnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9uSW5maW5pdExpbWl0ID0gbGltaXQgPT09IEluZmluaXR5ID8gdW5kZWZpbmVkIDogbGltaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBxdWVyeS5pbmRleCwgcmFuZ2UgPSBxdWVyeS5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaW5kZXguaXNQcmltYXJ5S2V5ID8gc3RvcmUgOiBzdG9yZS5pbmRleChpbmRleC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZGJLZXlSYW5nZSA9IG1ha2VJREJLZXlSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGltaXQgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyByZXN1bHQ6IFtdIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0dldEFsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSB2YWx1ZXMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UuZ2V0QWxsKGlkYktleVJhbmdlLCBub25JbmZpbml0TGltaXQpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLmdldEFsbEtleXMoaWRiS2V5UmFuZ2UsIG5vbkluZmluaXRMaW1pdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gcmVzb2x2ZSh7IHJlc3VsdDogZXZlbnQudGFyZ2V0LnJlc3VsdCB9KTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50XzEgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXFfMSA9IHZhbHVlcyB8fCAhKCdvcGVuS2V5Q3Vyc29yJyBpbiBzb3VyY2UpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLm9wZW5DdXJzb3IoaWRiS2V5UmFuZ2UpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLm9wZW5LZXlDdXJzb3IoaWRiS2V5UmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcV8xLm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxXzEucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgcmVzdWx0OiByZXN1bHRfMSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0XzEucHVzaCh2YWx1ZXMgPyBjdXJzb3IudmFsdWUgOiBjdXJzb3IucHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgrK2NvdW50XzEgPT09IGxpbWl0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyByZXN1bHQ6IHJlc3VsdF8xIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcV8xLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGFibGVOYW1lLFxuICAgICAgICAgICAgICAgIHNjaGVtYTogdGFibGVTY2hlbWEsXG4gICAgICAgICAgICAgICAgbXV0YXRlOiBtdXRhdGUsXG4gICAgICAgICAgICAgICAgZ2V0TWFueTogZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IF9hLnRyYW5zLCBrZXlzID0gX2Eua2V5cztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSB3cmFwKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2tDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHJlc3VsdFtyZXEuX3Bvc10gPSByZXEucmVzdWx0KSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCsrY2FsbGJhY2tDb3VudCA9PT0ga2V5Q291bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JIYW5kbGVyID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcSA9IHN0b3JlLmdldChrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLl9wb3MgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gc3VjY2Vzc0hhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXJyb3JIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2tleUNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlDb3VudCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gX2EudHJhbnMsIGtleSA9IF9hLmtleTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSB3cmFwKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5nZXQoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIHJlc29sdmUoZXZlbnQudGFyZ2V0LnJlc3VsdCk7IH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeShoYXNHZXRBbGwpLFxuICAgICAgICAgICAgICAgIG9wZW5DdXJzb3I6IG9wZW5DdXJzb3IsXG4gICAgICAgICAgICAgICAgY291bnQ6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBfYS5xdWVyeSwgdHJhbnMgPSBfYS50cmFucztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcXVlcnkuaW5kZXgsIHJhbmdlID0gcXVlcnkucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGluZGV4LmlzUHJpbWFyeUtleSA/IHN0b3JlIDogc3RvcmUuaW5kZXgoaW5kZXgubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRiS2V5UmFuZ2UgPSBtYWtlSURCS2V5UmFuZ2UocmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IGlkYktleVJhbmdlID8gc291cmNlLmNvdW50KGlkYktleVJhbmdlKSA6IHNvdXJjZS5jb3VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7IHJldHVybiByZXNvbHZlKGV2LnRhcmdldC5yZXN1bHQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9hID0gZXh0cmFjdFNjaGVtYShkYiwgdG1wVHJhbnMpLCBzY2hlbWEgPSBfYS5zY2hlbWEsIGhhc0dldEFsbCA9IF9hLmhhc0dldEFsbDtcbiAgICAgICAgdmFyIHRhYmxlcyA9IHNjaGVtYS50YWJsZXMubWFwKGZ1bmN0aW9uICh0YWJsZVNjaGVtYSkgeyByZXR1cm4gY3JlYXRlRGJDb3JlVGFibGUodGFibGVTY2hlbWEpOyB9KTtcbiAgICAgICAgdmFyIHRhYmxlTWFwID0ge307XG4gICAgICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZSkgeyByZXR1cm4gdGFibGVNYXBbdGFibGUubmFtZV0gPSB0YWJsZTsgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFjazogXCJkYmNvcmVcIixcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uOiBkYi50cmFuc2FjdGlvbi5iaW5kKGRiKSxcbiAgICAgICAgICAgIHRhYmxlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0YWJsZU1hcFtuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGFibGUgJ1wiLmNvbmNhdChuYW1lLCBcIicgbm90IGZvdW5kXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVNYXBbbmFtZV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgTUlOX0tFWTogLUluZmluaXR5LFxuICAgICAgICAgICAgTUFYX0tFWTogZ2V0TWF4S2V5KElkYktleVJhbmdlKSxcbiAgICAgICAgICAgIHNjaGVtYTogc2NoZW1hXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTWlkZGxld2FyZVN0YWNrKHN0YWNrSW1wbCwgbWlkZGxld2FyZXMpIHtcbiAgICAgICAgcmV0dXJuIG1pZGRsZXdhcmVzLnJlZHVjZShmdW5jdGlvbiAoZG93biwgX2EpIHtcbiAgICAgICAgICAgIHZhciBjcmVhdGUgPSBfYS5jcmVhdGU7XG4gICAgICAgICAgICByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBkb3duKSwgY3JlYXRlKGRvd24pKSk7XG4gICAgICAgIH0sIHN0YWNrSW1wbCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pZGRsZXdhcmVTdGFja3MobWlkZGxld2FyZXMsIGlkYmRiLCBfYSwgdG1wVHJhbnMpIHtcbiAgICAgICAgdmFyIElEQktleVJhbmdlID0gX2EuSURCS2V5UmFuZ2U7IF9hLmluZGV4ZWREQjtcbiAgICAgICAgdmFyIGRiY29yZSA9IGNyZWF0ZU1pZGRsZXdhcmVTdGFjayhjcmVhdGVEQkNvcmUoaWRiZGIsIElEQktleVJhbmdlLCB0bXBUcmFucyksIG1pZGRsZXdhcmVzLmRiY29yZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYmNvcmU6IGRiY29yZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZU1pZGRsZXdhcmVTdGFja3MoZGIsIHRtcFRyYW5zKSB7XG4gICAgICAgIHZhciBpZGJkYiA9IHRtcFRyYW5zLmRiO1xuICAgICAgICB2YXIgc3RhY2tzID0gY3JlYXRlTWlkZGxld2FyZVN0YWNrcyhkYi5fbWlkZGxld2FyZXMsIGlkYmRiLCBkYi5fZGVwcywgdG1wVHJhbnMpO1xuICAgICAgICBkYi5jb3JlID0gc3RhY2tzLmRiY29yZTtcbiAgICAgICAgZGIudGFibGVzLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB2YXIgdGFibGVOYW1lID0gdGFibGUubmFtZTtcbiAgICAgICAgICAgIGlmIChkYi5jb3JlLnNjaGVtYS50YWJsZXMuc29tZShmdW5jdGlvbiAodGJsKSB7IHJldHVybiB0YmwubmFtZSA9PT0gdGFibGVOYW1lOyB9KSkge1xuICAgICAgICAgICAgICAgIHRhYmxlLmNvcmUgPSBkYi5jb3JlLnRhYmxlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRiW3RhYmxlTmFtZV0gaW5zdGFuY2VvZiBkYi5UYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBkYlt0YWJsZU5hbWVdLmNvcmUgPSB0YWJsZS5jb3JlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0QXBpT25QbGFjZShkYiwgb2JqcywgdGFibGVOYW1lcywgZGJzY2hlbWEpIHtcbiAgICAgICAgdGFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBzY2hlbWEgPSBkYnNjaGVtYVt0YWJsZU5hbWVdO1xuICAgICAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcERlc2MgPSBnZXRQcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCB0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICghcHJvcERlc2MgfHwgKFwidmFsdWVcIiBpbiBwcm9wRGVzYyAmJiBwcm9wRGVzYy52YWx1ZSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqID09PSBkYi5UcmFuc2FjdGlvbi5wcm90b3R5cGUgfHwgb2JqIGluc3RhbmNlb2YgZGIuVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByb3Aob2JqLCB0YWJsZU5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudGFibGUodGFibGVOYW1lKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVQcm9wZXJ0eSh0aGlzLCB0YWJsZU5hbWUsIHsgdmFsdWU6IHZhbHVlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqW3RhYmxlTmFtZV0gPSBuZXcgZGIuVGFibGUodGFibGVOYW1lLCBzY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmVUYWJsZXNBcGkoZGIsIG9ianMpIHtcbiAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqW2tleV0gaW5zdGFuY2VvZiBkYi5UYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbG93ZXJWZXJzaW9uRmlyc3QoYSwgYikge1xuICAgICAgICByZXR1cm4gYS5fY2ZnLnZlcnNpb24gLSBiLl9jZmcudmVyc2lvbjtcbiAgICB9XG4gICAgZnVuY3Rpb24gcnVuVXBncmFkZXJzKGRiLCBvbGRWZXJzaW9uLCBpZGJVcGdyYWRlVHJhbnMsIHJlamVjdCkge1xuICAgICAgICB2YXIgZ2xvYmFsU2NoZW1hID0gZGIuX2RiU2NoZW1hO1xuICAgICAgICBpZiAoaWRiVXBncmFkZVRyYW5zLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoJyRtZXRhJykgJiYgIWdsb2JhbFNjaGVtYS4kbWV0YSkge1xuICAgICAgICAgICAgZ2xvYmFsU2NoZW1hLiRtZXRhID0gY3JlYXRlVGFibGVTY2hlbWEoXCIkbWV0YVwiLCBwYXJzZUluZGV4U3ludGF4KFwiXCIpWzBdLCBbXSk7XG4gICAgICAgICAgICBkYi5fc3RvcmVOYW1lcy5wdXNoKCckbWV0YScpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0cmFucyA9IGRiLl9jcmVhdGVUcmFuc2FjdGlvbigncmVhZHdyaXRlJywgZGIuX3N0b3JlTmFtZXMsIGdsb2JhbFNjaGVtYSk7XG4gICAgICAgIHRyYW5zLmNyZWF0ZShpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICB0cmFucy5fY29tcGxldGlvbi5jYXRjaChyZWplY3QpO1xuICAgICAgICB2YXIgcmVqZWN0VHJhbnNhY3Rpb24gPSB0cmFucy5fcmVqZWN0LmJpbmQodHJhbnMpO1xuICAgICAgICB2YXIgdHJhbnNsZXNzID0gUFNELnRyYW5zbGVzcyB8fCBQU0Q7XG4gICAgICAgIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFBTRC50cmFucyA9IHRyYW5zO1xuICAgICAgICAgICAgUFNELnRyYW5zbGVzcyA9IHRyYW5zbGVzcztcbiAgICAgICAgICAgIGlmIChvbGRWZXJzaW9uID09PSAwKSB7XG4gICAgICAgICAgICAgICAga2V5cyhnbG9iYWxTY2hlbWEpLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWJsZShpZGJVcGdyYWRlVHJhbnMsIHRhYmxlTmFtZSwgZ2xvYmFsU2NoZW1hW3RhYmxlTmFtZV0ucHJpbUtleSwgZ2xvYmFsU2NoZW1hW3RhYmxlTmFtZV0uaW5kZXhlcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICAgICAgICAgIERleGllUHJvbWlzZS5mb2xsb3coZnVuY3Rpb24gKCkgeyByZXR1cm4gZGIub24ucG9wdWxhdGUuZmlyZSh0cmFucyk7IH0pLmNhdGNoKHJlamVjdFRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdlbmVyYXRlTWlkZGxld2FyZVN0YWNrcyhkYiwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXhpc3RpbmdWZXJzaW9uKGRiLCB0cmFucywgb2xkVmVyc2lvbilcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG9sZFZlcnNpb24pIHsgcmV0dXJuIHVwZGF0ZVRhYmxlc0FuZEluZGV4ZXMoZGIsIG9sZFZlcnNpb24sIHRyYW5zLCBpZGJVcGdyYWRlVHJhbnMpOyB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2gocmVqZWN0VHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGF0Y2hDdXJyZW50VmVyc2lvbihkYiwgaWRiVXBncmFkZVRyYW5zKSB7XG4gICAgICAgIGNyZWF0ZU1pc3NpbmdUYWJsZXMoZGIuX2RiU2NoZW1hLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICBpZiAoaWRiVXBncmFkZVRyYW5zLmRiLnZlcnNpb24gJSAxMCA9PT0gMCAmJiAhaWRiVXBncmFkZVRyYW5zLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoJyRtZXRhJykpIHtcbiAgICAgICAgICAgIGlkYlVwZ3JhZGVUcmFucy5kYi5jcmVhdGVPYmplY3RTdG9yZSgnJG1ldGEnKS5hZGQoTWF0aC5jZWlsKChpZGJVcGdyYWRlVHJhbnMuZGIudmVyc2lvbiAvIDEwKSAtIDEpLCAndmVyc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBnbG9iYWxTY2hlbWEgPSBidWlsZEdsb2JhbFNjaGVtYShkYiwgZGIuaWRiZGIsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgIGFkanVzdFRvRXhpc3RpbmdJbmRleE5hbWVzKGRiLCBkYi5fZGJTY2hlbWEsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgIHZhciBkaWZmID0gZ2V0U2NoZW1hRGlmZihnbG9iYWxTY2hlbWEsIGRiLl9kYlNjaGVtYSk7XG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHRhYmxlQ2hhbmdlKSB7XG4gICAgICAgICAgICBpZiAodGFibGVDaGFuZ2UuY2hhbmdlLmxlbmd0aCB8fCB0YWJsZUNoYW5nZS5yZWNyZWF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVuYWJsZSB0byBwYXRjaCBpbmRleGVzIG9mIHRhYmxlIFwiLmNvbmNhdCh0YWJsZUNoYW5nZS5uYW1lLCBcIiBiZWNhdXNlIGl0IGhhcyBjaGFuZ2VzIG9uIHRoZSB0eXBlIG9mIGluZGV4IG9yIHByaW1hcnkga2V5LlwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHZvaWQgMCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHN0b3JlID0gaWRiVXBncmFkZVRyYW5zLm9iamVjdFN0b3JlKHRhYmxlQ2hhbmdlLm5hbWUpO1xuICAgICAgICAgICAgdGFibGVDaGFuZ2UuYWRkLmZvckVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgIGlmIChkZWJ1ZylcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIkRleGllIHVwZ3JhZGUgcGF0Y2g6IENyZWF0aW5nIG1pc3NpbmcgaW5kZXggXCIuY29uY2F0KHRhYmxlQ2hhbmdlLm5hbWUsIFwiLlwiKS5jb25jYXQoaWR4LnNyYykpO1xuICAgICAgICAgICAgICAgIGFkZEluZGV4KHN0b3JlLCBpZHgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBkaWZmLmNoYW5nZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciB0YWJsZUNoYW5nZSA9IF9hW19pXTtcbiAgICAgICAgICAgIHZhciBzdGF0ZV8xID0gX2xvb3BfMSh0YWJsZUNoYW5nZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXRlXzEgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlXzEudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RXhpc3RpbmdWZXJzaW9uKGRiLCB0cmFucywgb2xkVmVyc2lvbikge1xuICAgICAgICBpZiAodHJhbnMuc3RvcmVOYW1lcy5pbmNsdWRlcygnJG1ldGEnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zLnRhYmxlKCckbWV0YScpLmdldCgndmVyc2lvbicpLnRoZW4oZnVuY3Rpb24gKG1ldGFWZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFWZXJzaW9uICE9IG51bGwgPyBtZXRhVmVyc2lvbiA6IG9sZFZlcnNpb247XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZShvbGRWZXJzaW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVUYWJsZXNBbmRJbmRleGVzKGRiLCBvbGRWZXJzaW9uLCB0cmFucywgaWRiVXBncmFkZVRyYW5zKSB7XG4gICAgICAgIHZhciBxdWV1ZSA9IFtdO1xuICAgICAgICB2YXIgdmVyc2lvbnMgPSBkYi5fdmVyc2lvbnM7XG4gICAgICAgIHZhciBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWEgPSBidWlsZEdsb2JhbFNjaGVtYShkYiwgZGIuaWRiZGIsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgIHZhciB2ZXJzVG9SdW4gPSB2ZXJzaW9ucy5maWx0ZXIoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYuX2NmZy52ZXJzaW9uID49IG9sZFZlcnNpb247IH0pO1xuICAgICAgICBpZiAodmVyc1RvUnVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmVyc1RvUnVuLmZvckVhY2goZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBvbGRTY2hlbWEgPSBnbG9iYWxTY2hlbWE7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1NjaGVtYSA9IHZlcnNpb24uX2NmZy5kYnNjaGVtYTtcbiAgICAgICAgICAgICAgICBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhkYiwgb2xkU2NoZW1hLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICAgICAgICAgIGFkanVzdFRvRXhpc3RpbmdJbmRleE5hbWVzKGRiLCBuZXdTY2hlbWEsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgICAgICAgICAgZ2xvYmFsU2NoZW1hID0gZGIuX2RiU2NoZW1hID0gbmV3U2NoZW1hO1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gZ2V0U2NoZW1hRGlmZihvbGRTY2hlbWEsIG5ld1NjaGVtYSk7XG4gICAgICAgICAgICAgICAgZGlmZi5hZGQuZm9yRWFjaChmdW5jdGlvbiAodHVwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFibGUoaWRiVXBncmFkZVRyYW5zLCB0dXBsZVswXSwgdHVwbGVbMV0ucHJpbUtleSwgdHVwbGVbMV0uaW5kZXhlcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGlmZi5jaGFuZ2UuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2UucmVjcmVhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlVwZ3JhZGUoXCJOb3QgeWV0IHN1cHBvcnQgZm9yIGNoYW5naW5nIHByaW1hcnkga2V5XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlXzEgPSBpZGJVcGdyYWRlVHJhbnMub2JqZWN0U3RvcmUoY2hhbmdlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmFkZC5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHsgcmV0dXJuIGFkZEluZGV4KHN0b3JlXzEsIGlkeCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmNoYW5nZS5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZV8xLmRlbGV0ZUluZGV4KGlkeC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRJbmRleChzdG9yZV8xLCBpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuZGVsLmZvckVhY2goZnVuY3Rpb24gKGlkeE5hbWUpIHsgcmV0dXJuIHN0b3JlXzEuZGVsZXRlSW5kZXgoaWR4TmFtZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRVcGdyYWRlID0gdmVyc2lvbi5fY2ZnLmNvbnRlbnRVcGdyYWRlO1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50VXBncmFkZSAmJiB2ZXJzaW9uLl9jZmcudmVyc2lvbiA+IG9sZFZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICB0cmFucy5fbWVtb2l6ZWRUYWJsZXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZ3JhZGVTY2hlbWFfMSA9IHNoYWxsb3dDbG9uZShuZXdTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICBkaWZmLmRlbC5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBncmFkZVNjaGVtYV8xW3RhYmxlXSA9IG9sZFNjaGVtYVt0YWJsZV07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVUYWJsZXNBcGkoZGIsIFtkYi5UcmFuc2FjdGlvbi5wcm90b3R5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QXBpT25QbGFjZShkYiwgW2RiLlRyYW5zYWN0aW9uLnByb3RvdHlwZV0sIGtleXModXBncmFkZVNjaGVtYV8xKSwgdXBncmFkZVNjaGVtYV8xKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnMuc2NoZW1hID0gdXBncmFkZVNjaGVtYV8xO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudFVwZ3JhZGVJc0FzeW5jXzEgPSBpc0FzeW5jRnVuY3Rpb24oY29udGVudFVwZ3JhZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudFVwZ3JhZGVJc0FzeW5jXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlXzE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlRm9sbG93ZWQgPSBEZXhpZVByb21pc2UuZm9sbG93KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlXzEgPSBjb250ZW50VXBncmFkZSh0cmFucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWVfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50VXBncmFkZUlzQXN5bmNfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVjcmVtZW50b3IgPSBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cy5iaW5kKG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZV8xLnRoZW4oZGVjcmVtZW50b3IsIGRlY3JlbWVudG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHJldHVyblZhbHVlXzEgJiYgdHlwZW9mIHJldHVyblZhbHVlXzEudGhlbiA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBEZXhpZVByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZV8xKSA6IHByb21pc2VGb2xsb3dlZC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJldHVyblZhbHVlXzE7IH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZnVuY3Rpb24gKGlkYnRyYW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1NjaGVtYSA9IHZlcnNpb24uX2NmZy5kYnNjaGVtYTtcbiAgICAgICAgICAgICAgICBkZWxldGVSZW1vdmVkVGFibGVzKG5ld1NjaGVtYSwgaWRidHJhbnMpO1xuICAgICAgICAgICAgICAgIHJlbW92ZVRhYmxlc0FwaShkYiwgW2RiLlRyYW5zYWN0aW9uLnByb3RvdHlwZV0pO1xuICAgICAgICAgICAgICAgIHNldEFwaU9uUGxhY2UoZGIsIFtkYi5UcmFuc2FjdGlvbi5wcm90b3R5cGVdLCBkYi5fc3RvcmVOYW1lcywgZGIuX2RiU2NoZW1hKTtcbiAgICAgICAgICAgICAgICB0cmFucy5zY2hlbWEgPSBkYi5fZGJTY2hlbWE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZnVuY3Rpb24gKGlkYnRyYW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRiLmlkYmRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoJyRtZXRhJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguY2VpbChkYi5pZGJkYi52ZXJzaW9uIC8gMTApID09PSB2ZXJzaW9uLl9jZmcudmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIuaWRiZGIuZGVsZXRlT2JqZWN0U3RvcmUoJyRtZXRhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGIuX2RiU2NoZW1hLiRtZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIuX3N0b3JlTmFtZXMgPSBkYi5fc3RvcmVOYW1lcy5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIG5hbWUgIT09ICckbWV0YSc7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRidHJhbnMub2JqZWN0U3RvcmUoJyRtZXRhJykucHV0KHZlcnNpb24uX2NmZy52ZXJzaW9uLCAndmVyc2lvbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBydW5RdWV1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBxdWV1ZS5sZW5ndGggPyBEZXhpZVByb21pc2UucmVzb2x2ZShxdWV1ZS5zaGlmdCgpKHRyYW5zLmlkYnRyYW5zKSkudGhlbihydW5RdWV1ZSkgOlxuICAgICAgICAgICAgICAgIERleGllUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1blF1ZXVlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjcmVhdGVNaXNzaW5nVGFibGVzKGdsb2JhbFNjaGVtYSwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFNjaGVtYURpZmYob2xkU2NoZW1hLCBuZXdTY2hlbWEpIHtcbiAgICAgICAgdmFyIGRpZmYgPSB7XG4gICAgICAgICAgICBkZWw6IFtdLFxuICAgICAgICAgICAgYWRkOiBbXSxcbiAgICAgICAgICAgIGNoYW5nZTogW11cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHRhYmxlO1xuICAgICAgICBmb3IgKHRhYmxlIGluIG9sZFNjaGVtYSkge1xuICAgICAgICAgICAgaWYgKCFuZXdTY2hlbWFbdGFibGVdKVxuICAgICAgICAgICAgICAgIGRpZmYuZGVsLnB1c2godGFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodGFibGUgaW4gbmV3U2NoZW1hKSB7XG4gICAgICAgICAgICB2YXIgb2xkRGVmID0gb2xkU2NoZW1hW3RhYmxlXSwgbmV3RGVmID0gbmV3U2NoZW1hW3RhYmxlXTtcbiAgICAgICAgICAgIGlmICghb2xkRGVmKSB7XG4gICAgICAgICAgICAgICAgZGlmZi5hZGQucHVzaChbdGFibGUsIG5ld0RlZl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGFibGUsXG4gICAgICAgICAgICAgICAgICAgIGRlZjogbmV3RGVmLFxuICAgICAgICAgICAgICAgICAgICByZWNyZWF0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGRlbDogW10sXG4gICAgICAgICAgICAgICAgICAgIGFkZDogW10sXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZTogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICgoXG4gICAgICAgICAgICAgICAgJycgKyAob2xkRGVmLnByaW1LZXkua2V5UGF0aCB8fCAnJykpICE9PSAoJycgKyAobmV3RGVmLnByaW1LZXkua2V5UGF0aCB8fCAnJykpIHx8XG4gICAgICAgICAgICAgICAgICAgIChvbGREZWYucHJpbUtleS5hdXRvICE9PSBuZXdEZWYucHJpbUtleS5hdXRvKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2UucmVjcmVhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkaWZmLmNoYW5nZS5wdXNoKGNoYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2xkSW5kZXhlcyA9IG9sZERlZi5pZHhCeU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdJbmRleGVzID0gbmV3RGVmLmlkeEJ5TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkeE5hbWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaWR4TmFtZSBpbiBvbGRJbmRleGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld0luZGV4ZXNbaWR4TmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmRlbC5wdXNoKGlkeE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaWR4TmFtZSBpbiBuZXdJbmRleGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkSWR4ID0gb2xkSW5kZXhlc1tpZHhOYW1lXSwgbmV3SWR4ID0gbmV3SW5kZXhlc1tpZHhOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2xkSWR4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5hZGQucHVzaChuZXdJZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2xkSWR4LnNyYyAhPT0gbmV3SWR4LnNyYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuY2hhbmdlLnB1c2gobmV3SWR4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlLmRlbC5sZW5ndGggPiAwIHx8IGNoYW5nZS5hZGQubGVuZ3RoID4gMCB8fCBjaGFuZ2UuY2hhbmdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYuY2hhbmdlLnB1c2goY2hhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlmZjtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlVGFibGUoaWRidHJhbnMsIHRhYmxlTmFtZSwgcHJpbUtleSwgaW5kZXhlcykge1xuICAgICAgICB2YXIgc3RvcmUgPSBpZGJ0cmFucy5kYi5jcmVhdGVPYmplY3RTdG9yZSh0YWJsZU5hbWUsIHByaW1LZXkua2V5UGF0aCA/XG4gICAgICAgICAgICB7IGtleVBhdGg6IHByaW1LZXkua2V5UGF0aCwgYXV0b0luY3JlbWVudDogcHJpbUtleS5hdXRvIH0gOlxuICAgICAgICAgICAgeyBhdXRvSW5jcmVtZW50OiBwcmltS2V5LmF1dG8gfSk7XG4gICAgICAgIGluZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7IHJldHVybiBhZGRJbmRleChzdG9yZSwgaWR4KTsgfSk7XG4gICAgICAgIHJldHVybiBzdG9yZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlTWlzc2luZ1RhYmxlcyhuZXdTY2hlbWEsIGlkYnRyYW5zKSB7XG4gICAgICAgIGtleXMobmV3U2NoZW1hKS5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgIGlmICghaWRidHJhbnMuZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyh0YWJsZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdEZXhpZTogQ3JlYXRpbmcgbWlzc2luZyB0YWJsZScsIHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgY3JlYXRlVGFibGUoaWRidHJhbnMsIHRhYmxlTmFtZSwgbmV3U2NoZW1hW3RhYmxlTmFtZV0ucHJpbUtleSwgbmV3U2NoZW1hW3RhYmxlTmFtZV0uaW5kZXhlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWxldGVSZW1vdmVkVGFibGVzKG5ld1NjaGVtYSwgaWRidHJhbnMpIHtcbiAgICAgICAgW10uc2xpY2UuY2FsbChpZGJ0cmFucy5kYi5vYmplY3RTdG9yZU5hbWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdTY2hlbWFbc3RvcmVOYW1lXSA9PSBudWxsICYmIGlkYnRyYW5zLmRiLmRlbGV0ZU9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRJbmRleChzdG9yZSwgaWR4KSB7XG4gICAgICAgIHN0b3JlLmNyZWF0ZUluZGV4KGlkeC5uYW1lLCBpZHgua2V5UGF0aCwgeyB1bmlxdWU6IGlkeC51bmlxdWUsIG11bHRpRW50cnk6IGlkeC5tdWx0aSB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRHbG9iYWxTY2hlbWEoZGIsIGlkYmRiLCB0bXBUcmFucykge1xuICAgICAgICB2YXIgZ2xvYmFsU2NoZW1hID0ge307XG4gICAgICAgIHZhciBkYlN0b3JlTmFtZXMgPSBzbGljZShpZGJkYi5vYmplY3RTdG9yZU5hbWVzLCAwKTtcbiAgICAgICAgZGJTdG9yZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gdG1wVHJhbnMub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIHZhciBrZXlQYXRoID0gc3RvcmUua2V5UGF0aDtcbiAgICAgICAgICAgIHZhciBwcmltS2V5ID0gY3JlYXRlSW5kZXhTcGVjKG5hbWVGcm9tS2V5UGF0aChrZXlQYXRoKSwga2V5UGF0aCB8fCBcIlwiLCB0cnVlLCBmYWxzZSwgISFzdG9yZS5hdXRvSW5jcmVtZW50LCBrZXlQYXRoICYmIHR5cGVvZiBrZXlQYXRoICE9PSBcInN0cmluZ1wiLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0b3JlLmluZGV4TmFtZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgaWRiaW5kZXggPSBzdG9yZS5pbmRleChzdG9yZS5pbmRleE5hbWVzW2pdKTtcbiAgICAgICAgICAgICAgICBrZXlQYXRoID0gaWRiaW5kZXgua2V5UGF0aDtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBjcmVhdGVJbmRleFNwZWMoaWRiaW5kZXgubmFtZSwga2V5UGF0aCwgISFpZGJpbmRleC51bmlxdWUsICEhaWRiaW5kZXgubXVsdGlFbnRyeSwgZmFsc2UsIGtleVBhdGggJiYgdHlwZW9mIGtleVBhdGggIT09IFwic3RyaW5nXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpbmRleGVzLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2xvYmFsU2NoZW1hW3N0b3JlTmFtZV0gPSBjcmVhdGVUYWJsZVNjaGVtYShzdG9yZU5hbWUsIHByaW1LZXksIGluZGV4ZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFNjaGVtYTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEdsb2JhbFNjaGVtYShkYiwgaWRiZGIsIHRtcFRyYW5zKSB7XG4gICAgICAgIGRiLnZlcm5vID0gaWRiZGIudmVyc2lvbiAvIDEwO1xuICAgICAgICB2YXIgZ2xvYmFsU2NoZW1hID0gZGIuX2RiU2NoZW1hID0gYnVpbGRHbG9iYWxTY2hlbWEoZGIsIGlkYmRiLCB0bXBUcmFucyk7XG4gICAgICAgIGRiLl9zdG9yZU5hbWVzID0gc2xpY2UoaWRiZGIub2JqZWN0U3RvcmVOYW1lcywgMCk7XG4gICAgICAgIHNldEFwaU9uUGxhY2UoZGIsIFtkYi5fYWxsVGFibGVzXSwga2V5cyhnbG9iYWxTY2hlbWEpLCBnbG9iYWxTY2hlbWEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB2ZXJpZnlJbnN0YWxsZWRTY2hlbWEoZGIsIHRtcFRyYW5zKSB7XG4gICAgICAgIHZhciBpbnN0YWxsZWRTY2hlbWEgPSBidWlsZEdsb2JhbFNjaGVtYShkYiwgZGIuaWRiZGIsIHRtcFRyYW5zKTtcbiAgICAgICAgdmFyIGRpZmYgPSBnZXRTY2hlbWFEaWZmKGluc3RhbGxlZFNjaGVtYSwgZGIuX2RiU2NoZW1hKTtcbiAgICAgICAgcmV0dXJuICEoZGlmZi5hZGQubGVuZ3RoIHx8IGRpZmYuY2hhbmdlLnNvbWUoZnVuY3Rpb24gKGNoKSB7IHJldHVybiBjaC5hZGQubGVuZ3RoIHx8IGNoLmNoYW5nZS5sZW5ndGg7IH0pKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoZGIsIHNjaGVtYSwgaWRidHJhbnMpIHtcbiAgICAgICAgdmFyIHN0b3JlTmFtZXMgPSBpZGJ0cmFucy5kYi5vYmplY3RTdG9yZU5hbWVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0b3JlTmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzdG9yZU5hbWUgPSBzdG9yZU5hbWVzW2ldO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gaWRidHJhbnMub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIGRiLl9oYXNHZXRBbGwgPSAnZ2V0QWxsJyBpbiBzdG9yZTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RvcmUuaW5kZXhOYW1lcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleE5hbWUgPSBzdG9yZS5pbmRleE5hbWVzW2pdO1xuICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoID0gc3RvcmUuaW5kZXgoaW5kZXhOYW1lKS5rZXlQYXRoO1xuICAgICAgICAgICAgICAgIHZhciBkZXhpZU5hbWUgPSB0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycgPyBrZXlQYXRoIDogXCJbXCIgKyBzbGljZShrZXlQYXRoKS5qb2luKCcrJykgKyBcIl1cIjtcbiAgICAgICAgICAgICAgICBpZiAoc2NoZW1hW3N0b3JlTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4U3BlYyA9IHNjaGVtYVtzdG9yZU5hbWVdLmlkeEJ5TmFtZVtkZXhpZU5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhTcGVjKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleFNwZWMubmFtZSA9IGluZGV4TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWFbc3RvcmVOYW1lXS5pZHhCeU5hbWVbZGV4aWVOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYVtzdG9yZU5hbWVdLmlkeEJ5TmFtZVtpbmRleE5hbWVdID0gaW5kZXhTcGVjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgICAgICAgICAhLyhDaHJvbWVcXC98RWRnZVxcLykvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgICAgICAgICAgIF9nbG9iYWwuV29ya2VyR2xvYmFsU2NvcGUgJiYgX2dsb2JhbCBpbnN0YW5jZW9mIF9nbG9iYWwuV29ya2VyR2xvYmFsU2NvcGUgJiZcbiAgICAgICAgICAgIFtdLmNvbmNhdChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9TYWZhcmlcXC8oXFxkKikvKSlbMV0gPCA2MDQpIHtcbiAgICAgICAgICAgIGRiLl9oYXNHZXRBbGwgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBwYXJzZUluZGV4U3ludGF4KHByaW1LZXlBbmRJbmRleGVzKSB7XG4gICAgICAgIHJldHVybiBwcmltS2V5QW5kSW5kZXhlcy5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAoaW5kZXgsIGluZGV4TnVtKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgdHlwZVNwbGl0ID0gaW5kZXguc3BsaXQoJzonKTtcbiAgICAgICAgICAgIHZhciB0eXBlID0gKF9hID0gdHlwZVNwbGl0WzFdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudHJpbSgpO1xuICAgICAgICAgICAgaW5kZXggPSB0eXBlU3BsaXRbMF0udHJpbSgpO1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBpbmRleC5yZXBsYWNlKC8oWyYqXXxcXCtcXCspL2csIFwiXCIpO1xuICAgICAgICAgICAgdmFyIGtleVBhdGggPSAvXlxcWy8udGVzdChuYW1lKSA/IG5hbWUubWF0Y2goL15cXFsoLiopXFxdJC8pWzFdLnNwbGl0KCcrJykgOiBuYW1lO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUluZGV4U3BlYyhuYW1lLCBrZXlQYXRoIHx8IG51bGwsIC9cXCYvLnRlc3QoaW5kZXgpLCAvXFwqLy50ZXN0KGluZGV4KSwgL1xcK1xcKy8udGVzdChpbmRleCksIGlzQXJyYXkoa2V5UGF0aCksIGluZGV4TnVtID09PSAwLCB0eXBlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIFZlcnNpb24gPSAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmVyc2lvbigpIHtcbiAgICAgICAgfVxuICAgICAgICBWZXJzaW9uLnByb3RvdHlwZS5fY3JlYXRlVGFibGVTY2hlbWEgPSBmdW5jdGlvbiAobmFtZSwgcHJpbUtleSwgaW5kZXhlcykge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVRhYmxlU2NoZW1hKG5hbWUsIHByaW1LZXksIGluZGV4ZXMpO1xuICAgICAgICB9O1xuICAgICAgICBWZXJzaW9uLnByb3RvdHlwZS5fcGFyc2VJbmRleFN5bnRheCA9IGZ1bmN0aW9uIChwcmltS2V5QW5kSW5kZXhlcykge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW5kZXhTeW50YXgocHJpbUtleUFuZEluZGV4ZXMpO1xuICAgICAgICB9O1xuICAgICAgICBWZXJzaW9uLnByb3RvdHlwZS5fcGFyc2VTdG9yZXNTcGVjID0gZnVuY3Rpb24gKHN0b3Jlcywgb3V0U2NoZW1hKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAga2V5cyhzdG9yZXMpLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdG9yZXNbdGFibGVOYW1lXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhlcyA9IF90aGlzLl9wYXJzZUluZGV4U3ludGF4KHN0b3Jlc1t0YWJsZU5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1LZXkgPSBpbmRleGVzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJpbUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKCdJbnZhbGlkIHNjaGVtYSBmb3IgdGFibGUgJyArIHRhYmxlTmFtZSArICc6ICcgKyBzdG9yZXNbdGFibGVOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJpbUtleS51bmlxdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJpbUtleS5tdWx0aSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlNjaGVtYSgnUHJpbWFyeSBrZXkgY2Fubm90IGJlIG11bHRpRW50cnkqJyk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4LmF1dG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKCdPbmx5IHByaW1hcnkga2V5IGNhbiBiZSBtYXJrZWQgYXMgYXV0b0luY3JlbWVudCAoKyspJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlkeC5rZXlQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlNjaGVtYSgnSW5kZXggbXVzdCBoYXZlIGEgbmFtZSBhbmQgY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZycpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRibFNjaGVtYSA9IF90aGlzLl9jcmVhdGVUYWJsZVNjaGVtYSh0YWJsZU5hbWUsIHByaW1LZXksIGluZGV4ZXMpO1xuICAgICAgICAgICAgICAgICAgICBvdXRTY2hlbWFbdGFibGVOYW1lXSA9IHRibFNjaGVtYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmVyc2lvbi5wcm90b3R5cGUuc3RvcmVzID0gZnVuY3Rpb24gKHN0b3Jlcykge1xuICAgICAgICAgICAgdmFyIGRiID0gdGhpcy5kYjtcbiAgICAgICAgICAgIHRoaXMuX2NmZy5zdG9yZXNTb3VyY2UgPSB0aGlzLl9jZmcuc3RvcmVzU291cmNlXG4gICAgICAgICAgICAgICAgPyBleHRlbmQodGhpcy5fY2ZnLnN0b3Jlc1NvdXJjZSwgc3RvcmVzKVxuICAgICAgICAgICAgICAgIDogc3RvcmVzO1xuICAgICAgICAgICAgdmFyIHZlcnNpb25zID0gZGIuX3ZlcnNpb25zO1xuICAgICAgICAgICAgdmFyIHN0b3Jlc1NwZWMgPSB7fTtcbiAgICAgICAgICAgIHZhciBkYnNjaGVtYSA9IHt9O1xuICAgICAgICAgICAgdmVyc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAodmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGV4dGVuZChzdG9yZXNTcGVjLCB2ZXJzaW9uLl9jZmcuc3RvcmVzU291cmNlKTtcbiAgICAgICAgICAgICAgICBkYnNjaGVtYSA9IHZlcnNpb24uX2NmZy5kYnNjaGVtYSA9IHt9O1xuICAgICAgICAgICAgICAgIHZlcnNpb24uX3BhcnNlU3RvcmVzU3BlYyhzdG9yZXNTcGVjLCBkYnNjaGVtYSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRiLl9kYlNjaGVtYSA9IGRic2NoZW1hO1xuICAgICAgICAgICAgcmVtb3ZlVGFibGVzQXBpKGRiLCBbZGIuX2FsbFRhYmxlcywgZGIsIGRiLlRyYW5zYWN0aW9uLnByb3RvdHlwZV0pO1xuICAgICAgICAgICAgc2V0QXBpT25QbGFjZShkYiwgW2RiLl9hbGxUYWJsZXMsIGRiLCBkYi5UcmFuc2FjdGlvbi5wcm90b3R5cGUsIHRoaXMuX2NmZy50YWJsZXNdLCBrZXlzKGRic2NoZW1hKSwgZGJzY2hlbWEpO1xuICAgICAgICAgICAgZGIuX3N0b3JlTmFtZXMgPSBrZXlzKGRic2NoZW1hKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBWZXJzaW9uLnByb3RvdHlwZS51cGdyYWRlID0gZnVuY3Rpb24gKHVwZ3JhZGVGdW5jdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fY2ZnLmNvbnRlbnRVcGdyYWRlID0gcHJvbWlzYWJsZUNoYWluKHRoaXMuX2NmZy5jb250ZW50VXBncmFkZSB8fCBub3AsIHVwZ3JhZGVGdW5jdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZlcnNpb247XG4gICAgfSgpKTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVZlcnNpb25Db25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoVmVyc2lvbi5wcm90b3R5cGUsIGZ1bmN0aW9uIFZlcnNpb24odmVyc2lvbk51bWJlcikge1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdGhpcy5fY2ZnID0ge1xuICAgICAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgc3RvcmVzU291cmNlOiBudWxsLFxuICAgICAgICAgICAgICAgIGRic2NoZW1hOiB7fSxcbiAgICAgICAgICAgICAgICB0YWJsZXM6IHt9LFxuICAgICAgICAgICAgICAgIGNvbnRlbnRVcGdyYWRlOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXREYk5hbWVzVGFibGUoaW5kZXhlZERCLCBJREJLZXlSYW5nZSkge1xuICAgICAgICB2YXIgZGJOYW1lc0RCID0gaW5kZXhlZERCW1wiX2RiTmFtZXNEQlwiXTtcbiAgICAgICAgaWYgKCFkYk5hbWVzREIpIHtcbiAgICAgICAgICAgIGRiTmFtZXNEQiA9IGluZGV4ZWREQltcIl9kYk5hbWVzREJcIl0gPSBuZXcgRGV4aWUkMShEQk5BTUVTX0RCLCB7XG4gICAgICAgICAgICAgICAgYWRkb25zOiBbXSxcbiAgICAgICAgICAgICAgICBpbmRleGVkREI6IGluZGV4ZWREQixcbiAgICAgICAgICAgICAgICBJREJLZXlSYW5nZTogSURCS2V5UmFuZ2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRiTmFtZXNEQi52ZXJzaW9uKDEpLnN0b3Jlcyh7IGRibmFtZXM6IFwibmFtZVwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYk5hbWVzREIudGFibGUoXCJkYm5hbWVzXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNEYXRhYmFzZXNOYXRpdmUoaW5kZXhlZERCKSB7XG4gICAgICAgIHJldHVybiBpbmRleGVkREIgJiYgdHlwZW9mIGluZGV4ZWREQi5kYXRhYmFzZXMgPT09IFwiZnVuY3Rpb25cIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGF0YWJhc2VOYW1lcyhfYSkge1xuICAgICAgICB2YXIgaW5kZXhlZERCID0gX2EuaW5kZXhlZERCLCBJREJLZXlSYW5nZSA9IF9hLklEQktleVJhbmdlO1xuICAgICAgICByZXR1cm4gaGFzRGF0YWJhc2VzTmF0aXZlKGluZGV4ZWREQilcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKGluZGV4ZWREQi5kYXRhYmFzZXMoKSkudGhlbihmdW5jdGlvbiAoaW5mb3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5mb3NcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoaW5mbykgeyByZXR1cm4gaW5mby5uYW1lOyB9KVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBuYW1lICE9PSBEQk5BTUVTX0RCOyB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IGdldERiTmFtZXNUYWJsZShpbmRleGVkREIsIElEQktleVJhbmdlKS50b0NvbGxlY3Rpb24oKS5wcmltYXJ5S2V5cygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBfb25EYXRhYmFzZUNyZWF0ZWQoX2EsIG5hbWUpIHtcbiAgICAgICAgdmFyIGluZGV4ZWREQiA9IF9hLmluZGV4ZWREQiwgSURCS2V5UmFuZ2UgPSBfYS5JREJLZXlSYW5nZTtcbiAgICAgICAgIWhhc0RhdGFiYXNlc05hdGl2ZShpbmRleGVkREIpICYmXG4gICAgICAgICAgICBuYW1lICE9PSBEQk5BTUVTX0RCICYmXG4gICAgICAgICAgICBnZXREYk5hbWVzVGFibGUoaW5kZXhlZERCLCBJREJLZXlSYW5nZSkucHV0KHsgbmFtZTogbmFtZSB9KS5jYXRjaChub3ApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBfb25EYXRhYmFzZURlbGV0ZWQoX2EsIG5hbWUpIHtcbiAgICAgICAgdmFyIGluZGV4ZWREQiA9IF9hLmluZGV4ZWREQiwgSURCS2V5UmFuZ2UgPSBfYS5JREJLZXlSYW5nZTtcbiAgICAgICAgIWhhc0RhdGFiYXNlc05hdGl2ZShpbmRleGVkREIpICYmXG4gICAgICAgICAgICBuYW1lICE9PSBEQk5BTUVTX0RCICYmXG4gICAgICAgICAgICBnZXREYk5hbWVzVGFibGUoaW5kZXhlZERCLCBJREJLZXlSYW5nZSkuZGVsZXRlKG5hbWUpLmNhdGNoKG5vcCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmlwKGZuKSB7XG4gICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBQU0QubGV0VGhyb3VnaCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWRiUmVhZHkoKSB7XG4gICAgICAgIHZhciBpc1NhZmFyaSA9ICFuYXZpZ2F0b3IudXNlckFnZW50RGF0YSAmJlxuICAgICAgICAgICAgL1NhZmFyaVxcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgIS9DaHJvbShlfGl1bSlcXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIGlmICghaXNTYWZhcmkgfHwgIWluZGV4ZWREQi5kYXRhYmFzZXMpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHZhciBpbnRlcnZhbElkO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIHZhciB0cnlJZGIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleGVkREIuZGF0YWJhc2VzKCkuZmluYWxseShyZXNvbHZlKTsgfTtcbiAgICAgICAgICAgIGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh0cnlJZGIsIDEwMCk7XG4gICAgICAgICAgICB0cnlJZGIoKTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiBjbGVhckludGVydmFsKGludGVydmFsSWQpOyB9KTtcbiAgICB9XG5cbiAgICB2YXIgX2E7XG4gICAgZnVuY3Rpb24gaXNFbXB0eVJhbmdlKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuICEoXCJmcm9tXCIgaW4gbm9kZSk7XG4gICAgfVxuICAgIHZhciBSYW5nZVNldCA9IGZ1bmN0aW9uIChmcm9tT3JUcmVlLCB0bykge1xuICAgICAgICBpZiAodGhpcykge1xuICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGFyZ3VtZW50cy5sZW5ndGggPyB7IGQ6IDEsIGZyb206IGZyb21PclRyZWUsIHRvOiBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHRvIDogZnJvbU9yVHJlZSB9IDogeyBkOiAwIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJ2ID0gbmV3IFJhbmdlU2V0KCk7XG4gICAgICAgICAgICBpZiAoZnJvbU9yVHJlZSAmJiAoXCJkXCIgaW4gZnJvbU9yVHJlZSkpIHtcbiAgICAgICAgICAgICAgICBleHRlbmQocnYsIGZyb21PclRyZWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBwcm9wcyhSYW5nZVNldC5wcm90b3R5cGUsIChfYSA9IHtcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKHJhbmdlU2V0KSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VSYW5nZXModGhpcywgcmFuZ2VTZXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZEtleTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGFkZFJhbmdlKHRoaXMsIGtleSwga2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRLZXlzOiBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGFkZFJhbmdlKF90aGlzLCBrZXksIGtleSk7IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhc0tleTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gZ2V0UmFuZ2VTZXRJdGVyYXRvcih0aGlzKS5uZXh0KGtleSkudmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUgJiYgY21wKG5vZGUuZnJvbSwga2V5KSA8PSAwICYmIGNtcChub2RlLnRvLCBrZXkpID49IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9hW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRSYW5nZVNldEl0ZXJhdG9yKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICBfYSkpO1xuICAgIGZ1bmN0aW9uIGFkZFJhbmdlKHRhcmdldCwgZnJvbSwgdG8pIHtcbiAgICAgICAgdmFyIGRpZmYgPSBjbXAoZnJvbSwgdG8pO1xuICAgICAgICBpZiAoaXNOYU4oZGlmZikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChkaWZmID4gMClcbiAgICAgICAgICAgIHRocm93IFJhbmdlRXJyb3IoKTtcbiAgICAgICAgaWYgKGlzRW1wdHlSYW5nZSh0YXJnZXQpKVxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuZCh0YXJnZXQsIHsgZnJvbTogZnJvbSwgdG86IHRvLCBkOiAxIH0pO1xuICAgICAgICB2YXIgbGVmdCA9IHRhcmdldC5sO1xuICAgICAgICB2YXIgcmlnaHQgPSB0YXJnZXQucjtcbiAgICAgICAgaWYgKGNtcCh0bywgdGFyZ2V0LmZyb20pIDwgMCkge1xuICAgICAgICAgICAgbGVmdFxuICAgICAgICAgICAgICAgID8gYWRkUmFuZ2UobGVmdCwgZnJvbSwgdG8pXG4gICAgICAgICAgICAgICAgOiAodGFyZ2V0LmwgPSB7IGZyb206IGZyb20sIHRvOiB0bywgZDogMSwgbDogbnVsbCwgcjogbnVsbCB9KTtcbiAgICAgICAgICAgIHJldHVybiByZWJhbGFuY2UodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY21wKGZyb20sIHRhcmdldC50bykgPiAwKSB7XG4gICAgICAgICAgICByaWdodFxuICAgICAgICAgICAgICAgID8gYWRkUmFuZ2UocmlnaHQsIGZyb20sIHRvKVxuICAgICAgICAgICAgICAgIDogKHRhcmdldC5yID0geyBmcm9tOiBmcm9tLCB0bzogdG8sIGQ6IDEsIGw6IG51bGwsIHI6IG51bGwgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmViYWxhbmNlKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNtcChmcm9tLCB0YXJnZXQuZnJvbSkgPCAwKSB7XG4gICAgICAgICAgICB0YXJnZXQuZnJvbSA9IGZyb207XG4gICAgICAgICAgICB0YXJnZXQubCA9IG51bGw7XG4gICAgICAgICAgICB0YXJnZXQuZCA9IHJpZ2h0ID8gcmlnaHQuZCArIDEgOiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbXAodG8sIHRhcmdldC50bykgPiAwKSB7XG4gICAgICAgICAgICB0YXJnZXQudG8gPSB0bztcbiAgICAgICAgICAgIHRhcmdldC5yID0gbnVsbDtcbiAgICAgICAgICAgIHRhcmdldC5kID0gdGFyZ2V0LmwgPyB0YXJnZXQubC5kICsgMSA6IDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJpZ2h0V2FzQ3V0T2ZmID0gIXRhcmdldC5yO1xuICAgICAgICBpZiAobGVmdCAmJiAhdGFyZ2V0LmwpIHtcbiAgICAgICAgICAgIG1lcmdlUmFuZ2VzKHRhcmdldCwgbGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJpZ2h0ICYmIHJpZ2h0V2FzQ3V0T2ZmKSB7XG4gICAgICAgICAgICBtZXJnZVJhbmdlcyh0YXJnZXQsIHJpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBtZXJnZVJhbmdlcyh0YXJnZXQsIG5ld1NldCkge1xuICAgICAgICBmdW5jdGlvbiBfYWRkUmFuZ2VTZXQodGFyZ2V0LCBfYSkge1xuICAgICAgICAgICAgdmFyIGZyb20gPSBfYS5mcm9tLCB0byA9IF9hLnRvLCBsID0gX2EubCwgciA9IF9hLnI7XG4gICAgICAgICAgICBhZGRSYW5nZSh0YXJnZXQsIGZyb20sIHRvKTtcbiAgICAgICAgICAgIGlmIChsKVxuICAgICAgICAgICAgICAgIF9hZGRSYW5nZVNldCh0YXJnZXQsIGwpO1xuICAgICAgICAgICAgaWYgKHIpXG4gICAgICAgICAgICAgICAgX2FkZFJhbmdlU2V0KHRhcmdldCwgcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0VtcHR5UmFuZ2UobmV3U2V0KSlcbiAgICAgICAgICAgIF9hZGRSYW5nZVNldCh0YXJnZXQsIG5ld1NldCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJhbmdlc092ZXJsYXAocmFuZ2VTZXQxLCByYW5nZVNldDIpIHtcbiAgICAgICAgdmFyIGkxID0gZ2V0UmFuZ2VTZXRJdGVyYXRvcihyYW5nZVNldDIpO1xuICAgICAgICB2YXIgbmV4dFJlc3VsdDEgPSBpMS5uZXh0KCk7XG4gICAgICAgIGlmIChuZXh0UmVzdWx0MS5kb25lKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgYSA9IG5leHRSZXN1bHQxLnZhbHVlO1xuICAgICAgICB2YXIgaTIgPSBnZXRSYW5nZVNldEl0ZXJhdG9yKHJhbmdlU2V0MSk7XG4gICAgICAgIHZhciBuZXh0UmVzdWx0MiA9IGkyLm5leHQoYS5mcm9tKTtcbiAgICAgICAgdmFyIGIgPSBuZXh0UmVzdWx0Mi52YWx1ZTtcbiAgICAgICAgd2hpbGUgKCFuZXh0UmVzdWx0MS5kb25lICYmICFuZXh0UmVzdWx0Mi5kb25lKSB7XG4gICAgICAgICAgICBpZiAoY21wKGIuZnJvbSwgYS50bykgPD0gMCAmJiBjbXAoYi50bywgYS5mcm9tKSA+PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY21wKGEuZnJvbSwgYi5mcm9tKSA8IDBcbiAgICAgICAgICAgICAgICA/IChhID0gKG5leHRSZXN1bHQxID0gaTEubmV4dChiLmZyb20pKS52YWx1ZSlcbiAgICAgICAgICAgICAgICA6IChiID0gKG5leHRSZXN1bHQyID0gaTIubmV4dChhLmZyb20pKS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRSYW5nZVNldEl0ZXJhdG9yKG5vZGUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gaXNFbXB0eVJhbmdlKG5vZGUpID8gbnVsbCA6IHsgczogMCwgbjogbm9kZSB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlQcm92aWRlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXRlLnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UHJvdmlkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0YXRlLm4ubCAmJiBjbXAoa2V5LCBzdGF0ZS5uLmZyb20pIDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0geyB1cDogc3RhdGUsIG46IHN0YXRlLm4ubCwgczogMSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0YXRlLm4ubClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0geyB1cDogc3RhdGUsIG46IHN0YXRlLm4ubCwgczogMSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWtleVByb3ZpZGVkIHx8IGNtcChrZXksIHN0YXRlLm4udG8pIDw9IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBzdGF0ZS5uLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5uLnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUucyA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0geyB1cDogc3RhdGUsIG46IHN0YXRlLm4uciwgczogMCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS51cDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWJhbGFuY2UodGFyZ2V0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHZhciBkaWZmID0gKCgoX2EgPSB0YXJnZXQucikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmQpIHx8IDApIC0gKCgoX2IgPSB0YXJnZXQubCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmQpIHx8IDApO1xuICAgICAgICB2YXIgciA9IGRpZmYgPiAxID8gXCJyXCIgOiBkaWZmIDwgLTEgPyBcImxcIiA6IFwiXCI7XG4gICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICB2YXIgbCA9IHIgPT09IFwiclwiID8gXCJsXCIgOiBcInJcIjtcbiAgICAgICAgICAgIHZhciByb290Q2xvbmUgPSBfX2Fzc2lnbih7fSwgdGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBvbGRSb290UmlnaHQgPSB0YXJnZXRbcl07XG4gICAgICAgICAgICB0YXJnZXQuZnJvbSA9IG9sZFJvb3RSaWdodC5mcm9tO1xuICAgICAgICAgICAgdGFyZ2V0LnRvID0gb2xkUm9vdFJpZ2h0LnRvO1xuICAgICAgICAgICAgdGFyZ2V0W3JdID0gb2xkUm9vdFJpZ2h0W3JdO1xuICAgICAgICAgICAgcm9vdENsb25lW3JdID0gb2xkUm9vdFJpZ2h0W2xdO1xuICAgICAgICAgICAgdGFyZ2V0W2xdID0gcm9vdENsb25lO1xuICAgICAgICAgICAgcm9vdENsb25lLmQgPSBjb21wdXRlRGVwdGgocm9vdENsb25lKTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQuZCA9IGNvbXB1dGVEZXB0aCh0YXJnZXQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wdXRlRGVwdGgoX2EpIHtcbiAgICAgICAgdmFyIHIgPSBfYS5yLCBsID0gX2EubDtcbiAgICAgICAgcmV0dXJuIChyID8gKGwgPyBNYXRoLm1heChyLmQsIGwuZCkgOiByLmQpIDogbCA/IGwuZCA6IDApICsgMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHRlbmRPYnNlcnZhYmlsaXR5U2V0KHRhcmdldCwgbmV3U2V0KSB7XG4gICAgICAgIGtleXMobmV3U2V0KS5mb3JFYWNoKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0W3BhcnRdKVxuICAgICAgICAgICAgICAgIG1lcmdlUmFuZ2VzKHRhcmdldFtwYXJ0XSwgbmV3U2V0W3BhcnRdKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0YXJnZXRbcGFydF0gPSBjbG9uZVNpbXBsZU9iamVjdFRyZWUobmV3U2V0W3BhcnRdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb2JzU2V0c092ZXJsYXAob3MxLCBvczIpIHtcbiAgICAgICAgcmV0dXJuIG9zMS5hbGwgfHwgb3MyLmFsbCB8fCBPYmplY3Qua2V5cyhvczEpLnNvbWUoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gb3MyW2tleV0gJiYgcmFuZ2VzT3ZlcmxhcChvczJba2V5XSwgb3MxW2tleV0pOyB9KTtcbiAgICB9XG5cbiAgICB2YXIgY2FjaGUgPSB7fTtcblxuICAgIHZhciB1bnNpZ25hbGVkUGFydHMgPSB7fTtcbiAgICB2YXIgaXNUYXNrRW5xdWV1ZWQgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiBzaWduYWxTdWJzY3JpYmVyc0xhemlseShwYXJ0LCBvcHRpbWlzdGljKSB7XG4gICAgICAgIGV4dGVuZE9ic2VydmFiaWxpdHlTZXQodW5zaWduYWxlZFBhcnRzLCBwYXJ0KTtcbiAgICAgICAgaWYgKCFpc1Rhc2tFbnF1ZXVlZCkge1xuICAgICAgICAgICAgaXNUYXNrRW5xdWV1ZWQgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaXNUYXNrRW5xdWV1ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSB1bnNpZ25hbGVkUGFydHM7XG4gICAgICAgICAgICAgICAgdW5zaWduYWxlZFBhcnRzID0ge307XG4gICAgICAgICAgICAgICAgc2lnbmFsU3Vic2NyaWJlcnNOb3cocGFydHMsIGZhbHNlKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNpZ25hbFN1YnNjcmliZXJzTm93KHVwZGF0ZWRQYXJ0cywgZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMpIHtcbiAgICAgICAgaWYgKGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzID09PSB2b2lkIDApIHsgZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgcXVlcmllc1RvU2lnbmFsID0gbmV3IFNldCgpO1xuICAgICAgICBpZiAodXBkYXRlZFBhcnRzLmFsbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC52YWx1ZXMoY2FjaGUpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciB0YmxDYWNoZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBjb2xsZWN0VGFibGVTdWJzY3JpYmVycyh0YmxDYWNoZSwgdXBkYXRlZFBhcnRzLCBxdWVyaWVzVG9TaWduYWwsIGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB1cGRhdGVkUGFydHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSAvXmlkYlxcOlxcL1xcLyguKilcXC8oLiopXFwvLy5leGVjKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYk5hbWUgPSBwYXJ0c1sxXSwgdGFibGVOYW1lID0gcGFydHNbMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YmxDYWNoZSA9IGNhY2hlW1wiaWRiOi8vXCIuY29uY2F0KGRiTmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZU5hbWUpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRibENhY2hlKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdFRhYmxlU3Vic2NyaWJlcnModGJsQ2FjaGUsIHVwZGF0ZWRQYXJ0cywgcXVlcmllc1RvU2lnbmFsLCBkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXJpZXNUb1NpZ25hbC5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiByZXF1ZXJ5KCk7IH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb2xsZWN0VGFibGVTdWJzY3JpYmVycyh0YmxDYWNoZSwgdXBkYXRlZFBhcnRzLCBvdXRRdWVyaWVzVG9TaWduYWwsIGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKSB7XG4gICAgICAgIHZhciB1cGRhdGVkRW50cnlMaXN0cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmVudHJpZXModGJsQ2FjaGUucXVlcmllcy5xdWVyeSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBfYVtfaV0sIGluZGV4TmFtZSA9IF9iWzBdLCBlbnRyaWVzID0gX2JbMV07XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRyaWVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIGVudHJpZXNfMSA9IGVudHJpZXM7IF9jIDwgZW50cmllc18xLmxlbmd0aDsgX2MrKykge1xuICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNfMVtfY107XG4gICAgICAgICAgICAgICAgaWYgKG9ic1NldHNPdmVybGFwKHVwZGF0ZWRQYXJ0cywgZW50cnkub2JzU2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiBvdXRRdWVyaWVzVG9TaWduYWwuYWRkKHJlcXVlcnkpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRFbnRyaWVzLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcylcbiAgICAgICAgICAgICAgICB1cGRhdGVkRW50cnlMaXN0cy5wdXNoKFtpbmRleE5hbWUsIGZpbHRlcmVkRW50cmllc10pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcykge1xuICAgICAgICAgICAgZm9yICh2YXIgX2QgPSAwLCB1cGRhdGVkRW50cnlMaXN0c18xID0gdXBkYXRlZEVudHJ5TGlzdHM7IF9kIDwgdXBkYXRlZEVudHJ5TGlzdHNfMS5sZW5ndGg7IF9kKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgX2UgPSB1cGRhdGVkRW50cnlMaXN0c18xW19kXSwgaW5kZXhOYW1lID0gX2VbMF0sIGZpbHRlcmVkRW50cmllcyA9IF9lWzFdO1xuICAgICAgICAgICAgICAgIHRibENhY2hlLnF1ZXJpZXMucXVlcnlbaW5kZXhOYW1lXSA9IGZpbHRlcmVkRW50cmllcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRleGllT3BlbihkYikge1xuICAgICAgICB2YXIgc3RhdGUgPSBkYi5fc3RhdGU7XG4gICAgICAgIHZhciBpbmRleGVkREIgPSBkYi5fZGVwcy5pbmRleGVkREI7XG4gICAgICAgIGlmIChzdGF0ZS5pc0JlaW5nT3BlbmVkIHx8IGRiLmlkYmRiKVxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmRiUmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RhdGUuZGJPcGVuRXJyb3IgP1xuICAgICAgICAgICAgICAgIHJlamVjdGlvbihzdGF0ZS5kYk9wZW5FcnJvcikgOlxuICAgICAgICAgICAgICAgIGRiOyB9KTtcbiAgICAgICAgc3RhdGUuaXNCZWluZ09wZW5lZCA9IHRydWU7XG4gICAgICAgIHN0YXRlLmRiT3BlbkVycm9yID0gbnVsbDtcbiAgICAgICAgc3RhdGUub3BlbkNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIHZhciBvcGVuQ2FuY2VsbGVyID0gc3RhdGUub3BlbkNhbmNlbGxlcjtcbiAgICAgICAgdmFyIG5hdGl2ZVZlclRvT3BlbiA9IE1hdGgucm91bmQoZGIudmVybm8gKiAxMCk7XG4gICAgICAgIHZhciBzY2hlbWFQYXRjaE1vZGUgPSBmYWxzZTtcbiAgICAgICAgZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxlZCgpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5vcGVuQ2FuY2VsbGVyICE9PSBvcGVuQ2FuY2VsbGVyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCdkYi5vcGVuKCkgd2FzIGNhbmNlbGxlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvbHZlRGJSZWFkeSA9IHN0YXRlLmRiUmVhZHlSZXNvbHZlLFxuICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gPSBudWxsLCB3YXNDcmVhdGVkID0gZmFsc2U7XG4gICAgICAgIHZhciB0cnlPcGVuREIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRocm93SWZDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIGlmICghaW5kZXhlZERCKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoKTtcbiAgICAgICAgICAgIHZhciBkYk5hbWUgPSBkYi5uYW1lO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHN0YXRlLmF1dG9TY2hlbWEgfHwgIW5hdGl2ZVZlclRvT3BlbiA/XG4gICAgICAgICAgICAgICAgaW5kZXhlZERCLm9wZW4oZGJOYW1lKSA6XG4gICAgICAgICAgICAgICAgaW5kZXhlZERCLm9wZW4oZGJOYW1lLCBuYXRpdmVWZXJUb09wZW4pO1xuICAgICAgICAgICAgaWYgKCFyZXEpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTWlzc2luZ0FQSSgpO1xuICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgIHJlcS5vbmJsb2NrZWQgPSB3cmFwKGRiLl9maXJlT25CbG9ja2VkKTtcbiAgICAgICAgICAgIHJlcS5vbnVwZ3JhZGVuZWVkZWQgPSB3cmFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uID0gcmVxLnRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5hdXRvU2NoZW1hICYmICFkYi5fb3B0aW9ucy5hbGxvd0VtcHR5REIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBwcmV2ZW50RGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5yZXN1bHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHJlcSA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShkYk5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBkZWxyZXEub25zdWNjZXNzID0gZGVscmVxLm9uZXJyb3IgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgZXhjZXB0aW9ucy5Ob1N1Y2hEYXRhYmFzZShcIkRhdGFiYXNlIFwiLmNvbmNhdChkYk5hbWUsIFwiIGRvZXNudCBleGlzdFwiKSkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbi5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvbGRWZXIgPSBlLm9sZFZlcnNpb24gPiBNYXRoLnBvdygyLCA2MikgPyAwIDogZS5vbGRWZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICB3YXNDcmVhdGVkID0gb2xkVmVyIDwgMTtcbiAgICAgICAgICAgICAgICAgICAgZGIuaWRiZGIgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZW1hUGF0Y2hNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaEN1cnJlbnRWZXJzaW9uKGRiLCB1cGdyYWRlVHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJ1blVwZ3JhZGVycyhkYiwgb2xkVmVyIC8gMTAsIHVwZ3JhZGVUcmFuc2FjdGlvbiwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHdyYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGlkYmRiID0gZGIuaWRiZGIgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZU5hbWVzID0gc2xpY2UoaWRiZGIub2JqZWN0U3RvcmVOYW1lcyk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdFN0b3JlTmFtZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXBUcmFucyA9IGlkYmRiLnRyYW5zYWN0aW9uKHNhZmFyaU11bHRpU3RvcmVGaXgob2JqZWN0U3RvcmVOYW1lcyksICdyZWFkb25seScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmF1dG9TY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEdsb2JhbFNjaGVtYShkYiwgaWRiZGIsIHRtcFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdFRvRXhpc3RpbmdJbmRleE5hbWVzKGRiLCBkYi5fZGJTY2hlbWEsIHRtcFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZlcmlmeUluc3RhbGxlZFNjaGVtYShkYiwgdG1wVHJhbnMpICYmICFzY2hlbWFQYXRjaE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRGV4aWUgU2NoZW1hRGlmZjogU2NoZW1hIHdhcyBleHRlbmRlZCB3aXRob3V0IGluY3JlYXNpbmcgdGhlIG51bWJlciBwYXNzZWQgdG8gZGIudmVyc2lvbigpLiBEZXhpZSB3aWxsIGFkZCBtaXNzaW5nIHBhcnRzIGFuZCBpbmNyZW1lbnQgbmF0aXZlIHZlcnNpb24gbnVtYmVyIHRvIHdvcmthcm91bmQgdGhpcy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkYmRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZVZlclRvT3BlbiA9IGlkYmRiLnZlcnNpb24gKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWFQYXRjaE1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnlPcGVuREIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLCB0bXBUcmFucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goZGIpO1xuICAgICAgICAgICAgICAgIGlkYmRiLm9udmVyc2lvbmNoYW5nZSA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLnZjRmlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkYi5vbihcInZlcnNpb25jaGFuZ2VcIikuZmlyZShldik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWRiZGIub25jbG9zZSA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLm9uKFwiY2xvc2VcIikuZmlyZShldik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHdhc0NyZWF0ZWQpXG4gICAgICAgICAgICAgICAgICAgIF9vbkRhdGFiYXNlQ3JlYXRlZChkYi5fZGVwcywgZGJOYW1lKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlVua25vd25FcnJvclwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuUFIxMzk4X21heExvb3AgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5QUjEzOThfbWF4TG9vcC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdEZXhpZTogV29ya2Fyb3VuZCBmb3IgQ2hyb21lIFVua25vd25FcnJvciBvbiBvcGVuKCknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnlPcGVuREIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiVmVyc2lvbkVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChuYXRpdmVWZXJUb09wZW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVWZXJUb09wZW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeU9wZW5EQigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmFjZShbXG4gICAgICAgICAgICBvcGVuQ2FuY2VsbGVyLFxuICAgICAgICAgICAgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnID8gRGV4aWVQcm9taXNlLnJlc29sdmUoKSA6IGlkYlJlYWR5KCkpLnRoZW4odHJ5T3BlbkRCKVxuICAgICAgICBdKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93SWZDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkID0gW107XG4gICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUodmlwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRiLm9uLnJlYWR5LmZpcmUoZGIudmlwKTsgfSkpLnRoZW4oZnVuY3Rpb24gZmlyZVJlbWFpbmRlcnMoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbWFpbmRlcnNfMSA9IHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkLnJlZHVjZShwcm9taXNhYmxlQ2hhaW4sIG5vcCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZSh2aXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVtYWluZGVyc18xKGRiLnZpcCk7IH0pKS50aGVuKGZpcmVSZW1haW5kZXJzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUub3BlbkNhbmNlbGxlciA9PT0gb3BlbkNhbmNlbGxlcikge1xuICAgICAgICAgICAgICAgIHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc0JlaW5nT3BlbmVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHN0YXRlLmRiT3BlbkVycm9yID0gZXJyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gJiYgdXBncmFkZVRyYW5zYWN0aW9uLmFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICAgICAgaWYgKG9wZW5DYW5jZWxsZXIgPT09IHN0YXRlLm9wZW5DYW5jZWxsZXIpIHtcbiAgICAgICAgICAgICAgICBkYi5fY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZXJyKTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzdGF0ZS5vcGVuQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgcmVzb2x2ZURiUmVhZHkoKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAod2FzQ3JlYXRlZCkge1xuICAgICAgICAgICAgICAgIHZhciBldmVyeXRoaW5nXzEgPSB7fTtcbiAgICAgICAgICAgICAgICBkYi50YWJsZXMuZm9yRWFjaChmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2NoZW1hLmluZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4Lm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlcnl0aGluZ18xW1wiaWRiOi8vXCIuY29uY2F0KGRiLm5hbWUsIFwiL1wiKS5jb25jYXQodGFibGUubmFtZSwgXCIvXCIpLmNvbmNhdChpZHgubmFtZSldID0gbmV3IFJhbmdlU2V0KC1JbmZpbml0eSwgW1tbXV1dKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZXJ5dGhpbmdfMVtcImlkYjovL1wiLmNvbmNhdChkYi5uYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlLm5hbWUsIFwiL1wiKV0gPSBldmVyeXRoaW5nXzFbXCJpZGI6Ly9cIi5jb25jYXQoZGIubmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZS5uYW1lLCBcIi86ZGVsc1wiKV0gPSBuZXcgUmFuZ2VTZXQoLUluZmluaXR5LCBbW1tdXV0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdsb2JhbEV2ZW50cyhERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSkuZmlyZShldmVyeXRoaW5nXzEpO1xuICAgICAgICAgICAgICAgIHNpZ25hbFN1YnNjcmliZXJzTm93KGV2ZXJ5dGhpbmdfMSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGI7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF3YWl0SXRlcmF0b3IoaXRlcmF0b3IpIHtcbiAgICAgICAgdmFyIGNhbGxOZXh0ID0gZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gaXRlcmF0b3IubmV4dChyZXN1bHQpOyB9LCBkb1Rocm93ID0gZnVuY3Rpb24gKGVycm9yKSB7IHJldHVybiBpdGVyYXRvci50aHJvdyhlcnJvcik7IH0sIG9uU3VjY2VzcyA9IHN0ZXAoY2FsbE5leHQpLCBvbkVycm9yID0gc3RlcChkb1Rocm93KTtcbiAgICAgICAgZnVuY3Rpb24gc3RlcChnZXROZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gZ2V0TmV4dCh2YWwpLCB2YWx1ZSA9IG5leHQudmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQuZG9uZSA/IHZhbHVlIDpcbiAgICAgICAgICAgICAgICAgICAgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUudGhlbiAhPT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FycmF5KHZhbHVlKSA/IFByb21pc2UuYWxsKHZhbHVlKS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcikgOiBvblN1Y2Nlc3ModmFsdWUpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGVwKGNhbGxOZXh0KSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4dHJhY3RUcmFuc2FjdGlvbkFyZ3MobW9kZSwgX3RhYmxlQXJnc18sIHNjb3BlRnVuYykge1xuICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChpIDwgMilcbiAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIlRvbyBmZXcgYXJndW1lbnRzXCIpO1xuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpIC0gMSk7XG4gICAgICAgIHdoaWxlICgtLWkpXG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgc2NvcGVGdW5jID0gYXJncy5wb3AoKTtcbiAgICAgICAgdmFyIHRhYmxlcyA9IGZsYXR0ZW4oYXJncyk7XG4gICAgICAgIHJldHVybiBbbW9kZSwgdGFibGVzLCBzY29wZUZ1bmNdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbnRlclRyYW5zYWN0aW9uU2NvcGUoZGIsIG1vZGUsIHN0b3JlTmFtZXMsIHBhcmVudFRyYW5zYWN0aW9uLCBzY29wZUZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNsZXNzID0gUFNELnRyYW5zbGVzcyB8fCBQU0Q7XG4gICAgICAgICAgICB2YXIgdHJhbnMgPSBkYi5fY3JlYXRlVHJhbnNhY3Rpb24obW9kZSwgc3RvcmVOYW1lcywgZGIuX2RiU2NoZW1hLCBwYXJlbnRUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICB0cmFucy5leHBsaWNpdCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgem9uZVByb3BzID0ge1xuICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICB0cmFuc2xlc3M6IHRyYW5zbGVzc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgIHRyYW5zLmlkYnRyYW5zID0gcGFyZW50VHJhbnNhY3Rpb24uaWRidHJhbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0cmFucy5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMuX2V4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGIuX3N0YXRlLlBSMTM5OF9tYXhMb29wID0gMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleC5uYW1lID09PSBlcnJuYW1lcy5JbnZhbGlkU3RhdGUgJiYgZGIuaXNPcGVuKCkgJiYgLS1kYi5fc3RhdGUuUFIxMzk4X21heExvb3AgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RleGllOiBOZWVkIHRvIHJlb3BlbiBkYicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoeyBkaXNhYmxlQXV0b09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRiLm9wZW4oKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVudGVyVHJhbnNhY3Rpb25TY29wZShkYiwgbW9kZSwgc3RvcmVOYW1lcywgbnVsbCwgc2NvcGVGdW5jKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNjb3BlRnVuY0lzQXN5bmMgPSBpc0FzeW5jRnVuY3Rpb24oc2NvcGVGdW5jKTtcbiAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlRm9sbG93ZWQgPSBEZXhpZVByb21pc2UuZm9sbG93KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHNjb3BlRnVuYy5jYWxsKHRyYW5zLCB0cmFucyk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVjcmVtZW50b3IgPSBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cy5iaW5kKG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUudGhlbihkZWNyZW1lbnRvciwgZGVjcmVtZW50b3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiByZXR1cm5WYWx1ZS5uZXh0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiByZXR1cm5WYWx1ZS50aHJvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhd2FpdEl0ZXJhdG9yKHJldHVyblZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHpvbmVQcm9wcyk7XG4gICAgICAgICAgICByZXR1cm4gKHJldHVyblZhbHVlICYmIHR5cGVvZiByZXR1cm5WYWx1ZS50aGVuID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgICAgICBEZXhpZVByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZSkudGhlbihmdW5jdGlvbiAoeCkgeyByZXR1cm4gdHJhbnMuYWN0aXZlID9cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgICA6IHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5QcmVtYXR1cmVDb21taXQoXCJUcmFuc2FjdGlvbiBjb21taXR0ZWQgdG9vIGVhcmx5LiBTZWUgaHR0cDovL2JpdC5seS8ya2Rja01uXCIpKTsgfSlcbiAgICAgICAgICAgICAgICA6IHByb21pc2VGb2xsb3dlZC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJldHVyblZhbHVlOyB9KSkudGhlbihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgdHJhbnMuX3Jlc29sdmUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnMuX2NvbXBsZXRpb24udGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB4OyB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdHJhbnMuX3JlamVjdChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhZChhLCB2YWx1ZSwgY291bnQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGlzQXJyYXkoYSkgPyBhLnNsaWNlKCkgOiBbYV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSlcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlVmlydHVhbEluZGV4TWlkZGxld2FyZShkb3duKSB7XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZG93biksIHsgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBkb3duLnRhYmxlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIHNjaGVtYSA9IHRhYmxlLnNjaGVtYTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhMb29rdXAgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgYWxsVmlydHVhbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhZGRWaXJ0dWFsSW5kZXhlcyhrZXlQYXRoLCBrZXlUYWlsLCBsb3dMZXZlbEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoQWxpYXMgPSBnZXRLZXlQYXRoQWxpYXMoa2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleExpc3QgPSAoaW5kZXhMb29rdXBba2V5UGF0aEFsaWFzXSA9IGluZGV4TG9va3VwW2tleVBhdGhBbGlhc10gfHwgW10pO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5TGVuZ3RoID0ga2V5UGF0aCA9PSBudWxsID8gMCA6IHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/IDEgOiBrZXlQYXRoLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmlydHVhbCA9IGtleVRhaWwgPiAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmlydHVhbEluZGV4ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxvd0xldmVsSW5kZXgpLCB7IG5hbWU6IGlzVmlydHVhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcIi5jb25jYXQoa2V5UGF0aEFsaWFzLCBcIih2aXJ0dWFsLWZyb206XCIpLmNvbmNhdChsb3dMZXZlbEluZGV4Lm5hbWUsIFwiKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbG93TGV2ZWxJbmRleC5uYW1lLCBsb3dMZXZlbEluZGV4OiBsb3dMZXZlbEluZGV4LCBpc1ZpcnR1YWw6IGlzVmlydHVhbCwga2V5VGFpbDoga2V5VGFpbCwga2V5TGVuZ3RoOiBrZXlMZW5ndGgsIGV4dHJhY3RLZXk6IGdldEtleUV4dHJhY3RvcihrZXlQYXRoKSwgdW5pcXVlOiAhaXNWaXJ0dWFsICYmIGxvd0xldmVsSW5kZXgudW5pcXVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbmRleExpc3QucHVzaCh2aXJ0dWFsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXZpcnR1YWxJbmRleC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFZpcnR1YWxJbmRleGVzLnB1c2godmlydHVhbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5TGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpcnR1YWxLZXlQYXRoID0ga2V5TGVuZ3RoID09PSAyID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlQYXRoWzBdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlQYXRoLnNsaWNlKDAsIGtleUxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVmlydHVhbEluZGV4ZXModmlydHVhbEtleVBhdGgsIGtleVRhaWwgKyAxLCBsb3dMZXZlbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmRleExpc3Quc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5rZXlUYWlsIC0gYi5rZXlUYWlsOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcnR1YWxJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHByaW1hcnlLZXkgPSBhZGRWaXJ0dWFsSW5kZXhlcyhzY2hlbWEucHJpbWFyeUtleS5rZXlQYXRoLCAwLCBzY2hlbWEucHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgaW5kZXhMb29rdXBbXCI6aWRcIl0gPSBbcHJpbWFyeUtleV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNjaGVtYS5pbmRleGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGFkZFZpcnR1YWxJbmRleGVzKGluZGV4LmtleVBhdGgsIDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZmluZEJlc3RJbmRleChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBpbmRleExvb2t1cFtnZXRLZXlQYXRoQWxpYXMoa2V5UGF0aCldO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICYmIHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNsYXRlUmFuZ2UocmFuZ2UsIGtleVRhaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJhbmdlLnR5cGUgPT09IDEgID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyOiBwYWQocmFuZ2UubG93ZXIsIHJhbmdlLmxvd2VyT3BlbiA/IGRvd24uTUFYX0tFWSA6IGRvd24uTUlOX0tFWSwga2V5VGFpbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlck9wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlcjogcGFkKHJhbmdlLnVwcGVyLCByYW5nZS51cHBlck9wZW4gPyBkb3duLk1JTl9LRVkgOiBkb3duLk1BWF9LRVksIGtleVRhaWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJPcGVuOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZVJlcXVlc3QocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHJlcS5xdWVyeS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4LmlzVmlydHVhbCA/IF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXEpLCB7IHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4Lmxvd0xldmVsSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHRyYW5zbGF0ZVJhbmdlKHJlcS5xdWVyeS5yYW5nZSwgaW5kZXgua2V5VGFpbClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSkgOiByZXE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGFibGUpLCB7IHNjaGVtYTogX19hc3NpZ24oX19hc3NpZ24oe30sIHNjaGVtYSksIHsgcHJpbWFyeUtleTogcHJpbWFyeUtleSwgaW5kZXhlczogYWxsVmlydHVhbEluZGV4ZXMsIGdldEluZGV4QnlLZXlQYXRoOiBmaW5kQmVzdEluZGV4IH0pLCBjb3VudDogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLmNvdW50KHRyYW5zbGF0ZVJlcXVlc3QocmVxKSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHF1ZXJ5OiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUucXVlcnkodHJhbnNsYXRlUmVxdWVzdChyZXEpKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgb3BlbkN1cnNvcjogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hID0gcmVxLnF1ZXJ5LmluZGV4LCBrZXlUYWlsID0gX2Eua2V5VGFpbCwgaXNWaXJ0dWFsID0gX2EuaXNWaXJ0dWFsLCBrZXlMZW5ndGggPSBfYS5rZXlMZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmlydHVhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUub3BlbkN1cnNvcihyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlVmlydHVhbEN1cnNvcihjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfY29udGludWUoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSAhPSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShwYWQoa2V5LCByZXEucmV2ZXJzZSA/IGRvd24uTUFYX0tFWSA6IGRvd24uTUlOX0tFWSwga2V5VGFpbCkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS51bmlxdWUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShjdXJzb3Iua2V5LnNsaWNlKDAsIGtleUxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChyZXEucmV2ZXJzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRvd24uTUlOX0tFWVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvd24uTUFYX0tFWSwga2V5VGFpbCkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpcnR1YWxDdXJzb3IgPSBPYmplY3QuY3JlYXRlKGN1cnNvciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTogeyB2YWx1ZTogX2NvbnRpbnVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlUHJpbWFyeUtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChrZXksIHByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWVQcmltYXJ5S2V5KHBhZChrZXksIGRvd24uTUFYX0tFWSwga2V5VGFpbCksIHByaW1hcnlLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGN1cnNvci5rZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleUxlbmd0aCA9PT0gMSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVswXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleS5zbGljZSgwLCBrZXlMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aXJ0dWFsQ3Vyc29yO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLm9wZW5DdXJzb3IodHJhbnNsYXRlUmVxdWVzdChyZXEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjdXJzb3IpIHsgcmV0dXJuIGN1cnNvciAmJiBjcmVhdGVWaXJ0dWFsQ3Vyc29yKGN1cnNvcik7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9IH0pO1xuICAgIH1cbiAgICB2YXIgdmlydHVhbEluZGV4TWlkZGxld2FyZSA9IHtcbiAgICAgICAgc3RhY2s6IFwiZGJjb3JlXCIsXG4gICAgICAgIG5hbWU6IFwiVmlydHVhbEluZGV4TWlkZGxld2FyZVwiLFxuICAgICAgICBsZXZlbDogMSxcbiAgICAgICAgY3JlYXRlOiBjcmVhdGVWaXJ0dWFsSW5kZXhNaWRkbGV3YXJlXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldE9iamVjdERpZmYoYSwgYiwgcnYsIHByZngpIHtcbiAgICAgICAgcnYgPSBydiB8fCB7fTtcbiAgICAgICAgcHJmeCA9IHByZnggfHwgJyc7XG4gICAgICAgIGtleXMoYSkuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgaWYgKCFoYXNPd24oYiwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICBydltwcmZ4ICsgcHJvcF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgYXAgPSBhW3Byb3BdLCBicCA9IGJbcHJvcF07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGJwID09PSAnb2JqZWN0JyAmJiBhcCAmJiBicCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXBUeXBlTmFtZSA9IHRvU3RyaW5nVGFnKGFwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJwVHlwZU5hbWUgPSB0b1N0cmluZ1RhZyhicCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcFR5cGVOYW1lICE9PSBicFR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydltwcmZ4ICsgcHJvcF0gPSBiW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFwVHlwZU5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRPYmplY3REaWZmKGFwLCBicCwgcnYsIHByZnggKyBwcm9wICsgJy4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcCAhPT0gYnApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXAgIT09IGJwKVxuICAgICAgICAgICAgICAgICAgICBydltwcmZ4ICsgcHJvcF0gPSBiW3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAga2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICBpZiAoIWhhc093bihhLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RWZmZWN0aXZlS2V5cyhwcmltYXJ5S2V5LCByZXEpIHtcbiAgICAgICAgaWYgKHJlcS50eXBlID09PSAnZGVsZXRlJylcbiAgICAgICAgICAgIHJldHVybiByZXEua2V5cztcbiAgICAgICAgcmV0dXJuIHJlcS5rZXlzIHx8IHJlcS52YWx1ZXMubWFwKHByaW1hcnlLZXkuZXh0cmFjdEtleSk7XG4gICAgfVxuXG4gICAgdmFyIGhvb2tzTWlkZGxld2FyZSA9IHtcbiAgICAgICAgc3RhY2s6IFwiZGJjb3JlXCIsXG4gICAgICAgIG5hbWU6IFwiSG9va3NNaWRkbGV3YXJlXCIsXG4gICAgICAgIGxldmVsOiAyLFxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChkb3duQ29yZSkgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBkb3duQ29yZSksIHsgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG93blRhYmxlID0gZG93bkNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJpbWFyeUtleSA9IGRvd25UYWJsZS5zY2hlbWEucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGVNaWRkbGV3YXJlID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGRvd25UYWJsZSksIHsgbXV0YXRlOiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHhUcmFucyA9IFBTRC50cmFucztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IGR4VHJhbnMudGFibGUodGFibGVOYW1lKS5ob29rLCBkZWxldGluZyA9IF9hLmRlbGV0aW5nLCBjcmVhdGluZyA9IF9hLmNyZWF0aW5nLCB1cGRhdGluZyA9IF9hLnVwZGF0aW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyZXEudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcmVhdGluZy5maXJlID09PSBub3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR4VHJhbnMuX3Byb21pc2UoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFkZFB1dE9yRGVsZXRlKHJlcSk7IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3B1dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcmVhdGluZy5maXJlID09PSBub3AgJiYgdXBkYXRpbmcuZmlyZSA9PT0gbm9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkeFRyYW5zLl9wcm9taXNlKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhZGRQdXRPckRlbGV0ZShyZXEpOyB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRpbmcuZmlyZSA9PT0gbm9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkeFRyYW5zLl9wcm9taXNlKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhZGRQdXRPckRlbGV0ZShyZXEpOyB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVSYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGluZy5maXJlID09PSBub3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR4VHJhbnMuX3Byb21pc2UoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlbGV0ZVJhbmdlKHJlcSk7IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5tdXRhdGUocmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFB1dE9yRGVsZXRlKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkeFRyYW5zID0gUFNELnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gcmVxLmtleXMgfHwgZ2V0RWZmZWN0aXZlS2V5cyhwcmltYXJ5S2V5LCByZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgha2V5cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiS2V5cyBtaXNzaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcSA9IHJlcS50eXBlID09PSAnYWRkJyB8fCByZXEudHlwZSA9PT0gJ3B1dCcgPyBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVxKSwgeyBrZXlzOiBrZXlzIH0pIDogX19hc3NpZ24oe30sIHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS50eXBlICE9PSAnZGVsZXRlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnZhbHVlcyA9IF9fc3ByZWFkQXJyYXkoW10sIHJlcS52YWx1ZXMsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEua2V5cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLmtleXMgPSBfX3NwcmVhZEFycmF5KFtdLCByZXEua2V5cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEV4aXN0aW5nVmFsdWVzKGRvd25UYWJsZSwgcmVxLCBrZXlzKS50aGVuKGZ1bmN0aW9uIChleGlzdGluZ1ZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dHMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5LCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IGV4aXN0aW5nVmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IHsgb25lcnJvcjogbnVsbCwgb25zdWNjZXNzOiBudWxsIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnR5cGUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRpbmcuZmlyZS5jYWxsKGN0eCwga2V5LCBleGlzdGluZ1ZhbHVlLCBkeFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcS50eXBlID09PSAnYWRkJyB8fCBleGlzdGluZ1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VuZXJhdGVkUHJpbWFyeUtleSA9IGNyZWF0aW5nLmZpcmUuY2FsbChjdHgsIGtleSwgcmVxLnZhbHVlc1tpXSwgZHhUcmFucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBudWxsICYmIGdlbmVyYXRlZFByaW1hcnlLZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBnZW5lcmF0ZWRQcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEua2V5c1tpXSA9IGtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmltYXJ5S2V5Lm91dGJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgocmVxLnZhbHVlc1tpXSwgcHJpbWFyeUtleS5rZXlQYXRoLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdERpZmYgPSBnZXRPYmplY3REaWZmKGV4aXN0aW5nVmFsdWUsIHJlcS52YWx1ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRpdGlvbmFsQ2hhbmdlc18xID0gdXBkYXRpbmcuZmlyZS5jYWxsKGN0eCwgb2JqZWN0RGlmZiwga2V5LCBleGlzdGluZ1ZhbHVlLCBkeFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbENoYW5nZXNfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdGVkVmFsdWVfMSA9IHJlcS52YWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGFkZGl0aW9uYWxDaGFuZ2VzXzEpLmZvckVhY2goZnVuY3Rpb24gKGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd24ocmVxdWVzdGVkVmFsdWVfMSwga2V5UGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRWYWx1ZV8xW2tleVBhdGhdID0gYWRkaXRpb25hbENoYW5nZXNfMVtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChyZXF1ZXN0ZWRWYWx1ZV8xLCBrZXlQYXRoLCBhZGRpdGlvbmFsQ2hhbmdlc18xW2tleVBhdGhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb3duVGFibGUubXV0YXRlKHJlcSkudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IF9hLmZhaWx1cmVzLCByZXN1bHRzID0gX2EucmVzdWx0cywgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgbGFzdFJlc3VsdCA9IF9hLmxhc3RSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbUtleSA9IHJlc3VsdHMgPyByZXN1bHRzW2ldIDoga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY29udGV4dHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1LZXkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgub25lcnJvciAmJiBjdHgub25lcnJvcihmYWlsdXJlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgub25zdWNjZXNzICYmIGN0eC5vbnN1Y2Nlc3MocmVxLnR5cGUgPT09ICdwdXQnICYmIGV4aXN0aW5nVmFsdWVzW2ldID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS52YWx1ZXNbaV0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbUtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZhaWx1cmVzOiBmYWlsdXJlcywgcmVzdWx0czogcmVzdWx0cywgbnVtRmFpbHVyZXM6IG51bUZhaWx1cmVzLCBsYXN0UmVzdWx0OiBsYXN0UmVzdWx0IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dHMuZm9yRWFjaChmdW5jdGlvbiAoY3R4KSB7IHJldHVybiBjdHgub25lcnJvciAmJiBjdHgub25lcnJvcihlcnJvcik7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVSYW5nZShyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlTmV4dENodW5rKHJlcS50cmFucywgcmVxLnJhbmdlLCAxMDAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVOZXh0Q2h1bmsodHJhbnMsIHJhbmdlLCBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb3duVGFibGUucXVlcnkoeyB0cmFuczogdHJhbnMsIHZhbHVlczogZmFsc2UsIHF1ZXJ5OiB7IGluZGV4OiBwcmltYXJ5S2V5LCByYW5nZTogcmFuZ2UgfSwgbGltaXQ6IGxpbWl0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX2EucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkUHV0T3JEZWxldGUoeyB0eXBlOiAnZGVsZXRlJywga2V5czogcmVzdWx0LCB0cmFuczogdHJhbnMgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm51bUZhaWx1cmVzID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLmZhaWx1cmVzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBmYWlsdXJlczogW10sIG51bUZhaWx1cmVzOiAwLCBsYXN0UmVzdWx0OiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVOZXh0Q2h1bmsodHJhbnMsIF9fYXNzaWduKF9fYXNzaWduKHt9LCByYW5nZSksIHsgbG93ZXI6IHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0sIGxvd2VyT3BlbjogdHJ1ZSB9KSwgbGltaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVNaWRkbGV3YXJlO1xuICAgICAgICAgICAgfSB9KSk7IH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIGdldEV4aXN0aW5nVmFsdWVzKHRhYmxlLCByZXEsIGVmZmVjdGl2ZUtleXMpIHtcbiAgICAgICAgcmV0dXJuIHJlcS50eXBlID09PSBcImFkZFwiXG4gICAgICAgICAgICA/IFByb21pc2UucmVzb2x2ZShbXSlcbiAgICAgICAgICAgIDogdGFibGUuZ2V0TWFueSh7IHRyYW5zOiByZXEudHJhbnMsIGtleXM6IGVmZmVjdGl2ZUtleXMsIGNhY2hlOiBcImltbXV0YWJsZVwiIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEZyb21UcmFuc2FjdGlvbkNhY2hlKGtleXMsIGNhY2hlLCBjbG9uZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFjYWNoZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmIChjYWNoZS5rZXlzLmxlbmd0aCA8IGtleXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSAwOyBpIDwgY2FjaGUua2V5cy5sZW5ndGggJiYgaiA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoY21wKGNhY2hlLmtleXNbaV0sIGtleXNbal0pICE9PSAwKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjbG9uZSA/IGRlZXBDbG9uZShjYWNoZS52YWx1ZXNbaV0pIDogY2FjaGUudmFsdWVzW2ldKTtcbiAgICAgICAgICAgICAgICArK2o7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA9PT0ga2V5cy5sZW5ndGggPyByZXN1bHQgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNhY2hlRXhpc3RpbmdWYWx1ZXNNaWRkbGV3YXJlID0ge1xuICAgICAgICBzdGFjazogXCJkYmNvcmVcIixcbiAgICAgICAgbGV2ZWw6IC0xLFxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChjb3JlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRhYmxlOiBmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCB0YWJsZSksIHsgZ2V0TWFueTogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVxLmNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZS5nZXRNYW55KHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZWRSZXN1bHQgPSBnZXRGcm9tVHJhbnNhY3Rpb25DYWNoZShyZXEua2V5cywgcmVxLnRyYW5zW1wiX2NhY2hlXCJdLCByZXEuY2FjaGUgPT09IFwiY2xvbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoY2FjaGVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLmdldE1hbnkocmVxKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnRyYW5zW1wiX2NhY2hlXCJdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czogcmVxLmtleXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHJlcS5jYWNoZSA9PT0gXCJjbG9uZVwiID8gZGVlcENsb25lKHJlcykgOiByZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBtdXRhdGU6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnR5cGUgIT09IFwiYWRkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS50cmFuc1tcIl9jYWNoZVwiXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLm11dGF0ZShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaXNDYWNoYWJsZUNvbnRleHQoY3R4LCB0YWJsZSkge1xuICAgICAgICByZXR1cm4gKGN0eC50cmFucy5tb2RlID09PSAncmVhZG9ubHknICYmXG4gICAgICAgICAgICAhIWN0eC5zdWJzY3IgJiZcbiAgICAgICAgICAgICFjdHgudHJhbnMuZXhwbGljaXQgJiZcbiAgICAgICAgICAgIGN0eC50cmFucy5kYi5fb3B0aW9ucy5jYWNoZSAhPT0gJ2Rpc2FibGVkJyAmJlxuICAgICAgICAgICAgIXRhYmxlLnNjaGVtYS5wcmltYXJ5S2V5Lm91dGJvdW5kKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0NhY2hhYmxlUmVxdWVzdCh0eXBlLCByZXEpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdxdWVyeSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcS52YWx1ZXMgJiYgIXJlcS51bmlxdWU7XG4gICAgICAgICAgICBjYXNlICdnZXQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgJ2dldE1hbnknOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgJ2NvdW50JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlICdvcGVuQ3Vyc29yJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgb2JzZXJ2YWJpbGl0eU1pZGRsZXdhcmUgPSB7XG4gICAgICAgIHN0YWNrOiBcImRiY29yZVwiLFxuICAgICAgICBsZXZlbDogMCxcbiAgICAgICAgbmFtZTogXCJPYnNlcnZhYmlsaXR5XCIsXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGNvcmUpIHtcbiAgICAgICAgICAgIHZhciBkYk5hbWUgPSBjb3JlLnNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgdmFyIEZVTExfUkFOR0UgPSBuZXcgUmFuZ2VTZXQoY29yZS5NSU5fS0VZLCBjb3JlLk1BWF9LRVkpO1xuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb3JlKSwgeyB0cmFuc2FjdGlvbjogZnVuY3Rpb24gKHN0b3JlcywgbW9kZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoUFNELnN1YnNjciAmJiBtb2RlICE9PSAncmVhZG9ubHknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5SZWFkT25seShcIlJlYWR3cml0ZSB0cmFuc2FjdGlvbiBpbiBsaXZlUXVlcnkgY29udGV4dC4gUXVlcmllciBzb3VyY2U6IFwiLmNvbmNhdChQU0QucXVlcmllcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3JlLnRyYW5zYWN0aW9uKHN0b3JlcywgbW9kZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSwgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NoZW1hID0gdGFibGUuc2NoZW1hO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbWFyeUtleSA9IHNjaGVtYS5wcmltYXJ5S2V5LCBpbmRleGVzID0gc2NoZW1hLmluZGV4ZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0S2V5ID0gcHJpbWFyeUtleS5leHRyYWN0S2V5LCBvdXRib3VuZCA9IHByaW1hcnlLZXkub3V0Ym91bmQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleGVzV2l0aEF1dG9JbmNQSyA9IHByaW1hcnlLZXkuYXV0b0luY3JlbWVudCAmJiBpbmRleGVzLmZpbHRlcihmdW5jdGlvbiAoaW5kZXgpIHsgcmV0dXJuIGluZGV4LmNvbXBvdW5kICYmIGluZGV4LmtleVBhdGguaW5jbHVkZXMocHJpbWFyeUtleS5rZXlQYXRoKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZUNsb25lID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRhYmxlKSwgeyBtdXRhdGU6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IHJlcS50cmFucztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRlZFBhcnRzID0gcmVxLm11dGF0ZWRQYXJ0cyB8fCAocmVxLm11dGF0ZWRQYXJ0cyA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0UmFuZ2VTZXQgPSBmdW5jdGlvbiAoaW5kZXhOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSwgXCIvXCIpLmNvbmNhdChpbmRleE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG11dGF0ZWRQYXJ0c1twYXJ0XSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG11dGF0ZWRQYXJ0c1twYXJ0XSA9IG5ldyBSYW5nZVNldCgpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGtSYW5nZVNldCA9IGdldFJhbmdlU2V0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxzUmFuZ2VTZXQgPSBnZXRSYW5nZVNldChcIjpkZWxzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gcmVxLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jID0gcmVxLnR5cGUgPT09IFwiZGVsZXRlUmFuZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtyZXEucmFuZ2VdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVxLnR5cGUgPT09IFwiZGVsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW3JlcS5rZXlzXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZXEudmFsdWVzLmxlbmd0aCA8IDUwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbZ2V0RWZmZWN0aXZlS2V5cyhwcmltYXJ5S2V5LCByZXEpLmZpbHRlcihmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIGlkOyB9KSwgcmVxLnZhbHVlc11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdLCBrZXlzID0gX2NbMF0sIG5ld09ianMgPSBfY1sxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkQ2FjaGUgPSByZXEudHJhbnNbXCJfY2FjaGVcIl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoa2V5cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGtSYW5nZVNldC5hZGRLZXlzKGtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkT2JqcyA9IHR5cGUgPT09ICdkZWxldGUnIHx8IGtleXMubGVuZ3RoID09PSBuZXdPYmpzLmxlbmd0aCA/IGdldEZyb21UcmFuc2FjdGlvbkNhY2hlKGtleXMsIG9sZENhY2hlKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2xkT2Jqcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0LmFkZEtleXMoa2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZE9ianMgfHwgbmV3T2Jqcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tBZmZlY3RlZEluZGV4ZXMoZ2V0UmFuZ2VTZXQsIHNjaGVtYSwgb2xkT2JqcywgbmV3T2Jqcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiAoX2EgPSBrZXlzLmxvd2VyKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb3JlLk1JTl9LRVksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogKF9iID0ga2V5cy51cHBlcikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogY29yZS5NQVhfS0VZXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldC5hZGQocmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwa1JhbmdlU2V0LmFkZChyYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwa1JhbmdlU2V0LmFkZChGVUxMX1JBTkdFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0LmFkZChGVUxMX1JBTkdFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hLmluZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7IHJldHVybiBnZXRSYW5nZVNldChpZHgubmFtZSkuYWRkKEZVTExfUkFOR0UpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLm11dGF0ZShyZXEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5cyAmJiAocmVxLnR5cGUgPT09ICdhZGQnIHx8IHJlcS50eXBlID09PSAncHV0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXQuYWRkS2V5cyhyZXMucmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhlc1dpdGhBdXRvSW5jUEspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleGVzV2l0aEF1dG9JbmNQSy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeFZhbHMgPSByZXEudmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gaWR4LmV4dHJhY3RLZXkodik7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGtQb3MgPSBpZHgua2V5UGF0aC5maW5kSW5kZXgoZnVuY3Rpb24gKHByb3ApIHsgcmV0dXJuIHByb3AgPT09IHByaW1hcnlLZXkua2V5UGF0aDsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByZXMucmVzdWx0cy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4VmFsc1tpXVtwa1Bvc10gPSByZXMucmVzdWx0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRSYW5nZVNldChpZHgubmFtZSkuYWRkS2V5cyhpZHhWYWxzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFucy5tdXRhdGVkUGFydHMgPSBleHRlbmRPYnNlcnZhYmlsaXR5U2V0KHRyYW5zLm11dGF0ZWRQYXJ0cyB8fCB7fSwgbXV0YXRlZFBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnZXRSYW5nZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9iLCBfYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfZCA9IF9hLnF1ZXJ5LCBpbmRleCA9IF9kLmluZGV4LCByYW5nZSA9IF9kLnJhbmdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmFuZ2VTZXQoKF9iID0gcmFuZ2UubG93ZXIpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGNvcmUuTUlOX0tFWSwgKF9jID0gcmFuZ2UudXBwZXIpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGNvcmUuTUFYX0tFWSksXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZFN1YnNjcmliZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAocmVxKSB7IHJldHVybiBbcHJpbWFyeUtleSwgbmV3IFJhbmdlU2V0KHJlcS5rZXkpXTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldE1hbnk6IGZ1bmN0aW9uIChyZXEpIHsgcmV0dXJuIFtwcmltYXJ5S2V5LCBuZXcgUmFuZ2VTZXQoKS5hZGRLZXlzKHJlcS5rZXlzKV07IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogZ2V0UmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogZ2V0UmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuQ3Vyc29yOiBnZXRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAga2V5cyhyZWFkU3Vic2NyaWJlcnMpLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDbG9uZVttZXRob2RdID0gZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3IgPSBQU0Quc3Vic2NyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0xpdmVRdWVyeSA9ICEhc3Vic2NyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWNoYWJsZSA9IGlzQ2FjaGFibGVDb250ZXh0KFBTRCwgdGFibGUpICYmIGlzQ2FjaGFibGVSZXF1ZXN0KG1ldGhvZCwgcmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JzU2V0ID0gY2FjaGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByZXEub2JzU2V0ID0ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzdWJzY3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGl2ZVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRSYW5nZVNldCA9IGZ1bmN0aW9uIChpbmRleE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSwgXCIvXCIpLmNvbmNhdChpbmRleE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvYnNTZXRbcGFydF0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob2JzU2V0W3BhcnRdID0gbmV3IFJhbmdlU2V0KCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBrUmFuZ2VTZXRfMSA9IGdldFJhbmdlU2V0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsc1JhbmdlU2V0XzEgPSBnZXRSYW5nZVNldChcIjpkZWxzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EgPSByZWFkU3Vic2NyaWJlcnNbbWV0aG9kXShyZXEpLCBxdWVyaWVkSW5kZXggPSBfYVswXSwgcXVlcmllZFJhbmdlcyA9IF9hWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSAncXVlcnknICYmIHF1ZXJpZWRJbmRleC5pc1ByaW1hcnlLZXkgJiYgIXJlcS52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZChxdWVyaWVkUmFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJhbmdlU2V0KHF1ZXJpZWRJbmRleC5uYW1lIHx8IFwiXCIpLmFkZChxdWVyaWVkUmFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJpZWRJbmRleC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiY291bnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZChGVUxMX1JBTkdFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlzUHJvbWlzZV8xID0gbWV0aG9kID09PSBcInF1ZXJ5XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0Ym91bmQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnZhbHVlcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5xdWVyeShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVxKSwgeyB2YWx1ZXM6IGZhbHNlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVbbWV0aG9kXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSBcInF1ZXJ5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdXRib3VuZCAmJiByZXEudmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleXNQcm9taXNlXzEudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdGluZ0tleXMgPSBfYS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXRfMS5hZGRLZXlzKHJlc3VsdGluZ0tleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBLZXlzID0gcmVxLnZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzLnJlc3VsdC5tYXAoZXh0cmFjdEtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlcy5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXRfMS5hZGRLZXlzKHBLZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZEtleXMocEtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJvcGVuQ3Vyc29yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3JfMSA9IHJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YW50VmFsdWVzXzEgPSByZXEudmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjdXJzb3JfMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5jcmVhdGUoY3Vyc29yXzEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxzUmFuZ2VTZXRfMS5hZGRLZXkoY3Vyc29yXzEucHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcl8xLmtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwa2V5ID0gY3Vyc29yXzEucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxzUmFuZ2VTZXRfMS5hZGRLZXkocGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FudFZhbHVlc18xICYmIHBrUmFuZ2VTZXRfMS5hZGRLZXkoY3Vyc29yXzEucHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcl8xLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVbbWV0aG9kXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZUNsb25lO1xuICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBmdW5jdGlvbiB0cmFja0FmZmVjdGVkSW5kZXhlcyhnZXRSYW5nZVNldCwgc2NoZW1hLCBvbGRPYmpzLCBuZXdPYmpzKSB7XG4gICAgICAgIGZ1bmN0aW9uIGFkZEFmZmVjdGVkSW5kZXgoaXgpIHtcbiAgICAgICAgICAgIHZhciByYW5nZVNldCA9IGdldFJhbmdlU2V0KGl4Lm5hbWUgfHwgXCJcIik7XG4gICAgICAgICAgICBmdW5jdGlvbiBleHRyYWN0S2V5KG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmogIT0gbnVsbCA/IGl4LmV4dHJhY3RLZXkob2JqKSA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWRkS2V5T3JLZXlzID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gaXgubXVsdGlFbnRyeSAmJiBpc0FycmF5KGtleSlcbiAgICAgICAgICAgICAgICA/IGtleS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHJhbmdlU2V0LmFkZEtleShrZXkpOyB9KVxuICAgICAgICAgICAgICAgIDogcmFuZ2VTZXQuYWRkS2V5KGtleSk7IH07XG4gICAgICAgICAgICAob2xkT2JqcyB8fCBuZXdPYmpzKS5mb3JFYWNoKGZ1bmN0aW9uIChfLCBpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZEtleSA9IG9sZE9ianMgJiYgZXh0cmFjdEtleShvbGRPYmpzW2ldKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3S2V5ID0gbmV3T2JqcyAmJiBleHRyYWN0S2V5KG5ld09ianNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChjbXAob2xkS2V5LCBuZXdLZXkpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRLZXkgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleU9yS2V5cyhvbGRLZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3S2V5ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRLZXlPcktleXMobmV3S2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuaW5kZXhlcy5mb3JFYWNoKGFkZEFmZmVjdGVkSW5kZXgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkanVzdE9wdGltaXN0aWNGcm9tRmFpbHVyZXModGJsQ2FjaGUsIHJlcSwgcmVzKSB7XG4gICAgICAgIGlmIChyZXMubnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICByZXR1cm4gcmVxO1xuICAgICAgICBpZiAocmVxLnR5cGUgPT09ICdkZWxldGVSYW5nZScpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBudW1CdWxrT3BzID0gcmVxLmtleXNcbiAgICAgICAgICAgID8gcmVxLmtleXMubGVuZ3RoXG4gICAgICAgICAgICA6ICd2YWx1ZXMnIGluIHJlcSAmJiByZXEudmFsdWVzXG4gICAgICAgICAgICAgICAgPyByZXEudmFsdWVzLmxlbmd0aFxuICAgICAgICAgICAgICAgIDogMTtcbiAgICAgICAgaWYgKHJlcy5udW1GYWlsdXJlcyA9PT0gbnVtQnVsa09wcykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsb25lID0gX19hc3NpZ24oe30sIHJlcSk7XG4gICAgICAgIGlmIChpc0FycmF5KGNsb25lLmtleXMpKSB7XG4gICAgICAgICAgICBjbG9uZS5rZXlzID0gY2xvbmUua2V5cy5maWx0ZXIoZnVuY3Rpb24gKF8sIGkpIHsgcmV0dXJuICEoaSBpbiByZXMuZmFpbHVyZXMpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ3ZhbHVlcycgaW4gY2xvbmUgJiYgaXNBcnJheShjbG9uZS52YWx1ZXMpKSB7XG4gICAgICAgICAgICBjbG9uZS52YWx1ZXMgPSBjbG9uZS52YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uIChfLCBpKSB7IHJldHVybiAhKGkgaW4gcmVzLmZhaWx1cmVzKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQWJvdmVMb3dlcihrZXksIHJhbmdlKSB7XG4gICAgICAgIHJldHVybiByYW5nZS5sb3dlciA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgIDogcmFuZ2UubG93ZXJPcGVuXG4gICAgICAgICAgICAgICAgPyBjbXAoa2V5LCByYW5nZS5sb3dlcikgPiAwXG4gICAgICAgICAgICAgICAgOiBjbXAoa2V5LCByYW5nZS5sb3dlcikgPj0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNCZWxvd1VwcGVyKGtleSwgcmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHJhbmdlLnVwcGVyID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgOiByYW5nZS51cHBlck9wZW5cbiAgICAgICAgICAgICAgICA/IGNtcChrZXksIHJhbmdlLnVwcGVyKSA8IDBcbiAgICAgICAgICAgICAgICA6IGNtcChrZXksIHJhbmdlLnVwcGVyKSA8PSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1dpdGhpblJhbmdlKGtleSwgcmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIGlzQWJvdmVMb3dlcihrZXksIHJhbmdlKSAmJiBpc0JlbG93VXBwZXIoa2V5LCByYW5nZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpbWlzdGljT3BzKHJlc3VsdCwgcmVxLCBvcHMsIHRhYmxlLCBjYWNoZUVudHJ5LCBpbW11dGFibGUpIHtcbiAgICAgICAgaWYgKCFvcHMgfHwgb3BzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIHZhciBpbmRleCA9IHJlcS5xdWVyeS5pbmRleDtcbiAgICAgICAgdmFyIG11bHRpRW50cnkgPSBpbmRleC5tdWx0aUVudHJ5O1xuICAgICAgICB2YXIgcXVlcnlSYW5nZSA9IHJlcS5xdWVyeS5yYW5nZTtcbiAgICAgICAgdmFyIHByaW1hcnlLZXkgPSB0YWJsZS5zY2hlbWEucHJpbWFyeUtleTtcbiAgICAgICAgdmFyIGV4dHJhY3RQcmltS2V5ID0gcHJpbWFyeUtleS5leHRyYWN0S2V5O1xuICAgICAgICB2YXIgZXh0cmFjdEluZGV4ID0gaW5kZXguZXh0cmFjdEtleTtcbiAgICAgICAgdmFyIGV4dHJhY3RMb3dMZXZlbEluZGV4ID0gKGluZGV4Lmxvd0xldmVsSW5kZXggfHwgaW5kZXgpLmV4dHJhY3RLZXk7XG4gICAgICAgIHZhciBmaW5hbFJlc3VsdCA9IG9wcy5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgb3ApIHtcbiAgICAgICAgICAgIHZhciBtb2RpZmVkUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgdmFyIGluY2x1ZGVkVmFsdWVzID0gW107XG4gICAgICAgICAgICBpZiAob3AudHlwZSA9PT0gJ2FkZCcgfHwgb3AudHlwZSA9PT0gJ3B1dCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZWRQS3MgPSBuZXcgUmFuZ2VTZXQoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gb3AudmFsdWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9wLnZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBrID0gZXh0cmFjdFByaW1LZXkodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZWRQS3MuaGFzS2V5KHBrKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZXh0cmFjdEluZGV4KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG11bHRpRW50cnkgJiYgaXNBcnJheShrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGtleS5zb21lKGZ1bmN0aW9uIChrKSB7IHJldHVybiBpc1dpdGhpblJhbmdlKGssIHF1ZXJ5UmFuZ2UpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpc1dpdGhpblJhbmdlKGtleSwgcXVlcnlSYW5nZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkUEtzLmFkZEtleShwayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAob3AudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nS2V5c18xID0gbmV3IFJhbmdlU2V0KCkuYWRkS2V5cyhyZXEudmFsdWVzID8gcmVzdWx0Lm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gZXh0cmFjdFByaW1LZXkodik7IH0pIDogcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZlZFJlc3VsdCA9IHJlc3VsdC5jb25jYXQocmVxLnZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBpbmNsdWRlZFZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZXh0cmFjdFByaW1LZXkodik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nS2V5c18xLmhhc0tleShrZXkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdLZXlzXzEuYWRkS2V5KGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbmNsdWRlZFZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGV4dHJhY3RQcmltS2V5KHYpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdLZXlzXzEuaGFzS2V5KGspKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdLZXlzXzEuYWRkS2V5KGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAncHV0Jzoge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5U2V0XzEgPSBuZXcgUmFuZ2VTZXQoKS5hZGRLZXlzKG9wLnZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGV4dHJhY3RQcmltS2V5KHYpOyB9KSk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmZWRSZXN1bHQgPSByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAha2V5U2V0XzEuaGFzS2V5KHJlcS52YWx1ZXMgPyBleHRyYWN0UHJpbUtleShpdGVtKSA6IGl0ZW0pOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChcbiAgICAgICAgICAgICAgICAgICAgcmVxLnZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBpbmNsdWRlZFZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbmNsdWRlZFZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGV4dHJhY3RQcmltS2V5KHYpOyB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5c1RvRGVsZXRlXzEgPSBuZXcgUmFuZ2VTZXQoKS5hZGRLZXlzKG9wLmtleXMpO1xuICAgICAgICAgICAgICAgICAgICBtb2RpZmVkUmVzdWx0ID0gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFrZXlzVG9EZWxldGVfMS5oYXNLZXkocmVxLnZhbHVlcyA/IGV4dHJhY3RQcmltS2V5KGl0ZW0pIDogaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVSYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhciByYW5nZV8xID0gb3AucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmZWRSZXN1bHQgPSByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAhaXNXaXRoaW5SYW5nZShleHRyYWN0UHJpbUtleShpdGVtKSwgcmFuZ2VfMSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2RpZmVkUmVzdWx0O1xuICAgICAgICB9LCByZXN1bHQpO1xuICAgICAgICBpZiAoZmluYWxSZXN1bHQgPT09IHJlc3VsdClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGZpbmFsUmVzdWx0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBjbXAoZXh0cmFjdExvd0xldmVsSW5kZXgoYSksIGV4dHJhY3RMb3dMZXZlbEluZGV4KGIpKSB8fFxuICAgICAgICAgICAgICAgIGNtcChleHRyYWN0UHJpbUtleShhKSwgZXh0cmFjdFByaW1LZXkoYikpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlcS5saW1pdCAmJiByZXEubGltaXQgPCBJbmZpbml0eSkge1xuICAgICAgICAgICAgaWYgKGZpbmFsUmVzdWx0Lmxlbmd0aCA+IHJlcS5saW1pdCkge1xuICAgICAgICAgICAgICAgIGZpbmFsUmVzdWx0Lmxlbmd0aCA9IHJlcS5saW1pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5sZW5ndGggPT09IHJlcS5saW1pdCAmJiBmaW5hbFJlc3VsdC5sZW5ndGggPCByZXEubGltaXQpIHtcbiAgICAgICAgICAgICAgICBjYWNoZUVudHJ5LmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW1tdXRhYmxlID8gT2JqZWN0LmZyZWV6ZShmaW5hbFJlc3VsdCkgOiBmaW5hbFJlc3VsdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcmVSYW5nZXNFcXVhbChyMSwgcjIpIHtcbiAgICAgICAgcmV0dXJuIChjbXAocjEubG93ZXIsIHIyLmxvd2VyKSA9PT0gMCAmJlxuICAgICAgICAgICAgY21wKHIxLnVwcGVyLCByMi51cHBlcikgPT09IDAgJiZcbiAgICAgICAgICAgICEhcjEubG93ZXJPcGVuID09PSAhIXIyLmxvd2VyT3BlbiAmJlxuICAgICAgICAgICAgISFyMS51cHBlck9wZW4gPT09ICEhcjIudXBwZXJPcGVuKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wYXJlTG93ZXJzKGxvd2VyMSwgbG93ZXIyLCBsb3dlck9wZW4xLCBsb3dlck9wZW4yKSB7XG4gICAgICAgIGlmIChsb3dlcjEgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBsb3dlcjIgIT09IHVuZGVmaW5lZCA/IC0xIDogMDtcbiAgICAgICAgaWYgKGxvd2VyMiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIHZhciBjID0gY21wKGxvd2VyMSwgbG93ZXIyKTtcbiAgICAgICAgaWYgKGMgPT09IDApIHtcbiAgICAgICAgICAgIGlmIChsb3dlck9wZW4xICYmIGxvd2VyT3BlbjIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAobG93ZXJPcGVuMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmIChsb3dlck9wZW4yKVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gY29tcGFyZVVwcGVycyh1cHBlcjEsIHVwcGVyMiwgdXBwZXJPcGVuMSwgdXBwZXJPcGVuMikge1xuICAgICAgICBpZiAodXBwZXIxID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdXBwZXIyICE9PSB1bmRlZmluZWQgPyAxIDogMDtcbiAgICAgICAgaWYgKHVwcGVyMiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB2YXIgYyA9IGNtcCh1cHBlcjEsIHVwcGVyMik7XG4gICAgICAgIGlmIChjID09PSAwKSB7XG4gICAgICAgICAgICBpZiAodXBwZXJPcGVuMSAmJiB1cHBlck9wZW4yKVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgaWYgKHVwcGVyT3BlbjEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKHVwcGVyT3BlbjIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzU3VwZXJSYW5nZShyMSwgcjIpIHtcbiAgICAgICAgcmV0dXJuIChjb21wYXJlTG93ZXJzKHIxLmxvd2VyLCByMi5sb3dlciwgcjEubG93ZXJPcGVuLCByMi5sb3dlck9wZW4pIDw9IDAgJiZcbiAgICAgICAgICAgIGNvbXBhcmVVcHBlcnMocjEudXBwZXIsIHIyLnVwcGVyLCByMS51cHBlck9wZW4sIHIyLnVwcGVyT3BlbikgPj0gMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmluZENvbXBhdGlibGVRdWVyeShkYk5hbWUsIHRhYmxlTmFtZSwgdHlwZSwgcmVxKSB7XG4gICAgICAgIHZhciB0YmxDYWNoZSA9IGNhY2hlW1wiaWRiOi8vXCIuY29uY2F0KGRiTmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZU5hbWUpXTtcbiAgICAgICAgaWYgKCF0YmxDYWNoZSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgdmFyIHF1ZXJpZXMgPSB0YmxDYWNoZS5xdWVyaWVzW3R5cGVdO1xuICAgICAgICBpZiAoIXF1ZXJpZXMpXG4gICAgICAgICAgICByZXR1cm4gW251bGwsIGZhbHNlLCB0YmxDYWNoZSwgbnVsbF07XG4gICAgICAgIHZhciBpbmRleE5hbWUgPSByZXEucXVlcnkgPyByZXEucXVlcnkuaW5kZXgubmFtZSA6IG51bGw7XG4gICAgICAgIHZhciBlbnRyaWVzID0gcXVlcmllc1tpbmRleE5hbWUgfHwgJyddO1xuICAgICAgICBpZiAoIWVudHJpZXMpXG4gICAgICAgICAgICByZXR1cm4gW251bGwsIGZhbHNlLCB0YmxDYWNoZSwgbnVsbF07XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAncXVlcnknOlxuICAgICAgICAgICAgICAgIHZhciBlcXVhbEVudHJ5ID0gZW50cmllcy5maW5kKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50cnkucmVxLmxpbWl0ID09PSByZXEubGltaXQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnJlcS52YWx1ZXMgPT09IHJlcS52YWx1ZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZVJhbmdlc0VxdWFsKGVudHJ5LnJlcS5xdWVyeS5yYW5nZSwgcmVxLnF1ZXJ5LnJhbmdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZXF1YWxFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFsRW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyaWVzLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHZhciBzdXBlckVudHJ5ID0gZW50cmllcy5maW5kKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSAnbGltaXQnIGluIGVudHJ5LnJlcSA/IGVudHJ5LnJlcS5saW1pdCA6IEluZmluaXR5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGxpbWl0ID49IHJlcS5saW1pdCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlcS52YWx1ZXMgPyBlbnRyeS5yZXEudmFsdWVzIDogdHJ1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VwZXJSYW5nZShlbnRyeS5yZXEucXVlcnkucmFuZ2UsIHJlcS5xdWVyeS5yYW5nZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBbc3VwZXJFbnRyeSwgZmFsc2UsIHRibENhY2hlLCBlbnRyaWVzXTtcbiAgICAgICAgICAgIGNhc2UgJ2NvdW50JzpcbiAgICAgICAgICAgICAgICB2YXIgY291bnRRdWVyeSA9IGVudHJpZXMuZmluZChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZVJhbmdlc0VxdWFsKGVudHJ5LnJlcS5xdWVyeS5yYW5nZSwgcmVxLnF1ZXJ5LnJhbmdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvdW50UXVlcnksICEhY291bnRRdWVyeSwgdGJsQ2FjaGUsIGVudHJpZXNdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3Vic2NyaWJlVG9DYWNoZUVudHJ5KGNhY2hlRW50cnksIGNvbnRhaW5lciwgcmVxdWVyeSwgc2lnbmFsKSB7XG4gICAgICAgIGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuYWRkKHJlcXVlcnkpO1xuICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuZGVsZXRlKHJlcXVlcnkpO1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVucXVlRm9yRGVsZXRpb24oY2FjaGVFbnRyeSwgY29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVucXVlRm9yRGVsZXRpb24oY2FjaGVFbnRyeSwgY29udGFpbmVyKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbEFycmF5SXRlbShjb250YWluZXIsIGNhY2hlRW50cnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAzMDAwKTtcbiAgICB9XG5cbiAgICB2YXIgY2FjaGVNaWRkbGV3YXJlID0ge1xuICAgICAgICBzdGFjazogJ2RiY29yZScsXG4gICAgICAgIGxldmVsOiAwLFxuICAgICAgICBuYW1lOiAnQ2FjaGUnLFxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChjb3JlKSB7XG4gICAgICAgICAgICB2YXIgZGJOYW1lID0gY29yZS5zY2hlbWEubmFtZTtcbiAgICAgICAgICAgIHZhciBjb3JlTVcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29yZSksIHsgdHJhbnNhY3Rpb246IGZ1bmN0aW9uIChzdG9yZXMsIG1vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkYnRyYW5zID0gY29yZS50cmFuc2FjdGlvbihzdG9yZXMsIG1vZGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWR3cml0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY18xID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpZ25hbCA9IGFjXzEuc2lnbmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZFRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKHdhc0NvbW1pdHRlZCkgeyByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjXzEuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWR3cml0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFmZmVjdGVkU3Vic2NyaWJlcnNfMSA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzdG9yZXNfMSA9IHN0b3JlczsgX2kgPCBzdG9yZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZU5hbWUgPSBzdG9yZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGJsQ2FjaGUgPSBjYWNoZVtcImlkYjovL1wiLmNvbmNhdChkYk5hbWUsIFwiL1wiKS5jb25jYXQoc3RvcmVOYW1lKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGJsQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBjb3JlLnRhYmxlKHN0b3JlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wcyA9IHRibENhY2hlLm9wdGltaXN0aWNPcHMuZmlsdGVyKGZ1bmN0aW9uIChvcCkgeyByZXR1cm4gb3AudHJhbnMgPT09IGlkYnRyYW5zOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRidHJhbnMuX2V4cGxpY2l0ICYmIHdhc0NvbW1pdHRlZCAmJiBpZGJ0cmFucy5tdXRhdGVkUGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IE9iamVjdC52YWx1ZXModGJsQ2FjaGUucXVlcmllcy5xdWVyeSk7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cmllcyA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgX2QgPSBlbnRyaWVzLnNsaWNlKCk7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYnNTZXRzT3ZlcmxhcChlbnRyeS5vYnNTZXQsIGlkYnRyYW5zLm11dGF0ZWRQYXJ0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKGVudHJpZXMsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAocmVxdWVyeSkgeyByZXR1cm4gYWZmZWN0ZWRTdWJzY3JpYmVyc18xLmFkZChyZXF1ZXJ5KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRibENhY2hlLm9wdGltaXN0aWNPcHMgPSB0YmxDYWNoZS5vcHRpbWlzdGljT3BzLmZpbHRlcihmdW5jdGlvbiAob3ApIHsgcmV0dXJuIG9wLnRyYW5zICE9PSBpZGJ0cmFuczsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9lID0gMCwgX2YgPSBPYmplY3QudmFsdWVzKHRibENhY2hlLnF1ZXJpZXMucXVlcnkpOyBfZSA8IF9mLmxlbmd0aDsgX2UrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJpZXMgPSBfZltfZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfZyA9IDAsIF9oID0gZW50cmllcy5zbGljZSgpOyBfZyA8IF9oLmxlbmd0aDsgX2crKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IF9oW19nXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkucmVzICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRidHJhbnMubXV0YXRlZFBhcnRzXG4gICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXNDb21taXR0ZWQgJiYgIWVudHJ5LmRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJlZXplUmVzdWx0cyA9IE9iamVjdC5pc0Zyb3plbihlbnRyeS5yZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZFJlcyA9IGFwcGx5T3B0aW1pc3RpY09wcyhlbnRyeS5yZXMsIGVudHJ5LnJlcSwgb3BzLCB0YWJsZSwgZW50cnksIGZyZWV6ZVJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKGVudHJpZXMsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiBhZmZlY3RlZFN1YnNjcmliZXJzXzEuYWRkKHJlcXVlcnkpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZFJlcyAhPT0gZW50cnkucmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkucmVzID0gbW9kUmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnByb21pc2UgPSBEZXhpZVByb21pc2UucmVzb2x2ZSh7IHJlc3VsdDogbW9kUmVzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKGVudHJpZXMsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIGFmZmVjdGVkU3Vic2NyaWJlcnNfMS5hZGQocmVxdWVyeSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmZmVjdGVkU3Vic2NyaWJlcnNfMS5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiByZXF1ZXJ5KCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07IH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVuZFRyYW5zYWN0aW9uKGZhbHNlKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVuZFRyYW5zYWN0aW9uKGZhbHNlKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGVuZFRyYW5zYWN0aW9uKHRydWUpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWRidHJhbnM7XG4gICAgICAgICAgICAgICAgfSwgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvd25UYWJsZSA9IGNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1LZXkgPSBkb3duVGFibGUuc2NoZW1hLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZU1XID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGRvd25UYWJsZSksIHsgbXV0YXRlOiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gUFNELnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmltS2V5Lm91dGJvdW5kIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLmRiLl9vcHRpb25zLmNhY2hlID09PSAnZGlzYWJsZWQnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLmV4cGxpY2l0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLmlkYnRyYW5zLm1vZGUgIT09ICdyZWFkd3JpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb3duVGFibGUubXV0YXRlKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YmxDYWNoZSA9IGNhY2hlW1wiaWRiOi8vXCIuY29uY2F0KGRiTmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZU5hbWUpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRibENhY2hlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG93blRhYmxlLm11dGF0ZShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gZG93blRhYmxlLm11dGF0ZShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocmVxLnR5cGUgPT09ICdhZGQnIHx8IHJlcS50eXBlID09PSAncHV0JykgJiYgKHJlcS52YWx1ZXMubGVuZ3RoID49IDUwIHx8IGdldEVmZmVjdGl2ZUtleXMocHJpbUtleSwgcmVxKS5zb21lKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleSA9PSBudWxsOyB9KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXFXaXRoUmVzb2x2ZWRLZXlzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHJlcSksIHsgdmFsdWVzOiByZXEudmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmZhaWx1cmVzW2ldKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVXaXRoS2V5ID0gKChfYSA9IHByaW1LZXkua2V5UGF0aCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCcuJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRlZXBDbG9uZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogX19hc3NpZ24oe30sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKHZhbHVlV2l0aEtleSwgcHJpbUtleS5rZXlQYXRoLCByZXMucmVzdWx0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVdpdGhLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ZWRSZXEgPSBhZGp1c3RPcHRpbWlzdGljRnJvbUZhaWx1cmVzKHRibENhY2hlLCByZXFXaXRoUmVzb2x2ZWRLZXlzLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUub3B0aW1pc3RpY09wcy5wdXNoKGFkanVzdGVkUmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlcS5tdXRhdGVkUGFydHMgJiYgc2lnbmFsU3Vic2NyaWJlcnNMYXppbHkocmVxLm11dGF0ZWRQYXJ0cyk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRibENhY2hlLm9wdGltaXN0aWNPcHMucHVzaChyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEubXV0YXRlZFBhcnRzICYmIHNpZ25hbFN1YnNjcmliZXJzTGF6aWx5KHJlcS5tdXRhdGVkUGFydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5udW1GYWlsdXJlcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0odGJsQ2FjaGUub3B0aW1pc3RpY09wcywgcmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ZWRSZXEgPSBhZGp1c3RPcHRpbWlzdGljRnJvbUZhaWx1cmVzKHRibENhY2hlLCByZXEsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkanVzdGVkUmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRibENhY2hlLm9wdGltaXN0aWNPcHMucHVzaChhZGp1c3RlZFJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5tdXRhdGVkUGFydHMgJiYgc2lnbmFsU3Vic2NyaWJlcnNMYXppbHkocmVxLm11dGF0ZWRQYXJ0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbEFycmF5SXRlbSh0YmxDYWNoZS5vcHRpbWlzdGljT3BzLCByZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm11dGF0ZWRQYXJ0cyAmJiBzaWduYWxTdWJzY3JpYmVyc0xhemlseShyZXEubXV0YXRlZFBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcXVlcnk6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NhY2hhYmxlQ29udGV4dChQU0QsIGRvd25UYWJsZSkgfHwgIWlzQ2FjaGFibGVSZXF1ZXN0KFwicXVlcnlcIiwgcmVxKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5xdWVyeShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmVlemVSZXN1bHRzID0gKChfYSA9IFBTRC50cmFucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRiLl9vcHRpb25zLmNhY2hlKSA9PT0gJ2ltbXV0YWJsZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9iID0gUFNELCByZXF1ZXJ5ID0gX2IucmVxdWVyeSwgc2lnbmFsID0gX2Iuc2lnbmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYyA9IGZpbmRDb21wYXRpYmxlUXVlcnkoZGJOYW1lLCB0YWJsZU5hbWUsICdxdWVyeScsIHJlcSksIGNhY2hlRW50cnkgPSBfY1swXSwgZXhhY3RNYXRjaCA9IF9jWzFdLCB0YmxDYWNoZSA9IF9jWzJdLCBjb250YWluZXIgPSBfY1szXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVFbnRyeSAmJiBleGFjdE1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkub2JzU2V0ID0gcmVxLm9ic1NldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gZG93blRhYmxlLnF1ZXJ5KHJlcSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkucmVzID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyZWV6ZVJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJlc3VsdC5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShyZXN1bHRbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMucmVzdWx0ID0gZGVlcENsb25lKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIgJiYgY2FjaGVFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0oY29udGFpbmVyLCBjYWNoZUVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzU2V0OiByZXEub2JzU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzOiBuZXcgU2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncXVlcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxOiByZXEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJ0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5wdXNoKGNhY2hlRW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyID0gW2NhY2hlRW50cnldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YmxDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRibENhY2hlID0gY2FjaGVbXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeToge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ianM6IG5ldyBNYXAoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pc3RpY09wczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmFsZWRQYXJ0czoge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUucXVlcmllcy5xdWVyeVtyZXEucXVlcnkuaW5kZXgubmFtZSB8fCAnJ10gPSBjb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlVG9DYWNoZUVudHJ5KGNhY2hlRW50cnksIGNvbnRhaW5lciwgcmVxdWVyeSwgc2lnbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeS5wcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBhcHBseU9wdGltaXN0aWNPcHMocmVzLnJlc3VsdCwgcmVxLCB0YmxDYWNoZSA9PT0gbnVsbCB8fCB0YmxDYWNoZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGJsQ2FjaGUub3B0aW1pc3RpY09wcywgZG93blRhYmxlLCBjYWNoZUVudHJ5LCBmcmVlemVSZXN1bHRzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZU1XO1xuICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICByZXR1cm4gY29yZU1XO1xuICAgICAgICB9LFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB2aXBpZnkodGFyZ2V0LCB2aXBEYikge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHRhcmdldCwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAnZGInKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlwRGI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgRGV4aWUkMSA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEZXhpZShuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5fbWlkZGxld2FyZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMudmVybm8gPSAwO1xuICAgICAgICAgICAgdmFyIGRlcHMgPSBEZXhpZS5kZXBlbmRlbmNpZXM7XG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucyA9IF9fYXNzaWduKHtcbiAgICAgICAgICAgICAgICBhZGRvbnM6IERleGllLmFkZG9ucywgYXV0b09wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgaW5kZXhlZERCOiBkZXBzLmluZGV4ZWREQiwgSURCS2V5UmFuZ2U6IGRlcHMuSURCS2V5UmFuZ2UsIGNhY2hlOiAnY2xvbmVkJyB9LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuX2RlcHMgPSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZERCOiBvcHRpb25zLmluZGV4ZWREQixcbiAgICAgICAgICAgICAgICBJREJLZXlSYW5nZTogb3B0aW9ucy5JREJLZXlSYW5nZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBhZGRvbnMgPSBvcHRpb25zLmFkZG9ucztcbiAgICAgICAgICAgIHRoaXMuX2RiU2NoZW1hID0ge307XG4gICAgICAgICAgICB0aGlzLl92ZXJzaW9ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fc3RvcmVOYW1lcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fYWxsVGFibGVzID0ge307XG4gICAgICAgICAgICB0aGlzLmlkYmRiID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX25vdmlwID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBkYk9wZW5FcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICBpc0JlaW5nT3BlbmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvblJlYWR5QmVpbmdGaXJlZDogbnVsbCxcbiAgICAgICAgICAgICAgICBvcGVuQ29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRiUmVhZHlSZXNvbHZlOiBub3AsXG4gICAgICAgICAgICAgICAgZGJSZWFkeVByb21pc2U6IG51bGwsXG4gICAgICAgICAgICAgICAgY2FuY2VsT3Blbjogbm9wLFxuICAgICAgICAgICAgICAgIG9wZW5DYW5jZWxsZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgYXV0b1NjaGVtYTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBQUjEzOThfbWF4TG9vcDogMyxcbiAgICAgICAgICAgICAgICBhdXRvT3Blbjogb3B0aW9ucy5hdXRvT3BlbixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzdGF0ZS5kYlJlYWR5UHJvbWlzZSA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kYlJlYWR5UmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXRlLm9wZW5DYW5jZWxsZXIgPSBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5jYW5jZWxPcGVuID0gcmVqZWN0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgICAgIHRoaXMub24gPSBFdmVudHModGhpcywgXCJwb3B1bGF0ZVwiLCBcImJsb2NrZWRcIiwgXCJ2ZXJzaW9uY2hhbmdlXCIsIFwiY2xvc2VcIiwgeyByZWFkeTogW3Byb21pc2FibGVDaGFpbiwgbm9wXSB9KTtcbiAgICAgICAgICAgIHRoaXMub25jZSA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub24oZXZlbnQpLnVuc3Vic2NyaWJlKGZuKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoX3RoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uKGV2ZW50LCBmbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5vbi5yZWFkeS5zdWJzY3JpYmUgPSBvdmVycmlkZSh0aGlzLm9uLnJlYWR5LnN1YnNjcmliZSwgZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3Vic2NyaWJlciwgYlN0aWNreSkge1xuICAgICAgICAgICAgICAgICAgICBEZXhpZS52aXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gX3RoaXMuX3N0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLm9wZW5Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuZGJPcGVuRXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERleGllUHJvbWlzZS5yZXNvbHZlKCkudGhlbihzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYlN0aWNreSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUub25SZWFkeUJlaW5nRmlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5vblJlYWR5QmVpbmdGaXJlZC5wdXNoKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiU3RpY2t5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRiXzEgPSBfdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJTdGlja3kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZShmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiXzEub24ucmVhZHkudW5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYl8xLm9uLnJlYWR5LnVuc3Vic2NyaWJlKHVuc3Vic2NyaWJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuQ29sbGVjdGlvbiA9IGNyZWF0ZUNvbGxlY3Rpb25Db25zdHJ1Y3Rvcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuVGFibGUgPSBjcmVhdGVUYWJsZUNvbnN0cnVjdG9yKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5UcmFuc2FjdGlvbiA9IGNyZWF0ZVRyYW5zYWN0aW9uQ29uc3RydWN0b3IodGhpcyk7XG4gICAgICAgICAgICB0aGlzLlZlcnNpb24gPSBjcmVhdGVWZXJzaW9uQ29uc3RydWN0b3IodGhpcyk7XG4gICAgICAgICAgICB0aGlzLldoZXJlQ2xhdXNlID0gY3JlYXRlV2hlcmVDbGF1c2VDb25zdHJ1Y3Rvcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub24oXCJ2ZXJzaW9uY2hhbmdlXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIGlmIChldi5uZXdWZXJzaW9uID4gMClcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQW5vdGhlciBjb25uZWN0aW9uIHdhbnRzIHRvIHVwZ3JhZGUgZGF0YWJhc2UgJ1wiLmNvbmNhdChfdGhpcy5uYW1lLCBcIicuIENsb3NpbmcgZGIgbm93IHRvIHJlc3VtZSB0aGUgdXBncmFkZS5cIikpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQW5vdGhlciBjb25uZWN0aW9uIHdhbnRzIHRvIGRlbGV0ZSBkYXRhYmFzZSAnXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiJy4gQ2xvc2luZyBkYiBub3cgdG8gcmVzdW1lIHRoZSBkZWxldGUgcmVxdWVzdC5cIikpO1xuICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlKHsgZGlzYWJsZUF1dG9PcGVuOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vbihcImJsb2NrZWRcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFldi5uZXdWZXJzaW9uIHx8IGV2Lm5ld1ZlcnNpb24gPCBldi5vbGRWZXJzaW9uKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJEZXhpZS5kZWxldGUoJ1wiLmNvbmNhdChfdGhpcy5uYW1lLCBcIicpIHdhcyBibG9ja2VkXCIpKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVwZ3JhZGUgJ1wiLmNvbmNhdChfdGhpcy5uYW1lLCBcIicgYmxvY2tlZCBieSBvdGhlciBjb25uZWN0aW9uIGhvbGRpbmcgdmVyc2lvbiBcIikuY29uY2F0KGV2Lm9sZFZlcnNpb24gLyAxMCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9tYXhLZXkgPSBnZXRNYXhLZXkob3B0aW9ucy5JREJLZXlSYW5nZSk7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uIChtb2RlLCBzdG9yZU5hbWVzLCBkYnNjaGVtYSwgcGFyZW50VHJhbnNhY3Rpb24pIHsgcmV0dXJuIG5ldyBfdGhpcy5UcmFuc2FjdGlvbihtb2RlLCBzdG9yZU5hbWVzLCBkYnNjaGVtYSwgX3RoaXMuX29wdGlvbnMuY2hyb21lVHJhbnNhY3Rpb25EdXJhYmlsaXR5LCBwYXJlbnRUcmFuc2FjdGlvbik7IH07XG4gICAgICAgICAgICB0aGlzLl9maXJlT25CbG9ja2VkID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub24oXCJibG9ja2VkXCIpLmZpcmUoZXYpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMubmFtZSA9PT0gX3RoaXMubmFtZSAmJiBjICE9PSBfdGhpcyAmJiAhYy5fc3RhdGUudmNGaXJlZDsgfSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5vbihcInZlcnNpb25jaGFuZ2VcIikuZmlyZShldik7IH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudXNlKGNhY2hlRXhpc3RpbmdWYWx1ZXNNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgIHRoaXMudXNlKGNhY2hlTWlkZGxld2FyZSk7XG4gICAgICAgICAgICB0aGlzLnVzZShvYnNlcnZhYmlsaXR5TWlkZGxld2FyZSk7XG4gICAgICAgICAgICB0aGlzLnVzZSh2aXJ0dWFsSW5kZXhNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgIHRoaXMudXNlKGhvb2tzTWlkZGxld2FyZSk7XG4gICAgICAgICAgICB2YXIgdmlwREIgPSBuZXcgUHJveHkodGhpcywge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKF8sIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAnX3ZpcCcpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICd0YWJsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhYmxlTmFtZSkgeyByZXR1cm4gdmlwaWZ5KF90aGlzLnRhYmxlKHRhYmxlTmFtZSksIHZpcERCKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJ2ID0gUmVmbGVjdC5nZXQoXywgcHJvcCwgcmVjZWl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocnYgaW5zdGFuY2VvZiBUYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aXBpZnkocnYsIHZpcERCKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICd0YWJsZXMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ2Lm1hcChmdW5jdGlvbiAodCkgeyByZXR1cm4gdmlwaWZ5KHQsIHZpcERCKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAnX2NyZWF0ZVRyYW5zYWN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4ID0gcnYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlwaWZ5KHR4LCB2aXBEQik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnZpcCA9IHZpcERCO1xuICAgICAgICAgICAgYWRkb25zLmZvckVhY2goZnVuY3Rpb24gKGFkZG9uKSB7IHJldHVybiBhZGRvbihfdGhpcyk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIERleGllLnByb3RvdHlwZS52ZXJzaW9uID0gZnVuY3Rpb24gKHZlcnNpb25OdW1iZXIpIHtcbiAgICAgICAgICAgIGlmIChpc05hTih2ZXJzaW9uTnVtYmVyKSB8fCB2ZXJzaW9uTnVtYmVyIDwgMC4xKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlR5cGUoXCJHaXZlbiB2ZXJzaW9uIGlzIG5vdCBhIHBvc2l0aXZlIG51bWJlclwiKTtcbiAgICAgICAgICAgIHZlcnNpb25OdW1iZXIgPSBNYXRoLnJvdW5kKHZlcnNpb25OdW1iZXIgKiAxMCkgLyAxMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlkYmRiIHx8IHRoaXMuX3N0YXRlLmlzQmVpbmdPcGVuZWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiQ2Fubm90IGFkZCB2ZXJzaW9uIHdoZW4gZGF0YWJhc2UgaXMgb3BlblwiKTtcbiAgICAgICAgICAgIHRoaXMudmVybm8gPSBNYXRoLm1heCh0aGlzLnZlcm5vLCB2ZXJzaW9uTnVtYmVyKTtcbiAgICAgICAgICAgIHZhciB2ZXJzaW9ucyA9IHRoaXMuX3ZlcnNpb25zO1xuICAgICAgICAgICAgdmFyIHZlcnNpb25JbnN0YW5jZSA9IHZlcnNpb25zLmZpbHRlcihmdW5jdGlvbiAodikgeyByZXR1cm4gdi5fY2ZnLnZlcnNpb24gPT09IHZlcnNpb25OdW1iZXI7IH0pWzBdO1xuICAgICAgICAgICAgaWYgKHZlcnNpb25JbnN0YW5jZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVyc2lvbkluc3RhbmNlO1xuICAgICAgICAgICAgdmVyc2lvbkluc3RhbmNlID0gbmV3IHRoaXMuVmVyc2lvbih2ZXJzaW9uTnVtYmVyKTtcbiAgICAgICAgICAgIHZlcnNpb25zLnB1c2godmVyc2lvbkluc3RhbmNlKTtcbiAgICAgICAgICAgIHZlcnNpb25zLnNvcnQobG93ZXJWZXJzaW9uRmlyc3QpO1xuICAgICAgICAgICAgdmVyc2lvbkluc3RhbmNlLnN0b3Jlcyh7fSk7XG4gICAgICAgICAgICB0aGlzLl9zdGF0ZS5hdXRvU2NoZW1hID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbkluc3RhbmNlO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuX3doZW5SZWFkeSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5pZGJkYiAmJiAodGhpcy5fc3RhdGUub3BlbkNvbXBsZXRlIHx8IFBTRC5sZXRUaHJvdWdoIHx8IHRoaXMuX3ZpcCkpID8gZm4oKSA6IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fc3RhdGUub3BlbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoX3RoaXMuX3N0YXRlLmRiT3BlbkVycm9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuX3N0YXRlLmlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5fc3RhdGUuYXV0b09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcGVuKCkuY2F0Y2gobm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuX3N0YXRlLmRiUmVhZHlQcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZm4pO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgc3RhY2sgPSBfYS5zdGFjaywgY3JlYXRlID0gX2EuY3JlYXRlLCBsZXZlbCA9IF9hLmxldmVsLCBuYW1lID0gX2EubmFtZTtcbiAgICAgICAgICAgIGlmIChuYW1lKVxuICAgICAgICAgICAgICAgIHRoaXMudW51c2UoeyBzdGFjazogc3RhY2ssIG5hbWU6IG5hbWUgfSk7XG4gICAgICAgICAgICB2YXIgbWlkZGxld2FyZXMgPSB0aGlzLl9taWRkbGV3YXJlc1tzdGFja10gfHwgKHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXSA9IFtdKTtcbiAgICAgICAgICAgIG1pZGRsZXdhcmVzLnB1c2goeyBzdGFjazogc3RhY2ssIGNyZWF0ZTogY3JlYXRlLCBsZXZlbDogbGV2ZWwgPT0gbnVsbCA/IDEwIDogbGV2ZWwsIG5hbWU6IG5hbWUgfSk7XG4gICAgICAgICAgICBtaWRkbGV3YXJlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmxldmVsIC0gYi5sZXZlbDsgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLnVudXNlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgc3RhY2sgPSBfYS5zdGFjaywgbmFtZSA9IF9hLm5hbWUsIGNyZWF0ZSA9IF9hLmNyZWF0ZTtcbiAgICAgICAgICAgIGlmIChzdGFjayAmJiB0aGlzLl9taWRkbGV3YXJlc1tzdGFja10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9taWRkbGV3YXJlc1tzdGFja10gPSB0aGlzLl9taWRkbGV3YXJlc1tzdGFja10uZmlsdGVyKGZ1bmN0aW9uIChtdykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlID8gbXcuY3JlYXRlICE9PSBjcmVhdGUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA/IG13Lm5hbWUgIT09IG5hbWUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB1c2VQU0QoZ2xvYmFsUFNELFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gZGV4aWVPcGVuKF90aGlzKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5fY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9uLmNsb3NlLmZpcmUobmV3IEN1c3RvbUV2ZW50KCdjbG9zZScpKTtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuX3N0YXRlO1xuICAgICAgICAgICAgdmFyIGlkeCA9IGNvbm5lY3Rpb25zLmluZGV4T2YodGhpcyk7XG4gICAgICAgICAgICBpZiAoaWR4ID49IDApXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pZGJkYikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWRiZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgICAgIHRoaXMuaWRiZGIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc0JlaW5nT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZGJSZWFkeVByb21pc2UgPSBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiUmVhZHlSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuQ2FuY2VsbGVyID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmNhbmNlbE9wZW4gPSByZWplY3Q7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIF9iID0gX2EgPT09IHZvaWQgMCA/IHsgZGlzYWJsZUF1dG9PcGVuOiB0cnVlIH0gOiBfYSwgZGlzYWJsZUF1dG9PcGVuID0gX2IuZGlzYWJsZUF1dG9PcGVuO1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5fc3RhdGU7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZUF1dG9PcGVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY2FuY2VsT3BlbihuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5hdXRvT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHN0YXRlLmRiT3BlbkVycm9yID0gbmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2Nsb3NlKCk7XG4gICAgICAgICAgICAgICAgc3RhdGUuYXV0b09wZW4gPSB0aGlzLl9vcHRpb25zLmF1dG9PcGVuIHx8XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzQmVpbmdPcGVuZWQ7XG4gICAgICAgICAgICAgICAgc3RhdGUub3BlbkNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3RhdGUuZGJPcGVuRXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGNsb3NlT3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChjbG9zZU9wdGlvbnMgPT09IHZvaWQgMCkgeyBjbG9zZU9wdGlvbnMgPSB7IGRpc2FibGVBdXRvT3BlbjogdHJ1ZSB9OyB9XG4gICAgICAgICAgICB2YXIgaGFzSW52YWxpZEFyZ3VtZW50cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdvYmplY3QnO1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5fc3RhdGU7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvRGVsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZShjbG9zZU9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gX3RoaXMuX2RlcHMuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKF90aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb25EYXRhYmFzZURlbGV0ZWQoX3RoaXMuX2RlcHMsIF90aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uYmxvY2tlZCA9IF90aGlzLl9maXJlT25CbG9ja2VkO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGhhc0ludmFsaWRBcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkludmFsaWQgY2xvc2VPcHRpb25zIGFyZ3VtZW50IHRvIGRiLmRlbGV0ZSgpXCIpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5pc0JlaW5nT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmRiUmVhZHlQcm9taXNlLnRoZW4oZG9EZWxldGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZG9EZWxldGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLmJhY2tlbmREQiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlkYmRiO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuaXNPcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWRiZGIgIT09IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5oYXNCZWVuQ2xvc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiT3BlbkVycm9yID0gdGhpcy5fc3RhdGUuZGJPcGVuRXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gZGJPcGVuRXJyb3IgJiYgKGRiT3BlbkVycm9yLm5hbWUgPT09ICdEYXRhYmFzZUNsb3NlZCcpO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuaGFzRmFpbGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlLmRiT3BlbkVycm9yICE9PSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuZHluYW1pY2FsbHlPcGVuZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGUuYXV0b1NjaGVtYTtcbiAgICAgICAgfTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERleGllLnByb3RvdHlwZSwgXCJ0YWJsZXNcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5cyh0aGlzLl9hbGxUYWJsZXMpLm1hcChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gX3RoaXMuX2FsbFRhYmxlc1tuYW1lXTsgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIERleGllLnByb3RvdHlwZS50cmFuc2FjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gZXh0cmFjdFRyYW5zYWN0aW9uQXJncy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuX3RyYW5zYWN0aW9uID0gZnVuY3Rpb24gKG1vZGUsIHRhYmxlcywgc2NvcGVGdW5jKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHBhcmVudFRyYW5zYWN0aW9uID0gUFNELnRyYW5zO1xuICAgICAgICAgICAgaWYgKCFwYXJlbnRUcmFuc2FjdGlvbiB8fCBwYXJlbnRUcmFuc2FjdGlvbi5kYiAhPT0gdGhpcyB8fCBtb2RlLmluZGV4T2YoJyEnKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgcGFyZW50VHJhbnNhY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgdmFyIG9ubHlJZkNvbXBhdGlibGUgPSBtb2RlLmluZGV4T2YoJz8nKSAhPT0gLTE7XG4gICAgICAgICAgICBtb2RlID0gbW9kZS5yZXBsYWNlKCchJywgJycpLnJlcGxhY2UoJz8nLCAnJyk7XG4gICAgICAgICAgICB2YXIgaWRiTW9kZSwgc3RvcmVOYW1lcztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RvcmVOYW1lcyA9IHRhYmxlcy5tYXAoZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZU5hbWUgPSB0YWJsZSBpbnN0YW5jZW9mIF90aGlzLlRhYmxlID8gdGFibGUubmFtZSA6IHRhYmxlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0b3JlTmFtZSAhPT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0YWJsZSBhcmd1bWVudCB0byBEZXhpZS50cmFuc2FjdGlvbigpLiBPbmx5IFRhYmxlIG9yIFN0cmluZyBhcmUgYWxsb3dlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlTmFtZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PSBcInJcIiB8fCBtb2RlID09PSBSRUFET05MWSlcbiAgICAgICAgICAgICAgICAgICAgaWRiTW9kZSA9IFJFQURPTkxZO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZGUgPT0gXCJyd1wiIHx8IG1vZGUgPT0gUkVBRFdSSVRFKVxuICAgICAgICAgICAgICAgICAgICBpZGJNb2RlID0gUkVBRFdSSVRFO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiSW52YWxpZCB0cmFuc2FjdGlvbiBtb2RlOiBcIiArIG1vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50VHJhbnNhY3Rpb24ubW9kZSA9PT0gUkVBRE9OTFkgJiYgaWRiTW9kZSA9PT0gUkVBRFdSSVRFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25seUlmQ29tcGF0aWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TdWJUcmFuc2FjdGlvbihcIkNhbm5vdCBlbnRlciBhIHN1Yi10cmFuc2FjdGlvbiB3aXRoIFJFQURXUklURSBtb2RlIHdoZW4gcGFyZW50IHRyYW5zYWN0aW9uIGlzIFJFQURPTkxZXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50VHJhbnNhY3Rpb24gJiYgcGFyZW50VHJhbnNhY3Rpb24uc3RvcmVOYW1lcy5pbmRleE9mKHN0b3JlTmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmx5SWZDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU3ViVHJhbnNhY3Rpb24oXCJUYWJsZSBcIiArIHN0b3JlTmFtZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgbm90IGluY2x1ZGVkIGluIHBhcmVudCB0cmFuc2FjdGlvbi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ubHlJZkNvbXBhdGlibGUgJiYgcGFyZW50VHJhbnNhY3Rpb24gJiYgIXBhcmVudFRyYW5zYWN0aW9uLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50VHJhbnNhY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50VHJhbnNhY3Rpb24gP1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbi5fcHJvbWlzZShudWxsLCBmdW5jdGlvbiAoXywgcmVqZWN0KSB7IHJlamVjdChlKTsgfSkgOlxuICAgICAgICAgICAgICAgICAgICByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZW50ZXJUcmFuc2FjdGlvbiA9IGVudGVyVHJhbnNhY3Rpb25TY29wZS5iaW5kKG51bGwsIHRoaXMsIGlkYk1vZGUsIHN0b3JlTmFtZXMsIHBhcmVudFRyYW5zYWN0aW9uLCBzY29wZUZ1bmMpO1xuICAgICAgICAgICAgcmV0dXJuIChwYXJlbnRUcmFuc2FjdGlvbiA/XG4gICAgICAgICAgICAgICAgcGFyZW50VHJhbnNhY3Rpb24uX3Byb21pc2UoaWRiTW9kZSwgZW50ZXJUcmFuc2FjdGlvbiwgXCJsb2NrXCIpIDpcbiAgICAgICAgICAgICAgICBQU0QudHJhbnMgP1xuICAgICAgICAgICAgICAgICAgICB1c2VQU0QoUFNELnRyYW5zbGVzcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX3doZW5SZWFkeShlbnRlclRyYW5zYWN0aW9uKTsgfSkgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93aGVuUmVhZHkoZW50ZXJUcmFuc2FjdGlvbikpO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUudGFibGUgPSBmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWhhc093bih0aGlzLl9hbGxUYWJsZXMsIHRhYmxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkVGFibGUoXCJUYWJsZSBcIi5jb25jYXQodGFibGVOYW1lLCBcIiBkb2VzIG5vdCBleGlzdFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWxsVGFibGVzW3RhYmxlTmFtZV07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXhpZTtcbiAgICB9KCkpO1xuXG4gICAgdmFyIHN5bWJvbE9ic2VydmFibGUgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFwib2JzZXJ2YWJsZVwiIGluIFN5bWJvbFxuICAgICAgICA/IFN5bWJvbC5vYnNlcnZhYmxlXG4gICAgICAgIDogXCJAQG9ic2VydmFibGVcIjtcbiAgICB2YXIgT2JzZXJ2YWJsZSA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uICh4LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUoIXggfHwgdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIiA/IHsgbmV4dDogeCwgZXJyb3I6IGVycm9yLCBjb21wbGV0ZTogY29tcGxldGUgfSA6IHgpO1xuICAgICAgICB9O1xuICAgICAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtzeW1ib2xPYnNlcnZhYmxlXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbiAgICB9KCkpO1xuXG4gICAgdmFyIGRvbURlcHM7XG4gICAgdHJ5IHtcbiAgICAgICAgZG9tRGVwcyA9IHtcbiAgICAgICAgICAgIGluZGV4ZWREQjogX2dsb2JhbC5pbmRleGVkREIgfHwgX2dsb2JhbC5tb3pJbmRleGVkREIgfHwgX2dsb2JhbC53ZWJraXRJbmRleGVkREIgfHwgX2dsb2JhbC5tc0luZGV4ZWREQixcbiAgICAgICAgICAgIElEQktleVJhbmdlOiBfZ2xvYmFsLklEQktleVJhbmdlIHx8IF9nbG9iYWwud2Via2l0SURCS2V5UmFuZ2VcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZG9tRGVwcyA9IHsgaW5kZXhlZERCOiBudWxsLCBJREJLZXlSYW5nZTogbnVsbCB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpdmVRdWVyeShxdWVyaWVyKSB7XG4gICAgICAgIHZhciBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgY3VycmVudFZhbHVlO1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgICAgdmFyIHNjb3BlRnVuY0lzQXN5bmMgPSBpc0FzeW5jRnVuY3Rpb24ocXVlcmllcik7XG4gICAgICAgICAgICBmdW5jdGlvbiBleGVjdXRlKGN0eCkge1xuICAgICAgICAgICAgICAgIHZhciB3YXNSb290RXhlYyA9IGJlZ2luTWljcm9UaWNrU2NvcGUoKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGVGdW5jSXNBc3luYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBuZXdTY29wZShxdWVyaWVyLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGVGdW5jSXNBc3luYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcnYgPSBydi5maW5hbGx5KGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB3YXNSb290RXhlYyAmJiBlbmRNaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBhYm9ydENvbnRyb2xsZXI7XG4gICAgICAgICAgICB2YXIgYWNjdW1NdXRzID0ge307XG4gICAgICAgICAgICB2YXIgY3VycmVudE9icyA9IHt9O1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBnZXQgY2xvc2VkKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xvc2VkO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFib3J0Q29udHJvbGxlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRlZExpc3RlbmluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbEV2ZW50cy5zdG9yYWdlbXV0YXRlZC51bnN1YnNjcmliZShtdXRhdGlvbkxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9ic2VydmVyLnN0YXJ0ICYmIG9ic2VydmVyLnN0YXJ0KHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICB2YXIgc3RhcnRlZExpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGRvUXVlcnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBleGVjSW5HbG9iYWxDb250ZXh0KF9kb1F1ZXJ5KTsgfTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3VsZE5vdGlmeSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzU2V0c092ZXJsYXAoY3VycmVudE9icywgYWNjdW1NdXRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtdXRhdGlvbkxpc3RlbmVyID0gZnVuY3Rpb24gKHBhcnRzKSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldChhY2N1bU11dHMsIHBhcnRzKTtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkTm90aWZ5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9RdWVyeSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgX2RvUXVlcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNsb3NlZCB8fFxuICAgICAgICAgICAgICAgICAgICAhZG9tRGVwcy5pbmRleGVkREIpXG4gICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhY2N1bU11dHMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgc3Vic2NyID0ge307XG4gICAgICAgICAgICAgICAgaWYgKGFib3J0Q29udHJvbGxlcilcbiAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcjogc3Vic2NyLFxuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlcnk6IGRvUXVlcnksXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJpZXI6IHF1ZXJpZXIsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zOiBudWxsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gZXhlY3V0ZShjdHgpO1xuICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShyZXQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBoYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlZCB8fCBjdHguc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhY2N1bU11dHMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE9icyA9IHN1YnNjcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmplY3RJc0VtcHR5KGN1cnJlbnRPYnMpICYmICFzdGFydGVkTGlzdGVuaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxFdmVudHMoREVYSUVfU1RPUkFHRV9NVVRBVEVEX0VWRU5UX05BTUUsIG11dGF0aW9uTGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRlZExpc3RlbmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZXhlY0luR2xvYmFsQ29udGV4dChmdW5jdGlvbiAoKSB7IHJldHVybiAhY2xvc2VkICYmIG9ic2VydmVyLm5leHQgJiYgb2JzZXJ2ZXIubmV4dChyZXN1bHQpOyB9KTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghWydEYXRhYmFzZUNsb3NlZEVycm9yJywgJ0Fib3J0RXJyb3InXS5pbmNsdWRlcyhlcnIgPT09IG51bGwgfHwgZXJyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnIubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2xvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNJbkdsb2JhbENvbnRleHQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvciAmJiBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0VGltZW91dChkb1F1ZXJ5LCAwKTtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH0pO1xuICAgICAgICBvYnNlcnZhYmxlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gaGFzVmFsdWU7IH07XG4gICAgICAgIG9ic2VydmFibGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjdXJyZW50VmFsdWU7IH07XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH1cblxuICAgIHZhciBEZXhpZSA9IERleGllJDE7XG4gICAgcHJvcHMoRGV4aWUsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBmdWxsTmFtZUV4Y2VwdGlvbnMpLCB7XG4gICAgICAgIGRlbGV0ZTogZnVuY3Rpb24gKGRhdGFiYXNlTmFtZSkge1xuICAgICAgICAgICAgdmFyIGRiID0gbmV3IERleGllKGRhdGFiYXNlTmFtZSwgeyBhZGRvbnM6IFtdIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRiLmRlbGV0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBleGlzdHM6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERleGllKG5hbWUsIHsgYWRkb25zOiBbXSB9KS5vcGVuKCkudGhlbihmdW5jdGlvbiAoZGIpIHtcbiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSkuY2F0Y2goJ05vU3VjaERhdGFiYXNlRXJyb3InLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldERhdGFiYXNlTmFtZXM6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RGF0YWJhc2VOYW1lcyhEZXhpZS5kZXBlbmRlbmNpZXMpLnRoZW4oY2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5NaXNzaW5nQVBJKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZpbmVDbGFzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gQ2xhc3MoY29udGVudCkge1xuICAgICAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBDbGFzcztcbiAgICAgICAgfSwgaWdub3JlVHJhbnNhY3Rpb246IGZ1bmN0aW9uIChzY29wZUZ1bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQU0QudHJhbnMgP1xuICAgICAgICAgICAgICAgIHVzZVBTRChQU0QudHJhbnNsZXNzLCBzY29wZUZ1bmMpIDpcbiAgICAgICAgICAgICAgICBzY29wZUZ1bmMoKTtcbiAgICAgICAgfSwgdmlwOiB2aXAsIGFzeW5jOiBmdW5jdGlvbiAoZ2VuZXJhdG9yRm4pIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJ2ID0gYXdhaXRJdGVyYXRvcihnZW5lcmF0b3JGbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFydiB8fCB0eXBlb2YgcnYudGhlbiAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZShydik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCBzcGF3bjogZnVuY3Rpb24gKGdlbmVyYXRvckZuLCBhcmdzLCB0aGl6KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBydiA9IGF3YWl0SXRlcmF0b3IoZ2VuZXJhdG9yRm4uYXBwbHkodGhpeiwgYXJncyB8fCBbXSkpO1xuICAgICAgICAgICAgICAgIGlmICghcnYgfHwgdHlwZW9mIHJ2LnRoZW4gIT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZShydik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjdXJyZW50VHJhbnNhY3Rpb246IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUFNELnRyYW5zIHx8IG51bGw7IH1cbiAgICAgICAgfSwgd2FpdEZvcjogZnVuY3Rpb24gKHByb21pc2VPckZ1bmN0aW9uLCBvcHRpb25hbFRpbWVvdXQpIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gRGV4aWVQcm9taXNlLnJlc29sdmUodHlwZW9mIHByb21pc2VPckZ1bmN0aW9uID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgICAgICBEZXhpZS5pZ25vcmVUcmFuc2FjdGlvbihwcm9taXNlT3JGdW5jdGlvbikgOlxuICAgICAgICAgICAgICAgIHByb21pc2VPckZ1bmN0aW9uKVxuICAgICAgICAgICAgICAgIC50aW1lb3V0KG9wdGlvbmFsVGltZW91dCB8fCA2MDAwMCk7XG4gICAgICAgICAgICByZXR1cm4gUFNELnRyYW5zID9cbiAgICAgICAgICAgICAgICBQU0QudHJhbnMud2FpdEZvcihwcm9taXNlKSA6XG4gICAgICAgICAgICAgICAgcHJvbWlzZTtcbiAgICAgICAgfSxcbiAgICAgICAgUHJvbWlzZTogRGV4aWVQcm9taXNlLFxuICAgICAgICBkZWJ1Zzoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBkZWJ1ZzsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgc2V0RGVidWcodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZXJpdmU6IGRlcml2ZSwgZXh0ZW5kOiBleHRlbmQsIHByb3BzOiBwcm9wcywgb3ZlcnJpZGU6IG92ZXJyaWRlLFxuICAgICAgICBFdmVudHM6IEV2ZW50cywgb246IGdsb2JhbEV2ZW50cywgbGl2ZVF1ZXJ5OiBsaXZlUXVlcnksIGV4dGVuZE9ic2VydmFiaWxpdHlTZXQ6IGV4dGVuZE9ic2VydmFiaWxpdHlTZXQsXG4gICAgICAgIGdldEJ5S2V5UGF0aDogZ2V0QnlLZXlQYXRoLCBzZXRCeUtleVBhdGg6IHNldEJ5S2V5UGF0aCwgZGVsQnlLZXlQYXRoOiBkZWxCeUtleVBhdGgsIHNoYWxsb3dDbG9uZTogc2hhbGxvd0Nsb25lLCBkZWVwQ2xvbmU6IGRlZXBDbG9uZSwgZ2V0T2JqZWN0RGlmZjogZ2V0T2JqZWN0RGlmZiwgY21wOiBjbXAsIGFzYXA6IGFzYXAkMSxcbiAgICAgICAgbWluS2V5OiBtaW5LZXksXG4gICAgICAgIGFkZG9uczogW10sXG4gICAgICAgIGNvbm5lY3Rpb25zOiBjb25uZWN0aW9ucyxcbiAgICAgICAgZXJybmFtZXM6IGVycm5hbWVzLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IGRvbURlcHMsIGNhY2hlOiBjYWNoZSxcbiAgICAgICAgc2VtVmVyOiBERVhJRV9WRVJTSU9OLCB2ZXJzaW9uOiBERVhJRV9WRVJTSU9OLnNwbGl0KCcuJylcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKG4pIHsgcmV0dXJuIHBhcnNlSW50KG4pOyB9KVxuICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAocCwgYywgaSkgeyByZXR1cm4gcCArIChjIC8gTWF0aC5wb3coMTAsIGkgKiAyKSk7IH0pIH0pKTtcbiAgICBEZXhpZS5tYXhLZXkgPSBnZXRNYXhLZXkoRGV4aWUuZGVwZW5kZW5jaWVzLklEQktleVJhbmdlKTtcblxuICAgIGlmICh0eXBlb2YgZGlzcGF0Y2hFdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGdsb2JhbEV2ZW50cyhERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSwgZnVuY3Rpb24gKHVwZGF0ZWRQYXJ0cykge1xuICAgICAgICAgICAgaWYgKCFwcm9wYWdhdGluZ0xvY2FsbHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRfMTtcbiAgICAgICAgICAgICAgICBldmVudF8xID0gbmV3IEN1c3RvbUV2ZW50KFNUT1JBR0VfTVVUQVRFRF9ET01fRVZFTlRfTkFNRSwge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHVwZGF0ZWRQYXJ0c1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHByb3BhZ2F0aW5nTG9jYWxseSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hFdmVudChldmVudF8xKTtcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGluZ0xvY2FsbHkgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoU1RPUkFHRV9NVVRBVEVEX0RPTV9FVkVOVF9OQU1FLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBkZXRhaWwgPSBfYS5kZXRhaWw7XG4gICAgICAgICAgICBpZiAoIXByb3BhZ2F0aW5nTG9jYWxseSkge1xuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZUxvY2FsbHkoZGV0YWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZUxvY2FsbHkodXBkYXRlUGFydHMpIHtcbiAgICAgICAgdmFyIHdhc01lID0gcHJvcGFnYXRpbmdMb2NhbGx5O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvcGFnYXRpbmdMb2NhbGx5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGdsb2JhbEV2ZW50cy5zdG9yYWdlbXV0YXRlZC5maXJlKHVwZGF0ZVBhcnRzKTtcbiAgICAgICAgICAgIHNpZ25hbFN1YnNjcmliZXJzTm93KHVwZGF0ZVBhcnRzLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHByb3BhZ2F0aW5nTG9jYWxseSA9IHdhc01lO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBwcm9wYWdhdGluZ0xvY2FsbHkgPSBmYWxzZTtcblxuICAgIHZhciBiYztcbiAgICB2YXIgY3JlYXRlQkMgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgaWYgKHR5cGVvZiBCcm9hZGNhc3RDaGFubmVsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjcmVhdGVCQyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJjID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoU1RPUkFHRV9NVVRBVEVEX0RPTV9FVkVOVF9OQU1FKTtcbiAgICAgICAgICAgIGJjLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldikgeyByZXR1cm4gZXYuZGF0YSAmJiBwcm9wYWdhdGVMb2NhbGx5KGV2LmRhdGEpOyB9O1xuICAgICAgICB9O1xuICAgICAgICBjcmVhdGVCQygpO1xuICAgICAgICBpZiAodHlwZW9mIGJjLnVucmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBiYy51bnJlZigpO1xuICAgICAgICB9XG4gICAgICAgIGdsb2JhbEV2ZW50cyhERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSwgZnVuY3Rpb24gKGNoYW5nZWRQYXJ0cykge1xuICAgICAgICAgICAgaWYgKCFwcm9wYWdhdGluZ0xvY2FsbHkpIHtcbiAgICAgICAgICAgICAgICBiYy5wb3N0TWVzc2FnZShjaGFuZ2VkUGFydHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VoaWRlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIURleGllJDEuZGlzYWJsZUJmQ2FjaGUgJiYgZXZlbnQucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdEZXhpZTogaGFuZGxpbmcgcGVyc2lzdGVkIHBhZ2VoaWRlJyk7XG4gICAgICAgICAgICAgICAgYmMgPT09IG51bGwgfHwgYmMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJjLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb25uZWN0aW9uc18xID0gY29ubmVjdGlvbnM7IF9pIDwgY29ubmVjdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRiID0gY29ubmVjdGlvbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKHsgZGlzYWJsZUF1dG9PcGVuOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKCdwYWdlc2hvdycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKCFEZXhpZSQxLmRpc2FibGVCZkNhY2hlICYmIGV2ZW50LnBlcnNpc3RlZCkge1xuICAgICAgICAgICAgICAgIGlmIChkZWJ1ZylcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnRGV4aWU6IGhhbmRsaW5nIHBlcnNpc3RlZCBwYWdlc2hvdycpO1xuICAgICAgICAgICAgICAgIGNyZWF0ZUJDKCk7XG4gICAgICAgICAgICAgICAgcHJvcGFnYXRlTG9jYWxseSh7IGFsbDogbmV3IFJhbmdlU2V0KC1JbmZpbml0eSwgW1tdXSkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BNb2RpZmljYXRpb24oeyBhZGQ6IHZhbHVlIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BNb2RpZmljYXRpb24oeyByZW1vdmU6IHZhbHVlIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlcGxhY2VQcmVmaXgoYSwgYikge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BNb2RpZmljYXRpb24oeyByZXBsYWNlUHJlZml4OiBbYSwgYl0gfSk7XG4gICAgfVxuXG4gICAgRGV4aWVQcm9taXNlLnJlamVjdGlvbk1hcHBlciA9IG1hcEVycm9yO1xuICAgIHNldERlYnVnKGRlYnVnKTtcblxuICAgIHZhciBuYW1lZEV4cG9ydHMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICAgICAgRGV4aWU6IERleGllJDEsXG4gICAgICAgIGxpdmVRdWVyeTogbGl2ZVF1ZXJ5LFxuICAgICAgICBFbnRpdHk6IEVudGl0eSxcbiAgICAgICAgY21wOiBjbXAsXG4gICAgICAgIFByb3BNb2RpZmljYXRpb246IFByb3BNb2RpZmljYXRpb24sXG4gICAgICAgIHJlcGxhY2VQcmVmaXg6IHJlcGxhY2VQcmVmaXgsXG4gICAgICAgIGFkZDogYWRkLFxuICAgICAgICByZW1vdmU6IHJlbW92ZSxcbiAgICAgICAgJ2RlZmF1bHQnOiBEZXhpZSQxLFxuICAgICAgICBSYW5nZVNldDogUmFuZ2VTZXQsXG4gICAgICAgIG1lcmdlUmFuZ2VzOiBtZXJnZVJhbmdlcyxcbiAgICAgICAgcmFuZ2VzT3ZlcmxhcDogcmFuZ2VzT3ZlcmxhcFxuICAgIH0pO1xuXG4gICAgX19hc3NpZ24oRGV4aWUkMSwgbmFtZWRFeHBvcnRzLCB7IGRlZmF1bHQ6IERleGllJDEgfSk7XG5cbiAgICByZXR1cm4gRGV4aWUkMTtcblxufSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGV4aWUuanMubWFwXG4iLCIvLyBNYWtpbmcgdGhlIG1vZHVsZSB2ZXJzaW9uIGNvbnN1bWFibGUgdmlhIHJlcXVpcmUgLSB0byBwcm9oaWJpdFxuLy8gbXVsdGlwbGUgb2NjdXJyYW5jaWVzIG9mIHRoZSBzYW1lIG1vZHVsZSBpbiB0aGUgc2FtZSBhcHBcbi8vIChkdWFsIHBhY2thZ2UgaGF6YXJkLCBodHRwczovL25vZGVqcy5vcmcvYXBpL3BhY2thZ2VzLmh0bWwjZHVhbC1wYWNrYWdlLWhhemFyZClcbmltcG9ydCBfRGV4aWUgZnJvbSBcIi4vZGlzdC9kZXhpZS5qc1wiO1xuY29uc3QgRGV4aWVTeW1ib2wgPSBTeW1ib2wuZm9yKFwiRGV4aWVcIik7XG5jb25zdCBEZXhpZSA9IGdsb2JhbFRoaXNbRGV4aWVTeW1ib2xdIHx8IChnbG9iYWxUaGlzW0RleGllU3ltYm9sXSA9IF9EZXhpZSk7XG5pZiAoX0RleGllLnNlbVZlciAhPT0gRGV4aWUuc2VtVmVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUd28gZGlmZmVyZW50IHZlcnNpb25zIG9mIERleGllIGxvYWRlZCBpbiB0aGUgc2FtZSBhcHA6ICR7X0RleGllLnNlbVZlcn0gYW5kICR7RGV4aWUuc2VtVmVyfWApO1xufVxuY29uc3QgeyBsaXZlUXVlcnksIG1lcmdlUmFuZ2VzLCByYW5nZXNPdmVybGFwLCBSYW5nZVNldCwgY21wLCBFbnRpdHksXG4gICAgUHJvcE1vZGlmaWNhdGlvbiwgcmVwbGFjZVByZWZpeCwgYWRkLCByZW1vdmUsXG4gICAgRGV4aWVZUHJvdmlkZXIgfSA9IERleGllO1xuZXhwb3J0IHsgbGl2ZVF1ZXJ5LCBtZXJnZVJhbmdlcywgcmFuZ2VzT3ZlcmxhcCwgUmFuZ2VTZXQsIGNtcCwgRGV4aWUsIEVudGl0eSxcbiAgICBQcm9wTW9kaWZpY2F0aW9uLCByZXBsYWNlUHJlZml4LCBhZGQsIHJlbW92ZSxcbiAgICBEZXhpZVlQcm92aWRlcn07XG4gICAgXG5leHBvcnQgZGVmYXVsdCBEZXhpZTtcbiIsImltcG9ydCBlIGZyb21cInZvaWQtZWxlbWVudHNcIjt2YXIgdD0vXFxzKFteJ1wiL1xccz48XSs/KVtcXHMvPl18KFteXFxzPV0rKT1cXHM/KFwiLio/XCJ8Jy4qPycpL2c7ZnVuY3Rpb24gbihuKXt2YXIgcj17dHlwZTpcInRhZ1wiLG5hbWU6XCJcIix2b2lkRWxlbWVudDohMSxhdHRyczp7fSxjaGlsZHJlbjpbXX0saT1uLm1hdGNoKC88XFwvPyhbXlxcc10rPylbL1xccz5dLyk7aWYoaSYmKHIubmFtZT1pWzFdLChlW2lbMV1dfHxcIi9cIj09PW4uY2hhckF0KG4ubGVuZ3RoLTIpKSYmKHIudm9pZEVsZW1lbnQ9ITApLHIubmFtZS5zdGFydHNXaXRoKFwiIS0tXCIpKSl7dmFyIHM9bi5pbmRleE9mKFwiLS1cXHgzZVwiKTtyZXR1cm57dHlwZTpcImNvbW1lbnRcIixjb21tZW50Oi0xIT09cz9uLnNsaWNlKDQscyk6XCJcIn19Zm9yKHZhciBhPW5ldyBSZWdFeHAodCksYz1udWxsO251bGwhPT0oYz1hLmV4ZWMobikpOylpZihjWzBdLnRyaW0oKSlpZihjWzFdKXt2YXIgbz1jWzFdLnRyaW0oKSxsPVtvLFwiXCJdO28uaW5kZXhPZihcIj1cIik+LTEmJihsPW8uc3BsaXQoXCI9XCIpKSxyLmF0dHJzW2xbMF1dPWxbMV0sYS5sYXN0SW5kZXgtLX1lbHNlIGNbMl0mJihyLmF0dHJzW2NbMl1dPWNbM10udHJpbSgpLnN1YnN0cmluZygxLGNbM10ubGVuZ3RoLTEpKTtyZXR1cm4gcn12YXIgcj0vPFthLXpBLVowLTlcXC1cXCFcXC9dKD86XCJbXlwiXSpcInwnW14nXSonfFteJ1wiPl0pKj4vZyxpPS9eXFxzKiQvLHM9T2JqZWN0LmNyZWF0ZShudWxsKTtmdW5jdGlvbiBhKGUsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZVwidGV4dFwiOnJldHVybiBlK3QuY29udGVudDtjYXNlXCJ0YWdcIjpyZXR1cm4gZSs9XCI8XCIrdC5uYW1lKyh0LmF0dHJzP2Z1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgbiBpbiBlKXQucHVzaChuKyc9XCInK2Vbbl0rJ1wiJyk7cmV0dXJuIHQubGVuZ3RoP1wiIFwiK3Quam9pbihcIiBcIik6XCJcIn0odC5hdHRycyk6XCJcIikrKHQudm9pZEVsZW1lbnQ/XCIvPlwiOlwiPlwiKSx0LnZvaWRFbGVtZW50P2U6ZSt0LmNoaWxkcmVuLnJlZHVjZShhLFwiXCIpK1wiPC9cIit0Lm5hbWUrXCI+XCI7Y2FzZVwiY29tbWVudFwiOnJldHVybiBlK1wiXFx4M2MhLS1cIit0LmNvbW1lbnQrXCItLVxceDNlXCJ9fXZhciBjPXtwYXJzZTpmdW5jdGlvbihlLHQpe3R8fCh0PXt9KSx0LmNvbXBvbmVudHN8fCh0LmNvbXBvbmVudHM9cyk7dmFyIGEsYz1bXSxvPVtdLGw9LTEsbT0hMTtpZigwIT09ZS5pbmRleE9mKFwiPFwiKSl7dmFyIHU9ZS5pbmRleE9mKFwiPFwiKTtjLnB1c2goe3R5cGU6XCJ0ZXh0XCIsY29udGVudDotMT09PXU/ZTplLnN1YnN0cmluZygwLHUpfSl9cmV0dXJuIGUucmVwbGFjZShyLGZ1bmN0aW9uKHIscyl7aWYobSl7aWYociE9PVwiPC9cIithLm5hbWUrXCI+XCIpcmV0dXJuO209ITF9dmFyIHUsZj1cIi9cIiE9PXIuY2hhckF0KDEpLGg9ci5zdGFydHNXaXRoKFwiXFx4M2MhLS1cIikscD1zK3IubGVuZ3RoLGQ9ZS5jaGFyQXQocCk7aWYoaCl7dmFyIHY9bihyKTtyZXR1cm4gbDwwPyhjLnB1c2godiksYyk6KCh1PW9bbF0pLmNoaWxkcmVuLnB1c2godiksYyl9aWYoZiYmKGwrKyxcInRhZ1wiPT09KGE9bihyKSkudHlwZSYmdC5jb21wb25lbnRzW2EubmFtZV0mJihhLnR5cGU9XCJjb21wb25lbnRcIixtPSEwKSxhLnZvaWRFbGVtZW50fHxtfHwhZHx8XCI8XCI9PT1kfHxhLmNoaWxkcmVuLnB1c2goe3R5cGU6XCJ0ZXh0XCIsY29udGVudDplLnNsaWNlKHAsZS5pbmRleE9mKFwiPFwiLHApKX0pLDA9PT1sJiZjLnB1c2goYSksKHU9b1tsLTFdKSYmdS5jaGlsZHJlbi5wdXNoKGEpLG9bbF09YSksKCFmfHxhLnZvaWRFbGVtZW50KSYmKGw+LTEmJihhLnZvaWRFbGVtZW50fHxhLm5hbWU9PT1yLnNsaWNlKDIsLTEpKSYmKGwtLSxhPS0xPT09bD9jOm9bbF0pLCFtJiZcIjxcIiE9PWQmJmQpKXt1PS0xPT09bD9jOm9bbF0uY2hpbGRyZW47dmFyIHg9ZS5pbmRleE9mKFwiPFwiLHApLGc9ZS5zbGljZShwLC0xPT09eD92b2lkIDA6eCk7aS50ZXN0KGcpJiYoZz1cIiBcIiksKHg+LTEmJmwrdS5sZW5ndGg+PTB8fFwiIFwiIT09ZykmJnUucHVzaCh7dHlwZTpcInRleHRcIixjb250ZW50Omd9KX19KSxjfSxzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrYShcIlwiLHQpfSxcIlwiKX19O2V4cG9ydCBkZWZhdWx0IGM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1odG1sLXBhcnNlLXN0cmluZ2lmeS5tb2R1bGUuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGlzU3RyaW5nID0gb2JqID0+IHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xuY29uc3QgZGVmZXIgPSAoKSA9PiB7XG4gIGxldCByZXM7XG4gIGxldCByZWo7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgcmVzID0gcmVzb2x2ZTtcbiAgICByZWogPSByZWplY3Q7XG4gIH0pO1xuICBwcm9taXNlLnJlc29sdmUgPSByZXM7XG4gIHByb21pc2UucmVqZWN0ID0gcmVqO1xuICByZXR1cm4gcHJvbWlzZTtcbn07XG5jb25zdCBtYWtlU3RyaW5nID0gb2JqZWN0ID0+IHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gJyc7XG4gIHJldHVybiAnJyArIG9iamVjdDtcbn07XG5jb25zdCBjb3B5ID0gKGEsIHMsIHQpID0+IHtcbiAgYS5mb3JFYWNoKG0gPT4ge1xuICAgIGlmIChzW21dKSB0W21dID0gc1ttXTtcbiAgfSk7XG59O1xuY29uc3QgbGFzdE9mUGF0aFNlcGFyYXRvclJlZ0V4cCA9IC8jIyMvZztcbmNvbnN0IGNsZWFuS2V5ID0ga2V5ID0+IGtleSAmJiBrZXkuaW5kZXhPZignIyMjJykgPiAtMSA/IGtleS5yZXBsYWNlKGxhc3RPZlBhdGhTZXBhcmF0b3JSZWdFeHAsICcuJykgOiBrZXk7XG5jb25zdCBjYW5Ob3RUcmF2ZXJzZURlZXBlciA9IG9iamVjdCA9PiAhb2JqZWN0IHx8IGlzU3RyaW5nKG9iamVjdCk7XG5jb25zdCBnZXRMYXN0T2ZQYXRoID0gKG9iamVjdCwgcGF0aCwgRW1wdHkpID0+IHtcbiAgY29uc3Qgc3RhY2sgPSAhaXNTdHJpbmcocGF0aCkgPyBwYXRoIDogcGF0aC5zcGxpdCgnLicpO1xuICBsZXQgc3RhY2tJbmRleCA9IDA7XG4gIHdoaWxlIChzdGFja0luZGV4IDwgc3RhY2subGVuZ3RoIC0gMSkge1xuICAgIGlmIChjYW5Ob3RUcmF2ZXJzZURlZXBlcihvYmplY3QpKSByZXR1cm4ge307XG4gICAgY29uc3Qga2V5ID0gY2xlYW5LZXkoc3RhY2tbc3RhY2tJbmRleF0pO1xuICAgIGlmICghb2JqZWN0W2tleV0gJiYgRW1wdHkpIG9iamVjdFtrZXldID0gbmV3IEVtcHR5KCk7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmplY3QgPSB7fTtcbiAgICB9XG4gICAgKytzdGFja0luZGV4O1xuICB9XG4gIGlmIChjYW5Ob3RUcmF2ZXJzZURlZXBlcihvYmplY3QpKSByZXR1cm4ge307XG4gIHJldHVybiB7XG4gICAgb2JqOiBvYmplY3QsXG4gICAgazogY2xlYW5LZXkoc3RhY2tbc3RhY2tJbmRleF0pXG4gIH07XG59O1xuY29uc3Qgc2V0UGF0aCA9IChvYmplY3QsIHBhdGgsIG5ld1ZhbHVlKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBvYmosXG4gICAga1xuICB9ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgsIE9iamVjdCk7XG4gIGlmIChvYmogIT09IHVuZGVmaW5lZCB8fCBwYXRoLmxlbmd0aCA9PT0gMSkge1xuICAgIG9ialtrXSA9IG5ld1ZhbHVlO1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgZSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgbGV0IHAgPSBwYXRoLnNsaWNlKDAsIHBhdGgubGVuZ3RoIC0gMSk7XG4gIGxldCBsYXN0ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHAsIE9iamVjdCk7XG4gIHdoaWxlIChsYXN0Lm9iaiA9PT0gdW5kZWZpbmVkICYmIHAubGVuZ3RoKSB7XG4gICAgZSA9IGAke3BbcC5sZW5ndGggLSAxXX0uJHtlfWA7XG4gICAgcCA9IHAuc2xpY2UoMCwgcC5sZW5ndGggLSAxKTtcbiAgICBsYXN0ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHAsIE9iamVjdCk7XG4gICAgaWYgKGxhc3QgJiYgbGFzdC5vYmogJiYgdHlwZW9mIGxhc3Qub2JqW2Ake2xhc3Qua30uJHtlfWBdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbGFzdC5vYmogPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG4gIGxhc3Qub2JqW2Ake2xhc3Qua30uJHtlfWBdID0gbmV3VmFsdWU7XG59O1xuY29uc3QgcHVzaFBhdGggPSAob2JqZWN0LCBwYXRoLCBuZXdWYWx1ZSwgY29uY2F0KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBvYmosXG4gICAga1xuICB9ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgsIE9iamVjdCk7XG4gIG9ialtrXSA9IG9ialtrXSB8fCBbXTtcbiAgb2JqW2tdLnB1c2gobmV3VmFsdWUpO1xufTtcbmNvbnN0IGdldFBhdGggPSAob2JqZWN0LCBwYXRoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBvYmosXG4gICAga1xuICB9ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgpO1xuICBpZiAoIW9iaikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgcmV0dXJuIG9ialtrXTtcbn07XG5jb25zdCBnZXRQYXRoV2l0aERlZmF1bHRzID0gKGRhdGEsIGRlZmF1bHREYXRhLCBrZXkpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBnZXRQYXRoKGRhdGEsIGtleSk7XG4gIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiBnZXRQYXRoKGRlZmF1bHREYXRhLCBrZXkpO1xufTtcbmNvbnN0IGRlZXBFeHRlbmQgPSAodGFyZ2V0LCBzb3VyY2UsIG92ZXJ3cml0ZSkgPT4ge1xuICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XG4gICAgaWYgKHByb3AgIT09ICdfX3Byb3RvX18nICYmIHByb3AgIT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgIGlmIChwcm9wIGluIHRhcmdldCkge1xuICAgICAgICBpZiAoaXNTdHJpbmcodGFyZ2V0W3Byb3BdKSB8fCB0YXJnZXRbcHJvcF0gaW5zdGFuY2VvZiBTdHJpbmcgfHwgaXNTdHJpbmcoc291cmNlW3Byb3BdKSB8fCBzb3VyY2VbcHJvcF0gaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgICBpZiAob3ZlcndyaXRlKSB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSwgb3ZlcndyaXRlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcbmNvbnN0IHJlZ2V4RXNjYXBlID0gc3RyID0+IHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgJ1xcXFwkJicpO1xudmFyIF9lbnRpdHlNYXAgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmIzM5OycsXG4gICcvJzogJyYjeDJGOydcbn07XG5jb25zdCBlc2NhcGUgPSBkYXRhID0+IHtcbiAgaWYgKGlzU3RyaW5nKGRhdGEpKSB7XG4gICAgcmV0dXJuIGRhdGEucmVwbGFjZSgvWyY8PlwiJ1xcL10vZywgcyA9PiBfZW50aXR5TWFwW3NdKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn07XG5jbGFzcyBSZWdFeHBDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKGNhcGFjaXR5KSB7XG4gICAgdGhpcy5jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgIHRoaXMucmVnRXhwTWFwID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVnRXhwUXVldWUgPSBbXTtcbiAgfVxuICBnZXRSZWdFeHAocGF0dGVybikge1xuICAgIGNvbnN0IHJlZ0V4cEZyb21DYWNoZSA9IHRoaXMucmVnRXhwTWFwLmdldChwYXR0ZXJuKTtcbiAgICBpZiAocmVnRXhwRnJvbUNhY2hlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiByZWdFeHBGcm9tQ2FjaGU7XG4gICAgfVxuICAgIGNvbnN0IHJlZ0V4cE5ldyA9IG5ldyBSZWdFeHAocGF0dGVybik7XG4gICAgaWYgKHRoaXMucmVnRXhwUXVldWUubGVuZ3RoID09PSB0aGlzLmNhcGFjaXR5KSB7XG4gICAgICB0aGlzLnJlZ0V4cE1hcC5kZWxldGUodGhpcy5yZWdFeHBRdWV1ZS5zaGlmdCgpKTtcbiAgICB9XG4gICAgdGhpcy5yZWdFeHBNYXAuc2V0KHBhdHRlcm4sIHJlZ0V4cE5ldyk7XG4gICAgdGhpcy5yZWdFeHBRdWV1ZS5wdXNoKHBhdHRlcm4pO1xuICAgIHJldHVybiByZWdFeHBOZXc7XG4gIH1cbn1cbmNvbnN0IGNoYXJzID0gWycgJywgJywnLCAnPycsICchJywgJzsnXTtcbmNvbnN0IGxvb2tzTGlrZU9iamVjdFBhdGhSZWdFeHBDYWNoZSA9IG5ldyBSZWdFeHBDYWNoZSgyMCk7XG5jb25zdCBsb29rc0xpa2VPYmplY3RQYXRoID0gKGtleSwgbnNTZXBhcmF0b3IsIGtleVNlcGFyYXRvcikgPT4ge1xuICBuc1NlcGFyYXRvciA9IG5zU2VwYXJhdG9yIHx8ICcnO1xuICBrZXlTZXBhcmF0b3IgPSBrZXlTZXBhcmF0b3IgfHwgJyc7XG4gIGNvbnN0IHBvc3NpYmxlQ2hhcnMgPSBjaGFycy5maWx0ZXIoYyA9PiBuc1NlcGFyYXRvci5pbmRleE9mKGMpIDwgMCAmJiBrZXlTZXBhcmF0b3IuaW5kZXhPZihjKSA8IDApO1xuICBpZiAocG9zc2libGVDaGFycy5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xuICBjb25zdCByID0gbG9va3NMaWtlT2JqZWN0UGF0aFJlZ0V4cENhY2hlLmdldFJlZ0V4cChgKCR7cG9zc2libGVDaGFycy5tYXAoYyA9PiBjID09PSAnPycgPyAnXFxcXD8nIDogYykuam9pbignfCcpfSlgKTtcbiAgbGV0IG1hdGNoZWQgPSAhci50ZXN0KGtleSk7XG4gIGlmICghbWF0Y2hlZCkge1xuICAgIGNvbnN0IGtpID0ga2V5LmluZGV4T2Yoa2V5U2VwYXJhdG9yKTtcbiAgICBpZiAoa2kgPiAwICYmICFyLnRlc3Qoa2V5LnN1YnN0cmluZygwLCBraSkpKSB7XG4gICAgICBtYXRjaGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1hdGNoZWQ7XG59O1xuY29uc3QgZGVlcEZpbmQgPSBmdW5jdGlvbiAob2JqLCBwYXRoKSB7XG4gIGxldCBrZXlTZXBhcmF0b3IgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICcuJztcbiAgaWYgKCFvYmopIHJldHVybiB1bmRlZmluZWQ7XG4gIGlmIChvYmpbcGF0aF0pIHJldHVybiBvYmpbcGF0aF07XG4gIGNvbnN0IHRva2VucyA9IHBhdGguc3BsaXQoa2V5U2VwYXJhdG9yKTtcbiAgbGV0IGN1cnJlbnQgPSBvYmo7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDspIHtcbiAgICBpZiAoIWN1cnJlbnQgfHwgdHlwZW9mIGN1cnJlbnQgIT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBsZXQgbmV4dDtcbiAgICBsZXQgbmV4dFBhdGggPSAnJztcbiAgICBmb3IgKGxldCBqID0gaTsgaiA8IHRva2Vucy5sZW5ndGg7ICsraikge1xuICAgICAgaWYgKGogIT09IGkpIHtcbiAgICAgICAgbmV4dFBhdGggKz0ga2V5U2VwYXJhdG9yO1xuICAgICAgfVxuICAgICAgbmV4dFBhdGggKz0gdG9rZW5zW2pdO1xuICAgICAgbmV4dCA9IGN1cnJlbnRbbmV4dFBhdGhdO1xuICAgICAgaWYgKG5leHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXS5pbmRleE9mKHR5cGVvZiBuZXh0KSA+IC0xICYmIGogPCB0b2tlbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGkgKz0gaiAtIGkgKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgY3VycmVudCA9IG5leHQ7XG4gIH1cbiAgcmV0dXJuIGN1cnJlbnQ7XG59O1xuY29uc3QgZ2V0Q2xlYW5lZENvZGUgPSBjb2RlID0+IGNvZGUgJiYgY29kZS5yZXBsYWNlKCdfJywgJy0nKTtcblxuY29uc3QgY29uc29sZUxvZ2dlciA9IHtcbiAgdHlwZTogJ2xvZ2dlcicsXG4gIGxvZyhhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ2xvZycsIGFyZ3MpO1xuICB9LFxuICB3YXJuKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnd2FybicsIGFyZ3MpO1xuICB9LFxuICBlcnJvcihhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ2Vycm9yJywgYXJncyk7XG4gIH0sXG4gIG91dHB1dCh0eXBlLCBhcmdzKSB7XG4gICAgaWYgKGNvbnNvbGUgJiYgY29uc29sZVt0eXBlXSkgY29uc29sZVt0eXBlXS5hcHBseShjb25zb2xlLCBhcmdzKTtcbiAgfVxufTtcbmNsYXNzIExvZ2dlciB7XG4gIGNvbnN0cnVjdG9yKGNvbmNyZXRlTG9nZ2VyKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHRoaXMuaW5pdChjb25jcmV0ZUxvZ2dlciwgb3B0aW9ucyk7XG4gIH1cbiAgaW5pdChjb25jcmV0ZUxvZ2dlcikge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB0aGlzLnByZWZpeCA9IG9wdGlvbnMucHJlZml4IHx8ICdpMThuZXh0Oic7XG4gICAgdGhpcy5sb2dnZXIgPSBjb25jcmV0ZUxvZ2dlciB8fCBjb25zb2xlTG9nZ2VyO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5kZWJ1ZyA9IG9wdGlvbnMuZGVidWc7XG4gIH1cbiAgbG9nKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnbG9nJywgJycsIHRydWUpO1xuICB9XG4gIHdhcm4oKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ3dhcm4nLCAnJywgdHJ1ZSk7XG4gIH1cbiAgZXJyb3IoKSB7XG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICBhcmdzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ2Vycm9yJywgJycpO1xuICB9XG4gIGRlcHJlY2F0ZSgpIHtcbiAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjQpLCBfa2V5NCA9IDA7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgIGFyZ3NbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnd2FybicsICdXQVJOSU5HIERFUFJFQ0FURUQ6ICcsIHRydWUpO1xuICB9XG4gIGZvcndhcmQoYXJncywgbHZsLCBwcmVmaXgsIGRlYnVnT25seSkge1xuICAgIGlmIChkZWJ1Z09ubHkgJiYgIXRoaXMuZGVidWcpIHJldHVybiBudWxsO1xuICAgIGlmIChpc1N0cmluZyhhcmdzWzBdKSkgYXJnc1swXSA9IGAke3ByZWZpeH0ke3RoaXMucHJlZml4fSAke2FyZ3NbMF19YDtcbiAgICByZXR1cm4gdGhpcy5sb2dnZXJbbHZsXShhcmdzKTtcbiAgfVxuICBjcmVhdGUobW9kdWxlTmFtZSkge1xuICAgIHJldHVybiBuZXcgTG9nZ2VyKHRoaXMubG9nZ2VyLCB7XG4gICAgICAuLi57XG4gICAgICAgIHByZWZpeDogYCR7dGhpcy5wcmVmaXh9OiR7bW9kdWxlTmFtZX06YFxuICAgICAgfSxcbiAgICAgIC4uLnRoaXMub3B0aW9uc1xuICAgIH0pO1xuICB9XG4gIGNsb25lKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB0aGlzLm9wdGlvbnM7XG4gICAgb3B0aW9ucy5wcmVmaXggPSBvcHRpb25zLnByZWZpeCB8fCB0aGlzLnByZWZpeDtcbiAgICByZXR1cm4gbmV3IExvZ2dlcih0aGlzLmxvZ2dlciwgb3B0aW9ucyk7XG4gIH1cbn1cbnZhciBiYXNlTG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG5jbGFzcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm9ic2VydmVycyA9IHt9O1xuICB9XG4gIG9uKGV2ZW50cywgbGlzdGVuZXIpIHtcbiAgICBldmVudHMuc3BsaXQoJyAnKS5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgIGlmICghdGhpcy5vYnNlcnZlcnNbZXZlbnRdKSB0aGlzLm9ic2VydmVyc1tldmVudF0gPSBuZXcgTWFwKCk7XG4gICAgICBjb25zdCBudW1MaXN0ZW5lcnMgPSB0aGlzLm9ic2VydmVyc1tldmVudF0uZ2V0KGxpc3RlbmVyKSB8fCAwO1xuICAgICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdLnNldChsaXN0ZW5lciwgbnVtTGlzdGVuZXJzICsgMSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGlmICghdGhpcy5vYnNlcnZlcnNbZXZlbnRdKSByZXR1cm47XG4gICAgaWYgKCFsaXN0ZW5lcikge1xuICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdLmRlbGV0ZShsaXN0ZW5lcik7XG4gIH1cbiAgZW1pdChldmVudCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cbiAgICBpZiAodGhpcy5vYnNlcnZlcnNbZXZlbnRdKSB7XG4gICAgICBjb25zdCBjbG9uZWQgPSBBcnJheS5mcm9tKHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5lbnRyaWVzKCkpO1xuICAgICAgY2xvbmVkLmZvckVhY2goX3JlZiA9PiB7XG4gICAgICAgIGxldCBbb2JzZXJ2ZXIsIG51bVRpbWVzQWRkZWRdID0gX3JlZjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1UaW1lc0FkZGVkOyBpKyspIHtcbiAgICAgICAgICBvYnNlcnZlciguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLm9ic2VydmVyc1snKiddKSB7XG4gICAgICBjb25zdCBjbG9uZWQgPSBBcnJheS5mcm9tKHRoaXMub2JzZXJ2ZXJzWycqJ10uZW50cmllcygpKTtcbiAgICAgIGNsb25lZC5mb3JFYWNoKF9yZWYyID0+IHtcbiAgICAgICAgbGV0IFtvYnNlcnZlciwgbnVtVGltZXNBZGRlZF0gPSBfcmVmMjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1UaW1lc0FkZGVkOyBpKyspIHtcbiAgICAgICAgICBvYnNlcnZlci5hcHBseShvYnNlcnZlciwgW2V2ZW50LCAuLi5hcmdzXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBSZXNvdXJjZVN0b3JlIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7XG4gICAgICBuczogWyd0cmFuc2xhdGlvbiddLFxuICAgICAgZGVmYXVsdE5TOiAndHJhbnNsYXRpb24nXG4gICAgfTtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZGF0YSA9IGRhdGEgfHwge307XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICBpZiAodGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yID0gJy4nO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBhZGROYW1lc3BhY2VzKG5zKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKG5zKSA8IDApIHtcbiAgICAgIHRoaXMub3B0aW9ucy5ucy5wdXNoKG5zKTtcbiAgICB9XG4gIH1cbiAgcmVtb3ZlTmFtZXNwYWNlcyhucykge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5vcHRpb25zLm5zLmluZGV4T2YobnMpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLm9wdGlvbnMubnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cbiAgZ2V0UmVzb3VyY2UobG5nLCBucywga2V5KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleVNlcGFyYXRvciA6IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgY29uc3QgaWdub3JlSlNPTlN0cnVjdHVyZSA9IG9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlIDogdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmU7XG4gICAgbGV0IHBhdGg7XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXRoID0gW2xuZywgbnNdO1xuICAgICAgaWYgKGtleSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShrZXkpKSB7XG4gICAgICAgICAgcGF0aC5wdXNoKC4uLmtleSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcoa2V5KSAmJiBrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgICBwYXRoLnB1c2goLi4ua2V5LnNwbGl0KGtleVNlcGFyYXRvcikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGgucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGdldFBhdGgodGhpcy5kYXRhLCBwYXRoKTtcbiAgICBpZiAoIXJlc3VsdCAmJiAhbnMgJiYgIWtleSAmJiBsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIGxuZyA9IHBhdGhbMF07XG4gICAgICBucyA9IHBhdGhbMV07XG4gICAgICBrZXkgPSBwYXRoLnNsaWNlKDIpLmpvaW4oJy4nKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdCB8fCAhaWdub3JlSlNPTlN0cnVjdHVyZSB8fCAhaXNTdHJpbmcoa2V5KSkgcmV0dXJuIHJlc3VsdDtcbiAgICByZXR1cm4gZGVlcEZpbmQodGhpcy5kYXRhICYmIHRoaXMuZGF0YVtsbmddICYmIHRoaXMuZGF0YVtsbmddW25zXSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICB9XG4gIGFkZFJlc291cmNlKGxuZywgbnMsIGtleSwgdmFsdWUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge1xuICAgICAgc2lsZW50OiBmYWxzZVxuICAgIH07XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBsZXQgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICBpZiAoa2V5KSBwYXRoID0gcGF0aC5jb25jYXQoa2V5U2VwYXJhdG9yID8ga2V5LnNwbGl0KGtleVNlcGFyYXRvcikgOiBrZXkpO1xuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICAgIHZhbHVlID0gbnM7XG4gICAgICBucyA9IHBhdGhbMV07XG4gICAgfVxuICAgIHRoaXMuYWRkTmFtZXNwYWNlcyhucyk7XG4gICAgc2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgsIHZhbHVlKTtcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywga2V5LCB2YWx1ZSk7XG4gIH1cbiAgYWRkUmVzb3VyY2VzKGxuZywgbnMsIHJlc291cmNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7XG4gICAgICBzaWxlbnQ6IGZhbHNlXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IG0gaW4gcmVzb3VyY2VzKSB7XG4gICAgICBpZiAoaXNTdHJpbmcocmVzb3VyY2VzW21dKSB8fCBBcnJheS5pc0FycmF5KHJlc291cmNlc1ttXSkpIHRoaXMuYWRkUmVzb3VyY2UobG5nLCBucywgbSwgcmVzb3VyY2VzW21dLCB7XG4gICAgICAgIHNpbGVudDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCByZXNvdXJjZXMpO1xuICB9XG4gIGFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIHJlc291cmNlcywgZGVlcCwgb3ZlcndyaXRlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IHtcbiAgICAgIHNpbGVudDogZmFsc2UsXG4gICAgICBza2lwQ29weTogZmFsc2VcbiAgICB9O1xuICAgIGxldCBwYXRoID0gW2xuZywgbnNdO1xuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICAgIGRlZXAgPSByZXNvdXJjZXM7XG4gICAgICByZXNvdXJjZXMgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG4gICAgdGhpcy5hZGROYW1lc3BhY2VzKG5zKTtcbiAgICBsZXQgcGFjayA9IGdldFBhdGgodGhpcy5kYXRhLCBwYXRoKSB8fCB7fTtcbiAgICBpZiAoIW9wdGlvbnMuc2tpcENvcHkpIHJlc291cmNlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzb3VyY2VzKSk7XG4gICAgaWYgKGRlZXApIHtcbiAgICAgIGRlZXBFeHRlbmQocGFjaywgcmVzb3VyY2VzLCBvdmVyd3JpdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWNrID0ge1xuICAgICAgICAuLi5wYWNrLFxuICAgICAgICAuLi5yZXNvdXJjZXNcbiAgICAgIH07XG4gICAgfVxuICAgIHNldFBhdGgodGhpcy5kYXRhLCBwYXRoLCBwYWNrKTtcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywgcmVzb3VyY2VzKTtcbiAgfVxuICByZW1vdmVSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgaWYgKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbbG5nXVtuc107XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlTmFtZXNwYWNlcyhucyk7XG4gICAgdGhpcy5lbWl0KCdyZW1vdmVkJywgbG5nLCBucyk7XG4gIH1cbiAgaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpICE9PSB1bmRlZmluZWQ7XG4gIH1cbiAgZ2V0UmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIGlmICghbnMpIG5zID0gdGhpcy5vcHRpb25zLmRlZmF1bHROUztcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgPT09ICd2MScpIHJldHVybiB7XG4gICAgICAuLi57fSxcbiAgICAgIC4uLnRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucylcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpO1xuICB9XG4gIGdldERhdGFCeUxhbmd1YWdlKGxuZykge1xuICAgIHJldHVybiB0aGlzLmRhdGFbbG5nXTtcbiAgfVxuICBoYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMobG5nKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YUJ5TGFuZ3VhZ2UobG5nKTtcbiAgICBjb25zdCBuID0gZGF0YSAmJiBPYmplY3Qua2V5cyhkYXRhKSB8fCBbXTtcbiAgICByZXR1cm4gISFuLmZpbmQodiA9PiBkYXRhW3ZdICYmIE9iamVjdC5rZXlzKGRhdGFbdl0pLmxlbmd0aCA+IDApO1xuICB9XG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9XG59XG5cbnZhciBwb3N0UHJvY2Vzc29yID0ge1xuICBwcm9jZXNzb3JzOiB7fSxcbiAgYWRkUG9zdFByb2Nlc3Nvcihtb2R1bGUpIHtcbiAgICB0aGlzLnByb2Nlc3NvcnNbbW9kdWxlLm5hbWVdID0gbW9kdWxlO1xuICB9LFxuICBoYW5kbGUocHJvY2Vzc29ycywgdmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcikge1xuICAgIHByb2Nlc3NvcnMuZm9yRWFjaChwcm9jZXNzb3IgPT4ge1xuICAgICAgaWYgKHRoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdKSB2YWx1ZSA9IHRoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdLnByb2Nlc3ModmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59O1xuXG5jb25zdCBjaGVja2VkTG9hZGVkRm9yID0ge307XG5jbGFzcyBUcmFuc2xhdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3Ioc2VydmljZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgc3VwZXIoKTtcbiAgICBjb3B5KFsncmVzb3VyY2VTdG9yZScsICdsYW5ndWFnZVV0aWxzJywgJ3BsdXJhbFJlc29sdmVyJywgJ2ludGVycG9sYXRvcicsICdiYWNrZW5kQ29ubmVjdG9yJywgJ2kxOG5Gb3JtYXQnLCAndXRpbHMnXSwgc2VydmljZXMsIHRoaXMpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciA9ICcuJztcbiAgICB9XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgndHJhbnNsYXRvcicpO1xuICB9XG4gIGNoYW5nZUxhbmd1YWdlKGxuZykge1xuICAgIGlmIChsbmcpIHRoaXMubGFuZ3VhZ2UgPSBsbmc7XG4gIH1cbiAgZXhpc3RzKGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7XG4gICAgICBpbnRlcnBvbGF0aW9uOiB7fVxuICAgIH07XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkIHx8IGtleSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZShrZXksIG9wdGlvbnMpO1xuICAgIHJldHVybiByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXMgIT09IHVuZGVmaW5lZDtcbiAgfVxuICBleHRyYWN0RnJvbUtleShrZXksIG9wdGlvbnMpIHtcbiAgICBsZXQgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zU2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLm5zU2VwYXJhdG9yO1xuICAgIGlmIChuc1NlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSBuc1NlcGFyYXRvciA9ICc6JztcbiAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGxldCBuYW1lc3BhY2VzID0gb3B0aW9ucy5ucyB8fCB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TIHx8IFtdO1xuICAgIGNvbnN0IHdvdWxkQ2hlY2tGb3JOc0luS2V5ID0gbnNTZXBhcmF0b3IgJiYga2V5LmluZGV4T2YobnNTZXBhcmF0b3IpID4gLTE7XG4gICAgY29uc3Qgc2VlbXNOYXR1cmFsTGFuZ3VhZ2UgPSAhdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yICYmICFvcHRpb25zLmtleVNlcGFyYXRvciAmJiAhdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkTnNTZXBhcmF0b3IgJiYgIW9wdGlvbnMubnNTZXBhcmF0b3IgJiYgIWxvb2tzTGlrZU9iamVjdFBhdGgoa2V5LCBuc1NlcGFyYXRvciwga2V5U2VwYXJhdG9yKTtcbiAgICBpZiAod291bGRDaGVja0Zvck5zSW5LZXkgJiYgIXNlZW1zTmF0dXJhbExhbmd1YWdlKSB7XG4gICAgICBjb25zdCBtID0ga2V5Lm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgaWYgKG0gJiYgbS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIG5hbWVzcGFjZXM6IGlzU3RyaW5nKG5hbWVzcGFjZXMpID8gW25hbWVzcGFjZXNdIDogbmFtZXNwYWNlc1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgcGFydHMgPSBrZXkuc3BsaXQobnNTZXBhcmF0b3IpO1xuICAgICAgaWYgKG5zU2VwYXJhdG9yICE9PSBrZXlTZXBhcmF0b3IgfHwgbnNTZXBhcmF0b3IgPT09IGtleVNlcGFyYXRvciAmJiB0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihwYXJ0c1swXSkgPiAtMSkgbmFtZXNwYWNlcyA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgICBrZXkgPSBwYXJ0cy5qb2luKGtleVNlcGFyYXRvcik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBrZXksXG4gICAgICBuYW1lc3BhY2VzOiBpc1N0cmluZyhuYW1lc3BhY2VzKSA/IFtuYW1lc3BhY2VzXSA6IG5hbWVzcGFjZXNcbiAgICB9O1xuICB9XG4gIHRyYW5zbGF0ZShrZXlzLCBvcHRpb25zLCBsYXN0S2V5KSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JyAmJiB0aGlzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIpIHtcbiAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoYXJndW1lbnRzKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykgb3B0aW9ucyA9IHtcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICAgIGlmIChrZXlzID09PSB1bmRlZmluZWQgfHwga2V5cyA9PT0gbnVsbCkgcmV0dXJuICcnO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShrZXlzKSkga2V5cyA9IFtTdHJpbmcoa2V5cyldO1xuICAgIGNvbnN0IHJldHVybkRldGFpbHMgPSBvcHRpb25zLnJldHVybkRldGFpbHMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucmV0dXJuRGV0YWlscyA6IHRoaXMub3B0aW9ucy5yZXR1cm5EZXRhaWxzO1xuICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleVNlcGFyYXRvciA6IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgY29uc3Qge1xuICAgICAga2V5LFxuICAgICAgbmFtZXNwYWNlc1xuICAgIH0gPSB0aGlzLmV4dHJhY3RGcm9tS2V5KGtleXNba2V5cy5sZW5ndGggLSAxXSwgb3B0aW9ucyk7XG4gICAgY29uc3QgbmFtZXNwYWNlID0gbmFtZXNwYWNlc1tuYW1lc3BhY2VzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGxuZyA9IG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2U7XG4gICAgY29uc3QgYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUgPSBvcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlIHx8IHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZTtcbiAgICBpZiAobG5nICYmIGxuZy50b0xvd2VyQ2FzZSgpID09PSAnY2ltb2RlJykge1xuICAgICAgaWYgKGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlKSB7XG4gICAgICAgIGNvbnN0IG5zU2VwYXJhdG9yID0gb3B0aW9ucy5uc1NlcGFyYXRvciB8fCB0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7XG4gICAgICAgIGlmIChyZXR1cm5EZXRhaWxzKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlczogYCR7bmFtZXNwYWNlfSR7bnNTZXBhcmF0b3J9JHtrZXl9YCxcbiAgICAgICAgICAgIHVzZWRLZXk6IGtleSxcbiAgICAgICAgICAgIGV4YWN0VXNlZEtleToga2V5LFxuICAgICAgICAgICAgdXNlZExuZzogbG5nLFxuICAgICAgICAgICAgdXNlZE5TOiBuYW1lc3BhY2UsXG4gICAgICAgICAgICB1c2VkUGFyYW1zOiB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7bmFtZXNwYWNlfSR7bnNTZXBhcmF0b3J9JHtrZXl9YDtcbiAgICAgIH1cbiAgICAgIGlmIChyZXR1cm5EZXRhaWxzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVzOiBrZXksXG4gICAgICAgICAgdXNlZEtleToga2V5LFxuICAgICAgICAgIGV4YWN0VXNlZEtleToga2V5LFxuICAgICAgICAgIHVzZWRMbmc6IGxuZyxcbiAgICAgICAgICB1c2VkTlM6IG5hbWVzcGFjZSxcbiAgICAgICAgICB1c2VkUGFyYW1zOiB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZShrZXlzLCBvcHRpb25zKTtcbiAgICBsZXQgcmVzID0gcmVzb2x2ZWQgJiYgcmVzb2x2ZWQucmVzO1xuICAgIGNvbnN0IHJlc1VzZWRLZXkgPSByZXNvbHZlZCAmJiByZXNvbHZlZC51c2VkS2V5IHx8IGtleTtcbiAgICBjb25zdCByZXNFeGFjdFVzZWRLZXkgPSByZXNvbHZlZCAmJiByZXNvbHZlZC5leGFjdFVzZWRLZXkgfHwga2V5O1xuICAgIGNvbnN0IHJlc1R5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHJlcyk7XG4gICAgY29uc3Qgbm9PYmplY3QgPSBbJ1tvYmplY3QgTnVtYmVyXScsICdbb2JqZWN0IEZ1bmN0aW9uXScsICdbb2JqZWN0IFJlZ0V4cF0nXTtcbiAgICBjb25zdCBqb2luQXJyYXlzID0gb3B0aW9ucy5qb2luQXJyYXlzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmpvaW5BcnJheXMgOiB0aGlzLm9wdGlvbnMuam9pbkFycmF5cztcbiAgICBjb25zdCBoYW5kbGVBc09iamVjdEluSTE4bkZvcm1hdCA9ICF0aGlzLmkxOG5Gb3JtYXQgfHwgdGhpcy5pMThuRm9ybWF0LmhhbmRsZUFzT2JqZWN0O1xuICAgIGNvbnN0IGhhbmRsZUFzT2JqZWN0ID0gIWlzU3RyaW5nKHJlcykgJiYgdHlwZW9mIHJlcyAhPT0gJ2Jvb2xlYW4nICYmIHR5cGVvZiByZXMgIT09ICdudW1iZXInO1xuICAgIGlmIChoYW5kbGVBc09iamVjdEluSTE4bkZvcm1hdCAmJiByZXMgJiYgaGFuZGxlQXNPYmplY3QgJiYgbm9PYmplY3QuaW5kZXhPZihyZXNUeXBlKSA8IDAgJiYgIShpc1N0cmluZyhqb2luQXJyYXlzKSAmJiBBcnJheS5pc0FycmF5KHJlcykpKSB7XG4gICAgICBpZiAoIW9wdGlvbnMucmV0dXJuT2JqZWN0cyAmJiAhdGhpcy5vcHRpb25zLnJldHVybk9iamVjdHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2FybignYWNjZXNzaW5nIGFuIG9iamVjdCAtIGJ1dCByZXR1cm5PYmplY3RzIG9wdGlvbnMgaXMgbm90IGVuYWJsZWQhJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIgPyB0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyKHJlc1VzZWRLZXksIHJlcywge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgbnM6IG5hbWVzcGFjZXNcbiAgICAgICAgfSkgOiBga2V5ICcke2tleX0gKCR7dGhpcy5sYW5ndWFnZX0pJyByZXR1cm5lZCBhbiBvYmplY3QgaW5zdGVhZCBvZiBzdHJpbmcuYDtcbiAgICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgICByZXNvbHZlZC5yZXMgPSByO1xuICAgICAgICAgIHJlc29sdmVkLnVzZWRQYXJhbXMgPSB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpO1xuICAgICAgICAgIHJldHVybiByZXNvbHZlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgY29uc3QgcmVzVHlwZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KHJlcyk7XG4gICAgICAgIGNvbnN0IGNvcHkgPSByZXNUeXBlSXNBcnJheSA/IFtdIDoge307XG4gICAgICAgIGNvbnN0IG5ld0tleVRvVXNlID0gcmVzVHlwZUlzQXJyYXkgPyByZXNFeGFjdFVzZWRLZXkgOiByZXNVc2VkS2V5O1xuICAgICAgICBmb3IgKGNvbnN0IG0gaW4gcmVzKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXMsIG0pKSB7XG4gICAgICAgICAgICBjb25zdCBkZWVwS2V5ID0gYCR7bmV3S2V5VG9Vc2V9JHtrZXlTZXBhcmF0b3J9JHttfWA7XG4gICAgICAgICAgICBjb3B5W21dID0gdGhpcy50cmFuc2xhdGUoZGVlcEtleSwge1xuICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAuLi57XG4gICAgICAgICAgICAgICAgam9pbkFycmF5czogZmFsc2UsXG4gICAgICAgICAgICAgICAgbnM6IG5hbWVzcGFjZXNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29weVttXSA9PT0gZGVlcEtleSkgY29weVttXSA9IHJlc1ttXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzID0gY29weTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ICYmIGlzU3RyaW5nKGpvaW5BcnJheXMpICYmIEFycmF5LmlzQXJyYXkocmVzKSkge1xuICAgICAgcmVzID0gcmVzLmpvaW4oam9pbkFycmF5cyk7XG4gICAgICBpZiAocmVzKSByZXMgPSB0aGlzLmV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5cywgb3B0aW9ucywgbGFzdEtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB1c2VkRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgbGV0IHVzZWRLZXkgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG5lZWRzUGx1cmFsSGFuZGxpbmcgPSBvcHRpb25zLmNvdW50ICE9PSB1bmRlZmluZWQgJiYgIWlzU3RyaW5nKG9wdGlvbnMuY291bnQpO1xuICAgICAgY29uc3QgaGFzRGVmYXVsdFZhbHVlID0gVHJhbnNsYXRvci5oYXNEZWZhdWx0VmFsdWUob3B0aW9ucyk7XG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWVTdWZmaXggPSBuZWVkc1BsdXJhbEhhbmRsaW5nID8gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgobG5nLCBvcHRpb25zLmNvdW50LCBvcHRpb25zKSA6ICcnO1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlU3VmZml4T3JkaW5hbEZhbGxiYWNrID0gb3B0aW9ucy5vcmRpbmFsICYmIG5lZWRzUGx1cmFsSGFuZGxpbmcgPyB0aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChsbmcsIG9wdGlvbnMuY291bnQsIHtcbiAgICAgICAgb3JkaW5hbDogZmFsc2VcbiAgICAgIH0pIDogJyc7XG4gICAgICBjb25zdCBuZWVkc1plcm9TdWZmaXhMb29rdXAgPSBuZWVkc1BsdXJhbEhhbmRsaW5nICYmICFvcHRpb25zLm9yZGluYWwgJiYgb3B0aW9ucy5jb3VudCA9PT0gMCAmJiB0aGlzLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKTtcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG5lZWRzWmVyb1N1ZmZpeExvb2t1cCAmJiBvcHRpb25zW2BkZWZhdWx0VmFsdWUke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2BdIHx8IG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7ZGVmYXVsdFZhbHVlU3VmZml4fWBdIHx8IG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7ZGVmYXVsdFZhbHVlU3VmZml4T3JkaW5hbEZhbGxiYWNrfWBdIHx8IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAocmVzKSAmJiBoYXNEZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdXNlZERlZmF1bHQgPSB0cnVlO1xuICAgICAgICByZXMgPSBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuaXNWYWxpZExvb2t1cChyZXMpKSB7XG4gICAgICAgIHVzZWRLZXkgPSB0cnVlO1xuICAgICAgICByZXMgPSBrZXk7XG4gICAgICB9XG4gICAgICBjb25zdCBtaXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXkgPSBvcHRpb25zLm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSB8fCB0aGlzLm9wdGlvbnMubWlzc2luZ0tleU5vVmFsdWVGYWxsYmFja1RvS2V5O1xuICAgICAgY29uc3QgcmVzRm9yTWlzc2luZyA9IG1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSAmJiB1c2VkS2V5ID8gdW5kZWZpbmVkIDogcmVzO1xuICAgICAgY29uc3QgdXBkYXRlTWlzc2luZyA9IGhhc0RlZmF1bHRWYWx1ZSAmJiBkZWZhdWx0VmFsdWUgIT09IHJlcyAmJiB0aGlzLm9wdGlvbnMudXBkYXRlTWlzc2luZztcbiAgICAgIGlmICh1c2VkS2V5IHx8IHVzZWREZWZhdWx0IHx8IHVwZGF0ZU1pc3NpbmcpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKHVwZGF0ZU1pc3NpbmcgPyAndXBkYXRlS2V5JyA6ICdtaXNzaW5nS2V5JywgbG5nLCBuYW1lc3BhY2UsIGtleSwgdXBkYXRlTWlzc2luZyA/IGRlZmF1bHRWYWx1ZSA6IHJlcyk7XG4gICAgICAgIGlmIChrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgICBjb25zdCBmayA9IHRoaXMucmVzb2x2ZShrZXksIHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBrZXlTZXBhcmF0b3I6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGZrICYmIGZrLnJlcykgdGhpcy5sb2dnZXIud2FybignU2VlbXMgdGhlIGxvYWRlZCB0cmFuc2xhdGlvbnMgd2VyZSBpbiBmbGF0IEpTT04gZm9ybWF0IGluc3RlYWQgb2YgbmVzdGVkLiBFaXRoZXIgc2V0IGtleVNlcGFyYXRvcjogZmFsc2Ugb24gaW5pdCBvciBtYWtlIHN1cmUgeW91ciB0cmFuc2xhdGlvbnMgYXJlIHB1Ymxpc2hlZCBpbiBuZXN0ZWQgZm9ybWF0LicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsbmdzID0gW107XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrTG5ncyA9IHRoaXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZywgb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2ZhbGxiYWNrJyAmJiBmYWxsYmFja0xuZ3MgJiYgZmFsbGJhY2tMbmdzWzBdKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmYWxsYmFja0xuZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxuZ3MucHVzaChmYWxsYmFja0xuZ3NbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICBsbmdzID0gdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsbmdzLnB1c2gob3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VuZCA9IChsLCBrLCBzcGVjaWZpY0RlZmF1bHRWYWx1ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmF1bHRGb3JNaXNzaW5nID0gaGFzRGVmYXVsdFZhbHVlICYmIHNwZWNpZmljRGVmYXVsdFZhbHVlICE9PSByZXMgPyBzcGVjaWZpY0RlZmF1bHRWYWx1ZSA6IHJlc0Zvck1pc3Npbmc7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5taXNzaW5nS2V5SGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKGwsIG5hbWVzcGFjZSwgaywgZGVmYXVsdEZvck1pc3NpbmcsIHVwZGF0ZU1pc3NpbmcsIG9wdGlvbnMpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5iYWNrZW5kQ29ubmVjdG9yICYmIHRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZykge1xuICAgICAgICAgICAgdGhpcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKGwsIG5hbWVzcGFjZSwgaywgZGVmYXVsdEZvck1pc3NpbmcsIHVwZGF0ZU1pc3NpbmcsIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmVtaXQoJ21pc3NpbmdLZXknLCBsLCBuYW1lc3BhY2UsIGssIHJlcyk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmcpIHtcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNhdmVNaXNzaW5nUGx1cmFscyAmJiBuZWVkc1BsdXJhbEhhbmRsaW5nKSB7XG4gICAgICAgICAgICBsbmdzLmZvckVhY2gobGFuZ3VhZ2UgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBzdWZmaXhlcyA9IHRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4ZXMobGFuZ3VhZ2UsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICBpZiAobmVlZHNaZXJvU3VmZml4TG9va3VwICYmIG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYF0gJiYgc3VmZml4ZXMuaW5kZXhPZihgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gKSA8IDApIHtcbiAgICAgICAgICAgICAgICBzdWZmaXhlcy5wdXNoKGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN1ZmZpeGVzLmZvckVhY2goc3VmZml4ID0+IHtcbiAgICAgICAgICAgICAgICBzZW5kKFtsYW5ndWFnZV0sIGtleSArIHN1ZmZpeCwgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHtzdWZmaXh9YF0gfHwgZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VuZChsbmdzLCBrZXksIGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXMgPSB0aGlzLmV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5cywgb3B0aW9ucywgcmVzb2x2ZWQsIGxhc3RLZXkpO1xuICAgICAgaWYgKHVzZWRLZXkgJiYgcmVzID09PSBrZXkgJiYgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSkgcmVzID0gYCR7bmFtZXNwYWNlfToke2tleX1gO1xuICAgICAgaWYgKCh1c2VkS2V5IHx8IHVzZWREZWZhdWx0KSAmJiB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcikge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScpIHtcbiAgICAgICAgICByZXMgPSB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5ID8gYCR7bmFtZXNwYWNlfToke2tleX1gIDoga2V5LCB1c2VkRGVmYXVsdCA/IHJlcyA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzID0gdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIocmVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmV0dXJuRGV0YWlscykge1xuICAgICAgcmVzb2x2ZWQucmVzID0gcmVzO1xuICAgICAgcmVzb2x2ZWQudXNlZFBhcmFtcyA9IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXksIG9wdGlvbnMsIHJlc29sdmVkLCBsYXN0S2V5KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBpZiAodGhpcy5pMThuRm9ybWF0ICYmIHRoaXMuaTE4bkZvcm1hdC5wYXJzZSkge1xuICAgICAgcmVzID0gdGhpcy5pMThuRm9ybWF0LnBhcnNlKHJlcywge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzLFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9LCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlIHx8IHJlc29sdmVkLnVzZWRMbmcsIHJlc29sdmVkLnVzZWROUywgcmVzb2x2ZWQudXNlZEtleSwge1xuICAgICAgICByZXNvbHZlZFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghb3B0aW9ucy5za2lwSW50ZXJwb2xhdGlvbikge1xuICAgICAgaWYgKG9wdGlvbnMuaW50ZXJwb2xhdGlvbikgdGhpcy5pbnRlcnBvbGF0b3IuaW5pdCh7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIC4uLntcbiAgICAgICAgICBpbnRlcnBvbGF0aW9uOiB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbixcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaW50ZXJwb2xhdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBza2lwT25WYXJpYWJsZXMgPSBpc1N0cmluZyhyZXMpICYmIChvcHRpb25zICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzIDogdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzKTtcbiAgICAgIGxldCBuZXN0QmVmO1xuICAgICAgaWYgKHNraXBPblZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBuYiA9IHJlcy5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtcbiAgICAgICAgbmVzdEJlZiA9IG5iICYmIG5iLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGxldCBkYXRhID0gb3B0aW9ucy5yZXBsYWNlICYmICFpc1N0cmluZyhvcHRpb25zLnJlcGxhY2UpID8gb3B0aW9ucy5yZXBsYWNlIDogb3B0aW9ucztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzKSBkYXRhID0ge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzLFxuICAgICAgICAuLi5kYXRhXG4gICAgICB9O1xuICAgICAgcmVzID0gdGhpcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUocmVzLCBkYXRhLCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlIHx8IHJlc29sdmVkLnVzZWRMbmcsIG9wdGlvbnMpO1xuICAgICAgaWYgKHNraXBPblZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBuYSA9IHJlcy5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtcbiAgICAgICAgY29uc3QgbmVzdEFmdCA9IG5hICYmIG5hLmxlbmd0aDtcbiAgICAgICAgaWYgKG5lc3RCZWYgPCBuZXN0QWZ0KSBvcHRpb25zLm5lc3QgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghb3B0aW9ucy5sbmcgJiYgdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScgJiYgcmVzb2x2ZWQgJiYgcmVzb2x2ZWQucmVzKSBvcHRpb25zLmxuZyA9IHRoaXMubGFuZ3VhZ2UgfHwgcmVzb2x2ZWQudXNlZExuZztcbiAgICAgIGlmIChvcHRpb25zLm5lc3QgIT09IGZhbHNlKSByZXMgPSB0aGlzLmludGVycG9sYXRvci5uZXN0KHJlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0S2V5ICYmIGxhc3RLZXlbMF0gPT09IGFyZ3NbMF0gJiYgIW9wdGlvbnMuY29udGV4dCkge1xuICAgICAgICAgIF90aGlzLmxvZ2dlci53YXJuKGBJdCBzZWVtcyB5b3UgYXJlIG5lc3RpbmcgcmVjdXJzaXZlbHkga2V5OiAke2FyZ3NbMF19IGluIGtleTogJHtrZXlbMF19YCk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzLnRyYW5zbGF0ZSguLi5hcmdzLCBrZXkpO1xuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICBpZiAob3B0aW9ucy5pbnRlcnBvbGF0aW9uKSB0aGlzLmludGVycG9sYXRvci5yZXNldCgpO1xuICAgIH1cbiAgICBjb25zdCBwb3N0UHJvY2VzcyA9IG9wdGlvbnMucG9zdFByb2Nlc3MgfHwgdGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzO1xuICAgIGNvbnN0IHBvc3RQcm9jZXNzb3JOYW1lcyA9IGlzU3RyaW5nKHBvc3RQcm9jZXNzKSA/IFtwb3N0UHJvY2Vzc10gOiBwb3N0UHJvY2VzcztcbiAgICBpZiAocmVzICE9PSB1bmRlZmluZWQgJiYgcmVzICE9PSBudWxsICYmIHBvc3RQcm9jZXNzb3JOYW1lcyAmJiBwb3N0UHJvY2Vzc29yTmFtZXMubGVuZ3RoICYmIG9wdGlvbnMuYXBwbHlQb3N0UHJvY2Vzc29yICE9PSBmYWxzZSkge1xuICAgICAgcmVzID0gcG9zdFByb2Nlc3Nvci5oYW5kbGUocG9zdFByb2Nlc3Nvck5hbWVzLCByZXMsIGtleSwgdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5wb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZCA/IHtcbiAgICAgICAgaTE4blJlc29sdmVkOiB7XG4gICAgICAgICAgLi4ucmVzb2x2ZWQsXG4gICAgICAgICAgdXNlZFBhcmFtczogdGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhvcHRpb25zKVxuICAgICAgICB9LFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9IDogb3B0aW9ucywgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgcmVzb2x2ZShrZXlzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGxldCBmb3VuZDtcbiAgICBsZXQgdXNlZEtleTtcbiAgICBsZXQgZXhhY3RVc2VkS2V5O1xuICAgIGxldCB1c2VkTG5nO1xuICAgIGxldCB1c2VkTlM7XG4gICAgaWYgKGlzU3RyaW5nKGtleXMpKSBrZXlzID0gW2tleXNdO1xuICAgIGtleXMuZm9yRWFjaChrID0+IHtcbiAgICAgIGlmICh0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG4gICAgICBjb25zdCBleHRyYWN0ZWQgPSB0aGlzLmV4dHJhY3RGcm9tS2V5KGssIG9wdGlvbnMpO1xuICAgICAgY29uc3Qga2V5ID0gZXh0cmFjdGVkLmtleTtcbiAgICAgIHVzZWRLZXkgPSBrZXk7XG4gICAgICBsZXQgbmFtZXNwYWNlcyA9IGV4dHJhY3RlZC5uYW1lc3BhY2VzO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5mYWxsYmFja05TKSBuYW1lc3BhY2VzID0gbmFtZXNwYWNlcy5jb25jYXQodGhpcy5vcHRpb25zLmZhbGxiYWNrTlMpO1xuICAgICAgY29uc3QgbmVlZHNQbHVyYWxIYW5kbGluZyA9IG9wdGlvbnMuY291bnQgIT09IHVuZGVmaW5lZCAmJiAhaXNTdHJpbmcob3B0aW9ucy5jb3VudCk7XG4gICAgICBjb25zdCBuZWVkc1plcm9TdWZmaXhMb29rdXAgPSBuZWVkc1BsdXJhbEhhbmRsaW5nICYmICFvcHRpb25zLm9yZGluYWwgJiYgb3B0aW9ucy5jb3VudCA9PT0gMCAmJiB0aGlzLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKTtcbiAgICAgIGNvbnN0IG5lZWRzQ29udGV4dEhhbmRsaW5nID0gb3B0aW9ucy5jb250ZXh0ICE9PSB1bmRlZmluZWQgJiYgKGlzU3RyaW5nKG9wdGlvbnMuY29udGV4dCkgfHwgdHlwZW9mIG9wdGlvbnMuY29udGV4dCA9PT0gJ251bWJlcicpICYmIG9wdGlvbnMuY29udGV4dCAhPT0gJyc7XG4gICAgICBjb25zdCBjb2RlcyA9IG9wdGlvbnMubG5ncyA/IG9wdGlvbnMubG5ncyA6IHRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkob3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSwgb3B0aW9ucy5mYWxsYmFja0xuZyk7XG4gICAgICBuYW1lc3BhY2VzLmZvckVhY2gobnMgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuICAgICAgICB1c2VkTlMgPSBucztcbiAgICAgICAgaWYgKCFjaGVja2VkTG9hZGVkRm9yW2Ake2NvZGVzWzBdfS0ke25zfWBdICYmIHRoaXMudXRpbHMgJiYgdGhpcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UgJiYgIXRoaXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlKHVzZWROUykpIHtcbiAgICAgICAgICBjaGVja2VkTG9hZGVkRm9yW2Ake2NvZGVzWzBdfS0ke25zfWBdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBrZXkgXCIke3VzZWRLZXl9XCIgZm9yIGxhbmd1YWdlcyBcIiR7Y29kZXMuam9pbignLCAnKX1cIiB3b24ndCBnZXQgcmVzb2x2ZWQgYXMgbmFtZXNwYWNlIFwiJHt1c2VkTlN9XCIgd2FzIG5vdCB5ZXQgbG9hZGVkYCwgJ1RoaXMgbWVhbnMgc29tZXRoaW5nIElTIFdST05HIGluIHlvdXIgc2V0dXAuIFlvdSBhY2Nlc3MgdGhlIHQgZnVuY3Rpb24gYmVmb3JlIGkxOG5leHQuaW5pdCAvIGkxOG5leHQubG9hZE5hbWVzcGFjZSAvIGkxOG5leHQuY2hhbmdlTGFuZ3VhZ2Ugd2FzIGRvbmUuIFdhaXQgZm9yIHRoZSBjYWxsYmFjayBvciBQcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlIGFjY2Vzc2luZyBpdCEhIScpO1xuICAgICAgICB9XG4gICAgICAgIGNvZGVzLmZvckVhY2goY29kZSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHJldHVybjtcbiAgICAgICAgICB1c2VkTG5nID0gY29kZTtcbiAgICAgICAgICBjb25zdCBmaW5hbEtleXMgPSBba2V5XTtcbiAgICAgICAgICBpZiAodGhpcy5pMThuRm9ybWF0ICYmIHRoaXMuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKSB7XG4gICAgICAgICAgICB0aGlzLmkxOG5Gb3JtYXQuYWRkTG9va3VwS2V5cyhmaW5hbEtleXMsIGtleSwgY29kZSwgbnMsIG9wdGlvbnMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgcGx1cmFsU3VmZml4O1xuICAgICAgICAgICAgaWYgKG5lZWRzUGx1cmFsSGFuZGxpbmcpIHBsdXJhbFN1ZmZpeCA9IHRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KGNvZGUsIG9wdGlvbnMuY291bnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgemVyb1N1ZmZpeCA9IGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2A7XG4gICAgICAgICAgICBjb25zdCBvcmRpbmFsUHJlZml4ID0gYCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn1vcmRpbmFsJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfWA7XG4gICAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykge1xuICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChrZXkgKyBwbHVyYWxTdWZmaXgpO1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vcmRpbmFsICYmIHBsdXJhbFN1ZmZpeC5pbmRleE9mKG9yZGluYWxQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZmluYWxLZXlzLnB1c2goa2V5ICsgcGx1cmFsU3VmZml4LnJlcGxhY2Uob3JkaW5hbFByZWZpeCwgdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcikpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChuZWVkc1plcm9TdWZmaXhMb29rdXApIHtcbiAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChrZXkgKyB6ZXJvU3VmZml4KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5lZWRzQ29udGV4dEhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRLZXkgPSBgJHtrZXl9JHt0aGlzLm9wdGlvbnMuY29udGV4dFNlcGFyYXRvcn0ke29wdGlvbnMuY29udGV4dH1gO1xuICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChjb250ZXh0S2V5KTtcbiAgICAgICAgICAgICAgaWYgKG5lZWRzUGx1cmFsSGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChjb250ZXh0S2V5ICsgcGx1cmFsU3VmZml4KTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vcmRpbmFsICYmIHBsdXJhbFN1ZmZpeC5pbmRleE9mKG9yZGluYWxQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChjb250ZXh0S2V5ICsgcGx1cmFsU3VmZml4LnJlcGxhY2Uob3JkaW5hbFByZWZpeCwgdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmVlZHNaZXJvU3VmZml4TG9va3VwKSB7XG4gICAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChjb250ZXh0S2V5ICsgemVyb1N1ZmZpeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBwb3NzaWJsZUtleTtcbiAgICAgICAgICB3aGlsZSAocG9zc2libGVLZXkgPSBmaW5hbEtleXMucG9wKCkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkge1xuICAgICAgICAgICAgICBleGFjdFVzZWRLZXkgPSBwb3NzaWJsZUtleTtcbiAgICAgICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlc291cmNlKGNvZGUsIG5zLCBwb3NzaWJsZUtleSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICByZXM6IGZvdW5kLFxuICAgICAgdXNlZEtleSxcbiAgICAgIGV4YWN0VXNlZEtleSxcbiAgICAgIHVzZWRMbmcsXG4gICAgICB1c2VkTlNcbiAgICB9O1xuICB9XG4gIGlzVmFsaWRMb29rdXAocmVzKSB7XG4gICAgcmV0dXJuIHJlcyAhPT0gdW5kZWZpbmVkICYmICEoIXRoaXMub3B0aW9ucy5yZXR1cm5OdWxsICYmIHJlcyA9PT0gbnVsbCkgJiYgISghdGhpcy5vcHRpb25zLnJldHVybkVtcHR5U3RyaW5nICYmIHJlcyA9PT0gJycpO1xuICB9XG4gIGdldFJlc291cmNlKGNvZGUsIG5zLCBrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gICAgaWYgKHRoaXMuaTE4bkZvcm1hdCAmJiB0aGlzLmkxOG5Gb3JtYXQuZ2V0UmVzb3VyY2UpIHJldHVybiB0aGlzLmkxOG5Gb3JtYXQuZ2V0UmVzb3VyY2UoY29kZSwgbnMsIGtleSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2VTdG9yZS5nZXRSZXNvdXJjZShjb2RlLCBucywga2V5LCBvcHRpb25zKTtcbiAgfVxuICBnZXRVc2VkUGFyYW1zRGV0YWlscygpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgY29uc3Qgb3B0aW9uc0tleXMgPSBbJ2RlZmF1bHRWYWx1ZScsICdvcmRpbmFsJywgJ2NvbnRleHQnLCAncmVwbGFjZScsICdsbmcnLCAnbG5ncycsICdmYWxsYmFja0xuZycsICducycsICdrZXlTZXBhcmF0b3InLCAnbnNTZXBhcmF0b3InLCAncmV0dXJuT2JqZWN0cycsICdyZXR1cm5EZXRhaWxzJywgJ2pvaW5BcnJheXMnLCAncG9zdFByb2Nlc3MnLCAnaW50ZXJwb2xhdGlvbiddO1xuICAgIGNvbnN0IHVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSA9IG9wdGlvbnMucmVwbGFjZSAmJiAhaXNTdHJpbmcob3B0aW9ucy5yZXBsYWNlKTtcbiAgICBsZXQgZGF0YSA9IHVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSA/IG9wdGlvbnMucmVwbGFjZSA6IG9wdGlvbnM7XG4gICAgaWYgKHVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSAmJiB0eXBlb2Ygb3B0aW9ucy5jb3VudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuY291bnQgPSBvcHRpb25zLmNvdW50O1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcykge1xuICAgICAgZGF0YSA9IHtcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyxcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCF1c2VPcHRpb25zUmVwbGFjZUZvckRhdGEpIHtcbiAgICAgIGRhdGEgPSB7XG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH07XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBvcHRpb25zS2V5cykge1xuICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBzdGF0aWMgaGFzRGVmYXVsdFZhbHVlKG9wdGlvbnMpIHtcbiAgICBjb25zdCBwcmVmaXggPSAnZGVmYXVsdFZhbHVlJztcbiAgICBmb3IgKGNvbnN0IG9wdGlvbiBpbiBvcHRpb25zKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIG9wdGlvbikgJiYgcHJlZml4ID09PSBvcHRpb24uc3Vic3RyaW5nKDAsIHByZWZpeC5sZW5ndGgpICYmIHVuZGVmaW5lZCAhPT0gb3B0aW9uc1tvcHRpb25dKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuY29uc3QgY2FwaXRhbGl6ZSA9IHN0cmluZyA9PiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XG5jbGFzcyBMYW5ndWFnZVV0aWwge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLnN1cHBvcnRlZExuZ3MgPSB0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncyB8fCBmYWxzZTtcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdsYW5ndWFnZVV0aWxzJyk7XG4gIH1cbiAgZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpIHtcbiAgICBjb2RlID0gZ2V0Q2xlYW5lZENvZGUoY29kZSk7XG4gICAgaWYgKCFjb2RlIHx8IGNvZGUuaW5kZXhPZignLScpIDwgMCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcCA9IGNvZGUuc3BsaXQoJy0nKTtcbiAgICBpZiAocC5sZW5ndGggPT09IDIpIHJldHVybiBudWxsO1xuICAgIHAucG9wKCk7XG4gICAgaWYgKHBbcC5sZW5ndGggLSAxXS50b0xvd2VyQ2FzZSgpID09PSAneCcpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShwLmpvaW4oJy0nKSk7XG4gIH1cbiAgZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSkge1xuICAgIGNvZGUgPSBnZXRDbGVhbmVkQ29kZShjb2RlKTtcbiAgICBpZiAoIWNvZGUgfHwgY29kZS5pbmRleE9mKCctJykgPCAwKSByZXR1cm4gY29kZTtcbiAgICBjb25zdCBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgIHJldHVybiB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShwWzBdKTtcbiAgfVxuICBmb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkge1xuICAgIGlmIChpc1N0cmluZyhjb2RlKSAmJiBjb2RlLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICBpZiAodHlwZW9mIEludGwgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBJbnRsLmdldENhbm9uaWNhbExvY2FsZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGV0IGZvcm1hdHRlZENvZGUgPSBJbnRsLmdldENhbm9uaWNhbExvY2FsZXMoY29kZSlbMF07XG4gICAgICAgICAgaWYgKGZvcm1hdHRlZENvZGUgJiYgdGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZykge1xuICAgICAgICAgICAgZm9ybWF0dGVkQ29kZSA9IGZvcm1hdHRlZENvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZvcm1hdHRlZENvZGUpIHJldHVybiBmb3JtYXR0ZWRDb2RlO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlY2lhbENhc2VzID0gWydoYW5zJywgJ2hhbnQnLCAnbGF0bicsICdjeXJsJywgJ2NhbnMnLCAnbW9uZycsICdhcmFiJ107XG4gICAgICBsZXQgcCA9IGNvZGUuc3BsaXQoJy0nKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG93ZXJDYXNlTG5nKSB7XG4gICAgICAgIHAgPSBwLm1hcChwYXJ0ID0+IHBhcnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICB9IGVsc2UgaWYgKHAubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHBbMF0gPSBwWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHBbMV0gPSBwWzFdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzFdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMV0gPSBjYXBpdGFsaXplKHBbMV0udG9Mb3dlckNhc2UoKSk7XG4gICAgICB9IGVsc2UgaWYgKHAubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIHBbMF0gPSBwWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChwWzFdLmxlbmd0aCA9PT0gMikgcFsxXSA9IHBbMV0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKHBbMF0gIT09ICdzZ24nICYmIHBbMl0ubGVuZ3RoID09PSAyKSBwWzJdID0gcFsyXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsxXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzFdID0gY2FwaXRhbGl6ZShwWzFdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsyXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzJdID0gY2FwaXRhbGl6ZShwWzJdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHAuam9pbignLScpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsZWFuQ29kZSB8fCB0aGlzLm9wdGlvbnMubG93ZXJDYXNlTG5nID8gY29kZS50b0xvd2VyQ2FzZSgpIDogY29kZTtcbiAgfVxuICBpc1N1cHBvcnRlZENvZGUoY29kZSkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCA9PT0gJ2xhbmd1YWdlT25seScgfHwgdGhpcy5vcHRpb25zLm5vbkV4cGxpY2l0U3VwcG9ydGVkTG5ncykge1xuICAgICAgY29kZSA9IHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSk7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy5zdXBwb3J0ZWRMbmdzIHx8ICF0aGlzLnN1cHBvcnRlZExuZ3MubGVuZ3RoIHx8IHRoaXMuc3VwcG9ydGVkTG5ncy5pbmRleE9mKGNvZGUpID4gLTE7XG4gIH1cbiAgZ2V0QmVzdE1hdGNoRnJvbUNvZGVzKGNvZGVzKSB7XG4gICAgaWYgKCFjb2RlcykgcmV0dXJuIG51bGw7XG4gICAgbGV0IGZvdW5kO1xuICAgIGNvZGVzLmZvckVhY2goY29kZSA9PiB7XG4gICAgICBpZiAoZm91bmQpIHJldHVybjtcbiAgICAgIGNvbnN0IGNsZWFuZWRMbmcgPSB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKTtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MgfHwgdGhpcy5pc1N1cHBvcnRlZENvZGUoY2xlYW5lZExuZykpIGZvdW5kID0gY2xlYW5lZExuZztcbiAgICB9KTtcbiAgICBpZiAoIWZvdW5kICYmIHRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzKSB7XG4gICAgICBjb2Rlcy5mb3JFYWNoKGNvZGUgPT4ge1xuICAgICAgICBpZiAoZm91bmQpIHJldHVybjtcbiAgICAgICAgY29uc3QgbG5nT25seSA9IHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSk7XG4gICAgICAgIGlmICh0aGlzLmlzU3VwcG9ydGVkQ29kZShsbmdPbmx5KSkgcmV0dXJuIGZvdW5kID0gbG5nT25seTtcbiAgICAgICAgZm91bmQgPSB0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncy5maW5kKHN1cHBvcnRlZExuZyA9PiB7XG4gICAgICAgICAgaWYgKHN1cHBvcnRlZExuZyA9PT0gbG5nT25seSkgcmV0dXJuIHN1cHBvcnRlZExuZztcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nLmluZGV4T2YoJy0nKSA8IDAgJiYgbG5nT25seS5pbmRleE9mKCctJykgPCAwKSByZXR1cm47XG4gICAgICAgICAgaWYgKHN1cHBvcnRlZExuZy5pbmRleE9mKCctJykgPiAwICYmIGxuZ09ubHkuaW5kZXhPZignLScpIDwgMCAmJiBzdXBwb3J0ZWRMbmcuc3Vic3RyaW5nKDAsIHN1cHBvcnRlZExuZy5pbmRleE9mKCctJykpID09PSBsbmdPbmx5KSByZXR1cm4gc3VwcG9ydGVkTG5nO1xuICAgICAgICAgIGlmIChzdXBwb3J0ZWRMbmcuaW5kZXhPZihsbmdPbmx5KSA9PT0gMCAmJiBsbmdPbmx5Lmxlbmd0aCA+IDEpIHJldHVybiBzdXBwb3J0ZWRMbmc7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghZm91bmQpIGZvdW5kID0gdGhpcy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZylbMF07XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG4gIGdldEZhbGxiYWNrQ29kZXMoZmFsbGJhY2tzLCBjb2RlKSB7XG4gICAgaWYgKCFmYWxsYmFja3MpIHJldHVybiBbXTtcbiAgICBpZiAodHlwZW9mIGZhbGxiYWNrcyA9PT0gJ2Z1bmN0aW9uJykgZmFsbGJhY2tzID0gZmFsbGJhY2tzKGNvZGUpO1xuICAgIGlmIChpc1N0cmluZyhmYWxsYmFja3MpKSBmYWxsYmFja3MgPSBbZmFsbGJhY2tzXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmYWxsYmFja3MpKSByZXR1cm4gZmFsbGJhY2tzO1xuICAgIGlmICghY29kZSkgcmV0dXJuIGZhbGxiYWNrcy5kZWZhdWx0IHx8IFtdO1xuICAgIGxldCBmb3VuZCA9IGZhbGxiYWNrc1tjb2RlXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3NbdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSldO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzW3RoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSldO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzLmRlZmF1bHQ7XG4gICAgcmV0dXJuIGZvdW5kIHx8IFtdO1xuICB9XG4gIHRvUmVzb2x2ZUhpZXJhcmNoeShjb2RlLCBmYWxsYmFja0NvZGUpIHtcbiAgICBjb25zdCBmYWxsYmFja0NvZGVzID0gdGhpcy5nZXRGYWxsYmFja0NvZGVzKGZhbGxiYWNrQ29kZSB8fCB0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcgfHwgW10sIGNvZGUpO1xuICAgIGNvbnN0IGNvZGVzID0gW107XG4gICAgY29uc3QgYWRkQ29kZSA9IGMgPT4ge1xuICAgICAgaWYgKCFjKSByZXR1cm47XG4gICAgICBpZiAodGhpcy5pc1N1cHBvcnRlZENvZGUoYykpIHtcbiAgICAgICAgY29kZXMucHVzaChjKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYHJlamVjdGluZyBsYW5ndWFnZSBjb2RlIG5vdCBmb3VuZCBpbiBzdXBwb3J0ZWRMbmdzOiAke2N9YCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoaXNTdHJpbmcoY29kZSkgJiYgKGNvZGUuaW5kZXhPZignLScpID4gLTEgfHwgY29kZS5pbmRleE9mKCdfJykgPiAtMSkpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2xhbmd1YWdlT25seScpIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnbGFuZ3VhZ2VPbmx5JyAmJiB0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2N1cnJlbnRPbmx5JykgYWRkQ29kZSh0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdjdXJyZW50T25seScpIGFkZENvZGUodGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSk7XG4gICAgfSBlbHNlIGlmIChpc1N0cmluZyhjb2RlKSkge1xuICAgICAgYWRkQ29kZSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSk7XG4gICAgfVxuICAgIGZhbGxiYWNrQ29kZXMuZm9yRWFjaChmYyA9PiB7XG4gICAgICBpZiAoY29kZXMuaW5kZXhPZihmYykgPCAwKSBhZGRDb2RlKHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGZjKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvZGVzO1xuICB9XG59XG5cbmxldCBzZXRzID0gW3tcbiAgbG5nczogWydhY2gnLCAnYWsnLCAnYW0nLCAnYXJuJywgJ2JyJywgJ2ZpbCcsICdndW4nLCAnbG4nLCAnbWZlJywgJ21nJywgJ21pJywgJ29jJywgJ3B0JywgJ3B0LUJSJywgJ3RnJywgJ3RsJywgJ3RpJywgJ3RyJywgJ3V6JywgJ3dhJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAxXG59LCB7XG4gIGxuZ3M6IFsnYWYnLCAnYW4nLCAnYXN0JywgJ2F6JywgJ2JnJywgJ2JuJywgJ2NhJywgJ2RhJywgJ2RlJywgJ2RldicsICdlbCcsICdlbicsICdlbycsICdlcycsICdldCcsICdldScsICdmaScsICdmbycsICdmdXInLCAnZnknLCAnZ2wnLCAnZ3UnLCAnaGEnLCAnaGknLCAnaHUnLCAnaHknLCAnaWEnLCAnaXQnLCAna2snLCAna24nLCAna3UnLCAnbGInLCAnbWFpJywgJ21sJywgJ21uJywgJ21yJywgJ25haCcsICduYXAnLCAnbmInLCAnbmUnLCAnbmwnLCAnbm4nLCAnbm8nLCAnbnNvJywgJ3BhJywgJ3BhcCcsICdwbXMnLCAncHMnLCAncHQtUFQnLCAncm0nLCAnc2NvJywgJ3NlJywgJ3NpJywgJ3NvJywgJ3NvbicsICdzcScsICdzdicsICdzdycsICd0YScsICd0ZScsICd0aycsICd1cicsICd5byddLFxuICBucjogWzEsIDJdLFxuICBmYzogMlxufSwge1xuICBsbmdzOiBbJ2F5JywgJ2JvJywgJ2NnZycsICdmYScsICdodCcsICdpZCcsICdqYScsICdqYm8nLCAna2EnLCAna20nLCAna28nLCAna3knLCAnbG8nLCAnbXMnLCAnc2FoJywgJ3N1JywgJ3RoJywgJ3R0JywgJ3VnJywgJ3ZpJywgJ3dvJywgJ3poJ10sXG4gIG5yOiBbMV0sXG4gIGZjOiAzXG59LCB7XG4gIGxuZ3M6IFsnYmUnLCAnYnMnLCAnY25yJywgJ2R6JywgJ2hyJywgJ3J1JywgJ3NyJywgJ3VrJ10sXG4gIG5yOiBbMSwgMiwgNV0sXG4gIGZjOiA0XG59LCB7XG4gIGxuZ3M6IFsnYXInXSxcbiAgbnI6IFswLCAxLCAyLCAzLCAxMSwgMTAwXSxcbiAgZmM6IDVcbn0sIHtcbiAgbG5nczogWydjcycsICdzayddLFxuICBucjogWzEsIDIsIDVdLFxuICBmYzogNlxufSwge1xuICBsbmdzOiBbJ2NzYicsICdwbCddLFxuICBucjogWzEsIDIsIDVdLFxuICBmYzogN1xufSwge1xuICBsbmdzOiBbJ2N5J10sXG4gIG5yOiBbMSwgMiwgMywgOF0sXG4gIGZjOiA4XG59LCB7XG4gIGxuZ3M6IFsnZnInXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDlcbn0sIHtcbiAgbG5nczogWydnYSddLFxuICBucjogWzEsIDIsIDMsIDcsIDExXSxcbiAgZmM6IDEwXG59LCB7XG4gIGxuZ3M6IFsnZ2QnXSxcbiAgbnI6IFsxLCAyLCAzLCAyMF0sXG4gIGZjOiAxMVxufSwge1xuICBsbmdzOiBbJ2lzJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAxMlxufSwge1xuICBsbmdzOiBbJ2p2J10sXG4gIG5yOiBbMCwgMV0sXG4gIGZjOiAxM1xufSwge1xuICBsbmdzOiBbJ2t3J10sXG4gIG5yOiBbMSwgMiwgMywgNF0sXG4gIGZjOiAxNFxufSwge1xuICBsbmdzOiBbJ2x0J10sXG4gIG5yOiBbMSwgMiwgMTBdLFxuICBmYzogMTVcbn0sIHtcbiAgbG5nczogWydsdiddLFxuICBucjogWzEsIDIsIDBdLFxuICBmYzogMTZcbn0sIHtcbiAgbG5nczogWydtayddLFxuICBucjogWzEsIDJdLFxuICBmYzogMTdcbn0sIHtcbiAgbG5nczogWydtbmsnXSxcbiAgbnI6IFswLCAxLCAyXSxcbiAgZmM6IDE4XG59LCB7XG4gIGxuZ3M6IFsnbXQnXSxcbiAgbnI6IFsxLCAyLCAxMSwgMjBdLFxuICBmYzogMTlcbn0sIHtcbiAgbG5nczogWydvciddLFxuICBucjogWzIsIDFdLFxuICBmYzogMlxufSwge1xuICBsbmdzOiBbJ3JvJ10sXG4gIG5yOiBbMSwgMiwgMjBdLFxuICBmYzogMjBcbn0sIHtcbiAgbG5nczogWydzbCddLFxuICBucjogWzUsIDEsIDIsIDNdLFxuICBmYzogMjFcbn0sIHtcbiAgbG5nczogWydoZScsICdpdyddLFxuICBucjogWzEsIDIsIDIwLCAyMV0sXG4gIGZjOiAyMlxufV07XG5sZXQgX3J1bGVzUGx1cmFsc1R5cGVzID0ge1xuICAxOiBuID0+IE51bWJlcihuID4gMSksXG4gIDI6IG4gPT4gTnVtYmVyKG4gIT0gMSksXG4gIDM6IG4gPT4gMCxcbiAgNDogbiA9PiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICUgMTAgPj0gMiAmJiBuICUgMTAgPD0gNCAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpLFxuICA1OiBuID0+IE51bWJlcihuID09IDAgPyAwIDogbiA9PSAxID8gMSA6IG4gPT0gMiA/IDIgOiBuICUgMTAwID49IDMgJiYgbiAlIDEwMCA8PSAxMCA/IDMgOiBuICUgMTAwID49IDExID8gNCA6IDUpLFxuICA2OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA+PSAyICYmIG4gPD0gNCA/IDEgOiAyKSxcbiAgNzogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMiksXG4gIDg6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiAhPSA4ICYmIG4gIT0gMTEgPyAyIDogMyksXG4gIDk6IG4gPT4gTnVtYmVyKG4gPj0gMiksXG4gIDEwOiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IG4gPCA3ID8gMiA6IG4gPCAxMSA/IDMgOiA0KSxcbiAgMTE6IG4gPT4gTnVtYmVyKG4gPT0gMSB8fCBuID09IDExID8gMCA6IG4gPT0gMiB8fCBuID09IDEyID8gMSA6IG4gPiAyICYmIG4gPCAyMCA/IDIgOiAzKSxcbiAgMTI6IG4gPT4gTnVtYmVyKG4gJSAxMCAhPSAxIHx8IG4gJSAxMDAgPT0gMTEpLFxuICAxMzogbiA9PiBOdW1iZXIobiAhPT0gMCksXG4gIDE0OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IG4gPT0gMyA/IDIgOiAzKSxcbiAgMTU6IG4gPT4gTnVtYmVyKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogbiAlIDEwID49IDIgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKSxcbiAgMTY6IG4gPT4gTnVtYmVyKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogbiAhPT0gMCA/IDEgOiAyKSxcbiAgMTc6IG4gPT4gTnVtYmVyKG4gPT0gMSB8fCBuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IDEpLFxuICAxODogbiA9PiBOdW1iZXIobiA9PSAwID8gMCA6IG4gPT0gMSA/IDEgOiAyKSxcbiAgMTk6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDAgfHwgbiAlIDEwMCA+IDEgJiYgbiAlIDEwMCA8IDExID8gMSA6IG4gJSAxMDAgPiAxMCAmJiBuICUgMTAwIDwgMjAgPyAyIDogMyksXG4gIDIwOiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAwIHx8IG4gJSAxMDAgPiAwICYmIG4gJSAxMDAgPCAyMCA/IDEgOiAyKSxcbiAgMjE6IG4gPT4gTnVtYmVyKG4gJSAxMDAgPT0gMSA/IDEgOiBuICUgMTAwID09IDIgPyAyIDogbiAlIDEwMCA9PSAzIHx8IG4gJSAxMDAgPT0gNCA/IDMgOiAwKSxcbiAgMjI6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogKG4gPCAwIHx8IG4gPiAxMCkgJiYgbiAlIDEwID09IDAgPyAyIDogMylcbn07XG5jb25zdCBub25JbnRsVmVyc2lvbnMgPSBbJ3YxJywgJ3YyJywgJ3YzJ107XG5jb25zdCBpbnRsVmVyc2lvbnMgPSBbJ3Y0J107XG5jb25zdCBzdWZmaXhlc09yZGVyID0ge1xuICB6ZXJvOiAwLFxuICBvbmU6IDEsXG4gIHR3bzogMixcbiAgZmV3OiAzLFxuICBtYW55OiA0LFxuICBvdGhlcjogNVxufTtcbmNvbnN0IGNyZWF0ZVJ1bGVzID0gKCkgPT4ge1xuICBjb25zdCBydWxlcyA9IHt9O1xuICBzZXRzLmZvckVhY2goc2V0ID0+IHtcbiAgICBzZXQubG5ncy5mb3JFYWNoKGwgPT4ge1xuICAgICAgcnVsZXNbbF0gPSB7XG4gICAgICAgIG51bWJlcnM6IHNldC5ucixcbiAgICAgICAgcGx1cmFsczogX3J1bGVzUGx1cmFsc1R5cGVzW3NldC5mY11cbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gcnVsZXM7XG59O1xuY2xhc3MgUGx1cmFsUmVzb2x2ZXIge1xuICBjb25zdHJ1Y3RvcihsYW5ndWFnZVV0aWxzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHRoaXMubGFuZ3VhZ2VVdGlscyA9IGxhbmd1YWdlVXRpbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdwbHVyYWxSZXNvbHZlcicpO1xuICAgIGlmICgoIXRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiB8fCBpbnRsVmVyc2lvbnMuaW5jbHVkZXModGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OKSkgJiYgKHR5cGVvZiBJbnRsID09PSAndW5kZWZpbmVkJyB8fCAhSW50bC5QbHVyYWxSdWxlcykpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiA9ICd2Myc7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcignWW91ciBlbnZpcm9ubWVudCBzZWVtcyBub3QgdG8gYmUgSW50bCBBUEkgY29tcGF0aWJsZSwgdXNlIGFuIEludGwuUGx1cmFsUnVsZXMgcG9seWZpbGwuIFdpbGwgZmFsbGJhY2sgdG8gdGhlIGNvbXBhdGliaWxpdHlKU09OIHYzIGZvcm1hdCBoYW5kbGluZy4nKTtcbiAgICB9XG4gICAgdGhpcy5ydWxlcyA9IGNyZWF0ZVJ1bGVzKCk7XG4gICAgdGhpcy5wbHVyYWxSdWxlc0NhY2hlID0ge307XG4gIH1cbiAgYWRkUnVsZShsbmcsIG9iaikge1xuICAgIHRoaXMucnVsZXNbbG5nXSA9IG9iajtcbiAgfVxuICBjbGVhckNhY2hlKCkge1xuICAgIHRoaXMucGx1cmFsUnVsZXNDYWNoZSA9IHt9O1xuICB9XG4gIGdldFJ1bGUoY29kZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBpZiAodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpIHtcbiAgICAgIGNvbnN0IGNsZWFuZWRDb2RlID0gZ2V0Q2xlYW5lZENvZGUoY29kZSA9PT0gJ2RldicgPyAnZW4nIDogY29kZSk7XG4gICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy5vcmRpbmFsID8gJ29yZGluYWwnIDogJ2NhcmRpbmFsJztcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjbGVhbmVkQ29kZSxcbiAgICAgICAgdHlwZVxuICAgICAgfSk7XG4gICAgICBpZiAoY2FjaGVLZXkgaW4gdGhpcy5wbHVyYWxSdWxlc0NhY2hlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGVbY2FjaGVLZXldO1xuICAgICAgfVxuICAgICAgbGV0IHJ1bGU7XG4gICAgICB0cnkge1xuICAgICAgICBydWxlID0gbmV3IEludGwuUGx1cmFsUnVsZXMoY2xlYW5lZENvZGUsIHtcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghY29kZS5tYXRjaCgvLXxfLykpIHJldHVybjtcbiAgICAgICAgY29uc3QgbG5nUGFydCA9IHRoaXMubGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKTtcbiAgICAgICAgcnVsZSA9IHRoaXMuZ2V0UnVsZShsbmdQYXJ0LCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGx1cmFsUnVsZXNDYWNoZVtjYWNoZUtleV0gPSBydWxlO1xuICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJ1bGVzW2NvZGVdIHx8IHRoaXMucnVsZXNbdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpXTtcbiAgfVxuICBuZWVkc1BsdXJhbChjb2RlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKSB7XG4gICAgICByZXR1cm4gcnVsZSAmJiBydWxlLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMubGVuZ3RoID4gMTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bGUgJiYgcnVsZS5udW1iZXJzLmxlbmd0aCA+IDE7XG4gIH1cbiAgZ2V0UGx1cmFsRm9ybXNPZktleShjb2RlLCBrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3VmZml4ZXMoY29kZSwgb3B0aW9ucykubWFwKHN1ZmZpeCA9PiBgJHtrZXl9JHtzdWZmaXh9YCk7XG4gIH1cbiAgZ2V0U3VmZml4ZXMoY29kZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBjb25zdCBydWxlID0gdGhpcy5nZXRSdWxlKGNvZGUsIG9wdGlvbnMpO1xuICAgIGlmICghcnVsZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpIHtcbiAgICAgIHJldHVybiBydWxlLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMuc29ydCgocGx1cmFsQ2F0ZWdvcnkxLCBwbHVyYWxDYXRlZ29yeTIpID0+IHN1ZmZpeGVzT3JkZXJbcGx1cmFsQ2F0ZWdvcnkxXSAtIHN1ZmZpeGVzT3JkZXJbcGx1cmFsQ2F0ZWdvcnkyXSkubWFwKHBsdXJhbENhdGVnb3J5ID0+IGAke3RoaXMub3B0aW9ucy5wcmVwZW5kfSR7b3B0aW9ucy5vcmRpbmFsID8gYG9yZGluYWwke3RoaXMub3B0aW9ucy5wcmVwZW5kfWAgOiAnJ30ke3BsdXJhbENhdGVnb3J5fWApO1xuICAgIH1cbiAgICByZXR1cm4gcnVsZS5udW1iZXJzLm1hcChudW1iZXIgPT4gdGhpcy5nZXRTdWZmaXgoY29kZSwgbnVtYmVyLCBvcHRpb25zKSk7XG4gIH1cbiAgZ2V0U3VmZml4KGNvZGUsIGNvdW50KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSwgb3B0aW9ucyk7XG4gICAgaWYgKHJ1bGUpIHtcbiAgICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5vcHRpb25zLnByZXBlbmR9JHtvcHRpb25zLm9yZGluYWwgPyBgb3JkaW5hbCR7dGhpcy5vcHRpb25zLnByZXBlbmR9YCA6ICcnfSR7cnVsZS5zZWxlY3QoY291bnQpfWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5nZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUocnVsZSwgY291bnQpO1xuICAgIH1cbiAgICB0aGlzLmxvZ2dlci53YXJuKGBubyBwbHVyYWwgcnVsZSBmb3VuZCBmb3I6ICR7Y29kZX1gKTtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgZ2V0U3VmZml4UmV0cm9Db21wYXRpYmxlKHJ1bGUsIGNvdW50KSB7XG4gICAgY29uc3QgaWR4ID0gcnVsZS5ub0FicyA/IHJ1bGUucGx1cmFscyhjb3VudCkgOiBydWxlLnBsdXJhbHMoTWF0aC5hYnMoY291bnQpKTtcbiAgICBsZXQgc3VmZml4ID0gcnVsZS5udW1iZXJzW2lkeF07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCAmJiBydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgaWYgKHN1ZmZpeCA9PT0gMikge1xuICAgICAgICBzdWZmaXggPSAncGx1cmFsJztcbiAgICAgIH0gZWxzZSBpZiAoc3VmZml4ID09PSAxKSB7XG4gICAgICAgIHN1ZmZpeCA9ICcnO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXR1cm5TdWZmaXggPSAoKSA9PiB0aGlzLm9wdGlvbnMucHJlcGVuZCAmJiBzdWZmaXgudG9TdHJpbmcoKSA/IHRoaXMub3B0aW9ucy5wcmVwZW5kICsgc3VmZml4LnRvU3RyaW5nKCkgOiBzdWZmaXgudG9TdHJpbmcoKTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID09PSAndjEnKSB7XG4gICAgICBpZiAoc3VmZml4ID09PSAxKSByZXR1cm4gJyc7XG4gICAgICBpZiAodHlwZW9mIHN1ZmZpeCA9PT0gJ251bWJlcicpIHJldHVybiBgX3BsdXJhbF8ke3N1ZmZpeC50b1N0cmluZygpfWA7XG4gICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gPT09ICd2MicpIHtcbiAgICAgIHJldHVybiByZXR1cm5TdWZmaXgoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCAmJiBydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnByZXBlbmQgJiYgaWR4LnRvU3RyaW5nKCkgPyB0aGlzLm9wdGlvbnMucHJlcGVuZCArIGlkeC50b1N0cmluZygpIDogaWR4LnRvU3RyaW5nKCk7XG4gIH1cbiAgc2hvdWxkVXNlSW50bEFwaSgpIHtcbiAgICByZXR1cm4gIW5vbkludGxWZXJzaW9ucy5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pO1xuICB9XG59XG5cbmNvbnN0IGRlZXBGaW5kV2l0aERlZmF1bHRzID0gZnVuY3Rpb24gKGRhdGEsIGRlZmF1bHREYXRhLCBrZXkpIHtcbiAgbGV0IGtleVNlcGFyYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJy4nO1xuICBsZXQgaWdub3JlSlNPTlN0cnVjdHVyZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogdHJ1ZTtcbiAgbGV0IHBhdGggPSBnZXRQYXRoV2l0aERlZmF1bHRzKGRhdGEsIGRlZmF1bHREYXRhLCBrZXkpO1xuICBpZiAoIXBhdGggJiYgaWdub3JlSlNPTlN0cnVjdHVyZSAmJiBpc1N0cmluZyhrZXkpKSB7XG4gICAgcGF0aCA9IGRlZXBGaW5kKGRhdGEsIGtleSwga2V5U2VwYXJhdG9yKTtcbiAgICBpZiAocGF0aCA9PT0gdW5kZWZpbmVkKSBwYXRoID0gZGVlcEZpbmQoZGVmYXVsdERhdGEsIGtleSwga2V5U2VwYXJhdG9yKTtcbiAgfVxuICByZXR1cm4gcGF0aDtcbn07XG5jb25zdCByZWdleFNhZmUgPSB2YWwgPT4gdmFsLnJlcGxhY2UoL1xcJC9nLCAnJCQkJCcpO1xuY2xhc3MgSW50ZXJwb2xhdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2ludGVycG9sYXRvcicpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5mb3JtYXQgPSBvcHRpb25zLmludGVycG9sYXRpb24gJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdCB8fCAodmFsdWUgPT4gdmFsdWUpO1xuICAgIHRoaXMuaW5pdChvcHRpb25zKTtcbiAgfVxuICBpbml0KCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBpZiAoIW9wdGlvbnMuaW50ZXJwb2xhdGlvbikgb3B0aW9ucy5pbnRlcnBvbGF0aW9uID0ge1xuICAgICAgZXNjYXBlVmFsdWU6IHRydWVcbiAgICB9O1xuICAgIGNvbnN0IHtcbiAgICAgIGVzY2FwZTogZXNjYXBlJDEsXG4gICAgICBlc2NhcGVWYWx1ZSxcbiAgICAgIHVzZVJhd1ZhbHVlVG9Fc2NhcGUsXG4gICAgICBwcmVmaXgsXG4gICAgICBwcmVmaXhFc2NhcGVkLFxuICAgICAgc3VmZml4LFxuICAgICAgc3VmZml4RXNjYXBlZCxcbiAgICAgIGZvcm1hdFNlcGFyYXRvcixcbiAgICAgIHVuZXNjYXBlU3VmZml4LFxuICAgICAgdW5lc2NhcGVQcmVmaXgsXG4gICAgICBuZXN0aW5nUHJlZml4LFxuICAgICAgbmVzdGluZ1ByZWZpeEVzY2FwZWQsXG4gICAgICBuZXN0aW5nU3VmZml4LFxuICAgICAgbmVzdGluZ1N1ZmZpeEVzY2FwZWQsXG4gICAgICBuZXN0aW5nT3B0aW9uc1NlcGFyYXRvcixcbiAgICAgIG1heFJlcGxhY2VzLFxuICAgICAgYWx3YXlzRm9ybWF0XG4gICAgfSA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbjtcbiAgICB0aGlzLmVzY2FwZSA9IGVzY2FwZSQxICE9PSB1bmRlZmluZWQgPyBlc2NhcGUkMSA6IGVzY2FwZTtcbiAgICB0aGlzLmVzY2FwZVZhbHVlID0gZXNjYXBlVmFsdWUgIT09IHVuZGVmaW5lZCA/IGVzY2FwZVZhbHVlIDogdHJ1ZTtcbiAgICB0aGlzLnVzZVJhd1ZhbHVlVG9Fc2NhcGUgPSB1c2VSYXdWYWx1ZVRvRXNjYXBlICE9PSB1bmRlZmluZWQgPyB1c2VSYXdWYWx1ZVRvRXNjYXBlIDogZmFsc2U7XG4gICAgdGhpcy5wcmVmaXggPSBwcmVmaXggPyByZWdleEVzY2FwZShwcmVmaXgpIDogcHJlZml4RXNjYXBlZCB8fCAne3snO1xuICAgIHRoaXMuc3VmZml4ID0gc3VmZml4ID8gcmVnZXhFc2NhcGUoc3VmZml4KSA6IHN1ZmZpeEVzY2FwZWQgfHwgJ319JztcbiAgICB0aGlzLmZvcm1hdFNlcGFyYXRvciA9IGZvcm1hdFNlcGFyYXRvciB8fCAnLCc7XG4gICAgdGhpcy51bmVzY2FwZVByZWZpeCA9IHVuZXNjYXBlU3VmZml4ID8gJycgOiB1bmVzY2FwZVByZWZpeCB8fCAnLSc7XG4gICAgdGhpcy51bmVzY2FwZVN1ZmZpeCA9IHRoaXMudW5lc2NhcGVQcmVmaXggPyAnJyA6IHVuZXNjYXBlU3VmZml4IHx8ICcnO1xuICAgIHRoaXMubmVzdGluZ1ByZWZpeCA9IG5lc3RpbmdQcmVmaXggPyByZWdleEVzY2FwZShuZXN0aW5nUHJlZml4KSA6IG5lc3RpbmdQcmVmaXhFc2NhcGVkIHx8IHJlZ2V4RXNjYXBlKCckdCgnKTtcbiAgICB0aGlzLm5lc3RpbmdTdWZmaXggPSBuZXN0aW5nU3VmZml4ID8gcmVnZXhFc2NhcGUobmVzdGluZ1N1ZmZpeCkgOiBuZXN0aW5nU3VmZml4RXNjYXBlZCB8fCByZWdleEVzY2FwZSgnKScpO1xuICAgIHRoaXMubmVzdGluZ09wdGlvbnNTZXBhcmF0b3IgPSBuZXN0aW5nT3B0aW9uc1NlcGFyYXRvciB8fCAnLCc7XG4gICAgdGhpcy5tYXhSZXBsYWNlcyA9IG1heFJlcGxhY2VzIHx8IDEwMDA7XG4gICAgdGhpcy5hbHdheXNGb3JtYXQgPSBhbHdheXNGb3JtYXQgIT09IHVuZGVmaW5lZCA/IGFsd2F5c0Zvcm1hdCA6IGZhbHNlO1xuICAgIHRoaXMucmVzZXRSZWdFeHAoKTtcbiAgfVxuICByZXNldCgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLmluaXQodGhpcy5vcHRpb25zKTtcbiAgfVxuICByZXNldFJlZ0V4cCgpIHtcbiAgICBjb25zdCBnZXRPclJlc2V0UmVnRXhwID0gKGV4aXN0aW5nUmVnRXhwLCBwYXR0ZXJuKSA9PiB7XG4gICAgICBpZiAoZXhpc3RpbmdSZWdFeHAgJiYgZXhpc3RpbmdSZWdFeHAuc291cmNlID09PSBwYXR0ZXJuKSB7XG4gICAgICAgIGV4aXN0aW5nUmVnRXhwLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIHJldHVybiBleGlzdGluZ1JlZ0V4cDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4sICdnJyk7XG4gICAgfTtcbiAgICB0aGlzLnJlZ2V4cCA9IGdldE9yUmVzZXRSZWdFeHAodGhpcy5yZWdleHAsIGAke3RoaXMucHJlZml4fSguKz8pJHt0aGlzLnN1ZmZpeH1gKTtcbiAgICB0aGlzLnJlZ2V4cFVuZXNjYXBlID0gZ2V0T3JSZXNldFJlZ0V4cCh0aGlzLnJlZ2V4cFVuZXNjYXBlLCBgJHt0aGlzLnByZWZpeH0ke3RoaXMudW5lc2NhcGVQcmVmaXh9KC4rPykke3RoaXMudW5lc2NhcGVTdWZmaXh9JHt0aGlzLnN1ZmZpeH1gKTtcbiAgICB0aGlzLm5lc3RpbmdSZWdleHAgPSBnZXRPclJlc2V0UmVnRXhwKHRoaXMubmVzdGluZ1JlZ2V4cCwgYCR7dGhpcy5uZXN0aW5nUHJlZml4fSguKz8pJHt0aGlzLm5lc3RpbmdTdWZmaXh9YCk7XG4gIH1cbiAgaW50ZXJwb2xhdGUoc3RyLCBkYXRhLCBsbmcsIG9wdGlvbnMpIHtcbiAgICBsZXQgbWF0Y2g7XG4gICAgbGV0IHZhbHVlO1xuICAgIGxldCByZXBsYWNlcztcbiAgICBjb25zdCBkZWZhdWx0RGF0YSA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzIHx8IHt9O1xuICAgIGNvbnN0IGhhbmRsZUZvcm1hdCA9IGtleSA9PiB7XG4gICAgICBpZiAoa2V5LmluZGV4T2YodGhpcy5mb3JtYXRTZXBhcmF0b3IpIDwgMCkge1xuICAgICAgICBjb25zdCBwYXRoID0gZGVlcEZpbmRXaXRoRGVmYXVsdHMoZGF0YSwgZGVmYXVsdERhdGEsIGtleSwgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciwgdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5hbHdheXNGb3JtYXQgPyB0aGlzLmZvcm1hdChwYXRoLCB1bmRlZmluZWQsIGxuZywge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBpbnRlcnBvbGF0aW9ua2V5OiBrZXlcbiAgICAgICAgfSkgOiBwYXRoO1xuICAgICAgfVxuICAgICAgY29uc3QgcCA9IGtleS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcik7XG4gICAgICBjb25zdCBrID0gcC5zaGlmdCgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IGYgPSBwLmpvaW4odGhpcy5mb3JtYXRTZXBhcmF0b3IpLnRyaW0oKTtcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdChkZWVwRmluZFdpdGhEZWZhdWx0cyhkYXRhLCBkZWZhdWx0RGF0YSwgaywgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciwgdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUpLCBmLCBsbmcsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgaW50ZXJwb2xhdGlvbmtleToga1xuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLnJlc2V0UmVnRXhwKCk7XG4gICAgY29uc3QgbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyID0gb3B0aW9ucyAmJiBvcHRpb25zLm1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlciB8fCB0aGlzLm9wdGlvbnMubWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyO1xuICAgIGNvbnN0IHNraXBPblZhcmlhYmxlcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgOiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXM7XG4gICAgY29uc3QgdG9kb3MgPSBbe1xuICAgICAgcmVnZXg6IHRoaXMucmVnZXhwVW5lc2NhcGUsXG4gICAgICBzYWZlVmFsdWU6IHZhbCA9PiByZWdleFNhZmUodmFsKVxuICAgIH0sIHtcbiAgICAgIHJlZ2V4OiB0aGlzLnJlZ2V4cCxcbiAgICAgIHNhZmVWYWx1ZTogdmFsID0+IHRoaXMuZXNjYXBlVmFsdWUgPyByZWdleFNhZmUodGhpcy5lc2NhcGUodmFsKSkgOiByZWdleFNhZmUodmFsKVxuICAgIH1dO1xuICAgIHRvZG9zLmZvckVhY2godG9kbyA9PiB7XG4gICAgICByZXBsYWNlcyA9IDA7XG4gICAgICB3aGlsZSAobWF0Y2ggPSB0b2RvLnJlZ2V4LmV4ZWMoc3RyKSkge1xuICAgICAgICBjb25zdCBtYXRjaGVkVmFyID0gbWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICB2YWx1ZSA9IGhhbmRsZUZvcm1hdChtYXRjaGVkVmFyKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc3QgdGVtcCA9IG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcihzdHIsIG1hdGNoLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHZhbHVlID0gaXNTdHJpbmcodGVtcCkgPyB0ZW1wIDogJyc7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvcHRpb25zLCBtYXRjaGVkVmFyKSkge1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKHNraXBPblZhcmlhYmxlcykge1xuICAgICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBtaXNzZWQgdG8gcGFzcyBpbiB2YXJpYWJsZSAke21hdGNoZWRWYXJ9IGZvciBpbnRlcnBvbGF0aW5nICR7c3RyfWApO1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaW5nKHZhbHVlKSAmJiAhdGhpcy51c2VSYXdWYWx1ZVRvRXNjYXBlKSB7XG4gICAgICAgICAgdmFsdWUgPSBtYWtlU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzYWZlVmFsdWUgPSB0b2RvLnNhZmVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG1hdGNoWzBdLCBzYWZlVmFsdWUpO1xuICAgICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgICAgdG9kby5yZWdleC5sYXN0SW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIHRvZG8ucmVnZXgubGFzdEluZGV4IC09IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2RvLnJlZ2V4Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZXMrKztcbiAgICAgICAgaWYgKHJlcGxhY2VzID49IHRoaXMubWF4UmVwbGFjZXMpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzdHI7XG4gIH1cbiAgbmVzdChzdHIsIGZjKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgdmFsdWU7XG4gICAgbGV0IGNsb25lZE9wdGlvbnM7XG4gICAgY29uc3QgaGFuZGxlSGFzT3B0aW9ucyA9IChrZXksIGluaGVyaXRlZE9wdGlvbnMpID0+IHtcbiAgICAgIGNvbnN0IHNlcCA9IHRoaXMubmVzdGluZ09wdGlvbnNTZXBhcmF0b3I7XG4gICAgICBpZiAoa2V5LmluZGV4T2Yoc2VwKSA8IDApIHJldHVybiBrZXk7XG4gICAgICBjb25zdCBjID0ga2V5LnNwbGl0KG5ldyBSZWdFeHAoYCR7c2VwfVsgXSp7YCkpO1xuICAgICAgbGV0IG9wdGlvbnNTdHJpbmcgPSBgeyR7Y1sxXX1gO1xuICAgICAga2V5ID0gY1swXTtcbiAgICAgIG9wdGlvbnNTdHJpbmcgPSB0aGlzLmludGVycG9sYXRlKG9wdGlvbnNTdHJpbmcsIGNsb25lZE9wdGlvbnMpO1xuICAgICAgY29uc3QgbWF0Y2hlZFNpbmdsZVF1b3RlcyA9IG9wdGlvbnNTdHJpbmcubWF0Y2goLycvZyk7XG4gICAgICBjb25zdCBtYXRjaGVkRG91YmxlUXVvdGVzID0gb3B0aW9uc1N0cmluZy5tYXRjaCgvXCIvZyk7XG4gICAgICBpZiAobWF0Y2hlZFNpbmdsZVF1b3RlcyAmJiBtYXRjaGVkU2luZ2xlUXVvdGVzLmxlbmd0aCAlIDIgPT09IDAgJiYgIW1hdGNoZWREb3VibGVRdW90ZXMgfHwgbWF0Y2hlZERvdWJsZVF1b3Rlcy5sZW5ndGggJSAyICE9PSAwKSB7XG4gICAgICAgIG9wdGlvbnNTdHJpbmcgPSBvcHRpb25zU3RyaW5nLnJlcGxhY2UoLycvZywgJ1wiJyk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjbG9uZWRPcHRpb25zID0gSlNPTi5wYXJzZShvcHRpb25zU3RyaW5nKTtcbiAgICAgICAgaWYgKGluaGVyaXRlZE9wdGlvbnMpIGNsb25lZE9wdGlvbnMgPSB7XG4gICAgICAgICAgLi4uaW5oZXJpdGVkT3B0aW9ucyxcbiAgICAgICAgICAuLi5jbG9uZWRPcHRpb25zXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYGZhaWxlZCBwYXJzaW5nIG9wdGlvbnMgc3RyaW5nIGluIG5lc3RpbmcgZm9yIGtleSAke2tleX1gLCBlKTtcbiAgICAgICAgcmV0dXJuIGAke2tleX0ke3NlcH0ke29wdGlvbnNTdHJpbmd9YDtcbiAgICAgIH1cbiAgICAgIGlmIChjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZSAmJiBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZS5pbmRleE9mKHRoaXMucHJlZml4KSA+IC0xKSBkZWxldGUgY2xvbmVkT3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH07XG4gICAgd2hpbGUgKG1hdGNoID0gdGhpcy5uZXN0aW5nUmVnZXhwLmV4ZWMoc3RyKSkge1xuICAgICAgbGV0IGZvcm1hdHRlcnMgPSBbXTtcbiAgICAgIGNsb25lZE9wdGlvbnMgPSB7XG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH07XG4gICAgICBjbG9uZWRPcHRpb25zID0gY2xvbmVkT3B0aW9ucy5yZXBsYWNlICYmICFpc1N0cmluZyhjbG9uZWRPcHRpb25zLnJlcGxhY2UpID8gY2xvbmVkT3B0aW9ucy5yZXBsYWNlIDogY2xvbmVkT3B0aW9ucztcbiAgICAgIGNsb25lZE9wdGlvbnMuYXBwbHlQb3N0UHJvY2Vzc29yID0gZmFsc2U7XG4gICAgICBkZWxldGUgY2xvbmVkT3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgICBsZXQgZG9SZWR1Y2UgPSBmYWxzZTtcbiAgICAgIGlmIChtYXRjaFswXS5pbmRleE9mKHRoaXMuZm9ybWF0U2VwYXJhdG9yKSAhPT0gLTEgJiYgIS97Lip9Ly50ZXN0KG1hdGNoWzFdKSkge1xuICAgICAgICBjb25zdCByID0gbWF0Y2hbMV0uc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpLm1hcChlbGVtID0+IGVsZW0udHJpbSgpKTtcbiAgICAgICAgbWF0Y2hbMV0gPSByLnNoaWZ0KCk7XG4gICAgICAgIGZvcm1hdHRlcnMgPSByO1xuICAgICAgICBkb1JlZHVjZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IGZjKGhhbmRsZUhhc09wdGlvbnMuY2FsbCh0aGlzLCBtYXRjaFsxXS50cmltKCksIGNsb25lZE9wdGlvbnMpLCBjbG9uZWRPcHRpb25zKTtcbiAgICAgIGlmICh2YWx1ZSAmJiBtYXRjaFswXSA9PT0gc3RyICYmICFpc1N0cmluZyh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgIGlmICghaXNTdHJpbmcodmFsdWUpKSB2YWx1ZSA9IG1ha2VTdHJpbmcodmFsdWUpO1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBtaXNzZWQgdG8gcmVzb2x2ZSAke21hdGNoWzFdfSBmb3IgbmVzdGluZyAke3N0cn1gKTtcbiAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmIChkb1JlZHVjZSkge1xuICAgICAgICB2YWx1ZSA9IGZvcm1hdHRlcnMucmVkdWNlKCh2LCBmKSA9PiB0aGlzLmZvcm1hdCh2LCBmLCBvcHRpb25zLmxuZywge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgaW50ZXJwb2xhdGlvbmtleTogbWF0Y2hbMV0udHJpbSgpXG4gICAgICAgIH0pLCB2YWx1ZS50cmltKCkpO1xuICAgICAgfVxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHZhbHVlKTtcbiAgICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuY29uc3QgcGFyc2VGb3JtYXRTdHIgPSBmb3JtYXRTdHIgPT4ge1xuICBsZXQgZm9ybWF0TmFtZSA9IGZvcm1hdFN0ci50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgY29uc3QgZm9ybWF0T3B0aW9ucyA9IHt9O1xuICBpZiAoZm9ybWF0U3RyLmluZGV4T2YoJygnKSA+IC0xKSB7XG4gICAgY29uc3QgcCA9IGZvcm1hdFN0ci5zcGxpdCgnKCcpO1xuICAgIGZvcm1hdE5hbWUgPSBwWzBdLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIGNvbnN0IG9wdFN0ciA9IHBbMV0uc3Vic3RyaW5nKDAsIHBbMV0ubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGZvcm1hdE5hbWUgPT09ICdjdXJyZW5jeScgJiYgb3B0U3RyLmluZGV4T2YoJzonKSA8IDApIHtcbiAgICAgIGlmICghZm9ybWF0T3B0aW9ucy5jdXJyZW5jeSkgZm9ybWF0T3B0aW9ucy5jdXJyZW5jeSA9IG9wdFN0ci50cmltKCk7XG4gICAgfSBlbHNlIGlmIChmb3JtYXROYW1lID09PSAncmVsYXRpdmV0aW1lJyAmJiBvcHRTdHIuaW5kZXhPZignOicpIDwgMCkge1xuICAgICAgaWYgKCFmb3JtYXRPcHRpb25zLnJhbmdlKSBmb3JtYXRPcHRpb25zLnJhbmdlID0gb3B0U3RyLnRyaW0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgb3B0cyA9IG9wdFN0ci5zcGxpdCgnOycpO1xuICAgICAgb3B0cy5mb3JFYWNoKG9wdCA9PiB7XG4gICAgICAgIGlmIChvcHQpIHtcbiAgICAgICAgICBjb25zdCBba2V5LCAuLi5yZXN0XSA9IG9wdC5zcGxpdCgnOicpO1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHJlc3Quam9pbignOicpLnRyaW0oKS5yZXBsYWNlKC9eJyt8JyskL2csICcnKTtcbiAgICAgICAgICBjb25zdCB0cmltbWVkS2V5ID0ga2V5LnRyaW0oKTtcbiAgICAgICAgICBpZiAoIWZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0pIGZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0gPSB2YWw7XG4gICAgICAgICAgaWYgKHZhbCA9PT0gJ2ZhbHNlJykgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IGZhbHNlO1xuICAgICAgICAgIGlmICh2YWwgPT09ICd0cnVlJykgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IHRydWU7XG4gICAgICAgICAgaWYgKCFpc05hTih2YWwpKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gcGFyc2VJbnQodmFsLCAxMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGZvcm1hdE5hbWUsXG4gICAgZm9ybWF0T3B0aW9uc1xuICB9O1xufTtcbmNvbnN0IGNyZWF0ZUNhY2hlZEZvcm1hdHRlciA9IGZuID0+IHtcbiAgY29uc3QgY2FjaGUgPSB7fTtcbiAgcmV0dXJuICh2YWwsIGxuZywgb3B0aW9ucykgPT4ge1xuICAgIGxldCBvcHRGb3JDYWNoZSA9IG9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9ua2V5ICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0gJiYgb3B0aW9uc1tvcHRpb25zLmludGVycG9sYXRpb25rZXldKSB7XG4gICAgICBvcHRGb3JDYWNoZSA9IHtcbiAgICAgICAgLi4ub3B0Rm9yQ2FjaGUsXG4gICAgICAgIFtvcHRpb25zLmludGVycG9sYXRpb25rZXldOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IGxuZyArIEpTT04uc3RyaW5naWZ5KG9wdEZvckNhY2hlKTtcbiAgICBsZXQgZm9ybWF0dGVyID0gY2FjaGVba2V5XTtcbiAgICBpZiAoIWZvcm1hdHRlcikge1xuICAgICAgZm9ybWF0dGVyID0gZm4oZ2V0Q2xlYW5lZENvZGUobG5nKSwgb3B0aW9ucyk7XG4gICAgICBjYWNoZVtrZXldID0gZm9ybWF0dGVyO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVyKHZhbCk7XG4gIH07XG59O1xuY2xhc3MgRm9ybWF0dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2Zvcm1hdHRlcicpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5mb3JtYXRzID0ge1xuICAgICAgbnVtYmVyOiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICBjdXJyZW5jeTogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG5nLCB7XG4gICAgICAgICAgLi4ub3B0LFxuICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmFsID0+IGZvcm1hdHRlci5mb3JtYXQodmFsKTtcbiAgICAgIH0pLFxuICAgICAgZGF0ZXRpbWU6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG5nLCB7XG4gICAgICAgICAgLi4ub3B0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmFsID0+IGZvcm1hdHRlci5mb3JtYXQodmFsKTtcbiAgICAgIH0pLFxuICAgICAgcmVsYXRpdmV0aW1lOiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwsIG9wdC5yYW5nZSB8fCAnZGF5Jyk7XG4gICAgICB9KSxcbiAgICAgIGxpc3Q6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTGlzdEZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSlcbiAgICB9O1xuICAgIHRoaXMuaW5pdChvcHRpb25zKTtcbiAgfVxuICBpbml0KHNlcnZpY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIGludGVycG9sYXRpb246IHt9XG4gICAgfTtcbiAgICB0aGlzLmZvcm1hdFNlcGFyYXRvciA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXRTZXBhcmF0b3IgfHwgJywnO1xuICB9XG4gIGFkZChuYW1lLCBmYykge1xuICAgIHRoaXMuZm9ybWF0c1tuYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpXSA9IGZjO1xuICB9XG4gIGFkZENhY2hlZChuYW1lLCBmYykge1xuICAgIHRoaXMuZm9ybWF0c1tuYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpXSA9IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcihmYyk7XG4gIH1cbiAgZm9ybWF0KHZhbHVlLCBmb3JtYXQsIGxuZykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBjb25zdCBmb3JtYXRzID0gZm9ybWF0LnNwbGl0KHRoaXMuZm9ybWF0U2VwYXJhdG9yKTtcbiAgICBpZiAoZm9ybWF0cy5sZW5ndGggPiAxICYmIGZvcm1hdHNbMF0uaW5kZXhPZignKCcpID4gMSAmJiBmb3JtYXRzWzBdLmluZGV4T2YoJyknKSA8IDAgJiYgZm9ybWF0cy5maW5kKGYgPT4gZi5pbmRleE9mKCcpJykgPiAtMSkpIHtcbiAgICAgIGNvbnN0IGxhc3RJbmRleCA9IGZvcm1hdHMuZmluZEluZGV4KGYgPT4gZi5pbmRleE9mKCcpJykgPiAtMSk7XG4gICAgICBmb3JtYXRzWzBdID0gW2Zvcm1hdHNbMF0sIC4uLmZvcm1hdHMuc3BsaWNlKDEsIGxhc3RJbmRleCldLmpvaW4odGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBmb3JtYXRzLnJlZHVjZSgobWVtLCBmKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGZvcm1hdE5hbWUsXG4gICAgICAgIGZvcm1hdE9wdGlvbnNcbiAgICAgIH0gPSBwYXJzZUZvcm1hdFN0cihmKTtcbiAgICAgIGlmICh0aGlzLmZvcm1hdHNbZm9ybWF0TmFtZV0pIHtcbiAgICAgICAgbGV0IGZvcm1hdHRlZCA9IG1lbTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB2YWxPcHRpb25zID0gb3B0aW9ucyAmJiBvcHRpb25zLmZvcm1hdFBhcmFtcyAmJiBvcHRpb25zLmZvcm1hdFBhcmFtc1tvcHRpb25zLmludGVycG9sYXRpb25rZXldIHx8IHt9O1xuICAgICAgICAgIGNvbnN0IGwgPSB2YWxPcHRpb25zLmxvY2FsZSB8fCB2YWxPcHRpb25zLmxuZyB8fCBvcHRpb25zLmxvY2FsZSB8fCBvcHRpb25zLmxuZyB8fCBsbmc7XG4gICAgICAgICAgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRzW2Zvcm1hdE5hbWVdKG1lbSwgbCwge1xuICAgICAgICAgICAgLi4uZm9ybWF0T3B0aW9ucyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAuLi52YWxPcHRpb25zXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2FybihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYHRoZXJlIHdhcyBubyBmb3JtYXQgZnVuY3Rpb24gZm9yICR7Zm9ybWF0TmFtZX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZW07XG4gICAgfSwgdmFsdWUpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuY29uc3QgcmVtb3ZlUGVuZGluZyA9IChxLCBuYW1lKSA9PiB7XG4gIGlmIChxLnBlbmRpbmdbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgIGRlbGV0ZSBxLnBlbmRpbmdbbmFtZV07XG4gICAgcS5wZW5kaW5nQ291bnQtLTtcbiAgfVxufTtcbmNsYXNzIENvbm5lY3RvciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKGJhY2tlbmQsIHN0b3JlLCBzZXJ2aWNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYmFja2VuZCA9IGJhY2tlbmQ7XG4gICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIHRoaXMuc2VydmljZXMgPSBzZXJ2aWNlcztcbiAgICB0aGlzLmxhbmd1YWdlVXRpbHMgPSBzZXJ2aWNlcy5sYW5ndWFnZVV0aWxzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnYmFja2VuZENvbm5lY3RvcicpO1xuICAgIHRoaXMud2FpdGluZ1JlYWRzID0gW107XG4gICAgdGhpcy5tYXhQYXJhbGxlbFJlYWRzID0gb3B0aW9ucy5tYXhQYXJhbGxlbFJlYWRzIHx8IDEwO1xuICAgIHRoaXMucmVhZGluZ0NhbGxzID0gMDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSBvcHRpb25zLm1heFJldHJpZXMgPj0gMCA/IG9wdGlvbnMubWF4UmV0cmllcyA6IDU7XG4gICAgdGhpcy5yZXRyeVRpbWVvdXQgPSBvcHRpb25zLnJldHJ5VGltZW91dCA+PSAxID8gb3B0aW9ucy5yZXRyeVRpbWVvdXQgOiAzNTA7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICBpZiAodGhpcy5iYWNrZW5kICYmIHRoaXMuYmFja2VuZC5pbml0KSB7XG4gICAgICB0aGlzLmJhY2tlbmQuaW5pdChzZXJ2aWNlcywgb3B0aW9ucy5iYWNrZW5kLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cbiAgcXVldWVMb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCB0b0xvYWQgPSB7fTtcbiAgICBjb25zdCBwZW5kaW5nID0ge307XG4gICAgY29uc3QgdG9Mb2FkTGFuZ3VhZ2VzID0ge307XG4gICAgY29uc3QgdG9Mb2FkTmFtZXNwYWNlcyA9IHt9O1xuICAgIGxhbmd1YWdlcy5mb3JFYWNoKGxuZyA9PiB7XG4gICAgICBsZXQgaGFzQWxsTmFtZXNwYWNlcyA9IHRydWU7XG4gICAgICBuYW1lc3BhY2VzLmZvckVhY2gobnMgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gYCR7bG5nfXwke25zfWA7XG4gICAgICAgIGlmICghb3B0aW9ucy5yZWxvYWQgJiYgdGhpcy5zdG9yZS5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkge1xuICAgICAgICAgIHRoaXMuc3RhdGVbbmFtZV0gPSAyO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGVbbmFtZV0gPCAwKSA7IGVsc2UgaWYgKHRoaXMuc3RhdGVbbmFtZV0gPT09IDEpIHtcbiAgICAgICAgICBpZiAocGVuZGluZ1tuYW1lXSA9PT0gdW5kZWZpbmVkKSBwZW5kaW5nW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnN0YXRlW25hbWVdID0gMTtcbiAgICAgICAgICBoYXNBbGxOYW1lc3BhY2VzID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHBlbmRpbmdbbmFtZV0gPT09IHVuZGVmaW5lZCkgcGVuZGluZ1tuYW1lXSA9IHRydWU7XG4gICAgICAgICAgaWYgKHRvTG9hZFtuYW1lXSA9PT0gdW5kZWZpbmVkKSB0b0xvYWRbbmFtZV0gPSB0cnVlO1xuICAgICAgICAgIGlmICh0b0xvYWROYW1lc3BhY2VzW25zXSA9PT0gdW5kZWZpbmVkKSB0b0xvYWROYW1lc3BhY2VzW25zXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCFoYXNBbGxOYW1lc3BhY2VzKSB0b0xvYWRMYW5ndWFnZXNbbG5nXSA9IHRydWU7XG4gICAgfSk7XG4gICAgaWYgKE9iamVjdC5rZXlzKHRvTG9hZCkubGVuZ3RoIHx8IE9iamVjdC5rZXlzKHBlbmRpbmcpLmxlbmd0aCkge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtcbiAgICAgICAgcGVuZGluZyxcbiAgICAgICAgcGVuZGluZ0NvdW50OiBPYmplY3Qua2V5cyhwZW5kaW5nKS5sZW5ndGgsXG4gICAgICAgIGxvYWRlZDoge30sXG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvTG9hZDogT2JqZWN0LmtleXModG9Mb2FkKSxcbiAgICAgIHBlbmRpbmc6IE9iamVjdC5rZXlzKHBlbmRpbmcpLFxuICAgICAgdG9Mb2FkTGFuZ3VhZ2VzOiBPYmplY3Qua2V5cyh0b0xvYWRMYW5ndWFnZXMpLFxuICAgICAgdG9Mb2FkTmFtZXNwYWNlczogT2JqZWN0LmtleXModG9Mb2FkTmFtZXNwYWNlcylcbiAgICB9O1xuICB9XG4gIGxvYWRlZChuYW1lLCBlcnIsIGRhdGEpIHtcbiAgICBjb25zdCBzID0gbmFtZS5zcGxpdCgnfCcpO1xuICAgIGNvbnN0IGxuZyA9IHNbMF07XG4gICAgY29uc3QgbnMgPSBzWzFdO1xuICAgIGlmIChlcnIpIHRoaXMuZW1pdCgnZmFpbGVkTG9hZGluZycsIGxuZywgbnMsIGVycik7XG4gICAgaWYgKCFlcnIgJiYgZGF0YSkge1xuICAgICAgdGhpcy5zdG9yZS5hZGRSZXNvdXJjZUJ1bmRsZShsbmcsIG5zLCBkYXRhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge1xuICAgICAgICBza2lwQ29weTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGVbbmFtZV0gPSBlcnIgPyAtMSA6IDI7XG4gICAgaWYgKGVyciAmJiBkYXRhKSB0aGlzLnN0YXRlW25hbWVdID0gMDtcbiAgICBjb25zdCBsb2FkZWQgPSB7fTtcbiAgICB0aGlzLnF1ZXVlLmZvckVhY2gocSA9PiB7XG4gICAgICBwdXNoUGF0aChxLmxvYWRlZCwgW2xuZ10sIG5zKTtcbiAgICAgIHJlbW92ZVBlbmRpbmcocSwgbmFtZSk7XG4gICAgICBpZiAoZXJyKSBxLmVycm9ycy5wdXNoKGVycik7XG4gICAgICBpZiAocS5wZW5kaW5nQ291bnQgPT09IDAgJiYgIXEuZG9uZSkge1xuICAgICAgICBPYmplY3Qua2V5cyhxLmxvYWRlZCkuZm9yRWFjaChsID0+IHtcbiAgICAgICAgICBpZiAoIWxvYWRlZFtsXSkgbG9hZGVkW2xdID0ge307XG4gICAgICAgICAgY29uc3QgbG9hZGVkS2V5cyA9IHEubG9hZGVkW2xdO1xuICAgICAgICAgIGlmIChsb2FkZWRLZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgbG9hZGVkS2V5cy5mb3JFYWNoKG4gPT4ge1xuICAgICAgICAgICAgICBpZiAobG9hZGVkW2xdW25dID09PSB1bmRlZmluZWQpIGxvYWRlZFtsXVtuXSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBxLmRvbmUgPSB0cnVlO1xuICAgICAgICBpZiAocS5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgcS5jYWxsYmFjayhxLmVycm9ycyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcS5jYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5lbWl0KCdsb2FkZWQnLCBsb2FkZWQpO1xuICAgIHRoaXMucXVldWUgPSB0aGlzLnF1ZXVlLmZpbHRlcihxID0+ICFxLmRvbmUpO1xuICB9XG4gIHJlYWQobG5nLCBucywgZmNOYW1lKSB7XG4gICAgbGV0IHRyaWVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAwO1xuICAgIGxldCB3YWl0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB0aGlzLnJldHJ5VGltZW91dDtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gNSA/IGFyZ3VtZW50c1s1XSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIWxuZy5sZW5ndGgpIHJldHVybiBjYWxsYmFjayhudWxsLCB7fSk7XG4gICAgaWYgKHRoaXMucmVhZGluZ0NhbGxzID49IHRoaXMubWF4UGFyYWxsZWxSZWFkcykge1xuICAgICAgdGhpcy53YWl0aW5nUmVhZHMucHVzaCh7XG4gICAgICAgIGxuZyxcbiAgICAgICAgbnMsXG4gICAgICAgIGZjTmFtZSxcbiAgICAgICAgdHJpZWQsXG4gICAgICAgIHdhaXQsXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZWFkaW5nQ2FsbHMrKztcbiAgICBjb25zdCByZXNvbHZlciA9IChlcnIsIGRhdGEpID0+IHtcbiAgICAgIHRoaXMucmVhZGluZ0NhbGxzLS07XG4gICAgICBpZiAodGhpcy53YWl0aW5nUmVhZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy53YWl0aW5nUmVhZHMuc2hpZnQoKTtcbiAgICAgICAgdGhpcy5yZWFkKG5leHQubG5nLCBuZXh0Lm5zLCBuZXh0LmZjTmFtZSwgbmV4dC50cmllZCwgbmV4dC53YWl0LCBuZXh0LmNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIGlmIChlcnIgJiYgZGF0YSAmJiB0cmllZCA8IHRoaXMubWF4UmV0cmllcykge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlYWQuY2FsbCh0aGlzLCBsbmcsIG5zLCBmY05hbWUsIHRyaWVkICsgMSwgd2FpdCAqIDIsIGNhbGxiYWNrKTtcbiAgICAgICAgfSwgd2FpdCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKGVyciwgZGF0YSk7XG4gICAgfTtcbiAgICBjb25zdCBmYyA9IHRoaXMuYmFja2VuZFtmY05hbWVdLmJpbmQodGhpcy5iYWNrZW5kKTtcbiAgICBpZiAoZmMubGVuZ3RoID09PSAyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByID0gZmMobG5nLCBucyk7XG4gICAgICAgIGlmIChyICYmIHR5cGVvZiByLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByLnRoZW4oZGF0YSA9PiByZXNvbHZlcihudWxsLCBkYXRhKSkuY2F0Y2gocmVzb2x2ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmVyKG51bGwsIHIpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzb2x2ZXIoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGZjKGxuZywgbnMsIHJlc29sdmVyKTtcbiAgfVxuICBwcmVwYXJlTG9hZGluZyhsYW5ndWFnZXMsIG5hbWVzcGFjZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7XG4gICAgaWYgKCF0aGlzLmJhY2tlbmQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ05vIGJhY2tlbmQgd2FzIGFkZGVkIHZpYSBpMThuZXh0LnVzZS4gV2lsbCBub3QgbG9hZCByZXNvdXJjZXMuJyk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgaWYgKGlzU3RyaW5nKGxhbmd1YWdlcykpIGxhbmd1YWdlcyA9IHRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobGFuZ3VhZ2VzKTtcbiAgICBpZiAoaXNTdHJpbmcobmFtZXNwYWNlcykpIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc107XG4gICAgY29uc3QgdG9Mb2FkID0gdGhpcy5xdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgaWYgKCF0b0xvYWQudG9Mb2FkLmxlbmd0aCkge1xuICAgICAgaWYgKCF0b0xvYWQucGVuZGluZy5sZW5ndGgpIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdG9Mb2FkLnRvTG9hZC5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgdGhpcy5sb2FkT25lKG5hbWUpO1xuICAgIH0pO1xuICB9XG4gIGxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHRoaXMucHJlcGFyZUxvYWRpbmcobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCB7fSwgY2FsbGJhY2spO1xuICB9XG4gIHJlbG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wcmVwYXJlTG9hZGluZyhsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIHtcbiAgICAgIHJlbG9hZDogdHJ1ZVxuICAgIH0sIGNhbGxiYWNrKTtcbiAgfVxuICBsb2FkT25lKG5hbWUpIHtcbiAgICBsZXQgcHJlZml4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgICBjb25zdCBzID0gbmFtZS5zcGxpdCgnfCcpO1xuICAgIGNvbnN0IGxuZyA9IHNbMF07XG4gICAgY29uc3QgbnMgPSBzWzFdO1xuICAgIHRoaXMucmVhZChsbmcsIG5zLCAncmVhZCcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICBpZiAoZXJyKSB0aGlzLmxvZ2dlci53YXJuKGAke3ByZWZpeH1sb2FkaW5nIG5hbWVzcGFjZSAke25zfSBmb3IgbGFuZ3VhZ2UgJHtsbmd9IGZhaWxlZGAsIGVycik7XG4gICAgICBpZiAoIWVyciAmJiBkYXRhKSB0aGlzLmxvZ2dlci5sb2coYCR7cHJlZml4fWxvYWRlZCBuYW1lc3BhY2UgJHtuc30gZm9yIGxhbmd1YWdlICR7bG5nfWAsIGRhdGEpO1xuICAgICAgdGhpcy5sb2FkZWQobmFtZSwgZXJyLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuICBzYXZlTWlzc2luZyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlLCBpc1VwZGF0ZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiB7fTtcbiAgICBsZXQgY2xiID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiAoKSA9PiB7fTtcbiAgICBpZiAodGhpcy5zZXJ2aWNlcy51dGlscyAmJiB0aGlzLnNlcnZpY2VzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZSAmJiAhdGhpcy5zZXJ2aWNlcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UobmFtZXNwYWNlKSkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybihgZGlkIG5vdCBzYXZlIGtleSBcIiR7a2V5fVwiIGFzIHRoZSBuYW1lc3BhY2UgXCIke25hbWVzcGFjZX1cIiB3YXMgbm90IHlldCBsb2FkZWRgLCAnVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCB8fCBrZXkgPT09IG51bGwgfHwga2V5ID09PSAnJykgcmV0dXJuO1xuICAgIGlmICh0aGlzLmJhY2tlbmQgJiYgdGhpcy5iYWNrZW5kLmNyZWF0ZSkge1xuICAgICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaXNVcGRhdGVcbiAgICAgIH07XG4gICAgICBjb25zdCBmYyA9IHRoaXMuYmFja2VuZC5jcmVhdGUuYmluZCh0aGlzLmJhY2tlbmQpO1xuICAgICAgaWYgKGZjLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICBpZiAoZmMubGVuZ3RoID09PSA1KSB7XG4gICAgICAgICAgICByID0gZmMobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSwgb3B0cyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHIgPSBmYyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHIgJiYgdHlwZW9mIHIudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgci50aGVuKGRhdGEgPT4gY2xiKG51bGwsIGRhdGEpKS5jYXRjaChjbGIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbGIobnVsbCwgcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjbGIoZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmMobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSwgY2xiLCBvcHRzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFsYW5ndWFnZXMgfHwgIWxhbmd1YWdlc1swXSkgcmV0dXJuO1xuICAgIHRoaXMuc3RvcmUuYWRkUmVzb3VyY2UobGFuZ3VhZ2VzWzBdLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSk7XG4gIH1cbn1cblxuY29uc3QgZ2V0ID0gKCkgPT4gKHtcbiAgZGVidWc6IGZhbHNlLFxuICBpbml0SW1tZWRpYXRlOiB0cnVlLFxuICBuczogWyd0cmFuc2xhdGlvbiddLFxuICBkZWZhdWx0TlM6IFsndHJhbnNsYXRpb24nXSxcbiAgZmFsbGJhY2tMbmc6IFsnZGV2J10sXG4gIGZhbGxiYWNrTlM6IGZhbHNlLFxuICBzdXBwb3J0ZWRMbmdzOiBmYWxzZSxcbiAgbm9uRXhwbGljaXRTdXBwb3J0ZWRMbmdzOiBmYWxzZSxcbiAgbG9hZDogJ2FsbCcsXG4gIHByZWxvYWQ6IGZhbHNlLFxuICBzaW1wbGlmeVBsdXJhbFN1ZmZpeDogdHJ1ZSxcbiAga2V5U2VwYXJhdG9yOiAnLicsXG4gIG5zU2VwYXJhdG9yOiAnOicsXG4gIHBsdXJhbFNlcGFyYXRvcjogJ18nLFxuICBjb250ZXh0U2VwYXJhdG9yOiAnXycsXG4gIHBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzOiBmYWxzZSxcbiAgc2F2ZU1pc3Npbmc6IGZhbHNlLFxuICB1cGRhdGVNaXNzaW5nOiBmYWxzZSxcbiAgc2F2ZU1pc3NpbmdUbzogJ2ZhbGxiYWNrJyxcbiAgc2F2ZU1pc3NpbmdQbHVyYWxzOiB0cnVlLFxuICBtaXNzaW5nS2V5SGFuZGxlcjogZmFsc2UsXG4gIG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcjogZmFsc2UsXG4gIHBvc3RQcm9jZXNzOiBmYWxzZSxcbiAgcG9zdFByb2Nlc3NQYXNzUmVzb2x2ZWQ6IGZhbHNlLFxuICByZXR1cm5OdWxsOiBmYWxzZSxcbiAgcmV0dXJuRW1wdHlTdHJpbmc6IHRydWUsXG4gIHJldHVybk9iamVjdHM6IGZhbHNlLFxuICBqb2luQXJyYXlzOiBmYWxzZSxcbiAgcmV0dXJuZWRPYmplY3RIYW5kbGVyOiBmYWxzZSxcbiAgcGFyc2VNaXNzaW5nS2V5SGFuZGxlcjogZmFsc2UsXG4gIGFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleTogZmFsc2UsXG4gIGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlOiBmYWxzZSxcbiAgb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXI6IGFyZ3MgPT4ge1xuICAgIGxldCByZXQgPSB7fTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdvYmplY3QnKSByZXQgPSBhcmdzWzFdO1xuICAgIGlmIChpc1N0cmluZyhhcmdzWzFdKSkgcmV0LmRlZmF1bHRWYWx1ZSA9IGFyZ3NbMV07XG4gICAgaWYgKGlzU3RyaW5nKGFyZ3NbMl0pKSByZXQudERlc2NyaXB0aW9uID0gYXJnc1syXTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMl0gPT09ICdvYmplY3QnIHx8IHR5cGVvZiBhcmdzWzNdID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IGFyZ3NbM10gfHwgYXJnc1syXTtcbiAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgcmV0W2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbiAgaW50ZXJwb2xhdGlvbjoge1xuICAgIGVzY2FwZVZhbHVlOiB0cnVlLFxuICAgIGZvcm1hdDogdmFsdWUgPT4gdmFsdWUsXG4gICAgcHJlZml4OiAne3snLFxuICAgIHN1ZmZpeDogJ319JyxcbiAgICBmb3JtYXRTZXBhcmF0b3I6ICcsJyxcbiAgICB1bmVzY2FwZVByZWZpeDogJy0nLFxuICAgIG5lc3RpbmdQcmVmaXg6ICckdCgnLFxuICAgIG5lc3RpbmdTdWZmaXg6ICcpJyxcbiAgICBuZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjogJywnLFxuICAgIG1heFJlcGxhY2VzOiAxMDAwLFxuICAgIHNraXBPblZhcmlhYmxlczogdHJ1ZVxuICB9XG59KTtcbmNvbnN0IHRyYW5zZm9ybU9wdGlvbnMgPSBvcHRpb25zID0+IHtcbiAgaWYgKGlzU3RyaW5nKG9wdGlvbnMubnMpKSBvcHRpb25zLm5zID0gW29wdGlvbnMubnNdO1xuICBpZiAoaXNTdHJpbmcob3B0aW9ucy5mYWxsYmFja0xuZykpIG9wdGlvbnMuZmFsbGJhY2tMbmcgPSBbb3B0aW9ucy5mYWxsYmFja0xuZ107XG4gIGlmIChpc1N0cmluZyhvcHRpb25zLmZhbGxiYWNrTlMpKSBvcHRpb25zLmZhbGxiYWNrTlMgPSBbb3B0aW9ucy5mYWxsYmFja05TXTtcbiAgaWYgKG9wdGlvbnMuc3VwcG9ydGVkTG5ncyAmJiBvcHRpb25zLnN1cHBvcnRlZExuZ3MuaW5kZXhPZignY2ltb2RlJykgPCAwKSB7XG4gICAgb3B0aW9ucy5zdXBwb3J0ZWRMbmdzID0gb3B0aW9ucy5zdXBwb3J0ZWRMbmdzLmNvbmNhdChbJ2NpbW9kZSddKTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn07XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcbmNvbnN0IGJpbmRNZW1iZXJGdW5jdGlvbnMgPSBpbnN0ID0+IHtcbiAgY29uc3QgbWVtcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0KSk7XG4gIG1lbXMuZm9yRWFjaChtZW0gPT4ge1xuICAgIGlmICh0eXBlb2YgaW5zdFttZW1dID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpbnN0W21lbV0gPSBpbnN0W21lbV0uYmluZChpbnN0KTtcbiAgICB9XG4gIH0pO1xufTtcbmNsYXNzIEkxOG4gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm9wdGlvbnMgPSB0cmFuc2Zvcm1PcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuc2VydmljZXMgPSB7fTtcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXI7XG4gICAgdGhpcy5tb2R1bGVzID0ge1xuICAgICAgZXh0ZXJuYWw6IFtdXG4gICAgfTtcbiAgICBiaW5kTWVtYmVyRnVuY3Rpb25zKHRoaXMpO1xuICAgIGlmIChjYWxsYmFjayAmJiAhdGhpcy5pc0luaXRpYWxpemVkICYmICFvcHRpb25zLmlzQ2xvbmUpIHtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmluaXRJbW1lZGlhdGUpIHtcbiAgICAgICAgdGhpcy5pbml0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5pbml0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfVxuICBpbml0KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSB0cnVlO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuZGVmYXVsdE5TICYmIG9wdGlvbnMuZGVmYXVsdE5TICE9PSBmYWxzZSAmJiBvcHRpb25zLm5zKSB7XG4gICAgICBpZiAoaXNTdHJpbmcob3B0aW9ucy5ucykpIHtcbiAgICAgICAgb3B0aW9ucy5kZWZhdWx0TlMgPSBvcHRpb25zLm5zO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLm5zLmluZGV4T2YoJ3RyYW5zbGF0aW9uJykgPCAwKSB7XG4gICAgICAgIG9wdGlvbnMuZGVmYXVsdE5TID0gb3B0aW9ucy5uc1swXTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVmT3B0cyA9IGdldCgpO1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIC4uLmRlZk9wdHMsXG4gICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAuLi50cmFuc2Zvcm1PcHRpb25zKG9wdGlvbnMpXG4gICAgfTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uID0ge1xuICAgICAgICAuLi5kZWZPcHRzLmludGVycG9sYXRpb24sXG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLm5zU2VwYXJhdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy51c2VyRGVmaW5lZE5zU2VwYXJhdG9yID0gb3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICB9XG4gICAgY29uc3QgY3JlYXRlQ2xhc3NPbkRlbWFuZCA9IENsYXNzT3JPYmplY3QgPT4ge1xuICAgICAgaWYgKCFDbGFzc09yT2JqZWN0KSByZXR1cm4gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgQ2xhc3NPck9iamVjdCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIG5ldyBDbGFzc09yT2JqZWN0KCk7XG4gICAgICByZXR1cm4gQ2xhc3NPck9iamVjdDtcbiAgICB9O1xuICAgIGlmICghdGhpcy5vcHRpb25zLmlzQ2xvbmUpIHtcbiAgICAgIGlmICh0aGlzLm1vZHVsZXMubG9nZ2VyKSB7XG4gICAgICAgIGJhc2VMb2dnZXIuaW5pdChjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5sb2dnZXIpLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmFzZUxvZ2dlci5pbml0KG51bGwsIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBsZXQgZm9ybWF0dGVyO1xuICAgICAgaWYgKHRoaXMubW9kdWxlcy5mb3JtYXR0ZXIpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gdGhpcy5tb2R1bGVzLmZvcm1hdHRlcjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEludGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZvcm1hdHRlciA9IEZvcm1hdHRlcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGx1ID0gbmV3IExhbmd1YWdlVXRpbCh0aGlzLm9wdGlvbnMpO1xuICAgICAgdGhpcy5zdG9yZSA9IG5ldyBSZXNvdXJjZVN0b3JlKHRoaXMub3B0aW9ucy5yZXNvdXJjZXMsIHRoaXMub3B0aW9ucyk7XG4gICAgICBjb25zdCBzID0gdGhpcy5zZXJ2aWNlcztcbiAgICAgIHMubG9nZ2VyID0gYmFzZUxvZ2dlcjtcbiAgICAgIHMucmVzb3VyY2VTdG9yZSA9IHRoaXMuc3RvcmU7XG4gICAgICBzLmxhbmd1YWdlVXRpbHMgPSBsdTtcbiAgICAgIHMucGx1cmFsUmVzb2x2ZXIgPSBuZXcgUGx1cmFsUmVzb2x2ZXIobHUsIHtcbiAgICAgICAgcHJlcGVuZDogdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcixcbiAgICAgICAgY29tcGF0aWJpbGl0eUpTT046IHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTixcbiAgICAgICAgc2ltcGxpZnlQbHVyYWxTdWZmaXg6IHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeFxuICAgICAgfSk7XG4gICAgICBpZiAoZm9ybWF0dGVyICYmICghdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0IHx8IHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdCA9PT0gZGVmT3B0cy5pbnRlcnBvbGF0aW9uLmZvcm1hdCkpIHtcbiAgICAgICAgcy5mb3JtYXR0ZXIgPSBjcmVhdGVDbGFzc09uRGVtYW5kKGZvcm1hdHRlcik7XG4gICAgICAgIHMuZm9ybWF0dGVyLmluaXQocywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0ID0gcy5mb3JtYXR0ZXIuZm9ybWF0LmJpbmQocy5mb3JtYXR0ZXIpO1xuICAgICAgfVxuICAgICAgcy5pbnRlcnBvbGF0b3IgPSBuZXcgSW50ZXJwb2xhdG9yKHRoaXMub3B0aW9ucyk7XG4gICAgICBzLnV0aWxzID0ge1xuICAgICAgICBoYXNMb2FkZWROYW1lc3BhY2U6IHRoaXMuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQodGhpcylcbiAgICAgIH07XG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3IgPSBuZXcgQ29ubmVjdG9yKGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmJhY2tlbmQpLCBzLnJlc291cmNlU3RvcmUsIHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IpIHtcbiAgICAgICAgcy5sYW5ndWFnZURldGVjdG9yID0gY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3Rvcik7XG4gICAgICAgIGlmIChzLmxhbmd1YWdlRGV0ZWN0b3IuaW5pdCkgcy5sYW5ndWFnZURldGVjdG9yLmluaXQocywgdGhpcy5vcHRpb25zLmRldGVjdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdCkge1xuICAgICAgICBzLmkxOG5Gb3JtYXQgPSBjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5pMThuRm9ybWF0KTtcbiAgICAgICAgaWYgKHMuaTE4bkZvcm1hdC5pbml0KSBzLmkxOG5Gb3JtYXQuaW5pdCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNsYXRvciA9IG5ldyBUcmFuc2xhdG9yKHRoaXMuc2VydmljZXMsIHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1vZHVsZXMuZXh0ZXJuYWwuZm9yRWFjaChtID0+IHtcbiAgICAgICAgaWYgKG0uaW5pdCkgbS5pbml0KHRoaXMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuZm9ybWF0ID0gdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0O1xuICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gbm9vcDtcbiAgICBpZiAodGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nICYmICF0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IgJiYgIXRoaXMub3B0aW9ucy5sbmcpIHtcbiAgICAgIGNvbnN0IGNvZGVzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgIGlmIChjb2Rlcy5sZW5ndGggPiAwICYmIGNvZGVzWzBdICE9PSAnZGV2JykgdGhpcy5vcHRpb25zLmxuZyA9IGNvZGVzWzBdO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5vcHRpb25zLmxuZykge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignaW5pdDogbm8gbGFuZ3VhZ2VEZXRlY3RvciBpcyB1c2VkIGFuZCBubyBsbmcgaXMgZGVmaW5lZCcpO1xuICAgIH1cbiAgICBjb25zdCBzdG9yZUFwaSA9IFsnZ2V0UmVzb3VyY2UnLCAnaGFzUmVzb3VyY2VCdW5kbGUnLCAnZ2V0UmVzb3VyY2VCdW5kbGUnLCAnZ2V0RGF0YUJ5TGFuZ3VhZ2UnXTtcbiAgICBzdG9yZUFwaS5mb3JFYWNoKGZjTmFtZSA9PiB7XG4gICAgICB0aGlzW2ZjTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zdG9yZVtmY05hbWVdKC4uLmFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IHN0b3JlQXBpQ2hhaW5lZCA9IFsnYWRkUmVzb3VyY2UnLCAnYWRkUmVzb3VyY2VzJywgJ2FkZFJlc291cmNlQnVuZGxlJywgJ3JlbW92ZVJlc291cmNlQnVuZGxlJ107XG4gICAgc3RvcmVBcGlDaGFpbmVkLmZvckVhY2goZmNOYW1lID0+IHtcbiAgICAgIHRoaXNbZmNOYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuc3RvcmVbZmNOYW1lXSguLi5hcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBjb25zdCBsb2FkID0gKCkgPT4ge1xuICAgICAgY29uc3QgZmluaXNoID0gKGVyciwgdCkgPT4ge1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQgJiYgIXRoaXMuaW5pdGlhbGl6ZWRTdG9yZU9uY2UpIHRoaXMubG9nZ2VyLndhcm4oJ2luaXQ6IGkxOG5leHQgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4gWW91IHNob3VsZCBjYWxsIGluaXQganVzdCBvbmNlIScpO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pc0Nsb25lKSB0aGlzLmxvZ2dlci5sb2coJ2luaXRpYWxpemVkJywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5lbWl0KCdpbml0aWFsaXplZCcsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUodCk7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgdCk7XG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMubGFuZ3VhZ2VzICYmIHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJICE9PSAndjEnICYmICF0aGlzLmlzSW5pdGlhbGl6ZWQpIHJldHVybiBmaW5pc2gobnVsbCwgdGhpcy50LmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5jaGFuZ2VMYW5ndWFnZSh0aGlzLm9wdGlvbnMubG5nLCBmaW5pc2gpO1xuICAgIH07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5yZXNvdXJjZXMgfHwgIXRoaXMub3B0aW9ucy5pbml0SW1tZWRpYXRlKSB7XG4gICAgICBsb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFRpbWVvdXQobG9hZCwgMCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBsb2FkUmVzb3VyY2VzKGxhbmd1YWdlKSB7XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBub29wO1xuICAgIGxldCB1c2VkQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICBjb25zdCB1c2VkTG5nID0gaXNTdHJpbmcobGFuZ3VhZ2UpID8gbGFuZ3VhZ2UgOiB0aGlzLmxhbmd1YWdlO1xuICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2UgPT09ICdmdW5jdGlvbicpIHVzZWRDYWxsYmFjayA9IGxhbmd1YWdlO1xuICAgIGlmICghdGhpcy5vcHRpb25zLnJlc291cmNlcyB8fCB0aGlzLm9wdGlvbnMucGFydGlhbEJ1bmRsZWRMYW5ndWFnZXMpIHtcbiAgICAgIGlmICh1c2VkTG5nICYmIHVzZWRMbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScgJiYgKCF0aGlzLm9wdGlvbnMucHJlbG9hZCB8fCB0aGlzLm9wdGlvbnMucHJlbG9hZC5sZW5ndGggPT09IDApKSByZXR1cm4gdXNlZENhbGxiYWNrKCk7XG4gICAgICBjb25zdCB0b0xvYWQgPSBbXTtcbiAgICAgIGNvbnN0IGFwcGVuZCA9IGxuZyA9PiB7XG4gICAgICAgIGlmICghbG5nKSByZXR1cm47XG4gICAgICAgIGlmIChsbmcgPT09ICdjaW1vZGUnKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGxuZ3MgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGxuZyk7XG4gICAgICAgIGxuZ3MuZm9yRWFjaChsID0+IHtcbiAgICAgICAgICBpZiAobCA9PT0gJ2NpbW9kZScpIHJldHVybjtcbiAgICAgICAgICBpZiAodG9Mb2FkLmluZGV4T2YobCkgPCAwKSB0b0xvYWQucHVzaChsKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgaWYgKCF1c2VkTG5nKSB7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrcyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyk7XG4gICAgICAgIGZhbGxiYWNrcy5mb3JFYWNoKGwgPT4gYXBwZW5kKGwpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcGVuZCh1c2VkTG5nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJlbG9hZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMucHJlbG9hZC5mb3JFYWNoKGwgPT4gYXBwZW5kKGwpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5sb2FkKHRvTG9hZCwgdGhpcy5vcHRpb25zLm5zLCBlID0+IHtcbiAgICAgICAgaWYgKCFlICYmICF0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgJiYgdGhpcy5sYW5ndWFnZSkgdGhpcy5zZXRSZXNvbHZlZExhbmd1YWdlKHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICB1c2VkQ2FsbGJhY2soZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlZENhbGxiYWNrKG51bGwpO1xuICAgIH1cbiAgfVxuICByZWxvYWRSZXNvdXJjZXMobG5ncywgbnMsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIGlmICh0eXBlb2YgbG5ncyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBsbmdzO1xuICAgICAgbG5ncyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBucztcbiAgICAgIG5zID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWxuZ3MpIGxuZ3MgPSB0aGlzLmxhbmd1YWdlcztcbiAgICBpZiAoIW5zKSBucyA9IHRoaXMub3B0aW9ucy5ucztcbiAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IG5vb3A7XG4gICAgdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLnJlbG9hZChsbmdzLCBucywgZXJyID0+IHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9XG4gIHVzZShtb2R1bGUpIHtcbiAgICBpZiAoIW1vZHVsZSkgdGhyb3cgbmV3IEVycm9yKCdZb3UgYXJlIHBhc3NpbmcgYW4gdW5kZWZpbmVkIG1vZHVsZSEgUGxlYXNlIGNoZWNrIHRoZSBvYmplY3QgeW91IGFyZSBwYXNzaW5nIHRvIGkxOG5leHQudXNlKCknKTtcbiAgICBpZiAoIW1vZHVsZS50eXBlKSB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgcGFzc2luZyBhIHdyb25nIG1vZHVsZSEgUGxlYXNlIGNoZWNrIHRoZSBvYmplY3QgeW91IGFyZSBwYXNzaW5nIHRvIGkxOG5leHQudXNlKCknKTtcbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdiYWNrZW5kJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmJhY2tlbmQgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2xvZ2dlcicgfHwgbW9kdWxlLmxvZyAmJiBtb2R1bGUud2FybiAmJiBtb2R1bGUuZXJyb3IpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5sb2dnZXIgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2xhbmd1YWdlRGV0ZWN0b3InKSB7XG4gICAgICB0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3RvciA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnaTE4bkZvcm1hdCcpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5pMThuRm9ybWF0ID0gbW9kdWxlO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdwb3N0UHJvY2Vzc29yJykge1xuICAgICAgcG9zdFByb2Nlc3Nvci5hZGRQb3N0UHJvY2Vzc29yKG1vZHVsZSk7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2Zvcm1hdHRlcicpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5mb3JtYXR0ZXIgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJzNyZFBhcnR5Jykge1xuICAgICAgdGhpcy5tb2R1bGVzLmV4dGVybmFsLnB1c2gobW9kdWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2V0UmVzb2x2ZWRMYW5ndWFnZShsKSB7XG4gICAgaWYgKCFsIHx8ICF0aGlzLmxhbmd1YWdlcykgcmV0dXJuO1xuICAgIGlmIChbJ2NpbW9kZScsICdkZXYnXS5pbmRleE9mKGwpID4gLTEpIHJldHVybjtcbiAgICBmb3IgKGxldCBsaSA9IDA7IGxpIDwgdGhpcy5sYW5ndWFnZXMubGVuZ3RoOyBsaSsrKSB7XG4gICAgICBjb25zdCBsbmdJbkxuZ3MgPSB0aGlzLmxhbmd1YWdlc1tsaV07XG4gICAgICBpZiAoWydjaW1vZGUnLCAnZGV2J10uaW5kZXhPZihsbmdJbkxuZ3MpID4gLTEpIGNvbnRpbnVlO1xuICAgICAgaWYgKHRoaXMuc3RvcmUuaGFzTGFuZ3VhZ2VTb21lVHJhbnNsYXRpb25zKGxuZ0luTG5ncykpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlZExhbmd1YWdlID0gbG5nSW5MbmdzO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY2hhbmdlTGFuZ3VhZ2UobG5nLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgIHRoaXMuaXNMYW5ndWFnZUNoYW5naW5nVG8gPSBsbmc7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIHRoaXMuZW1pdCgnbGFuZ3VhZ2VDaGFuZ2luZycsIGxuZyk7XG4gICAgY29uc3Qgc2V0TG5nUHJvcHMgPSBsID0+IHtcbiAgICAgIHRoaXMubGFuZ3VhZ2UgPSBsO1xuICAgICAgdGhpcy5sYW5ndWFnZXMgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGwpO1xuICAgICAgdGhpcy5yZXNvbHZlZExhbmd1YWdlID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5zZXRSZXNvbHZlZExhbmd1YWdlKGwpO1xuICAgIH07XG4gICAgY29uc3QgZG9uZSA9IChlcnIsIGwpID0+IHtcbiAgICAgIGlmIChsKSB7XG4gICAgICAgIHNldExuZ1Byb3BzKGwpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0b3IuY2hhbmdlTGFuZ3VhZ2UobCk7XG4gICAgICAgIHRoaXMuaXNMYW5ndWFnZUNoYW5naW5nVG8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZW1pdCgnbGFuZ3VhZ2VDaGFuZ2VkJywgbCk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZygnbGFuZ3VhZ2VDaGFuZ2VkJywgbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgZGVmZXJyZWQucmVzb2x2ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIudCguLi5hcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVyciwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLnQoLi4uYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2V0TG5nID0gbG5ncyA9PiB7XG4gICAgICBpZiAoIWxuZyAmJiAhbG5ncyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IpIGxuZ3MgPSBbXTtcbiAgICAgIGNvbnN0IGwgPSBpc1N0cmluZyhsbmdzKSA/IGxuZ3MgOiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0QmVzdE1hdGNoRnJvbUNvZGVzKGxuZ3MpO1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxhbmd1YWdlKSB7XG4gICAgICAgICAgc2V0TG5nUHJvcHMobCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zbGF0b3IubGFuZ3VhZ2UpIHRoaXMudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShsKTtcbiAgICAgICAgaWYgKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuY2FjaGVVc2VyTGFuZ3VhZ2UpIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5jYWNoZVVzZXJMYW5ndWFnZShsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubG9hZFJlc291cmNlcyhsLCBlcnIgPT4ge1xuICAgICAgICBkb25lKGVyciwgbCk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGlmICghbG5nICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jKSB7XG4gICAgICBzZXRMbmcodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpKTtcbiAgICB9IGVsc2UgaWYgKCFsbmcgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5hc3luYykge1xuICAgICAgaWYgKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoKS50aGVuKHNldExuZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuZGV0ZWN0KHNldExuZyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldExuZyhsbmcpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgZ2V0Rml4ZWRUKGxuZywgbnMsIGtleVByZWZpeCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuICAgIGNvbnN0IGZpeGVkVCA9IGZ1bmN0aW9uIChrZXksIG9wdHMpIHtcbiAgICAgIGxldCBvcHRpb25zO1xuICAgICAgaWYgKHR5cGVvZiBvcHRzICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3QgPSBuZXcgQXJyYXkoX2xlbjMgPiAyID8gX2xlbjMgLSAyIDogMCksIF9rZXkzID0gMjsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgICAgIHJlc3RbX2tleTMgLSAyXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IF90aGlzMy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKFtrZXksIG9wdHNdLmNvbmNhdChyZXN0KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgIC4uLm9wdHNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMubG5nID0gb3B0aW9ucy5sbmcgfHwgZml4ZWRULmxuZztcbiAgICAgIG9wdGlvbnMubG5ncyA9IG9wdGlvbnMubG5ncyB8fCBmaXhlZFQubG5ncztcbiAgICAgIG9wdGlvbnMubnMgPSBvcHRpb25zLm5zIHx8IGZpeGVkVC5ucztcbiAgICAgIGlmIChvcHRpb25zLmtleVByZWZpeCAhPT0gJycpIG9wdGlvbnMua2V5UHJlZml4ID0gb3B0aW9ucy5rZXlQcmVmaXggfHwga2V5UHJlZml4IHx8IGZpeGVkVC5rZXlQcmVmaXg7XG4gICAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBfdGhpczMub3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgJy4nO1xuICAgICAgbGV0IHJlc3VsdEtleTtcbiAgICAgIGlmIChvcHRpb25zLmtleVByZWZpeCAmJiBBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgcmVzdWx0S2V5ID0ga2V5Lm1hcChrID0+IGAke29wdGlvbnMua2V5UHJlZml4fSR7a2V5U2VwYXJhdG9yfSR7a31gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdEtleSA9IG9wdGlvbnMua2V5UHJlZml4ID8gYCR7b3B0aW9ucy5rZXlQcmVmaXh9JHtrZXlTZXBhcmF0b3J9JHtrZXl9YCA6IGtleTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfdGhpczMudChyZXN1bHRLZXksIG9wdGlvbnMpO1xuICAgIH07XG4gICAgaWYgKGlzU3RyaW5nKGxuZykpIHtcbiAgICAgIGZpeGVkVC5sbmcgPSBsbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpeGVkVC5sbmdzID0gbG5nO1xuICAgIH1cbiAgICBmaXhlZFQubnMgPSBucztcbiAgICBmaXhlZFQua2V5UHJlZml4ID0ga2V5UHJlZml4O1xuICAgIHJldHVybiBmaXhlZFQ7XG4gIH1cbiAgdCgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIHRoaXMudHJhbnNsYXRvci50cmFuc2xhdGUoLi4uYXJndW1lbnRzKTtcbiAgfVxuICBleGlzdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRvciAmJiB0aGlzLnRyYW5zbGF0b3IuZXhpc3RzKC4uLmFyZ3VtZW50cyk7XG4gIH1cbiAgc2V0RGVmYXVsdE5hbWVzcGFjZShucykge1xuICAgIHRoaXMub3B0aW9ucy5kZWZhdWx0TlMgPSBucztcbiAgfVxuICBoYXNMb2FkZWROYW1lc3BhY2UobnMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2hhc0xvYWRlZE5hbWVzcGFjZTogaTE4bmV4dCB3YXMgbm90IGluaXRpYWxpemVkJywgdGhpcy5sYW5ndWFnZXMpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubGFuZ3VhZ2VzIHx8ICF0aGlzLmxhbmd1YWdlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2hhc0xvYWRlZE5hbWVzcGFjZTogaTE4bi5sYW5ndWFnZXMgd2VyZSB1bmRlZmluZWQgb3IgZW1wdHknLCB0aGlzLmxhbmd1YWdlcyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGxuZyA9IG9wdGlvbnMubG5nIHx8IHRoaXMucmVzb2x2ZWRMYW5ndWFnZSB8fCB0aGlzLmxhbmd1YWdlc1swXTtcbiAgICBjb25zdCBmYWxsYmFja0xuZyA9IHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyA6IGZhbHNlO1xuICAgIGNvbnN0IGxhc3RMbmcgPSB0aGlzLmxhbmd1YWdlc1t0aGlzLmxhbmd1YWdlcy5sZW5ndGggLSAxXTtcbiAgICBpZiAobG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBsb2FkTm90UGVuZGluZyA9IChsLCBuKSA9PiB7XG4gICAgICBjb25zdCBsb2FkU3RhdGUgPSB0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3Iuc3RhdGVbYCR7bH18JHtufWBdO1xuICAgICAgcmV0dXJuIGxvYWRTdGF0ZSA9PT0gLTEgfHwgbG9hZFN0YXRlID09PSAwIHx8IGxvYWRTdGF0ZSA9PT0gMjtcbiAgICB9O1xuICAgIGlmIChvcHRpb25zLnByZWNoZWNrKSB7XG4gICAgICBjb25zdCBwcmVSZXN1bHQgPSBvcHRpb25zLnByZWNoZWNrKHRoaXMsIGxvYWROb3RQZW5kaW5nKTtcbiAgICAgIGlmIChwcmVSZXN1bHQgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHByZVJlc3VsdDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykpIHJldHVybiB0cnVlO1xuICAgIGlmICghdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgfHwgdGhpcy5vcHRpb25zLnJlc291cmNlcyAmJiAhdGhpcy5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAobG9hZE5vdFBlbmRpbmcobG5nLCBucykgJiYgKCFmYWxsYmFja0xuZyB8fCBsb2FkTm90UGVuZGluZyhsYXN0TG5nLCBucykpKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgbG9hZE5hbWVzcGFjZXMobnMsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIGlmICghdGhpcy5vcHRpb25zLm5zKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGlmIChpc1N0cmluZyhucykpIG5zID0gW25zXTtcbiAgICBucy5mb3JFYWNoKG4gPT4ge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKG4pIDwgMCkgdGhpcy5vcHRpb25zLm5zLnB1c2gobik7XG4gICAgfSk7XG4gICAgdGhpcy5sb2FkUmVzb3VyY2VzKGVyciA9PiB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVycik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9XG4gIGxvYWRMYW5ndWFnZXMobG5ncywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgaWYgKGlzU3RyaW5nKGxuZ3MpKSBsbmdzID0gW2xuZ3NdO1xuICAgIGNvbnN0IHByZWxvYWRlZCA9IHRoaXMub3B0aW9ucy5wcmVsb2FkIHx8IFtdO1xuICAgIGNvbnN0IG5ld0xuZ3MgPSBsbmdzLmZpbHRlcihsbmcgPT4gcHJlbG9hZGVkLmluZGV4T2YobG5nKSA8IDAgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkQ29kZShsbmcpKTtcbiAgICBpZiAoIW5ld0xuZ3MubGVuZ3RoKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkID0gcHJlbG9hZGVkLmNvbmNhdChuZXdMbmdzKTtcbiAgICB0aGlzLmxvYWRSZXNvdXJjZXMoZXJyID0+IHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgZGlyKGxuZykge1xuICAgIGlmICghbG5nKSBsbmcgPSB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgfHwgKHRoaXMubGFuZ3VhZ2VzICYmIHRoaXMubGFuZ3VhZ2VzLmxlbmd0aCA+IDAgPyB0aGlzLmxhbmd1YWdlc1swXSA6IHRoaXMubGFuZ3VhZ2UpO1xuICAgIGlmICghbG5nKSByZXR1cm4gJ3J0bCc7XG4gICAgY29uc3QgcnRsTG5ncyA9IFsnYXInLCAnc2h1JywgJ3NxcicsICdzc2gnLCAneGFhJywgJ3loZCcsICd5dWQnLCAnYWFvJywgJ2FiaCcsICdhYnYnLCAnYWNtJywgJ2FjcScsICdhY3cnLCAnYWN4JywgJ2FjeScsICdhZGYnLCAnYWRzJywgJ2FlYicsICdhZWMnLCAnYWZiJywgJ2FqcCcsICdhcGMnLCAnYXBkJywgJ2FyYicsICdhcnEnLCAnYXJzJywgJ2FyeScsICdhcnonLCAnYXV6JywgJ2F2bCcsICdheWgnLCAnYXlsJywgJ2F5bicsICdheXAnLCAnYmJ6JywgJ3BnYScsICdoZScsICdpdycsICdwcycsICdwYnQnLCAncGJ1JywgJ3BzdCcsICdwcnAnLCAncHJkJywgJ3VnJywgJ3VyJywgJ3lkZCcsICd5ZHMnLCAneWloJywgJ2ppJywgJ3lpJywgJ2hibycsICdtZW4nLCAneG1uJywgJ2ZhJywgJ2pwcicsICdwZW8nLCAncGVzJywgJ3BycycsICdkdicsICdzYW0nLCAnY2tiJ107XG4gICAgY29uc3QgbGFuZ3VhZ2VVdGlscyA9IHRoaXMuc2VydmljZXMgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzIHx8IG5ldyBMYW5ndWFnZVV0aWwoZ2V0KCkpO1xuICAgIHJldHVybiBydGxMbmdzLmluZGV4T2YobGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShsbmcpKSA+IC0xIHx8IGxuZy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJy1hcmFiJykgPiAxID8gJ3J0bCcgOiAnbHRyJztcbiAgfVxuICBzdGF0aWMgY3JlYXRlSW5zdGFuY2UoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBuZXcgSTE4bihvcHRpb25zLCBjYWxsYmFjayk7XG4gIH1cbiAgY2xvbmVJbnN0YW5jZSgpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBub29wO1xuICAgIGNvbnN0IGZvcmtSZXNvdXJjZVN0b3JlID0gb3B0aW9ucy5mb3JrUmVzb3VyY2VTdG9yZTtcbiAgICBpZiAoZm9ya1Jlc291cmNlU3RvcmUpIGRlbGV0ZSBvcHRpb25zLmZvcmtSZXNvdXJjZVN0b3JlO1xuICAgIGNvbnN0IG1lcmdlZE9wdGlvbnMgPSB7XG4gICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgLi4ue1xuICAgICAgICBpc0Nsb25lOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjbG9uZSA9IG5ldyBJMThuKG1lcmdlZE9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zLmRlYnVnICE9PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5wcmVmaXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xvbmUubG9nZ2VyID0gY2xvbmUubG9nZ2VyLmNsb25lKG9wdGlvbnMpO1xuICAgIH1cbiAgICBjb25zdCBtZW1iZXJzVG9Db3B5ID0gWydzdG9yZScsICdzZXJ2aWNlcycsICdsYW5ndWFnZSddO1xuICAgIG1lbWJlcnNUb0NvcHkuZm9yRWFjaChtID0+IHtcbiAgICAgIGNsb25lW21dID0gdGhpc1ttXTtcbiAgICB9KTtcbiAgICBjbG9uZS5zZXJ2aWNlcyA9IHtcbiAgICAgIC4uLnRoaXMuc2VydmljZXNcbiAgICB9O1xuICAgIGNsb25lLnNlcnZpY2VzLnV0aWxzID0ge1xuICAgICAgaGFzTG9hZGVkTmFtZXNwYWNlOiBjbG9uZS5oYXNMb2FkZWROYW1lc3BhY2UuYmluZChjbG9uZSlcbiAgICB9O1xuICAgIGlmIChmb3JrUmVzb3VyY2VTdG9yZSkge1xuICAgICAgY2xvbmUuc3RvcmUgPSBuZXcgUmVzb3VyY2VTdG9yZSh0aGlzLnN0b3JlLmRhdGEsIG1lcmdlZE9wdGlvbnMpO1xuICAgICAgY2xvbmUuc2VydmljZXMucmVzb3VyY2VTdG9yZSA9IGNsb25lLnN0b3JlO1xuICAgIH1cbiAgICBjbG9uZS50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IoY2xvbmUuc2VydmljZXMsIG1lcmdlZE9wdGlvbnMpO1xuICAgIGNsb25lLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNCA+IDEgPyBfbGVuNCAtIDEgOiAwKSwgX2tleTQgPSAxOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgICAgIGFyZ3NbX2tleTQgLSAxXSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgICB9XG4gICAgICBjbG9uZS5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9KTtcbiAgICBjbG9uZS5pbml0KG1lcmdlZE9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICBjbG9uZS50cmFuc2xhdG9yLm9wdGlvbnMgPSBtZXJnZWRPcHRpb25zO1xuICAgIGNsb25lLnRyYW5zbGF0b3IuYmFja2VuZENvbm5lY3Rvci5zZXJ2aWNlcy51dGlscyA9IHtcbiAgICAgIGhhc0xvYWRlZE5hbWVzcGFjZTogY2xvbmUuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQoY2xvbmUpXG4gICAgfTtcbiAgICByZXR1cm4gY2xvbmU7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBzdG9yZTogdGhpcy5zdG9yZSxcbiAgICAgIGxhbmd1YWdlOiB0aGlzLmxhbmd1YWdlLFxuICAgICAgbGFuZ3VhZ2VzOiB0aGlzLmxhbmd1YWdlcyxcbiAgICAgIHJlc29sdmVkTGFuZ3VhZ2U6IHRoaXMucmVzb2x2ZWRMYW5ndWFnZVxuICAgIH07XG4gIH1cbn1cbmNvbnN0IGluc3RhbmNlID0gSTE4bi5jcmVhdGVJbnN0YW5jZSgpO1xuaW5zdGFuY2UuY3JlYXRlSW5zdGFuY2UgPSBJMThuLmNyZWF0ZUluc3RhbmNlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3RhbmNlO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEkxOG5Db250ZXh0IH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBJMThuZXh0UHJvdmlkZXIoX3JlZikge1xuICBsZXQge1xuICAgIGkxOG4sXG4gICAgZGVmYXVsdE5TLFxuICAgIGNoaWxkcmVuXG4gIH0gPSBfcmVmO1xuICBjb25zdCB2YWx1ZSA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICBpMThuLFxuICAgIGRlZmF1bHROU1xuICB9KSwgW2kxOG4sIGRlZmF1bHROU10pO1xuICByZXR1cm4gY3JlYXRlRWxlbWVudChJMThuQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlXG4gIH0sIGNoaWxkcmVuKTtcbn0iLCJpbXBvcnQgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbm9kZXNUb1N0cmluZywgVHJhbnMgYXMgVHJhbnNXaXRob3V0Q29udGV4dCB9IGZyb20gJy4vVHJhbnNXaXRob3V0Q29udGV4dC5qcyc7XG5pbXBvcnQgeyBnZXRJMThuLCBJMThuQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5leHBvcnQgeyBub2Rlc1RvU3RyaW5nIH07XG5leHBvcnQgZnVuY3Rpb24gVHJhbnMoX3JlZikge1xuICBsZXQge1xuICAgIGNoaWxkcmVuLFxuICAgIGNvdW50LFxuICAgIHBhcmVudCxcbiAgICBpMThuS2V5LFxuICAgIGNvbnRleHQsXG4gICAgdE9wdGlvbnMgPSB7fSxcbiAgICB2YWx1ZXMsXG4gICAgZGVmYXVsdHMsXG4gICAgY29tcG9uZW50cyxcbiAgICBucyxcbiAgICBpMThuOiBpMThuRnJvbVByb3BzLFxuICAgIHQ6IHRGcm9tUHJvcHMsXG4gICAgc2hvdWxkVW5lc2NhcGUsXG4gICAgLi4uYWRkaXRpb25hbFByb3BzXG4gIH0gPSBfcmVmO1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Db250ZXh0LFxuICAgIGRlZmF1bHROUzogZGVmYXVsdE5TRnJvbUNvbnRleHRcbiAgfSA9IHVzZUNvbnRleHQoSTE4bkNvbnRleHQpIHx8IHt9O1xuICBjb25zdCBpMThuID0gaTE4bkZyb21Qcm9wcyB8fCBpMThuRnJvbUNvbnRleHQgfHwgZ2V0STE4bigpO1xuICBjb25zdCB0ID0gdEZyb21Qcm9wcyB8fCBpMThuICYmIGkxOG4udC5iaW5kKGkxOG4pO1xuICByZXR1cm4gVHJhbnNXaXRob3V0Q29udGV4dCh7XG4gICAgY2hpbGRyZW4sXG4gICAgY291bnQsXG4gICAgcGFyZW50LFxuICAgIGkxOG5LZXksXG4gICAgY29udGV4dCxcbiAgICB0T3B0aW9ucyxcbiAgICB2YWx1ZXMsXG4gICAgZGVmYXVsdHMsXG4gICAgY29tcG9uZW50cyxcbiAgICBuczogbnMgfHwgdCAmJiB0Lm5zIHx8IGRlZmF1bHROU0Zyb21Db250ZXh0IHx8IGkxOG4gJiYgaTE4bi5vcHRpb25zICYmIGkxOG4ub3B0aW9ucy5kZWZhdWx0TlMsXG4gICAgaTE4bixcbiAgICB0OiB0RnJvbVByb3BzLFxuICAgIHNob3VsZFVuZXNjYXBlLFxuICAgIC4uLmFkZGl0aW9uYWxQcm9wc1xuICB9KTtcbn0iLCJpbXBvcnQgeyBGcmFnbWVudCwgaXNWYWxpZEVsZW1lbnQsIGNsb25lRWxlbWVudCwgY3JlYXRlRWxlbWVudCwgQ2hpbGRyZW4gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSFRNTCBmcm9tICdodG1sLXBhcnNlLXN0cmluZ2lmeSc7XG5pbXBvcnQgeyBpc09iamVjdCwgaXNTdHJpbmcsIHdhcm4sIHdhcm5PbmNlIH0gZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyBnZXREZWZhdWx0cyB9IGZyb20gJy4vZGVmYXVsdHMuanMnO1xuaW1wb3J0IHsgZ2V0STE4biB9IGZyb20gJy4vaTE4bkluc3RhbmNlLmpzJztcbmNvbnN0IGhhc0NoaWxkcmVuID0gKG5vZGUsIGNoZWNrTGVuZ3RoKSA9PiB7XG4gIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBiYXNlID0gbm9kZS5wcm9wcyA/IG5vZGUucHJvcHMuY2hpbGRyZW4gOiBub2RlLmNoaWxkcmVuO1xuICBpZiAoY2hlY2tMZW5ndGgpIHJldHVybiBiYXNlLmxlbmd0aCA+IDA7XG4gIHJldHVybiAhIWJhc2U7XG59O1xuY29uc3QgZ2V0Q2hpbGRyZW4gPSBub2RlID0+IHtcbiAgaWYgKCFub2RlKSByZXR1cm4gW107XG4gIGNvbnN0IGNoaWxkcmVuID0gbm9kZS5wcm9wcyA/IG5vZGUucHJvcHMuY2hpbGRyZW4gOiBub2RlLmNoaWxkcmVuO1xuICByZXR1cm4gbm9kZS5wcm9wcyAmJiBub2RlLnByb3BzLmkxOG5Jc0R5bmFtaWNMaXN0ID8gZ2V0QXNBcnJheShjaGlsZHJlbikgOiBjaGlsZHJlbjtcbn07XG5jb25zdCBoYXNWYWxpZFJlYWN0Q2hpbGRyZW4gPSBjaGlsZHJlbiA9PiBBcnJheS5pc0FycmF5KGNoaWxkcmVuKSAmJiBjaGlsZHJlbi5ldmVyeShpc1ZhbGlkRWxlbWVudCk7XG5jb25zdCBnZXRBc0FycmF5ID0gZGF0YSA9PiBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbmNvbnN0IG1lcmdlUHJvcHMgPSAoc291cmNlLCB0YXJnZXQpID0+IHtcbiAgY29uc3QgbmV3VGFyZ2V0ID0ge1xuICAgIC4uLnRhcmdldFxuICB9O1xuICBuZXdUYXJnZXQucHJvcHMgPSBPYmplY3QuYXNzaWduKHNvdXJjZS5wcm9wcywgdGFyZ2V0LnByb3BzKTtcbiAgcmV0dXJuIG5ld1RhcmdldDtcbn07XG5leHBvcnQgY29uc3Qgbm9kZXNUb1N0cmluZyA9IChjaGlsZHJlbiwgaTE4bk9wdGlvbnMpID0+IHtcbiAgaWYgKCFjaGlsZHJlbikgcmV0dXJuICcnO1xuICBsZXQgc3RyaW5nTm9kZSA9ICcnO1xuICBjb25zdCBjaGlsZHJlbkFycmF5ID0gZ2V0QXNBcnJheShjaGlsZHJlbik7XG4gIGNvbnN0IGtlZXBBcnJheSA9IGkxOG5PcHRpb25zLnRyYW5zU3VwcG9ydEJhc2ljSHRtbE5vZGVzICYmIGkxOG5PcHRpb25zLnRyYW5zS2VlcEJhc2ljSHRtbE5vZGVzRm9yID8gaTE4bk9wdGlvbnMudHJhbnNLZWVwQmFzaWNIdG1sTm9kZXNGb3IgOiBbXTtcbiAgY2hpbGRyZW5BcnJheS5mb3JFYWNoKChjaGlsZCwgY2hpbGRJbmRleCkgPT4ge1xuICAgIGlmIChpc1N0cmluZyhjaGlsZCkpIHtcbiAgICAgIHN0cmluZ05vZGUgKz0gYCR7Y2hpbGR9YDtcbiAgICB9IGVsc2UgaWYgKGlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBwcm9wcyxcbiAgICAgICAgdHlwZVxuICAgICAgfSA9IGNoaWxkO1xuICAgICAgY29uc3QgY2hpbGRQcm9wc0NvdW50ID0gT2JqZWN0LmtleXMocHJvcHMpLmxlbmd0aDtcbiAgICAgIGNvbnN0IHNob3VsZEtlZXBDaGlsZCA9IGtlZXBBcnJheS5pbmRleE9mKHR5cGUpID4gLTE7XG4gICAgICBjb25zdCBjaGlsZENoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW47XG4gICAgICBpZiAoIWNoaWxkQ2hpbGRyZW4gJiYgc2hvdWxkS2VlcENoaWxkICYmICFjaGlsZFByb3BzQ291bnQpIHtcbiAgICAgICAgc3RyaW5nTm9kZSArPSBgPCR7dHlwZX0vPmA7XG4gICAgICB9IGVsc2UgaWYgKCFjaGlsZENoaWxkcmVuICYmICghc2hvdWxkS2VlcENoaWxkIHx8IGNoaWxkUHJvcHNDb3VudCkgfHwgcHJvcHMuaTE4bklzRHluYW1pY0xpc3QpIHtcbiAgICAgICAgc3RyaW5nTm9kZSArPSBgPCR7Y2hpbGRJbmRleH0+PC8ke2NoaWxkSW5kZXh9PmA7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZEtlZXBDaGlsZCAmJiBjaGlsZFByb3BzQ291bnQgPT09IDEgJiYgaXNTdHJpbmcoY2hpbGRDaGlsZHJlbikpIHtcbiAgICAgICAgc3RyaW5nTm9kZSArPSBgPCR7dHlwZX0+JHtjaGlsZENoaWxkcmVufTwvJHt0eXBlfT5gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IG5vZGVzVG9TdHJpbmcoY2hpbGRDaGlsZHJlbiwgaTE4bk9wdGlvbnMpO1xuICAgICAgICBzdHJpbmdOb2RlICs9IGA8JHtjaGlsZEluZGV4fT4ke2NvbnRlbnR9PC8ke2NoaWxkSW5kZXh9PmA7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGlsZCA9PT0gbnVsbCkge1xuICAgICAgd2FybihgVHJhbnM6IHRoZSBwYXNzZWQgaW4gdmFsdWUgaXMgaW52YWxpZCAtIHNlZW1zIHlvdSBwYXNzZWQgaW4gYSBudWxsIGNoaWxkLmApO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoY2hpbGQpKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGZvcm1hdCxcbiAgICAgICAgLi4uY2xvbmVcbiAgICAgIH0gPSBjaGlsZDtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjbG9uZSk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmb3JtYXQgPyBgJHtrZXlzWzBdfSwgJHtmb3JtYXR9YCA6IGtleXNbMF07XG4gICAgICAgIHN0cmluZ05vZGUgKz0gYHt7JHt2YWx1ZX19fWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKGByZWFjdC1pMThuZXh0OiB0aGUgcGFzc2VkIGluIG9iamVjdCBjb250YWluZWQgbW9yZSB0aGFuIG9uZSB2YXJpYWJsZSAtIHRoZSBvYmplY3Qgc2hvdWxkIGxvb2sgbGlrZSB7eyB2YWx1ZSwgZm9ybWF0IH19IHdoZXJlIGZvcm1hdCBpcyBvcHRpb25hbC5gLCBjaGlsZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdhcm4oYFRyYW5zOiB0aGUgcGFzc2VkIGluIHZhbHVlIGlzIGludmFsaWQgLSBzZWVtcyB5b3UgcGFzc2VkIGluIGEgdmFyaWFibGUgbGlrZSB7bnVtYmVyfSAtIHBsZWFzZSBwYXNzIGluIHZhcmlhYmxlcyBmb3IgaW50ZXJwb2xhdGlvbiBhcyBmdWxsIG9iamVjdHMgbGlrZSB7e251bWJlcn19LmAsIGNoaWxkKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gc3RyaW5nTm9kZTtcbn07XG5jb25zdCByZW5kZXJOb2RlcyA9IChjaGlsZHJlbiwgdGFyZ2V0U3RyaW5nLCBpMThuLCBpMThuT3B0aW9ucywgY29tYmluZWRUT3B0cywgc2hvdWxkVW5lc2NhcGUpID0+IHtcbiAgaWYgKHRhcmdldFN0cmluZyA9PT0gJycpIHJldHVybiBbXTtcbiAgY29uc3Qga2VlcEFycmF5ID0gaTE4bk9wdGlvbnMudHJhbnNLZWVwQmFzaWNIdG1sTm9kZXNGb3IgfHwgW107XG4gIGNvbnN0IGVtcHR5Q2hpbGRyZW5CdXROZWVkc0hhbmRsaW5nID0gdGFyZ2V0U3RyaW5nICYmIG5ldyBSZWdFeHAoa2VlcEFycmF5Lm1hcChrZWVwID0+IGA8JHtrZWVwfWApLmpvaW4oJ3wnKSkudGVzdCh0YXJnZXRTdHJpbmcpO1xuICBpZiAoIWNoaWxkcmVuICYmICFlbXB0eUNoaWxkcmVuQnV0TmVlZHNIYW5kbGluZyAmJiAhc2hvdWxkVW5lc2NhcGUpIHJldHVybiBbdGFyZ2V0U3RyaW5nXTtcbiAgY29uc3QgZGF0YSA9IHt9O1xuICBjb25zdCBnZXREYXRhID0gY2hpbGRzID0+IHtcbiAgICBjb25zdCBjaGlsZHJlbkFycmF5ID0gZ2V0QXNBcnJheShjaGlsZHMpO1xuICAgIGNoaWxkcmVuQXJyYXkuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICBpZiAoaXNTdHJpbmcoY2hpbGQpKSByZXR1cm47XG4gICAgICBpZiAoaGFzQ2hpbGRyZW4oY2hpbGQpKSBnZXREYXRhKGdldENoaWxkcmVuKGNoaWxkKSk7ZWxzZSBpZiAoaXNPYmplY3QoY2hpbGQpICYmICFpc1ZhbGlkRWxlbWVudChjaGlsZCkpIE9iamVjdC5hc3NpZ24oZGF0YSwgY2hpbGQpO1xuICAgIH0pO1xuICB9O1xuICBnZXREYXRhKGNoaWxkcmVuKTtcbiAgY29uc3QgYXN0ID0gSFRNTC5wYXJzZShgPDA+JHt0YXJnZXRTdHJpbmd9PC8wPmApO1xuICBjb25zdCBvcHRzID0ge1xuICAgIC4uLmRhdGEsXG4gICAgLi4uY29tYmluZWRUT3B0c1xuICB9O1xuICBjb25zdCByZW5kZXJJbm5lciA9IChjaGlsZCwgbm9kZSwgcm9vdFJlYWN0Tm9kZSkgPT4ge1xuICAgIGNvbnN0IGNoaWxkcyA9IGdldENoaWxkcmVuKGNoaWxkKTtcbiAgICBjb25zdCBtYXBwZWRDaGlsZHJlbiA9IG1hcEFTVChjaGlsZHMsIG5vZGUuY2hpbGRyZW4sIHJvb3RSZWFjdE5vZGUpO1xuICAgIHJldHVybiBoYXNWYWxpZFJlYWN0Q2hpbGRyZW4oY2hpbGRzKSAmJiBtYXBwZWRDaGlsZHJlbi5sZW5ndGggPT09IDAgfHwgY2hpbGQucHJvcHMgJiYgY2hpbGQucHJvcHMuaTE4bklzRHluYW1pY0xpc3QgPyBjaGlsZHMgOiBtYXBwZWRDaGlsZHJlbjtcbiAgfTtcbiAgY29uc3QgcHVzaFRyYW5zbGF0ZWRKU1ggPSAoY2hpbGQsIGlubmVyLCBtZW0sIGksIGlzVm9pZCkgPT4ge1xuICAgIGlmIChjaGlsZC5kdW1teSkge1xuICAgICAgY2hpbGQuY2hpbGRyZW4gPSBpbm5lcjtcbiAgICAgIG1lbS5wdXNoKGNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICBrZXk6IGlcbiAgICAgIH0sIGlzVm9pZCA/IHVuZGVmaW5lZCA6IGlubmVyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lbS5wdXNoKC4uLkNoaWxkcmVuLm1hcChbY2hpbGRdLCBjID0+IHtcbiAgICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgICAgLi4uYy5wcm9wc1xuICAgICAgICB9O1xuICAgICAgICBkZWxldGUgcHJvcHMuaTE4bklzRHluYW1pY0xpc3Q7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KGMudHlwZSwge1xuICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgIGtleTogaSxcbiAgICAgICAgICByZWY6IGMucmVmXG4gICAgICAgIH0sIGlzVm9pZCA/IG51bGwgOiBpbm5lcik7XG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBtYXBBU1QgPSAocmVhY3ROb2RlLCBhc3ROb2RlLCByb290UmVhY3ROb2RlKSA9PiB7XG4gICAgY29uc3QgcmVhY3ROb2RlcyA9IGdldEFzQXJyYXkocmVhY3ROb2RlKTtcbiAgICBjb25zdCBhc3ROb2RlcyA9IGdldEFzQXJyYXkoYXN0Tm9kZSk7XG4gICAgcmV0dXJuIGFzdE5vZGVzLnJlZHVjZSgobWVtLCBub2RlLCBpKSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2xhdGlvbkNvbnRlbnQgPSBub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW5bMF0gJiYgbm9kZS5jaGlsZHJlblswXS5jb250ZW50ICYmIGkxOG4uc2VydmljZXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKG5vZGUuY2hpbGRyZW5bMF0uY29udGVudCwgb3B0cywgaTE4bi5sYW5ndWFnZSk7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAndGFnJykge1xuICAgICAgICBsZXQgdG1wID0gcmVhY3ROb2Rlc1twYXJzZUludChub2RlLm5hbWUsIDEwKV07XG4gICAgICAgIGlmIChyb290UmVhY3ROb2RlLmxlbmd0aCA9PT0gMSAmJiAhdG1wKSB0bXAgPSByb290UmVhY3ROb2RlWzBdW25vZGUubmFtZV07XG4gICAgICAgIGlmICghdG1wKSB0bXAgPSB7fTtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBPYmplY3Qua2V5cyhub2RlLmF0dHJzKS5sZW5ndGggIT09IDAgPyBtZXJnZVByb3BzKHtcbiAgICAgICAgICBwcm9wczogbm9kZS5hdHRyc1xuICAgICAgICB9LCB0bXApIDogdG1wO1xuICAgICAgICBjb25zdCBpc0VsZW1lbnQgPSBpc1ZhbGlkRWxlbWVudChjaGlsZCk7XG4gICAgICAgIGNvbnN0IGlzVmFsaWRUcmFuc2xhdGlvbldpdGhDaGlsZHJlbiA9IGlzRWxlbWVudCAmJiBoYXNDaGlsZHJlbihub2RlLCB0cnVlKSAmJiAhbm9kZS52b2lkRWxlbWVudDtcbiAgICAgICAgY29uc3QgaXNFbXB0eVRyYW5zV2l0aEhUTUwgPSBlbXB0eUNoaWxkcmVuQnV0TmVlZHNIYW5kbGluZyAmJiBpc09iamVjdChjaGlsZCkgJiYgY2hpbGQuZHVtbXkgJiYgIWlzRWxlbWVudDtcbiAgICAgICAgY29uc3QgaXNLbm93bkNvbXBvbmVudCA9IGlzT2JqZWN0KGNoaWxkcmVuKSAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChjaGlsZHJlbiwgbm9kZS5uYW1lKTtcbiAgICAgICAgaWYgKGlzU3RyaW5nKGNoaWxkKSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gaTE4bi5zZXJ2aWNlcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUoY2hpbGQsIG9wdHMsIGkxOG4ubGFuZ3VhZ2UpO1xuICAgICAgICAgIG1lbS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChoYXNDaGlsZHJlbihjaGlsZCkgfHwgaXNWYWxpZFRyYW5zbGF0aW9uV2l0aENoaWxkcmVuKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJJbm5lcihjaGlsZCwgbm9kZSwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgICAgICAgcHVzaFRyYW5zbGF0ZWRKU1goY2hpbGQsIGlubmVyLCBtZW0sIGkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRW1wdHlUcmFuc1dpdGhIVE1MKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSBtYXBBU1QocmVhY3ROb2Rlcywgbm9kZS5jaGlsZHJlbiwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgICAgICAgcHVzaFRyYW5zbGF0ZWRKU1goY2hpbGQsIGlubmVyLCBtZW0sIGkpO1xuICAgICAgICB9IGVsc2UgaWYgKE51bWJlci5pc05hTihwYXJzZUZsb2F0KG5vZGUubmFtZSkpKSB7XG4gICAgICAgICAgaWYgKGlzS25vd25Db21wb25lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGlubmVyID0gcmVuZGVySW5uZXIoY2hpbGQsIG5vZGUsIHJvb3RSZWFjdE5vZGUpO1xuICAgICAgICAgICAgcHVzaFRyYW5zbGF0ZWRKU1goY2hpbGQsIGlubmVyLCBtZW0sIGksIG5vZGUudm9pZEVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaTE4bk9wdGlvbnMudHJhbnNTdXBwb3J0QmFzaWNIdG1sTm9kZXMgJiYga2VlcEFycmF5LmluZGV4T2Yobm9kZS5uYW1lKSA+IC0xKSB7XG4gICAgICAgICAgICBpZiAobm9kZS52b2lkRWxlbWVudCkge1xuICAgICAgICAgICAgICBtZW0ucHVzaChjcmVhdGVFbGVtZW50KG5vZGUubmFtZSwge1xuICAgICAgICAgICAgICAgIGtleTogYCR7bm9kZS5uYW1lfS0ke2l9YFxuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBpbm5lciA9IG1hcEFTVChyZWFjdE5vZGVzLCBub2RlLmNoaWxkcmVuLCByb290UmVhY3ROb2RlKTtcbiAgICAgICAgICAgICAgbWVtLnB1c2goY3JlYXRlRWxlbWVudChub2RlLm5hbWUsIHtcbiAgICAgICAgICAgICAgICBrZXk6IGAke25vZGUubmFtZX0tJHtpfWBcbiAgICAgICAgICAgICAgfSwgaW5uZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUudm9pZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIG1lbS5wdXNoKGA8JHtub2RlLm5hbWV9IC8+YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGlubmVyID0gbWFwQVNUKHJlYWN0Tm9kZXMsIG5vZGUuY2hpbGRyZW4sIHJvb3RSZWFjdE5vZGUpO1xuICAgICAgICAgICAgbWVtLnB1c2goYDwke25vZGUubmFtZX0+JHtpbm5lcn08LyR7bm9kZS5uYW1lfT5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoY2hpbGQpICYmICFpc0VsZW1lbnQpIHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gbm9kZS5jaGlsZHJlblswXSA/IHRyYW5zbGF0aW9uQ29udGVudCA6IG51bGw7XG4gICAgICAgICAgaWYgKGNvbnRlbnQpIG1lbS5wdXNoKGNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHB1c2hUcmFuc2xhdGVkSlNYKGNoaWxkLCB0cmFuc2xhdGlvbkNvbnRlbnQsIG1lbSwgaSwgbm9kZS5jaGlsZHJlbi5sZW5ndGggIT09IDEgfHwgIXRyYW5zbGF0aW9uQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgY29uc3Qgd3JhcFRleHROb2RlcyA9IGkxOG5PcHRpb25zLnRyYW5zV3JhcFRleHROb2RlcztcbiAgICAgICAgY29uc3QgY29udGVudCA9IHNob3VsZFVuZXNjYXBlID8gaTE4bk9wdGlvbnMudW5lc2NhcGUoaTE4bi5zZXJ2aWNlcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUobm9kZS5jb250ZW50LCBvcHRzLCBpMThuLmxhbmd1YWdlKSkgOiBpMThuLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShub2RlLmNvbnRlbnQsIG9wdHMsIGkxOG4ubGFuZ3VhZ2UpO1xuICAgICAgICBpZiAod3JhcFRleHROb2Rlcykge1xuICAgICAgICAgIG1lbS5wdXNoKGNyZWF0ZUVsZW1lbnQod3JhcFRleHROb2Rlcywge1xuICAgICAgICAgICAga2V5OiBgJHtub2RlLm5hbWV9LSR7aX1gXG4gICAgICAgICAgfSwgY29udGVudCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lbS5wdXNoKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtO1xuICAgIH0sIFtdKTtcbiAgfTtcbiAgY29uc3QgcmVzdWx0ID0gbWFwQVNUKFt7XG4gICAgZHVtbXk6IHRydWUsXG4gICAgY2hpbGRyZW46IGNoaWxkcmVuIHx8IFtdXG4gIH1dLCBhc3QsIGdldEFzQXJyYXkoY2hpbGRyZW4gfHwgW10pKTtcbiAgcmV0dXJuIGdldENoaWxkcmVuKHJlc3VsdFswXSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIFRyYW5zKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBjaGlsZHJlbixcbiAgICBjb3VudCxcbiAgICBwYXJlbnQsXG4gICAgaTE4bktleSxcbiAgICBjb250ZXh0LFxuICAgIHRPcHRpb25zID0ge30sXG4gICAgdmFsdWVzLFxuICAgIGRlZmF1bHRzLFxuICAgIGNvbXBvbmVudHMsXG4gICAgbnMsXG4gICAgaTE4bjogaTE4bkZyb21Qcm9wcyxcbiAgICB0OiB0RnJvbVByb3BzLFxuICAgIHNob3VsZFVuZXNjYXBlLFxuICAgIC4uLmFkZGl0aW9uYWxQcm9wc1xuICB9ID0gX3JlZjtcbiAgY29uc3QgaTE4biA9IGkxOG5Gcm9tUHJvcHMgfHwgZ2V0STE4bigpO1xuICBpZiAoIWkxOG4pIHtcbiAgICB3YXJuT25jZSgnWW91IHdpbGwgbmVlZCB0byBwYXNzIGluIGFuIGkxOG5leHQgaW5zdGFuY2UgYnkgdXNpbmcgaTE4bmV4dFJlYWN0TW9kdWxlJyk7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIGNvbnN0IHQgPSB0RnJvbVByb3BzIHx8IGkxOG4udC5iaW5kKGkxOG4pIHx8IChrID0+IGspO1xuICBjb25zdCByZWFjdEkxOG5leHRPcHRpb25zID0ge1xuICAgIC4uLmdldERlZmF1bHRzKCksXG4gICAgLi4uKGkxOG4ub3B0aW9ucyAmJiBpMThuLm9wdGlvbnMucmVhY3QpXG4gIH07XG4gIGxldCBuYW1lc3BhY2VzID0gbnMgfHwgdC5ucyB8fCBpMThuLm9wdGlvbnMgJiYgaTE4bi5vcHRpb25zLmRlZmF1bHROUztcbiAgbmFtZXNwYWNlcyA9IGlzU3RyaW5nKG5hbWVzcGFjZXMpID8gW25hbWVzcGFjZXNdIDogbmFtZXNwYWNlcyB8fCBbJ3RyYW5zbGF0aW9uJ107XG4gIGNvbnN0IG5vZGVBc1N0cmluZyA9IG5vZGVzVG9TdHJpbmcoY2hpbGRyZW4sIHJlYWN0STE4bmV4dE9wdGlvbnMpO1xuICBjb25zdCBkZWZhdWx0VmFsdWUgPSBkZWZhdWx0cyB8fCBub2RlQXNTdHJpbmcgfHwgcmVhY3RJMThuZXh0T3B0aW9ucy50cmFuc0VtcHR5Tm9kZVZhbHVlIHx8IGkxOG5LZXk7XG4gIGNvbnN0IHtcbiAgICBoYXNoVHJhbnNLZXlcbiAgfSA9IHJlYWN0STE4bmV4dE9wdGlvbnM7XG4gIGNvbnN0IGtleSA9IGkxOG5LZXkgfHwgKGhhc2hUcmFuc0tleSA/IGhhc2hUcmFuc0tleShub2RlQXNTdHJpbmcgfHwgZGVmYXVsdFZhbHVlKSA6IG5vZGVBc1N0cmluZyB8fCBkZWZhdWx0VmFsdWUpO1xuICBpZiAoaTE4bi5vcHRpb25zICYmIGkxOG4ub3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIGkxOG4ub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpIHtcbiAgICB2YWx1ZXMgPSB2YWx1ZXMgJiYgT2JqZWN0LmtleXModmFsdWVzKS5sZW5ndGggPiAwID8ge1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgLi4uaTE4bi5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlc1xuICAgIH0gOiB7XG4gICAgICAuLi5pMThuLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzXG4gICAgfTtcbiAgfVxuICBjb25zdCBpbnRlcnBvbGF0aW9uT3ZlcnJpZGUgPSB2YWx1ZXMgfHwgY291bnQgIT09IHVuZGVmaW5lZCB8fCAhY2hpbGRyZW4gPyB0T3B0aW9ucy5pbnRlcnBvbGF0aW9uIDoge1xuICAgIGludGVycG9sYXRpb246IHtcbiAgICAgIC4uLnRPcHRpb25zLmludGVycG9sYXRpb24sXG4gICAgICBwcmVmaXg6ICcjJD8nLFxuICAgICAgc3VmZml4OiAnPyQjJ1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY29tYmluZWRUT3B0cyA9IHtcbiAgICAuLi50T3B0aW9ucyxcbiAgICBjb250ZXh0OiBjb250ZXh0IHx8IHRPcHRpb25zLmNvbnRleHQsXG4gICAgY291bnQsXG4gICAgLi4udmFsdWVzLFxuICAgIC4uLmludGVycG9sYXRpb25PdmVycmlkZSxcbiAgICBkZWZhdWx0VmFsdWUsXG4gICAgbnM6IG5hbWVzcGFjZXNcbiAgfTtcbiAgY29uc3QgdHJhbnNsYXRpb24gPSBrZXkgPyB0KGtleSwgY29tYmluZWRUT3B0cykgOiBkZWZhdWx0VmFsdWU7XG4gIGlmIChjb21wb25lbnRzKSB7XG4gICAgT2JqZWN0LmtleXMoY29tcG9uZW50cykuZm9yRWFjaChjID0+IHtcbiAgICAgIGNvbnN0IGNvbXAgPSBjb21wb25lbnRzW2NdO1xuICAgICAgaWYgKHR5cGVvZiBjb21wLnR5cGUgPT09ICdmdW5jdGlvbicgfHwgIWNvbXAucHJvcHMgfHwgIWNvbXAucHJvcHMuY2hpbGRyZW4gfHwgdHJhbnNsYXRpb24uaW5kZXhPZihgJHtjfS8+YCkgPCAwICYmIHRyYW5zbGF0aW9uLmluZGV4T2YoYCR7Y30gLz5gKSA8IDApIHJldHVybjtcbiAgICAgIGZ1bmN0aW9uIENvbXBvbmVudGl6ZWQoKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCBjb21wKTtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudHNbY10gPSBjcmVhdGVFbGVtZW50KENvbXBvbmVudGl6ZWQpO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGNvbnRlbnQgPSByZW5kZXJOb2Rlcyhjb21wb25lbnRzIHx8IGNoaWxkcmVuLCB0cmFuc2xhdGlvbiwgaTE4biwgcmVhY3RJMThuZXh0T3B0aW9ucywgY29tYmluZWRUT3B0cywgc2hvdWxkVW5lc2NhcGUpO1xuICBjb25zdCB1c2VBc1BhcmVudCA9IHBhcmVudCAhPT0gdW5kZWZpbmVkID8gcGFyZW50IDogcmVhY3RJMThuZXh0T3B0aW9ucy5kZWZhdWx0VHJhbnNQYXJlbnQ7XG4gIHJldHVybiB1c2VBc1BhcmVudCA/IGNyZWF0ZUVsZW1lbnQodXNlQXNQYXJlbnQsIGFkZGl0aW9uYWxQcm9wcywgY29udGVudCkgOiBjb250ZW50O1xufSIsImltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAnLi91c2VUcmFuc2xhdGlvbi5qcyc7XG5leHBvcnQgZnVuY3Rpb24gVHJhbnNsYXRpb24ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIG5zLFxuICAgIGNoaWxkcmVuLFxuICAgIC4uLm9wdGlvbnNcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbdCwgaTE4biwgcmVhZHldID0gdXNlVHJhbnNsYXRpb24obnMsIG9wdGlvbnMpO1xuICByZXR1cm4gY2hpbGRyZW4odCwge1xuICAgIGkxOG4sXG4gICAgbG5nOiBpMThuLmxhbmd1YWdlXG4gIH0sIHJlYWR5KTtcbn0iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdHMsIHNldERlZmF1bHRzIH0gZnJvbSAnLi9kZWZhdWx0cy5qcyc7XG5pbXBvcnQgeyBnZXRJMThuLCBzZXRJMThuIH0gZnJvbSAnLi9pMThuSW5zdGFuY2UuanMnO1xuaW1wb3J0IHsgaW5pdFJlYWN0STE4bmV4dCB9IGZyb20gJy4vaW5pdFJlYWN0STE4bmV4dC5qcyc7XG5leHBvcnQgeyBnZXREZWZhdWx0cywgc2V0RGVmYXVsdHMsIGdldEkxOG4sIHNldEkxOG4sIGluaXRSZWFjdEkxOG5leHQgfTtcbmV4cG9ydCBjb25zdCBJMThuQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTtcbmV4cG9ydCBjbGFzcyBSZXBvcnROYW1lc3BhY2VzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy51c2VkTmFtZXNwYWNlcyA9IHt9O1xuICB9XG4gIGFkZFVzZWROYW1lc3BhY2VzKG5hbWVzcGFjZXMpIHtcbiAgICBuYW1lc3BhY2VzLmZvckVhY2gobnMgPT4ge1xuICAgICAgaWYgKCF0aGlzLnVzZWROYW1lc3BhY2VzW25zXSkgdGhpcy51c2VkTmFtZXNwYWNlc1tuc10gPSB0cnVlO1xuICAgIH0pO1xuICB9XG4gIGdldFVzZWROYW1lc3BhY2VzID0gKCkgPT4gT2JqZWN0LmtleXModGhpcy51c2VkTmFtZXNwYWNlcyk7XG59XG5leHBvcnQgY29uc3QgY29tcG9zZUluaXRpYWxQcm9wcyA9IEZvckNvbXBvbmVudCA9PiBhc3luYyBjdHggPT4ge1xuICBjb25zdCBjb21wb25lbnRzSW5pdGlhbFByb3BzID0gRm9yQ29tcG9uZW50LmdldEluaXRpYWxQcm9wcyA/IGF3YWl0IEZvckNvbXBvbmVudC5nZXRJbml0aWFsUHJvcHMoY3R4KSA6IHt9O1xuICBjb25zdCBpMThuSW5pdGlhbFByb3BzID0gZ2V0SW5pdGlhbFByb3BzKCk7XG4gIHJldHVybiB7XG4gICAgLi4uY29tcG9uZW50c0luaXRpYWxQcm9wcyxcbiAgICAuLi5pMThuSW5pdGlhbFByb3BzXG4gIH07XG59O1xuZXhwb3J0IGNvbnN0IGdldEluaXRpYWxQcm9wcyA9ICgpID0+IHtcbiAgY29uc3QgaTE4biA9IGdldEkxOG4oKTtcbiAgY29uc3QgbmFtZXNwYWNlcyA9IGkxOG4ucmVwb3J0TmFtZXNwYWNlcyA/IGkxOG4ucmVwb3J0TmFtZXNwYWNlcy5nZXRVc2VkTmFtZXNwYWNlcygpIDogW107XG4gIGNvbnN0IHJldCA9IHt9O1xuICBjb25zdCBpbml0aWFsSTE4blN0b3JlID0ge307XG4gIGkxOG4ubGFuZ3VhZ2VzLmZvckVhY2gobCA9PiB7XG4gICAgaW5pdGlhbEkxOG5TdG9yZVtsXSA9IHt9O1xuICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICBpbml0aWFsSTE4blN0b3JlW2xdW25zXSA9IGkxOG4uZ2V0UmVzb3VyY2VCdW5kbGUobCwgbnMpIHx8IHt9O1xuICAgIH0pO1xuICB9KTtcbiAgcmV0LmluaXRpYWxJMThuU3RvcmUgPSBpbml0aWFsSTE4blN0b3JlO1xuICByZXQuaW5pdGlhbExhbmd1YWdlID0gaTE4bi5sYW5ndWFnZTtcbiAgcmV0dXJuIHJldDtcbn07IiwiaW1wb3J0IHsgdW5lc2NhcGUgfSBmcm9tICcuL3VuZXNjYXBlLmpzJztcbmxldCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgYmluZEkxOG46ICdsYW5ndWFnZUNoYW5nZWQnLFxuICBiaW5kSTE4blN0b3JlOiAnJyxcbiAgdHJhbnNFbXB0eU5vZGVWYWx1ZTogJycsXG4gIHRyYW5zU3VwcG9ydEJhc2ljSHRtbE5vZGVzOiB0cnVlLFxuICB0cmFuc1dyYXBUZXh0Tm9kZXM6ICcnLFxuICB0cmFuc0tlZXBCYXNpY0h0bWxOb2Rlc0ZvcjogWydicicsICdzdHJvbmcnLCAnaScsICdwJ10sXG4gIHVzZVN1c3BlbnNlOiB0cnVlLFxuICB1bmVzY2FwZVxufTtcbmV4cG9ydCBjb25zdCBzZXREZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAuLi5vcHRpb25zXG4gIH07XG59O1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4gZGVmYXVsdE9wdGlvbnM7IiwibGV0IGkxOG5JbnN0YW5jZTtcbmV4cG9ydCBjb25zdCBzZXRJMThuID0gaW5zdGFuY2UgPT4ge1xuICBpMThuSW5zdGFuY2UgPSBpbnN0YW5jZTtcbn07XG5leHBvcnQgY29uc3QgZ2V0STE4biA9ICgpID0+IGkxOG5JbnN0YW5jZTsiLCJleHBvcnQgeyBUcmFucyB9IGZyb20gJy4vVHJhbnMuanMnO1xuZXhwb3J0IHsgVHJhbnMgYXMgVHJhbnNXaXRob3V0Q29udGV4dCB9IGZyb20gJy4vVHJhbnNXaXRob3V0Q29udGV4dC5qcyc7XG5leHBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJy4vdXNlVHJhbnNsYXRpb24uanMnO1xuZXhwb3J0IHsgd2l0aFRyYW5zbGF0aW9uIH0gZnJvbSAnLi93aXRoVHJhbnNsYXRpb24uanMnO1xuZXhwb3J0IHsgVHJhbnNsYXRpb24gfSBmcm9tICcuL1RyYW5zbGF0aW9uLmpzJztcbmV4cG9ydCB7IEkxOG5leHRQcm92aWRlciB9IGZyb20gJy4vSTE4bmV4dFByb3ZpZGVyLmpzJztcbmV4cG9ydCB7IHdpdGhTU1IgfSBmcm9tICcuL3dpdGhTU1IuanMnO1xuZXhwb3J0IHsgdXNlU1NSIH0gZnJvbSAnLi91c2VTU1IuanMnO1xuZXhwb3J0IHsgaW5pdFJlYWN0STE4bmV4dCB9IGZyb20gJy4vaW5pdFJlYWN0STE4bmV4dC5qcyc7XG5leHBvcnQgeyBzZXREZWZhdWx0cywgZ2V0RGVmYXVsdHMgfSBmcm9tICcuL2RlZmF1bHRzLmpzJztcbmV4cG9ydCB7IHNldEkxOG4sIGdldEkxOG4gfSBmcm9tICcuL2kxOG5JbnN0YW5jZS5qcyc7XG5leHBvcnQgeyBJMThuQ29udGV4dCwgY29tcG9zZUluaXRpYWxQcm9wcywgZ2V0SW5pdGlhbFByb3BzIH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmV4cG9ydCBjb25zdCBkYXRlID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3QgdGltZSA9ICgpID0+ICcnO1xuZXhwb3J0IGNvbnN0IG51bWJlciA9ICgpID0+ICcnO1xuZXhwb3J0IGNvbnN0IHNlbGVjdCA9ICgpID0+ICcnO1xuZXhwb3J0IGNvbnN0IHBsdXJhbCA9ICgpID0+ICcnO1xuZXhwb3J0IGNvbnN0IHNlbGVjdE9yZGluYWwgPSAoKSA9PiAnJzsiLCJpbXBvcnQgeyBzZXREZWZhdWx0cyB9IGZyb20gJy4vZGVmYXVsdHMuanMnO1xuaW1wb3J0IHsgc2V0STE4biB9IGZyb20gJy4vaTE4bkluc3RhbmNlLmpzJztcbmV4cG9ydCBjb25zdCBpbml0UmVhY3RJMThuZXh0ID0ge1xuICB0eXBlOiAnM3JkUGFydHknLFxuICBpbml0KGluc3RhbmNlKSB7XG4gICAgc2V0RGVmYXVsdHMoaW5zdGFuY2Uub3B0aW9ucy5yZWFjdCk7XG4gICAgc2V0STE4bihpbnN0YW5jZSk7XG4gIH1cbn07IiwiY29uc3QgbWF0Y2hIdG1sRW50aXR5ID0gLyYoPzphbXB8IzM4fGx0fCM2MHxndHwjNjJ8YXBvc3wjMzl8cXVvdHwjMzR8bmJzcHwjMTYwfGNvcHl8IzE2OXxyZWd8IzE3NHxoZWxsaXB8IzgyMzB8I3gyRnwjNDcpOy9nO1xuY29uc3QgaHRtbEVudGl0aWVzID0ge1xuICAnJmFtcDsnOiAnJicsXG4gICcmIzM4Oyc6ICcmJyxcbiAgJyZsdDsnOiAnPCcsXG4gICcmIzYwOyc6ICc8JyxcbiAgJyZndDsnOiAnPicsXG4gICcmIzYyOyc6ICc+JyxcbiAgJyZhcG9zOyc6IFwiJ1wiLFxuICAnJiMzOTsnOiBcIidcIixcbiAgJyZxdW90Oyc6ICdcIicsXG4gICcmIzM0Oyc6ICdcIicsXG4gICcmbmJzcDsnOiAnICcsXG4gICcmIzE2MDsnOiAnICcsXG4gICcmY29weTsnOiAnwqknLFxuICAnJiMxNjk7JzogJ8KpJyxcbiAgJyZyZWc7JzogJ8KuJyxcbiAgJyYjMTc0Oyc6ICfCricsXG4gICcmaGVsbGlwOyc6ICfigKYnLFxuICAnJiM4MjMwOyc6ICfigKYnLFxuICAnJiN4MkY7JzogJy8nLFxuICAnJiM0NzsnOiAnLydcbn07XG5jb25zdCB1bmVzY2FwZUh0bWxFbnRpdHkgPSBtID0+IGh0bWxFbnRpdGllc1ttXTtcbmV4cG9ydCBjb25zdCB1bmVzY2FwZSA9IHRleHQgPT4gdGV4dC5yZXBsYWNlKG1hdGNoSHRtbEVudGl0eSwgdW5lc2NhcGVIdG1sRW50aXR5KTsiLCJpbXBvcnQgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0STE4biwgSTE4bkNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQuanMnO1xuZXhwb3J0IGNvbnN0IHVzZVNTUiA9IGZ1bmN0aW9uIChpbml0aWFsSTE4blN0b3JlLCBpbml0aWFsTGFuZ3VhZ2UpIHtcbiAgbGV0IHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgY29uc3Qge1xuICAgIGkxOG46IGkxOG5Gcm9tUHJvcHNcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Db250ZXh0XG4gIH0gPSB1c2VDb250ZXh0KEkxOG5Db250ZXh0KSB8fCB7fTtcbiAgY29uc3QgaTE4biA9IGkxOG5Gcm9tUHJvcHMgfHwgaTE4bkZyb21Db250ZXh0IHx8IGdldEkxOG4oKTtcbiAgaWYgKGkxOG4ub3B0aW9ucyAmJiBpMThuLm9wdGlvbnMuaXNDbG9uZSkgcmV0dXJuO1xuICBpZiAoaW5pdGlhbEkxOG5TdG9yZSAmJiAhaTE4bi5pbml0aWFsaXplZFN0b3JlT25jZSkge1xuICAgIGkxOG4uc2VydmljZXMucmVzb3VyY2VTdG9yZS5kYXRhID0gaW5pdGlhbEkxOG5TdG9yZTtcbiAgICBpMThuLm9wdGlvbnMubnMgPSBPYmplY3QudmFsdWVzKGluaXRpYWxJMThuU3RvcmUpLnJlZHVjZSgobWVtLCBsbmdSZXNvdXJjZXMpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKGxuZ1Jlc291cmNlcykuZm9yRWFjaChucyA9PiB7XG4gICAgICAgIGlmIChtZW0uaW5kZXhPZihucykgPCAwKSBtZW0ucHVzaChucyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtZW07XG4gICAgfSwgaTE4bi5vcHRpb25zLm5zKTtcbiAgICBpMThuLmluaXRpYWxpemVkU3RvcmVPbmNlID0gdHJ1ZTtcbiAgICBpMThuLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICB9XG4gIGlmIChpbml0aWFsTGFuZ3VhZ2UgJiYgIWkxOG4uaW5pdGlhbGl6ZWRMYW5ndWFnZU9uY2UpIHtcbiAgICBpMThuLmNoYW5nZUxhbmd1YWdlKGluaXRpYWxMYW5ndWFnZSk7XG4gICAgaTE4bi5pbml0aWFsaXplZExhbmd1YWdlT25jZSA9IHRydWU7XG4gIH1cbn07IiwiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ29udGV4dCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldEkxOG4sIGdldERlZmF1bHRzLCBSZXBvcnROYW1lc3BhY2VzLCBJMThuQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5pbXBvcnQgeyB3YXJuT25jZSwgbG9hZE5hbWVzcGFjZXMsIGxvYWRMYW5ndWFnZXMsIGhhc0xvYWRlZE5hbWVzcGFjZSwgaXNTdHJpbmcsIGlzT2JqZWN0IH0gZnJvbSAnLi91dGlscy5qcyc7XG5jb25zdCB1c2VQcmV2aW91cyA9ICh2YWx1ZSwgaWdub3JlKSA9PiB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlZi5jdXJyZW50ID0gaWdub3JlID8gcmVmLmN1cnJlbnQgOiB2YWx1ZTtcbiAgfSwgW3ZhbHVlLCBpZ25vcmVdKTtcbiAgcmV0dXJuIHJlZi5jdXJyZW50O1xufTtcbmNvbnN0IGFsd2F5c05ld1QgPSAoaTE4biwgbGFuZ3VhZ2UsIG5hbWVzcGFjZSwga2V5UHJlZml4KSA9PiBpMThuLmdldEZpeGVkVChsYW5ndWFnZSwgbmFtZXNwYWNlLCBrZXlQcmVmaXgpO1xuY29uc3QgdXNlTWVtb2l6ZWRUID0gKGkxOG4sIGxhbmd1YWdlLCBuYW1lc3BhY2UsIGtleVByZWZpeCkgPT4gdXNlQ2FsbGJhY2soYWx3YXlzTmV3VChpMThuLCBsYW5ndWFnZSwgbmFtZXNwYWNlLCBrZXlQcmVmaXgpLCBbaTE4biwgbGFuZ3VhZ2UsIG5hbWVzcGFjZSwga2V5UHJlZml4XSk7XG5leHBvcnQgY29uc3QgdXNlVHJhbnNsYXRpb24gPSBmdW5jdGlvbiAobnMpIHtcbiAgbGV0IHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgY29uc3Qge1xuICAgIGkxOG46IGkxOG5Gcm9tUHJvcHNcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Db250ZXh0LFxuICAgIGRlZmF1bHROUzogZGVmYXVsdE5TRnJvbUNvbnRleHRcbiAgfSA9IHVzZUNvbnRleHQoSTE4bkNvbnRleHQpIHx8IHt9O1xuICBjb25zdCBpMThuID0gaTE4bkZyb21Qcm9wcyB8fCBpMThuRnJvbUNvbnRleHQgfHwgZ2V0STE4bigpO1xuICBpZiAoaTE4biAmJiAhaTE4bi5yZXBvcnROYW1lc3BhY2VzKSBpMThuLnJlcG9ydE5hbWVzcGFjZXMgPSBuZXcgUmVwb3J0TmFtZXNwYWNlcygpO1xuICBpZiAoIWkxOG4pIHtcbiAgICB3YXJuT25jZSgnWW91IHdpbGwgbmVlZCB0byBwYXNzIGluIGFuIGkxOG5leHQgaW5zdGFuY2UgYnkgdXNpbmcgaW5pdFJlYWN0STE4bmV4dCcpO1xuICAgIGNvbnN0IG5vdFJlYWR5VCA9IChrLCBvcHRzT3JEZWZhdWx0VmFsdWUpID0+IHtcbiAgICAgIGlmIChpc1N0cmluZyhvcHRzT3JEZWZhdWx0VmFsdWUpKSByZXR1cm4gb3B0c09yRGVmYXVsdFZhbHVlO1xuICAgICAgaWYgKGlzT2JqZWN0KG9wdHNPckRlZmF1bHRWYWx1ZSkgJiYgaXNTdHJpbmcob3B0c09yRGVmYXVsdFZhbHVlLmRlZmF1bHRWYWx1ZSkpIHJldHVybiBvcHRzT3JEZWZhdWx0VmFsdWUuZGVmYXVsdFZhbHVlO1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoaykgPyBrW2subGVuZ3RoIC0gMV0gOiBrO1xuICAgIH07XG4gICAgY29uc3QgcmV0Tm90UmVhZHkgPSBbbm90UmVhZHlULCB7fSwgZmFsc2VdO1xuICAgIHJldE5vdFJlYWR5LnQgPSBub3RSZWFkeVQ7XG4gICAgcmV0Tm90UmVhZHkuaTE4biA9IHt9O1xuICAgIHJldE5vdFJlYWR5LnJlYWR5ID0gZmFsc2U7XG4gICAgcmV0dXJuIHJldE5vdFJlYWR5O1xuICB9XG4gIGlmIChpMThuLm9wdGlvbnMucmVhY3QgJiYgaTE4bi5vcHRpb25zLnJlYWN0LndhaXQgIT09IHVuZGVmaW5lZCkgd2Fybk9uY2UoJ0l0IHNlZW1zIHlvdSBhcmUgc3RpbGwgdXNpbmcgdGhlIG9sZCB3YWl0IG9wdGlvbiwgeW91IG1heSBtaWdyYXRlIHRvIHRoZSBuZXcgdXNlU3VzcGVuc2UgYmVoYXZpb3VyLicpO1xuICBjb25zdCBpMThuT3B0aW9ucyA9IHtcbiAgICAuLi5nZXREZWZhdWx0cygpLFxuICAgIC4uLmkxOG4ub3B0aW9ucy5yZWFjdCxcbiAgICAuLi5wcm9wc1xuICB9O1xuICBjb25zdCB7XG4gICAgdXNlU3VzcGVuc2UsXG4gICAga2V5UHJlZml4XG4gIH0gPSBpMThuT3B0aW9ucztcbiAgbGV0IG5hbWVzcGFjZXMgPSBucyB8fCBkZWZhdWx0TlNGcm9tQ29udGV4dCB8fCBpMThuLm9wdGlvbnMgJiYgaTE4bi5vcHRpb25zLmRlZmF1bHROUztcbiAgbmFtZXNwYWNlcyA9IGlzU3RyaW5nKG5hbWVzcGFjZXMpID8gW25hbWVzcGFjZXNdIDogbmFtZXNwYWNlcyB8fCBbJ3RyYW5zbGF0aW9uJ107XG4gIGlmIChpMThuLnJlcG9ydE5hbWVzcGFjZXMuYWRkVXNlZE5hbWVzcGFjZXMpIGkxOG4ucmVwb3J0TmFtZXNwYWNlcy5hZGRVc2VkTmFtZXNwYWNlcyhuYW1lc3BhY2VzKTtcbiAgY29uc3QgcmVhZHkgPSAoaTE4bi5pc0luaXRpYWxpemVkIHx8IGkxOG4uaW5pdGlhbGl6ZWRTdG9yZU9uY2UpICYmIG5hbWVzcGFjZXMuZXZlcnkobiA9PiBoYXNMb2FkZWROYW1lc3BhY2UobiwgaTE4biwgaTE4bk9wdGlvbnMpKTtcbiAgY29uc3QgbWVtb0dldFQgPSB1c2VNZW1vaXplZFQoaTE4biwgcHJvcHMubG5nIHx8IG51bGwsIGkxOG5PcHRpb25zLm5zTW9kZSA9PT0gJ2ZhbGxiYWNrJyA/IG5hbWVzcGFjZXMgOiBuYW1lc3BhY2VzWzBdLCBrZXlQcmVmaXgpO1xuICBjb25zdCBnZXRUID0gKCkgPT4gbWVtb0dldFQ7XG4gIGNvbnN0IGdldE5ld1QgPSAoKSA9PiBhbHdheXNOZXdUKGkxOG4sIHByb3BzLmxuZyB8fCBudWxsLCBpMThuT3B0aW9ucy5uc01vZGUgPT09ICdmYWxsYmFjaycgPyBuYW1lc3BhY2VzIDogbmFtZXNwYWNlc1swXSwga2V5UHJlZml4KTtcbiAgY29uc3QgW3QsIHNldFRdID0gdXNlU3RhdGUoZ2V0VCk7XG4gIGxldCBqb2luZWROUyA9IG5hbWVzcGFjZXMuam9pbigpO1xuICBpZiAocHJvcHMubG5nKSBqb2luZWROUyA9IGAke3Byb3BzLmxuZ30ke2pvaW5lZE5TfWA7XG4gIGNvbnN0IHByZXZpb3VzSm9pbmVkTlMgPSB1c2VQcmV2aW91cyhqb2luZWROUyk7XG4gIGNvbnN0IGlzTW91bnRlZCA9IHVzZVJlZih0cnVlKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBiaW5kSTE4bixcbiAgICAgIGJpbmRJMThuU3RvcmVcbiAgICB9ID0gaTE4bk9wdGlvbnM7XG4gICAgaXNNb3VudGVkLmN1cnJlbnQgPSB0cnVlO1xuICAgIGlmICghcmVhZHkgJiYgIXVzZVN1c3BlbnNlKSB7XG4gICAgICBpZiAocHJvcHMubG5nKSB7XG4gICAgICAgIGxvYWRMYW5ndWFnZXMoaTE4biwgcHJvcHMubG5nLCBuYW1lc3BhY2VzLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSBzZXRUKGdldE5ld1QpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWROYW1lc3BhY2VzKGkxOG4sIG5hbWVzcGFjZXMsICgpID0+IHtcbiAgICAgICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHNldFQoZ2V0TmV3VCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVhZHkgJiYgcHJldmlvdXNKb2luZWROUyAmJiBwcmV2aW91c0pvaW5lZE5TICE9PSBqb2luZWROUyAmJiBpc01vdW50ZWQuY3VycmVudCkge1xuICAgICAgc2V0VChnZXROZXdUKTtcbiAgICB9XG4gICAgY29uc3QgYm91bmRSZXNldCA9ICgpID0+IHtcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkgc2V0VChnZXROZXdUKTtcbiAgICB9O1xuICAgIGlmIChiaW5kSTE4biAmJiBpMThuKSBpMThuLm9uKGJpbmRJMThuLCBib3VuZFJlc2V0KTtcbiAgICBpZiAoYmluZEkxOG5TdG9yZSAmJiBpMThuKSBpMThuLnN0b3JlLm9uKGJpbmRJMThuU3RvcmUsIGJvdW5kUmVzZXQpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQuY3VycmVudCA9IGZhbHNlO1xuICAgICAgaWYgKGJpbmRJMThuICYmIGkxOG4pIGJpbmRJMThuLnNwbGl0KCcgJykuZm9yRWFjaChlID0+IGkxOG4ub2ZmKGUsIGJvdW5kUmVzZXQpKTtcbiAgICAgIGlmIChiaW5kSTE4blN0b3JlICYmIGkxOG4pIGJpbmRJMThuU3RvcmUuc3BsaXQoJyAnKS5mb3JFYWNoKGUgPT4gaTE4bi5zdG9yZS5vZmYoZSwgYm91bmRSZXNldCkpO1xuICAgIH07XG4gIH0sIFtpMThuLCBqb2luZWROU10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc01vdW50ZWQuY3VycmVudCAmJiByZWFkeSkge1xuICAgICAgc2V0VChnZXRUKTtcbiAgICB9XG4gIH0sIFtpMThuLCBrZXlQcmVmaXgsIHJlYWR5XSk7XG4gIGNvbnN0IHJldCA9IFt0LCBpMThuLCByZWFkeV07XG4gIHJldC50ID0gdDtcbiAgcmV0LmkxOG4gPSBpMThuO1xuICByZXQucmVhZHkgPSByZWFkeTtcbiAgaWYgKHJlYWR5KSByZXR1cm4gcmV0O1xuICBpZiAoIXJlYWR5ICYmICF1c2VTdXNwZW5zZSkgcmV0dXJuIHJldDtcbiAgdGhyb3cgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgaWYgKHByb3BzLmxuZykge1xuICAgICAgbG9hZExhbmd1YWdlcyhpMThuLCBwcm9wcy5sbmcsIG5hbWVzcGFjZXMsICgpID0+IHJlc29sdmUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvYWROYW1lc3BhY2VzKGkxOG4sIG5hbWVzcGFjZXMsICgpID0+IHJlc29sdmUoKSk7XG4gICAgfVxuICB9KTtcbn07IiwiZXhwb3J0IGZ1bmN0aW9uIHdhcm4oKSB7XG4gIGlmIChjb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pKSBhcmdzWzBdID0gYHJlYWN0LWkxOG5leHQ6OiAke2FyZ3NbMF19YDtcbiAgICBjb25zb2xlLndhcm4oLi4uYXJncyk7XG4gIH1cbn1cbmNvbnN0IGFscmVhZHlXYXJuZWQgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiB3YXJuT25jZSgpIHtcbiAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG4gIGlmIChpc1N0cmluZyhhcmdzWzBdKSAmJiBhbHJlYWR5V2FybmVkW2FyZ3NbMF1dKSByZXR1cm47XG4gIGlmIChpc1N0cmluZyhhcmdzWzBdKSkgYWxyZWFkeVdhcm5lZFthcmdzWzBdXSA9IG5ldyBEYXRlKCk7XG4gIHdhcm4oLi4uYXJncyk7XG59XG5jb25zdCBsb2FkZWRDbGIgPSAoaTE4biwgY2IpID0+ICgpID0+IHtcbiAgaWYgKGkxOG4uaXNJbml0aWFsaXplZCkge1xuICAgIGNiKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZWQgPSAoKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaTE4bi5vZmYoJ2luaXRpYWxpemVkJywgaW5pdGlhbGl6ZWQpO1xuICAgICAgfSwgMCk7XG4gICAgICBjYigpO1xuICAgIH07XG4gICAgaTE4bi5vbignaW5pdGlhbGl6ZWQnLCBpbml0aWFsaXplZCk7XG4gIH1cbn07XG5leHBvcnQgY29uc3QgbG9hZE5hbWVzcGFjZXMgPSAoaTE4biwgbnMsIGNiKSA9PiB7XG4gIGkxOG4ubG9hZE5hbWVzcGFjZXMobnMsIGxvYWRlZENsYihpMThuLCBjYikpO1xufTtcbmV4cG9ydCBjb25zdCBsb2FkTGFuZ3VhZ2VzID0gKGkxOG4sIGxuZywgbnMsIGNiKSA9PiB7XG4gIGlmIChpc1N0cmluZyhucykpIG5zID0gW25zXTtcbiAgbnMuZm9yRWFjaChuID0+IHtcbiAgICBpZiAoaTE4bi5vcHRpb25zLm5zLmluZGV4T2YobikgPCAwKSBpMThuLm9wdGlvbnMubnMucHVzaChuKTtcbiAgfSk7XG4gIGkxOG4ubG9hZExhbmd1YWdlcyhsbmcsIGxvYWRlZENsYihpMThuLCBjYikpO1xufTtcbmNvbnN0IG9sZEkxOG5leHRIYXNMb2FkZWROYW1lc3BhY2UgPSBmdW5jdGlvbiAobnMsIGkxOG4pIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICBjb25zdCBsbmcgPSBpMThuLmxhbmd1YWdlc1swXTtcbiAgY29uc3QgZmFsbGJhY2tMbmcgPSBpMThuLm9wdGlvbnMgPyBpMThuLm9wdGlvbnMuZmFsbGJhY2tMbmcgOiBmYWxzZTtcbiAgY29uc3QgbGFzdExuZyA9IGkxOG4ubGFuZ3VhZ2VzW2kxOG4ubGFuZ3VhZ2VzLmxlbmd0aCAtIDFdO1xuICBpZiAobG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSByZXR1cm4gdHJ1ZTtcbiAgY29uc3QgbG9hZE5vdFBlbmRpbmcgPSAobCwgbikgPT4ge1xuICAgIGNvbnN0IGxvYWRTdGF0ZSA9IGkxOG4uc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5zdGF0ZVtgJHtsfXwke259YF07XG4gICAgcmV0dXJuIGxvYWRTdGF0ZSA9PT0gLTEgfHwgbG9hZFN0YXRlID09PSAyO1xuICB9O1xuICBpZiAob3B0aW9ucy5iaW5kSTE4biAmJiBvcHRpb25zLmJpbmRJMThuLmluZGV4T2YoJ2xhbmd1YWdlQ2hhbmdpbmcnKSA+IC0xICYmIGkxOG4uc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5iYWNrZW5kICYmIGkxOG4uaXNMYW5ndWFnZUNoYW5naW5nVG8gJiYgIWxvYWROb3RQZW5kaW5nKGkxOG4uaXNMYW5ndWFnZUNoYW5naW5nVG8sIG5zKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoaTE4bi5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkgcmV0dXJuIHRydWU7XG4gIGlmICghaTE4bi5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgfHwgaTE4bi5vcHRpb25zLnJlc291cmNlcyAmJiAhaTE4bi5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKGxvYWROb3RQZW5kaW5nKGxuZywgbnMpICYmICghZmFsbGJhY2tMbmcgfHwgbG9hZE5vdFBlbmRpbmcobGFzdExuZywgbnMpKSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn07XG5leHBvcnQgY29uc3QgaGFzTG9hZGVkTmFtZXNwYWNlID0gZnVuY3Rpb24gKG5zLCBpMThuKSB7XG4gIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgaWYgKCFpMThuLmxhbmd1YWdlcyB8fCAhaTE4bi5sYW5ndWFnZXMubGVuZ3RoKSB7XG4gICAgd2Fybk9uY2UoJ2kxOG4ubGFuZ3VhZ2VzIHdlcmUgdW5kZWZpbmVkIG9yIGVtcHR5JywgaTE4bi5sYW5ndWFnZXMpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IGlzTmV3ZXJJMThuZXh0ID0gaTE4bi5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgIT09IHVuZGVmaW5lZDtcbiAgaWYgKCFpc05ld2VySTE4bmV4dCkge1xuICAgIHJldHVybiBvbGRJMThuZXh0SGFzTG9hZGVkTmFtZXNwYWNlKG5zLCBpMThuLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gaTE4bi5oYXNMb2FkZWROYW1lc3BhY2UobnMsIHtcbiAgICBsbmc6IG9wdGlvbnMubG5nLFxuICAgIHByZWNoZWNrOiAoaTE4bkluc3RhbmNlLCBsb2FkTm90UGVuZGluZykgPT4ge1xuICAgICAgaWYgKG9wdGlvbnMuYmluZEkxOG4gJiYgb3B0aW9ucy5iaW5kSTE4bi5pbmRleE9mKCdsYW5ndWFnZUNoYW5naW5nJykgPiAtMSAmJiBpMThuSW5zdGFuY2Uuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5iYWNrZW5kICYmIGkxOG5JbnN0YW5jZS5pc0xhbmd1YWdlQ2hhbmdpbmdUbyAmJiAhbG9hZE5vdFBlbmRpbmcoaTE4bkluc3RhbmNlLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvLCBucykpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xufTtcbmV4cG9ydCBjb25zdCBnZXREaXNwbGF5TmFtZSA9IENvbXBvbmVudCA9PiBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgKGlzU3RyaW5nKENvbXBvbmVudCkgJiYgQ29tcG9uZW50Lmxlbmd0aCA+IDAgPyBDb21wb25lbnQgOiAnVW5rbm93bicpO1xuZXhwb3J0IGNvbnN0IGlzU3RyaW5nID0gb2JqID0+IHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xuZXhwb3J0IGNvbnN0IGlzT2JqZWN0ID0gb2JqID0+IHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbDsiLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlU1NSIH0gZnJvbSAnLi91c2VTU1IuanMnO1xuaW1wb3J0IHsgY29tcG9zZUluaXRpYWxQcm9wcyB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5pbXBvcnQgeyBnZXREaXNwbGF5TmFtZSB9IGZyb20gJy4vdXRpbHMuanMnO1xuZXhwb3J0IGNvbnN0IHdpdGhTU1IgPSAoKSA9PiBmdW5jdGlvbiBFeHRlbmQoV3JhcHBlZENvbXBvbmVudCkge1xuICBmdW5jdGlvbiBJMThuZXh0V2l0aFNTUihfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIGluaXRpYWxJMThuU3RvcmUsXG4gICAgICBpbml0aWFsTGFuZ3VhZ2UsXG4gICAgICAuLi5yZXN0XG4gICAgfSA9IF9yZWY7XG4gICAgdXNlU1NSKGluaXRpYWxJMThuU3RvcmUsIGluaXRpYWxMYW5ndWFnZSk7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoV3JhcHBlZENvbXBvbmVudCwge1xuICAgICAgLi4ucmVzdFxuICAgIH0pO1xuICB9XG4gIEkxOG5leHRXaXRoU1NSLmdldEluaXRpYWxQcm9wcyA9IGNvbXBvc2VJbml0aWFsUHJvcHMoV3JhcHBlZENvbXBvbmVudCk7XG4gIEkxOG5leHRXaXRoU1NSLmRpc3BsYXlOYW1lID0gYHdpdGhJMThuZXh0U1NSKCR7Z2V0RGlzcGxheU5hbWUoV3JhcHBlZENvbXBvbmVudCl9KWA7XG4gIEkxOG5leHRXaXRoU1NSLldyYXBwZWRDb21wb25lbnQgPSBXcmFwcGVkQ29tcG9uZW50O1xuICByZXR1cm4gSTE4bmV4dFdpdGhTU1I7XG59OyIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIGZvcndhcmRSZWYgYXMgZm9yd2FyZFJlZlJlYWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICcuL3VzZVRyYW5zbGF0aW9uLmpzJztcbmltcG9ydCB7IGdldERpc3BsYXlOYW1lIH0gZnJvbSAnLi91dGlscy5qcyc7XG5leHBvcnQgY29uc3Qgd2l0aFRyYW5zbGF0aW9uID0gZnVuY3Rpb24gKG5zKSB7XG4gIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIEV4dGVuZChXcmFwcGVkQ29tcG9uZW50KSB7XG4gICAgZnVuY3Rpb24gSTE4bmV4dFdpdGhUcmFuc2xhdGlvbihfcmVmKSB7XG4gICAgICBsZXQge1xuICAgICAgICBmb3J3YXJkZWRSZWYsXG4gICAgICAgIC4uLnJlc3RcbiAgICAgIH0gPSBfcmVmO1xuICAgICAgY29uc3QgW3QsIGkxOG4sIHJlYWR5XSA9IHVzZVRyYW5zbGF0aW9uKG5zLCB7XG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIGtleVByZWZpeDogb3B0aW9ucy5rZXlQcmVmaXhcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcGFzc0Rvd25Qcm9wcyA9IHtcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgdCxcbiAgICAgICAgaTE4bixcbiAgICAgICAgdFJlYWR5OiByZWFkeVxuICAgICAgfTtcbiAgICAgIGlmIChvcHRpb25zLndpdGhSZWYgJiYgZm9yd2FyZGVkUmVmKSB7XG4gICAgICAgIHBhc3NEb3duUHJvcHMucmVmID0gZm9yd2FyZGVkUmVmO1xuICAgICAgfSBlbHNlIGlmICghb3B0aW9ucy53aXRoUmVmICYmIGZvcndhcmRlZFJlZikge1xuICAgICAgICBwYXNzRG93blByb3BzLmZvcndhcmRlZFJlZiA9IGZvcndhcmRlZFJlZjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KFdyYXBwZWRDb21wb25lbnQsIHBhc3NEb3duUHJvcHMpO1xuICAgIH1cbiAgICBJMThuZXh0V2l0aFRyYW5zbGF0aW9uLmRpc3BsYXlOYW1lID0gYHdpdGhJMThuZXh0VHJhbnNsYXRpb24oJHtnZXREaXNwbGF5TmFtZShXcmFwcGVkQ29tcG9uZW50KX0pYDtcbiAgICBJMThuZXh0V2l0aFRyYW5zbGF0aW9uLldyYXBwZWRDb21wb25lbnQgPSBXcmFwcGVkQ29tcG9uZW50O1xuICAgIGNvbnN0IGZvcndhcmRSZWYgPSAocHJvcHMsIHJlZikgPT4gY3JlYXRlRWxlbWVudChJMThuZXh0V2l0aFRyYW5zbGF0aW9uLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgZm9yd2FyZGVkUmVmOiByZWZcbiAgICB9KSk7XG4gICAgcmV0dXJuIG9wdGlvbnMud2l0aFJlZiA/IGZvcndhcmRSZWZSZWFjdChmb3J3YXJkUmVmKSA6IEkxOG5leHRXaXRoVHJhbnNsYXRpb247XG4gIH07XG59OyIsIi8qKlxuICogQGxpY2Vuc2UgUmVhY3RcbiAqIHJlYWN0LmRldmVsb3BtZW50LmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJlxuICAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyhtZXRob2ROYW1lLCBpbmZvKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29tcG9uZW50LnByb3RvdHlwZSwgbWV0aG9kTmFtZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBcIiVzKC4uLikgaXMgZGVwcmVjYXRlZCBpbiBwbGFpbiBKYXZhU2NyaXB0IFJlYWN0IGNsYXNzZXMuICVzXCIsXG4gICAgICAgICAgICBpbmZvWzBdLFxuICAgICAgICAgICAgaW5mb1sxXVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpIHtcbiAgICAgIGlmIChudWxsID09PSBtYXliZUl0ZXJhYmxlIHx8IFwib2JqZWN0XCIgIT09IHR5cGVvZiBtYXliZUl0ZXJhYmxlKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIG1heWJlSXRlcmFibGUgPVxuICAgICAgICAoTUFZQkVfSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbTUFZQkVfSVRFUkFUT1JfU1lNQk9MXSkgfHxcbiAgICAgICAgbWF5YmVJdGVyYWJsZVtcIkBAaXRlcmF0b3JcIl07XG4gICAgICByZXR1cm4gXCJmdW5jdGlvblwiID09PSB0eXBlb2YgbWF5YmVJdGVyYWJsZSA/IG1heWJlSXRlcmFibGUgOiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgY2FsbGVyTmFtZSkge1xuICAgICAgcHVibGljSW5zdGFuY2UgPVxuICAgICAgICAoKHB1YmxpY0luc3RhbmNlID0gcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IpICYmXG4gICAgICAgICAgKHB1YmxpY0luc3RhbmNlLmRpc3BsYXlOYW1lIHx8IHB1YmxpY0luc3RhbmNlLm5hbWUpKSB8fFxuICAgICAgICBcIlJlYWN0Q2xhc3NcIjtcbiAgICAgIHZhciB3YXJuaW5nS2V5ID0gcHVibGljSW5zdGFuY2UgKyBcIi5cIiArIGNhbGxlck5hbWU7XG4gICAgICBkaWRXYXJuU3RhdGVVcGRhdGVGb3JVbm1vdW50ZWRDb21wb25lbnRbd2FybmluZ0tleV0gfHxcbiAgICAgICAgKGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJDYW4ndCBjYWxsICVzIG9uIGEgY29tcG9uZW50IHRoYXQgaXMgbm90IHlldCBtb3VudGVkLiBUaGlzIGlzIGEgbm8tb3AsIGJ1dCBpdCBtaWdodCBpbmRpY2F0ZSBhIGJ1ZyBpbiB5b3VyIGFwcGxpY2F0aW9uLiBJbnN0ZWFkLCBhc3NpZ24gdG8gYHRoaXMuc3RhdGVgIGRpcmVjdGx5IG9yIGRlZmluZSBhIGBzdGF0ZSA9IHt9O2AgY2xhc3MgcHJvcGVydHkgd2l0aCB0aGUgZGVzaXJlZCBzdGF0ZSBpbiB0aGUgJXMgY29tcG9uZW50LlwiLFxuICAgICAgICAgIGNhbGxlck5hbWUsXG4gICAgICAgICAgcHVibGljSW5zdGFuY2VcbiAgICAgICAgKSxcbiAgICAgICAgKGRpZFdhcm5TdGF0ZVVwZGF0ZUZvclVubW91bnRlZENvbXBvbmVudFt3YXJuaW5nS2V5XSA9ICEwKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIENvbXBvbmVudChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgIHRoaXMucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ29tcG9uZW50RHVtbXkoKSB7fVxuICAgIGZ1bmN0aW9uIFB1cmVDb21wb25lbnQocHJvcHMsIGNvbnRleHQsIHVwZGF0ZXIpIHtcbiAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgICAgIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tLZXlTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICExO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSAhMDtcbiAgICAgIH1cbiAgICAgIGlmIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQpIHtcbiAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gY29uc29sZTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdC5lcnJvcjtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMCA9XG4gICAgICAgICAgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFN5bWJvbCAmJlxuICAgICAgICAgICAgU3ltYm9sLnRvU3RyaW5nVGFnICYmXG4gICAgICAgICAgICB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddKSB8fFxuICAgICAgICAgIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHxcbiAgICAgICAgICBcIk9iamVjdFwiO1xuICAgICAgICBKU0NvbXBpbGVyX3RlbXBfY29uc3QuY2FsbChcbiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQsXG4gICAgICAgICAgXCJUaGUgcHJvdmlkZWQga2V5IGlzIGFuIHVuc3VwcG9ydGVkIHR5cGUgJXMuIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLlwiLFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpIHtcbiAgICAgIGlmIChudWxsID09IHR5cGUpIHJldHVybiBudWxsO1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHR5cGUpXG4gICAgICAgIHJldHVybiB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9DTElFTlRfUkVGRVJFTkNFXG4gICAgICAgICAgPyBudWxsXG4gICAgICAgICAgOiB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBudWxsO1xuICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0eXBlKSByZXR1cm4gdHlwZTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFJFQUNUX0ZSQUdNRU5UX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiRnJhZ21lbnRcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlByb2ZpbGVyXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1RSSUNUX01PREVfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdHJpY3RNb2RlXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZVwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZUxpc3RcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9BQ1RJVklUWV9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIkFjdGl2aXR5XCI7XG4gICAgICB9XG4gICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHR5cGUpXG4gICAgICAgIHN3aXRjaCAoXG4gICAgICAgICAgKFwibnVtYmVyXCIgPT09IHR5cGVvZiB0eXBlLnRhZyAmJlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJSZWNlaXZlZCBhbiB1bmV4cGVjdGVkIG9iamVjdCBpbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoKS4gVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLlwiXG4gICAgICAgICAgICApLFxuICAgICAgICAgIHR5cGUuJCR0eXBlb2YpXG4gICAgICAgICkge1xuICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gXCJQb3J0YWxcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0NPTlRFWFRfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAodHlwZS5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIikgKyBcIi5Qcm92aWRlclwiO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OU1VNRVJfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAodHlwZS5fY29udGV4dC5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIikgKyBcIi5Db25zdW1lclwiO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRTpcbiAgICAgICAgICAgIHZhciBpbm5lclR5cGUgPSB0eXBlLnJlbmRlcjtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLmRpc3BsYXlOYW1lO1xuICAgICAgICAgICAgdHlwZSB8fFxuICAgICAgICAgICAgICAoKHR5cGUgPSBpbm5lclR5cGUuZGlzcGxheU5hbWUgfHwgaW5uZXJUeXBlLm5hbWUgfHwgXCJcIiksXG4gICAgICAgICAgICAgICh0eXBlID0gXCJcIiAhPT0gdHlwZSA/IFwiRm9yd2FyZFJlZihcIiArIHR5cGUgKyBcIilcIiA6IFwiRm9yd2FyZFJlZlwiKSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZTtcbiAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIChpbm5lclR5cGUgPSB0eXBlLmRpc3BsYXlOYW1lIHx8IG51bGwpLFxuICAgICAgICAgICAgICBudWxsICE9PSBpbm5lclR5cGVcbiAgICAgICAgICAgICAgICA/IGlubmVyVHlwZVxuICAgICAgICAgICAgICAgIDogZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUudHlwZSkgfHwgXCJNZW1vXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgICAgICBpbm5lclR5cGUgPSB0eXBlLl9wYXlsb2FkO1xuICAgICAgICAgICAgdHlwZSA9IHR5cGUuX2luaXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUoaW5uZXJUeXBlKSk7XG4gICAgICAgICAgICB9IGNhdGNoICh4KSB7fVxuICAgICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VGFza05hbWUodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHJldHVybiBcIjw+XCI7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlICYmXG4gICAgICAgIG51bGwgIT09IHR5cGUgJiZcbiAgICAgICAgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFXG4gICAgICApXG4gICAgICAgIHJldHVybiBcIjwuLi4+XCI7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgcmV0dXJuIG5hbWUgPyBcIjxcIiArIG5hbWUgKyBcIj5cIiA6IFwiPC4uLj5cIjtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0T3duZXIoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkE7XG4gICAgICByZXR1cm4gbnVsbCA9PT0gZGlzcGF0Y2hlciA/IG51bGwgOiBkaXNwYXRjaGVyLmdldE93bmVyKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFVua25vd25Pd25lcigpIHtcbiAgICAgIHJldHVybiBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzVmFsaWRLZXkoY29uZmlnKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsIFwia2V5XCIpKSB7XG4gICAgICAgIHZhciBnZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbmZpZywgXCJrZXlcIikuZ2V0O1xuICAgICAgICBpZiAoZ2V0dGVyICYmIGdldHRlci5pc1JlYWN0V2FybmluZykgcmV0dXJuICExO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29uZmlnLmtleTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gICAgICBmdW5jdGlvbiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkoKSB7XG4gICAgICAgIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duIHx8XG4gICAgICAgICAgKChzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9ICEwKSxcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCIlczogYGtleWAgaXMgbm90IGEgcHJvcC4gVHJ5aW5nIHRvIGFjY2VzcyBpdCB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lIHZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgcHJvcC4gKGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvc3BlY2lhbC1wcm9wcylcIixcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lXG4gICAgICAgICAgKSk7XG4gICAgICB9XG4gICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSAhMDtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgXCJrZXlcIiwge1xuICAgICAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ0tleSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVsZW1lbnRSZWZHZXR0ZXJXaXRoRGVwcmVjYXRpb25XYXJuaW5nKCkge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodGhpcy50eXBlKTtcbiAgICAgIGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gfHxcbiAgICAgICAgKChkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdID0gITApLFxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiQWNjZXNzaW5nIGVsZW1lbnQucmVmIHdhcyByZW1vdmVkIGluIFJlYWN0IDE5LiByZWYgaXMgbm93IGEgcmVndWxhciBwcm9wLiBJdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgSlNYIEVsZW1lbnQgdHlwZSBpbiBhIGZ1dHVyZSByZWxlYXNlLlwiXG4gICAgICAgICkpO1xuICAgICAgY29tcG9uZW50TmFtZSA9IHRoaXMucHJvcHMucmVmO1xuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29tcG9uZW50TmFtZSA/IGNvbXBvbmVudE5hbWUgOiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBSZWFjdEVsZW1lbnQoXG4gICAgICB0eXBlLFxuICAgICAga2V5LFxuICAgICAgc2VsZixcbiAgICAgIHNvdXJjZSxcbiAgICAgIG93bmVyLFxuICAgICAgcHJvcHMsXG4gICAgICBkZWJ1Z1N0YWNrLFxuICAgICAgZGVidWdUYXNrXG4gICAgKSB7XG4gICAgICBzZWxmID0gcHJvcHMucmVmO1xuICAgICAgdHlwZSA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHByb3BzOiBwcm9wcyxcbiAgICAgICAgX293bmVyOiBvd25lclxuICAgICAgfTtcbiAgICAgIG51bGwgIT09ICh2b2lkIDAgIT09IHNlbGYgPyBzZWxmIDogbnVsbClcbiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJyZWZcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgICAgICBnZXQ6IGVsZW1lbnRSZWZHZXR0ZXJXaXRoRGVwcmVjYXRpb25XYXJuaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJyZWZcIiwgeyBlbnVtZXJhYmxlOiAhMSwgdmFsdWU6IG51bGwgfSk7XG4gICAgICB0eXBlLl9zdG9yZSA9IHt9O1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUuX3N0b3JlLCBcInZhbGlkYXRlZFwiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiAwXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z0luZm9cIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJfZGVidWdTdGFja1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBkZWJ1Z1N0YWNrXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z1Rhc2tcIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogZGVidWdUYXNrXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5mcmVlemUgJiYgKE9iamVjdC5mcmVlemUodHlwZS5wcm9wcyksIE9iamVjdC5mcmVlemUodHlwZSkpO1xuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsb25lQW5kUmVwbGFjZUtleShvbGRFbGVtZW50LCBuZXdLZXkpIHtcbiAgICAgIG5ld0tleSA9IFJlYWN0RWxlbWVudChcbiAgICAgICAgb2xkRWxlbWVudC50eXBlLFxuICAgICAgICBuZXdLZXksXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBvbGRFbGVtZW50Ll9vd25lcixcbiAgICAgICAgb2xkRWxlbWVudC5wcm9wcyxcbiAgICAgICAgb2xkRWxlbWVudC5fZGVidWdTdGFjayxcbiAgICAgICAgb2xkRWxlbWVudC5fZGVidWdUYXNrXG4gICAgICApO1xuICAgICAgb2xkRWxlbWVudC5fc3RvcmUgJiZcbiAgICAgICAgKG5ld0tleS5fc3RvcmUudmFsaWRhdGVkID0gb2xkRWxlbWVudC5fc3RvcmUudmFsaWRhdGVkKTtcbiAgICAgIHJldHVybiBuZXdLZXk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50KG9iamVjdCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIG9iamVjdCAmJlxuICAgICAgICBudWxsICE9PSBvYmplY3QgJiZcbiAgICAgICAgb2JqZWN0LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEVcbiAgICAgICk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVzY2FwZShrZXkpIHtcbiAgICAgIHZhciBlc2NhcGVyTG9va3VwID0geyBcIj1cIjogXCI9MFwiLCBcIjpcIjogXCI9MlwiIH07XG4gICAgICByZXR1cm4gKFxuICAgICAgICBcIiRcIiArXG4gICAgICAgIGtleS5yZXBsYWNlKC9bPTpdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgIHJldHVybiBlc2NhcGVyTG9va3VwW21hdGNoXTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRLZXkoZWxlbWVudCwgaW5kZXgpIHtcbiAgICAgIHJldHVybiBcIm9iamVjdFwiID09PSB0eXBlb2YgZWxlbWVudCAmJlxuICAgICAgICBudWxsICE9PSBlbGVtZW50ICYmXG4gICAgICAgIG51bGwgIT0gZWxlbWVudC5rZXlcbiAgICAgICAgPyAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihlbGVtZW50LmtleSksIGVzY2FwZShcIlwiICsgZWxlbWVudC5rZXkpKVxuICAgICAgICA6IGluZGV4LnRvU3RyaW5nKDM2KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbm9vcCQxKCkge31cbiAgICBmdW5jdGlvbiByZXNvbHZlVGhlbmFibGUodGhlbmFibGUpIHtcbiAgICAgIHN3aXRjaCAodGhlbmFibGUuc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgXCJmdWxmaWxsZWRcIjpcbiAgICAgICAgICByZXR1cm4gdGhlbmFibGUudmFsdWU7XG4gICAgICAgIGNhc2UgXCJyZWplY3RlZFwiOlxuICAgICAgICAgIHRocm93IHRoZW5hYmxlLnJlYXNvbjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBzd2l0Y2ggKFxuICAgICAgICAgICAgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0aGVuYWJsZS5zdGF0dXNcbiAgICAgICAgICAgICAgPyB0aGVuYWJsZS50aGVuKG5vb3AkMSwgbm9vcCQxKVxuICAgICAgICAgICAgICA6ICgodGhlbmFibGUuc3RhdHVzID0gXCJwZW5kaW5nXCIpLFxuICAgICAgICAgICAgICAgIHRoZW5hYmxlLnRoZW4oXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZnVsZmlsbGVkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgXCJwZW5kaW5nXCIgPT09IHRoZW5hYmxlLnN0YXR1cyAmJlxuICAgICAgICAgICAgICAgICAgICAgICgodGhlbmFibGUuc3RhdHVzID0gXCJmdWxmaWxsZWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgKHRoZW5hYmxlLnZhbHVlID0gZnVsZmlsbGVkVmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgXCJwZW5kaW5nXCIgPT09IHRoZW5hYmxlLnN0YXR1cyAmJlxuICAgICAgICAgICAgICAgICAgICAgICgodGhlbmFibGUuc3RhdHVzID0gXCJyZWplY3RlZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAodGhlbmFibGUucmVhc29uID0gZXJyb3IpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApKSxcbiAgICAgICAgICAgIHRoZW5hYmxlLnN0YXR1cylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNhc2UgXCJmdWxmaWxsZWRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIHRoZW5hYmxlLnZhbHVlO1xuICAgICAgICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgICAgICAgIHRocm93IHRoZW5hYmxlLnJlYXNvbjtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyB0aGVuYWJsZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFwSW50b0FycmF5KGNoaWxkcmVuLCBhcnJheSwgZXNjYXBlZFByZWZpeCwgbmFtZVNvRmFyLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgY2hpbGRyZW47XG4gICAgICBpZiAoXCJ1bmRlZmluZWRcIiA9PT0gdHlwZSB8fCBcImJvb2xlYW5cIiA9PT0gdHlwZSkgY2hpbGRyZW4gPSBudWxsO1xuICAgICAgdmFyIGludm9rZUNhbGxiYWNrID0gITE7XG4gICAgICBpZiAobnVsbCA9PT0gY2hpbGRyZW4pIGludm9rZUNhbGxiYWNrID0gITA7XG4gICAgICBlbHNlXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2sgPSAhMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGRyZW4uJCR0eXBlb2YpIHtcbiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9FTEVNRU5UX1RZUEU6XG4gICAgICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6XG4gICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2sgPSAhMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIChpbnZva2VDYWxsYmFjayA9IGNoaWxkcmVuLl9pbml0KSxcbiAgICAgICAgICAgICAgICAgIG1hcEludG9BcnJheShcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2soY2hpbGRyZW4uX3BheWxvYWQpLFxuICAgICAgICAgICAgICAgICAgICBhcnJheSxcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlZFByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZVNvRmFyLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGlmIChpbnZva2VDYWxsYmFjaykge1xuICAgICAgICBpbnZva2VDYWxsYmFjayA9IGNoaWxkcmVuO1xuICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrKGludm9rZUNhbGxiYWNrKTtcbiAgICAgICAgdmFyIGNoaWxkS2V5ID1cbiAgICAgICAgICBcIlwiID09PSBuYW1lU29GYXIgPyBcIi5cIiArIGdldEVsZW1lbnRLZXkoaW52b2tlQ2FsbGJhY2ssIDApIDogbmFtZVNvRmFyO1xuICAgICAgICBpc0FycmF5SW1wbChjYWxsYmFjaylcbiAgICAgICAgICA/ICgoZXNjYXBlZFByZWZpeCA9IFwiXCIpLFxuICAgICAgICAgICAgbnVsbCAhPSBjaGlsZEtleSAmJlxuICAgICAgICAgICAgICAoZXNjYXBlZFByZWZpeCA9XG4gICAgICAgICAgICAgICAgY2hpbGRLZXkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgXCIkJi9cIikgKyBcIi9cIiksXG4gICAgICAgICAgICBtYXBJbnRvQXJyYXkoY2FsbGJhY2ssIGFycmF5LCBlc2NhcGVkUHJlZml4LCBcIlwiLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIDogbnVsbCAhPSBjYWxsYmFjayAmJlxuICAgICAgICAgICAgKGlzVmFsaWRFbGVtZW50KGNhbGxiYWNrKSAmJlxuICAgICAgICAgICAgICAobnVsbCAhPSBjYWxsYmFjay5rZXkgJiZcbiAgICAgICAgICAgICAgICAoKGludm9rZUNhbGxiYWNrICYmIGludm9rZUNhbGxiYWNrLmtleSA9PT0gY2FsbGJhY2sua2V5KSB8fFxuICAgICAgICAgICAgICAgICAgY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjYWxsYmFjay5rZXkpKSxcbiAgICAgICAgICAgICAgKGVzY2FwZWRQcmVmaXggPSBjbG9uZUFuZFJlcGxhY2VLZXkoXG4gICAgICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgZXNjYXBlZFByZWZpeCArXG4gICAgICAgICAgICAgICAgICAobnVsbCA9PSBjYWxsYmFjay5rZXkgfHxcbiAgICAgICAgICAgICAgICAgIChpbnZva2VDYWxsYmFjayAmJiBpbnZva2VDYWxsYmFjay5rZXkgPT09IGNhbGxiYWNrLmtleSlcbiAgICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICAgIDogKFwiXCIgKyBjYWxsYmFjay5rZXkpLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJCYvXCJcbiAgICAgICAgICAgICAgICAgICAgICApICsgXCIvXCIpICtcbiAgICAgICAgICAgICAgICAgIGNoaWxkS2V5XG4gICAgICAgICAgICAgICkpLFxuICAgICAgICAgICAgICBcIlwiICE9PSBuYW1lU29GYXIgJiZcbiAgICAgICAgICAgICAgICBudWxsICE9IGludm9rZUNhbGxiYWNrICYmXG4gICAgICAgICAgICAgICAgaXNWYWxpZEVsZW1lbnQoaW52b2tlQ2FsbGJhY2spICYmXG4gICAgICAgICAgICAgICAgbnVsbCA9PSBpbnZva2VDYWxsYmFjay5rZXkgJiZcbiAgICAgICAgICAgICAgICBpbnZva2VDYWxsYmFjay5fc3RvcmUgJiZcbiAgICAgICAgICAgICAgICAhaW52b2tlQ2FsbGJhY2suX3N0b3JlLnZhbGlkYXRlZCAmJlxuICAgICAgICAgICAgICAgIChlc2NhcGVkUHJlZml4Ll9zdG9yZS52YWxpZGF0ZWQgPSAyKSxcbiAgICAgICAgICAgICAgKGNhbGxiYWNrID0gZXNjYXBlZFByZWZpeCkpLFxuICAgICAgICAgICAgYXJyYXkucHVzaChjYWxsYmFjaykpO1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGludm9rZUNhbGxiYWNrID0gMDtcbiAgICAgIGNoaWxkS2V5ID0gXCJcIiA9PT0gbmFtZVNvRmFyID8gXCIuXCIgOiBuYW1lU29GYXIgKyBcIjpcIjtcbiAgICAgIGlmIChpc0FycmF5SW1wbChjaGlsZHJlbikpXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspXG4gICAgICAgICAgKG5hbWVTb0ZhciA9IGNoaWxkcmVuW2ldKSxcbiAgICAgICAgICAgICh0eXBlID0gY2hpbGRLZXkgKyBnZXRFbGVtZW50S2V5KG5hbWVTb0ZhciwgaSkpLFxuICAgICAgICAgICAgKGludm9rZUNhbGxiYWNrICs9IG1hcEludG9BcnJheShcbiAgICAgICAgICAgICAgbmFtZVNvRmFyLFxuICAgICAgICAgICAgICBhcnJheSxcbiAgICAgICAgICAgICAgZXNjYXBlZFByZWZpeCxcbiAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICAgICkpO1xuICAgICAgZWxzZSBpZiAoKChpID0gZ2V0SXRlcmF0b3JGbihjaGlsZHJlbikpLCBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBpKSlcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBpID09PSBjaGlsZHJlbi5lbnRyaWVzICYmXG4gICAgICAgICAgICAoZGlkV2FybkFib3V0TWFwcyB8fFxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgXCJVc2luZyBNYXBzIGFzIGNoaWxkcmVuIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSBhbiBhcnJheSBvZiBrZXllZCBSZWFjdEVsZW1lbnRzIGluc3RlYWQuXCJcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIChkaWRXYXJuQWJvdXRNYXBzID0gITApKSxcbiAgICAgICAgICAgIGNoaWxkcmVuID0gaS5jYWxsKGNoaWxkcmVuKSxcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICEobmFtZVNvRmFyID0gY2hpbGRyZW4ubmV4dCgpKS5kb25lO1xuXG4gICAgICAgIClcbiAgICAgICAgICAobmFtZVNvRmFyID0gbmFtZVNvRmFyLnZhbHVlKSxcbiAgICAgICAgICAgICh0eXBlID0gY2hpbGRLZXkgKyBnZXRFbGVtZW50S2V5KG5hbWVTb0ZhciwgaSsrKSksXG4gICAgICAgICAgICAoaW52b2tlQ2FsbGJhY2sgKz0gbWFwSW50b0FycmF5KFxuICAgICAgICAgICAgICBuYW1lU29GYXIsXG4gICAgICAgICAgICAgIGFycmF5LFxuICAgICAgICAgICAgICBlc2NhcGVkUHJlZml4LFxuICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICAgICAgKSk7XG4gICAgICBlbHNlIGlmIChcIm9iamVjdFwiID09PSB0eXBlKSB7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBjaGlsZHJlbi50aGVuKVxuICAgICAgICAgIHJldHVybiBtYXBJbnRvQXJyYXkoXG4gICAgICAgICAgICByZXNvbHZlVGhlbmFibGUoY2hpbGRyZW4pLFxuICAgICAgICAgICAgYXJyYXksXG4gICAgICAgICAgICBlc2NhcGVkUHJlZml4LFxuICAgICAgICAgICAgbmFtZVNvRmFyLFxuICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICApO1xuICAgICAgICBhcnJheSA9IFN0cmluZyhjaGlsZHJlbik7XG4gICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgIFwiT2JqZWN0cyBhcmUgbm90IHZhbGlkIGFzIGEgUmVhY3QgY2hpbGQgKGZvdW5kOiBcIiArXG4gICAgICAgICAgICAoXCJbb2JqZWN0IE9iamVjdF1cIiA9PT0gYXJyYXlcbiAgICAgICAgICAgICAgPyBcIm9iamVjdCB3aXRoIGtleXMge1wiICsgT2JqZWN0LmtleXMoY2hpbGRyZW4pLmpvaW4oXCIsIFwiKSArIFwifVwiXG4gICAgICAgICAgICAgIDogYXJyYXkpICtcbiAgICAgICAgICAgIFwiKS4gSWYgeW91IG1lYW50IHRvIHJlbmRlciBhIGNvbGxlY3Rpb24gb2YgY2hpbGRyZW4sIHVzZSBhbiBhcnJheSBpbnN0ZWFkLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2s7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jLCBjb250ZXh0KSB7XG4gICAgICBpZiAobnVsbCA9PSBjaGlsZHJlbikgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgICBjb3VudCA9IDA7XG4gICAgICBtYXBJbnRvQXJyYXkoY2hpbGRyZW4sIHJlc3VsdCwgXCJcIiwgXCJcIiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGNvdW50KyspO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBsYXp5SW5pdGlhbGl6ZXIocGF5bG9hZCkge1xuICAgICAgaWYgKC0xID09PSBwYXlsb2FkLl9zdGF0dXMpIHtcbiAgICAgICAgdmFyIGN0b3IgPSBwYXlsb2FkLl9yZXN1bHQ7XG4gICAgICAgIGN0b3IgPSBjdG9yKCk7XG4gICAgICAgIGN0b3IudGhlbihcbiAgICAgICAgICBmdW5jdGlvbiAobW9kdWxlT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcGF5bG9hZC5fc3RhdHVzIHx8IC0xID09PSBwYXlsb2FkLl9zdGF0dXMpXG4gICAgICAgICAgICAgIChwYXlsb2FkLl9zdGF0dXMgPSAxKSwgKHBheWxvYWQuX3Jlc3VsdCA9IG1vZHVsZU9iamVjdCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICgwID09PSBwYXlsb2FkLl9zdGF0dXMgfHwgLTEgPT09IHBheWxvYWQuX3N0YXR1cylcbiAgICAgICAgICAgICAgKHBheWxvYWQuX3N0YXR1cyA9IDIpLCAocGF5bG9hZC5fcmVzdWx0ID0gZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgLTEgPT09IHBheWxvYWQuX3N0YXR1cyAmJlxuICAgICAgICAgICgocGF5bG9hZC5fc3RhdHVzID0gMCksIChwYXlsb2FkLl9yZXN1bHQgPSBjdG9yKSk7XG4gICAgICB9XG4gICAgICBpZiAoMSA9PT0gcGF5bG9hZC5fc3RhdHVzKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIChjdG9yID0gcGF5bG9hZC5fcmVzdWx0KSxcbiAgICAgICAgICB2b2lkIDAgPT09IGN0b3IgJiZcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwibGF6eTogRXhwZWN0ZWQgdGhlIHJlc3VsdCBvZiBhIGR5bmFtaWMgaW1wb3J0KCkgY2FsbC4gSW5zdGVhZCByZWNlaXZlZDogJXNcXG5cXG5Zb3VyIGNvZGUgc2hvdWxkIGxvb2sgbGlrZTogXFxuICBjb25zdCBNeUNvbXBvbmVudCA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL015Q29tcG9uZW50JykpXFxuXFxuRGlkIHlvdSBhY2NpZGVudGFsbHkgcHV0IGN1cmx5IGJyYWNlcyBhcm91bmQgdGhlIGltcG9ydD9cIixcbiAgICAgICAgICAgICAgY3RvclxuICAgICAgICAgICAgKSxcbiAgICAgICAgICBcImRlZmF1bHRcIiBpbiBjdG9yIHx8XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcImxhenk6IEV4cGVjdGVkIHRoZSByZXN1bHQgb2YgYSBkeW5hbWljIGltcG9ydCgpIGNhbGwuIEluc3RlYWQgcmVjZWl2ZWQ6ICVzXFxuXFxuWW91ciBjb2RlIHNob3VsZCBsb29rIGxpa2U6IFxcbiAgY29uc3QgTXlDb21wb25lbnQgPSBsYXp5KCgpID0+IGltcG9ydCgnLi9NeUNvbXBvbmVudCcpKVwiLFxuICAgICAgICAgICAgICBjdG9yXG4gICAgICAgICAgICApLFxuICAgICAgICAgIGN0b3IuZGVmYXVsdFxuICAgICAgICApO1xuICAgICAgdGhyb3cgcGF5bG9hZC5fcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiByZXNvbHZlRGlzcGF0Y2hlcigpIHtcbiAgICAgIHZhciBkaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDtcbiAgICAgIG51bGwgPT09IGRpc3BhdGNoZXIgJiZcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIkludmFsaWQgaG9vayBjYWxsLiBIb29rcyBjYW4gb25seSBiZSBjYWxsZWQgaW5zaWRlIG9mIHRoZSBib2R5IG9mIGEgZnVuY3Rpb24gY29tcG9uZW50LiBUaGlzIGNvdWxkIGhhcHBlbiBmb3Igb25lIG9mIHRoZSBmb2xsb3dpbmcgcmVhc29uczpcXG4xLiBZb3UgbWlnaHQgaGF2ZSBtaXNtYXRjaGluZyB2ZXJzaW9ucyBvZiBSZWFjdCBhbmQgdGhlIHJlbmRlcmVyIChzdWNoIGFzIFJlYWN0IERPTSlcXG4yLiBZb3UgbWlnaHQgYmUgYnJlYWtpbmcgdGhlIFJ1bGVzIG9mIEhvb2tzXFxuMy4gWW91IG1pZ2h0IGhhdmUgbW9yZSB0aGFuIG9uZSBjb3B5IG9mIFJlYWN0IGluIHRoZSBzYW1lIGFwcFxcblNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL2ludmFsaWQtaG9vay1jYWxsIGZvciB0aXBzIGFib3V0IGhvdyB0byBkZWJ1ZyBhbmQgZml4IHRoaXMgcHJvYmxlbS5cIlxuICAgICAgICApO1xuICAgICAgcmV0dXJuIGRpc3BhdGNoZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5vb3AoKSB7fVxuICAgIGZ1bmN0aW9uIGVucXVldWVUYXNrKHRhc2spIHtcbiAgICAgIGlmIChudWxsID09PSBlbnF1ZXVlVGFza0ltcGwpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHJlcXVpcmVTdHJpbmcgPSAoXCJyZXF1aXJlXCIgKyBNYXRoLnJhbmRvbSgpKS5zbGljZSgwLCA3KTtcbiAgICAgICAgICBlbnF1ZXVlVGFza0ltcGwgPSAobW9kdWxlICYmIG1vZHVsZVtyZXF1aXJlU3RyaW5nXSkuY2FsbChcbiAgICAgICAgICAgIG1vZHVsZSxcbiAgICAgICAgICAgIFwidGltZXJzXCJcbiAgICAgICAgICApLnNldEltbWVkaWF0ZTtcbiAgICAgICAgfSBjYXRjaCAoX2Vycikge1xuICAgICAgICAgIGVucXVldWVUYXNrSW1wbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgITEgPT09IGRpZFdhcm5BYm91dE1lc3NhZ2VDaGFubmVsICYmXG4gICAgICAgICAgICAgICgoZGlkV2FybkFib3V0TWVzc2FnZUNoYW5uZWwgPSAhMCksXG4gICAgICAgICAgICAgIFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAmJlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICBcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBoYXZlIGEgTWVzc2FnZUNoYW5uZWwgaW1wbGVtZW50YXRpb24sIHNvIGVucXVldWluZyB0YXNrcyB2aWEgYXdhaXQgYWN0KGFzeW5jICgpID0+IC4uLikgd2lsbCBmYWlsLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZSBhdCBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzIGlmIHlvdSBlbmNvdW50ZXIgdGhpcyB3YXJuaW5nLlwiXG4gICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBjYWxsYmFjaztcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2Uodm9pZCAwKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICByZXR1cm4gZW5xdWV1ZVRhc2tJbXBsKHRhc2spO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZ2dyZWdhdGVFcnJvcnMoZXJyb3JzKSB7XG4gICAgICByZXR1cm4gMSA8IGVycm9ycy5sZW5ndGggJiYgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgQWdncmVnYXRlRXJyb3JcbiAgICAgICAgPyBuZXcgQWdncmVnYXRlRXJyb3IoZXJyb3JzKVxuICAgICAgICA6IGVycm9yc1swXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCkge1xuICAgICAgcHJldkFjdFNjb3BlRGVwdGggIT09IGFjdFNjb3BlRGVwdGggLSAxICYmXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJZb3Ugc2VlbSB0byBoYXZlIG92ZXJsYXBwaW5nIGFjdCgpIGNhbGxzLCB0aGlzIGlzIG5vdCBzdXBwb3J0ZWQuIEJlIHN1cmUgdG8gYXdhaXQgcHJldmlvdXMgYWN0KCkgY2FsbHMgYmVmb3JlIG1ha2luZyBhIG5ldyBvbmUuIFwiXG4gICAgICAgICk7XG4gICAgICBhY3RTY29wZURlcHRoID0gcHJldkFjdFNjb3BlRGVwdGg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5Rmx1c2hBc3luY0FjdFdvcmsocmV0dXJuVmFsdWUsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHF1ZXVlID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWU7XG4gICAgICBpZiAobnVsbCAhPT0gcXVldWUpXG4gICAgICAgIGlmICgwICE9PSBxdWV1ZS5sZW5ndGgpXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZsdXNoQWN0UXVldWUocXVldWUpO1xuICAgICAgICAgICAgZW5xdWV1ZVRhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yayhyZXR1cm5WYWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlIFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID0gbnVsbDtcbiAgICAgIDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoXG4gICAgICAgID8gKChxdWV1ZSA9IGFnZ3JlZ2F0ZUVycm9ycyhSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMpKSxcbiAgICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDApLFxuICAgICAgICAgIHJlamVjdChxdWV1ZSkpXG4gICAgICAgIDogcmVzb2x2ZShyZXR1cm5WYWx1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZsdXNoQWN0UXVldWUocXVldWUpIHtcbiAgICAgIGlmICghaXNGbHVzaGluZykge1xuICAgICAgICBpc0ZsdXNoaW5nID0gITA7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuZGlkVXNlUHJvbWlzZSA9ICExO1xuICAgICAgICAgICAgICB2YXIgY29udGludWF0aW9uID0gY2FsbGJhY2soITEpO1xuICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gY29udGludWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmRpZFVzZVByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgIHF1ZXVlW2ldID0gY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICBxdWV1ZS5zcGxpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gY29udGludWF0aW9uO1xuICAgICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgICAgICB9IHdoaWxlICgxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBxdWV1ZS5zcGxpY2UoMCwgaSArIDEpLCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaXNGbHVzaGluZyA9ICExO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiZcbiAgICAgIFwiZnVuY3Rpb25cIiA9PT1cbiAgICAgICAgdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQgJiZcbiAgICAgIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQoRXJyb3IoKSk7XG4gICAgdmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC50cmFuc2l0aW9uYWwuZWxlbWVudFwiKSxcbiAgICAgIFJFQUNUX1BPUlRBTF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnBvcnRhbFwiKSxcbiAgICAgIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuZnJhZ21lbnRcIiksXG4gICAgICBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN0cmljdF9tb2RlXCIpLFxuICAgICAgUkVBQ1RfUFJPRklMRVJfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5wcm9maWxlclwiKTtcbiAgICBTeW1ib2wuZm9yKFwicmVhY3QucHJvdmlkZXJcIik7XG4gICAgdmFyIFJFQUNUX0NPTlNVTUVSX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuY29uc3VtZXJcIiksXG4gICAgICBSRUFDVF9DT05URVhUX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuY29udGV4dFwiKSxcbiAgICAgIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuZm9yd2FyZF9yZWZcIiksXG4gICAgICBSRUFDVF9TVVNQRU5TRV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlXCIpLFxuICAgICAgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlX2xpc3RcIiksXG4gICAgICBSRUFDVF9NRU1PX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb1wiKSxcbiAgICAgIFJFQUNUX0xBWllfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5sYXp5XCIpLFxuICAgICAgUkVBQ1RfQUNUSVZJVFlfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5hY3Rpdml0eVwiKSxcbiAgICAgIE1BWUJFX0lURVJBVE9SX1NZTUJPTCA9IFN5bWJvbC5pdGVyYXRvcixcbiAgICAgIGRpZFdhcm5TdGF0ZVVwZGF0ZUZvclVubW91bnRlZENvbXBvbmVudCA9IHt9LFxuICAgICAgUmVhY3ROb29wVXBkYXRlUXVldWUgPSB7XG4gICAgICAgIGlzTW91bnRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICAgICAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgXCJmb3JjZVVwZGF0ZVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgICAgICAgd2Fybk5vb3AocHVibGljSW5zdGFuY2UsIFwicmVwbGFjZVN0YXRlXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgICAgICAgIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCBcInNldFN0YXRlXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXNzaWduID0gT2JqZWN0LmFzc2lnbixcbiAgICAgIGVtcHR5T2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmZyZWV6ZShlbXB0eU9iamVjdCk7XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge307XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWFsU3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgIT09IHR5cGVvZiBwYXJ0aWFsU3RhdGUgJiZcbiAgICAgICAgXCJmdW5jdGlvblwiICE9PSB0eXBlb2YgcGFydGlhbFN0YXRlICYmXG4gICAgICAgIG51bGwgIT0gcGFydGlhbFN0YXRlXG4gICAgICApXG4gICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgIFwidGFrZXMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcyB0byB1cGRhdGUgb3IgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMuXCJcbiAgICAgICAgKTtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcywgcGFydGlhbFN0YXRlLCBjYWxsYmFjaywgXCJzZXRTdGF0ZVwiKTtcbiAgICB9O1xuICAgIENvbXBvbmVudC5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcywgY2FsbGJhY2ssIFwiZm9yY2VVcGRhdGVcIik7XG4gICAgfTtcbiAgICB2YXIgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgICAgIGlzTW91bnRlZDogW1xuICAgICAgICAgIFwiaXNNb3VudGVkXCIsXG4gICAgICAgICAgXCJJbnN0ZWFkLCBtYWtlIHN1cmUgdG8gY2xlYW4gdXAgc3Vic2NyaXB0aW9ucyBhbmQgcGVuZGluZyByZXF1ZXN0cyBpbiBjb21wb25lbnRXaWxsVW5tb3VudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy5cIlxuICAgICAgICBdLFxuICAgICAgICByZXBsYWNlU3RhdGU6IFtcbiAgICAgICAgICBcInJlcGxhY2VTdGF0ZVwiLFxuICAgICAgICAgIFwiUmVmYWN0b3IgeW91ciBjb2RlIHRvIHVzZSBzZXRTdGF0ZSBpbnN0ZWFkIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8zMjM2KS5cIlxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgZm5OYW1lO1xuICAgIGZvciAoZm5OYW1lIGluIGRlcHJlY2F0ZWRBUElzKVxuICAgICAgZGVwcmVjYXRlZEFQSXMuaGFzT3duUHJvcGVydHkoZm5OYW1lKSAmJlxuICAgICAgICBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcoZm5OYW1lLCBkZXByZWNhdGVkQVBJc1tmbk5hbWVdKTtcbiAgICBDb21wb25lbnREdW1teS5wcm90b3R5cGUgPSBDb21wb25lbnQucHJvdG90eXBlO1xuICAgIGRlcHJlY2F0ZWRBUElzID0gUHVyZUNvbXBvbmVudC5wcm90b3R5cGUgPSBuZXcgQ29tcG9uZW50RHVtbXkoKTtcbiAgICBkZXByZWNhdGVkQVBJcy5jb25zdHJ1Y3RvciA9IFB1cmVDb21wb25lbnQ7XG4gICAgYXNzaWduKGRlcHJlY2F0ZWRBUElzLCBDb21wb25lbnQucHJvdG90eXBlKTtcbiAgICBkZXByZWNhdGVkQVBJcy5pc1B1cmVSZWFjdENvbXBvbmVudCA9ICEwO1xuICAgIHZhciBpc0FycmF5SW1wbCA9IEFycmF5LmlzQXJyYXksXG4gICAgICBSRUFDVF9DTElFTlRfUkVGRVJFTkNFID0gU3ltYm9sLmZvcihcInJlYWN0LmNsaWVudC5yZWZlcmVuY2VcIiksXG4gICAgICBSZWFjdFNoYXJlZEludGVybmFscyA9IHtcbiAgICAgICAgSDogbnVsbCxcbiAgICAgICAgQTogbnVsbCxcbiAgICAgICAgVDogbnVsbCxcbiAgICAgICAgUzogbnVsbCxcbiAgICAgICAgVjogbnVsbCxcbiAgICAgICAgYWN0UXVldWU6IG51bGwsXG4gICAgICAgIGlzQmF0Y2hpbmdMZWdhY3k6ICExLFxuICAgICAgICBkaWRTY2hlZHVsZUxlZ2FjeVVwZGF0ZTogITEsXG4gICAgICAgIGRpZFVzZVByb21pc2U6ICExLFxuICAgICAgICB0aHJvd25FcnJvcnM6IFtdLFxuICAgICAgICBnZXRDdXJyZW50U3RhY2s6IG51bGwsXG4gICAgICAgIHJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzOiAwXG4gICAgICB9LFxuICAgICAgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgY3JlYXRlVGFzayA9IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA/IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH07XG4gICAgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgICByZWFjdF9zdGFja19ib3R0b21fZnJhbWU6IGZ1bmN0aW9uIChjYWxsU3RhY2tGb3JFcnJvcikge1xuICAgICAgICByZXR1cm4gY2FsbFN0YWNrRm9yRXJyb3IoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biwgZGlkV2FybkFib3V0T2xkSlNYUnVudGltZTtcbiAgICB2YXIgZGlkV2FybkFib3V0RWxlbWVudFJlZiA9IHt9O1xuICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1N0YWNrID0gZGVwcmVjYXRlZEFQSXMucmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lLmJpbmQoXG4gICAgICBkZXByZWNhdGVkQVBJcyxcbiAgICAgIFVua25vd25Pd25lclxuICAgICkoKTtcbiAgICB2YXIgdW5rbm93bk93bmVyRGVidWdUYXNrID0gY3JlYXRlVGFzayhnZXRUYXNrTmFtZShVbmtub3duT3duZXIpKTtcbiAgICB2YXIgZGlkV2FybkFib3V0TWFwcyA9ICExLFxuICAgICAgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvXFwvKy9nLFxuICAgICAgcmVwb3J0R2xvYmFsRXJyb3IgPVxuICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiByZXBvcnRFcnJvclxuICAgICAgICAgID8gcmVwb3J0RXJyb3JcbiAgICAgICAgICA6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHdpbmRvdyAmJlxuICAgICAgICAgICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHdpbmRvdy5FcnJvckV2ZW50XG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyB3aW5kb3cuRXJyb3JFdmVudChcImVycm9yXCIsIHtcbiAgICAgICAgICAgICAgICAgIGJ1YmJsZXM6ICEwLFxuICAgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogITAsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgICAgICAgICBcIm9iamVjdFwiID09PSB0eXBlb2YgZXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gZXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICA/IFN0cmluZyhlcnJvci5tZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpKSByZXR1cm47XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHByb2Nlc3MgJiZcbiAgICAgICAgICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBwcm9jZXNzLmVtaXRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbWl0KFwidW5jYXVnaHRFeGNlcHRpb25cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICBkaWRXYXJuQWJvdXRNZXNzYWdlQ2hhbm5lbCA9ICExLFxuICAgICAgZW5xdWV1ZVRhc2tJbXBsID0gbnVsbCxcbiAgICAgIGFjdFNjb3BlRGVwdGggPSAwLFxuICAgICAgZGlkV2Fybk5vQXdhaXRBY3QgPSAhMSxcbiAgICAgIGlzRmx1c2hpbmcgPSAhMSxcbiAgICAgIHF1ZXVlU2V2ZXJhbE1pY3JvdGFza3MgPVxuICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBxdWV1ZU1pY3JvdGFza1xuICAgICAgICAgID8gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVldWVNaWNyb3Rhc2soY2FsbGJhY2spO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IGVucXVldWVUYXNrO1xuICAgIGRlcHJlY2F0ZWRBUElzID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICBfX3Byb3RvX186IG51bGwsXG4gICAgICBjOiBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VNZW1vQ2FjaGUoc2l6ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZXhwb3J0cy5DaGlsZHJlbiA9IHtcbiAgICAgIG1hcDogbWFwQ2hpbGRyZW4sXG4gICAgICBmb3JFYWNoOiBmdW5jdGlvbiAoY2hpbGRyZW4sIGZvckVhY2hGdW5jLCBmb3JFYWNoQ29udGV4dCkge1xuICAgICAgICBtYXBDaGlsZHJlbihcbiAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3JFYWNoRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9yRWFjaENvbnRleHRcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBjb3VudDogZnVuY3Rpb24gKGNoaWxkcmVuKSB7XG4gICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBuKys7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbjtcbiAgICAgIH0sXG4gICAgICB0b0FycmF5OiBmdW5jdGlvbiAoY2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBtYXBDaGlsZHJlbihjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgfSkgfHwgW11cbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBvbmx5OiBmdW5jdGlvbiAoY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKCFpc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpXG4gICAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgICBcIlJlYWN0LkNoaWxkcmVuLm9ubHkgZXhwZWN0ZWQgdG8gcmVjZWl2ZSBhIHNpbmdsZSBSZWFjdCBlbGVtZW50IGNoaWxkLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgfVxuICAgIH07XG4gICAgZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgZXhwb3J0cy5GcmFnbWVudCA9IFJFQUNUX0ZSQUdNRU5UX1RZUEU7XG4gICAgZXhwb3J0cy5Qcm9maWxlciA9IFJFQUNUX1BST0ZJTEVSX1RZUEU7XG4gICAgZXhwb3J0cy5QdXJlQ29tcG9uZW50ID0gUHVyZUNvbXBvbmVudDtcbiAgICBleHBvcnRzLlN0cmljdE1vZGUgPSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFO1xuICAgIGV4cG9ydHMuU3VzcGVuc2UgPSBSRUFDVF9TVVNQRU5TRV9UWVBFO1xuICAgIGV4cG9ydHMuX19DTElFTlRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfV0FSTl9VU0VSU19USEVZX0NBTk5PVF9VUEdSQURFID1cbiAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzO1xuICAgIGV4cG9ydHMuX19DT01QSUxFUl9SVU5USU1FID0gZGVwcmVjYXRlZEFQSXM7XG4gICAgZXhwb3J0cy5hY3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBwcmV2QWN0UXVldWUgPSBSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZSxcbiAgICAgICAgcHJldkFjdFNjb3BlRGVwdGggPSBhY3RTY29wZURlcHRoO1xuICAgICAgYWN0U2NvcGVEZXB0aCsrO1xuICAgICAgdmFyIHF1ZXVlID0gKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID1cbiAgICAgICAgICBudWxsICE9PSBwcmV2QWN0UXVldWUgPyBwcmV2QWN0UXVldWUgOiBbXSksXG4gICAgICAgIGRpZEF3YWl0QWN0Q2FsbCA9ICExO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMucHVzaChlcnJvcik7XG4gICAgICB9XG4gICAgICBpZiAoMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGgpXG4gICAgICAgIHRocm93IChcbiAgICAgICAgICAocG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCksXG4gICAgICAgICAgKGNhbGxiYWNrID0gYWdncmVnYXRlRXJyb3JzKFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycykpLFxuICAgICAgICAgIChSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoID0gMCksXG4gICAgICAgICAgY2FsbGJhY2spXG4gICAgICAgICk7XG4gICAgICBpZiAoXG4gICAgICAgIG51bGwgIT09IHJlc3VsdCAmJlxuICAgICAgICBcIm9iamVjdFwiID09PSB0eXBlb2YgcmVzdWx0ICYmXG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHJlc3VsdC50aGVuXG4gICAgICApIHtcbiAgICAgICAgdmFyIHRoZW5hYmxlID0gcmVzdWx0O1xuICAgICAgICBxdWV1ZVNldmVyYWxNaWNyb3Rhc2tzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBkaWRBd2FpdEFjdENhbGwgfHxcbiAgICAgICAgICAgIGRpZFdhcm5Ob0F3YWl0QWN0IHx8XG4gICAgICAgICAgICAoKGRpZFdhcm5Ob0F3YWl0QWN0ID0gITApLFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJZb3UgY2FsbGVkIGFjdChhc3luYyAoKSA9PiAuLi4pIHdpdGhvdXQgYXdhaXQuIFRoaXMgY291bGQgbGVhZCB0byB1bmV4cGVjdGVkIHRlc3RpbmcgYmVoYXZpb3VyLCBpbnRlcmxlYXZpbmcgbXVsdGlwbGUgYWN0IGNhbGxzIGFuZCBtaXhpbmcgdGhlaXIgc2NvcGVzLiBZb3Ugc2hvdWxkIC0gYXdhaXQgYWN0KGFzeW5jICgpID0+IC4uLik7XCJcbiAgICAgICAgICAgICkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0aGVuOiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBkaWRBd2FpdEFjdENhbGwgPSAhMDtcbiAgICAgICAgICAgIHRoZW5hYmxlLnRoZW4oXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXR1cm5WYWx1ZSkge1xuICAgICAgICAgICAgICAgIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpO1xuICAgICAgICAgICAgICAgIGlmICgwID09PSBwcmV2QWN0U2NvcGVEZXB0aCkge1xuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZmx1c2hBY3RRdWV1ZShxdWV1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgZW5xdWV1ZVRhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Rmx1c2hBc3luY0FjdFdvcmsoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvciQwKSB7XG4gICAgICAgICAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yJDApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhyb3duRXJyb3IgPSBhZ2dyZWdhdGVFcnJvcnMoXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoX3Rocm93bkVycm9yKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgcmVzb2x2ZShyZXR1cm5WYWx1ZSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpO1xuICAgICAgICAgICAgICAgIDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICA/ICgoZXJyb3IgPSBhZ2dyZWdhdGVFcnJvcnMoXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzXG4gICAgICAgICAgICAgICAgICAgICkpLFxuICAgICAgICAgICAgICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDApLFxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpKVxuICAgICAgICAgICAgICAgICAgOiByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHZhciByZXR1cm5WYWx1ZSRqc2NvbXAkMCA9IHJlc3VsdDtcbiAgICAgIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpO1xuICAgICAgMCA9PT0gcHJldkFjdFNjb3BlRGVwdGggJiZcbiAgICAgICAgKGZsdXNoQWN0UXVldWUocXVldWUpLFxuICAgICAgICAwICE9PSBxdWV1ZS5sZW5ndGggJiZcbiAgICAgICAgICBxdWV1ZVNldmVyYWxNaWNyb3Rhc2tzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCB8fFxuICAgICAgICAgICAgICBkaWRXYXJuTm9Bd2FpdEFjdCB8fFxuICAgICAgICAgICAgICAoKGRpZFdhcm5Ob0F3YWl0QWN0ID0gITApLFxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgIFwiQSBjb21wb25lbnQgc3VzcGVuZGVkIGluc2lkZSBhbiBgYWN0YCBzY29wZSwgYnV0IHRoZSBgYWN0YCBjYWxsIHdhcyBub3QgYXdhaXRlZC4gV2hlbiB0ZXN0aW5nIFJlYWN0IGNvbXBvbmVudHMgdGhhdCBkZXBlbmQgb24gYXN5bmNocm9ub3VzIGRhdGEsIHlvdSBtdXN0IGF3YWl0IHRoZSByZXN1bHQ6XFxuXFxuYXdhaXQgYWN0KCgpID0+IC4uLilcIlxuICAgICAgICAgICAgICApKTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID0gbnVsbCkpO1xuICAgICAgaWYgKDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoKVxuICAgICAgICB0aHJvdyAoXG4gICAgICAgICAgKChjYWxsYmFjayA9IGFnZ3JlZ2F0ZUVycm9ycyhSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMpKSxcbiAgICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDApLFxuICAgICAgICAgIGNhbGxiYWNrKVxuICAgICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGhlbjogZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCA9ICEwO1xuICAgICAgICAgIDAgPT09IHByZXZBY3RTY29wZURlcHRoXG4gICAgICAgICAgICA/ICgoUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgPSBxdWV1ZSksXG4gICAgICAgICAgICAgIGVucXVldWVUYXNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yayhcbiAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlJGpzY29tcCQwLFxuICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgOiByZXNvbHZlKHJldHVyblZhbHVlJGpzY29tcCQwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY2FjaGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY2FwdHVyZU93bmVyU3RhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZ2V0Q3VycmVudFN0YWNrID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuZ2V0Q3VycmVudFN0YWNrO1xuICAgICAgcmV0dXJuIG51bGwgPT09IGdldEN1cnJlbnRTdGFjayA/IG51bGwgOiBnZXRDdXJyZW50U3RhY2soKTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY2xvbmVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbmZpZywgY2hpbGRyZW4pIHtcbiAgICAgIGlmIChudWxsID09PSBlbGVtZW50IHx8IHZvaWQgMCA9PT0gZWxlbWVudClcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgXCJUaGUgYXJndW1lbnQgbXVzdCBiZSBhIFJlYWN0IGVsZW1lbnQsIGJ1dCB5b3UgcGFzc2VkIFwiICtcbiAgICAgICAgICAgIGVsZW1lbnQgK1xuICAgICAgICAgICAgXCIuXCJcbiAgICAgICAgKTtcbiAgICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcyksXG4gICAgICAgIGtleSA9IGVsZW1lbnQua2V5LFxuICAgICAgICBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuICAgICAgaWYgKG51bGwgIT0gY29uZmlnKSB7XG4gICAgICAgIHZhciBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQ7XG4gICAgICAgIGE6IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgXCJyZWZcIikgJiZcbiAgICAgICAgICAgIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFxuICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgIFwicmVmXCJcbiAgICAgICAgICAgICkuZ2V0KSAmJlxuICAgICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0LmlzUmVhY3RXYXJuaW5nXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IHZvaWQgMCAhPT0gY29uZmlnLnJlZjtcbiAgICAgICAgfVxuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgJiYgKG93bmVyID0gZ2V0T3duZXIoKSk7XG4gICAgICAgIGhhc1ZhbGlkS2V5KGNvbmZpZykgJiZcbiAgICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjb25maWcua2V5KSwgKGtleSA9IFwiXCIgKyBjb25maWcua2V5KSk7XG4gICAgICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKVxuICAgICAgICAgICFoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpIHx8XG4gICAgICAgICAgICBcImtleVwiID09PSBwcm9wTmFtZSB8fFxuICAgICAgICAgICAgXCJfX3NlbGZcIiA9PT0gcHJvcE5hbWUgfHxcbiAgICAgICAgICAgIFwiX19zb3VyY2VcIiA9PT0gcHJvcE5hbWUgfHxcbiAgICAgICAgICAgIChcInJlZlwiID09PSBwcm9wTmFtZSAmJiB2b2lkIDAgPT09IGNvbmZpZy5yZWYpIHx8XG4gICAgICAgICAgICAocHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXSk7XG4gICAgICB9XG4gICAgICB2YXIgcHJvcE5hbWUgPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgICAgIGlmICgxID09PSBwcm9wTmFtZSkgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIGVsc2UgaWYgKDEgPCBwcm9wTmFtZSkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBBcnJheShwcm9wTmFtZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcE5hbWU7IGkrKylcbiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHRbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgICAgICBwcm9wcy5jaGlsZHJlbiA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdDtcbiAgICAgIH1cbiAgICAgIHByb3BzID0gUmVhY3RFbGVtZW50KFxuICAgICAgICBlbGVtZW50LnR5cGUsXG4gICAgICAgIGtleSxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIG93bmVyLFxuICAgICAgICBwcm9wcyxcbiAgICAgICAgZWxlbWVudC5fZGVidWdTdGFjayxcbiAgICAgICAgZWxlbWVudC5fZGVidWdUYXNrXG4gICAgICApO1xuICAgICAgZm9yIChrZXkgPSAyOyBrZXkgPCBhcmd1bWVudHMubGVuZ3RoOyBrZXkrKylcbiAgICAgICAgKG93bmVyID0gYXJndW1lbnRzW2tleV0pLFxuICAgICAgICAgIGlzVmFsaWRFbGVtZW50KG93bmVyKSAmJiBvd25lci5fc3RvcmUgJiYgKG93bmVyLl9zdG9yZS52YWxpZGF0ZWQgPSAxKTtcbiAgICAgIHJldHVybiBwcm9wcztcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JlYXRlQ29udGV4dCA9IGZ1bmN0aW9uIChkZWZhdWx0VmFsdWUpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0NPTlRFWFRfVFlQRSxcbiAgICAgICAgX2N1cnJlbnRWYWx1ZTogZGVmYXVsdFZhbHVlLFxuICAgICAgICBfY3VycmVudFZhbHVlMjogZGVmYXVsdFZhbHVlLFxuICAgICAgICBfdGhyZWFkQ291bnQ6IDAsXG4gICAgICAgIFByb3ZpZGVyOiBudWxsLFxuICAgICAgICBDb25zdW1lcjogbnVsbFxuICAgICAgfTtcbiAgICAgIGRlZmF1bHRWYWx1ZS5Qcm92aWRlciA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIGRlZmF1bHRWYWx1ZS5Db25zdW1lciA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0NPTlNVTUVSX1RZUEUsXG4gICAgICAgIF9jb250ZXh0OiBkZWZhdWx0VmFsdWVcbiAgICAgIH07XG4gICAgICBkZWZhdWx0VmFsdWUuX2N1cnJlbnRSZW5kZXJlciA9IG51bGw7XG4gICAgICBkZWZhdWx0VmFsdWUuX2N1cnJlbnRSZW5kZXJlcjIgPSBudWxsO1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIGNoaWxkcmVuKSB7XG4gICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbm9kZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaXNWYWxpZEVsZW1lbnQobm9kZSkgJiYgbm9kZS5fc3RvcmUgJiYgKG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IDEpO1xuICAgICAgfVxuICAgICAgaSA9IHt9O1xuICAgICAgbm9kZSA9IG51bGw7XG4gICAgICBpZiAobnVsbCAhPSBjb25maWcpXG4gICAgICAgIGZvciAocHJvcE5hbWUgaW4gKGRpZFdhcm5BYm91dE9sZEpTWFJ1bnRpbWUgfHxcbiAgICAgICAgICAhKFwiX19zZWxmXCIgaW4gY29uZmlnKSB8fFxuICAgICAgICAgIFwia2V5XCIgaW4gY29uZmlnIHx8XG4gICAgICAgICAgKChkaWRXYXJuQWJvdXRPbGRKU1hSdW50aW1lID0gITApLFxuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIFwiWW91ciBhcHAgKG9yIG9uZSBvZiBpdHMgZGVwZW5kZW5jaWVzKSBpcyB1c2luZyBhbiBvdXRkYXRlZCBKU1ggdHJhbnNmb3JtLiBVcGRhdGUgdG8gdGhlIG1vZGVybiBKU1ggdHJhbnNmb3JtIGZvciBmYXN0ZXIgcGVyZm9ybWFuY2U6IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvbmV3LWpzeC10cmFuc2Zvcm1cIlxuICAgICAgICAgICkpLFxuICAgICAgICBoYXNWYWxpZEtleShjb25maWcpICYmXG4gICAgICAgICAgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSksIChub2RlID0gXCJcIiArIGNvbmZpZy5rZXkpKSxcbiAgICAgICAgY29uZmlnKSlcbiAgICAgICAgICBoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpICYmXG4gICAgICAgICAgICBcImtleVwiICE9PSBwcm9wTmFtZSAmJlxuICAgICAgICAgICAgXCJfX3NlbGZcIiAhPT0gcHJvcE5hbWUgJiZcbiAgICAgICAgICAgIFwiX19zb3VyY2VcIiAhPT0gcHJvcE5hbWUgJiZcbiAgICAgICAgICAgIChpW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV0pO1xuICAgICAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gICAgICBpZiAoMSA9PT0gY2hpbGRyZW5MZW5ndGgpIGkuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIGVsc2UgaWYgKDEgPCBjaGlsZHJlbkxlbmd0aCkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIHZhciBjaGlsZEFycmF5ID0gQXJyYXkoY2hpbGRyZW5MZW5ndGgpLCBfaSA9IDA7XG4gICAgICAgICAgX2kgPCBjaGlsZHJlbkxlbmd0aDtcbiAgICAgICAgICBfaSsrXG4gICAgICAgIClcbiAgICAgICAgICBjaGlsZEFycmF5W19pXSA9IGFyZ3VtZW50c1tfaSArIDJdO1xuICAgICAgICBPYmplY3QuZnJlZXplICYmIE9iamVjdC5mcmVlemUoY2hpbGRBcnJheSk7XG4gICAgICAgIGkuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgJiYgdHlwZS5kZWZhdWx0UHJvcHMpXG4gICAgICAgIGZvciAocHJvcE5hbWUgaW4gKChjaGlsZHJlbkxlbmd0aCA9IHR5cGUuZGVmYXVsdFByb3BzKSwgY2hpbGRyZW5MZW5ndGgpKVxuICAgICAgICAgIHZvaWQgMCA9PT0gaVtwcm9wTmFtZV0gJiYgKGlbcHJvcE5hbWVdID0gY2hpbGRyZW5MZW5ndGhbcHJvcE5hbWVdKTtcbiAgICAgIG5vZGUgJiZcbiAgICAgICAgZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIoXG4gICAgICAgICAgaSxcbiAgICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0eXBlXG4gICAgICAgICAgICA/IHR5cGUuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICA6IHR5cGVcbiAgICAgICAgKTtcbiAgICAgIHZhciBwcm9wTmFtZSA9IDFlNCA+IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzKys7XG4gICAgICByZXR1cm4gUmVhY3RFbGVtZW50KFxuICAgICAgICB0eXBlLFxuICAgICAgICBub2RlLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgZ2V0T3duZXIoKSxcbiAgICAgICAgaSxcbiAgICAgICAgcHJvcE5hbWUgPyBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKSA6IHVua25vd25Pd25lckRlYnVnU3RhY2ssXG4gICAgICAgIHByb3BOYW1lID8gY3JlYXRlVGFzayhnZXRUYXNrTmFtZSh0eXBlKSkgOiB1bmtub3duT3duZXJEZWJ1Z1Rhc2tcbiAgICAgICk7XG4gICAgfTtcbiAgICBleHBvcnRzLmNyZWF0ZVJlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZWZPYmplY3QgPSB7IGN1cnJlbnQ6IG51bGwgfTtcbiAgICAgIE9iamVjdC5zZWFsKHJlZk9iamVjdCk7XG4gICAgICByZXR1cm4gcmVmT2JqZWN0O1xuICAgIH07XG4gICAgZXhwb3J0cy5mb3J3YXJkUmVmID0gZnVuY3Rpb24gKHJlbmRlcikge1xuICAgICAgbnVsbCAhPSByZW5kZXIgJiYgcmVuZGVyLiQkdHlwZW9mID09PSBSRUFDVF9NRU1PX1RZUEVcbiAgICAgICAgPyBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlcXVpcmVzIGEgcmVuZGVyIGZ1bmN0aW9uIGJ1dCByZWNlaXZlZCBhIGBtZW1vYCBjb21wb25lbnQuIEluc3RlYWQgb2YgZm9yd2FyZFJlZihtZW1vKC4uLikpLCB1c2UgbWVtbyhmb3J3YXJkUmVmKC4uLikpLlwiXG4gICAgICAgICAgKVxuICAgICAgICA6IFwiZnVuY3Rpb25cIiAhPT0gdHlwZW9mIHJlbmRlclxuICAgICAgICAgID8gY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlcXVpcmVzIGEgcmVuZGVyIGZ1bmN0aW9uIGJ1dCB3YXMgZ2l2ZW4gJXMuXCIsXG4gICAgICAgICAgICAgIG51bGwgPT09IHJlbmRlciA/IFwibnVsbFwiIDogdHlwZW9mIHJlbmRlclxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogMCAhPT0gcmVuZGVyLmxlbmd0aCAmJlxuICAgICAgICAgICAgMiAhPT0gcmVuZGVyLmxlbmd0aCAmJlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlbmRlciBmdW5jdGlvbnMgYWNjZXB0IGV4YWN0bHkgdHdvIHBhcmFtZXRlcnM6IHByb3BzIGFuZCByZWYuICVzXCIsXG4gICAgICAgICAgICAgIDEgPT09IHJlbmRlci5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IFwiRGlkIHlvdSBmb3JnZXQgdG8gdXNlIHRoZSByZWYgcGFyYW1ldGVyP1wiXG4gICAgICAgICAgICAgICAgOiBcIkFueSBhZGRpdGlvbmFsIHBhcmFtZXRlciB3aWxsIGJlIHVuZGVmaW5lZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgIG51bGwgIT0gcmVuZGVyICYmXG4gICAgICAgIG51bGwgIT0gcmVuZGVyLmRlZmF1bHRQcm9wcyAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiZm9yd2FyZFJlZiByZW5kZXIgZnVuY3Rpb25zIGRvIG5vdCBzdXBwb3J0IGRlZmF1bHRQcm9wcy4gRGlkIHlvdSBhY2NpZGVudGFsbHkgcGFzcyBhIFJlYWN0IGNvbXBvbmVudD9cIlxuICAgICAgICApO1xuICAgICAgdmFyIGVsZW1lbnRUeXBlID0geyAkJHR5cGVvZjogUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSwgcmVuZGVyOiByZW5kZXIgfSxcbiAgICAgICAgb3duTmFtZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50VHlwZSwgXCJkaXNwbGF5TmFtZVwiLCB7XG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gb3duTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgIG93bk5hbWUgPSBuYW1lO1xuICAgICAgICAgIHJlbmRlci5uYW1lIHx8XG4gICAgICAgICAgICByZW5kZXIuZGlzcGxheU5hbWUgfHxcbiAgICAgICAgICAgIChPYmplY3QuZGVmaW5lUHJvcGVydHkocmVuZGVyLCBcIm5hbWVcIiwgeyB2YWx1ZTogbmFtZSB9KSxcbiAgICAgICAgICAgIChyZW5kZXIuZGlzcGxheU5hbWUgPSBuYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGVsZW1lbnRUeXBlO1xuICAgIH07XG4gICAgZXhwb3J0cy5pc1ZhbGlkRWxlbWVudCA9IGlzVmFsaWRFbGVtZW50O1xuICAgIGV4cG9ydHMubGF6eSA9IGZ1bmN0aW9uIChjdG9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAkJHR5cGVvZjogUkVBQ1RfTEFaWV9UWVBFLFxuICAgICAgICBfcGF5bG9hZDogeyBfc3RhdHVzOiAtMSwgX3Jlc3VsdDogY3RvciB9LFxuICAgICAgICBfaW5pdDogbGF6eUluaXRpYWxpemVyXG4gICAgICB9O1xuICAgIH07XG4gICAgZXhwb3J0cy5tZW1vID0gZnVuY3Rpb24gKHR5cGUsIGNvbXBhcmUpIHtcbiAgICAgIG51bGwgPT0gdHlwZSAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwibWVtbzogVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBjb21wb25lbnQuIEluc3RlYWQgcmVjZWl2ZWQ6ICVzXCIsXG4gICAgICAgICAgbnVsbCA9PT0gdHlwZSA/IFwibnVsbFwiIDogdHlwZW9mIHR5cGVcbiAgICAgICAgKTtcbiAgICAgIGNvbXBhcmUgPSB7XG4gICAgICAgICQkdHlwZW9mOiBSRUFDVF9NRU1PX1RZUEUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGNvbXBhcmU6IHZvaWQgMCA9PT0gY29tcGFyZSA/IG51bGwgOiBjb21wYXJlXG4gICAgICB9O1xuICAgICAgdmFyIG93bk5hbWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcGFyZSwgXCJkaXNwbGF5TmFtZVwiLCB7XG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gb3duTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgIG93bk5hbWUgPSBuYW1lO1xuICAgICAgICAgIHR5cGUubmFtZSB8fFxuICAgICAgICAgICAgdHlwZS5kaXNwbGF5TmFtZSB8fFxuICAgICAgICAgICAgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIm5hbWVcIiwgeyB2YWx1ZTogbmFtZSB9KSxcbiAgICAgICAgICAgICh0eXBlLmRpc3BsYXlOYW1lID0gbmFtZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb21wYXJlO1xuICAgIH07XG4gICAgZXhwb3J0cy5zdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICAgIHZhciBwcmV2VHJhbnNpdGlvbiA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQsXG4gICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uID0ge307XG4gICAgICBSZWFjdFNoYXJlZEludGVybmFscy5UID0gY3VycmVudFRyYW5zaXRpb247XG4gICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyA9IG5ldyBTZXQoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHNjb3BlKCksXG4gICAgICAgICAgb25TdGFydFRyYW5zaXRpb25GaW5pc2ggPSBSZWFjdFNoYXJlZEludGVybmFscy5TO1xuICAgICAgICBudWxsICE9PSBvblN0YXJ0VHJhbnNpdGlvbkZpbmlzaCAmJlxuICAgICAgICAgIG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoKGN1cnJlbnRUcmFuc2l0aW9uLCByZXR1cm5WYWx1ZSk7XG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiByZXR1cm5WYWx1ZSAmJlxuICAgICAgICAgIG51bGwgIT09IHJldHVyblZhbHVlICYmXG4gICAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgcmV0dXJuVmFsdWUudGhlbiAmJlxuICAgICAgICAgIHJldHVyblZhbHVlLnRoZW4obm9vcCwgcmVwb3J0R2xvYmFsRXJyb3IpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVwb3J0R2xvYmFsRXJyb3IoZXJyb3IpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgbnVsbCA9PT0gcHJldlRyYW5zaXRpb24gJiZcbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyAmJlxuICAgICAgICAgICgoc2NvcGUgPSBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycy5zaXplKSxcbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycy5jbGVhcigpLFxuICAgICAgICAgIDEwIDwgc2NvcGUgJiZcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgXCJEZXRlY3RlZCBhIGxhcmdlIG51bWJlciBvZiB1cGRhdGVzIGluc2lkZSBzdGFydFRyYW5zaXRpb24uIElmIHRoaXMgaXMgZHVlIHRvIGEgc3Vic2NyaXB0aW9uIHBsZWFzZSByZS13cml0ZSBpdCB0byB1c2UgUmVhY3QgcHJvdmlkZWQgaG9va3MuIE90aGVyd2lzZSBjb25jdXJyZW50IG1vZGUgZ3VhcmFudGVlcyBhcmUgb2ZmIHRoZSB0YWJsZS5cIlxuICAgICAgICAgICAgKSksXG4gICAgICAgICAgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBwcmV2VHJhbnNpdGlvbik7XG4gICAgICB9XG4gICAgfTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX3VzZUNhY2hlUmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUNhY2hlUmVmcmVzaCgpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2UgPSBmdW5jdGlvbiAodXNhYmxlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2UodXNhYmxlKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlQWN0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYWN0aW9uLCBpbml0aWFsU3RhdGUsIHBlcm1hbGluaykge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlQWN0aW9uU3RhdGUoXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgICBwZXJtYWxpbmtcbiAgICAgICk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUNhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBkZXBzKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VDYWxsYmFjayhjYWxsYmFjaywgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUNvbnRleHQgPSBmdW5jdGlvbiAoQ29udGV4dCkge1xuICAgICAgdmFyIGRpc3BhdGNoZXIgPSByZXNvbHZlRGlzcGF0Y2hlcigpO1xuICAgICAgQ29udGV4dC4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OU1VNRVJfVFlQRSAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiQ2FsbGluZyB1c2VDb250ZXh0KENvbnRleHQuQ29uc3VtZXIpIGlzIG5vdCBzdXBwb3J0ZWQgYW5kIHdpbGwgY2F1c2UgYnVncy4gRGlkIHlvdSBtZWFuIHRvIGNhbGwgdXNlQ29udGV4dChDb250ZXh0KSBpbnN0ZWFkP1wiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gZGlzcGF0Y2hlci51c2VDb250ZXh0KENvbnRleHQpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VEZWJ1Z1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXR0ZXJGbikge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlRGVidWdWYWx1ZSh2YWx1ZSwgZm9ybWF0dGVyRm4pO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VEZWZlcnJlZFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBpbml0aWFsVmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZURlZmVycmVkVmFsdWUodmFsdWUsIGluaXRpYWxWYWx1ZSk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUVmZmVjdCA9IGZ1bmN0aW9uIChjcmVhdGUsIGNyZWF0ZURlcHMsIHVwZGF0ZSkge1xuICAgICAgbnVsbCA9PSBjcmVhdGUgJiZcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiUmVhY3QgSG9vayB1c2VFZmZlY3QgcmVxdWlyZXMgYW4gZWZmZWN0IGNhbGxiYWNrLiBEaWQgeW91IGZvcmdldCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gdGhlIGhvb2s/XCJcbiAgICAgICAgKTtcbiAgICAgIHZhciBkaXNwYXRjaGVyID0gcmVzb2x2ZURpc3BhdGNoZXIoKTtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB1cGRhdGUpXG4gICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgIFwidXNlRWZmZWN0IENSVUQgb3ZlcmxvYWQgaXMgbm90IGVuYWJsZWQgaW4gdGhpcyBidWlsZCBvZiBSZWFjdC5cIlxuICAgICAgICApO1xuICAgICAgcmV0dXJuIGRpc3BhdGNoZXIudXNlRWZmZWN0KGNyZWF0ZSwgY3JlYXRlRGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlSWQoKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlSW1wZXJhdGl2ZUhhbmRsZSA9IGZ1bmN0aW9uIChyZWYsIGNyZWF0ZSwgZGVwcykge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGNyZWF0ZSwgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUluc2VydGlvbkVmZmVjdCA9IGZ1bmN0aW9uIChjcmVhdGUsIGRlcHMpIHtcbiAgICAgIG51bGwgPT0gY3JlYXRlICYmXG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIlJlYWN0IEhvb2sgdXNlSW5zZXJ0aW9uRWZmZWN0IHJlcXVpcmVzIGFuIGVmZmVjdCBjYWxsYmFjay4gRGlkIHlvdSBmb3JnZXQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIHRoZSBob29rP1wiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VJbnNlcnRpb25FZmZlY3QoY3JlYXRlLCBkZXBzKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlTGF5b3V0RWZmZWN0ID0gZnVuY3Rpb24gKGNyZWF0ZSwgZGVwcykge1xuICAgICAgbnVsbCA9PSBjcmVhdGUgJiZcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiUmVhY3QgSG9vayB1c2VMYXlvdXRFZmZlY3QgcmVxdWlyZXMgYW4gZWZmZWN0IGNhbGxiYWNrLiBEaWQgeW91IGZvcmdldCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gdGhlIGhvb2s/XCJcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUxheW91dEVmZmVjdChjcmVhdGUsIGRlcHMpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VNZW1vID0gZnVuY3Rpb24gKGNyZWF0ZSwgZGVwcykge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlTWVtbyhjcmVhdGUsIGRlcHMpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VPcHRpbWlzdGljID0gZnVuY3Rpb24gKHBhc3N0aHJvdWdoLCByZWR1Y2VyKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VPcHRpbWlzdGljKHBhc3N0aHJvdWdoLCByZWR1Y2VyKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlUmVkdWNlciA9IGZ1bmN0aW9uIChyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VSZWR1Y2VyKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VSZWYgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VSZWYoaW5pdGlhbFZhbHVlKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlU3RhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VTdGF0ZShpbml0aWFsU3RhdGUpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VTeW5jRXh0ZXJuYWxTdG9yZSA9IGZ1bmN0aW9uIChcbiAgICAgIHN1YnNjcmliZSxcbiAgICAgIGdldFNuYXBzaG90LFxuICAgICAgZ2V0U2VydmVyU25hcHNob3RcbiAgICApIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgICAgICBzdWJzY3JpYmUsXG4gICAgICAgIGdldFNuYXBzaG90LFxuICAgICAgICBnZXRTZXJ2ZXJTbmFwc2hvdFxuICAgICAgKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVRyYW5zaXRpb24oKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudmVyc2lvbiA9IFwiMTkuMS4xXCI7XG4gICAgXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAmJlxuICAgICAgXCJmdW5jdGlvblwiID09PVxuICAgICAgICB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdG9wICYmXG4gICAgICBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0b3AoRXJyb3IoKSk7XG4gIH0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QucHJvZHVjdGlvbi5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC5kZXZlbG9wbWVudC5qcycpO1xufVxuIiwiLyoqXG4gKiBUaGlzIGZpbGUgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZnJvbSBgcHJlLXB1Ymxpc2guanNgLlxuICogRG8gbm90IG1hbnVhbGx5IGVkaXQuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwiYXJlYVwiOiB0cnVlLFxuICBcImJhc2VcIjogdHJ1ZSxcbiAgXCJiclwiOiB0cnVlLFxuICBcImNvbFwiOiB0cnVlLFxuICBcImVtYmVkXCI6IHRydWUsXG4gIFwiaHJcIjogdHJ1ZSxcbiAgXCJpbWdcIjogdHJ1ZSxcbiAgXCJpbnB1dFwiOiB0cnVlLFxuICBcImxpbmtcIjogdHJ1ZSxcbiAgXCJtZXRhXCI6IHRydWUsXG4gIFwicGFyYW1cIjogdHJ1ZSxcbiAgXCJzb3VyY2VcIjogdHJ1ZSxcbiAgXCJ0cmFja1wiOiB0cnVlLFxuICBcIndiclwiOiB0cnVlXG59O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5tZCA9IChtb2R1bGUpID0+IHtcblx0bW9kdWxlLnBhdGhzID0gW107XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiaW1wb3J0IHR5cGUgT3BlbkZpbiBmcm9tIFwiQG9wZW5maW4vY29yZVwiO1xuaW1wb3J0IHtcblx0QnJvd3NlckJ1dHRvblR5cGUsXG5cdFBhbmVsUG9zaXRpb24sXG5cdGdldEN1cnJlbnRTeW5jLFxuXHR0eXBlIEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0LFxuXHR0eXBlIEJyb3dzZXJXaW5kb3dNb2R1bGUsXG5cdHR5cGUgUGFnZSxcblx0dHlwZSBQYWdlTGF5b3V0LFxuXHR0eXBlIFBhZ2VMYXlvdXREZXRhaWxzLFxuXHR0eXBlIFBhZ2VXaXRoVXBkYXRhYmxlUnVudGltZUF0dHJpYnMsXG5cdHR5cGUgVG9vbGJhck9wdGlvbnNcbn0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybVwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBhc3luYyAoKSA9PiB7XG5cdC8vIGNyZWF0ZSBicm93c2VyIHdpbmRvdyB3aXRoIHZpZXdcblx0Y29uc3QgY3JlYXRlQnJvd3NlcldpbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGF1bmNoLWJyb3dzZXItd2luZG93XCIpO1xuXHRpZiAoY3JlYXRlQnJvd3NlcldpbkJ0bikge1xuXHRcdGNyZWF0ZUJyb3dzZXJXaW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IGNyZWF0ZUJyb3dzZXJXaW5kb3coKSk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgd2l0aCBubyBzYXZlIHJlcXVpcmVtZW50XG5cdGNvbnN0IGNyZWF0ZUJyb3dzZXJXaW5Ob1NhdmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xhdW5jaC1icm93c2VyLXdpbmRvdy1uby1zYXZlXCIpO1xuXHRpZiAoY3JlYXRlQnJvd3Nlcldpbk5vU2F2ZUJ0bikge1xuXHRcdGNyZWF0ZUJyb3dzZXJXaW5Ob1NhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZUJyb3dzZXJXaW5kb3dXaXRob3V0UmVxdWlyaW5nU2F2ZSk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgbWF4aW1pemVkXG5cdGNvbnN0IGNyZWF0ZUJyb3dzZXJNYXhpbWl6ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xhdW5jaC1icm93c2VyLXdpbmRvdy1tYXhpbWl6ZWRcIik7XG5cdGlmIChjcmVhdGVCcm93c2VyTWF4aW1pemVkKSB7XG5cdFx0Y3JlYXRlQnJvd3Nlck1heGltaXplZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY3JlYXRlQnJvd3NlcldpbmRvd01heGltaXplZCk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgd2l0aCBjdXN0b20gc2F2ZSBwYWdlIGJ1dHRvblxuXHRjb25zdCBjdXN0b21Ub29sYmFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXVuY2gtYnJvd3Nlci13aW5kb3ctd2l0aC1jdXN0b20tYnRuXCIpO1xuXHRpZiAoY3VzdG9tVG9vbGJhckJ0bikge1xuXHRcdGN1c3RvbVRvb2xiYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZUN1c3RvbVRvb2xiYXJXaW5kb3cpO1xuXHR9XG5cblx0Ly8gY3JlYXRlIGJyb3dzZXIgd2luZG93IHdpdGggc2luZ2xlIHBhZ2UgYW5kIG5vIHRhYlxuXHRjb25zdCBzaW5nbGVQYWdlQnJvd3Nlcldpbk5vVGFiQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXVuY2gtbm9wYWdldGFiLWJyb3dzZXItd2luZG93XCIpO1xuXHRpZiAoc2luZ2xlUGFnZUJyb3dzZXJXaW5Ob1RhYkJ0bikge1xuXHRcdHNpbmdsZVBhZ2VCcm93c2VyV2luTm9UYWJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZVNpbmdsZVBhZ2VOb1RhYldpbmRvdyk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgd2l0aCBtdWx0aXBsZSBwYWdlc1xuXHRjb25zdCBtdWx0aVBhZ2VCcm93c2VyV2luQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXVuY2gtbXVsdGlwYWdlLWJyb3dzZXItd2luZG93XCIpO1xuXHRpZiAobXVsdGlQYWdlQnJvd3NlcldpbkJ0bikge1xuXHRcdG11bHRpUGFnZUJyb3dzZXJXaW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZU11bHRpUGFnZVdpbmRvdyk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgd2l0aCBmaXhlZCB2aWV3c1xuXHRjb25zdCBmaXhlZFZpZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXVuY2gtZml4ZWQtdmlld3NcIik7XG5cdGlmIChmaXhlZFZpZXdzKSB7XG5cdFx0Zml4ZWRWaWV3cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY3JlYXRlV2luZG93V2l0aEZpeGVkVmlld3MpO1xuXHR9XG5cblx0Ly8gZ2V0IGFsbCBicm93c2VyIHBhZ2VzXG5cdGNvbnN0IGdldEJyb3dzZXJQYWdlc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ2V0LWJyb3dzZXItcGFnZXNcIik7XG5cdGlmIChnZXRCcm93c2VyUGFnZXNCdG4pIHtcblx0XHRnZXRCcm93c2VyUGFnZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IChmaW4ubWUgYXMgT3BlbkZpbi5XaW5kb3cpLnNob3dEZXZlbG9wZXJUb29scygpO1xuXHRcdFx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRcdFx0Y29uc3QgbGFzdEZvY3VzZWRXaW5kb3cgPSBhd2FpdCBwbGF0Zm9ybS5Ccm93c2VyLmdldExhc3RGb2N1c2VkV2luZG93KCk7XG5cdFx0XHRpZiAobGFzdEZvY3VzZWRXaW5kb3cpIHtcblx0XHRcdFx0Y29uc3QgcGFnZXMgPSBhd2FpdCBwbGF0Zm9ybS5Ccm93c2VyLmdldEFsbEF0dGFjaGVkUGFnZXMoKTtcblx0XHRcdFx0Y29uc3QgbGFzdEZvY3VzZWRXaW5kb3dJZGVudGl0eSA9IGF3YWl0IHBsYXRmb3JtLkJyb3dzZXIuZ2V0TGFzdEZvY3VzZWRXaW5kb3coKTtcblx0XHRcdFx0aWYgKGxhc3RGb2N1c2VkV2luZG93SWRlbnRpdHkpIHtcblx0XHRcdFx0XHRjb25zdCB7IHV1aWQsIG5hbWUgfSA9IGxhc3RGb2N1c2VkV2luZG93SWRlbnRpdHk7XG5cdFx0XHRcdFx0Y29uc3Qgd3JhcHBlZEJyb3dzZXJXaW5kb3cgPSBwbGF0Zm9ybS5Ccm93c2VyLndyYXBTeW5jKHsgdXVpZCwgbmFtZSB9KTtcblx0XHRcdFx0XHRjb25zdCBsYXN0QnJvd3NlcldpbmRvd1BhZ2VzID0gYXdhaXQgd3JhcHBlZEJyb3dzZXJXaW5kb3cuZ2V0UGFnZXMoKTtcblx0XHRcdFx0XHRjb25zdCB1bnNhdmVkUGFnZXMgPSBsYXN0QnJvd3NlcldpbmRvd1BhZ2VzLmZpbHRlcigocGFnZSkgPT4gcGFnZS5oYXNVbnNhdmVkQ2hhbmdlcyk7XG5cdFx0XHRcdFx0Y29uc29sZS5kaXIoeyBtZXNzYWdlOiBcIkFsbCBQQUdFU1wiLCBwYWdlcyB9KTtcblx0XHRcdFx0XHRjb25zb2xlLmRpcih7IG1lc3NhZ2U6IFwiVU5TQVZFRCBQQUdFU1wiLCB1bnNhdmVkUGFnZXMgfSk7XG5cdFx0XHRcdFx0Y29uc29sZS5kaXIoeyBtZXNzYWdlOiBcIkxBU1QgRk9DVVNFRCBXSU5ET1dcIiwgd3JhcHBlZEJyb3dzZXJXaW5kb3cgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIENyZWF0ZSBicm93c2VyIHdpbmRvdyB3aXRoIGZpeGVkIHZpZXdzXG5cdGNvbnN0IHNpbmdsZUxvY2tlZFBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xhdW5jaC1zaW5nbGUtbG9ja2VkLXBhZ2VcIik7XG5cdGlmIChzaW5nbGVMb2NrZWRQYWdlKSB7XG5cdFx0c2luZ2xlTG9ja2VkUGFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY3JlYXRlV2luZG93V2l0aExvY2tlZFBhZ2UpO1xuXHR9XG5cblx0Ly8gcXVpdCBsYXVuY2hlciAvIGJyb3dzZXJcblx0Y29uc3QgcXVpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcXVpdFwiKTtcblx0aWYgKHF1aXRCdG4pIHtcblx0XHRxdWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdFx0XHRhd2FpdCBwbGF0Zm9ybS5xdWl0KCk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG4vKipcbiAqIENyZWF0ZSBhIGJyb3dzZXIgd2luZG93LlxuICogQHBhcmFtIGhhc1Vuc2F2ZWRDaGFuZ2VzIERldGVybWluZXMgaWYgdGhlIHdpbmRvdyBoYXMgdW5zYXZlZCBjaGFuZ2VkLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgd2luZG93LlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVCcm93c2VyV2luZG93KGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZSk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRjb25zdCBwYWdlOiBQYWdlID0gYXdhaXQgY3JlYXRlUGFnZVdpdGhMYXlvdXQoXG5cdFx0XCJVbnRpdGxlZCBQYWdlXCIsXG5cdFx0Y3JlYXRlRGVmYXVsdFBhZ2VMYXlvdXQoKSxcblx0XHRoYXNVbnNhdmVkQ2hhbmdlc1xuXHQpO1xuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2VdO1xuXG5cdGNvbnN0IG9wdGlvbnM6IEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0ID0ge1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7IHBhZ2VzIH1cblx0fTtcblxuXHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdGNvbnN0IGNyZWF0ZWRCcm93c2VyV2luOiBCcm93c2VyV2luZG93TW9kdWxlID0gYXdhaXQgcGxhdGZvcm0uQnJvd3Nlci5jcmVhdGVXaW5kb3cob3B0aW9ucyk7XG5cdHJldHVybiBjcmVhdGVkQnJvd3Nlcldpbjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBicm93c2VyIHdpbmRvdyB3aGljaCBoYXMgY2hhbmdlcyBzbyByZXF1aXJlZCBzYXZpbmcuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBicm93c2VyIHdpbmRvdy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQnJvd3NlcldpbmRvd1dpdGhvdXRSZXF1aXJpbmdTYXZlKCk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRyZXR1cm4gY3JlYXRlQnJvd3NlcldpbmRvdyhmYWxzZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgYnJvd3NlciB3aW5kb3cgaW4gaXRzIG1heGltaXplZCBzdGF0ZS5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGJyb3dzZXIgd2luZG93LlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVCcm93c2VyV2luZG93TWF4aW1pemVkKCk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRjb25zdCBwYWdlOiBQYWdlID0gYXdhaXQgY3JlYXRlUGFnZVdpdGhMYXlvdXQoXCJVbnRpdGxlZCBQYWdlXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2VdO1xuXG5cdGNvbnN0IG9wdGlvbnM6IEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0ID0ge1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7IHBhZ2VzIH0sXG5cdFx0c3RhdGU6IFwibWF4aW1pemVkXCJcblx0fTtcblxuXHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdGNvbnN0IGNyZWF0ZWRCcm93c2VyV2luOiBCcm93c2VyV2luZG93TW9kdWxlID0gYXdhaXQgcGxhdGZvcm0uQnJvd3Nlci5jcmVhdGVXaW5kb3cob3B0aW9ucyk7XG5cdHJldHVybiBjcmVhdGVkQnJvd3Nlcldpbjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBicm93c2VyIHdpbmRvdyB3aGljaCBoYXMgYSBzaW5nbGUgcGFnZSBhbmQgaGlkZGVuIHRhYnMuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBicm93c2VyIHdpbmRvdy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2luZ2xlUGFnZU5vVGFiV2luZG93KCk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRjb25zdCBwYWdlOiBQYWdlID0gYXdhaXQgY3JlYXRlUGFnZVdpdGhMYXlvdXQoXCJVbnRpdGxlZCBQYWdlXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2VdO1xuXG5cdGNvbnN0IG9wdGlvbnM6IEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0ID0ge1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7IHBhZ2VzLCBkaXNhYmxlTXVsdGlwbGVQYWdlczogdHJ1ZSB9LFxuXHRcdGV4cGVyaW1lbnRhbDoge1xuXHRcdFx0c2hvd0Zhdmljb25zOiBmYWxzZVxuXHRcdH1cblx0fTtcblxuXHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdGNvbnN0IGNyZWF0ZWRCcm93c2VyV2luOiBCcm93c2VyV2luZG93TW9kdWxlID0gYXdhaXQgcGxhdGZvcm0uQnJvd3Nlci5jcmVhdGVXaW5kb3cob3B0aW9ucyk7XG5cdHJldHVybiBjcmVhdGVkQnJvd3Nlcldpbjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSB3aW5kb3cgd2hpY2ggaGFzIGEgY3VzdG9tIHRvb2xiYXIuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBicm93c2VyIHdpbmRvdy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tVG9vbGJhcldpbmRvdygpOiBQcm9taXNlPEJyb3dzZXJXaW5kb3dNb2R1bGU+IHtcblx0Y29uc3QgcGFnZTogUGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFwiVW50aXRsZWQgUGFnZVwiLCBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpKTtcblx0Y29uc3QgcGFnZXM6IFBhZ2VbXSA9IFtwYWdlXTtcblx0Y29uc3QgdG9vbGJhck9wdGlvbnM6IFRvb2xiYXJPcHRpb25zID0ge1xuXHRcdGJ1dHRvbnM6IFtcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogQnJvd3NlckJ1dHRvblR5cGUuQ3VzdG9tLFxuXHRcdFx0XHR0b29sdGlwOiBcIlNhdmUgQ3VycmVudCBQYWdlXCIsXG5cdFx0XHRcdGljb25Vcmw6IFwiaHR0cHM6Ly93d3cub3BlbmZpbi5jby9mYXZpY29uLmljb1wiLFxuXHRcdFx0XHRhY3Rpb246IHtcblx0XHRcdFx0XHRpZDogXCJjdXN0b20tc2F2ZS1wYWdlXCIsXG5cdFx0XHRcdFx0Y3VzdG9tRGF0YToge1xuXHRcdFx0XHRcdFx0cGFnZUlkOiBwYWdlLnBhZ2VJZCxcblx0XHRcdFx0XHRcdGxheW91dDogcGFnZS5sYXlvdXRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLkN1c3RvbSxcblx0XHRcdFx0dG9vbHRpcDogXCJSZW5hbWUgQ3VycmVudCBQYWdlXCIsXG5cdFx0XHRcdGljb25Vcmw6IFwiaHR0cHM6Ly93d3cub3BlbmZpbi5jby9mYXZpY29uLmljb1wiLFxuXHRcdFx0XHRhY3Rpb246IHtcblx0XHRcdFx0XHRpZDogXCJyZW5hbWUtY3VycmVudC1wYWdlXCJcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogQnJvd3NlckJ1dHRvblR5cGUuQ3VzdG9tLFxuXHRcdFx0XHR0b29sdGlwOiBcIkFubm91bmNlXCIsXG5cdFx0XHRcdGljb25Vcmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2ljb25zL2Fubm91bmNlLnN2Z1wiLFxuXHRcdFx0XHRhY3Rpb246IHtcblx0XHRcdFx0XHRpZDogXCJhbm5vdW5jZVwiXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLkN1c3RvbSxcblx0XHRcdFx0dG9vbHRpcDogXCJQcmludFwiLFxuXHRcdFx0XHRpY29uVXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9pY29ucy9wcmludC5zdmdcIixcblx0XHRcdFx0YWN0aW9uOiB7XG5cdFx0XHRcdFx0aWQ6IFwiY3VzdG9tLXByaW50XCJcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogQnJvd3NlckJ1dHRvblR5cGUuU2hvd0hpZGVUYWJzXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiBCcm93c2VyQnV0dG9uVHlwZS5Db2xvckxpbmtpbmdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLlByZXNldExheW91dHNcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLkxvY2tVbmxvY2tQYWdlXG5cdFx0XHR9XG5cdFx0XVxuXHR9O1xuXHRjb25zdCBvcHRpb25zOiBCcm93c2VyQ3JlYXRlV2luZG93UmVxdWVzdCA9IHtcblx0XHR3b3Jrc3BhY2VQbGF0Zm9ybTogeyBwYWdlcywgdG9vbGJhck9wdGlvbnMgfVxuXHR9O1xuXG5cdGNvbnN0IHBsYXRmb3JtID0gZ2V0Q3VycmVudFN5bmMoKTtcblx0Y29uc3QgY3JlYXRlZEJyb3dzZXJXaW46IEJyb3dzZXJXaW5kb3dNb2R1bGUgPSBhd2FpdCBwbGF0Zm9ybS5Ccm93c2VyLmNyZWF0ZVdpbmRvdyhvcHRpb25zKTtcblx0cmV0dXJuIGNyZWF0ZWRCcm93c2VyV2luO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHdpbmRvdyB3aGljaCBoYXMgbXVsdGlwbGUgcGFnZXMuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBicm93c2VyIHdpbmRvdy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlTXVsdGlQYWdlV2luZG93KCk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRjb25zdCBwYWdlOiBQYWdlID0gYXdhaXQgY3JlYXRlUGFnZVdpdGhMYXlvdXQoXCJVbnRpdGxlZCBQYWdlXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXHRjb25zdCBwYWdlMTogUGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFwiVW50aXRsZWQgUGFnZVwiLCBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpKTtcblx0Y29uc3QgcGFnZTI6IFBhZ2UgPSBhd2FpdCBjcmVhdGVQYWdlV2l0aExheW91dChcIlVudGl0bGVkIFBhZ2VcIiwgY3JlYXRlRGVmYXVsdFBhZ2VMYXlvdXQoKSk7XG5cdGNvbnN0IHBhZ2VzOiBQYWdlW10gPSBbcGFnZSwgcGFnZTEsIHBhZ2UyXTtcblxuXHRjb25zdCBvcHRpb25zOiBCcm93c2VyQ3JlYXRlV2luZG93UmVxdWVzdCA9IHtcblx0XHR3b3Jrc3BhY2VQbGF0Zm9ybTogeyBwYWdlcyB9XG5cdH07XG5cblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRjb25zdCBjcmVhdGVkQnJvd3NlcldpbjogQnJvd3NlcldpbmRvd01vZHVsZSA9IGF3YWl0IHBsYXRmb3JtLkJyb3dzZXIuY3JlYXRlV2luZG93KG9wdGlvbnMpO1xuXHRyZXR1cm4gY3JlYXRlZEJyb3dzZXJXaW47XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgd2luZG93IHdpdGggYSBsb2NrZWQgcGFnZS5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGJyb3dzZXIgd2luZG93LlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVXaW5kb3dXaXRoTG9ja2VkUGFnZSgpOiBQcm9taXNlPEJyb3dzZXJXaW5kb3dNb2R1bGU+IHtcblx0Y29uc3QgcGFnZTogUGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFwiVW50aXRsZWQgUGFnZVwiLCBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpKTtcblx0Y29uc3QgcGFnZTE6IFBhZ2UgPSBhd2FpdCBjcmVhdGVQYWdlV2l0aExheW91dChcIkxvY2tlZCBQYWdlXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXHRjb25zdCBsb2NrUGFnZTE6IFBhZ2UgPSB7IGlzTG9ja2VkOiB0cnVlLCAuLi5wYWdlMSB9O1xuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2UsIGxvY2tQYWdlMV07XG5cdGNvbnN0IHRvb2xiYXJPcHRpb25zOiBUb29sYmFyT3B0aW9ucyA9IHtcblx0XHRidXR0b25zOiBbXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLkN1c3RvbSxcblx0XHRcdFx0dG9vbHRpcDogXCJTYXZlIEN1cnJlbnQgUGFnZVwiLFxuXHRcdFx0XHRpY29uVXJsOiBcImh0dHBzOi8vd3d3Lm9wZW5maW4uY28vZmF2aWNvbi5pY29cIixcblx0XHRcdFx0YWN0aW9uOiB7XG5cdFx0XHRcdFx0aWQ6IFwiY3VzdG9tLXNhdmUtcGFnZVwiLFxuXHRcdFx0XHRcdGN1c3RvbURhdGE6IHtcblx0XHRcdFx0XHRcdHBhZ2VJZDogcGFnZS5wYWdlSWQsXG5cdFx0XHRcdFx0XHRsYXlvdXQ6IHBhZ2UubGF5b3V0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiBCcm93c2VyQnV0dG9uVHlwZS5DdXN0b20sXG5cdFx0XHRcdHRvb2x0aXA6IFwiTWFudWFsIExvY2sgUGFnZVwiLFxuXHRcdFx0XHRpY29uVXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9pY29ucy9sb2NrLnN2Z1wiLFxuXHRcdFx0XHRhY3Rpb246IHtcblx0XHRcdFx0XHRpZDogXCJsb2NrLXBhZ2UtdG9nZ2xlXCJcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogQnJvd3NlckJ1dHRvblR5cGUuU2hvd0hpZGVUYWJzXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiBCcm93c2VyQnV0dG9uVHlwZS5Db2xvckxpbmtpbmdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLlByZXNldExheW91dHNcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLlNhdmVQYWdlXG5cdFx0XHR9XG5cdFx0XVxuXHR9O1xuXG5cdGNvbnN0IG9wdGlvbnM6IEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0ID0ge1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7IHBhZ2VzLCB0b29sYmFyT3B0aW9ucyB9XG5cdH07XG5cblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRjb25zdCBjcmVhdGVkQnJvd3NlcldpbjogQnJvd3NlcldpbmRvd01vZHVsZSA9IGF3YWl0IHBsYXRmb3JtLkJyb3dzZXIuY3JlYXRlV2luZG93KG9wdGlvbnMpO1xuXHRyZXR1cm4gY3JlYXRlZEJyb3dzZXJXaW47XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgd2luZG93IHdoaWNoIGhhcyBmaXhlZCB2aWV3cy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGJyb3dzZXIgd2luZG93LlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVXaW5kb3dXaXRoRml4ZWRWaWV3cygpOiBQcm9taXNlPEJyb3dzZXJXaW5kb3dNb2R1bGU+IHtcblx0Y29uc3QgcGFnZTogUGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFwiVW50aXRsZWQgUGFnZVwiLCBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpKTtcblx0Y29uc3QgcGFnZTI6IFBhZ2UgPSBhd2FpdCBjcmVhdGVQYWdlV2l0aExheW91dChcIlVudGl0bGVkIFBhZ2UgKDIpXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXG5cdHBhZ2UucGFuZWxzID0gW1xuXHRcdHtcblx0XHRcdHBvc2l0aW9uOiBQYW5lbFBvc2l0aW9uLlRvcCxcblx0XHRcdGhlaWdodDogXCI1MHB4XCIsXG5cdFx0XHR2aWV3T3B0aW9uczoge1xuXHRcdFx0XHR1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2h0bWwvdG9wLXBhbmVsLmh0bWxcIlxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cG9zaXRpb246IFBhbmVsUG9zaXRpb24uTGVmdCxcblx0XHRcdHdpZHRoOiBcIjUwcHhcIixcblx0XHRcdHZpZXdPcHRpb25zOiB7XG5cdFx0XHRcdHVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODAvaHRtbC9sZWZ0LXBhbmVsLmh0bWxcIlxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cG9zaXRpb246IFBhbmVsUG9zaXRpb24uUmlnaHQsXG5cdFx0XHR3aWR0aDogXCI1MHB4XCIsXG5cdFx0XHR2aWV3T3B0aW9uczoge1xuXHRcdFx0XHR1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2h0bWwvcmlnaHQtcGFuZWwuaHRtbFwiXG5cdFx0XHR9XG5cdFx0fSxcblx0XHR7XG5cdFx0XHRwb3NpdGlvbjogUGFuZWxQb3NpdGlvbi5Cb3R0b20sXG5cdFx0XHRoZWlnaHQ6IFwiNTBweFwiLFxuXHRcdFx0dmlld09wdGlvbnM6IHtcblx0XHRcdFx0dXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9odG1sL2JvdHRvbS1wYW5lbC5odG1sXCJcblx0XHRcdH1cblx0XHR9XG5cdF07XG5cblx0cGFnZTIucGFuZWxzID0gW1xuXHRcdHtcblx0XHRcdHBvc2l0aW9uOiBQYW5lbFBvc2l0aW9uLlRvcCxcblx0XHRcdGhlaWdodDogXCI1MHB4XCIsXG5cdFx0XHR2aWV3T3B0aW9uczoge1xuXHRcdFx0XHR1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2h0bWwvdG9wLXBhbmVsLmh0bWxcIlxuXHRcdFx0fVxuXHRcdH1cblx0XTtcblxuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2UsIHBhZ2UyXTtcblxuXHRjb25zdCBvcHRpb25zOiBCcm93c2VyQ3JlYXRlV2luZG93UmVxdWVzdCA9IHtcblx0XHR3b3Jrc3BhY2VQbGF0Zm9ybTogeyBwYWdlcyB9XG5cdH07XG5cblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRjb25zdCBjcmVhdGVkQnJvd3NlcldpbjogQnJvd3NlcldpbmRvd01vZHVsZSA9IGF3YWl0IHBsYXRmb3JtLkJyb3dzZXIuY3JlYXRlV2luZG93KG9wdGlvbnMpO1xuXHRyZXR1cm4gY3JlYXRlZEJyb3dzZXJXaW47XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcGFnZSB3aXRoIGEgc3BlY2lmaWMgbGF5b3V0LlxuICogQHBhcmFtIHRpdGxlIFRoZSB0aXRsZSBvZiB0aGUgcGFnZS5cbiAqIEBwYXJhbSBsYXlvdXQgVGhlIGxheW91dCBmb3IgdGhlIHBhZ2UuXG4gKiBAcGFyYW0gaGFzVW5zYXZlZENoYW5nZXMgRmxhZyB0byBkZXRlcm1pbmUgaWYgaXQgaGFzIHVuc2F2ZWQgY2hhbmdlZC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHBhZ2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFxuXHR0aXRsZTogc3RyaW5nLFxuXHRsYXlvdXQ6IFBhZ2VMYXlvdXQsXG5cdGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZVxuKTogUHJvbWlzZTxQYWdlV2l0aFVwZGF0YWJsZVJ1bnRpbWVBdHRyaWJzPiB7XG5cdHJldHVybiB7XG5cdFx0cGFnZUlkOiByYW5kb21VVUlEKCksXG5cdFx0dGl0bGUsXG5cdFx0bGF5b3V0OiB7XG5cdFx0XHQuLi5sYXlvdXQsXG5cdFx0XHRsYXlvdXREZXRhaWxzOiB7IGxheW91dElkOiBgbGF5b3V0LSR7cmFuZG9tVVVJRCgpfWAgfSBhcyB1bmtub3duIGFzIFBhZ2VMYXlvdXREZXRhaWxzXG5cdFx0fSxcblx0XHRpc1JlYWRPbmx5OiBmYWxzZSxcblx0XHRoYXNVbnNhdmVkQ2hhbmdlc1xuXHR9O1xufVxuXG4vKipcbiAqIENyZWF0ZSB0aGUgZGVmYXVsdCBwYWdlIGxheW91dC5cbiAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHBhZ2UgbGF5b3V0LlxuICovXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpOiBQYWdlTGF5b3V0IHtcblx0cmV0dXJuIHtcblx0XHRjb250ZW50OiBbXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IFwic3RhY2tcIixcblx0XHRcdFx0Y29udGVudDogW1xuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiY29tcG9uZW50XCIsXG5cdFx0XHRcdFx0XHRjb21wb25lbnROYW1lOiBcInZpZXdcIixcblx0XHRcdFx0XHRcdGNvbXBvbmVudFN0YXRlOiB7XG5cdFx0XHRcdFx0XHRcdHV1aWQ6IGZpbi5tZS51dWlkLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiBgJHtyYW5kb21VVUlEKCl9LXYxYCxcblx0XHRcdFx0XHRcdFx0dXJsOiBcImh0dHBzOi8vZXhhbXBsZXMuY29tXCJcblx0XHRcdFx0XHRcdH0gYXMgUGFydGlhbDxPcGVuRmluLlZpZXdPcHRpb25zPlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dHlwZTogXCJjb21wb25lbnRcIixcblx0XHRcdFx0XHRcdGNvbXBvbmVudE5hbWU6IFwidmlld1wiLFxuXHRcdFx0XHRcdFx0Y29tcG9uZW50U3RhdGU6IHtcblx0XHRcdFx0XHRcdFx0dXVpZDogZmluLm1lLnV1aWQsXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGAke3JhbmRvbVVVSUQoKX0tdjJgLFxuXHRcdFx0XHRcdFx0XHR1cmw6IFwiaHR0cHM6Ly9vcGVuZmluLmNvXCJcblx0XHRcdFx0XHRcdH0gYXMgUGFydGlhbDxPcGVuRmluLlZpZXdPcHRpb25zPlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XVxuXHRcdFx0fVxuXHRcdF1cblx0fTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbHMgcmFuZG9tVVVJRCBpZiBydW5uaW5nIGluIGEgbm9uLXNlY3VyZSBjb250ZXh0LlxuICogQHJldHVybnMgVGhlIHJhbmRvbSBVVUlELlxuICovXG5mdW5jdGlvbiByYW5kb21VVUlEKCk6IHN0cmluZyB7XG5cdGlmIChcInJhbmRvbVVVSURcIiBpbiB3aW5kb3cuY3J5cHRvKSB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdFx0cmV0dXJuIHdpbmRvdy5jcnlwdG8ucmFuZG9tVVVJRCgpO1xuXHR9XG5cdC8vIFBvbHlmaWxsIHRoZSB3aW5kb3cuY3J5cHRvLnJhbmRvbVVVSUQgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gYSBub24gc2VjdXJlIGNvbnRleHQgdGhhdCBkb2Vzbid0IGhhdmUgaXRcblx0Ly8gd2UgYXJlIHN0aWxsIHVzaW5nIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzIHdoaWNoIGlzIGFsd2F5cyBhdmFpbGFibGVcblx0Ly8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjMvMjgwMDIxOFxuXHQvKipcblx0ICogR2V0IHJhbmRvbSBoZXggdmFsdWUuXG5cdCAqIEBwYXJhbSBjIFRoZSBudW1iZXIgdG8gYmFzZSB0aGUgcmFuZG9tIHZhbHVlIG9uLlxuXHQgKiBAcmV0dXJucyBUaGUgcmFuZG9tIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UmFuZG9tSGV4KGM6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0XHRjb25zdCBybmQgPSB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0gJiAoMTUgPj4gKE51bWJlcihjKSAvIDQpKTtcblx0XHRyZXR1cm4gKFxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0XHRcdChOdW1iZXIoYykgXiBybmQpLnRvU3RyaW5nKDE2KVxuXHRcdCk7XG5cdH1cblx0cmV0dXJuIFwiMTAwMDAwMDAtMTAwMC00MDAwLTgwMDAtMTAwMDAwMDAwMDAwXCIucmVwbGFjZSgvWzAxOF0vZywgZ2V0UmFuZG9tSGV4KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==