var e,t={d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};function a(e){return null==e}t.d(n,{k:()=>o}),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(e||(e={}));const o={actions:new class{async initialize(e,t,n){this._logger=t("PageActions"),this._helpers=n}async get(t){const n={};return n["page-open"]=async t=>{if(t.callerType!==e.API){const e=t?.customData?.pageId,n=t?.customData?.windowIdentity;a(e)||(this._helpers?.launchPage?await this._helpers.launchPage(e,{targetWindowIdentity:n},this._logger):this._logger?.error("We are unable to launch a page as this module has not been passed the launchPage function."))}},n["page-delete"]=async n=>{if(n.callerType!==e.API){const e=n?.customData?.pageId;a(e)||(this._logger?.info(`Deleting page with id: ${e}`),await t.Storage.deletePage(e))}},n}},menus:new class{async initialize(e,t,n){this._logger=t("PageMenus"),this._settings=e.data}async get(e,t,n){if("global"===e&&!a(n?.windowIdentity)){const e=await t.Storage.getPages();e.sort(((e,t)=>e.title.localeCompare(t.title)));const o=this._settings?.deletePage?.include??!0,s=this._settings?.showPage?.include??!0,i=[],l={label:this._settings?.showPage?.menuLabel??"Show Page",icon:this._settings?.showPage?.menuIcon,enabled:e.length>0,submenu:[],position:{type:"SavePageAs",operation:"after",customId:"ShowPage",...this._settings?.showPage?.menuPosition}},r={label:this._settings?.deletePage?.menuLabel??"Delete Page",icon:this._settings?.deletePage?.menuIcon,enabled:e.length>0,submenu:[],position:{type:"SavePageAs",operation:"after",customId:"ShowDelete",...this._settings?.deletePage?.menuPosition}},g=[];let u=n?.windowIdentity;if(u){const e=t.Browser.wrapSync(u);!0===(await e.openfinWindow.getOptions()).workspacePlatform.disableMultiplePages&&(u=void 0)}const h=await t.Browser.getAllAttachedPages();if(e.length>0){for(const t of e){const e=h.find((e=>t.pageId===e.pageId)),n=!a(e?.parentIdentity)&&e?.parentIdentity.name===u?.name&&e?.isActive;i.push({label:t.title,type:"normal",enabled:!n,data:{type:"Custom",action:{id:"page-open",customData:{pageId:t.pageId,windowIdentity:u}}}}),g.push({label:t.title,type:"normal",enabled:a(e),data:{type:"Custom",action:{id:"page-delete",customData:{pageId:t.pageId}}}})}l.submenu&&l.submenu.push(...i),r.submenu&&r.submenu.push(...g)}const d=[];return o&&d.push(r),s&&d.push(l),d}}},initOptions:new class{async initialize(e,t,n){this._logger=t("InitOptionsShowPageHandler"),this._helpers=n,this._definition=e,this._logger.info("The handler has been loaded")}async action(e,t,n){if(a(t))this._logger?.warn(`Actions passed to the module require a payload to be passed. Requested action: ${e} can not be fulfilled.`);else try{if("show-page"===e){const e=t?.pageId;if(this._logger?.info(`The following pageId was passed and requested to show: ${e}`),!(function(e){return null!=e&&"string"==typeof e}(o=e)&&o.trim().length>0))return void this._logger?.error("The init handler received an pageId in the wrong format and is unable to show it");if(a(this._helpers?.launchPage))return void this._logger?.warn(`Unable to show page with pageId: ${e} as a launchPage function was not passed to this module via the module helpers.`);a(await(this._helpers?.launchPage(e)))&&this._logger?.error(`We have been unable to find and show the provided pageId: ${e}`)}}catch(t){this._logger?.error(`Error trying to perform action ${e}.`,t)}var o}}};var s=n.k;export{s as entryPoints};
//# sourceMappingURL=pages.bundle.js.map