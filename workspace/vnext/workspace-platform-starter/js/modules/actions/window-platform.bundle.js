var t,e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},n={};function o(t){return null==t}e.d(n,{k:()=>a}),function(t){t.CustomButton="CustomButton",t.StoreCustomButton="StoreCustomButton",t.CustomDropdownItem="CustomDropdownItem",t.GlobalContextMenu="GlobalContextMenu",t.ViewTabContextMenu="ViewTabContextMenu",t.PageTabContextMenu="PageTabContextMenu",t.SaveButtonContextMenu="SaveButtonContextMenu",t.API="API"}(t||(t={}));const a={actions:new class{async initialize(t,e,n){this._logger=e("WindowPlatformActionsProvider"),this._helpers=n,this._logger.info("Initializing")}async get(e){const n={};return n["pin-window"]=async t=>{await this.pinUnpin(e,t,!0)},n["unpin-window"]=async t=>{await this.pinUnpin(e,t,!1)},n["move-view-to-new-window"]=async n=>{if(n.callerType===t.ViewTabContextMenu){const t=await e.createView({name:n.selectedViews[0].name});if(n.selectedViews.length>1){const o=await this.getViewWindowIdentity(t);for(let a=1;a<n.selectedViews.length;a++)await e.createView({name:n.selectedViews[a].name},o,t.identity)}}},n["move-page-to-new-window"]=async n=>{if(n.callerType===t.PageTabContextMenu){const t=e.Browser.wrapSync(n.windowIdentity),o=await t.getPage(n.pageId);await e.createWindow({workspacePlatform:{pages:[o]}}),await t.removePage(o.pageId)}},n}async pinUnpin(e,n,a){if(!o(this._helpers)&&(n.callerType===t.CustomButton||n.callerType===t.ViewTabContextMenu)){const t=e.Browser.wrapSync(n.windowIdentity),i=await t.openfinWindow.getOptions();if("platform"!==i.workspacePlatform.windowType){const e=i.workspacePlatform.toolbarOptions;if(await t.openfinWindow.updateOptions({alwaysOnTop:a}),!o(e)){const o=await this._helpers.updateToolbarButtons(e.buttons,n.customData.sourceId,n.customData.replacementId);await t.replaceToolbarOptions({buttons:o})}}}}async getViewWindowIdentity(t){const e=await t.getCurrentWindow();return o(e.identity.name)||e.identity.name===fin.me.identity.uuid?new Promise(((e,n)=>{t.once("target-changed",(async()=>{const n=await t.getCurrentWindow();e(n.identity)})).catch((()=>{}))})):e.identity}}};var i=n.k;export{i as entryPoints};
//# sourceMappingURL=window-platform.bundle.js.map