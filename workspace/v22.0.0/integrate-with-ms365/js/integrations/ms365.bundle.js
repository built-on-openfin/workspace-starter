/******/ var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/microsoft365/openfin.ms365.js":
/*!*****************************************************************!*\
  !*** ../../node_modules/@openfin/microsoft365/openfin.ms365.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ApiError: () => (/* binding */ o),
/* harmony export */   ApiRequestError: () => (/* binding */ i),
/* harmony export */   AuthTokenExpiredError: () => (/* binding */ a),
/* harmony export */   AuthorizationError: () => (/* binding */ s),
/* harmony export */   InitializationError: () => (/* binding */ u),
/* harmony export */   InteropError: () => (/* binding */ l),
/* harmony export */   ParameterError: () => (/* binding */ c),
/* harmony export */   TeamsConnection: () => (/* binding */ f),
/* harmony export */   connect: () => (/* binding */ d),
/* harmony export */   disableLogging: () => (/* binding */ h),
/* harmony export */   enableLogging: () => (/* binding */ p)
/* harmony export */ });
/*! For license information please see openfin.ms365.js.LICENSE.txt */
var t={876:t=>{const{AbortController:e,AbortSignal:n}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;t.exports=e,t.exports.AbortSignal=n,t.exports.default=e},60:(t,e)=>{e.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,i=s(t),a=i[0],u=i[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),c=0,f=u>0?a-4:a;for(n=0;n<f;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===u&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[c++]=255&e);1===u&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=16383,s=0,l=r-o;s<l;s+=a)i.push(u(t,s,s+a>l?l:s+a));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=i[a],r[i.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,r){for(var o,i,a=[],s=e;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},485:(t,e,n)=>{const r=n(60),o=n(215),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return l(t,e,n)}function l(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=s(n);const o=r.write(t,e);o!==n&&(r=r.slice(0,o));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);const o=function(t){if(u.isBuffer(t)){const e=0|p(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||K(t.length)?s(0):d(t);if("Buffer"===t.type&&Array.isArray(t.data))return d(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return c(t),s(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(o)return r?-1:V(t).length;e=(""+e).toLowerCase(),o=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,o){let i,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let r=-1;for(i=n;i<s;i++)if(l(t,i)===l(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===u)return r*a}else-1!==r&&(i-=i-r),r=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){let n=!0;for(let r=0;r<u;r++)if(l(t,i+r)!==l(e,r)){n=!1;break}if(n)return i}return-1}function w(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let a;for(r>i/2&&(r=i/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if(K(r))return a;t[n+a]=r}return a}function _(t,e,n,r){return J(V(e,t.length-n),t,n,r)}function E(t,e,n,r){return J(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function S(t,e,n,r){return J(G(e),t,n,r)}function A(t,e,n,r){return J(function(t,e){let n,r,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=n){let n,r,s,u;switch(a){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(u=(31&e)<<6|63&n,u>127&&(i=u));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(u=(15&e)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=t[o+1],r=t[o+2],s=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(u=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=a}return function(t){const e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=R));return n}(r)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},u.allocUnsafe=function(t){return f(t)},u.allocUnsafeSlow=function(t){return f(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=u.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(Y(e,Uint8Array))o+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,o){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const s=Math.min(i,a),l=this.slice(r,o),c=t.slice(e,n);for(let t=0;t<s;++t)if(l[t]!==c[t]){i=l[t],a=c[t];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function x(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function C(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function B(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=X[t[r]];return o}function k(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,r,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function U(t,e,n,r,o){F(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function j(t,e,n,r,o){F(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function N(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function P(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){O(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){O(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Z((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(t,e=0){return j(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}let o=0,i=1,a=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}let o=n-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Z((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(t,e=0){return j(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=u.isBuffer(t)?t:u.from(t,r),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%a]}return this};const W={};function $(t,e,n){W[t]=class NodeError extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function D(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function F(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new W.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||q(e,t.length-(n+1))}(r,o,i)}function z(t,e){if("number"!=typeof t)throw new W.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,n){if(Math.floor(t)!==t)throw z(t,n),new W.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new W.ERR_BUFFER_OUT_OF_BOUNDS;throw new W.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=D(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=D(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function Z(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},465:t=>{var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}g(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,n)}(t,o,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var o,i,a,l;if(s(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=u(t))>0&&a.length>o&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,l=c,console&&console.warn&&console.warn(l)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=c.bind(r);return o.listener=n,r.wrapFn=o,o}function d(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):p(o,o.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){r.once&&t.removeEventListener(e,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var o="error"===t,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)r(u,this,e);else{var l=u.length,c=p(u,l);for(n=0;n<l;++n)r(c[n],this,e)}return!0},i.prototype.addListener=function(t,e){return l(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return l(this,t,e,!0)},i.prototype.once=function(t,e){return s(e),this.on(t,f(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,f(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,o,i,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},i.prototype.listeners=function(t){return d(this,t,!0)},i.prototype.rawListeners=function(t){return d(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},215:(t,e)=>{e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?o-1:0,d=n?-1:1,h=t[e+f];for(f+=d,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+t[e+f],f+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+t[e+f],f+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=l}return(h?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[n+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;t[n+h]=255&a,h+=p,a/=256,l-=8);t[n+h-p]|=128*g}},951:function(t,e,n){var r;t=n.nmd(t),function(){var o,i="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,f=128,d=256,h=1/0,p=9007199254740991,g=NaN,y=4294967295,m=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",d]],v="[object Arguments]",b="[object Array]",w="[object Boolean]",_="[object Date]",E="[object Error]",S="[object Function]",A="[object GeneratorFunction]",I="[object Map]",T="[object Number]",R="[object Object]",x="[object Promise]",C="[object RegExp]",B="[object Set]",k="[object String]",L="[object Symbol]",O="[object WeakMap]",U="[object ArrayBuffer]",j="[object DataView]",N="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",W="[object Int16Array]",$="[object Int32Array]",D="[object Uint8Array]",F="[object Uint8ClampedArray]",z="[object Uint16Array]",q="[object Uint32Array]",H=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,J=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,K=RegExp(J.source),X=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,it=RegExp(ot.source),at=/^\s+/,st=/\s/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Et=/($^)/,St=/['\n\r\u2028\u2029\\]/g,At="\\ud800-\\udfff",It="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Tt="\\u2700-\\u27bf",Rt="a-z\\xdf-\\xf6\\xf8-\\xff",xt="A-Z\\xc0-\\xd6\\xd8-\\xde",Ct="\\ufe0e\\ufe0f",Bt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kt="['’]",Lt="["+At+"]",Ot="["+Bt+"]",Ut="["+It+"]",jt="\\d+",Nt="["+Tt+"]",Mt="["+Rt+"]",Pt="[^"+At+Bt+jt+Tt+Rt+xt+"]",Wt="\\ud83c[\\udffb-\\udfff]",$t="[^"+At+"]",Dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ft="[\\ud800-\\udbff][\\udc00-\\udfff]",zt="["+xt+"]",qt="\\u200d",Ht="(?:"+Mt+"|"+Pt+")",Vt="(?:"+zt+"|"+Pt+")",Gt="(?:['’](?:d|ll|m|re|s|t|ve))?",Jt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Ut+"|"+Wt+")"+"?",Kt="["+Ct+"]?",Xt=Kt+Yt+("(?:"+qt+"(?:"+[$t,Dt,Ft].join("|")+")"+Kt+Yt+")*"),Zt="(?:"+[Nt,Dt,Ft].join("|")+")"+Xt,Qt="(?:"+[$t+Ut+"?",Ut,Dt,Ft,Lt].join("|")+")",te=RegExp(kt,"g"),ee=RegExp(Ut,"g"),ne=RegExp(Wt+"(?="+Wt+")|"+Qt+Xt,"g"),re=RegExp([zt+"?"+Mt+"+"+Gt+"(?="+[Ot,zt,"$"].join("|")+")",Vt+"+"+Jt+"(?="+[Ot,zt+Ht,"$"].join("|")+")",zt+"?"+Ht+"+"+Gt,zt+"+"+Jt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jt,Zt].join("|"),"g"),oe=RegExp("["+qt+At+It+Ct+"]"),ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ae=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,ue={};ue[N]=ue[M]=ue[P]=ue[W]=ue[$]=ue[D]=ue[F]=ue[z]=ue[q]=!0,ue[v]=ue[b]=ue[U]=ue[w]=ue[j]=ue[_]=ue[E]=ue[S]=ue[I]=ue[T]=ue[R]=ue[C]=ue[B]=ue[k]=ue[O]=!1;var le={};le[v]=le[b]=le[U]=le[j]=le[w]=le[_]=le[N]=le[M]=le[P]=le[W]=le[$]=le[I]=le[T]=le[R]=le[C]=le[B]=le[k]=le[L]=le[D]=le[F]=le[z]=le[q]=!0,le[E]=le[S]=le[O]=!1;var ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fe=parseFloat,de=parseInt,he="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pe="object"==typeof self&&self&&self.Object===Object&&self,ge=he||pe||Function("return this")(),ye=e&&!e.nodeType&&e,me=ye&&t&&!t.nodeType&&t,ve=me&&me.exports===ye,be=ve&&he.process,we=function(){try{var t=me&&me.require&&me.require("util").types;return t||be&&be.binding&&be.binding("util")}catch(t){}}(),_e=we&&we.isArrayBuffer,Ee=we&&we.isDate,Se=we&&we.isMap,Ae=we&&we.isRegExp,Ie=we&&we.isSet,Te=we&&we.isTypedArray;function Re(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function xe(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Le(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}function Oe(t,e){return!!(null==t?0:t.length)&&ze(t,e,0)>-1}function Ue(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function je(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Ne(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function Me(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function Pe(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function We(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var $e=Ge("length");function De(t,e,n){var r;return n(t,(function(t,n,o){if(e(t,n,o))return r=n,!1})),r}function Fe(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function ze(t,e,n){return e==e?function(t,e,n){var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):Fe(t,He,n)}function qe(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function He(t){return t!=t}function Ve(t,e){var n=null==t?0:t.length;return n?Ke(t,e)/n:g}function Ge(t){return function(e){return null==e?o:e[t]}}function Je(t){return function(e){return null==t?o:t[e]}}function Ye(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}function Ke(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function Xe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ze(t){return t?t.slice(0,yn(t)+1).replace(at,""):t}function Qe(t){return function(e){return t(e)}}function tn(t,e){return je(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&ze(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&ze(e,t[n],0)>-1;);return n}var on=Je({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),an=Je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+ce[t]}function un(t){return oe.test(t)}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function fn(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,i[o++]=n)}return i}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function hn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return un(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):$e(t)}function gn(t){return un(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function yn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var mn=Je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function t(e){var n,r=(e=null==e?ge:vn.defaults(ge.Object(),e,vn.pick(ge,ae))).Array,st=e.Date,At=e.Error,It=e.Function,Tt=e.Math,Rt=e.Object,xt=e.RegExp,Ct=e.String,Bt=e.TypeError,kt=r.prototype,Lt=It.prototype,Ot=Rt.prototype,Ut=e["__core-js_shared__"],jt=Lt.toString,Nt=Ot.hasOwnProperty,Mt=0,Pt=(n=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Wt=Ot.toString,$t=jt.call(Rt),Dt=ge._,Ft=xt("^"+jt.call(Nt).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=ve?e.Buffer:o,qt=e.Symbol,Ht=e.Uint8Array,Vt=zt?zt.allocUnsafe:o,Gt=cn(Rt.getPrototypeOf,Rt),Jt=Rt.create,Yt=Ot.propertyIsEnumerable,Kt=kt.splice,Xt=qt?qt.isConcatSpreadable:o,Zt=qt?qt.iterator:o,Qt=qt?qt.toStringTag:o,ne=function(){try{var t=hi(Rt,"defineProperty");return t({},"",{}),t}catch(t){}}(),oe=e.clearTimeout!==ge.clearTimeout&&e.clearTimeout,ce=st&&st.now!==ge.Date.now&&st.now,he=e.setTimeout!==ge.setTimeout&&e.setTimeout,pe=Tt.ceil,ye=Tt.floor,me=Rt.getOwnPropertySymbols,be=zt?zt.isBuffer:o,we=e.isFinite,$e=kt.join,Je=cn(Rt.keys,Rt),bn=Tt.max,wn=Tt.min,_n=st.now,En=e.parseInt,Sn=Tt.random,An=kt.reverse,In=hi(e,"DataView"),Tn=hi(e,"Map"),Rn=hi(e,"Promise"),xn=hi(e,"Set"),Cn=hi(e,"WeakMap"),Bn=hi(Rt,"create"),kn=Cn&&new Cn,Ln={},On=Wi(In),Un=Wi(Tn),jn=Wi(Rn),Nn=Wi(xn),Mn=Wi(Cn),Pn=qt?qt.prototype:o,Wn=Pn?Pn.valueOf:o,$n=Pn?Pn.toString:o;function Dn(t){if(ns(t)&&!Ha(t)&&!(t instanceof Hn)){if(t instanceof qn)return t;if(Nt.call(t,"__wrapped__"))return $i(t)}return new qn(t)}var Fn=function(){function t(){}return function(e){if(!es(e))return{};if(Jt)return Jt(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function zn(){}function qn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Jn;++e<n;)this.add(t[e])}function Kn(t){var e=this.__data__=new Gn(t);this.size=e.size}function Xn(t,e){var n=Ha(t),r=!n&&qa(t),o=!n&&!r&&Ya(t),i=!n&&!r&&!o&&cs(t),a=n||r||o||i,s=a?Xe(t.length,Ct):[],u=s.length;for(var l in t)!e&&!Nt.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||wi(l,u))||s.push(l);return s}function Zn(t){var e=t.length;return e?t[Yr(0,e-1)]:o}function Qn(t,e){return Ni(ko(t),ur(e,0,t.length))}function tr(t){return Ni(ko(t))}function er(t,e,n){(n!==o&&!Da(t[e],n)||n===o&&!(e in t))&&ar(t,e,n)}function nr(t,e,n){var r=t[e];Nt.call(t,e)&&Da(r,n)&&(n!==o||e in t)||ar(t,e,n)}function rr(t,e){for(var n=t.length;n--;)if(Da(t[n][0],e))return n;return-1}function or(t,e,n,r){return hr(t,(function(t,o,i){e(r,t,n(t),i)})),r}function ir(t,e){return t&&Lo(e,Ls(e),t)}function ar(t,e,n){"__proto__"==e&&ne?ne(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(t,e){for(var n=-1,i=e.length,a=r(i),s=null==t;++n<i;)a[n]=s?o:Rs(t,e[n]);return a}function ur(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function lr(t,e,n,r,i,a){var s,u=1&e,l=2&e,c=4&e;if(n&&(s=i?n(t,r,i,a):n(t)),s!==o)return s;if(!es(t))return t;var f=Ha(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return ko(t,s)}else{var d=yi(t),h=d==S||d==A;if(Ya(t))return Io(t,u);if(d==R||d==v||h&&!i){if(s=l||h?{}:vi(t),!u)return l?function(t,e){return Lo(t,gi(t),e)}(t,function(t,e){return t&&Lo(e,Os(e),t)}(s,t)):function(t,e){return Lo(t,pi(t),e)}(t,ir(s,t))}else{if(!le[d])return i?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case U:return To(t);case w:case _:return new r(+t);case j:return function(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case M:case P:case W:case $:case D:case F:case z:case q:return Ro(t,n);case I:return new r;case T:case k:return new r(t);case C:return function(t){var e=new t.constructor(t.source,gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case B:return new r;case L:return o=t,Wn?Rt(Wn.call(o)):{}}var o}(t,d,u)}}a||(a=new Kn);var p=a.get(t);if(p)return p;a.set(t,s),ss(t)?t.forEach((function(r){s.add(lr(r,e,n,r,t,a))})):rs(t)&&t.forEach((function(r,o){s.set(o,lr(r,e,n,o,t,a))}));var g=f?o:(c?l?ai:ii:l?Os:Ls)(t);return Ce(g||t,(function(r,o){g&&(r=t[o=r]),nr(s,o,lr(r,e,n,o,t,a))})),s}function cr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Rt(t);r--;){var i=n[r],a=e[i],s=t[i];if(s===o&&!(i in t)||!a(s))return!1}return!0}function fr(t,e,n){if("function"!=typeof t)throw new Bt(i);return Li((function(){t.apply(o,n)}),e)}function dr(t,e,n,r){var o=-1,i=Oe,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=je(e,Qe(n))),r?(i=Ue,a=!1):e.length>=200&&(i=en,a=!1,e=new Yn(e));t:for(;++o<s;){var c=t[o],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var d=l;d--;)if(e[d]===f)continue t;u.push(c)}else i(e,f,r)||u.push(c)}return u}Dn.templateSettings={escape:Z,evaluate:Q,interpolate:tt,variable:"",imports:{_:Dn}},Dn.prototype=zn.prototype,Dn.prototype.constructor=Dn,qn.prototype=Fn(zn.prototype),qn.prototype.constructor=qn,Hn.prototype=Fn(zn.prototype),Hn.prototype.constructor=Hn,Vn.prototype.clear=function(){this.__data__=Bn?Bn(null):{},this.size=0},Vn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vn.prototype.get=function(t){var e=this.__data__;if(Bn){var n=e[t];return n===a?o:n}return Nt.call(e,t)?e[t]:o},Vn.prototype.has=function(t){var e=this.__data__;return Bn?e[t]!==o:Nt.call(e,t)},Vn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Bn&&e===o?a:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Kt.call(e,n,1),--this.size,!0)},Gn.prototype.get=function(t){var e=this.__data__,n=rr(e,t);return n<0?o:e[n][1]},Gn.prototype.has=function(t){return rr(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Jn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(Tn||Gn),string:new Vn}},Jn.prototype.delete=function(t){var e=fi(this,t).delete(t);return this.size-=e?1:0,e},Jn.prototype.get=function(t){return fi(this,t).get(t)},Jn.prototype.has=function(t){return fi(this,t).has(t)},Jn.prototype.set=function(t,e){var n=fi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(t){return this.__data__.set(t,a),this},Yn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Kn.prototype.get=function(t){return this.__data__.get(t)},Kn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Jn(r)}return n.set(t,e),this.size=n.size,this};var hr=jo(_r),pr=jo(Er,!0);function gr(t,e){var n=!0;return hr(t,(function(t,r,o){return n=!!e(t,r,o)})),n}function yr(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(null!=s&&(u===o?s==s&&!ls(s):n(s,u)))var u=s,l=a}return l}function mr(t,e){var n=[];return hr(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}function vr(t,e,n,r,o){var i=-1,a=t.length;for(n||(n=bi),o||(o=[]);++i<a;){var s=t[i];e>0&&n(s)?e>1?vr(s,e-1,n,r,o):Ne(o,s):r||(o[o.length]=s)}return o}var br=No(),wr=No(!0);function _r(t,e){return t&&br(t,e,Ls)}function Er(t,e){return t&&wr(t,e,Ls)}function Sr(t,e){return Le(e,(function(e){return Za(t[e])}))}function Ar(t,e){for(var n=0,r=(e=_o(e,t)).length;null!=t&&n<r;)t=t[Pi(e[n++])];return n&&n==r?t:o}function Ir(t,e,n){var r=e(t);return Ha(t)?r:Ne(r,n(t))}function Tr(t){return null==t?t===o?"[object Undefined]":"[object Null]":Qt&&Qt in Rt(t)?function(t){var e=Nt.call(t,Qt),n=t[Qt];try{t[Qt]=o;var r=!0}catch(t){}var i=Wt.call(t);r&&(e?t[Qt]=n:delete t[Qt]);return i}(t):function(t){return Wt.call(t)}(t)}function Rr(t,e){return t>e}function xr(t,e){return null!=t&&Nt.call(t,e)}function Cr(t,e){return null!=t&&e in Rt(t)}function Br(t,e,n){for(var i=n?Ue:Oe,a=t[0].length,s=t.length,u=s,l=r(s),c=1/0,f=[];u--;){var d=t[u];u&&e&&(d=je(d,Qe(e))),c=wn(d.length,c),l[u]=!n&&(e||a>=120&&d.length>=120)?new Yn(u&&d):o}d=t[0];var h=-1,p=l[0];t:for(;++h<a&&f.length<c;){var g=d[h],y=e?e(g):g;if(g=n||0!==g?g:0,!(p?en(p,y):i(f,y,n))){for(u=s;--u;){var m=l[u];if(!(m?en(m,y):i(t[u],y,n)))continue t}p&&p.push(y),f.push(g)}}return f}function kr(t,e,n){var r=null==(t=Ci(t,e=_o(e,t)))?t:t[Pi(Xi(e))];return null==r?o:Re(r,t,n)}function Lr(t){return ns(t)&&Tr(t)==v}function Or(t,e,n,r,i){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,r,i,a){var s=Ha(t),u=Ha(e),l=s?b:yi(t),c=u?b:yi(e),f=(l=l==v?R:l)==R,d=(c=c==v?R:c)==R,h=l==c;if(h&&Ya(t)){if(!Ya(e))return!1;s=!0,f=!1}if(h&&!f)return a||(a=new Kn),s||cs(t)?ri(t,e,n,r,i,a):function(t,e,n,r,o,i,a){switch(n){case j:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case U:return!(t.byteLength!=e.byteLength||!i(new Ht(t),new Ht(e)));case w:case _:case T:return Da(+t,+e);case E:return t.name==e.name&&t.message==e.message;case C:case k:return t==e+"";case I:var s=ln;case B:var u=1&r;if(s||(s=dn),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=ri(s(t),s(e),r,o,i,a);return a.delete(t),c;case L:if(Wn)return Wn.call(t)==Wn.call(e)}return!1}(t,e,l,n,r,i,a);if(!(1&n)){var p=f&&Nt.call(t,"__wrapped__"),g=d&&Nt.call(e,"__wrapped__");if(p||g){var y=p?t.value():t,m=g?e.value():e;return a||(a=new Kn),i(y,m,n,r,a)}}if(!h)return!1;return a||(a=new Kn),function(t,e,n,r,i,a){var s=1&n,u=ii(t),l=u.length,c=ii(e),f=c.length;if(l!=f&&!s)return!1;var d=l;for(;d--;){var h=u[d];if(!(s?h in e:Nt.call(e,h)))return!1}var p=a.get(t),g=a.get(e);if(p&&g)return p==e&&g==t;var y=!0;a.set(t,e),a.set(e,t);var m=s;for(;++d<l;){var v=t[h=u[d]],b=e[h];if(r)var w=s?r(b,v,h,e,t,a):r(v,b,h,t,e,a);if(!(w===o?v===b||i(v,b,n,r,a):w)){y=!1;break}m||(m="constructor"==h)}if(y&&!m){var _=t.constructor,E=e.constructor;_==E||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E||(y=!1)}return a.delete(t),a.delete(e),y}(t,e,n,r,i,a)}(t,e,n,r,Or,i))}function Ur(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;for(t=Rt(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var l=(u=n[i])[0],c=t[l],f=u[1];if(s&&u[2]){if(c===o&&!(l in t))return!1}else{var d=new Kn;if(r)var h=r(c,f,l,t,e,d);if(!(h===o?Or(f,c,3,r,d):h))return!1}}return!0}function jr(t){return!(!es(t)||(e=t,Pt&&Pt in e))&&(Za(t)?Ft:vt).test(Wi(t));// removed by dead control flow
{ var e; }}function Nr(t){return"function"==typeof t?t:null==t?ou:"object"==typeof t?Ha(t)?Fr(t[0],t[1]):Dr(t):hu(t)}function Mr(t){if(!Ii(t))return Je(t);var e=[];for(var n in Rt(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pr(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Rt(t))e.push(n);return e}(t);var e=Ii(t),n=[];for(var r in t)("constructor"!=r||!e&&Nt.call(t,r))&&n.push(r);return n}function Wr(t,e){return t<e}function $r(t,e){var n=-1,o=Ga(t)?r(t.length):[];return hr(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}function Dr(t){var e=di(t);return 1==e.length&&e[0][2]?Ri(e[0][0],e[0][1]):function(n){return n===t||Ur(n,t,e)}}function Fr(t,e){return Ei(t)&&Ti(e)?Ri(Pi(t),e):function(n){var r=Rs(n,t);return r===o&&r===e?xs(n,t):Or(e,r,3)}}function zr(t,e,n,r,i){t!==e&&br(e,(function(a,s){if(i||(i=new Kn),es(a))!function(t,e,n,r,i,a,s){var u=Bi(t,n),l=Bi(e,n),c=s.get(l);if(c)return void er(t,n,c);var f=a?a(u,l,n+"",t,e,s):o,d=f===o;if(d){var h=Ha(l),p=!h&&Ya(l),g=!h&&!p&&cs(l);f=l,h||p||g?Ha(u)?f=u:Ja(u)?f=ko(u):p?(d=!1,f=Io(l,!0)):g?(d=!1,f=Ro(l,!0)):f=[]:is(l)||qa(l)?(f=u,qa(u)?f=vs(u):es(u)&&!Za(u)||(f=vi(l))):d=!1}d&&(s.set(l,f),i(f,l,r,a,s),s.delete(l));er(t,n,f)}(t,e,s,n,zr,r,i);else{var u=r?r(Bi(t,s),a,s+"",t,e,i):o;u===o&&(u=a),er(t,s,u)}}),Os)}function qr(t,e){var n=t.length;if(n)return wi(e+=e<0?n:0,n)?t[e]:o}function Hr(t,e,n){e=e.length?je(e,(function(t){return Ha(t)?function(e){return Ar(e,1===t.length?t[0]:t)}:t})):[ou];var r=-1;e=je(e,Qe(ci()));var o=$r(t,(function(t,n,o){var i=je(e,(function(e){return e(t)}));return{criteria:i,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(o,(function(t,e){return function(t,e,n){var r=-1,o=t.criteria,i=e.criteria,a=o.length,s=n.length;for(;++r<a;){var u=xo(o[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Vr(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],s=Ar(t,a);n(s,a)&&to(i,_o(a,t),s)}return i}function Gr(t,e,n,r){var o=r?qe:ze,i=-1,a=e.length,s=t;for(t===e&&(e=ko(e)),n&&(s=je(t,Qe(n)));++i<a;)for(var u=0,l=e[i],c=n?n(l):l;(u=o(s,c,u,r))>-1;)s!==t&&Kt.call(s,u,1),Kt.call(t,u,1);return t}function Jr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;wi(o)?Kt.call(t,o,1):ho(t,o)}}return t}function Yr(t,e){return t+ye(Sn()*(e-t+1))}function Kr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=ye(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return Oi(xi(t,e,ou),t+"")}function Zr(t){return Zn(Ds(t))}function Qr(t,e){var n=Ds(t);return Ni(n,ur(e,0,n.length))}function to(t,e,n,r){if(!es(t))return t;for(var i=-1,a=(e=_o(e,t)).length,s=a-1,u=t;null!=u&&++i<a;){var l=Pi(e[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=s){var f=u[l];(c=r?r(f,l,u):o)===o&&(c=es(f)?f:wi(e[i+1])?[]:{})}nr(u,l,c),u=u[l]}return t}var eo=kn?function(t,e){return kn.set(t,e),t}:ou,no=ne?function(t,e){return ne(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:ou;function ro(t){return Ni(Ds(t))}function oo(t,e,n){var o=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=r(i);++o<i;)a[o]=t[o+e];return a}function io(t,e){var n;return hr(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n}function ao(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=t[i];null!==a&&!ls(a)&&(n?a<=e:a<e)?r=i+1:o=i}return o}return so(t,e,ou,n)}function so(t,e,n,r){var i=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,l=ls(e),c=e===o;i<a;){var f=ye((i+a)/2),d=n(t[f]),h=d!==o,p=null===d,g=d==d,y=ls(d);if(s)var m=r||g;else m=c?g&&(r||h):u?g&&h&&(r||!p):l?g&&h&&!p&&(r||!y):!p&&!y&&(r?d<=e:d<e);m?i=f+1:a=f}return wn(a,4294967294)}function uo(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Da(s,u)){var u=s;i[o++]=0===a?0:a}}return i}function lo(t){return"number"==typeof t?t:ls(t)?g:+t}function co(t){if("string"==typeof t)return t;if(Ha(t))return je(t,co)+"";if(ls(t))return $n?$n.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function fo(t,e,n){var r=-1,o=Oe,i=t.length,a=!0,s=[],u=s;if(n)a=!1,o=Ue;else if(i>=200){var l=e?null:Xo(t);if(l)return dn(l);a=!1,o=en,u=new Yn}else u=e?[]:s;t:for(;++r<i;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue t;e&&u.push(f),s.push(c)}else o(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function ho(t,e){return null==(t=Ci(t,e=_o(e,t)))||delete t[Pi(Xi(e))]}function po(t,e,n,r){return to(t,e,n(Ar(t,e)),r)}function go(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?oo(t,r?0:i,r?i+1:o):oo(t,r?i+1:0,r?o:i)}function yo(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Me(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function mo(t,e,n){var o=t.length;if(o<2)return o?fo(t[0]):[];for(var i=-1,a=r(o);++i<o;)for(var s=t[i],u=-1;++u<o;)u!=i&&(a[i]=dr(a[i]||s,t[u],e,n));return fo(vr(a,1),e,n)}function vo(t,e,n){for(var r=-1,i=t.length,a=e.length,s={};++r<i;){var u=r<a?e[r]:o;n(s,t[r],u)}return s}function bo(t){return Ja(t)?t:[]}function wo(t){return"function"==typeof t?t:ou}function _o(t,e){return Ha(t)?t:Ei(t,e)?[t]:Mi(bs(t))}var Eo=Xr;function So(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:oo(t,e,n)}var Ao=oe||function(t){return ge.clearTimeout(t)};function Io(t,e){if(e)return t.slice();var n=t.length,r=Vt?Vt(n):new t.constructor(n);return t.copy(r),r}function To(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function Ro(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function xo(t,e){if(t!==e){var n=t!==o,r=null===t,i=t==t,a=ls(t),s=e!==o,u=null===e,l=e==e,c=ls(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&t<e||c&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!l)return-1}return 0}function Co(t,e,n,o){for(var i=-1,a=t.length,s=n.length,u=-1,l=e.length,c=bn(a-s,0),f=r(l+c),d=!o;++u<l;)f[u]=e[u];for(;++i<s;)(d||i<a)&&(f[n[i]]=t[i]);for(;c--;)f[u++]=t[i++];return f}function Bo(t,e,n,o){for(var i=-1,a=t.length,s=-1,u=n.length,l=-1,c=e.length,f=bn(a-u,0),d=r(f+c),h=!o;++i<f;)d[i]=t[i];for(var p=i;++l<c;)d[p+l]=e[l];for(;++s<u;)(h||i<a)&&(d[p+n[s]]=t[i++]);return d}function ko(t,e){var n=-1,o=t.length;for(e||(e=r(o));++n<o;)e[n]=t[n];return e}function Lo(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):o;l===o&&(l=t[u]),i?ar(n,u,l):nr(n,u,l)}return n}function Oo(t,e){return function(n,r){var o=Ha(n)?xe:or,i=e?e():{};return o(n,t,ci(r,2),i)}}function Uo(t){return Xr((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,s&&_i(n[0],n[1],s)&&(a=i<3?o:a,i=1),e=Rt(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e}))}function jo(t,e){return function(n,r){if(null==n)return n;if(!Ga(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Rt(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function No(t){return function(e,n,r){for(var o=-1,i=Rt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===n(i[u],u,i))break}return e}}function Mo(t){return function(e){var n=un(e=bs(e))?gn(e):o,r=n?n[0]:e.charAt(0),i=n?So(n,1).join(""):e.slice(1);return r[t]()+i}}function Po(t){return function(e){return Me(Zs(qs(e).replace(te,"")),t,"")}}function Wo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Fn(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function $o(t){return function(e,n,r){var i=Rt(e);if(!Ga(e)){var a=ci(n,3);e=Ls(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:o}}function Do(t){return oi((function(e){var n=e.length,r=n,a=qn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Bt(i);if(a&&!u&&"wrapper"==ui(s))var u=new qn([],!0)}for(r=u?r:n;++r<n;){var l=ui(s=e[r]),c="wrapper"==l?si(s):o;u=c&&Si(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ui(c[0])].apply(u,c[3]):1==s.length&&Si(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ha(r))return u.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}}))}function Fo(t,e,n,i,a,s,u,l,c,d){var h=e&f,p=1&e,g=2&e,y=24&e,m=512&e,v=g?o:Wo(t);return function f(){for(var b=arguments.length,w=r(b),_=b;_--;)w[_]=arguments[_];if(y)var E=li(f),S=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,E);if(i&&(w=Co(w,i,a,y)),s&&(w=Bo(w,s,u,y)),b-=S,y&&b<d){var A=fn(w,E);return Yo(t,e,Fo,f.placeholder,n,w,A,l,c,d-b)}var I=p?n:this,T=g?I[t]:t;return b=w.length,l?w=function(t,e){var n=t.length,r=wn(e.length,n),i=ko(t);for(;r--;){var a=e[r];t[r]=wi(a,n)?i[a]:o}return t}(w,l):m&&b>1&&w.reverse(),h&&c<b&&(w.length=c),this&&this!==ge&&this instanceof f&&(T=v||Wo(T)),T.apply(I,w)}}function zo(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,o,i){e(r,n(t),o,i)})),r}(n,t,e(r),{})}}function qo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=co(n),r=co(r)):(n=lo(n),r=lo(r)),i=t(n,r)}return i}}function Ho(t){return oi((function(e){return e=je(e,Qe(ci())),Xr((function(n){var r=this;return t(e,(function(t){return Re(t,r,n)}))}))}))}function Vo(t,e){var n=(e=e===o?" ":co(e)).length;if(n<2)return n?Kr(e,t):e;var r=Kr(e,pe(t/pn(e)));return un(e)?So(gn(r),0,t).join(""):r.slice(0,t)}function Go(t){return function(e,n,i){return i&&"number"!=typeof i&&_i(e,n,i)&&(n=i=o),e=ps(e),n===o?(n=e,e=0):n=ps(n),function(t,e,n,o){for(var i=-1,a=bn(pe((e-t)/(n||1)),0),s=r(a);a--;)s[o?a:++i]=t,t+=n;return s}(e,n,i=i===o?e<n?1:-1:ps(i),t)}}function Jo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ms(e),n=ms(n)),t(e,n)}}function Yo(t,e,n,r,i,a,s,u,f,d){var h=8&e;e|=h?l:c,4&(e&=~(h?c:l))||(e&=-4);var p=[t,e,i,h?a:o,h?s:o,h?o:a,h?o:s,u,f,d],g=n.apply(o,p);return Si(t)&&ki(g,p),g.placeholder=r,Ui(g,t,e)}function Ko(t){var e=Tt[t];return function(t,n){if(t=ms(t),(n=null==n?0:wn(gs(n),292))&&we(t)){var r=(bs(t)+"e").split("e");return+((r=(bs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xo=xn&&1/dn(new xn([,-0]))[1]==h?function(t){return new xn(t)}:lu;function Zo(t){return function(e){var n=yi(e);return n==I?ln(e):n==B?hn(e):function(t,e){return je(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qo(t,e,n,a,h,p,g,y){var m=2&e;if(!m&&"function"!=typeof t)throw new Bt(i);var v=a?a.length:0;if(v||(e&=-97,a=h=o),g=g===o?g:bn(gs(g),0),y=y===o?y:gs(y),v-=h?h.length:0,e&c){var b=a,w=h;a=h=o}var _=m?o:si(t),E=[t,e,n,a,h,b,w,p,g,y];if(_&&function(t,e){var n=t[1],r=e[1],o=n|r,i=o<131,a=r==f&&8==n||r==f&&n==d&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!i&&!a)return t;1&r&&(t[2]=e[2],o|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Co(l,u,e[4]):u,t[4]=l?fn(t[3],s):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Bo(l,u,e[6]):u,t[6]=l?fn(t[5],s):e[6]);(u=e[7])&&(t[7]=u);r&f&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=o}(E,_),t=E[0],e=E[1],n=E[2],a=E[3],h=E[4],!(y=E[9]=E[9]===o?m?0:t.length:bn(E[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)S=8==e||e==u?function(t,e,n){var i=Wo(t);return function a(){for(var s=arguments.length,u=r(s),l=s,c=li(a);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:fn(u,c);return(s-=f.length)<n?Yo(t,e,Fo,a.placeholder,o,u,f,o,o,n-s):Re(this&&this!==ge&&this instanceof a?i:t,this,u)}}(t,e,y):e!=l&&33!=e||h.length?Fo.apply(o,E):function(t,e,n,o){var i=1&e,a=Wo(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=o.length,f=r(c+u),d=this&&this!==ge&&this instanceof e?a:t;++l<c;)f[l]=o[l];for(;u--;)f[l++]=arguments[++s];return Re(d,i?n:this,f)}}(t,e,n,a);else var S=function(t,e,n){var r=1&e,o=Wo(t);return function e(){return(this&&this!==ge&&this instanceof e?o:t).apply(r?n:this,arguments)}}(t,e,n);return Ui((_?eo:ki)(S,E),t,e)}function ti(t,e,n,r){return t===o||Da(t,Ot[n])&&!Nt.call(r,n)?e:t}function ei(t,e,n,r,i,a){return es(t)&&es(e)&&(a.set(e,t),zr(t,e,o,ei,a),a.delete(e)),t}function ni(t){return is(t)?o:t}function ri(t,e,n,r,i,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t),f=a.get(e);if(c&&f)return c==e&&f==t;var d=-1,h=!0,p=2&n?new Yn:o;for(a.set(t,e),a.set(e,t);++d<u;){var g=t[d],y=e[d];if(r)var m=s?r(y,g,d,e,t,a):r(g,y,d,t,e,a);if(m!==o){if(m)continue;h=!1;break}if(p){if(!We(e,(function(t,e){if(!en(p,e)&&(g===t||i(g,t,n,r,a)))return p.push(e)}))){h=!1;break}}else if(g!==y&&!i(g,y,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function oi(t){return Oi(xi(t,o,Vi),t+"")}function ii(t){return Ir(t,Ls,pi)}function ai(t){return Ir(t,Os,gi)}var si=kn?function(t){return kn.get(t)}:lu;function ui(t){for(var e=t.name+"",n=Ln[e],r=Nt.call(Ln,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function li(t){return(Nt.call(Dn,"placeholder")?Dn:t).placeholder}function ci(){var t=Dn.iteratee||iu;return t=t===iu?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function fi(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function di(t){for(var e=Ls(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Ti(o)]}return e}function hi(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return jr(n)?n:o}var pi=me?function(t){return null==t?[]:(t=Rt(t),Le(me(t),(function(e){return Yt.call(t,e)})))}:yu,gi=me?function(t){for(var e=[];t;)Ne(e,pi(t)),t=Gt(t);return e}:yu,yi=Tr;function mi(t,e,n){for(var r=-1,o=(e=_o(e,t)).length,i=!1;++r<o;){var a=Pi(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&ts(o)&&wi(a,o)&&(Ha(t)||qa(t))}function vi(t){return"function"!=typeof t.constructor||Ii(t)?{}:Fn(Gt(t))}function bi(t){return Ha(t)||qa(t)||!!(Xt&&t&&t[Xt])}function wi(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&wt.test(t))&&t>-1&&t%1==0&&t<e}function _i(t,e,n){if(!es(n))return!1;var r=typeof e;return!!("number"==r?Ga(n)&&wi(e,n.length):"string"==r&&e in n)&&Da(n[e],t)}function Ei(t,e){if(Ha(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ls(t))||(nt.test(t)||!et.test(t)||null!=e&&t in Rt(e))}function Si(t){var e=ui(t),n=Dn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var r=si(n);return!!r&&t===r[0]}(In&&yi(new In(new ArrayBuffer(1)))!=j||Tn&&yi(new Tn)!=I||Rn&&yi(Rn.resolve())!=x||xn&&yi(new xn)!=B||Cn&&yi(new Cn)!=O)&&(yi=function(t){var e=Tr(t),n=e==R?t.constructor:o,r=n?Wi(n):"";if(r)switch(r){case On:return j;case Un:return I;case jn:return x;case Nn:return B;case Mn:return O}return e});var Ai=Ut?Za:mu;function Ii(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ot)}function Ti(t){return t==t&&!es(t)}function Ri(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==o||t in Rt(n)))}}function xi(t,e,n){return e=bn(e===o?t.length-1:e,0),function(){for(var o=arguments,i=-1,a=bn(o.length-e,0),s=r(a);++i<a;)s[i]=o[e+i];i=-1;for(var u=r(e+1);++i<e;)u[i]=o[i];return u[e]=n(s),Re(t,this,u)}}function Ci(t,e){return e.length<2?t:Ar(t,oo(e,0,-1))}function Bi(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ki=ji(eo),Li=he||function(t,e){return ge.setTimeout(t,e)},Oi=ji(no);function Ui(t,e,n){var r=e+"";return Oi(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ce(m,(function(n){var r="_."+n[0];e&n[1]&&!Oe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(lt);return e?e[1].split(ct):[]}(r),n)))}function ji(t){var e=0,n=0;return function(){var r=_n(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Ni(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=Yr(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Mi=function(t){var e=ja(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,o){e.push(r?o.replace(ht,"$1"):n||t)})),e}));function Pi(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Wi(t){if(null!=t){try{return jt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $i(t){if(t instanceof Hn)return t.clone();var e=new qn(t.__wrapped__,t.__chain__);return e.__actions__=ko(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Di=Xr((function(t,e){return Ja(t)?dr(t,vr(e,1,Ja,!0)):[]})),Fi=Xr((function(t,e){var n=Xi(e);return Ja(n)&&(n=o),Ja(t)?dr(t,vr(e,1,Ja,!0),ci(n,2)):[]})),zi=Xr((function(t,e){var n=Xi(e);return Ja(n)&&(n=o),Ja(t)?dr(t,vr(e,1,Ja,!0),o,n):[]}));function qi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=bn(r+o,0)),Fe(t,ci(e,3),o)}function Hi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=gs(n),i=n<0?bn(r+i,0):wn(i,r-1)),Fe(t,ci(e,3),i,!0)}function Vi(t){return(null==t?0:t.length)?vr(t,1):[]}function Gi(t){return t&&t.length?t[0]:o}var Ji=Xr((function(t){var e=je(t,bo);return e.length&&e[0]===t[0]?Br(e):[]})),Yi=Xr((function(t){var e=Xi(t),n=je(t,bo);return e===Xi(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Br(n,ci(e,2)):[]})),Ki=Xr((function(t){var e=Xi(t),n=je(t,bo);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?Br(n,o,e):[]}));function Xi(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Zi=Xr(Qi);function Qi(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var ta=oi((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return Jr(t,je(e,(function(t){return wi(t,n)?+t:t})).sort(xo)),r}));function ea(t){return null==t?t:An.call(t)}var na=Xr((function(t){return fo(vr(t,1,Ja,!0))})),ra=Xr((function(t){var e=Xi(t);return Ja(e)&&(e=o),fo(vr(t,1,Ja,!0),ci(e,2))})),oa=Xr((function(t){var e=Xi(t);return e="function"==typeof e?e:o,fo(vr(t,1,Ja,!0),o,e)}));function ia(t){if(!t||!t.length)return[];var e=0;return t=Le(t,(function(t){if(Ja(t))return e=bn(t.length,e),!0})),Xe(e,(function(e){return je(t,Ge(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=ia(t);return null==e?n:je(n,(function(t){return Re(e,o,t)}))}var sa=Xr((function(t,e){return Ja(t)?dr(t,e):[]})),ua=Xr((function(t){return mo(Le(t,Ja))})),la=Xr((function(t){var e=Xi(t);return Ja(e)&&(e=o),mo(Le(t,Ja),ci(e,2))})),ca=Xr((function(t){var e=Xi(t);return e="function"==typeof e?e:o,mo(Le(t,Ja),o,e)})),fa=Xr(ia);var da=Xr((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,aa(t,n)}));function ha(t){var e=Dn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var ga=oi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return sr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Hn&&wi(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[i],thisArg:o}),new qn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(i)}));var ya=Oo((function(t,e,n){Nt.call(t,n)?++t[n]:ar(t,n,1)}));var ma=$o(qi),va=$o(Hi);function ba(t,e){return(Ha(t)?Ce:hr)(t,ci(e,3))}function wa(t,e){return(Ha(t)?Be:pr)(t,ci(e,3))}var _a=Oo((function(t,e,n){Nt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var Ea=Xr((function(t,e,n){var o=-1,i="function"==typeof e,a=Ga(t)?r(t.length):[];return hr(t,(function(t){a[++o]=i?Re(e,t,n):kr(t,e,n)})),a})),Sa=Oo((function(t,e,n){ar(t,n,e)}));function Aa(t,e){return(Ha(t)?je:$r)(t,ci(e,3))}var Ia=Oo((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Ta=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&_i(t,e[0],e[1])?e=[]:n>2&&_i(e[0],e[1],e[2])&&(e=[e[0]]),Hr(t,vr(e,1),[])})),Ra=ce||function(){return ge.Date.now()};function xa(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Qo(t,f,o,o,o,o,e)}function Ca(t,e){var n;if("function"!=typeof e)throw new Bt(i);return t=gs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Ba=Xr((function(t,e,n){var r=1;if(n.length){var o=fn(n,li(Ba));r|=l}return Qo(t,r,e,n,o)})),ka=Xr((function(t,e,n){var r=3;if(n.length){var o=fn(n,li(ka));r|=l}return Qo(e,r,t,n,o)}));function La(t,e,n){var r,a,s,u,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof t)throw new Bt(i);function g(e){var n=r,i=a;return r=a=o,f=e,u=t.apply(i,n)}function y(t){var n=t-c;return c===o||n>=e||n<0||h&&t-f>=s}function m(){var t=Ra();if(y(t))return v(t);l=Li(m,function(t){var n=e-(t-c);return h?wn(n,s-(t-f)):n}(t))}function v(t){return l=o,p&&r?g(t):(r=a=o,u)}function b(){var t=Ra(),n=y(t);if(r=arguments,a=this,c=t,n){if(l===o)return function(t){return f=t,l=Li(m,e),d?g(t):u}(c);if(h)return Ao(l),l=Li(m,e),g(c)}return l===o&&(l=Li(m,e)),u}return e=ms(e)||0,es(n)&&(d=!!n.leading,s=(h="maxWait"in n)?bn(ms(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==o&&Ao(l),f=0,r=c=a=l=o},b.flush=function(){return l===o?u:v(Ra())},b}var Oa=Xr((function(t,e){return fr(t,1,e)})),Ua=Xr((function(t,e,n){return fr(t,ms(e)||0,n)}));function ja(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Bt(i);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(ja.Cache||Jn),n}function Na(t){if("function"!=typeof t)throw new Bt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ja.Cache=Jn;var Ma=Eo((function(t,e){var n=(e=1==e.length&&Ha(e[0])?je(e[0],Qe(ci())):je(vr(e,1),Qe(ci()))).length;return Xr((function(r){for(var o=-1,i=wn(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return Re(t,this,r)}))})),Pa=Xr((function(t,e){var n=fn(e,li(Pa));return Qo(t,l,o,e,n)})),Wa=Xr((function(t,e){var n=fn(e,li(Wa));return Qo(t,c,o,e,n)})),$a=oi((function(t,e){return Qo(t,d,o,o,o,e)}));function Da(t,e){return t===e||t!=t&&e!=e}var Fa=Jo(Rr),za=Jo((function(t,e){return t>=e})),qa=Lr(function(){return arguments}())?Lr:function(t){return ns(t)&&Nt.call(t,"callee")&&!Yt.call(t,"callee")},Ha=r.isArray,Va=_e?Qe(_e):function(t){return ns(t)&&Tr(t)==U};function Ga(t){return null!=t&&ts(t.length)&&!Za(t)}function Ja(t){return ns(t)&&Ga(t)}var Ya=be||mu,Ka=Ee?Qe(Ee):function(t){return ns(t)&&Tr(t)==_};function Xa(t){if(!ns(t))return!1;var e=Tr(t);return e==E||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!is(t)}function Za(t){if(!es(t))return!1;var e=Tr(t);return e==S||e==A||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=Se?Qe(Se):function(t){return ns(t)&&yi(t)==I};function os(t){return"number"==typeof t||ns(t)&&Tr(t)==T}function is(t){if(!ns(t)||Tr(t)!=R)return!1;var e=Gt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&jt.call(n)==$t}var as=Ae?Qe(Ae):function(t){return ns(t)&&Tr(t)==C};var ss=Ie?Qe(Ie):function(t){return ns(t)&&yi(t)==B};function us(t){return"string"==typeof t||!Ha(t)&&ns(t)&&Tr(t)==k}function ls(t){return"symbol"==typeof t||ns(t)&&Tr(t)==L}var cs=Te?Qe(Te):function(t){return ns(t)&&ts(t.length)&&!!ue[Tr(t)]};var fs=Jo(Wr),ds=Jo((function(t,e){return t<=e}));function hs(t){if(!t)return[];if(Ga(t))return us(t)?gn(t):ko(t);if(Zt&&t[Zt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Zt]());var e=yi(t);return(e==I?ln:e==B?dn:Ds)(t)}function ps(t){return t?(t=ms(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function ys(t){return t?ur(gs(t),0,y):0}function ms(t){if("number"==typeof t)return t;if(ls(t))return g;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ze(t);var n=mt.test(t);return n||bt.test(t)?de(t.slice(2),n?2:8):yt.test(t)?g:+t}function vs(t){return Lo(t,Os(t))}function bs(t){return null==t?"":co(t)}var ws=Uo((function(t,e){if(Ii(e)||Ga(e))Lo(e,Ls(e),t);else for(var n in e)Nt.call(e,n)&&nr(t,n,e[n])})),_s=Uo((function(t,e){Lo(e,Os(e),t)})),Es=Uo((function(t,e,n,r){Lo(e,Os(e),t,r)})),Ss=Uo((function(t,e,n,r){Lo(e,Ls(e),t,r)})),As=oi(sr);var Is=Xr((function(t,e){t=Rt(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&_i(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],s=Os(a),u=-1,l=s.length;++u<l;){var c=s[u],f=t[c];(f===o||Da(f,Ot[c])&&!Nt.call(t,c))&&(t[c]=a[c])}return t})),Ts=Xr((function(t){return t.push(o,ei),Re(js,o,t)}));function Rs(t,e,n){var r=null==t?o:Ar(t,e);return r===o?n:r}function xs(t,e){return null!=t&&mi(t,e,Cr)}var Cs=zo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),t[e]=n}),eu(ou)),Bs=zo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]}),ci),ks=Xr(kr);function Ls(t){return Ga(t)?Xn(t):Mr(t)}function Os(t){return Ga(t)?Xn(t,!0):Pr(t)}var Us=Uo((function(t,e,n){zr(t,e,n)})),js=Uo((function(t,e,n,r){zr(t,e,n,r)})),Ns=oi((function(t,e){var n={};if(null==t)return n;var r=!1;e=je(e,(function(e){return e=_o(e,t),r||(r=e.length>1),e})),Lo(t,ai(t),n),r&&(n=lr(n,7,ni));for(var o=e.length;o--;)ho(n,e[o]);return n}));var Ms=oi((function(t,e){return null==t?{}:function(t,e){return Vr(t,e,(function(e,n){return xs(t,n)}))}(t,e)}));function Ps(t,e){if(null==t)return{};var n=je(ai(t),(function(t){return[t]}));return e=ci(e),Vr(t,n,(function(t,n){return e(t,n[0])}))}var Ws=Zo(Ls),$s=Zo(Os);function Ds(t){return null==t?[]:tn(t,Ls(t))}var Fs=Po((function(t,e,n){return e=e.toLowerCase(),t+(n?zs(e):e)}));function zs(t){return Xs(bs(t).toLowerCase())}function qs(t){return(t=bs(t))&&t.replace(_t,on).replace(ee,"")}var Hs=Po((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Vs=Po((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Gs=Mo("toLowerCase");var Js=Po((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ys=Po((function(t,e,n){return t+(n?" ":"")+Xs(e)}));var Ks=Po((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xs=Mo("toUpperCase");function Zs(t,e,n){return t=bs(t),(e=n?o:e)===o?function(t){return ie.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ft)||[]}(t):t.match(e)||[]}var Qs=Xr((function(t,e){try{return Re(t,o,e)}catch(t){return Xa(t)?t:new At(t)}})),tu=oi((function(t,e){return Ce(e,(function(e){e=Pi(e),ar(t,e,Ba(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Do(),ru=Do(!0);function ou(t){return t}function iu(t){return Nr("function"==typeof t?t:lr(t,1))}var au=Xr((function(t,e){return function(n){return kr(n,t,e)}})),su=Xr((function(t,e){return function(n){return kr(t,n,e)}}));function uu(t,e,n){var r=Ls(e),o=Sr(e,r);null!=n||es(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=Sr(e,Ls(e)));var i=!(es(n)&&"chain"in n&&!n.chain),a=Za(t);return Ce(o,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__);return(n.__actions__=ko(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function lu(){}var cu=Ho(je),fu=Ho(ke),du=Ho(We);function hu(t){return Ei(t)?Ge(Pi(t)):function(t){return function(e){return Ar(e,t)}}(t)}var pu=Go(),gu=Go(!0);function yu(){return[]}function mu(){return!1}var vu=qo((function(t,e){return t+e}),0),bu=Ko("ceil"),wu=qo((function(t,e){return t/e}),1),_u=Ko("floor");var Eu,Su=qo((function(t,e){return t*e}),1),Au=Ko("round"),Iu=qo((function(t,e){return t-e}),0);return Dn.after=function(t,e){if("function"!=typeof e)throw new Bt(i);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},Dn.ary=xa,Dn.assign=ws,Dn.assignIn=_s,Dn.assignInWith=Es,Dn.assignWith=Ss,Dn.at=As,Dn.before=Ca,Dn.bind=Ba,Dn.bindAll=tu,Dn.bindKey=ka,Dn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ha(t)?t:[t]},Dn.chain=ha,Dn.chunk=function(t,e,n){e=(n?_i(t,e,n):e===o)?1:bn(gs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,u=r(pe(i/e));a<i;)u[s++]=oo(t,a,a+=e);return u},Dn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},Dn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],o=t;o--;)e[o-1]=arguments[o];return Ne(Ha(n)?ko(n):[n],vr(e,1))},Dn.cond=function(t){var e=null==t?0:t.length,n=ci();return t=e?je(t,(function(t){if("function"!=typeof t[1])throw new Bt(i);return[n(t[0]),t[1]]})):[],Xr((function(n){for(var r=-1;++r<e;){var o=t[r];if(Re(o[0],this,n))return Re(o[1],this,n)}}))},Dn.conforms=function(t){return function(t){var e=Ls(t);return function(n){return cr(n,t,e)}}(lr(t,1))},Dn.constant=eu,Dn.countBy=ya,Dn.create=function(t,e){var n=Fn(t);return null==e?n:ir(n,e)},Dn.curry=function t(e,n,r){var i=Qo(e,8,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},Dn.curryRight=function t(e,n,r){var i=Qo(e,u,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},Dn.debounce=La,Dn.defaults=Is,Dn.defaultsDeep=Ts,Dn.defer=Oa,Dn.delay=Ua,Dn.difference=Di,Dn.differenceBy=Fi,Dn.differenceWith=zi,Dn.drop=function(t,e,n){var r=null==t?0:t.length;return r?oo(t,(e=n||e===o?1:gs(e))<0?0:e,r):[]},Dn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?oo(t,0,(e=r-(e=n||e===o?1:gs(e)))<0?0:e):[]},Dn.dropRightWhile=function(t,e){return t&&t.length?go(t,ci(e,3),!0,!0):[]},Dn.dropWhile=function(t,e){return t&&t.length?go(t,ci(e,3),!0):[]},Dn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&_i(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=gs(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:gs(r))<0&&(r+=i),r=n>r?0:ys(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Dn.filter=function(t,e){return(Ha(t)?Le:mr)(t,ci(e,3))},Dn.flatMap=function(t,e){return vr(Aa(t,e),1)},Dn.flatMapDeep=function(t,e){return vr(Aa(t,e),h)},Dn.flatMapDepth=function(t,e,n){return n=n===o?1:gs(n),vr(Aa(t,e),n)},Dn.flatten=Vi,Dn.flattenDeep=function(t){return(null==t?0:t.length)?vr(t,h):[]},Dn.flattenDepth=function(t,e){return(null==t?0:t.length)?vr(t,e=e===o?1:gs(e)):[]},Dn.flip=function(t){return Qo(t,512)},Dn.flow=nu,Dn.flowRight=ru,Dn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},Dn.functions=function(t){return null==t?[]:Sr(t,Ls(t))},Dn.functionsIn=function(t){return null==t?[]:Sr(t,Os(t))},Dn.groupBy=_a,Dn.initial=function(t){return(null==t?0:t.length)?oo(t,0,-1):[]},Dn.intersection=Ji,Dn.intersectionBy=Yi,Dn.intersectionWith=Ki,Dn.invert=Cs,Dn.invertBy=Bs,Dn.invokeMap=Ea,Dn.iteratee=iu,Dn.keyBy=Sa,Dn.keys=Ls,Dn.keysIn=Os,Dn.map=Aa,Dn.mapKeys=function(t,e){var n={};return e=ci(e,3),_r(t,(function(t,r,o){ar(n,e(t,r,o),t)})),n},Dn.mapValues=function(t,e){var n={};return e=ci(e,3),_r(t,(function(t,r,o){ar(n,r,e(t,r,o))})),n},Dn.matches=function(t){return Dr(lr(t,1))},Dn.matchesProperty=function(t,e){return Fr(t,lr(e,1))},Dn.memoize=ja,Dn.merge=Us,Dn.mergeWith=js,Dn.method=au,Dn.methodOf=su,Dn.mixin=uu,Dn.negate=Na,Dn.nthArg=function(t){return t=gs(t),Xr((function(e){return qr(e,t)}))},Dn.omit=Ns,Dn.omitBy=function(t,e){return Ps(t,Na(ci(e)))},Dn.once=function(t){return Ca(2,t)},Dn.orderBy=function(t,e,n,r){return null==t?[]:(Ha(e)||(e=null==e?[]:[e]),Ha(n=r?o:n)||(n=null==n?[]:[n]),Hr(t,e,n))},Dn.over=cu,Dn.overArgs=Ma,Dn.overEvery=fu,Dn.overSome=du,Dn.partial=Pa,Dn.partialRight=Wa,Dn.partition=Ia,Dn.pick=Ms,Dn.pickBy=Ps,Dn.property=hu,Dn.propertyOf=function(t){return function(e){return null==t?o:Ar(t,e)}},Dn.pull=Zi,Dn.pullAll=Qi,Dn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,ci(n,2)):t},Dn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,o,n):t},Dn.pullAt=ta,Dn.range=pu,Dn.rangeRight=gu,Dn.rearg=$a,Dn.reject=function(t,e){return(Ha(t)?Le:mr)(t,Na(ci(e,3)))},Dn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=ci(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Jr(t,o),n},Dn.rest=function(t,e){if("function"!=typeof t)throw new Bt(i);return Xr(t,e=e===o?e:gs(e))},Dn.reverse=ea,Dn.sampleSize=function(t,e,n){return e=(n?_i(t,e,n):e===o)?1:gs(e),(Ha(t)?Qn:Qr)(t,e)},Dn.set=function(t,e,n){return null==t?t:to(t,e,n)},Dn.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:to(t,e,n,r)},Dn.shuffle=function(t){return(Ha(t)?tr:ro)(t)},Dn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&_i(t,e,n)?(e=0,n=r):(e=null==e?0:gs(e),n=n===o?r:gs(n)),oo(t,e,n)):[]},Dn.sortBy=Ta,Dn.sortedUniq=function(t){return t&&t.length?uo(t):[]},Dn.sortedUniqBy=function(t,e){return t&&t.length?uo(t,ci(e,2)):[]},Dn.split=function(t,e,n){return n&&"number"!=typeof n&&_i(t,e,n)&&(e=n=o),(n=n===o?y:n>>>0)?(t=bs(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=co(e))&&un(t)?So(gn(t),0,n):t.split(e,n):[]},Dn.spread=function(t,e){if("function"!=typeof t)throw new Bt(i);return e=null==e?0:bn(gs(e),0),Xr((function(n){var r=n[e],o=So(n,0,e);return r&&Ne(o,r),Re(t,this,o)}))},Dn.tail=function(t){var e=null==t?0:t.length;return e?oo(t,1,e):[]},Dn.take=function(t,e,n){return t&&t.length?oo(t,0,(e=n||e===o?1:gs(e))<0?0:e):[]},Dn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?oo(t,(e=r-(e=n||e===o?1:gs(e)))<0?0:e,r):[]},Dn.takeRightWhile=function(t,e){return t&&t.length?go(t,ci(e,3),!1,!0):[]},Dn.takeWhile=function(t,e){return t&&t.length?go(t,ci(e,3)):[]},Dn.tap=function(t,e){return e(t),t},Dn.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Bt(i);return es(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),La(t,e,{leading:r,maxWait:e,trailing:o})},Dn.thru=pa,Dn.toArray=hs,Dn.toPairs=Ws,Dn.toPairsIn=$s,Dn.toPath=function(t){return Ha(t)?je(t,Pi):ls(t)?[t]:ko(Mi(bs(t)))},Dn.toPlainObject=vs,Dn.transform=function(t,e,n){var r=Ha(t),o=r||Ya(t)||cs(t);if(e=ci(e,4),null==n){var i=t&&t.constructor;n=o?r?new i:[]:es(t)&&Za(i)?Fn(Gt(t)):{}}return(o?Ce:_r)(t,(function(t,r,o){return e(n,t,r,o)})),n},Dn.unary=function(t){return xa(t,1)},Dn.union=na,Dn.unionBy=ra,Dn.unionWith=oa,Dn.uniq=function(t){return t&&t.length?fo(t):[]},Dn.uniqBy=function(t,e){return t&&t.length?fo(t,ci(e,2)):[]},Dn.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?fo(t,o,e):[]},Dn.unset=function(t,e){return null==t||ho(t,e)},Dn.unzip=ia,Dn.unzipWith=aa,Dn.update=function(t,e,n){return null==t?t:po(t,e,wo(n))},Dn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:po(t,e,wo(n),r)},Dn.values=Ds,Dn.valuesIn=function(t){return null==t?[]:tn(t,Os(t))},Dn.without=sa,Dn.words=Zs,Dn.wrap=function(t,e){return Pa(wo(e),t)},Dn.xor=ua,Dn.xorBy=la,Dn.xorWith=ca,Dn.zip=fa,Dn.zipObject=function(t,e){return vo(t||[],e||[],nr)},Dn.zipObjectDeep=function(t,e){return vo(t||[],e||[],to)},Dn.zipWith=da,Dn.entries=Ws,Dn.entriesIn=$s,Dn.extend=_s,Dn.extendWith=Es,uu(Dn,Dn),Dn.add=vu,Dn.attempt=Qs,Dn.camelCase=Fs,Dn.capitalize=zs,Dn.ceil=bu,Dn.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=ms(n))==n?n:0),e!==o&&(e=(e=ms(e))==e?e:0),ur(ms(t),e,n)},Dn.clone=function(t){return lr(t,4)},Dn.cloneDeep=function(t){return lr(t,5)},Dn.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:o)},Dn.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:o)},Dn.conformsTo=function(t,e){return null==e||cr(t,e,Ls(e))},Dn.deburr=qs,Dn.defaultTo=function(t,e){return null==t||t!=t?e:t},Dn.divide=wu,Dn.endsWith=function(t,e,n){t=bs(t),e=co(e);var r=t.length,i=n=n===o?r:ur(gs(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Dn.eq=Da,Dn.escape=function(t){return(t=bs(t))&&X.test(t)?t.replace(Y,an):t},Dn.escapeRegExp=function(t){return(t=bs(t))&&it.test(t)?t.replace(ot,"\\$&"):t},Dn.every=function(t,e,n){var r=Ha(t)?ke:gr;return n&&_i(t,e,n)&&(e=o),r(t,ci(e,3))},Dn.find=ma,Dn.findIndex=qi,Dn.findKey=function(t,e){return De(t,ci(e,3),_r)},Dn.findLast=va,Dn.findLastIndex=Hi,Dn.findLastKey=function(t,e){return De(t,ci(e,3),Er)},Dn.floor=_u,Dn.forEach=ba,Dn.forEachRight=wa,Dn.forIn=function(t,e){return null==t?t:br(t,ci(e,3),Os)},Dn.forInRight=function(t,e){return null==t?t:wr(t,ci(e,3),Os)},Dn.forOwn=function(t,e){return t&&_r(t,ci(e,3))},Dn.forOwnRight=function(t,e){return t&&Er(t,ci(e,3))},Dn.get=Rs,Dn.gt=Fa,Dn.gte=za,Dn.has=function(t,e){return null!=t&&mi(t,e,xr)},Dn.hasIn=xs,Dn.head=Gi,Dn.identity=ou,Dn.includes=function(t,e,n,r){t=Ga(t)?t:Ds(t),n=n&&!r?gs(n):0;var o=t.length;return n<0&&(n=bn(o+n,0)),us(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&ze(t,e,n)>-1},Dn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=bn(r+o,0)),ze(t,e,o)},Dn.inRange=function(t,e,n){return e=ps(e),n===o?(n=e,e=0):n=ps(n),function(t,e,n){return t>=wn(e,n)&&t<bn(e,n)}(t=ms(t),e,n)},Dn.invoke=ks,Dn.isArguments=qa,Dn.isArray=Ha,Dn.isArrayBuffer=Va,Dn.isArrayLike=Ga,Dn.isArrayLikeObject=Ja,Dn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Tr(t)==w},Dn.isBuffer=Ya,Dn.isDate=Ka,Dn.isElement=function(t){return ns(t)&&1===t.nodeType&&!is(t)},Dn.isEmpty=function(t){if(null==t)return!0;if(Ga(t)&&(Ha(t)||"string"==typeof t||"function"==typeof t.splice||Ya(t)||cs(t)||qa(t)))return!t.length;var e=yi(t);if(e==I||e==B)return!t.size;if(Ii(t))return!Mr(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},Dn.isEqual=function(t,e){return Or(t,e)},Dn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?Or(t,e,o,n):!!r},Dn.isError=Xa,Dn.isFinite=function(t){return"number"==typeof t&&we(t)},Dn.isFunction=Za,Dn.isInteger=Qa,Dn.isLength=ts,Dn.isMap=rs,Dn.isMatch=function(t,e){return t===e||Ur(t,e,di(e))},Dn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,Ur(t,e,di(e),n)},Dn.isNaN=function(t){return os(t)&&t!=+t},Dn.isNative=function(t){if(Ai(t))throw new At("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return jr(t)},Dn.isNil=function(t){return null==t},Dn.isNull=function(t){return null===t},Dn.isNumber=os,Dn.isObject=es,Dn.isObjectLike=ns,Dn.isPlainObject=is,Dn.isRegExp=as,Dn.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=p},Dn.isSet=ss,Dn.isString=us,Dn.isSymbol=ls,Dn.isTypedArray=cs,Dn.isUndefined=function(t){return t===o},Dn.isWeakMap=function(t){return ns(t)&&yi(t)==O},Dn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Tr(t)},Dn.join=function(t,e){return null==t?"":$e.call(t,e)},Dn.kebabCase=Hs,Dn.last=Xi,Dn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=gs(n))<0?bn(r+i,0):wn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):Fe(t,He,i,!0)},Dn.lowerCase=Vs,Dn.lowerFirst=Gs,Dn.lt=fs,Dn.lte=ds,Dn.max=function(t){return t&&t.length?yr(t,ou,Rr):o},Dn.maxBy=function(t,e){return t&&t.length?yr(t,ci(e,2),Rr):o},Dn.mean=function(t){return Ve(t,ou)},Dn.meanBy=function(t,e){return Ve(t,ci(e,2))},Dn.min=function(t){return t&&t.length?yr(t,ou,Wr):o},Dn.minBy=function(t,e){return t&&t.length?yr(t,ci(e,2),Wr):o},Dn.stubArray=yu,Dn.stubFalse=mu,Dn.stubObject=function(){return{}},Dn.stubString=function(){return""},Dn.stubTrue=function(){return!0},Dn.multiply=Su,Dn.nth=function(t,e){return t&&t.length?qr(t,gs(e)):o},Dn.noConflict=function(){return ge._===this&&(ge._=Dt),this},Dn.noop=lu,Dn.now=Ra,Dn.pad=function(t,e,n){t=bs(t);var r=(e=gs(e))?pn(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return Vo(ye(o),n)+t+Vo(pe(o),n)},Dn.padEnd=function(t,e,n){t=bs(t);var r=(e=gs(e))?pn(t):0;return e&&r<e?t+Vo(e-r,n):t},Dn.padStart=function(t,e,n){t=bs(t);var r=(e=gs(e))?pn(t):0;return e&&r<e?Vo(e-r,n)+t:t},Dn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),En(bs(t).replace(at,""),e||0)},Dn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&_i(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=ps(t),e===o?(e=t,t=0):e=ps(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Sn();return wn(t+i*(e-t+fe("1e-"+((i+"").length-1))),e)}return Yr(t,e)},Dn.reduce=function(t,e,n){var r=Ha(t)?Me:Ye,o=arguments.length<3;return r(t,ci(e,4),n,o,hr)},Dn.reduceRight=function(t,e,n){var r=Ha(t)?Pe:Ye,o=arguments.length<3;return r(t,ci(e,4),n,o,pr)},Dn.repeat=function(t,e,n){return e=(n?_i(t,e,n):e===o)?1:gs(e),Kr(bs(t),e)},Dn.replace=function(){var t=arguments,e=bs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Dn.result=function(t,e,n){var r=-1,i=(e=_o(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[Pi(e[r])];a===o&&(r=i,a=n),t=Za(a)?a.call(t):a}return t},Dn.round=Au,Dn.runInContext=t,Dn.sample=function(t){return(Ha(t)?Zn:Zr)(t)},Dn.size=function(t){if(null==t)return 0;if(Ga(t))return us(t)?pn(t):t.length;var e=yi(t);return e==I||e==B?t.size:Mr(t).length},Dn.snakeCase=Js,Dn.some=function(t,e,n){var r=Ha(t)?We:io;return n&&_i(t,e,n)&&(e=o),r(t,ci(e,3))},Dn.sortedIndex=function(t,e){return ao(t,e)},Dn.sortedIndexBy=function(t,e,n){return so(t,e,ci(n,2))},Dn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ao(t,e);if(r<n&&Da(t[r],e))return r}return-1},Dn.sortedLastIndex=function(t,e){return ao(t,e,!0)},Dn.sortedLastIndexBy=function(t,e,n){return so(t,e,ci(n,2),!0)},Dn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ao(t,e,!0)-1;if(Da(t[n],e))return n}return-1},Dn.startCase=Ys,Dn.startsWith=function(t,e,n){return t=bs(t),n=null==n?0:ur(gs(n),0,t.length),e=co(e),t.slice(n,n+e.length)==e},Dn.subtract=Iu,Dn.sum=function(t){return t&&t.length?Ke(t,ou):0},Dn.sumBy=function(t,e){return t&&t.length?Ke(t,ci(e,2)):0},Dn.template=function(t,e,n){var r=Dn.templateSettings;n&&_i(t,e,n)&&(e=o),t=bs(t),e=Es({},e,r,ti);var i,a,s=Es({},e.imports,r.imports,ti),u=Ls(s),l=tn(s,u),c=0,f=e.interpolate||Et,d="__p += '",h=xt((e.escape||Et).source+"|"+f.source+"|"+(f===tt?pt:Et).source+"|"+(e.evaluate||Et).source+"|$","g"),p="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(h,(function(e,n,r,o,s,u){return r||(r=o),d+=t.slice(c,u).replace(St,sn),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),d+="';\n";var g=Nt.call(e,"variable")&&e.variable;if(g){if(dt.test(g))throw new At("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(H,""):d).replace(V,"$1").replace(G,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Qs((function(){return It(u,p+"return "+d).apply(o,l)}));if(y.source=d,Xa(y))throw y;return y},Dn.times=function(t,e){if((t=gs(t))<1||t>p)return[];var n=y,r=wn(t,y);e=ci(e),t-=y;for(var o=Xe(r,e);++n<t;)e(n);return o},Dn.toFinite=ps,Dn.toInteger=gs,Dn.toLength=ys,Dn.toLower=function(t){return bs(t).toLowerCase()},Dn.toNumber=ms,Dn.toSafeInteger=function(t){return t?ur(gs(t),-9007199254740991,p):0===t?t:0},Dn.toString=bs,Dn.toUpper=function(t){return bs(t).toUpperCase()},Dn.trim=function(t,e,n){if((t=bs(t))&&(n||e===o))return Ze(t);if(!t||!(e=co(e)))return t;var r=gn(t),i=gn(e);return So(r,nn(r,i),rn(r,i)+1).join("")},Dn.trimEnd=function(t,e,n){if((t=bs(t))&&(n||e===o))return t.slice(0,yn(t)+1);if(!t||!(e=co(e)))return t;var r=gn(t);return So(r,0,rn(r,gn(e))+1).join("")},Dn.trimStart=function(t,e,n){if((t=bs(t))&&(n||e===o))return t.replace(at,"");if(!t||!(e=co(e)))return t;var r=gn(t);return So(r,nn(r,gn(e))).join("")},Dn.truncate=function(t,e){var n=30,r="...";if(es(e)){var i="separator"in e?e.separator:i;n="length"in e?gs(e.length):n,r="omission"in e?co(e.omission):r}var a=(t=bs(t)).length;if(un(t)){var s=gn(t);a=s.length}if(n>=a)return t;var u=n-pn(r);if(u<1)return r;var l=s?So(s,0,u).join(""):t.slice(0,u);if(i===o)return l+r;if(s&&(u+=l.length-u),as(i)){if(t.slice(u).search(i)){var c,f=l;for(i.global||(i=xt(i.source,bs(gt.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;l=l.slice(0,d===o?u:d)}}else if(t.indexOf(co(i),u)!=u){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+r},Dn.unescape=function(t){return(t=bs(t))&&K.test(t)?t.replace(J,mn):t},Dn.uniqueId=function(t){var e=++Mt;return bs(t)+e},Dn.upperCase=Ks,Dn.upperFirst=Xs,Dn.each=ba,Dn.eachRight=wa,Dn.first=Gi,uu(Dn,(Eu={},_r(Dn,(function(t,e){Nt.call(Dn.prototype,e)||(Eu[e]=t)})),Eu),{chain:!1}),Dn.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Dn[t].placeholder=Dn})),Ce(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===o?1:bn(gs(n),0);var r=this.__filtered__&&!e?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=wn(n,r.__takeCount__):r.__views__.push({size:wn(n,y),type:t+(r.__dir__<0?"Right":"")}),r},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ci(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ou)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return kr(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(Na(ci(t)))},Hn.prototype.slice=function(t,e){t=gs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=gs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(y)},_r(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Dn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(Dn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Hn,l=s[0],c=u||Ha(e),f=function(t){var e=i.apply(Dn,Ne([t],s));return r&&d?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=a&&!d,g=u&&!h;if(!a&&c){e=g?e:new Hn(this);var y=t.apply(e,s);return y.__actions__.push({func:pa,args:[f],thisArg:o}),new qn(y,d)}return p&&g?t.apply(this,s):(y=this.thru(f),p?r?y.value()[0]:y.value():y)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=kt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Dn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(Ha(o)?o:[],t)}return this[n]((function(n){return e.apply(Ha(n)?n:[],t)}))}})),_r(Hn.prototype,(function(t,e){var n=Dn[e];if(n){var r=n.name+"";Nt.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:e,func:n})}})),Ln[Fo(o,2).name]=[{name:"wrapper",func:o}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=ko(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ko(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ko(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ha(t),r=e<0,o=n?t.length:0,i=function(t,e,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=bn(t,e-a)}}return{start:t,end:e}}(0,o,this.__views__),a=i.start,s=i.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,h=wn(u,this.__takeCount__);if(!n||!r&&o==u&&h==u)return yo(t,this.__actions__);var p=[];t:for(;u--&&d<h;){for(var g=-1,y=t[l+=e];++g<f;){var m=c[g],v=m.iteratee,b=m.type,w=v(y);if(2==b)y=w;else if(!w){if(1==b)continue t;break t}}p[d++]=y}return p},Dn.prototype.at=ga,Dn.prototype.chain=function(){return ha(this)},Dn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},Dn.prototype.next=function(){this.__values__===o&&(this.__values__=hs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},Dn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var r=$i(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Dn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[ea],thisArg:o}),new qn(e,this.__chain__)}return this.thru(ea)},Dn.prototype.toJSON=Dn.prototype.valueOf=Dn.prototype.value=function(){return yo(this.__wrapped__,this.__actions__)},Dn.prototype.first=Dn.prototype.head,Zt&&(Dn.prototype[Zt]=function(){return this}),Dn}();ge._=vn,(r=function(){return vn}.call(e,n,e,t))===o||(t.exports=r)}.call(this)},300:(t,e,n)=>{var r,o;t=n.nmd(t),function(e){e.runningInNodeJS=function(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node},e.runningInMainNodeJSModule=function(){return e.runningInNodeJS()&&n.c[n.s]===t},e.commonJSAvailable=function(){return"object"==typeof t.exports},e.runningInWebWorker=function(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener&&"function"==typeof self.close},e.runningInNodeChildProcess=function(){return e.runningInNodeJS()&&"function"==typeof process.send},e.runningInNullOrigin=function(){return"object"==typeof window&&"object"==typeof window.location&&"object"==typeof document&&("http:"!==document.location.protocol&&"https:"!==document.location.protocol)},e.webWorkersAvailable=function(){return"function"==typeof Worker&&!e.runningInNullOrigin()&&(!e.runningInNodeJS()&&!(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0))},e.log=function(t,e){void 0===e&&(e=!1),"object"==typeof console&&(console.log(t),e&&"object"==typeof document&&(document.body.innerHTML+=t+"<br/>"))},e.createErrorMessage=function(t,n){if(void 0===n&&(n="Unhandled exception"),null==t)return n;if(n+=": ","object"==typeof t.content){if(e.runningInNodeJS())return n+t.content.stack;var r=JSON.stringify(t.content);return"{}"!==r?n+r:n+t.content}return"string"==typeof t.content?n+t.content:n+t},e.printExceptionAndStackTraceToConsole=function(t,n){void 0===n&&(n="Unhandled exception"),e.log(e.createErrorMessage(t,n))},e.getGlobalObject=function(){return"object"==typeof n.g?n.g:"object"==typeof window?window:"object"==typeof self?self:{}},e.toString=Object.prototype.toString,e.commonJSAvailable()&&(t.exports=e)}(o||(o={})),function(t){if("function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength){var e=function(t,e){var n=function(t,e,n){return t<e?e:t>n?n:t};t|=0,e|=0,arguments.length<1&&(t=0),arguments.length<2&&(e=this.length),t<0&&(t=this.length+t),e<0&&(e=this.length+e),t=n(t,0,this.length);var r=(e=n(e,0,this.length))-t;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+t*this.BYTES_PER_ELEMENT,r)},n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],r=void 0;if("object"==typeof window?r=window:"object"==typeof self&&(r=self),void 0!==r)for(var o=0;o<n.length;o++)r[n[o]]&&(r[n[o]].prototype.subarray=e)}}(r||(r={})),function(t){var e=function(){function e(){}return e.compressAsync=function(e,n,r){var o=new t.Timer,i=new t.Compressor;if(!r)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof e)e=t.encodeUTF8(e);else if(null==e||!(e instanceof Uint8Array))return void r(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var a=t.ArrayTools.splitByteArray(e,n.blockSize),s=[],u=function(e){if(e<a.length){var l=void 0;try{l=i.compressBlock(a[e])}catch(t){return void r(void 0,t)}s.push(l),o.getElapsedTime()<=20?u(e+1):(t.enqueueImmediate((function(){return u(e+1)})),o.restart())}else{var c=t.ArrayTools.concatUint8Arrays(s);t.enqueueImmediate((function(){var e;try{e=t.CompressionCommon.encodeCompressedBytes(c,n.outputEncoding)}catch(t){return void r(void 0,t)}t.enqueueImmediate((function(){return r(e)}))}))}};t.enqueueImmediate((function(){return u(0)}))},e.createCompressionStream=function(){var e=new t.Compressor,r=new(n(99).Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(n,o,i){var a;try{a=t.BufferTools.uint8ArrayToBuffer(e.compressBlock(t.BufferTools.bufferToUint8Array(n)))}catch(t){return void r.emit("error",t)}r.push(a),i()},r},e}();t.AsyncCompressor=e}(o||(o={})),function(t){var e=function(){function e(){}return e.decompressAsync=function(e,n,r){if(!r)throw new TypeError("decompressAsync: No callback argument given");var o=new t.Timer;try{e=t.CompressionCommon.decodeCompressedBytes(e,n.inputEncoding)}catch(t){return void r(void 0,t)}var i=new t.Decompressor,a=t.ArrayTools.splitByteArray(e,n.blockSize),s=[],u=function(e){if(e<a.length){var l=void 0;try{l=i.decompressBlock(a[e])}catch(t){return void r(void 0,t)}s.push(l),o.getElapsedTime()<=20?u(e+1):(t.enqueueImmediate((function(){return u(e+1)})),o.restart())}else{var c=t.ArrayTools.concatUint8Arrays(s);t.enqueueImmediate((function(){var e;try{e=t.CompressionCommon.encodeDecompressedBytes(c,n.outputEncoding)}catch(t){return void r(void 0,t)}t.enqueueImmediate((function(){return r(e)}))}))}};t.enqueueImmediate((function(){return u(0)}))},e.createDecompressionStream=function(){var e=new t.Decompressor,r=new(n(99).Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(n,o,i){var a;try{a=t.BufferTools.uint8ArrayToBuffer(e.decompressBlock(t.BufferTools.bufferToUint8Array(n)))}catch(t){return void r.emit("error",t)}r.push(a),i()},r},e}();t.AsyncDecompressor=e}(o||(o={})),function(t){var e;!function(e){e.compressAsync=function(t,n,r){if("ByteArray"!=n.inputEncoding||t instanceof Uint8Array){var o={token:Math.random().toString(),type:"compress",data:t,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},i=function(t){var n=t.data;n&&n.token==o.token&&(e.globalWorker.removeEventListener("message",i),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};e.globalWorker.addEventListener("message",i),e.globalWorker.postMessage(o,[])}else r(void 0,new TypeError("compressAsync: input is not a Uint8Array"))},e.decompressAsync=function(t,n,r){var o={token:Math.random().toString(),type:"decompress",data:t,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},i=function(t){var n=t.data;n&&n.token==o.token&&(e.globalWorker.removeEventListener("message",i),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};e.globalWorker.addEventListener("message",i),e.globalWorker.postMessage(o,[])},e.installWebWorkerIfNeeded=function(){"object"==typeof self&&void 0===self.document&&null!=self.addEventListener&&(self.addEventListener("message",(function(e){var n=e.data;if("compress"==n.type){var r=void 0;try{r=t.compress(n.data,{outputEncoding:n.outputEncoding})}catch(e){return void self.postMessage({token:n.token,type:"error",error:t.createErrorMessage(e)},[])}(o={token:n.token,type:"compressionResult",data:r,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}else if("decompress"==n.type){var o,i=void 0;try{i=t.decompress(n.data,{inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding})}catch(e){return void self.postMessage({token:n.token,type:"error",error:t.createErrorMessage(e)},[])}(o={token:n.token,type:"decompressionResult",data:i,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}})),self.addEventListener("error",(function(e){t.log(t.createErrorMessage(e.error,"Unexpected LZUTF8 WebWorker exception"))})))},e.createGlobalWorkerIfNeeded=function(){if(e.globalWorker)return!0;if(!t.webWorkersAvailable())return!1;if(!e.scriptURI&&"object"==typeof document){var n=document.getElementById("lzutf8");null!=n&&(e.scriptURI=n.getAttribute("src")||void 0)}return!!e.scriptURI&&(e.globalWorker=new Worker(e.scriptURI),!0)},e.terminate=function(){e.globalWorker&&(e.globalWorker.terminate(),e.globalWorker=void 0)}}(e=t.WebWorker||(t.WebWorker={})),e.installWebWorkerIfNeeded()}(o||(o={})),function(t){var e=function(){function t(t,e,n){this.container=t,this.startPosition=e,this.length=n}return t.prototype.get=function(t){return this.container[this.startPosition+t]},t.prototype.getInReversedOrder=function(t){return this.container[this.startPosition+this.length-1-t]},t.prototype.set=function(t,e){this.container[this.startPosition+t]=e},t}();t.ArraySegment=e}(o||(o={})),function(t){!function(t){t.copyElements=function(t,e,n,r,o){for(;o--;)n[r++]=t[e++]},t.zeroElements=function(t,e,n){for(;n--;)t[e++]=0},t.countNonzeroValuesInArray=function(t){for(var e=0,n=0;n<t.length;n++)t[n]&&e++;return e},t.truncateStartingElements=function(t,e){if(t.length<=e)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var n=t.length-e,r=0;r<e;r++)t[r]=t[n+r];t.length=e},t.doubleByteArrayCapacity=function(t){var e=new Uint8Array(2*t.length);return e.set(t),e},t.concatUint8Arrays=function(t){for(var e=0,n=0,r=t;n<r.length;n++){e+=(u=r[n]).length}for(var o=new Uint8Array(e),i=0,a=0,s=t;a<s.length;a++){var u=s[a];o.set(u,i),i+=u.length}return o},t.splitByteArray=function(t,e){for(var n=[],r=0;r<t.length;){var o=Math.min(e,t.length-r);n.push(t.subarray(r,r+o)),r+=o}return n}}(t.ArrayTools||(t.ArrayTools={}))}(o||(o={})),function(t){!function(t){t.convertToUint8ArrayIfNeeded=function(e){return"function"==typeof Buffer&&Buffer.isBuffer(e)?t.bufferToUint8Array(e):e},t.uint8ArrayToBuffer=function(t){if(Buffer.prototype instanceof Uint8Array){var e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return Object.setPrototypeOf(e,Buffer.prototype),e}for(var n=t.length,r=new Buffer(n),o=0;o<n;o++)r[o]=t[o];return r},t.bufferToUint8Array=function(t){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t[r];return n}}(t.BufferTools||(t.BufferTools={}))}(o||(o={})),function(t){!function(e){e.getCroppedBuffer=function(t,e,n,r){void 0===r&&(r=0);var o=new Uint8Array(n+r);return o.set(t.subarray(e,e+n)),o},e.getCroppedAndAppendedByteArray=function(e,n,r,o){return t.ArrayTools.concatUint8Arrays([e.subarray(n,n+r),o])},e.detectCompressionSourceEncoding=function(t){if(null==t)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof t)return"String";if(t instanceof Uint8Array||"function"==typeof Buffer&&Buffer.isBuffer(t))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},e.encodeCompressedBytes=function(e,n){switch(n){case"ByteArray":return e;case"Buffer":return t.BufferTools.uint8ArrayToBuffer(e);case"Base64":return t.encodeBase64(e);case"BinaryString":return t.encodeBinaryString(e);case"StorageBinaryString":return t.encodeStorageBinaryString(e);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},e.decodeCompressedBytes=function(e,n){if(null==n)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(n){case"ByteArray":case"Buffer":var r=t.BufferTools.convertToUint8ArrayIfNeeded(e);if(!(r instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return r;case"Base64":if("string"!=typeof e)throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return t.decodeBase64(e);case"BinaryString":if("string"!=typeof e)throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return t.decodeBinaryString(e);case"StorageBinaryString":if("string"!=typeof e)throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return t.decodeStorageBinaryString(e);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(n,"'"))}},e.encodeDecompressedBytes=function(e,n){switch(n){case"String":return t.decodeUTF8(e);case"ByteArray":return e;case"Buffer":if("function"!=typeof Buffer)throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return t.BufferTools.uint8ArrayToBuffer(e);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}}(t.CompressionCommon||(t.CompressionCommon={}))}(o||(o={})),function(t){var e;!function(e){var n,r=[];e.enqueueImmediate=function(t){r.push(t),1===r.length&&n()},e.initializeScheduler=function(){var e=function(){for(var e=0,n=r;e<n.length;e++){var o=n[e];try{o.call(void 0)}catch(e){t.printExceptionAndStackTraceToConsole(e,"enqueueImmediate exception")}}r.length=0};if(t.runningInNodeJS())n=function(){return setImmediate((function(){return e()}))};else if("object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var o,i="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",(function(t){t.data===i&&e()})),o=t.runningInNullOrigin()?"*":window.location.href,n=function(){return window.postMessage(i,o)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var a=new MessageChannel;a.port1.onmessage=function(){return e()},n=function(){return a.port2.postMessage(0)}}else n=function(){return setTimeout((function(){return e()}),0)}},e.initializeScheduler()}(e=t.EventLoop||(t.EventLoop={})),t.enqueueImmediate=function(t){return e.enqueueImmediate(t)}}(o||(o={})),function(t){!function(t){t.override=function(e,n){return t.extend(e,n)},t.extend=function(t,e){if(null==t)throw new TypeError("obj is null or undefined");if("object"!=typeof t)throw new TypeError("obj is not an object");if(null==e&&(e={}),"object"!=typeof e)throw new TypeError("newProperties is not an object");if(null!=e)for(var n in e)t[n]=e[n];return t}}(t.ObjectTools||(t.ObjectTools={}))}(o||(o={})),function(t){t.getRandomIntegerInRange=function(t,e){return t+Math.floor(Math.random()*(e-t))},t.getRandomUTF16StringOfLength=function(e){for(var n="",r=0;r<e;r++){var o=void 0;do{o=t.getRandomIntegerInRange(0,1114112)}while(o>=55296&&o<=57343);n+=t.Encoding.CodePoint.decodeToString(o)}return n}}(o||(o={})),function(t){var e=function(){function t(t){void 0===t&&(t=1024),this.outputBufferCapacity=t,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return t.prototype.appendCharCode=function(t){this.outputBuffer[this.outputPosition++]=t,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},t.prototype.appendCharCodes=function(t){for(var e=0,n=t.length;e<n;e++)this.appendCharCode(t[e])},t.prototype.appendString=function(t){for(var e=0,n=t.length;e<n;e++)this.appendCharCode(t.charCodeAt(e))},t.prototype.appendCodePoint=function(t){if(t<=65535)this.appendCharCode(t);else{if(!(t<=1114111))throw new Error("appendCodePoint: A code point of ".concat(t," cannot be encoded in UTF-16"));this.appendCharCode(55296+(t-65536>>>10)),this.appendCharCode(56320+(t-65536&1023))}},t.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},t.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},t}();t.StringBuilder=e}(o||(o={})),function(t){var e=function(){function e(){this.restart()}return e.prototype.restart=function(){this.startTime=e.getTimestamp()},e.prototype.getElapsedTime=function(){return e.getTimestamp()-this.startTime},e.prototype.getElapsedTimeAndRestart=function(){var t=this.getElapsedTime();return this.restart(),t},e.prototype.logAndRestart=function(e,n){void 0===n&&(n=!0);var r=this.getElapsedTime(),o="".concat(e,": ").concat(r.toFixed(3),"ms");return t.log(o,n),this.restart(),r},e.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},e.getMicrosecondTimestamp=function(){return Math.floor(1e3*e.getTimestamp())},e.createGlobalTimestampFunction=function(){if("object"==typeof process&&"function"==typeof process.hrtime){var t=0;this.timestampFunc=function(){var e=process.hrtime(),n=1e3*e[0]+e[1]/1e6;return t+n},t=Date.now()-this.timestampFunc()}else if("object"==typeof chrome&&chrome.Interval){var e=Date.now(),n=new chrome.Interval;n.start(),this.timestampFunc=function(){return e+n.microseconds()/1e3}}else if("object"==typeof performance&&performance.now){var r=Date.now()-performance.now();this.timestampFunc=function(){return r+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},e}();t.Timer=e}(o||(o={})),function(t){var e=function(){function e(e){void 0===e&&(e=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,e&&"function"==typeof Uint32Array?this.prefixHashTable=new t.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new t.CompressorSimpleHashTable(this.PrefixHashTableSize)}return e.prototype.compressBlock=function(e){if(null==e)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof e&&(e=t.encodeUTF8(e)),e=t.BufferTools.convertToUint8ArrayIfNeeded(e),this.compressUtf8Block(e)},e.prototype.compressUtf8Block=function(t){if(!t||0==t.length)return new Uint8Array(0);var e=this.cropAndAddNewBytesToInputBuffer(t),n=this.inputBuffer,r=this.inputBuffer.length;this.outputBuffer=new Uint8Array(t.length),this.outputBufferPosition=0;for(var o=0,i=e;i<r;i++){var a=n[i],s=i<o;if(i>r-this.MinimumSequenceLength)s||this.outputRawByte(a);else{var u=this.getBucketIndexForPrefix(i);if(!s){var l=this.findLongestMatch(i,u);null!=l&&(this.outputPointerBytes(l.length,l.distance),o=i+l.length,s=!0)}s||this.outputRawByte(a);var c=this.inputBufferStreamOffset+i;this.prefixHashTable.addValueToBucket(u,c)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},e.prototype.findLongestMatch=function(t,e){var n=this.prefixHashTable.getArraySegmentForBucketIndex(e,this.reusableArraySegmentObject);if(null==n)return null;for(var r,o=this.inputBuffer,i=0,a=0;a<n.length;a++){var s=n.getInReversedOrder(a)-this.inputBufferStreamOffset,u=t-s,l=void 0;if(l=void 0===r?this.MinimumSequenceLength-1:r<128&&u>=128?i+(i>>>1):i,u>this.MaximumMatchDistance||l>=this.MaximumSequenceLength||t+l>=o.length)break;if(o[s+l]===o[t+l])for(var c=0;;c++){if(t+c===o.length||o[s+c]!==o[t+c]){c>l&&(r=u,i=c);break}if(c===this.MaximumSequenceLength)return{distance:u,length:this.MaximumSequenceLength}}}return void 0!==r?{distance:r,length:i}:null},e.prototype.getBucketIndexForPrefix=function(t){return(7880599*this.inputBuffer[t]+39601*this.inputBuffer[t+1]+199*this.inputBuffer[t+2]+this.inputBuffer[t+3])%this.PrefixHashTableSize},e.prototype.outputPointerBytes=function(t,e){e<128?(this.outputRawByte(192|t),this.outputRawByte(e)):(this.outputRawByte(224|t),this.outputRawByte(e>>>8),this.outputRawByte(255&e))},e.prototype.outputRawByte=function(t){this.outputBuffer[this.outputBufferPosition++]=t},e.prototype.cropAndAddNewBytesToInputBuffer=function(e){if(void 0===this.inputBuffer)return this.inputBuffer=e,0;var n=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),r=this.inputBuffer.length-n;return this.inputBuffer=t.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,r,n,e),this.inputBufferStreamOffset+=r,n},e}();t.Compressor=e}(o||(o={})),function(t){var e=function(){function e(t){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*t),this.storage=new Uint32Array(2*t),this.storageIndex=1}return e.prototype.addValueToBucket=function(e,n){e<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var r,o=this.bucketLocators[e];if(0===o)o=this.storageIndex,r=1,this.storage[this.storageIndex]=n,this.storageIndex+=this.minimumBucketCapacity;else{(r=this.bucketLocators[e+1])===this.maximumBucketCapacity-1&&(r=this.truncateBucketToNewerElements(o,r,this.maximumBucketCapacity/2));var i=o+r;0===this.storage[i]?(this.storage[i]=n,i===this.storageIndex&&(this.storageIndex+=r)):(t.ArrayTools.copyElements(this.storage,o,this.storage,this.storageIndex,r),o=this.storageIndex,this.storageIndex+=r,this.storage[this.storageIndex++]=n,this.storageIndex+=r),r++}this.bucketLocators[e]=o,this.bucketLocators[e+1]=r},e.prototype.truncateBucketToNewerElements=function(e,n,r){var o=e+n-r;return t.ArrayTools.copyElements(this.storage,o,this.storage,e,r),t.ArrayTools.zeroElements(this.storage,e+r,n-r),r},e.prototype.compact=function(){var e=this.bucketLocators,n=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var r=0;r<e.length;r+=2){var o=e[r+1];0!==o&&(this.bucketLocators[r]=this.storageIndex,this.bucketLocators[r+1]=o,this.storageIndex+=Math.max(Math.min(2*o,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(8*this.storageIndex);for(r=0;r<e.length;r+=2){var i=e[r];if(0!==i){var a=this.bucketLocators[r],s=this.bucketLocators[r+1];t.ArrayTools.copyElements(n,i,this.storage,a,s)}}},e.prototype.getArraySegmentForBucketIndex=function(e,n){e<<=1;var r=this.bucketLocators[e];return 0===r?null:(void 0===n&&(n=new t.ArraySegment(this.storage,r,this.bucketLocators[e+1])),n)},e.prototype.getUsedBucketCount=function(){return Math.floor(t.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},e.prototype.getTotalElementCount=function(){for(var t=0,e=0;e<this.bucketLocators.length;e+=2)t+=this.bucketLocators[e+1];return t},e}();t.CompressorCustomHashTable=e}(o||(o={})),function(t){var e=function(){function e(t){this.maximumBucketCapacity=64,this.buckets=new Array(t)}return e.prototype.addValueToBucket=function(e,n){var r=this.buckets[e];void 0===r?this.buckets[e]=[n]:(r.length===this.maximumBucketCapacity-1&&t.ArrayTools.truncateStartingElements(r,this.maximumBucketCapacity/2),r.push(n))},e.prototype.getArraySegmentForBucketIndex=function(e,n){var r=this.buckets[e];return void 0===r?null:(void 0===n&&(n=new t.ArraySegment(r,0,r.length)),n)},e.prototype.getUsedBucketCount=function(){return t.ArrayTools.countNonzeroValuesInArray(this.buckets)},e.prototype.getTotalElementCount=function(){for(var t=0,e=0;e<this.buckets.length;e++)void 0!==this.buckets[e]&&(t+=this.buckets[e].length);return t},e}();t.CompressorSimpleHashTable=e}(o||(o={})),function(t){var e=function(){function e(){this.MaximumMatchDistance=32767,this.outputPosition=0}return e.prototype.decompressBlockToString=function(e){return e=t.BufferTools.convertToUint8ArrayIfNeeded(e),t.decodeUTF8(this.decompressBlock(e))},e.prototype.decompressBlock=function(e){this.inputBufferRemainder&&(e=t.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,e]),this.inputBufferRemainder=void 0);for(var n=this.cropOutputBufferToWindowAndInitialize(Math.max(4*e.length,1024)),r=0,o=e.length;r<o;r++){var i=e[r];if(i>>>6==3){var a=i>>>5;if(r==o-1||r==o-2&&7==a){this.inputBufferRemainder=e.subarray(r);break}if(e[r+1]>>>7==1)this.outputByte(i);else{var s=31&i,u=void 0;6==a?(u=e[r+1],r+=1):(u=e[r+1]<<8|e[r+2],r+=2);for(var l=this.outputPosition-u,c=0;c<s;c++)this.outputByte(this.outputBuffer[l+c])}}else this.outputByte(i)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),t.CompressionCommon.getCroppedBuffer(this.outputBuffer,n,this.outputPosition-n)},e.prototype.outputByte=function(e){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=t.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=e},e.prototype.cropOutputBufferToWindowAndInitialize=function(e){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(e),0;var n=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=t.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-n,n,e),this.outputPosition=n,this.outputBufferRemainder){for(var r=0;r<this.outputBufferRemainder.length;r++)this.outputByte(this.outputBufferRemainder[r]);this.outputBufferRemainder=void 0}return n},e.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var t=1;t<=4&&this.outputPosition-t>=0;t++){var e=this.outputBuffer[this.outputPosition-t];if(t<4&&e>>>3==30||t<3&&e>>>4==14||t<2&&e>>>5==6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-t,this.outputPosition),void(this.outputPosition-=t)}},e}();t.Decompressor=e}(o||(o={})),function(t){!function(e){!function(e){var n=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),r=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]);e.encode=function(n){return n&&0!=n.length?t.runningInNodeJS()?t.BufferTools.uint8ArrayToBuffer(n).toString("base64"):e.encodeWithJS(n):""},e.decode=function(n){return n?t.runningInNodeJS()?t.BufferTools.bufferToUint8Array(Buffer.from(n,"base64")):e.decodeWithJS(n):new Uint8Array(0)},e.encodeWithJS=function(e,r){if(void 0===r&&(r=!0),!e||0==e.length)return"";for(var o,i=n,a=new t.StringBuilder,s=0,u=e.length;s<u;s+=3)s<=u-3?(o=e[s]<<16|e[s+1]<<8|e[s+2],a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),a.appendCharCode(i[o>>>6&63]),a.appendCharCode(i[63&o]),o=0):s===u-2?(o=e[s]<<16|e[s+1]<<8,a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),a.appendCharCode(i[o>>>6&63]),r&&a.appendCharCode(61)):s===u-1&&(o=e[s]<<16,a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),r&&(a.appendCharCode(61),a.appendCharCode(61)));return a.getOutputString()},e.decodeWithJS=function(t,e){if(!t||0==t.length)return new Uint8Array(0);var n=t.length%4;if(1===n)throw new Error("Invalid Base64 string: length % 4 == 1");2===n?t+="==":3===n&&(t+="="),e||(e=new Uint8Array(t.length));for(var o=0,i=t.length,a=0;a<i;a+=4){var s=r[t.charCodeAt(a)]<<18|r[t.charCodeAt(a+1)]<<12|r[t.charCodeAt(a+2)]<<6|r[t.charCodeAt(a+3)];e[o++]=s>>>16&255,e[o++]=s>>>8&255,e[o++]=255&s}return 61==t.charCodeAt(i-1)&&o--,61==t.charCodeAt(i-2)&&o--,e.subarray(0,o)}}(e.Base64||(e.Base64={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(e){!function(e){e.encode=function(e){if(null==e)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===e.length)return"";for(var n=e.length,r=new t.StringBuilder,o=0,i=1,a=0;a<n;a+=2){var s=void 0;s=a==n-1?e[a]<<8:e[a]<<8|e[a+1],r.appendCharCode(o<<16-i|s>>>i),o=s&(1<<i)-1,15===i?(r.appendCharCode(o),o=0,i=1):i+=1,a>=n-2&&r.appendCharCode(o<<16-i)}return r.appendCharCode(32768|n%2),r.getOutputString()},e.decode=function(t){if("string"!=typeof t)throw new TypeError("BinaryString.decode: invalid input type");if(""==t)return new Uint8Array(0);for(var e=new Uint8Array(3*t.length),n=0,r=function(t){e[n++]=t>>>8,e[n++]=255&t},o=0,i=0,a=0;a<t.length;a++){var s=t.charCodeAt(a);s>=32768?(32769==s&&n--,i=0):(0==i?o=s:(r(o<<i|s>>>15-i),o=s&(1<<15-i)-1),15==i?i=0:i+=1)}return e.subarray(0,n)}}(e.BinaryString||(e.BinaryString={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(t){!function(t){t.encodeFromString=function(t,e){var n=t.charCodeAt(e);if(n<55296||n>56319)return n;var r=t.charCodeAt(e+1);if(r>=56320&&r<=57343)return r-56320+(n-55296<<10)+65536;throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(n,", followed by ").concat(r,", which is not a trailing surrogate character code."))},t.decodeToString=function(t){if(t<=65535)return String.fromCharCode(t);if(t<=1114111)return String.fromCharCode(55296+(t-65536>>>10),56320+(t-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(t," cannot be encoded in UTF-16"))}}(t.CodePoint||(t.CodePoint={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(t){!function(t){var e=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];t.encode=function(t){for(var n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n.join(" ")}}(t.DecimalString||(t.DecimalString={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(t){!function(e){e.encode=function(e){return t.BinaryString.encode(e).replace(/\0/g,"耂")},e.decode=function(e){return t.BinaryString.decode(e.replace(/\u8002/g,"\0"))}}(t.StorageBinaryString||(t.StorageBinaryString={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(e){!function(n){var r,o;n.encode=function(e){return e&&0!=e.length?t.runningInNodeJS()?t.BufferTools.bufferToUint8Array(Buffer.from(e,"utf8")):n.createNativeTextEncoderAndDecoderIfAvailable()?r.encode(e):n.encodeWithJS(e):new Uint8Array(0)},n.decode=function(e){return e&&0!=e.length?t.runningInNodeJS()?t.BufferTools.uint8ArrayToBuffer(e).toString("utf8"):n.createNativeTextEncoderAndDecoderIfAvailable()?o.decode(e):n.decodeWithJS(e):""},n.encodeWithJS=function(t,n){if(!t||0==t.length)return new Uint8Array(0);n||(n=new Uint8Array(4*t.length));for(var r=0,o=0;o<t.length;o++){var i=e.CodePoint.encodeFromString(t,o);if(i<=127)n[r++]=i;else if(i<=2047)n[r++]=192|i>>>6,n[r++]=128|63&i;else if(i<=65535)n[r++]=224|i>>>12,n[r++]=128|i>>>6&63,n[r++]=128|63&i;else{if(!(i<=1114111))throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");n[r++]=240|i>>>18,n[r++]=128|i>>>12&63,n[r++]=128|i>>>6&63,n[r++]=128|63&i,o++}}return n.subarray(0,r)},n.decodeWithJS=function(e,n,r){if(void 0===n&&(n=0),!e||0==e.length)return"";void 0===r&&(r=e.length);for(var o,i,a=new t.StringBuilder,s=n,u=r;s<u;){if((i=e[s])>>>7==0)o=i,s+=1;else if(i>>>5==6){if(s+1>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(31&i)<<6|63&e[s+1],s+=2}else if(i>>>4==14){if(s+2>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(15&i)<<12|(63&e[s+1])<<6|63&e[s+2],s+=3}else{if(i>>>3!=30)throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+s);if(s+3>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(7&i)<<18|(63&e[s+1])<<12|(63&e[s+2])<<6|63&e[s+3],s+=4}a.appendCodePoint(o)}return a.getOutputString()},n.createNativeTextEncoderAndDecoderIfAvailable=function(){return!!r||"function"==typeof TextEncoder&&(r=new TextEncoder("utf-8"),o=new TextDecoder("utf-8"),!0)}}(e.UTF8||(e.UTF8={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){t.compress=function(e,n){if(void 0===n&&(n={}),null==e)throw new TypeError("compress: undefined or null input received");var r=t.CompressionCommon.detectCompressionSourceEncoding(e);n=t.ObjectTools.override({inputEncoding:r,outputEncoding:"ByteArray"},n);var o=(new t.Compressor).compressBlock(e);return t.CompressionCommon.encodeCompressedBytes(o,n.outputEncoding)},t.decompress=function(e,n){if(void 0===n&&(n={}),null==e)throw new TypeError("decompress: undefined or null input received");n=t.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},n);var r=t.CompressionCommon.decodeCompressedBytes(e,n.inputEncoding),o=(new t.Decompressor).decompressBlock(r);return t.CompressionCommon.encodeDecompressedBytes(o,n.outputEncoding)},t.compressAsync=function(e,n,r){var o;null==r&&(r=function(){});try{o=t.CompressionCommon.detectCompressionSourceEncoding(e)}catch(t){return void r(void 0,t)}n=t.ObjectTools.override({inputEncoding:o,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},n),t.enqueueImmediate((function(){n.useWebWorker&&t.WebWorker.createGlobalWorkerIfNeeded()?t.WebWorker.compressAsync(e,n,r):t.AsyncCompressor.compressAsync(e,n,r)}))},t.decompressAsync=function(e,n,r){if(null==r&&(r=function(){}),null!=e){n=t.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},n);var o=t.BufferTools.convertToUint8ArrayIfNeeded(e);t.EventLoop.enqueueImmediate((function(){n.useWebWorker&&t.WebWorker.createGlobalWorkerIfNeeded()?t.WebWorker.decompressAsync(o,n,r):t.AsyncDecompressor.decompressAsync(e,n,r)}))}else r(void 0,new TypeError("decompressAsync: undefined or null input received"))},t.createCompressionStream=function(){return t.AsyncCompressor.createCompressionStream()},t.createDecompressionStream=function(){return t.AsyncDecompressor.createDecompressionStream()},t.encodeUTF8=function(e){return t.Encoding.UTF8.encode(e)},t.decodeUTF8=function(e){return t.Encoding.UTF8.decode(e)},t.encodeBase64=function(e){return t.Encoding.Base64.encode(e)},t.decodeBase64=function(e){return t.Encoding.Base64.decode(e)},t.encodeBinaryString=function(e){return t.Encoding.BinaryString.encode(e)},t.decodeBinaryString=function(e){return t.Encoding.BinaryString.decode(e)},t.encodeStorageBinaryString=function(e){return t.Encoding.StorageBinaryString.encode(e)},t.decodeStorageBinaryString=function(e){return t.Encoding.StorageBinaryString.decode(e)}}(o||(o={}))},374:(t,e,n)=>{const{AbortError:r,codes:o}=n(141),{isNodeStream:i,isWebStream:a,kControllerErrorFunction:s}=n(132),u=n(86),{ERR_INVALID_ARG_TYPE:l}=o;t.exports.addAbortSignal=function(e,n){if(((t,e)=>{if("object"!=typeof t||!("aborted"in t))throw new l(e,"AbortSignal",t)})(e,"signal"),!i(n)&&!a(n))throw new l("stream",["ReadableStream","WritableStream","Stream"],n);return t.exports.addAbortSignalNoValidate(e,n)},t.exports.addAbortSignalNoValidate=function(t,e){if("object"!=typeof t||!("aborted"in t))return e;const n=i(e)?()=>{e.destroy(new r(void 0,{cause:t.reason}))}:()=>{e[s](new r(void 0,{cause:t.reason}))};return t.aborted?n():(t.addEventListener("abort",n),u(e,(()=>t.removeEventListener("abort",n)))),e}},616:(t,e,n)=>{const{StringPrototypeSlice:r,SymbolIterator:o,TypedArrayPrototypeSet:i,Uint8Array:a}=n(191),{Buffer:s}=n(485),{inspect:u}=n(775);t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}unshift(t){const e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}shift(){if(0===this.length)return;const t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(0===this.length)return"";let e=this.head,n=""+e.data;for(;null!==(e=e.next);)n+=t+e.data;return n}concat(t){if(0===this.length)return s.alloc(0);const e=s.allocUnsafe(t>>>0);let n=this.head,r=0;for(;n;)i(e,n.data,r),r+=n.data.length,n=n.next;return e}consume(t,e){const n=this.head.data;if(t<n.length){const e=n.slice(0,t);return this.head.data=n.slice(t),e}return t===n.length?this.shift():e?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[o](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let e="",n=this.head,o=0;do{const i=n.data;if(!(t>i.length)){t===i.length?(e+=i,++o,n.next?this.head=n.next:this.head=this.tail=null):(e+=r(i,0,t),this.head=n,n.data=r(i,t));break}e+=i,t-=i.length,++o}while(null!==(n=n.next));return this.length-=o,e}_getBuffer(t){const e=s.allocUnsafe(t),n=t;let r=this.head,o=0;do{const s=r.data;if(!(t>s.length)){t===s.length?(i(e,s,n-t),++o,r.next?this.head=r.next:this.head=this.tail=null):(i(e,new a(s.buffer,s.byteOffset,t),n-t),this.head=r,r.data=s.slice(t));break}i(e,s,n-t),t-=s.length,++o}while(null!==(r=r.next));return this.length-=o,e}[Symbol.for("nodejs.util.inspect.custom")](t,e){return u(this,{...e,depth:0,customInspect:!1})}}},818:(t,e,n)=>{const{pipeline:r}=n(754),o=n(182),{destroyer:i}=n(230),{isNodeStream:a,isReadable:s,isWritable:u,isWebStream:l,isTransformStream:c,isWritableStream:f,isReadableStream:d}=n(132),{AbortError:h,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=n(141),y=n(86);t.exports=function(...t){if(0===t.length)throw new g("streams");if(1===t.length)return o.from(t[0]);const e=[...t];if("function"==typeof t[0]&&(t[0]=o.from(t[0])),"function"==typeof t[t.length-1]){const e=t.length-1;t[e]=o.from(t[e])}for(let n=0;n<t.length;++n)if(a(t[n])||l(t[n])){if(n<t.length-1&&!(s(t[n])||d(t[n])||c(t[n])))throw new p(`streams[${n}]`,e[n],"must be readable");if(n>0&&!(u(t[n])||f(t[n])||c(t[n])))throw new p(`streams[${n}]`,e[n],"must be writable")}let n,m,v,b,w;const _=t[0],E=r(t,(function(t){const e=b;b=null,e?e(t):t?w.destroy(t):A||S||w.destroy()})),S=!!(u(_)||f(_)||c(_)),A=!!(s(E)||d(E)||c(E));if(w=new o({writableObjectMode:!(null==_||!_.writableObjectMode),readableObjectMode:!(null==E||!E.writableObjectMode),writable:S,readable:A}),S){if(a(_))w._write=function(t,e,r){_.write(t,e)?r():n=r},w._final=function(t){_.end(),m=t},_.on("drain",(function(){if(n){const t=n;n=null,t()}}));else if(l(_)){const t=(c(_)?_.writable:_).getWriter();w._write=async function(e,n,r){try{await t.ready,t.write(e).catch((()=>{})),r()}catch(t){r(t)}},w._final=async function(e){try{await t.ready,t.close().catch((()=>{})),m=e}catch(t){e(t)}}}const t=c(E)?E.readable:E;y(t,(()=>{if(m){const t=m;m=null,t()}}))}if(A)if(a(E))E.on("readable",(function(){if(v){const t=v;v=null,t()}})),E.on("end",(function(){w.push(null)})),w._read=function(){for(;;){const t=E.read();if(null===t)return void(v=w._read);if(!w.push(t))return}};else if(l(E)){const t=(c(E)?E.readable:E).getReader();w._read=async function(){for(;;)try{const{value:e,done:n}=await t.read();if(!w.push(e))return;if(n)return void w.push(null)}catch{return}}}return w._destroy=function(t,e){t||null===b||(t=new h),v=null,n=null,m=null,null===b?e(t):(b=e,a(E)&&i(E,t))},w}},230:(t,e,n)=>{const r=n(533),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=n(141),{Symbol:s}=n(191),{kDestroyed:u,isDestroyed:l,isFinished:c,isServerRequest:f}=n(132),d=s("kDestroy"),h=s("kConstruct");function p(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function g(t,e,n){let o=!1;function i(e){if(o)return;o=!0;const i=t._readableState,a=t._writableState;p(e,a,i),a&&(a.closed=!0),i&&(i.closed=!0),"function"==typeof n&&n(e),e?r.nextTick(y,t,e):r.nextTick(m,t)}try{t._destroy(e||null,i)}catch(e){i(e)}}function y(t,e){v(t,e),m(t)}function m(t){const e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(null!=n&&n.emitClose||null!=e&&e.emitClose)&&t.emit("close")}function v(t,e){const n=t._readableState,r=t._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function b(t,e,n){const o=t._readableState,i=t._writableState;if(null!=i&&i.destroyed||null!=o&&o.destroyed)return this;null!=o&&o.autoDestroy||null!=i&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),o&&!o.errored&&(o.errored=e),n?r.nextTick(v,t,e):v(t,e))}function w(t){let e=!1;function n(n){if(e)return void b(t,null!=n?n:new i);e=!0;const o=t._readableState,a=t._writableState,s=a||o;o&&(o.constructed=!0),a&&(a.constructed=!0),s.destroyed?t.emit(d,n):n?b(t,n,!0):r.nextTick(_,t)}try{t._construct((t=>{r.nextTick(n,t)}))}catch(t){r.nextTick(n,t)}}function _(t){t.emit(h)}function E(t){return(null==t?void 0:t.setHeader)&&"function"==typeof t.abort}function S(t){t.emit("close")}function A(t,e){t.emit("error",e),r.nextTick(S,t)}t.exports={construct:function(t,e){if("function"!=typeof t._construct)return;const n=t._readableState,o=t._writableState;n&&(n.constructed=!1),o&&(o.constructed=!1),t.once(h,e),t.listenerCount(h)>1||r.nextTick(w,t)},destroyer:function(t,e){t&&!l(t)&&(e||c(t)||(e=new a),f(t)?(t.socket=null,t.destroy(e)):E(t)?t.abort():E(t.req)?t.req.abort():"function"==typeof t.destroy?t.destroy(e):"function"==typeof t.close?t.close():e?r.nextTick(A,t,e):r.nextTick(S,t),t.destroyed||(t[u]=!0))},destroy:function(t,e){const n=this._readableState,r=this._writableState,i=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof e&&e(),this):(p(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?g(this,t,e):this.once(d,(function(n){g(this,o(n,t),e)})),this)},undestroy:function(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=!1===t.readable,t.endEmitted=!1===t.readable),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=!1===e.writable,e.ending=!1===e.writable,e.finished=!1===e.writable)},errorOrDestroy:b}},182:(t,e,n)=>{const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:i,ObjectSetPrototypeOf:a}=n(191);t.exports=l;const s=n(858),u=n(373);a(l.prototype,s.prototype),a(l,s);{const t=i(u.prototype);for(let e=0;e<t.length;e++){const n=t[e];l.prototype[n]||(l.prototype[n]=u.prototype[n])}}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),u.call(this,t),t?(this.allowHalfOpen=!1!==t.allowHalfOpen,!1===t.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===t.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let c,f;function d(){return void 0===c&&(c={}),c}r(l.prototype,{writable:{__proto__:null,...o(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(u.prototype,"writableLength")},writableFinished:{__proto__:null,...o(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}}),l.fromWeb=function(t,e){return d().newStreamDuplexFromReadableWritablePair(t,e)},l.toWeb=function(t){return d().newReadableWritablePairFromDuplex(t)},l.from=function(t){return f||(f=n(749)),f(t,"body")}},749:(t,e,n)=>{const r=n(533),o=n(485),{isReadable:i,isWritable:a,isIterable:s,isNodeStream:u,isReadableNodeStream:l,isWritableNodeStream:c,isDuplexNodeStream:f}=n(132),d=n(86),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g}}=n(141),{destroyer:y}=n(230),m=n(182),v=n(858),{createDeferredPromise:b}=n(775),w=n(913),_=globalThis.Blob||o.Blob,E=void 0!==_?function(t){return t instanceof _}:function(t){return!1},S=globalThis.AbortController||n(876).AbortController,{FunctionPrototypeCall:A}=n(191);class I extends m{constructor(t){super(t),!1===(null==t?void 0:t.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==t?void 0:t.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function T(t){const e=t.readable&&"function"!=typeof t.readable.read?v.wrap(t.readable):t.readable,n=t.writable;let r,o,s,u,l,c=!!i(e),f=!!a(n);function p(t){const e=u;u=null,e?e(t):t&&l.destroy(t)}return l=new I({readableObjectMode:!(null==e||!e.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:c,writable:f}),f&&(d(n,(t=>{f=!1,t&&y(e,t),p(t)})),l._write=function(t,e,o){n.write(t,e)?o():r=o},l._final=function(t){n.end(),o=t},n.on("drain",(function(){if(r){const t=r;r=null,t()}})),n.on("finish",(function(){if(o){const t=o;o=null,t()}}))),c&&(d(e,(t=>{c=!1,t&&y(e,t),p(t)})),e.on("readable",(function(){if(s){const t=s;s=null,t()}})),e.on("end",(function(){l.push(null)})),l._read=function(){for(;;){const t=e.read();if(null===t)return void(s=l._read);if(!l.push(t))return}}),l._destroy=function(t,i){t||null===u||(t=new h),s=null,r=null,o=null,null===u?i(t):(u=i,y(n,t),y(e,t))},l}t.exports=function t(e,n){if(f(e))return e;if(l(e))return T({readable:e});if(c(e))return T({writable:e});if(u(e))return T({writable:!1,readable:!1});if("function"==typeof e){const{value:t,write:o,final:i,destroy:a}=function(t){let{promise:e,resolve:n}=b();const o=new S,i=o.signal,a=t(async function*(){for(;;){const t=e;e=null;const{chunk:o,done:a,cb:s}=await t;if(r.nextTick(s),a)return;if(i.aborted)throw new h(void 0,{cause:i.reason});({promise:e,resolve:n}=b()),yield o}}(),{signal:i});return{value:a,write(t,e,r){const o=n;n=null,o({chunk:t,done:!1,cb:r})},final(t){const e=n;n=null,e({done:!0,cb:t})},destroy(t,e){o.abort(),e(t)}}}(e);if(s(t))return w(I,t,{objectMode:!0,write:o,final:i,destroy:a});const u=null==t?void 0:t.then;if("function"==typeof u){let e;const n=A(u,t,(t=>{if(null!=t)throw new g("nully","body",t)}),(t=>{y(e,t)}));return e=new I({objectMode:!0,readable:!1,write:o,final(t){i((async()=>{try{await n,r.nextTick(t,null)}catch(e){r.nextTick(t,e)}}))},destroy:a})}throw new g("Iterable, AsyncIterable or AsyncFunction",n,t)}if(E(e))return t(e.arrayBuffer());if(s(e))return w(I,e,{objectMode:!0,writable:!1});if("object"==typeof(null==e?void 0:e.writable)||"object"==typeof(null==e?void 0:e.readable)){return T({readable:null!=e&&e.readable?l(null==e?void 0:e.readable)?null==e?void 0:e.readable:t(e.readable):void 0,writable:null!=e&&e.writable?c(null==e?void 0:e.writable)?null==e?void 0:e.writable:t(e.writable):void 0})}const o=null==e?void 0:e.then;if("function"==typeof o){let t;return A(o,e,(e=>{null!=e&&t.push(e),t.push(null)}),(e=>{y(t,e)})),t=new I({objectMode:!0,writable:!1,read(){}})}throw new p(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)}},86:(t,e,n)=>{const r=n(533),{AbortError:o,codes:i}=n(141),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=i,{kEmptyObject:u,once:l}=n(775),{validateAbortSignal:c,validateFunction:f,validateObject:d,validateBoolean:h}=n(904),{Promise:p,PromisePrototypeThen:g}=n(191),{isClosed:y,isReadable:m,isReadableNodeStream:v,isReadableStream:b,isReadableFinished:w,isReadableErrored:_,isWritable:E,isWritableNodeStream:S,isWritableStream:A,isWritableFinished:I,isWritableErrored:T,isNodeStream:R,willEmitClose:x,kIsClosedPromise:C}=n(132);const B=()=>{};function k(t,e,n){var i,h;if(2===arguments.length?(n=e,e=u):null==e?e=u:d(e,"options"),f(n,"callback"),c(e.signal,"options.signal"),n=l(n),b(t)||A(t))return function(t,e,n){let i=!1,a=B;if(e.signal)if(a=()=>{i=!0,n.call(t,new o(void 0,{cause:e.signal.reason}))},e.signal.aborted)r.nextTick(a);else{const r=n;n=l(((...n)=>{e.signal.removeEventListener("abort",a),r.apply(t,n)})),e.signal.addEventListener("abort",a)}const s=(...e)=>{i||r.nextTick((()=>n.apply(t,e)))};return g(t[C].promise,s,s),B}(t,e,n);if(!R(t))throw new a("stream",["ReadableStream","WritableStream","Stream"],t);const p=null!==(i=e.readable)&&void 0!==i?i:v(t),k=null!==(h=e.writable)&&void 0!==h?h:S(t),L=t._writableState,O=t._readableState,U=()=>{t.writable||M()};let j=x(t)&&v(t)===p&&S(t)===k,N=I(t,!1);const M=()=>{N=!0,t.destroyed&&(j=!1),(!j||t.readable&&!p)&&(p&&!P||n.call(t))};let P=w(t,!1);const W=()=>{P=!0,t.destroyed&&(j=!1),(!j||t.writable&&!k)&&(k&&!N||n.call(t))},$=e=>{n.call(t,e)};let D=y(t);const F=()=>{D=!0;const e=T(t)||_(t);return e&&"boolean"!=typeof e?n.call(t,e):p&&!P&&v(t,!0)&&!w(t,!1)?n.call(t,new s):!k||N||I(t,!1)?void n.call(t):n.call(t,new s)},z=()=>{D=!0;const e=T(t)||_(t);if(e&&"boolean"!=typeof e)return n.call(t,e);n.call(t)},q=()=>{t.req.on("finish",M)};!function(t){return t.setHeader&&"function"==typeof t.abort}(t)?k&&!L&&(t.on("end",U),t.on("close",U)):(t.on("complete",M),j||t.on("abort",F),t.req?q():t.on("request",q)),j||"boolean"!=typeof t.aborted||t.on("aborted",F),t.on("end",W),t.on("finish",M),!1!==e.error&&t.on("error",$),t.on("close",F),D?r.nextTick(F):null!=L&&L.errorEmitted||null!=O&&O.errorEmitted?j||r.nextTick(z):(p||j&&!m(t)||!N&&!1!==E(t))&&(k||j&&!E(t)||!P&&!1!==m(t))?O&&t.req&&t.aborted&&r.nextTick(z):r.nextTick(z);const H=()=>{n=B,t.removeListener("aborted",F),t.removeListener("complete",M),t.removeListener("abort",F),t.removeListener("request",q),t.req&&t.req.removeListener("finish",M),t.removeListener("end",U),t.removeListener("close",U),t.removeListener("finish",M),t.removeListener("end",W),t.removeListener("error",$),t.removeListener("close",F)};if(e.signal&&!D){const i=()=>{const r=n;H(),r.call(t,new o(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)r.nextTick(i);else{const r=n;n=l(((...n)=>{e.signal.removeEventListener("abort",i),r.apply(t,n)})),e.signal.addEventListener("abort",i)}}return H}t.exports=k,t.exports.finished=function(t,e){var n;let r=!1;return null===e&&(e=u),null!==(n=e)&&void 0!==n&&n.cleanup&&(h(e.cleanup,"cleanup"),r=e.cleanup),new p(((n,o)=>{const i=k(t,e,(t=>{r&&i(),t?o(t):n()}))}))}},913:(t,e,n)=>{const r=n(533),{PromisePrototypeThen:o,SymbolAsyncIterator:i,SymbolIterator:a}=n(191),{Buffer:s}=n(485),{ERR_INVALID_ARG_TYPE:u,ERR_STREAM_NULL_VALUES:l}=n(141).codes;t.exports=function(t,e,n){let c,f;if("string"==typeof e||e instanceof s)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});if(e&&e[i])f=!0,c=e[i]();else{if(!e||!e[a])throw new u("iterable",["Iterable"],e);f=!1,c=e[a]()}const d=new t({objectMode:!0,highWaterMark:1,...n});let h=!1;return d._read=function(){h||(h=!0,async function(){for(;;){try{const{value:t,done:e}=f?await c.next():c.next();if(e)d.push(null);else{const e=t&&"function"==typeof t.then?await t:t;if(null===e)throw h=!1,new l;if(d.push(e))continue;h=!1}}catch(t){d.destroy(t)}break}}())},d._destroy=function(t,e){o(async function(t){const e=null!=t,n="function"==typeof c.throw;if(e&&n){const{value:e,done:n}=await c.throw(t);if(await e,n)return}if("function"==typeof c.return){const{value:t}=await c.return();await t}}(t),(()=>r.nextTick(e,t)),(n=>r.nextTick(e,n||t)))},d}},200:(t,e,n)=>{const{ArrayIsArray:r,ObjectSetPrototypeOf:o}=n(191),{EventEmitter:i}=n(465);function a(t){i.call(this,t)}function s(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?r(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}o(a.prototype,i.prototype),o(a,i),a.prototype.pipe=function(t,e){const n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",u),n.on("close",l));let a=!1;function u(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){f(),0===i.listenerCount(this,"error")&&this.emit("error",t)}function f(){n.removeListener("data",r),t.removeListener("drain",o),n.removeListener("end",u),n.removeListener("close",l),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",f),n.removeListener("close",f),t.removeListener("close",f)}return s(n,"error",c),s(t,"error",c),n.on("end",f),n.on("close",f),t.on("close",f),t.emit("pipe",n),t},t.exports={Stream:a,prependListener:s}},554:(t,e,n)=>{const r=globalThis.AbortController||n(876).AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:u}=n(141),{validateAbortSignal:l,validateInteger:c,validateObject:f}=n(904),d=n(191).Symbol("kWeak"),{finished:h}=n(86),p=n(818),{addAbortSignalNoValidate:g}=n(374),{isWritable:y,isNodeStream:m}=n(132),{ArrayPrototypePush:v,MathFloor:b,Number:w,NumberIsNaN:_,Promise:E,PromiseReject:S,PromisePrototypeThen:A,Symbol:I}=n(191),T=I("kEmpty"),R=I("kEof");function x(t,e){if("function"!=typeof t)throw new i("fn",["Function","AsyncFunction"],t);null!=e&&f(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");let n=1;return null!=(null==e?void 0:e.concurrency)&&(n=b(e.concurrency)),c(n,"concurrency",1),async function*(){var o,i;const a=new r,s=this,l=[],c=a.signal,f={signal:c},d=()=>a.abort();let h,p;null!=e&&null!==(o=e.signal)&&void 0!==o&&o.aborted&&d(),null==e||null===(i=e.signal)||void 0===i||i.addEventListener("abort",d);let g=!1;function y(){g=!0}!async function(){try{for await(let e of s){var r;if(g)return;if(c.aborted)throw new u;try{e=t(e,f)}catch(t){e=S(t)}e!==T&&("function"==typeof(null===(r=e)||void 0===r?void 0:r.catch)&&e.catch(y),l.push(e),h&&(h(),h=null),!g&&l.length&&l.length>=n&&await new E((t=>{p=t})))}l.push(R)}catch(t){const e=S(t);A(e,void 0,y),l.push(e)}finally{var o;g=!0,h&&(h(),h=null),null==e||null===(o=e.signal)||void 0===o||o.removeEventListener("abort",d)}}();try{for(;;){for(;l.length>0;){const t=await l[0];if(t===R)return;if(c.aborted)throw new u;t!==T&&(yield t),l.shift(),p&&(p(),p=null)}await new E((t=>{h=t}))}}finally{a.abort(),g=!0,p&&(p(),p=null)}}.call(this)}async function C(t,e=void 0){for await(const n of B.call(this,t,e))return!0;return!1}function B(t,e){if("function"!=typeof t)throw new i("fn",["Function","AsyncFunction"],t);return x.call(this,(async function(e,n){return await t(e,n)?e:T}),e)}class k extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function L(t){if(t=w(t),_(t))return 0;if(t<0)throw new s("number",">= 0",t);return t}t.exports.streamReturningOperators={asIndexedPairs:function(t=void 0){return null!=t&&f(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),async function*(){let e=0;for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new u({cause:t.signal.reason});yield[e++,r]}}.call(this)},drop:function(t,e=void 0){return null!=e&&f(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),t=L(t),async function*(){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new u;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new u;t--<=0&&(yield n)}}.call(this)},filter:B,flatMap:function(t,e){const n=x.call(this,t,e);return async function*(){for await(const t of n)yield*t}.call(this)},map:x,take:function(t,e=void 0){return null!=e&&f(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),t=L(t),async function*(){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new u;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new u;if(!(t-- >0))return;yield n}}.call(this)},compose:function(t,e){if(null!=e&&f(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),m(t)&&!y(t))throw new o("stream",t,"must be writable");const n=p(this,t);return null!=e&&e.signal&&g(e.signal,n),n}},t.exports.promiseReturningOperators={every:async function(t,e=void 0){if("function"!=typeof t)throw new i("fn",["Function","AsyncFunction"],t);return!await C.call(this,(async(...e)=>!await t(...e)),e)},forEach:async function(t,e){if("function"!=typeof t)throw new i("fn",["Function","AsyncFunction"],t);for await(const n of x.call(this,(async function(e,n){return await t(e,n),T}),e));},reduce:async function(t,e,n){var o;if("function"!=typeof t)throw new i("reducer",["Function","AsyncFunction"],t);null!=n&&f(n,"options"),null!=(null==n?void 0:n.signal)&&l(n.signal,"options.signal");let a=arguments.length>1;if(null!=n&&null!==(o=n.signal)&&void 0!==o&&o.aborted){const t=new u(void 0,{cause:n.signal.reason});throw this.once("error",(()=>{})),await h(this.destroy(t)),t}const s=new r,c=s.signal;if(null!=n&&n.signal){const t={once:!0,[d]:this};n.signal.addEventListener("abort",(()=>s.abort()),t)}let p=!1;try{for await(const r of this){var g;if(p=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new u;a?e=await t(e,r,{signal:c}):(e=r,a=!0)}if(!p&&!a)throw new k}finally{s.abort()}return e},toArray:async function(t){null!=t&&f(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");const e=[];for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new u(void 0,{cause:t.signal.reason});v(e,r)}return e},some:C,find:async function(t,e){for await(const n of B.call(this,t,e))return n}}},467:(t,e,n)=>{const{ObjectSetPrototypeOf:r}=n(191);t.exports=i;const o=n(210);function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}r(i.prototype,o.prototype),r(i,o),i.prototype._transform=function(t,e,n){n(null,t)}},754:(t,e,n)=>{const r=n(533),{ArrayIsArray:o,Promise:i,SymbolAsyncIterator:a}=n(191),s=n(86),{once:u}=n(775),l=n(230),c=n(182),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:m}=n(141),{validateFunction:v,validateAbortSignal:b}=n(904),{isIterable:w,isReadable:_,isReadableNodeStream:E,isNodeStream:S,isTransformStream:A,isWebStream:I,isReadableStream:T,isReadableEnded:R}=n(132),x=globalThis.AbortController||n(876).AbortController;let C,B;function k(t,e,n){let r=!1;t.on("close",(()=>{r=!0}));return{destroy:e=>{r||(r=!0,l.destroyer(t,e||new g("pipe")))},cleanup:s(t,{readable:e,writable:n},(t=>{r=!t}))}}function L(t){if(w(t))return t;if(E(t))return async function*(t){B||(B=n(858));yield*B.prototype[a].call(t)}(t);throw new d("val",["Readable","Iterable","AsyncIterable"],t)}async function O(t,e,n,{end:r}){let o,a=null;const u=t=>{if(t&&(o=t),a){const t=a;a=null,t()}},l=()=>new i(((t,e)=>{o?e(o):a=()=>{o?e(o):t()}}));e.on("drain",u);const c=s(e,{readable:!1},u);try{e.writableNeedDrain&&await l();for await(const n of t)e.write(n)||await l();r&&e.end(),await l(),n()}catch(t){n(o!==t?f(o,t):t)}finally{c(),e.off("drain",u)}}async function U(t,e,n,{end:r}){A(e)&&(e=e.writable);const o=e.getWriter();try{for await(const e of t)await o.ready,o.write(e).catch((()=>{}));await o.ready,r&&await o.close(),n()}catch(t){try{await o.abort(t),n(t)}catch(t){n(t)}}}function j(t,e,i){if(1===t.length&&o(t[0])&&(t=t[0]),t.length<2)throw new p("streams");const a=new x,s=a.signal,u=null==i?void 0:i.signal,l=[];function f(){M(new m)}let g,y;b(u,"options.signal"),null==u||u.addEventListener("abort",f);const v=[];let R,B=0;function j(t){M(t,0==--B)}function M(t,n){if(!t||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=t),g||n){for(;v.length;)v.shift()(g);null==u||u.removeEventListener("abort",f),a.abort(),n&&(g||l.forEach((t=>t())),r.nextTick(e,g,y))}}for(let D=0;D<t.length;D++){const F=t[D],z=D<t.length-1,q=D>0,H=z||!1!==(null==i?void 0:i.end),V=D===t.length-1;if(S(F)){if(H){const{destroy:G,cleanup:J}=k(F,z,q);v.push(G),_(F)&&V&&l.push(J)}function P(t){t&&"AbortError"!==t.name&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code&&j(t)}F.on("error",P),_(F)&&V&&l.push((()=>{F.removeListener("error",P)}))}if(0===D)if("function"==typeof F){if(R=F({signal:s}),!w(R))throw new h("Iterable, AsyncIterable or Stream","source",R)}else R=w(F)||E(F)||A(F)?F:c.from(F);else if("function"==typeof F){var W;if(A(R))R=L(null===(W=R)||void 0===W?void 0:W.readable);else R=L(R);if(R=F(R,{signal:s}),z){if(!w(R,!0))throw new h("AsyncIterable",`transform[${D-1}]`,R)}else{var $;C||(C=n(467));const Y=new C({objectMode:!0}),K=null===($=R)||void 0===$?void 0:$.then;if("function"==typeof K)B++,K.call(R,(t=>{y=t,null!=t&&Y.write(t),H&&Y.end(),r.nextTick(j)}),(t=>{Y.destroy(t),r.nextTick(j,t)}));else if(w(R,!0))B++,O(R,Y,j,{end:H});else{if(!T(R)&&!A(R))throw new h("AsyncIterable or Promise","destination",R);{const Q=R.readable||R;B++,O(Q,Y,j,{end:H})}}R=Y;const{destroy:X,cleanup:Z}=k(R,!1,!0);v.push(X),V&&l.push(Z)}}else if(S(F)){if(E(R)){B+=2;const tt=N(R,F,j,{end:H});_(F)&&V&&l.push(tt)}else if(A(R)||T(R)){const et=R.readable||R;B++,O(et,F,j,{end:H})}else{if(!w(R))throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);B++,O(R,F,j,{end:H})}R=F}else if(I(F)){if(E(R))B++,U(L(R),F,j,{end:H});else if(T(R)||w(R))B++,U(R,F,j,{end:H});else{if(!A(R))throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);B++,U(R.readable,F,j,{end:H})}R=F}else R=c.from(F)}return(null!=s&&s.aborted||null!=u&&u.aborted)&&r.nextTick(f),R}function N(t,e,n,{end:o}){let i=!1;if(e.on("close",(()=>{i||n(new y)})),t.pipe(e,{end:!1}),o){function a(){i=!0,e.end()}R(t)?r.nextTick(a):t.once("end",a)}else n();return s(t,{readable:!0,writable:!1},(e=>{const r=t._readableState;e&&"ERR_STREAM_PREMATURE_CLOSE"===e.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?t.once("end",n).once("error",n):n(e)})),s(e,{readable:!1,writable:!0},n)}t.exports={pipelineImpl:j,pipeline:function(...t){return j(t,u(function(t){return v(t[t.length-1],"streams[stream.length - 1]"),t.pop()}(t)))}}},858:(t,e,n)=>{const r=n(533),{ArrayPrototypeIndexOf:o,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:u,ObjectKeys:l,ObjectSetPrototypeOf:c,Promise:f,SafeSet:d,SymbolAsyncIterator:h,Symbol:p}=n(191);t.exports=W,W.ReadableState=P;const{EventEmitter:g}=n(465),{Stream:y,prependListener:m}=n(200),{Buffer:v}=n(485),{addAbortSignal:b}=n(374),w=n(86);let _=n(775).debuglog("stream",(t=>{_=t}));const E=n(616),S=n(230),{getHighWaterMark:A,getDefaultHighWaterMark:I}=n(498),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:B,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:k}}=n(141),{validateObject:L}=n(904),O=p("kPaused"),{StringDecoder:U}=n(464),j=n(913);c(W.prototype,y.prototype),c(W,y);const N=()=>{},{errorOrDestroy:M}=S;function P(t,e,r){"boolean"!=typeof r&&(r=e instanceof n(182)),this.objectMode=!(!t||!t.objectMode),r&&(this.objectMode=this.objectMode||!(!t||!t.readableObjectMode)),this.highWaterMark=t?A(this,t,"readableHighWaterMark",r):I(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[O]=null,this.errorEmitted=!1,this.emitClose=!t||!1!==t.emitClose,this.autoDestroy=!t||!1!==t.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new U(t.encoding),this.encoding=t.encoding)}function W(t){if(!(this instanceof W))return new W(t);const e=this instanceof n(182);this._readableState=new P(t,this,e),t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&!e&&b(t.signal,this)),y.call(this,t),S.construct(this,(()=>{this._readableState.needReadable&&H(this,this._readableState)}))}function $(t,e,n,r){_("readableAddChunk",e);const o=t._readableState;let i;if(o.objectMode||("string"==typeof e?(n=n||o.defaultEncoding,o.encoding!==n&&(r&&o.encoding?e=v.from(e,n).toString(o.encoding):(e=v.from(e,n),n=""))):e instanceof v?n="":y._isUint8Array(e)?(e=y._uint8ArrayToBuffer(e),n=""):null!=e&&(i=new R("chunk",["string","Buffer","Uint8Array"],e))),i)M(t,i);else if(null===e)o.reading=!1,function(t,e){if(_("onEofChunk"),e.ended)return;if(e.decoder){const t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?z(t):(e.needReadable=!1,e.emittedReadable=!0,q(t))}(t,o);else if(o.objectMode||e&&e.length>0)if(r)if(o.endEmitted)M(t,new k);else{if(o.destroyed||o.errored)return!1;D(t,o,e,!0)}else if(o.ended)M(t,new B);else{if(o.destroyed||o.errored)return!1;o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?D(t,o,e,!1):H(t,o)):D(t,o,e,!1)}else r||(o.reading=!1,H(t,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function D(t,e,n,r){e.flowing&&0===e.length&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&z(t)),H(t,e)}W.prototype.destroy=S.destroy,W.prototype._undestroy=S.undestroy,W.prototype._destroy=function(t,e){e(t)},W.prototype[g.captureRejectionSymbol]=function(t){this.destroy(t)},W.prototype.push=function(t,e){return $(this,t,e,!1)},W.prototype.unshift=function(t,e){return $(this,t,e,!0)},W.prototype.isPaused=function(){const t=this._readableState;return!0===t[O]||!1===t.flowing},W.prototype.setEncoding=function(t){const e=new U(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const t of n)r+=e.write(t);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this};function F(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:a(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}function z(t){const e=t._readableState;_("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(q,t))}function q(t){const e=t._readableState;_("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||e.errored||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,K(t)}function H(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,r.nextTick(V,t,e))}function V(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){const n=e.length;if(_("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function G(t){const e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!1===e[O]?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function J(t){_("readable nexttick read 0"),t.read(0)}function Y(t,e){_("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),K(t),e.flowing&&!e.reading&&t.read(0)}function K(t){const e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function X(t,e){"function"!=typeof t.read&&(t=W.wrap(t,{objectMode:!0}));const n=async function*(t,e){let n,r=N;function o(e){this===t?(r(),r=N):r=e}t.on("readable",o);const i=w(t,{writable:!1},(t=>{n=t?T(n,t):null,r(),r=N}));try{for(;;){const e=t.destroyed?null:t.read();if(null!==e)yield e;else{if(n)throw n;if(null===n)return;await new f(o)}}}catch(t){throw n=T(n,t),n}finally{!n&&!1===(null==e?void 0:e.destroyOnReturn)||void 0!==n&&!t._readableState.autoDestroy?(t.off("readable",o),i()):S.destroyer(t,null)}}(t,e);return n.stream=t,n}function Z(t,e){if(0===e.length)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function Q(t){const e=t._readableState;_("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(tt,e,t))}function tt(t,e){if(_("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&0===t.length)if(t.endEmitted=!0,e.emit("end"),e.writable&&!1===e.allowHalfOpen)r.nextTick(et,e);else if(t.autoDestroy){const t=e._writableState;(!t||t.autoDestroy&&(t.finished||!1===t.writable))&&e.destroy()}}function et(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}let nt;function rt(){return void 0===nt&&(nt={}),nt}W.prototype.read=function(t){_("read",t),void 0===t?t=NaN:i(t)||(t=s(t,10));const e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=function(t){if(t>1073741824)throw new C("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,++t}(t)),0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?Q(this):z(this),null;if(0===(t=F(t,e))&&e.ended)return 0===e.length&&Q(this),null;let r,o=e.needReadable;if(_("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&(o=!0,_("length less than watermark",o)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)o=!1,_("reading, ended or constructing",o);else if(o){_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(t){M(this,t)}e.sync=!1,e.reading||(t=F(n,e))}return r=t>0?Z(t,e):null,null===r?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&Q(this)),null===r||e.errorEmitted||e.closeEmitted||(e.dataEmitted=!0,this.emit("data",r)),r},W.prototype._read=function(t){throw new x("_read()")},W.prototype.pipe=function(t,e){const n=this,o=this._readableState;1===o.pipes.length&&(o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new d(o.awaitDrainWriters?[o.awaitDrainWriters]:[]))),o.pipes.push(t),_("pipe count=%d opts=%j",o.pipes.length,e);const i=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?s:y;function a(e,r){_("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){_("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),u&&t.removeListener("drain",u);t.removeListener("error",h),t.removeListener("unpipe",a),n.removeListener("end",s),n.removeListener("end",y),n.removeListener("data",f),l=!0,u&&o.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}())}function s(){_("onend"),t.end()}let u;o.endEmitted?r.nextTick(i):n.once("end",i),t.on("unpipe",a);let l=!1;function c(){l||(1===o.pipes.length&&o.pipes[0]===t?(_("false write response, pause",0),o.awaitDrainWriters=t,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(t)&&(_("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(t)),n.pause()),u||(u=function(t,e){return function(){const n=t._readableState;n.awaitDrainWriters===e?(_("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(_("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!t.listenerCount("data")||t.resume()}}(n,t),t.on("drain",u))}function f(e){_("ondata");const n=t.write(e);_("dest.write",n),!1===n&&c()}function h(e){if(_("onerror",e),y(),t.removeListener("error",h),0===t.listenerCount("error")){const n=t._writableState||t._readableState;n&&!n.errorEmitted?M(t,e):t.emit("error",e)}}function p(){t.removeListener("finish",g),y()}function g(){_("onfinish"),t.removeListener("close",p),y()}function y(){_("unpipe"),n.unpipe(t)}return n.on("data",f),m(t,"error",h),t.once("close",p),t.once("finish",g),t.emit("pipe",n),!0===t.writableNeedDrain?o.flowing&&c():o.flowing||(_("pipe resume"),n.resume()),t},W.prototype.unpipe=function(t){const e=this._readableState;if(0===e.pipes.length)return this;if(!t){const t=e.pipes;e.pipes=[],this.pause();for(let e=0;e<t.length;e++)t[e].emit("unpipe",this,{hasUnpiped:!1});return this}const n=o(e.pipes,t);return-1===n||(e.pipes.splice(n,1),0===e.pipes.length&&this.pause(),t.emit("unpipe",this,{hasUnpiped:!1})),this},W.prototype.on=function(t,e){const n=y.prototype.on.call(this,t,e),o=this._readableState;return"data"===t?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===t&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,_("on readable",o.length,o.reading),o.length?z(this):o.reading||r.nextTick(J,this))),n},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(t,e){const n=y.prototype.removeListener.call(this,t,e);return"readable"===t&&r.nextTick(G,this),n},W.prototype.off=W.prototype.removeListener,W.prototype.removeAllListeners=function(t){const e=y.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(G,this),e},W.prototype.resume=function(){const t=this._readableState;return t.flowing||(_("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(Y,t,e))}(this,t)),t[O]=!1,this},W.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[O]=!0,this},W.prototype.wrap=function(t){let e=!1;t.on("data",(n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())})),t.on("end",(()=>{this.push(null)})),t.on("error",(t=>{M(this,t)})),t.on("close",(()=>{this.destroy()})),t.on("destroy",(()=>{this.destroy()})),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};const n=l(t);for(let e=1;e<n.length;e++){const r=n[e];void 0===this[r]&&"function"==typeof t[r]&&(this[r]=t[r].bind(t))}return this},W.prototype[h]=function(){return X(this)},W.prototype.iterator=function(t){return void 0!==t&&L(t,"options"),X(this,t)},u(W.prototype,{readable:{__proto__:null,get(){const t=this._readableState;return!(!t||!1===t.readable||t.destroyed||t.errorEmitted||t.endEmitted)},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),u(P.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[O]},set(t){this[O]=!!t}}}),W._fromList=Z,W.from=function(t,e){return j(W,t,e)},W.fromWeb=function(t,e){return rt().newStreamReadableFromReadableStream(t,e)},W.toWeb=function(t,e){return rt().newReadableStreamFromStreamReadable(t,e)},W.wrap=function(t,e){var n,r;return new W({objectMode:null===(n=null!==(r=t.readableObjectMode)&&void 0!==r?r:t.objectMode)||void 0===n||n,...e,destroy(e,n){S.destroyer(t,e),n(e)}}).wrap(t)}},498:(t,e,n)=>{const{MathFloor:r,NumberIsInteger:o}=n(191),{ERR_INVALID_ARG_VALUE:i}=n(141).codes;function a(t){return t?16:16384}t.exports={getHighWaterMark:function(t,e,n,s){const u=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,s,n);if(null!=u){if(!o(u)||u<0){throw new i(s?`options.${n}`:"options.highWaterMark",u)}return r(u)}return a(t.objectMode)},getDefaultHighWaterMark:a}},210:(t,e,n)=>{const{ObjectSetPrototypeOf:r,Symbol:o}=n(191);t.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:i}=n(141).codes,a=n(182),{getHighWaterMark:s}=n(498);r(l.prototype,a.prototype),r(l,a);const u=o("kCallback");function l(t){if(!(this instanceof l))return new l(t);const e=t?s(this,t,"readableHighWaterMark",!0):null;0===e&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),a.call(this,t),this._readableState.sync=!1,this[u]=null,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",f)}function c(t){"function"!=typeof this._flush||this.destroyed?(this.push(null),t&&t()):this._flush(((e,n)=>{e?t?t(e):this.destroy(e):(null!=n&&this.push(n),this.push(null),t&&t())}))}function f(){this._final!==c&&c.call(this)}l.prototype._final=c,l.prototype._transform=function(t,e,n){throw new i("_transform()")},l.prototype._write=function(t,e,n){const r=this._readableState,o=this._writableState,i=r.length;this._transform(t,e,((t,e)=>{t?n(t):(null!=e&&this.push(e),o.ended||i===r.length||r.length<r.highWaterMark?n():this[u]=n)}))},l.prototype._read=function(){if(this[u]){const t=this[u];this[u]=null,t()}}},132:(t,e,n)=>{const{Symbol:r,SymbolAsyncIterator:o,SymbolIterator:i,SymbolFor:a}=n(191),s=r("kDestroyed"),u=r("kIsErrored"),l=r("kIsReadable"),c=r("kIsDisturbed"),f=a("nodejs.webstream.isClosedPromise"),d=a("nodejs.webstream.controllerErrorFunction");function h(t,e=!1){var n;return!(!t||"function"!=typeof t.pipe||"function"!=typeof t.on||e&&("function"!=typeof t.pause||"function"!=typeof t.resume)||t._writableState&&!1===(null===(n=t._readableState)||void 0===n?void 0:n.readable)||t._writableState&&!t._readableState)}function p(t){var e;return!(!t||"function"!=typeof t.write||"function"!=typeof t.on||t._readableState&&!1===(null===(e=t._writableState)||void 0===e?void 0:e.writable))}function g(t){return t&&(t._readableState||t._writableState||"function"==typeof t.write&&"function"==typeof t.on||"function"==typeof t.pipe&&"function"==typeof t.on)}function y(t){return!(!t||g(t)||"function"!=typeof t.pipeThrough||"function"!=typeof t.getReader||"function"!=typeof t.cancel)}function m(t){return!(!t||g(t)||"function"!=typeof t.getWriter||"function"!=typeof t.abort)}function v(t){return!(!t||g(t)||"object"!=typeof t.readable||"object"!=typeof t.writable)}function b(t){if(!g(t))return null;const e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[s]||null!=r&&r.destroyed)}function w(t){if(!p(t))return null;if(!0===t.writableEnded)return!0;const e=t._writableState;return(null==e||!e.errored)&&("boolean"!=typeof(null==e?void 0:e.ended)?null:e.ended)}function _(t,e){if(!h(t))return null;const n=t._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===e&&!0===n.ended&&0===n.length))}function E(t){return t&&null!=t[l]?t[l]:"boolean"!=typeof(null==t?void 0:t.readable)?null:!b(t)&&(h(t)&&t.readable&&!_(t))}function S(t){return"boolean"!=typeof(null==t?void 0:t.writable)?null:!b(t)&&(p(t)&&t.writable&&!w(t))}function A(t){return"boolean"==typeof t._closed&&"boolean"==typeof t._defaultKeepAlive&&"boolean"==typeof t._removedConnection&&"boolean"==typeof t._removedContLen}function I(t){return"boolean"==typeof t._sent100&&A(t)}t.exports={kDestroyed:s,isDisturbed:function(t){var e;return!(!t||!(null!==(e=t[c])&&void 0!==e?e:t.readableDidRead||t.readableAborted))},kIsDisturbed:c,isErrored:function(t){var e,n,r,o,i,a,s,l,c,f;return!(!t||!(null!==(e=null!==(n=null!==(r=null!==(o=null!==(i=null!==(a=t[u])&&void 0!==a?a:t.readableErrored)&&void 0!==i?i:t.writableErrored)&&void 0!==o?o:null===(s=t._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==r?r:null===(l=t._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(c=t._readableState)||void 0===c?void 0:c.errored)&&void 0!==e?e:null===(f=t._writableState)||void 0===f?void 0:f.errored))},kIsErrored:u,isReadable:E,kIsReadable:l,kIsClosedPromise:f,kControllerErrorFunction:d,isClosed:function(t){if(!g(t))return null;if("boolean"==typeof t.closed)return t.closed;const e=t._writableState,n=t._readableState;return"boolean"==typeof(null==e?void 0:e.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==e?void 0:e.closed)||(null==n?void 0:n.closed):"boolean"==typeof t._closed&&A(t)?t._closed:null},isDestroyed:b,isDuplexNodeStream:function(t){return!(!t||"function"!=typeof t.pipe||!t._readableState||"function"!=typeof t.on||"function"!=typeof t.write)},isFinished:function(t,e){return g(t)?!!b(t)||(!1===(null==e?void 0:e.readable)||!E(t))&&(!1===(null==e?void 0:e.writable)||!S(t)):null},isIterable:function(t,e){return null!=t&&(!0===e?"function"==typeof t[o]:!1===e?"function"==typeof t[i]:"function"==typeof t[o]||"function"==typeof t[i])},isReadableNodeStream:h,isReadableStream:y,isReadableEnded:function(t){if(!h(t))return null;if(!0===t.readableEnded)return!0;const e=t._readableState;return!(!e||e.errored)&&("boolean"!=typeof(null==e?void 0:e.ended)?null:e.ended)},isReadableFinished:_,isReadableErrored:function(t){var e,n;return g(t)?t.readableErrored?t.readableErrored:null!==(e=null===(n=t._readableState)||void 0===n?void 0:n.errored)&&void 0!==e?e:null:null},isNodeStream:g,isWebStream:function(t){return y(t)||m(t)||v(t)},isWritable:S,isWritableNodeStream:p,isWritableStream:m,isWritableEnded:w,isWritableFinished:function(t,e){if(!p(t))return null;if(!0===t.writableFinished)return!0;const n=t._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===e&&!0===n.ended&&0===n.length))},isWritableErrored:function(t){var e,n;return g(t)?t.writableErrored?t.writableErrored:null!==(e=null===(n=t._writableState)||void 0===n?void 0:n.errored)&&void 0!==e?e:null:null},isServerRequest:function(t){var e;return"boolean"==typeof t._consuming&&"boolean"==typeof t._dumped&&void 0===(null===(e=t.req)||void 0===e?void 0:e.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(t){if(!g(t))return null;const e=t._writableState,n=t._readableState,r=e||n;return!r&&I(t)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:v}},373:(t,e,n)=>{const r=n(533),{ArrayPrototypeSlice:o,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:u,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:c,Symbol:f,SymbolHasInstance:d}=n(191);t.exports=U,U.WritableState=L;const{EventEmitter:h}=n(465),p=n(200).Stream,{Buffer:g}=n(485),y=n(230),{addAbortSignal:m}=n(374),{getHighWaterMark:v,getDefaultHighWaterMark:b}=n(498),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:R,ERR_UNKNOWN_ENCODING:x}=n(141).codes,{errorOrDestroy:C}=y;function B(){}l(U.prototype,p.prototype),l(U,p);const k=f("kOnFinished");function L(t,e,r){"boolean"!=typeof r&&(r=e instanceof n(182)),this.objectMode=!(!t||!t.objectMode),r&&(this.objectMode=this.objectMode||!(!t||!t.writableObjectMode)),this.highWaterMark=t?v(this,t,"writableHighWaterMark",r):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const o=!(!t||!1!==t.decodeStrings);this.decodeStrings=!o,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=P.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,O(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||!1!==t.emitClose,this.autoDestroy=!t||!1!==t.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[k]=[]}function O(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}function U(t){const e=this instanceof n(182);if(!e&&!a(U,this))return new U(t);this._writableState=new L(t,this,e),t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&m(t.signal,this)),p.call(this,t),y.construct(this,(()=>{const t=this._writableState;t.writing||F(this,t),H(this,t)}))}function j(t,e,n,o){const i=t._writableState;if("function"==typeof n)o=n,n=i.defaultEncoding;else{if(n){if("buffer"!==n&&!g.isEncoding(n))throw new x(n)}else n=i.defaultEncoding;"function"!=typeof o&&(o=B)}if(null===e)throw new T;if(!i.objectMode)if("string"==typeof e)!1!==i.decodeStrings&&(e=g.from(e,n),n="buffer");else if(e instanceof g)n="buffer";else{if(!p._isUint8Array(e))throw new w("chunk",["string","Buffer","Uint8Array"],e);e=p._uint8ArrayToBuffer(e),n="buffer"}let a;return i.ending?a=new R:i.destroyed&&(a=new A("write")),a?(r.nextTick(o,a),C(t,a,!0),a):(i.pendingcb++,function(t,e,n,r,o){const i=e.objectMode?1:n.length;e.length+=i;const a=e.length<e.highWaterMark;a||(e.needDrain=!0);e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:o}),e.allBuffers&&"buffer"!==r&&(e.allBuffers=!1),e.allNoop&&o!==B&&(e.allNoop=!1)):(e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1);return a&&!e.errored&&!e.destroyed}(t,i,e,n,o))}function N(t,e,n,r,o,i,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new A("write")):n?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function M(t,e,n,r){--e.pendingcb,r(n),D(e),C(t,n)}function P(t,e){const n=t._writableState,o=n.sync,i=n.writecb;"function"==typeof i?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),o?r.nextTick(M,t,n,e,i):M(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&F(t,n),o?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},r.nextTick(W,n.afterWriteTickInfo)):$(t,n,1,i))):C(t,new E)}function W({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,$(t,e,n,r)}function $(t,e,n,r){for(!e.ending&&!t.destroyed&&0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&D(e),H(t,e)}function D(t){if(t.writing)return;for(let n=t.bufferedIndex;n<t.buffered.length;++n){var e;const{chunk:r,callback:o}=t.buffered[n],i=t.objectMode?1:r.length;t.length-=i,o(null!==(e=t.errored)&&void 0!==e?e:new A("write"))}const n=t[k].splice(0);for(let e=0;e<n.length;e++){var r;n[e](null!==(r=t.errored)&&void 0!==r?r:new A("end"))}O(t)}function F(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:i}=e,a=n.length-r;if(!a)return;let s=r;if(e.bufferProcessing=!0,a>1&&t._writev){e.pendingcb-=a-1;const r=e.allNoop?B:t=>{for(let e=s;e<n.length;++e)n[e].callback(t)},i=e.allNoop&&0===s?n:o(n,s);i.allBuffers=e.allBuffers,N(t,e,!0,e.length,i,"",r),O(e)}else{do{const{chunk:r,encoding:o,callback:a}=n[s];n[s++]=null;N(t,e,!1,i?1:r.length,r,o,a)}while(s<n.length&&!e.writing);s===n.length?O(e):s>256?(n.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}function z(t){return t.ending&&!t.destroyed&&t.constructed&&0===t.length&&!t.errored&&0===t.buffered.length&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function q(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.finalCalled=!0,function(t,e){let n=!1;function o(o){if(n)C(t,null!=o?o:E());else if(n=!0,e.pendingcb--,o){const n=e[k].splice(0);for(let t=0;t<n.length;t++)n[t](o);C(t,o,e.sync)}else z(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,r.nextTick(V,t,e))}e.sync=!0,e.pendingcb++;try{t._final(o)}catch(t){o(t)}e.sync=!1}(t,e)))}function H(t,e,n){z(e)&&(q(t,e),0===e.pendingcb&&(n?(e.pendingcb++,r.nextTick(((t,e)=>{z(e)?V(t,e):e.pendingcb--}),t,e)):z(e)&&(e.pendingcb++,V(t,e))))}function V(t,e){e.pendingcb--,e.finished=!0;const n=e[k].splice(0);for(let t=0;t<n.length;t++)n[t]();if(t.emit("finish"),e.autoDestroy){const e=t._readableState;(!e||e.autoDestroy&&(e.endEmitted||!1===e.readable))&&t.destroy()}}L.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},s(L.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(U,d,{__proto__:null,value:function(t){return!!a(this,t)||this===U&&(t&&t._writableState instanceof L)}}),U.prototype.pipe=function(){C(this,new S)},U.prototype.write=function(t,e,n){return!0===j(this,t,e,n)},U.prototype.cork=function(){this._writableState.corked++},U.prototype.uncork=function(){const t=this._writableState;t.corked&&(t.corked--,t.writing||F(this,t))},U.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=c(t)),!g.isEncoding(t))throw new x(t);return this._writableState.defaultEncoding=t,this},U.prototype._write=function(t,e,n){if(!this._writev)throw new _("_write()");this._writev([{chunk:t,encoding:e}],n)},U.prototype._writev=null,U.prototype.end=function(t,e,n){const o=this._writableState;let a;if("function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t){const n=j(this,t,e);n instanceof i&&(a=n)}return o.corked&&(o.corked=1,this.uncork()),a||(o.errored||o.ending?o.finished?a=new I("end"):o.destroyed&&(a=new A("end")):(o.ending=!0,H(this,o,!0),o.ended=!0)),"function"==typeof n&&(a||o.finished?r.nextTick(n,a):o[k].push(n)),this},u(U.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){const t=this._writableState;return!(!t||!1===t.writable||t.destroyed||t.errored||t.ending||t.ended)},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const t=this._writableState;return!!t&&(!t.destroyed&&!t.ending&&t.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const G=y.destroy;let J;function Y(){return void 0===J&&(J={}),J}U.prototype.destroy=function(t,e){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[k].length)&&r.nextTick(D,n),G.call(this,t,e),this},U.prototype._undestroy=y.undestroy,U.prototype._destroy=function(t,e){e(t)},U.prototype[h.captureRejectionSymbol]=function(t){this.destroy(t)},U.fromWeb=function(t,e){return Y().newStreamWritableFromWritableStream(t,e)},U.toWeb=function(t){return Y().newWritableStreamFromStreamWritable(t)}},904:(t,e,n)=>{const{ArrayIsArray:r,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:u,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:c,NumberParseInt:f,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:h,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:y}=n(191),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=n(141),{normalizeEncoding:S}=n(775),{isAsyncFunction:A,isArrayBufferView:I}=n(775).types,T={};const R=/^[0-7]+$/;const x=m(((t,e,n=c,r=l)=>{if("number"!=typeof t)throw new b(e,"number",t);if(!s(t))throw new _(e,"an integer",t);if(t<n||t>r)throw new _(e,`>= ${n} && <= ${r}`,t)})),C=m(((t,e,n=-2147483648,r=2147483647)=>{if("number"!=typeof t)throw new b(e,"number",t);if(!s(t))throw new _(e,"an integer",t);if(t<n||t>r)throw new _(e,`>= ${n} && <= ${r}`,t)})),B=m(((t,e,n=!1)=>{if("number"!=typeof t)throw new b(e,"number",t);if(!s(t))throw new _(e,"an integer",t);const r=n?1:0,o=4294967295;if(t<r||t>o)throw new _(e,`>= ${r} && <= ${o}`,t)}));function k(t,e){if("string"!=typeof t)throw new b(e,"string",t)}const L=m(((t,e,n)=>{if(!o(n,t)){const r=i(a(n,(t=>"string"==typeof t?`'${t}'`:p(t))),", ");throw new w(e,t,"must be one of: "+r)}}));function O(t,e){if("boolean"!=typeof t)throw new b(e,"boolean",t)}function U(t,e,n){return null!=t&&d(t,e)?t[e]:n}const j=m(((t,e,n=null)=>{const o=U(n,"allowArray",!1),i=U(n,"allowFunction",!1);if(!U(n,"nullable",!1)&&null===t||!o&&r(t)||"object"!=typeof t&&(!i||"function"!=typeof t))throw new b(e,"Object",t)})),N=m(((t,e)=>{if(null!=t&&"object"!=typeof t&&"function"!=typeof t)throw new b(e,"a dictionary",t)})),M=m(((t,e,n=0)=>{if(!r(t))throw new b(e,"Array",t);if(t.length<n){throw new w(e,t,`must be longer than ${n}`)}}));const P=m(((t,e="buffer")=>{if(!I(t))throw new b(e,["Buffer","TypedArray","DataView"],t)}));const W=m(((t,e)=>{if(void 0!==t&&(null===t||"object"!=typeof t||!("aborted"in t)))throw new b(e,"AbortSignal",t)})),$=m(((t,e)=>{if("function"!=typeof t)throw new b(e,"Function",t)})),D=m(((t,e)=>{if("function"!=typeof t||A(t))throw new b(e,"Function",t)})),F=m(((t,e)=>{if(void 0!==t)throw new b(e,"undefined",t)}));const z=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function q(t,e){if(void 0===t||!h(z,t))throw new w(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(t){return t===(0|t)},isUint32:function(t){return t===t>>>0},parseFileMode:function(t,e,n){if(void 0===t&&(t=n),"string"==typeof t){if(null===h(R,t))throw new w(e,t,"must be a 32-bit unsigned integer or an octal string");t=f(t,8)}return B(t,e),t},validateArray:M,validateStringArray:function(t,e){M(t,e);for(let n=0;n<t.length;n++)k(t[n],`${e}[${n}]`)},validateBooleanArray:function(t,e){M(t,e);for(let n=0;n<t.length;n++)O(t[n],`${e}[${n}]`)},validateBoolean:O,validateBuffer:P,validateDictionary:N,validateEncoding:function(t,e){const n=S(e),r=t.length;if("hex"===n&&r%2!=0)throw new w("encoding",e,`is invalid for data of length ${r}`)},validateFunction:$,validateInt32:C,validateInteger:x,validateNumber:function(t,e,n=void 0,r){if("number"!=typeof t)throw new b(e,"number",t);if(null!=n&&t<n||null!=r&&t>r||(null!=n||null!=r)&&u(t))throw new _(e,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,t)},validateObject:j,validateOneOf:L,validatePlainFunction:D,validatePort:function(t,e="Port",n=!0){if("number"!=typeof t&&"string"!=typeof t||"string"==typeof t&&0===y(t).length||+t!=+t>>>0||t>65535||0===t&&!n)throw new v(e,t,n);return 0|t},validateSignalName:function(t,e="signal"){if(k(t,e),void 0===T[t]){if(void 0!==T[g(t)])throw new E(t+" (signals must use all capital letters)");throw new E(t)}},validateString:k,validateUint32:B,validateUndefined:F,validateUnion:function(t,e,n){if(!o(n,t))throw new b(e,`('${i(n,"|")}')`,t)},validateAbortSignal:W,validateLinkHeaderValue:function(t){if("string"==typeof t)return q(t,"hints"),t;if(r(t)){const e=t.length;let n="";if(0===e)return n;for(let r=0;r<e;r++){const o=t[r];q(o,"hints"),n+=o,r!==e-1&&(n+=", ")}return n}throw new w("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},99:(t,e,n)=>{const r=n(292),o=n(760),i=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=i,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>o}),t.exports.Stream=r.Stream,t.exports.default=t.exports},141:(t,e,n)=>{const{format:r,inspect:o,AggregateError:i}=n(775),a=globalThis.AggregateError||i,s=Symbol("kIsNodeError"),u=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,c={};function f(t,e){if(!t)throw new c.ERR_INTERNAL_ASSERTION(e)}function d(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function h(t,e,n){n||(n=Error);class NodeError extends n{constructor(...n){super(function(t,e,n){if("function"==typeof e)return f(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);const o=(e.match(/%[dfijoOs]/g)||[]).length;return f(o===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${o}).`),0===n.length?e:r(e,...n)}(t,e,n))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(NodeError.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),NodeError.prototype.code=t,NodeError.prototype[s]=!0,c[t]=NodeError}function p(t){const e="__node_internal_"+t.name;return Object.defineProperty(t,"name",{value:e}),t}class AbortError extends Error{constructor(t="The operation was aborted",e=void 0){if(void 0!==e&&"object"!=typeof e)throw new c.ERR_INVALID_ARG_TYPE("options","Object",e);super(t,e),this.code="ABORT_ERR",this.name="AbortError"}}h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",((t,e,n)=>{f("string"==typeof t,"'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";const i=[],a=[],s=[];for(const t of e)f("string"==typeof t,"All expected entries have to be of type string"),u.includes(t)?i.push(t.toLowerCase()):l.test(t)?a.push(t):(f("object"!==t,'The value "object" should be written as "Object"'),s.push(t));if(a.length>0){const t=i.indexOf("object");-1!==t&&(i.splice(i,t,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{const t=i.pop();r+=`one of type ${i.join(", ")}, or ${t}`}}(a.length>0||s.length>0)&&(r+=" or ")}if(a.length>0){switch(a.length){case 1:r+=`an instance of ${a[0]}`;break;case 2:r+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const t=a.pop();r+=`an instance of ${a.join(", ")}, or ${t}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const t=s.pop();r+=`one of ${s.join(", ")}, or ${t}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var c;if(null!==(c=n.constructor)&&void 0!==c&&c.name)r+=`. Received an instance of ${n.constructor.name}`;else{r+=`. Received ${o(n,{depth:-1})}`}}else{let t=o(n,{colors:!1});t.length>25&&(t=`${t.slice(0,25)}...`),r+=`. Received type ${typeof n} (${t})`}return r}),TypeError),h("ERR_INVALID_ARG_VALUE",((t,e,n="is invalid")=>{let r=o(e);r.length>128&&(r=r.slice(0,128)+"...");return`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`}),TypeError),h("ERR_INVALID_RETURN_VALUE",((t,e,n)=>{var r;return`Expected ${t} to be returned from the "${e}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`}),TypeError),h("ERR_MISSING_ARGS",((...t)=>{let e;f(t.length>0,"At least one arg needs to be specified");const n=t.length;switch(t=(Array.isArray(t)?t:[t]).map((t=>`"${t}"`)).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}}return`${e} must be specified`}),TypeError),h("ERR_OUT_OF_RANGE",((t,e,n)=>{let r;return f(e,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32?r=d(String(n)):"bigint"==typeof n?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=d(r)),r+="n"):r=o(n),`The value of "${t}" is out of range. It must be ${e}. Received ${r}`}),RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError,aggregateTwoErrors:p((function(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const n=new a([e,t],e.message);return n.code=e.code,n}return t||e})),hideStackFrames:p,codes:c}},191:t=>{t.exports={ArrayIsArray:t=>Array.isArray(t),ArrayPrototypeIncludes:(t,e)=>t.includes(e),ArrayPrototypeIndexOf:(t,e)=>t.indexOf(e),ArrayPrototypeJoin:(t,e)=>t.join(e),ArrayPrototypeMap:(t,e)=>t.map(e),ArrayPrototypePop:(t,e)=>t.pop(e),ArrayPrototypePush:(t,e)=>t.push(e),ArrayPrototypeSlice:(t,e,n)=>t.slice(e,n),Error,FunctionPrototypeCall:(t,e,...n)=>t.call(e,...n),FunctionPrototypeSymbolHasInstance:(t,e)=>Function.prototype[Symbol.hasInstance].call(t,e),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(t,e)=>Object.defineProperties(t,e),ObjectDefineProperty:(t,e,n)=>Object.defineProperty(t,e,n),ObjectGetOwnPropertyDescriptor:(t,e)=>Object.getOwnPropertyDescriptor(t,e),ObjectKeys:t=>Object.keys(t),ObjectSetPrototypeOf:(t,e)=>Object.setPrototypeOf(t,e),Promise,PromisePrototypeCatch:(t,e)=>t.catch(e),PromisePrototypeThen:(t,e,n)=>t.then(e,n),PromiseReject:t=>Promise.reject(t),ReflectApply:Reflect.apply,RegExpPrototypeTest:(t,e)=>t.test(e),SafeSet:Set,String,StringPrototypeSlice:(t,e,n)=>t.slice(e,n),StringPrototypeToLowerCase:t=>t.toLowerCase(),StringPrototypeToUpperCase:t=>t.toUpperCase(),StringPrototypeTrim:t=>t.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(t,e,n)=>t.set(e,n),Uint8Array}},775:(t,e,n)=>{const r=n(485),o=Object.getPrototypeOf((async function(){})).constructor,i=globalThis.Blob||r.Blob,a=void 0!==i?function(t){return t instanceof i}:function(t){return!1};class AggregateError extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError("Expected input to be an Array, got "+typeof t);let e="";for(let n=0;n<t.length;n++)e+=`    ${t[n].stack}\n`;super(e),this.name="AggregateError",this.errors=t}}t.exports={AggregateError,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise(((n,r)=>{t=n,e=r})),resolve:t,reject:e}},promisify:t=>new Promise(((e,n)=>{t(((t,...r)=>t?n(t):e(...r)))})),debuglog:()=>function(){},format:(t,...e)=>t.replace(/%([sdifj])/g,(function(...[t,n]){const r=e.shift();if("f"===n)return r.toFixed(6);if("j"===n)return JSON.stringify(r);if("s"===n&&"object"==typeof r){return`${r.constructor!==Object?r.constructor.name:""} {}`.trim()}return r.toString()})),inspect(t){switch(typeof t){case"string":if(t.includes("'")){if(!t.includes('"'))return`"${t}"`;if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction:t=>t instanceof o,isArrayBufferView:t=>ArrayBuffer.isView(t)},isBlob:a},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},292:(t,e,n)=>{const{Buffer:r}=n(485),{ObjectDefineProperty:o,ObjectKeys:i,ReflectApply:a}=n(191),{promisify:{custom:s}}=n(775),{streamReturningOperators:u,promiseReturningOperators:l}=n(554),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=n(141),f=n(818),{pipeline:d}=n(754),{destroyer:h}=n(230),p=n(86),g=n(760),y=n(132),m=t.exports=n(200).Stream;m.isDisturbed=y.isDisturbed,m.isErrored=y.isErrored,m.isReadable=y.isReadable,m.Readable=n(858);for(const w of i(u)){const _=u[w];function v(...t){if(new.target)throw c();return m.Readable.from(a(_,this,t))}o(v,"name",{__proto__:null,value:_.name}),o(v,"length",{__proto__:null,value:_.length}),o(m.Readable.prototype,w,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(const E of i(l)){const S=l[E];function v(...t){if(new.target)throw c();return a(S,this,t)}o(v,"name",{__proto__:null,value:S.name}),o(v,"length",{__proto__:null,value:S.length}),o(m.Readable.prototype,E,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}m.Writable=n(373),m.Duplex=n(182),m.Transform=n(210),m.PassThrough=n(467),m.pipeline=d;const{addAbortSignal:b}=n(374);m.addAbortSignal=b,m.finished=p,m.destroy=h,m.compose=f,o(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),o(d,s,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),o(p,s,{__proto__:null,enumerable:!0,get:()=>g.finished}),m.Stream=m,m._isUint8Array=function(t){return t instanceof Uint8Array},m._uint8ArrayToBuffer=function(t){return r.from(t.buffer,t.byteOffset,t.byteLength)}},760:(t,e,n)=>{const{ArrayPrototypePop:r,Promise:o}=n(191),{isIterable:i,isNodeStream:a,isWebStream:s}=n(132),{pipelineImpl:u}=n(754),{finished:l}=n(86);n(91),t.exports={finished:l,pipeline:function(...t){return new o(((e,n)=>{let o,l;const c=t[t.length-1];if(c&&"object"==typeof c&&!a(c)&&!i(c)&&!s(c)){const e=r(t);o=e.signal,l=e.end}u(t,((t,r)=>{t?n(t):e(r)}),{signal:o,end:l})}))}}},533:t=>{var e,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var s,u=[],l=!1,c=-1;function f(){l&&s&&(l=!1,s.length?u=s.concat(u):c=-1,u.length&&d())}function d(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},377:(t,e,n)=>{var r=n(485),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),i(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},464:(t,e,n)=>{var r=n(377).Buffer,o=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=f,e=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=i,i.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},i.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},i.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var o=a(e[r]);if(o>=0)return o>0&&(t.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if(o=a(e[r]),o>=0)return o>0&&(t.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if(o=a(e[r]),o>=0)return o>0&&(2===o?o=0:t.lastNeed=o-3),o;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},i.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},54:(t,e,n)=>{n.d(e,{MS:()=>A,cF:()=>I,AK:()=>T,M_:()=>R,cX:()=>x,BT:()=>InteropError,_W:()=>B,Pg:()=>lt,$j:()=>Y,U$:()=>N,U7:()=>M});var r={d:(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},o={};r.d(o,{MS:()=>ApiError,cF:()=>ApiRequestError,AK:()=>AuthTokenExpiredError,M_:()=>AuthorizationError,cX:()=>InitializationError,Yd:()=>l,nj:()=>NotImplementedError,O4:()=>S,_W:()=>ParameterError,U$:()=>a,U7:()=>s});class ApiError extends Error{constructor(t,e){var n,r;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"An unexpected error has occurred"),this.name=this.constructor.name,this.stack=(t?this.stack:null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:this.stack).replace(/^(\w*Error)/,`${this.constructor.name}`)}}class ApiRequestError extends ApiError{constructor(t,e,n){var r;super(t=null!==(r=null!=t?t:null==n?void 0:n.message)&&void 0!==r?r:"An error occurred when executing the API request",n),this.status=e}}class AuthorizationError extends ApiError{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"An authorization error occurred",e)}}class AuthTokenExpiredError extends ApiError{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"The API request failed as the authorization tokens have expired",e)}}class InitializationError extends ApiError{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"An initialization error occurred",e)}}class NotImplementedError extends ApiError{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"The method has not been implemented",e)}}class ParameterError extends ApiError{constructor(t){super(t=null!=t?t:"Invalid parameter detected")}}const i=t=>{let e=fin.Integrations;e||(fin.Integrations={},e=fin.Integrations);let n=e[t];return n||(e[t]={},n=e[t]),n},a=t=>{i(t).loggingEnabled=!1},s=(t,e="0.0.0")=>{i(t).loggingEnabled=!0,console.log(u(t),`v${e}`)},u=t=>`[@openfin/${t.toLowerCase()}]`;class l{constructor(t){this.name=t,this.prefix=u(t),this.isLoggingEnabled=this.isLoggingEnabled.bind(this),this.logError=this.logError.bind(this),this.logInfo=this.logInfo.bind(this),this.logWarning=this.logWarning.bind(this)}isLoggingEnabled(){return i(this.name).loggingEnabled}logError(t){this.isLoggingEnabled()&&(t.innerError?console.error(this.prefix,t,"\n\n(inner)",t.innerError):console.error(this.prefix,t))}logInfo(...t){this.isLoggingEnabled()&&console.log(this.prefix,...t)}logWarning(...t){this.isLoggingEnabled()&&console.warn(this.prefix,...t)}}const c="oauth-api-auth-flow",f=(t,e,n,r,o,i,a,s)=>async u=>{const l=new URL(u);if(0!==l.href.toLowerCase().indexOf(o.toLowerCase()))return!1;if(window.clearInterval(s),window.clearTimeout(e),window.clearTimeout(n),t.removeAllListeners(),t.close(!0),l.searchParams.get("error")){const t=new ApiError("Authorization error");return t.data=l.toString(),a(t),!0}if(l.searchParams.get("state")!==r){const t=new ApiError("State mismatch");return t.data=l.toString(),a(t),!0}const c=l.searchParams.get("code");if(!c){const t=new ApiError("Authorization code missing");return t.data=l.toString(),a(t),!0}return i(c),!0},d=(t,e,n,r)=>async(o,i)=>{let a;const s=window.setTimeout((()=>{window.clearInterval(a),window.clearTimeout(s),t.removeAllListeners(),t.close(!0),i(new ApiError("Authorization timed out"))}),3e5);t.addListener("closing",(async()=>{r.logInfo("User closed auth window"),window.clearInterval(a),window.clearTimeout(s),t.removeAllListeners(),i(new ApiError("Failed to complete authorization code flow"))}));const u=window.setTimeout((async()=>{try{await t.isShowing()||(r.logInfo("Showing auth window"),await t.show(!0),await t.focus())}catch(t){r.logWarning("Unable to show auth window")}}),2e3),{version:l}=await fin.System.getRuntimeInfo();parseInt(l.split(".")[0],10)>=30?await f(t,s,u,e,n,o,i)((await t.getInfo()).url)||await t.addListener("url-changed",(a=>{r.logInfo("Auth window navigated to",a.url),f(t,s,u,e,n,o,i)(a.url)})):a=window.setInterval((()=>(async(t,e,n,r,o,i,a,s)=>{let u;try{u=await t.getInfo()}catch(t){return window.clearInterval(e),window.clearTimeout(n),window.clearTimeout(r),s(new ApiError("Could not locate auth window")),!1}return f(t,n,r,o,i,a,s,e)(u.url)})(t,a,s,u,e,n,o,i)),500)},h=()=>{let t,e,n,r;const o=async(e,n=!1)=>{const{command:r,data:a,id:s}=e,u={command:r,id:s};try{if(!t)throw new Error("Access token not found");const{apiRequestUrl:r,data:s,headers:l,httpMethod:c,includeAuthorization:f}=a,d=await(async(e,n,r,o,i)=>{var a,s;const u=Object.assign({Accept:"application/json"},o);"PATCH"!==n&&"POST"!==n&&"PUT"!==n||/content-type/i.test(Object.keys(u).join(","))||(u["Content-Type"]="application/json"),i&&(u.Authorization=`Bearer ${t}`);const l=await fetch(e,{body:"object"==typeof r?JSON.stringify(r):r,headers:u,method:n});if(!l.ok){const t={message:"Failed to execute API request"};return(null===(a=l.headers.get("Content-Type"))||void 0===a?void 0:a.includes("application/json"))&&(t.data=await l.json()),[l.status,void 0,void 0,t]}let c;const f=null!==(s=l.headers.get("Content-Type"))&&void 0!==s?s:"";switch(!0){case!f:break;case/^application\/(\w+\+)?json/i.test(f):c=await l.json();break;case/^multipart\/form-?data|^application\/x-?www-?form-?urlencoded/i.test(f):c=await l.formData();break;case/^application\/(([^/]+)?xml|vnd\.openxmlformats)|^text\/|^image\/svg/i.test(f):c=await l.text();break;default:c=await l.arrayBuffer()}return[l.status,c,f,void 0]})(r,c,s,l,f),[h,p,g,y]=d;if(u.status=h,y){if(!n&&401===h){const[t,n]=await i();return n?(u.status=t,u.error=n,u):await o(e,!0)}u.error=y}else p&&(u.data=p,u.type=g)}catch(t){t instanceof Error?u.error={message:t.message}:u.error={message:"Failed to execute API request"}}return Promise.resolve(u)},i=async()=>{var o;if(!n)throw new Error("Authorization server metadata not set");if(!e)throw new Error("Client ID not set");const i=`grant_type=refresh_token&client_id=${e}&refresh_token=${r}`,a=await fetch(n.token_endpoint,{body:i,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!a.ok){const t={message:"Failed to refresh access token"};return(null===(o=a.headers.get("Content-Type"))||void 0===o?void 0:o.includes("application/json"))&&(t.data=await a.json()),[a.status,t]}const s=await a.json();return t=s.access_token,[a.status]};self.onmessage=async i=>{const{command:a,id:s}=i.data;let u={command:a,id:s};switch(a){case"API_REQUEST":u=await o(i.data);break;case"CODE_EXCHANGE":u=await(async o=>{var i;const{command:a,data:s,id:u}=o,l={command:a,id:u};try{if(!n)throw new Error("Authorization server metadata not set");if(!e)throw new Error("Client ID not set");const{code:o,codeVerifier:a,redirectUri:u}=s,c=`grant_type=authorization_code&client_id=${e}&code=${o}&code_verifier=${a}&redirect_uri=${u}`,f=await fetch(n.token_endpoint,{body:c,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(f.ok){const e=await f.json();t=e.access_token,r=e.refresh_token}else{const t={message:"Failed to retrieve tokens"};(null===(i=f.headers.get("Content-Type"))||void 0===i?void 0:i.includes("application/json"))&&(t.data=await f.json()),l.error=t}}catch(t){t instanceof Error?l.error={message:t.message}:l.error={message:"Failed to retrieve tokens"}}return Promise.resolve(l)})(i.data);break;case"EXPIRE_TOKENS":u=await(async e=>{var o;const{command:i,expireAccessTokenOnly:a,id:s}=e,u={command:i,id:s};try{if(!a&&!r)throw new Error("Refresh token not found");if(!n)throw new Error("Authorization server metadata not set");if(!n.revocation_endpoint)throw new Error("Revocation endpoint missing in authorization server metadata");const e=a?t:r,i=await fetch(`${n.revocation_endpoint}?token=${e}`,{headers:{Accept:"application/json"}});if(!i.ok){const t={message:"Failed to revoke tokens"};(null===(o=i.headers.get("Content-Type"))||void 0===o?void 0:o.includes("application/json"))&&(t.data=await i.json()),u.error=t}}catch(t){t instanceof Error?u.error={message:t.message}:u.error={message:"Failed to revoke tokens"}}return Promise.resolve(u)})(i.data);break;case"INIT":u=await(async t=>{const{command:r,data:o,id:i}=t,a={command:r,id:i};return e=o.clientId,n=o.metadata,Promise.resolve(a)})(i.data);break;default:u.error=new Error(`Unexpected oauth worker command: ${a}`)}self.postMessage(u)}};var p;!function(t){t.ApiRequest="API_REQUEST",t.CodeExchange="CODE_EXCHANGE",t.ExpireTokens="EXPIRE_TOKENS",t.Init="INIT"}(p||(p={}));const g=[],y=t=>{g.push(t)},m=(t,e)=>(n,r,o)=>new Promise(((i,a)=>{const s={command:p.CodeExchange,data:{code:n,codeVerifier:r,redirectUri:o},id:Date.now().toString()},{command:u,id:l}=s;y({command:u,id:l,reject:a,resolve:i}),t.postMessage(s),e.logInfo("Worker request sent",s)})),v=(t,e,n)=>(r,o,i,a,s)=>new Promise(((u,l)=>{const c={command:p.ApiRequest,data:{apiRequestUrl:r,clientId:t,data:i,headers:a,httpMethod:o,includeAuthorization:s},id:Date.now().toString()},{command:f,id:d}=c;y({command:f,id:d,reject:l,resolve:u}),e.postMessage(c),n.logInfo("Worker request sent",c)})),b=(t,e)=>n=>new Promise(((r,o)=>{const i={command:p.ExpireTokens,expireAccessTokenOnly:n,id:Date.now().toString()},{command:a,id:s}=i;y({command:a,id:s,reject:o,resolve:r}),t.postMessage(i),e.logInfo("Worker request sent",i)})),w=t=>e=>{t.logInfo("Worker response received",e.data);const n=e.data,{command:r,error:o,id:i}=n,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(n,["command","error","id"]),s=((t,e)=>g.find((n=>n.command===e&&n.id===t)))(i,r);s?(o?("status"in a&&void 0!==a.status&&(o.status=a.status),s.reject(o)):s.resolve(a),_(i,r)):t.logError(new Error("Unable to locate awaited request"))},_=(t,e)=>{const n=g.findIndex((n=>n.command===e&&n.id===t));n>=0&&g.splice(n,1)},E=(t,e)=>async()=>{try{await b(t,e)(!1)}catch(t){e.logWarning(t.message)}t.terminate(),e.logInfo("Worker terminated")};class S{get apiOrigin(){return this._apiOrigin}get clientId(){return this._clientId}get logger(){return this._logger}get metadata(){return this._metadata}get worker(){return this._worker}constructor(t,e,n,r,o){if(this.executeApiRequest=async(t,e="GET",n,r,o=!0,i=!1)=>{this._logger.logInfo("ExecuteApiRequest started",t,e,n,r);try{const i=await((t,e)=>async(n,r,o,i,a)=>{try{return await e.executeApiRequest(`${t}${n}`,r,o,i,a)}catch(t){let e;const{data:n,message:r,status:o}=t;throw e=t instanceof Error?new ApiRequestError(r,o):"Failed to refresh access token"===r?new AuthTokenExpiredError(r):new ApiRequestError(r,o),e.data=n,e}})(this._apiOrigin,this._worker)(t,e,n,r,o);return this._logger.logInfo("ExecuteApiRequest completed",i),i}catch(t){if(t instanceof ApiRequestError){const{data:e,message:n,name:r,stack:o}=t,i=this.getErrorMessageFromServerResponse(e);i&&(t.message=i,t.stack=null==o?void 0:o.replace(`${r}: ${n}`,`${r}: ${i}`))}throw i&&this.logger.logError(t),t}},!(t&&e&&n&&r&&o))throw new InitializationError("Provider has not been properly initialized (call init to create new instances)");this._apiOrigin=t,this._clientId=e,this._metadata=n,this._worker=r,this._logger=o,this.authorize=this.authorize.bind(this),this.close=this.close.bind(this),this.executeApiRequest=this.executeApiRequest.bind(this),this.expireTokens=this.expireTokens.bind(this),this.getErrorMessageFromServerResponse=this.getErrorMessageFromServerResponse.bind(this)}async authorize(t,e,n){if(this._logger.logInfo("Authorize started",t,e,n),!this._metadata||!this._clientId||!this._worker)throw new InitializationError("Provider has not been properly initialized (call init to create new instances)");try{await(r=this._metadata,o=this._clientId,i=this._worker,a=this._logger,async(t,e,n)=>{const{authorization_endpoint:s}=r,u=fin.Application.getCurrentSync(),l=(await u.getChildWindows()).find((t=>t.identity.name===c));l&&await l.close(!0);const f=(new Date).getTime().toString(),h=(()=>{const t=new Uint32Array(64);return window.crypto.getRandomValues(t),Array.from(t,(t=>`0${t.toString(16)}`.slice(-2))).join("")})(),p=(await(async t=>{const e=(new TextEncoder).encode(t),n=await window.crypto.subtle.digest("SHA-256",e),r=await(t=>new Promise(((e,n)=>{try{const r=new Blob([t]),o=new FileReader;o.onload=t=>{var r,o;const i=null===(r=t.target)||void 0===r?void 0:r.result;if(i){const[,t]=Array.from(null!==(o=i.match(/base64,(.*)$/i))&&void 0!==o?o:[]);e(null!=t?t:"")}n(new Error("Unexpected empty result"))},o.readAsDataURL(r)}catch(t){n(t)}})))(n);return r.replace(/\+/g,"-").replace(/\//g,"_")})(h)).replace(/=+$/,"");let g="";e&&(g="&",g+=Object.entries(e).map((t=>`${encodeURIComponent(t[0])}=${encodeURIComponent(t[1])}`)).join("&"));const y=`${s}?client_id=${encodeURIComponent(o)}&redirect_uri=${encodeURIComponent(t)}&response_type=code&state=${f}&code_challenge=${p}&code_challenge_method=S256${g}`,m=null!=n?n:{},{defaultHeight:v,defaultWidth:b}=m,w=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(m,["defaultHeight","defaultWidth"]);a.logInfo("Starting OAuth flow",y);const _=await fin.Window.create(Object.assign({alwaysOnTop:!0,maximizable:!1,minimizable:!1,autoShow:!1,defaultCentered:!0,defaultHeight:null!=v?v:700,defaultWidth:null!=b?b:600,includeInSnapshots:!1,name:c,resizable:!1,saveWindowState:!1,showTaskbarIcon:!1,url:y},w)),E=await new Promise(d(_,f,t,a));a.logInfo("Received authorization code"),await i.exchangeCodeForTokens(E,h,t),a.logInfo("Received tokens")})(t,e,n),this._logger.logInfo("Authorize completed")}catch(t){let e;if(t instanceof ApiError){const{data:n}=t,r=this.getErrorMessageFromServerResponse(n);e=new AuthorizationError(r,t),e.data=n}else e=new AuthorizationError(void 0,t);throw this.logger.logError(e),e}var r,o,i,a}async close(){var t;this._logger.logInfo("Close started");try{await(null===(t=this._worker)||void 0===t?void 0:t.terminate()),this._worker=void 0,this._apiOrigin=void 0,this._clientId=void 0,this._metadata=void 0,this._logger.logInfo("Close completed")}catch(t){const e=new ApiError(void 0,t);throw this._logger.logError(e),e}}async expireTokens(t=!1){var e;this._logger.logInfo("ExpireTokens started");try{await(null===(e=this._worker)||void 0===e?void 0:e.expireTokens(t)),this._logger.logInfo("ExpireTokens completed")}catch(t){const e=new ApiError(void 0,t);throw this._logger.logError(e),e}}getErrorMessageFromServerResponse(t){t&&this._logger.logWarning(t)}static async init(t,e,n,r,...o){const i=new l(r);let a;i.logInfo("Init started",t,e,n);try{a=new URL(e)}catch(t){const e=new ParameterError("Unexpected invalid API origin");throw i.logError(e),e}try{const e=await(async t=>{let e;try{e=new URL(t)}catch(t){throw new ParameterError("Unexpected invalid metadata URL")}const n=await fetch(e,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error("Failed to retrieve authorization server metadata");const r=await n.json();if(!r)throw new Error("Unexpected empty authorization server metadata response");if(!r.response_types_supported.find((t=>"code"===t.toLowerCase())))throw new Error("Authorization server does not support the authorization code response type");return r})(t),r=await(async(t,e,n)=>{const r=new Blob([`(${h})()`],{type:"text/javascript"}),o=URL.createObjectURL(r),i=new Worker(o);return i.onmessage=w(n),await((t,e,n,r)=>new Promise(((o,i)=>{const a={command:p.Init,data:{clientId:e,metadata:t},id:Date.now().toString()},{command:s,id:u}=a;y({command:s,id:u,reject:i,resolve:o}),n.postMessage(a),r.logInfo("Worker request sent",a)})))(t,e,i,n),{exchangeCodeForTokens:m(i,n),executeApiRequest:v(e,i,n),expireTokens:b(i,n),terminate:E(i,n)}})(e,n,i);return i.logInfo("Init completed",e),new S(a.origin,n,e,r,i)}catch(t){let e;throw e=t instanceof ApiError?t:new InitializationError(void 0,t),i.logError(e),e}}}var A=o.MS,I=o.cF,T=o.AK,R=o.M_,x=o.cX,C=o.O4,B=o._W,k=o.U$,L=o.U7,O=n(951);const U="1.0.1",j="Microsoft365",N=()=>{k(j)},M=()=>{L(j,U)};"undefined"!=typeof window&&("undefined"==typeof fin&&Object.assign(window,{fin:{}}),Object.assign(fin,{Integrations:{Microsoft365:{enableLogging:M,disableLogging:N}}}));const P=t=>async(e,n,r,o,i)=>{var a;return e=(a=e).startsWith("/")?a:`/${a}`,t.executeApiRequest(e,n,r,o,i,!0)},W=async(t,e,n=[])=>{const r=["id","userPrincipalName","userType",...n].join(","),o=await(async(t,e=[])=>{if(!(null==e?void 0:e.length))return[];const n=[];for(let r=0;r<e.length;r+=20){const o={requests:e.slice(r,r+20).map((t=>(t.id=crypto.randomUUID(),t)))};n.push(t.executeApiRequest("/v1.0/$batch","POST",o))}const r=(await Promise.all(n)).flatMap((t=>t.data.responses));return e.map((t=>{var e;return null===(e=r.find((e=>e.id===t.id)))||void 0===e?void 0:e.body}))})(t,e.map((t=>({method:"GET",url:`/users?$filter=mail eq '${encodeURIComponent(t)}'&$select=${r}`})))),i=o.map((t=>{var e;return null===(e=t.value)||void 0===e?void 0:e[0]}));return t.logger.logInfo("Resolved users from email addresses",i,e),i};var $=n(300);const D=t=>t.map((t=>t?{id:t.userPrincipalName,emailAddress:t.mail,name:t.displayName}:void 0)),F=async(t,e)=>{try{await fin.System.registerUsage({type:"integration-feature",data:{apiVersion:U,componentName:t}})}catch(n){e.logWarning(`Unable to register usage for feature ${t}: ${null==n?void 0:n.message}`)}},z=t=>{let e=t;return Array.isArray(t)?t.filter(Boolean).map(z):("object"==typeof t&&(e=Object.fromEntries(Object.entries(t).filter((([,t])=>void 0!==(null!=t?t:void 0))).map((([t,e])=>[t,z(e)])))),e)},q=t=>/#EXT#@/.test(t.userPrincipalName);var H;!function(t){t.MS365="MS-365",t.Teams="MS-TEAMS"}(H||(H={}));class V extends C{get currentUser(){return this._currentUser}get redirectUri(){return this._redirectUri}get permissions(){return this._permissions}get tenantId(){return this._tenantId}constructor(t,e,n,r,o,i,a,s){super(t,e,i,a,s),this._permissions=o,this._redirectUri=r,this._tenantId=n,F(H.MS365,s)}async authorize(t,e,n){await super.authorize(t,e,n);const r=await(async t=>{const{data:e}=await t.executeApiRequest("/v1.0/me");return e})(this);this._currentUser=r}getErrorMessageFromServerResponse(t){var e,n,r;if("string"==typeof t)try{return null===(n=null===(e=new URL(t).searchParams.get("error_description"))||void 0===e?void 0:e.split(/\r\n/))||void 0===n?void 0:n[0]}catch(t){return}return null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.message}static async init(t,e,n,r,o,i,a){const s=await super.init(t,e,n,r);return new V(e,n,o,i,a,null==s?void 0:s.metadata,null==s?void 0:s.worker,null==s?void 0:s.logger)}}const G=["User.ReadBasic.All","Team.ReadBasic.All","Channel.ReadBasic.All","ChannelMessage.Send","Chat.Create","ChatMessage.Send","offline_access"];let J;const Y=async(t,e,n,r=[],o,i)=>{await K(t,e,n,r);const a=Object.assign({scope:[...G,...r].join(" ")},o),s=Object.assign({defaultHeight:600,defaultWidth:550},i);return await J.authorize(n,a,s),{clientId:t,currentUser:J.currentUser,disconnect:J.close,executeApiRequest:P(J),provider:J,tenantId:e}},K=async(t,e,n,r)=>{if(!t)throw new B("Invalid client ID");if(!e)throw new B("Invalid tenant ID");if(!n)throw new B("Invalid redirect URI");const o=`https://login.microsoftonline.com/${e}/v2.0/.well-known/openid-configuration`;(!J||J.clientId!==t||J.tenantId!==e||J.redirectUri!==n||(0,O.xor)(J.permissions,r).length>0)&&(J=await V.init(o,"https://graph.microsoft.com",t,j,e,n,r))};class InteropError extends A{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"An interop error occurred",e)}}var X,Z,Q;!function(t){t.AppNotFound="AppNotFound",t.ErrorOnLaunch="ErrorOnLaunch",t.AppTimeout="AppTimeout",t.ResolverUnavailable="ResolverUnavailable"}(X||(X={})),function(t){t.NoAppsFound="NoAppsFound",t.ResolverUnavailable="ResolverUnavailable",t.ResolverTimeout="ResolverTimeout"}(Z||(Z={})),function(t){t.NoChannelFound="NoChannelFound",t.AccessDenied="AccessDenied",t.CreationFailed="CreationFailed"}(Q||(Q={}));var tt,et;tt=function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return B()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=I(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",g={};function y(){}function m(){}function v(){}var b={};b[i]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(C([])));_&&_!==n&&r.call(_,i)&&(b=_);var E=v.prototype=y.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(o,i,a,s){var u=c(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function I(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=c(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:B}}function B(){return{value:e,done:!0}}return m.prototype=E.constructor=v,v.constructor=m,m.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},S(A.prototype),A.prototype[a]=function(){return this},t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),E[i]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},tt(et={exports:{}},et.exports);var nt;!function(t){t.Contact="fdc3.contact",t.ContactList="fdc3.contactList",t.Country="fdc3.country",t.Instrument="fdc3.instrument",t.Organization="fdc3.organization",t.Portfolio="fdc3.portfolio",t.Position="fdc3.position"}(nt||(nt={}));var rt;!function(t){t.StartCall="StartCall",t.StartChat="StartChat",t.ViewChart="ViewChart",t.ViewContact="ViewContact",t.ViewQuote="ViewQuote",t.ViewNews="ViewNews",t.ViewInstrument="ViewInstrument",t.ViewAnalysis="ViewAnalysis"}(rt||(rt={}));const ot="ofms365action",it=async(t,e)=>{var n,r,o,i;const{chartImage:a,context:s}=e,{priceCurrent:u,priceHigh:l,priceLow:c,priceOpen:f}=e,d=(null===(r=null===(n=s.id)||void 0===n?void 0:n.ticker)||void 0===r?void 0:r.trim())||void 0,h=(null===(o=s.name)||void 0===o?void 0:o.trim())||void 0;let p,g,y,m,v,b;if(null!=e.timestamp||!a)try{p=new Date(null!==(i=e.timestamp)&&void 0!==i?i:Date.now()).toISOString().replace(/\.\d+Z$/,"+00:00")}catch(n){t.logger.logWarning("Invalid timestamp",e.timestamp)}if(null!=u&&null!=f&&(g=u-f,y=g/f*100,v=g>0?"▲":g<0?"▼":"●",m=g>0?"Good":g<0?"Attention":"Warning"),a){if(!/^image\/(gif|jp(e|e?g)|png)$/i.test(a.type))throw new B("Chart image MIME type not supported");try{b=await(async t=>new Promise(((e,n)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=()=>n(new Error("Failed to convert blob to base64")),r.readAsDataURL(t)})))(a)}catch(t){throw new A("Failed to convert blob to base64",t)}}const w=(await fin.System.getRuntimeInfo()).manifestUrl,_={context:s,intent:a?rt.ViewChart:rt.ViewInstrument,version:U},E=(S=_,(0,$.compress)(JSON.stringify(S),{outputEncoding:"Base64"}));var S;const I=`${w}?$$${ot}=${encodeURIComponent(E)}`,T=`https://start.openfin.co/?manifest=${encodeURIComponent(I)}`,R={$schema:"http://adaptivecards.io/schemas/adaptive-card.json",type:"AdaptiveCard",version:"1.4",body:[{type:"ColumnSet",columns:[{type:"Column",width:"stretch",items:[{type:"Container",items:[{type:"TextBlock",text:null!=h?h:d.toUpperCase(),wrap:!0,size:"Large",spacing:"None"},h&&{type:"TextBlock",text:d.toUpperCase(),isSubtle:!0,wrap:!0,spacing:"None"},p&&{type:"TextBlock",text:`{{DATE(${p}, SHORT)}} {{TIME(${p})}}`,wrap:!0,size:"Small"}]}]},null!=u&&!b&&{type:"Column",width:"stretch",items:[{type:"TextBlock",text:u.toFixed(2),size:"ExtraLarge",wrap:!0,horizontalAlignment:"Right"},null!=g&&null!=y&&{type:"TextBlock",text:`${v} ${g.toFixed(2)} (${y.toFixed(2)}%)`,color:m,spacing:"None",wrap:!0,horizontalAlignment:"Right"},(null!=f||null!=l||null!=c)&&{type:"Container",horizontalAlignment:"Right",items:[{type:"ColumnSet",columns:[{type:"Column",width:"stretch",items:[null!=f&&{type:"TextBlock",text:"Open",wrap:!0,horizontalAlignment:"Right",size:"Small",weight:"Bolder",spacing:"None"},null!=l&&{type:"TextBlock",text:"High",wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small",weight:"Bolder"},null!=c&&{type:"TextBlock",text:"Low",wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small",weight:"Bolder"}]},{type:"Column",width:"auto",items:[null!=f&&{type:"TextBlock",text:f.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"},null!=l&&{type:"TextBlock",text:l.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"},null!=c&&{type:"TextBlock",text:c.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"}]}]}],spacing:"Small"}]}]},b&&{type:"Image",url:"../hostedContents/1/$value",spacing:"Small"},{type:"ActionSet",actions:[{type:"Action.OpenUrl",url:T,title:"Open"}]}]},x={attachments:[{id:"1",contentType:"application/vnd.microsoft.card.adaptive",content:JSON.stringify(z(R))}],body:{contentType:"html",content:'<attachment id="1"></attachment>'},summary:"Test summary"};if(b){const[,t,e]=[...b.match(/^data:([^;]+);base64,(.+)$/i)];x.hostedContents=[{"@microsoft.graph.temporaryId":"1",contentBytes:e,contentType:t}]}return x},at=t=>t?"msteams:":"https://teams.microsoft.com",st=async t=>{const e=null==t?void 0:t[ot];if(e)try{const t=(t=>{const e=(0,$.decompress)(t,{inputEncoding:"Base64",outputEncoding:"String"});return JSON.parse(e)})(e),{context:n,intent:r}=t,o={context:n,name:r};return await fin.me.interop.fireIntent(o),o}catch(t){const e=t.message;throw new A("Failed to decompress share payload"+(e?` (${e})`:""),t)}},ut=async(t,e,n)=>{const r=await(async(t,e,n=[])=>{try{const r=["id",...n].join(","),{data:o}=await t.executeApiRequest(`/v1.0/teams/${encodeURIComponent(e)}?$select=${r}`);return o}catch(t){if(404!==t.status)throw t}})(t,e,["displayName"]);if(!r)return;let o;if(t.logger.logInfo("Resolved team",r),n){if(o=await(async(t,e,n,r=[])=>{try{const o=["id",...r].join(","),{data:i}=await t.executeApiRequest(`/v1.0/teams/${encodeURIComponent(n)}/channels/${encodeURIComponent(e)}?$select=${o}`);return i}catch(t){if(404!==t.status)throw t}})(t,n,e,["displayName"]),!o)return void t.logger.logWarning(`Could not resolve channel from id ${n}`)}else{t.logger.logInfo("No channel id supplied, using primary channel");const{data:n}=await t.executeApiRequest(`/v1.0/teams/${encodeURIComponent(e)}/primaryChannel?$select=displayName,id`);o=n}const i={channelId:o.id,channelName:o.displayName,teamId:r.id,teamName:r.displayName};return t.logger.logInfo("Resolved team channel",e,n,i),i};class lt{constructor(t,e=!0){this.logger=t.provider.logger,this.provider=t.provider,this.useMsTeamsProtocol=e,this.registerIntentHandlers=this.registerIntentHandlers.bind(this),this.share=this.share.bind(this),this.startCall=this.startCall.bind(this),this.startChat=this.startChat.bind(this),this.enableSharePayloadHandler(),F(H.Teams,this.logger)}async enableSharePayloadHandler(){const{initialOptions:t}=await fin.Application.getCurrentSync().getInfo(),{userAppConfigArgs:e}=t,n=await st(e);n&&this.logger.logInfo("Firing intent",n),fin.Application.getCurrentSync().addListener("run-requested",(async t=>{try{const e=await st(t.userAppConfigArgs);e&&this.logger.logInfo("Firing intent",e)}catch(t){this.logger.logError(t)}}))}async openUrl(t){this.logger.logInfo("openUrl started",t);try{const e=this.useMsTeamsProtocol?t.replace(/^https:\/\/teams.microsoft.com\//i,"msteams:"):t;this.logger.logInfo("Opening url",e),await fin.System.openUrlWithBrowser(e),this.logger.logInfo("openUrl completed")}catch(t){throw this.logger.logError(t),t}}async registerIntentHandlers(){if(this.logger.logInfo("registerIntentHandlers started"),this.unsubscribeIntentHandlers)return{unsubscribe:this.unsubscribeIntentHandlers};try{await fin.me.interop.getContextGroups();const t=await fin.me.interop.registerIntentHandler((async t=>{try{await((t,e)=>async n=>{var r,o,i,a;if(t.logger.logInfo("handleStartCallIntent started",n),(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())!==rt.StartCall.toLowerCase())throw new A(`Unexpected intent type: ${n.name}`);const{context:s}=n;if((null===(o=s.type)||void 0===o?void 0:o.toLowerCase())!==nt.Contact.toLowerCase()&&(null===(i=s.type)||void 0===i?void 0:i.toLowerCase())!==nt.ContactList.toLowerCase())throw new A(`Unexpected context type: ${s.type}`);const u=(null===(a=s.type)||void 0===a?void 0:a.toLowerCase())===nt.ContactList.toLowerCase()?s.contacts.map((t=>t.id.email)).filter(Boolean):[s.id.email],l=await e(u);t.logger.logInfo("handleStartCallIntent completed",l)})(this.provider,this.startCall)(t)}catch(t){throw this.logger.logError(t),t}}),"StartCall"),e=await fin.me.interop.registerIntentHandler((async t=>{try{await((t,e)=>async n=>{var r,o,i,a;if(t.logger.logInfo("handleStartChatIntent started",n),(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())!==rt.StartChat.toLowerCase())throw new A(`Unexpected intent type: ${n.name}`);const{context:s}=n;if((null===(o=s.type)||void 0===o?void 0:o.toLowerCase())!==nt.Contact.toLowerCase()&&(null===(i=s.type)||void 0===i?void 0:i.toLowerCase())!==nt.ContactList.toLowerCase())throw new A(`Unexpected context type: ${s.type}`);const u=(null===(a=s.type)||void 0===a?void 0:a.toLowerCase())===nt.ContactList.toLowerCase()?s.contacts.map((t=>t.id.email)).filter(Boolean):[s.id.email],l=await e({emailAddresses:u,topicName:s.name});t.logger.logInfo("handleStartChatIntent completed",l)})(this.provider,this.startChat)(t)}catch(t){throw this.logger.logError(t),t}}),"StartChat");return this.unsubscribeIntentHandlers=async()=>{this.logger.logInfo("unsubscribeIntentHandlers started"),await t.unsubscribe(),await e.unsubscribe(),this.unsubscribeIntentHandlers=void 0,this.logger.logInfo("unsubscribeIntentHandlers completed")},this.logger.logInfo("registerIntentHandlers completed"),{unsubscribe:this.unsubscribeIntentHandlers}}catch(t){const e=new InteropError(t.message);throw this.logger.logError(e),e}}async share(t){var e,n,r,o;this.logger.logInfo("share started",t);try{if(!t.target)throw new B("Target not provided");if((null===(e=t.context)||void 0===e?void 0:e.type.toLowerCase())!==nt.Instrument.toLowerCase())throw new B("Unsupported context type");if(!(null===(r=null===(n=t.context)||void 0===n?void 0:n.id)||void 0===r?void 0:r.ticker))throw new B("Ticker not provided");if(!t.chartImage&&null==t.priceCurrent)throw new B("Current price not provided");const i=null===(o=t.showMessage)||void 0===o||o,a=await it(this.provider,t);let s;if(Array.isArray(t.target)){const{target:e}=t,n=await W(this.provider,e,["displayName","mail"]),r=n.filter(Boolean);if(!r.length)return this.logger.logWarning("Could not resolve any valid users from email addresses",e),e.map((()=>{}));const{id:o,webUrl:u}=await(async(t,e)=>{const n={chatType:e.length>2?"group":"oneOnOne",members:e.map((e=>({"@odata.type":"#microsoft.graph.aadUserConversationMember",roles:q(e)?["guest"]:["owner"],"user@odata.bind":`${t.apiOrigin}/v1.0/users('${e.id}')`})))},{data:r}=await t.executeApiRequest("/v1.0/chats","POST",n);return r})(this.provider,[this.provider.currentUser,...r]),{data:l}=await this.provider.executeApiRequest(`/v1.0/chats/${encodeURIComponent(o)}/messages`,"POST",a);this.logger.logInfo("Sent chat message",l),i&&await this.openUrl(u),s=D(n)}else{const{target:e}=t,n=await ut(this.provider,e.teamId,e.channelId);if(!n)return void this.logger.logWarning("Could not resolve team/channel",e.teamId,e.channelId);const{channelId:r,teamId:o}=n,{data:u}=await this.provider.executeApiRequest(`/v1.0/teams/${encodeURIComponent(o)}/channels/${encodeURIComponent(r)}/messages`,"POST",a);this.logger.logInfo("Sent chat message",u),i&&await this.openUrl(u.webUrl),s=n}return this.logger.logInfo("share completed",s),s}catch(t){throw this.logger.logError(t),t}}async startCall(t=[],e=!1){this.logger.logInfo("startCall started",t);try{let n=`${at(this.useMsTeamsProtocol)}/l/call/0/0?`;const r=await W(this.provider,t,["displayName","mail"]),o=r.filter(Boolean).map((t=>encodeURIComponent(t.userPrincipalName)));if(!o.length)return this.logger.logWarning("Could not resolve any valid users from supplied emails",t),t.map((()=>{}));n+=`users=${o.join(",")}&withVideo=${e}`,this.logger.logInfo("Opening Teams",n),await fin.System.openUrlWithBrowser(n);const i=D(r);return this.logger.logInfo("startCall completed",i),i}catch(t){throw this.logger.logError(t),t}}async startChat(t){this.logger.logInfo("startChat started",t);try{let e,n;if("teamId"in t){const{teamId:r,channelId:o}=t,i=await ut(this.provider,r,o);if(!i)return void this.logger.logWarning("Could not resolve team/channel",r,o);e=`${at(this.useMsTeamsProtocol)}/l/channel/${encodeURIComponent(i.channelId)}/${encodeURIComponent(i.channelName)}?groupId=${i.teamId}&tenantId=${this.provider.tenantId}`,n=i}else{const{emailAddresses:r,message:o,topicName:i}=t;e=`${at(this.useMsTeamsProtocol)}/l/chat/0/0?`;const a=await W(this.provider,r,["displayName","mail"]),s=a.filter(Boolean).map((t=>encodeURIComponent(t.userPrincipalName)));if(!s.length)return this.logger.logWarning("Could not resolve any valid users from email addresses",r),r.map((()=>{}));e+=`users=${s.join(",")}`,i&&(e+=`&topicName=${encodeURIComponent(i)}`),o&&(e+=`&message=${encodeURIComponent(o)}`),n=D(a)}return this.logger.logInfo("Opening Teams",e),await fin.System.openUrlWithBrowser(e),this.logger.logInfo("startChat completed",n),n}catch(t){throw this.logger.logError(t),t}}}},91:()=>{}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.c=e,n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r=n(n.s=54),o=r.MS,i=r.cF,a=r.AK,s=r.M_,u=r.cX,l=r.BT,c=r._W,f=r.Pg,d=r.$j,h=r.U$,p=r.U7;

/***/ }),

/***/ "../../node_modules/@openfin/workspace/index.js":
/*!******************************************************!*\
  !*** ../../node_modules/@openfin/workspace/index.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

(()=>{var e={847:(e,t)=>{var a={2346:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const r=n(a(6535));t.lightenColor=(e,t)=>o(e,"lighten",t),t.darkenColor=(e,t)=>o(e,"darken",t);const o=(e,t,a)=>{if(a&&(a<0||a>100))throw new Error(`${a} must be a number between 0 and 100`);return(0,r.default)(e)[t](a).toString()};t.getMostReadable=(e,t)=>r.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent",openFinActive:"#4642FF",openFinHover:"#6965FF",lightGray4Active:"#D7DADF",lightGray4Hover:"#EBECEF",darkGray2Active:"#33353B",darkGray2Hover:"#44464E"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const n=a(2317),r=a(2346),o=a(5939),i={fontFamily:n.FontFamily,fontSize:n.FontSize,fontWeight:n.FontWeight,lineHeight:n.LineHeight,iconSize:n.IconSize,radius:n.Radius,shadow:n.Shadow,transition:n.Transition,unit:n.Unit,px:n.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,r.darkenColor)(t,2),[`${e}Hover`]:(0,r.lightenColor)(t,5),[`${e}Focused`]:(0,r.getMostReadable)(t,[n.Color.white,n.Color.darkGray5]),[`${e}Text`]:(0,r.getMostReadable)(t,[n.Color.white,n.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},s(o.Palette.brandPrimary,e.brandPrimary)),s(o.Palette.brandSecondary,e.brandSecondary)),e)})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,a=/\s+$/;function n(r,o){if(o=o||{},(r=r||"")instanceof n)return r;if(!(this instanceof n))return new n(r,o);var i=function(n){var r,o,i,s={r:0,g:0,b:0},c=1,d=null,l=null,u=null,p=!1,h=!1;return"string"==typeof n&&(n=function(e){e=e.replace(t,"").replace(a,"").toLowerCase();var n,r=!1;if(v[e])e=v[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(n=O.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=O.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=O.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=O.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=O.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=O.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=O.hex8.exec(e))?{r:A(n[1]),g:A(n[2]),b:A(n[3]),a:F(n[4]),format:r?"name":"hex8"}:(n=O.hex6.exec(e))?{r:A(n[1]),g:A(n[2]),b:A(n[3]),format:r?"name":"hex"}:(n=O.hex4.exec(e))?{r:A(n[1]+""+n[1]),g:A(n[2]+""+n[2]),b:A(n[3]+""+n[3]),a:F(n[4]+""+n[4]),format:r?"name":"hex8"}:!!(n=O.hex3.exec(e))&&{r:A(n[1]+""+n[1]),g:A(n[2]+""+n[2]),b:A(n[3]+""+n[3]),format:r?"name":"hex"}}(n)),"object"==e(n)&&(E(n.r)&&E(n.g)&&E(n.b)?(r=n.r,o=n.g,i=n.b,s={r:255*P(r,255),g:255*P(o,255),b:255*P(i,255)},p=!0,h="%"===String(n.r).substr(-1)?"prgb":"rgb"):E(n.h)&&E(n.s)&&E(n.v)?(d=M(n.s),l=M(n.v),s=function(e,t,a){e=6*P(e,360),t=P(t,100),a=P(a,100);var n=Math.floor(e),r=e-n,o=a*(1-t),i=a*(1-r*t),s=a*(1-(1-r)*t),c=n%6;return{r:255*[a,i,o,o,s,a][c],g:255*[s,a,a,i,o,o][c],b:255*[o,o,s,a,a,i][c]}}(n.h,d,l),p=!0,h="hsv"):E(n.h)&&E(n.s)&&E(n.l)&&(d=M(n.s),u=M(n.l),s=function(e,t,a){var n,r,o;function i(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}if(e=P(e,360),t=P(t,100),a=P(a,100),0===t)n=r=o=a;else{var s=a<.5?a*(1+t):a+t-a*t,c=2*a-s;n=i(c,s,e+1/3),r=i(c,s,e),o=i(c,s,e-1/3)}return{r:255*n,g:255*r,b:255*o}}(n.h,d,u),p=!0,h="hsl"),n.hasOwnProperty("a")&&(c=n.a)),c=S(c),{ok:p,format:n.format||h,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(r);this._originalInput=r,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||i.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function r(e,t,a){e=P(e,255),t=P(t,255),a=P(a,255);var n,r,o=Math.max(e,t,a),i=Math.min(e,t,a),s=(o+i)/2;if(o==i)n=r=0;else{var c=o-i;switch(r=s>.5?c/(2-o-i):c/(o+i),o){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:r,l:s}}function o(e,t,a){e=P(e,255),t=P(t,255),a=P(a,255);var n,r,o=Math.max(e,t,a),i=Math.min(e,t,a),s=o,c=o-i;if(r=0===o?0:c/o,o==i)n=0;else{switch(o){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:r,v:s}}function i(e,t,a,n){var r=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function s(e,t,a,n){return[x(I(n)),x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.s-=t/100,a.s=C(a.s),n(a)}function d(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.s+=t/100,a.s=C(a.s),n(a)}function l(e){return n(e).desaturate(100)}function u(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.l+=t/100,a.l=C(a.l),n(a)}function p(e,t){t=0===t?0:t||10;var a=n(e).toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(-t/100*255))),a.g=Math.max(0,Math.min(255,a.g-Math.round(-t/100*255))),a.b=Math.max(0,Math.min(255,a.b-Math.round(-t/100*255))),n(a)}function h(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.l-=t/100,a.l=C(a.l),n(a)}function f(e,t){var a=n(e).toHsl(),r=(a.h+t)%360;return a.h=r<0?360+r:r,n(a)}function g(e){var t=n(e).toHsl();return t.h=(t.h+180)%360,n(t)}function m(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var a=n(e).toHsl(),r=[n(e)],o=360/t,i=1;i<t;i++)r.push(n({h:(a.h+i*o)%360,s:a.s,l:a.l}));return r}function w(e){var t=n(e).toHsl(),a=t.h;return[n(e),n({h:(a+72)%360,s:t.s,l:t.l}),n({h:(a+216)%360,s:t.s,l:t.l})]}function y(e,t,a){t=t||6,a=a||30;var r=n(e).toHsl(),o=360/a,i=[n(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(n(r));return i}function k(e,t){t=t||6;for(var a=n(e).toHsv(),r=a.h,o=a.s,i=a.v,s=[],c=1/t;t--;)s.push(n({h:r,s:o,v:i})),i=(i+c)%1;return s}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,a,n=this.toRgb();return e=n.r/255,t=n.g/255,a=n.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),n=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+a+"%, "+n+"%)":"hsva("+t+", "+a+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=r(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),n=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+a+"%, "+n+"%)":"hsla("+t+", "+a+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,a,n,r){var o=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16)),x(I(n))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*P(this._r,255))+"%",g:Math.round(100*P(this._g,255))+"%",b:Math.round(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%)":"rgba("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(b[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),a=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=n(e);a="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+a+")"},toString:function(e){var t=!!e;e=e||this._format;var a=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(a=this.toRgbString()),"prgb"===e&&(a=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(a=this.toHexString()),"hex3"===e&&(a=this.toHexString(!0)),"hex4"===e&&(a=this.toHex8String(!0)),"hex8"===e&&(a=this.toHex8String()),"name"===e&&(a=this.toName()),"hsl"===e&&(a=this.toHslString()),"hsv"===e&&(a=this.toHsvString()),a||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(e,t){var a=e.apply(null,[this].concat([].slice.call(t)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(u,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(h,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(d,arguments)},greyscale:function(){return this._applyModification(l,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},n.fromRatio=function(t,a){if("object"==e(t)){var r={};for(var o in t)t.hasOwnProperty(o)&&(r[o]="a"===o?t[o]:M(t[o]));t=r}return n(t,a)},n.equals=function(e,t){return!(!e||!t)&&n(e).toRgbString()==n(t).toRgbString()},n.random=function(){return n.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},n.mix=function(e,t,a){a=0===a?0:a||50;var r=n(e).toRgb(),o=n(t).toRgb(),i=a/100;return n({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},n.readability=function(e,t){var a=n(e),r=n(t);return(Math.max(a.getLuminance(),r.getLuminance())+.05)/(Math.min(a.getLuminance(),r.getLuminance())+.05)},n.isReadable=function(e,t,a){var r,o,i,s,c,d=n.readability(e,t);switch(o=!1,(i=a,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),r={level:s,size:c}).level+r.size){case"AAsmall":case"AAAlarge":o=d>=4.5;break;case"AAlarge":o=d>=3;break;case"AAAsmall":o=d>=7}return o},n.mostReadable=function(e,t,a){var r,o,i,s,c=null,d=0;o=(a=a||{}).includeFallbackColors,i=a.level,s=a.size;for(var l=0;l<t.length;l++)(r=n.readability(e,t[l]))>d&&(d=r,c=n(t[l]));return n.isReadable(e,c,{level:i,size:s})||!o?c:(a.includeFallbackColors=!1,n.mostReadable(e,["#fff","#000"],a))};var v=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},b=n.hexNames=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}(v);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function P(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var a=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),a&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return Math.min(1,Math.max(0,e))}function A(e){return parseInt(e,16)}function x(e){return 1==e.length?"0"+e:""+e}function M(e){return e<=1&&(e=100*e+"%"),e}function I(e){return Math.round(255*parseFloat(e)).toString(16)}function F(e){return A(e)/255}var W,T,D,O=(T="[\\s|\\(]+("+(W="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",D="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",{CSS_UNIT:new RegExp(W),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+D),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+D),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+D),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function E(e){return!!O.CSS_UNIT.exec(e)}return n}()}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return a[e].call(o.exports,o,o.exports,r),o.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=r(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var a=r(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return a.Palette}});var n=r(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return n.createTheme}})})();var i=t;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{},254:(e,t,a)=>{"use strict";a.d(t,{Nt:()=>Ue,Ag:()=>Ge});var n={};a.r(n),a.d(n,{createNamespacedLocalStorage:()=>x,getItem:()=>F,removeItem:()=>W,setItem:()=>I});var r=a(675),o=a(723),i=a(181);async function s(){const e="getManifestOverrides",{manifest:t,initialOptions:a}=await fin.Application.getCurrentSync().getInfo();return t?.platform.workspace||t?.platform.home||a?.workspace||a?.home||console.warn(`${e}: Missing Home development manifest overrides, using Desktop Owner Settings.`),t?.platform.workspace?(JSON.stringify(t?.platform.workspace),t?.platform.workspace):t?.platform.home?(JSON.stringify(t?.platform.home),t?.platform.home):a?.workspace?(JSON.stringify(a?.workspace),a?.workspace):a?.home?(JSON.stringify(a?.home),a?.home):{}}const c=e=>fin.System.getSystemAppConfig(e);async function d(){const e="getDOSOverrides";if(!o.cI)return console.warn(`${e}: the fin API was not available, returning no result`),{};try{let t=await c("workspace").catch((t=>{console.warn(`${e}: customConfig entry for SystemApp workspace not available in Desktop Owner Settings. ${t?.message}`)}));return t||(t=await c("home")),JSON.stringify(t),t}catch(t){if(!o.Hd)return{};if(!(t instanceof Error))throw t;console.warn(`${e}: Missing Workspace Desktop Owner Settings configuration, using defaults. ${t?.message}`)}return{}}let l,u;const p=e=>e.replace(/\/$/,"");async function h(){const e=(await async function(){if(l)return l;const e="getOverrides";if(!o.cI)return o.YY&&console.warn(`${e}: The Fin API was not available. Returning an empty result.`),{};const[t,a]=await Promise.all([d(),s()]);return l={...a,...t,disableRuntimeValidation:a.disableRuntimeValidation||t.disableRuntimeValidation},l}()).browserBaseUrl;if(e)try{const t=new URL(e);if(t.pathname.endsWith("/"))t.pathname=p(t.pathname);else{if("/workspace"===t.pathname)return t.pathname+=`/${o.et}`,t.toString();console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url, with path: /workspace. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}}catch(t){console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}return u??o.bD}async function f(e=!1){const t=await h()+i.Ay.EnterpriseBrowser;return e?t:p(t)}var g=a(70);const m=(e,t)=>{const a=e;return a.workspacePlatform||(a.workspacePlatform={}),a.workspacePlatform._internalDeferShowOptions={setAsForeground:!!t,deferShowEnabled:!0,autoShow:a.workspacePlatform?._internalAutoShow||a.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===a.autoShow||a.autoShow},a.autoShow=!1,a};const w=(e,t=0)=>{let a,n,r=!1;const o=async n=>{const i=await e(...n);if(r){await new Promise((e=>setTimeout(e,t)));const e=a;return a=void 0,r=!1,o(e)}return i};return(...e)=>(n?(r=!0,a=e):n=o(e).catch((e=>{throw console.error("makeDebouncedFunc",e),e})).finally((()=>{n=void 0})),n)};var y;!function(e){e.Top="top",e.Below="below"}(y||(y={}));const k=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};async function v(e,t,a,n,r,o){const i=!!e&&(0,g.Iq)(e),s=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(i,o);if(n===y.Below){if(!i||await k(i)){const e=i?(await(0,g.ur)(s)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,g.V1)(e).left-t/2,top:r?e.bottom-128:e.bottom+12,width:t,height:a}}return{left:(0,g.V1)(s).left-t/2,top:r?s.bottom-128:s.bottom+12,width:t,height:a}}if(!i||await k(i)){const e=i?(await(0,g.ur)(s)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,g.V1)(e).left-t/2,top:e.top+20,width:t,height:a}}return{left:(0,g.V1)(s).left-t/2,top:s.top+20,width:t,height:a}}w((async function(e,t,a,n,r){const o=t.getBoundingClientRect(),i=await v(e,o.width,o.height,a,n,r);if(0===i.width||0===i.height)return;const s=(0,g.Tv)();await s.setBounds(i),await s.show();const c=setTimeout((()=>s.close()),n?5e3:3e3),d=()=>{clearTimeout(c),s.close()};if(e){const t=(0,g.Iq)(e);t.on("bounds-changing",(()=>d())),t.on("blurred",(()=>d())),t.on("maximized",(()=>d())),t.on("minimized",(()=>d())),t.on("restored",(()=>d()))}}),10);const b=async e=>{const t=e&&await(0,g.Iq)(e).getBounds(),a=e?await(0,g.ur)(t):(await fin.System.getMonitorInfo()).primaryMonitor;return(0,g.VE)(a.availableRect)};var S=a(957);function P(){let e,t;return{promise:new Promise(((a,n)=>{e=a,t=n})),resolve:e,reject:t}}const C="dock3",A=__webpack_require__(/*! dexie */ "../../node_modules/dexie/import-wrapper.mjs"),x=e=>({setItem:(t,a)=>{localStorage.setItem(`${e}-${t}`,a)},getItem:t=>localStorage.getItem(`${e}-${t}`),removeItem:t=>localStorage.removeItem(`${e}-${t}`)}),M=x(o.$h),I=M.setItem,F=M.getItem,W=M.removeItem;var T;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(T||(T={}));const D=T,O=e=>e+"-"+fin.me.uuid,E=(e,t)=>{const a=o.AT&&o.cI&&new A.Dexie(e);return a&&a.version(.1).stores({[t]:""}),a},_=(e,t)=>{const a=E(O(e),t),n=E(e,t);if(!a||!n)throw new Error("Unable to migrate store - IndexDB not supported");return(async(e,t,a)=>{const n=F(D.HasMovedStore),r=n?JSON.parse(n):{};if(r&&r[a])return;r[a]=!0,I(D.HasMovedStore,JSON.stringify(r));const o=await e[a].toArray();await t[a].bulkPut(o)})(n,a,e),a},B="dock3-provider-config",R=o.AT&&o.cI&&new A.Dexie(O("dock3-provider-config"));R&&R.version(.1).stores({[B]:""});var $,L,N,G,U=function(e,t,a,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a},V=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)};class H{static getOverrideConstructor(...e){return class extends H{constructor(){super(...e)}}}constructor(e,t){if($.set(this,void 0),L.set(this,void 0),N.set(this,null),G.set(this,P()),H.instance)throw new Error("Dock3Provider has already been initialized.");H.instance=this,U(this,$,e,"f"),U(this,L,t,"f"),this.registerChannelActions()}async launchEntry(e){}get ready(){return V(this,G,"f").promise}async bookmarkContentMenuEntry(e){}get config(){return V(this,$,"f")}set config(e){U(this,$,e,"f")}async updateConfig(e){await this.handleConfigChange(e)}async shutdown(){await Promise.all([V(this,L,"f").destroy(),this.getWindowSync().close(!0)]),H.instance=null}async saveConfig({config:e}){U(this,$,e,"f"),await async function(e){if(!R)throw new Error("Unable to save Dock provider config - IndexedDb not supported");await R[B].put(e,"latest")}(e)}async handleConfigChange(e){V(this,N,"f")&&await V(this,L,"f").dispatch(V(this,N,"f"),"handle-dock-config-updated",e)}async loadConfig(){const e=await async function(){if(!R)throw new Error("Unable to get Dock provider config - IndexedDB not supported");try{return await R[B].get("latest")}catch(e){return void console.warn("Failed to retrieve Dock provider config from IndexedDB",e)}}();return e&&U(this,$,e,"f"),V(this,$,"f")}getWindowSync(){return fin.Window.wrapSync({uuid:fin.me.identity.uuid,name:C})}registerChannelActions(){V(this,L,"f").register("launch-entry",this.launchEntry.bind(this)),V(this,L,"f").register("save-config",this.saveConfig.bind(this)),V(this,L,"f").register("bookmark-content-menu-entry",this.bookmarkContentMenuEntry.bind(this)),V(this,L,"f").onConnection((e=>{e.name===C&&U(this,N,e,"f")})),V(this,L,"f").register("ready",(async(e,t)=>{if(V(this,N,"f")?.endpointId!==t.endpointId)throw new Error(`Dock3Provider: 'ready' action received from unexpected client ${t.name} (${t.uuid})`);V(this,G,"f").resolve()})),V(this,L,"f").onDisconnection((e=>{V(this,N,"f")?.endpointId===e.endpointId&&(U(this,N,null,"f"),U(this,G,P(),"f"))}))}}$=new WeakMap,L=new WeakMap,N=new WeakMap,G=new WeakMap,H.instance=null;const z=async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),a=await t.getOptions();return a.workspacePlatform?.windowType&&"enterprise"===a.workspacePlatform.windowType};let q;a(277);var j=a(438);const K=__webpack_require__(/*! lodash.debounce */ "../../node_modules/lodash.debounce/index.js");var X=a.n(K);function Q(){return localStorage.getItem(D.MachineName)??"unknown"}let Y;async function Z(){return Y||(Y=await fin.System.getMachineId()),Y}var J=a(333);const ee=async e=>({...e,layoutDetails:{machineId:await Z(),machineName:Q()}}),te=async e=>{const t=await(async(e,t)=>({pageId:(0,J.N)(),title:e,layout:await ee(t),isReadOnly:!1}))(e.title,ze(e.layout));return e.panels&&(t.panels=e.panels.map((e=>({...e,viewOptions:He(e.viewOptions)})))),{...e,...t}};var ae=a(79),ne=a(786);var re=a(102);const oe=(e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`,ie=new Map,se=(e,t)=>{const a=oe(e,t);return n=a,ie.has(n)||ie.set(n,(0,re.A)(n)),ie.get(n)();// removed by dead control flow
{ var n; }};var ce,de,le,ue,pe,he;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(ce||(ce={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(de||(de={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(le||(le={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(ue||(ue={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(pe||(pe={})),function(e){e.SendUpdateVersionModalResponse="send-update-version-modal-response"}(he||(he={}));const fe={...ce,...de,...pe},ge=(0,re.A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`),me=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await ge()).dispatch(ue.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await ge()).dispatch(ue.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await ge()).dispatch(ue.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await ge()).dispatch(ue.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await ge()).dispatch(ue.DeleteBookmarkNode,e))(e)},getPages:async()=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetPagesForWindow,e),getPage:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>Ue().Browser.wrapSync(e)._addPage(t),_addPage:async(t,a)=>{const n=await(0,ae.bW)(e),r={identity:e,page:t,insertionIndex:a?.index,multiInstanceViewBehavior:a?.multiInstanceViewBehavior};return n.dispatch(ae.OF.AddPage,r)},_addPages:async(t,a,n)=>{const r=await(0,ae.bW)(e),o=t.map((({page:e,opts:t})=>({...e,multiInstanceViewBehavior:t?.multiInstanceViewBehavior||"duplicate"}))),i={identity:e,pages:o,insertionIndex:a,replaceActivePage:n};return r.dispatch(ae.OF.AttachPagesToWindow,i)},removePage:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>Ue().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:a}=t,n=await(0,ae.bW)(e),r=(await n.dispatch(ae.OF.GetAllAttachedPages,void 0)).find((({pageId:e})=>e===a));if(!r)throw new Error(`Reparent Page Error: Target page with pageId ${a} not found`);r.multiInstanceViewBehavior="reparent";const o={identity:e,pages:[r],insertionIndex:t.index};return n.dispatch(ae.OF.AttachPagesToWindow,o)},setActivePage:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const a=await(0,ae.bW)(e);return t.identity=e,a.dispatch(ae.OF.UpdatePageForWindow,t)},reorderPages:async t=>{const a=await(0,ae.bW)(e);return t.identity=e,a.dispatch(ae.OF.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const a=await(0,ae.bW)(e);return t.identity=e,a.dispatch(ae.OF.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await(0,ae.bW)(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await(0,ae.bW)(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const a=fin.Window.wrapSync(e);"string"!=typeof t?await a.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const a=await(0,ae.bW)(e);return t.identity=e,a.dispatch(ae.OF.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const a=await(0,ae.bW)(e);return t.identity=e,a.dispatch(ae.OF.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>{await(0,ae.bW)(e);return(await se(e)).dispatch(fe.OpenSaveModalInternal,t)},_getLayoutsWithSelectedViews:async()=>(await se(e)).dispatch(fe.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const a=await(0,ae.bW)(e);return t.identity=e,a.dispatch(ae.OF.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const a=await(0,ae.bW)(e);return t.identity=e,a.dispatch(ae.OF.AddDefaultPage,t)},_trackRemovedTab:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.HandleRequestNavigationInternal,t),_sendUpdateVersionModalResponse:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.SendUpdateVersionModalResponseInternal,t)}),we=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>me(e),createWindow:async a=>{const n=(()=>{const e=`browser-window-startup-${(0,J.N)()}`;return ne.A.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",(()=>{ne.A.markAndMeasure("browser-window-shown",e)}))})(n),await(0,ae.bW)(e);const r=await t.createWindow(a);return(e=>{ne.A.markAndMeasure("browser-window-started",e)})(n),me(r.identity)},getAllAttachedPages:async()=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetAllAttachedPages,void 0),getAllWindows:async()=>{await(0,ae.bW)(e);return(await(0,g.Io)()).map((e=>me(e.identity)))},getUniquePageTitle:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetPageByViewIdentity,t)}};var ye=a(523);function ke(e,t){return async(a,...n)=>{e.has(a)&&e.get(a).forEach((e=>e(...n))),t&&await t({event:a,payload:n})}}function ve(e,t){return t&&t((t=>{const{event:a,payload:n}=t;e.has(a)&&e.get(a).forEach((e=>e(...n)))})),(t,a)=>{e.has(t)||e.set(t,new Set),e.get(t).add(a)}}function be(e){return(t,a)=>{e.has(t)||e.set(t,new Set);const n=e.get(t),r=(...e)=>{a(...e),n.delete(r)};n.add(r)}}function Se(e){return(t,a)=>{e.has(t)&&e.get(t).delete(a)}}const Pe={name:g.Q.BrowserMenu,alwaysOnTop:!0,autoShow:!0,frame:!1,resizable:!1,backgroundColor:"#2f3136",smallWindow:!0,showTaskbarIcon:!1,backgroundThrottling:!1,saveWindowState:!1};function Ce(e){const t={...Pe,...e};return t.url=(0,ye.Tt)(t.url??""),t}const Ae=function(e){const t=new Map;return{emit:ke(t,(t=>o.cI&&fin.InterApplicationBus.publish(e,t))),addListener:ve(t,(t=>o.cI&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},e,t))),addListenerWithUUID:a=>ve(t,(t=>o.cI&&fin.InterApplicationBus.subscribe({uuid:a},e,t))),removeListener:Se(t),once:be(t)}}("window.menu"),xe=(e,t)=>fin.Window.wrapSync(e).updateOptions({opacity:t}),Me=e=>Ae.emit("response",e),Ie=w((()=>(0,j.v1)().getChildWindows()),500);const Fe=new Map;async function We(e,t,a){const n=Ce(e),o=await(0,S.qq)(fin.me.identity),i=await(0,S.l5)(fin.me.identity)===r.qT.Dark,s=o?.theme;if(n.backgroundColor=s?.[i?r.qT.Dark:r.qT.Light]?.palette?.inputBackground||n.backgroundColor,!Fe.has(n.name)){return new Promise((r=>{Ae.once("ready",(async e=>{if(e.name===n.name){const t=await Fe.get(n.name);n.preventBlur||t.once("blurred",(async()=>{if(xe(e,0),t.hide(),Me({name:n.name,data:{actionName:"Cancel"}}),a=t.identity.name,[g.Q.BrowserSaveMenu,g.Q.DesktopSignalsModal].includes(a)){const e=await t.getOptions();"submitting"!==e.customContext&&"error"!==e.customContext&&t.close()}else t.identity.name.startsWith(g.Q.BrowserMenu)&&t.close();var a})),setTimeout((async()=>{await xe(e,1);1!==(await fin.Window.wrapSync(e).getOptions()).opacity&&xe(e,1)})),r(t)}}));const o=(async()=>{const r=await fin.Platform.getCurrentSync().createWindow(m({...n,opacity:0,url:t||n.url,defaultLeft:a?.left,defaultTop:a?.top,defaultWidth:a?.width,defaultHeight:a?.height,workspacePlatform:{preventBlur:e.preventBlur}},!0));return r.once("closed",(()=>{Fe.delete(n.name)})),r})();Fe.set(n.name,o)}))}return Fe.get(n.name)}async function Te(e,t){const a=Ce(e),n={top:a.top,left:a.left,width:a.defaultWidth||a.width,height:a.defaultHeight||a.height};return t.set("parentName",fin.Window.getCurrentSync().identity.name),{name:a.name,bounds:n,route:`${a.url}#${t.toString()}`}}async function De({options:e,parameters:t}){const a=t??new URLSearchParams,n=Ce(e),{name:r,modalParentIdentity:o}=n;if(!a.has("isEnterprise")){const e=`${await(async e=>(q||(q=await z(e)),q))(o)}`;a.set("isEnterprise",e)}let i=await async function(e){return(await Ie()).find((t=>t.identity.name===e))}(r);if(i)await async function(e,t){const{name:a,bounds:n,route:r}=await Te(e,t),o={uuid:fin.me.identity.uuid,name:a},i=fin.Window.wrapSync(o);await Promise.all([i.hide(),xe(o,0),i.setBounds(n)]),e.preventBlur||i.once("blurred",(()=>{xe(o,0),i.hide(),Me({name:o.name,data:{actionName:"Cancel"}})})),Ae.emit("update",a,n,r),await Me({name:a,data:{actionName:"Cancel"}})}(n,a);else{const{route:t,bounds:r}=await Te(e,a);i=await We({...n},t,r)}return i}const Oe=e=>({createPage:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.CreateSavedPageInternal,t),deletePage:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.DeleteSavedPageInternal,t),updatePage:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.UpdateSavedPageInternal,t),getPage:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetSavedPage,t),getPages:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.GetSavedPages,t),savePage:async t=>(await(0,ae.bW)(e)).dispatch(ae.OF.SavePage,t),createWorkspace:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const a=Ue(),n=await a.getCurrentWorkspace();if(n.workspaceId===t)throw new Error(`Cannot delete current active workspace ${n.title}`);return(await(0,ae.N)(e)).dispatch(ae.OF.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.UpdateSavedWorkspace,t),getWorkspace:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.GetSavedWorkspace,t),getWorkspaces:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.GetSavedWorkspaces,t),getWorkspacesMetadata:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.GetSavedWorkspacesMetadata,t),saveWorkspace:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.SaveWorkspace,t),getDockProviderConfig:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.SaveDockProviderConfig,t)});var Ee;!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(Ee||(Ee={}));(0,re.A)("of-workspace-notifications-sync");a(695);var _e=a(898);const Be=r.qT.System,Re=e=>Object.entries(e).reduce(((e,[t,a])=>`${e}--workspace-palette-${t}: ${a};`),""),$e=(e,t)=>{const a=!!e.contentBackground5&&"#000000"!==e.contentBackground5,n=!!e.contentBackground4&&"#000000"!==e.contentBackground4,r=(0,_e.b4)(e.textDefault),o=(0,_e.b4)(e.textInactive),i=r.rgb,s=o.rgb,c=r.alpha?parseFloat(r.alpha.toString()):1,d=o.alpha?parseFloat(o.alpha.toString()):1;return{dockExpandedContainerBorderColor:a?e.contentBackground5:e.background4,dockExpandedContainerBorderRadius:a&&t?"0":"10px",dockExpandedContainerBackground:n?e.contentBackground4:e.background1,fillerBackgroundColor:n?e.contentBackground4:"inherit",dockCompanionContainerBackground:n?e.contentBackground4:"inherit",dockComponentContainerBackground:a?e.contentBackground5:e.background5,styledDropdownActiveBackground:`${a?e.contentBackground5:e.background4}`,contentMenuWrapperInternalDivBorderColor:a?e.contentBackground5:e.background5,contentMenuItemContainerActiveBackground:a?e.contentBackground5:e.background3,contentMenuItemContainerHoverBackground:a?e.contentBackground5:e.background2,contentMenuHeaderBorderColor:a?e.contentBackground5:e.background5,dockCompanionSeparatorBorderColor:a?e.contentBackground5:e.background3,dockComponentContainerBorderColor:a?e.contentBackground5:e.background5,companionDockButtonActiveBackground:a?e.contentBackground5:e.background4,companionDockButtonHoverBackground:a?e.contentBackground5:e.background4,"computed-scrollbar-thumb-alpha":c,"computed-scrollbar-track-alpha":d,"scrollbar-thumb-rgb":i,"scrollbar-track-rgb":s}},Le=(e,t,a)=>({selectedTab:"dark"===t?e.background3:e.background1,...$e(e,a)});new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorage=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=()=>{if(this.workspaceStorage){const e=this.getScheme();if(this.workspaceStorage.setItem(D.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)this.workspaceStorage.setItem(D.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;this.workspaceStorage.setItem(D.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t},a)=>{this.lightPaletteVars=Re({...e,...Le(e,"light",a)}),this.darkPaletteVars=Re({...t,...Le(t,"dark",a)})}}setScheme(e){this.providerStorage.setItem(D.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(D.SelectedColorScheme)&&this.providerStorage.setItem(D.SelectedColorScheme,Be),this.providerStorage.getItem(D.SelectedColorScheme)}}(n);const Ne=e=>({getThemes:async()=>(await(0,ae.N)(e)).dispatch(ae.OF.GetThemes,void 0),setSelectedScheme:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.SetSelectedScheme,t),getSelectedScheme:async()=>(await(0,ae.N)(e)).dispatch(ae.OF.GetSelectedScheme,void 0)}),Ge=e=>{const t=fin.Platform.wrapSync(e);let a;const n=Object.assign(t,{applySnapshot:async(t,a)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,a)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,a,n)=>fin.Platform.wrapSync(e).createView(t,a,n),launchApp:async t=>{console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:o.$h,name:o.vL,entityType:o.fT||"unknown"});return(await(0,ae.N)(e)).dispatch(ae.OF.LaunchApp,t)},_invokeCustomAction:async(t,a)=>{const n=await(0,ae.N)(e),o={actionId:t,payload:{...a,callerType:a.callerType||r.vc.API}};return n.dispatch(ae.OF.InvokeCustomActionInternal,o)},_requestQuitPlatformDialog:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.RequestQuitPlatformDialogInternal,t),_showUpdateVersionModal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.ShowUpdateVersionModalInternal,t),getCurrentWorkspace:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.GetCurrentWorkspace,t),applyWorkspace:async(t,a)=>(await(0,ae.N)(e)).dispatch(ae.OF.ApplyWorkspace,{...t,options:a}),restoreLastSavedWorkspace:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.RestoreLastSavedWorkspaceInternal,t),setActiveWorkspace:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.SetActiveWorkspace,t),getLanguage:async()=>(await(0,ae.N)(e)).dispatch(ae.OF.GetLanguage),_getLanguageResources:async()=>(await(0,ae.N)(e)).dispatch(ae.OF.GetLanguageResourcesInternal),setLanguage:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.SetLanguage,t),_raiseAnalytics:async t=>{if(a||(a=await(0,ae.KZ)(e)),"object"==typeof a&&a?.analytics?.isSupported){return(await(0,ae.N)(e)).dispatch(ae.OF.Analytics,t)}e.uuid},getNotificationsConfig:async()=>(await(0,ae.N)(e)).dispatch(ae.OF.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await(0,ae.N)(e)).dispatch(ae.OF.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await(0,ae.N)(e)).dispatch(ae.OF.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await(0,ae.N)(e)).dispatch(ae.OF.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await(0,ae.N)(e)).dispatch(ae.OF.FocusAndExpandSearchInternal),_showAboutPagePopup:async e=>(async e=>{const t=new URLSearchParams({...e,title:"About"}),a=await b(fin.me.identity),n=e.copyrightMessage?320:286,r=(0,g.Xq)(a,{height:n,width:360});return De({options:{frame:!0,smallWindow:!0,saveWindowState:!1,showTaskbarIcon:!0,includeInSnapshots:!1,workspacePlatform:{windowType:"enterprise"},resizable:!1,name:g.Q.AboutPageWindow,url:await f()+i.Ay.EnterpriseAboutPage,defaultWidth:360,defaultHeight:n,preventBlur:!0,...r},parameters:t})})(e),Theme:Ne(e),Browser:we(e),Storage:Oe(e)});return n},Ue=()=>Ge(fin.me.identity);const Ve=(e,t)=>e.content?{...e,content:e.content.map((e=>Ve(e,t)))}:{...e,componentState:t(e.componentState)},He=e=>({...e,name:void 0}),ze=e=>{const t={...e};return Ve(t,He)},qe=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const a=qe(e.content);t.push(...a)})),t};new Map,new Map;const je=async(e,t)=>{const a=(e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const a=await t.getConfig(),{settings:n,dimensions:r}=a,o=await z(e);await t.replace({...a,settings:{...n,hasHeaders:!0,reorderEnabled:!0},dimensions:{...r,headerHeight:o?28:30}})},hide:async e=>{const a=await t.getConfig(),{settings:n,dimensions:r}=await a;await t.replace({...a,settings:{...n,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...r,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:a}=await e;return a.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}})({...g.$p,layoutName:e.layoutContainerKey}),n=await a.isShowingTabs();t>1?n||await a.show():1===t&&n&&await a.hide({settings:{reorderEnabled:!0}})},Ke=(X()((async e=>{try{if(!e||!e.layoutContainerKey)return;const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),a=t.content?qe(t.content):[],n=a.length;n>1?(async e=>{if("multiView"!==e.attachedPageType){const t=await Ue().Browser.getUniquePageTitle();Ue().Browser.wrapSync(g.$p).updatePage({pageId:e.pageId,page:{title:e.title??t,singleViewName:null,attachedPageType:"multiView"}})}})(e):1===n&&(async(e,t)=>{const a=Ue().Browser.wrapSync(g.$p);if("singleView"!==e.attachedPageType){const n=await te(e);delete n.layout,delete n.pageId;const r=fin.View.wrapSync({uuid:g.$p.uuid,name:t}),o=await r.getInfo(),i={...n,title:null,singleViewName:t,hasUnsavedChanges:!1,attachedPageType:"singleView",pageIcon:o.favicons[0]};await a.updatePage({pageId:e.pageId,page:i})}})(e,a[0].name),await je(e,n)}catch(e){}}),50,{leading:!1,trailing:!0}),__webpack_require__(/*! react-i18next */ "../../node_modules/react-i18next/dist/es/index.js"),__webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/cjs/i18next.js"));a.n(Ke)().t;new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise((e=>{this.locked?this.queue.push(e):(this.locked=!0,e())}))}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}};new Map;const Xe=m({alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1});!function(e=Xe){const t=new Map}();new Map;Date.now();X()((async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,a=!1;for(const n of e)if(n.identity.name===g.Q.BrowserMenu||n.identity.name===g.Q.BrowserSaveMenu?t=n:await(0,g.hb)(n.identity)&&(a=!0),a)break;!a&&t&&t.close()}),100,{leading:!1,trailing:!0});var Qe,Ye;!function(e){e.Save="Save",e.SaveAs="SaveAs"}(Qe||(Qe={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu",e.ZoomControls="zoom-controls"}(Ye||(Ye={}));const Ze="visited-sites",Je="removed-tab-stack",et=(o.AT&&o.cI&&_("openfin-home-pages","pages"),o.AT&&o.cI&&new A.Dexie(O("openfin-enterprise-site-history")));et&&et.version(.1).stores({[Ze]:"id, url"});const tt=o.AT&&o.cI&&new A.Dexie(O("openfin-enterprise-tab-history"));tt&&tt.version(.1).stores({[Je]:""});var at;!function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(at||(at={}));at.Separator;a(995);new Map([["blue",{name:"Blue",color:"#0091EB"}],["indigo",{name:"Indigo",color:"#6450FF"}],["pink",{name:"Pink",color:"#E878CF"}],["teal",{name:"Teal",color:"#24D1D1"}],["green",{name:"Green",color:"#00AF78"}],["orange",{name:"Orange",color:"#FF7D37"}],["red",{name:"Red",color:"#F94144"}],["yellow",{name:"Yellow",color:"#F9C74F"}],["gray",{name:"Gray",color:"#828788"}]]);var nt;!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(nt||(nt={}));(0,re.A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`);const rt="dock-provider-configs",ot=o.AT&&o.cI&&new A.Dexie(O("dock-provider-configs"));ot&&ot.version(.1).stores({[rt]:""});const it="workspaces";o.AT&&o.cI&&_("openfin-workspace-platform-workspaces",it);a(250);a(179)},675:(e,t,a)=>{"use strict";a.d(t,{qT:()=>o,vc:()=>h});var n,r,o,i,s,c,d,l,u,p,h;a(179),a(250);!function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(n||(n={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.ManageDesktopSignals="ManageDesktopSignals",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(r||(r={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(o||(o={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.ManageDesktopSignals="ManageDesktopSignals",e.AddToChannel="AddToChannel",e.Custom="Custom"}(i||(i={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.ManageDesktopSignals="ManageDesktopSignals",e.Print="Print",e.Pin="Pin"}(s||(s={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(c||(c={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(d||(d={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(l||(l={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(u||(u={})),function(e){e.Browser="browser",e.Platform="platform"}(p||(p={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(h||(h={}));var f;!function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(f||(f={}))},248:(e,t,a)=>{"use strict";a.d(t,{H:()=>o});var n=a(438),r=a(786);const o=(e,t)=>{r.A.markStart(`${e}-registration`),(0,n.BY)().once("started",(()=>r.A.markAndMeasure("workspace-app-started",`${e}-registration`)));const a=fin.Window.wrapSync(t);a.once("initialized",(()=>r.A.markAndMeasure(`${e}-window-initialized`,`${e}-registration`))),a.once("shown",(()=>{r.A.markAndMeasure(`${e}-show`,`${e}-registration`)}))}},834:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CLIAction:()=>x.PK,CLIFilterOptionType:()=>x.oo,CLITemplate:()=>x.fC,deregister:()=>F,hide:()=>T,register:()=>I,show:()=>W});var n=a(723),r=a(786),o=a(277),i=a(70);const s="0",c="2",d="3",l="5",u="6";var p=a(695),h=a(79),f=a(870);var g=a(905);const m=()=>{};function w(e){const t={};let a=[];let n=[];let r=null;let o=g.Zo.Initial;t.getStatus=()=>o,t.getResultBuffer=()=>a,t.setResultBuffer=e=>{a=e,a?.length&&t.onChange()},t.getRevokedBuffer=()=>n,t.setRevokedBuffer=e=>{n=e,n?.length&&t.onChange()},t.setUpdatedContext=e=>{r=e,null!==r&&t.onChange()},t.getUpdatedContext=()=>r,t.onChange=m;const i={};return t.res=i,i.close=()=>{o!==g.Zo.Close&&(o=g.Zo.Close,t.onChange())},i.open=()=>{o!==g.Zo.Open&&(o=g.Zo.Open,t.onChange())},i.respond=a=>{const n=function(e=[],t=[],a="ascending"){const n=[],r=new Map;t.forEach((e=>{if(e.key)return r.set(e.key,e);n.push(e)}));let o=e.map((e=>{if(e.key){const t=r.get(e.key);if(t)return r.delete(e.key),t}return e}));return o.push(...r.values(),...n),o="ascending"===a?o.sort(((e,t)=>(e?.score??1/0)-(t?.score??1/0))):o.sort(((e,t)=>(t?.score??1/0)-(e?.score??1/0))),o}(t.getResultBuffer(),a,e);t.setResultBuffer(n)},i.revoke=(...e)=>{const a=new Set(e),n=t.getResultBuffer().filter((({key:e})=>{const t=a.has(e);return t&&a.delete(e),!t}));t.setResultBuffer(n),a.size&&(t.getRevokedBuffer().forEach((e=>a.add(e))),t.setRevokedBuffer([...a]))},i.updateContext=e=>{t.setUpdatedContext(e)},t}const y=new Map;async function k(e){const{id:t,providerId:a}=e,n=P.getProviderOrFail(a);let r=y.get(t);r||(r=function(e,t){const a=new Set;let n=!1;return{close:()=>{n=!0;for(const e of a)e()},req:{id:e,...t,context:t?.context||{},onClose:e=>{a.add(e),n&&e()},removeListener:e=>{a.delete(e)}}}}(t,e),y.set(t,r));const o=w(),i=()=>{const e=o.getResultBuffer();o.setResultBuffer([]);const n=o.getRevokedBuffer();o.setRevokedBuffer([]);const r=o.getUpdatedContext();o.setUpdatedContext(null);const i=o.getStatus();!async function(e){(await(0,p.gj)()).dispatch(s,e)}({id:t,providerId:a,results:e,revoked:n,status:i,context:r})};let c=!0,d=!1;o.onChange=()=>{if(c)return c=!1,void i();d||(d=!0,setTimeout((()=>{d=!1,i()}),100))};try{const{results:e,context:i}=await n.onUserInput(r.req,o.res),s=o.getStatus();return{id:t,providerId:a,status:s,results:e,context:i}}catch(e){return console.error(`OpenFin/Workspace/Home. Uncaught exception in search provider ${a} for search ${t}`,"This is likely a bug in the implementation of the search provider.",e),{id:t,providerId:a,error:e?.message}}}async function v(){for(const{req:e,close:t}of y.values())t(),y.delete(e.id)}async function b(e,t){const a=P.getProviderOrFail(e.providerId);return e.result.dispatcherIdentity=t,a.onResultDispatch?.(e.result)}function S(e){const t=y.get(e.id);t?.close(),y.delete(e.id)}const P=new f.xM("home"),C=async e=>{await(0,p.nA)();!("skipPlatformInitCheck"in e&&!0===e.skipPlatformInitCheck)&&await(0,h.KZ)(fin.me.identity);P.assertNotAlreadyRegistered(e.id),P.setProvider(e);const t=await(0,p.gj)();return function(e){e.homeChannelActionsRegistered||(e.homeChannelActionsRegistered=!0,e.register(s,k),e.register(u,S),e.register(l,b),e.addDisconnectionListener(v))}(t),t.dispatch(c,{id:e.id,title:e.title,icon:e.icon,clientAPIVersion:n.et,identity:fin.me.identity,scoreOrder:e.scoreOrder,commandCode:e.commandCode,description:e.description,hidden:e.hidden,listTitle:e.listTitle,inputPlaceholder:e.inputPlaceholder,inputLandingPlaceholder:e.inputLandingPlaceholder,logoUrl:e.logoUrl,dispatchFocusEvents:e.dispatchFocusEvents})};var A=a(248),x=a(872);let M;const I=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);(0,A.H)("home",i.F2);const t=await C(e);return M=new Promise(((a,i)=>{try{(0,o.GR)({allowed:!0,componentVersion:t?.workspaceVersion}),n.et,a({...t,clientAPIVersion:n.et,setSearchQuery:async t=>(await(0,p.N7)()).dispatch("set-search-query",{query:t,providerID:e.id})})}catch(e){(0,o.GR)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),i(e)}finally{r.A.markEndAndMeasure("home-registration")}})),M},F=async e=>{P.deleteProvider(e);const t=await(0,p.gj)();await t.dispatch(d,e)};async function W(){r.A.markStart("home-show"),await M;const e=await(0,p.N7)();await e.dispatch("show-home",void 0)}async function T(){await M;const e=await(0,p.N7)();await e.dispatch("hide-home",void 0)}},870:(e,t,a)=>{"use strict";a.d(t,{xM:()=>s});var n=a(995);class r extends Error{constructor(e,t){const a=(0,n.titleCase)(e);super(`${a} Provider. ${a} Provider${t?` with id ${t}`:""} is not currently registered.`)}}class o extends Error{constructor(e,t){const a=(0,n.titleCase)(e);super(`${a} Provider. ${a} Provider${t?` with id ${t}`:""} is already registered. Call \`deregister\` before registering again.`)}}class i extends Error{constructor(e,t){const a=(0,n.titleCase)(e);super(`Failed to get ${a} Provider. ${a} Provider with id ${t} is not currently registered.`)}}class s{constructor(e){this.providersMap=new Map,this.providerType=e}assertNotAlreadyRegistered(e){if(this.hasProvider(e))throw new o(this.providerType,e)}assertRegistered(e){if(!this.hasProvider(e))throw new r(this.providerType,e)}getProvider(e){return this.providersMap.get(e)}hasProvider(e){return this.providersMap.has(e)}setProvider(e){this.providersMap.set(e.id,e)}deleteProvider(e){this.providersMap.delete(e)}getProviderOrFail(e){const t=this.getProvider(e);if(!t)throw new i(this.providerType,e);return t}clearProviders(){this.providersMap.clear()}}},129:(e,t,a)=>{"use strict";var n,r,o;a.d(t,{P:()=>r,R:()=>o}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(n||(n={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(r||(r={})),function(e){e.Active="active",e.Default="default"}(o||(o={}))},600:(e,t,a)=>{"use strict";var n;a.d(t,{a:()=>n}),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(n||(n={}))},872:(e,t,a)=>{"use strict";var n,r,o;a.d(t,{PK:()=>n,fC:()=>r,oo:()=>o}),function(e){e.Suggestion="suggestion"}(n||(n={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(r||(r={})),function(e){e.MultiSelect="MultiSelect"}(o||(o={}))},179:(e,t,a)=>{"use strict";a(129),a(872),a(710),a(184),a(600)},710:(e,t,a)=>{"use strict";var n,r;a.d(t,{v:()=>n,z:()=>r}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(n||(n={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(r||(r={}))},184:(e,t,a)=>{"use strict";a.d(t,{SM:()=>o,ce:()=>n,in:()=>i,np:()=>r});const n={Container:"Container",Button:"Button",SplitButton:"SplitButton"},r={Text:"Text",Image:"Image",List:"List"},o={...n,...r};var i;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(i||(i={}))},598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppManifestType:()=>o.v,StorefrontTemplate:()=>o.z,deregister:()=>y,hide:()=>k,register:()=>w,show:()=>v});var n=a(277),r=a(695),o=a(710),i=a(723),s=a(786),c=a(70),d=a(79),l=a(870);let u=!1;async function p(e,t,a){const n=await(0,r.p4)();try{return await n.dispatch(e.action,e.payload)}catch(r){if(r instanceof Error&&-1!==r.toString().indexOf(e.action))return u||console.warn("You are using a newer version of the Workspace client library that is not supported by the currently running workspace provider. Please upgrade the Workspace to version 9.0 or later."),u=!0,await n.dispatch(t.action,t.payload),a;throw r}}const h=new l.xM("storefront"),f=async e=>{await(0,d.KZ)(fin.me.identity);const t=await(0,r.N7)();return h.assertNotAlreadyRegistered(e.id),h.setProvider(e),(e=>{e.storefrontChannelActionsRegistered||(e.storefrontChannelActionsRegistered=!0,e.register("get-storefront-provider-apps",(e=>h.getProviderOrFail(e).getApps())),e.register("get-storefront-provider-footer",(e=>h.getProviderOrFail(e).getFooter())),e.register("get-storefront-provider-landing-page",(e=>h.getProviderOrFail(e).getLandingPage())),e.register("get-storefront-provider-navigation",(e=>h.getProviderOrFail(e).getNavigation())),e.register("launch-storefront-provider-app",(({id:e,app:t})=>h.getProviderOrFail(e).launchApp(t))))})(t),e.clientAPIVersion=i.et,p({action:"register-provider",payload:{providerType:"storefront",info:e}},{action:"register-storefront-provider",payload:e},{workspaceVersion:"unknown"})};var g=a(248);let m;const w=async e=>{(0,g.H)("store",c.gQ);const t=await f(e);return m=new Promise(((a,o)=>{try{(0,n.xt)({allowed:!0,componentVersion:t?.workspaceVersion}),i.et,a({clientAPIVersion:i.et,workspaceVersion:t?.workspaceVersion??"",updateAppCardButtons:async t=>{const a=await(0,r.mQ)();await a.dispatch("update-app-card-button-config",{...t,id:e.id,title:e.title,icon:e.icon,platformIdentity:fin.me.identity})}})}catch(e){(0,n.xt)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),o(e)}finally{s.A.markEndAndMeasure("store-registration")}})),m},y=async e=>(await m,h.assertRegistered(e),h.deleteProvider(e),await(0,r.nA)(),p({action:"deregister-provider",payload:{providerType:"storefront",id:e}},{action:"deregister-storefront-provider",payload:e})),k=async()=>(await m,await(0,r.nA)(),p({action:"hide-provider-window",payload:{providerType:"storefront"}},{action:"hide-storefront"})),v=async()=>(s.A.markStart("store-show"),await m,await(0,r.nA)(),p({action:"show-provider-window",payload:{providerType:"storefront"}},{action:"show-storefront"}))},250:(e,t,a)=>{"use strict";var n;!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(n||(n={}))},79:(e,t,a)=>{"use strict";var n;a.d(t,{KZ:()=>o,N:()=>i,OF:()=>n,bW:()=>s}),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.GetSavedWorkspacesMetadata="getSavedWorkspacesMetadata",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.RestoreLastSavedWorkspaceInternal="restoreLastSavedWorkspaceInternal",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal",e.SendUpdateVersionModalResponseInternal="sendUpdateVersionModalResponseInternal",e.ShowUpdateVersionModalInternal="showUpdateVersionModalInternal"}(n||(n={}));const r=async e=>fin.Platform.wrapSync(e).getClient(),o=async e=>{const t=await r(e),a="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let n;try{n=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(a)}if("boolean"==typeof n&&n)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),n;if("object"==typeof n&&n.isWorkspacePlatform)return n;throw new Error(a)},i=async e=>(await o(e),r(e)),s=async e=>{const t=await o(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return r(e)}},695:(e,t,a)=>{"use strict";a.d(t,{N7:()=>f,gj:()=>l,mQ:()=>h,nA:()=>p,p4:()=>c});var n=a(102),r=a(723),o=a(70),i=a(905);const s=(0,n.A)("__of_workspace_protocol__"),c=s,d=s,l=(0,n.A)(i.BT),u=e=>{const t=new URL(e);return t.searchParams.append("isLaunchedViaLib","true"),t.toString()},p=async()=>{if(!await(0,o.C)(o.xt)){if(r.jw||-1===navigator.userAgent.indexOf("Win"))return void await fin.Application.startFromManifest(u(r.m7));await fin.System.openUrlWithBrowser(u(r.t8))}},h=async()=>(await p(),c()),f=async()=>(await p(),d())},905:(e,t,a)=>{"use strict";a.d(t,{BT:()=>n,Zo:()=>o});const n="__search-openfin-browser-home-topic__";var r,o;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(r||(r={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(o||(o={}))},957:(e,t,a)=>{"use strict";a.d(t,{qq:()=>S,l5:()=>P});var n=a(847),r=a(898),o=a(70),i=a(254),s=a(675),c=a(877),d=a.n(c),l=a(67),u=a.n(l);const p={light:{symbol:u()?.src||""},dark:{symbol:d()?.src||""}};a(695);var h=a(79);const f="dark",g={[n.Palette.brandPrimary]:"#0A76D3",[n.Palette.brandPrimaryActive]:"#0A71C9",[n.Palette.brandPrimaryHover]:"#0B84EB",[n.Palette.brandPrimaryFocused]:n.Color.white,[n.Palette.brandPrimaryText]:n.Color.white,[n.Palette.statusSuccess]:n.Color.functional1,[n.Palette.statusWarning]:n.Color.functional10,[n.Palette.statusCritical]:n.Color.functional7,[n.Palette.statusActive]:n.Color.functional3,[n.Palette.contentBackground1]:"#0A76D3",[n.Palette.contentBackground2]:"#000000",[n.Palette.contentBackground3]:"#000000",[n.Palette.contentBackground4]:"#000000",[n.Palette.contentBackground5]:"#000000",[n.Palette.borderNeutral]:n.Color.silverGray},m={...g,[n.Palette.background1]:n.Color.white,[n.Palette.background2]:n.Color.lightGray1,[n.Palette.background3]:n.Color.lightGray2,[n.Palette.background4]:n.Color.lightGray3,[n.Palette.background5]:n.Color.lightGray4,[n.Palette.background6]:n.Color.lightGray5,[n.Palette.brandSecondary]:n.Color.lightGray4,[n.Palette.brandSecondaryActive]:n.Color.lightGray4Active,[n.Palette.brandSecondaryHover]:n.Color.lightGray4Hover,[n.Palette.brandSecondaryFocused]:n.Color.darkGray5,[n.Palette.brandSecondaryText]:n.Color.darkGray5,[n.Palette.inputBackground]:n.Color.lightGray3,[n.Palette.inputColor]:n.Color.darkGray5,[n.Palette.inputPlaceholder]:n.Color.darkGray2,[n.Palette.inputDisabled]:n.Color.neutralGray,[n.Palette.inputFocused]:n.Color.lightGray5,[n.Palette.inputBorder]:n.Color.neutralGray,[n.Palette.textDefault]:n.Color.darkGray5,[n.Palette.textHelp]:n.Color.darkGray3,[n.Palette.textInactive]:n.Color.neutralGray},w={...g,[n.Palette.background1]:n.Color.darkGray6,[n.Palette.background2]:n.Color.darkGray5,[n.Palette.background3]:n.Color.darkGray4,[n.Palette.background4]:n.Color.darkGray3,[n.Palette.background5]:n.Color.darkGray2,[n.Palette.background6]:n.Color.darkGray1,[n.Palette.brandSecondary]:n.Color.darkGray2,[n.Palette.brandSecondaryActive]:n.Color.darkGray2Active,[n.Palette.brandSecondaryHover]:n.Color.darkGray2Hover,[n.Palette.brandSecondaryFocused]:n.Color.white,[n.Palette.brandSecondaryText]:n.Color.white,[n.Palette.inputBackground]:n.Color.darkGray1,[n.Palette.inputColor]:n.Color.white,[n.Palette.inputPlaceholder]:n.Color.lightGray5,[n.Palette.inputDisabled]:n.Color.neutralGray,[n.Palette.inputFocused]:n.Color.lightGray5,[n.Palette.inputBorder]:n.Color.neutralGray,[n.Palette.textDefault]:n.Color.white,[n.Palette.textHelp]:n.Color.lightGray5,[n.Palette.textInactive]:n.Color.neutralGray},y=[{label:"OpenFin Default Light and Dark Theme",palettes:{light:{...m,backgroundPrimary:n.Color.darkGray5},dark:{...w,backgroundPrimary:n.Color.darkGray5}}}],k=e=>{const{background:t,foreground:a}=e;return{background:t,foreground:a??"#FFFFFF"}},v=(e,t)=>({icons:{symbol:e.brand?.icons?.[t]?.symbol||p[t].symbol}}),b=e=>{const{light:t,dark:a}="palettes"in e?e.palettes:{light:e.palette,dark:e.palette},o=(0,r.KD)(w,a),i=(0,r.KD)(m,t),s=((e,t)=>{const a={...e},n={...t};let o=t.backgroundPrimary?(0,r.pu)(t.backgroundPrimary,!0):{},i=e.backgroundPrimary?(0,r.pu)(e.backgroundPrimary):{};return o={...o,...n},i={...i,...a},{light:{...t,...o},dark:{...e,...i}}})(a,t),c={...(0,n.createTheme)({...o,...s?.dark}),brand:v(e,"dark")},d={...(0,n.createTheme)({...i,...s?.light}),brand:v(e,"light")},{light:l,dark:u}=(e=>{const t=Object.keys(e.notificationIndicatorColors??{});if(t?.length){const a={},n={};return t.forEach((t=>{const r=e.notificationIndicatorColors[t];"background"in r?(a[t]=k(r),n[t]=k(r)):(a[t]=k(r.dark??r.light),n[t]=k(r.light??r.dark))})),{light:n,dark:a}}return{light:null,dark:null}})(e);return c.notificationIndicatorColors=u,d.notificationIndicatorColors=l,{dark:c,light:d}},S=async e=>{const{themes:t,selectedScheme:a}=await(async e=>{const t=fin?.__internal_?.initialOptions?.workspacePlatform?._themeData;if(!t||e.uuid!==o.$p.uuid)return{themes:await(0,i.Ag)(e).Theme.getThemes(),selectedScheme:await(0,i.Ag)(e).Theme.getSelectedScheme()};return t})(e);var n,r;return(n=t?.length?t:y,r=a,n.map((e=>{const t="palettes"in e?e.default:f,{light:a,dark:n}=b(e);return{label:e.label,logoUrl:e.logoUrl,theme:{dark:n,light:a},defaultScheme:r??t}})))[0]},P=async e=>{const t=await(0,h.N)(e||fin.me.identity),a=await t.dispatch(h.OF.GetSelectedScheme,void 0);return a===s.qT.System?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a}},438:(e,t,a)=>{"use strict";a.d(t,{BY:()=>l,MW:()=>n,v1:()=>d});var n,r,o=a(723);!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(n||(n={})),function(e){e.FinProtocol="fin-protocol"}(r||(r={}));const i={uuid:o.$h},s={uuid:n.Workspace},c=e=>{if(!o.cI)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)},d=()=>c(i),l=()=>c(s)},102:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(723);const r=n.YY&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function o(e){let t;const a=new Set;return()=>{if(!n.cI)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await r;const o={clientAPIVersion:n.et},i=await fin.InterApplicationBus.Channel.connect(e,{payload:o});return i.onDisconnection((async()=>{a.forEach((e=>e())),a.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0})),i})().then((e=>(e.addDisconnectionListener=e=>{a.add(e)},e))).catch((a=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${a}`)}))),t}}},723:(e,t,a)=>{"use strict";var n;a.d(t,{$h:()=>c,AT:()=>i,Hd:()=>p,YY:()=>o,bD:()=>m,cI:()=>r,et:()=>w,fT:()=>l,jw:()=>u,m7:()=>f,t8:()=>h,vL:()=>d}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(n||(n={}));const r="undefined"!=typeof window&&"undefined"!=typeof fin,o=("undefined"==typeof process||process.env,"undefined"!=typeof window),i=o&&"undefined"!=typeof indexedDB,s=o?window.origin:n.Local,c=r&&fin.me.uuid,d=r&&fin.me.name,l=r&&fin.me.entityType,u="prod"===n.Local,p=(n.Dev,n.Staging,"prod"===n.Prod),h="fins://system-apps/workspace",f="https://workspace.openfin.co/workspace/22.3.9/app.json",g=e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e,m=(g("https://workspace.openfin.co/workspace/22.3.9"),g("https://workspace.openfin.co/workspace/22.3.9")),w=("undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&g(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&g(WORKSPACE_DOCS_CLIENT_URL),"22.3.9");"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA},786:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});const n="of-workspace-";const r=new class{mark(e){performance.mark(`${n}${e}`)}markStart(e){performance.mark(`${n}${e}-start`)}markEnd(e){performance.mark(`${n}${e}-end`)}markEndAndMeasure(e){performance.mark(`${n}${e}-end`);try{return performance.measure(`${n}${e}`,`${n}${e}-start`,`${n}${e}-end`)}catch(e){0}}markAndMeasure(e,t){performance.mark(`${n}${e}`);try{return performance.measure(`${n}${e}-measure`,`${n}${t}-start`,`${n}${e}`)}catch(e){0}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter((e=>e.name.startsWith(n)))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map((e=>({name:e.name.replace(`${n}`,"").replace("-measure",""),duration:e.duration})))}}},181:(e,t,a)=>{"use strict";var n,r;a.d(t,{Ay:()=>d,sP:()=>s}),function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(n||(n={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseLandingPage="/enterprise/landing/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseAboutPage="/popup-menu/about/",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/",e.ZoomControlsDialog="/zoom-controls-dialog/",e.DesktopSignalsModal="/popup-menu/desktop-signals-modal/"}(r||(r={}));const o={...n,...r},i="/microsoft-365-integration-assets/",s={IconOpenFinLogo:"/icons/openfinlogo.svg",IconFilter:"/icons/filter.svg",LightStorefront:"/icons/store-icon-light.png",DarkStorefront:"/icons/store-icon-dark.png",CallIconLight:"/icons/call-icon-light.svg",CallIconDark:"/icons/call-icon-dark.svg",ChatIconLight:"/icons/chat-icon-light.svg",ChatIconDark:"/icons/chat-icon-dark.svg",MessageIconLight:"/icons/message-icon-light.svg",MessageIconDark:"/icons/message-icon-dark.svg",Microsoft365Assets:{Microsoft365DocumentIcon:`${i}microsoft-365-document-icon.svg`,Microsoft365ExcelIcon:`${i}microsoft-365-excel-icon.svg`,Microsoft365PowerpointIcon:`${i}microsoft-365-powerpoint-icon.svg`,Microsoft365OutlookIcon:`${i}microsoft-365-outlook-icon.svg`,Microsoft365TeamsIcon:`${i}microsoft-365-teams-icon.svg`,Microsoft365Icon:`${i}microsoft-365-icon.svg`,PDFFileIcon:`${i}pdf-file-icon.svg`},DockIconLight:"/icons/dock-icon-light.png",DockIconDark:"/icons/dock-icon-dark.png"};var c;!function(e){e.Search="search"}(c||(c={}));const d=o},523:(e,t,a)=>{"use strict";a.d(t,{OX:()=>i,Tt:()=>s});var n,r=a(723);!function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(n||(n={}));const o="/workspace/22.3.9";function i(e){return o+e}function s(e,t){if(!r.YY)throw new Error("resolveAbsolutePath can only be used in a window");const a=t??window.location;if(/^(?:[a-z]+:)?\/\//i.test(e))return e;const n=`${a.protocol}//${a.hostname}`;return new URL(e,n).href}},898:(e,t,a)=>{"use strict";a.d(t,{KD:()=>c,b4:()=>i,pu:()=>s});const n=e=>e.replace(/[^\d,]/g,"").split(","),r=e=>{if(e.length<2)throw new Error("Invalid color object, cannot convert to HSL.");const t=e[0]/255,a=e[1]/255,n=e[2]/255,r=Math.min(t,a,n),o=Math.max(t,a,n),i=o-r;let s=0,c=0,d=0;return s=0===i?0:o===t?(a-n)/i%6:o===a?(n-t)/i+2:(t-a)/i+4,s=Math.round(60*s),s<0&&(s+=360),d=(o+r)/2,c=0==i?0:i/(1-Math.abs(2*d-1)),c=+(100*c).toFixed(1),d=+(100*d).toFixed(1),{hsl:`hsl(${s}, ${c}%, ${d}%)`,hsla:`hsl(${s}, ${c}%, ${d}%, 1)`,hue:s,lightness:d,saturation:c}},o=e=>{if(!e.includes("#"))throw new Error("Invalid hex value, cannot convert to RGB. Hex value begins with a hashtag.");let t=0,a=0,n=0;if(4===e.length)t=`0x${e[1]}${e[1]}`,a=`0x${e[2]}${e[2]}`,n=`0x${e[3]}${e[3]}`;else{if(7!==e.length)throw new Error("Invalid hex string length, cannot convert to RGB.");t=`0x${e[1]}${e[2]}`,a=`0x${e[3]}${e[4]}`,n=`0x${e[5]}${e[6]}`}return[+t,+a,+n]},i=e=>{const t=e;if(t.startsWith("#")){return{rgb:o(t).join(", "),alpha:1}}const a=t.match(/\d{1,3}(\.\d+)?/g);if(a){const[e,t,n,r]=a;return{rgb:`${e}, ${t}, ${n}`,alpha:void 0!==r?parseFloat(r):1}}return{rgb:o(e).join(", "),alpha:1}},s=(e,t=!1)=>{const a=(e=>{if(!e)throw new Error("Color is not defined");const t=e.toLowerCase();let a;if(t.includes("rgb")){const e=n(t);e.length>3&&e.pop(),a=r(e).hue}if(t.includes("#")){const e=o(t);a=r(e).hue}t.includes("hsl")&&(a=n(t)[0]);const i=a?.toString();if(!i)throw new Error(`Hue was unable to be extracted from "${t}", check color format. Accepted formats are: rgb(), rgba(), hex, hsl(), and hsla()`);return i})(e);return t?{background1:`hsla(${a}, 0%, 100%, 1)`,background2:`hsla(${a}, 67%, 99%, 1)`,background3:`hsla(${a}, 26%, 96%, 1)`,background4:`hsla(${a}, 15%, 94%, 1)`,background5:`hsla(${a}, 10%, 88%, 1)`,background6:`hsla(${a}, 80%, 80%, 1)`}:{background1:`hsla(${a}, 8%, 7%, 1)`,background2:`hsla(${a}, 8%, 13%, 1)`,background3:`hsla(${a}, 9%, 15%, 1)`,background4:`hsla(${a}, 6%, 23%, 1)`,background5:`hsla(${a}, 21%, 28%, 1)`,background6:`hsla(${a}, 5%, 51%, 1)`}},c=(e,t)=>{const a={};return Object.keys(e).forEach((n=>{a[n]=t[n]?t[n]:e[n]})),a}},277:(e,t,a)=>{"use strict";a.d(t,{GR:()=>s,ki:()=>d,xt:()=>c});var n,r=a(723),o=a(70);a(254);!function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(n||(n={}));const i=async(e,t,a="workspace-licensing")=>{const n={apiVersion:t.apiVersion||r.et,componentName:e,componentVersion:t.componentVersion||r.et,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:a,data:n})};const s=e=>{o.F2.uuid===o.$p.uuid&&o.F2.name===o.$p.name||i(n.Home,e)},c=e=>{i(n.Storefront,e)},d=e=>{i(n.Dock,e)};new Map},333:(e,t,a)=>{"use strict";function n(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}a.d(t,{N:()=>n})},70:(e,t,a)=>{"use strict";a.d(t,{$p:()=>l,C:()=>y,F2:()=>p,Io:()=>w,Iq:()=>d,Q:()=>n,T7:()=>h,Tv:()=>u,V1:()=>i,VE:()=>s,Xq:()=>c,gQ:()=>f,hb:()=>m,ur:()=>k,xt:()=>g});var n,r=a(438),o=a(723);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion",e.AICompanionPrefix="openfin-ai-companion-",e.UpdateVersionModal="here-update-version-modal",e.ZoomControlsDialog="here-zoom-controls-dialog",e.AboutPageWindow="here-about-page",e.DesktopSignalsModal="here-desktop-signals-modal"}(n||(n={}));const i=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2}),s=e=>({left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}),c=(e,t)=>{const a=t.width/2,n=t.height/2;return{left:Math.round(e.left-a),top:Math.round(e.top-n),width:t.width,height:t.height}};function d(e){if(!o.cI)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const l={name:o.vL,uuid:o.$h};function u(){return d(l)}const p={name:n.Home,uuid:r.MW.Workspace},h={name:n.Dock,uuid:r.MW.Workspace},f={name:n.Storefront,uuid:r.MW.Workspace},g={name:r.MW.Workspace,uuid:r.MW.Workspace};const m=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function w(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map((async e=>m(e.identity))));return e.filter(((e,a)=>t[a]))}const y=e=>d(e).getInfo().then((()=>!0)).catch((()=>!1));async function k(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce(((t,a)=>{const n=function(e,t){const a=e.top,n=e.left,r=e.top+e.height,o=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,d=t.monitorRect.right;if(a>c||r<i||n>d||o<s)return 0;const l=Math.max(a,i),u=Math.max(n,s);return(Math.min(r,c)-l)*(Math.min(o,d)-u)/(e.height*e.width)}(e,a);return n>t.percentage?{percentage:n,monitor:a}:t}),{percentage:0,monitor:t.primaryMonitor}).monitor}},995:e=>{"use strict";e.exports=__webpack_require__(/*! title-case */ "../../node_modules/title-case/dist.es2015/index.js")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";a.r(n),a.d(n,{ActionTrigger:()=>Be.P,AppManifestType:()=>$e.v,ButtonStyle:()=>Re.in,CLIAction:()=>N.PK,CLIFilterOptionType:()=>N.oo,CLITemplate:()=>N.fC,ContainerTemplateFragmentNames:()=>Re.ce,Dock:()=>e,DockButtonNames:()=>u.a,Home:()=>S,Integrations:()=>t,PresentationTemplateFragmentNames:()=>Re.np,SearchTagBackground:()=>Be.R,Storefront:()=>_e,StorefrontTemplate:()=>$e.z,TemplateFragmentTypes:()=>Re.SM});var e={};a.r(e),a.d(e,{DockButtonNames:()=>u.a,deregister:()=>m,minimize:()=>w,register:()=>g,show:()=>y});var t={};a.r(t),a.d(t,{Microsoft365WorkflowIntegration:()=>Ee});var r=a(723),o=a(786),i=a(277),s=a(70),c=a(695),d=a(79);var l=a(248),u=a(600);let p,h;const f=(e=[])=>{const t=e.filter((e=>!!e.id)).map((e=>e.id));if(new Set(t).size!==t.length)throw new Error("Dock provider buttons must have unique identifiers if specified.")},g=async e=>{(0,l.H)("dock",s.T7);const t=await(async e=>{await(0,d.KZ)(fin.me.identity);const t=await(0,c.N7)();if(h)throw new Error("Error using `Dock.register`. A Dock provider for this Workspace Platform is already registered. Call `Dock.deregister` before calling `Dock.register` again.");return h=e,e.clientAPIVersion=r.et,t.dispatch("register-provider",{providerType:"dock",info:e})})(e);return p=new Promise(((a,n)=>{try{(e=>{e.workspaceComponents&&!Array.isArray(e.workspaceComponents)&&console.warn("Using the `WorkspaceComponentButtonOptions` type to configure the Workspace Components Buttons is deprecated. Please use `WorkspaceButtonsConfig` instead.")})(e),f(e.buttons),(0,i.ki)({allowed:!0,componentVersion:t?.workspaceVersion}),r.et,a({clientAPIVersion:r.et,workspaceVersion:t?.workspaceVersion??"",updateDockProviderConfig:async t=>{if(!h)throw new Error("Error using `Dock.updateDockProviderConfig`. Dock provider is not registered. Make sure to call `Dock.register` first.");f(t.buttons);const a=await(0,c.N7)();await a.dispatch("update-provider",{providerType:"dock",provider:{...e,workspaceComponents:t.workspaceComponents,buttons:t.buttons,title:t.title,icon:t.icon,disableUserRearrangement:t.disableUserRearrangement,id:e.id}})}})}catch(e){(0,i.ki)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),n(e),p=void 0}finally{o.A.markEndAndMeasure("dock-registration")}})),p},m=async()=>{if(await p,!h)throw new Error("Error using `Dock.deregister`. Dock provider is not registered. Call `Dock.register` before calling `Dock.deregister`.");const e=await(0,c.N7)();await e.dispatch("deregister-provider",{providerType:"dock",id:h.id}),h=void 0,p=void 0},w=async()=>{await p,await(0,c.nA)(),await(async e=>(await(0,c.p4)()).dispatch("hide-provider-window",{providerType:e}))("dock")},y=async()=>{o.A.markStart("dock-show"),await p,await(0,c.nA)(),await(async e=>(await(0,c.p4)()).dispatch("show-provider-window",{providerType:e}))("dock")};var k,v,b,S=a(834),P=function(e,t,a,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a},C=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)};k=new WeakMap,v=new WeakMap,b=new WeakMap;const A=class{constructor(e){k.set(this,void 0),v.set(this,void 0),b.set(this,void 0),P(this,k,e,"f"),P(this,v,new Map,"f"),P(this,b,[],"f")}get(e){if(C(this,v,"f").has(e))return this.updateQueue(e),C(this,v,"f").get(e)}has(e){return C(this,v,"f").has(e)}put(e,t){if(C(this,v,"f").has(e))C(this,v,"f").set(e,t),this.updateQueue(e);else{if(C(this,b,"f").length===C(this,k,"f")){const e=C(this,b,"f").shift();e&&C(this,v,"f").delete(e)}C(this,v,"f").set(e,t),C(this,b,"f").push(e)}}updateQueue(e){const t=C(this,b,"f").indexOf(e);-1!==t&&(C(this,b,"f").splice(t,1),C(this,b,"f").push(e))}};function x(e){return e&&"object"==typeof e&&!Array.isArray(e)}function M(e,...t){if(!t.length)return e;const a=t.shift();return x(e)&&x(a)&&Object.entries(a).forEach((([t,a])=>{if(x(a))return e[t]||(e[t]={}),M(e[t],a);e[t]=a})),M(e,...t)}var I,F,W,T,D,O=a(181),E=a(523),_=function(e,t,a,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a},B=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)};F=new WeakMap,W=new WeakMap,T=new WeakMap,I=new WeakSet,D=function(){const e=Array.from(B(this,F,"f").entries()).reduce(((e,t)=>!e||t[1].timestamp<e[1].timestamp?t:e),null);return e?e[0]:null};const R=class{constructor(e=3e5,t=100){I.add(this),F.set(this,void 0),W.set(this,void 0),T.set(this,void 0),_(this,F,new Map,"f"),_(this,W,e,"f"),_(this,T,t,"f")}get(e){const t=B(this,F,"f").get(e);if(!t)return null;return Date.now()-t.timestamp<B(this,W,"f")?t.value:(B(this,F,"f").delete(e),null)}put(e,t){if(B(this,F,"f").size>=B(this,T,"f")){const e=B(this,I,"m",D).call(this);null!=e&&B(this,F,"f").delete(e)}B(this,F,"f").set(e,{value:t,timestamp:Date.now()})}remove(e){B(this,F,"f").delete(e)}clear(){B(this,F,"f").clear()}};var $,L=a(333),N=a(872),G=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)};const U={};class V{constructor(e){$.set(this,new Set),this._initializeWorkflows=async(e=this.config)=>{const{workflows:t}=e;for(const e in t){if(!t[e].disableAutoInitialize)try{G(this,$,"f").has(e)?console.warn(`Workflow ${e} already initialized.`):(G(this,$,"f").add(e),await this.initializeWorkflow(e))}catch(t){G(this,$,"f").delete(e),console.error(`Error registering ${e}:`,t)}}};const t=M({},U,e);this.config=t}async initializeWorkflow(e){G(this,$,"f").add(e)}}$=new WeakMap;const H=__webpack_require__(/*! @openfin/microsoft365 */ "../../node_modules/@openfin/microsoft365/openfin.ms365.js");let z=0;const q={chatMessage:"Chat Message",event:"Event",message:"Email",drive:"Document",contact:"Contact",user:"User",list:"List"},j={pdf:"PDF",docx:"Word",pptx:"PowerPoint",xlsx:"Excel",onenote:"OneNote"},K={chatMessage:["Chat.Read","ChannelMessage.Read.All"],list:["Sites.Read.All"],event:["Calendars.Read"],message:["Mail.ReadWrite.Shared"],contact:["Contacts.Read.Shared","Mail.ReadWrite.Shared"],user:["User.Read.All","Presence.Read.All"]},X="MICROSOFT_365_SEARCH_TYPE_FILTER",Q="MICROSOFT_365_SEARCH_FILE_TYPE_FILTER",Y="MICROSOFT_365_SEARCH_DEPARTMENT_FILTER",Z="MICROSOFT_365_SEARCH_JOB_TITLE_FILTER",J="Teams Call",ee="Teams Chat",te="Email",ae=(e,t)=>{const a=[],n={item:e.context.selectedFilters?.find((e=>e.id===X)),documentType:e.context.selectedFilters?.find((e=>e.id===Q))},r=[{value:"Document",isSelected:!!n.item?.options?.find((({value:e})=>"File"===e))?.isSelected},{value:"Contact",isSelected:!!n.item?.options?.find((({value:e})=>"Contact"===e))?.isSelected},{value:"Chat Message",isSelected:!!n.item?.options?.find((({value:e})=>"Chat Message"===e))?.isSelected},{value:"Email",isSelected:!!n.item?.options?.find((({value:e})=>"Email"===e))?.isSelected},{value:"Event",isSelected:!!n.item?.options?.find((({value:e})=>"Event"===e))?.isSelected},{value:"List",isSelected:!!n.item?.options?.find((({value:e})=>"List"===e))?.isSelected}];return a.push({id:X,title:"Type",type:N.oo.MultiSelect,options:r.filter((e=>t.has(e.value)))}),"Document"===n.item?.options?.filter((e=>e.isSelected))?.[0].value&&a.push({id:Q,title:"File Type",type:N.oo.MultiSelect,options:Object.entries(j).map((([,e])=>({value:e,isSelected:!!n.documentType?.options?.filter((e=>e.isSelected))?.find((({value:e})=>"File"===e))?.isSelected})))}),a},ne=(e,t)=>{const a=t.context.selectedFilters?.find((e=>e.id===X))?.options;if(!Array.isArray(a)||!a.find((e=>"Contact"===e.value||"User"===e.value))?.isSelected)return[];const{department:n,jobTitle:r}=e.reduce(((e,t)=>(t.department&&e.department.add(t.department),t.jobTitle&&e.jobTitle.add(t.jobTitle),e)),{department:new Set,jobTitle:new Set}),o=t.context.selectedFilters?.find((e=>e.id===Y)),i=Array.from(n).map((e=>({value:e,isSelected:!!o?.options?.find((({value:t})=>t===e))?.isSelected}))),s=t.context.selectedFilters?.find((e=>e.id===Y)),c=Array.from(r).map((e=>({value:e,isSelected:!!s?.options?.find((({value:t})=>t===e))?.isSelected})));return[{id:Y,title:"Department",type:N.oo.MultiSelect,options:i},{id:Z,title:"Job Title",type:N.oo.MultiSelect,options:c}]},re=e=>{const t=e.context.selectedFilters?.find((e=>e.id===Y)),a=Array.isArray(t?.options)?t.options.filter((e=>e.isSelected)).map((e=>e.value)):[],n=e.context.selectedFilters?.find((e=>e.id===Z));return{department:a,jobTitle:Array.isArray(n?.options)?n.options.filter((e=>e.isSelected)).map((e=>e.value)):[]}},oe=(e,t)=>{const{department:a,jobTitle:n}=t;return e.filter((e=>(!a.length||a.includes(e.department))&&(!n.length||n.includes(e.jobTitle))))},ie=e=>{const t=Array.isArray(e.context.selectedFilters?.find((e=>e.id===Q))?.options)?e.context.selectedFilters.find((e=>e.id===Q))?.options:[];return{filterFiles:t&&t.some((({isSelected:e})=>e)),showWord:t.find((({value:e})=>"Word"===e))?.isSelected,showExcel:t.find((({value:e})=>"Excel"===e))?.isSelected,showPowerPoint:t.find((({value:e})=>"PowerPoint"===e))?.isSelected,showPDF:t.find((({value:e})=>"PDF"===e))?.isSelected,showOneNote:t.find((({value:e})=>"OneNote"===e))?.isSelected}},se=(e,t)=>{const a=[];return t.showWord&&a.push(".docx"),t.showExcel&&a.push(".xlsx"),t.showPowerPoint&&a.push(".pptx"),t.showPDF&&a.push(".pdf"),t.showOneNote&&a.push(".one"),e.filter((e=>{if(e.file){const t=e.name.substring(e.name.lastIndexOf("."));return a.includes(t)}return!1}))},ce=(e="")=>{switch(e.split(".").pop()?.toLowerCase()??""){case"docx":case"doc":return"Microsoft Word";case"xlsx":case"xls":return"Microsoft Excel";case"pptx":case"ppt":return"Microsoft PowerPoint";case"pdf":return"PDF";case"png":case"jpg":case"jpeg":case"gif":return"Image";case"txt":return"Text";default:return"File"}},de=(e="")=>{switch(e.split(".").pop()?.toLowerCase()??""){case"docx":case"doc":return(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365DocumentIcon);case"xlsx":case"xls":return(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365ExcelIcon);case"pptx":case"ppt":return(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365PowerpointIcon);case"pdf":return(0,E.OX)(O.sP.Microsoft365Assets.PDFFileIcon);default:return}},le=e=>e.replace(/\+/g,"_").replace(/\//g,"-");var ue,pe,he,fe,ge,me,we,ye,ke,ve,be,Se,Pe,Ce,Ae,xe,Me,Ie,Fe,We,Te,De=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)},Oe=function(e,t,a,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a};class Ee extends V{constructor(e){const t=M({},{workflows:{search:(z+=1,{homeProvider:{description:"Microsoft 365 search results provider",id:`MS365-${fin.me.identity.uuid}-${z}`,logoUrl:(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365Icon),icon:(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365Icon),title:"Microsoft 365 Search",inputPlaceholder:"What would you like to search in Microsoft 365 today?",dispatchFocusEvents:!0},microsoftEntityTypeConfig:{message:!0,chatMessage:!0,drive:!0,event:!0,user:!0,contact:!0,list:!0},useTeamsDeepLink:!0})}},e);super(t),ue.add(this),pe.set(this,void 0),this.workflowIntegrationName="Microsoft 365",he.set(this,void 0),fe.set(this,void 0),ge.set(this,1),me.set(this,new Set),we.set(this,new A(100)),ye.set(this,new R(6e4)),this.connect=async(e=this.config.connect)=>{const{clientId:t,tenantId:a,redirectUri:n}=e,r=this.config.workflows?.search?Object.entries(this.config.workflows?.search?.microsoftEntityTypeConfig??{}).filter((([e,t])=>t)).map((([e])=>K[e])).filter((e=>void 0!==e)).flat():[];this.config.connect=e,Oe(this,pe,await(0,H.connect)(t,a,n,[...new Set(r)]),"f")},ke.set(this,(()=>{if(!De(this,pe,"f"))throw new Error("Microsoft365WorkflowIntegration not connected");return De(this,pe,"f")})),Ce.set(this,(async e=>{if(Oe(this,fe,e,"f"),e.data?.item?.id){const t=De(this,ye,"f").get(e.data.item.id);if(t)return void De(this,he,"f").respond([t])}if("user"===e.data?.type)De(this,Fe,"f").call(this,e)})),Ae.set(this,(async e=>{await fin.Platform.getCurrentSync().createWindow({layout:{content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{url:e}}]}]},workspacePlatform:void 0})})),xe.set(this,(async e=>{if(e.data.item.channelIdentity.teamId){const t=new URL(`msteams:/l/channel/${e.data.item.channelIdentity.channelId}/${e.data.item.id}`);return!1===this.config.workflows?.search?.useTeamsDeepLink&&(t.protocol="https:"),t.searchParams.append("context",JSON.stringify({contextType:"channel"})),void await fin.System.openUrlWithBrowser(t.toString())}const t=new URL(`msteams:/l/message/${e.data.item.chatId}/${e.data.item.id}`);!1===this.config.workflows?.search?.useTeamsDeepLink&&(t.protocol="https:"),t.searchParams.append("context",JSON.stringify({contextType:"chat"})),await fin.System.openUrlWithBrowser(t.toString())})),Me.set(this,(async e=>{switch(e.action.name){case J:{const t=new H.TeamsConnection(De(this,ke,"f").call(this),this.config.workflows?.search?.useTeamsDeepLink);De(this,ue,"m",ve).call(this,(()=>t.startCall([e.data.item.mail])));break}case te:{const t=await this.executeApiRequest("/v1.0/me/messages","POST",{toRecipients:[{emailAddress:{address:e.data.item.mail}}]});let a=t.data.webLink;const n=new URL(t.data.webLink);if("/owa/"===n.pathname){const e=n.search.slice(1).split("&").reduce(((e,t)=>{const[a,n]=t.split("=");return e[a]=n,e}),{});if(e.ItemID){const t=e.ItemID;a=`${n.origin}/mail/deeplink/compose/${t}?ItemID=${t}&exvsurl=1`}}await fin.Platform.getCurrentSync().createView({url:a});break}case ee:{const t=De(this,ke,"f").call(this),a=new H.TeamsConnection(t,this.config.workflows?.search?.useTeamsDeepLink);De(this,ue,"m",ve).call(this,(()=>a.startChat({emailAddresses:[t.currentUser.mail,e.data.item.mail]})));break}default:console.warn("Unhandled user action for result:",e,`Unknown action "${e.action.name}"`)}})),Ie.set(this,(async e=>{switch(e.data.type){case"driveItem":De(this,Ae,"f").call(this,e.data.item.webUrl);break;case"event":{const t=e.data.item,a=await this.executeApiRequest(`/v1.0/me/events/${t.id}`);De(this,Ae,"f").call(this,a.data.webLink);break}case"chatMessage":De(this,xe,"f").call(this,e);break;case"message":De(this,Ae,"f").call(this,e.data.item.webLink);break;case"list":{const t=e.data.item,a=await this.executeApiRequest(`/v1.0/sites/${t.parentReference?.siteId}/lists/${t.id}`);De(this,Ae,"f").call(this,a.data.webUrl);break}case"user":De(this,Me,"f").call(this,e);break;default:console.warn("Unhandled user action for result:",e,`Unknown result type "${e.data.type}"`)}})),Fe.set(this,(async e=>{let t,a;const n=[],r=e.data.item;De(this,we,"f").has(r.id)?t=De(this,we,"f").get(r.id):n.push({id:"contactPhoto",method:"GET",url:`/users/${e.data.item.id}/photo/$value`,headers:{ConsistencyLevel:"eventual"}}),n.push({id:"presence",method:"GET",url:`/users/${e.data.item.id}/presence`});try{const e=await De(this,ue,"m",be).call(this,n),i=e.data?.responses.find((e=>"contactPhoto"===e.id));i&&200!==i.status&&console.warn("Error fetching user photo",i),i?.body&&200===i?.status&&(t=`data:image/jpeg;base64,${i.body}`,De(this,we,"f").put(r.id,t));const s=e.data?.responses.find((e=>"presence"===e.id));200!==s.status&&console.warn("Error fetching user presence",s),s?.body&&200===s.status&&(o=s.body,a={available:"available",availableidle:"available",away:"away",berightback:"away",busy:"busy",busyidle:"busy",donotdisturb:"do-not-disturb",offline:"offline",presenceunknown:"offline"}[o.availability?.toLowerCase()])}catch(e){console.error("Error fetching user data",e)}var o;const i=[["Department",r.department||"N/A"],["Email",r.mail||"N/A"],["Work Phone",r.businessPhones?.[0]||"N/A"],["Mobile",r.mobilePhone||"N/A"],["Location",r.officeLocation||"N/A"]],s={...e,template:N.fC.Contact,templateContent:{name:e.data.item.displayName,title:e.data.item.jobTitle,details:[i],photoUrl:t,onlineStatus:a,buttons:[{type:"button",icon:{light:(0,E.OX)(O.sP.CallIconLight),dark:(0,E.OX)(O.sP.CallIconDark)},tooltip:"Teams Call",action:J},{type:"button",icon:{light:(0,E.OX)(O.sP.ChatIconLight),dark:(0,E.OX)(O.sP.ChatIconDark)},tooltip:"Chat",action:ee},{type:"button",icon:{light:(0,E.OX)(O.sP.MessageIconLight),dark:(0,E.OX)(O.sP.MessageIconDark)},tooltip:"E-mail",action:te}]}};De(this,ye,"f").put(e.data.item.id,s),De(this,he,"f").respond([s])})),We.set(this,(async(e,t)=>{if(De(this,he,"f")&&De(this,he,"f").close(),Oe(this,he,t,"f"),De(this,he,"f").open(),e.query.length<De(this,ge,"f"))return{results:[]};const a=encodeURIComponent(e.query),n=[],r=((e,t)=>{const a=Array.isArray(e.context.selectedFilters?.find((e=>e.id===X))?.options)?e.context.selectedFilters.find((e=>e.id===X))?.options:[],n=a.every((({isSelected:e})=>!e));return{showDocuments:t.has("Document")&&(n||!!a.find((({value:e})=>"Document"===e))?.isSelected),showContacts:t.has("Contact")&&(n||!!a.find((({value:e})=>"Contact"===e))?.isSelected),showChatMessages:t.has("Chat Message")&&(n||!!a.find((({value:e})=>"Chat Message"===e))?.isSelected),showMessages:t.has("Email")&&(n||!!a.find((({value:e})=>"Email"===e))?.isSelected),showEvents:t.has("Event")&&(n||!!a.find((({value:e})=>"Event"===e))?.isSelected),showLists:t.has("List")&&(n||!!a.find((({value:e})=>"List"===e))?.isSelected)}})(e,De(this,me,"f"));if(r.showDocuments){const e=`'${a}'`;n.push({id:"driveItem",method:"GET",url:`/me/drive/root/search(q=${encodeURIComponent(e)})`,headers:{ConsistencyLevel:"eventual"}})}if(r.showEvents&&n.push({id:"event",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["event"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),r.showContacts){const t=`"${e.query}"`;n.push({id:"contact",method:"GET",url:`/me/contacts?$search=${encodeURIComponent(t)}&$top=10`});const a=["displayName","givenName","surname"].map((t=>`"${t}:${e.query}"`)).join(" OR ");n.push({id:"user",method:"GET",url:`/users?$search=${encodeURIComponent(a)}&$top=10&$select=id,displayName,department,mail,businessPhones,mobilePhone,officeLocation,jobTitle`,headers:{ConsistencyLevel:"eventual"}})}if(r.showMessages&&n.push({id:"message",method:"GET",url:`/me/messages?$select=sender,subject,bodyPreview,receivedDateTime,webLink&$search=${encodeURIComponent(`"${e.query}"`)}&$top=10`}),r.showChatMessages&&n.push({id:"chatMessage",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["chatMessage"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),r.showLists&&n.push({id:"list",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["list"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),0===n.length)return{results:[]};const{results:o,filters:i}=await De(this,ue,"m",Se).call(this,n,e);return o.find((e=>e.key===De(this,fe,"f")?.key))?.template===N.fC.Loading&&De(this,Ce,"f").call(this,De(this,fe,"f")),{results:o,context:{filters:i}}})),Te.set(this,(async e=>{switch(e.action.trigger){case Be.P.FocusChange:De(this,Ce,"f").call(this,e);break;case Be.P.UserAction:De(this,Ie,"f").call(this,e);break;case Be.P.Reload:break;default:console.warn(`Unknown action trigger: ${e.action.trigger}`)}})),this.initializeWorkflow=async e=>{if("search"!==e)throw new Error(`Attempted to initialize unknown workflow: ${e}`);await S.register({...this.config.workflows.search.homeProvider,onUserInput:De(this,We,"f"),onResultDispatch:De(this,Te,"f")}),(0,H.enableLogging)(),await this.connect(),super.initializeWorkflow(e)},Object.entries(t.workflows?.search?.microsoftEntityTypeConfig||{}).filter((([e,t])=>t)).forEach((([e])=>{De(this,me,"f").add(q[e])}))}async executeApiRequest(...e){return De(this,ue,"m",ve).call(this,(()=>De(this,ke,"f").call(this).executeApiRequest(...e)))}}pe=new WeakMap,he=new WeakMap,fe=new WeakMap,ge=new WeakMap,me=new WeakMap,we=new WeakMap,ye=new WeakMap,ke=new WeakMap,Ce=new WeakMap,Ae=new WeakMap,xe=new WeakMap,Me=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,We=new WeakMap,Te=new WeakMap,ue=new WeakSet,ve=async function(e){try{return await e()}catch(t){if(t instanceof H.AuthTokenExpiredError)return await this.connect(),e();throw t}},be=async function(e){return this.executeApiRequest("/v1.0/$batch","POST",{requests:e})},Se=async function(e,t){try{const a=await De(this,ue,"m",be).call(this,e);return{filters:[...ae(t,De(this,me,"f")),...ne(a.data.responses.find((e=>"user"===e.id))?.body?.value||[],t)],results:De(this,ue,"m",Pe).call(this,a,t)}}catch(e){return console.warn("Failed to execute Batch API request: ",e),{filters:[],results:[{key:(0,L.N)(),title:"Error Fetching Search Results",description:"",actions:[],template:N.fC.Error,templateContent:`Failed to execute Batch API request: ${JSON.stringify(e)}`}]}}},Pe=function(e,t){let a=[];for(const n of e.data.responses)if(200===n.status)switch(n.id){case"driveItem":{const e=ie(t),r=e.filterFiles?se(n.body.value,e):n.body.value;a.push(...(r||[]).map((e=>({key:e.id??(0,L.N)(),title:e.name??"",description:e.file?.mimeType??"",label:ce(e.name),icon:de(e.name),data:{type:"driveItem",item:e},actions:[{name:"Launch"}],template:N.fC.Plain,templateContent:void 0}))));break}case"event":a.push(...n.body?.value?.[0]?.hitsContainers?.[0]?.hits?.filter((e=>e.resource.subject)).map((e=>{const t=e.resource,a=le(e.hitId);return{key:a,title:t.subject??"",label:"Calendar Event",icon:(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[{name:"Launch"}],data:{type:"event",item:{...t,id:a}},template:N.fC.Plain,templateContent:void 0}}))||[]);break;case"contact":{const e=re(t),r=oe(n.body.value||[],e);a.push(...(r||[]).map((e=>({key:e.id??(0,L.N)(),title:e.displayName??"",label:"Outlook contact",icon:(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[],data:{type:"contact",item:e},template:N.fC.Plain,templateContent:void 0}))));break}case"user":{const e=re(t),r=oe(n.body.value||[],e);a.push(...(r||[]).map((e=>({key:e.id??(0,L.N)(),title:e.displayName??"",label:"Teams contact",icon:(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365TeamsIcon),actions:[],data:{type:"user",item:e},template:N.fC.Loading,templateContent:void 0}))));break}case"message":a.push(...(n.body.value||[]).map((e=>({key:e.id??(0,L.N)(),title:`${e.subject??"Untitled Message"}${e.isDraft?" (Draft)":""}`,label:"Email",icon:(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[],data:{type:"message",item:e},template:N.fC.Plain,templateContent:void 0}))));break;case"chatMessage":a.push(...n.body?.value?.[0]?.hitsContainers?.[0]?.hits?.map((e=>{const t=e.resource;return{key:t.id??(0,L.N)(),title:e.summary??"Untitled Message",label:"Chat",icon:(0,E.OX)(O.sP.Microsoft365Assets.Microsoft365TeamsIcon),actions:[],data:{type:"chatMessage",item:t},template:N.fC.Plain,templateContent:void 0}}))||[]);break;case"list":a.push(...n.body?.value?.[0]?.hitsContainers?.[0]?.hits?.map((e=>{const t=e.resource,a=le(e.hitId);return{key:a,title:t.displayName??"Untitled List",label:"List",actions:[{name:"Launch"}],data:{type:"list",item:{...t,id:a}},template:N.fC.Plain,templateContent:void 0}}))||[]);break;default:console.warn(`Unknown batch response id: ${n.id}`,n.body)}else console.warn("Batch API request failed: ",n);return a=a.map((e=>{if(!e.data?.item?.id)return e;const t=De(this,ye,"f").get(e.data.item.id);return t?{...e,template:t.template,templateContent:t.templateContent}:e})),a.sort(((e,t)=>e.title>t.title?1:-1))};var _e=a(598),Be=a(129),Re=a(184),$e=a(710)})(),module.exports=n})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/dexie/dist/dexie.js":
/*!**********************************************!*\
  !*** ../../node_modules/dexie/dist/dexie.js ***!
  \**********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*
 * Dexie.js - a minimalistic wrapper for IndexedDB
 * ===============================================
 *
 * By David Fahlander, david.fahlander@gmail.com
 *
 * Version 4.0.11, Wed Jan 15 2025
 *
 * https://dexie.org
 *
 * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/
 */
 
(function (global, factory) {
     true ? module.exports = factory() :
    0;
})(this, (function () { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
        return to.concat(ar || Array.prototype.slice.call(from));
    }

    var _global = typeof globalThis !== 'undefined' ? globalThis :
        typeof self !== 'undefined' ? self :
            typeof window !== 'undefined' ? window :
                __webpack_require__.g;

    var keys = Object.keys;
    var isArray = Array.isArray;
    if (typeof Promise !== 'undefined' && !_global.Promise) {
        _global.Promise = Promise;
    }
    function extend(obj, extension) {
        if (typeof extension !== 'object')
            return obj;
        keys(extension).forEach(function (key) {
            obj[key] = extension[key];
        });
        return obj;
    }
    var getProto = Object.getPrototypeOf;
    var _hasOwn = {}.hasOwnProperty;
    function hasOwn(obj, prop) {
        return _hasOwn.call(obj, prop);
    }
    function props(proto, extension) {
        if (typeof extension === 'function')
            extension = extension(getProto(proto));
        (typeof Reflect === "undefined" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {
            setProp(proto, key, extension[key]);
        });
    }
    var defineProperty = Object.defineProperty;
    function setProp(obj, prop, functionOrGetSet, options) {
        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, "get") && typeof functionOrGetSet.get === 'function' ?
            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :
            { value: functionOrGetSet, configurable: true, writable: true }, options));
    }
    function derive(Child) {
        return {
            from: function (Parent) {
                Child.prototype = Object.create(Parent.prototype);
                setProp(Child.prototype, "constructor", Child);
                return {
                    extend: props.bind(null, Child.prototype)
                };
            }
        };
    }
    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    function getPropertyDescriptor(obj, prop) {
        var pd = getOwnPropertyDescriptor(obj, prop);
        var proto;
        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);
    }
    var _slice = [].slice;
    function slice(args, start, end) {
        return _slice.call(args, start, end);
    }
    function override(origFunc, overridedFactory) {
        return overridedFactory(origFunc);
    }
    function assert(b) {
        if (!b)
            throw new Error("Assertion Failed");
    }
    function asap$1(fn) {
        if (_global.setImmediate)
            setImmediate(fn);
        else
            setTimeout(fn, 0);
    }
    function arrayToObject(array, extractor) {
        return array.reduce(function (result, item, i) {
            var nameAndValue = extractor(item, i);
            if (nameAndValue)
                result[nameAndValue[0]] = nameAndValue[1];
            return result;
        }, {});
    }
    function getByKeyPath(obj, keyPath) {
        if (typeof keyPath === 'string' && hasOwn(obj, keyPath))
            return obj[keyPath];
        if (!keyPath)
            return obj;
        if (typeof keyPath !== 'string') {
            var rv = [];
            for (var i = 0, l = keyPath.length; i < l; ++i) {
                var val = getByKeyPath(obj, keyPath[i]);
                rv.push(val);
            }
            return rv;
        }
        var period = keyPath.indexOf('.');
        if (period !== -1) {
            var innerObj = obj[keyPath.substr(0, period)];
            return innerObj == null ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));
        }
        return undefined;
    }
    function setByKeyPath(obj, keyPath, value) {
        if (!obj || keyPath === undefined)
            return;
        if ('isFrozen' in Object && Object.isFrozen(obj))
            return;
        if (typeof keyPath !== 'string' && 'length' in keyPath) {
            assert(typeof value !== 'string' && 'length' in value);
            for (var i = 0, l = keyPath.length; i < l; ++i) {
                setByKeyPath(obj, keyPath[i], value[i]);
            }
        }
        else {
            var period = keyPath.indexOf('.');
            if (period !== -1) {
                var currentKeyPath = keyPath.substr(0, period);
                var remainingKeyPath = keyPath.substr(period + 1);
                if (remainingKeyPath === "")
                    if (value === undefined) {
                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))
                            obj.splice(currentKeyPath, 1);
                        else
                            delete obj[currentKeyPath];
                    }
                    else
                        obj[currentKeyPath] = value;
                else {
                    var innerObj = obj[currentKeyPath];
                    if (!innerObj || !hasOwn(obj, currentKeyPath))
                        innerObj = (obj[currentKeyPath] = {});
                    setByKeyPath(innerObj, remainingKeyPath, value);
                }
            }
            else {
                if (value === undefined) {
                    if (isArray(obj) && !isNaN(parseInt(keyPath)))
                        obj.splice(keyPath, 1);
                    else
                        delete obj[keyPath];
                }
                else
                    obj[keyPath] = value;
            }
        }
    }
    function delByKeyPath(obj, keyPath) {
        if (typeof keyPath === 'string')
            setByKeyPath(obj, keyPath, undefined);
        else if ('length' in keyPath)
            [].map.call(keyPath, function (kp) {
                setByKeyPath(obj, kp, undefined);
            });
    }
    function shallowClone(obj) {
        var rv = {};
        for (var m in obj) {
            if (hasOwn(obj, m))
                rv[m] = obj[m];
        }
        return rv;
    }
    var concat = [].concat;
    function flatten(a) {
        return concat.apply([], a);
    }
    var intrinsicTypeNames = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey"
        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return ["Int", "Uint", "Float"].map(function (t) { return t + num + "Array"; }); }))).filter(function (t) { return _global[t]; });
    var intrinsicTypes = new Set(intrinsicTypeNames.map(function (t) { return _global[t]; }));
    function cloneSimpleObjectTree(o) {
        var rv = {};
        for (var k in o)
            if (hasOwn(o, k)) {
                var v = o[k];
                rv[k] = !v || typeof v !== 'object' || intrinsicTypes.has(v.constructor) ? v : cloneSimpleObjectTree(v);
            }
        return rv;
    }
    function objectIsEmpty(o) {
        for (var k in o)
            if (hasOwn(o, k))
                return false;
        return true;
    }
    var circularRefs = null;
    function deepClone(any) {
        circularRefs = new WeakMap();
        var rv = innerDeepClone(any);
        circularRefs = null;
        return rv;
    }
    function innerDeepClone(x) {
        if (!x || typeof x !== 'object')
            return x;
        var rv = circularRefs.get(x);
        if (rv)
            return rv;
        if (isArray(x)) {
            rv = [];
            circularRefs.set(x, rv);
            for (var i = 0, l = x.length; i < l; ++i) {
                rv.push(innerDeepClone(x[i]));
            }
        }
        else if (intrinsicTypes.has(x.constructor)) {
            rv = x;
        }
        else {
            var proto = getProto(x);
            rv = proto === Object.prototype ? {} : Object.create(proto);
            circularRefs.set(x, rv);
            for (var prop in x) {
                if (hasOwn(x, prop)) {
                    rv[prop] = innerDeepClone(x[prop]);
                }
            }
        }
        return rv;
    }
    var toString = {}.toString;
    function toStringTag(o) {
        return toString.call(o).slice(8, -1);
    }
    var iteratorSymbol = typeof Symbol !== 'undefined' ?
        Symbol.iterator :
        '@@iterator';
    var getIteratorOf = typeof iteratorSymbol === "symbol" ? function (x) {
        var i;
        return x != null && (i = x[iteratorSymbol]) && i.apply(x);
    } : function () { return null; };
    function delArrayItem(a, x) {
        var i = a.indexOf(x);
        if (i >= 0)
            a.splice(i, 1);
        return i >= 0;
    }
    var NO_CHAR_ARRAY = {};
    function getArrayOf(arrayLike) {
        var i, a, x, it;
        if (arguments.length === 1) {
            if (isArray(arrayLike))
                return arrayLike.slice();
            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')
                return [arrayLike];
            if ((it = getIteratorOf(arrayLike))) {
                a = [];
                while ((x = it.next()), !x.done)
                    a.push(x.value);
                return a;
            }
            if (arrayLike == null)
                return [arrayLike];
            i = arrayLike.length;
            if (typeof i === 'number') {
                a = new Array(i);
                while (i--)
                    a[i] = arrayLike[i];
                return a;
            }
            return [arrayLike];
        }
        i = arguments.length;
        a = new Array(i);
        while (i--)
            a[i] = arguments[i];
        return a;
    }
    var isAsyncFunction = typeof Symbol !== 'undefined'
        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }
        : function () { return false; };

    var dexieErrorNames = [
        'Modify',
        'Bulk',
        'OpenFailed',
        'VersionChange',
        'Schema',
        'Upgrade',
        'InvalidTable',
        'MissingAPI',
        'NoSuchDatabase',
        'InvalidArgument',
        'SubTransaction',
        'Unsupported',
        'Internal',
        'DatabaseClosed',
        'PrematureCommit',
        'ForeignAwait'
    ];
    var idbDomErrorNames = [
        'Unknown',
        'Constraint',
        'Data',
        'TransactionInactive',
        'ReadOnly',
        'Version',
        'NotFound',
        'InvalidState',
        'InvalidAccess',
        'Abort',
        'Timeout',
        'QuotaExceeded',
        'Syntax',
        'DataClone'
    ];
    var errorList = dexieErrorNames.concat(idbDomErrorNames);
    var defaultTexts = {
        VersionChanged: "Database version changed by other database connection",
        DatabaseClosed: "Database has been closed",
        Abort: "Transaction aborted",
        TransactionInactive: "Transaction has already completed or failed",
        MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"
    };
    function DexieError(name, msg) {
        this.name = name;
        this.message = msg;
    }
    derive(DexieError).from(Error).extend({
        toString: function () { return this.name + ": " + this.message; }
    });
    function getMultiErrorMessage(msg, failures) {
        return msg + ". Errors: " + Object.keys(failures)
            .map(function (key) { return failures[key].toString(); })
            .filter(function (v, i, s) { return s.indexOf(v) === i; })
            .join('\n');
    }
    function ModifyError(msg, failures, successCount, failedKeys) {
        this.failures = failures;
        this.failedKeys = failedKeys;
        this.successCount = successCount;
        this.message = getMultiErrorMessage(msg, failures);
    }
    derive(ModifyError).from(DexieError);
    function BulkError(msg, failures) {
        this.name = "BulkError";
        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });
        this.failuresByPos = failures;
        this.message = getMultiErrorMessage(msg, this.failures);
    }
    derive(BulkError).from(DexieError);
    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + "Error", obj); }, {});
    var BaseException = DexieError;
    var exceptions = errorList.reduce(function (obj, name) {
        var fullName = name + "Error";
        function DexieError(msgOrInner, inner) {
            this.name = fullName;
            if (!msgOrInner) {
                this.message = defaultTexts[name] || fullName;
                this.inner = null;
            }
            else if (typeof msgOrInner === 'string') {
                this.message = "".concat(msgOrInner).concat(!inner ? '' : '\n ' + inner);
                this.inner = inner || null;
            }
            else if (typeof msgOrInner === 'object') {
                this.message = "".concat(msgOrInner.name, " ").concat(msgOrInner.message);
                this.inner = msgOrInner;
            }
        }
        derive(DexieError).from(BaseException);
        obj[name] = DexieError;
        return obj;
    }, {});
    exceptions.Syntax = SyntaxError;
    exceptions.Type = TypeError;
    exceptions.Range = RangeError;
    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {
        obj[name + "Error"] = exceptions[name];
        return obj;
    }, {});
    function mapError(domError, message) {
        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])
            return domError;
        var rv = new exceptionMap[domError.name](message || domError.message, domError);
        if ("stack" in domError) {
            setProp(rv, "stack", { get: function () {
                    return this.inner.stack;
                } });
        }
        return rv;
    }
    var fullNameExceptions = errorList.reduce(function (obj, name) {
        if (["Syntax", "Type", "Range"].indexOf(name) === -1)
            obj[name + "Error"] = exceptions[name];
        return obj;
    }, {});
    fullNameExceptions.ModifyError = ModifyError;
    fullNameExceptions.DexieError = DexieError;
    fullNameExceptions.BulkError = BulkError;

    function nop() { }
    function mirror(val) { return val; }
    function pureFunctionChain(f1, f2) {
        if (f1 == null || f1 === mirror)
            return f2;
        return function (val) {
            return f2(f1(val));
        };
    }
    function callBoth(on1, on2) {
        return function () {
            on1.apply(this, arguments);
            on2.apply(this, arguments);
        };
    }
    function hookCreatingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            var res = f1.apply(this, arguments);
            if (res !== undefined)
                arguments[0] = res;
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = null;
            this.onerror = null;
            var res2 = f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
            return res2 !== undefined ? res2 : res;
        };
    }
    function hookDeletingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            f1.apply(this, arguments);
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = this.onerror = null;
            f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
        };
    }
    function hookUpdatingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function (modifications) {
            var res = f1.apply(this, arguments);
            extend(modifications, res);
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = null;
            this.onerror = null;
            var res2 = f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
            return res === undefined ?
                (res2 === undefined ? undefined : res2) :
                (extend(res, res2));
        };
    }
    function reverseStoppableEventChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            if (f2.apply(this, arguments) === false)
                return false;
            return f1.apply(this, arguments);
        };
    }
    function promisableChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            var res = f1.apply(this, arguments);
            if (res && typeof res.then === 'function') {
                var thiz = this, i = arguments.length, args = new Array(i);
                while (i--)
                    args[i] = arguments[i];
                return res.then(function () {
                    return f2.apply(thiz, args);
                });
            }
            return f2.apply(this, arguments);
        };
    }

    var debug = typeof location !== 'undefined' &&
        /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
    function setDebug(value, filter) {
        debug = value;
    }

    var INTERNAL = {};
    var ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?
        [] :
        (function () {
            var globalP = Promise.resolve();
            if (typeof crypto === 'undefined' || !crypto.subtle)
                return [globalP, getProto(globalP), globalP];
            var nativeP = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
            return [
                nativeP,
                getProto(nativeP),
                globalP
            ];
        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;
    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;
    var patchGlobalPromise = !!resolvedGlobalPromise;
    function schedulePhysicalTick() {
        queueMicrotask(physicalTick);
    }
    var asap = function (callback, args) {
        microtickQueue.push([callback, args]);
        if (needsNewPhysicalTick) {
            schedulePhysicalTick();
            needsNewPhysicalTick = false;
        }
    };
    var isOutsideMicroTick = true,
    needsNewPhysicalTick = true,
    unhandledErrors = [],
    rejectingErrors = [],
    rejectionMapper = mirror;
    var globalPSD = {
        id: 'global',
        global: true,
        ref: 0,
        unhandleds: [],
        onunhandled: nop,
        pgp: false,
        env: {},
        finalize: nop
    };
    var PSD = globalPSD;
    var microtickQueue = [];
    var numScheduledCalls = 0;
    var tickFinalizers = [];
    function DexiePromise(fn) {
        if (typeof this !== 'object')
            throw new TypeError('Promises must be constructed via new');
        this._listeners = [];
        this._lib = false;
        var psd = (this._PSD = PSD);
        if (typeof fn !== 'function') {
            if (fn !== INTERNAL)
                throw new TypeError('Not a function');
            this._state = arguments[1];
            this._value = arguments[2];
            if (this._state === false)
                handleRejection(this, this._value);
            return;
        }
        this._state = null;
        this._value = null;
        ++psd.ref;
        executePromiseTask(this, fn);
    }
    var thenProp = {
        get: function () {
            var psd = PSD, microTaskId = totalEchoes;
            function then(onFulfilled, onRejected) {
                var _this = this;
                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);
                var cleanup = possibleAwait && !decrementExpectedAwaits();
                var rv = new DexiePromise(function (resolve, reject) {
                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));
                });
                if (this._consoleTask)
                    rv._consoleTask = this._consoleTask;
                return rv;
            }
            then.prototype = INTERNAL;
            return then;
        },
        set: function (value) {
            setProp(this, 'then', value && value.prototype === INTERNAL ?
                thenProp :
                {
                    get: function () {
                        return value;
                    },
                    set: thenProp.set
                });
        }
    };
    props(DexiePromise.prototype, {
        then: thenProp,
        _then: function (onFulfilled, onRejected) {
            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));
        },
        catch: function (onRejected) {
            if (arguments.length === 1)
                return this.then(null, onRejected);
            var type = arguments[0], handler = arguments[1];
            return typeof type === 'function' ? this.then(null, function (err) {
                return err instanceof type ? handler(err) : PromiseReject(err);
            })
                : this.then(null, function (err) {
                    return err && err.name === type ? handler(err) : PromiseReject(err);
                });
        },
        finally: function (onFinally) {
            return this.then(function (value) {
                return DexiePromise.resolve(onFinally()).then(function () { return value; });
            }, function (err) {
                return DexiePromise.resolve(onFinally()).then(function () { return PromiseReject(err); });
            });
        },
        timeout: function (ms, msg) {
            var _this = this;
            return ms < Infinity ?
                new DexiePromise(function (resolve, reject) {
                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);
                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));
                }) : this;
        }
    });
    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)
        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');
    globalPSD.env = snapShot();
    function Listener(onFulfilled, onRejected, resolve, reject, zone) {
        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
        this.onRejected = typeof onRejected === 'function' ? onRejected : null;
        this.resolve = resolve;
        this.reject = reject;
        this.psd = zone;
    }
    props(DexiePromise, {
        all: function () {
            var values = getArrayOf.apply(null, arguments)
                .map(onPossibleParallellAsync);
            return new DexiePromise(function (resolve, reject) {
                if (values.length === 0)
                    resolve([]);
                var remaining = values.length;
                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {
                    values[i] = x;
                    if (!--remaining)
                        resolve(values);
                }, reject); });
            });
        },
        resolve: function (value) {
            if (value instanceof DexiePromise)
                return value;
            if (value && typeof value.then === 'function')
                return new DexiePromise(function (resolve, reject) {
                    value.then(resolve, reject);
                });
            var rv = new DexiePromise(INTERNAL, true, value);
            return rv;
        },
        reject: PromiseReject,
        race: function () {
            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
            return new DexiePromise(function (resolve, reject) {
                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });
            });
        },
        PSD: {
            get: function () { return PSD; },
            set: function (value) { return PSD = value; }
        },
        totalEchoes: { get: function () { return totalEchoes; } },
        newPSD: newScope,
        usePSD: usePSD,
        scheduler: {
            get: function () { return asap; },
            set: function (value) { asap = value; }
        },
        rejectionMapper: {
            get: function () { return rejectionMapper; },
            set: function (value) { rejectionMapper = value; }
        },
        follow: function (fn, zoneProps) {
            return new DexiePromise(function (resolve, reject) {
                return newScope(function (resolve, reject) {
                    var psd = PSD;
                    psd.unhandleds = [];
                    psd.onunhandled = reject;
                    psd.finalize = callBoth(function () {
                        var _this = this;
                        run_at_end_of_this_or_next_physical_tick(function () {
                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);
                        });
                    }, psd.finalize);
                    fn();
                }, zoneProps, resolve, reject);
            });
        }
    });
    if (NativePromise) {
        if (NativePromise.allSettled)
            setProp(DexiePromise, "allSettled", function () {
                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
                return new DexiePromise(function (resolve) {
                    if (possiblePromises.length === 0)
                        resolve([]);
                    var remaining = possiblePromises.length;
                    var results = new Array(remaining);
                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: "fulfilled", value: value }; }, function (reason) { return results[i] = { status: "rejected", reason: reason }; })
                        .then(function () { return --remaining || resolve(results); }); });
                });
            });
        if (NativePromise.any && typeof AggregateError !== 'undefined')
            setProp(DexiePromise, "any", function () {
                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
                return new DexiePromise(function (resolve, reject) {
                    if (possiblePromises.length === 0)
                        reject(new AggregateError([]));
                    var remaining = possiblePromises.length;
                    var failures = new Array(remaining);
                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {
                        failures[i] = failure;
                        if (!--remaining)
                            reject(new AggregateError(failures));
                    }); });
                });
            });
        if (NativePromise.withResolvers)
            DexiePromise.withResolvers = NativePromise.withResolvers;
    }
    function executePromiseTask(promise, fn) {
        try {
            fn(function (value) {
                if (promise._state !== null)
                    return;
                if (value === promise)
                    throw new TypeError('A promise cannot be resolved with itself.');
                var shouldExecuteTick = promise._lib && beginMicroTickScope();
                if (value && typeof value.then === 'function') {
                    executePromiseTask(promise, function (resolve, reject) {
                        value instanceof DexiePromise ?
                            value._then(resolve, reject) :
                            value.then(resolve, reject);
                    });
                }
                else {
                    promise._state = true;
                    promise._value = value;
                    propagateAllListeners(promise);
                }
                if (shouldExecuteTick)
                    endMicroTickScope();
            }, handleRejection.bind(null, promise));
        }
        catch (ex) {
            handleRejection(promise, ex);
        }
    }
    function handleRejection(promise, reason) {
        rejectingErrors.push(reason);
        if (promise._state !== null)
            return;
        var shouldExecuteTick = promise._lib && beginMicroTickScope();
        reason = rejectionMapper(reason);
        promise._state = false;
        promise._value = reason;
        addPossiblyUnhandledError(promise);
        propagateAllListeners(promise);
        if (shouldExecuteTick)
            endMicroTickScope();
    }
    function propagateAllListeners(promise) {
        var listeners = promise._listeners;
        promise._listeners = [];
        for (var i = 0, len = listeners.length; i < len; ++i) {
            propagateToListener(promise, listeners[i]);
        }
        var psd = promise._PSD;
        --psd.ref || psd.finalize();
        if (numScheduledCalls === 0) {
            ++numScheduledCalls;
            asap(function () {
                if (--numScheduledCalls === 0)
                    finalizePhysicalTick();
            }, []);
        }
    }
    function propagateToListener(promise, listener) {
        if (promise._state === null) {
            promise._listeners.push(listener);
            return;
        }
        var cb = promise._state ? listener.onFulfilled : listener.onRejected;
        if (cb === null) {
            return (promise._state ? listener.resolve : listener.reject)(promise._value);
        }
        ++listener.psd.ref;
        ++numScheduledCalls;
        asap(callListener, [cb, promise, listener]);
    }
    function callListener(cb, promise, listener) {
        try {
            var ret, value = promise._value;
            if (!promise._state && rejectingErrors.length)
                rejectingErrors = [];
            ret = debug && promise._consoleTask ? promise._consoleTask.run(function () { return cb(value); }) : cb(value);
            if (!promise._state && rejectingErrors.indexOf(value) === -1) {
                markErrorAsHandled(promise);
            }
            listener.resolve(ret);
        }
        catch (e) {
            listener.reject(e);
        }
        finally {
            if (--numScheduledCalls === 0)
                finalizePhysicalTick();
            --listener.psd.ref || listener.psd.finalize();
        }
    }
    function physicalTick() {
        usePSD(globalPSD, function () {
            beginMicroTickScope() && endMicroTickScope();
        });
    }
    function beginMicroTickScope() {
        var wasRootExec = isOutsideMicroTick;
        isOutsideMicroTick = false;
        needsNewPhysicalTick = false;
        return wasRootExec;
    }
    function endMicroTickScope() {
        var callbacks, i, l;
        do {
            while (microtickQueue.length > 0) {
                callbacks = microtickQueue;
                microtickQueue = [];
                l = callbacks.length;
                for (i = 0; i < l; ++i) {
                    var item = callbacks[i];
                    item[0].apply(null, item[1]);
                }
            }
        } while (microtickQueue.length > 0);
        isOutsideMicroTick = true;
        needsNewPhysicalTick = true;
    }
    function finalizePhysicalTick() {
        var unhandledErrs = unhandledErrors;
        unhandledErrors = [];
        unhandledErrs.forEach(function (p) {
            p._PSD.onunhandled.call(null, p._value, p);
        });
        var finalizers = tickFinalizers.slice(0);
        var i = finalizers.length;
        while (i)
            finalizers[--i]();
    }
    function run_at_end_of_this_or_next_physical_tick(fn) {
        function finalizer() {
            fn();
            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);
        }
        tickFinalizers.push(finalizer);
        ++numScheduledCalls;
        asap(function () {
            if (--numScheduledCalls === 0)
                finalizePhysicalTick();
        }, []);
    }
    function addPossiblyUnhandledError(promise) {
        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))
            unhandledErrors.push(promise);
    }
    function markErrorAsHandled(promise) {
        var i = unhandledErrors.length;
        while (i)
            if (unhandledErrors[--i]._value === promise._value) {
                unhandledErrors.splice(i, 1);
                return;
            }
    }
    function PromiseReject(reason) {
        return new DexiePromise(INTERNAL, false, reason);
    }
    function wrap(fn, errorCatcher) {
        var psd = PSD;
        return function () {
            var wasRootExec = beginMicroTickScope(), outerScope = PSD;
            try {
                switchToZone(psd, true);
                return fn.apply(this, arguments);
            }
            catch (e) {
                errorCatcher && errorCatcher(e);
            }
            finally {
                switchToZone(outerScope, false);
                if (wasRootExec)
                    endMicroTickScope();
            }
        };
    }
    var task = { awaits: 0, echoes: 0, id: 0 };
    var taskCounter = 0;
    var zoneStack = [];
    var zoneEchoes = 0;
    var totalEchoes = 0;
    var zone_id_counter = 0;
    function newScope(fn, props, a1, a2) {
        var parent = PSD, psd = Object.create(parent);
        psd.parent = parent;
        psd.ref = 0;
        psd.global = false;
        psd.id = ++zone_id_counter;
        globalPSD.env;
        psd.env = patchGlobalPromise ? {
            Promise: DexiePromise,
            PromiseProp: { value: DexiePromise, configurable: true, writable: true },
            all: DexiePromise.all,
            race: DexiePromise.race,
            allSettled: DexiePromise.allSettled,
            any: DexiePromise.any,
            resolve: DexiePromise.resolve,
            reject: DexiePromise.reject,
        } : {};
        if (props)
            extend(psd, props);
        ++parent.ref;
        psd.finalize = function () {
            --this.parent.ref || this.parent.finalize();
        };
        var rv = usePSD(psd, fn, a1, a2);
        if (psd.ref === 0)
            psd.finalize();
        return rv;
    }
    function incrementExpectedAwaits() {
        if (!task.id)
            task.id = ++taskCounter;
        ++task.awaits;
        task.echoes += ZONE_ECHO_LIMIT;
        return task.id;
    }
    function decrementExpectedAwaits() {
        if (!task.awaits)
            return false;
        if (--task.awaits === 0)
            task.id = 0;
        task.echoes = task.awaits * ZONE_ECHO_LIMIT;
        return true;
    }
    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {
        incrementExpectedAwaits = decrementExpectedAwaits = nop;
    }
    function onPossibleParallellAsync(possiblePromise) {
        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {
            incrementExpectedAwaits();
            return possiblePromise.then(function (x) {
                decrementExpectedAwaits();
                return x;
            }, function (e) {
                decrementExpectedAwaits();
                return rejection(e);
            });
        }
        return possiblePromise;
    }
    function zoneEnterEcho(targetZone) {
        ++totalEchoes;
        if (!task.echoes || --task.echoes === 0) {
            task.echoes = task.awaits = task.id = 0;
        }
        zoneStack.push(PSD);
        switchToZone(targetZone, true);
    }
    function zoneLeaveEcho() {
        var zone = zoneStack[zoneStack.length - 1];
        zoneStack.pop();
        switchToZone(zone, false);
    }
    function switchToZone(targetZone, bEnteringZone) {
        var currentZone = PSD;
        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {
            queueMicrotask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);
        }
        if (targetZone === PSD)
            return;
        PSD = targetZone;
        if (currentZone === globalPSD)
            globalPSD.env = snapShot();
        if (patchGlobalPromise) {
            var GlobalPromise = globalPSD.env.Promise;
            var targetEnv = targetZone.env;
            if (currentZone.global || targetZone.global) {
                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);
                GlobalPromise.all = targetEnv.all;
                GlobalPromise.race = targetEnv.race;
                GlobalPromise.resolve = targetEnv.resolve;
                GlobalPromise.reject = targetEnv.reject;
                if (targetEnv.allSettled)
                    GlobalPromise.allSettled = targetEnv.allSettled;
                if (targetEnv.any)
                    GlobalPromise.any = targetEnv.any;
            }
        }
    }
    function snapShot() {
        var GlobalPromise = _global.Promise;
        return patchGlobalPromise ? {
            Promise: GlobalPromise,
            PromiseProp: Object.getOwnPropertyDescriptor(_global, "Promise"),
            all: GlobalPromise.all,
            race: GlobalPromise.race,
            allSettled: GlobalPromise.allSettled,
            any: GlobalPromise.any,
            resolve: GlobalPromise.resolve,
            reject: GlobalPromise.reject,
        } : {};
    }
    function usePSD(psd, fn, a1, a2, a3) {
        var outerScope = PSD;
        try {
            switchToZone(psd, true);
            return fn(a1, a2, a3);
        }
        finally {
            switchToZone(outerScope, false);
        }
    }
    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {
        return typeof fn !== 'function' ? fn : function () {
            var outerZone = PSD;
            if (possibleAwait)
                incrementExpectedAwaits();
            switchToZone(zone, true);
            try {
                return fn.apply(this, arguments);
            }
            finally {
                switchToZone(outerZone, false);
                if (cleanup)
                    queueMicrotask(decrementExpectedAwaits);
            }
        };
    }
    function execInGlobalContext(cb) {
        if (Promise === NativePromise && task.echoes === 0) {
            if (zoneEchoes === 0) {
                cb();
            }
            else {
                enqueueNativeMicroTask(cb);
            }
        }
        else {
            setTimeout(cb, 0);
        }
    }
    var rejection = DexiePromise.reject;

    function tempTransaction(db, mode, storeNames, fn) {
        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {
            if (db._state.openComplete) {
                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));
            }
            if (!db._state.isBeingOpened) {
                if (!db._state.autoOpen)
                    return rejection(new exceptions.DatabaseClosed());
                db.open().catch(nop);
            }
            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });
        }
        else {
            var trans = db._createTransaction(mode, storeNames, db._dbSchema);
            try {
                trans.create();
                db._state.PR1398_maxLoop = 3;
            }
            catch (ex) {
                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {
                    console.warn('Dexie: Need to reopen db');
                    db.close({ disableAutoOpen: false });
                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });
                }
                return rejection(ex);
            }
            return trans._promise(mode, function (resolve, reject) {
                return newScope(function () {
                    PSD.trans = trans;
                    return fn(resolve, reject, trans);
                });
            }).then(function (result) {
                if (mode === 'readwrite')
                    try {
                        trans.idbtrans.commit();
                    }
                    catch (_a) { }
                return mode === 'readonly' ? result : trans._completion.then(function () { return result; });
            });
        }
    }

    var DEXIE_VERSION = '4.0.11';
    var maxString = String.fromCharCode(65535);
    var minKey = -Infinity;
    var INVALID_KEY_ARGUMENT = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";
    var STRING_EXPECTED = "String expected.";
    var connections = [];
    var DBNAMES_DB = '__dbnames';
    var READONLY = 'readonly';
    var READWRITE = 'readwrite';

    function combine(filter1, filter2) {
        return filter1 ?
            filter2 ?
                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :
                filter1 :
            filter2;
    }

    var AnyRange = {
        type: 3 ,
        lower: -Infinity,
        lowerOpen: false,
        upper: [[]],
        upperOpen: false
    };

    function workaroundForUndefinedPrimKey(keyPath) {
        return typeof keyPath === "string" && !/\./.test(keyPath)
            ? function (obj) {
                if (obj[keyPath] === undefined && (keyPath in obj)) {
                    obj = deepClone(obj);
                    delete obj[keyPath];
                }
                return obj;
            }
            : function (obj) { return obj; };
    }

    function Entity() {
        throw exceptions.Type();
    }

    function cmp(a, b) {
        try {
            var ta = type(a);
            var tb = type(b);
            if (ta !== tb) {
                if (ta === 'Array')
                    return 1;
                if (tb === 'Array')
                    return -1;
                if (ta === 'binary')
                    return 1;
                if (tb === 'binary')
                    return -1;
                if (ta === 'string')
                    return 1;
                if (tb === 'string')
                    return -1;
                if (ta === 'Date')
                    return 1;
                if (tb !== 'Date')
                    return NaN;
                return -1;
            }
            switch (ta) {
                case 'number':
                case 'Date':
                case 'string':
                    return a > b ? 1 : a < b ? -1 : 0;
                case 'binary': {
                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));
                }
                case 'Array':
                    return compareArrays(a, b);
            }
        }
        catch (_a) { }
        return NaN;
    }
    function compareArrays(a, b) {
        var al = a.length;
        var bl = b.length;
        var l = al < bl ? al : bl;
        for (var i = 0; i < l; ++i) {
            var res = cmp(a[i], b[i]);
            if (res !== 0)
                return res;
        }
        return al === bl ? 0 : al < bl ? -1 : 1;
    }
    function compareUint8Arrays(a, b) {
        var al = a.length;
        var bl = b.length;
        var l = al < bl ? al : bl;
        for (var i = 0; i < l; ++i) {
            if (a[i] !== b[i])
                return a[i] < b[i] ? -1 : 1;
        }
        return al === bl ? 0 : al < bl ? -1 : 1;
    }
    function type(x) {
        var t = typeof x;
        if (t !== 'object')
            return t;
        if (ArrayBuffer.isView(x))
            return 'binary';
        var tsTag = toStringTag(x);
        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;
    }
    function getUint8Array(a) {
        if (a instanceof Uint8Array)
            return a;
        if (ArrayBuffer.isView(a))
            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);
        return new Uint8Array(a);
    }

    var Table =  (function () {
        function Table() {
        }
        Table.prototype._trans = function (mode, fn, writeLocked) {
            var trans = this._tx || PSD.trans;
            var tableName = this.name;
            var task = debug && typeof console !== 'undefined' && console.createTask && console.createTask("Dexie: ".concat(mode === 'readonly' ? 'read' : 'write', " ").concat(this.name));
            function checkTableInTransaction(resolve, reject, trans) {
                if (!trans.schema[tableName])
                    throw new exceptions.NotFound("Table " + tableName + " not part of transaction");
                return fn(trans.idbtrans, trans);
            }
            var wasRootExec = beginMicroTickScope();
            try {
                var p = trans && trans.db._novip === this.db._novip ?
                    trans === PSD.trans ?
                        trans._promise(mode, checkTableInTransaction, writeLocked) :
                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :
                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);
                if (task) {
                    p._consoleTask = task;
                    p = p.catch(function (err) {
                        console.trace(err);
                        return rejection(err);
                    });
                }
                return p;
            }
            finally {
                if (wasRootExec)
                    endMicroTickScope();
            }
        };
        Table.prototype.get = function (keyOrCrit, cb) {
            var _this = this;
            if (keyOrCrit && keyOrCrit.constructor === Object)
                return this.where(keyOrCrit).first(cb);
            if (keyOrCrit == null)
                return rejection(new exceptions.Type("Invalid argument to Table.get()"));
            return this._trans('readonly', function (trans) {
                return _this.core.get({ trans: trans, key: keyOrCrit })
                    .then(function (res) { return _this.hook.reading.fire(res); });
            }).then(cb);
        };
        Table.prototype.where = function (indexOrCrit) {
            if (typeof indexOrCrit === 'string')
                return new this.db.WhereClause(this, indexOrCrit);
            if (isArray(indexOrCrit))
                return new this.db.WhereClause(this, "[".concat(indexOrCrit.join('+'), "]"));
            var keyPaths = keys(indexOrCrit);
            if (keyPaths.length === 1)
                return this
                    .where(keyPaths[0])
                    .equals(indexOrCrit[keyPaths[0]]);
            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {
                if (ix.compound &&
                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; })) {
                    for (var i = 0; i < keyPaths.length; ++i) {
                        if (keyPaths.indexOf(ix.keyPath[i]) === -1)
                            return false;
                    }
                    return true;
                }
                return false;
            }).sort(function (a, b) { return a.keyPath.length - b.keyPath.length; })[0];
            if (compoundIndex && this.db._maxKey !== maxString) {
                var keyPathsInValidOrder = compoundIndex.keyPath.slice(0, keyPaths.length);
                return this
                    .where(keyPathsInValidOrder)
                    .equals(keyPathsInValidOrder.map(function (kp) { return indexOrCrit[kp]; }));
            }
            if (!compoundIndex && debug)
                console.warn("The query ".concat(JSON.stringify(indexOrCrit), " on ").concat(this.name, " would benefit from a ") +
                    "compound index [".concat(keyPaths.join('+'), "]"));
            var idxByName = this.schema.idxByName;
            function equals(a, b) {
                return cmp(a, b) === 0;
            }
            var _a = keyPaths.reduce(function (_a, keyPath) {
                var prevIndex = _a[0], prevFilterFn = _a[1];
                var index = idxByName[keyPath];
                var value = indexOrCrit[keyPath];
                return [
                    prevIndex || index,
                    prevIndex || !index ?
                        combine(prevFilterFn, index && index.multi ?
                            function (x) {
                                var prop = getByKeyPath(x, keyPath);
                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });
                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })
                        : prevFilterFn
                ];
            }, [null, null]), idx = _a[0], filterFunction = _a[1];
            return idx ?
                this.where(idx.name).equals(indexOrCrit[idx.keyPath])
                    .filter(filterFunction) :
                compoundIndex ?
                    this.filter(filterFunction) :
                    this.where(keyPaths).equals('');
        };
        Table.prototype.filter = function (filterFunction) {
            return this.toCollection().and(filterFunction);
        };
        Table.prototype.count = function (thenShortcut) {
            return this.toCollection().count(thenShortcut);
        };
        Table.prototype.offset = function (offset) {
            return this.toCollection().offset(offset);
        };
        Table.prototype.limit = function (numRows) {
            return this.toCollection().limit(numRows);
        };
        Table.prototype.each = function (callback) {
            return this.toCollection().each(callback);
        };
        Table.prototype.toArray = function (thenShortcut) {
            return this.toCollection().toArray(thenShortcut);
        };
        Table.prototype.toCollection = function () {
            return new this.db.Collection(new this.db.WhereClause(this));
        };
        Table.prototype.orderBy = function (index) {
            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?
                "[".concat(index.join('+'), "]") :
                index));
        };
        Table.prototype.reverse = function () {
            return this.toCollection().reverse();
        };
        Table.prototype.mapToClass = function (constructor) {
            var _a = this, db = _a.db, tableName = _a.name;
            this.schema.mappedClass = constructor;
            if (constructor.prototype instanceof Entity) {
                constructor =  (function (_super) {
                    __extends(class_1, _super);
                    function class_1() {
                        return _super !== null && _super.apply(this, arguments) || this;
                    }
                    Object.defineProperty(class_1.prototype, "db", {
                        get: function () { return db; },
                        enumerable: false,
                        configurable: true
                    });
                    class_1.prototype.table = function () { return tableName; };
                    return class_1;
                }(constructor));
            }
            var inheritedProps = new Set();
            for (var proto = constructor.prototype; proto; proto = getProto(proto)) {
                Object.getOwnPropertyNames(proto).forEach(function (propName) { return inheritedProps.add(propName); });
            }
            var readHook = function (obj) {
                if (!obj)
                    return obj;
                var res = Object.create(constructor.prototype);
                for (var m in obj)
                    if (!inheritedProps.has(m))
                        try {
                            res[m] = obj[m];
                        }
                        catch (_) { }
                return res;
            };
            if (this.schema.readHook) {
                this.hook.reading.unsubscribe(this.schema.readHook);
            }
            this.schema.readHook = readHook;
            this.hook("reading", readHook);
            return constructor;
        };
        Table.prototype.defineClass = function () {
            function Class(content) {
                extend(this, content);
            }
            return this.mapToClass(Class);
        };
        Table.prototype.add = function (obj, key) {
            var _this = this;
            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
            var objToAdd = obj;
            if (keyPath && auto) {
                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);
            }
            return this._trans('readwrite', function (trans) {
                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });
            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })
                .then(function (lastResult) {
                if (keyPath) {
                    try {
                        setByKeyPath(obj, keyPath, lastResult);
                    }
                    catch (_) { }
                }
                return lastResult;
            });
        };
        Table.prototype.update = function (keyOrObject, modifications) {
            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {
                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);
                if (key === undefined)
                    return rejection(new exceptions.InvalidArgument("Given object does not contain its primary key"));
                return this.where(":id").equals(key).modify(modifications);
            }
            else {
                return this.where(":id").equals(keyOrObject).modify(modifications);
            }
        };
        Table.prototype.put = function (obj, key) {
            var _this = this;
            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
            var objToAdd = obj;
            if (keyPath && auto) {
                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);
            }
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })
                .then(function (lastResult) {
                if (keyPath) {
                    try {
                        setByKeyPath(obj, keyPath, lastResult);
                    }
                    catch (_) { }
                }
                return lastResult;
            });
        };
        Table.prototype.delete = function (key) {
            var _this = this;
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });
        };
        Table.prototype.clear = function () {
            var _this = this;
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });
        };
        Table.prototype.bulkGet = function (keys) {
            var _this = this;
            return this._trans('readonly', function (trans) {
                return _this.core.getMany({
                    keys: keys,
                    trans: trans
                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });
            });
        };
        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {
            var _this = this;
            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;
            options = options || (keys ? undefined : keysOrOptions);
            var wantResults = options ? options.allKeys : undefined;
            return this._trans('readwrite', function (trans) {
                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
                if (keyPath && keys)
                    throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
                if (keys && keys.length !== objects.length)
                    throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");
                var numObjects = objects.length;
                var objectsToAdd = keyPath && auto ?
                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :
                    objects;
                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })
                    .then(function (_a) {
                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;
                    var result = wantResults ? results : lastResult;
                    if (numFailures === 0)
                        return result;
                    throw new BulkError("".concat(_this.name, ".bulkAdd(): ").concat(numFailures, " of ").concat(numObjects, " operations failed"), failures);
                });
            });
        };
        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {
            var _this = this;
            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;
            options = options || (keys ? undefined : keysOrOptions);
            var wantResults = options ? options.allKeys : undefined;
            return this._trans('readwrite', function (trans) {
                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
                if (keyPath && keys)
                    throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
                if (keys && keys.length !== objects.length)
                    throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");
                var numObjects = objects.length;
                var objectsToPut = keyPath && auto ?
                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :
                    objects;
                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })
                    .then(function (_a) {
                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;
                    var result = wantResults ? results : lastResult;
                    if (numFailures === 0)
                        return result;
                    throw new BulkError("".concat(_this.name, ".bulkPut(): ").concat(numFailures, " of ").concat(numObjects, " operations failed"), failures);
                });
            });
        };
        Table.prototype.bulkUpdate = function (keysAndChanges) {
            var _this = this;
            var coreTable = this.core;
            var keys = keysAndChanges.map(function (entry) { return entry.key; });
            var changeSpecs = keysAndChanges.map(function (entry) { return entry.changes; });
            var offsetMap = [];
            return this._trans('readwrite', function (trans) {
                return coreTable.getMany({ trans: trans, keys: keys, cache: 'clone' }).then(function (objs) {
                    var resultKeys = [];
                    var resultObjs = [];
                    keysAndChanges.forEach(function (_a, idx) {
                        var key = _a.key, changes = _a.changes;
                        var obj = objs[idx];
                        if (obj) {
                            for (var _i = 0, _b = Object.keys(changes); _i < _b.length; _i++) {
                                var keyPath = _b[_i];
                                var value = changes[keyPath];
                                if (keyPath === _this.schema.primKey.keyPath) {
                                    if (cmp(value, key) !== 0) {
                                        throw new exceptions.Constraint("Cannot update primary key in bulkUpdate()");
                                    }
                                }
                                else {
                                    setByKeyPath(obj, keyPath, value);
                                }
                            }
                            offsetMap.push(idx);
                            resultKeys.push(key);
                            resultObjs.push(obj);
                        }
                    });
                    var numEntries = resultKeys.length;
                    return coreTable
                        .mutate({
                        trans: trans,
                        type: 'put',
                        keys: resultKeys,
                        values: resultObjs,
                        updates: {
                            keys: keys,
                            changeSpecs: changeSpecs
                        }
                    })
                        .then(function (_a) {
                        var numFailures = _a.numFailures, failures = _a.failures;
                        if (numFailures === 0)
                            return numEntries;
                        for (var _i = 0, _b = Object.keys(failures); _i < _b.length; _i++) {
                            var offset = _b[_i];
                            var mappedOffset = offsetMap[Number(offset)];
                            if (mappedOffset != null) {
                                var failure = failures[offset];
                                delete failures[offset];
                                failures[mappedOffset] = failure;
                            }
                        }
                        throw new BulkError("".concat(_this.name, ".bulkUpdate(): ").concat(numFailures, " of ").concat(numEntries, " operations failed"), failures);
                    });
                });
            });
        };
        Table.prototype.bulkDelete = function (keys) {
            var _this = this;
            var numKeys = keys.length;
            return this._trans('readwrite', function (trans) {
                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys });
            }).then(function (_a) {
                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;
                if (numFailures === 0)
                    return lastResult;
                throw new BulkError("".concat(_this.name, ".bulkDelete(): ").concat(numFailures, " of ").concat(numKeys, " operations failed"), failures);
            });
        };
        return Table;
    }());

    function Events(ctx) {
        var evs = {};
        var rv = function (eventName, subscriber) {
            if (subscriber) {
                var i = arguments.length, args = new Array(i - 1);
                while (--i)
                    args[i - 1] = arguments[i];
                evs[eventName].subscribe.apply(null, args);
                return ctx;
            }
            else if (typeof (eventName) === 'string') {
                return evs[eventName];
            }
        };
        rv.addEventType = add;
        for (var i = 1, l = arguments.length; i < l; ++i) {
            add(arguments[i]);
        }
        return rv;
        function add(eventName, chainFunction, defaultFunction) {
            if (typeof eventName === 'object')
                return addConfiguredEvents(eventName);
            if (!chainFunction)
                chainFunction = reverseStoppableEventChain;
            if (!defaultFunction)
                defaultFunction = nop;
            var context = {
                subscribers: [],
                fire: defaultFunction,
                subscribe: function (cb) {
                    if (context.subscribers.indexOf(cb) === -1) {
                        context.subscribers.push(cb);
                        context.fire = chainFunction(context.fire, cb);
                    }
                },
                unsubscribe: function (cb) {
                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });
                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);
                }
            };
            evs[eventName] = rv[eventName] = context;
            return context;
        }
        function addConfiguredEvents(cfg) {
            keys(cfg).forEach(function (eventName) {
                var args = cfg[eventName];
                if (isArray(args)) {
                    add(eventName, cfg[eventName][0], cfg[eventName][1]);
                }
                else if (args === 'asap') {
                    var context = add(eventName, mirror, function fire() {
                        var i = arguments.length, args = new Array(i);
                        while (i--)
                            args[i] = arguments[i];
                        context.subscribers.forEach(function (fn) {
                            asap$1(function fireEvent() {
                                fn.apply(null, args);
                            });
                        });
                    });
                }
                else
                    throw new exceptions.InvalidArgument("Invalid event config");
            });
        }
    }

    function makeClassConstructor(prototype, constructor) {
        derive(constructor).from({ prototype: prototype });
        return constructor;
    }

    function createTableConstructor(db) {
        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {
            this.db = db;
            this._tx = trans;
            this.name = name;
            this.schema = tableSchema;
            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {
                "creating": [hookCreatingChain, nop],
                "reading": [pureFunctionChain, mirror],
                "updating": [hookUpdatingChain, nop],
                "deleting": [hookDeletingChain, nop]
            });
        });
    }

    function isPlainKeyRange(ctx, ignoreLimitFilter) {
        return !(ctx.filter || ctx.algorithm || ctx.or) &&
            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);
    }
    function addFilter(ctx, fn) {
        ctx.filter = combine(ctx.filter, fn);
    }
    function addReplayFilter(ctx, factory, isLimitFilter) {
        var curr = ctx.replayFilter;
        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;
        ctx.justLimit = isLimitFilter && !curr;
    }
    function addMatchFilter(ctx, fn) {
        ctx.isMatch = combine(ctx.isMatch, fn);
    }
    function getIndexOrStore(ctx, coreSchema) {
        if (ctx.isPrimKey)
            return coreSchema.primaryKey;
        var index = coreSchema.getIndexByKeyPath(ctx.index);
        if (!index)
            throw new exceptions.Schema("KeyPath " + ctx.index + " on object store " + coreSchema.name + " is not indexed");
        return index;
    }
    function openCursor(ctx, coreTable, trans) {
        var index = getIndexOrStore(ctx, coreTable.schema);
        return coreTable.openCursor({
            trans: trans,
            values: !ctx.keysOnly,
            reverse: ctx.dir === 'prev',
            unique: !!ctx.unique,
            query: {
                index: index,
                range: ctx.range
            }
        });
    }
    function iter(ctx, fn, coreTrans, coreTable) {
        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;
        if (!ctx.or) {
            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);
        }
        else {
            var set_1 = {};
            var union = function (item, cursor, advance) {
                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {
                    var primaryKey = cursor.primaryKey;
                    var key = '' + primaryKey;
                    if (key === '[object ArrayBuffer]')
                        key = '' + new Uint8Array(primaryKey);
                    if (!hasOwn(set_1, key)) {
                        set_1[key] = true;
                        fn(item, cursor, advance);
                    }
                }
            };
            return Promise.all([
                ctx.or._iterate(union, coreTrans),
                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)
            ]);
        }
    }
    function iterate(cursorPromise, filter, fn, valueMapper) {
        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;
        var wrappedFn = wrap(mappedFn);
        return cursorPromise.then(function (cursor) {
            if (cursor) {
                return cursor.start(function () {
                    var c = function () { return cursor.continue(); };
                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))
                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });
                    c();
                });
            }
        });
    }

    var PropModification =  (function () {
        function PropModification(spec) {
            this["@@propmod"] = spec;
        }
        PropModification.prototype.execute = function (value) {
            var _a;
            var spec = this["@@propmod"];
            if (spec.add !== undefined) {
                var term = spec.add;
                if (isArray(term)) {
                    return __spreadArray(__spreadArray([], (isArray(value) ? value : []), true), term, true).sort();
                }
                if (typeof term === 'number')
                    return (Number(value) || 0) + term;
                if (typeof term === 'bigint') {
                    try {
                        return BigInt(value) + term;
                    }
                    catch (_b) {
                        return BigInt(0) + term;
                    }
                }
                throw new TypeError("Invalid term ".concat(term));
            }
            if (spec.remove !== undefined) {
                var subtrahend_1 = spec.remove;
                if (isArray(subtrahend_1)) {
                    return isArray(value) ? value.filter(function (item) { return !subtrahend_1.includes(item); }).sort() : [];
                }
                if (typeof subtrahend_1 === 'number')
                    return Number(value) - subtrahend_1;
                if (typeof subtrahend_1 === 'bigint') {
                    try {
                        return BigInt(value) - subtrahend_1;
                    }
                    catch (_c) {
                        return BigInt(0) - subtrahend_1;
                    }
                }
                throw new TypeError("Invalid subtrahend ".concat(subtrahend_1));
            }
            var prefixToReplace = (_a = spec.replacePrefix) === null || _a === void 0 ? void 0 : _a[0];
            if (prefixToReplace && typeof value === 'string' && value.startsWith(prefixToReplace)) {
                return spec.replacePrefix[1] + value.substring(prefixToReplace.length);
            }
            return value;
        };
        return PropModification;
    }());

    var Collection =  (function () {
        function Collection() {
        }
        Collection.prototype._read = function (fn, cb) {
            var ctx = this._ctx;
            return ctx.error ?
                ctx.table._trans(null, rejection.bind(null, ctx.error)) :
                ctx.table._trans('readonly', fn).then(cb);
        };
        Collection.prototype._write = function (fn) {
            var ctx = this._ctx;
            return ctx.error ?
                ctx.table._trans(null, rejection.bind(null, ctx.error)) :
                ctx.table._trans('readwrite', fn, "locked");
        };
        Collection.prototype._addAlgorithm = function (fn) {
            var ctx = this._ctx;
            ctx.algorithm = combine(ctx.algorithm, fn);
        };
        Collection.prototype._iterate = function (fn, coreTrans) {
            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);
        };
        Collection.prototype.clone = function (props) {
            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);
            if (props)
                extend(ctx, props);
            rv._ctx = ctx;
            return rv;
        };
        Collection.prototype.raw = function () {
            this._ctx.valueMapper = null;
            return this;
        };
        Collection.prototype.each = function (fn) {
            var ctx = this._ctx;
            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });
        };
        Collection.prototype.count = function (cb) {
            var _this = this;
            return this._read(function (trans) {
                var ctx = _this._ctx;
                var coreTable = ctx.table.core;
                if (isPlainKeyRange(ctx, true)) {
                    return coreTable.count({
                        trans: trans,
                        query: {
                            index: getIndexOrStore(ctx, coreTable.schema),
                            range: ctx.range
                        }
                    }).then(function (count) { return Math.min(count, ctx.limit); });
                }
                else {
                    var count = 0;
                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)
                        .then(function () { return count; });
                }
            }).then(cb);
        };
        Collection.prototype.sortBy = function (keyPath, cb) {
            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;
            function getval(obj, i) {
                if (i)
                    return getval(obj[parts[i]], i - 1);
                return obj[lastPart];
            }
            var order = this._ctx.dir === "next" ? 1 : -1;
            function sorter(a, b) {
                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);
                return cmp(aVal, bVal) * order;
            }
            return this.toArray(function (a) {
                return a.sort(sorter);
            }).then(cb);
        };
        Collection.prototype.toArray = function (cb) {
            var _this = this;
            return this._read(function (trans) {
                var ctx = _this._ctx;
                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {
                    var valueMapper_1 = ctx.valueMapper;
                    var index = getIndexOrStore(ctx, ctx.table.core.schema);
                    return ctx.table.core.query({
                        trans: trans,
                        limit: ctx.limit,
                        values: true,
                        query: {
                            index: index,
                            range: ctx.range
                        }
                    }).then(function (_a) {
                        var result = _a.result;
                        return valueMapper_1 ? result.map(valueMapper_1) : result;
                    });
                }
                else {
                    var a_1 = [];
                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });
                }
            }, cb);
        };
        Collection.prototype.offset = function (offset) {
            var ctx = this._ctx;
            if (offset <= 0)
                return this;
            ctx.offset += offset;
            if (isPlainKeyRange(ctx)) {
                addReplayFilter(ctx, function () {
                    var offsetLeft = offset;
                    return function (cursor, advance) {
                        if (offsetLeft === 0)
                            return true;
                        if (offsetLeft === 1) {
                            --offsetLeft;
                            return false;
                        }
                        advance(function () {
                            cursor.advance(offsetLeft);
                            offsetLeft = 0;
                        });
                        return false;
                    };
                });
            }
            else {
                addReplayFilter(ctx, function () {
                    var offsetLeft = offset;
                    return function () { return (--offsetLeft < 0); };
                });
            }
            return this;
        };
        Collection.prototype.limit = function (numRows) {
            this._ctx.limit = Math.min(this._ctx.limit, numRows);
            addReplayFilter(this._ctx, function () {
                var rowsLeft = numRows;
                return function (cursor, advance, resolve) {
                    if (--rowsLeft <= 0)
                        advance(resolve);
                    return rowsLeft >= 0;
                };
            }, true);
            return this;
        };
        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {
            addFilter(this._ctx, function (cursor, advance, resolve) {
                if (filterFunction(cursor.value)) {
                    advance(resolve);
                    return bIncludeStopEntry;
                }
                else {
                    return true;
                }
            });
            return this;
        };
        Collection.prototype.first = function (cb) {
            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);
        };
        Collection.prototype.last = function (cb) {
            return this.reverse().first(cb);
        };
        Collection.prototype.filter = function (filterFunction) {
            addFilter(this._ctx, function (cursor) {
                return filterFunction(cursor.value);
            });
            addMatchFilter(this._ctx, filterFunction);
            return this;
        };
        Collection.prototype.and = function (filter) {
            return this.filter(filter);
        };
        Collection.prototype.or = function (indexName) {
            return new this.db.WhereClause(this._ctx.table, indexName, this);
        };
        Collection.prototype.reverse = function () {
            this._ctx.dir = (this._ctx.dir === "prev" ? "next" : "prev");
            if (this._ondirectionchange)
                this._ondirectionchange(this._ctx.dir);
            return this;
        };
        Collection.prototype.desc = function () {
            return this.reverse();
        };
        Collection.prototype.eachKey = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            return this.each(function (val, cursor) { cb(cursor.key, cursor); });
        };
        Collection.prototype.eachUniqueKey = function (cb) {
            this._ctx.unique = "unique";
            return this.eachKey(cb);
        };
        Collection.prototype.eachPrimaryKey = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });
        };
        Collection.prototype.keys = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            var a = [];
            return this.each(function (item, cursor) {
                a.push(cursor.key);
            }).then(function () {
                return a;
            }).then(cb);
        };
        Collection.prototype.primaryKeys = function (cb) {
            var ctx = this._ctx;
            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {
                return this._read(function (trans) {
                    var index = getIndexOrStore(ctx, ctx.table.core.schema);
                    return ctx.table.core.query({
                        trans: trans,
                        values: false,
                        limit: ctx.limit,
                        query: {
                            index: index,
                            range: ctx.range
                        }
                    });
                }).then(function (_a) {
                    var result = _a.result;
                    return result;
                }).then(cb);
            }
            ctx.keysOnly = !ctx.isMatch;
            var a = [];
            return this.each(function (item, cursor) {
                a.push(cursor.primaryKey);
            }).then(function () {
                return a;
            }).then(cb);
        };
        Collection.prototype.uniqueKeys = function (cb) {
            this._ctx.unique = "unique";
            return this.keys(cb);
        };
        Collection.prototype.firstKey = function (cb) {
            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);
        };
        Collection.prototype.lastKey = function (cb) {
            return this.reverse().firstKey(cb);
        };
        Collection.prototype.distinct = function () {
            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];
            if (!idx || !idx.multi)
                return this;
            var set = {};
            addFilter(this._ctx, function (cursor) {
                var strKey = cursor.primaryKey.toString();
                var found = hasOwn(set, strKey);
                set[strKey] = true;
                return !found;
            });
            return this;
        };
        Collection.prototype.modify = function (changes) {
            var _this = this;
            var ctx = this._ctx;
            return this._write(function (trans) {
                var modifyer;
                if (typeof changes === 'function') {
                    modifyer = changes;
                }
                else {
                    var keyPaths = keys(changes);
                    var numKeys = keyPaths.length;
                    modifyer = function (item) {
                        var anythingModified = false;
                        for (var i = 0; i < numKeys; ++i) {
                            var keyPath = keyPaths[i];
                            var val = changes[keyPath];
                            var origVal = getByKeyPath(item, keyPath);
                            if (val instanceof PropModification) {
                                setByKeyPath(item, keyPath, val.execute(origVal));
                                anythingModified = true;
                            }
                            else if (origVal !== val) {
                                setByKeyPath(item, keyPath, val);
                                anythingModified = true;
                            }
                        }
                        return anythingModified;
                    };
                }
                var coreTable = ctx.table.core;
                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;
                var limit = 200;
                var modifyChunkSize = _this.db._options.modifyChunkSize;
                if (modifyChunkSize) {
                    if (typeof modifyChunkSize == 'object') {
                        limit = modifyChunkSize[coreTable.name] || modifyChunkSize['*'] || 200;
                    }
                    else {
                        limit = modifyChunkSize;
                    }
                }
                var totalFailures = [];
                var successCount = 0;
                var failedKeys = [];
                var applyMutateResult = function (expectedCount, res) {
                    var failures = res.failures, numFailures = res.numFailures;
                    successCount += expectedCount - numFailures;
                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {
                        var pos = _a[_i];
                        totalFailures.push(failures[pos]);
                    }
                };
                return _this.clone().primaryKeys().then(function (keys) {
                    var criteria = isPlainKeyRange(ctx) &&
                        ctx.limit === Infinity &&
                        (typeof changes !== 'function' || changes === deleteCallback) && {
                        index: ctx.index,
                        range: ctx.range
                    };
                    var nextChunk = function (offset) {
                        var count = Math.min(limit, keys.length - offset);
                        return coreTable.getMany({
                            trans: trans,
                            keys: keys.slice(offset, offset + count),
                            cache: "immutable"
                        }).then(function (values) {
                            var addValues = [];
                            var putValues = [];
                            var putKeys = outbound ? [] : null;
                            var deleteKeys = [];
                            for (var i = 0; i < count; ++i) {
                                var origValue = values[i];
                                var ctx_1 = {
                                    value: deepClone(origValue),
                                    primKey: keys[offset + i]
                                };
                                if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {
                                    if (ctx_1.value == null) {
                                        deleteKeys.push(keys[offset + i]);
                                    }
                                    else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {
                                        deleteKeys.push(keys[offset + i]);
                                        addValues.push(ctx_1.value);
                                    }
                                    else {
                                        putValues.push(ctx_1.value);
                                        if (outbound)
                                            putKeys.push(keys[offset + i]);
                                    }
                                }
                            }
                            return Promise.resolve(addValues.length > 0 &&
                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })
                                    .then(function (res) {
                                    for (var pos in res.failures) {
                                        deleteKeys.splice(parseInt(pos), 1);
                                    }
                                    applyMutateResult(addValues.length, res);
                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&
                                coreTable.mutate({
                                    trans: trans,
                                    type: 'put',
                                    keys: putKeys,
                                    values: putValues,
                                    criteria: criteria,
                                    changeSpec: typeof changes !== 'function'
                                        && changes,
                                    isAdditionalChunk: offset > 0
                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&
                                coreTable.mutate({
                                    trans: trans,
                                    type: 'delete',
                                    keys: deleteKeys,
                                    criteria: criteria,
                                    isAdditionalChunk: offset > 0
                                }).then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {
                                return keys.length > offset + count && nextChunk(offset + limit);
                            });
                        });
                    };
                    return nextChunk(0).then(function () {
                        if (totalFailures.length > 0)
                            throw new ModifyError("Error modifying one or more objects", totalFailures, successCount, failedKeys);
                        return keys.length;
                    });
                });
            });
        };
        Collection.prototype.delete = function () {
            var ctx = this._ctx, range = ctx.range;
            if (isPlainKeyRange(ctx) &&
                (ctx.isPrimKey || range.type === 3 ))
             {
                return this._write(function (trans) {
                    var primaryKey = ctx.table.core.schema.primaryKey;
                    var coreRange = range;
                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {
                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })
                            .then(function (_a) {
                            var failures = _a.failures; _a.lastResult; _a.results; var numFailures = _a.numFailures;
                            if (numFailures)
                                throw new ModifyError("Could not delete some values", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);
                            return count - numFailures;
                        });
                    });
                });
            }
            return this.modify(deleteCallback);
        };
        return Collection;
    }());
    var deleteCallback = function (value, ctx) { return ctx.value = null; };

    function createCollectionConstructor(db) {
        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {
            this.db = db;
            var keyRange = AnyRange, error = null;
            if (keyRangeGenerator)
                try {
                    keyRange = keyRangeGenerator();
                }
                catch (ex) {
                    error = ex;
                }
            var whereCtx = whereClause._ctx;
            var table = whereCtx.table;
            var readingHook = table.hook.reading.fire;
            this._ctx = {
                table: table,
                index: whereCtx.index,
                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),
                range: keyRange,
                keysOnly: false,
                dir: "next",
                unique: "",
                algorithm: null,
                filter: null,
                replayFilter: null,
                justLimit: true,
                isMatch: null,
                offset: 0,
                limit: Infinity,
                error: error,
                or: whereCtx.or,
                valueMapper: readingHook !== mirror ? readingHook : null
            };
        });
    }

    function simpleCompare(a, b) {
        return a < b ? -1 : a === b ? 0 : 1;
    }
    function simpleCompareReverse(a, b) {
        return a > b ? -1 : a === b ? 0 : 1;
    }

    function fail(collectionOrWhereClause, err, T) {
        var collection = collectionOrWhereClause instanceof WhereClause ?
            new collectionOrWhereClause.Collection(collectionOrWhereClause) :
            collectionOrWhereClause;
        collection._ctx.error = T ? new T(err) : new TypeError(err);
        return collection;
    }
    function emptyCollection(whereClause) {
        return new whereClause.Collection(whereClause, function () { return rangeEqual(""); }).limit(0);
    }
    function upperFactory(dir) {
        return dir === "next" ?
            function (s) { return s.toUpperCase(); } :
            function (s) { return s.toLowerCase(); };
    }
    function lowerFactory(dir) {
        return dir === "next" ?
            function (s) { return s.toLowerCase(); } :
            function (s) { return s.toUpperCase(); };
    }
    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {
        var length = Math.min(key.length, lowerNeedle.length);
        var llp = -1;
        for (var i = 0; i < length; ++i) {
            var lwrKeyChar = lowerKey[i];
            if (lwrKeyChar !== lowerNeedle[i]) {
                if (cmp(key[i], upperNeedle[i]) < 0)
                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);
                if (cmp(key[i], lowerNeedle[i]) < 0)
                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);
                if (llp >= 0)
                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);
                return null;
            }
            if (cmp(key[i], lwrKeyChar) < 0)
                llp = i;
        }
        if (length < lowerNeedle.length && dir === "next")
            return key + upperNeedle.substr(key.length);
        if (length < key.length && dir === "prev")
            return key.substr(0, upperNeedle.length);
        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));
    }
    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {
        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;
        if (!needles.every(function (s) { return typeof s === 'string'; })) {
            return fail(whereClause, STRING_EXPECTED);
        }
        function initDirection(dir) {
            upper = upperFactory(dir);
            lower = lowerFactory(dir);
            compare = (dir === "next" ? simpleCompare : simpleCompareReverse);
            var needleBounds = needles.map(function (needle) {
                return { lower: lower(needle), upper: upper(needle) };
            }).sort(function (a, b) {
                return compare(a.lower, b.lower);
            });
            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });
            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });
            direction = dir;
            nextKeySuffix = (dir === "next" ? "" : suffix);
        }
        initDirection("next");
        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });
        c._ondirectionchange = function (direction) {
            initDirection(direction);
        };
        var firstPossibleNeedle = 0;
        c._addAlgorithm(function (cursor, advance, resolve) {
            var key = cursor.key;
            if (typeof key !== 'string')
                return false;
            var lowerKey = lower(key);
            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {
                return true;
            }
            else {
                var lowestPossibleCasing = null;
                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {
                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);
                    if (casing === null && lowestPossibleCasing === null)
                        firstPossibleNeedle = i + 1;
                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {
                        lowestPossibleCasing = casing;
                    }
                }
                if (lowestPossibleCasing !== null) {
                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });
                }
                else {
                    advance(resolve);
                }
                return false;
            }
        });
        return c;
    }
    function createRange(lower, upper, lowerOpen, upperOpen) {
        return {
            type: 2 ,
            lower: lower,
            upper: upper,
            lowerOpen: lowerOpen,
            upperOpen: upperOpen
        };
    }
    function rangeEqual(value) {
        return {
            type: 1 ,
            lower: value,
            upper: value
        };
    }

    var WhereClause =  (function () {
        function WhereClause() {
        }
        Object.defineProperty(WhereClause.prototype, "Collection", {
            get: function () {
                return this._ctx.table.db.Collection;
            },
            enumerable: false,
            configurable: true
        });
        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {
            includeLower = includeLower !== false;
            includeUpper = includeUpper === true;
            try {
                if ((this._cmp(lower, upper) > 0) ||
                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))
                    return emptyCollection(this);
                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
        };
        WhereClause.prototype.equals = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return rangeEqual(value); });
        };
        WhereClause.prototype.above = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(value, undefined, true); });
        };
        WhereClause.prototype.aboveOrEqual = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(value, undefined, false); });
        };
        WhereClause.prototype.below = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });
        };
        WhereClause.prototype.belowOrEqual = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(undefined, value); });
        };
        WhereClause.prototype.startsWith = function (str) {
            if (typeof str !== 'string')
                return fail(this, STRING_EXPECTED);
            return this.between(str, str + maxString, true, true);
        };
        WhereClause.prototype.startsWithIgnoreCase = function (str) {
            if (str === "")
                return this.startsWith(str);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);
        };
        WhereClause.prototype.equalsIgnoreCase = function (str) {
            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], "");
        };
        WhereClause.prototype.anyOfIgnoreCase = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return emptyCollection(this);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, "");
        };
        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return emptyCollection(this);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);
        };
        WhereClause.prototype.anyOf = function () {
            var _this = this;
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            var compare = this._cmp;
            try {
                set.sort(compare);
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            if (set.length === 0)
                return emptyCollection(this);
            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });
            c._ondirectionchange = function (direction) {
                compare = (direction === "next" ?
                    _this._ascending :
                    _this._descending);
                set.sort(compare);
            };
            var i = 0;
            c._addAlgorithm(function (cursor, advance, resolve) {
                var key = cursor.key;
                while (compare(key, set[i]) > 0) {
                    ++i;
                    if (i === set.length) {
                        advance(resolve);
                        return false;
                    }
                }
                if (compare(key, set[i]) === 0) {
                    return true;
                }
                else {
                    advance(function () { cursor.continue(set[i]); });
                    return false;
                }
            });
            return c;
        };
        WhereClause.prototype.notEqual = function (value) {
            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });
        };
        WhereClause.prototype.noneOf = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return new this.Collection(this);
            try {
                set.sort(this._ascending);
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            var ranges = set.reduce(function (res, val) { return res ?
                res.concat([[res[res.length - 1][1], val]]) :
                [[minKey, val]]; }, null);
            ranges.push([set[set.length - 1], this.db._maxKey]);
            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });
        };
        WhereClause.prototype.inAnyRange = function (ranges, options) {
            var _this = this;
            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;
            if (ranges.length === 0)
                return emptyCollection(this);
            if (!ranges.every(function (range) {
                return range[0] !== undefined &&
                    range[1] !== undefined &&
                    ascending(range[0], range[1]) <= 0;
            })) {
                return fail(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", exceptions.InvalidArgument);
            }
            var includeLowers = !options || options.includeLowers !== false;
            var includeUppers = options && options.includeUppers === true;
            function addRange(ranges, newRange) {
                var i = 0, l = ranges.length;
                for (; i < l; ++i) {
                    var range = ranges[i];
                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {
                        range[0] = min(range[0], newRange[0]);
                        range[1] = max(range[1], newRange[1]);
                        break;
                    }
                }
                if (i === l)
                    ranges.push(newRange);
                return ranges;
            }
            var sortDirection = ascending;
            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }
            var set;
            try {
                set = ranges.reduce(addRange, []);
                set.sort(rangeSorter);
            }
            catch (ex) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            var rangePos = 0;
            var keyIsBeyondCurrentEntry = includeUppers ?
                function (key) { return ascending(key, set[rangePos][1]) > 0; } :
                function (key) { return ascending(key, set[rangePos][1]) >= 0; };
            var keyIsBeforeCurrentEntry = includeLowers ?
                function (key) { return descending(key, set[rangePos][0]) > 0; } :
                function (key) { return descending(key, set[rangePos][0]) >= 0; };
            function keyWithinCurrentRange(key) {
                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);
            }
            var checkKey = keyIsBeyondCurrentEntry;
            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });
            c._ondirectionchange = function (direction) {
                if (direction === "next") {
                    checkKey = keyIsBeyondCurrentEntry;
                    sortDirection = ascending;
                }
                else {
                    checkKey = keyIsBeforeCurrentEntry;
                    sortDirection = descending;
                }
                set.sort(rangeSorter);
            };
            c._addAlgorithm(function (cursor, advance, resolve) {
                var key = cursor.key;
                while (checkKey(key)) {
                    ++rangePos;
                    if (rangePos === set.length) {
                        advance(resolve);
                        return false;
                    }
                }
                if (keyWithinCurrentRange(key)) {
                    return true;
                }
                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {
                    return false;
                }
                else {
                    advance(function () {
                        if (sortDirection === ascending)
                            cursor.continue(set[rangePos][0]);
                        else
                            cursor.continue(set[rangePos][1]);
                    });
                    return false;
                }
            });
            return c;
        };
        WhereClause.prototype.startsWithAnyOf = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (!set.every(function (s) { return typeof s === 'string'; })) {
                return fail(this, "startsWithAnyOf() only works with strings");
            }
            if (set.length === 0)
                return emptyCollection(this);
            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));
        };
        return WhereClause;
    }());

    function createWhereClauseConstructor(db) {
        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {
            this.db = db;
            this._ctx = {
                table: table,
                index: index === ":id" ? null : index,
                or: orCollection
            };
            this._cmp = this._ascending = cmp;
            this._descending = function (a, b) { return cmp(b, a); };
            this._max = function (a, b) { return cmp(a, b) > 0 ? a : b; };
            this._min = function (a, b) { return cmp(a, b) < 0 ? a : b; };
            this._IDBKeyRange = db._deps.IDBKeyRange;
            if (!this._IDBKeyRange)
                throw new exceptions.MissingAPI();
        });
    }

    function eventRejectHandler(reject) {
        return wrap(function (event) {
            preventDefault(event);
            reject(event.target.error);
            return false;
        });
    }
    function preventDefault(event) {
        if (event.stopPropagation)
            event.stopPropagation();
        if (event.preventDefault)
            event.preventDefault();
    }

    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';
    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';
    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);

    var Transaction =  (function () {
        function Transaction() {
        }
        Transaction.prototype._lock = function () {
            assert(!PSD.global);
            ++this._reculock;
            if (this._reculock === 1 && !PSD.global)
                PSD.lockOwnerFor = this;
            return this;
        };
        Transaction.prototype._unlock = function () {
            assert(!PSD.global);
            if (--this._reculock === 0) {
                if (!PSD.global)
                    PSD.lockOwnerFor = null;
                while (this._blockedFuncs.length > 0 && !this._locked()) {
                    var fnAndPSD = this._blockedFuncs.shift();
                    try {
                        usePSD(fnAndPSD[1], fnAndPSD[0]);
                    }
                    catch (e) { }
                }
            }
            return this;
        };
        Transaction.prototype._locked = function () {
            return this._reculock && PSD.lockOwnerFor !== this;
        };
        Transaction.prototype.create = function (idbtrans) {
            var _this = this;
            if (!this.mode)
                return this;
            var idbdb = this.db.idbdb;
            var dbOpenError = this.db._state.dbOpenError;
            assert(!this.idbtrans);
            if (!idbtrans && !idbdb) {
                switch (dbOpenError && dbOpenError.name) {
                    case "DatabaseClosedError":
                        throw new exceptions.DatabaseClosed(dbOpenError);
                    case "MissingAPIError":
                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);
                    default:
                        throw new exceptions.OpenFailed(dbOpenError);
                }
            }
            if (!this.active)
                throw new exceptions.TransactionInactive();
            assert(this._completion._state === null);
            idbtrans = this.idbtrans = idbtrans ||
                (this.db.core
                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })
                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));
            idbtrans.onerror = wrap(function (ev) {
                preventDefault(ev);
                _this._reject(idbtrans.error);
            });
            idbtrans.onabort = wrap(function (ev) {
                preventDefault(ev);
                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));
                _this.active = false;
                _this.on("abort").fire(ev);
            });
            idbtrans.oncomplete = wrap(function () {
                _this.active = false;
                _this._resolve();
                if ('mutatedParts' in idbtrans) {
                    globalEvents.storagemutated.fire(idbtrans["mutatedParts"]);
                }
            });
            return this;
        };
        Transaction.prototype._promise = function (mode, fn, bWriteLock) {
            var _this = this;
            if (mode === 'readwrite' && this.mode !== 'readwrite')
                return rejection(new exceptions.ReadOnly("Transaction is readonly"));
            if (!this.active)
                return rejection(new exceptions.TransactionInactive());
            if (this._locked()) {
                return new DexiePromise(function (resolve, reject) {
                    _this._blockedFuncs.push([function () {
                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);
                        }, PSD]);
                });
            }
            else if (bWriteLock) {
                return newScope(function () {
                    var p = new DexiePromise(function (resolve, reject) {
                        _this._lock();
                        var rv = fn(resolve, reject, _this);
                        if (rv && rv.then)
                            rv.then(resolve, reject);
                    });
                    p.finally(function () { return _this._unlock(); });
                    p._lib = true;
                    return p;
                });
            }
            else {
                var p = new DexiePromise(function (resolve, reject) {
                    var rv = fn(resolve, reject, _this);
                    if (rv && rv.then)
                        rv.then(resolve, reject);
                });
                p._lib = true;
                return p;
            }
        };
        Transaction.prototype._root = function () {
            return this.parent ? this.parent._root() : this;
        };
        Transaction.prototype.waitFor = function (promiseLike) {
            var root = this._root();
            var promise = DexiePromise.resolve(promiseLike);
            if (root._waitingFor) {
                root._waitingFor = root._waitingFor.then(function () { return promise; });
            }
            else {
                root._waitingFor = promise;
                root._waitingQueue = [];
                var store = root.idbtrans.objectStore(root.storeNames[0]);
                (function spin() {
                    ++root._spinCount;
                    while (root._waitingQueue.length)
                        (root._waitingQueue.shift())();
                    if (root._waitingFor)
                        store.get(-Infinity).onsuccess = spin;
                }());
            }
            var currentWaitPromise = root._waitingFor;
            return new DexiePromise(function (resolve, reject) {
                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {
                    if (root._waitingFor === currentWaitPromise) {
                        root._waitingFor = null;
                    }
                });
            });
        };
        Transaction.prototype.abort = function () {
            if (this.active) {
                this.active = false;
                if (this.idbtrans)
                    this.idbtrans.abort();
                this._reject(new exceptions.Abort());
            }
        };
        Transaction.prototype.table = function (tableName) {
            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));
            if (hasOwn(memoizedTables, tableName))
                return memoizedTables[tableName];
            var tableSchema = this.schema[tableName];
            if (!tableSchema) {
                throw new exceptions.NotFound("Table " + tableName + " not part of transaction");
            }
            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);
            transactionBoundTable.core = this.db.core.table(tableName);
            memoizedTables[tableName] = transactionBoundTable;
            return transactionBoundTable;
        };
        return Transaction;
    }());

    function createTransactionConstructor(db) {
        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {
            var _this = this;
            this.db = db;
            this.mode = mode;
            this.storeNames = storeNames;
            this.schema = dbschema;
            this.chromeTransactionDurability = chromeTransactionDurability;
            this.idbtrans = null;
            this.on = Events(this, "complete", "error", "abort");
            this.parent = parent || null;
            this.active = true;
            this._reculock = 0;
            this._blockedFuncs = [];
            this._resolve = null;
            this._reject = null;
            this._waitingFor = null;
            this._waitingQueue = null;
            this._spinCount = 0;
            this._completion = new DexiePromise(function (resolve, reject) {
                _this._resolve = resolve;
                _this._reject = reject;
            });
            this._completion.then(function () {
                _this.active = false;
                _this.on.complete.fire();
            }, function (e) {
                var wasActive = _this.active;
                _this.active = false;
                _this.on.error.fire(e);
                _this.parent ?
                    _this.parent._reject(e) :
                    wasActive && _this.idbtrans && _this.idbtrans.abort();
                return rejection(e);
            });
        });
    }

    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {
        return {
            name: name,
            keyPath: keyPath,
            unique: unique,
            multi: multi,
            auto: auto,
            compound: compound,
            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? "++" : "") + nameFromKeyPath(keyPath)
        };
    }
    function nameFromKeyPath(keyPath) {
        return typeof keyPath === 'string' ?
            keyPath :
            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : "";
    }

    function createTableSchema(name, primKey, indexes) {
        return {
            name: name,
            primKey: primKey,
            indexes: indexes,
            mappedClass: null,
            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })
        };
    }

    function safariMultiStoreFix(storeNames) {
        return storeNames.length === 1 ? storeNames[0] : storeNames;
    }
    var getMaxKey = function (IdbKeyRange) {
        try {
            IdbKeyRange.only([[]]);
            getMaxKey = function () { return [[]]; };
            return [[]];
        }
        catch (e) {
            getMaxKey = function () { return maxString; };
            return maxString;
        }
    };

    function getKeyExtractor(keyPath) {
        if (keyPath == null) {
            return function () { return undefined; };
        }
        else if (typeof keyPath === 'string') {
            return getSinglePathKeyExtractor(keyPath);
        }
        else {
            return function (obj) { return getByKeyPath(obj, keyPath); };
        }
    }
    function getSinglePathKeyExtractor(keyPath) {
        var split = keyPath.split('.');
        if (split.length === 1) {
            return function (obj) { return obj[keyPath]; };
        }
        else {
            return function (obj) { return getByKeyPath(obj, keyPath); };
        }
    }

    function arrayify(arrayLike) {
        return [].slice.call(arrayLike);
    }
    var _id_counter = 0;
    function getKeyPathAlias(keyPath) {
        return keyPath == null ?
            ":id" :
            typeof keyPath === 'string' ?
                keyPath :
                "[".concat(keyPath.join('+'), "]");
    }
    function createDBCore(db, IdbKeyRange, tmpTrans) {
        function extractSchema(db, trans) {
            var tables = arrayify(db.objectStoreNames);
            return {
                schema: {
                    name: db.name,
                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {
                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;
                        var compound = isArray(keyPath);
                        var outbound = keyPath == null;
                        var indexByKeyPath = {};
                        var result = {
                            name: store.name,
                            primaryKey: {
                                name: null,
                                isPrimaryKey: true,
                                outbound: outbound,
                                compound: compound,
                                keyPath: keyPath,
                                autoIncrement: autoIncrement,
                                unique: true,
                                extractKey: getKeyExtractor(keyPath)
                            },
                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })
                                .map(function (index) {
                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;
                                var compound = isArray(keyPath);
                                var result = {
                                    name: name,
                                    compound: compound,
                                    keyPath: keyPath,
                                    unique: unique,
                                    multiEntry: multiEntry,
                                    extractKey: getKeyExtractor(keyPath)
                                };
                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;
                                return result;
                            }),
                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }
                        };
                        indexByKeyPath[":id"] = result.primaryKey;
                        if (keyPath != null) {
                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;
                        }
                        return result;
                    })
                },
                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&
                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&
                        !/(Chrome\/|Edge\/)/.test(navigator.userAgent) &&
                        [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604)
            };
        }
        function makeIDBKeyRange(range) {
            if (range.type === 3 )
                return null;
            if (range.type === 4 )
                throw new Error("Cannot convert never type to IDBKeyRange");
            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;
            var idbRange = lower === undefined ?
                upper === undefined ?
                    null :
                    IdbKeyRange.upperBound(upper, !!upperOpen) :
                upper === undefined ?
                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :
                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);
            return idbRange;
        }
        function createDbCoreTable(tableSchema) {
            var tableName = tableSchema.name;
            function mutate(_a) {
                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;
                return new Promise(function (resolve, reject) {
                    resolve = wrap(resolve);
                    var store = trans.objectStore(tableName);
                    var outbound = store.keyPath == null;
                    var isAddOrPut = type === "put" || type === "add";
                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')
                        throw new Error("Invalid operation type: " + type);
                    var length = (keys || values || { length: 1 }).length;
                    if (keys && values && keys.length !== values.length) {
                        throw new Error("Given keys array must have same length as given values array.");
                    }
                    if (length === 0)
                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });
                    var req;
                    var reqs = [];
                    var failures = [];
                    var numFailures = 0;
                    var errorHandler = function (event) {
                        ++numFailures;
                        preventDefault(event);
                    };
                    if (type === 'deleteRange') {
                        if (range.type === 4 )
                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });
                        if (range.type === 3 )
                            reqs.push(req = store.clear());
                        else
                            reqs.push(req = store.delete(makeIDBKeyRange(range)));
                    }
                    else {
                        var _a = isAddOrPut ?
                            outbound ?
                                [values, keys] :
                                [values, null] :
                            [keys, null], args1 = _a[0], args2 = _a[1];
                        if (isAddOrPut) {
                            for (var i = 0; i < length; ++i) {
                                reqs.push(req = (args2 && args2[i] !== undefined ?
                                    store[type](args1[i], args2[i]) :
                                    store[type](args1[i])));
                                req.onerror = errorHandler;
                            }
                        }
                        else {
                            for (var i = 0; i < length; ++i) {
                                reqs.push(req = store[type](args1[i]));
                                req.onerror = errorHandler;
                            }
                        }
                    }
                    var done = function (event) {
                        var lastResult = event.target.result;
                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });
                        resolve({
                            numFailures: numFailures,
                            failures: failures,
                            results: type === "delete" ? keys : reqs.map(function (req) { return req.result; }),
                            lastResult: lastResult
                        });
                    };
                    req.onerror = function (event) {
                        errorHandler(event);
                        done(event);
                    };
                    req.onsuccess = done;
                });
            }
            function openCursor(_a) {
                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;
                return new Promise(function (resolve, reject) {
                    resolve = wrap(resolve);
                    var index = query.index, range = query.range;
                    var store = trans.objectStore(tableName);
                    var source = index.isPrimaryKey ?
                        store :
                        store.index(index.name);
                    var direction = reverse ?
                        unique ?
                            "prevunique" :
                            "prev" :
                        unique ?
                            "nextunique" :
                            "next";
                    var req = values || !('openKeyCursor' in source) ?
                        source.openCursor(makeIDBKeyRange(range), direction) :
                        source.openKeyCursor(makeIDBKeyRange(range), direction);
                    req.onerror = eventRejectHandler(reject);
                    req.onsuccess = wrap(function (ev) {
                        var cursor = req.result;
                        if (!cursor) {
                            resolve(null);
                            return;
                        }
                        cursor.___id = ++_id_counter;
                        cursor.done = false;
                        var _cursorContinue = cursor.continue.bind(cursor);
                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;
                        if (_cursorContinuePrimaryKey)
                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);
                        var _cursorAdvance = cursor.advance.bind(cursor);
                        var doThrowCursorIsNotStarted = function () { throw new Error("Cursor not started"); };
                        var doThrowCursorIsStopped = function () { throw new Error("Cursor not stopped"); };
                        cursor.trans = trans;
                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;
                        cursor.fail = wrap(reject);
                        cursor.next = function () {
                            var _this = this;
                            var gotOne = 1;
                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });
                        };
                        cursor.start = function (callback) {
                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {
                                resolveIteration = wrap(resolveIteration);
                                req.onerror = eventRejectHandler(rejectIteration);
                                cursor.fail = rejectIteration;
                                cursor.stop = function (value) {
                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;
                                    resolveIteration(value);
                                };
                            });
                            var guardedCallback = function () {
                                if (req.result) {
                                    try {
                                        callback();
                                    }
                                    catch (err) {
                                        cursor.fail(err);
                                    }
                                }
                                else {
                                    cursor.done = true;
                                    cursor.start = function () { throw new Error("Cursor behind last entry"); };
                                    cursor.stop();
                                }
                            };
                            req.onsuccess = wrap(function (ev) {
                                req.onsuccess = guardedCallback;
                                guardedCallback();
                            });
                            cursor.continue = _cursorContinue;
                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;
                            cursor.advance = _cursorAdvance;
                            guardedCallback();
                            return iterationPromise;
                        };
                        resolve(cursor);
                    }, reject);
                });
            }
            function query(hasGetAll) {
                return function (request) {
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;
                        var nonInfinitLimit = limit === Infinity ? undefined : limit;
                        var index = query.index, range = query.range;
                        var store = trans.objectStore(tableName);
                        var source = index.isPrimaryKey ? store : store.index(index.name);
                        var idbKeyRange = makeIDBKeyRange(range);
                        if (limit === 0)
                            return resolve({ result: [] });
                        if (hasGetAll) {
                            var req = values ?
                                source.getAll(idbKeyRange, nonInfinitLimit) :
                                source.getAllKeys(idbKeyRange, nonInfinitLimit);
                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };
                            req.onerror = eventRejectHandler(reject);
                        }
                        else {
                            var count_1 = 0;
                            var req_1 = values || !('openKeyCursor' in source) ?
                                source.openCursor(idbKeyRange) :
                                source.openKeyCursor(idbKeyRange);
                            var result_1 = [];
                            req_1.onsuccess = function (event) {
                                var cursor = req_1.result;
                                if (!cursor)
                                    return resolve({ result: result_1 });
                                result_1.push(values ? cursor.value : cursor.primaryKey);
                                if (++count_1 === limit)
                                    return resolve({ result: result_1 });
                                cursor.continue();
                            };
                            req_1.onerror = eventRejectHandler(reject);
                        }
                    });
                };
            }
            return {
                name: tableName,
                schema: tableSchema,
                mutate: mutate,
                getMany: function (_a) {
                    var trans = _a.trans, keys = _a.keys;
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var store = trans.objectStore(tableName);
                        var length = keys.length;
                        var result = new Array(length);
                        var keyCount = 0;
                        var callbackCount = 0;
                        var req;
                        var successHandler = function (event) {
                            var req = event.target;
                            if ((result[req._pos] = req.result) != null)
                                ;
                            if (++callbackCount === keyCount)
                                resolve(result);
                        };
                        var errorHandler = eventRejectHandler(reject);
                        for (var i = 0; i < length; ++i) {
                            var key = keys[i];
                            if (key != null) {
                                req = store.get(keys[i]);
                                req._pos = i;
                                req.onsuccess = successHandler;
                                req.onerror = errorHandler;
                                ++keyCount;
                            }
                        }
                        if (keyCount === 0)
                            resolve(result);
                    });
                },
                get: function (_a) {
                    var trans = _a.trans, key = _a.key;
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var store = trans.objectStore(tableName);
                        var req = store.get(key);
                        req.onsuccess = function (event) { return resolve(event.target.result); };
                        req.onerror = eventRejectHandler(reject);
                    });
                },
                query: query(hasGetAll),
                openCursor: openCursor,
                count: function (_a) {
                    var query = _a.query, trans = _a.trans;
                    var index = query.index, range = query.range;
                    return new Promise(function (resolve, reject) {
                        var store = trans.objectStore(tableName);
                        var source = index.isPrimaryKey ? store : store.index(index.name);
                        var idbKeyRange = makeIDBKeyRange(range);
                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();
                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });
                        req.onerror = eventRejectHandler(reject);
                    });
                }
            };
        }
        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;
        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });
        var tableMap = {};
        tables.forEach(function (table) { return tableMap[table.name] = table; });
        return {
            stack: "dbcore",
            transaction: db.transaction.bind(db),
            table: function (name) {
                var result = tableMap[name];
                if (!result)
                    throw new Error("Table '".concat(name, "' not found"));
                return tableMap[name];
            },
            MIN_KEY: -Infinity,
            MAX_KEY: getMaxKey(IdbKeyRange),
            schema: schema
        };
    }

    function createMiddlewareStack(stackImpl, middlewares) {
        return middlewares.reduce(function (down, _a) {
            var create = _a.create;
            return (__assign(__assign({}, down), create(down)));
        }, stackImpl);
    }
    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {
        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;
        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);
        return {
            dbcore: dbcore
        };
    }
    function generateMiddlewareStacks(db, tmpTrans) {
        var idbdb = tmpTrans.db;
        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);
        db.core = stacks.dbcore;
        db.tables.forEach(function (table) {
            var tableName = table.name;
            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {
                table.core = db.core.table(tableName);
                if (db[tableName] instanceof db.Table) {
                    db[tableName].core = table.core;
                }
            }
        });
    }

    function setApiOnPlace(db, objs, tableNames, dbschema) {
        tableNames.forEach(function (tableName) {
            var schema = dbschema[tableName];
            objs.forEach(function (obj) {
                var propDesc = getPropertyDescriptor(obj, tableName);
                if (!propDesc || ("value" in propDesc && propDesc.value === undefined)) {
                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {
                        setProp(obj, tableName, {
                            get: function () { return this.table(tableName); },
                            set: function (value) {
                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });
                            }
                        });
                    }
                    else {
                        obj[tableName] = new db.Table(tableName, schema);
                    }
                }
            });
        });
    }
    function removeTablesApi(db, objs) {
        objs.forEach(function (obj) {
            for (var key in obj) {
                if (obj[key] instanceof db.Table)
                    delete obj[key];
            }
        });
    }
    function lowerVersionFirst(a, b) {
        return a._cfg.version - b._cfg.version;
    }
    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {
        var globalSchema = db._dbSchema;
        if (idbUpgradeTrans.objectStoreNames.contains('$meta') && !globalSchema.$meta) {
            globalSchema.$meta = createTableSchema("$meta", parseIndexSyntax("")[0], []);
            db._storeNames.push('$meta');
        }
        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);
        trans.create(idbUpgradeTrans);
        trans._completion.catch(reject);
        var rejectTransaction = trans._reject.bind(trans);
        var transless = PSD.transless || PSD;
        newScope(function () {
            PSD.trans = trans;
            PSD.transless = transless;
            if (oldVersion === 0) {
                keys(globalSchema).forEach(function (tableName) {
                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);
                });
                generateMiddlewareStacks(db, idbUpgradeTrans);
                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);
            }
            else {
                generateMiddlewareStacks(db, idbUpgradeTrans);
                return getExistingVersion(db, trans, oldVersion)
                    .then(function (oldVersion) { return updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans); })
                    .catch(rejectTransaction);
            }
        });
    }
    function patchCurrentVersion(db, idbUpgradeTrans) {
        createMissingTables(db._dbSchema, idbUpgradeTrans);
        if (idbUpgradeTrans.db.version % 10 === 0 && !idbUpgradeTrans.objectStoreNames.contains('$meta')) {
            idbUpgradeTrans.db.createObjectStore('$meta').add(Math.ceil((idbUpgradeTrans.db.version / 10) - 1), 'version');
        }
        var globalSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);
        adjustToExistingIndexNames(db, db._dbSchema, idbUpgradeTrans);
        var diff = getSchemaDiff(globalSchema, db._dbSchema);
        var _loop_1 = function (tableChange) {
            if (tableChange.change.length || tableChange.recreate) {
                console.warn("Unable to patch indexes of table ".concat(tableChange.name, " because it has changes on the type of index or primary key."));
                return { value: void 0 };
            }
            var store = idbUpgradeTrans.objectStore(tableChange.name);
            tableChange.add.forEach(function (idx) {
                if (debug)
                    console.debug("Dexie upgrade patch: Creating missing index ".concat(tableChange.name, ".").concat(idx.src));
                addIndex(store, idx);
            });
        };
        for (var _i = 0, _a = diff.change; _i < _a.length; _i++) {
            var tableChange = _a[_i];
            var state_1 = _loop_1(tableChange);
            if (typeof state_1 === "object")
                return state_1.value;
        }
    }
    function getExistingVersion(db, trans, oldVersion) {
        if (trans.storeNames.includes('$meta')) {
            return trans.table('$meta').get('version').then(function (metaVersion) {
                return metaVersion != null ? metaVersion : oldVersion;
            });
        }
        else {
            return DexiePromise.resolve(oldVersion);
        }
    }
    function updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {
        var queue = [];
        var versions = db._versions;
        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);
        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });
        if (versToRun.length === 0) {
            return DexiePromise.resolve();
        }
        versToRun.forEach(function (version) {
            queue.push(function () {
                var oldSchema = globalSchema;
                var newSchema = version._cfg.dbschema;
                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);
                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);
                globalSchema = db._dbSchema = newSchema;
                var diff = getSchemaDiff(oldSchema, newSchema);
                diff.add.forEach(function (tuple) {
                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);
                });
                diff.change.forEach(function (change) {
                    if (change.recreate) {
                        throw new exceptions.Upgrade("Not yet support for changing primary key");
                    }
                    else {
                        var store_1 = idbUpgradeTrans.objectStore(change.name);
                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });
                        change.change.forEach(function (idx) {
                            store_1.deleteIndex(idx.name);
                            addIndex(store_1, idx);
                        });
                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });
                    }
                });
                var contentUpgrade = version._cfg.contentUpgrade;
                if (contentUpgrade && version._cfg.version > oldVersion) {
                    generateMiddlewareStacks(db, idbUpgradeTrans);
                    trans._memoizedTables = {};
                    var upgradeSchema_1 = shallowClone(newSchema);
                    diff.del.forEach(function (table) {
                        upgradeSchema_1[table] = oldSchema[table];
                    });
                    removeTablesApi(db, [db.Transaction.prototype]);
                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);
                    trans.schema = upgradeSchema_1;
                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);
                    if (contentUpgradeIsAsync_1) {
                        incrementExpectedAwaits();
                    }
                    var returnValue_1;
                    var promiseFollowed = DexiePromise.follow(function () {
                        returnValue_1 = contentUpgrade(trans);
                        if (returnValue_1) {
                            if (contentUpgradeIsAsync_1) {
                                var decrementor = decrementExpectedAwaits.bind(null, null);
                                returnValue_1.then(decrementor, decrementor);
                            }
                        }
                    });
                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?
                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));
                }
            });
            queue.push(function (idbtrans) {
                var newSchema = version._cfg.dbschema;
                deleteRemovedTables(newSchema, idbtrans);
                removeTablesApi(db, [db.Transaction.prototype]);
                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);
                trans.schema = db._dbSchema;
            });
            queue.push(function (idbtrans) {
                if (db.idbdb.objectStoreNames.contains('$meta')) {
                    if (Math.ceil(db.idbdb.version / 10) === version._cfg.version) {
                        db.idbdb.deleteObjectStore('$meta');
                        delete db._dbSchema.$meta;
                        db._storeNames = db._storeNames.filter(function (name) { return name !== '$meta'; });
                    }
                    else {
                        idbtrans.objectStore('$meta').put(version._cfg.version, 'version');
                    }
                }
            });
        });
        function runQueue() {
            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :
                DexiePromise.resolve();
        }
        return runQueue().then(function () {
            createMissingTables(globalSchema, idbUpgradeTrans);
        });
    }
    function getSchemaDiff(oldSchema, newSchema) {
        var diff = {
            del: [],
            add: [],
            change: []
        };
        var table;
        for (table in oldSchema) {
            if (!newSchema[table])
                diff.del.push(table);
        }
        for (table in newSchema) {
            var oldDef = oldSchema[table], newDef = newSchema[table];
            if (!oldDef) {
                diff.add.push([table, newDef]);
            }
            else {
                var change = {
                    name: table,
                    def: newDef,
                    recreate: false,
                    del: [],
                    add: [],
                    change: []
                };
                if ((
                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||
                    (oldDef.primKey.auto !== newDef.primKey.auto)) {
                    change.recreate = true;
                    diff.change.push(change);
                }
                else {
                    var oldIndexes = oldDef.idxByName;
                    var newIndexes = newDef.idxByName;
                    var idxName = void 0;
                    for (idxName in oldIndexes) {
                        if (!newIndexes[idxName])
                            change.del.push(idxName);
                    }
                    for (idxName in newIndexes) {
                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];
                        if (!oldIdx)
                            change.add.push(newIdx);
                        else if (oldIdx.src !== newIdx.src)
                            change.change.push(newIdx);
                    }
                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {
                        diff.change.push(change);
                    }
                }
            }
        }
        return diff;
    }
    function createTable(idbtrans, tableName, primKey, indexes) {
        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?
            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :
            { autoIncrement: primKey.auto });
        indexes.forEach(function (idx) { return addIndex(store, idx); });
        return store;
    }
    function createMissingTables(newSchema, idbtrans) {
        keys(newSchema).forEach(function (tableName) {
            if (!idbtrans.db.objectStoreNames.contains(tableName)) {
                if (debug)
                    console.debug('Dexie: Creating missing table', tableName);
                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);
            }
        });
    }
    function deleteRemovedTables(newSchema, idbtrans) {
        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {
            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);
        });
    }
    function addIndex(store, idx) {
        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });
    }
    function buildGlobalSchema(db, idbdb, tmpTrans) {
        var globalSchema = {};
        var dbStoreNames = slice(idbdb.objectStoreNames, 0);
        dbStoreNames.forEach(function (storeName) {
            var store = tmpTrans.objectStore(storeName);
            var keyPath = store.keyPath;
            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || "", true, false, !!store.autoIncrement, keyPath && typeof keyPath !== "string", true);
            var indexes = [];
            for (var j = 0; j < store.indexNames.length; ++j) {
                var idbindex = store.index(store.indexNames[j]);
                keyPath = idbindex.keyPath;
                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== "string", false);
                indexes.push(index);
            }
            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);
        });
        return globalSchema;
    }
    function readGlobalSchema(db, idbdb, tmpTrans) {
        db.verno = idbdb.version / 10;
        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);
        db._storeNames = slice(idbdb.objectStoreNames, 0);
        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);
    }
    function verifyInstalledSchema(db, tmpTrans) {
        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);
        var diff = getSchemaDiff(installedSchema, db._dbSchema);
        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));
    }
    function adjustToExistingIndexNames(db, schema, idbtrans) {
        var storeNames = idbtrans.db.objectStoreNames;
        for (var i = 0; i < storeNames.length; ++i) {
            var storeName = storeNames[i];
            var store = idbtrans.objectStore(storeName);
            db._hasGetAll = 'getAll' in store;
            for (var j = 0; j < store.indexNames.length; ++j) {
                var indexName = store.indexNames[j];
                var keyPath = store.index(indexName).keyPath;
                var dexieName = typeof keyPath === 'string' ? keyPath : "[" + slice(keyPath).join('+') + "]";
                if (schema[storeName]) {
                    var indexSpec = schema[storeName].idxByName[dexieName];
                    if (indexSpec) {
                        indexSpec.name = indexName;
                        delete schema[storeName].idxByName[dexieName];
                        schema[storeName].idxByName[indexName] = indexSpec;
                    }
                }
            }
        }
        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&
            !/(Chrome\/|Edge\/)/.test(navigator.userAgent) &&
            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&
            [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604) {
            db._hasGetAll = false;
        }
    }
    function parseIndexSyntax(primKeyAndIndexes) {
        return primKeyAndIndexes.split(',').map(function (index, indexNum) {
            index = index.trim();
            var name = index.replace(/([&*]|\+\+)/g, "");
            var keyPath = /^\[/.test(name) ? name.match(/^\[(.*)\]$/)[1].split('+') : name;
            return createIndexSpec(name, keyPath || null, /\&/.test(index), /\*/.test(index), /\+\+/.test(index), isArray(keyPath), indexNum === 0);
        });
    }

    var Version =  (function () {
        function Version() {
        }
        Version.prototype._parseStoresSpec = function (stores, outSchema) {
            keys(stores).forEach(function (tableName) {
                if (stores[tableName] !== null) {
                    var indexes = parseIndexSyntax(stores[tableName]);
                    var primKey = indexes.shift();
                    primKey.unique = true;
                    if (primKey.multi)
                        throw new exceptions.Schema("Primary key cannot be multi-valued");
                    indexes.forEach(function (idx) {
                        if (idx.auto)
                            throw new exceptions.Schema("Only primary key can be marked as autoIncrement (++)");
                        if (!idx.keyPath)
                            throw new exceptions.Schema("Index must have a name and cannot be an empty string");
                    });
                    outSchema[tableName] = createTableSchema(tableName, primKey, indexes);
                }
            });
        };
        Version.prototype.stores = function (stores) {
            var db = this.db;
            this._cfg.storesSource = this._cfg.storesSource ?
                extend(this._cfg.storesSource, stores) :
                stores;
            var versions = db._versions;
            var storesSpec = {};
            var dbschema = {};
            versions.forEach(function (version) {
                extend(storesSpec, version._cfg.storesSource);
                dbschema = (version._cfg.dbschema = {});
                version._parseStoresSpec(storesSpec, dbschema);
            });
            db._dbSchema = dbschema;
            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);
            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);
            db._storeNames = keys(dbschema);
            return this;
        };
        Version.prototype.upgrade = function (upgradeFunction) {
            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);
            return this;
        };
        return Version;
    }());

    function createVersionConstructor(db) {
        return makeClassConstructor(Version.prototype, function Version(versionNumber) {
            this.db = db;
            this._cfg = {
                version: versionNumber,
                storesSource: null,
                dbschema: {},
                tables: {},
                contentUpgrade: null
            };
        });
    }

    function getDbNamesTable(indexedDB, IDBKeyRange) {
        var dbNamesDB = indexedDB["_dbNamesDB"];
        if (!dbNamesDB) {
            dbNamesDB = indexedDB["_dbNamesDB"] = new Dexie$1(DBNAMES_DB, {
                addons: [],
                indexedDB: indexedDB,
                IDBKeyRange: IDBKeyRange,
            });
            dbNamesDB.version(1).stores({ dbnames: "name" });
        }
        return dbNamesDB.table("dbnames");
    }
    function hasDatabasesNative(indexedDB) {
        return indexedDB && typeof indexedDB.databases === "function";
    }
    function getDatabaseNames(_a) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        return hasDatabasesNative(indexedDB)
            ? Promise.resolve(indexedDB.databases()).then(function (infos) {
                return infos
                    .map(function (info) { return info.name; })
                    .filter(function (name) { return name !== DBNAMES_DB; });
            })
            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();
    }
    function _onDatabaseCreated(_a, name) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        !hasDatabasesNative(indexedDB) &&
            name !== DBNAMES_DB &&
            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);
    }
    function _onDatabaseDeleted(_a, name) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        !hasDatabasesNative(indexedDB) &&
            name !== DBNAMES_DB &&
            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);
    }

    function vip(fn) {
        return newScope(function () {
            PSD.letThrough = true;
            return fn();
        });
    }

    function idbReady() {
        var isSafari = !navigator.userAgentData &&
            /Safari\//.test(navigator.userAgent) &&
            !/Chrom(e|ium)\//.test(navigator.userAgent);
        if (!isSafari || !indexedDB.databases)
            return Promise.resolve();
        var intervalId;
        return new Promise(function (resolve) {
            var tryIdb = function () { return indexedDB.databases().finally(resolve); };
            intervalId = setInterval(tryIdb, 100);
            tryIdb();
        }).finally(function () { return clearInterval(intervalId); });
    }

    var _a;
    function isEmptyRange(node) {
        return !("from" in node);
    }
    var RangeSet = function (fromOrTree, to) {
        if (this) {
            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });
        }
        else {
            var rv = new RangeSet();
            if (fromOrTree && ("d" in fromOrTree)) {
                extend(rv, fromOrTree);
            }
            return rv;
        }
    };
    props(RangeSet.prototype, (_a = {
            add: function (rangeSet) {
                mergeRanges(this, rangeSet);
                return this;
            },
            addKey: function (key) {
                addRange(this, key, key);
                return this;
            },
            addKeys: function (keys) {
                var _this = this;
                keys.forEach(function (key) { return addRange(_this, key, key); });
                return this;
            },
            hasKey: function (key) {
                var node = getRangeSetIterator(this).next(key).value;
                return node && cmp(node.from, key) <= 0 && cmp(node.to, key) >= 0;
            }
        },
        _a[iteratorSymbol] = function () {
            return getRangeSetIterator(this);
        },
        _a));
    function addRange(target, from, to) {
        var diff = cmp(from, to);
        if (isNaN(diff))
            return;
        if (diff > 0)
            throw RangeError();
        if (isEmptyRange(target))
            return extend(target, { from: from, to: to, d: 1 });
        var left = target.l;
        var right = target.r;
        if (cmp(to, target.from) < 0) {
            left
                ? addRange(left, from, to)
                : (target.l = { from: from, to: to, d: 1, l: null, r: null });
            return rebalance(target);
        }
        if (cmp(from, target.to) > 0) {
            right
                ? addRange(right, from, to)
                : (target.r = { from: from, to: to, d: 1, l: null, r: null });
            return rebalance(target);
        }
        if (cmp(from, target.from) < 0) {
            target.from = from;
            target.l = null;
            target.d = right ? right.d + 1 : 1;
        }
        if (cmp(to, target.to) > 0) {
            target.to = to;
            target.r = null;
            target.d = target.l ? target.l.d + 1 : 1;
        }
        var rightWasCutOff = !target.r;
        if (left && !target.l) {
            mergeRanges(target, left);
        }
        if (right && rightWasCutOff) {
            mergeRanges(target, right);
        }
    }
    function mergeRanges(target, newSet) {
        function _addRangeSet(target, _a) {
            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;
            addRange(target, from, to);
            if (l)
                _addRangeSet(target, l);
            if (r)
                _addRangeSet(target, r);
        }
        if (!isEmptyRange(newSet))
            _addRangeSet(target, newSet);
    }
    function rangesOverlap(rangeSet1, rangeSet2) {
        var i1 = getRangeSetIterator(rangeSet2);
        var nextResult1 = i1.next();
        if (nextResult1.done)
            return false;
        var a = nextResult1.value;
        var i2 = getRangeSetIterator(rangeSet1);
        var nextResult2 = i2.next(a.from);
        var b = nextResult2.value;
        while (!nextResult1.done && !nextResult2.done) {
            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)
                return true;
            cmp(a.from, b.from) < 0
                ? (a = (nextResult1 = i1.next(b.from)).value)
                : (b = (nextResult2 = i2.next(a.from)).value);
        }
        return false;
    }
    function getRangeSetIterator(node) {
        var state = isEmptyRange(node) ? null : { s: 0, n: node };
        return {
            next: function (key) {
                var keyProvided = arguments.length > 0;
                while (state) {
                    switch (state.s) {
                        case 0:
                            state.s = 1;
                            if (keyProvided) {
                                while (state.n.l && cmp(key, state.n.from) < 0)
                                    state = { up: state, n: state.n.l, s: 1 };
                            }
                            else {
                                while (state.n.l)
                                    state = { up: state, n: state.n.l, s: 1 };
                            }
                        case 1:
                            state.s = 2;
                            if (!keyProvided || cmp(key, state.n.to) <= 0)
                                return { value: state.n, done: false };
                        case 2:
                            if (state.n.r) {
                                state.s = 3;
                                state = { up: state, n: state.n.r, s: 0 };
                                continue;
                            }
                        case 3:
                            state = state.up;
                    }
                }
                return { done: true };
            },
        };
    }
    function rebalance(target) {
        var _a, _b;
        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);
        var r = diff > 1 ? "r" : diff < -1 ? "l" : "";
        if (r) {
            var l = r === "r" ? "l" : "r";
            var rootClone = __assign({}, target);
            var oldRootRight = target[r];
            target.from = oldRootRight.from;
            target.to = oldRootRight.to;
            target[r] = oldRootRight[r];
            rootClone[r] = oldRootRight[l];
            target[l] = rootClone;
            rootClone.d = computeDepth(rootClone);
        }
        target.d = computeDepth(target);
    }
    function computeDepth(_a) {
        var r = _a.r, l = _a.l;
        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;
    }

    function extendObservabilitySet(target, newSet) {
        keys(newSet).forEach(function (part) {
            if (target[part])
                mergeRanges(target[part], newSet[part]);
            else
                target[part] = cloneSimpleObjectTree(newSet[part]);
        });
        return target;
    }

    function obsSetsOverlap(os1, os2) {
        return os1.all || os2.all || Object.keys(os1).some(function (key) { return os2[key] && rangesOverlap(os2[key], os1[key]); });
    }

    var cache = {};

    var unsignaledParts = {};
    var isTaskEnqueued = false;
    function signalSubscribersLazily(part, optimistic) {
        extendObservabilitySet(unsignaledParts, part);
        if (!isTaskEnqueued) {
            isTaskEnqueued = true;
            setTimeout(function () {
                isTaskEnqueued = false;
                var parts = unsignaledParts;
                unsignaledParts = {};
                signalSubscribersNow(parts, false);
            }, 0);
        }
    }
    function signalSubscribersNow(updatedParts, deleteAffectedCacheEntries) {
        if (deleteAffectedCacheEntries === void 0) { deleteAffectedCacheEntries = false; }
        var queriesToSignal = new Set();
        if (updatedParts.all) {
            for (var _i = 0, _a = Object.values(cache); _i < _a.length; _i++) {
                var tblCache = _a[_i];
                collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);
            }
        }
        else {
            for (var key in updatedParts) {
                var parts = /^idb\:\/\/(.*)\/(.*)\//.exec(key);
                if (parts) {
                    var dbName = parts[1], tableName = parts[2];
                    var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
                    if (tblCache)
                        collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);
                }
            }
        }
        queriesToSignal.forEach(function (requery) { return requery(); });
    }
    function collectTableSubscribers(tblCache, updatedParts, outQueriesToSignal, deleteAffectedCacheEntries) {
        var updatedEntryLists = [];
        for (var _i = 0, _a = Object.entries(tblCache.queries.query); _i < _a.length; _i++) {
            var _b = _a[_i], indexName = _b[0], entries = _b[1];
            var filteredEntries = [];
            for (var _c = 0, entries_1 = entries; _c < entries_1.length; _c++) {
                var entry = entries_1[_c];
                if (obsSetsOverlap(updatedParts, entry.obsSet)) {
                    entry.subscribers.forEach(function (requery) { return outQueriesToSignal.add(requery); });
                }
                else if (deleteAffectedCacheEntries) {
                    filteredEntries.push(entry);
                }
            }
            if (deleteAffectedCacheEntries)
                updatedEntryLists.push([indexName, filteredEntries]);
        }
        if (deleteAffectedCacheEntries) {
            for (var _d = 0, updatedEntryLists_1 = updatedEntryLists; _d < updatedEntryLists_1.length; _d++) {
                var _e = updatedEntryLists_1[_d], indexName = _e[0], filteredEntries = _e[1];
                tblCache.queries.query[indexName] = filteredEntries;
            }
        }
    }

    function dexieOpen(db) {
        var state = db._state;
        var indexedDB = db._deps.indexedDB;
        if (state.isBeingOpened || db.idbdb)
            return state.dbReadyPromise.then(function () { return state.dbOpenError ?
                rejection(state.dbOpenError) :
                db; });
        state.isBeingOpened = true;
        state.dbOpenError = null;
        state.openComplete = false;
        var openCanceller = state.openCanceller;
        var nativeVerToOpen = Math.round(db.verno * 10);
        var schemaPatchMode = false;
        function throwIfCancelled() {
            if (state.openCanceller !== openCanceller)
                throw new exceptions.DatabaseClosed('db.open() was cancelled');
        }
        var resolveDbReady = state.dbReadyResolve,
        upgradeTransaction = null, wasCreated = false;
        var tryOpenDB = function () { return new DexiePromise(function (resolve, reject) {
            throwIfCancelled();
            if (!indexedDB)
                throw new exceptions.MissingAPI();
            var dbName = db.name;
            var req = state.autoSchema || !nativeVerToOpen ?
                indexedDB.open(dbName) :
                indexedDB.open(dbName, nativeVerToOpen);
            if (!req)
                throw new exceptions.MissingAPI();
            req.onerror = eventRejectHandler(reject);
            req.onblocked = wrap(db._fireOnBlocked);
            req.onupgradeneeded = wrap(function (e) {
                upgradeTransaction = req.transaction;
                if (state.autoSchema && !db._options.allowEmptyDB) {
                    req.onerror = preventDefault;
                    upgradeTransaction.abort();
                    req.result.close();
                    var delreq = indexedDB.deleteDatabase(dbName);
                    delreq.onsuccess = delreq.onerror = wrap(function () {
                        reject(new exceptions.NoSuchDatabase("Database ".concat(dbName, " doesnt exist")));
                    });
                }
                else {
                    upgradeTransaction.onerror = eventRejectHandler(reject);
                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;
                    wasCreated = oldVer < 1;
                    db.idbdb = req.result;
                    if (schemaPatchMode) {
                        patchCurrentVersion(db, upgradeTransaction);
                    }
                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);
                }
            }, reject);
            req.onsuccess = wrap(function () {
                upgradeTransaction = null;
                var idbdb = db.idbdb = req.result;
                var objectStoreNames = slice(idbdb.objectStoreNames);
                if (objectStoreNames.length > 0)
                    try {
                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');
                        if (state.autoSchema)
                            readGlobalSchema(db, idbdb, tmpTrans);
                        else {
                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);
                            if (!verifyInstalledSchema(db, tmpTrans) && !schemaPatchMode) {
                                console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.");
                                idbdb.close();
                                nativeVerToOpen = idbdb.version + 1;
                                schemaPatchMode = true;
                                return resolve(tryOpenDB());
                            }
                        }
                        generateMiddlewareStacks(db, tmpTrans);
                    }
                    catch (e) {
                    }
                connections.push(db);
                idbdb.onversionchange = wrap(function (ev) {
                    state.vcFired = true;
                    db.on("versionchange").fire(ev);
                });
                idbdb.onclose = wrap(function (ev) {
                    db.on("close").fire(ev);
                });
                if (wasCreated)
                    _onDatabaseCreated(db._deps, dbName);
                resolve();
            }, reject);
        }).catch(function (err) {
            switch (err === null || err === void 0 ? void 0 : err.name) {
                case "UnknownError":
                    if (state.PR1398_maxLoop > 0) {
                        state.PR1398_maxLoop--;
                        console.warn('Dexie: Workaround for Chrome UnknownError on open()');
                        return tryOpenDB();
                    }
                    break;
                case "VersionError":
                    if (nativeVerToOpen > 0) {
                        nativeVerToOpen = 0;
                        return tryOpenDB();
                    }
                    break;
            }
            return DexiePromise.reject(err);
        }); };
        return DexiePromise.race([
            openCanceller,
            (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(tryOpenDB)
        ]).then(function () {
            throwIfCancelled();
            state.onReadyBeingFired = [];
            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {
                if (state.onReadyBeingFired.length > 0) {
                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);
                    state.onReadyBeingFired = [];
                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);
                }
            });
        }).finally(function () {
            if (state.openCanceller === openCanceller) {
                state.onReadyBeingFired = null;
                state.isBeingOpened = false;
            }
        }).catch(function (err) {
            state.dbOpenError = err;
            try {
                upgradeTransaction && upgradeTransaction.abort();
            }
            catch (_a) { }
            if (openCanceller === state.openCanceller) {
                db._close();
            }
            return rejection(err);
        }).finally(function () {
            state.openComplete = true;
            resolveDbReady();
        }).then(function () {
            if (wasCreated) {
                var everything_1 = {};
                db.tables.forEach(function (table) {
                    table.schema.indexes.forEach(function (idx) {
                        if (idx.name)
                            everything_1["idb://".concat(db.name, "/").concat(table.name, "/").concat(idx.name)] = new RangeSet(-Infinity, [[[]]]);
                    });
                    everything_1["idb://".concat(db.name, "/").concat(table.name, "/")] = everything_1["idb://".concat(db.name, "/").concat(table.name, "/:dels")] = new RangeSet(-Infinity, [[[]]]);
                });
                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME).fire(everything_1);
                signalSubscribersNow(everything_1, true);
            }
            return db;
        });
    }

    function awaitIterator(iterator) {
        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);
        function step(getNext) {
            return function (val) {
                var next = getNext(val), value = next.value;
                return next.done ? value :
                    (!value || typeof value.then !== 'function' ?
                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :
                        value.then(onSuccess, onError));
            };
        }
        return step(callNext)();
    }

    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {
        var i = arguments.length;
        if (i < 2)
            throw new exceptions.InvalidArgument("Too few arguments");
        var args = new Array(i - 1);
        while (--i)
            args[i - 1] = arguments[i];
        scopeFunc = args.pop();
        var tables = flatten(args);
        return [mode, tables, scopeFunc];
    }
    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {
        return DexiePromise.resolve().then(function () {
            var transless = PSD.transless || PSD;
            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);
            trans.explicit = true;
            var zoneProps = {
                trans: trans,
                transless: transless
            };
            if (parentTransaction) {
                trans.idbtrans = parentTransaction.idbtrans;
            }
            else {
                try {
                    trans.create();
                    trans.idbtrans._explicit = true;
                    db._state.PR1398_maxLoop = 3;
                }
                catch (ex) {
                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {
                        console.warn('Dexie: Need to reopen db');
                        db.close({ disableAutoOpen: false });
                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });
                    }
                    return rejection(ex);
                }
            }
            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);
            if (scopeFuncIsAsync) {
                incrementExpectedAwaits();
            }
            var returnValue;
            var promiseFollowed = DexiePromise.follow(function () {
                returnValue = scopeFunc.call(trans, trans);
                if (returnValue) {
                    if (scopeFuncIsAsync) {
                        var decrementor = decrementExpectedAwaits.bind(null, null);
                        returnValue.then(decrementor, decrementor);
                    }
                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {
                        returnValue = awaitIterator(returnValue);
                    }
                }
            }, zoneProps);
            return (returnValue && typeof returnValue.then === 'function' ?
                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?
                    x
                    : rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")); })
                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {
                if (parentTransaction)
                    trans._resolve();
                return trans._completion.then(function () { return x; });
            }).catch(function (e) {
                trans._reject(e);
                return rejection(e);
            });
        });
    }

    function pad(a, value, count) {
        var result = isArray(a) ? a.slice() : [a];
        for (var i = 0; i < count; ++i)
            result.push(value);
        return result;
    }
    function createVirtualIndexMiddleware(down) {
        return __assign(__assign({}, down), { table: function (tableName) {
                var table = down.table(tableName);
                var schema = table.schema;
                var indexLookup = {};
                var allVirtualIndexes = [];
                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {
                    var keyPathAlias = getKeyPathAlias(keyPath);
                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);
                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;
                    var isVirtual = keyTail > 0;
                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { name: isVirtual
                            ? "".concat(keyPathAlias, "(virtual-from:").concat(lowLevelIndex.name, ")")
                            : lowLevelIndex.name, lowLevelIndex: lowLevelIndex, isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });
                    indexList.push(virtualIndex);
                    if (!virtualIndex.isPrimaryKey) {
                        allVirtualIndexes.push(virtualIndex);
                    }
                    if (keyLength > 1) {
                        var virtualKeyPath = keyLength === 2 ?
                            keyPath[0] :
                            keyPath.slice(0, keyLength - 1);
                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);
                    }
                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });
                    return virtualIndex;
                }
                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);
                indexLookup[":id"] = [primaryKey];
                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {
                    var index = _a[_i];
                    addVirtualIndexes(index.keyPath, 0, index);
                }
                function findBestIndex(keyPath) {
                    var result = indexLookup[getKeyPathAlias(keyPath)];
                    return result && result[0];
                }
                function translateRange(range, keyTail) {
                    return {
                        type: range.type === 1  ?
                            2  :
                            range.type,
                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),
                        lowerOpen: true,
                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),
                        upperOpen: true
                    };
                }
                function translateRequest(req) {
                    var index = req.query.index;
                    return index.isVirtual ? __assign(__assign({}, req), { query: {
                            index: index.lowLevelIndex,
                            range: translateRange(req.query.range, index.keyTail)
                        } }) : req;
                }
                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {
                        return table.count(translateRequest(req));
                    }, query: function (req) {
                        return table.query(translateRequest(req));
                    }, openCursor: function (req) {
                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;
                        if (!isVirtual)
                            return table.openCursor(req);
                        function createVirtualCursor(cursor) {
                            function _continue(key) {
                                key != null ?
                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :
                                    req.unique ?
                                        cursor.continue(cursor.key.slice(0, keyLength)
                                            .concat(req.reverse
                                            ? down.MIN_KEY
                                            : down.MAX_KEY, keyTail)) :
                                        cursor.continue();
                            }
                            var virtualCursor = Object.create(cursor, {
                                continue: { value: _continue },
                                continuePrimaryKey: {
                                    value: function (key, primaryKey) {
                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);
                                    }
                                },
                                primaryKey: {
                                    get: function () {
                                        return cursor.primaryKey;
                                    }
                                },
                                key: {
                                    get: function () {
                                        var key = cursor.key;
                                        return keyLength === 1 ?
                                            key[0] :
                                            key.slice(0, keyLength);
                                    }
                                },
                                value: {
                                    get: function () {
                                        return cursor.value;
                                    }
                                }
                            });
                            return virtualCursor;
                        }
                        return table.openCursor(translateRequest(req))
                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });
                    } });
                return result;
            } });
    }
    var virtualIndexMiddleware = {
        stack: "dbcore",
        name: "VirtualIndexMiddleware",
        level: 1,
        create: createVirtualIndexMiddleware
    };

    function getObjectDiff(a, b, rv, prfx) {
        rv = rv || {};
        prfx = prfx || '';
        keys(a).forEach(function (prop) {
            if (!hasOwn(b, prop)) {
                rv[prfx + prop] = undefined;
            }
            else {
                var ap = a[prop], bp = b[prop];
                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {
                    var apTypeName = toStringTag(ap);
                    var bpTypeName = toStringTag(bp);
                    if (apTypeName !== bpTypeName) {
                        rv[prfx + prop] = b[prop];
                    }
                    else if (apTypeName === 'Object') {
                        getObjectDiff(ap, bp, rv, prfx + prop + '.');
                    }
                    else if (ap !== bp) {
                        rv[prfx + prop] = b[prop];
                    }
                }
                else if (ap !== bp)
                    rv[prfx + prop] = b[prop];
            }
        });
        keys(b).forEach(function (prop) {
            if (!hasOwn(a, prop)) {
                rv[prfx + prop] = b[prop];
            }
        });
        return rv;
    }

    function getEffectiveKeys(primaryKey, req) {
        if (req.type === 'delete')
            return req.keys;
        return req.keys || req.values.map(primaryKey.extractKey);
    }

    var hooksMiddleware = {
        stack: "dbcore",
        name: "HooksMiddleware",
        level: 2,
        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {
                var downTable = downCore.table(tableName);
                var primaryKey = downTable.schema.primaryKey;
                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {
                        var dxTrans = PSD.trans;
                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;
                        switch (req.type) {
                            case 'add':
                                if (creating.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'put':
                                if (creating.fire === nop && updating.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'delete':
                                if (deleting.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'deleteRange':
                                if (deleting.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);
                        }
                        return downTable.mutate(req);
                        function addPutOrDelete(req) {
                            var dxTrans = PSD.trans;
                            var keys = req.keys || getEffectiveKeys(primaryKey, req);
                            if (!keys)
                                throw new Error("Keys missing");
                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);
                            if (req.type !== 'delete')
                                req.values = __spreadArray([], req.values, true);
                            if (req.keys)
                                req.keys = __spreadArray([], req.keys, true);
                            return getExistingValues(downTable, req, keys).then(function (existingValues) {
                                var contexts = keys.map(function (key, i) {
                                    var existingValue = existingValues[i];
                                    var ctx = { onerror: null, onsuccess: null };
                                    if (req.type === 'delete') {
                                        deleting.fire.call(ctx, key, existingValue, dxTrans);
                                    }
                                    else if (req.type === 'add' || existingValue === undefined) {
                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);
                                        if (key == null && generatedPrimaryKey != null) {
                                            key = generatedPrimaryKey;
                                            req.keys[i] = key;
                                            if (!primaryKey.outbound) {
                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);
                                            }
                                        }
                                    }
                                    else {
                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);
                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);
                                        if (additionalChanges_1) {
                                            var requestedValue_1 = req.values[i];
                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {
                                                if (hasOwn(requestedValue_1, keyPath)) {
                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];
                                                }
                                                else {
                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);
                                                }
                                            });
                                        }
                                    }
                                    return ctx;
                                });
                                return downTable.mutate(req).then(function (_a) {
                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;
                                    for (var i = 0; i < keys.length; ++i) {
                                        var primKey = results ? results[i] : keys[i];
                                        var ctx = contexts[i];
                                        if (primKey == null) {
                                            ctx.onerror && ctx.onerror(failures[i]);
                                        }
                                        else {
                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?
                                                req.values[i] :
                                                primKey
                                            );
                                        }
                                    }
                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };
                                }).catch(function (error) {
                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });
                                    return Promise.reject(error);
                                });
                            });
                        }
                        function deleteRange(req) {
                            return deleteNextChunk(req.trans, req.range, 10000);
                        }
                        function deleteNextChunk(trans, range, limit) {
                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })
                                .then(function (_a) {
                                var result = _a.result;
                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {
                                    if (res.numFailures > 0)
                                        return Promise.reject(res.failures[0]);
                                    if (result.length < limit) {
                                        return { failures: [], numFailures: 0, lastResult: undefined };
                                    }
                                    else {
                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);
                                    }
                                });
                            });
                        }
                    } });
                return tableMiddleware;
            } })); }
    };
    function getExistingValues(table, req, effectiveKeys) {
        return req.type === "add"
            ? Promise.resolve([])
            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: "immutable" });
    }

    function getFromTransactionCache(keys, cache, clone) {
        try {
            if (!cache)
                return null;
            if (cache.keys.length < keys.length)
                return null;
            var result = [];
            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {
                if (cmp(cache.keys[i], keys[j]) !== 0)
                    continue;
                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);
                ++j;
            }
            return result.length === keys.length ? result : null;
        }
        catch (_a) {
            return null;
        }
    }
    var cacheExistingValuesMiddleware = {
        stack: "dbcore",
        level: -1,
        create: function (core) {
            return {
                table: function (tableName) {
                    var table = core.table(tableName);
                    return __assign(__assign({}, table), { getMany: function (req) {
                            if (!req.cache) {
                                return table.getMany(req);
                            }
                            var cachedResult = getFromTransactionCache(req.keys, req.trans["_cache"], req.cache === "clone");
                            if (cachedResult) {
                                return DexiePromise.resolve(cachedResult);
                            }
                            return table.getMany(req).then(function (res) {
                                req.trans["_cache"] = {
                                    keys: req.keys,
                                    values: req.cache === "clone" ? deepClone(res) : res,
                                };
                                return res;
                            });
                        }, mutate: function (req) {
                            if (req.type !== "add")
                                req.trans["_cache"] = null;
                            return table.mutate(req);
                        } });
                },
            };
        },
    };

    function isCachableContext(ctx, table) {
        return (ctx.trans.mode === 'readonly' &&
            !!ctx.subscr &&
            !ctx.trans.explicit &&
            ctx.trans.db._options.cache !== 'disabled' &&
            !table.schema.primaryKey.outbound);
    }

    function isCachableRequest(type, req) {
        switch (type) {
            case 'query':
                return req.values && !req.unique;
            case 'get':
                return false;
            case 'getMany':
                return false;
            case 'count':
                return false;
            case 'openCursor':
                return false;
        }
    }

    var observabilityMiddleware = {
        stack: "dbcore",
        level: 0,
        name: "Observability",
        create: function (core) {
            var dbName = core.schema.name;
            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);
            return __assign(__assign({}, core), { transaction: function (stores, mode, options) {
                    if (PSD.subscr && mode !== 'readonly') {
                        throw new exceptions.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(PSD.querier));
                    }
                    return core.transaction(stores, mode, options);
                }, table: function (tableName) {
                    var table = core.table(tableName);
                    var schema = table.schema;
                    var primaryKey = schema.primaryKey, indexes = schema.indexes;
                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;
                    var indexesWithAutoIncPK = primaryKey.autoIncrement && indexes.filter(function (index) { return index.compound && index.keyPath.includes(primaryKey.keyPath); });
                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {
                            var _a, _b;
                            var trans = req.trans;
                            var mutatedParts = req.mutatedParts || (req.mutatedParts = {});
                            var getRangeSet = function (indexName) {
                                var part = "idb://".concat(dbName, "/").concat(tableName, "/").concat(indexName);
                                return (mutatedParts[part] ||
                                    (mutatedParts[part] = new RangeSet()));
                            };
                            var pkRangeSet = getRangeSet("");
                            var delsRangeSet = getRangeSet(":dels");
                            var type = req.type;
                            var _c = req.type === "deleteRange"
                                ? [req.range]
                                : req.type === "delete"
                                    ? [req.keys]
                                    : req.values.length < 50
                                        ? [getEffectiveKeys(primaryKey, req).filter(function (id) { return id; }), req.values]
                                        : [], keys = _c[0], newObjs = _c[1];
                            var oldCache = req.trans["_cache"];
                            if (isArray(keys)) {
                                pkRangeSet.addKeys(keys);
                                var oldObjs = type === 'delete' || keys.length === newObjs.length ? getFromTransactionCache(keys, oldCache) : null;
                                if (!oldObjs) {
                                    delsRangeSet.addKeys(keys);
                                }
                                if (oldObjs || newObjs) {
                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);
                                }
                            }
                            else if (keys) {
                                var range = {
                                    from: (_a = keys.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY,
                                    to: (_b = keys.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY
                                };
                                delsRangeSet.add(range);
                                pkRangeSet.add(range);
                            }
                            else {
                                pkRangeSet.add(FULL_RANGE);
                                delsRangeSet.add(FULL_RANGE);
                                schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });
                            }
                            return table.mutate(req).then(function (res) {
                                if (keys && (req.type === 'add' || req.type === 'put')) {
                                    pkRangeSet.addKeys(res.results);
                                    if (indexesWithAutoIncPK) {
                                        indexesWithAutoIncPK.forEach(function (idx) {
                                            var idxVals = req.values.map(function (v) { return idx.extractKey(v); });
                                            var pkPos = idx.keyPath.findIndex(function (prop) { return prop === primaryKey.keyPath; });
                                            for (var i = 0, len = res.results.length; i < len; ++i) {
                                                idxVals[i][pkPos] = res.results[i];
                                            }
                                            getRangeSet(idx.name).addKeys(idxVals);
                                        });
                                    }
                                }
                                trans.mutatedParts = extendObservabilitySet(trans.mutatedParts || {}, mutatedParts);
                                return res;
                            });
                        } });
                    var getRange = function (_a) {
                        var _b, _c;
                        var _d = _a.query, index = _d.index, range = _d.range;
                        return [
                            index,
                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),
                        ];
                    };
                    var readSubscribers = {
                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },
                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },
                        count: getRange,
                        query: getRange,
                        openCursor: getRange,
                    };
                    keys(readSubscribers).forEach(function (method) {
                        tableClone[method] = function (req) {
                            var subscr = PSD.subscr;
                            var isLiveQuery = !!subscr;
                            var cachable = isCachableContext(PSD, table) && isCachableRequest(method, req);
                            var obsSet = cachable
                                ? req.obsSet = {}
                                : subscr;
                            if (isLiveQuery) {
                                var getRangeSet = function (indexName) {
                                    var part = "idb://".concat(dbName, "/").concat(tableName, "/").concat(indexName);
                                    return (obsSet[part] ||
                                        (obsSet[part] = new RangeSet()));
                                };
                                var pkRangeSet_1 = getRangeSet("");
                                var delsRangeSet_1 = getRangeSet(":dels");
                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];
                                if (method === 'query' && queriedIndex.isPrimaryKey && !req.values) {
                                    delsRangeSet_1.add(queriedRanges);
                                }
                                else {
                                    getRangeSet(queriedIndex.name || "").add(queriedRanges);
                                }
                                if (!queriedIndex.isPrimaryKey) {
                                    if (method === "count") {
                                        delsRangeSet_1.add(FULL_RANGE);
                                    }
                                    else {
                                        var keysPromise_1 = method === "query" &&
                                            outbound &&
                                            req.values &&
                                            table.query(__assign(__assign({}, req), { values: false }));
                                        return table[method].apply(this, arguments).then(function (res) {
                                            if (method === "query") {
                                                if (outbound && req.values) {
                                                    return keysPromise_1.then(function (_a) {
                                                        var resultingKeys = _a.result;
                                                        pkRangeSet_1.addKeys(resultingKeys);
                                                        return res;
                                                    });
                                                }
                                                var pKeys = req.values
                                                    ? res.result.map(extractKey)
                                                    : res.result;
                                                if (req.values) {
                                                    pkRangeSet_1.addKeys(pKeys);
                                                }
                                                else {
                                                    delsRangeSet_1.addKeys(pKeys);
                                                }
                                            }
                                            else if (method === "openCursor") {
                                                var cursor_1 = res;
                                                var wantValues_1 = req.values;
                                                return (cursor_1 &&
                                                    Object.create(cursor_1, {
                                                        key: {
                                                            get: function () {
                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);
                                                                return cursor_1.key;
                                                            },
                                                        },
                                                        primaryKey: {
                                                            get: function () {
                                                                var pkey = cursor_1.primaryKey;
                                                                delsRangeSet_1.addKey(pkey);
                                                                return pkey;
                                                            },
                                                        },
                                                        value: {
                                                            get: function () {
                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);
                                                                return cursor_1.value;
                                                            },
                                                        },
                                                    }));
                                            }
                                            return res;
                                        });
                                    }
                                }
                            }
                            return table[method].apply(this, arguments);
                        };
                    });
                    return tableClone;
                } });
        },
    };
    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {
        function addAffectedIndex(ix) {
            var rangeSet = getRangeSet(ix.name || "");
            function extractKey(obj) {
                return obj != null ? ix.extractKey(obj) : null;
            }
            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)
                ? key.forEach(function (key) { return rangeSet.addKey(key); })
                : rangeSet.addKey(key); };
            (oldObjs || newObjs).forEach(function (_, i) {
                var oldKey = oldObjs && extractKey(oldObjs[i]);
                var newKey = newObjs && extractKey(newObjs[i]);
                if (cmp(oldKey, newKey) !== 0) {
                    if (oldKey != null)
                        addKeyOrKeys(oldKey);
                    if (newKey != null)
                        addKeyOrKeys(newKey);
                }
            });
        }
        schema.indexes.forEach(addAffectedIndex);
    }

    function adjustOptimisticFromFailures(tblCache, req, res) {
        if (res.numFailures === 0)
            return req;
        if (req.type === 'deleteRange') {
            return null;
        }
        var numBulkOps = req.keys
            ? req.keys.length
            : 'values' in req && req.values
                ? req.values.length
                : 1;
        if (res.numFailures === numBulkOps) {
            return null;
        }
        var clone = __assign({}, req);
        if (isArray(clone.keys)) {
            clone.keys = clone.keys.filter(function (_, i) { return !(i in res.failures); });
        }
        if ('values' in clone && isArray(clone.values)) {
            clone.values = clone.values.filter(function (_, i) { return !(i in res.failures); });
        }
        return clone;
    }

    function isAboveLower(key, range) {
        return range.lower === undefined
            ? true
            : range.lowerOpen
                ? cmp(key, range.lower) > 0
                : cmp(key, range.lower) >= 0;
    }
    function isBelowUpper(key, range) {
        return range.upper === undefined
            ? true
            : range.upperOpen
                ? cmp(key, range.upper) < 0
                : cmp(key, range.upper) <= 0;
    }
    function isWithinRange(key, range) {
        return isAboveLower(key, range) && isBelowUpper(key, range);
    }

    function applyOptimisticOps(result, req, ops, table, cacheEntry, immutable) {
        if (!ops || ops.length === 0)
            return result;
        var index = req.query.index;
        var multiEntry = index.multiEntry;
        var queryRange = req.query.range;
        var primaryKey = table.schema.primaryKey;
        var extractPrimKey = primaryKey.extractKey;
        var extractIndex = index.extractKey;
        var extractLowLevelIndex = (index.lowLevelIndex || index).extractKey;
        var finalResult = ops.reduce(function (result, op) {
            var modifedResult = result;
            var includedValues = [];
            if (op.type === 'add' || op.type === 'put') {
                var includedPKs = new RangeSet();
                for (var i = op.values.length - 1; i >= 0; --i) {
                    var value = op.values[i];
                    var pk = extractPrimKey(value);
                    if (includedPKs.hasKey(pk))
                        continue;
                    var key = extractIndex(value);
                    if (multiEntry && isArray(key)
                        ? key.some(function (k) { return isWithinRange(k, queryRange); })
                        : isWithinRange(key, queryRange)) {
                        includedPKs.addKey(pk);
                        includedValues.push(value);
                    }
                }
            }
            switch (op.type) {
                case 'add': {
                    var existingKeys_1 = new RangeSet().addKeys(req.values ? result.map(function (v) { return extractPrimKey(v); }) : result);
                    modifedResult = result.concat(req.values
                        ? includedValues.filter(function (v) {
                            var key = extractPrimKey(v);
                            if (existingKeys_1.hasKey(key))
                                return false;
                            existingKeys_1.addKey(key);
                            return true;
                        })
                        : includedValues
                            .map(function (v) { return extractPrimKey(v); })
                            .filter(function (k) {
                            if (existingKeys_1.hasKey(k))
                                return false;
                            existingKeys_1.addKey(k);
                            return true;
                        }));
                    break;
                }
                case 'put': {
                    var keySet_1 = new RangeSet().addKeys(op.values.map(function (v) { return extractPrimKey(v); }));
                    modifedResult = result
                        .filter(
                    function (item) { return !keySet_1.hasKey(req.values ? extractPrimKey(item) : item); })
                        .concat(
                    req.values
                        ? includedValues
                        : includedValues.map(function (v) { return extractPrimKey(v); }));
                    break;
                }
                case 'delete':
                    var keysToDelete_1 = new RangeSet().addKeys(op.keys);
                    modifedResult = result.filter(function (item) {
                        return !keysToDelete_1.hasKey(req.values ? extractPrimKey(item) : item);
                    });
                    break;
                case 'deleteRange':
                    var range_1 = op.range;
                    modifedResult = result.filter(function (item) { return !isWithinRange(extractPrimKey(item), range_1); });
                    break;
            }
            return modifedResult;
        }, result);
        if (finalResult === result)
            return result;
        finalResult.sort(function (a, b) {
            return cmp(extractLowLevelIndex(a), extractLowLevelIndex(b)) ||
                cmp(extractPrimKey(a), extractPrimKey(b));
        });
        if (req.limit && req.limit < Infinity) {
            if (finalResult.length > req.limit) {
                finalResult.length = req.limit;
            }
            else if (result.length === req.limit && finalResult.length < req.limit) {
                cacheEntry.dirty = true;
            }
        }
        return immutable ? Object.freeze(finalResult) : finalResult;
    }

    function areRangesEqual(r1, r2) {
        return (cmp(r1.lower, r2.lower) === 0 &&
            cmp(r1.upper, r2.upper) === 0 &&
            !!r1.lowerOpen === !!r2.lowerOpen &&
            !!r1.upperOpen === !!r2.upperOpen);
    }

    function compareLowers(lower1, lower2, lowerOpen1, lowerOpen2) {
        if (lower1 === undefined)
            return lower2 !== undefined ? -1 : 0;
        if (lower2 === undefined)
            return 1;
        var c = cmp(lower1, lower2);
        if (c === 0) {
            if (lowerOpen1 && lowerOpen2)
                return 0;
            if (lowerOpen1)
                return 1;
            if (lowerOpen2)
                return -1;
        }
        return c;
    }
    function compareUppers(upper1, upper2, upperOpen1, upperOpen2) {
        if (upper1 === undefined)
            return upper2 !== undefined ? 1 : 0;
        if (upper2 === undefined)
            return -1;
        var c = cmp(upper1, upper2);
        if (c === 0) {
            if (upperOpen1 && upperOpen2)
                return 0;
            if (upperOpen1)
                return -1;
            if (upperOpen2)
                return 1;
        }
        return c;
    }
    function isSuperRange(r1, r2) {
        return (compareLowers(r1.lower, r2.lower, r1.lowerOpen, r2.lowerOpen) <= 0 &&
            compareUppers(r1.upper, r2.upper, r1.upperOpen, r2.upperOpen) >= 0);
    }

    function findCompatibleQuery(dbName, tableName, type, req) {
        var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
        if (!tblCache)
            return [];
        var queries = tblCache.queries[type];
        if (!queries)
            return [null, false, tblCache, null];
        var indexName = req.query ? req.query.index.name : null;
        var entries = queries[indexName || ''];
        if (!entries)
            return [null, false, tblCache, null];
        switch (type) {
            case 'query':
                var equalEntry = entries.find(function (entry) {
                    return entry.req.limit === req.limit &&
                        entry.req.values === req.values &&
                        areRangesEqual(entry.req.query.range, req.query.range);
                });
                if (equalEntry)
                    return [
                        equalEntry,
                        true,
                        tblCache,
                        entries,
                    ];
                var superEntry = entries.find(function (entry) {
                    var limit = 'limit' in entry.req ? entry.req.limit : Infinity;
                    return (limit >= req.limit &&
                        (req.values ? entry.req.values : true) &&
                        isSuperRange(entry.req.query.range, req.query.range));
                });
                return [superEntry, false, tblCache, entries];
            case 'count':
                var countQuery = entries.find(function (entry) {
                    return areRangesEqual(entry.req.query.range, req.query.range);
                });
                return [countQuery, !!countQuery, tblCache, entries];
        }
    }

    function subscribeToCacheEntry(cacheEntry, container, requery, signal) {
        cacheEntry.subscribers.add(requery);
        signal.addEventListener("abort", function () {
            cacheEntry.subscribers.delete(requery);
            if (cacheEntry.subscribers.size === 0) {
                enqueForDeletion(cacheEntry, container);
            }
        });
    }
    function enqueForDeletion(cacheEntry, container) {
        setTimeout(function () {
            if (cacheEntry.subscribers.size === 0) {
                delArrayItem(container, cacheEntry);
            }
        }, 3000);
    }

    var cacheMiddleware = {
        stack: 'dbcore',
        level: 0,
        name: 'Cache',
        create: function (core) {
            var dbName = core.schema.name;
            var coreMW = __assign(__assign({}, core), { transaction: function (stores, mode, options) {
                    var idbtrans = core.transaction(stores, mode, options);
                    if (mode === 'readwrite') {
                        var ac_1 = new AbortController();
                        var signal = ac_1.signal;
                        var endTransaction = function (wasCommitted) { return function () {
                            ac_1.abort();
                            if (mode === 'readwrite') {
                                var affectedSubscribers_1 = new Set();
                                for (var _i = 0, stores_1 = stores; _i < stores_1.length; _i++) {
                                    var storeName = stores_1[_i];
                                    var tblCache = cache["idb://".concat(dbName, "/").concat(storeName)];
                                    if (tblCache) {
                                        var table = core.table(storeName);
                                        var ops = tblCache.optimisticOps.filter(function (op) { return op.trans === idbtrans; });
                                        if (idbtrans._explicit && wasCommitted && idbtrans.mutatedParts) {
                                            for (var _a = 0, _b = Object.values(tblCache.queries.query); _a < _b.length; _a++) {
                                                var entries = _b[_a];
                                                for (var _c = 0, _d = entries.slice(); _c < _d.length; _c++) {
                                                    var entry = _d[_c];
                                                    if (obsSetsOverlap(entry.obsSet, idbtrans.mutatedParts)) {
                                                        delArrayItem(entries, entry);
                                                        entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                    }
                                                }
                                            }
                                        }
                                        else if (ops.length > 0) {
                                            tblCache.optimisticOps = tblCache.optimisticOps.filter(function (op) { return op.trans !== idbtrans; });
                                            for (var _e = 0, _f = Object.values(tblCache.queries.query); _e < _f.length; _e++) {
                                                var entries = _f[_e];
                                                for (var _g = 0, _h = entries.slice(); _g < _h.length; _g++) {
                                                    var entry = _h[_g];
                                                    if (entry.res != null &&
                                                        idbtrans.mutatedParts
    ) {
                                                        if (wasCommitted && !entry.dirty) {
                                                            var freezeResults = Object.isFrozen(entry.res);
                                                            var modRes = applyOptimisticOps(entry.res, entry.req, ops, table, entry, freezeResults);
                                                            if (entry.dirty) {
                                                                delArrayItem(entries, entry);
                                                                entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                            }
                                                            else if (modRes !== entry.res) {
                                                                entry.res = modRes;
                                                                entry.promise = DexiePromise.resolve({ result: modRes });
                                                            }
                                                        }
                                                        else {
                                                            if (entry.dirty) {
                                                                delArrayItem(entries, entry);
                                                            }
                                                            entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                affectedSubscribers_1.forEach(function (requery) { return requery(); });
                            }
                        }; };
                        idbtrans.addEventListener('abort', endTransaction(false), {
                            signal: signal,
                        });
                        idbtrans.addEventListener('error', endTransaction(false), {
                            signal: signal,
                        });
                        idbtrans.addEventListener('complete', endTransaction(true), {
                            signal: signal,
                        });
                    }
                    return idbtrans;
                }, table: function (tableName) {
                    var downTable = core.table(tableName);
                    var primKey = downTable.schema.primaryKey;
                    var tableMW = __assign(__assign({}, downTable), { mutate: function (req) {
                            var trans = PSD.trans;
                            if (primKey.outbound ||
                                trans.db._options.cache === 'disabled' ||
                                trans.explicit ||
                                trans.idbtrans.mode !== 'readwrite'
                            ) {
                                return downTable.mutate(req);
                            }
                            var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
                            if (!tblCache)
                                return downTable.mutate(req);
                            var promise = downTable.mutate(req);
                            if ((req.type === 'add' || req.type === 'put') && (req.values.length >= 50 || getEffectiveKeys(primKey, req).some(function (key) { return key == null; }))) {
                                promise.then(function (res) {
                                    var reqWithResolvedKeys = __assign(__assign({}, req), { values: req.values.map(function (value, i) {
                                            var _a;
                                            if (res.failures[i])
                                                return value;
                                            var valueWithKey = ((_a = primKey.keyPath) === null || _a === void 0 ? void 0 : _a.includes('.'))
                                                ? deepClone(value)
                                                : __assign({}, value);
                                            setByKeyPath(valueWithKey, primKey.keyPath, res.results[i]);
                                            return valueWithKey;
                                        }) });
                                    var adjustedReq = adjustOptimisticFromFailures(tblCache, reqWithResolvedKeys, res);
                                    tblCache.optimisticOps.push(adjustedReq);
                                    queueMicrotask(function () { return req.mutatedParts && signalSubscribersLazily(req.mutatedParts); });
                                });
                            }
                            else {
                                tblCache.optimisticOps.push(req);
                                req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                promise.then(function (res) {
                                    if (res.numFailures > 0) {
                                        delArrayItem(tblCache.optimisticOps, req);
                                        var adjustedReq = adjustOptimisticFromFailures(tblCache, req, res);
                                        if (adjustedReq) {
                                            tblCache.optimisticOps.push(adjustedReq);
                                        }
                                        req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                    }
                                });
                                promise.catch(function () {
                                    delArrayItem(tblCache.optimisticOps, req);
                                    req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                });
                            }
                            return promise;
                        }, query: function (req) {
                            var _a;
                            if (!isCachableContext(PSD, downTable) || !isCachableRequest("query", req))
                                return downTable.query(req);
                            var freezeResults = ((_a = PSD.trans) === null || _a === void 0 ? void 0 : _a.db._options.cache) === 'immutable';
                            var _b = PSD, requery = _b.requery, signal = _b.signal;
                            var _c = findCompatibleQuery(dbName, tableName, 'query', req), cacheEntry = _c[0], exactMatch = _c[1], tblCache = _c[2], container = _c[3];
                            if (cacheEntry && exactMatch) {
                                cacheEntry.obsSet = req.obsSet;
                            }
                            else {
                                var promise = downTable.query(req).then(function (res) {
                                    var result = res.result;
                                    if (cacheEntry)
                                        cacheEntry.res = result;
                                    if (freezeResults) {
                                        for (var i = 0, l = result.length; i < l; ++i) {
                                            Object.freeze(result[i]);
                                        }
                                        Object.freeze(result);
                                    }
                                    else {
                                        res.result = deepClone(result);
                                    }
                                    return res;
                                }).catch(function (error) {
                                    if (container && cacheEntry)
                                        delArrayItem(container, cacheEntry);
                                    return Promise.reject(error);
                                });
                                cacheEntry = {
                                    obsSet: req.obsSet,
                                    promise: promise,
                                    subscribers: new Set(),
                                    type: 'query',
                                    req: req,
                                    dirty: false,
                                };
                                if (container) {
                                    container.push(cacheEntry);
                                }
                                else {
                                    container = [cacheEntry];
                                    if (!tblCache) {
                                        tblCache = cache["idb://".concat(dbName, "/").concat(tableName)] = {
                                            queries: {
                                                query: {},
                                                count: {},
                                            },
                                            objs: new Map(),
                                            optimisticOps: [],
                                            unsignaledParts: {}
                                        };
                                    }
                                    tblCache.queries.query[req.query.index.name || ''] = container;
                                }
                            }
                            subscribeToCacheEntry(cacheEntry, container, requery, signal);
                            return cacheEntry.promise.then(function (res) {
                                return {
                                    result: applyOptimisticOps(res.result, req, tblCache === null || tblCache === void 0 ? void 0 : tblCache.optimisticOps, downTable, cacheEntry, freezeResults),
                                };
                            });
                        } });
                    return tableMW;
                } });
            return coreMW;
        },
    };

    function vipify(target, vipDb) {
        return new Proxy(target, {
            get: function (target, prop, receiver) {
                if (prop === 'db')
                    return vipDb;
                return Reflect.get(target, prop, receiver);
            }
        });
    }

    var Dexie$1 =  (function () {
        function Dexie(name, options) {
            var _this = this;
            this._middlewares = {};
            this.verno = 0;
            var deps = Dexie.dependencies;
            this._options = options = __assign({
                addons: Dexie.addons, autoOpen: true,
                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange, cache: 'cloned' }, options);
            this._deps = {
                indexedDB: options.indexedDB,
                IDBKeyRange: options.IDBKeyRange
            };
            var addons = options.addons;
            this._dbSchema = {};
            this._versions = [];
            this._storeNames = [];
            this._allTables = {};
            this.idbdb = null;
            this._novip = this;
            var state = {
                dbOpenError: null,
                isBeingOpened: false,
                onReadyBeingFired: null,
                openComplete: false,
                dbReadyResolve: nop,
                dbReadyPromise: null,
                cancelOpen: nop,
                openCanceller: null,
                autoSchema: true,
                PR1398_maxLoop: 3,
                autoOpen: options.autoOpen,
            };
            state.dbReadyPromise = new DexiePromise(function (resolve) {
                state.dbReadyResolve = resolve;
            });
            state.openCanceller = new DexiePromise(function (_, reject) {
                state.cancelOpen = reject;
            });
            this._state = state;
            this.name = name;
            this.on = Events(this, "populate", "blocked", "versionchange", "close", { ready: [promisableChain, nop] });
            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {
                return function (subscriber, bSticky) {
                    Dexie.vip(function () {
                        var state = _this._state;
                        if (state.openComplete) {
                            if (!state.dbOpenError)
                                DexiePromise.resolve().then(subscriber);
                            if (bSticky)
                                subscribe(subscriber);
                        }
                        else if (state.onReadyBeingFired) {
                            state.onReadyBeingFired.push(subscriber);
                            if (bSticky)
                                subscribe(subscriber);
                        }
                        else {
                            subscribe(subscriber);
                            var db_1 = _this;
                            if (!bSticky)
                                subscribe(function unsubscribe() {
                                    db_1.on.ready.unsubscribe(subscriber);
                                    db_1.on.ready.unsubscribe(unsubscribe);
                                });
                        }
                    });
                };
            });
            this.Collection = createCollectionConstructor(this);
            this.Table = createTableConstructor(this);
            this.Transaction = createTransactionConstructor(this);
            this.Version = createVersionConstructor(this);
            this.WhereClause = createWhereClauseConstructor(this);
            this.on("versionchange", function (ev) {
                if (ev.newVersion > 0)
                    console.warn("Another connection wants to upgrade database '".concat(_this.name, "'. Closing db now to resume the upgrade."));
                else
                    console.warn("Another connection wants to delete database '".concat(_this.name, "'. Closing db now to resume the delete request."));
                _this.close({ disableAutoOpen: false });
            });
            this.on("blocked", function (ev) {
                if (!ev.newVersion || ev.newVersion < ev.oldVersion)
                    console.warn("Dexie.delete('".concat(_this.name, "') was blocked"));
                else
                    console.warn("Upgrade '".concat(_this.name, "' blocked by other connection holding version ").concat(ev.oldVersion / 10));
            });
            this._maxKey = getMaxKey(options.IDBKeyRange);
            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };
            this._fireOnBlocked = function (ev) {
                _this.on("blocked").fire(ev);
                connections
                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })
                    .map(function (c) { return c.on("versionchange").fire(ev); });
            };
            this.use(cacheExistingValuesMiddleware);
            this.use(cacheMiddleware);
            this.use(observabilityMiddleware);
            this.use(virtualIndexMiddleware);
            this.use(hooksMiddleware);
            var vipDB = new Proxy(this, {
                get: function (_, prop, receiver) {
                    if (prop === '_vip')
                        return true;
                    if (prop === 'table')
                        return function (tableName) { return vipify(_this.table(tableName), vipDB); };
                    var rv = Reflect.get(_, prop, receiver);
                    if (rv instanceof Table)
                        return vipify(rv, vipDB);
                    if (prop === 'tables')
                        return rv.map(function (t) { return vipify(t, vipDB); });
                    if (prop === '_createTransaction')
                        return function () {
                            var tx = rv.apply(this, arguments);
                            return vipify(tx, vipDB);
                        };
                    return rv;
                }
            });
            this.vip = vipDB;
            addons.forEach(function (addon) { return addon(_this); });
        }
        Dexie.prototype.version = function (versionNumber) {
            if (isNaN(versionNumber) || versionNumber < 0.1)
                throw new exceptions.Type("Given version is not a positive number");
            versionNumber = Math.round(versionNumber * 10) / 10;
            if (this.idbdb || this._state.isBeingOpened)
                throw new exceptions.Schema("Cannot add version when database is open");
            this.verno = Math.max(this.verno, versionNumber);
            var versions = this._versions;
            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];
            if (versionInstance)
                return versionInstance;
            versionInstance = new this.Version(versionNumber);
            versions.push(versionInstance);
            versions.sort(lowerVersionFirst);
            versionInstance.stores({});
            this._state.autoSchema = false;
            return versionInstance;
        };
        Dexie.prototype._whenReady = function (fn) {
            var _this = this;
            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {
                if (_this._state.openComplete) {
                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));
                }
                if (!_this._state.isBeingOpened) {
                    if (!_this._state.autoOpen) {
                        reject(new exceptions.DatabaseClosed());
                        return;
                    }
                    _this.open().catch(nop);
                }
                _this._state.dbReadyPromise.then(resolve, reject);
            }).then(fn);
        };
        Dexie.prototype.use = function (_a) {
            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;
            if (name)
                this.unuse({ stack: stack, name: name });
            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);
            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });
            middlewares.sort(function (a, b) { return a.level - b.level; });
            return this;
        };
        Dexie.prototype.unuse = function (_a) {
            var stack = _a.stack, name = _a.name, create = _a.create;
            if (stack && this._middlewares[stack]) {
                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {
                    return create ? mw.create !== create :
                        name ? mw.name !== name :
                            false;
                });
            }
            return this;
        };
        Dexie.prototype.open = function () {
            var _this = this;
            return usePSD(globalPSD,
            function () { return dexieOpen(_this); });
        };
        Dexie.prototype._close = function () {
            var state = this._state;
            var idx = connections.indexOf(this);
            if (idx >= 0)
                connections.splice(idx, 1);
            if (this.idbdb) {
                try {
                    this.idbdb.close();
                }
                catch (e) { }
                this.idbdb = null;
            }
            if (!state.isBeingOpened) {
                state.dbReadyPromise = new DexiePromise(function (resolve) {
                    state.dbReadyResolve = resolve;
                });
                state.openCanceller = new DexiePromise(function (_, reject) {
                    state.cancelOpen = reject;
                });
            }
        };
        Dexie.prototype.close = function (_a) {
            var _b = _a === void 0 ? { disableAutoOpen: true } : _a, disableAutoOpen = _b.disableAutoOpen;
            var state = this._state;
            if (disableAutoOpen) {
                if (state.isBeingOpened) {
                    state.cancelOpen(new exceptions.DatabaseClosed());
                }
                this._close();
                state.autoOpen = false;
                state.dbOpenError = new exceptions.DatabaseClosed();
            }
            else {
                this._close();
                state.autoOpen = this._options.autoOpen ||
                    state.isBeingOpened;
                state.openComplete = false;
                state.dbOpenError = null;
            }
        };
        Dexie.prototype.delete = function (closeOptions) {
            var _this = this;
            if (closeOptions === void 0) { closeOptions = { disableAutoOpen: true }; }
            var hasInvalidArguments = arguments.length > 0 && typeof arguments[0] !== 'object';
            var state = this._state;
            return new DexiePromise(function (resolve, reject) {
                var doDelete = function () {
                    _this.close(closeOptions);
                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);
                    req.onsuccess = wrap(function () {
                        _onDatabaseDeleted(_this._deps, _this.name);
                        resolve();
                    });
                    req.onerror = eventRejectHandler(reject);
                    req.onblocked = _this._fireOnBlocked;
                };
                if (hasInvalidArguments)
                    throw new exceptions.InvalidArgument("Invalid closeOptions argument to db.delete()");
                if (state.isBeingOpened) {
                    state.dbReadyPromise.then(doDelete);
                }
                else {
                    doDelete();
                }
            });
        };
        Dexie.prototype.backendDB = function () {
            return this.idbdb;
        };
        Dexie.prototype.isOpen = function () {
            return this.idbdb !== null;
        };
        Dexie.prototype.hasBeenClosed = function () {
            var dbOpenError = this._state.dbOpenError;
            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');
        };
        Dexie.prototype.hasFailed = function () {
            return this._state.dbOpenError !== null;
        };
        Dexie.prototype.dynamicallyOpened = function () {
            return this._state.autoSchema;
        };
        Object.defineProperty(Dexie.prototype, "tables", {
            get: function () {
                var _this = this;
                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });
            },
            enumerable: false,
            configurable: true
        });
        Dexie.prototype.transaction = function () {
            var args = extractTransactionArgs.apply(this, arguments);
            return this._transaction.apply(this, args);
        };
        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {
            var _this = this;
            var parentTransaction = PSD.trans;
            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)
                parentTransaction = null;
            var onlyIfCompatible = mode.indexOf('?') !== -1;
            mode = mode.replace('!', '').replace('?', '');
            var idbMode, storeNames;
            try {
                storeNames = tables.map(function (table) {
                    var storeName = table instanceof _this.Table ? table.name : table;
                    if (typeof storeName !== 'string')
                        throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
                    return storeName;
                });
                if (mode == "r" || mode === READONLY)
                    idbMode = READONLY;
                else if (mode == "rw" || mode == READWRITE)
                    idbMode = READWRITE;
                else
                    throw new exceptions.InvalidArgument("Invalid transaction mode: " + mode);
                if (parentTransaction) {
                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {
                        if (onlyIfCompatible) {
                            parentTransaction = null;
                        }
                        else
                            throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
                    }
                    if (parentTransaction) {
                        storeNames.forEach(function (storeName) {
                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {
                                if (onlyIfCompatible) {
                                    parentTransaction = null;
                                }
                                else
                                    throw new exceptions.SubTransaction("Table " + storeName +
                                        " not included in parent transaction.");
                            }
                        });
                    }
                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {
                        parentTransaction = null;
                    }
                }
            }
            catch (e) {
                return parentTransaction ?
                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :
                    rejection(e);
            }
            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);
            return (parentTransaction ?
                parentTransaction._promise(idbMode, enterTransaction, "lock") :
                PSD.trans ?
                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :
                    this._whenReady(enterTransaction));
        };
        Dexie.prototype.table = function (tableName) {
            if (!hasOwn(this._allTables, tableName)) {
                throw new exceptions.InvalidTable("Table ".concat(tableName, " does not exist"));
            }
            return this._allTables[tableName];
        };
        return Dexie;
    }());

    var symbolObservable = typeof Symbol !== "undefined" && "observable" in Symbol
        ? Symbol.observable
        : "@@observable";
    var Observable =  (function () {
        function Observable(subscribe) {
            this._subscribe = subscribe;
        }
        Observable.prototype.subscribe = function (x, error, complete) {
            return this._subscribe(!x || typeof x === "function" ? { next: x, error: error, complete: complete } : x);
        };
        Observable.prototype[symbolObservable] = function () {
            return this;
        };
        return Observable;
    }());

    var domDeps;
    try {
        domDeps = {
            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,
            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange
        };
    }
    catch (e) {
        domDeps = { indexedDB: null, IDBKeyRange: null };
    }

    function liveQuery(querier) {
        var hasValue = false;
        var currentValue;
        var observable = new Observable(function (observer) {
            var scopeFuncIsAsync = isAsyncFunction(querier);
            function execute(ctx) {
                var wasRootExec = beginMicroTickScope();
                try {
                    if (scopeFuncIsAsync) {
                        incrementExpectedAwaits();
                    }
                    var rv = newScope(querier, ctx);
                    if (scopeFuncIsAsync) {
                        rv = rv.finally(decrementExpectedAwaits);
                    }
                    return rv;
                }
                finally {
                    wasRootExec && endMicroTickScope();
                }
            }
            var closed = false;
            var abortController;
            var accumMuts = {};
            var currentObs = {};
            var subscription = {
                get closed() {
                    return closed;
                },
                unsubscribe: function () {
                    if (closed)
                        return;
                    closed = true;
                    if (abortController)
                        abortController.abort();
                    if (startedListening)
                        globalEvents.storagemutated.unsubscribe(mutationListener);
                },
            };
            observer.start && observer.start(subscription);
            var startedListening = false;
            var doQuery = function () { return execInGlobalContext(_doQuery); };
            function shouldNotify() {
                return obsSetsOverlap(currentObs, accumMuts);
            }
            var mutationListener = function (parts) {
                extendObservabilitySet(accumMuts, parts);
                if (shouldNotify()) {
                    doQuery();
                }
            };
            var _doQuery = function () {
                if (closed ||
                    !domDeps.indexedDB)
                 {
                    return;
                }
                accumMuts = {};
                var subscr = {};
                if (abortController)
                    abortController.abort();
                abortController = new AbortController();
                var ctx = {
                    subscr: subscr,
                    signal: abortController.signal,
                    requery: doQuery,
                    querier: querier,
                    trans: null
                };
                var ret = execute(ctx);
                Promise.resolve(ret).then(function (result) {
                    hasValue = true;
                    currentValue = result;
                    if (closed || ctx.signal.aborted) {
                        return;
                    }
                    accumMuts = {};
                    currentObs = subscr;
                    if (!objectIsEmpty(currentObs) && !startedListening) {
                        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);
                        startedListening = true;
                    }
                    execInGlobalContext(function () { return !closed && observer.next && observer.next(result); });
                }, function (err) {
                    hasValue = false;
                    if (!['DatabaseClosedError', 'AbortError'].includes(err === null || err === void 0 ? void 0 : err.name)) {
                        if (!closed)
                            execInGlobalContext(function () {
                                if (closed)
                                    return;
                                observer.error && observer.error(err);
                            });
                    }
                });
            };
            setTimeout(doQuery, 0);
            return subscription;
        });
        observable.hasValue = function () { return hasValue; };
        observable.getValue = function () { return currentValue; };
        return observable;
    }

    var Dexie = Dexie$1;
    props(Dexie, __assign(__assign({}, fullNameExceptions), {
        delete: function (databaseName) {
            var db = new Dexie(databaseName, { addons: [] });
            return db.delete();
        },
        exists: function (name) {
            return new Dexie(name, { addons: [] }).open().then(function (db) {
                db.close();
                return true;
            }).catch('NoSuchDatabaseError', function () { return false; });
        },
        getDatabaseNames: function (cb) {
            try {
                return getDatabaseNames(Dexie.dependencies).then(cb);
            }
            catch (_a) {
                return rejection(new exceptions.MissingAPI());
            }
        },
        defineClass: function () {
            function Class(content) {
                extend(this, content);
            }
            return Class;
        }, ignoreTransaction: function (scopeFunc) {
            return PSD.trans ?
                usePSD(PSD.transless, scopeFunc) :
                scopeFunc();
        }, vip: vip, async: function (generatorFn) {
            return function () {
                try {
                    var rv = awaitIterator(generatorFn.apply(this, arguments));
                    if (!rv || typeof rv.then !== 'function')
                        return DexiePromise.resolve(rv);
                    return rv;
                }
                catch (e) {
                    return rejection(e);
                }
            };
        }, spawn: function (generatorFn, args, thiz) {
            try {
                var rv = awaitIterator(generatorFn.apply(thiz, args || []));
                if (!rv || typeof rv.then !== 'function')
                    return DexiePromise.resolve(rv);
                return rv;
            }
            catch (e) {
                return rejection(e);
            }
        },
        currentTransaction: {
            get: function () { return PSD.trans || null; }
        }, waitFor: function (promiseOrFunction, optionalTimeout) {
            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?
                Dexie.ignoreTransaction(promiseOrFunction) :
                promiseOrFunction)
                .timeout(optionalTimeout || 60000);
            return PSD.trans ?
                PSD.trans.waitFor(promise) :
                promise;
        },
        Promise: DexiePromise,
        debug: {
            get: function () { return debug; },
            set: function (value) {
                setDebug(value);
            }
        },
        derive: derive, extend: extend, props: props, override: override,
        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,
        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,
        minKey: minKey,
        addons: [],
        connections: connections,
        errnames: errnames,
        dependencies: domDeps, cache: cache,
        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')
            .map(function (n) { return parseInt(n); })
            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));
    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);

    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {
        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {
            if (!propagatingLocally) {
                var event_1;
                event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {
                    detail: updatedParts
                });
                propagatingLocally = true;
                dispatchEvent(event_1);
                propagatingLocally = false;
            }
        });
        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {
            var detail = _a.detail;
            if (!propagatingLocally) {
                propagateLocally(detail);
            }
        });
    }
    function propagateLocally(updateParts) {
        var wasMe = propagatingLocally;
        try {
            propagatingLocally = true;
            globalEvents.storagemutated.fire(updateParts);
            signalSubscribersNow(updateParts, true);
        }
        finally {
            propagatingLocally = wasMe;
        }
    }
    var propagatingLocally = false;

    var bc;
    var createBC = function () { };
    if (typeof BroadcastChannel !== 'undefined') {
        createBC = function () {
            bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);
            bc.onmessage = function (ev) { return ev.data && propagateLocally(ev.data); };
        };
        createBC();
        if (typeof bc.unref === 'function') {
            bc.unref();
        }
        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {
            if (!propagatingLocally) {
                bc.postMessage(changedParts);
            }
        });
    }

    if (typeof addEventListener !== 'undefined') {
        addEventListener('pagehide', function (event) {
            if (!Dexie$1.disableBfCache && event.persisted) {
                if (debug)
                    console.debug('Dexie: handling persisted pagehide');
                bc === null || bc === void 0 ? void 0 : bc.close();
                for (var _i = 0, connections_1 = connections; _i < connections_1.length; _i++) {
                    var db = connections_1[_i];
                    db.close({ disableAutoOpen: false });
                }
            }
        });
        addEventListener('pageshow', function (event) {
            if (!Dexie$1.disableBfCache && event.persisted) {
                if (debug)
                    console.debug('Dexie: handling persisted pageshow');
                createBC();
                propagateLocally({ all: new RangeSet(-Infinity, [[]]) });
            }
        });
    }

    function add(value) {
        return new PropModification({ add: value });
    }

    function remove(value) {
        return new PropModification({ remove: value });
    }

    function replacePrefix(a, b) {
        return new PropModification({ replacePrefix: [a, b] });
    }

    DexiePromise.rejectionMapper = mapError;
    setDebug(debug);

    var namedExports = /*#__PURE__*/Object.freeze({
        __proto__: null,
        Dexie: Dexie$1,
        liveQuery: liveQuery,
        Entity: Entity,
        cmp: cmp,
        PropModification: PropModification,
        replacePrefix: replacePrefix,
        add: add,
        remove: remove,
        'default': Dexie$1,
        RangeSet: RangeSet,
        mergeRanges: mergeRanges,
        rangesOverlap: rangesOverlap
    });

    __assign(Dexie$1, namedExports, { default: Dexie$1 });

    return Dexie$1;

}));
//# sourceMappingURL=dexie.js.map


/***/ }),

/***/ "../../node_modules/dexie/import-wrapper.mjs":
/*!***************************************************!*\
  !*** ../../node_modules/dexie/import-wrapper.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dexie: () => (/* binding */ Dexie),
/* harmony export */   Entity: () => (/* binding */ Entity),
/* harmony export */   PropModification: () => (/* binding */ PropModification),
/* harmony export */   RangeSet: () => (/* binding */ RangeSet),
/* harmony export */   add: () => (/* binding */ add),
/* harmony export */   cmp: () => (/* binding */ cmp),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   liveQuery: () => (/* binding */ liveQuery),
/* harmony export */   mergeRanges: () => (/* binding */ mergeRanges),
/* harmony export */   rangesOverlap: () => (/* binding */ rangesOverlap),
/* harmony export */   remove: () => (/* binding */ remove),
/* harmony export */   replacePrefix: () => (/* binding */ replacePrefix)
/* harmony export */ });
/* harmony import */ var _dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/dexie.js */ "../../node_modules/dexie/dist/dexie.js");
// Making the module version consumable via require - to prohibit
// multiple occurrancies of the same module in the same app
// (dual package hazard, https://nodejs.org/api/packages.html#dual-package-hazard)

const DexieSymbol = Symbol.for("Dexie");
const Dexie = globalThis[DexieSymbol] || (globalThis[DexieSymbol] = _dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__);
if (_dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__.semVer !== Dexie.semVer) {
    throw new Error(`Two different versions of Dexie loaded in the same app: ${_dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__.semVer} and ${Dexie.semVer}`);
}
const { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Entity,
    PropModification, replacePrefix, add, remove } = Dexie;

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dexie);


/***/ }),

/***/ "../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js":
/*!***********************************************************************************!*\
  !*** ../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var void_elements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! void-elements */ "../../node_modules/void-elements/index.js");
/* harmony import */ var void_elements__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(void_elements__WEBPACK_IMPORTED_MODULE_0__);
var t=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(n){var r={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},i=n.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(r.name=i[1],((void_elements__WEBPACK_IMPORTED_MODULE_0___default())[i[1]]||"/"===n.charAt(n.length-2))&&(r.voidElement=!0),r.name.startsWith("!--"))){var s=n.indexOf("--\x3e");return{type:"comment",comment:-1!==s?n.slice(4,s):""}}for(var a=new RegExp(t),c=null;null!==(c=a.exec(n));)if(c[0].trim())if(c[1]){var o=c[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),r.attrs[l[0]]=l[1],a.lastIndex--}else c[2]&&(r.attrs[c[2]]=c[3].trim().substring(1,c[3].length-1));return r}var r=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,i=/^\s*$/,s=Object.create(null);function a(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(a,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var c={parse:function(e,t){t||(t={}),t.components||(t.components=s);var a,c=[],o=[],l=-1,m=!1;if(0!==e.indexOf("<")){var u=e.indexOf("<");c.push({type:"text",content:-1===u?e:e.substring(0,u)})}return e.replace(r,function(r,s){if(m){if(r!=="</"+a.name+">")return;m=!1}var u,f="/"!==r.charAt(1),h=r.startsWith("\x3c!--"),p=s+r.length,d=e.charAt(p);if(h){var v=n(r);return l<0?(c.push(v),c):((u=o[l]).children.push(v),c)}if(f&&(l++,"tag"===(a=n(r)).type&&t.components[a.name]&&(a.type="component",m=!0),a.voidElement||m||!d||"<"===d||a.children.push({type:"text",content:e.slice(p,e.indexOf("<",p))}),0===l&&c.push(a),(u=o[l-1])&&u.children.push(a),o[l]=a),(!f||a.voidElement)&&(l>-1&&(a.voidElement||a.name===r.slice(2,-1))&&(l--,a=-1===l?c:o[l]),!m&&"<"!==d&&d)){u=-1===l?c:o[l].children;var x=e.indexOf("<",p),g=e.slice(p,-1===x?void 0:x);i.test(g)&&(g=" "),(x>-1&&l+u.length>=0||" "!==g)&&u.push({type:"text",content:g})}}),c},stringify:function(e){return e.reduce(function(e,t){return e+a("",t)},"")}};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (c);
//# sourceMappingURL=html-parse-stringify.module.js.map


/***/ }),

/***/ "../../node_modules/i18next/dist/cjs/i18next.js":
/*!******************************************************!*\
  !*** ../../node_modules/i18next/dist/cjs/i18next.js ***!
  \******************************************************/
/***/ ((module) => {



const isString = obj => typeof obj === 'string';
const defer = () => {
  let res;
  let rej;
  const promise = new Promise((resolve, reject) => {
    res = resolve;
    rej = reject;
  });
  promise.resolve = res;
  promise.reject = rej;
  return promise;
};
const makeString = object => {
  if (object == null) return '';
  return '' + object;
};
const copy = (a, s, t) => {
  a.forEach(m => {
    if (s[m]) t[m] = s[m];
  });
};
const lastOfPathSeparatorRegExp = /###/g;
const cleanKey = key => key && key.indexOf('###') > -1 ? key.replace(lastOfPathSeparatorRegExp, '.') : key;
const canNotTraverseDeeper = object => !object || isString(object);
const getLastOfPath = (object, path, Empty) => {
  const stack = !isString(path) ? path : path.split('.');
  let stackIndex = 0;
  while (stackIndex < stack.length - 1) {
    if (canNotTraverseDeeper(object)) return {};
    const key = cleanKey(stack[stackIndex]);
    if (!object[key] && Empty) object[key] = new Empty();
    if (Object.prototype.hasOwnProperty.call(object, key)) {
      object = object[key];
    } else {
      object = {};
    }
    ++stackIndex;
  }
  if (canNotTraverseDeeper(object)) return {};
  return {
    obj: object,
    k: cleanKey(stack[stackIndex])
  };
};
const setPath = (object, path, newValue) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  if (obj !== undefined || path.length === 1) {
    obj[k] = newValue;
    return;
  }
  let e = path[path.length - 1];
  let p = path.slice(0, path.length - 1);
  let last = getLastOfPath(object, p, Object);
  while (last.obj === undefined && p.length) {
    e = `${p[p.length - 1]}.${e}`;
    p = p.slice(0, p.length - 1);
    last = getLastOfPath(object, p, Object);
    if (last && last.obj && typeof last.obj[`${last.k}.${e}`] !== 'undefined') {
      last.obj = undefined;
    }
  }
  last.obj[`${last.k}.${e}`] = newValue;
};
const pushPath = (object, path, newValue, concat) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  obj[k] = obj[k] || [];
  obj[k].push(newValue);
};
const getPath = (object, path) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path);
  if (!obj) return undefined;
  return obj[k];
};
const getPathWithDefaults = (data, defaultData, key) => {
  const value = getPath(data, key);
  if (value !== undefined) {
    return value;
  }
  return getPath(defaultData, key);
};
const deepExtend = (target, source, overwrite) => {
  for (const prop in source) {
    if (prop !== '__proto__' && prop !== 'constructor') {
      if (prop in target) {
        if (isString(target[prop]) || target[prop] instanceof String || isString(source[prop]) || source[prop] instanceof String) {
          if (overwrite) target[prop] = source[prop];
        } else {
          deepExtend(target[prop], source[prop], overwrite);
        }
      } else {
        target[prop] = source[prop];
      }
    }
  }
  return target;
};
const regexEscape = str => str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
var _entityMap = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;',
  '/': '&#x2F;'
};
const escape = data => {
  if (isString(data)) {
    return data.replace(/[&<>"'\/]/g, s => _entityMap[s]);
  }
  return data;
};
class RegExpCache {
  constructor(capacity) {
    this.capacity = capacity;
    this.regExpMap = new Map();
    this.regExpQueue = [];
  }
  getRegExp(pattern) {
    const regExpFromCache = this.regExpMap.get(pattern);
    if (regExpFromCache !== undefined) {
      return regExpFromCache;
    }
    const regExpNew = new RegExp(pattern);
    if (this.regExpQueue.length === this.capacity) {
      this.regExpMap.delete(this.regExpQueue.shift());
    }
    this.regExpMap.set(pattern, regExpNew);
    this.regExpQueue.push(pattern);
    return regExpNew;
  }
}
const chars = [' ', ',', '?', '!', ';'];
const looksLikeObjectPathRegExpCache = new RegExpCache(20);
const looksLikeObjectPath = (key, nsSeparator, keySeparator) => {
  nsSeparator = nsSeparator || '';
  keySeparator = keySeparator || '';
  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);
  if (possibleChars.length === 0) return true;
  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map(c => c === '?' ? '\\?' : c).join('|')})`);
  let matched = !r.test(key);
  if (!matched) {
    const ki = key.indexOf(keySeparator);
    if (ki > 0 && !r.test(key.substring(0, ki))) {
      matched = true;
    }
  }
  return matched;
};
const deepFind = function (obj, path) {
  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';
  if (!obj) return undefined;
  if (obj[path]) return obj[path];
  const tokens = path.split(keySeparator);
  let current = obj;
  for (let i = 0; i < tokens.length;) {
    if (!current || typeof current !== 'object') {
      return undefined;
    }
    let next;
    let nextPath = '';
    for (let j = i; j < tokens.length; ++j) {
      if (j !== i) {
        nextPath += keySeparator;
      }
      nextPath += tokens[j];
      next = current[nextPath];
      if (next !== undefined) {
        if (['string', 'number', 'boolean'].indexOf(typeof next) > -1 && j < tokens.length - 1) {
          continue;
        }
        i += j - i + 1;
        break;
      }
    }
    current = next;
  }
  return current;
};
const getCleanedCode = code => code && code.replace('_', '-');

const consoleLogger = {
  type: 'logger',
  log(args) {
    this.output('log', args);
  },
  warn(args) {
    this.output('warn', args);
  },
  error(args) {
    this.output('error', args);
  },
  output(type, args) {
    if (console && console[type]) console[type].apply(console, args);
  }
};
class Logger {
  constructor(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.init(concreteLogger, options);
  }
  init(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.prefix = options.prefix || 'i18next:';
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  }
  log() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return this.forward(args, 'log', '', true);
  }
  warn() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    return this.forward(args, 'warn', '', true);
  }
  error() {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    return this.forward(args, 'error', '');
  }
  deprecate() {
    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }
    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);
  }
  forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return null;
    if (isString(args[0])) args[0] = `${prefix}${this.prefix} ${args[0]}`;
    return this.logger[lvl](args);
  }
  create(moduleName) {
    return new Logger(this.logger, {
      ...{
        prefix: `${this.prefix}:${moduleName}:`
      },
      ...this.options
    });
  }
  clone(options) {
    options = options || this.options;
    options.prefix = options.prefix || this.prefix;
    return new Logger(this.logger, options);
  }
}
var baseLogger = new Logger();

class EventEmitter {
  constructor() {
    this.observers = {};
  }
  on(events, listener) {
    events.split(' ').forEach(event => {
      if (!this.observers[event]) this.observers[event] = new Map();
      const numListeners = this.observers[event].get(listener) || 0;
      this.observers[event].set(listener, numListeners + 1);
    });
    return this;
  }
  off(event, listener) {
    if (!this.observers[event]) return;
    if (!listener) {
      delete this.observers[event];
      return;
    }
    this.observers[event].delete(listener);
  }
  emit(event) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    if (this.observers[event]) {
      const cloned = Array.from(this.observers[event].entries());
      cloned.forEach(_ref => {
        let [observer, numTimesAdded] = _ref;
        for (let i = 0; i < numTimesAdded; i++) {
          observer(...args);
        }
      });
    }
    if (this.observers['*']) {
      const cloned = Array.from(this.observers['*'].entries());
      cloned.forEach(_ref2 => {
        let [observer, numTimesAdded] = _ref2;
        for (let i = 0; i < numTimesAdded; i++) {
          observer.apply(observer, [event, ...args]);
        }
      });
    }
  }
}

class ResourceStore extends EventEmitter {
  constructor(data) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      ns: ['translation'],
      defaultNS: 'translation'
    };
    super();
    this.data = data || {};
    this.options = options;
    if (this.options.keySeparator === undefined) {
      this.options.keySeparator = '.';
    }
    if (this.options.ignoreJSONStructure === undefined) {
      this.options.ignoreJSONStructure = true;
    }
  }
  addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  }
  removeNamespaces(ns) {
    const index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  }
  getResource(lng, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;
    let path;
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
    } else {
      path = [lng, ns];
      if (key) {
        if (Array.isArray(key)) {
          path.push(...key);
        } else if (isString(key) && keySeparator) {
          path.push(...key.split(keySeparator));
        } else {
          path.push(key);
        }
      }
    }
    const result = getPath(this.data, path);
    if (!result && !ns && !key && lng.indexOf('.') > -1) {
      lng = path[0];
      ns = path[1];
      key = path.slice(2).join('.');
    }
    if (result || !ignoreJSONStructure || !isString(key)) return result;
    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);
  }
  addResource(lng, ns, key, value) {
    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {
      silent: false
    };
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    let path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      value = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    setPath(this.data, path, value);
    if (!options.silent) this.emit('added', lng, ns, key, value);
  }
  addResources(lng, ns, resources) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {
      silent: false
    };
    for (const m in resources) {
      if (isString(resources[m]) || Array.isArray(resources[m])) this.addResource(lng, ns, m, resources[m], {
        silent: true
      });
    }
    if (!options.silent) this.emit('added', lng, ns, resources);
  }
  addResourceBundle(lng, ns, resources, deep, overwrite) {
    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {
      silent: false,
      skipCopy: false
    };
    let path = [lng, ns];
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      deep = resources;
      resources = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    let pack = getPath(this.data, path) || {};
    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources));
    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = {
        ...pack,
        ...resources
      };
    }
    setPath(this.data, path, pack);
    if (!options.silent) this.emit('added', lng, ns, resources);
  }
  removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);
    this.emit('removed', lng, ns);
  }
  hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== undefined;
  }
  getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;
    if (this.options.compatibilityAPI === 'v1') return {
      ...{},
      ...this.getResource(lng, ns)
    };
    return this.getResource(lng, ns);
  }
  getDataByLanguage(lng) {
    return this.data[lng];
  }
  hasLanguageSomeTranslations(lng) {
    const data = this.getDataByLanguage(lng);
    const n = data && Object.keys(data) || [];
    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);
  }
  toJSON() {
    return this.data;
  }
}

var postProcessor = {
  processors: {},
  addPostProcessor(module) {
    this.processors[module.name] = module;
  },
  handle(processors, value, key, options, translator) {
    processors.forEach(processor => {
      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);
    });
    return value;
  }
};

const checkedLoadedFor = {};
class Translator extends EventEmitter {
  constructor(services) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    super();
    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);
    this.options = options;
    if (this.options.keySeparator === undefined) {
      this.options.keySeparator = '.';
    }
    this.logger = baseLogger.create('translator');
  }
  changeLanguage(lng) {
    if (lng) this.language = lng;
  }
  exists(key) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      interpolation: {}
    };
    if (key === undefined || key === null) {
      return false;
    }
    const resolved = this.resolve(key, options);
    return resolved && resolved.res !== undefined;
  }
  extractFromKey(key, options) {
    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;
    if (nsSeparator === undefined) nsSeparator = ':';
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    let namespaces = options.ns || this.options.defaultNS || [];
    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;
    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);
    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {
      const m = key.match(this.interpolator.nestingRegexp);
      if (m && m.length > 0) {
        return {
          key,
          namespaces: isString(namespaces) ? [namespaces] : namespaces
        };
      }
      const parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    return {
      key,
      namespaces: isString(namespaces) ? [namespaces] : namespaces
    };
  }
  translate(keys, options, lastKey) {
    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {
      options = this.options.overloadTranslationOptionHandler(arguments);
    }
    if (typeof options === 'object') options = {
      ...options
    };
    if (!options) options = {};
    if (keys === undefined || keys === null) return '';
    if (!Array.isArray(keys)) keys = [String(keys)];
    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    const {
      key,
      namespaces
    } = this.extractFromKey(keys[keys.length - 1], options);
    const namespace = namespaces[namespaces.length - 1];
    const lng = options.lng || this.language;
    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === 'cimode') {
      if (appendNamespaceToCIMode) {
        const nsSeparator = options.nsSeparator || this.options.nsSeparator;
        if (returnDetails) {
          return {
            res: `${namespace}${nsSeparator}${key}`,
            usedKey: key,
            exactUsedKey: key,
            usedLng: lng,
            usedNS: namespace,
            usedParams: this.getUsedParamsDetails(options)
          };
        }
        return `${namespace}${nsSeparator}${key}`;
      }
      if (returnDetails) {
        return {
          res: key,
          usedKey: key,
          exactUsedKey: key,
          usedLng: lng,
          usedNS: namespace,
          usedParams: this.getUsedParamsDetails(options)
        };
      }
      return key;
    }
    const resolved = this.resolve(keys, options);
    let res = resolved && resolved.res;
    const resUsedKey = resolved && resolved.usedKey || key;
    const resExactUsedKey = resolved && resolved.exactUsedKey || key;
    const resType = Object.prototype.toString.apply(res);
    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];
    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;
    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;
    const handleAsObject = !isString(res) && typeof res !== 'boolean' && typeof res !== 'number';
    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(isString(joinArrays) && Array.isArray(res))) {
      if (!options.returnObjects && !this.options.returnObjects) {
        if (!this.options.returnedObjectHandler) {
          this.logger.warn('accessing an object - but returnObjects options is not enabled!');
        }
        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {
          ...options,
          ns: namespaces
        }) : `key '${key} (${this.language})' returned an object instead of string.`;
        if (returnDetails) {
          resolved.res = r;
          resolved.usedParams = this.getUsedParamsDetails(options);
          return resolved;
        }
        return r;
      }
      if (keySeparator) {
        const resTypeIsArray = Array.isArray(res);
        const copy = resTypeIsArray ? [] : {};
        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;
        for (const m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            const deepKey = `${newKeyToUse}${keySeparator}${m}`;
            copy[m] = this.translate(deepKey, {
              ...options,
              ...{
                joinArrays: false,
                ns: namespaces
              }
            });
            if (copy[m] === deepKey) copy[m] = res[m];
          }
        }
        res = copy;
      }
    } else if (handleAsObjectInI18nFormat && isString(joinArrays) && Array.isArray(res)) {
      res = res.join(joinArrays);
      if (res) res = this.extendTranslation(res, keys, options, lastKey);
    } else {
      let usedDefault = false;
      let usedKey = false;
      const needsPluralHandling = options.count !== undefined && !isString(options.count);
      const hasDefaultValue = Translator.hasDefaultValue(options);
      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';
      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {
        ordinal: false
      }) : '';
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;
      if (!this.isValidLookup(res) && hasDefaultValue) {
        usedDefault = true;
        res = defaultValue;
      }
      if (!this.isValidLookup(res)) {
        usedKey = true;
        res = key;
      }
      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;
      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;
      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;
      if (usedKey || usedDefault || updateMissing) {
        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);
        if (keySeparator) {
          const fk = this.resolve(key, {
            ...options,
            keySeparator: false
          });
          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');
        }
        let lngs = [];
        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {
          for (let i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === 'all') {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }
        const send = (l, k, specificDefaultValue) => {
          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;
          if (this.options.missingKeyHandler) {
            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);
          } else if (this.backendConnector && this.backendConnector.saveMissing) {
            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);
          }
          this.emit('missingKey', l, namespace, k, res);
        };
        if (this.options.saveMissing) {
          if (this.options.saveMissingPlurals && needsPluralHandling) {
            lngs.forEach(language => {
              const suffixes = this.pluralResolver.getSuffixes(language, options);
              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {
                suffixes.push(`${this.options.pluralSeparator}zero`);
              }
              suffixes.forEach(suffix => {
                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);
              });
            });
          } else {
            send(lngs, key, defaultValue);
          }
        }
      }
      res = this.extendTranslation(res, keys, options, resolved, lastKey);
      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;
      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {
        if (this.options.compatibilityAPI !== 'v1') {
          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);
        } else {
          res = this.options.parseMissingKeyHandler(res);
        }
      }
    }
    if (returnDetails) {
      resolved.res = res;
      resolved.usedParams = this.getUsedParamsDetails(options);
      return resolved;
    }
    return res;
  }
  extendTranslation(res, key, options, resolved, lastKey) {
    var _this = this;
    if (this.i18nFormat && this.i18nFormat.parse) {
      res = this.i18nFormat.parse(res, {
        ...this.options.interpolation.defaultVariables,
        ...options
      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {
        resolved
      });
    } else if (!options.skipInterpolation) {
      if (options.interpolation) this.interpolator.init({
        ...options,
        ...{
          interpolation: {
            ...this.options.interpolation,
            ...options.interpolation
          }
        }
      });
      const skipOnVariables = isString(res) && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);
      let nestBef;
      if (skipOnVariables) {
        const nb = res.match(this.interpolator.nestingRegexp);
        nestBef = nb && nb.length;
      }
      let data = options.replace && !isString(options.replace) ? options.replace : options;
      if (this.options.interpolation.defaultVariables) data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);
      if (skipOnVariables) {
        const na = res.match(this.interpolator.nestingRegexp);
        const nestAft = na && na.length;
        if (nestBef < nestAft) options.nest = false;
      }
      if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = this.language || resolved.usedLng;
      if (options.nest !== false) res = this.interpolator.nest(res, function () {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        if (lastKey && lastKey[0] === args[0] && !options.context) {
          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);
          return null;
        }
        return _this.translate(...args, key);
      }, options);
      if (options.interpolation) this.interpolator.reset();
    }
    const postProcess = options.postProcess || this.options.postProcess;
    const postProcessorNames = isString(postProcess) ? [postProcess] : postProcess;
    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {
        i18nResolved: {
          ...resolved,
          usedParams: this.getUsedParamsDetails(options)
        },
        ...options
      } : options, this);
    }
    return res;
  }
  resolve(keys) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    let found;
    let usedKey;
    let exactUsedKey;
    let usedLng;
    let usedNS;
    if (isString(keys)) keys = [keys];
    keys.forEach(k => {
      if (this.isValidLookup(found)) return;
      const extracted = this.extractFromKey(k, options);
      const key = extracted.key;
      usedKey = key;
      let namespaces = extracted.namespaces;
      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);
      const needsPluralHandling = options.count !== undefined && !isString(options.count);
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const needsContextHandling = options.context !== undefined && (isString(options.context) || typeof options.context === 'number') && options.context !== '';
      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);
      namespaces.forEach(ns => {
        if (this.isValidLookup(found)) return;
        usedNS = ns;
        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {
          checkedLoadedFor[`${codes[0]}-${ns}`] = true;
          this.logger.warn(`key "${usedKey}" for languages "${codes.join(', ')}" won't get resolved as namespace "${usedNS}" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');
        }
        codes.forEach(code => {
          if (this.isValidLookup(found)) return;
          usedLng = code;
          const finalKeys = [key];
          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {
            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);
          } else {
            let pluralSuffix;
            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);
            const zeroSuffix = `${this.options.pluralSeparator}zero`;
            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;
            if (needsPluralHandling) {
              finalKeys.push(key + pluralSuffix);
              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
              }
              if (needsZeroSuffixLookup) {
                finalKeys.push(key + zeroSuffix);
              }
            }
            if (needsContextHandling) {
              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;
              finalKeys.push(contextKey);
              if (needsPluralHandling) {
                finalKeys.push(contextKey + pluralSuffix);
                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
                }
                if (needsZeroSuffixLookup) {
                  finalKeys.push(contextKey + zeroSuffix);
                }
              }
            }
          }
          let possibleKey;
          while (possibleKey = finalKeys.pop()) {
            if (!this.isValidLookup(found)) {
              exactUsedKey = possibleKey;
              found = this.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });
    return {
      res: found,
      usedKey,
      exactUsedKey,
      usedLng,
      usedNS
    };
  }
  isValidLookup(res) {
    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');
  }
  getResource(code, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);
    return this.resourceStore.getResource(code, ns, key, options);
  }
  getUsedParamsDetails() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    const optionsKeys = ['defaultValue', 'ordinal', 'context', 'replace', 'lng', 'lngs', 'fallbackLng', 'ns', 'keySeparator', 'nsSeparator', 'returnObjects', 'returnDetails', 'joinArrays', 'postProcess', 'interpolation'];
    const useOptionsReplaceForData = options.replace && !isString(options.replace);
    let data = useOptionsReplaceForData ? options.replace : options;
    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {
      data.count = options.count;
    }
    if (this.options.interpolation.defaultVariables) {
      data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
    }
    if (!useOptionsReplaceForData) {
      data = {
        ...data
      };
      for (const key of optionsKeys) {
        delete data[key];
      }
    }
    return data;
  }
  static hasDefaultValue(options) {
    const prefix = 'defaultValue';
    for (const option in options) {
      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {
        return true;
      }
    }
    return false;
  }
}

const capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);
class LanguageUtil {
  constructor(options) {
    this.options = options;
    this.supportedLngs = this.options.supportedLngs || false;
    this.logger = baseLogger.create('languageUtils');
  }
  getScriptPartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf('-') < 0) return null;
    const p = code.split('-');
    if (p.length === 2) return null;
    p.pop();
    if (p[p.length - 1].toLowerCase() === 'x') return null;
    return this.formatLanguageCode(p.join('-'));
  }
  getLanguagePartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf('-') < 0) return code;
    const p = code.split('-');
    return this.formatLanguageCode(p[0]);
  }
  formatLanguageCode(code) {
    if (isString(code) && code.indexOf('-') > -1) {
      if (typeof Intl !== 'undefined' && typeof Intl.getCanonicalLocales !== 'undefined') {
        try {
          let formattedCode = Intl.getCanonicalLocales(code)[0];
          if (formattedCode && this.options.lowerCaseLng) {
            formattedCode = formattedCode.toLowerCase();
          }
          if (formattedCode) return formattedCode;
        } catch (e) {}
      }
      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];
      let p = code.split('-');
      if (this.options.lowerCaseLng) {
        p = p.map(part => part.toLowerCase());
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }
      return p.join('-');
    }
    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  }
  isSupportedCode(code) {
    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;
  }
  getBestMatchFromCodes(codes) {
    if (!codes) return null;
    let found;
    codes.forEach(code => {
      if (found) return;
      const cleanedLng = this.formatLanguageCode(code);
      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;
    });
    if (!found && this.options.supportedLngs) {
      codes.forEach(code => {
        if (found) return;
        const lngOnly = this.getLanguagePartFromCode(code);
        if (this.isSupportedCode(lngOnly)) return found = lngOnly;
        found = this.options.supportedLngs.find(supportedLng => {
          if (supportedLng === lngOnly) return supportedLng;
          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;
          if (supportedLng.indexOf('-') > 0 && lngOnly.indexOf('-') < 0 && supportedLng.substring(0, supportedLng.indexOf('-')) === lngOnly) return supportedLng;
          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;
        });
      });
    }
    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];
    return found;
  }
  getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);
    if (isString(fallbacks)) fallbacks = [fallbacks];
    if (Array.isArray(fallbacks)) return fallbacks;
    if (!code) return fallbacks.default || [];
    let found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];
    if (!found) found = fallbacks.default;
    return found || [];
  }
  toResolveHierarchy(code, fallbackCode) {
    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);
    const codes = [];
    const addCode = c => {
      if (!c) return;
      if (this.isSupportedCode(c)) {
        codes.push(c);
      } else {
        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);
      }
    };
    if (isString(code) && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {
      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));
      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));
    } else if (isString(code)) {
      addCode(this.formatLanguageCode(code));
    }
    fallbackCodes.forEach(fc => {
      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));
    });
    return codes;
  }
}

let sets = [{
  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],
  nr: [1, 2],
  fc: 1
}, {
  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],
  nr: [1, 2],
  fc: 2
}, {
  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],
  nr: [1],
  fc: 3
}, {
  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],
  nr: [1, 2, 5],
  fc: 4
}, {
  lngs: ['ar'],
  nr: [0, 1, 2, 3, 11, 100],
  fc: 5
}, {
  lngs: ['cs', 'sk'],
  nr: [1, 2, 5],
  fc: 6
}, {
  lngs: ['csb', 'pl'],
  nr: [1, 2, 5],
  fc: 7
}, {
  lngs: ['cy'],
  nr: [1, 2, 3, 8],
  fc: 8
}, {
  lngs: ['fr'],
  nr: [1, 2],
  fc: 9
}, {
  lngs: ['ga'],
  nr: [1, 2, 3, 7, 11],
  fc: 10
}, {
  lngs: ['gd'],
  nr: [1, 2, 3, 20],
  fc: 11
}, {
  lngs: ['is'],
  nr: [1, 2],
  fc: 12
}, {
  lngs: ['jv'],
  nr: [0, 1],
  fc: 13
}, {
  lngs: ['kw'],
  nr: [1, 2, 3, 4],
  fc: 14
}, {
  lngs: ['lt'],
  nr: [1, 2, 10],
  fc: 15
}, {
  lngs: ['lv'],
  nr: [1, 2, 0],
  fc: 16
}, {
  lngs: ['mk'],
  nr: [1, 2],
  fc: 17
}, {
  lngs: ['mnk'],
  nr: [0, 1, 2],
  fc: 18
}, {
  lngs: ['mt'],
  nr: [1, 2, 11, 20],
  fc: 19
}, {
  lngs: ['or'],
  nr: [2, 1],
  fc: 2
}, {
  lngs: ['ro'],
  nr: [1, 2, 20],
  fc: 20
}, {
  lngs: ['sl'],
  nr: [5, 1, 2, 3],
  fc: 21
}, {
  lngs: ['he', 'iw'],
  nr: [1, 2, 20, 21],
  fc: 22
}];
let _rulesPluralsTypes = {
  1: n => Number(n > 1),
  2: n => Number(n != 1),
  3: n => 0,
  4: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  5: n => Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5),
  6: n => Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2),
  7: n => Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  8: n => Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3),
  9: n => Number(n >= 2),
  10: n => Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4),
  11: n => Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3),
  12: n => Number(n % 10 != 1 || n % 100 == 11),
  13: n => Number(n !== 0),
  14: n => Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3),
  15: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  16: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2),
  17: n => Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1),
  18: n => Number(n == 0 ? 0 : n == 1 ? 1 : 2),
  19: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3),
  20: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2),
  21: n => Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0),
  22: n => Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3)
};
const nonIntlVersions = ['v1', 'v2', 'v3'];
const intlVersions = ['v4'];
const suffixesOrder = {
  zero: 0,
  one: 1,
  two: 2,
  few: 3,
  many: 4,
  other: 5
};
const createRules = () => {
  const rules = {};
  sets.forEach(set => {
    set.lngs.forEach(l => {
      rules[l] = {
        numbers: set.nr,
        plurals: _rulesPluralsTypes[set.fc]
      };
    });
  });
  return rules;
};
class PluralResolver {
  constructor(languageUtils) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.languageUtils = languageUtils;
    this.options = options;
    this.logger = baseLogger.create('pluralResolver');
    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === 'undefined' || !Intl.PluralRules)) {
      this.options.compatibilityJSON = 'v3';
      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');
    }
    this.rules = createRules();
    this.pluralRulesCache = {};
  }
  addRule(lng, obj) {
    this.rules[lng] = obj;
  }
  clearCache() {
    this.pluralRulesCache = {};
  }
  getRule(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (this.shouldUseIntlApi()) {
      const cleanedCode = getCleanedCode(code === 'dev' ? 'en' : code);
      const type = options.ordinal ? 'ordinal' : 'cardinal';
      const cacheKey = JSON.stringify({
        cleanedCode,
        type
      });
      if (cacheKey in this.pluralRulesCache) {
        return this.pluralRulesCache[cacheKey];
      }
      let rule;
      try {
        rule = new Intl.PluralRules(cleanedCode, {
          type
        });
      } catch (err) {
        if (!code.match(/-|_/)) return;
        const lngPart = this.languageUtils.getLanguagePartFromCode(code);
        rule = this.getRule(lngPart, options);
      }
      this.pluralRulesCache[cacheKey] = rule;
      return rule;
    }
    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  }
  needsPlural(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (this.shouldUseIntlApi()) {
      return rule && rule.resolvedOptions().pluralCategories.length > 1;
    }
    return rule && rule.numbers.length > 1;
  }
  getPluralFormsOfKey(code, key) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);
  }
  getSuffixes(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (!rule) {
      return [];
    }
    if (this.shouldUseIntlApi()) {
      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);
    }
    return rule.numbers.map(number => this.getSuffix(code, number, options));
  }
  getSuffix(code, count) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    const rule = this.getRule(code, options);
    if (rule) {
      if (this.shouldUseIntlApi()) {
        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;
      }
      return this.getSuffixRetroCompatible(rule, count);
    }
    this.logger.warn(`no plural rule found for: ${code}`);
    return '';
  }
  getSuffixRetroCompatible(rule, count) {
    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
    let suffix = rule.numbers[idx];
    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      if (suffix === 2) {
        suffix = 'plural';
      } else if (suffix === 1) {
        suffix = '';
      }
    }
    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();
    if (this.options.compatibilityJSON === 'v1') {
      if (suffix === 1) return '';
      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;
      return returnSuffix();
    } else if (this.options.compatibilityJSON === 'v2') {
      return returnSuffix();
    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      return returnSuffix();
    }
    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
  }
  shouldUseIntlApi() {
    return !nonIntlVersions.includes(this.options.compatibilityJSON);
  }
}

const deepFindWithDefaults = function (data, defaultData, key) {
  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';
  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
  let path = getPathWithDefaults(data, defaultData, key);
  if (!path && ignoreJSONStructure && isString(key)) {
    path = deepFind(data, key, keySeparator);
    if (path === undefined) path = deepFind(defaultData, key, keySeparator);
  }
  return path;
};
const regexSafe = val => val.replace(/\$/g, '$$$$');
class Interpolator {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    this.logger = baseLogger.create('interpolator');
    this.options = options;
    this.format = options.interpolation && options.interpolation.format || (value => value);
    this.init(options);
  }
  init() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    if (!options.interpolation) options.interpolation = {
      escapeValue: true
    };
    const {
      escape: escape$1,
      escapeValue,
      useRawValueToEscape,
      prefix,
      prefixEscaped,
      suffix,
      suffixEscaped,
      formatSeparator,
      unescapeSuffix,
      unescapePrefix,
      nestingPrefix,
      nestingPrefixEscaped,
      nestingSuffix,
      nestingSuffixEscaped,
      nestingOptionsSeparator,
      maxReplaces,
      alwaysFormat
    } = options.interpolation;
    this.escape = escape$1 !== undefined ? escape$1 : escape;
    this.escapeValue = escapeValue !== undefined ? escapeValue : true;
    this.useRawValueToEscape = useRawValueToEscape !== undefined ? useRawValueToEscape : false;
    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || '{{';
    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || '}}';
    this.formatSeparator = formatSeparator || ',';
    this.unescapePrefix = unescapeSuffix ? '' : unescapePrefix || '-';
    this.unescapeSuffix = this.unescapePrefix ? '' : unescapeSuffix || '';
    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape('$t(');
    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(')');
    this.nestingOptionsSeparator = nestingOptionsSeparator || ',';
    this.maxReplaces = maxReplaces || 1000;
    this.alwaysFormat = alwaysFormat !== undefined ? alwaysFormat : false;
    this.resetRegExp();
  }
  reset() {
    if (this.options) this.init(this.options);
  }
  resetRegExp() {
    const getOrResetRegExp = (existingRegExp, pattern) => {
      if (existingRegExp && existingRegExp.source === pattern) {
        existingRegExp.lastIndex = 0;
        return existingRegExp;
      }
      return new RegExp(pattern, 'g');
    };
    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);
    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);
    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);
  }
  interpolate(str, data, lng, options) {
    let match;
    let value;
    let replaces;
    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};
    const handleFormat = key => {
      if (key.indexOf(this.formatSeparator) < 0) {
        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);
        return this.alwaysFormat ? this.format(path, undefined, lng, {
          ...options,
          ...data,
          interpolationkey: key
        }) : path;
      }
      const p = key.split(this.formatSeparator);
      const k = p.shift().trim();
      const f = p.join(this.formatSeparator).trim();
      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {
        ...options,
        ...data,
        interpolationkey: k
      });
    };
    this.resetRegExp();
    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;
    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;
    const todos = [{
      regex: this.regexpUnescape,
      safeValue: val => regexSafe(val)
    }, {
      regex: this.regexp,
      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)
    }];
    todos.forEach(todo => {
      replaces = 0;
      while (match = todo.regex.exec(str)) {
        const matchedVar = match[1].trim();
        value = handleFormat(matchedVar);
        if (value === undefined) {
          if (typeof missingInterpolationHandler === 'function') {
            const temp = missingInterpolationHandler(str, match, options);
            value = isString(temp) ? temp : '';
          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {
            value = '';
          } else if (skipOnVariables) {
            value = match[0];
            continue;
          } else {
            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);
            value = '';
          }
        } else if (!isString(value) && !this.useRawValueToEscape) {
          value = makeString(value);
        }
        const safeValue = todo.safeValue(value);
        str = str.replace(match[0], safeValue);
        if (skipOnVariables) {
          todo.regex.lastIndex += value.length;
          todo.regex.lastIndex -= match[0].length;
        } else {
          todo.regex.lastIndex = 0;
        }
        replaces++;
        if (replaces >= this.maxReplaces) {
          break;
        }
      }
    });
    return str;
  }
  nest(str, fc) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    let match;
    let value;
    let clonedOptions;
    const handleHasOptions = (key, inheritedOptions) => {
      const sep = this.nestingOptionsSeparator;
      if (key.indexOf(sep) < 0) return key;
      const c = key.split(new RegExp(`${sep}[ ]*{`));
      let optionsString = `{${c[1]}`;
      key = c[0];
      optionsString = this.interpolate(optionsString, clonedOptions);
      const matchedSingleQuotes = optionsString.match(/'/g);
      const matchedDoubleQuotes = optionsString.match(/"/g);
      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {
        optionsString = optionsString.replace(/'/g, '"');
      }
      try {
        clonedOptions = JSON.parse(optionsString);
        if (inheritedOptions) clonedOptions = {
          ...inheritedOptions,
          ...clonedOptions
        };
      } catch (e) {
        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);
        return `${key}${sep}${optionsString}`;
      }
      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1) delete clonedOptions.defaultValue;
      return key;
    };
    while (match = this.nestingRegexp.exec(str)) {
      let formatters = [];
      clonedOptions = {
        ...options
      };
      clonedOptions = clonedOptions.replace && !isString(clonedOptions.replace) ? clonedOptions.replace : clonedOptions;
      clonedOptions.applyPostProcessor = false;
      delete clonedOptions.defaultValue;
      let doReduce = false;
      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {
        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());
        match[1] = r.shift();
        formatters = r;
        doReduce = true;
      }
      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);
      if (value && match[0] === str && !isString(value)) return value;
      if (!isString(value)) value = makeString(value);
      if (!value) {
        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);
        value = '';
      }
      if (doReduce) {
        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {
          ...options,
          interpolationkey: match[1].trim()
        }), value.trim());
      }
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  }
}

const parseFormatStr = formatStr => {
  let formatName = formatStr.toLowerCase().trim();
  const formatOptions = {};
  if (formatStr.indexOf('(') > -1) {
    const p = formatStr.split('(');
    formatName = p[0].toLowerCase().trim();
    const optStr = p[1].substring(0, p[1].length - 1);
    if (formatName === 'currency' && optStr.indexOf(':') < 0) {
      if (!formatOptions.currency) formatOptions.currency = optStr.trim();
    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {
      if (!formatOptions.range) formatOptions.range = optStr.trim();
    } else {
      const opts = optStr.split(';');
      opts.forEach(opt => {
        if (opt) {
          const [key, ...rest] = opt.split(':');
          const val = rest.join(':').trim().replace(/^'+|'+$/g, '');
          const trimmedKey = key.trim();
          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;
          if (val === 'false') formatOptions[trimmedKey] = false;
          if (val === 'true') formatOptions[trimmedKey] = true;
          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);
        }
      });
    }
  }
  return {
    formatName,
    formatOptions
  };
};
const createCachedFormatter = fn => {
  const cache = {};
  return (val, lng, options) => {
    let optForCache = options;
    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {
      optForCache = {
        ...optForCache,
        [options.interpolationkey]: undefined
      };
    }
    const key = lng + JSON.stringify(optForCache);
    let formatter = cache[key];
    if (!formatter) {
      formatter = fn(getCleanedCode(lng), options);
      cache[key] = formatter;
    }
    return formatter(val);
  };
};
class Formatter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    this.logger = baseLogger.create('formatter');
    this.options = options;
    this.formats = {
      number: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      }),
      currency: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt,
          style: 'currency'
        });
        return val => formatter.format(val);
      }),
      datetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.DateTimeFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      }),
      relativetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.RelativeTimeFormat(lng, {
          ...opt
        });
        return val => formatter.format(val, opt.range || 'day');
      }),
      list: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.ListFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      })
    };
    this.init(options);
  }
  init(services) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      interpolation: {}
    };
    this.formatSeparator = options.interpolation.formatSeparator || ',';
  }
  add(name, fc) {
    this.formats[name.toLowerCase().trim()] = fc;
  }
  addCached(name, fc) {
    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);
  }
  format(value, format, lng) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    const formats = format.split(this.formatSeparator);
    if (formats.length > 1 && formats[0].indexOf('(') > 1 && formats[0].indexOf(')') < 0 && formats.find(f => f.indexOf(')') > -1)) {
      const lastIndex = formats.findIndex(f => f.indexOf(')') > -1);
      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);
    }
    const result = formats.reduce((mem, f) => {
      const {
        formatName,
        formatOptions
      } = parseFormatStr(f);
      if (this.formats[formatName]) {
        let formatted = mem;
        try {
          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};
          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;
          formatted = this.formats[formatName](mem, l, {
            ...formatOptions,
            ...options,
            ...valOptions
          });
        } catch (error) {
          this.logger.warn(error);
        }
        return formatted;
      } else {
        this.logger.warn(`there was no format function for ${formatName}`);
      }
      return mem;
    }, value);
    return result;
  }
}

const removePending = (q, name) => {
  if (q.pending[name] !== undefined) {
    delete q.pending[name];
    q.pendingCount--;
  }
};
class Connector extends EventEmitter {
  constructor(backend, store, services) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    super();
    this.backend = backend;
    this.store = store;
    this.services = services;
    this.languageUtils = services.languageUtils;
    this.options = options;
    this.logger = baseLogger.create('backendConnector');
    this.waitingReads = [];
    this.maxParallelReads = options.maxParallelReads || 10;
    this.readingCalls = 0;
    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;
    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;
    this.state = {};
    this.queue = [];
    if (this.backend && this.backend.init) {
      this.backend.init(services, options.backend, options);
    }
  }
  queueLoad(languages, namespaces, options, callback) {
    const toLoad = {};
    const pending = {};
    const toLoadLanguages = {};
    const toLoadNamespaces = {};
    languages.forEach(lng => {
      let hasAllNamespaces = true;
      namespaces.forEach(ns => {
        const name = `${lng}|${ns}`;
        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {
          this.state[name] = 2;
        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {
          if (pending[name] === undefined) pending[name] = true;
        } else {
          this.state[name] = 1;
          hasAllNamespaces = false;
          if (pending[name] === undefined) pending[name] = true;
          if (toLoad[name] === undefined) toLoad[name] = true;
          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;
        }
      });
      if (!hasAllNamespaces) toLoadLanguages[lng] = true;
    });
    if (Object.keys(toLoad).length || Object.keys(pending).length) {
      this.queue.push({
        pending,
        pendingCount: Object.keys(pending).length,
        loaded: {},
        errors: [],
        callback
      });
    }
    return {
      toLoad: Object.keys(toLoad),
      pending: Object.keys(pending),
      toLoadLanguages: Object.keys(toLoadLanguages),
      toLoadNamespaces: Object.keys(toLoadNamespaces)
    };
  }
  loaded(name, err, data) {
    const s = name.split('|');
    const lng = s[0];
    const ns = s[1];
    if (err) this.emit('failedLoading', lng, ns, err);
    if (!err && data) {
      this.store.addResourceBundle(lng, ns, data, undefined, undefined, {
        skipCopy: true
      });
    }
    this.state[name] = err ? -1 : 2;
    if (err && data) this.state[name] = 0;
    const loaded = {};
    this.queue.forEach(q => {
      pushPath(q.loaded, [lng], ns);
      removePending(q, name);
      if (err) q.errors.push(err);
      if (q.pendingCount === 0 && !q.done) {
        Object.keys(q.loaded).forEach(l => {
          if (!loaded[l]) loaded[l] = {};
          const loadedKeys = q.loaded[l];
          if (loadedKeys.length) {
            loadedKeys.forEach(n => {
              if (loaded[l][n] === undefined) loaded[l][n] = true;
            });
          }
        });
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });
    this.emit('loaded', loaded);
    this.queue = this.queue.filter(q => !q.done);
  }
  read(lng, ns, fcName) {
    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;
    let callback = arguments.length > 5 ? arguments[5] : undefined;
    if (!lng.length) return callback(null, {});
    if (this.readingCalls >= this.maxParallelReads) {
      this.waitingReads.push({
        lng,
        ns,
        fcName,
        tried,
        wait,
        callback
      });
      return;
    }
    this.readingCalls++;
    const resolver = (err, data) => {
      this.readingCalls--;
      if (this.waitingReads.length > 0) {
        const next = this.waitingReads.shift();
        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);
      }
      if (err && data && tried < this.maxRetries) {
        setTimeout(() => {
          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    };
    const fc = this.backend[fcName].bind(this.backend);
    if (fc.length === 2) {
      try {
        const r = fc(lng, ns);
        if (r && typeof r.then === 'function') {
          r.then(data => resolver(null, data)).catch(resolver);
        } else {
          resolver(null, r);
        }
      } catch (err) {
        resolver(err);
      }
      return;
    }
    return fc(lng, ns, resolver);
  }
  prepareLoading(languages, namespaces) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    let callback = arguments.length > 3 ? arguments[3] : undefined;
    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
      return callback && callback();
    }
    if (isString(languages)) languages = this.languageUtils.toResolveHierarchy(languages);
    if (isString(namespaces)) namespaces = [namespaces];
    const toLoad = this.queueLoad(languages, namespaces, options, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback();
      return null;
    }
    toLoad.toLoad.forEach(name => {
      this.loadOne(name);
    });
  }
  load(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {}, callback);
  }
  reload(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {
      reload: true
    }, callback);
  }
  loadOne(name) {
    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    const s = name.split('|');
    const lng = s[0];
    const ns = s[1];
    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {
      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);
      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);
      this.loaded(name, err, data);
    });
  }
  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {
    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};
    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};
    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {
      this.logger.warn(`did not save key "${key}" as the namespace "${namespace}" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');
      return;
    }
    if (key === undefined || key === null || key === '') return;
    if (this.backend && this.backend.create) {
      const opts = {
        ...options,
        isUpdate
      };
      const fc = this.backend.create.bind(this.backend);
      if (fc.length < 6) {
        try {
          let r;
          if (fc.length === 5) {
            r = fc(languages, namespace, key, fallbackValue, opts);
          } else {
            r = fc(languages, namespace, key, fallbackValue);
          }
          if (r && typeof r.then === 'function') {
            r.then(data => clb(null, data)).catch(clb);
          } else {
            clb(null, r);
          }
        } catch (err) {
          clb(err);
        }
      } else {
        fc(languages, namespace, key, fallbackValue, clb, opts);
      }
    }
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  }
}

const get = () => ({
  debug: false,
  initImmediate: true,
  ns: ['translation'],
  defaultNS: ['translation'],
  fallbackLng: ['dev'],
  fallbackNS: false,
  supportedLngs: false,
  nonExplicitSupportedLngs: false,
  load: 'all',
  preload: false,
  simplifyPluralSuffix: true,
  keySeparator: '.',
  nsSeparator: ':',
  pluralSeparator: '_',
  contextSeparator: '_',
  partialBundledLanguages: false,
  saveMissing: false,
  updateMissing: false,
  saveMissingTo: 'fallback',
  saveMissingPlurals: true,
  missingKeyHandler: false,
  missingInterpolationHandler: false,
  postProcess: false,
  postProcessPassResolved: false,
  returnNull: false,
  returnEmptyString: true,
  returnObjects: false,
  joinArrays: false,
  returnedObjectHandler: false,
  parseMissingKeyHandler: false,
  appendNamespaceToMissingKey: false,
  appendNamespaceToCIMode: false,
  overloadTranslationOptionHandler: args => {
    let ret = {};
    if (typeof args[1] === 'object') ret = args[1];
    if (isString(args[1])) ret.defaultValue = args[1];
    if (isString(args[2])) ret.tDescription = args[2];
    if (typeof args[2] === 'object' || typeof args[3] === 'object') {
      const options = args[3] || args[2];
      Object.keys(options).forEach(key => {
        ret[key] = options[key];
      });
    }
    return ret;
  },
  interpolation: {
    escapeValue: true,
    format: value => value,
    prefix: '{{',
    suffix: '}}',
    formatSeparator: ',',
    unescapePrefix: '-',
    nestingPrefix: '$t(',
    nestingSuffix: ')',
    nestingOptionsSeparator: ',',
    maxReplaces: 1000,
    skipOnVariables: true
  }
});
const transformOptions = options => {
  if (isString(options.ns)) options.ns = [options.ns];
  if (isString(options.fallbackLng)) options.fallbackLng = [options.fallbackLng];
  if (isString(options.fallbackNS)) options.fallbackNS = [options.fallbackNS];
  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {
    options.supportedLngs = options.supportedLngs.concat(['cimode']);
  }
  return options;
};

const noop = () => {};
const bindMemberFunctions = inst => {
  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));
  mems.forEach(mem => {
    if (typeof inst[mem] === 'function') {
      inst[mem] = inst[mem].bind(inst);
    }
  });
};
class I18n extends EventEmitter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    super();
    this.options = transformOptions(options);
    this.services = {};
    this.logger = baseLogger;
    this.modules = {
      external: []
    };
    bindMemberFunctions(this);
    if (callback && !this.isInitialized && !options.isClone) {
      if (!this.options.initImmediate) {
        this.init(options, callback);
        return this;
      }
      setTimeout(() => {
        this.init(options, callback);
      }, 0);
    }
  }
  init() {
    var _this = this;
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    this.isInitializing = true;
    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    if (!options.defaultNS && options.defaultNS !== false && options.ns) {
      if (isString(options.ns)) {
        options.defaultNS = options.ns;
      } else if (options.ns.indexOf('translation') < 0) {
        options.defaultNS = options.ns[0];
      }
    }
    const defOpts = get();
    this.options = {
      ...defOpts,
      ...this.options,
      ...transformOptions(options)
    };
    if (this.options.compatibilityAPI !== 'v1') {
      this.options.interpolation = {
        ...defOpts.interpolation,
        ...this.options.interpolation
      };
    }
    if (options.keySeparator !== undefined) {
      this.options.userDefinedKeySeparator = options.keySeparator;
    }
    if (options.nsSeparator !== undefined) {
      this.options.userDefinedNsSeparator = options.nsSeparator;
    }
    const createClassOnDemand = ClassOrObject => {
      if (!ClassOrObject) return null;
      if (typeof ClassOrObject === 'function') return new ClassOrObject();
      return ClassOrObject;
    };
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }
      let formatter;
      if (this.modules.formatter) {
        formatter = this.modules.formatter;
      } else if (typeof Intl !== 'undefined') {
        formatter = Formatter;
      }
      const lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);
      const s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, {
        prepend: this.options.pluralSeparator,
        compatibilityJSON: this.options.compatibilityJSON,
        simplifyPluralSuffix: this.options.simplifyPluralSuffix
      });
      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {
        s.formatter = createClassOnDemand(formatter);
        s.formatter.init(s, this.options);
        this.options.interpolation.format = s.formatter.format.bind(s.formatter);
      }
      s.interpolator = new Interpolator(this.options);
      s.utils = {
        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)
      };
      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      s.backendConnector.on('*', function (event) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        _this.emit(event, ...args);
      });
      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);
      }
      if (this.modules.i18nFormat) {
        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);
        if (s.i18nFormat.init) s.i18nFormat.init(this);
      }
      this.translator = new Translator(this.services, this.options);
      this.translator.on('*', function (event) {
        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }
        _this.emit(event, ...args);
      });
      this.modules.external.forEach(m => {
        if (m.init) m.init(this);
      });
    }
    this.format = this.options.interpolation.format;
    if (!callback) callback = noop;
    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {
      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];
    }
    if (!this.services.languageDetector && !this.options.lng) {
      this.logger.warn('init: no languageDetector is used and no lng is defined');
    }
    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];
    storeApi.forEach(fcName => {
      this[fcName] = function () {
        return _this.store[fcName](...arguments);
      };
    });
    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];
    storeApiChained.forEach(fcName => {
      this[fcName] = function () {
        _this.store[fcName](...arguments);
        return _this;
      };
    });
    const deferred = defer();
    const load = () => {
      const finish = (err, t) => {
        this.isInitializing = false;
        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');
        this.isInitialized = true;
        if (!this.options.isClone) this.logger.log('initialized', this.options);
        this.emit('initialized', this.options);
        deferred.resolve(t);
        callback(err, t);
      };
      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));
      this.changeLanguage(this.options.lng, finish);
    };
    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }
    return deferred;
  }
  loadResources(language) {
    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    let usedCallback = callback;
    const usedLng = isString(language) ? language : this.language;
    if (typeof language === 'function') usedCallback = language;
    if (!this.options.resources || this.options.partialBundledLanguages) {
      if (usedLng && usedLng.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();
      const toLoad = [];
      const append = lng => {
        if (!lng) return;
        if (lng === 'cimode') return;
        const lngs = this.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach(l => {
          if (l === 'cimode') return;
          if (toLoad.indexOf(l) < 0) toLoad.push(l);
        });
      };
      if (!usedLng) {
        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach(l => append(l));
      } else {
        append(usedLng);
      }
      if (this.options.preload) {
        this.options.preload.forEach(l => append(l));
      }
      this.services.backendConnector.load(toLoad, this.options.ns, e => {
        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);
        usedCallback(e);
      });
    } else {
      usedCallback(null);
    }
  }
  reloadResources(lngs, ns, callback) {
    const deferred = defer();
    if (typeof lngs === 'function') {
      callback = lngs;
      lngs = undefined;
    }
    if (typeof ns === 'function') {
      callback = ns;
      ns = undefined;
    }
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    if (!callback) callback = noop;
    this.services.backendConnector.reload(lngs, ns, err => {
      deferred.resolve();
      callback(err);
    });
    return deferred;
  }
  use(module) {
    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');
    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');
    if (module.type === 'backend') {
      this.modules.backend = module;
    }
    if (module.type === 'logger' || module.log && module.warn && module.error) {
      this.modules.logger = module;
    }
    if (module.type === 'languageDetector') {
      this.modules.languageDetector = module;
    }
    if (module.type === 'i18nFormat') {
      this.modules.i18nFormat = module;
    }
    if (module.type === 'postProcessor') {
      postProcessor.addPostProcessor(module);
    }
    if (module.type === 'formatter') {
      this.modules.formatter = module;
    }
    if (module.type === '3rdParty') {
      this.modules.external.push(module);
    }
    return this;
  }
  setResolvedLanguage(l) {
    if (!l || !this.languages) return;
    if (['cimode', 'dev'].indexOf(l) > -1) return;
    for (let li = 0; li < this.languages.length; li++) {
      const lngInLngs = this.languages[li];
      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;
      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {
        this.resolvedLanguage = lngInLngs;
        break;
      }
    }
  }
  changeLanguage(lng, callback) {
    var _this2 = this;
    this.isLanguageChangingTo = lng;
    const deferred = defer();
    this.emit('languageChanging', lng);
    const setLngProps = l => {
      this.language = l;
      this.languages = this.services.languageUtils.toResolveHierarchy(l);
      this.resolvedLanguage = undefined;
      this.setResolvedLanguage(l);
    };
    const done = (err, l) => {
      if (l) {
        setLngProps(l);
        this.translator.changeLanguage(l);
        this.isLanguageChangingTo = undefined;
        this.emit('languageChanged', l);
        this.logger.log('languageChanged', l);
      } else {
        this.isLanguageChangingTo = undefined;
      }
      deferred.resolve(function () {
        return _this2.t(...arguments);
      });
      if (callback) callback(err, function () {
        return _this2.t(...arguments);
      });
    };
    const setLng = lngs => {
      if (!lng && !lngs && this.services.languageDetector) lngs = [];
      const l = isString(lngs) ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);
      if (l) {
        if (!this.language) {
          setLngProps(l);
        }
        if (!this.translator.language) this.translator.changeLanguage(l);
        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);
      }
      this.loadResources(l, err => {
        done(err, l);
      });
    };
    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      if (this.services.languageDetector.detect.length === 0) {
        this.services.languageDetector.detect().then(setLng);
      } else {
        this.services.languageDetector.detect(setLng);
      }
    } else {
      setLng(lng);
    }
    return deferred;
  }
  getFixedT(lng, ns, keyPrefix) {
    var _this3 = this;
    const fixedT = function (key, opts) {
      let options;
      if (typeof opts !== 'object') {
        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {
          rest[_key3 - 2] = arguments[_key3];
        }
        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));
      } else {
        options = {
          ...opts
        };
      }
      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      if (options.keyPrefix !== '') options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;
      const keySeparator = _this3.options.keySeparator || '.';
      let resultKey;
      if (options.keyPrefix && Array.isArray(key)) {
        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);
      } else {
        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;
      }
      return _this3.t(resultKey, options);
    };
    if (isString(lng)) {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    fixedT.keyPrefix = keyPrefix;
    return fixedT;
  }
  t() {
    return this.translator && this.translator.translate(...arguments);
  }
  exists() {
    return this.translator && this.translator.exists(...arguments);
  }
  setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  }
  hasLoadedNamespace(ns) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (!this.isInitialized) {
      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);
      return false;
    }
    if (!this.languages || !this.languages.length) {
      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);
      return false;
    }
    const lng = options.lng || this.resolvedLanguage || this.languages[0];
    const fallbackLng = this.options ? this.options.fallbackLng : false;
    const lastLng = this.languages[this.languages.length - 1];
    if (lng.toLowerCase() === 'cimode') return true;
    const loadNotPending = (l, n) => {
      const loadState = this.services.backendConnector.state[`${l}|${n}`];
      return loadState === -1 || loadState === 0 || loadState === 2;
    };
    if (options.precheck) {
      const preResult = options.precheck(this, loadNotPending);
      if (preResult !== undefined) return preResult;
    }
    if (this.hasResourceBundle(lng, ns)) return true;
    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;
    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
    return false;
  }
  loadNamespaces(ns, callback) {
    const deferred = defer();
    if (!this.options.ns) {
      if (callback) callback();
      return Promise.resolve();
    }
    if (isString(ns)) ns = [ns];
    ns.forEach(n => {
      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);
    });
    this.loadResources(err => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  loadLanguages(lngs, callback) {
    const deferred = defer();
    if (isString(lngs)) lngs = [lngs];
    const preloaded = this.options.preload || [];
    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));
    if (!newLngs.length) {
      if (callback) callback();
      return Promise.resolve();
    }
    this.options.preload = preloaded.concat(newLngs);
    this.loadResources(err => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  dir(lng) {
    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);
    if (!lng) return 'rtl';
    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];
    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());
    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';
  }
  static createInstance() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    return new I18n(options, callback);
  }
  cloneInstance() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    const forkResourceStore = options.forkResourceStore;
    if (forkResourceStore) delete options.forkResourceStore;
    const mergedOptions = {
      ...this.options,
      ...options,
      ...{
        isClone: true
      }
    };
    const clone = new I18n(mergedOptions);
    if (options.debug !== undefined || options.prefix !== undefined) {
      clone.logger = clone.logger.clone(options);
    }
    const membersToCopy = ['store', 'services', 'language'];
    membersToCopy.forEach(m => {
      clone[m] = this[m];
    });
    clone.services = {
      ...this.services
    };
    clone.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    if (forkResourceStore) {
      clone.store = new ResourceStore(this.store.data, mergedOptions);
      clone.services.resourceStore = clone.store;
    }
    clone.translator = new Translator(clone.services, mergedOptions);
    clone.translator.on('*', function (event) {
      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
        args[_key4 - 1] = arguments[_key4];
      }
      clone.emit(event, ...args);
    });
    clone.init(mergedOptions, callback);
    clone.translator.options = mergedOptions;
    clone.translator.backendConnector.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    return clone;
  }
  toJSON() {
    return {
      options: this.options,
      store: this.store,
      language: this.language,
      languages: this.languages,
      resolvedLanguage: this.resolvedLanguage
    };
  }
}
const instance = I18n.createInstance();
instance.createInstance = I18n.createInstance;

module.exports = instance;


/***/ }),

/***/ "../../node_modules/lodash.debounce/index.js":
/*!***************************************************!*\
  !*** ../../node_modules/lodash.debounce/index.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof __webpack_require__.g == 'object' && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = debounce;


/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/I18nextProvider.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/I18nextProvider.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nextProvider: () => (/* binding */ I18nextProvider)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");


function I18nextProvider(_ref) {
  let {
    i18n,
    defaultNS,
    children
  } = _ref;
  const value = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({
    i18n,
    defaultNS
  }), [i18n, defaultNS]);
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext.Provider, {
    value
  }, children);
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/Trans.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/Trans.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Trans: () => (/* binding */ Trans),
/* harmony export */   nodesToString: () => (/* reexport safe */ _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.nodesToString)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransWithoutContext.js */ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");




function Trans(_ref) {
  let {
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions = {},
    values,
    defaults,
    components,
    ns,
    i18n: i18nFromProps,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  } = _ref;
  const {
    i18n: i18nFromContext,
    defaultNS: defaultNSFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_2__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_2__.getI18n)();
  const t = tFromProps || i18n && i18n.t.bind(i18n);
  return (0,_TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.Trans)({
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions,
    values,
    defaults,
    components,
    ns: ns || t && t.ns || defaultNSFromContext || i18n && i18n.options && i18n.options.defaultNS,
    i18n,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  });
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js":
/*!***********************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/TransWithoutContext.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Trans: () => (/* binding */ Trans),
/* harmony export */   nodesToString: () => (/* binding */ nodesToString)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var html_parse_stringify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-parse-stringify */ "../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");





const hasChildren = (node, checkLength) => {
  if (!node) return false;
  const base = node.props ? node.props.children : node.children;
  if (checkLength) return base.length > 0;
  return !!base;
};
const getChildren = node => {
  if (!node) return [];
  const children = node.props ? node.props.children : node.children;
  return node.props && node.props.i18nIsDynamicList ? getAsArray(children) : children;
};
const hasValidReactChildren = children => Array.isArray(children) && children.every(react__WEBPACK_IMPORTED_MODULE_0__.isValidElement);
const getAsArray = data => Array.isArray(data) ? data : [data];
const mergeProps = (source, target) => {
  const newTarget = {
    ...target
  };
  newTarget.props = Object.assign(source.props, target.props);
  return newTarget;
};
const nodesToString = (children, i18nOptions) => {
  if (!children) return '';
  let stringNode = '';
  const childrenArray = getAsArray(children);
  const keepArray = i18nOptions.transSupportBasicHtmlNodes && i18nOptions.transKeepBasicHtmlNodesFor ? i18nOptions.transKeepBasicHtmlNodesFor : [];
  childrenArray.forEach((child, childIndex) => {
    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) {
      stringNode += `${child}`;
    } else if ((0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) {
      const {
        props,
        type
      } = child;
      const childPropsCount = Object.keys(props).length;
      const shouldKeepChild = keepArray.indexOf(type) > -1;
      const childChildren = props.children;
      if (!childChildren && shouldKeepChild && !childPropsCount) {
        stringNode += `<${type}/>`;
      } else if (!childChildren && (!shouldKeepChild || childPropsCount) || props.i18nIsDynamicList) {
        stringNode += `<${childIndex}></${childIndex}>`;
      } else if (shouldKeepChild && childPropsCount === 1 && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(childChildren)) {
        stringNode += `<${type}>${childChildren}</${type}>`;
      } else {
        const content = nodesToString(childChildren, i18nOptions);
        stringNode += `<${childIndex}>${content}</${childIndex}>`;
      }
    } else if (child === null) {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`Trans: the passed in value is invalid - seems you passed in a null child.`);
    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child)) {
      const {
        format,
        ...clone
      } = child;
      const keys = Object.keys(clone);
      if (keys.length === 1) {
        const value = format ? `${keys[0]}, ${format}` : keys[0];
        stringNode += `{{${value}}}`;
      } else {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.`, child);
      }
    } else {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.`, child);
    }
  });
  return stringNode;
};
const renderNodes = (children, targetString, i18n, i18nOptions, combinedTOpts, shouldUnescape) => {
  if (targetString === '') return [];
  const keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];
  const emptyChildrenButNeedsHandling = targetString && new RegExp(keepArray.map(keep => `<${keep}`).join('|')).test(targetString);
  if (!children && !emptyChildrenButNeedsHandling && !shouldUnescape) return [targetString];
  const data = {};
  const getData = childs => {
    const childrenArray = getAsArray(childs);
    childrenArray.forEach(child => {
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) return;
      if (hasChildren(child)) getData(getChildren(child));else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && !(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) Object.assign(data, child);
    });
  };
  getData(children);
  const ast = html_parse_stringify__WEBPACK_IMPORTED_MODULE_1__["default"].parse(`<0>${targetString}</0>`);
  const opts = {
    ...data,
    ...combinedTOpts
  };
  const renderInner = (child, node, rootReactNode) => {
    const childs = getChildren(child);
    const mappedChildren = mapAST(childs, node.children, rootReactNode);
    return hasValidReactChildren(childs) && mappedChildren.length === 0 || child.props && child.props.i18nIsDynamicList ? childs : mappedChildren;
  };
  const pushTranslatedJSX = (child, inner, mem, i, isVoid) => {
    if (child.dummy) {
      child.children = inner;
      mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(child, {
        key: i
      }, isVoid ? undefined : inner));
    } else {
      mem.push(...react__WEBPACK_IMPORTED_MODULE_0__.Children.map([child], c => {
        const props = {
          ...c.props
        };
        delete props.i18nIsDynamicList;
        return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(c.type, {
          ...props,
          key: i,
          ref: c.ref
        }, isVoid ? null : inner);
      }));
    }
  };
  const mapAST = (reactNode, astNode, rootReactNode) => {
    const reactNodes = getAsArray(reactNode);
    const astNodes = getAsArray(astNode);
    return astNodes.reduce((mem, node, i) => {
      const translationContent = node.children && node.children[0] && node.children[0].content && i18n.services.interpolator.interpolate(node.children[0].content, opts, i18n.language);
      if (node.type === 'tag') {
        let tmp = reactNodes[parseInt(node.name, 10)];
        if (rootReactNode.length === 1 && !tmp) tmp = rootReactNode[0][node.name];
        if (!tmp) tmp = {};
        const child = Object.keys(node.attrs).length !== 0 ? mergeProps({
          props: node.attrs
        }, tmp) : tmp;
        const isElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child);
        const isValidTranslationWithChildren = isElement && hasChildren(node, true) && !node.voidElement;
        const isEmptyTransWithHTML = emptyChildrenButNeedsHandling && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && child.dummy && !isElement;
        const isKnownComponent = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(children) && Object.hasOwnProperty.call(children, node.name);
        if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) {
          const value = i18n.services.interpolator.interpolate(child, opts, i18n.language);
          mem.push(value);
        } else if (hasChildren(child) || isValidTranslationWithChildren) {
          const inner = renderInner(child, node, rootReactNode);
          pushTranslatedJSX(child, inner, mem, i);
        } else if (isEmptyTransWithHTML) {
          const inner = mapAST(reactNodes, node.children, rootReactNode);
          pushTranslatedJSX(child, inner, mem, i);
        } else if (Number.isNaN(parseFloat(node.name))) {
          if (isKnownComponent) {
            const inner = renderInner(child, node, rootReactNode);
            pushTranslatedJSX(child, inner, mem, i, node.voidElement);
          } else if (i18nOptions.transSupportBasicHtmlNodes && keepArray.indexOf(node.name) > -1) {
            if (node.voidElement) {
              mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(node.name, {
                key: `${node.name}-${i}`
              }));
            } else {
              const inner = mapAST(reactNodes, node.children, rootReactNode);
              mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(node.name, {
                key: `${node.name}-${i}`
              }, inner));
            }
          } else if (node.voidElement) {
            mem.push(`<${node.name} />`);
          } else {
            const inner = mapAST(reactNodes, node.children, rootReactNode);
            mem.push(`<${node.name}>${inner}</${node.name}>`);
          }
        } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && !isElement) {
          const content = node.children[0] ? translationContent : null;
          if (content) mem.push(content);
        } else {
          pushTranslatedJSX(child, translationContent, mem, i, node.children.length !== 1 || !translationContent);
        }
      } else if (node.type === 'text') {
        const wrapTextNodes = i18nOptions.transWrapTextNodes;
        const content = shouldUnescape ? i18nOptions.unescape(i18n.services.interpolator.interpolate(node.content, opts, i18n.language)) : i18n.services.interpolator.interpolate(node.content, opts, i18n.language);
        if (wrapTextNodes) {
          mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(wrapTextNodes, {
            key: `${node.name}-${i}`
          }, content));
        } else {
          mem.push(content);
        }
      }
      return mem;
    }, []);
  };
  const result = mapAST([{
    dummy: true,
    children: children || []
  }], ast, getAsArray(children || []));
  return getChildren(result[0]);
};
function Trans(_ref) {
  let {
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions = {},
    values,
    defaults,
    components,
    ns,
    i18n: i18nFromProps,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  } = _ref;
  const i18n = i18nFromProps || (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_4__.getI18n)();
  if (!i18n) {
    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('You will need to pass in an i18next instance by using i18nextReactModule');
    return children;
  }
  const t = tFromProps || i18n.t.bind(i18n) || (k => k);
  const reactI18nextOptions = {
    ...(0,_defaults_js__WEBPACK_IMPORTED_MODULE_3__.getDefaults)(),
    ...(i18n.options && i18n.options.react)
  };
  let namespaces = ns || t.ns || i18n.options && i18n.options.defaultNS;
  namespaces = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(namespaces) ? [namespaces] : namespaces || ['translation'];
  const nodeAsString = nodesToString(children, reactI18nextOptions);
  const defaultValue = defaults || nodeAsString || reactI18nextOptions.transEmptyNodeValue || i18nKey;
  const {
    hashTransKey
  } = reactI18nextOptions;
  const key = i18nKey || (hashTransKey ? hashTransKey(nodeAsString || defaultValue) : nodeAsString || defaultValue);
  if (i18n.options && i18n.options.interpolation && i18n.options.interpolation.defaultVariables) {
    values = values && Object.keys(values).length > 0 ? {
      ...values,
      ...i18n.options.interpolation.defaultVariables
    } : {
      ...i18n.options.interpolation.defaultVariables
    };
  }
  const interpolationOverride = values || count !== undefined || !children ? tOptions.interpolation : {
    interpolation: {
      ...tOptions.interpolation,
      prefix: '#$?',
      suffix: '?$#'
    }
  };
  const combinedTOpts = {
    ...tOptions,
    context: context || tOptions.context,
    count,
    ...values,
    ...interpolationOverride,
    defaultValue,
    ns: namespaces
  };
  const translation = key ? t(key, combinedTOpts) : defaultValue;
  if (components) {
    Object.keys(components).forEach(c => {
      const comp = components[c];
      if (typeof comp.type === 'function' || !comp.props || !comp.props.children || translation.indexOf(`${c}/>`) < 0 && translation.indexOf(`${c} />`) < 0) return;
      function Componentized() {
        return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, comp);
      }
      components[c] = (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(Componentized);
    });
  }
  const content = renderNodes(components || children, translation, i18n, reactI18nextOptions, combinedTOpts, shouldUnescape);
  const useAsParent = parent !== undefined ? parent : reactI18nextOptions.defaultTransParent;
  return useAsParent ? (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(useAsParent, additionalProps, content) : content;
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/Translation.js":
/*!***************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/Translation.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Translation: () => (/* binding */ Translation)
/* harmony export */ });
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");

function Translation(props) {
  const {
    ns,
    children,
    ...options
  } = props;
  const [t, i18n, ready] = (0,_useTranslation_js__WEBPACK_IMPORTED_MODULE_0__.useTranslation)(ns, options);
  return children(t, {
    i18n,
    lng: i18n.language
  }, ready);
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/context.js":
/*!***********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/context.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nContext: () => (/* binding */ I18nContext),
/* harmony export */   ReportNamespaces: () => (/* binding */ ReportNamespaces),
/* harmony export */   composeInitialProps: () => (/* binding */ composeInitialProps),
/* harmony export */   getDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_1__.getDefaults),
/* harmony export */   getI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.getI18n),
/* harmony export */   getInitialProps: () => (/* binding */ getInitialProps),
/* harmony export */   initReactI18next: () => (/* reexport safe */ _initReactI18next_js__WEBPACK_IMPORTED_MODULE_3__.initReactI18next),
/* harmony export */   setDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_1__.setDefaults),
/* harmony export */   setI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.setI18n)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");
/* harmony import */ var _initReactI18next_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./initReactI18next.js */ "../../node_modules/react-i18next/dist/es/initReactI18next.js");





const I18nContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)();
class ReportNamespaces {
  constructor() {
    this.usedNamespaces = {};
  }
  addUsedNamespaces(namespaces) {
    namespaces.forEach(ns => {
      if (!this.usedNamespaces[ns]) this.usedNamespaces[ns] = true;
    });
  }
  getUsedNamespaces = () => Object.keys(this.usedNamespaces);
}
const composeInitialProps = ForComponent => async ctx => {
  const componentsInitialProps = ForComponent.getInitialProps ? await ForComponent.getInitialProps(ctx) : {};
  const i18nInitialProps = getInitialProps();
  return {
    ...componentsInitialProps,
    ...i18nInitialProps
  };
};
const getInitialProps = () => {
  const i18n = (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.getI18n)();
  const namespaces = i18n.reportNamespaces ? i18n.reportNamespaces.getUsedNamespaces() : [];
  const ret = {};
  const initialI18nStore = {};
  i18n.languages.forEach(l => {
    initialI18nStore[l] = {};
    namespaces.forEach(ns => {
      initialI18nStore[l][ns] = i18n.getResourceBundle(l, ns) || {};
    });
  });
  ret.initialI18nStore = initialI18nStore;
  ret.initialLanguage = i18n.language;
  return ret;
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/defaults.js":
/*!************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/defaults.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaults: () => (/* binding */ getDefaults),
/* harmony export */   setDefaults: () => (/* binding */ setDefaults)
/* harmony export */ });
/* harmony import */ var _unescape_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./unescape.js */ "../../node_modules/react-i18next/dist/es/unescape.js");

let defaultOptions = {
  bindI18n: 'languageChanged',
  bindI18nStore: '',
  transEmptyNodeValue: '',
  transSupportBasicHtmlNodes: true,
  transWrapTextNodes: '',
  transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'p'],
  useSuspense: true,
  unescape: _unescape_js__WEBPACK_IMPORTED_MODULE_0__.unescape
};
const setDefaults = function () {
  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  defaultOptions = {
    ...defaultOptions,
    ...options
  };
};
const getDefaults = () => defaultOptions;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/i18nInstance.js":
/*!****************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/i18nInstance.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getI18n: () => (/* binding */ getI18n),
/* harmony export */   setI18n: () => (/* binding */ setI18n)
/* harmony export */ });
let i18nInstance;
const setI18n = instance => {
  i18nInstance = instance;
};
const getI18n = () => i18nInstance;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/index.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nContext: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.I18nContext),
/* harmony export */   I18nextProvider: () => (/* reexport safe */ _I18nextProvider_js__WEBPACK_IMPORTED_MODULE_5__.I18nextProvider),
/* harmony export */   Trans: () => (/* reexport safe */ _Trans_js__WEBPACK_IMPORTED_MODULE_0__.Trans),
/* harmony export */   TransWithoutContext: () => (/* reexport safe */ _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.Trans),
/* harmony export */   Translation: () => (/* reexport safe */ _Translation_js__WEBPACK_IMPORTED_MODULE_4__.Translation),
/* harmony export */   composeInitialProps: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.composeInitialProps),
/* harmony export */   date: () => (/* binding */ date),
/* harmony export */   getDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_9__.getDefaults),
/* harmony export */   getI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__.getI18n),
/* harmony export */   getInitialProps: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.getInitialProps),
/* harmony export */   initReactI18next: () => (/* reexport safe */ _initReactI18next_js__WEBPACK_IMPORTED_MODULE_8__.initReactI18next),
/* harmony export */   number: () => (/* binding */ number),
/* harmony export */   plural: () => (/* binding */ plural),
/* harmony export */   select: () => (/* binding */ select),
/* harmony export */   selectOrdinal: () => (/* binding */ selectOrdinal),
/* harmony export */   setDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_9__.setDefaults),
/* harmony export */   setI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__.setI18n),
/* harmony export */   time: () => (/* binding */ time),
/* harmony export */   useSSR: () => (/* reexport safe */ _useSSR_js__WEBPACK_IMPORTED_MODULE_7__.useSSR),
/* harmony export */   useTranslation: () => (/* reexport safe */ _useTranslation_js__WEBPACK_IMPORTED_MODULE_2__.useTranslation),
/* harmony export */   withSSR: () => (/* reexport safe */ _withSSR_js__WEBPACK_IMPORTED_MODULE_6__.withSSR),
/* harmony export */   withTranslation: () => (/* reexport safe */ _withTranslation_js__WEBPACK_IMPORTED_MODULE_3__.withTranslation)
/* harmony export */ });
/* harmony import */ var _Trans_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Trans.js */ "../../node_modules/react-i18next/dist/es/Trans.js");
/* harmony import */ var _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransWithoutContext.js */ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js");
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");
/* harmony import */ var _withTranslation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./withTranslation.js */ "../../node_modules/react-i18next/dist/es/withTranslation.js");
/* harmony import */ var _Translation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Translation.js */ "../../node_modules/react-i18next/dist/es/Translation.js");
/* harmony import */ var _I18nextProvider_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./I18nextProvider.js */ "../../node_modules/react-i18next/dist/es/I18nextProvider.js");
/* harmony import */ var _withSSR_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./withSSR.js */ "../../node_modules/react-i18next/dist/es/withSSR.js");
/* harmony import */ var _useSSR_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useSSR.js */ "../../node_modules/react-i18next/dist/es/useSSR.js");
/* harmony import */ var _initReactI18next_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./initReactI18next.js */ "../../node_modules/react-i18next/dist/es/initReactI18next.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");












const date = () => '';
const time = () => '';
const number = () => '';
const select = () => '';
const plural = () => '';
const selectOrdinal = () => '';

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/initReactI18next.js":
/*!********************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/initReactI18next.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initReactI18next: () => (/* binding */ initReactI18next)
/* harmony export */ });
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");


const initReactI18next = {
  type: '3rdParty',
  init(instance) {
    (0,_defaults_js__WEBPACK_IMPORTED_MODULE_0__.setDefaults)(instance.options.react);
    (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_1__.setI18n)(instance);
  }
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/unescape.js":
/*!************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/unescape.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   unescape: () => (/* binding */ unescape)
/* harmony export */ });
const matchHtmlEntity = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g;
const htmlEntities = {
  '&amp;': '&',
  '&#38;': '&',
  '&lt;': '<',
  '&#60;': '<',
  '&gt;': '>',
  '&#62;': '>',
  '&apos;': "'",
  '&#39;': "'",
  '&quot;': '"',
  '&#34;': '"',
  '&nbsp;': ' ',
  '&#160;': ' ',
  '&copy;': '©',
  '&#169;': '©',
  '&reg;': '®',
  '&#174;': '®',
  '&hellip;': '…',
  '&#8230;': '…',
  '&#x2F;': '/',
  '&#47;': '/'
};
const unescapeHtmlEntity = m => htmlEntities[m];
const unescape = text => text.replace(matchHtmlEntity, unescapeHtmlEntity);

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/useSSR.js":
/*!**********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/useSSR.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useSSR: () => (/* binding */ useSSR)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");


const useSSR = function (initialI18nStore, initialLanguage) {
  let props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const {
    i18n: i18nFromProps
  } = props;
  const {
    i18n: i18nFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getI18n)();
  if (i18n.options && i18n.options.isClone) return;
  if (initialI18nStore && !i18n.initializedStoreOnce) {
    i18n.services.resourceStore.data = initialI18nStore;
    i18n.options.ns = Object.values(initialI18nStore).reduce((mem, lngResources) => {
      Object.keys(lngResources).forEach(ns => {
        if (mem.indexOf(ns) < 0) mem.push(ns);
      });
      return mem;
    }, i18n.options.ns);
    i18n.initializedStoreOnce = true;
    i18n.isInitialized = true;
  }
  if (initialLanguage && !i18n.initializedLanguageOnce) {
    i18n.changeLanguage(initialLanguage);
    i18n.initializedLanguageOnce = true;
  }
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/useTranslation.js":
/*!******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/useTranslation.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useTranslation: () => (/* binding */ useTranslation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");



const usePrevious = (value, ignore) => {
  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    ref.current = ignore ? ref.current : value;
  }, [value, ignore]);
  return ref.current;
};
const alwaysNewT = (i18n, language, namespace, keyPrefix) => i18n.getFixedT(language, namespace, keyPrefix);
const useMemoizedT = (i18n, language, namespace, keyPrefix) => (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(alwaysNewT(i18n, language, namespace, keyPrefix), [i18n, language, namespace, keyPrefix]);
const useTranslation = function (ns) {
  let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  const {
    i18n: i18nFromProps
  } = props;
  const {
    i18n: i18nFromContext,
    defaultNS: defaultNSFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getI18n)();
  if (i18n && !i18n.reportNamespaces) i18n.reportNamespaces = new _context_js__WEBPACK_IMPORTED_MODULE_1__.ReportNamespaces();
  if (!i18n) {
    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('You will need to pass in an i18next instance by using initReactI18next');
    const notReadyT = (k, optsOrDefaultValue) => {
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(optsOrDefaultValue)) return optsOrDefaultValue;
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(optsOrDefaultValue) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(optsOrDefaultValue.defaultValue)) return optsOrDefaultValue.defaultValue;
      return Array.isArray(k) ? k[k.length - 1] : k;
    };
    const retNotReady = [notReadyT, {}, false];
    retNotReady.t = notReadyT;
    retNotReady.i18n = {};
    retNotReady.ready = false;
    return retNotReady;
  }
  if (i18n.options.react && i18n.options.react.wait !== undefined) (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.');
  const i18nOptions = {
    ...(0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getDefaults)(),
    ...i18n.options.react,
    ...props
  };
  const {
    useSuspense,
    keyPrefix
  } = i18nOptions;
  let namespaces = ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;
  namespaces = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(namespaces) ? [namespaces] : namespaces || ['translation'];
  if (i18n.reportNamespaces.addUsedNamespaces) i18n.reportNamespaces.addUsedNamespaces(namespaces);
  const ready = (i18n.isInitialized || i18n.initializedStoreOnce) && namespaces.every(n => (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.hasLoadedNamespace)(n, i18n, i18nOptions));
  const memoGetT = useMemoizedT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);
  const getT = () => memoGetT;
  const getNewT = () => alwaysNewT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);
  const [t, setT] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getT);
  let joinedNS = namespaces.join();
  if (props.lng) joinedNS = `${props.lng}${joinedNS}`;
  const previousJoinedNS = usePrevious(joinedNS);
  const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    const {
      bindI18n,
      bindI18nStore
    } = i18nOptions;
    isMounted.current = true;
    if (!ready && !useSuspense) {
      if (props.lng) {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadLanguages)(i18n, props.lng, namespaces, () => {
          if (isMounted.current) setT(getNewT);
        });
      } else {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadNamespaces)(i18n, namespaces, () => {
          if (isMounted.current) setT(getNewT);
        });
      }
    }
    if (ready && previousJoinedNS && previousJoinedNS !== joinedNS && isMounted.current) {
      setT(getNewT);
    }
    const boundReset = () => {
      if (isMounted.current) setT(getNewT);
    };
    if (bindI18n && i18n) i18n.on(bindI18n, boundReset);
    if (bindI18nStore && i18n) i18n.store.on(bindI18nStore, boundReset);
    return () => {
      isMounted.current = false;
      if (bindI18n && i18n) bindI18n.split(' ').forEach(e => i18n.off(e, boundReset));
      if (bindI18nStore && i18n) bindI18nStore.split(' ').forEach(e => i18n.store.off(e, boundReset));
    };
  }, [i18n, joinedNS]);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (isMounted.current && ready) {
      setT(getT);
    }
  }, [i18n, keyPrefix, ready]);
  const ret = [t, i18n, ready];
  ret.t = t;
  ret.i18n = i18n;
  ret.ready = ready;
  if (ready) return ret;
  if (!ready && !useSuspense) return ret;
  throw new Promise(resolve => {
    if (props.lng) {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadLanguages)(i18n, props.lng, namespaces, () => resolve());
    } else {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadNamespaces)(i18n, namespaces, () => resolve());
    }
  });
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/utils.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/utils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDisplayName: () => (/* binding */ getDisplayName),
/* harmony export */   hasLoadedNamespace: () => (/* binding */ hasLoadedNamespace),
/* harmony export */   isObject: () => (/* binding */ isObject),
/* harmony export */   isString: () => (/* binding */ isString),
/* harmony export */   loadLanguages: () => (/* binding */ loadLanguages),
/* harmony export */   loadNamespaces: () => (/* binding */ loadNamespaces),
/* harmony export */   warn: () => (/* binding */ warn),
/* harmony export */   warnOnce: () => (/* binding */ warnOnce)
/* harmony export */ });
function warn() {
  if (console && console.warn) {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    if (isString(args[0])) args[0] = `react-i18next:: ${args[0]}`;
    console.warn(...args);
  }
}
const alreadyWarned = {};
function warnOnce() {
  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }
  if (isString(args[0]) && alreadyWarned[args[0]]) return;
  if (isString(args[0])) alreadyWarned[args[0]] = new Date();
  warn(...args);
}
const loadedClb = (i18n, cb) => () => {
  if (i18n.isInitialized) {
    cb();
  } else {
    const initialized = () => {
      setTimeout(() => {
        i18n.off('initialized', initialized);
      }, 0);
      cb();
    };
    i18n.on('initialized', initialized);
  }
};
const loadNamespaces = (i18n, ns, cb) => {
  i18n.loadNamespaces(ns, loadedClb(i18n, cb));
};
const loadLanguages = (i18n, lng, ns, cb) => {
  if (isString(ns)) ns = [ns];
  ns.forEach(n => {
    if (i18n.options.ns.indexOf(n) < 0) i18n.options.ns.push(n);
  });
  i18n.loadLanguages(lng, loadedClb(i18n, cb));
};
const oldI18nextHasLoadedNamespace = function (ns, i18n) {
  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const lng = i18n.languages[0];
  const fallbackLng = i18n.options ? i18n.options.fallbackLng : false;
  const lastLng = i18n.languages[i18n.languages.length - 1];
  if (lng.toLowerCase() === 'cimode') return true;
  const loadNotPending = (l, n) => {
    const loadState = i18n.services.backendConnector.state[`${l}|${n}`];
    return loadState === -1 || loadState === 2;
  };
  if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18n.services.backendConnector.backend && i18n.isLanguageChangingTo && !loadNotPending(i18n.isLanguageChangingTo, ns)) return false;
  if (i18n.hasResourceBundle(lng, ns)) return true;
  if (!i18n.services.backendConnector.backend || i18n.options.resources && !i18n.options.partialBundledLanguages) return true;
  if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
  return false;
};
const hasLoadedNamespace = function (ns, i18n) {
  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  if (!i18n.languages || !i18n.languages.length) {
    warnOnce('i18n.languages were undefined or empty', i18n.languages);
    return true;
  }
  const isNewerI18next = i18n.options.ignoreJSONStructure !== undefined;
  if (!isNewerI18next) {
    return oldI18nextHasLoadedNamespace(ns, i18n, options);
  }
  return i18n.hasLoadedNamespace(ns, {
    lng: options.lng,
    precheck: (i18nInstance, loadNotPending) => {
      if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18nInstance.services.backendConnector.backend && i18nInstance.isLanguageChangingTo && !loadNotPending(i18nInstance.isLanguageChangingTo, ns)) return false;
    }
  });
};
const getDisplayName = Component => Component.displayName || Component.name || (isString(Component) && Component.length > 0 ? Component : 'Unknown');
const isString = obj => typeof obj === 'string';
const isObject = obj => typeof obj === 'object' && obj !== null;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/withSSR.js":
/*!***********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/withSSR.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withSSR: () => (/* binding */ withSSR)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _useSSR_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useSSR.js */ "../../node_modules/react-i18next/dist/es/useSSR.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");




const withSSR = () => function Extend(WrappedComponent) {
  function I18nextWithSSR(_ref) {
    let {
      initialI18nStore,
      initialLanguage,
      ...rest
    } = _ref;
    (0,_useSSR_js__WEBPACK_IMPORTED_MODULE_1__.useSSR)(initialI18nStore, initialLanguage);
    return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(WrappedComponent, {
      ...rest
    });
  }
  I18nextWithSSR.getInitialProps = (0,_context_js__WEBPACK_IMPORTED_MODULE_2__.composeInitialProps)(WrappedComponent);
  I18nextWithSSR.displayName = `withI18nextSSR(${(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.getDisplayName)(WrappedComponent)})`;
  I18nextWithSSR.WrappedComponent = WrappedComponent;
  return I18nextWithSSR;
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/withTranslation.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/withTranslation.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withTranslation: () => (/* binding */ withTranslation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");



const withTranslation = function (ns) {
  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return function Extend(WrappedComponent) {
    function I18nextWithTranslation(_ref) {
      let {
        forwardedRef,
        ...rest
      } = _ref;
      const [t, i18n, ready] = (0,_useTranslation_js__WEBPACK_IMPORTED_MODULE_1__.useTranslation)(ns, {
        ...rest,
        keyPrefix: options.keyPrefix
      });
      const passDownProps = {
        ...rest,
        t,
        i18n,
        tReady: ready
      };
      if (options.withRef && forwardedRef) {
        passDownProps.ref = forwardedRef;
      } else if (!options.withRef && forwardedRef) {
        passDownProps.forwardedRef = forwardedRef;
      }
      return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(WrappedComponent, passDownProps);
    }
    I18nextWithTranslation.displayName = `withI18nextTranslation(${(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.getDisplayName)(WrappedComponent)})`;
    I18nextWithTranslation.WrappedComponent = WrappedComponent;
    const forwardRef = (props, ref) => (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(I18nextWithTranslation, Object.assign({}, props, {
      forwardedRef: ref
    }));
    return options.withRef ? (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(forwardRef) : I18nextWithTranslation;
  };
};

/***/ }),

/***/ "../../node_modules/react/cjs/react.development.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react/cjs/react.development.js ***!
  \*********************************************************/
/***/ ((module, exports, __webpack_require__) => {

/* module decorator */ module = __webpack_require__.nmd(module);
/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */


 true &&
  (function () {
    function defineDeprecationWarning(methodName, info) {
      Object.defineProperty(Component.prototype, methodName, {
        get: function () {
          console.warn(
            "%s(...) is deprecated in plain JavaScript React classes. %s",
            info[0],
            info[1]
          );
        }
      });
    }
    function getIteratorFn(maybeIterable) {
      if (null === maybeIterable || "object" !== typeof maybeIterable)
        return null;
      maybeIterable =
        (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||
        maybeIterable["@@iterator"];
      return "function" === typeof maybeIterable ? maybeIterable : null;
    }
    function warnNoop(publicInstance, callerName) {
      publicInstance =
        ((publicInstance = publicInstance.constructor) &&
          (publicInstance.displayName || publicInstance.name)) ||
        "ReactClass";
      var warningKey = publicInstance + "." + callerName;
      didWarnStateUpdateForUnmountedComponent[warningKey] ||
        (console.error(
          "Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",
          callerName,
          publicInstance
        ),
        (didWarnStateUpdateForUnmountedComponent[warningKey] = !0));
    }
    function Component(props, context, updater) {
      this.props = props;
      this.context = context;
      this.refs = emptyObject;
      this.updater = updater || ReactNoopUpdateQueue;
    }
    function ComponentDummy() {}
    function PureComponent(props, context, updater) {
      this.props = props;
      this.context = context;
      this.refs = emptyObject;
      this.updater = updater || ReactNoopUpdateQueue;
    }
    function testStringCoercion(value) {
      return "" + value;
    }
    function checkKeyStringCoercion(value) {
      try {
        testStringCoercion(value);
        var JSCompiler_inline_result = !1;
      } catch (e) {
        JSCompiler_inline_result = !0;
      }
      if (JSCompiler_inline_result) {
        JSCompiler_inline_result = console;
        var JSCompiler_temp_const = JSCompiler_inline_result.error;
        var JSCompiler_inline_result$jscomp$0 =
          ("function" === typeof Symbol &&
            Symbol.toStringTag &&
            value[Symbol.toStringTag]) ||
          value.constructor.name ||
          "Object";
        JSCompiler_temp_const.call(
          JSCompiler_inline_result,
          "The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",
          JSCompiler_inline_result$jscomp$0
        );
        return testStringCoercion(value);
      }
    }
    function getComponentNameFromType(type) {
      if (null == type) return null;
      if ("function" === typeof type)
        return type.$$typeof === REACT_CLIENT_REFERENCE
          ? null
          : type.displayName || type.name || null;
      if ("string" === typeof type) return type;
      switch (type) {
        case REACT_FRAGMENT_TYPE:
          return "Fragment";
        case REACT_PROFILER_TYPE:
          return "Profiler";
        case REACT_STRICT_MODE_TYPE:
          return "StrictMode";
        case REACT_SUSPENSE_TYPE:
          return "Suspense";
        case REACT_SUSPENSE_LIST_TYPE:
          return "SuspenseList";
        case REACT_ACTIVITY_TYPE:
          return "Activity";
      }
      if ("object" === typeof type)
        switch (
          ("number" === typeof type.tag &&
            console.error(
              "Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."
            ),
          type.$$typeof)
        ) {
          case REACT_PORTAL_TYPE:
            return "Portal";
          case REACT_CONTEXT_TYPE:
            return (type.displayName || "Context") + ".Provider";
          case REACT_CONSUMER_TYPE:
            return (type._context.displayName || "Context") + ".Consumer";
          case REACT_FORWARD_REF_TYPE:
            var innerType = type.render;
            type = type.displayName;
            type ||
              ((type = innerType.displayName || innerType.name || ""),
              (type = "" !== type ? "ForwardRef(" + type + ")" : "ForwardRef"));
            return type;
          case REACT_MEMO_TYPE:
            return (
              (innerType = type.displayName || null),
              null !== innerType
                ? innerType
                : getComponentNameFromType(type.type) || "Memo"
            );
          case REACT_LAZY_TYPE:
            innerType = type._payload;
            type = type._init;
            try {
              return getComponentNameFromType(type(innerType));
            } catch (x) {}
        }
      return null;
    }
    function getTaskName(type) {
      if (type === REACT_FRAGMENT_TYPE) return "<>";
      if (
        "object" === typeof type &&
        null !== type &&
        type.$$typeof === REACT_LAZY_TYPE
      )
        return "<...>";
      try {
        var name = getComponentNameFromType(type);
        return name ? "<" + name + ">" : "<...>";
      } catch (x) {
        return "<...>";
      }
    }
    function getOwner() {
      var dispatcher = ReactSharedInternals.A;
      return null === dispatcher ? null : dispatcher.getOwner();
    }
    function UnknownOwner() {
      return Error("react-stack-top-frame");
    }
    function hasValidKey(config) {
      if (hasOwnProperty.call(config, "key")) {
        var getter = Object.getOwnPropertyDescriptor(config, "key").get;
        if (getter && getter.isReactWarning) return !1;
      }
      return void 0 !== config.key;
    }
    function defineKeyPropWarningGetter(props, displayName) {
      function warnAboutAccessingKey() {
        specialPropKeyWarningShown ||
          ((specialPropKeyWarningShown = !0),
          console.error(
            "%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",
            displayName
          ));
      }
      warnAboutAccessingKey.isReactWarning = !0;
      Object.defineProperty(props, "key", {
        get: warnAboutAccessingKey,
        configurable: !0
      });
    }
    function elementRefGetterWithDeprecationWarning() {
      var componentName = getComponentNameFromType(this.type);
      didWarnAboutElementRef[componentName] ||
        ((didWarnAboutElementRef[componentName] = !0),
        console.error(
          "Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release."
        ));
      componentName = this.props.ref;
      return void 0 !== componentName ? componentName : null;
    }
    function ReactElement(
      type,
      key,
      self,
      source,
      owner,
      props,
      debugStack,
      debugTask
    ) {
      self = props.ref;
      type = {
        $$typeof: REACT_ELEMENT_TYPE,
        type: type,
        key: key,
        props: props,
        _owner: owner
      };
      null !== (void 0 !== self ? self : null)
        ? Object.defineProperty(type, "ref", {
            enumerable: !1,
            get: elementRefGetterWithDeprecationWarning
          })
        : Object.defineProperty(type, "ref", { enumerable: !1, value: null });
      type._store = {};
      Object.defineProperty(type._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: 0
      });
      Object.defineProperty(type, "_debugInfo", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: null
      });
      Object.defineProperty(type, "_debugStack", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: debugStack
      });
      Object.defineProperty(type, "_debugTask", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: debugTask
      });
      Object.freeze && (Object.freeze(type.props), Object.freeze(type));
      return type;
    }
    function cloneAndReplaceKey(oldElement, newKey) {
      newKey = ReactElement(
        oldElement.type,
        newKey,
        void 0,
        void 0,
        oldElement._owner,
        oldElement.props,
        oldElement._debugStack,
        oldElement._debugTask
      );
      oldElement._store &&
        (newKey._store.validated = oldElement._store.validated);
      return newKey;
    }
    function isValidElement(object) {
      return (
        "object" === typeof object &&
        null !== object &&
        object.$$typeof === REACT_ELEMENT_TYPE
      );
    }
    function escape(key) {
      var escaperLookup = { "=": "=0", ":": "=2" };
      return (
        "$" +
        key.replace(/[=:]/g, function (match) {
          return escaperLookup[match];
        })
      );
    }
    function getElementKey(element, index) {
      return "object" === typeof element &&
        null !== element &&
        null != element.key
        ? (checkKeyStringCoercion(element.key), escape("" + element.key))
        : index.toString(36);
    }
    function noop$1() {}
    function resolveThenable(thenable) {
      switch (thenable.status) {
        case "fulfilled":
          return thenable.value;
        case "rejected":
          throw thenable.reason;
        default:
          switch (
            ("string" === typeof thenable.status
              ? thenable.then(noop$1, noop$1)
              : ((thenable.status = "pending"),
                thenable.then(
                  function (fulfilledValue) {
                    "pending" === thenable.status &&
                      ((thenable.status = "fulfilled"),
                      (thenable.value = fulfilledValue));
                  },
                  function (error) {
                    "pending" === thenable.status &&
                      ((thenable.status = "rejected"),
                      (thenable.reason = error));
                  }
                )),
            thenable.status)
          ) {
            case "fulfilled":
              return thenable.value;
            case "rejected":
              throw thenable.reason;
          }
      }
      throw thenable;
    }
    function mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {
      var type = typeof children;
      if ("undefined" === type || "boolean" === type) children = null;
      var invokeCallback = !1;
      if (null === children) invokeCallback = !0;
      else
        switch (type) {
          case "bigint":
          case "string":
          case "number":
            invokeCallback = !0;
            break;
          case "object":
            switch (children.$$typeof) {
              case REACT_ELEMENT_TYPE:
              case REACT_PORTAL_TYPE:
                invokeCallback = !0;
                break;
              case REACT_LAZY_TYPE:
                return (
                  (invokeCallback = children._init),
                  mapIntoArray(
                    invokeCallback(children._payload),
                    array,
                    escapedPrefix,
                    nameSoFar,
                    callback
                  )
                );
            }
        }
      if (invokeCallback) {
        invokeCallback = children;
        callback = callback(invokeCallback);
        var childKey =
          "" === nameSoFar ? "." + getElementKey(invokeCallback, 0) : nameSoFar;
        isArrayImpl(callback)
          ? ((escapedPrefix = ""),
            null != childKey &&
              (escapedPrefix =
                childKey.replace(userProvidedKeyEscapeRegex, "$&/") + "/"),
            mapIntoArray(callback, array, escapedPrefix, "", function (c) {
              return c;
            }))
          : null != callback &&
            (isValidElement(callback) &&
              (null != callback.key &&
                ((invokeCallback && invokeCallback.key === callback.key) ||
                  checkKeyStringCoercion(callback.key)),
              (escapedPrefix = cloneAndReplaceKey(
                callback,
                escapedPrefix +
                  (null == callback.key ||
                  (invokeCallback && invokeCallback.key === callback.key)
                    ? ""
                    : ("" + callback.key).replace(
                        userProvidedKeyEscapeRegex,
                        "$&/"
                      ) + "/") +
                  childKey
              )),
              "" !== nameSoFar &&
                null != invokeCallback &&
                isValidElement(invokeCallback) &&
                null == invokeCallback.key &&
                invokeCallback._store &&
                !invokeCallback._store.validated &&
                (escapedPrefix._store.validated = 2),
              (callback = escapedPrefix)),
            array.push(callback));
        return 1;
      }
      invokeCallback = 0;
      childKey = "" === nameSoFar ? "." : nameSoFar + ":";
      if (isArrayImpl(children))
        for (var i = 0; i < children.length; i++)
          (nameSoFar = children[i]),
            (type = childKey + getElementKey(nameSoFar, i)),
            (invokeCallback += mapIntoArray(
              nameSoFar,
              array,
              escapedPrefix,
              type,
              callback
            ));
      else if (((i = getIteratorFn(children)), "function" === typeof i))
        for (
          i === children.entries &&
            (didWarnAboutMaps ||
              console.warn(
                "Using Maps as children is not supported. Use an array of keyed ReactElements instead."
              ),
            (didWarnAboutMaps = !0)),
            children = i.call(children),
            i = 0;
          !(nameSoFar = children.next()).done;

        )
          (nameSoFar = nameSoFar.value),
            (type = childKey + getElementKey(nameSoFar, i++)),
            (invokeCallback += mapIntoArray(
              nameSoFar,
              array,
              escapedPrefix,
              type,
              callback
            ));
      else if ("object" === type) {
        if ("function" === typeof children.then)
          return mapIntoArray(
            resolveThenable(children),
            array,
            escapedPrefix,
            nameSoFar,
            callback
          );
        array = String(children);
        throw Error(
          "Objects are not valid as a React child (found: " +
            ("[object Object]" === array
              ? "object with keys {" + Object.keys(children).join(", ") + "}"
              : array) +
            "). If you meant to render a collection of children, use an array instead."
        );
      }
      return invokeCallback;
    }
    function mapChildren(children, func, context) {
      if (null == children) return children;
      var result = [],
        count = 0;
      mapIntoArray(children, result, "", "", function (child) {
        return func.call(context, child, count++);
      });
      return result;
    }
    function lazyInitializer(payload) {
      if (-1 === payload._status) {
        var ctor = payload._result;
        ctor = ctor();
        ctor.then(
          function (moduleObject) {
            if (0 === payload._status || -1 === payload._status)
              (payload._status = 1), (payload._result = moduleObject);
          },
          function (error) {
            if (0 === payload._status || -1 === payload._status)
              (payload._status = 2), (payload._result = error);
          }
        );
        -1 === payload._status &&
          ((payload._status = 0), (payload._result = ctor));
      }
      if (1 === payload._status)
        return (
          (ctor = payload._result),
          void 0 === ctor &&
            console.error(
              "lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))\n\nDid you accidentally put curly braces around the import?",
              ctor
            ),
          "default" in ctor ||
            console.error(
              "lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",
              ctor
            ),
          ctor.default
        );
      throw payload._result;
    }
    function resolveDispatcher() {
      var dispatcher = ReactSharedInternals.H;
      null === dispatcher &&
        console.error(
          "Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem."
        );
      return dispatcher;
    }
    function noop() {}
    function enqueueTask(task) {
      if (null === enqueueTaskImpl)
        try {
          var requireString = ("require" + Math.random()).slice(0, 7);
          enqueueTaskImpl = (module && module[requireString]).call(
            module,
            "timers"
          ).setImmediate;
        } catch (_err) {
          enqueueTaskImpl = function (callback) {
            !1 === didWarnAboutMessageChannel &&
              ((didWarnAboutMessageChannel = !0),
              "undefined" === typeof MessageChannel &&
                console.error(
                  "This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."
                ));
            var channel = new MessageChannel();
            channel.port1.onmessage = callback;
            channel.port2.postMessage(void 0);
          };
        }
      return enqueueTaskImpl(task);
    }
    function aggregateErrors(errors) {
      return 1 < errors.length && "function" === typeof AggregateError
        ? new AggregateError(errors)
        : errors[0];
    }
    function popActScope(prevActQueue, prevActScopeDepth) {
      prevActScopeDepth !== actScopeDepth - 1 &&
        console.error(
          "You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "
        );
      actScopeDepth = prevActScopeDepth;
    }
    function recursivelyFlushAsyncActWork(returnValue, resolve, reject) {
      var queue = ReactSharedInternals.actQueue;
      if (null !== queue)
        if (0 !== queue.length)
          try {
            flushActQueue(queue);
            enqueueTask(function () {
              return recursivelyFlushAsyncActWork(returnValue, resolve, reject);
            });
            return;
          } catch (error) {
            ReactSharedInternals.thrownErrors.push(error);
          }
        else ReactSharedInternals.actQueue = null;
      0 < ReactSharedInternals.thrownErrors.length
        ? ((queue = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          reject(queue))
        : resolve(returnValue);
    }
    function flushActQueue(queue) {
      if (!isFlushing) {
        isFlushing = !0;
        var i = 0;
        try {
          for (; i < queue.length; i++) {
            var callback = queue[i];
            do {
              ReactSharedInternals.didUsePromise = !1;
              var continuation = callback(!1);
              if (null !== continuation) {
                if (ReactSharedInternals.didUsePromise) {
                  queue[i] = callback;
                  queue.splice(0, i);
                  return;
                }
                callback = continuation;
              } else break;
            } while (1);
          }
          queue.length = 0;
        } catch (error) {
          queue.splice(0, i + 1), ReactSharedInternals.thrownErrors.push(error);
        } finally {
          isFlushing = !1;
        }
      }
    }
    "undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
      "function" ===
        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&
      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());
    var REACT_ELEMENT_TYPE = Symbol.for("react.transitional.element"),
      REACT_PORTAL_TYPE = Symbol.for("react.portal"),
      REACT_FRAGMENT_TYPE = Symbol.for("react.fragment"),
      REACT_STRICT_MODE_TYPE = Symbol.for("react.strict_mode"),
      REACT_PROFILER_TYPE = Symbol.for("react.profiler");
    Symbol.for("react.provider");
    var REACT_CONSUMER_TYPE = Symbol.for("react.consumer"),
      REACT_CONTEXT_TYPE = Symbol.for("react.context"),
      REACT_FORWARD_REF_TYPE = Symbol.for("react.forward_ref"),
      REACT_SUSPENSE_TYPE = Symbol.for("react.suspense"),
      REACT_SUSPENSE_LIST_TYPE = Symbol.for("react.suspense_list"),
      REACT_MEMO_TYPE = Symbol.for("react.memo"),
      REACT_LAZY_TYPE = Symbol.for("react.lazy"),
      REACT_ACTIVITY_TYPE = Symbol.for("react.activity"),
      MAYBE_ITERATOR_SYMBOL = Symbol.iterator,
      didWarnStateUpdateForUnmountedComponent = {},
      ReactNoopUpdateQueue = {
        isMounted: function () {
          return !1;
        },
        enqueueForceUpdate: function (publicInstance) {
          warnNoop(publicInstance, "forceUpdate");
        },
        enqueueReplaceState: function (publicInstance) {
          warnNoop(publicInstance, "replaceState");
        },
        enqueueSetState: function (publicInstance) {
          warnNoop(publicInstance, "setState");
        }
      },
      assign = Object.assign,
      emptyObject = {};
    Object.freeze(emptyObject);
    Component.prototype.isReactComponent = {};
    Component.prototype.setState = function (partialState, callback) {
      if (
        "object" !== typeof partialState &&
        "function" !== typeof partialState &&
        null != partialState
      )
        throw Error(
          "takes an object of state variables to update or a function which returns an object of state variables."
        );
      this.updater.enqueueSetState(this, partialState, callback, "setState");
    };
    Component.prototype.forceUpdate = function (callback) {
      this.updater.enqueueForceUpdate(this, callback, "forceUpdate");
    };
    var deprecatedAPIs = {
        isMounted: [
          "isMounted",
          "Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."
        ],
        replaceState: [
          "replaceState",
          "Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."
        ]
      },
      fnName;
    for (fnName in deprecatedAPIs)
      deprecatedAPIs.hasOwnProperty(fnName) &&
        defineDeprecationWarning(fnName, deprecatedAPIs[fnName]);
    ComponentDummy.prototype = Component.prototype;
    deprecatedAPIs = PureComponent.prototype = new ComponentDummy();
    deprecatedAPIs.constructor = PureComponent;
    assign(deprecatedAPIs, Component.prototype);
    deprecatedAPIs.isPureReactComponent = !0;
    var isArrayImpl = Array.isArray,
      REACT_CLIENT_REFERENCE = Symbol.for("react.client.reference"),
      ReactSharedInternals = {
        H: null,
        A: null,
        T: null,
        S: null,
        V: null,
        actQueue: null,
        isBatchingLegacy: !1,
        didScheduleLegacyUpdate: !1,
        didUsePromise: !1,
        thrownErrors: [],
        getCurrentStack: null,
        recentlyCreatedOwnerStacks: 0
      },
      hasOwnProperty = Object.prototype.hasOwnProperty,
      createTask = console.createTask
        ? console.createTask
        : function () {
            return null;
          };
    deprecatedAPIs = {
      react_stack_bottom_frame: function (callStackForError) {
        return callStackForError();
      }
    };
    var specialPropKeyWarningShown, didWarnAboutOldJSXRuntime;
    var didWarnAboutElementRef = {};
    var unknownOwnerDebugStack = deprecatedAPIs.react_stack_bottom_frame.bind(
      deprecatedAPIs,
      UnknownOwner
    )();
    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));
    var didWarnAboutMaps = !1,
      userProvidedKeyEscapeRegex = /\/+/g,
      reportGlobalError =
        "function" === typeof reportError
          ? reportError
          : function (error) {
              if (
                "object" === typeof window &&
                "function" === typeof window.ErrorEvent
              ) {
                var event = new window.ErrorEvent("error", {
                  bubbles: !0,
                  cancelable: !0,
                  message:
                    "object" === typeof error &&
                    null !== error &&
                    "string" === typeof error.message
                      ? String(error.message)
                      : String(error),
                  error: error
                });
                if (!window.dispatchEvent(event)) return;
              } else if (
                "object" === typeof process &&
                "function" === typeof process.emit
              ) {
                process.emit("uncaughtException", error);
                return;
              }
              console.error(error);
            },
      didWarnAboutMessageChannel = !1,
      enqueueTaskImpl = null,
      actScopeDepth = 0,
      didWarnNoAwaitAct = !1,
      isFlushing = !1,
      queueSeveralMicrotasks =
        "function" === typeof queueMicrotask
          ? function (callback) {
              queueMicrotask(function () {
                return queueMicrotask(callback);
              });
            }
          : enqueueTask;
    deprecatedAPIs = Object.freeze({
      __proto__: null,
      c: function (size) {
        return resolveDispatcher().useMemoCache(size);
      }
    });
    exports.Children = {
      map: mapChildren,
      forEach: function (children, forEachFunc, forEachContext) {
        mapChildren(
          children,
          function () {
            forEachFunc.apply(this, arguments);
          },
          forEachContext
        );
      },
      count: function (children) {
        var n = 0;
        mapChildren(children, function () {
          n++;
        });
        return n;
      },
      toArray: function (children) {
        return (
          mapChildren(children, function (child) {
            return child;
          }) || []
        );
      },
      only: function (children) {
        if (!isValidElement(children))
          throw Error(
            "React.Children.only expected to receive a single React element child."
          );
        return children;
      }
    };
    exports.Component = Component;
    exports.Fragment = REACT_FRAGMENT_TYPE;
    exports.Profiler = REACT_PROFILER_TYPE;
    exports.PureComponent = PureComponent;
    exports.StrictMode = REACT_STRICT_MODE_TYPE;
    exports.Suspense = REACT_SUSPENSE_TYPE;
    exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =
      ReactSharedInternals;
    exports.__COMPILER_RUNTIME = deprecatedAPIs;
    exports.act = function (callback) {
      var prevActQueue = ReactSharedInternals.actQueue,
        prevActScopeDepth = actScopeDepth;
      actScopeDepth++;
      var queue = (ReactSharedInternals.actQueue =
          null !== prevActQueue ? prevActQueue : []),
        didAwaitActCall = !1;
      try {
        var result = callback();
      } catch (error) {
        ReactSharedInternals.thrownErrors.push(error);
      }
      if (0 < ReactSharedInternals.thrownErrors.length)
        throw (
          (popActScope(prevActQueue, prevActScopeDepth),
          (callback = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          callback)
        );
      if (
        null !== result &&
        "object" === typeof result &&
        "function" === typeof result.then
      ) {
        var thenable = result;
        queueSeveralMicrotasks(function () {
          didAwaitActCall ||
            didWarnNoAwaitAct ||
            ((didWarnNoAwaitAct = !0),
            console.error(
              "You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"
            ));
        });
        return {
          then: function (resolve, reject) {
            didAwaitActCall = !0;
            thenable.then(
              function (returnValue) {
                popActScope(prevActQueue, prevActScopeDepth);
                if (0 === prevActScopeDepth) {
                  try {
                    flushActQueue(queue),
                      enqueueTask(function () {
                        return recursivelyFlushAsyncActWork(
                          returnValue,
                          resolve,
                          reject
                        );
                      });
                  } catch (error$0) {
                    ReactSharedInternals.thrownErrors.push(error$0);
                  }
                  if (0 < ReactSharedInternals.thrownErrors.length) {
                    var _thrownError = aggregateErrors(
                      ReactSharedInternals.thrownErrors
                    );
                    ReactSharedInternals.thrownErrors.length = 0;
                    reject(_thrownError);
                  }
                } else resolve(returnValue);
              },
              function (error) {
                popActScope(prevActQueue, prevActScopeDepth);
                0 < ReactSharedInternals.thrownErrors.length
                  ? ((error = aggregateErrors(
                      ReactSharedInternals.thrownErrors
                    )),
                    (ReactSharedInternals.thrownErrors.length = 0),
                    reject(error))
                  : reject(error);
              }
            );
          }
        };
      }
      var returnValue$jscomp$0 = result;
      popActScope(prevActQueue, prevActScopeDepth);
      0 === prevActScopeDepth &&
        (flushActQueue(queue),
        0 !== queue.length &&
          queueSeveralMicrotasks(function () {
            didAwaitActCall ||
              didWarnNoAwaitAct ||
              ((didWarnNoAwaitAct = !0),
              console.error(
                "A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:\n\nawait act(() => ...)"
              ));
          }),
        (ReactSharedInternals.actQueue = null));
      if (0 < ReactSharedInternals.thrownErrors.length)
        throw (
          ((callback = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          callback)
        );
      return {
        then: function (resolve, reject) {
          didAwaitActCall = !0;
          0 === prevActScopeDepth
            ? ((ReactSharedInternals.actQueue = queue),
              enqueueTask(function () {
                return recursivelyFlushAsyncActWork(
                  returnValue$jscomp$0,
                  resolve,
                  reject
                );
              }))
            : resolve(returnValue$jscomp$0);
        }
      };
    };
    exports.cache = function (fn) {
      return function () {
        return fn.apply(null, arguments);
      };
    };
    exports.captureOwnerStack = function () {
      var getCurrentStack = ReactSharedInternals.getCurrentStack;
      return null === getCurrentStack ? null : getCurrentStack();
    };
    exports.cloneElement = function (element, config, children) {
      if (null === element || void 0 === element)
        throw Error(
          "The argument must be a React element, but you passed " +
            element +
            "."
        );
      var props = assign({}, element.props),
        key = element.key,
        owner = element._owner;
      if (null != config) {
        var JSCompiler_inline_result;
        a: {
          if (
            hasOwnProperty.call(config, "ref") &&
            (JSCompiler_inline_result = Object.getOwnPropertyDescriptor(
              config,
              "ref"
            ).get) &&
            JSCompiler_inline_result.isReactWarning
          ) {
            JSCompiler_inline_result = !1;
            break a;
          }
          JSCompiler_inline_result = void 0 !== config.ref;
        }
        JSCompiler_inline_result && (owner = getOwner());
        hasValidKey(config) &&
          (checkKeyStringCoercion(config.key), (key = "" + config.key));
        for (propName in config)
          !hasOwnProperty.call(config, propName) ||
            "key" === propName ||
            "__self" === propName ||
            "__source" === propName ||
            ("ref" === propName && void 0 === config.ref) ||
            (props[propName] = config[propName]);
      }
      var propName = arguments.length - 2;
      if (1 === propName) props.children = children;
      else if (1 < propName) {
        JSCompiler_inline_result = Array(propName);
        for (var i = 0; i < propName; i++)
          JSCompiler_inline_result[i] = arguments[i + 2];
        props.children = JSCompiler_inline_result;
      }
      props = ReactElement(
        element.type,
        key,
        void 0,
        void 0,
        owner,
        props,
        element._debugStack,
        element._debugTask
      );
      for (key = 2; key < arguments.length; key++)
        (owner = arguments[key]),
          isValidElement(owner) && owner._store && (owner._store.validated = 1);
      return props;
    };
    exports.createContext = function (defaultValue) {
      defaultValue = {
        $$typeof: REACT_CONTEXT_TYPE,
        _currentValue: defaultValue,
        _currentValue2: defaultValue,
        _threadCount: 0,
        Provider: null,
        Consumer: null
      };
      defaultValue.Provider = defaultValue;
      defaultValue.Consumer = {
        $$typeof: REACT_CONSUMER_TYPE,
        _context: defaultValue
      };
      defaultValue._currentRenderer = null;
      defaultValue._currentRenderer2 = null;
      return defaultValue;
    };
    exports.createElement = function (type, config, children) {
      for (var i = 2; i < arguments.length; i++) {
        var node = arguments[i];
        isValidElement(node) && node._store && (node._store.validated = 1);
      }
      i = {};
      node = null;
      if (null != config)
        for (propName in (didWarnAboutOldJSXRuntime ||
          !("__self" in config) ||
          "key" in config ||
          ((didWarnAboutOldJSXRuntime = !0),
          console.warn(
            "Your app (or one of its dependencies) is using an outdated JSX transform. Update to the modern JSX transform for faster performance: https://react.dev/link/new-jsx-transform"
          )),
        hasValidKey(config) &&
          (checkKeyStringCoercion(config.key), (node = "" + config.key)),
        config))
          hasOwnProperty.call(config, propName) &&
            "key" !== propName &&
            "__self" !== propName &&
            "__source" !== propName &&
            (i[propName] = config[propName]);
      var childrenLength = arguments.length - 2;
      if (1 === childrenLength) i.children = children;
      else if (1 < childrenLength) {
        for (
          var childArray = Array(childrenLength), _i = 0;
          _i < childrenLength;
          _i++
        )
          childArray[_i] = arguments[_i + 2];
        Object.freeze && Object.freeze(childArray);
        i.children = childArray;
      }
      if (type && type.defaultProps)
        for (propName in ((childrenLength = type.defaultProps), childrenLength))
          void 0 === i[propName] && (i[propName] = childrenLength[propName]);
      node &&
        defineKeyPropWarningGetter(
          i,
          "function" === typeof type
            ? type.displayName || type.name || "Unknown"
            : type
        );
      var propName = 1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;
      return ReactElement(
        type,
        node,
        void 0,
        void 0,
        getOwner(),
        i,
        propName ? Error("react-stack-top-frame") : unknownOwnerDebugStack,
        propName ? createTask(getTaskName(type)) : unknownOwnerDebugTask
      );
    };
    exports.createRef = function () {
      var refObject = { current: null };
      Object.seal(refObject);
      return refObject;
    };
    exports.forwardRef = function (render) {
      null != render && render.$$typeof === REACT_MEMO_TYPE
        ? console.error(
            "forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."
          )
        : "function" !== typeof render
          ? console.error(
              "forwardRef requires a render function but was given %s.",
              null === render ? "null" : typeof render
            )
          : 0 !== render.length &&
            2 !== render.length &&
            console.error(
              "forwardRef render functions accept exactly two parameters: props and ref. %s",
              1 === render.length
                ? "Did you forget to use the ref parameter?"
                : "Any additional parameter will be undefined."
            );
      null != render &&
        null != render.defaultProps &&
        console.error(
          "forwardRef render functions do not support defaultProps. Did you accidentally pass a React component?"
        );
      var elementType = { $$typeof: REACT_FORWARD_REF_TYPE, render: render },
        ownName;
      Object.defineProperty(elementType, "displayName", {
        enumerable: !1,
        configurable: !0,
        get: function () {
          return ownName;
        },
        set: function (name) {
          ownName = name;
          render.name ||
            render.displayName ||
            (Object.defineProperty(render, "name", { value: name }),
            (render.displayName = name));
        }
      });
      return elementType;
    };
    exports.isValidElement = isValidElement;
    exports.lazy = function (ctor) {
      return {
        $$typeof: REACT_LAZY_TYPE,
        _payload: { _status: -1, _result: ctor },
        _init: lazyInitializer
      };
    };
    exports.memo = function (type, compare) {
      null == type &&
        console.error(
          "memo: The first argument must be a component. Instead received: %s",
          null === type ? "null" : typeof type
        );
      compare = {
        $$typeof: REACT_MEMO_TYPE,
        type: type,
        compare: void 0 === compare ? null : compare
      };
      var ownName;
      Object.defineProperty(compare, "displayName", {
        enumerable: !1,
        configurable: !0,
        get: function () {
          return ownName;
        },
        set: function (name) {
          ownName = name;
          type.name ||
            type.displayName ||
            (Object.defineProperty(type, "name", { value: name }),
            (type.displayName = name));
        }
      });
      return compare;
    };
    exports.startTransition = function (scope) {
      var prevTransition = ReactSharedInternals.T,
        currentTransition = {};
      ReactSharedInternals.T = currentTransition;
      currentTransition._updatedFibers = new Set();
      try {
        var returnValue = scope(),
          onStartTransitionFinish = ReactSharedInternals.S;
        null !== onStartTransitionFinish &&
          onStartTransitionFinish(currentTransition, returnValue);
        "object" === typeof returnValue &&
          null !== returnValue &&
          "function" === typeof returnValue.then &&
          returnValue.then(noop, reportGlobalError);
      } catch (error) {
        reportGlobalError(error);
      } finally {
        null === prevTransition &&
          currentTransition._updatedFibers &&
          ((scope = currentTransition._updatedFibers.size),
          currentTransition._updatedFibers.clear(),
          10 < scope &&
            console.warn(
              "Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."
            )),
          (ReactSharedInternals.T = prevTransition);
      }
    };
    exports.unstable_useCacheRefresh = function () {
      return resolveDispatcher().useCacheRefresh();
    };
    exports.use = function (usable) {
      return resolveDispatcher().use(usable);
    };
    exports.useActionState = function (action, initialState, permalink) {
      return resolveDispatcher().useActionState(
        action,
        initialState,
        permalink
      );
    };
    exports.useCallback = function (callback, deps) {
      return resolveDispatcher().useCallback(callback, deps);
    };
    exports.useContext = function (Context) {
      var dispatcher = resolveDispatcher();
      Context.$$typeof === REACT_CONSUMER_TYPE &&
        console.error(
          "Calling useContext(Context.Consumer) is not supported and will cause bugs. Did you mean to call useContext(Context) instead?"
        );
      return dispatcher.useContext(Context);
    };
    exports.useDebugValue = function (value, formatterFn) {
      return resolveDispatcher().useDebugValue(value, formatterFn);
    };
    exports.useDeferredValue = function (value, initialValue) {
      return resolveDispatcher().useDeferredValue(value, initialValue);
    };
    exports.useEffect = function (create, createDeps, update) {
      null == create &&
        console.warn(
          "React Hook useEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      var dispatcher = resolveDispatcher();
      if ("function" === typeof update)
        throw Error(
          "useEffect CRUD overload is not enabled in this build of React."
        );
      return dispatcher.useEffect(create, createDeps);
    };
    exports.useId = function () {
      return resolveDispatcher().useId();
    };
    exports.useImperativeHandle = function (ref, create, deps) {
      return resolveDispatcher().useImperativeHandle(ref, create, deps);
    };
    exports.useInsertionEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useInsertionEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useInsertionEffect(create, deps);
    };
    exports.useLayoutEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useLayoutEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useLayoutEffect(create, deps);
    };
    exports.useMemo = function (create, deps) {
      return resolveDispatcher().useMemo(create, deps);
    };
    exports.useOptimistic = function (passthrough, reducer) {
      return resolveDispatcher().useOptimistic(passthrough, reducer);
    };
    exports.useReducer = function (reducer, initialArg, init) {
      return resolveDispatcher().useReducer(reducer, initialArg, init);
    };
    exports.useRef = function (initialValue) {
      return resolveDispatcher().useRef(initialValue);
    };
    exports.useState = function (initialState) {
      return resolveDispatcher().useState(initialState);
    };
    exports.useSyncExternalStore = function (
      subscribe,
      getSnapshot,
      getServerSnapshot
    ) {
      return resolveDispatcher().useSyncExternalStore(
        subscribe,
        getSnapshot,
        getServerSnapshot
      );
    };
    exports.useTransition = function () {
      return resolveDispatcher().useTransition();
    };
    exports.version = "19.1.1";
    "undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
      "function" ===
        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&
      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());
  })();


/***/ }),

/***/ "../../node_modules/react/index.js":
/*!*****************************************!*\
  !*** ../../node_modules/react/index.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



if (false) // removed by dead control flow
{} else {
  module.exports = __webpack_require__(/*! ./cjs/react.development.js */ "../../node_modules/react/cjs/react.development.js");
}


/***/ }),

/***/ "../../node_modules/title-case/dist.es2015/index.js":
/*!**********************************************************!*\
  !*** ../../node_modules/title-case/dist.es2015/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   titleCase: () => (/* binding */ titleCase)
/* harmony export */ });
var SMALL_WORDS = /\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\.?|versus|via|when|with|without|yet)\b/i;
var TOKENS = /[^\s:–—-]+|./g;
var WHITESPACE = /\s/;
var IS_MANUAL_CASE = /.(?=[A-Z]|\..)/;
var ALPHANUMERIC_PATTERN = /[A-Za-z0-9\u00C0-\u00FF]/;
function titleCase(input) {
    var result = "";
    var m;
    // tslint:disable-next-line
    while ((m = TOKENS.exec(input)) !== null) {
        var token = m[0], index = m.index;
        if (
        // Ignore already capitalized words.
        !IS_MANUAL_CASE.test(token) &&
            // Ignore small words except at beginning or end.
            (!SMALL_WORDS.test(token) ||
                index === 0 ||
                index + token.length === input.length) &&
            // Ignore URLs.
            (input.charAt(index + token.length) !== ":" ||
                WHITESPACE.test(input.charAt(index + token.length + 1)))) {
            // Find and uppercase first word character, skips over *modifiers*.
            result += token.replace(ALPHANUMERIC_PATTERN, function (m) { return m.toUpperCase(); });
            continue;
        }
        result += token;
    }
    return result;
}
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/void-elements/index.js":
/*!*************************************************!*\
  !*** ../../node_modules/void-elements/index.js ***!
  \*************************************************/
/***/ ((module) => {

/**
 * This file automatically generated from `pre-publish.js`.
 * Do not manually edit.
 */

module.exports = {
  "area": true,
  "base": true,
  "br": true,
  "col": true,
  "embed": true,
  "hr": true,
  "img": true,
  "input": true,
  "link": true,
  "meta": true,
  "param": true,
  "source": true,
  "track": true,
  "wbr": true
};


/***/ }),

/***/ "./client/src/ms365-integration.ts":
/*!*****************************************!*\
  !*** ./client/src/ms365-integration.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Microsoft365Integration: () => (/* binding */ Microsoft365Integration)
/* harmony export */ });
/* harmony import */ var _openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/microsoft365 */ "../../node_modules/@openfin/microsoft365/openfin.ms365.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openfin/workspace */ "../../node_modules/@openfin/workspace/index.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__);


/**
 * Implement the integration provider for microsoft 365 results.
 */
class Microsoft365Integration {
    /**
     * Create a new instance of Microsoft365Provider.
     */
    constructor() {
        this._profileImageCache = {};
        this._teamsAndChannelsCache = [];
        this._cacheCounter = 0;
    }
    /**
     * Initialize the module.
     * @param definition The definition of the module from configuration include custom options.
     * @param definition.id The id to use when the integration is used as a module.
     * @param definition.title The title to use when the integration is used as a module.
     * @param definition.data The settings for the module.
     * @param loggerCreator For logging entries.
     * @param helpers Helper methods for the module to interact with the application core.
     * @returns Nothing.
     */
    async initialize(definition, loggerCreator, helpers) {
        this._definition = definition;
        this._settings = definition.data;
        this._integrationHelpers = helpers;
        this._definition.title ??= "Microsoft 365";
        this._settings.graphExplorerPrefix ??= "ms";
        this._logger = loggerCreator(this._definition.title);
        this._logger.info(`Initializing ${this._definition.title}`);
        if (!this._settings.clientId) {
            this._logger.error("Configuration is missing clientId");
            return;
        }
        if (!this._settings.tenantId) {
            this._logger.error("Configuration is missing tenantId");
            return;
        }
        await this.connectToMS365();
        // For themed icons we fetch the svg content so that we can replace colors
        // when they are used, instead of linking directly to the source
        const themedIcons = [
            "calendar",
            "call",
            "channel",
            "chat",
            "contact",
            "email",
            "share",
            "team",
            "file",
            "folder"
        ];
        for (const themedIcon of themedIcons) {
            const response = await fetch(this._settings.images[themedIcon]);
            const svg = await response.text();
            this._settings.images[themedIcon] = this.svgToInline(svg);
        }
    }
    /**
     * The module is being deregistered.
     * @returns Nothing.
     */
    async closedown() {
        if (this._ms365Connection) {
            this._logger?.info("Disconnecting from MS Graph API");
            await this._ms365Connection.disconnect();
            this._ms365Connection = undefined;
        }
        if (this._cacheIntervalId) {
            window.clearInterval(this._cacheIntervalId);
            this._cacheIntervalId = undefined;
        }
    }
    /**
     * Get a list of the static help entries.
     * @returns The list of help entries.
     */
    async getHelpSearchEntries() {
        if (this._integrationHelpers) {
            const additionalDescription = [];
            const additionalHelp = [];
            if (!this._settings?.disableGraphExplorer) {
                additionalDescription.push(`You can also specify a query as a graph explorer path and parameters, by using the /${this._settings?.graphExplorerPrefix} prefix`);
                additionalHelp.push(`/${this._settings?.graphExplorerPrefix}/me`, `/${this._settings?.graphExplorerPrefix}/users?$filter=startsWith(displayName,'john')`);
            }
            return [
                {
                    key: `${this._definition?.id}-help1`,
                    score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
                    title: this._definition?.title ?? "",
                    label: "Help",
                    icon: this._settings?.images.microsoft365,
                    actions: [],
                    data: {
                        providerId: this._definition?.id
                    },
                    template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
                    templateContent: await this._integrationHelpers?.templateHelpers.createHelp("Microsoft 365", [
                        "The Microsoft 365 integration can be used to search multiple data source in your platform.",
                        "Using a freeform query will search the content of Users, Contacts, E-mail, Events, Chat Messages, Teams and Channels"
                    ].concat(additionalDescription), additionalHelp)
                },
                {
                    key: `${this._definition?.id}-help2`,
                    score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
                    title: `${this._definition?.title} Recent`,
                    label: "Help",
                    icon: this._settings?.images.microsoft365,
                    actions: [],
                    data: {
                        providerId: this._definition?.id,
                        populateQuery: "/recent"
                    },
                    template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
                    templateContent: await this._integrationHelpers?.templateHelpers.createHelp("Microsoft 365 Recent", ["Running this command will retrieve the most recent files from MS365"], ["/recent"])
                }
            ];
        }
        return [];
    }
    /**
     * Get entries to show while the integration is searching.
     * @param query The query to search for.
     * @param lastResponse The last search response used for updating existing results.
     * @param options Options for the search query.
     * @param options.queryMinLength The minimum length before a query is actioned.
     * @param options.queryAgainst The fields in the data to query against.
     * @param options.isSuggestion Is the query from a suggestion.
     * @returns The list of results and new filters.
     */
    async getSearchResultsProgress(query, lastResponse, options) {
        if (!this._ms365Connection && this._integrationHelpers) {
            const themeClient = await this._integrationHelpers.getThemeClient();
            this._connectLastResponse = lastResponse;
            const results = [];
            if (this._connectionError) {
                const connectResult = await this.createConnectResult(this._integrationHelpers.templateHelpers, await themeClient.getPalette());
                if (connectResult) {
                    results.push(connectResult);
                }
            }
            return results;
        }
        const minLength = options?.queryMinLength ?? 3;
        return query.length >= minLength ? [this.createSearchingResult()] : [];
    }
    /**
     * Get a list of search results based on the query and filters.
     * @param query The query to search for.
     * @param filters The filters to apply.
     * @param lastResponse The last search response used for updating existing results.
     * @param options Options for the search query.
     * @param options.queryMinLength The minimum length of the query before showing results.
     * @param options.queryAgainst The field to search against.
     * @returns The list of results and new filters.
     */
    async getSearchResults(query, filters, lastResponse, options) {
        const isRecent = query === "/recent";
        const defaultFilters = isRecent
            ? ["File"]
            : ["User", "Contact", "Event", "Message", "Channel", "Team", "ChatMessage", "File"];
        const minLength = options?.queryMinLength ?? 3;
        if (this._ms365Connection && this._integrationHelpers) {
            const themeClient = await this._integrationHelpers.getThemeClient();
            const palette = await themeClient.getPalette();
            try {
                // If query starts with ms just do a passthrough to the graph API
                if (!this._settings?.disableGraphExplorer &&
                    query.startsWith(`/${this._settings?.graphExplorerPrefix}/`)) {
                    const path = query.replace(`/${this._settings?.graphExplorerPrefix}/`, "");
                    if (path.length > 0) {
                        const fullPath = `/v1.0/${path}`;
                        this._logger?.info("Graph API Request", fullPath);
                        const response = await this._ms365Connection.executeApiRequest(fullPath);
                        const jsonResult = await this.createGraphJsonResult(this._integrationHelpers.templateHelpers, palette, response);
                        lastResponse.respond([jsonResult]);
                    }
                }
                else if (isRecent || (query.length >= minLength && !query.startsWith("/"))) {
                    const ms365Filter = filters?.find((f) => f.id === Microsoft365Integration._MS365_FILTERS);
                    let includeOptions = [...defaultFilters];
                    if (ms365Filter?.options && Array.isArray(ms365Filter.options)) {
                        includeOptions = ms365Filter.options
                            .filter((o) => o.isSelected)
                            .map((o) => o.value);
                    }
                    const batchRequests = [];
                    if (includeOptions.includes("User")) {
                        const userSearchFields = [
                            "displayName",
                            "givenName",
                            "surname",
                            "department",
                            "jobTitle",
                            "mobilePhone"
                        ];
                        const userSearchQuery = userSearchFields.map((s) => `"${s}:${query}"`).join(" OR ");
                        batchRequests.push({
                            id: "User",
                            method: "GET",
                            url: `/users?$search=${encodeURIComponent(userSearchQuery)}&$top=10`,
                            headers: {
                                ConsistencyLevel: "eventual"
                            }
                        });
                    }
                    if (includeOptions.includes("Contact")) {
                        const contactSearchQuery = `"${query}"`;
                        batchRequests.push({
                            id: "Contact",
                            method: "GET",
                            url: `/me/contacts?$search=${encodeURIComponent(contactSearchQuery)}&$top=10`
                        });
                    }
                    if (includeOptions.includes("Message")) {
                        const messageSearchQuery = `"${query}"`;
                        batchRequests.push({
                            id: "Message",
                            method: "GET",
                            url: `/me/messages?$select=sender,subject,bodyPreview,receivedDateTime,webLink&$search=${encodeURIComponent(messageSearchQuery)}&$top=10`
                        });
                    }
                    if (includeOptions.includes("Event")) {
                        batchRequests.push({
                            id: "Event",
                            url: "/search/query",
                            method: "POST",
                            body: {
                                requests: [
                                    {
                                        entityTypes: ["event"],
                                        query: {
                                            queryString: query
                                        },
                                        from: 0,
                                        size: 10
                                    }
                                ]
                            },
                            headers: {
                                "Content-Type": "application/json"
                            }
                        });
                    }
                    if (includeOptions.includes("ChatMessage")) {
                        batchRequests.push({
                            id: "ChatMessage",
                            url: "/search/query",
                            method: "POST",
                            body: {
                                requests: [
                                    {
                                        entityTypes: ["chatMessage"],
                                        query: {
                                            queryString: query
                                        },
                                        from: 0,
                                        size: 10
                                    }
                                ]
                            },
                            headers: {
                                "Content-Type": "application/json"
                            }
                        });
                    }
                    if (includeOptions.includes("File")) {
                        const fileSearchQuery = `'${query}'`;
                        batchRequests.push({
                            id: "File",
                            url: isRecent
                                ? "/me/drive/recent"
                                : `/me/drive/root/search(q=${encodeURIComponent(fileSearchQuery)})?$top=10&$orderby=lastModifiedDateTime desc&$expand=thumbnails`,
                            method: "GET"
                        });
                    }
                    const homeResults = await this.sendBatchQuery(query, includeOptions, batchRequests);
                    if (includeOptions.includes("Team") || includeOptions.includes("Channel")) {
                        const lowerQuery = query.toLowerCase();
                        for (const teamAndChannels of this._teamsAndChannelsCache) {
                            if (includeOptions.includes("Team") &&
                                (teamAndChannels.team.displayName?.toLowerCase().includes(lowerQuery) ??
                                    teamAndChannels.team.description?.toLowerCase().includes(lowerQuery))) {
                                homeResults.push(await this.createLoadingResult(this._integrationHelpers.templateHelpers, palette, teamAndChannels.team, "displayName", "Team"));
                            }
                            if (includeOptions.includes("Channel")) {
                                for (const channel of teamAndChannels.channels) {
                                    if (channel.displayName?.toLowerCase().includes(lowerQuery) ??
                                        channel.description?.toLowerCase().includes(lowerQuery)) {
                                        homeResults.push(await this.createLoadingResult(this._integrationHelpers.templateHelpers, palette, {
                                            ...channel,
                                            team: teamAndChannels.team
                                        }, "displayName", "Channel"));
                                    }
                                }
                            }
                        }
                    }
                    lastResponse.respond(homeResults);
                    const resultTypes = new Set();
                    for (const searchResult of homeResults) {
                        if (searchResult.label) {
                            resultTypes.add(searchResult.label);
                        }
                    }
                    const newFilters = resultTypes.entries();
                    lastResponse.updateContext({
                        filters: [
                            {
                                id: Microsoft365Integration._MS365_FILTERS,
                                title: "Microsoft 365",
                                options: [...newFilters].map((f) => ({
                                    value: f[0],
                                    isSelected: true
                                }))
                            }
                        ]
                    });
                }
            }
            catch (err) {
                const message = err instanceof Error ? err.message : err;
                lastResponse.respond([
                    await this.createGraphJsonResult(this._integrationHelpers.templateHelpers, palette, {
                        status: 400,
                        data: message
                    })
                ]);
            }
        }
        lastResponse.revoke(`${this._definition?.id}-searching`);
        return {
            results: []
        };
    }
    /**
     * An entry has been selected.
     * @param result The dispatched result.
     * @param lastResponse The last response.
     * @returns True if the item was handled.
     */
    async itemSelection(result, lastResponse) {
        if (result.action.trigger === "focus-change") {
            if (result.data?.state === "loading" && this._ms365Connection && this._integrationHelpers) {
                const themeClient = await this._integrationHelpers.getThemeClient();
                const palette = await themeClient.getPalette();
                const templateHelpers = this._integrationHelpers.templateHelpers;
                const actionData = result.data;
                const objType = actionData.objType;
                const resultHandlers = {
                    User: async () => this.createUserResult(templateHelpers, palette, actionData.obj),
                    Contact: async () => this.createContactResult(templateHelpers, palette, actionData.obj),
                    Message: async () => this.createMessageResult(templateHelpers, palette, actionData.obj),
                    Event: async () => this.createEventResult(templateHelpers, palette, actionData.obj),
                    ChatMessage: async () => this.createChatMessageResult(templateHelpers, palette, actionData.obj),
                    Channel: async () => this.createChannelResult(templateHelpers, palette, actionData.obj),
                    Team: async () => this.createTeamResult(templateHelpers, palette, actionData.obj),
                    File: async () => this.createFileResult(templateHelpers, palette, actionData.obj)
                };
                const typeHandler = resultHandlers[objType];
                if (typeHandler) {
                    const res = await typeHandler();
                    if (res) {
                        lastResponse.respond([res]);
                    }
                }
            }
            return true;
        }
        else if (result.action.trigger === "user-action") {
            return this.handleAction(result.action.name, result.data, lastResponse);
        }
        return false;
    }
    /**
     * Connect to the graph API.
     */
    async connectToMS365() {
        try {
            if (!this._settings?.clientId || !this._settings?.tenantId || !this._settings?.redirectUri) {
                throw new Error("Configuration missing clientId, tenantId or redirectUri");
            }
            this._logger?.info("Connecting to MS Graph API", {
                clientId: this._settings.clientId,
                tenantId: this._settings.tenantId,
                redirectUri: this._settings.redirectUri
            });
            if (this._settings.enableLibLogging) {
                (0,_openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__.enableLogging)();
            }
            this._connectionError = undefined;
            this._ms365Connection = await (0,_openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__.connect)(this._settings.clientId, this._settings.tenantId, this._settings.redirectUri, this._settings.permissions);
            this._cacheIntervalId = window.setInterval(async () => this.updateCache(), 30000);
            window.setTimeout(async () => {
                await this.updateCache();
            }, 0);
            if (this._connectLastResponse) {
                this._connectLastResponse.revoke(`${this._definition?.id}-connect`);
                this._connectLastResponse = undefined;
            }
        }
        catch (err) {
            this._ms365Connection = undefined;
            this._connectionError = this.formatError(err);
            this._logger?.error("Connecting to MS Graph API failed", err);
            if (this._connectLastResponse && this._integrationHelpers) {
                const themeClient = await this._integrationHelpers.getThemeClient();
                this._connectLastResponse.respond([
                    await this.createConnectResult(this._integrationHelpers.templateHelpers, await themeClient.getPalette())
                ]);
            }
        }
    }
    /**
     * Handle an action from a home template.
     * @param actionName The name of the action.
     * @param actionData The data associated with the action.
     * @param lastResponse The last response in case we need to update the results.
     * @returns True if the action was handled.
     */
    async handleAction(actionName, actionData, lastResponse) {
        switch (actionName) {
            case Microsoft365Integration._ACTION_CONNECT:
                lastResponse.revoke(`${this._definition?.id}-connect`);
                await this.connectToMS365();
                return true;
            case Microsoft365Integration._ACTION_TEAMS_CALL:
                return this.handleTeamsCall(actionData);
            case Microsoft365Integration._ACTION_TEAMS_MEETING:
                return this.handleTeamsMeeting(actionData);
            case Microsoft365Integration._ACTION_TEAMS_CHAT:
                return this.handleTeamsChat(actionData);
            case Microsoft365Integration._ACTION_OUTLOOK_EMAIL:
                return this.handleOutlookMail(actionData);
            case Microsoft365Integration._ACTION_OUTLOOK_EVENT:
                return this.handleOutlookEvent(actionData);
            case Microsoft365Integration._ACTION_PHONE_CALL:
                return this.handlePhoneCall(actionData);
            case Microsoft365Integration._ACTION_SHARE_CONTACT:
                return this.handleShareContact(actionData);
            case Microsoft365Integration._ACTION_COPY:
                return this.handleCopy(actionData);
            default:
                if (actionName.startsWith(Microsoft365Integration._ACTION_OPEN)) {
                    return this.handleOpen(actionName, actionData);
                }
                return false;
        }
    }
    /**
     * Handle a teams call.
     * @param actionData The data for the call.
     * @returns True if it was handled.
     */
    async handleTeamsCall(actionData) {
        if (this._ms365Connection) {
            this._logger?.info("Teams Call", actionData.emails);
            const teamsConnection = new _openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__.TeamsConnection(this._ms365Connection);
            await teamsConnection.startCall(actionData.emails);
            return true;
        }
        this._logger?.error("No connection");
        return false;
    }
    /**
     * Handle a teams meeting.
     * @param actionData The data for the meeting.
     * @returns True if it was handled.
     */
    async handleTeamsMeeting(actionData) {
        if (this._ms365Connection && actionData.emails) {
            this._logger?.info("Teams Meeting", this._ms365Connection.currentUser.mail, actionData.emails);
            await fin.System.openUrlWithBrowser(`${Microsoft365Integration._TEAMS_PROTOCOL}/l/meeting/new?attendees=${this._ms365Connection.currentUser.mail},${actionData.emails.join(",")}`);
            return true;
        }
        this._logger?.error("No connection, or action emails", actionData.emails);
        return false;
    }
    /**
     * Handle a teams chat.
     * @param actionData The data for the chat.
     * @returns True if it was handled.
     */
    async handleTeamsChat(actionData) {
        if (this._ms365Connection?.currentUser?.mail) {
            this._logger?.info("Teams Chat", this._ms365Connection.currentUser.mail, actionData.teamId, actionData.channelId, actionData.emails);
            const teamsConnection = new _openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__.TeamsConnection(this._ms365Connection);
            if (actionData.chatId && actionData.messageId) {
                await fin.System.openUrlWithBrowser(`${Microsoft365Integration._TEAMS_PROTOCOL}/l/message/${actionData.chatId}/${actionData.messageId}`);
            }
            else if (actionData.teamId) {
                await teamsConnection.startChat({ teamId: actionData.teamId, channelId: actionData.channelId });
            }
            else if (actionData.emails) {
                await teamsConnection.startChat({
                    emailAddresses: [this._ms365Connection.currentUser.mail, ...actionData.emails]
                });
            }
            return true;
        }
        this._logger?.error("No connection user mail, or action emails", this._ms365Connection?.currentUser?.mail, actionData.emails);
        return false;
    }
    /**
     * Handle an outlook email.
     * @param actionData The data for the email.
     * @returns True if it was handled.
     */
    async handleOutlookMail(actionData) {
        if (this._integrationHelpers && this._ms365Connection && actionData.emails) {
            this._logger?.info("Open Outlook Mail", actionData.emails);
            const response = await this._ms365Connection.executeApiRequest("/v1.0/me/messages", "POST", {
                toRecipients: actionData.emails.map((e) => ({
                    emailAddress: {
                        address: e
                    }
                }))
            });
            if (response?.data?.webLink) {
                await this._integrationHelpers.launchView({ url: response.data.webLink });
                return true;
            }
            this._logger?.error("No webLink in response data", response.data);
        }
        return false;
    }
    /**
     * Handle an outlook event.
     * @param actionData The data for the event.
     * @returns True if it was handled.
     */
    async handleOutlookEvent(actionData) {
        if (this._integrationHelpers && this._ms365Connection && actionData.emails) {
            this._logger?.info("Open Outlook Event", actionData.emails);
            const response = await this._ms365Connection.executeApiRequest("/v1.0/me/events", "POST", {
                attendees: actionData.emails.map((e) => ({
                    emailAddress: {
                        address: e
                    }
                }))
            });
            if (response?.data?.webLink) {
                await this._integrationHelpers.launchView({ url: response.data.webLink });
                return true;
            }
            this._logger?.error("No webLink in response data", response.data);
        }
        return false;
    }
    /**
     * Handle a phone call.
     * @param actionData The data for the call.
     * @returns True if it was handled.
     */
    async handlePhoneCall(actionData) {
        this._logger?.info("Phone Call", actionData.phone);
        await fin.System.openUrlWithBrowser(`tel:${actionData.phone}`);
        return true;
    }
    /**
     * Handle open of a url.
     * @param actionName The name of the action.
     * @param actionData The data for the url opening.
     * @returns True if the url was opened.
     */
    async handleOpen(actionName, actionData) {
        const linkIndex = actionName.indexOf("_");
        const u = linkIndex < 0 ? actionData.url : actionData.urls?.[actionName.slice(linkIndex + 1)];
        if (u) {
            this._logger?.info("Open", u);
            if (u.startsWith(Microsoft365Integration._TEAMS_URL)) {
                await fin.System.openUrlWithBrowser(u.replace(Microsoft365Integration._TEAMS_URL, Microsoft365Integration._TEAMS_PROTOCOL));
            }
            else if (this._integrationHelpers) {
                await this._integrationHelpers.launchView({ url: u });
            }
            return true;
        }
        this._logger?.error(`Url not found in actionData, linkIndex ${linkIndex}`);
        return false;
    }
    /**
     * Handle sharing a contact.
     * @param actionData The data for the sharing.
     * @returns True if the url was opened.
     */
    async handleShareContact(actionData) {
        if (actionData?.emails?.[0]) {
            const fdc3Contact = {
                type: "fdc3.contact",
                name: actionData.name,
                id: {
                    email: actionData.emails[0]
                }
            };
            if (window.fdc3) {
                this._logger?.info("Share Contact", fdc3Contact);
                await window?.fdc3.raiseIntent("ViewContact", fdc3Contact);
                return true;
            }
            this._logger?.error("FDC3 API is not available so ViewContact cannot be raised.", fdc3Contact);
            return false;
        }
        this._logger?.error("No contact information to share", actionData.emails);
        return false;
    }
    /**
     * Handle copy to clipboard for JSON data.
     * @param actionData The data for copying.
     * @returns True if the url was opened.
     */
    async handleCopy(actionData) {
        this._logger?.info("Copy JSON", actionData.json);
        await fin.Clipboard.writeText({ data: JSON.stringify(actionData.json, undefined, "\t") });
        return true;
    }
    /**
     * Send a batch query to the MS365 graph.
     * @param query The query to send.
     * @param includeOptions The object types to include.
     * @param batchRequests The batch requests to send.
     * @returns The results to display in home.
     */
    async sendBatchQuery(query, includeOptions, batchRequests) {
        const homeResults = [];
        if (this._ms365Connection && this._integrationHelpers) {
            this._logger?.info("Graph API Batch Request", batchRequests);
            try {
                const batchResponses = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                    requests: batchRequests
                });
                if (batchResponses.data?.responses && Array.isArray(batchResponses.data.responses)) {
                    const themeClient = await this._integrationHelpers.getThemeClient();
                    const palette = await themeClient.getPalette();
                    for (const batchResponse of batchResponses.data.responses) {
                        if (batchResponse.status === 200) {
                            this._logger?.info(`${batchResponse.id} Response`, batchResponse.body);
                            await this.handleBatchQueryResponse(this._integrationHelpers.templateHelpers, palette, includeOptions, batchResponse, homeResults);
                        }
                        else {
                            this._logger?.error(`${batchResponse.id} Response Failed`, batchResponse.status, batchResponse.body);
                        }
                    }
                }
            }
            catch (err) {
                this._logger?.error("Batch Response Failed", err);
            }
        }
        else {
            this._logger?.error("No connection for sending batch request");
        }
        return homeResults;
    }
    /**
     * Handle the response from a batch query.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param includeOptions The object types that were included in the batch request.
     * @param batchResponse The response from the query.
     * @param homeResults The results for the responses.
     */
    async handleBatchQueryResponse(templateHelpers, palette, includeOptions, batchResponse, homeResults) {
        const type = batchResponse.id.split("-")[0];
        if (includeOptions.includes(type)) {
            if (type === "User") {
                const users = batchResponse.body.value;
                if (users?.length) {
                    for (const u of users) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, u, "displayName", "User"));
                    }
                }
            }
            else if (type === "Contact") {
                const contacts = batchResponse.body.value;
                if (contacts?.length) {
                    for (const c of contacts) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, c, "displayName", "Contact"));
                    }
                }
            }
            else if (type === "Message") {
                const messages = batchResponse.body.value;
                if (messages?.length) {
                    for (const msg of messages.filter((m) => m.subject && !m.subject.startsWith("Canceled") && !m.subject.startsWith("Undeliverable"))) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, msg, "subject", "Message"));
                    }
                }
            }
            else if (type === "Event") {
                const graphResponse = batchResponse.body;
                const searchResponse = graphResponse?.value?.[0];
                const events = searchResponse?.hitsContainers?.[0]?.hits;
                if (events?.length) {
                    for (const evt of events.filter((e) => e.resource.subject)) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, {
                            id: this.base64IdToUrl(evt.hitId),
                            ...evt.resource
                        }, "subject", "Event"));
                    }
                }
            }
            else if (type === "ChatMessage") {
                const graphResponse = batchResponse.body;
                const searchResponse = graphResponse?.value?.[0];
                const chatMessages = searchResponse?.hitsContainers?.[0]?.hits;
                if (chatMessages?.length) {
                    for (const cht of chatMessages) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, {
                            id: this.base64IdToUrl(cht.hitId),
                            ...cht.resource,
                            summary: cht.summary
                        }, "summary", "ChatMessage"));
                    }
                }
            }
            else if (type === "File") {
                const files = batchResponse.body.value;
                if (files?.length) {
                    for (const f of files) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, f, "name", "File"));
                    }
                }
            }
        }
    }
    /**
     * Create a result for home to allow reconnection.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @returns The connect template.
     */
    async createConnectResult(templateHelpers, palette) {
        const layout = await templateHelpers.createContainer("column", [
            await templateHelpers.createContainer("row", [await templateHelpers.createText("title", 12, { fontWeight: "bold" })], {
                borderBottom: `1px solid ${palette.background6}`,
                paddingBottom: "5px",
                gap: "5px"
            }),
            await templateHelpers.createText("description", 12),
            await templateHelpers.createText("error", 12, {
                fontFamily: "monospace",
                flex: 1
            }),
            await templateHelpers.createButton(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.ButtonStyle.Primary, "connect", Microsoft365Integration._ACTION_CONNECT)
        ], {
            padding: "10px",
            gap: "15px",
            flex: "1"
        });
        return {
            key: `${this._definition?.id}-connect`,
            score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
            title: this._definition?.title ?? "",
            label: "Connect",
            icon: this._settings?.images.microsoft365,
            actions: [
                {
                    name: Microsoft365Integration._ACTION_CONNECT,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout,
                data: {
                    title: `${this._definition?.title} Connection`,
                    description: `${this._definition?.title} failed to connect due to the following error`,
                    error: this._connectionError ?? "Unknown connection error",
                    connect: "Connect"
                }
            }
        };
    }
    /**
     * Create a result to show we are searching.
     * @returns Home template for searching.
     */
    createSearchingResult() {
        return {
            key: `${this._definition?.id}-searching`,
            score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
            title: "Searching ...",
            icon: this._settings?.images.microsoft365,
            actions: [],
            data: {
                providerId: this._definition?.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Loading,
            templateContent: ""
        };
    }
    /**
     * Create a home search result which display JSON.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param response The response to convert to the home template.
     * @returns The home template.
     */
    async createGraphJsonResult(templateHelpers, palette, response) {
        return {
            key: `${this._definition?.id}-rest`,
            score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
            title: "Graph Result",
            label: response.status === 200 ? "JSON" : "Error",
            icon: this._settings?.images.microsoft365,
            actions: [
                {
                    name: Microsoft365Integration._ACTION_COPY,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                json: response.data
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createText("json", 12, {
                    fontSize: "12px",
                    fontFamily: "monospace",
                    color: response.status === 200 ? palette.textDefault : "red",
                    whiteSpace: "pre",
                    overflow: "auto",
                    flex: 1
                }),
                data: {
                    json: JSON.stringify(response.data, undefined, "  ")
                }
            }
        };
    }
    /**
     * Create a result which show a loading template.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param obj The object to display loading for.
     * @param title The title of the item.
     * @param objType The type of the item.
     * @returns The home search result.
     */
    async createLoadingResult(templateHelpers, palette, obj, title, objType) {
        const icons = {
            User: "teams",
            Contact: "contact",
            Message: "email",
            Event: "calendar",
            Channel: "channel",
            Team: "team",
            ChatMessage: "chat",
            File: "file"
        };
        let label = objType.split(/(?=[A-Z])/).join(" ");
        let mimeIcon;
        if (objType === "File") {
            mimeIcon = this.getMimeIcon(obj, palette);
            if (this.driveItemIsFolder(obj)) {
                label = "Folder";
            }
            else if (this.driveItemIsImage(obj)) {
                label = "Image";
            }
        }
        return {
            key: `${this._definition?.id}-${obj.id}`,
            score: this.objectTypeToOrder(objType),
            title: obj[title] ?? `Untitled ${objType}`,
            label,
            icon: mimeIcon ?? this.getThemedIcon(icons[objType], palette),
            actions: [],
            data: {
                providerId: this._definition?.id,
                objType,
                obj,
                state: "loading"
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Loading,
            templateContent: ""
        };
    }
    /**
     * Create a result to display a user.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param user The user to display.
     * @returns The created template.
     */
    async createUserResult(templateHelpers, palette, user) {
        let picData;
        let presence;
        let availableColor = "red";
        let availableIcon = this._settings?.images.cross;
        let availability = "Unknown";
        const teams = [];
        if (this._ms365Connection) {
            const batchRequests = [];
            batchRequests.push(`/users/${user.id}/presence`, `/users/${user.id}/memberOf`);
            if (user.id) {
                if (this._profileImageCache[user.id]) {
                    picData = this._profileImageCache[user.id].data;
                }
                else {
                    batchRequests.push(`/users/${user.id}/photo/$value`);
                }
            }
            try {
                this._logger?.info("Graph API Batch Request", batchRequests);
                const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                    requests: batchRequests.map((r, idx) => ({
                        id: (idx + 1).toString(),
                        method: "GET",
                        url: r
                    }))
                });
                const presenceResponse = response.data?.responses.find((r) => r.id === "1");
                if (presenceResponse?.status === 200) {
                    presence = presenceResponse.body;
                    // Availability is in Pascal case, so split on capitals and join with space
                    availability = presence?.availability?.split(/(?=[A-Z])/).join(" ") ?? availability;
                    if (presence?.availability === "Available") {
                        availableColor = "green";
                        availableIcon = this._settings?.images.check;
                    }
                    else if (presence?.availability === "Away" || presence?.availability === "BeRightBack") {
                        availableColor = "orange";
                        availableIcon = this._settings?.images.clock;
                    }
                }
                else {
                    this._logger?.error("Failed getting user presence", presenceResponse?.status, presenceResponse?.body);
                }
                const teamsResponse = response.data?.responses.find((r) => r.id === "2");
                if (teamsResponse?.status === 200) {
                    const memberOf = teamsResponse.body.value;
                    if (memberOf) {
                        const excludeGroups = ["All Users"];
                        const teamsMember = memberOf.filter((m) => m["@odata.type"] === "#microsoft.graph.group" && !excludeGroups.includes(m.displayName ?? ""));
                        for (const member of teamsMember) {
                            if (member.displayName) {
                                teams.push(member.displayName);
                            }
                        }
                    }
                }
                else {
                    this._logger?.error("Failed getting user teams", teamsResponse?.status, teamsResponse?.body);
                }
                const profileResponse = response.data?.responses.find((r) => r.id === "3");
                if (profileResponse) {
                    if (profileResponse?.status === 200) {
                        picData = `data:image/jpeg;base64,${profileResponse.body}`;
                        this._profileImageCache[user.id ?? ""] = {
                            data: picData,
                            added: Date.now()
                        };
                    }
                    else {
                        // If the request failed the JSON error is still base64 encoded
                        this._logger?.error("Failed getting user profile pic", profileResponse.status, atob(profileResponse.body));
                    }
                }
            }
            catch (err) {
                this._logger?.error("Failed performing API batch request", err);
            }
        }
        const pairs = [];
        if (user.jobTitle) {
            pairs.push({ label: "Title", value: user.jobTitle });
        }
        if (user.department) {
            pairs.push({ label: "Department", value: user.department });
        }
        if (user.mail) {
            pairs.push({ label: "E-mail", value: user.mail });
        }
        let phone;
        if (user.mobilePhone) {
            pairs.push({ label: "Cell", value: user.mobilePhone });
            phone = user.mobilePhone;
        }
        if (user.businessPhones?.length) {
            pairs.push({ label: "Business", value: user.businessPhones[0] });
            phone = phone ?? user.businessPhones[0];
        }
        if (teams.length > 0) {
            pairs.push({ label: "Teams", value: teams.join(", ") });
        }
        const buttons = [
            {
                titleKey: "callTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CALL,
                imageKey: "callImage",
                imageAltText: "Teams Call"
            },
            {
                titleKey: "emailTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EMAIL,
                imageKey: "emailImage",
                imageAltText: "E-mail"
            },
            {
                titleKey: "meetingTitle",
                action: Microsoft365Integration._ACTION_TEAMS_MEETING,
                imageKey: "meetingImage",
                imageAltText: "Meeting"
            },
            {
                titleKey: "chatTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CHAT,
                imageKey: "chatImage",
                imageAltText: "Chat"
            }
        ];
        return {
            key: `${this._definition?.id}-${user.id}`,
            score: this.objectTypeToOrder("User"),
            title: user.displayName ?? "",
            label: "User",
            icon: this.getThemedIcon("teams", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_TEAMS_CALL,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "User",
                obj: user,
                emails: [user.mail],
                phone,
                name: user.displayName
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [
                        await templateHelpers.createImage("picData", user.displayName ?? "", {
                            width: "44px",
                            height: "44px",
                            objectFit: "cover",
                            borderRadius: "50%"
                        }),
                        await templateHelpers.createImage("status", availability, {
                            width: "16px",
                            height: "16px",
                            backgroundColor: availableColor,
                            borderRadius: "50%",
                            border: "2px solid white",
                            padding: "2px",
                            position: "relative",
                            left: "-14px",
                            top: "28px"
                        }),
                        await templateHelpers.createContainer("column", [
                            await templateHelpers.createTitle("displayName"),
                            await templateHelpers.createText("availability", 10, {})
                        ], {
                            overflow: "hidden"
                        })
                    ], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    picData: picData ?? this.getThemedIcon("contact", palette),
                    status: availableIcon ?? "",
                    displayName: user.displayName ?? "",
                    availability,
                    ...this.mapPairsToData(pairs),
                    callTitle: "Teams Call",
                    callImage: this.getThemedIcon("teams", palette),
                    emailTitle: "Outlook E-mail",
                    emailImage: this.getThemedIcon("email", palette),
                    meetingTitle: "Teams Meeting",
                    meetingImage: this.getThemedIcon("calendar", palette),
                    chatTitle: "Teams Chat",
                    chatImage: this.getThemedIcon("chat", palette)
                }
            }
        };
    }
    /**
     * Create a result to show a contact.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param contact The contact details.
     * @returns The contact template.
     */
    async createContactResult(templateHelpers, palette, contact) {
        let picData;
        try {
            if (this._ms365Connection && contact.id) {
                if (this._profileImageCache[contact.id]) {
                    picData = this._profileImageCache[contact.id].data;
                }
                else {
                    const batchRequests = [`/me/contacts/${contact.id}/photo/$value`];
                    this._logger?.info("Graph API Batch Request", {
                        photo: batchRequests[0]
                    });
                    const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                        requests: batchRequests.map((r, idx) => ({
                            id: (idx + 1).toString(),
                            method: "GET",
                            url: r
                        }))
                    });
                    const profileResponse = response.data?.responses.find((r) => r.id === "1");
                    if (profileResponse?.status === 200) {
                        picData = `data:image/jpeg;base64,${profileResponse.body}`;
                        this._profileImageCache[contact.id] = {
                            data: picData,
                            added: Date.now()
                        };
                    }
                    else {
                        // If the request failed the JSON error is still base64 encoded
                        this._logger?.error("Failed getting contact profile pic", profileResponse?.status, atob(profileResponse?.body));
                    }
                }
            }
        }
        catch (err) {
            this._logger?.error("Failed performing API batch request", err);
        }
        const pairs = [];
        if (contact.companyName) {
            pairs.push({ label: "Company", value: contact.companyName });
        }
        if (contact.jobTitle) {
            pairs.push({ label: "Title", value: contact.jobTitle });
        }
        if (contact.department) {
            pairs.push({ label: "Department", value: contact.department });
        }
        let phone;
        let email;
        if (contact.mobilePhone) {
            pairs.push({ label: "Cell", value: contact.mobilePhone });
            phone = contact.mobilePhone;
        }
        if (contact.businessPhones?.length) {
            pairs.push({ label: "Business", value: contact.businessPhones[0] });
            phone = phone ?? contact.businessPhones[0];
        }
        if (contact.emailAddresses?.length) {
            for (const e of contact.emailAddresses) {
                if (e.address?.length) {
                    pairs.push({ label: "E-mail", value: e.address });
                    email = email ?? e.address;
                    break;
                }
            }
        }
        const buttons = [];
        if (phone) {
            buttons.push({
                titleKey: "callTitle",
                action: Microsoft365Integration._ACTION_PHONE_CALL,
                imageKey: "callImage",
                imageAltText: "Call"
            });
        }
        if (email) {
            buttons.push({
                titleKey: "emailTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EMAIL,
                imageKey: "emailImage",
                imageAltText: "E-mail"
            });
            buttons.push({
                titleKey: "calendarTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EVENT,
                imageKey: "calendarImage",
                imageAltText: "Calendar"
            });
        }
        return {
            key: `${this._definition?.id}-${contact.id}`,
            score: this.objectTypeToOrder("Contact"),
            title: contact.displayName ?? "",
            label: "Contact",
            icon: this.getThemedIcon("contact", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_PHONE_CALL,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Contact",
                obj: contact,
                emails: [email],
                phone,
                name: contact.displayName
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [
                        await templateHelpers.createImage("picData", contact.displayName ?? "", {
                            width: "44px",
                            height: "44px",
                            objectFit: "cover",
                            borderRadius: "50%"
                        }),
                        await templateHelpers.createContainer("column", [
                            await templateHelpers.createTitle("displayName"),
                            await templateHelpers.createText("company", 10, {})
                        ], {
                            overflow: "hidden"
                        })
                    ], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    picData: picData ?? this.getThemedIcon("contact", palette),
                    displayName: contact.displayName ?? "",
                    ...this.mapPairsToData(pairs),
                    callTitle: "Call",
                    callImage: this.getThemedIcon("call", palette),
                    emailTitle: "Outlook E-mail",
                    emailImage: this.getThemedIcon("email", palette),
                    calendarTitle: "Outlook Calendar",
                    calendarImage: this.getThemedIcon("calendar", palette)
                }
            }
        };
    }
    /**
     * Create a result to display a message.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param message The message data.
     * @returns The message template.
     */
    async createMessageResult(templateHelpers, palette, message) {
        const pairs = [];
        if (message.sender?.emailAddress?.name ?? message.sender?.emailAddress?.address) {
            pairs.push({
                label: "From",
                value: message.sender.emailAddress?.name ?? message.sender.emailAddress?.address ?? ""
            });
        }
        if (message.receivedDateTime) {
            pairs.push({
                label: "Received",
                value: new Date(message.receivedDateTime).toLocaleString()
            });
        }
        if (message.bodyPreview) {
            pairs.push({
                label: "Preview",
                value: this.sanitizeString(message.bodyPreview),
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_OPEN,
                imageKey: "openImage",
                imageAltText: "Open"
            }
        ];
        return {
            key: `${this._definition?.id}-${message.id}`,
            score: this.objectTypeToOrder("Message"),
            title: message.subject ?? "Untitled Message",
            label: "Message",
            icon: this.getThemedIcon("email", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_OPEN,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Message",
                obj: message,
                url: message.webLink
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("subject")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    subject: message.subject ?? "No Subject",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Outlook",
                    openImage: this.getThemedIcon("outlook", palette)
                }
            }
        };
    }
    /**
     * Create a result template for event.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param event The event data.
     * @returns The event template.
     */
    async createEventResult(templateHelpers, palette, event) {
        if (this._ms365Connection) {
            const batchRequests = [`/me/events/${event.id}`];
            try {
                this._logger?.info("Graph API Batch Request", {
                    photo: batchRequests[0]
                });
                const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                    requests: batchRequests.map((r, idx) => ({
                        id: (idx + 1).toString(),
                        method: "GET",
                        url: r
                    }))
                });
                const eventResponse = response.data?.responses.find((r) => r.id === "1");
                if (eventResponse?.status === 200) {
                    event = {
                        ...event,
                        ...eventResponse.body
                    };
                }
                else {
                    this._logger?.error("Failed getting event", eventResponse?.status, eventResponse?.body);
                }
            }
            catch (err) {
                this._logger?.error("Failed performing API batch request", err);
            }
        }
        const pairs = [];
        if (event.start?.dateTime) {
            pairs.push({
                label: "Start",
                value: new Date(event.start?.dateTime).toLocaleString()
            });
        }
        if (event.end?.dateTime) {
            pairs.push({
                label: "End",
                value: new Date(event.end?.dateTime).toLocaleString()
            });
        }
        if (event.bodyPreview) {
            pairs.push({
                label: "Preview",
                value: this.sanitizeString(event.bodyPreview),
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_OPEN,
                imageKey: "openImage",
                imageAltText: "Open"
            }
        ];
        return {
            key: `${this._definition?.id}-${event.id}`,
            score: this.objectTypeToOrder("Event"),
            title: event.subject ?? "Untitled Event",
            label: "Event",
            icon: this.getThemedIcon("calendar", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_OPEN,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Event",
                obj: event,
                url: event.webLink
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("subject")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    subject: event.subject ?? "Untitled Event",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Outlook",
                    openImage: this.getThemedIcon("outlook", palette)
                }
            }
        };
    }
    /**
     * Create a result for a chat message.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param chatMessage The chat message data.
     * @returns The chat message template.
     */
    async createChatMessageResult(templateHelpers, palette, chatMessage) {
        if (this._ms365Connection) {
            try {
                const batchRequests = [`/chats/${chatMessage.chatId}/messages/${chatMessage.etag}`];
                this._logger?.info("Graph API Batch Request", {
                    photo: batchRequests[0]
                });
                const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                    requests: batchRequests.map((r, idx) => ({
                        id: (idx + 1).toString(),
                        method: "GET",
                        url: r
                    }))
                });
                const chatMessageResponse = response.data?.responses.find((r) => r.id === "1");
                if (chatMessageResponse?.status === 200) {
                    chatMessage = {
                        ...chatMessage,
                        ...chatMessageResponse.body,
                        summary: chatMessageResponse.body.summary ?? chatMessage.summary
                    };
                }
                else {
                    this._logger?.error("Failed getting event", chatMessageResponse?.status, chatMessageResponse?.body);
                }
            }
            catch (err) {
                this._logger?.error("Failed performing API batch request", err);
            }
        }
        const pairs = [];
        if (chatMessage.lastModifiedDateTime) {
            pairs.push({
                label: "Date/Time",
                value: new Date(chatMessage.lastModifiedDateTime).toLocaleString()
            });
        }
        if (chatMessage.from?.user?.displayName) {
            pairs.push({
                label: "From",
                value: chatMessage.from.user.displayName
            });
        }
        if (chatMessage.body?.content) {
            pairs.push({
                label: "Preview",
                value: this.sanitizeString(chatMessage.body?.content),
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CHAT,
                imageKey: "openImage",
                imageAltText: "Open"
            }
        ];
        return {
            key: `${this._definition?.id}-${chatMessage.id}`,
            score: this.objectTypeToOrder("ChatMessage"),
            title: chatMessage.summary ?? "Untitled Chat Message",
            label: "Chat Message",
            icon: this.getThemedIcon("chat", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_TEAMS_CHAT,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "ChatMessage",
                obj: chatMessage,
                url: chatMessage.webUrl,
                chatId: chatMessage.chatId,
                messageId: chatMessage.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("summary")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    summary: chatMessage.summary ?? "Untitled Chat Message",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Chat Message",
                    openImage: this.getThemedIcon("teams", palette)
                }
            }
        };
    }
    /**
     * Create the result for a team.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param team The team data.
     * @returns The team result template.
     */
    async createTeamResult(templateHelpers, palette, team) {
        const teamMembers = team.id ? await this.getTeamMembers(team.id) : [];
        const pairs = [];
        const urls = {};
        if (team.channels?.length) {
            pairs.push({
                label: "Channel List",
                links: team.channels?.map((c) => c.displayName ?? "")
            });
            for (let i = 0; i < team.channels.length; i++) {
                urls[`Channel List_link_${i}`] = team.channels[i].webUrl ?? "";
            }
        }
        if (teamMembers.length) {
            const userPhotos = await this.getUserPhotos(teamMembers, 16);
            pairs.push({
                label: "Member List",
                srcs: userPhotos
            });
        }
        if (team.description) {
            pairs.push({
                label: "Description",
                value: team.description,
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CALL,
                imageKey: "openImage",
                imageAltText: "Open"
            },
            {
                titleKey: "emailTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EMAIL,
                imageKey: "emailImage",
                imageAltText: "Email"
            },
            {
                titleKey: "meetingTitle",
                action: Microsoft365Integration._ACTION_TEAMS_MEETING,
                imageKey: "meetingImage",
                imageAltText: "Meeting"
            },
            {
                titleKey: "chatTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CHAT,
                imageKey: "chatImage",
                imageAltText: "Chat"
            }
        ];
        return {
            key: `${this._definition?.id}-${team.id}`,
            score: this.objectTypeToOrder("Team"),
            title: team.displayName ?? "Untitled Team",
            label: "Team",
            icon: this.getThemedIcon("team", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_TEAMS_CALL,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Team",
                obj: team,
                url: team.webUrl,
                urls,
                emails: teamMembers.filter((t) => t.email).map((t) => t.email),
                teamId: team.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("displayName")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    displayName: team.displayName ?? "Untitled Team",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Teams",
                    openImage: this.getThemedIcon("teams", palette),
                    emailTitle: "Outlook E-mail",
                    emailImage: this.getThemedIcon("email", palette),
                    meetingTitle: "Teams Meeting",
                    meetingImage: this.getThemedIcon("calendar", palette),
                    chatTitle: "Teams Chat",
                    chatImage: this.getThemedIcon("chat", palette)
                }
            }
        };
    }
    /**
     * Create a result template for a channel.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param channel The channel data.
     * @returns The channel result template.
     */
    async createChannelResult(templateHelpers, palette, channel) {
        const channelMembers = channel.team?.id && channel?.id ? await this.getChannelMembers(channel.team.id, channel.id) : [];
        const pairs = [];
        if (channel.team.displayName) {
            pairs.push({
                label: "Team",
                value: channel.team.displayName
            });
        }
        if (channelMembers.length) {
            const userPhotos = await this.getUserPhotos(channelMembers, 16);
            pairs.push({
                label: "Member List",
                srcs: userPhotos
            });
        }
        if (channel.description) {
            pairs.push({
                label: "Description",
                value: channel.description,
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CALL,
                imageKey: "openImage",
                imageAltText: "Open"
            },
            {
                titleKey: "emailTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EMAIL,
                imageKey: "emailImage",
                imageAltText: "Email"
            },
            {
                titleKey: "meetingTitle",
                action: Microsoft365Integration._ACTION_TEAMS_MEETING,
                imageKey: "meetingImage",
                imageAltText: "Meeting"
            },
            {
                titleKey: "chatTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CHAT,
                imageKey: "chatImage",
                imageAltText: "Chat"
            }
        ];
        return {
            key: `${this._definition?.id}-${channel.id}`,
            score: this.objectTypeToOrder("Channel"),
            title: channel.displayName ?? "Untitled Channel",
            label: "Channel",
            icon: this.getThemedIcon("channel", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_TEAMS_CALL,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Channel",
                obj: channel,
                url: channel.webUrl,
                emails: channelMembers.filter((m) => m.email).map((m) => m.email),
                teamId: channel.team.id,
                channelId: channel.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("displayName")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    displayName: channel.displayName ?? "Untitled Channel",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Teams",
                    openImage: this.getThemedIcon("teams", palette),
                    emailTitle: "Outlook E-mail",
                    emailImage: this.getThemedIcon("email", palette),
                    meetingTitle: "Teams Meeting",
                    meetingImage: this.getThemedIcon("calendar", palette),
                    chatTitle: "Teams Chat",
                    chatImage: this.getThemedIcon("chat", palette)
                }
            }
        };
    }
    /**
     * Create the result template for a drive item.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param driveItem The drive item data.
     * @returns The result template for the drive item.
     */
    async createFileResult(templateHelpers, palette, driveItem) {
        const pairs = [];
        const urls = {};
        const mimeIcon = this.getMimeIcon(driveItem, palette);
        if (driveItem.createdBy?.user?.displayName) {
            pairs.push({
                label: "Created By",
                value: driveItem.createdBy?.user?.displayName
            });
        }
        if (driveItem.createdDateTime) {
            pairs.push({
                label: "Created On",
                value: new Date(driveItem.createdDateTime).toLocaleString()
            });
        }
        if (driveItem.lastModifiedBy?.user?.displayName) {
            pairs.push({
                label: "Updated By",
                value: driveItem.lastModifiedBy?.user?.displayName
            });
        }
        if (driveItem.lastModifiedDateTime) {
            pairs.push({
                label: "Updated On",
                value: new Date(driveItem.lastModifiedDateTime).toLocaleString()
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_OPEN,
                imageKey: "openImage",
                imageAltText: "Open"
            }
        ];
        const isFolder = this.driveItemIsFolder(driveItem);
        const typeName = isFolder ? "Folder" : "File";
        return {
            key: `${this._definition?.id}-${driveItem.id}`,
            score: this.objectTypeToOrder("File"),
            title: driveItem.name ?? `Untitled ${typeName}`,
            label: typeName,
            icon: mimeIcon ?? this.getThemedIcon(typeName.toLowerCase(), palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_OPEN,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "File",
                obj: driveItem,
                url: driveItem.webUrl,
                urls
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("displayName")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    displayName: driveItem.name ?? "Untitled File",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open File",
                    openImage: mimeIcon ?? this.getThemedIcon("file", palette)
                }
            }
        };
    }
    /**
     * Get team members for a team.
     * @param teamId The id of the team to get the members.
     * @returns The ActiveDirectory data for the team members.
     */
    async getTeamMembers(teamId) {
        try {
            if (this._ms365Connection) {
                this._logger?.info("Get Team Members Request");
                const response = await this._ms365Connection.executeApiRequest(`/v1.0/teams/${teamId}/members`, "GET");
                this._logger?.info("Get Team Members Response", response.data);
                if (response.data?.value) {
                    return response.data.value;
                }
            }
        }
        catch (err) {
            this._logger?.error("Failed getting team members", err);
        }
        return [];
    }
    /**
     * Get the members of a teams channel.
     * @param teamId The team id.
     * @param channelId The channel id.
     * @returns The ActiveDirectory data for the team channel members.
     */
    async getChannelMembers(teamId, channelId) {
        try {
            if (this._ms365Connection) {
                this._logger?.info("Get Channel Members Request");
                const response = await this._ms365Connection.executeApiRequest(`/v1.0/teams/${teamId}/channels/${channelId}/members`, "GET");
                this._logger?.info("Get Channel Members Response", response.data);
                if (response.data?.value) {
                    return response.data.value;
                }
            }
        }
        catch (err) {
            this._logger?.error("Failed getting channel members", err);
        }
        return [];
    }
    /**
     * Get users photos.
     * @param users The users to get the photos for.
     * @param size The size of the photos.
     * @returns List of urls to the photos.
     */
    async getUserPhotos(users, size) {
        try {
            if (this._ms365Connection) {
                const lookupUsers = users.filter((u) => !this._profileImageCache[u.id ?? ""]);
                if (lookupUsers.length > 0) {
                    const chunkCount = Math.ceil(lookupUsers.length / 20);
                    for (let i = 0; i < chunkCount; i++) {
                        const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                            requests: lookupUsers.slice(i * 20, (i + 1) * 20).map((u, idx) => ({
                                id: `photos${idx + 1}`,
                                method: "GET",
                                url: `/users/${u.userId}/photo/$value`
                            }))
                        });
                        if (response.data?.responses) {
                            for (const r of response.data.responses) {
                                const lookupIdx = Number.parseInt(r.id.replace("photos", ""), 10);
                                const user = lookupUsers[lookupIdx - 1];
                                if (user.id) {
                                    let picData;
                                    if (r.status === 200) {
                                        picData = `data:image/jpeg;base64,${r.body}`;
                                    }
                                    else {
                                        picData = this.svgToInline(this.imageProfileNone(size, user.displayName ?? "?"));
                                    }
                                    this._profileImageCache[user.id] = {
                                        data: picData,
                                        added: Date.now()
                                    };
                                }
                            }
                        }
                    }
                }
                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
                return users.map((u) => u.id && this._profileImageCache[u.id].data).filter(Boolean);
            }
        }
        catch (err) {
            this._logger?.error("Failed getting user photos", err);
        }
        return [];
    }
    /**
     * Map data to template layout.
     * @param pairs The data pairs to map.
     * @returns The mapped data.
     */
    mapPairsToData(pairs) {
        const pairData = {};
        for (const pair of pairs) {
            pairData[`${pair.label}Title`] = pair.label;
            if (pair.value) {
                pairData[pair.label] = this.sanitizeString(pair.value);
            }
            if (pair.links) {
                for (let i = 0; i < pair.links.length; i++) {
                    pairData[`${pair.label}_link_${i}`] = pair.links[i];
                }
            }
            if (pair.srcs) {
                for (let i = 0; i < pair.srcs.length; i++) {
                    pairData[`${pair.label}_src_${i}`] = pair.srcs[i];
                }
            }
        }
        return pairData;
    }
    /**
     * Create the template layout for a pair.
     * @param templateHelpers Template helpers.
     * @param palette The palette.
     * @param pairs The pair to create the entry for.
     * @returns The pair template.
     */
    async createPairsLayout(templateHelpers, palette, pairs) {
        return templateHelpers.createContainer("column", await Promise.all(pairs.map(async (p) => this.createPairLayout(templateHelpers, palette, p))), { gap: "5px", flex: "1" });
    }
    /**
     * Create the pairs layout.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param pair The pair data.
     * @param pair.label Label for the pair.
     * @param pair.value The value for the pair.
     * @param pair.links Any links to display in the pair.
     * @param pair.srcs Any image sources for the pair.
     * @param pair.wide Display the pair in wide format.
     * @returns The formatted pairs.
     */
    async createPairLayout(templateHelpers, palette, pair) {
        const elements = [
            await templateHelpers.createText(`${pair.label}Title`, 10, {
                color: palette.inputPlaceholder,
                flex: 1
            })
        ];
        if (pair.value) {
            elements.push(await templateHelpers.createText(`${pair.label}`, 10, {
                flex: pair.wide ? 1 : 3,
                display: "flex",
                flexWrap: "wrap",
                justifyContent: pair.wide ? "flex-start" : "flex-end",
                wordBreak: "break-all"
            }));
        }
        if (pair.links?.length) {
            elements.push(await templateHelpers.createContainer("row", await Promise.all(pair.links.map(async (l, idx) => templateHelpers.createLink(`${pair.label}_link_${idx}`, `${Microsoft365Integration._ACTION_OPEN}_${pair.label}_link_${idx}`, 10))), { gap: "5px", flex: 3, justifyContent: "flex-end", flexWrap: "wrap" }));
        }
        if (pair.srcs?.length) {
            elements.push(await templateHelpers.createContainer("row", await Promise.all(pair.srcs.map(async (s, idx) => templateHelpers.createImage(`${pair.label}_src_${idx}`, "Member", {
                width: "16px",
                height: "16px",
                objectFit: "cover",
                borderRadius: "50%"
            }))), { gap: "5px", flex: 3, justifyContent: "flex-end", flexWrap: "wrap" }));
        }
        return templateHelpers.createContainer(pair.wide ? "column" : "row", elements, {
            justifyContent: "space-between",
            gap: pair.wide ? "5px" : "10px"
        });
    }
    /**
     * Create a layout with buttons.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param buttons The buttons to display.
     * @returns The buttons layout.
     */
    async createButtonsLayout(templateHelpers, palette, buttons) {
        return templateHelpers.createContainer("row", await Promise.all(buttons.map(async (b) => templateHelpers.createButton(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.ButtonStyle.Secondary, b.titleKey, b.action, {
            border: "none",
            borderRadius: "50%",
            width: "40px",
            height: "40px",
            padding: "0px",
            justifyContent: "center",
            backgroundColor: palette.background2
        }, [
            await templateHelpers.createImage(b.imageKey, b.imageAltText, {
                width: "16px",
                height: "16px"
            })
        ]))), {
            justifyContent: "space-around",
            gap: "10px"
        });
    }
    /**
     * Create a profile image using initials.
     * @param size The size of the image to create.
     * @param name The name of the user.
     * @returns SVG image.
     */
    imageProfileNone(size, name) {
        return `<svg fill="#DDDDDD" viewBox="0 0 512 512" height="${size}px" width="${size}px" xmlns="http://www.w3.org/2000/svg">
		<style>text{font: bold 350px sans-serif;fill: black;}</style>
		<rect width="512" height="512" />
		<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">${name[0]}</text>
		</svg>`;
    }
    /**
     * Convert and svg into inline format.
     * @param svg The SVG to convert.
     * @returns The converted image.
     */
    svgToInline(svg) {
        return `data:image/svg+xml;utf8,${svg.replace(/#/g, "%23")}`;
    }
    /**
     * Convert a base64 ID in to url format.
     * @param b64Id The base64 id to convert.
     * @returns The url form of the id.
     */
    base64IdToUrl(b64Id) {
        return b64Id ? b64Id.replace(/\+/g, "_").replace(/\//g, "-") : b64Id;
    }
    /**
     * A basic string sanitize function that removes angle brackets <> from a string.
     * @param content the content to sanitize
     * @returns a string without angle brackets <>
     */
    sanitizeString(content) {
        if (content !== undefined && content !== null && typeof content === "string") {
            return content
                .replace(/<[^>]*>?/gm, "")
                .replace(/&gt;/g, ">")
                .replace(/&lt;/g, "<")
                .replace(/&amp;/g, "&")
                .replace(/&nbsp;/g, " ")
                .replace(/\n\s*\n/g, "\n");
        }
        return content;
    }
    /**
     * Convert the object type to a value for ordering.
     * @param objType The object type.
     * @returns The ordering number.
     */
    objectTypeToOrder(objType) {
        const objTypeOrder = {
            User: 100,
            Contact: 200,
            Message: 300,
            ChatMessage: 400,
            Event: 500,
            Team: 600,
            Channel: 700,
            File: 800
        };
        return ((this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE) + objTypeOrder[objType]);
    }
    /**
     * Update the cache and remove any stale data.
     */
    async updateCache() {
        // Cleanup any old cached profile images
        const keys = Object.keys(this._profileImageCache);
        const now = Date.now();
        const ttl = keys.length > 50 ? 30000 : 300000;
        for (const id of keys) {
            if (now - this._profileImageCache[id].added > ttl) {
                delete this._profileImageCache[id];
            }
        }
        // Update the teams and channels
        if (this._ms365Connection && this._cacheCounter % 6 === 0) {
            // Update every 3 minutes
            try {
                const response = await this._ms365Connection.executeApiRequest("/v1.0/me/joinedTeams");
                const joinedTeams = response.data?.value ?? [];
                const channelsForTeam = {};
                if (joinedTeams.length) {
                    const batchChannels = joinedTeams.map((t) => `/teams/${t.id}/channels`);
                    const batchResponses = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                        requests: batchChannels.map((url, idx) => ({
                            id: `TeamChannels-${(idx + 1).toString()}`,
                            method: "GET",
                            url
                        }))
                    });
                    if (batchResponses.data?.responses && Array.isArray(batchResponses.data?.responses)) {
                        for (const batchResponse of batchResponses.data.responses) {
                            if (batchResponse.status === 200) {
                                this._logger?.info(`${batchResponse.id} Response`, batchResponse.body);
                                const channels = batchResponse.body;
                                if (channels.value) {
                                    for (const channel of channels.value) {
                                        // The webUrl for the teams management page needs constructing from the first channel in each team
                                        // we also connect the team to the channels and vice versa
                                        if (channel.webUrl) {
                                            const webUrl = new URL(channel.webUrl);
                                            if (webUrl.searchParams.has("groupId")) {
                                                const groupId = webUrl.searchParams.get("groupId");
                                                const team = joinedTeams.find((t) => t.id === groupId);
                                                if (team?.id) {
                                                    team.webUrl = channel.webUrl;
                                                    channelsForTeam[team.id] = channelsForTeam[team.id] ?? [];
                                                    channelsForTeam[team.id].push(channel);
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            else {
                                this._logger?.error(`${batchResponse.id} Response Failed`, batchResponse.status, batchResponse.body);
                            }
                        }
                    }
                }
                this._teamsAndChannelsCache = joinedTeams.map((t) => ({
                    team: t,
                    channels: channelsForTeam[t.id ?? ""] ?? []
                }));
            }
            catch (err) {
                this._logger?.error("Error retrieving joined teams", err);
            }
        }
        this._cacheCounter++;
    }
    /**
     * Get the icon based on the MIME type for a drive item.
     * @param driveItem The drive item.
     * @param palette The palette for theming.
     * @returns The icons for the drive item.
     */
    getMimeIcon(driveItem, palette) {
        const mimeType = driveItem.file?.mimeType ?? "";
        const filename = driveItem.name ?? "";
        const packageType = driveItem.package?.type ?? "";
        if (mimeType === "application/vnd.openxmlformats-officedocument.wordprocessingml.document" ||
            mimeType === "application/msword" ||
            filename.endsWith(".docx") ||
            filename.endsWith(".doc")) {
            return this._settings?.images.word;
        }
        else if (mimeType === "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" ||
            mimeType === "application/vnd.ms-excel" ||
            filename.endsWith(".xlsx") ||
            filename.endsWith(".xls")) {
            return this._settings?.images.excel;
        }
        else if (mimeType === "application/vnd.openxmlformats-officedocument.presentationml.presentation" ||
            mimeType === "application/vnd.ms-powerpoint" ||
            filename.endsWith(".pptx") ||
            filename.endsWith(".ppt")) {
            return this._settings?.images.powerpoint;
        }
        else if (this.driveItemIsImage(driveItem)) {
            if (driveItem.thumbnails && Array.isArray(driveItem.thumbnails) && driveItem.thumbnails.length > 0) {
                const thumbnailSet = driveItem.thumbnails[0];
                if (thumbnailSet?.small ?? thumbnailSet.medium) {
                    return thumbnailSet.small?.url ?? thumbnailSet.medium?.url;
                }
            }
        }
        else if (packageType === "oneNote" || filename.endsWith("onetoc2") || filename.endsWith("one")) {
            return this._settings?.images.onenote;
        }
        else if (this.driveItemIsFolder(driveItem)) {
            return this.getThemedIcon("folder", palette);
        }
    }
    /**
     * Get a theme version of an icon.
     * @param themedIcon The theme icon to them.
     * @param palette The palette to use for theming.
     * @returns The themed icon.
     */
    getThemedIcon(themedIcon, palette) {
        if (!this._settings?.images[themedIcon]) {
            return "";
        }
        const icon = this._settings.images[themedIcon];
        if (icon.startsWith("data:image/svg+xml")) {
            return icon.replace(/rgb\(0,0,0\)/g, palette.textDefault?.replace(/#/g, "%23") ?? "0,0,0");
        }
        return icon;
    }
    /**
     * Check to see if a drive item is folder.
     * @param driveItem The driver item to check.
     * @returns True if the item is a folder.
     */
    driveItemIsFolder(driveItem) {
        return driveItem.file === undefined && driveItem.folder !== undefined;
    }
    /**
     * Check to see if a drive item is an image.
     * @param driveItem The drive item to check.
     * @returns True if the item is an
     */
    driveItemIsImage(driveItem) {
        return (driveItem.file?.mimeType?.startsWith("image/") ??
            driveItem.name?.endsWith(".jpeg") ??
            driveItem.name?.endsWith(".jpg") ??
            driveItem.name?.endsWith(".gif") ??
            driveItem.name?.endsWith(".webp") ??
            driveItem.name?.endsWith(".png") ??
            false);
    }
    /**
     * Format an error to a readable string.
     * @param err The error to format.
     * @returns The formatted error.
     */
    formatError(err) {
        if (err instanceof Error) {
            return err.message;
        }
        else if (typeof err === "string") {
            return err;
        }
        return JSON.stringify(err);
    }
}
/**
 * The default base score for ordering.
 * @internal
 */
Microsoft365Integration._DEFAULT_BASE_SCORE = 500000;
/**
 * The key to use for a call key action.
 * @internal
 */
Microsoft365Integration._ACTION_TEAMS_CALL = "Teams Call";
/**
 * The key to use for a outlook email key action.
 * @internal
 */
Microsoft365Integration._ACTION_OUTLOOK_EMAIL = "Outlook Email";
/**
 * The key to use for a teams meeting key action.
 * @internal
 */
Microsoft365Integration._ACTION_TEAMS_MEETING = "Teams Meeting";
/**
 * The key to use for a outlook event key action.
 * @internal
 */
Microsoft365Integration._ACTION_OUTLOOK_EVENT = "Outlook Event";
/**
 * The key to use for a chat key action.
 * @internal
 */
Microsoft365Integration._ACTION_TEAMS_CHAT = "Teams Chat";
/**
 * The key to use for a call key action.
 * @internal
 */
Microsoft365Integration._ACTION_PHONE_CALL = "Call";
/**
 * The key to use for an open key action.
 * @internal
 */
Microsoft365Integration._ACTION_OPEN = "Open";
/**
 * The key to use for an share contact.
 * @internal
 */
Microsoft365Integration._ACTION_SHARE_CONTACT = "Share Contact";
/**
 * The key to use for a copy key action.
 * @internal
 */
Microsoft365Integration._ACTION_COPY = "Copy JSON to Clipboard";
/**
 * The key to use for a connect key action.
 * @internal
 */
Microsoft365Integration._ACTION_CONNECT = "Connect";
/**
 * The key for the ms 365 filters.
 * @internal
 */
Microsoft365Integration._MS365_FILTERS = "MS365";
/**
 * The url for teams.
 * @internal
 */
Microsoft365Integration._TEAMS_URL = "https://teams.microsoft.com/";
/**
 * The protocol for teams.
 * @internal
 */
Microsoft365Integration._TEAMS_PROTOCOL = "msteams:";


/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		id: moduleId,
/******/ 		loaded: false,
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Flag the module as loaded
/******/ 	module.loaded = true;
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/compat get default export */
/******/ (() => {
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = (module) => {
/******/ 		var getter = module && module.__esModule ?
/******/ 			() => (module['default']) :
/******/ 			() => (module);
/******/ 		__webpack_require__.d(getter, { a: getter });
/******/ 		return getter;
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/global */
/******/ (() => {
/******/ 	__webpack_require__.g = (function() {
/******/ 		if (typeof globalThis === 'object') return globalThis;
/******/ 		try {
/******/ 			return this || new Function('return this')();
/******/ 		} catch (e) {
/******/ 			if (typeof window === 'object') return window;
/******/ 		}
/******/ 	})();
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ })();
/******/ 
/******/ /* webpack/runtime/make namespace object */
/******/ (() => {
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = (exports) => {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/node module decorator */
/******/ (() => {
/******/ 	__webpack_require__.nmd = (module) => {
/******/ 		module.paths = [];
/******/ 		if (!module.children) module.children = [];
/******/ 		return module;
/******/ 	};
/******/ })();
/******/ 
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
/*!******************************************!*\
  !*** ./client/src/module-entry-point.ts ***!
  \******************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   entryPoints: () => (/* binding */ entryPoints)
/* harmony export */ });
/* harmony import */ var _ms365_integration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ms365-integration */ "./client/src/ms365-integration.ts");

/**
 * This entry point is used by webpack to create a module file which can be consumed
 * by the workspace-platform-starter example.
 */
const entryPoints = {
    integrations: new _ms365_integration__WEBPACK_IMPORTED_MODULE_0__.Microsoft365Integration()
};

})();

const __webpack_exports__entryPoints = __webpack_exports__.entryPoints;
export { __webpack_exports__entryPoints as entryPoints };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNEVBQTRFLGVBQWU7QUFDM0YsYUFBYTtBQUNiLDRFQUE0RSw0QkFBNEI7QUFDeEcsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCw2Q0FBNkM7QUFDdkc7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsMkRBQTJEO0FBQ3pHLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSwrQkFBK0IsYUFBYTtBQUM1QyxvQ0FBb0M7QUFDcEMsU0FBUztBQUNULHVCQUF1QixtQkFBbUIsdUJBQXVCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixjQUFjO0FBQzdDLG9DQUFvQztBQUNwQyxTQUFTO0FBQ1Q7QUFDQSwrQkFBK0IseUJBQXlCO0FBQ3hELG9DQUFvQztBQUNwQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsdURBQXVELHNCQUFzQixzQ0FBc0Msc0JBQXNCLHNCQUFzQix1Q0FBdUM7QUFDclEsNENBQTRDLHlDQUF5QyxJQUFJO0FBQ3pGLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCx1REFBdUQsd0JBQXdCO0FBQzlJO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixJQUFJO0FBQ3pCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsU0FBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlGQUF5RixtQkFBbUI7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLE9BQU87QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlEQUFpRCxxQ0FBcUM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix5REFBeUQ7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsbURBQW1EO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHdCQUF3QjtBQUN2RCx3REFBd0QsbURBQW1EO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLGdCQUFnQjtBQUMzRyxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJFQUEyRTtBQUN6RztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9COztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixPQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG9FQUFvRSxJQUFJLCtDQUErQztBQUN0SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDhCQUE4QjtBQUN0RSwyQ0FBMkMsc0NBQXNDO0FBQ2pGLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCwwQ0FBMEM7QUFDbEcsb0NBQW9DLHFCQUFxQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlCQUF5Qiw2Q0FBNkM7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUseUJBQXlCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRiw2QkFBNkI7QUFDakgsOEJBQThCLGlCQUFpQixpREFBaUQ7QUFDaEc7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsNERBQTREO0FBQzVEO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxvREFBb0QsT0FBTztBQUMzRCxnRkFBZ0Ysc0NBQXNDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGlGQUFpRjtBQUM1SCxhQUFhLHdCQUF3QixpRkFBaUY7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCwyQkFBMkIsaUZBQWlGLElBQUk7QUFDL0ssdUNBQXVDLGlGQUFpRjtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCwyQkFBMkIsMkNBQTJDLElBQUk7QUFDekksdUNBQXVDLDRFQUE0RTtBQUNuSDtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsMkJBQTJCLG9EQUFvRCxJQUFJO0FBQ2xKLHVDQUF1Qyw0RUFBNEU7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkJBQTJCLG1DQUFtQyxzQ0FBc0MsSUFBSTtBQUN6SCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsdUZBQXVGO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsdUZBQXVGO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsbUJBQW1CO0FBQ2hGLG9FQUFvRSx1QkFBdUI7QUFDM0Y7QUFDQTtBQUNBLDJDQUEyQywwQ0FBMEM7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLGdCQUFnQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxnQkFBZ0I7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQywwQ0FBMEM7QUFDckYsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxPQUFPO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLHFGQUFxRixtQkFBbUI7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0EsbUNBQW1DLHNCQUFzQjtBQUN6RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxxQ0FBcUM7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSw2QkFBNkIsbUJBQW1CLDBCQUEwQjtBQUNySjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELG1DQUFtQztBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQyx3RUFBd0Usc0JBQXNCLG1CQUFtQixrQkFBa0IsVUFBVSxpQkFBaUIsZ0JBQWdCLFVBQVU7QUFDeEwsOEVBQThFLHNCQUFzQjtBQUNwRztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsc0NBQXNDO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsOENBQThDO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDBCQUEwQixvQ0FBb0M7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELFNBQVMsZUFBZTtBQUMzRSw0Q0FBNEMsZUFBZTtBQUMzRDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsd0JBQXdCLDRDQUE0QyxhQUFhO0FBQ3hJO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxjQUFjO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCx5QkFBeUI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxnQ0FBZ0M7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGFBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGdCQUFnQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFdBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDhDQUE4QztBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHNCQUFzQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsd0JBQXdCLGtEQUFrRCxJQUFJLHFCQUFxQjtBQUNwSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsd0JBQXdCLG1EQUFtRCxJQUFJO0FBQ2hIO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHVCQUF1Qix1Q0FBdUM7QUFDaEgsdURBQXVELHFEQUFxRDtBQUM1RztBQUNBLHdEQUF3RCxlQUFlLFlBQVk7QUFDbkY7QUFDQSxpSUFBaUksdUJBQXVCO0FBQ3hKO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsaURBQWlEOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsd0JBQXdCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwQkFBMEI7QUFDckQsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwQkFBMEI7QUFDckQsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFlBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLCtCQUErQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2IsNERBQTRELGtCQUFrQjtBQUM5RSw0REFBNEQsa0JBQWtCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLDZFQUE2RTtBQUNuSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHdEQUF3RDtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGlFQUFpRTtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELDJCQUEyQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCw2Q0FBNkM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsOENBQThDO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELG9EQUFvRDtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCx1Q0FBdUM7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLCtCQUErQjtBQUNqRztBQUNBO0FBQ0Esa0VBQWtFLG9CQUFvQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLDZCQUE2QjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLDZCQUE2Qiw0QkFBNEIsSUFBSTtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxrREFBa0Q7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywwQkFBMEI7QUFDcEU7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxrRkFBa0YsNENBQTRDO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSw2Q0FBNkMsNENBQTRDO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywrQ0FBK0M7QUFDaEYsaUNBQWlDO0FBQ2pDO0FBQ0EsaUNBQWlDLGdEQUFnRDtBQUNqRixpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsd0ZBQXdGO0FBQ3BKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywrQkFBK0I7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsZ0NBQWdDO0FBQzVGO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRCwwQ0FBMEM7QUFDMUMsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLDhDQUE4QztBQUMzSCxzRUFBc0UsOENBQThDO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsNENBQTRDLHlCQUF5QjtBQUNyRTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGlCQUFpQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxnRUFBZ0UsbUJBQW1CLCtEQUErRDtBQUNoTTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsNkJBQTZCO0FBQzlGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsa0NBQWtDO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QiwyRkFBMkYsZ0NBQWdDO0FBQzNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLG9FQUFvRTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsV0FBVztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw0QkFBNEIsc0NBQXNDO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtGQUFrRjtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsWUFBWTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxZQUFZO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELHdEQUF3RDtBQUNqSDtBQUNBO0FBQ0E7QUFDQSwwRkFBMEYsb0JBQW9CO0FBQzlHO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRTtBQUN0RSxtRUFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELG9EQUFvRCxxQkFBcUIsZUFBZTtBQUNwSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLFlBQVk7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsaUJBQWlCLDZCQUE2QjtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELGtCQUFrQjtBQUN2RTtBQUNBO0FBQ0EscURBQXFELGtCQUFrQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsWUFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELG1DQUFtQztBQUNoRztBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSx3Q0FBd0M7QUFDeEc7QUFDQSwwQ0FBMEMsc0NBQXNDO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsU0FBUztBQUNUO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxnQ0FBZ0M7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLCtCQUErQjtBQUM5RTtBQUNBLGtFQUFrRSxvRUFBb0U7QUFDdEk7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0Esa0RBQWtELG9DQUFvQztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx3RUFBd0U7QUFDMUg7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMkNBQTJDLGdCQUFnQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsc0NBQXNDO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxnQ0FBZ0M7QUFDNUY7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLGdFQUFnRSxzQ0FBc0M7QUFDdEc7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpR0FBaUcsdUJBQXVCO0FBQ3hIO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDBCQUEwQjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3REFBd0Q7QUFDdEUsY0FBYyw2QkFBNkI7QUFDM0MseUNBQXlDLDhCQUE4QjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG1EQUFtRCwyQ0FBMkM7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDZCQUE2QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSwyQ0FBMkM7QUFDaEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNkJBQTZCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QiwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiwwQ0FBMEMsaUJBQWlCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsbUJBQW1CO0FBQzlELDhDQUE4Qyw2QkFBNkI7QUFDM0UsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxZQUFZO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBLFNBQVMsd0JBQXdCLG1DQUFtQztBQUNwRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMscUVBQXFFLElBQUksTUFBTTtBQUM3SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLDhDQUE4QyxtQ0FBbUM7QUFDakY7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDBCQUEwQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDRDQUE0QztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDRDQUE0QztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQSw0RUFBNEUsdURBQXVEO0FBQ25JOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQSx3REFBd0QsZ0JBQWdCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxtQkFBbUI7QUFDeEU7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLGdCQUFnQjtBQUN0RjtBQUNBO0FBQ0Esa0RBQWtELHVCQUF1QjtBQUN6RTtBQUNBO0FBQ0EsbUVBQW1FLHlDQUF5QztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsaUNBQWlDO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxrQ0FBa0M7QUFDNUY7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLDhCQUE4QjtBQUNoRztBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsMkNBQTJDLCtCQUErQiwrQkFBK0IsK0JBQStCO0FBQ3hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx3QkFBd0I7QUFDM0QsNERBQTRELHNFQUFzRTtBQUNsSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esc0VBQXNFO0FBQ3RFO0FBQ0EsZ0lBQWdJO0FBQ2hJLHFEQUFxRCxxQkFBcUI7QUFDMUU7QUFDQTtBQUNBLDREQUE0RCxXQUFXO0FBQ3ZFLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLFdBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsV0FBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsb0JBQW9CO0FBQy9FO0FBQ0EsZ09BQWdPO0FBQ2hPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELCtCQUErQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxnQkFBZ0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxVQUFVO0FBQzNFO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQSxpREFBaUQsWUFBWSw0QkFBNEIsYUFBYSxzRkFBc0Y7QUFDNUw7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGtCQUFrQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCwrQ0FBK0M7QUFDckcsdUJBQXVCO0FBQ3ZCO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw0QkFBNEIsZUFBZTtBQUNqRjtBQUNBO0FBQ0EsMERBQTBELGdCQUFnQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsNkJBQTZCO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRiw2QkFBNkI7QUFDaEg7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GLDZCQUE2QjtBQUNoSDtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsMEJBQTBCO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUdBQWlHLFVBQVUsWUFBWSxlQUFlO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0Esb0RBQW9ELGlCQUFpQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0MsaUNBQWlDO0FBQ2pDLHNFQUFzRSwyQ0FBMkM7QUFDakg7QUFDQSxpQ0FBaUM7QUFDakMsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsc0NBQXNDLGlDQUFpQyxnQkFBZ0I7QUFDNUk7QUFDQTtBQUNBLHdEQUF3RCw0Q0FBNEM7QUFDcEc7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQSwwRkFBMEYsWUFBWSxtREFBbUQ7QUFDeko7QUFDQSxpQ0FBaUM7QUFDakMsNkJBQTZCO0FBQzdCO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJEQUEyRDtBQUN6Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywwQ0FBMEM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFlBQVk7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQixpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxXQUFXO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkdBQTZHLHNFQUFzRTtBQUNuTCx5REFBeUQsWUFBWTtBQUNyRTtBQUNBO0FBQ0EseUZBQXlGO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0dBQW9HLFlBQVk7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSwrQ0FBK0M7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0ZBQXdGLDJCQUEyQjtBQUNuSCxnR0FBZ0cscUNBQXFDO0FBQ3JJLHNGQUFzRixTQUFTO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0Esb0dBQW9HO0FBQ3BHO0FBQ0EsNkJBQTZCO0FBQzdCLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsNkNBQTZDO0FBQzNGLGtEQUFrRCx3REFBd0Q7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSxVQUFVLGVBQWU7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RCx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RCx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0QseURBQXlEO0FBQ3pELHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxtQkFBbUI7QUFDbkIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hELCtDQUErQyw4QkFBOEI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw2REFBNkQsOEJBQThCO0FBQzNGO0FBQ0E7QUFDQSxpRUFBaUUsOEJBQThCO0FBQy9GO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxRQUFRO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxzQ0FBc0M7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RywyQkFBMkI7QUFDbEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxnREFBZ0QsMkJBQTJCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLDJCQUEyQjtBQUNsSDtBQUNBO0FBQ0Esc0NBQXNDLG9FQUFvRTtBQUMxRztBQUNBO0FBQ0E7QUFDQSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsdURBQXVEO0FBQzNIO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsV0FBVztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0Usc0JBQXNCO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLCtCQUErQjtBQUMvSDtBQUNBLHlHQUF5RyxnQkFBZ0I7QUFDekg7QUFDQSx1RkFBdUYsZ0JBQWdCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLHVHQUF1Ryw0Q0FBNEM7QUFDbko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1IQUFtSCwrQkFBK0I7QUFDbEoseUdBQXlHLGdCQUFnQjtBQUN6SDtBQUNBLHVGQUF1RixnQkFBZ0I7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0dBQStHLDRDQUE0QztBQUMzSjtBQUNBO0FBQ0E7QUFDQSx1R0FBdUcsZ0JBQWdCO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJHQUEyRyw0Q0FBNEM7QUFDdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsbUJBQW1CO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxzREFBc0QsZ0JBQWdCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtKQUErSixxQkFBcUI7QUFDcEw7QUFDQSxrRkFBa0YsVUFBVTtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZEO0FBQzdEO0FBQ0E7QUFDQSx5Q0FBeUMsR0FBRztBQUM1QztBQUNBO0FBQ0EsaUVBQWlFLHVFQUF1RTtBQUN4SSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLE9BQU87QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQseURBQXlEO0FBQ3pELDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QiwyQkFBMkI7QUFDM0I7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJGQUEyRjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHNGQUFzRiwrQkFBK0I7QUFDckg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsd0JBQXdCO0FBQ3RELGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsaUdBQWlHO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxtRUFBbUU7QUFDOUcsd0NBQXdDLHdDQUF3QztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELDBCQUEwQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDhDQUE4QyxzQkFBc0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLDBDQUEwQztBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMEJBQTBCO0FBQ3ZEO0FBQ0EsK0JBQStCLDZFQUE2RTtBQUM1RywrQ0FBK0MsMkJBQTJCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEJBQTBCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHdCQUF3QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxpQkFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxnQ0FBZ0M7QUFDbkcsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLFlBQVk7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDRDQUE0QztBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsNENBQTRDO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsMkRBQTJEO0FBQ2pILGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsNENBQTRDO0FBQzVDLDRDQUE0QztBQUM1QztBQUNBOztBQUVBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0EsK0NBQStDLFlBQVk7QUFDM0Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxxQ0FBcUMsWUFBWTtBQUNqRDtBQUNBO0FBQ0EsYUFBYSw2Q0FBNkMsZUFBZTtBQUN6RSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSwrQkFBK0I7QUFDL0IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwrQkFBK0IsZUFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHFCQUFxQjtBQUNyRCx5Q0FBeUMsdUNBQXVDLEdBQUc7QUFDbkY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELDJCQUEyQjtBQUN6RjtBQUNBLCtCQUErQix3QkFBd0I7QUFDdkQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG9DQUFvQztBQUN2RTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLHNDQUFzQyxZQUFZO0FBQ2xEOztBQUVBO0FBQ0Esc0NBQXNDLGVBQWU7QUFDckQ7O0FBRUE7QUFDQSxzQ0FBc0MsdUJBQXVCO0FBQzdEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsc0NBQXNDLGtCQUFrQjs7QUFFeEQ7O0FBRUEsQ0FBQztBQUNEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqekxBO0FBQ0E7QUFDQTtBQUNxQztBQUNyQztBQUNBLG9FQUFvRSwyQ0FBTTtBQUMxRSxJQUFJLGtEQUFhO0FBQ2pCLCtFQUErRSxrREFBYSxFQUFFLE1BQU0sYUFBYTtBQUNqSDtBQUNBLFFBQVE7QUFDUixtREFBbUQ7QUFFQTtBQUNuRCxpRUFBZSxLQUFLLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDYlEsMkRBQTJELGNBQWMsT0FBTywwQ0FBMEMsYUFBYSxrQ0FBa0Msb0JBQW9CLHNEQUFDLG1GQUFtRiwwQkFBMEIsT0FBTywrQ0FBK0MsK0JBQStCLHFCQUFxQix5QkFBeUIsMkJBQTJCLHFFQUFxRSxrRUFBa0UsU0FBUyx3RkFBd0YsZ0JBQWdCLGVBQWUsOEJBQThCLG9EQUFvRCxTQUFTLHVDQUF1QyxtQ0FBbUMsaUdBQWlHLHFEQUFxRCxPQUFPLG9CQUFvQixRQUFRLGlDQUFpQywwQkFBMEIsdUJBQXVCLHFCQUFxQixRQUFRLDhDQUE4QyxFQUFFLGlDQUFpQyxNQUFNLDhCQUE4QixLQUFLLCtFQUErRSxNQUFNLFdBQVcsdURBQXVELGtJQUFrSSxnREFBZ0Qsc0tBQXNLLHlCQUF5QixvREFBb0QsMkRBQTJELHNCQUFzQixHQUFHLElBQUksdUJBQXVCLDhCQUE4QixpQkFBaUIsT0FBTyxpRUFBZSxDQUFDLEVBQUM7QUFDdGlFOzs7Ozs7Ozs7OztBQ0RhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0IsR0FBRyxFQUFFO0FBQ2hDO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTyxHQUFHLEVBQUU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsY0FBYyxPQUFPLEdBQUcsRUFBRTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELEVBQUU7QUFDckQ7QUFDQSxhQUFhO0FBQ2IsWUFBWTtBQUNaLFlBQVk7QUFDWixjQUFjO0FBQ2QsYUFBYTtBQUNiLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELHdEQUF3RDtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxhQUFhO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsZUFBZTtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGVBQWU7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxlQUFlO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxPQUFPLEVBQUUsYUFBYSxFQUFFLFFBQVE7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixZQUFZLEdBQUcsV0FBVztBQUM3QyxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJGQUEyRixhQUFhO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtQkFBbUI7QUFDM0M7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsZ0ZBQWdGLEVBQUU7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxJQUFJLEVBQUUsT0FBTztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMExBQTBMLHFCQUFxQixFQUFFLDRCQUE0QixxQkFBcUIsT0FBTyxFQUFFLGVBQWU7QUFDMVI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxQkFBcUIsRUFBRSw0QkFBNEIscUJBQXFCLE9BQU8sRUFBRSxtQkFBbUI7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtGQUErRixhQUFhO0FBQzVHO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRyxlQUFlO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsNEJBQTRCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRyxlQUFlO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGtCQUFrQixFQUFFLGFBQWEsRUFBRSxFQUFFO0FBQ3pFLFFBQVE7QUFDUiwyQ0FBMkMsa0JBQWtCLEVBQUUsYUFBYSxFQUFFLElBQUk7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsRUFBRSxHQUFHLEVBQUU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsZUFBZTtBQUNoSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7O0FDaDBFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixxQkFBTSxnQkFBZ0IscUJBQU0sSUFBSSxxQkFBTSxzQkFBc0IscUJBQU07O0FBRTFGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLCtDQUErQyw2QkFBNkI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFCQUFxQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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RjtVQUNBO1VBQ0EsRTs7Ozs7VUNQQTtVQUNBO1VBQ0E7VUFDQTtVQUNBLEdBQUc7VUFDSDtVQUNBO1VBQ0EsQ0FBQyxJOzs7OztVQ1BELHdGOzs7OztVQ0FBO1VBQ0E7VUFDQTtVQUNBLHVEQUF1RCxpQkFBaUI7VUFDeEU7VUFDQSxnREFBZ0QsYUFBYTtVQUM3RCxFOzs7OztVQ05BO1VBQ0E7VUFDQTtVQUNBO1VBQ0EsRTs7Ozs7Ozs7Ozs7Ozs7O0FDSjhEO0FBRTlEOzs7R0FHRztBQUNJLE1BQU0sV0FBVyxHQUE4QztJQUNyRSxZQUFZLEVBQUUsSUFBSSx1RUFBdUIsRUFBRTtDQUMzQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmZpbi9taWNyb3NvZnQzNjUvb3BlbmZpbi5tczM2NS5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGVuZmluL3dvcmtzcGFjZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL2RleGllL2Rpc3QvZGV4aWUuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9kZXhpZS9pbXBvcnQtd3JhcHBlci5tanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9odG1sLXBhcnNlLXN0cmluZ2lmeS9kaXN0L2h0bWwtcGFyc2Utc3RyaW5naWZ5Lm1vZHVsZS5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL2kxOG5leHQvZGlzdC9janMvaTE4bmV4dC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC5kZWJvdW5jZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9JMThuZXh0UHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvVHJhbnMuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvVHJhbnNXaXRob3V0Q29udGV4dC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9UcmFuc2xhdGlvbi5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9jb250ZXh0LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL2RlZmF1bHRzLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL2kxOG5JbnN0YW5jZS5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9pbml0UmVhY3RJMThuZXh0LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL3VuZXNjYXBlLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL3VzZVNTUi5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy91c2VUcmFuc2xhdGlvbi5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy91dGlscy5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy93aXRoU1NSLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL3dpdGhUcmFuc2xhdGlvbi5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0L2Nqcy9yZWFjdC5kZXZlbG9wbWVudC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0L2luZGV4LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvdGl0bGUtY2FzZS9kaXN0LmVzMjAxNS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3ZvaWQtZWxlbWVudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4vY2xpZW50L3NyYy9tczM2NS1pbnRlZ3JhdGlvbi50cyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1L3dlYnBhY2svcnVudGltZS9ub2RlIG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4vY2xpZW50L3NyYy9tb2R1bGUtZW50cnktcG9pbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIEZvciBsaWNlbnNlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUgb3BlbmZpbi5tczM2NS5qcy5MSUNFTlNFLnR4dCAqL1xudmFyIHQ9ezg3Njp0PT57Y29uc3R7QWJvcnRDb250cm9sbGVyOmUsQWJvcnRTaWduYWw6bn09XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp2b2lkIDA7dC5leHBvcnRzPWUsdC5leHBvcnRzLkFib3J0U2lnbmFsPW4sdC5leHBvcnRzLmRlZmF1bHQ9ZX0sNjA6KHQsZSk9PntlLmJ5dGVMZW5ndGg9ZnVuY3Rpb24odCl7dmFyIGU9cyh0KSxuPWVbMF0scj1lWzFdO3JldHVybiAzKihuK3IpLzQtcn0sZS50b0J5dGVBcnJheT1mdW5jdGlvbih0KXt2YXIgZSxuLGk9cyh0KSxhPWlbMF0sdT1pWzFdLGw9bmV3IG8oZnVuY3Rpb24odCxlLG4pe3JldHVybiAzKihlK24pLzQtbn0oMCxhLHUpKSxjPTAsZj11PjA/YS00OmE7Zm9yKG49MDtuPGY7bis9NCllPXJbdC5jaGFyQ29kZUF0KG4pXTw8MTh8clt0LmNoYXJDb2RlQXQobisxKV08PDEyfHJbdC5jaGFyQ29kZUF0KG4rMildPDw2fHJbdC5jaGFyQ29kZUF0KG4rMyldLGxbYysrXT1lPj4xNiYyNTUsbFtjKytdPWU+PjgmMjU1LGxbYysrXT0yNTUmZTsyPT09dSYmKGU9clt0LmNoYXJDb2RlQXQobildPDwyfHJbdC5jaGFyQ29kZUF0KG4rMSldPj40LGxbYysrXT0yNTUmZSk7MT09PXUmJihlPXJbdC5jaGFyQ29kZUF0KG4pXTw8MTB8clt0LmNoYXJDb2RlQXQobisxKV08PDR8clt0LmNoYXJDb2RlQXQobisyKV0+PjIsbFtjKytdPWU+PjgmMjU1LGxbYysrXT0yNTUmZSk7cmV0dXJuIGx9LGUuZnJvbUJ5dGVBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGUscj10Lmxlbmd0aCxvPXIlMyxpPVtdLGE9MTYzODMscz0wLGw9ci1vO3M8bDtzKz1hKWkucHVzaCh1KHQscyxzK2E+bD9sOnMrYSkpOzE9PT1vPyhlPXRbci0xXSxpLnB1c2gobltlPj4yXStuW2U8PDQmNjNdK1wiPT1cIikpOjI9PT1vJiYoZT0odFtyLTJdPDw4KSt0W3ItMV0saS5wdXNoKG5bZT4+MTBdK25bZT4+NCY2M10rbltlPDwyJjYzXStcIj1cIikpO3JldHVybiBpLmpvaW4oXCJcIil9O2Zvcih2YXIgbj1bXSxyPVtdLG89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxpPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLGE9MDthPDY0OysrYSluW2FdPWlbYV0scltpLmNoYXJDb2RlQXQoYSldPWE7ZnVuY3Rpb24gcyh0KXt2YXIgZT10Lmxlbmd0aDtpZihlJTQ+MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpO3ZhciBuPXQuaW5kZXhPZihcIj1cIik7cmV0dXJuLTE9PT1uJiYobj1lKSxbbixuPT09ZT8wOjQtbiU0XX1mdW5jdGlvbiB1KHQsZSxyKXtmb3IodmFyIG8saSxhPVtdLHM9ZTtzPHI7cys9MylvPSh0W3NdPDwxNiYxNjcxMTY4MCkrKHRbcysxXTw8OCY2NTI4MCkrKDI1NSZ0W3MrMl0pLGEucHVzaChuWyhpPW8pPj4xOCY2M10rbltpPj4xMiY2M10rbltpPj42JjYzXStuWzYzJmldKTtyZXR1cm4gYS5qb2luKFwiXCIpfXJbXCItXCIuY2hhckNvZGVBdCgwKV09NjIscltcIl9cIi5jaGFyQ29kZUF0KDApXT02M30sNDg1Oih0LGUsbik9Pntjb25zdCByPW4oNjApLG89bigyMTUpLGk9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wuZm9yP1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKTpudWxsO2UuQnVmZmVyPXUsZS5TbG93QnVmZmVyPWZ1bmN0aW9uKHQpeyt0IT10JiYodD0wKTtyZXR1cm4gdS5hbGxvYygrdCl9LGUuSU5TUEVDVF9NQVhfQllURVM9NTA7Y29uc3QgYT0yMTQ3NDgzNjQ3O2Z1bmN0aW9uIHModCl7aWYodD5hKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgXCInK3QrJ1wiIGlzIGludmFsaWQgZm9yIG9wdGlvbiBcInNpemVcIicpO2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkodCk7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHUucHJvdG90eXBlKSxlfWZ1bmN0aW9uIHUodCxlLG4pe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJzdHJpbmdcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nLiBSZWNlaXZlZCB0eXBlIG51bWJlcicpO3JldHVybiBmKHQpfXJldHVybiBsKHQsZSxuKX1mdW5jdGlvbiBsKHQsZSxuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gZnVuY3Rpb24odCxlKXtcInN0cmluZ1wiPT10eXBlb2YgZSYmXCJcIiE9PWV8fChlPVwidXRmOFwiKTtpZighdS5pc0VuY29kaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIitlKTtjb25zdCBuPTB8Zyh0LGUpO2xldCByPXMobik7Y29uc3Qgbz1yLndyaXRlKHQsZSk7byE9PW4mJihyPXIuc2xpY2UoMCxvKSk7cmV0dXJuIHJ9KHQsZSk7aWYoQXJyYXlCdWZmZXIuaXNWaWV3KHQpKXJldHVybiBmdW5jdGlvbih0KXtpZihZKHQsVWludDhBcnJheSkpe2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkodCk7cmV0dXJuIGgoZS5idWZmZXIsZS5ieXRlT2Zmc2V0LGUuYnl0ZUxlbmd0aCl9cmV0dXJuIGQodCl9KHQpO2lmKG51bGw9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlIFwiK3R5cGVvZiB0KTtpZihZKHQsQXJyYXlCdWZmZXIpfHx0JiZZKHQuYnVmZmVyLEFycmF5QnVmZmVyKSlyZXR1cm4gaCh0LGUsbik7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyJiYoWSh0LFNoYXJlZEFycmF5QnVmZmVyKXx8dCYmWSh0LmJ1ZmZlcixTaGFyZWRBcnJheUJ1ZmZlcikpKXJldHVybiBoKHQsZSxuKTtpZihcIm51bWJlclwiPT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcicpO2NvbnN0IHI9dC52YWx1ZU9mJiZ0LnZhbHVlT2YoKTtpZihudWxsIT1yJiZyIT09dClyZXR1cm4gdS5mcm9tKHIsZSxuKTtjb25zdCBvPWZ1bmN0aW9uKHQpe2lmKHUuaXNCdWZmZXIodCkpe2NvbnN0IGU9MHxwKHQubGVuZ3RoKSxuPXMoZSk7cmV0dXJuIDA9PT1uLmxlbmd0aHx8dC5jb3B5KG4sMCwwLGUpLG59aWYodm9pZCAwIT09dC5sZW5ndGgpcmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIHQubGVuZ3RofHxLKHQubGVuZ3RoKT9zKDApOmQodCk7aWYoXCJCdWZmZXJcIj09PXQudHlwZSYmQXJyYXkuaXNBcnJheSh0LmRhdGEpKXJldHVybiBkKHQuZGF0YSl9KHQpO2lmKG8pcmV0dXJuIG87aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmbnVsbCE9U3ltYm9sLnRvUHJpbWl0aXZlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W1N5bWJvbC50b1ByaW1pdGl2ZV0pcmV0dXJuIHUuZnJvbSh0W1N5bWJvbC50b1ByaW1pdGl2ZV0oXCJzdHJpbmdcIiksZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIHQpfWZ1bmN0aW9uIGModCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlcicpO2lmKHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIFwiJyt0KydcIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gXCJzaXplXCInKX1mdW5jdGlvbiBmKHQpe3JldHVybiBjKHQpLHModDwwPzA6MHxwKHQpKX1mdW5jdGlvbiBkKHQpe2NvbnN0IGU9dC5sZW5ndGg8MD8wOjB8cCh0Lmxlbmd0aCksbj1zKGUpO2ZvcihsZXQgcj0wO3I8ZTtyKz0xKW5bcl09MjU1JnRbcl07cmV0dXJuIG59ZnVuY3Rpb24gaCh0LGUsbil7aWYoZTwwfHx0LmJ5dGVMZW5ndGg8ZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJvZmZzZXRcIiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKTtpZih0LmJ5dGVMZW5ndGg8ZSsobnx8MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wibGVuZ3RoXCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJyk7bGV0IHI7cmV0dXJuIHI9dm9pZCAwPT09ZSYmdm9pZCAwPT09bj9uZXcgVWludDhBcnJheSh0KTp2b2lkIDA9PT1uP25ldyBVaW50OEFycmF5KHQsZSk6bmV3IFVpbnQ4QXJyYXkodCxlLG4pLE9iamVjdC5zZXRQcm90b3R5cGVPZihyLHUucHJvdG90eXBlKSxyfWZ1bmN0aW9uIHAodCl7aWYodD49YSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHhcIithLnRvU3RyaW5nKDE2KStcIiBieXRlc1wiKTtyZXR1cm4gMHx0fWZ1bmN0aW9uIGcodCxlKXtpZih1LmlzQnVmZmVyKHQpKXJldHVybiB0Lmxlbmd0aDtpZihBcnJheUJ1ZmZlci5pc1ZpZXcodCl8fFkodCxBcnJheUJ1ZmZlcikpcmV0dXJuIHQuYnl0ZUxlbmd0aDtpZihcInN0cmluZ1wiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJzdHJpbmdcIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBvciBBcnJheUJ1ZmZlci4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiB0KTtjb25zdCBuPXQubGVuZ3RoLHI9YXJndW1lbnRzLmxlbmd0aD4yJiYhMD09PWFyZ3VtZW50c1syXTtpZighciYmMD09PW4pcmV0dXJuIDA7bGV0IG89ITE7Zm9yKDs7KXN3aXRjaChlKXtjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBuO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiBWKHQpLmxlbmd0aDtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gMipuO2Nhc2VcImhleFwiOnJldHVybiBuPj4+MTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gRyh0KS5sZW5ndGg7ZGVmYXVsdDppZihvKXJldHVybiByPy0xOlYodCkubGVuZ3RoO2U9KFwiXCIrZSkudG9Mb3dlckNhc2UoKSxvPSEwfX1mdW5jdGlvbiB5KHQsZSxuKXtsZXQgcj0hMTtpZigodm9pZCAwPT09ZXx8ZTwwKSYmKGU9MCksZT50aGlzLmxlbmd0aClyZXR1cm5cIlwiO2lmKCh2b2lkIDA9PT1ufHxuPnRoaXMubGVuZ3RoKSYmKG49dGhpcy5sZW5ndGgpLG48PTApcmV0dXJuXCJcIjtpZigobj4+Pj0wKTw9KGU+Pj49MCkpcmV0dXJuXCJcIjtmb3IodHx8KHQ9XCJ1dGY4XCIpOzspc3dpdGNoKHQpe2Nhc2VcImhleFwiOnJldHVybiBCKHRoaXMsZSxuKTtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gVCh0aGlzLGUsbik7Y2FzZVwiYXNjaWlcIjpyZXR1cm4geCh0aGlzLGUsbik7Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIEModGhpcyxlLG4pO2Nhc2VcImJhc2U2NFwiOnJldHVybiBJKHRoaXMsZSxuKTtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gayh0aGlzLGUsbik7ZGVmYXVsdDppZihyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIit0KTt0PSh0K1wiXCIpLnRvTG93ZXJDYXNlKCkscj0hMH19ZnVuY3Rpb24gbSh0LGUsbil7Y29uc3Qgcj10W2VdO3RbZV09dFtuXSx0W25dPXJ9ZnVuY3Rpb24gdih0LGUsbixyLG8pe2lmKDA9PT10Lmxlbmd0aClyZXR1cm4tMTtpZihcInN0cmluZ1wiPT10eXBlb2Ygbj8ocj1uLG49MCk6bj4yMTQ3NDgzNjQ3P249MjE0NzQ4MzY0NzpuPC0yMTQ3NDgzNjQ4JiYobj0tMjE0NzQ4MzY0OCksSyhuPStuKSYmKG49bz8wOnQubGVuZ3RoLTEpLG48MCYmKG49dC5sZW5ndGgrbiksbj49dC5sZW5ndGgpe2lmKG8pcmV0dXJuLTE7bj10Lmxlbmd0aC0xfWVsc2UgaWYobjwwKXtpZighbylyZXR1cm4tMTtuPTB9aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPXUuZnJvbShlLHIpKSx1LmlzQnVmZmVyKGUpKXJldHVybiAwPT09ZS5sZW5ndGg/LTE6Yih0LGUsbixyLG8pO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiBlJj0yNTUsXCJmdW5jdGlvblwiPT10eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZj9vP1VpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LGUsbik6VWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbCh0LGUsbik6Yih0LFtlXSxuLHIsbyk7dGhyb3cgbmV3IFR5cGVFcnJvcihcInZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlclwiKX1mdW5jdGlvbiBiKHQsZSxuLHIsbyl7bGV0IGksYT0xLHM9dC5sZW5ndGgsdT1lLmxlbmd0aDtpZih2b2lkIDAhPT1yJiYoXCJ1Y3MyXCI9PT0ocj1TdHJpbmcocikudG9Mb3dlckNhc2UoKSl8fFwidWNzLTJcIj09PXJ8fFwidXRmMTZsZVwiPT09cnx8XCJ1dGYtMTZsZVwiPT09cikpe2lmKHQubGVuZ3RoPDJ8fGUubGVuZ3RoPDIpcmV0dXJuLTE7YT0yLHMvPTIsdS89MixuLz0yfWZ1bmN0aW9uIGwodCxlKXtyZXR1cm4gMT09PWE/dFtlXTp0LnJlYWRVSW50MTZCRShlKmEpfWlmKG8pe2xldCByPS0xO2ZvcihpPW47aTxzO2krKylpZihsKHQsaSk9PT1sKGUsLTE9PT1yPzA6aS1yKSl7aWYoLTE9PT1yJiYocj1pKSxpLXIrMT09PXUpcmV0dXJuIHIqYX1lbHNlLTEhPT1yJiYoaS09aS1yKSxyPS0xfWVsc2UgZm9yKG4rdT5zJiYobj1zLXUpLGk9bjtpPj0wO2ktLSl7bGV0IG49ITA7Zm9yKGxldCByPTA7cjx1O3IrKylpZihsKHQsaStyKSE9PWwoZSxyKSl7bj0hMTticmVha31pZihuKXJldHVybiBpfXJldHVybi0xfWZ1bmN0aW9uIHcodCxlLG4scil7bj1OdW1iZXIobil8fDA7Y29uc3Qgbz10Lmxlbmd0aC1uO3I/KHI9TnVtYmVyKHIpKT5vJiYocj1vKTpyPW87Y29uc3QgaT1lLmxlbmd0aDtsZXQgYTtmb3Iocj5pLzImJihyPWkvMiksYT0wO2E8cjsrK2Epe2NvbnN0IHI9cGFyc2VJbnQoZS5zdWJzdHIoMiphLDIpLDE2KTtpZihLKHIpKXJldHVybiBhO3RbbithXT1yfXJldHVybiBhfWZ1bmN0aW9uIF8odCxlLG4scil7cmV0dXJuIEooVihlLHQubGVuZ3RoLW4pLHQsbixyKX1mdW5jdGlvbiBFKHQsZSxuLHIpe3JldHVybiBKKGZ1bmN0aW9uKHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDsrK24pZS5wdXNoKDI1NSZ0LmNoYXJDb2RlQXQobikpO3JldHVybiBlfShlKSx0LG4scil9ZnVuY3Rpb24gUyh0LGUsbixyKXtyZXR1cm4gSihHKGUpLHQsbixyKX1mdW5jdGlvbiBBKHQsZSxuLHIpe3JldHVybiBKKGZ1bmN0aW9uKHQsZSl7bGV0IG4scixvO2NvbnN0IGk9W107Zm9yKGxldCBhPTA7YTx0Lmxlbmd0aCYmISgoZS09Mik8MCk7KythKW49dC5jaGFyQ29kZUF0KGEpLHI9bj4+OCxvPW4lMjU2LGkucHVzaChvKSxpLnB1c2gocik7cmV0dXJuIGl9KGUsdC5sZW5ndGgtbiksdCxuLHIpfWZ1bmN0aW9uIEkodCxlLG4pe3JldHVybiAwPT09ZSYmbj09PXQubGVuZ3RoP3IuZnJvbUJ5dGVBcnJheSh0KTpyLmZyb21CeXRlQXJyYXkodC5zbGljZShlLG4pKX1mdW5jdGlvbiBUKHQsZSxuKXtuPU1hdGgubWluKHQubGVuZ3RoLG4pO2NvbnN0IHI9W107bGV0IG89ZTtmb3IoO288bjspe2NvbnN0IGU9dFtvXTtsZXQgaT1udWxsLGE9ZT4yMzk/NDplPjIyMz8zOmU+MTkxPzI6MTtpZihvK2E8PW4pe2xldCBuLHIscyx1O3N3aXRjaChhKXtjYXNlIDE6ZTwxMjgmJihpPWUpO2JyZWFrO2Nhc2UgMjpuPXRbbysxXSwxMjg9PSgxOTImbikmJih1PSgzMSZlKTw8Nnw2MyZuLHU+MTI3JiYoaT11KSk7YnJlYWs7Y2FzZSAzOm49dFtvKzFdLHI9dFtvKzJdLDEyOD09KDE5MiZuKSYmMTI4PT0oMTkyJnIpJiYodT0oMTUmZSk8PDEyfCg2MyZuKTw8Nnw2MyZyLHU+MjA0NyYmKHU8NTUyOTZ8fHU+NTczNDMpJiYoaT11KSk7YnJlYWs7Y2FzZSA0Om49dFtvKzFdLHI9dFtvKzJdLHM9dFtvKzNdLDEyOD09KDE5MiZuKSYmMTI4PT0oMTkyJnIpJiYxMjg9PSgxOTImcykmJih1PSgxNSZlKTw8MTh8KDYzJm4pPDwxMnwoNjMmcik8PDZ8NjMmcyx1PjY1NTM1JiZ1PDExMTQxMTImJihpPXUpKX19bnVsbD09PWk/KGk9NjU1MzMsYT0xKTppPjY1NTM1JiYoaS09NjU1MzYsci5wdXNoKGk+Pj4xMCYxMDIzfDU1Mjk2KSxpPTU2MzIwfDEwMjMmaSksci5wdXNoKGkpLG8rPWF9cmV0dXJuIGZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5sZW5ndGg7aWYoZTw9UilyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdCk7bGV0IG49XCJcIixyPTA7Zm9yKDtyPGU7KW4rPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHQuc2xpY2UocixyKz1SKSk7cmV0dXJuIG59KHIpfWUua01heExlbmd0aD1hLHUuVFlQRURfQVJSQVlfU1VQUE9SVD1mdW5jdGlvbigpe3RyeXtjb25zdCB0PW5ldyBVaW50OEFycmF5KDEpLGU9e2ZvbzpmdW5jdGlvbigpe3JldHVybiA0Mn19O3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxVaW50OEFycmF5LnByb3RvdHlwZSksT2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSksNDI9PT10LmZvbygpfWNhdGNoKHQpe3JldHVybiExfX0oKSx1LlRZUEVEX0FSUkFZX1NVUFBPUlR8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBjb25zb2xlLmVycm9yfHxjb25zb2xlLmVycm9yKFwiVGhpcyBicm93c2VyIGxhY2tzIHR5cGVkIGFycmF5IChVaW50OEFycmF5KSBzdXBwb3J0IHdoaWNoIGlzIHJlcXVpcmVkIGJ5IGBidWZmZXJgIHY1LnguIFVzZSBgYnVmZmVyYCB2NC54IGlmIHlvdSByZXF1aXJlIG9sZCBicm93c2VyIHN1cHBvcnQuXCIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LnByb3RvdHlwZSxcInBhcmVudFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe2lmKHUuaXNCdWZmZXIodGhpcykpcmV0dXJuIHRoaXMuYnVmZmVyfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LnByb3RvdHlwZSxcIm9mZnNldFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe2lmKHUuaXNCdWZmZXIodGhpcykpcmV0dXJuIHRoaXMuYnl0ZU9mZnNldH19KSx1LnBvb2xTaXplPTgxOTIsdS5mcm9tPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbCh0LGUsbil9LE9iamVjdC5zZXRQcm90b3R5cGVPZih1LnByb3RvdHlwZSxVaW50OEFycmF5LnByb3RvdHlwZSksT2JqZWN0LnNldFByb3RvdHlwZU9mKHUsVWludDhBcnJheSksdS5hbGxvYz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gYyh0KSx0PD0wP3ModCk6dm9pZCAwIT09ZT9cInN0cmluZ1wiPT10eXBlb2Ygbj9zKHQpLmZpbGwoZSxuKTpzKHQpLmZpbGwoZSk6cyh0KX0odCxlLG4pfSx1LmFsbG9jVW5zYWZlPWZ1bmN0aW9uKHQpe3JldHVybiBmKHQpfSx1LmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbih0KXtyZXR1cm4gZih0KX0sdS5pc0J1ZmZlcj1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dCYmITA9PT10Ll9pc0J1ZmZlciYmdCE9PXUucHJvdG90eXBlfSx1LmNvbXBhcmU9ZnVuY3Rpb24odCxlKXtpZihZKHQsVWludDhBcnJheSkmJih0PXUuZnJvbSh0LHQub2Zmc2V0LHQuYnl0ZUxlbmd0aCkpLFkoZSxVaW50OEFycmF5KSYmKGU9dS5mcm9tKGUsZS5vZmZzZXQsZS5ieXRlTGVuZ3RoKSksIXUuaXNCdWZmZXIodCl8fCF1LmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImJ1ZjFcIiwgXCJidWYyXCIgYXJndW1lbnRzIG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXknKTtpZih0PT09ZSlyZXR1cm4gMDtsZXQgbj10Lmxlbmd0aCxyPWUubGVuZ3RoO2ZvcihsZXQgbz0wLGk9TWF0aC5taW4obixyKTtvPGk7KytvKWlmKHRbb10hPT1lW29dKXtuPXRbb10scj1lW29dO2JyZWFrfXJldHVybiBuPHI/LTE6cjxuPzE6MH0sdS5pc0VuY29kaW5nPWZ1bmN0aW9uKHQpe3N3aXRjaChTdHJpbmcodCkudG9Mb3dlckNhc2UoKSl7Y2FzZVwiaGV4XCI6Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6Y2FzZVwiYXNjaWlcIjpjYXNlXCJsYXRpbjFcIjpjYXNlXCJiaW5hcnlcIjpjYXNlXCJiYXNlNjRcIjpjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0sdS5jb25jYXQ9ZnVuY3Rpb24odCxlKXtpZighQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHUuYWxsb2MoMCk7bGV0IG47aWYodm9pZCAwPT09ZSlmb3IoZT0wLG49MDtuPHQubGVuZ3RoOysrbillKz10W25dLmxlbmd0aDtjb25zdCByPXUuYWxsb2NVbnNhZmUoZSk7bGV0IG89MDtmb3Iobj0wO248dC5sZW5ndGg7KytuKXtsZXQgZT10W25dO2lmKFkoZSxVaW50OEFycmF5KSlvK2UubGVuZ3RoPnIubGVuZ3RoPyh1LmlzQnVmZmVyKGUpfHwoZT11LmZyb20oZSkpLGUuY29weShyLG8pKTpVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChyLGUsbyk7ZWxzZXtpZighdS5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTtlLmNvcHkocixvKX1vKz1lLmxlbmd0aH1yZXR1cm4gcn0sdS5ieXRlTGVuZ3RoPWcsdS5wcm90b3R5cGUuX2lzQnVmZmVyPSEwLHUucHJvdG90eXBlLnN3YXAxNj1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5sZW5ndGg7aWYodCUyIT0wKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHNcIik7Zm9yKGxldCBlPTA7ZTx0O2UrPTIpbSh0aGlzLGUsZSsxKTtyZXR1cm4gdGhpc30sdS5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmxlbmd0aDtpZih0JTQhPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0c1wiKTtmb3IobGV0IGU9MDtlPHQ7ZSs9NCltKHRoaXMsZSxlKzMpLG0odGhpcyxlKzEsZSsyKTtyZXR1cm4gdGhpc30sdS5wcm90b3R5cGUuc3dhcDY0PWZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmxlbmd0aDtpZih0JTghPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0c1wiKTtmb3IobGV0IGU9MDtlPHQ7ZSs9OCltKHRoaXMsZSxlKzcpLG0odGhpcyxlKzEsZSs2KSxtKHRoaXMsZSsyLGUrNSksbSh0aGlzLGUrMyxlKzQpO3JldHVybiB0aGlzfSx1LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5sZW5ndGg7cmV0dXJuIDA9PT10P1wiXCI6MD09PWFyZ3VtZW50cy5sZW5ndGg/VCh0aGlzLDAsdCk6eS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHUucHJvdG90eXBlLnRvTG9jYWxlU3RyaW5nPXUucHJvdG90eXBlLnRvU3RyaW5nLHUucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtpZighdS5pc0J1ZmZlcih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlclwiKTtyZXR1cm4gdGhpcz09PXR8fDA9PT11LmNvbXBhcmUodGhpcyx0KX0sdS5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbigpe2xldCB0PVwiXCI7Y29uc3Qgbj1lLklOU1BFQ1RfTUFYX0JZVEVTO3JldHVybiB0PXRoaXMudG9TdHJpbmcoXCJoZXhcIiwwLG4pLnJlcGxhY2UoLyguezJ9KS9nLFwiJDEgXCIpLnRyaW0oKSx0aGlzLmxlbmd0aD5uJiYodCs9XCIgLi4uIFwiKSxcIjxCdWZmZXIgXCIrdCtcIj5cIn0saSYmKHUucHJvdG90eXBlW2ldPXUucHJvdG90eXBlLmluc3BlY3QpLHUucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCxlLG4scixvKXtpZihZKHQsVWludDhBcnJheSkmJih0PXUuZnJvbSh0LHQub2Zmc2V0LHQuYnl0ZUxlbmd0aCkpLCF1LmlzQnVmZmVyKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcInRhcmdldFwiIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXkuIFJlY2VpdmVkIHR5cGUgJyt0eXBlb2YgdCk7aWYodm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dD90Lmxlbmd0aDowKSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz10aGlzLmxlbmd0aCksZTwwfHxuPnQubGVuZ3RofHxyPDB8fG8+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvdXQgb2YgcmFuZ2UgaW5kZXhcIik7aWYocj49byYmZT49bilyZXR1cm4gMDtpZihyPj1vKXJldHVybi0xO2lmKGU+PW4pcmV0dXJuIDE7aWYodGhpcz09PXQpcmV0dXJuIDA7bGV0IGk9KG8+Pj49MCktKHI+Pj49MCksYT0obj4+Pj0wKS0oZT4+Pj0wKTtjb25zdCBzPU1hdGgubWluKGksYSksbD10aGlzLnNsaWNlKHIsbyksYz10LnNsaWNlKGUsbik7Zm9yKGxldCB0PTA7dDxzOysrdClpZihsW3RdIT09Y1t0XSl7aT1sW3RdLGE9Y1t0XTticmVha31yZXR1cm4gaTxhPy0xOmE8aT8xOjB9LHUucHJvdG90eXBlLmluY2x1ZGVzPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4tMSE9PXRoaXMuaW5kZXhPZih0LGUsbil9LHUucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2KHRoaXMsdCxlLG4sITApfSx1LnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHYodGhpcyx0LGUsbiwhMSl9LHUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHZvaWQgMD09PWUpcj1cInV0ZjhcIixuPXRoaXMubGVuZ3RoLGU9MDtlbHNlIGlmKHZvaWQgMD09PW4mJlwic3RyaW5nXCI9PXR5cGVvZiBlKXI9ZSxuPXRoaXMubGVuZ3RoLGU9MDtlbHNle2lmKCFpc0Zpbml0ZShlKSl0aHJvdyBuZXcgRXJyb3IoXCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZFwiKTtlPj4+PTAsaXNGaW5pdGUobik/KG4+Pj49MCx2b2lkIDA9PT1yJiYocj1cInV0ZjhcIikpOihyPW4sbj12b2lkIDApfWNvbnN0IG89dGhpcy5sZW5ndGgtZTtpZigodm9pZCAwPT09bnx8bj5vKSYmKG49byksdC5sZW5ndGg+MCYmKG48MHx8ZTwwKXx8ZT50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkF0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzXCIpO3J8fChyPVwidXRmOFwiKTtsZXQgaT0hMTtmb3IoOzspc3dpdGNoKHIpe2Nhc2VcImhleFwiOnJldHVybiB3KHRoaXMsdCxlLG4pO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiBfKHRoaXMsdCxlLG4pO2Nhc2VcImFzY2lpXCI6Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIEUodGhpcyx0LGUsbik7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIFModGhpcyx0LGUsbik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIEEodGhpcyx0LGUsbik7ZGVmYXVsdDppZihpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIityKTtyPShcIlwiK3IpLnRvTG93ZXJDYXNlKCksaT0hMH19LHUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOlwiQnVmZmVyXCIsZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnJ8fHRoaXMsMCl9fTtjb25zdCBSPTQwOTY7ZnVuY3Rpb24geCh0LGUsbil7bGV0IHI9XCJcIjtuPU1hdGgubWluKHQubGVuZ3RoLG4pO2ZvcihsZXQgbz1lO288bjsrK28pcis9U3RyaW5nLmZyb21DaGFyQ29kZSgxMjcmdFtvXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQyh0LGUsbil7bGV0IHI9XCJcIjtuPU1hdGgubWluKHQubGVuZ3RoLG4pO2ZvcihsZXQgbz1lO288bjsrK28pcis9U3RyaW5nLmZyb21DaGFyQ29kZSh0W29dKTtyZXR1cm4gcn1mdW5jdGlvbiBCKHQsZSxuKXtjb25zdCByPXQubGVuZ3RoOyghZXx8ZTwwKSYmKGU9MCksKCFufHxuPDB8fG4+cikmJihuPXIpO2xldCBvPVwiXCI7Zm9yKGxldCByPWU7cjxuOysrcilvKz1YW3Rbcl1dO3JldHVybiBvfWZ1bmN0aW9uIGsodCxlLG4pe2NvbnN0IHI9dC5zbGljZShlLG4pO2xldCBvPVwiXCI7Zm9yKGxldCB0PTA7dDxyLmxlbmd0aC0xO3QrPTIpbys9U3RyaW5nLmZyb21DaGFyQ29kZShyW3RdKzI1NipyW3QrMV0pO3JldHVybiBvfWZ1bmN0aW9uIEwodCxlLG4pe2lmKHQlMSE9MHx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwib2Zmc2V0IGlzIG5vdCB1aW50XCIpO2lmKHQrZT5uKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyxpKXtpZighdS5pc0J1ZmZlcih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZihlPm98fGU8aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKTtpZihuK3I+dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIil9ZnVuY3Rpb24gVSh0LGUsbixyLG8pe0YoZSxyLG8sdCxuLDcpO2xldCBpPU51bWJlcihlJkJpZ0ludCg0Mjk0OTY3Mjk1KSk7dFtuKytdPWksaT4+PTgsdFtuKytdPWksaT4+PTgsdFtuKytdPWksaT4+PTgsdFtuKytdPWk7bGV0IGE9TnVtYmVyKGU+PkJpZ0ludCgzMikmQmlnSW50KDQyOTQ5NjcyOTUpKTtyZXR1cm4gdFtuKytdPWEsYT4+PTgsdFtuKytdPWEsYT4+PTgsdFtuKytdPWEsYT4+PTgsdFtuKytdPWEsbn1mdW5jdGlvbiBqKHQsZSxuLHIsbyl7RihlLHIsbyx0LG4sNyk7bGV0IGk9TnVtYmVyKGUmQmlnSW50KDQyOTQ5NjcyOTUpKTt0W24rN109aSxpPj49OCx0W24rNl09aSxpPj49OCx0W24rNV09aSxpPj49OCx0W24rNF09aTtsZXQgYT1OdW1iZXIoZT4+QmlnSW50KDMyKSZCaWdJbnQoNDI5NDk2NzI5NSkpO3JldHVybiB0W24rM109YSxhPj49OCx0W24rMl09YSxhPj49OCx0W24rMV09YSxhPj49OCx0W25dPWEsbis4fWZ1bmN0aW9uIE4odCxlLG4scixvLGkpe2lmKG4rcj50Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKTtpZihuPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIil9ZnVuY3Rpb24gTSh0LGUsbixyLGkpe3JldHVybiBlPStlLG4+Pj49MCxpfHxOKHQsMCxuLDQpLG8ud3JpdGUodCxlLG4sciwyMyw0KSxuKzR9ZnVuY3Rpb24gUCh0LGUsbixyLGkpe3JldHVybiBlPStlLG4+Pj49MCxpfHxOKHQsMCxuLDgpLG8ud3JpdGUodCxlLG4sciw1Miw4KSxuKzh9dS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMubGVuZ3RoOyh0PX5+dCk8MD8odCs9bik8MCYmKHQ9MCk6dD5uJiYodD1uKSwoZT12b2lkIDA9PT1lP246fn5lKTwwPyhlKz1uKTwwJiYoZT0wKTplPm4mJihlPW4pLGU8dCYmKGU9dCk7Y29uc3Qgcj10aGlzLnN1YmFycmF5KHQsZSk7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihyLHUucHJvdG90eXBlKSxyfSx1LnByb3RvdHlwZS5yZWFkVWludExFPXUucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24odCxlLG4pe3Q+Pj49MCxlPj4+PTAsbnx8TCh0LGUsdGhpcy5sZW5ndGgpO2xldCByPXRoaXNbdF0sbz0xLGk9MDtmb3IoOysraTxlJiYobyo9MjU2KTspcis9dGhpc1t0K2ldKm87cmV0dXJuIHJ9LHUucHJvdG90eXBlLnJlYWRVaW50QkU9dS5wcm90b3R5cGUucmVhZFVJbnRCRT1mdW5jdGlvbih0LGUsbil7dD4+Pj0wLGU+Pj49MCxufHxMKHQsZSx0aGlzLmxlbmd0aCk7bGV0IHI9dGhpc1t0Ky0tZV0sbz0xO2Zvcig7ZT4wJiYobyo9MjU2KTspcis9dGhpc1t0Ky0tZV0qbztyZXR1cm4gcn0sdS5wcm90b3R5cGUucmVhZFVpbnQ4PXUucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDEsdGhpcy5sZW5ndGgpLHRoaXNbdF19LHUucHJvdG90eXBlLnJlYWRVaW50MTZMRT11LnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD4+Pj0wLGV8fEwodCwyLHRoaXMubGVuZ3RoKSx0aGlzW3RdfHRoaXNbdCsxXTw8OH0sdS5wcm90b3R5cGUucmVhZFVpbnQxNkJFPXUucHJvdG90eXBlLnJlYWRVSW50MTZCRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDIsdGhpcy5sZW5ndGgpLHRoaXNbdF08PDh8dGhpc1t0KzFdfSx1LnByb3RvdHlwZS5yZWFkVWludDMyTEU9dS5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxMKHQsNCx0aGlzLmxlbmd0aCksKHRoaXNbdF18dGhpc1t0KzFdPDw4fHRoaXNbdCsyXTw8MTYpKzE2Nzc3MjE2KnRoaXNbdCszXX0sdS5wcm90b3R5cGUucmVhZFVpbnQzMkJFPXUucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDQsdGhpcy5sZW5ndGgpLDE2Nzc3MjE2KnRoaXNbdF0rKHRoaXNbdCsxXTw8MTZ8dGhpc1t0KzJdPDw4fHRoaXNbdCszXSl9LHUucHJvdG90eXBlLnJlYWRCaWdVSW50NjRMRT1aKChmdW5jdGlvbih0KXt6KHQ+Pj49MCxcIm9mZnNldFwiKTtjb25zdCBlPXRoaXNbdF0sbj10aGlzW3QrN107dm9pZCAwIT09ZSYmdm9pZCAwIT09bnx8cSh0LHRoaXMubGVuZ3RoLTgpO2NvbnN0IHI9ZSsyNTYqdGhpc1srK3RdKzY1NTM2KnRoaXNbKyt0XSt0aGlzWysrdF0qMioqMjQsbz10aGlzWysrdF0rMjU2KnRoaXNbKyt0XSs2NTUzNip0aGlzWysrdF0rbioyKioyNDtyZXR1cm4gQmlnSW50KHIpKyhCaWdJbnQobyk8PEJpZ0ludCgzMikpfSkpLHUucHJvdG90eXBlLnJlYWRCaWdVSW50NjRCRT1aKChmdW5jdGlvbih0KXt6KHQ+Pj49MCxcIm9mZnNldFwiKTtjb25zdCBlPXRoaXNbdF0sbj10aGlzW3QrN107dm9pZCAwIT09ZSYmdm9pZCAwIT09bnx8cSh0LHRoaXMubGVuZ3RoLTgpO2NvbnN0IHI9ZSoyKioyNCs2NTUzNip0aGlzWysrdF0rMjU2KnRoaXNbKyt0XSt0aGlzWysrdF0sbz10aGlzWysrdF0qMioqMjQrNjU1MzYqdGhpc1srK3RdKzI1Nip0aGlzWysrdF0rbjtyZXR1cm4oQmlnSW50KHIpPDxCaWdJbnQoMzIpKStCaWdJbnQobyl9KSksdS5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKHQsZSxuKXt0Pj4+PTAsZT4+Pj0wLG58fEwodCxlLHRoaXMubGVuZ3RoKTtsZXQgcj10aGlzW3RdLG89MSxpPTA7Zm9yKDsrK2k8ZSYmKG8qPTI1Nik7KXIrPXRoaXNbdCtpXSpvO3JldHVybiBvKj0xMjgscj49byYmKHItPU1hdGgucG93KDIsOCplKSkscn0sdS5wcm90b3R5cGUucmVhZEludEJFPWZ1bmN0aW9uKHQsZSxuKXt0Pj4+PTAsZT4+Pj0wLG58fEwodCxlLHRoaXMubGVuZ3RoKTtsZXQgcj1lLG89MSxpPXRoaXNbdCstLXJdO2Zvcig7cj4wJiYobyo9MjU2KTspaSs9dGhpc1t0Ky0tcl0qbztyZXR1cm4gbyo9MTI4LGk+PW8mJihpLT1NYXRoLnBvdygyLDgqZSkpLGl9LHUucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxMKHQsMSx0aGlzLmxlbmd0aCksMTI4JnRoaXNbdF0/LTEqKDI1NS10aGlzW3RdKzEpOnRoaXNbdF19LHUucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uKHQsZSl7dD4+Pj0wLGV8fEwodCwyLHRoaXMubGVuZ3RoKTtjb25zdCBuPXRoaXNbdF18dGhpc1t0KzFdPDw4O3JldHVybiAzMjc2OCZuPzQyOTQ5MDE3NjB8bjpufSx1LnByb3RvdHlwZS5yZWFkSW50MTZCRT1mdW5jdGlvbih0LGUpe3Q+Pj49MCxlfHxMKHQsMix0aGlzLmxlbmd0aCk7Y29uc3Qgbj10aGlzW3QrMV18dGhpc1t0XTw8ODtyZXR1cm4gMzI3Njgmbj80Mjk0OTAxNzYwfG46bn0sdS5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD4+Pj0wLGV8fEwodCw0LHRoaXMubGVuZ3RoKSx0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2fHRoaXNbdCszXTw8MjR9LHUucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxMKHQsNCx0aGlzLmxlbmd0aCksdGhpc1t0XTw8MjR8dGhpc1t0KzFdPDwxNnx0aGlzW3QrMl08PDh8dGhpc1t0KzNdfSx1LnByb3RvdHlwZS5yZWFkQmlnSW50NjRMRT1aKChmdW5jdGlvbih0KXt6KHQ+Pj49MCxcIm9mZnNldFwiKTtjb25zdCBlPXRoaXNbdF0sbj10aGlzW3QrN107dm9pZCAwIT09ZSYmdm9pZCAwIT09bnx8cSh0LHRoaXMubGVuZ3RoLTgpO2NvbnN0IHI9dGhpc1t0KzRdKzI1Nip0aGlzW3QrNV0rNjU1MzYqdGhpc1t0KzZdKyhuPDwyNCk7cmV0dXJuKEJpZ0ludChyKTw8QmlnSW50KDMyKSkrQmlnSW50KGUrMjU2KnRoaXNbKyt0XSs2NTUzNip0aGlzWysrdF0rdGhpc1srK3RdKjIqKjI0KX0pKSx1LnByb3RvdHlwZS5yZWFkQmlnSW50NjRCRT1aKChmdW5jdGlvbih0KXt6KHQ+Pj49MCxcIm9mZnNldFwiKTtjb25zdCBlPXRoaXNbdF0sbj10aGlzW3QrN107dm9pZCAwIT09ZSYmdm9pZCAwIT09bnx8cSh0LHRoaXMubGVuZ3RoLTgpO2NvbnN0IHI9KGU8PDI0KSs2NTUzNip0aGlzWysrdF0rMjU2KnRoaXNbKyt0XSt0aGlzWysrdF07cmV0dXJuKEJpZ0ludChyKTw8QmlnSW50KDMyKSkrQmlnSW50KHRoaXNbKyt0XSoyKioyNCs2NTUzNip0aGlzWysrdF0rMjU2KnRoaXNbKyt0XStuKX0pKSx1LnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDQsdGhpcy5sZW5ndGgpLG8ucmVhZCh0aGlzLHQsITAsMjMsNCl9LHUucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxMKHQsNCx0aGlzLmxlbmd0aCksby5yZWFkKHRoaXMsdCwhMSwyMyw0KX0sdS5wcm90b3R5cGUucmVhZERvdWJsZUxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxMKHQsOCx0aGlzLmxlbmd0aCksby5yZWFkKHRoaXMsdCwhMCw1Miw4KX0sdS5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxMKHQsOCx0aGlzLmxlbmd0aCksby5yZWFkKHRoaXMsdCwhMSw1Miw4KX0sdS5wcm90b3R5cGUud3JpdGVVaW50TEU9dS5wcm90b3R5cGUud3JpdGVVSW50TEU9ZnVuY3Rpb24odCxlLG4scil7aWYodD0rdCxlPj4+PTAsbj4+Pj0wLCFyKXtPKHRoaXMsdCxlLG4sTWF0aC5wb3coMiw4Km4pLTEsMCl9bGV0IG89MSxpPTA7Zm9yKHRoaXNbZV09MjU1JnQ7KytpPG4mJihvKj0yNTYpOyl0aGlzW2UraV09dC9vJjI1NTtyZXR1cm4gZStufSx1LnByb3RvdHlwZS53cml0ZVVpbnRCRT11LnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbih0LGUsbixyKXtpZih0PSt0LGU+Pj49MCxuPj4+PTAsIXIpe08odGhpcyx0LGUsbixNYXRoLnBvdygyLDgqbiktMSwwKX1sZXQgbz1uLTEsaT0xO2Zvcih0aGlzW2Urb109MjU1JnQ7LS1vPj0wJiYoaSo9MjU2KTspdGhpc1tlK29dPXQvaSYyNTU7cmV0dXJuIGUrbn0sdS5wcm90b3R5cGUud3JpdGVVaW50OD11LnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlPj4+PTAsbnx8Tyh0aGlzLHQsZSwxLDI1NSwwKSx0aGlzW2VdPTI1NSZ0LGUrMX0sdS5wcm90b3R5cGUud3JpdGVVaW50MTZMRT11LnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlPj4+PTAsbnx8Tyh0aGlzLHQsZSwyLDY1NTM1LDApLHRoaXNbZV09MjU1JnQsdGhpc1tlKzFdPXQ+Pj44LGUrMn0sdS5wcm90b3R5cGUud3JpdGVVaW50MTZCRT11LnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlPj4+PTAsbnx8Tyh0aGlzLHQsZSwyLDY1NTM1LDApLHRoaXNbZV09dD4+PjgsdGhpc1tlKzFdPTI1NSZ0LGUrMn0sdS5wcm90b3R5cGUud3JpdGVVaW50MzJMRT11LnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlPj4+PTAsbnx8Tyh0aGlzLHQsZSw0LDQyOTQ5NjcyOTUsMCksdGhpc1tlKzNdPXQ+Pj4yNCx0aGlzW2UrMl09dD4+PjE2LHRoaXNbZSsxXT10Pj4+OCx0aGlzW2VdPTI1NSZ0LGUrNH0sdS5wcm90b3R5cGUud3JpdGVVaW50MzJCRT11LnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlPj4+PTAsbnx8Tyh0aGlzLHQsZSw0LDQyOTQ5NjcyOTUsMCksdGhpc1tlXT10Pj4+MjQsdGhpc1tlKzFdPXQ+Pj4xNix0aGlzW2UrMl09dD4+PjgsdGhpc1tlKzNdPTI1NSZ0LGUrNH0sdS5wcm90b3R5cGUud3JpdGVCaWdVSW50NjRMRT1aKChmdW5jdGlvbih0LGU9MCl7cmV0dXJuIFUodGhpcyx0LGUsQmlnSW50KDApLEJpZ0ludChcIjB4ZmZmZmZmZmZmZmZmZmZmZlwiKSl9KSksdS5wcm90b3R5cGUud3JpdGVCaWdVSW50NjRCRT1aKChmdW5jdGlvbih0LGU9MCl7cmV0dXJuIGoodGhpcyx0LGUsQmlnSW50KDApLEJpZ0ludChcIjB4ZmZmZmZmZmZmZmZmZmZmZlwiKSl9KSksdS5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbih0LGUsbixyKXtpZih0PSt0LGU+Pj49MCwhcil7Y29uc3Qgcj1NYXRoLnBvdygyLDgqbi0xKTtPKHRoaXMsdCxlLG4sci0xLC1yKX1sZXQgbz0wLGk9MSxhPTA7Zm9yKHRoaXNbZV09MjU1JnQ7KytvPG4mJihpKj0yNTYpOyl0PDAmJjA9PT1hJiYwIT09dGhpc1tlK28tMV0mJihhPTEpLHRoaXNbZStvXT0odC9pPj4wKS1hJjI1NTtyZXR1cm4gZStufSx1LnByb3RvdHlwZS53cml0ZUludEJFPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHQ9K3QsZT4+Pj0wLCFyKXtjb25zdCByPU1hdGgucG93KDIsOCpuLTEpO08odGhpcyx0LGUsbixyLTEsLXIpfWxldCBvPW4tMSxpPTEsYT0wO2Zvcih0aGlzW2Urb109MjU1JnQ7LS1vPj0wJiYoaSo9MjU2KTspdDwwJiYwPT09YSYmMCE9PXRoaXNbZStvKzFdJiYoYT0xKSx0aGlzW2Urb109KHQvaT4+MCktYSYyNTU7cmV0dXJuIGUrbn0sdS5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlPj4+PTAsbnx8Tyh0aGlzLHQsZSwxLDEyNywtMTI4KSx0PDAmJih0PTI1NSt0KzEpLHRoaXNbZV09MjU1JnQsZSsxfSx1LnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PSt0LGU+Pj49MCxufHxPKHRoaXMsdCxlLDIsMzI3NjcsLTMyNzY4KSx0aGlzW2VdPTI1NSZ0LHRoaXNbZSsxXT10Pj4+OCxlKzJ9LHUucHJvdG90eXBlLndyaXRlSW50MTZCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsMiwzMjc2NywtMzI3NjgpLHRoaXNbZV09dD4+PjgsdGhpc1tlKzFdPTI1NSZ0LGUrMn0sdS5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlPj4+PTAsbnx8Tyh0aGlzLHQsZSw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLHRoaXNbZV09MjU1JnQsdGhpc1tlKzFdPXQ+Pj44LHRoaXNbZSsyXT10Pj4+MTYsdGhpc1tlKzNdPXQ+Pj4yNCxlKzR9LHUucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KSx0PDAmJih0PTQyOTQ5NjcyOTUrdCsxKSx0aGlzW2VdPXQ+Pj4yNCx0aGlzW2UrMV09dD4+PjE2LHRoaXNbZSsyXT10Pj4+OCx0aGlzW2UrM109MjU1JnQsZSs0fSx1LnByb3RvdHlwZS53cml0ZUJpZ0ludDY0TEU9WigoZnVuY3Rpb24odCxlPTApe3JldHVybiBVKHRoaXMsdCxlLC1CaWdJbnQoXCIweDgwMDAwMDAwMDAwMDAwMDBcIiksQmlnSW50KFwiMHg3ZmZmZmZmZmZmZmZmZmZmXCIpKX0pKSx1LnByb3RvdHlwZS53cml0ZUJpZ0ludDY0QkU9WigoZnVuY3Rpb24odCxlPTApe3JldHVybiBqKHRoaXMsdCxlLC1CaWdJbnQoXCIweDgwMDAwMDAwMDAwMDAwMDBcIiksQmlnSW50KFwiMHg3ZmZmZmZmZmZmZmZmZmZmXCIpKX0pKSx1LnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBNKHRoaXMsdCxlLCEwLG4pfSx1LnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBNKHRoaXMsdCxlLCExLG4pfSx1LnByb3RvdHlwZS53cml0ZURvdWJsZUxFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gUCh0aGlzLHQsZSwhMCxuKX0sdS5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFAodGhpcyx0LGUsITEsbil9LHUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCxlLG4scil7aWYoIXUuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImFyZ3VtZW50IHNob3VsZCBiZSBhIEJ1ZmZlclwiKTtpZihufHwobj0wKSxyfHwwPT09cnx8KHI9dGhpcy5sZW5ndGgpLGU+PXQubGVuZ3RoJiYoZT10Lmxlbmd0aCksZXx8KGU9MCkscj4wJiZyPG4mJihyPW4pLHI9PT1uKXJldHVybiAwO2lmKDA9PT10Lmxlbmd0aHx8MD09PXRoaXMubGVuZ3RoKXJldHVybiAwO2lmKGU8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHNcIik7aWYobjwwfHxuPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKTtpZihyPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kc1wiKTtyPnRoaXMubGVuZ3RoJiYocj10aGlzLmxlbmd0aCksdC5sZW5ndGgtZTxyLW4mJihyPXQubGVuZ3RoLWUrbik7Y29uc3Qgbz1yLW47cmV0dXJuIHRoaXM9PT10JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluP3RoaXMuY29weVdpdGhpbihlLG4scik6VWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwodCx0aGlzLnN1YmFycmF5KG4sciksZSksb30sdS5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbih0LGUsbixyKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGU/KHI9ZSxlPTAsbj10aGlzLmxlbmd0aCk6XCJzdHJpbmdcIj09dHlwZW9mIG4mJihyPW4sbj10aGlzLmxlbmd0aCksdm9pZCAwIT09ciYmXCJzdHJpbmdcIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcihcImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHImJiF1LmlzRW5jb2RpbmcocikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK3IpO2lmKDE9PT10Lmxlbmd0aCl7Y29uc3QgZT10LmNoYXJDb2RlQXQoMCk7KFwidXRmOFwiPT09ciYmZTwxMjh8fFwibGF0aW4xXCI9PT1yKSYmKHQ9ZSl9fWVsc2VcIm51bWJlclwiPT10eXBlb2YgdD90Jj0yNTU6XCJib29sZWFuXCI9PXR5cGVvZiB0JiYodD1OdW1iZXIodCkpO2lmKGU8MHx8dGhpcy5sZW5ndGg8ZXx8dGhpcy5sZW5ndGg8bil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk91dCBvZiByYW5nZSBpbmRleFwiKTtpZihuPD1lKXJldHVybiB0aGlzO2xldCBvO2lmKGU+Pj49MCxuPXZvaWQgMD09PW4/dGhpcy5sZW5ndGg6bj4+PjAsdHx8KHQ9MCksXCJudW1iZXJcIj09dHlwZW9mIHQpZm9yKG89ZTtvPG47KytvKXRoaXNbb109dDtlbHNle2NvbnN0IGk9dS5pc0J1ZmZlcih0KT90OnUuZnJvbSh0LHIpLGE9aS5sZW5ndGg7aWYoMD09PWEpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIHZhbHVlIFwiJyt0KydcIiBpcyBpbnZhbGlkIGZvciBhcmd1bWVudCBcInZhbHVlXCInKTtmb3Iobz0wO288bi1lOysrbyl0aGlzW28rZV09aVtvJWFdfXJldHVybiB0aGlzfTtjb25zdCBXPXt9O2Z1bmN0aW9uICQodCxlLG4pe1dbdF09Y2xhc3MgTm9kZUVycm9yIGV4dGVuZHMgbntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJtZXNzYWdlXCIse3ZhbHVlOmUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHRoaXMubmFtZT1gJHt0aGlzLm5hbWV9IFske3R9XWAsdGhpcy5zdGFjayxkZWxldGUgdGhpcy5uYW1lfWdldCBjb2RlKCl7cmV0dXJuIHR9c2V0IGNvZGUodCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb2RlXCIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOnQsd3JpdGFibGU6ITB9KX10b1N0cmluZygpe3JldHVybmAke3RoaXMubmFtZX0gWyR7dH1dOiAke3RoaXMubWVzc2FnZX1gfX19ZnVuY3Rpb24gRCh0KXtsZXQgZT1cIlwiLG49dC5sZW5ndGg7Y29uc3Qgcj1cIi1cIj09PXRbMF0/MTowO2Zvcig7bj49cis0O24tPTMpZT1gXyR7dC5zbGljZShuLTMsbil9JHtlfWA7cmV0dXJuYCR7dC5zbGljZSgwLG4pfSR7ZX1gfWZ1bmN0aW9uIEYodCxlLG4scixvLGkpe2lmKHQ+bnx8dDxlKXtjb25zdCByPVwiYmlnaW50XCI9PXR5cGVvZiBlP1wiblwiOlwiXCI7bGV0IG87dGhyb3cgbz1pPjM/MD09PWV8fGU9PT1CaWdJbnQoMCk/YD49IDAke3J9IGFuZCA8IDIke3J9ICoqICR7OCooaSsxKX0ke3J9YDpgPj0gLSgyJHtyfSAqKiAkezgqKGkrMSktMX0ke3J9KSBhbmQgPCAyICoqICR7OCooaSsxKS0xfSR7cn1gOmA+PSAke2V9JHtyfSBhbmQgPD0gJHtufSR7cn1gLG5ldyBXLkVSUl9PVVRfT0ZfUkFOR0UoXCJ2YWx1ZVwiLG8sdCl9IWZ1bmN0aW9uKHQsZSxuKXt6KGUsXCJvZmZzZXRcIiksdm9pZCAwIT09dFtlXSYmdm9pZCAwIT09dFtlK25dfHxxKGUsdC5sZW5ndGgtKG4rMSkpfShyLG8saSl9ZnVuY3Rpb24geih0LGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBXLkVSUl9JTlZBTElEX0FSR19UWVBFKGUsXCJudW1iZXJcIix0KX1mdW5jdGlvbiBxKHQsZSxuKXtpZihNYXRoLmZsb29yKHQpIT09dCl0aHJvdyB6KHQsbiksbmV3IFcuRVJSX09VVF9PRl9SQU5HRShufHxcIm9mZnNldFwiLFwiYW4gaW50ZWdlclwiLHQpO2lmKGU8MCl0aHJvdyBuZXcgVy5FUlJfQlVGRkVSX09VVF9PRl9CT1VORFM7dGhyb3cgbmV3IFcuRVJSX09VVF9PRl9SQU5HRShufHxcIm9mZnNldFwiLGA+PSAke24/MTowfSBhbmQgPD0gJHtlfWAsdCl9JChcIkVSUl9CVUZGRVJfT1VUX09GX0JPVU5EU1wiLChmdW5jdGlvbih0KXtyZXR1cm4gdD9gJHt0fSBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHNgOlwiQXR0ZW1wdCB0byBhY2Nlc3MgbWVtb3J5IG91dHNpZGUgYnVmZmVyIGJvdW5kc1wifSksUmFuZ2VFcnJvciksJChcIkVSUl9JTlZBTElEX0FSR19UWVBFXCIsKGZ1bmN0aW9uKHQsZSl7cmV0dXJuYFRoZSBcIiR7dH1cIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlICR7dHlwZW9mIGV9YH0pLFR5cGVFcnJvciksJChcIkVSUl9PVVRfT0ZfUkFOR0VcIiwoZnVuY3Rpb24odCxlLG4pe2xldCByPWBUaGUgdmFsdWUgb2YgXCIke3R9XCIgaXMgb3V0IG9mIHJhbmdlLmAsbz1uO3JldHVybiBOdW1iZXIuaXNJbnRlZ2VyKG4pJiZNYXRoLmFicyhuKT4yKiozMj9vPUQoU3RyaW5nKG4pKTpcImJpZ2ludFwiPT10eXBlb2YgbiYmKG89U3RyaW5nKG4pLChuPkJpZ0ludCgyKSoqQmlnSW50KDMyKXx8bjwtKEJpZ0ludCgyKSoqQmlnSW50KDMyKSkpJiYobz1EKG8pKSxvKz1cIm5cIikscis9YCBJdCBtdXN0IGJlICR7ZX0uIFJlY2VpdmVkICR7b31gLHJ9KSxSYW5nZUVycm9yKTtjb25zdCBIPS9bXisvMC05QS1aYS16LV9dL2c7ZnVuY3Rpb24gVih0LGUpe2xldCBuO2U9ZXx8MS8wO2NvbnN0IHI9dC5sZW5ndGg7bGV0IG89bnVsbDtjb25zdCBpPVtdO2ZvcihsZXQgYT0wO2E8cjsrK2Epe2lmKG49dC5jaGFyQ29kZUF0KGEpLG4+NTUyOTUmJm48NTczNDQpe2lmKCFvKXtpZihuPjU2MzE5KXsoZS09Myk+LTEmJmkucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aWYoYSsxPT09cil7KGUtPTMpPi0xJiZpLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfW89bjtjb250aW51ZX1pZihuPDU2MzIwKXsoZS09Myk+LTEmJmkucHVzaCgyMzksMTkxLDE4OSksbz1uO2NvbnRpbnVlfW49NjU1MzYrKG8tNTUyOTY8PDEwfG4tNTYzMjApfWVsc2UgbyYmKGUtPTMpPi0xJiZpLnB1c2goMjM5LDE5MSwxODkpO2lmKG89bnVsbCxuPDEyOCl7aWYoKGUtPTEpPDApYnJlYWs7aS5wdXNoKG4pfWVsc2UgaWYobjwyMDQ4KXtpZigoZS09Mik8MClicmVhaztpLnB1c2gobj4+NnwxOTIsNjMmbnwxMjgpfWVsc2UgaWYobjw2NTUzNil7aWYoKGUtPTMpPDApYnJlYWs7aS5wdXNoKG4+PjEyfDIyNCxuPj42JjYzfDEyOCw2MyZufDEyOCl9ZWxzZXtpZighKG48MTExNDExMikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb2RlIHBvaW50XCIpO2lmKChlLT00KTwwKWJyZWFrO2kucHVzaChuPj4xOHwyNDAsbj4+MTImNjN8MTI4LG4+PjYmNjN8MTI4LDYzJm58MTI4KX19cmV0dXJuIGl9ZnVuY3Rpb24gRyh0KXtyZXR1cm4gci50b0J5dGVBcnJheShmdW5jdGlvbih0KXtpZigodD0odD10LnNwbGl0KFwiPVwiKVswXSkudHJpbSgpLnJlcGxhY2UoSCxcIlwiKSkubGVuZ3RoPDIpcmV0dXJuXCJcIjtmb3IoO3QubGVuZ3RoJTQhPTA7KXQrPVwiPVwiO3JldHVybiB0fSh0KSl9ZnVuY3Rpb24gSih0LGUsbixyKXtsZXQgbztmb3Iobz0wO288ciYmIShvK24+PWUubGVuZ3RofHxvPj10Lmxlbmd0aCk7KytvKWVbbytuXT10W29dO3JldHVybiBvfWZ1bmN0aW9uIFkodCxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV8fG51bGwhPXQmJm51bGwhPXQuY29uc3RydWN0b3ImJm51bGwhPXQuY29uc3RydWN0b3IubmFtZSYmdC5jb25zdHJ1Y3Rvci5uYW1lPT09ZS5uYW1lfWZ1bmN0aW9uIEsodCl7cmV0dXJuIHQhPXR9Y29uc3QgWD1mdW5jdGlvbigpe2NvbnN0IHQ9XCIwMTIzNDU2Nzg5YWJjZGVmXCIsZT1uZXcgQXJyYXkoMjU2KTtmb3IobGV0IG49MDtuPDE2Oysrbil7Y29uc3Qgcj0xNipuO2ZvcihsZXQgbz0wO288MTY7KytvKWVbcitvXT10W25dK3Rbb119cmV0dXJuIGV9KCk7ZnVuY3Rpb24gWih0KXtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgQmlnSW50P1E6dH1mdW5jdGlvbiBRKCl7dGhyb3cgbmV3IEVycm9yKFwiQmlnSW50IG5vdCBzdXBwb3J0ZWRcIil9fSw0NjU6dD0+e3ZhciBlLG49XCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3Q/UmVmbGVjdDpudWxsLHI9biYmXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5hcHBseT9uLmFwcGx5OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodCxlLG4pfTtlPW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG4ub3duS2V5cz9uLm93bktleXM6T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz9mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModCkuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpfTpmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModCl9O3ZhciBvPU51bWJlci5pc05hTnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQhPXR9O2Z1bmN0aW9uIGkoKXtpLmluaXQuY2FsbCh0aGlzKX10LmV4cG9ydHM9aSx0LmV4cG9ydHMub25jZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXtmdW5jdGlvbiBvKG4pe3QucmVtb3ZlTGlzdGVuZXIoZSxpKSxyKG4pfWZ1bmN0aW9uIGkoKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnJlbW92ZUxpc3RlbmVyJiZ0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixvKSxuKFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9Zyh0LGUsaSx7b25jZTohMH0pLFwiZXJyb3JcIiE9PWUmJmZ1bmN0aW9uKHQsZSxuKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm9uJiZnKHQsXCJlcnJvclwiLGUsbil9KHQsbyx7b25jZTohMH0pfSkpfSxpLkV2ZW50RW1pdHRlcj1pLGkucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLGkucHJvdG90eXBlLl9ldmVudHNDb3VudD0wLGkucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwO3ZhciBhPTEwO2Z1bmN0aW9uIHModCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiB0KX1mdW5jdGlvbiB1KHQpe3JldHVybiB2b2lkIDA9PT10Ll9tYXhMaXN0ZW5lcnM/aS5kZWZhdWx0TWF4TGlzdGVuZXJzOnQuX21heExpc3RlbmVyc31mdW5jdGlvbiBsKHQsZSxuLHIpe3ZhciBvLGksYSxsO2lmKHMobiksdm9pZCAwPT09KGk9dC5fZXZlbnRzKT8oaT10Ll9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0Ll9ldmVudHNDb3VudD0wKToodm9pZCAwIT09aS5uZXdMaXN0ZW5lciYmKHQuZW1pdChcIm5ld0xpc3RlbmVyXCIsZSxuLmxpc3RlbmVyP24ubGlzdGVuZXI6biksaT10Ll9ldmVudHMpLGE9aVtlXSksdm9pZCAwPT09YSlhPWlbZV09biwrK3QuX2V2ZW50c0NvdW50O2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYT9hPWlbZV09cj9bbixhXTpbYSxuXTpyP2EudW5zaGlmdChuKTphLnB1c2gobiksKG89dSh0KSk+MCYmYS5sZW5ndGg+byYmIWEud2FybmVkKXthLndhcm5lZD0hMDt2YXIgYz1uZXcgRXJyb3IoXCJQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuIFwiK2EubGVuZ3RoK1wiIFwiK1N0cmluZyhlKStcIiBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0XCIpO2MubmFtZT1cIk1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZ1wiLGMuZW1pdHRlcj10LGMudHlwZT1lLGMuY291bnQ9YS5sZW5ndGgsbD1jLGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKGwpfXJldHVybiB0fWZ1bmN0aW9uIGMoKXtpZighdGhpcy5maXJlZClyZXR1cm4gdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLHRoaXMud3JhcEZuKSx0aGlzLmZpcmVkPSEwLDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk6dGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCxhcmd1bWVudHMpfWZ1bmN0aW9uIGYodCxlLG4pe3ZhciByPXtmaXJlZDohMSx3cmFwRm46dm9pZCAwLHRhcmdldDp0LHR5cGU6ZSxsaXN0ZW5lcjpufSxvPWMuYmluZChyKTtyZXR1cm4gby5saXN0ZW5lcj1uLHIud3JhcEZuPW8sb31mdW5jdGlvbiBkKHQsZSxuKXt2YXIgcj10Ll9ldmVudHM7aWYodm9pZCAwPT09cilyZXR1cm5bXTt2YXIgbz1yW2VdO3JldHVybiB2b2lkIDA9PT1vP1tdOlwiZnVuY3Rpb25cIj09dHlwZW9mIG8/bj9bby5saXN0ZW5lcnx8b106W29dOm4/ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0Lmxlbmd0aCksbj0wO248ZS5sZW5ndGg7KytuKWVbbl09dFtuXS5saXN0ZW5lcnx8dFtuXTtyZXR1cm4gZX0obyk6cChvLG8ubGVuZ3RoKX1mdW5jdGlvbiBoKHQpe3ZhciBlPXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT1lKXt2YXIgbj1lW3RdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIDE7aWYodm9pZCAwIT09bilyZXR1cm4gbi5sZW5ndGh9cmV0dXJuIDB9ZnVuY3Rpb24gcCh0LGUpe2Zvcih2YXIgbj1uZXcgQXJyYXkoZSkscj0wO3I8ZTsrK3IpbltyXT10W3JdO3JldHVybiBufWZ1bmN0aW9uIGcodCxlLG4scil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5vbilyLm9uY2U/dC5vbmNlKGUsbik6dC5vbihlLG4pO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIHQpO3QuYWRkRXZlbnRMaXN0ZW5lcihlLChmdW5jdGlvbiBvKGkpe3Iub25jZSYmdC5yZW1vdmVFdmVudExpc3RlbmVyKGUsbyksbihpKX0pKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGksXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9LHNldDpmdW5jdGlvbih0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dDwwfHxvKHQpKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyt0K1wiLlwiKTthPXR9fSksaS5pbml0PWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHMhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHZvaWQgMH0saS5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKHQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fG8odCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnK3QrXCIuXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9dCx0aGlzfSxpLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdSh0aGlzKX0saS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZS5wdXNoKGFyZ3VtZW50c1tuXSk7dmFyIG89XCJlcnJvclwiPT09dCxpPXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT1pKW89byYmdm9pZCAwPT09aS5lcnJvcjtlbHNlIGlmKCFvKXJldHVybiExO2lmKG8pe3ZhciBhO2lmKGUubGVuZ3RoPjAmJihhPWVbMF0pLGEgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBhO3ZhciBzPW5ldyBFcnJvcihcIlVuaGFuZGxlZCBlcnJvci5cIisoYT9cIiAoXCIrYS5tZXNzYWdlK1wiKVwiOlwiXCIpKTt0aHJvdyBzLmNvbnRleHQ9YSxzfXZhciB1PWlbdF07aWYodm9pZCAwPT09dSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB1KXIodSx0aGlzLGUpO2Vsc2V7dmFyIGw9dS5sZW5ndGgsYz1wKHUsbCk7Zm9yKG49MDtuPGw7KytuKXIoY1tuXSx0aGlzLGUpfXJldHVybiEwfSxpLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiBsKHRoaXMsdCxlLCExKX0saS5wcm90b3R5cGUub249aS5wcm90b3R5cGUuYWRkTGlzdGVuZXIsaS5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGwodGhpcyx0LGUsITApfSxpLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHMoZSksdGhpcy5vbih0LGYodGhpcyx0LGUpKSx0aGlzfSxpLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHMoZSksdGhpcy5wcmVwZW5kTGlzdGVuZXIodCxmKHRoaXMsdCxlKSksdGhpc30saS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCxlKXt2YXIgbixyLG8saSxhO2lmKHMoZSksdm9pZCAwPT09KHI9dGhpcy5fZXZlbnRzKSlyZXR1cm4gdGhpcztpZih2b2lkIDA9PT0obj1yW3RdKSlyZXR1cm4gdGhpcztpZihuPT09ZXx8bi5saXN0ZW5lcj09PWUpMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTooZGVsZXRlIHJbdF0sci5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIix0LG4ubGlzdGVuZXJ8fGUpKTtlbHNlIGlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4pe2ZvcihvPS0xLGk9bi5sZW5ndGgtMTtpPj0wO2ktLSlpZihuW2ldPT09ZXx8bltpXS5saXN0ZW5lcj09PWUpe2E9bltpXS5saXN0ZW5lcixvPWk7YnJlYWt9aWYobzwwKXJldHVybiB0aGlzOzA9PT1vP24uc2hpZnQoKTpmdW5jdGlvbih0LGUpe2Zvcig7ZSsxPHQubGVuZ3RoO2UrKyl0W2VdPXRbZSsxXTt0LnBvcCgpfShuLG8pLDE9PT1uLmxlbmd0aCYmKHJbdF09blswXSksdm9pZCAwIT09ci5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIix0LGF8fGUpfXJldHVybiB0aGlzfSxpLnByb3RvdHlwZS5vZmY9aS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIsaS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3ZhciBlLG4scjtpZih2b2lkIDA9PT0obj10aGlzLl9ldmVudHMpKXJldHVybiB0aGlzO2lmKHZvaWQgMD09PW4ucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wKTp2b2lkIDAhPT1uW3RdJiYoMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTpkZWxldGUgblt0XSksdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG8saT1PYmplY3Qua2V5cyhuKTtmb3Iocj0wO3I8aS5sZW5ndGg7KytyKVwicmVtb3ZlTGlzdGVuZXJcIiE9PShvPWlbcl0pJiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhvKTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wLHRoaXN9aWYoXCJmdW5jdGlvblwiPT10eXBlb2YoZT1uW3RdKSl0aGlzLnJlbW92ZUxpc3RlbmVyKHQsZSk7ZWxzZSBpZih2b2lkIDAhPT1lKWZvcihyPWUubGVuZ3RoLTE7cj49MDtyLS0pdGhpcy5yZW1vdmVMaXN0ZW5lcih0LGVbcl0pO3JldHVybiB0aGlzfSxpLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuIGQodGhpcyx0LCEwKX0saS5wcm90b3R5cGUucmF3TGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiBkKHRoaXMsdCwhMSl9LGkubGlzdGVuZXJDb3VudD1mdW5jdGlvbih0LGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQubGlzdGVuZXJDb3VudD90Lmxpc3RlbmVyQ291bnQoZSk6aC5jYWxsKHQsZSl9LGkucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9aCxpLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50PjA/ZSh0aGlzLl9ldmVudHMpOltdfX0sMjE1Oih0LGUpPT57ZS5yZWFkPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGksYSxzPTgqby1yLTEsdT0oMTw8cyktMSxsPXU+PjEsYz0tNyxmPW4/by0xOjAsZD1uPy0xOjEsaD10W2UrZl07Zm9yKGYrPWQsaT1oJigxPDwtYyktMSxoPj49LWMsYys9cztjPjA7aT0yNTYqaSt0W2UrZl0sZis9ZCxjLT04KTtmb3IoYT1pJigxPDwtYyktMSxpPj49LWMsYys9cjtjPjA7YT0yNTYqYSt0W2UrZl0sZis9ZCxjLT04KTtpZigwPT09aSlpPTEtbDtlbHNle2lmKGk9PT11KXJldHVybiBhP05hTjoxLzAqKGg/LTE6MSk7YSs9TWF0aC5wb3coMixyKSxpLT1sfXJldHVybihoPy0xOjEpKmEqTWF0aC5wb3coMixpLXIpfSxlLndyaXRlPWZ1bmN0aW9uKHQsZSxuLHIsbyxpKXt2YXIgYSxzLHUsbD04Kmktby0xLGM9KDE8PGwpLTEsZj1jPj4xLGQ9MjM9PT1vP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxoPXI/MDppLTEscD1yPzE6LTEsZz1lPDB8fDA9PT1lJiYxL2U8MD8xOjA7Zm9yKGU9TWF0aC5hYnMoZSksaXNOYU4oZSl8fGU9PT0xLzA/KHM9aXNOYU4oZSk/MTowLGE9Yyk6KGE9TWF0aC5mbG9vcihNYXRoLmxvZyhlKS9NYXRoLkxOMiksZSoodT1NYXRoLnBvdygyLC1hKSk8MSYmKGEtLSx1Kj0yKSwoZSs9YStmPj0xP2QvdTpkKk1hdGgucG93KDIsMS1mKSkqdT49MiYmKGErKyx1Lz0yKSxhK2Y+PWM/KHM9MCxhPWMpOmErZj49MT8ocz0oZSp1LTEpKk1hdGgucG93KDIsbyksYSs9Zik6KHM9ZSpNYXRoLnBvdygyLGYtMSkqTWF0aC5wb3coMixvKSxhPTApKTtvPj04O3RbbitoXT0yNTUmcyxoKz1wLHMvPTI1NixvLT04KTtmb3IoYT1hPDxvfHMsbCs9bztsPjA7dFtuK2hdPTI1NSZhLGgrPXAsYS89MjU2LGwtPTgpO3RbbitoLXBdfD0xMjgqZ319LDk1MTpmdW5jdGlvbih0LGUsbil7dmFyIHI7dD1uLm5tZCh0KSxmdW5jdGlvbigpe3ZhciBvLGk9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIsYT1cIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX19cIixzPVwiX19sb2Rhc2hfcGxhY2Vob2xkZXJfX1wiLHU9MTYsbD0zMixjPTY0LGY9MTI4LGQ9MjU2LGg9MS8wLHA9OTAwNzE5OTI1NDc0MDk5MSxnPU5hTix5PTQyOTQ5NjcyOTUsbT1bW1wiYXJ5XCIsZl0sW1wiYmluZFwiLDFdLFtcImJpbmRLZXlcIiwyXSxbXCJjdXJyeVwiLDhdLFtcImN1cnJ5UmlnaHRcIix1XSxbXCJmbGlwXCIsNTEyXSxbXCJwYXJ0aWFsXCIsbF0sW1wicGFydGlhbFJpZ2h0XCIsY10sW1wicmVhcmdcIixkXV0sdj1cIltvYmplY3QgQXJndW1lbnRzXVwiLGI9XCJbb2JqZWN0IEFycmF5XVwiLHc9XCJbb2JqZWN0IEJvb2xlYW5dXCIsXz1cIltvYmplY3QgRGF0ZV1cIixFPVwiW29iamVjdCBFcnJvcl1cIixTPVwiW29iamVjdCBGdW5jdGlvbl1cIixBPVwiW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl1cIixJPVwiW29iamVjdCBNYXBdXCIsVD1cIltvYmplY3QgTnVtYmVyXVwiLFI9XCJbb2JqZWN0IE9iamVjdF1cIix4PVwiW29iamVjdCBQcm9taXNlXVwiLEM9XCJbb2JqZWN0IFJlZ0V4cF1cIixCPVwiW29iamVjdCBTZXRdXCIsaz1cIltvYmplY3QgU3RyaW5nXVwiLEw9XCJbb2JqZWN0IFN5bWJvbF1cIixPPVwiW29iamVjdCBXZWFrTWFwXVwiLFU9XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiLGo9XCJbb2JqZWN0IERhdGFWaWV3XVwiLE49XCJbb2JqZWN0IEZsb2F0MzJBcnJheV1cIixNPVwiW29iamVjdCBGbG9hdDY0QXJyYXldXCIsUD1cIltvYmplY3QgSW50OEFycmF5XVwiLFc9XCJbb2JqZWN0IEludDE2QXJyYXldXCIsJD1cIltvYmplY3QgSW50MzJBcnJheV1cIixEPVwiW29iamVjdCBVaW50OEFycmF5XVwiLEY9XCJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XVwiLHo9XCJbb2JqZWN0IFVpbnQxNkFycmF5XVwiLHE9XCJbb2JqZWN0IFVpbnQzMkFycmF5XVwiLEg9L1xcYl9fcCBcXCs9ICcnOy9nLFY9L1xcYihfX3AgXFwrPSkgJycgXFwrL2csRz0vKF9fZVxcKC4qP1xcKXxcXGJfX3RcXCkpIFxcK1xcbicnOy9nLEo9LyYoPzphbXB8bHR8Z3R8cXVvdHwjMzkpOy9nLFk9L1smPD5cIiddL2csSz1SZWdFeHAoSi5zb3VyY2UpLFg9UmVnRXhwKFkuc291cmNlKSxaPS88JS0oW1xcc1xcU10rPyklPi9nLFE9LzwlKFtcXHNcXFNdKz8pJT4vZyx0dD0vPCU9KFtcXHNcXFNdKz8pJT4vZyxldD0vXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXFxcXXxcXFxcLikqP1xcMSlcXF0vLG50PS9eXFx3KiQvLHJ0PS9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXFxcXXxcXFxcLikqPylcXDIpXFxdfCg/PSg/OlxcLnxcXFtcXF0pKD86XFwufFxcW1xcXXwkKSkvZyxvdD0vW1xcXFxeJC4qKz8oKVtcXF17fXxdL2csaXQ9UmVnRXhwKG90LnNvdXJjZSksYXQ9L15cXHMrLyxzdD0vXFxzLyx1dD0vXFx7KD86XFxuXFwvXFwqIFxcW3dyYXBwZWQgd2l0aCAuK1xcXSBcXCpcXC8pP1xcbj8vLGx0PS9cXHtcXG5cXC9cXCogXFxbd3JhcHBlZCB3aXRoICguKylcXF0gXFwqLyxjdD0vLD8gJiAvLGZ0PS9bXlxceDAwLVxceDJmXFx4M2EtXFx4NDBcXHg1Yi1cXHg2MFxceDdiLVxceDdmXSsvZyxkdD0vWygpPSx7fVxcW1xcXVxcL1xcc10vLGh0PS9cXFxcKFxcXFwpPy9nLHB0PS9cXCRcXHsoW15cXFxcfV0qKD86XFxcXC5bXlxcXFx9XSopKilcXH0vZyxndD0vXFx3KiQvLHl0PS9eWy0rXTB4WzAtOWEtZl0rJC9pLG10PS9eMGJbMDFdKyQvaSx2dD0vXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvLGJ0PS9eMG9bMC03XSskL2ksd3Q9L14oPzowfFsxLTldXFxkKikkLyxfdD0vW1xceGMwLVxceGQ2XFx4ZDgtXFx4ZjZcXHhmOC1cXHhmZlxcdTAxMDAtXFx1MDE3Zl0vZyxFdD0vKCReKS8sU3Q9L1snXFxuXFxyXFx1MjAyOFxcdTIwMjlcXFxcXS9nLEF0PVwiXFxcXHVkODAwLVxcXFx1ZGZmZlwiLEl0PVwiXFxcXHUwMzAwLVxcXFx1MDM2ZlxcXFx1ZmUyMC1cXFxcdWZlMmZcXFxcdTIwZDAtXFxcXHUyMGZmXCIsVHQ9XCJcXFxcdTI3MDAtXFxcXHUyN2JmXCIsUnQ9XCJhLXpcXFxceGRmLVxcXFx4ZjZcXFxceGY4LVxcXFx4ZmZcIix4dD1cIkEtWlxcXFx4YzAtXFxcXHhkNlxcXFx4ZDgtXFxcXHhkZVwiLEN0PVwiXFxcXHVmZTBlXFxcXHVmZTBmXCIsQnQ9XCJcXFxceGFjXFxcXHhiMVxcXFx4ZDdcXFxceGY3XFxcXHgwMC1cXFxceDJmXFxcXHgzYS1cXFxceDQwXFxcXHg1Yi1cXFxceDYwXFxcXHg3Yi1cXFxceGJmXFxcXHUyMDAwLVxcXFx1MjA2ZiBcXFxcdFxcXFx4MGJcXFxcZlxcXFx4YTBcXFxcdWZlZmZcXFxcblxcXFxyXFxcXHUyMDI4XFxcXHUyMDI5XFxcXHUxNjgwXFxcXHUxODBlXFxcXHUyMDAwXFxcXHUyMDAxXFxcXHUyMDAyXFxcXHUyMDAzXFxcXHUyMDA0XFxcXHUyMDA1XFxcXHUyMDA2XFxcXHUyMDA3XFxcXHUyMDA4XFxcXHUyMDA5XFxcXHUyMDBhXFxcXHUyMDJmXFxcXHUyMDVmXFxcXHUzMDAwXCIsa3Q9XCJbJ+KAmV1cIixMdD1cIltcIitBdCtcIl1cIixPdD1cIltcIitCdCtcIl1cIixVdD1cIltcIitJdCtcIl1cIixqdD1cIlxcXFxkK1wiLE50PVwiW1wiK1R0K1wiXVwiLE10PVwiW1wiK1J0K1wiXVwiLFB0PVwiW15cIitBdCtCdCtqdCtUdCtSdCt4dCtcIl1cIixXdD1cIlxcXFx1ZDgzY1tcXFxcdWRmZmItXFxcXHVkZmZmXVwiLCR0PVwiW15cIitBdCtcIl1cIixEdD1cIig/OlxcXFx1ZDgzY1tcXFxcdWRkZTYtXFxcXHVkZGZmXSl7Mn1cIixGdD1cIltcXFxcdWQ4MDAtXFxcXHVkYmZmXVtcXFxcdWRjMDAtXFxcXHVkZmZmXVwiLHp0PVwiW1wiK3h0K1wiXVwiLHF0PVwiXFxcXHUyMDBkXCIsSHQ9XCIoPzpcIitNdCtcInxcIitQdCtcIilcIixWdD1cIig/OlwiK3p0K1wifFwiK1B0K1wiKVwiLEd0PVwiKD86WyfigJldKD86ZHxsbHxtfHJlfHN8dHx2ZSkpP1wiLEp0PVwiKD86WyfigJldKD86RHxMTHxNfFJFfFN8VHxWRSkpP1wiLFl0PVwiKD86XCIrVXQrXCJ8XCIrV3QrXCIpXCIrXCI/XCIsS3Q9XCJbXCIrQ3QrXCJdP1wiLFh0PUt0K1l0KyhcIig/OlwiK3F0K1wiKD86XCIrWyR0LER0LEZ0XS5qb2luKFwifFwiKStcIilcIitLdCtZdCtcIikqXCIpLFp0PVwiKD86XCIrW050LER0LEZ0XS5qb2luKFwifFwiKStcIilcIitYdCxRdD1cIig/OlwiK1skdCtVdCtcIj9cIixVdCxEdCxGdCxMdF0uam9pbihcInxcIikrXCIpXCIsdGU9UmVnRXhwKGt0LFwiZ1wiKSxlZT1SZWdFeHAoVXQsXCJnXCIpLG5lPVJlZ0V4cChXdCtcIig/PVwiK1d0K1wiKXxcIitRdCtYdCxcImdcIikscmU9UmVnRXhwKFt6dCtcIj9cIitNdCtcIitcIitHdCtcIig/PVwiK1tPdCx6dCxcIiRcIl0uam9pbihcInxcIikrXCIpXCIsVnQrXCIrXCIrSnQrXCIoPz1cIitbT3QsenQrSHQsXCIkXCJdLmpvaW4oXCJ8XCIpK1wiKVwiLHp0K1wiP1wiK0h0K1wiK1wiK0d0LHp0K1wiK1wiK0p0LFwiXFxcXGQqKD86MVNUfDJORHwzUkR8KD8hWzEyM10pXFxcXGRUSCkoPz1cXFxcYnxbYS16X10pXCIsXCJcXFxcZCooPzoxc3R8Mm5kfDNyZHwoPyFbMTIzXSlcXFxcZHRoKSg/PVxcXFxifFtBLVpfXSlcIixqdCxadF0uam9pbihcInxcIiksXCJnXCIpLG9lPVJlZ0V4cChcIltcIitxdCtBdCtJdCtDdCtcIl1cIiksaWU9L1thLXpdW0EtWl18W0EtWl17Mn1bYS16XXxbMC05XVthLXpBLVpdfFthLXpBLVpdWzAtOV18W15hLXpBLVowLTkgXS8sYWU9W1wiQXJyYXlcIixcIkJ1ZmZlclwiLFwiRGF0YVZpZXdcIixcIkRhdGVcIixcIkVycm9yXCIsXCJGbG9hdDMyQXJyYXlcIixcIkZsb2F0NjRBcnJheVwiLFwiRnVuY3Rpb25cIixcIkludDhBcnJheVwiLFwiSW50MTZBcnJheVwiLFwiSW50MzJBcnJheVwiLFwiTWFwXCIsXCJNYXRoXCIsXCJPYmplY3RcIixcIlByb21pc2VcIixcIlJlZ0V4cFwiLFwiU2V0XCIsXCJTdHJpbmdcIixcIlN5bWJvbFwiLFwiVHlwZUVycm9yXCIsXCJVaW50OEFycmF5XCIsXCJVaW50OENsYW1wZWRBcnJheVwiLFwiVWludDE2QXJyYXlcIixcIlVpbnQzMkFycmF5XCIsXCJXZWFrTWFwXCIsXCJfXCIsXCJjbGVhclRpbWVvdXRcIixcImlzRmluaXRlXCIsXCJwYXJzZUludFwiLFwic2V0VGltZW91dFwiXSxzZT0tMSx1ZT17fTt1ZVtOXT11ZVtNXT11ZVtQXT11ZVtXXT11ZVskXT11ZVtEXT11ZVtGXT11ZVt6XT11ZVtxXT0hMCx1ZVt2XT11ZVtiXT11ZVtVXT11ZVt3XT11ZVtqXT11ZVtfXT11ZVtFXT11ZVtTXT11ZVtJXT11ZVtUXT11ZVtSXT11ZVtDXT11ZVtCXT11ZVtrXT11ZVtPXT0hMTt2YXIgbGU9e307bGVbdl09bGVbYl09bGVbVV09bGVbal09bGVbd109bGVbX109bGVbTl09bGVbTV09bGVbUF09bGVbV109bGVbJF09bGVbSV09bGVbVF09bGVbUl09bGVbQ109bGVbQl09bGVba109bGVbTF09bGVbRF09bGVbRl09bGVbel09bGVbcV09ITAsbGVbRV09bGVbU109bGVbT109ITE7dmFyIGNlPXtcIlxcXFxcIjpcIlxcXFxcIixcIidcIjpcIidcIixcIlxcblwiOlwiblwiLFwiXFxyXCI6XCJyXCIsXCJcXHUyMDI4XCI6XCJ1MjAyOFwiLFwiXFx1MjAyOVwiOlwidTIwMjlcIn0sZmU9cGFyc2VGbG9hdCxkZT1wYXJzZUludCxoZT1cIm9iamVjdFwiPT10eXBlb2Ygbi5nJiZuLmcmJm4uZy5PYmplY3Q9PT1PYmplY3QmJm4uZyxwZT1cIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsZ2U9aGV8fHBlfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkseWU9ZSYmIWUubm9kZVR5cGUmJmUsbWU9eWUmJnQmJiF0Lm5vZGVUeXBlJiZ0LHZlPW1lJiZtZS5leHBvcnRzPT09eWUsYmU9dmUmJmhlLnByb2Nlc3Msd2U9ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9bWUmJm1lLnJlcXVpcmUmJm1lLnJlcXVpcmUoXCJ1dGlsXCIpLnR5cGVzO3JldHVybiB0fHxiZSYmYmUuYmluZGluZyYmYmUuYmluZGluZyhcInV0aWxcIil9Y2F0Y2godCl7fX0oKSxfZT13ZSYmd2UuaXNBcnJheUJ1ZmZlcixFZT13ZSYmd2UuaXNEYXRlLFNlPXdlJiZ3ZS5pc01hcCxBZT13ZSYmd2UuaXNSZWdFeHAsSWU9d2UmJndlLmlzU2V0LFRlPXdlJiZ3ZS5pc1R5cGVkQXJyYXk7ZnVuY3Rpb24gUmUodCxlLG4pe3N3aXRjaChuLmxlbmd0aCl7Y2FzZSAwOnJldHVybiB0LmNhbGwoZSk7Y2FzZSAxOnJldHVybiB0LmNhbGwoZSxuWzBdKTtjYXNlIDI6cmV0dXJuIHQuY2FsbChlLG5bMF0sblsxXSk7Y2FzZSAzOnJldHVybiB0LmNhbGwoZSxuWzBdLG5bMV0sblsyXSl9cmV0dXJuIHQuYXBwbHkoZSxuKX1mdW5jdGlvbiB4ZSh0LGUsbixyKXtmb3IodmFyIG89LTEsaT1udWxsPT10PzA6dC5sZW5ndGg7KytvPGk7KXt2YXIgYT10W29dO2UocixhLG4oYSksdCl9cmV0dXJuIHJ9ZnVuY3Rpb24gQ2UodCxlKXtmb3IodmFyIG49LTEscj1udWxsPT10PzA6dC5sZW5ndGg7KytuPHImJiExIT09ZSh0W25dLG4sdCk7KTtyZXR1cm4gdH1mdW5jdGlvbiBCZSh0LGUpe2Zvcih2YXIgbj1udWxsPT10PzA6dC5sZW5ndGg7bi0tJiYhMSE9PWUodFtuXSxuLHQpOyk7cmV0dXJuIHR9ZnVuY3Rpb24ga2UodCxlKXtmb3IodmFyIG49LTEscj1udWxsPT10PzA6dC5sZW5ndGg7KytuPHI7KWlmKCFlKHRbbl0sbix0KSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBMZSh0LGUpe2Zvcih2YXIgbj0tMSxyPW51bGw9PXQ/MDp0Lmxlbmd0aCxvPTAsaT1bXTsrK248cjspe3ZhciBhPXRbbl07ZShhLG4sdCkmJihpW28rK109YSl9cmV0dXJuIGl9ZnVuY3Rpb24gT2UodCxlKXtyZXR1cm4hIShudWxsPT10PzA6dC5sZW5ndGgpJiZ6ZSh0LGUsMCk+LTF9ZnVuY3Rpb24gVWUodCxlLG4pe2Zvcih2YXIgcj0tMSxvPW51bGw9PXQ/MDp0Lmxlbmd0aDsrK3I8bzspaWYobihlLHRbcl0pKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGplKHQsZSl7Zm9yKHZhciBuPS0xLHI9bnVsbD09dD8wOnQubGVuZ3RoLG89QXJyYXkocik7KytuPHI7KW9bbl09ZSh0W25dLG4sdCk7cmV0dXJuIG99ZnVuY3Rpb24gTmUodCxlKXtmb3IodmFyIG49LTEscj1lLmxlbmd0aCxvPXQubGVuZ3RoOysrbjxyOyl0W28rbl09ZVtuXTtyZXR1cm4gdH1mdW5jdGlvbiBNZSh0LGUsbixyKXt2YXIgbz0tMSxpPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IociYmaSYmKG49dFsrK29dKTsrK288aTspbj1lKG4sdFtvXSxvLHQpO3JldHVybiBufWZ1bmN0aW9uIFBlKHQsZSxuLHIpe3ZhciBvPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IociYmbyYmKG49dFstLW9dKTtvLS07KW49ZShuLHRbb10sbyx0KTtyZXR1cm4gbn1mdW5jdGlvbiBXZSh0LGUpe2Zvcih2YXIgbj0tMSxyPW51bGw9PXQ/MDp0Lmxlbmd0aDsrK248cjspaWYoZSh0W25dLG4sdCkpcmV0dXJuITA7cmV0dXJuITF9dmFyICRlPUdlKFwibGVuZ3RoXCIpO2Z1bmN0aW9uIERlKHQsZSxuKXt2YXIgcjtyZXR1cm4gbih0LChmdW5jdGlvbih0LG4sbyl7aWYoZSh0LG4sbykpcmV0dXJuIHI9biwhMX0pKSxyfWZ1bmN0aW9uIEZlKHQsZSxuLHIpe2Zvcih2YXIgbz10Lmxlbmd0aCxpPW4rKHI/MTotMSk7cj9pLS06KytpPG87KWlmKGUodFtpXSxpLHQpKXJldHVybiBpO3JldHVybi0xfWZ1bmN0aW9uIHplKHQsZSxuKXtyZXR1cm4gZT09ZT9mdW5jdGlvbih0LGUsbil7dmFyIHI9bi0xLG89dC5sZW5ndGg7Zm9yKDsrK3I8bzspaWYodFtyXT09PWUpcmV0dXJuIHI7cmV0dXJuLTF9KHQsZSxuKTpGZSh0LEhlLG4pfWZ1bmN0aW9uIHFlKHQsZSxuLHIpe2Zvcih2YXIgbz1uLTEsaT10Lmxlbmd0aDsrK288aTspaWYocih0W29dLGUpKXJldHVybiBvO3JldHVybi0xfWZ1bmN0aW9uIEhlKHQpe3JldHVybiB0IT10fWZ1bmN0aW9uIFZlKHQsZSl7dmFyIG49bnVsbD09dD8wOnQubGVuZ3RoO3JldHVybiBuP0tlKHQsZSkvbjpnfWZ1bmN0aW9uIEdlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9vOmVbdF19fWZ1bmN0aW9uIEplKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dD9vOnRbZV19fWZ1bmN0aW9uIFllKHQsZSxuLHIsbyl7cmV0dXJuIG8odCwoZnVuY3Rpb24odCxvLGkpe249cj8ocj0hMSx0KTplKG4sdCxvLGkpfSkpLG59ZnVuY3Rpb24gS2UodCxlKXtmb3IodmFyIG4scj0tMSxpPXQubGVuZ3RoOysrcjxpOyl7dmFyIGE9ZSh0W3JdKTthIT09byYmKG49bj09PW8/YTpuK2EpfXJldHVybiBufWZ1bmN0aW9uIFhlKHQsZSl7Zm9yKHZhciBuPS0xLHI9QXJyYXkodCk7KytuPHQ7KXJbbl09ZShuKTtyZXR1cm4gcn1mdW5jdGlvbiBaZSh0KXtyZXR1cm4gdD90LnNsaWNlKDAseW4odCkrMSkucmVwbGFjZShhdCxcIlwiKTp0fWZ1bmN0aW9uIFFlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdChlKX19ZnVuY3Rpb24gdG4odCxlKXtyZXR1cm4gamUoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19KSl9ZnVuY3Rpb24gZW4odCxlKXtyZXR1cm4gdC5oYXMoZSl9ZnVuY3Rpb24gbm4odCxlKXtmb3IodmFyIG49LTEscj10Lmxlbmd0aDsrK248ciYmemUoZSx0W25dLDApPi0xOyk7cmV0dXJuIG59ZnVuY3Rpb24gcm4odCxlKXtmb3IodmFyIG49dC5sZW5ndGg7bi0tJiZ6ZShlLHRbbl0sMCk+LTE7KTtyZXR1cm4gbn12YXIgb249SmUoe8OAOlwiQVwiLMOBOlwiQVwiLMOCOlwiQVwiLMODOlwiQVwiLMOEOlwiQVwiLMOFOlwiQVwiLMOgOlwiYVwiLMOhOlwiYVwiLMOiOlwiYVwiLMOjOlwiYVwiLMOkOlwiYVwiLMOlOlwiYVwiLMOHOlwiQ1wiLMOnOlwiY1wiLMOQOlwiRFwiLMOwOlwiZFwiLMOIOlwiRVwiLMOJOlwiRVwiLMOKOlwiRVwiLMOLOlwiRVwiLMOoOlwiZVwiLMOpOlwiZVwiLMOqOlwiZVwiLMOrOlwiZVwiLMOMOlwiSVwiLMONOlwiSVwiLMOOOlwiSVwiLMOPOlwiSVwiLMOsOlwiaVwiLMOtOlwiaVwiLMOuOlwiaVwiLMOvOlwiaVwiLMOROlwiTlwiLMOxOlwiblwiLMOSOlwiT1wiLMOTOlwiT1wiLMOUOlwiT1wiLMOVOlwiT1wiLMOWOlwiT1wiLMOYOlwiT1wiLMOyOlwib1wiLMOzOlwib1wiLMO0Olwib1wiLMO1Olwib1wiLMO2Olwib1wiLMO4Olwib1wiLMOZOlwiVVwiLMOaOlwiVVwiLMObOlwiVVwiLMOcOlwiVVwiLMO5OlwidVwiLMO6OlwidVwiLMO7OlwidVwiLMO8OlwidVwiLMOdOlwiWVwiLMO9OlwieVwiLMO/OlwieVwiLMOGOlwiQWVcIizDpjpcImFlXCIsw546XCJUaFwiLMO+OlwidGhcIizDnzpcInNzXCIsxIA6XCJBXCIsxII6XCJBXCIsxIQ6XCJBXCIsxIE6XCJhXCIsxIM6XCJhXCIsxIU6XCJhXCIsxIY6XCJDXCIsxIg6XCJDXCIsxIo6XCJDXCIsxIw6XCJDXCIsxIc6XCJjXCIsxIk6XCJjXCIsxIs6XCJjXCIsxI06XCJjXCIsxI46XCJEXCIsxJA6XCJEXCIsxI86XCJkXCIsxJE6XCJkXCIsxJI6XCJFXCIsxJQ6XCJFXCIsxJY6XCJFXCIsxJg6XCJFXCIsxJo6XCJFXCIsxJM6XCJlXCIsxJU6XCJlXCIsxJc6XCJlXCIsxJk6XCJlXCIsxJs6XCJlXCIsxJw6XCJHXCIsxJ46XCJHXCIsxKA6XCJHXCIsxKI6XCJHXCIsxJ06XCJnXCIsxJ86XCJnXCIsxKE6XCJnXCIsxKM6XCJnXCIsxKQ6XCJIXCIsxKY6XCJIXCIsxKU6XCJoXCIsxKc6XCJoXCIsxKg6XCJJXCIsxKo6XCJJXCIsxKw6XCJJXCIsxK46XCJJXCIsxLA6XCJJXCIsxKk6XCJpXCIsxKs6XCJpXCIsxK06XCJpXCIsxK86XCJpXCIsxLE6XCJpXCIsxLQ6XCJKXCIsxLU6XCJqXCIsxLY6XCJLXCIsxLc6XCJrXCIsxLg6XCJrXCIsxLk6XCJMXCIsxLs6XCJMXCIsxL06XCJMXCIsxL86XCJMXCIsxYE6XCJMXCIsxLo6XCJsXCIsxLw6XCJsXCIsxL46XCJsXCIsxYA6XCJsXCIsxYI6XCJsXCIsxYM6XCJOXCIsxYU6XCJOXCIsxYc6XCJOXCIsxYo6XCJOXCIsxYQ6XCJuXCIsxYY6XCJuXCIsxYg6XCJuXCIsxYs6XCJuXCIsxYw6XCJPXCIsxY46XCJPXCIsxZA6XCJPXCIsxY06XCJvXCIsxY86XCJvXCIsxZE6XCJvXCIsxZQ6XCJSXCIsxZY6XCJSXCIsxZg6XCJSXCIsxZU6XCJyXCIsxZc6XCJyXCIsxZk6XCJyXCIsxZo6XCJTXCIsxZw6XCJTXCIsxZ46XCJTXCIsxaA6XCJTXCIsxZs6XCJzXCIsxZ06XCJzXCIsxZ86XCJzXCIsxaE6XCJzXCIsxaI6XCJUXCIsxaQ6XCJUXCIsxaY6XCJUXCIsxaM6XCJ0XCIsxaU6XCJ0XCIsxac6XCJ0XCIsxag6XCJVXCIsxao6XCJVXCIsxaw6XCJVXCIsxa46XCJVXCIsxbA6XCJVXCIsxbI6XCJVXCIsxak6XCJ1XCIsxas6XCJ1XCIsxa06XCJ1XCIsxa86XCJ1XCIsxbE6XCJ1XCIsxbM6XCJ1XCIsxbQ6XCJXXCIsxbU6XCJ3XCIsxbY6XCJZXCIsxbc6XCJ5XCIsxbg6XCJZXCIsxbk6XCJaXCIsxbs6XCJaXCIsxb06XCJaXCIsxbo6XCJ6XCIsxbw6XCJ6XCIsxb46XCJ6XCIsxLI6XCJJSlwiLMSzOlwiaWpcIizFkjpcIk9lXCIsxZM6XCJvZVwiLMWJOlwiJ25cIizFvzpcInNcIn0pLGFuPUplKHtcIiZcIjpcIiZhbXA7XCIsXCI8XCI6XCImbHQ7XCIsXCI+XCI6XCImZ3Q7XCIsJ1wiJzpcIiZxdW90O1wiLFwiJ1wiOlwiJiMzOTtcIn0pO2Z1bmN0aW9uIHNuKHQpe3JldHVyblwiXFxcXFwiK2NlW3RdfWZ1bmN0aW9uIHVuKHQpe3JldHVybiBvZS50ZXN0KHQpfWZ1bmN0aW9uIGxuKHQpe3ZhciBlPS0xLG49QXJyYXkodC5zaXplKTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe25bKytlXT1bcix0XX0pKSxufWZ1bmN0aW9uIGNuKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0KGUobikpfX1mdW5jdGlvbiBmbih0LGUpe2Zvcih2YXIgbj0tMSxyPXQubGVuZ3RoLG89MCxpPVtdOysrbjxyOyl7dmFyIGE9dFtuXTthIT09ZSYmYSE9PXN8fCh0W25dPXMsaVtvKytdPW4pfXJldHVybiBpfWZ1bmN0aW9uIGRuKHQpe3ZhciBlPS0xLG49QXJyYXkodC5zaXplKTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtuWysrZV09dH0pKSxufWZ1bmN0aW9uIGhuKHQpe3ZhciBlPS0xLG49QXJyYXkodC5zaXplKTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtuWysrZV09W3QsdF19KSksbn1mdW5jdGlvbiBwbih0KXtyZXR1cm4gdW4odCk/ZnVuY3Rpb24odCl7dmFyIGU9bmUubGFzdEluZGV4PTA7Zm9yKDtuZS50ZXN0KHQpOykrK2U7cmV0dXJuIGV9KHQpOiRlKHQpfWZ1bmN0aW9uIGduKHQpe3JldHVybiB1bih0KT9mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXRjaChuZSl8fFtdfSh0KTpmdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdChcIlwiKX0odCl9ZnVuY3Rpb24geW4odCl7Zm9yKHZhciBlPXQubGVuZ3RoO2UtLSYmc3QudGVzdCh0LmNoYXJBdChlKSk7KTtyZXR1cm4gZX12YXIgbW49SmUoe1wiJmFtcDtcIjpcIiZcIixcIiZsdDtcIjpcIjxcIixcIiZndDtcIjpcIj5cIixcIiZxdW90O1wiOidcIicsXCImIzM5O1wiOlwiJ1wifSk7dmFyIHZuPWZ1bmN0aW9uIHQoZSl7dmFyIG4scj0oZT1udWxsPT1lP2dlOnZuLmRlZmF1bHRzKGdlLk9iamVjdCgpLGUsdm4ucGljayhnZSxhZSkpKS5BcnJheSxzdD1lLkRhdGUsQXQ9ZS5FcnJvcixJdD1lLkZ1bmN0aW9uLFR0PWUuTWF0aCxSdD1lLk9iamVjdCx4dD1lLlJlZ0V4cCxDdD1lLlN0cmluZyxCdD1lLlR5cGVFcnJvcixrdD1yLnByb3RvdHlwZSxMdD1JdC5wcm90b3R5cGUsT3Q9UnQucHJvdG90eXBlLFV0PWVbXCJfX2NvcmUtanNfc2hhcmVkX19cIl0sanQ9THQudG9TdHJpbmcsTnQ9T3QuaGFzT3duUHJvcGVydHksTXQ9MCxQdD0obj0vW14uXSskLy5leGVjKFV0JiZVdC5rZXlzJiZVdC5rZXlzLklFX1BST1RPfHxcIlwiKSk/XCJTeW1ib2woc3JjKV8xLlwiK246XCJcIixXdD1PdC50b1N0cmluZywkdD1qdC5jYWxsKFJ0KSxEdD1nZS5fLEZ0PXh0KFwiXlwiK2p0LmNhbGwoTnQpLnJlcGxhY2Uob3QsXCJcXFxcJCZcIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZyxcIiQxLio/XCIpK1wiJFwiKSx6dD12ZT9lLkJ1ZmZlcjpvLHF0PWUuU3ltYm9sLEh0PWUuVWludDhBcnJheSxWdD16dD96dC5hbGxvY1Vuc2FmZTpvLEd0PWNuKFJ0LmdldFByb3RvdHlwZU9mLFJ0KSxKdD1SdC5jcmVhdGUsWXQ9T3QucHJvcGVydHlJc0VudW1lcmFibGUsS3Q9a3Quc3BsaWNlLFh0PXF0P3F0LmlzQ29uY2F0U3ByZWFkYWJsZTpvLFp0PXF0P3F0Lml0ZXJhdG9yOm8sUXQ9cXQ/cXQudG9TdHJpbmdUYWc6byxuZT1mdW5jdGlvbigpe3RyeXt2YXIgdD1oaShSdCxcImRlZmluZVByb3BlcnR5XCIpO3JldHVybiB0KHt9LFwiXCIse30pLHR9Y2F0Y2godCl7fX0oKSxvZT1lLmNsZWFyVGltZW91dCE9PWdlLmNsZWFyVGltZW91dCYmZS5jbGVhclRpbWVvdXQsY2U9c3QmJnN0Lm5vdyE9PWdlLkRhdGUubm93JiZzdC5ub3csaGU9ZS5zZXRUaW1lb3V0IT09Z2Uuc2V0VGltZW91dCYmZS5zZXRUaW1lb3V0LHBlPVR0LmNlaWwseWU9VHQuZmxvb3IsbWU9UnQuZ2V0T3duUHJvcGVydHlTeW1ib2xzLGJlPXp0P3p0LmlzQnVmZmVyOm8sd2U9ZS5pc0Zpbml0ZSwkZT1rdC5qb2luLEplPWNuKFJ0LmtleXMsUnQpLGJuPVR0Lm1heCx3bj1UdC5taW4sX249c3Qubm93LEVuPWUucGFyc2VJbnQsU249VHQucmFuZG9tLEFuPWt0LnJldmVyc2UsSW49aGkoZSxcIkRhdGFWaWV3XCIpLFRuPWhpKGUsXCJNYXBcIiksUm49aGkoZSxcIlByb21pc2VcIikseG49aGkoZSxcIlNldFwiKSxDbj1oaShlLFwiV2Vha01hcFwiKSxCbj1oaShSdCxcImNyZWF0ZVwiKSxrbj1DbiYmbmV3IENuLExuPXt9LE9uPVdpKEluKSxVbj1XaShUbiksam49V2koUm4pLE5uPVdpKHhuKSxNbj1XaShDbiksUG49cXQ/cXQucHJvdG90eXBlOm8sV249UG4/UG4udmFsdWVPZjpvLCRuPVBuP1BuLnRvU3RyaW5nOm87ZnVuY3Rpb24gRG4odCl7aWYobnModCkmJiFIYSh0KSYmISh0IGluc3RhbmNlb2YgSG4pKXtpZih0IGluc3RhbmNlb2YgcW4pcmV0dXJuIHQ7aWYoTnQuY2FsbCh0LFwiX193cmFwcGVkX19cIikpcmV0dXJuICRpKHQpfXJldHVybiBuZXcgcW4odCl9dmFyIEZuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7aWYoIWVzKGUpKXJldHVybnt9O2lmKEp0KXJldHVybiBKdChlKTt0LnByb3RvdHlwZT1lO3ZhciBuPW5ldyB0O3JldHVybiB0LnByb3RvdHlwZT1vLG59fSgpO2Z1bmN0aW9uIHpuKCl7fWZ1bmN0aW9uIHFuKHQsZSl7dGhpcy5fX3dyYXBwZWRfXz10LHRoaXMuX19hY3Rpb25zX189W10sdGhpcy5fX2NoYWluX189ISFlLHRoaXMuX19pbmRleF9fPTAsdGhpcy5fX3ZhbHVlc19fPW99ZnVuY3Rpb24gSG4odCl7dGhpcy5fX3dyYXBwZWRfXz10LHRoaXMuX19hY3Rpb25zX189W10sdGhpcy5fX2Rpcl9fPTEsdGhpcy5fX2ZpbHRlcmVkX189ITEsdGhpcy5fX2l0ZXJhdGVlc19fPVtdLHRoaXMuX190YWtlQ291bnRfXz15LHRoaXMuX192aWV3c19fPVtdfWZ1bmN0aW9uIFZuKHQpe3ZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPG47KXt2YXIgcj10W2VdO3RoaXMuc2V0KHJbMF0sclsxXSl9fWZ1bmN0aW9uIEduKHQpe3ZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPG47KXt2YXIgcj10W2VdO3RoaXMuc2V0KHJbMF0sclsxXSl9fWZ1bmN0aW9uIEpuKHQpe3ZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPG47KXt2YXIgcj10W2VdO3RoaXMuc2V0KHJbMF0sclsxXSl9fWZ1bmN0aW9uIFluKHQpe3ZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLl9fZGF0YV9fPW5ldyBKbjsrK2U8bjspdGhpcy5hZGQodFtlXSl9ZnVuY3Rpb24gS24odCl7dmFyIGU9dGhpcy5fX2RhdGFfXz1uZXcgR24odCk7dGhpcy5zaXplPWUuc2l6ZX1mdW5jdGlvbiBYbih0LGUpe3ZhciBuPUhhKHQpLHI9IW4mJnFhKHQpLG89IW4mJiFyJiZZYSh0KSxpPSFuJiYhciYmIW8mJmNzKHQpLGE9bnx8cnx8b3x8aSxzPWE/WGUodC5sZW5ndGgsQ3QpOltdLHU9cy5sZW5ndGg7Zm9yKHZhciBsIGluIHQpIWUmJiFOdC5jYWxsKHQsbCl8fGEmJihcImxlbmd0aFwiPT1sfHxvJiYoXCJvZmZzZXRcIj09bHx8XCJwYXJlbnRcIj09bCl8fGkmJihcImJ1ZmZlclwiPT1sfHxcImJ5dGVMZW5ndGhcIj09bHx8XCJieXRlT2Zmc2V0XCI9PWwpfHx3aShsLHUpKXx8cy5wdXNoKGwpO3JldHVybiBzfWZ1bmN0aW9uIFpuKHQpe3ZhciBlPXQubGVuZ3RoO3JldHVybiBlP3RbWXIoMCxlLTEpXTpvfWZ1bmN0aW9uIFFuKHQsZSl7cmV0dXJuIE5pKGtvKHQpLHVyKGUsMCx0Lmxlbmd0aCkpfWZ1bmN0aW9uIHRyKHQpe3JldHVybiBOaShrbyh0KSl9ZnVuY3Rpb24gZXIodCxlLG4peyhuIT09byYmIURhKHRbZV0sbil8fG49PT1vJiYhKGUgaW4gdCkpJiZhcih0LGUsbil9ZnVuY3Rpb24gbnIodCxlLG4pe3ZhciByPXRbZV07TnQuY2FsbCh0LGUpJiZEYShyLG4pJiYobiE9PW98fGUgaW4gdCl8fGFyKHQsZSxuKX1mdW5jdGlvbiBycih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aDtuLS07KWlmKERhKHRbbl1bMF0sZSkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gb3IodCxlLG4scil7cmV0dXJuIGhyKHQsKGZ1bmN0aW9uKHQsbyxpKXtlKHIsdCxuKHQpLGkpfSkpLHJ9ZnVuY3Rpb24gaXIodCxlKXtyZXR1cm4gdCYmTG8oZSxMcyhlKSx0KX1mdW5jdGlvbiBhcih0LGUsbil7XCJfX3Byb3RvX19cIj09ZSYmbmU/bmUodCxlLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx2YWx1ZTpuLHdyaXRhYmxlOiEwfSk6dFtlXT1ufWZ1bmN0aW9uIHNyKHQsZSl7Zm9yKHZhciBuPS0xLGk9ZS5sZW5ndGgsYT1yKGkpLHM9bnVsbD09dDsrK248aTspYVtuXT1zP286UnModCxlW25dKTtyZXR1cm4gYX1mdW5jdGlvbiB1cih0LGUsbil7cmV0dXJuIHQ9PXQmJihuIT09byYmKHQ9dDw9bj90Om4pLGUhPT1vJiYodD10Pj1lP3Q6ZSkpLHR9ZnVuY3Rpb24gbHIodCxlLG4scixpLGEpe3ZhciBzLHU9MSZlLGw9MiZlLGM9NCZlO2lmKG4mJihzPWk/bih0LHIsaSxhKTpuKHQpKSxzIT09bylyZXR1cm4gcztpZighZXModCkpcmV0dXJuIHQ7dmFyIGY9SGEodCk7aWYoZil7aWYocz1mdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aCxuPW5ldyB0LmNvbnN0cnVjdG9yKGUpO2UmJlwic3RyaW5nXCI9PXR5cGVvZiB0WzBdJiZOdC5jYWxsKHQsXCJpbmRleFwiKSYmKG4uaW5kZXg9dC5pbmRleCxuLmlucHV0PXQuaW5wdXQpO3JldHVybiBufSh0KSwhdSlyZXR1cm4ga28odCxzKX1lbHNle3ZhciBkPXlpKHQpLGg9ZD09U3x8ZD09QTtpZihZYSh0KSlyZXR1cm4gSW8odCx1KTtpZihkPT1SfHxkPT12fHxoJiYhaSl7aWYocz1sfHxoP3t9OnZpKHQpLCF1KXJldHVybiBsP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIExvKHQsZ2kodCksZSl9KHQsZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmTG8oZSxPcyhlKSx0KX0ocyx0KSk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gTG8odCxwaSh0KSxlKX0odCxpcihzLHQpKX1lbHNle2lmKCFsZVtkXSlyZXR1cm4gaT90Ont9O3M9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQuY29uc3RydWN0b3I7c3dpdGNoKGUpe2Nhc2UgVTpyZXR1cm4gVG8odCk7Y2FzZSB3OmNhc2UgXzpyZXR1cm4gbmV3IHIoK3QpO2Nhc2UgajpyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbj1lP1RvKHQuYnVmZmVyKTp0LmJ1ZmZlcjtyZXR1cm4gbmV3IHQuY29uc3RydWN0b3Iobix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKX0odCxuKTtjYXNlIE46Y2FzZSBNOmNhc2UgUDpjYXNlIFc6Y2FzZSAkOmNhc2UgRDpjYXNlIEY6Y2FzZSB6OmNhc2UgcTpyZXR1cm4gUm8odCxuKTtjYXNlIEk6cmV0dXJuIG5ldyByO2Nhc2UgVDpjYXNlIGs6cmV0dXJuIG5ldyByKHQpO2Nhc2UgQzpyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9bmV3IHQuY29uc3RydWN0b3IodC5zb3VyY2UsZ3QuZXhlYyh0KSk7cmV0dXJuIGUubGFzdEluZGV4PXQubGFzdEluZGV4LGV9KHQpO2Nhc2UgQjpyZXR1cm4gbmV3IHI7Y2FzZSBMOnJldHVybiBvPXQsV24/UnQoV24uY2FsbChvKSk6e319dmFyIG99KHQsZCx1KX19YXx8KGE9bmV3IEtuKTt2YXIgcD1hLmdldCh0KTtpZihwKXJldHVybiBwO2Euc2V0KHQscyksc3ModCk/dC5mb3JFYWNoKChmdW5jdGlvbihyKXtzLmFkZChscihyLGUsbixyLHQsYSkpfSkpOnJzKHQpJiZ0LmZvckVhY2goKGZ1bmN0aW9uKHIsbyl7cy5zZXQobyxscihyLGUsbixvLHQsYSkpfSkpO3ZhciBnPWY/bzooYz9sP2FpOmlpOmw/T3M6THMpKHQpO3JldHVybiBDZShnfHx0LChmdW5jdGlvbihyLG8pe2cmJihyPXRbbz1yXSksbnIocyxvLGxyKHIsZSxuLG8sdCxhKSl9KSksc31mdW5jdGlvbiBjcih0LGUsbil7dmFyIHI9bi5sZW5ndGg7aWYobnVsbD09dClyZXR1cm4hcjtmb3IodD1SdCh0KTtyLS07KXt2YXIgaT1uW3JdLGE9ZVtpXSxzPXRbaV07aWYocz09PW8mJiEoaSBpbiB0KXx8IWEocykpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gZnIodCxlLG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IEJ0KGkpO3JldHVybiBMaSgoZnVuY3Rpb24oKXt0LmFwcGx5KG8sbil9KSxlKX1mdW5jdGlvbiBkcih0LGUsbixyKXt2YXIgbz0tMSxpPU9lLGE9ITAscz10Lmxlbmd0aCx1PVtdLGw9ZS5sZW5ndGg7aWYoIXMpcmV0dXJuIHU7biYmKGU9amUoZSxRZShuKSkpLHI/KGk9VWUsYT0hMSk6ZS5sZW5ndGg+PTIwMCYmKGk9ZW4sYT0hMSxlPW5ldyBZbihlKSk7dDpmb3IoOysrbzxzOyl7dmFyIGM9dFtvXSxmPW51bGw9PW4/YzpuKGMpO2lmKGM9cnx8MCE9PWM/YzowLGEmJmY9PWYpe2Zvcih2YXIgZD1sO2QtLTspaWYoZVtkXT09PWYpY29udGludWUgdDt1LnB1c2goYyl9ZWxzZSBpKGUsZixyKXx8dS5wdXNoKGMpfXJldHVybiB1fURuLnRlbXBsYXRlU2V0dGluZ3M9e2VzY2FwZTpaLGV2YWx1YXRlOlEsaW50ZXJwb2xhdGU6dHQsdmFyaWFibGU6XCJcIixpbXBvcnRzOntfOkRufX0sRG4ucHJvdG90eXBlPXpuLnByb3RvdHlwZSxEbi5wcm90b3R5cGUuY29uc3RydWN0b3I9RG4scW4ucHJvdG90eXBlPUZuKHpuLnByb3RvdHlwZSkscW4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPXFuLEhuLnByb3RvdHlwZT1Gbih6bi5wcm90b3R5cGUpLEhuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1IbixWbi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPUJuP0JuKG51bGwpOnt9LHRoaXMuc2l6ZT0wfSxWbi5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XTtyZXR1cm4gdGhpcy5zaXplLT1lPzE6MCxlfSxWbi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19kYXRhX187aWYoQm4pe3ZhciBuPWVbdF07cmV0dXJuIG49PT1hP286bn1yZXR1cm4gTnQuY2FsbChlLHQpP2VbdF06b30sVm4ucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fZGF0YV9fO3JldHVybiBCbj9lW3RdIT09bzpOdC5jYWxsKGUsdCl9LFZuLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9fZGF0YV9fO3JldHVybiB0aGlzLnNpemUrPXRoaXMuaGFzKHQpPzA6MSxuW3RdPUJuJiZlPT09bz9hOmUsdGhpc30sR24ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH0sR24ucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fZGF0YV9fLG49cnIoZSx0KTtyZXR1cm4hKG48MCkmJihuPT1lLmxlbmd0aC0xP2UucG9wKCk6S3QuY2FsbChlLG4sMSksLS10aGlzLnNpemUsITApfSxHbi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19kYXRhX18sbj1ycihlLHQpO3JldHVybiBuPDA/bzplW25dWzFdfSxHbi5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiBycih0aGlzLl9fZGF0YV9fLHQpPi0xfSxHbi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fX2RhdGFfXyxyPXJyKG4sdCk7cmV0dXJuIHI8MD8oKyt0aGlzLnNpemUsbi5wdXNoKFt0LGVdKSk6bltyXVsxXT1lLHRoaXN9LEpuLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuc2l6ZT0wLHRoaXMuX19kYXRhX189e2hhc2g6bmV3IFZuLG1hcDpuZXcoVG58fEduKSxzdHJpbmc6bmV3IFZufX0sSm4ucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgZT1maSh0aGlzLHQpLmRlbGV0ZSh0KTtyZXR1cm4gdGhpcy5zaXplLT1lPzE6MCxlfSxKbi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiBmaSh0aGlzLHQpLmdldCh0KX0sSm4ucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXtyZXR1cm4gZmkodGhpcyx0KS5oYXModCl9LEpuLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1maSh0aGlzLHQpLHI9bi5zaXplO3JldHVybiBuLnNldCh0LGUpLHRoaXMuc2l6ZSs9bi5zaXplPT1yPzA6MSx0aGlzfSxZbi5wcm90b3R5cGUuYWRkPVluLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLnNldCh0LGEpLHRoaXN9LFluLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHQpfSxLbi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPW5ldyBHbix0aGlzLnNpemU9MH0sS24ucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fZGF0YV9fLG49ZS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZT1lLnNpemUsbn0sS24ucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQodCl9LEtuLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHQpfSxLbi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fX2RhdGFfXztpZihuIGluc3RhbmNlb2YgR24pe3ZhciByPW4uX19kYXRhX187aWYoIVRufHxyLmxlbmd0aDwxOTkpcmV0dXJuIHIucHVzaChbdCxlXSksdGhpcy5zaXplPSsrbi5zaXplLHRoaXM7bj10aGlzLl9fZGF0YV9fPW5ldyBKbihyKX1yZXR1cm4gbi5zZXQodCxlKSx0aGlzLnNpemU9bi5zaXplLHRoaXN9O3ZhciBocj1qbyhfcikscHI9am8oRXIsITApO2Z1bmN0aW9uIGdyKHQsZSl7dmFyIG49ITA7cmV0dXJuIGhyKHQsKGZ1bmN0aW9uKHQscixvKXtyZXR1cm4gbj0hIWUodCxyLG8pfSkpLG59ZnVuY3Rpb24geXIodCxlLG4pe2Zvcih2YXIgcj0tMSxpPXQubGVuZ3RoOysrcjxpOyl7dmFyIGE9dFtyXSxzPWUoYSk7aWYobnVsbCE9cyYmKHU9PT1vP3M9PXMmJiFscyhzKTpuKHMsdSkpKXZhciB1PXMsbD1hfXJldHVybiBsfWZ1bmN0aW9uIG1yKHQsZSl7dmFyIG49W107cmV0dXJuIGhyKHQsKGZ1bmN0aW9uKHQscixvKXtlKHQscixvKSYmbi5wdXNoKHQpfSkpLG59ZnVuY3Rpb24gdnIodCxlLG4scixvKXt2YXIgaT0tMSxhPXQubGVuZ3RoO2ZvcihufHwobj1iaSksb3x8KG89W10pOysraTxhOyl7dmFyIHM9dFtpXTtlPjAmJm4ocyk/ZT4xP3ZyKHMsZS0xLG4scixvKTpOZShvLHMpOnJ8fChvW28ubGVuZ3RoXT1zKX1yZXR1cm4gb312YXIgYnI9Tm8oKSx3cj1ObyghMCk7ZnVuY3Rpb24gX3IodCxlKXtyZXR1cm4gdCYmYnIodCxlLExzKX1mdW5jdGlvbiBFcih0LGUpe3JldHVybiB0JiZ3cih0LGUsTHMpfWZ1bmN0aW9uIFNyKHQsZSl7cmV0dXJuIExlKGUsKGZ1bmN0aW9uKGUpe3JldHVybiBaYSh0W2VdKX0pKX1mdW5jdGlvbiBBcih0LGUpe2Zvcih2YXIgbj0wLHI9KGU9X28oZSx0KSkubGVuZ3RoO251bGwhPXQmJm48cjspdD10W1BpKGVbbisrXSldO3JldHVybiBuJiZuPT1yP3Q6b31mdW5jdGlvbiBJcih0LGUsbil7dmFyIHI9ZSh0KTtyZXR1cm4gSGEodCk/cjpOZShyLG4odCkpfWZ1bmN0aW9uIFRyKHQpe3JldHVybiBudWxsPT10P3Q9PT1vP1wiW29iamVjdCBVbmRlZmluZWRdXCI6XCJbb2JqZWN0IE51bGxdXCI6UXQmJlF0IGluIFJ0KHQpP2Z1bmN0aW9uKHQpe3ZhciBlPU50LmNhbGwodCxRdCksbj10W1F0XTt0cnl7dFtRdF09bzt2YXIgcj0hMH1jYXRjaCh0KXt9dmFyIGk9V3QuY2FsbCh0KTtyJiYoZT90W1F0XT1uOmRlbGV0ZSB0W1F0XSk7cmV0dXJuIGl9KHQpOmZ1bmN0aW9uKHQpe3JldHVybiBXdC5jYWxsKHQpfSh0KX1mdW5jdGlvbiBScih0LGUpe3JldHVybiB0PmV9ZnVuY3Rpb24geHIodCxlKXtyZXR1cm4gbnVsbCE9dCYmTnQuY2FsbCh0LGUpfWZ1bmN0aW9uIENyKHQsZSl7cmV0dXJuIG51bGwhPXQmJmUgaW4gUnQodCl9ZnVuY3Rpb24gQnIodCxlLG4pe2Zvcih2YXIgaT1uP1VlOk9lLGE9dFswXS5sZW5ndGgscz10Lmxlbmd0aCx1PXMsbD1yKHMpLGM9MS8wLGY9W107dS0tOyl7dmFyIGQ9dFt1XTt1JiZlJiYoZD1qZShkLFFlKGUpKSksYz13bihkLmxlbmd0aCxjKSxsW3VdPSFuJiYoZXx8YT49MTIwJiZkLmxlbmd0aD49MTIwKT9uZXcgWW4odSYmZCk6b31kPXRbMF07dmFyIGg9LTEscD1sWzBdO3Q6Zm9yKDsrK2g8YSYmZi5sZW5ndGg8Yzspe3ZhciBnPWRbaF0seT1lP2UoZyk6ZztpZihnPW58fDAhPT1nP2c6MCwhKHA/ZW4ocCx5KTppKGYseSxuKSkpe2Zvcih1PXM7LS11Oyl7dmFyIG09bFt1XTtpZighKG0/ZW4obSx5KTppKHRbdV0seSxuKSkpY29udGludWUgdH1wJiZwLnB1c2goeSksZi5wdXNoKGcpfX1yZXR1cm4gZn1mdW5jdGlvbiBrcih0LGUsbil7dmFyIHI9bnVsbD09KHQ9Q2kodCxlPV9vKGUsdCkpKT90OnRbUGkoWGkoZSkpXTtyZXR1cm4gbnVsbD09cj9vOlJlKHIsdCxuKX1mdW5jdGlvbiBMcih0KXtyZXR1cm4gbnModCkmJlRyKHQpPT12fWZ1bmN0aW9uIE9yKHQsZSxuLHIsaSl7cmV0dXJuIHQ9PT1lfHwobnVsbD09dHx8bnVsbD09ZXx8IW5zKHQpJiYhbnMoZSk/dCE9dCYmZSE9ZTpmdW5jdGlvbih0LGUsbixyLGksYSl7dmFyIHM9SGEodCksdT1IYShlKSxsPXM/Yjp5aSh0KSxjPXU/Yjp5aShlKSxmPShsPWw9PXY/UjpsKT09UixkPShjPWM9PXY/UjpjKT09UixoPWw9PWM7aWYoaCYmWWEodCkpe2lmKCFZYShlKSlyZXR1cm4hMTtzPSEwLGY9ITF9aWYoaCYmIWYpcmV0dXJuIGF8fChhPW5ldyBLbiksc3x8Y3ModCk/cmkodCxlLG4scixpLGEpOmZ1bmN0aW9uKHQsZSxuLHIsbyxpLGEpe3N3aXRjaChuKXtjYXNlIGo6aWYodC5ieXRlTGVuZ3RoIT1lLmJ5dGVMZW5ndGh8fHQuYnl0ZU9mZnNldCE9ZS5ieXRlT2Zmc2V0KXJldHVybiExO3Q9dC5idWZmZXIsZT1lLmJ1ZmZlcjtjYXNlIFU6cmV0dXJuISh0LmJ5dGVMZW5ndGghPWUuYnl0ZUxlbmd0aHx8IWkobmV3IEh0KHQpLG5ldyBIdChlKSkpO2Nhc2UgdzpjYXNlIF86Y2FzZSBUOnJldHVybiBEYSgrdCwrZSk7Y2FzZSBFOnJldHVybiB0Lm5hbWU9PWUubmFtZSYmdC5tZXNzYWdlPT1lLm1lc3NhZ2U7Y2FzZSBDOmNhc2UgazpyZXR1cm4gdD09ZStcIlwiO2Nhc2UgSTp2YXIgcz1sbjtjYXNlIEI6dmFyIHU9MSZyO2lmKHN8fChzPWRuKSx0LnNpemUhPWUuc2l6ZSYmIXUpcmV0dXJuITE7dmFyIGw9YS5nZXQodCk7aWYobClyZXR1cm4gbD09ZTtyfD0yLGEuc2V0KHQsZSk7dmFyIGM9cmkocyh0KSxzKGUpLHIsbyxpLGEpO3JldHVybiBhLmRlbGV0ZSh0KSxjO2Nhc2UgTDppZihXbilyZXR1cm4gV24uY2FsbCh0KT09V24uY2FsbChlKX1yZXR1cm4hMX0odCxlLGwsbixyLGksYSk7aWYoISgxJm4pKXt2YXIgcD1mJiZOdC5jYWxsKHQsXCJfX3dyYXBwZWRfX1wiKSxnPWQmJk50LmNhbGwoZSxcIl9fd3JhcHBlZF9fXCIpO2lmKHB8fGcpe3ZhciB5PXA/dC52YWx1ZSgpOnQsbT1nP2UudmFsdWUoKTplO3JldHVybiBhfHwoYT1uZXcgS24pLGkoeSxtLG4scixhKX19aWYoIWgpcmV0dXJuITE7cmV0dXJuIGF8fChhPW5ldyBLbiksZnVuY3Rpb24odCxlLG4scixpLGEpe3ZhciBzPTEmbix1PWlpKHQpLGw9dS5sZW5ndGgsYz1paShlKSxmPWMubGVuZ3RoO2lmKGwhPWYmJiFzKXJldHVybiExO3ZhciBkPWw7Zm9yKDtkLS07KXt2YXIgaD11W2RdO2lmKCEocz9oIGluIGU6TnQuY2FsbChlLGgpKSlyZXR1cm4hMX12YXIgcD1hLmdldCh0KSxnPWEuZ2V0KGUpO2lmKHAmJmcpcmV0dXJuIHA9PWUmJmc9PXQ7dmFyIHk9ITA7YS5zZXQodCxlKSxhLnNldChlLHQpO3ZhciBtPXM7Zm9yKDsrK2Q8bDspe3ZhciB2PXRbaD11W2RdXSxiPWVbaF07aWYocil2YXIgdz1zP3IoYix2LGgsZSx0LGEpOnIodixiLGgsdCxlLGEpO2lmKCEodz09PW8/dj09PWJ8fGkodixiLG4scixhKTp3KSl7eT0hMTticmVha31tfHwobT1cImNvbnN0cnVjdG9yXCI9PWgpfWlmKHkmJiFtKXt2YXIgXz10LmNvbnN0cnVjdG9yLEU9ZS5jb25zdHJ1Y3RvcjtfPT1FfHwhKFwiY29uc3RydWN0b3JcImluIHQpfHwhKFwiY29uc3RydWN0b3JcImluIGUpfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBfJiZfIGluc3RhbmNlb2YgXyYmXCJmdW5jdGlvblwiPT10eXBlb2YgRSYmRSBpbnN0YW5jZW9mIEV8fCh5PSExKX1yZXR1cm4gYS5kZWxldGUodCksYS5kZWxldGUoZSkseX0odCxlLG4scixpLGEpfSh0LGUsbixyLE9yLGkpKX1mdW5jdGlvbiBVcih0LGUsbixyKXt2YXIgaT1uLmxlbmd0aCxhPWkscz0hcjtpZihudWxsPT10KXJldHVybiFhO2Zvcih0PVJ0KHQpO2ktLTspe3ZhciB1PW5baV07aWYocyYmdVsyXT91WzFdIT09dFt1WzBdXTohKHVbMF1pbiB0KSlyZXR1cm4hMX1mb3IoOysraTxhOyl7dmFyIGw9KHU9bltpXSlbMF0sYz10W2xdLGY9dVsxXTtpZihzJiZ1WzJdKXtpZihjPT09byYmIShsIGluIHQpKXJldHVybiExfWVsc2V7dmFyIGQ9bmV3IEtuO2lmKHIpdmFyIGg9cihjLGYsbCx0LGUsZCk7aWYoIShoPT09bz9PcihmLGMsMyxyLGQpOmgpKXJldHVybiExfX1yZXR1cm4hMH1mdW5jdGlvbiBqcih0KXtyZXR1cm4hKCFlcyh0KXx8KGU9dCxQdCYmUHQgaW4gZSkpJiYoWmEodCk/RnQ6dnQpLnRlc3QoV2kodCkpO3ZhciBlfWZ1bmN0aW9uIE5yKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpudWxsPT10P291Olwib2JqZWN0XCI9PXR5cGVvZiB0P0hhKHQpP0ZyKHRbMF0sdFsxXSk6RHIodCk6aHUodCl9ZnVuY3Rpb24gTXIodCl7aWYoIUlpKHQpKXJldHVybiBKZSh0KTt2YXIgZT1bXTtmb3IodmFyIG4gaW4gUnQodCkpTnQuY2FsbCh0LG4pJiZcImNvbnN0cnVjdG9yXCIhPW4mJmUucHVzaChuKTtyZXR1cm4gZX1mdW5jdGlvbiBQcih0KXtpZighZXModCkpcmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPVtdO2lmKG51bGwhPXQpZm9yKHZhciBuIGluIFJ0KHQpKWUucHVzaChuKTtyZXR1cm4gZX0odCk7dmFyIGU9SWkodCksbj1bXTtmb3IodmFyIHIgaW4gdCkoXCJjb25zdHJ1Y3RvclwiIT1yfHwhZSYmTnQuY2FsbCh0LHIpKSYmbi5wdXNoKHIpO3JldHVybiBufWZ1bmN0aW9uIFdyKHQsZSl7cmV0dXJuIHQ8ZX1mdW5jdGlvbiAkcih0LGUpe3ZhciBuPS0xLG89R2EodCk/cih0Lmxlbmd0aCk6W107cmV0dXJuIGhyKHQsKGZ1bmN0aW9uKHQscixpKXtvWysrbl09ZSh0LHIsaSl9KSksb31mdW5jdGlvbiBEcih0KXt2YXIgZT1kaSh0KTtyZXR1cm4gMT09ZS5sZW5ndGgmJmVbMF1bMl0/UmkoZVswXVswXSxlWzBdWzFdKTpmdW5jdGlvbihuKXtyZXR1cm4gbj09PXR8fFVyKG4sdCxlKX19ZnVuY3Rpb24gRnIodCxlKXtyZXR1cm4gRWkodCkmJlRpKGUpP1JpKFBpKHQpLGUpOmZ1bmN0aW9uKG4pe3ZhciByPVJzKG4sdCk7cmV0dXJuIHI9PT1vJiZyPT09ZT94cyhuLHQpOk9yKGUsciwzKX19ZnVuY3Rpb24genIodCxlLG4scixpKXt0IT09ZSYmYnIoZSwoZnVuY3Rpb24oYSxzKXtpZihpfHwoaT1uZXcgS24pLGVzKGEpKSFmdW5jdGlvbih0LGUsbixyLGksYSxzKXt2YXIgdT1CaSh0LG4pLGw9QmkoZSxuKSxjPXMuZ2V0KGwpO2lmKGMpcmV0dXJuIHZvaWQgZXIodCxuLGMpO3ZhciBmPWE/YSh1LGwsbitcIlwiLHQsZSxzKTpvLGQ9Zj09PW87aWYoZCl7dmFyIGg9SGEobCkscD0haCYmWWEobCksZz0haCYmIXAmJmNzKGwpO2Y9bCxofHxwfHxnP0hhKHUpP2Y9dTpKYSh1KT9mPWtvKHUpOnA/KGQ9ITEsZj1JbyhsLCEwKSk6Zz8oZD0hMSxmPVJvKGwsITApKTpmPVtdOmlzKGwpfHxxYShsKT8oZj11LHFhKHUpP2Y9dnModSk6ZXModSkmJiFaYSh1KXx8KGY9dmkobCkpKTpkPSExfWQmJihzLnNldChsLGYpLGkoZixsLHIsYSxzKSxzLmRlbGV0ZShsKSk7ZXIodCxuLGYpfSh0LGUscyxuLHpyLHIsaSk7ZWxzZXt2YXIgdT1yP3IoQmkodCxzKSxhLHMrXCJcIix0LGUsaSk6bzt1PT09byYmKHU9YSksZXIodCxzLHUpfX0pLE9zKX1mdW5jdGlvbiBxcih0LGUpe3ZhciBuPXQubGVuZ3RoO2lmKG4pcmV0dXJuIHdpKGUrPWU8MD9uOjAsbik/dFtlXTpvfWZ1bmN0aW9uIEhyKHQsZSxuKXtlPWUubGVuZ3RoP2plKGUsKGZ1bmN0aW9uKHQpe3JldHVybiBIYSh0KT9mdW5jdGlvbihlKXtyZXR1cm4gQXIoZSwxPT09dC5sZW5ndGg/dFswXTp0KX06dH0pKTpbb3VdO3ZhciByPS0xO2U9amUoZSxRZShjaSgpKSk7dmFyIG89JHIodCwoZnVuY3Rpb24odCxuLG8pe3ZhciBpPWplKGUsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQpfSkpO3JldHVybntjcml0ZXJpYTppLGluZGV4Oisrcix2YWx1ZTp0fX0pKTtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbj10Lmxlbmd0aDtmb3IodC5zb3J0KGUpO24tLTspdFtuXT10W25dLnZhbHVlO3JldHVybiB0fShvLChmdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbih0LGUsbil7dmFyIHI9LTEsbz10LmNyaXRlcmlhLGk9ZS5jcml0ZXJpYSxhPW8ubGVuZ3RoLHM9bi5sZW5ndGg7Zm9yKDsrK3I8YTspe3ZhciB1PXhvKG9bcl0saVtyXSk7aWYodSlyZXR1cm4gcj49cz91OnUqKFwiZGVzY1wiPT1uW3JdPy0xOjEpfXJldHVybiB0LmluZGV4LWUuaW5kZXh9KHQsZSxuKX0pKX1mdW5jdGlvbiBWcih0LGUsbil7Zm9yKHZhciByPS0xLG89ZS5sZW5ndGgsaT17fTsrK3I8bzspe3ZhciBhPWVbcl0scz1Bcih0LGEpO24ocyxhKSYmdG8oaSxfbyhhLHQpLHMpfXJldHVybiBpfWZ1bmN0aW9uIEdyKHQsZSxuLHIpe3ZhciBvPXI/cWU6emUsaT0tMSxhPWUubGVuZ3RoLHM9dDtmb3IodD09PWUmJihlPWtvKGUpKSxuJiYocz1qZSh0LFFlKG4pKSk7KytpPGE7KWZvcih2YXIgdT0wLGw9ZVtpXSxjPW4/bihsKTpsOyh1PW8ocyxjLHUscikpPi0xOylzIT09dCYmS3QuY2FsbChzLHUsMSksS3QuY2FsbCh0LHUsMSk7cmV0dXJuIHR9ZnVuY3Rpb24gSnIodCxlKXtmb3IodmFyIG49dD9lLmxlbmd0aDowLHI9bi0xO24tLTspe3ZhciBvPWVbbl07aWYobj09cnx8byE9PWkpe3ZhciBpPW87d2kobyk/S3QuY2FsbCh0LG8sMSk6aG8odCxvKX19cmV0dXJuIHR9ZnVuY3Rpb24gWXIodCxlKXtyZXR1cm4gdCt5ZShTbigpKihlLXQrMSkpfWZ1bmN0aW9uIEtyKHQsZSl7dmFyIG49XCJcIjtpZighdHx8ZTwxfHxlPnApcmV0dXJuIG47ZG97ZSUyJiYobis9dCksKGU9eWUoZS8yKSkmJih0Kz10KX13aGlsZShlKTtyZXR1cm4gbn1mdW5jdGlvbiBYcih0LGUpe3JldHVybiBPaSh4aSh0LGUsb3UpLHQrXCJcIil9ZnVuY3Rpb24gWnIodCl7cmV0dXJuIFpuKERzKHQpKX1mdW5jdGlvbiBRcih0LGUpe3ZhciBuPURzKHQpO3JldHVybiBOaShuLHVyKGUsMCxuLmxlbmd0aCkpfWZ1bmN0aW9uIHRvKHQsZSxuLHIpe2lmKCFlcyh0KSlyZXR1cm4gdDtmb3IodmFyIGk9LTEsYT0oZT1fbyhlLHQpKS5sZW5ndGgscz1hLTEsdT10O251bGwhPXUmJisraTxhOyl7dmFyIGw9UGkoZVtpXSksYz1uO2lmKFwiX19wcm90b19fXCI9PT1sfHxcImNvbnN0cnVjdG9yXCI9PT1sfHxcInByb3RvdHlwZVwiPT09bClyZXR1cm4gdDtpZihpIT1zKXt2YXIgZj11W2xdOyhjPXI/cihmLGwsdSk6byk9PT1vJiYoYz1lcyhmKT9mOndpKGVbaSsxXSk/W106e30pfW5yKHUsbCxjKSx1PXVbbF19cmV0dXJuIHR9dmFyIGVvPWtuP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIGtuLnNldCh0LGUpLHR9Om91LG5vPW5lP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIG5lKHQsXCJ0b1N0cmluZ1wiLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx2YWx1ZTpldShlKSx3cml0YWJsZTohMH0pfTpvdTtmdW5jdGlvbiBybyh0KXtyZXR1cm4gTmkoRHModCkpfWZ1bmN0aW9uIG9vKHQsZSxuKXt2YXIgbz0tMSxpPXQubGVuZ3RoO2U8MCYmKGU9LWU+aT8wOmkrZSksKG49bj5pP2k6bik8MCYmKG4rPWkpLGk9ZT5uPzA6bi1lPj4+MCxlPj4+PTA7Zm9yKHZhciBhPXIoaSk7KytvPGk7KWFbb109dFtvK2VdO3JldHVybiBhfWZ1bmN0aW9uIGlvKHQsZSl7dmFyIG47cmV0dXJuIGhyKHQsKGZ1bmN0aW9uKHQscixvKXtyZXR1cm4hKG49ZSh0LHIsbykpfSkpLCEhbn1mdW5jdGlvbiBhbyh0LGUsbil7dmFyIHI9MCxvPW51bGw9PXQ/cjp0Lmxlbmd0aDtpZihcIm51bWJlclwiPT10eXBlb2YgZSYmZT09ZSYmbzw9MjE0NzQ4MzY0Nyl7Zm9yKDtyPG87KXt2YXIgaT1yK28+Pj4xLGE9dFtpXTtudWxsIT09YSYmIWxzKGEpJiYobj9hPD1lOmE8ZSk/cj1pKzE6bz1pfXJldHVybiBvfXJldHVybiBzbyh0LGUsb3Usbil9ZnVuY3Rpb24gc28odCxlLG4scil7dmFyIGk9MCxhPW51bGw9PXQ/MDp0Lmxlbmd0aDtpZigwPT09YSlyZXR1cm4gMDtmb3IodmFyIHM9KGU9bihlKSkhPWUsdT1udWxsPT09ZSxsPWxzKGUpLGM9ZT09PW87aTxhOyl7dmFyIGY9eWUoKGkrYSkvMiksZD1uKHRbZl0pLGg9ZCE9PW8scD1udWxsPT09ZCxnPWQ9PWQseT1scyhkKTtpZihzKXZhciBtPXJ8fGc7ZWxzZSBtPWM/ZyYmKHJ8fGgpOnU/ZyYmaCYmKHJ8fCFwKTpsP2cmJmgmJiFwJiYocnx8IXkpOiFwJiYheSYmKHI/ZDw9ZTpkPGUpO20/aT1mKzE6YT1mfXJldHVybiB3bihhLDQyOTQ5NjcyOTQpfWZ1bmN0aW9uIHVvKHQsZSl7Zm9yKHZhciBuPS0xLHI9dC5sZW5ndGgsbz0wLGk9W107KytuPHI7KXt2YXIgYT10W25dLHM9ZT9lKGEpOmE7aWYoIW58fCFEYShzLHUpKXt2YXIgdT1zO2lbbysrXT0wPT09YT8wOmF9fXJldHVybiBpfWZ1bmN0aW9uIGxvKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q6bHModCk/ZzordH1mdW5jdGlvbiBjbyh0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gdDtpZihIYSh0KSlyZXR1cm4gamUodCxjbykrXCJcIjtpZihscyh0KSlyZXR1cm4gJG4/JG4uY2FsbCh0KTpcIlwiO3ZhciBlPXQrXCJcIjtyZXR1cm5cIjBcIj09ZSYmMS90PT0tMS8wP1wiLTBcIjplfWZ1bmN0aW9uIGZvKHQsZSxuKXt2YXIgcj0tMSxvPU9lLGk9dC5sZW5ndGgsYT0hMCxzPVtdLHU9cztpZihuKWE9ITEsbz1VZTtlbHNlIGlmKGk+PTIwMCl7dmFyIGw9ZT9udWxsOlhvKHQpO2lmKGwpcmV0dXJuIGRuKGwpO2E9ITEsbz1lbix1PW5ldyBZbn1lbHNlIHU9ZT9bXTpzO3Q6Zm9yKDsrK3I8aTspe3ZhciBjPXRbcl0sZj1lP2UoYyk6YztpZihjPW58fDAhPT1jP2M6MCxhJiZmPT1mKXtmb3IodmFyIGQ9dS5sZW5ndGg7ZC0tOylpZih1W2RdPT09Ziljb250aW51ZSB0O2UmJnUucHVzaChmKSxzLnB1c2goYyl9ZWxzZSBvKHUsZixuKXx8KHUhPT1zJiZ1LnB1c2goZikscy5wdXNoKGMpKX1yZXR1cm4gc31mdW5jdGlvbiBobyh0LGUpe3JldHVybiBudWxsPT0odD1DaSh0LGU9X28oZSx0KSkpfHxkZWxldGUgdFtQaShYaShlKSldfWZ1bmN0aW9uIHBvKHQsZSxuLHIpe3JldHVybiB0byh0LGUsbihBcih0LGUpKSxyKX1mdW5jdGlvbiBnbyh0LGUsbixyKXtmb3IodmFyIG89dC5sZW5ndGgsaT1yP286LTE7KHI/aS0tOisraTxvKSYmZSh0W2ldLGksdCk7KTtyZXR1cm4gbj9vbyh0LHI/MDppLHI/aSsxOm8pOm9vKHQscj9pKzE6MCxyP286aSl9ZnVuY3Rpb24geW8odCxlKXt2YXIgbj10O3JldHVybiBuIGluc3RhbmNlb2YgSG4mJihuPW4udmFsdWUoKSksTWUoZSwoZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5mdW5jLmFwcGx5KGUudGhpc0FyZyxOZShbdF0sZS5hcmdzKSl9KSxuKX1mdW5jdGlvbiBtbyh0LGUsbil7dmFyIG89dC5sZW5ndGg7aWYobzwyKXJldHVybiBvP2ZvKHRbMF0pOltdO2Zvcih2YXIgaT0tMSxhPXIobyk7KytpPG87KWZvcih2YXIgcz10W2ldLHU9LTE7Kyt1PG87KXUhPWkmJihhW2ldPWRyKGFbaV18fHMsdFt1XSxlLG4pKTtyZXR1cm4gZm8odnIoYSwxKSxlLG4pfWZ1bmN0aW9uIHZvKHQsZSxuKXtmb3IodmFyIHI9LTEsaT10Lmxlbmd0aCxhPWUubGVuZ3RoLHM9e307KytyPGk7KXt2YXIgdT1yPGE/ZVtyXTpvO24ocyx0W3JdLHUpfXJldHVybiBzfWZ1bmN0aW9uIGJvKHQpe3JldHVybiBKYSh0KT90OltdfWZ1bmN0aW9uIHdvKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpvdX1mdW5jdGlvbiBfbyh0LGUpe3JldHVybiBIYSh0KT90OkVpKHQsZSk/W3RdOk1pKGJzKHQpKX12YXIgRW89WHI7ZnVuY3Rpb24gU28odCxlLG4pe3ZhciByPXQubGVuZ3RoO3JldHVybiBuPW49PT1vP3I6biwhZSYmbj49cj90Om9vKHQsZSxuKX12YXIgQW89b2V8fGZ1bmN0aW9uKHQpe3JldHVybiBnZS5jbGVhclRpbWVvdXQodCl9O2Z1bmN0aW9uIElvKHQsZSl7aWYoZSlyZXR1cm4gdC5zbGljZSgpO3ZhciBuPXQubGVuZ3RoLHI9VnQ/VnQobik6bmV3IHQuY29uc3RydWN0b3Iobik7cmV0dXJuIHQuY29weShyKSxyfWZ1bmN0aW9uIFRvKHQpe3ZhciBlPW5ldyB0LmNvbnN0cnVjdG9yKHQuYnl0ZUxlbmd0aCk7cmV0dXJuIG5ldyBIdChlKS5zZXQobmV3IEh0KHQpKSxlfWZ1bmN0aW9uIFJvKHQsZSl7dmFyIG49ZT9Ubyh0LmJ1ZmZlcik6dC5idWZmZXI7cmV0dXJuIG5ldyB0LmNvbnN0cnVjdG9yKG4sdC5ieXRlT2Zmc2V0LHQubGVuZ3RoKX1mdW5jdGlvbiB4byh0LGUpe2lmKHQhPT1lKXt2YXIgbj10IT09byxyPW51bGw9PT10LGk9dD09dCxhPWxzKHQpLHM9ZSE9PW8sdT1udWxsPT09ZSxsPWU9PWUsYz1scyhlKTtpZighdSYmIWMmJiFhJiZ0PmV8fGEmJnMmJmwmJiF1JiYhY3x8ciYmcyYmbHx8IW4mJmx8fCFpKXJldHVybiAxO2lmKCFyJiYhYSYmIWMmJnQ8ZXx8YyYmbiYmaSYmIXImJiFhfHx1JiZuJiZpfHwhcyYmaXx8IWwpcmV0dXJuLTF9cmV0dXJuIDB9ZnVuY3Rpb24gQ28odCxlLG4sbyl7Zm9yKHZhciBpPS0xLGE9dC5sZW5ndGgscz1uLmxlbmd0aCx1PS0xLGw9ZS5sZW5ndGgsYz1ibihhLXMsMCksZj1yKGwrYyksZD0hbzsrK3U8bDspZlt1XT1lW3VdO2Zvcig7KytpPHM7KShkfHxpPGEpJiYoZltuW2ldXT10W2ldKTtmb3IoO2MtLTspZlt1KytdPXRbaSsrXTtyZXR1cm4gZn1mdW5jdGlvbiBCbyh0LGUsbixvKXtmb3IodmFyIGk9LTEsYT10Lmxlbmd0aCxzPS0xLHU9bi5sZW5ndGgsbD0tMSxjPWUubGVuZ3RoLGY9Ym4oYS11LDApLGQ9cihmK2MpLGg9IW87KytpPGY7KWRbaV09dFtpXTtmb3IodmFyIHA9aTsrK2w8YzspZFtwK2xdPWVbbF07Zm9yKDsrK3M8dTspKGh8fGk8YSkmJihkW3ArbltzXV09dFtpKytdKTtyZXR1cm4gZH1mdW5jdGlvbiBrbyh0LGUpe3ZhciBuPS0xLG89dC5sZW5ndGg7Zm9yKGV8fChlPXIobykpOysrbjxvOyllW25dPXRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gTG8odCxlLG4scil7dmFyIGk9IW47bnx8KG49e30pO2Zvcih2YXIgYT0tMSxzPWUubGVuZ3RoOysrYTxzOyl7dmFyIHU9ZVthXSxsPXI/cihuW3VdLHRbdV0sdSxuLHQpOm87bD09PW8mJihsPXRbdV0pLGk/YXIobix1LGwpOm5yKG4sdSxsKX1yZXR1cm4gbn1mdW5jdGlvbiBPbyh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciBvPUhhKG4pP3hlOm9yLGk9ZT9lKCk6e307cmV0dXJuIG8obix0LGNpKHIsMiksaSl9fWZ1bmN0aW9uIFVvKHQpe3JldHVybiBYcigoZnVuY3Rpb24oZSxuKXt2YXIgcj0tMSxpPW4ubGVuZ3RoLGE9aT4xP25baS0xXTpvLHM9aT4yP25bMl06bztmb3IoYT10Lmxlbmd0aD4zJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhPyhpLS0sYSk6byxzJiZfaShuWzBdLG5bMV0scykmJihhPWk8Mz9vOmEsaT0xKSxlPVJ0KGUpOysrcjxpOyl7dmFyIHU9bltyXTt1JiZ0KGUsdSxyLGEpfXJldHVybiBlfSkpfWZ1bmN0aW9uIGpvKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7aWYobnVsbD09bilyZXR1cm4gbjtpZighR2EobikpcmV0dXJuIHQobixyKTtmb3IodmFyIG89bi5sZW5ndGgsaT1lP286LTEsYT1SdChuKTsoZT9pLS06KytpPG8pJiYhMSE9PXIoYVtpXSxpLGEpOyk7cmV0dXJuIG59fWZ1bmN0aW9uIE5vKHQpe3JldHVybiBmdW5jdGlvbihlLG4scil7Zm9yKHZhciBvPS0xLGk9UnQoZSksYT1yKGUpLHM9YS5sZW5ndGg7cy0tOyl7dmFyIHU9YVt0P3M6KytvXTtpZighMT09PW4oaVt1XSx1LGkpKWJyZWFrfXJldHVybiBlfX1mdW5jdGlvbiBNbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dW4oZT1icyhlKSk/Z24oZSk6byxyPW4/blswXTplLmNoYXJBdCgwKSxpPW4/U28obiwxKS5qb2luKFwiXCIpOmUuc2xpY2UoMSk7cmV0dXJuIHJbdF0oKStpfX1mdW5jdGlvbiBQbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIE1lKFpzKHFzKGUpLnJlcGxhY2UodGUsXCJcIikpLHQsXCJcIil9fWZ1bmN0aW9uIFdvKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IHQ7Y2FzZSAxOnJldHVybiBuZXcgdChlWzBdKTtjYXNlIDI6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSk7Y2FzZSAzOnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSk7Y2FzZSA0OnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSxlWzNdKTtjYXNlIDU6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10sZVs0XSk7Y2FzZSA2OnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSxlWzNdLGVbNF0sZVs1XSk7Y2FzZSA3OnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSxlWzNdLGVbNF0sZVs1XSxlWzZdKX12YXIgbj1Gbih0LnByb3RvdHlwZSkscj10LmFwcGx5KG4sZSk7cmV0dXJuIGVzKHIpP3I6bn19ZnVuY3Rpb24gJG8odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXt2YXIgaT1SdChlKTtpZighR2EoZSkpe3ZhciBhPWNpKG4sMyk7ZT1McyhlKSxuPWZ1bmN0aW9uKHQpe3JldHVybiBhKGlbdF0sdCxpKX19dmFyIHM9dChlLG4scik7cmV0dXJuIHM+LTE/aVthP2Vbc106c106b319ZnVuY3Rpb24gRG8odCl7cmV0dXJuIG9pKChmdW5jdGlvbihlKXt2YXIgbj1lLmxlbmd0aCxyPW4sYT1xbi5wcm90b3R5cGUudGhydTtmb3IodCYmZS5yZXZlcnNlKCk7ci0tOyl7dmFyIHM9ZVtyXTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBzKXRocm93IG5ldyBCdChpKTtpZihhJiYhdSYmXCJ3cmFwcGVyXCI9PXVpKHMpKXZhciB1PW5ldyBxbihbXSwhMCl9Zm9yKHI9dT9yOm47KytyPG47KXt2YXIgbD11aShzPWVbcl0pLGM9XCJ3cmFwcGVyXCI9PWw/c2kocyk6bzt1PWMmJlNpKGNbMF0pJiY0MjQ9PWNbMV0mJiFjWzRdLmxlbmd0aCYmMT09Y1s5XT91W3VpKGNbMF0pXS5hcHBseSh1LGNbM10pOjE9PXMubGVuZ3RoJiZTaShzKT91W2xdKCk6dS50aHJ1KHMpfXJldHVybiBmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cyxyPXRbMF07aWYodSYmMT09dC5sZW5ndGgmJkhhKHIpKXJldHVybiB1LnBsYW50KHIpLnZhbHVlKCk7Zm9yKHZhciBvPTAsaT1uP2Vbb10uYXBwbHkodGhpcyx0KTpyOysrbzxuOylpPWVbb10uY2FsbCh0aGlzLGkpO3JldHVybiBpfX0pKX1mdW5jdGlvbiBGbyh0LGUsbixpLGEscyx1LGwsYyxkKXt2YXIgaD1lJmYscD0xJmUsZz0yJmUseT0yNCZlLG09NTEyJmUsdj1nP286V28odCk7cmV0dXJuIGZ1bmN0aW9uIGYoKXtmb3IodmFyIGI9YXJndW1lbnRzLmxlbmd0aCx3PXIoYiksXz1iO18tLTspd1tfXT1hcmd1bWVudHNbX107aWYoeSl2YXIgRT1saShmKSxTPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoLHI9MDtuLS07KXRbbl09PT1lJiYrK3I7cmV0dXJuIHJ9KHcsRSk7aWYoaSYmKHc9Q28odyxpLGEseSkpLHMmJih3PUJvKHcscyx1LHkpKSxiLT1TLHkmJmI8ZCl7dmFyIEE9Zm4odyxFKTtyZXR1cm4gWW8odCxlLEZvLGYucGxhY2Vob2xkZXIsbix3LEEsbCxjLGQtYil9dmFyIEk9cD9uOnRoaXMsVD1nP0lbdF06dDtyZXR1cm4gYj13Lmxlbmd0aCxsP3c9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lmxlbmd0aCxyPXduKGUubGVuZ3RoLG4pLGk9a28odCk7Zm9yKDtyLS07KXt2YXIgYT1lW3JdO3Rbcl09d2koYSxuKT9pW2FdOm99cmV0dXJuIHR9KHcsbCk6bSYmYj4xJiZ3LnJldmVyc2UoKSxoJiZjPGImJih3Lmxlbmd0aD1jKSx0aGlzJiZ0aGlzIT09Z2UmJnRoaXMgaW5zdGFuY2VvZiBmJiYoVD12fHxXbyhUKSksVC5hcHBseShJLHcpfX1mdW5jdGlvbiB6byh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiBmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gX3IodCwoZnVuY3Rpb24odCxvLGkpe2UocixuKHQpLG8saSl9KSkscn0obix0LGUocikse30pfX1mdW5jdGlvbiBxbyh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciBpO2lmKG49PT1vJiZyPT09bylyZXR1cm4gZTtpZihuIT09byYmKGk9biksciE9PW8pe2lmKGk9PT1vKXJldHVybiByO1wic3RyaW5nXCI9PXR5cGVvZiBufHxcInN0cmluZ1wiPT10eXBlb2Ygcj8obj1jbyhuKSxyPWNvKHIpKToobj1sbyhuKSxyPWxvKHIpKSxpPXQobixyKX1yZXR1cm4gaX19ZnVuY3Rpb24gSG8odCl7cmV0dXJuIG9pKChmdW5jdGlvbihlKXtyZXR1cm4gZT1qZShlLFFlKGNpKCkpKSxYcigoZnVuY3Rpb24obil7dmFyIHI9dGhpcztyZXR1cm4gdChlLChmdW5jdGlvbih0KXtyZXR1cm4gUmUodCxyLG4pfSkpfSkpfSkpfWZ1bmN0aW9uIFZvKHQsZSl7dmFyIG49KGU9ZT09PW8/XCIgXCI6Y28oZSkpLmxlbmd0aDtpZihuPDIpcmV0dXJuIG4/S3IoZSx0KTplO3ZhciByPUtyKGUscGUodC9wbihlKSkpO3JldHVybiB1bihlKT9TbyhnbihyKSwwLHQpLmpvaW4oXCJcIik6ci5zbGljZSgwLHQpfWZ1bmN0aW9uIEdvKHQpe3JldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIGkmJlwibnVtYmVyXCIhPXR5cGVvZiBpJiZfaShlLG4saSkmJihuPWk9byksZT1wcyhlKSxuPT09bz8obj1lLGU9MCk6bj1wcyhuKSxmdW5jdGlvbih0LGUsbixvKXtmb3IodmFyIGk9LTEsYT1ibihwZSgoZS10KS8obnx8MSkpLDApLHM9cihhKTthLS07KXNbbz9hOisraV09dCx0Kz1uO3JldHVybiBzfShlLG4saT1pPT09bz9lPG4/MTotMTpwcyhpKSx0KX19ZnVuY3Rpb24gSm8odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJlwic3RyaW5nXCI9PXR5cGVvZiBufHwoZT1tcyhlKSxuPW1zKG4pKSx0KGUsbil9fWZ1bmN0aW9uIFlvKHQsZSxuLHIsaSxhLHMsdSxmLGQpe3ZhciBoPTgmZTtlfD1oP2w6Yyw0JihlJj1+KGg/YzpsKSl8fChlJj0tNCk7dmFyIHA9W3QsZSxpLGg/YTpvLGg/czpvLGg/bzphLGg/bzpzLHUsZixkXSxnPW4uYXBwbHkobyxwKTtyZXR1cm4gU2kodCkmJmtpKGcscCksZy5wbGFjZWhvbGRlcj1yLFVpKGcsdCxlKX1mdW5jdGlvbiBLbyh0KXt2YXIgZT1UdFt0XTtyZXR1cm4gZnVuY3Rpb24odCxuKXtpZih0PW1zKHQpLChuPW51bGw9PW4/MDp3bihncyhuKSwyOTIpKSYmd2UodCkpe3ZhciByPShicyh0KStcImVcIikuc3BsaXQoXCJlXCIpO3JldHVybisoKHI9KGJzKGUoclswXStcImVcIisoK3JbMV0rbikpKStcImVcIikuc3BsaXQoXCJlXCIpKVswXStcImVcIisoK3JbMV0tbikpfXJldHVybiBlKHQpfX12YXIgWG89eG4mJjEvZG4obmV3IHhuKFssLTBdKSlbMV09PWg/ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB4bih0KX06bHU7ZnVuY3Rpb24gWm8odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPXlpKGUpO3JldHVybiBuPT1JP2xuKGUpOm49PUI/aG4oZSk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gamUoZSwoZnVuY3Rpb24oZSl7cmV0dXJuW2UsdFtlXV19KSl9KGUsdChlKSl9fWZ1bmN0aW9uIFFvKHQsZSxuLGEsaCxwLGcseSl7dmFyIG09MiZlO2lmKCFtJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBCdChpKTt2YXIgdj1hP2EubGVuZ3RoOjA7aWYodnx8KGUmPS05NyxhPWg9byksZz1nPT09bz9nOmJuKGdzKGcpLDApLHk9eT09PW8/eTpncyh5KSx2LT1oP2gubGVuZ3RoOjAsZSZjKXt2YXIgYj1hLHc9aDthPWg9b312YXIgXz1tP286c2kodCksRT1bdCxlLG4sYSxoLGIsdyxwLGcseV07aWYoXyYmZnVuY3Rpb24odCxlKXt2YXIgbj10WzFdLHI9ZVsxXSxvPW58cixpPW88MTMxLGE9cj09ZiYmOD09bnx8cj09ZiYmbj09ZCYmdFs3XS5sZW5ndGg8PWVbOF18fDM4ND09ciYmZVs3XS5sZW5ndGg8PWVbOF0mJjg9PW47aWYoIWkmJiFhKXJldHVybiB0OzEmciYmKHRbMl09ZVsyXSxvfD0xJm4/MDo0KTt2YXIgdT1lWzNdO2lmKHUpe3ZhciBsPXRbM107dFszXT1sP0NvKGwsdSxlWzRdKTp1LHRbNF09bD9mbih0WzNdLHMpOmVbNF19KHU9ZVs1XSkmJihsPXRbNV0sdFs1XT1sP0JvKGwsdSxlWzZdKTp1LHRbNl09bD9mbih0WzVdLHMpOmVbNl0pOyh1PWVbN10pJiYodFs3XT11KTtyJmYmJih0WzhdPW51bGw9PXRbOF0/ZVs4XTp3bih0WzhdLGVbOF0pKTtudWxsPT10WzldJiYodFs5XT1lWzldKTt0WzBdPWVbMF0sdFsxXT1vfShFLF8pLHQ9RVswXSxlPUVbMV0sbj1FWzJdLGE9RVszXSxoPUVbNF0sISh5PUVbOV09RVs5XT09PW8/bT8wOnQubGVuZ3RoOmJuKEVbOV0tdiwwKSkmJjI0JmUmJihlJj0tMjUpLGUmJjEhPWUpUz04PT1lfHxlPT11P2Z1bmN0aW9uKHQsZSxuKXt2YXIgaT1Xbyh0KTtyZXR1cm4gZnVuY3Rpb24gYSgpe2Zvcih2YXIgcz1hcmd1bWVudHMubGVuZ3RoLHU9cihzKSxsPXMsYz1saShhKTtsLS07KXVbbF09YXJndW1lbnRzW2xdO3ZhciBmPXM8MyYmdVswXSE9PWMmJnVbcy0xXSE9PWM/W106Zm4odSxjKTtyZXR1cm4ocy09Zi5sZW5ndGgpPG4/WW8odCxlLEZvLGEucGxhY2Vob2xkZXIsbyx1LGYsbyxvLG4tcyk6UmUodGhpcyYmdGhpcyE9PWdlJiZ0aGlzIGluc3RhbmNlb2YgYT9pOnQsdGhpcyx1KX19KHQsZSx5KTplIT1sJiYzMyE9ZXx8aC5sZW5ndGg/Rm8uYXBwbHkobyxFKTpmdW5jdGlvbih0LGUsbixvKXt2YXIgaT0xJmUsYT1Xbyh0KTtyZXR1cm4gZnVuY3Rpb24gZSgpe2Zvcih2YXIgcz0tMSx1PWFyZ3VtZW50cy5sZW5ndGgsbD0tMSxjPW8ubGVuZ3RoLGY9cihjK3UpLGQ9dGhpcyYmdGhpcyE9PWdlJiZ0aGlzIGluc3RhbmNlb2YgZT9hOnQ7KytsPGM7KWZbbF09b1tsXTtmb3IoO3UtLTspZltsKytdPWFyZ3VtZW50c1srK3NdO3JldHVybiBSZShkLGk/bjp0aGlzLGYpfX0odCxlLG4sYSk7ZWxzZSB2YXIgUz1mdW5jdGlvbih0LGUsbil7dmFyIHI9MSZlLG89V28odCk7cmV0dXJuIGZ1bmN0aW9uIGUoKXtyZXR1cm4odGhpcyYmdGhpcyE9PWdlJiZ0aGlzIGluc3RhbmNlb2YgZT9vOnQpLmFwcGx5KHI/bjp0aGlzLGFyZ3VtZW50cyl9fSh0LGUsbik7cmV0dXJuIFVpKChfP2VvOmtpKShTLEUpLHQsZSl9ZnVuY3Rpb24gdGkodCxlLG4scil7cmV0dXJuIHQ9PT1vfHxEYSh0LE90W25dKSYmIU50LmNhbGwocixuKT9lOnR9ZnVuY3Rpb24gZWkodCxlLG4scixpLGEpe3JldHVybiBlcyh0KSYmZXMoZSkmJihhLnNldChlLHQpLHpyKHQsZSxvLGVpLGEpLGEuZGVsZXRlKGUpKSx0fWZ1bmN0aW9uIG5pKHQpe3JldHVybiBpcyh0KT9vOnR9ZnVuY3Rpb24gcmkodCxlLG4scixpLGEpe3ZhciBzPTEmbix1PXQubGVuZ3RoLGw9ZS5sZW5ndGg7aWYodSE9bCYmIShzJiZsPnUpKXJldHVybiExO3ZhciBjPWEuZ2V0KHQpLGY9YS5nZXQoZSk7aWYoYyYmZilyZXR1cm4gYz09ZSYmZj09dDt2YXIgZD0tMSxoPSEwLHA9MiZuP25ldyBZbjpvO2ZvcihhLnNldCh0LGUpLGEuc2V0KGUsdCk7KytkPHU7KXt2YXIgZz10W2RdLHk9ZVtkXTtpZihyKXZhciBtPXM/cih5LGcsZCxlLHQsYSk6cihnLHksZCx0LGUsYSk7aWYobSE9PW8pe2lmKG0pY29udGludWU7aD0hMTticmVha31pZihwKXtpZighV2UoZSwoZnVuY3Rpb24odCxlKXtpZighZW4ocCxlKSYmKGc9PT10fHxpKGcsdCxuLHIsYSkpKXJldHVybiBwLnB1c2goZSl9KSkpe2g9ITE7YnJlYWt9fWVsc2UgaWYoZyE9PXkmJiFpKGcseSxuLHIsYSkpe2g9ITE7YnJlYWt9fXJldHVybiBhLmRlbGV0ZSh0KSxhLmRlbGV0ZShlKSxofWZ1bmN0aW9uIG9pKHQpe3JldHVybiBPaSh4aSh0LG8sVmkpLHQrXCJcIil9ZnVuY3Rpb24gaWkodCl7cmV0dXJuIElyKHQsTHMscGkpfWZ1bmN0aW9uIGFpKHQpe3JldHVybiBJcih0LE9zLGdpKX12YXIgc2k9a24/ZnVuY3Rpb24odCl7cmV0dXJuIGtuLmdldCh0KX06bHU7ZnVuY3Rpb24gdWkodCl7Zm9yKHZhciBlPXQubmFtZStcIlwiLG49TG5bZV0scj1OdC5jYWxsKExuLGUpP24ubGVuZ3RoOjA7ci0tOyl7dmFyIG89bltyXSxpPW8uZnVuYztpZihudWxsPT1pfHxpPT10KXJldHVybiBvLm5hbWV9cmV0dXJuIGV9ZnVuY3Rpb24gbGkodCl7cmV0dXJuKE50LmNhbGwoRG4sXCJwbGFjZWhvbGRlclwiKT9Ebjp0KS5wbGFjZWhvbGRlcn1mdW5jdGlvbiBjaSgpe3ZhciB0PURuLml0ZXJhdGVlfHxpdTtyZXR1cm4gdD10PT09aXU/TnI6dCxhcmd1bWVudHMubGVuZ3RoP3QoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk6dH1mdW5jdGlvbiBmaSh0LGUpe3ZhciBuLHIsbz10Ll9fZGF0YV9fO3JldHVybihcInN0cmluZ1wiPT0ocj10eXBlb2Yobj1lKSl8fFwibnVtYmVyXCI9PXJ8fFwic3ltYm9sXCI9PXJ8fFwiYm9vbGVhblwiPT1yP1wiX19wcm90b19fXCIhPT1uOm51bGw9PT1uKT9vW1wic3RyaW5nXCI9PXR5cGVvZiBlP1wic3RyaW5nXCI6XCJoYXNoXCJdOm8ubWFwfWZ1bmN0aW9uIGRpKHQpe2Zvcih2YXIgZT1Mcyh0KSxuPWUubGVuZ3RoO24tLTspe3ZhciByPWVbbl0sbz10W3JdO2Vbbl09W3IsbyxUaShvKV19cmV0dXJuIGV9ZnVuY3Rpb24gaGkodCxlKXt2YXIgbj1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT10P286dFtlXX0odCxlKTtyZXR1cm4ganIobik/bjpvfXZhciBwaT1tZT9mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD9bXToodD1SdCh0KSxMZShtZSh0KSwoZnVuY3Rpb24oZSl7cmV0dXJuIFl0LmNhbGwodCxlKX0pKSl9Onl1LGdpPW1lP2Z1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXTt0OylOZShlLHBpKHQpKSx0PUd0KHQpO3JldHVybiBlfTp5dSx5aT1UcjtmdW5jdGlvbiBtaSh0LGUsbil7Zm9yKHZhciByPS0xLG89KGU9X28oZSx0KSkubGVuZ3RoLGk9ITE7KytyPG87KXt2YXIgYT1QaShlW3JdKTtpZighKGk9bnVsbCE9dCYmbih0LGEpKSlicmVhazt0PXRbYV19cmV0dXJuIGl8fCsrciE9bz9pOiEhKG89bnVsbD09dD8wOnQubGVuZ3RoKSYmdHMobykmJndpKGEsbykmJihIYSh0KXx8cWEodCkpfWZ1bmN0aW9uIHZpKHQpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuY29uc3RydWN0b3J8fElpKHQpP3t9OkZuKEd0KHQpKX1mdW5jdGlvbiBiaSh0KXtyZXR1cm4gSGEodCl8fHFhKHQpfHwhIShYdCYmdCYmdFtYdF0pfWZ1bmN0aW9uIHdpKHQsZSl7dmFyIG49dHlwZW9mIHQ7cmV0dXJuISEoZT1udWxsPT1lP3A6ZSkmJihcIm51bWJlclwiPT1ufHxcInN5bWJvbFwiIT1uJiZ3dC50ZXN0KHQpKSYmdD4tMSYmdCUxPT0wJiZ0PGV9ZnVuY3Rpb24gX2kodCxlLG4pe2lmKCFlcyhuKSlyZXR1cm4hMTt2YXIgcj10eXBlb2YgZTtyZXR1cm4hIShcIm51bWJlclwiPT1yP0dhKG4pJiZ3aShlLG4ubGVuZ3RoKTpcInN0cmluZ1wiPT1yJiZlIGluIG4pJiZEYShuW2VdLHQpfWZ1bmN0aW9uIEVpKHQsZSl7aWYoSGEodCkpcmV0dXJuITE7dmFyIG49dHlwZW9mIHQ7cmV0dXJuIShcIm51bWJlclwiIT1uJiZcInN5bWJvbFwiIT1uJiZcImJvb2xlYW5cIiE9biYmbnVsbCE9dCYmIWxzKHQpKXx8KG50LnRlc3QodCl8fCFldC50ZXN0KHQpfHxudWxsIT1lJiZ0IGluIFJ0KGUpKX1mdW5jdGlvbiBTaSh0KXt2YXIgZT11aSh0KSxuPURuW2VdO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG58fCEoZSBpbiBIbi5wcm90b3R5cGUpKXJldHVybiExO2lmKHQ9PT1uKXJldHVybiEwO3ZhciByPXNpKG4pO3JldHVybiEhciYmdD09PXJbMF19KEluJiZ5aShuZXcgSW4obmV3IEFycmF5QnVmZmVyKDEpKSkhPWp8fFRuJiZ5aShuZXcgVG4pIT1JfHxSbiYmeWkoUm4ucmVzb2x2ZSgpKSE9eHx8eG4mJnlpKG5ldyB4bikhPUJ8fENuJiZ5aShuZXcgQ24pIT1PKSYmKHlpPWZ1bmN0aW9uKHQpe3ZhciBlPVRyKHQpLG49ZT09Uj90LmNvbnN0cnVjdG9yOm8scj1uP1dpKG4pOlwiXCI7aWYocilzd2l0Y2gocil7Y2FzZSBPbjpyZXR1cm4gajtjYXNlIFVuOnJldHVybiBJO2Nhc2Ugam46cmV0dXJuIHg7Y2FzZSBObjpyZXR1cm4gQjtjYXNlIE1uOnJldHVybiBPfXJldHVybiBlfSk7dmFyIEFpPVV0P1phOm11O2Z1bmN0aW9uIElpKHQpe3ZhciBlPXQmJnQuY29uc3RydWN0b3I7cmV0dXJuIHQ9PT0oXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5wcm90b3R5cGV8fE90KX1mdW5jdGlvbiBUaSh0KXtyZXR1cm4gdD09dCYmIWVzKHQpfWZ1bmN0aW9uIFJpKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBudWxsIT1uJiYoblt0XT09PWUmJihlIT09b3x8dCBpbiBSdChuKSkpfX1mdW5jdGlvbiB4aSh0LGUsbil7cmV0dXJuIGU9Ym4oZT09PW8/dC5sZW5ndGgtMTplLDApLGZ1bmN0aW9uKCl7Zm9yKHZhciBvPWFyZ3VtZW50cyxpPS0xLGE9Ym4oby5sZW5ndGgtZSwwKSxzPXIoYSk7KytpPGE7KXNbaV09b1tlK2ldO2k9LTE7Zm9yKHZhciB1PXIoZSsxKTsrK2k8ZTspdVtpXT1vW2ldO3JldHVybiB1W2VdPW4ocyksUmUodCx0aGlzLHUpfX1mdW5jdGlvbiBDaSh0LGUpe3JldHVybiBlLmxlbmd0aDwyP3Q6QXIodCxvbyhlLDAsLTEpKX1mdW5jdGlvbiBCaSh0LGUpe2lmKChcImNvbnN0cnVjdG9yXCIhPT1lfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0W2VdKSYmXCJfX3Byb3RvX19cIiE9ZSlyZXR1cm4gdFtlXX12YXIga2k9amkoZW8pLExpPWhlfHxmdW5jdGlvbih0LGUpe3JldHVybiBnZS5zZXRUaW1lb3V0KHQsZSl9LE9pPWppKG5vKTtmdW5jdGlvbiBVaSh0LGUsbil7dmFyIHI9ZStcIlwiO3JldHVybiBPaSh0LGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5sZW5ndGg7aWYoIW4pcmV0dXJuIHQ7dmFyIHI9bi0xO3JldHVybiBlW3JdPShuPjE/XCImIFwiOlwiXCIpK2Vbcl0sZT1lLmpvaW4obj4yP1wiLCBcIjpcIiBcIiksdC5yZXBsYWNlKHV0LFwie1xcbi8qIFt3cmFwcGVkIHdpdGggXCIrZStcIl0gKi9cXG5cIil9KHIsZnVuY3Rpb24odCxlKXtyZXR1cm4gQ2UobSwoZnVuY3Rpb24obil7dmFyIHI9XCJfLlwiK25bMF07ZSZuWzFdJiYhT2UodCxyKSYmdC5wdXNoKHIpfSkpLHQuc29ydCgpfShmdW5jdGlvbih0KXt2YXIgZT10Lm1hdGNoKGx0KTtyZXR1cm4gZT9lWzFdLnNwbGl0KGN0KTpbXX0ociksbikpKX1mdW5jdGlvbiBqaSh0KXt2YXIgZT0wLG49MDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1fbigpLGk9MTYtKHItbik7aWYobj1yLGk+MCl7aWYoKytlPj04MDApcmV0dXJuIGFyZ3VtZW50c1swXX1lbHNlIGU9MDtyZXR1cm4gdC5hcHBseShvLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIE5pKHQsZSl7dmFyIG49LTEscj10Lmxlbmd0aCxpPXItMTtmb3IoZT1lPT09bz9yOmU7KytuPGU7KXt2YXIgYT1ZcihuLGkpLHM9dFthXTt0W2FdPXRbbl0sdFtuXT1zfXJldHVybiB0Lmxlbmd0aD1lLHR9dmFyIE1pPWZ1bmN0aW9uKHQpe3ZhciBlPWphKHQsKGZ1bmN0aW9uKHQpe3JldHVybiA1MDA9PT1uLnNpemUmJm4uY2xlYXIoKSx0fSkpLG49ZS5jYWNoZTtyZXR1cm4gZX0oKGZ1bmN0aW9uKHQpe3ZhciBlPVtdO3JldHVybiA0Nj09PXQuY2hhckNvZGVBdCgwKSYmZS5wdXNoKFwiXCIpLHQucmVwbGFjZShydCwoZnVuY3Rpb24odCxuLHIsbyl7ZS5wdXNoKHI/by5yZXBsYWNlKGh0LFwiJDFcIik6bnx8dCl9KSksZX0pKTtmdW5jdGlvbiBQaSh0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdHx8bHModCkpcmV0dXJuIHQ7dmFyIGU9dCtcIlwiO3JldHVyblwiMFwiPT1lJiYxL3Q9PS0xLzA/XCItMFwiOmV9ZnVuY3Rpb24gV2kodCl7aWYobnVsbCE9dCl7dHJ5e3JldHVybiBqdC5jYWxsKHQpfWNhdGNoKHQpe310cnl7cmV0dXJuIHQrXCJcIn1jYXRjaCh0KXt9fXJldHVyblwiXCJ9ZnVuY3Rpb24gJGkodCl7aWYodCBpbnN0YW5jZW9mIEhuKXJldHVybiB0LmNsb25lKCk7dmFyIGU9bmV3IHFuKHQuX193cmFwcGVkX18sdC5fX2NoYWluX18pO3JldHVybiBlLl9fYWN0aW9uc19fPWtvKHQuX19hY3Rpb25zX18pLGUuX19pbmRleF9fPXQuX19pbmRleF9fLGUuX192YWx1ZXNfXz10Ll9fdmFsdWVzX18sZX12YXIgRGk9WHIoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIEphKHQpP2RyKHQsdnIoZSwxLEphLCEwKSk6W119KSksRmk9WHIoKGZ1bmN0aW9uKHQsZSl7dmFyIG49WGkoZSk7cmV0dXJuIEphKG4pJiYobj1vKSxKYSh0KT9kcih0LHZyKGUsMSxKYSwhMCksY2kobiwyKSk6W119KSksemk9WHIoKGZ1bmN0aW9uKHQsZSl7dmFyIG49WGkoZSk7cmV0dXJuIEphKG4pJiYobj1vKSxKYSh0KT9kcih0LHZyKGUsMSxKYSwhMCksbyxuKTpbXX0pKTtmdW5jdGlvbiBxaSh0LGUsbil7dmFyIHI9bnVsbD09dD8wOnQubGVuZ3RoO2lmKCFyKXJldHVybi0xO3ZhciBvPW51bGw9PW4/MDpncyhuKTtyZXR1cm4gbzwwJiYobz1ibihyK28sMCkpLEZlKHQsY2koZSwzKSxvKX1mdW5jdGlvbiBIaSh0LGUsbil7dmFyIHI9bnVsbD09dD8wOnQubGVuZ3RoO2lmKCFyKXJldHVybi0xO3ZhciBpPXItMTtyZXR1cm4gbiE9PW8mJihpPWdzKG4pLGk9bjwwP2JuKHIraSwwKTp3bihpLHItMSkpLEZlKHQsY2koZSwzKSxpLCEwKX1mdW5jdGlvbiBWaSh0KXtyZXR1cm4obnVsbD09dD8wOnQubGVuZ3RoKT92cih0LDEpOltdfWZ1bmN0aW9uIEdpKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD90WzBdOm99dmFyIEppPVhyKChmdW5jdGlvbih0KXt2YXIgZT1qZSh0LGJvKTtyZXR1cm4gZS5sZW5ndGgmJmVbMF09PT10WzBdP0JyKGUpOltdfSkpLFlpPVhyKChmdW5jdGlvbih0KXt2YXIgZT1YaSh0KSxuPWplKHQsYm8pO3JldHVybiBlPT09WGkobik/ZT1vOm4ucG9wKCksbi5sZW5ndGgmJm5bMF09PT10WzBdP0JyKG4sY2koZSwyKSk6W119KSksS2k9WHIoKGZ1bmN0aW9uKHQpe3ZhciBlPVhpKHQpLG49amUodCxibyk7cmV0dXJuKGU9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm8pJiZuLnBvcCgpLG4ubGVuZ3RoJiZuWzBdPT09dFswXT9CcihuLG8sZSk6W119KSk7ZnVuY3Rpb24gWGkodCl7dmFyIGU9bnVsbD09dD8wOnQubGVuZ3RoO3JldHVybiBlP3RbZS0xXTpvfXZhciBaaT1YcihRaSk7ZnVuY3Rpb24gUWkodCxlKXtyZXR1cm4gdCYmdC5sZW5ndGgmJmUmJmUubGVuZ3RoP0dyKHQsZSk6dH12YXIgdGE9b2koKGZ1bmN0aW9uKHQsZSl7dmFyIG49bnVsbD09dD8wOnQubGVuZ3RoLHI9c3IodCxlKTtyZXR1cm4gSnIodCxqZShlLChmdW5jdGlvbih0KXtyZXR1cm4gd2kodCxuKT8rdDp0fSkpLnNvcnQoeG8pKSxyfSkpO2Z1bmN0aW9uIGVhKHQpe3JldHVybiBudWxsPT10P3Q6QW4uY2FsbCh0KX12YXIgbmE9WHIoKGZ1bmN0aW9uKHQpe3JldHVybiBmbyh2cih0LDEsSmEsITApKX0pKSxyYT1YcigoZnVuY3Rpb24odCl7dmFyIGU9WGkodCk7cmV0dXJuIEphKGUpJiYoZT1vKSxmbyh2cih0LDEsSmEsITApLGNpKGUsMikpfSkpLG9hPVhyKChmdW5jdGlvbih0KXt2YXIgZT1YaSh0KTtyZXR1cm4gZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2U6byxmbyh2cih0LDEsSmEsITApLG8sZSl9KSk7ZnVuY3Rpb24gaWEodCl7aWYoIXR8fCF0Lmxlbmd0aClyZXR1cm5bXTt2YXIgZT0wO3JldHVybiB0PUxlKHQsKGZ1bmN0aW9uKHQpe2lmKEphKHQpKXJldHVybiBlPWJuKHQubGVuZ3RoLGUpLCEwfSkpLFhlKGUsKGZ1bmN0aW9uKGUpe3JldHVybiBqZSh0LEdlKGUpKX0pKX1mdW5jdGlvbiBhYSh0LGUpe2lmKCF0fHwhdC5sZW5ndGgpcmV0dXJuW107dmFyIG49aWEodCk7cmV0dXJuIG51bGw9PWU/bjpqZShuLChmdW5jdGlvbih0KXtyZXR1cm4gUmUoZSxvLHQpfSkpfXZhciBzYT1YcigoZnVuY3Rpb24odCxlKXtyZXR1cm4gSmEodCk/ZHIodCxlKTpbXX0pKSx1YT1YcigoZnVuY3Rpb24odCl7cmV0dXJuIG1vKExlKHQsSmEpKX0pKSxsYT1YcigoZnVuY3Rpb24odCl7dmFyIGU9WGkodCk7cmV0dXJuIEphKGUpJiYoZT1vKSxtbyhMZSh0LEphKSxjaShlLDIpKX0pKSxjYT1YcigoZnVuY3Rpb24odCl7dmFyIGU9WGkodCk7cmV0dXJuIGU9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm8sbW8oTGUodCxKYSksbyxlKX0pKSxmYT1YcihpYSk7dmFyIGRhPVhyKChmdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aCxuPWU+MT90W2UtMV06bztyZXR1cm4gbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuPyh0LnBvcCgpLG4pOm8sYWEodCxuKX0pKTtmdW5jdGlvbiBoYSh0KXt2YXIgZT1Ebih0KTtyZXR1cm4gZS5fX2NoYWluX189ITAsZX1mdW5jdGlvbiBwYSh0LGUpe3JldHVybiBlKHQpfXZhciBnYT1vaSgoZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgsbj1lP3RbMF06MCxyPXRoaXMuX193cmFwcGVkX18saT1mdW5jdGlvbihlKXtyZXR1cm4gc3IoZSx0KX07cmV0dXJuIShlPjF8fHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoKSYmciBpbnN0YW5jZW9mIEhuJiZ3aShuKT8oKHI9ci5zbGljZShuLCtuKyhlPzE6MCkpKS5fX2FjdGlvbnNfXy5wdXNoKHtmdW5jOnBhLGFyZ3M6W2ldLHRoaXNBcmc6b30pLG5ldyBxbihyLHRoaXMuX19jaGFpbl9fKS50aHJ1KChmdW5jdGlvbih0KXtyZXR1cm4gZSYmIXQubGVuZ3RoJiZ0LnB1c2gobyksdH0pKSk6dGhpcy50aHJ1KGkpfSkpO3ZhciB5YT1PbygoZnVuY3Rpb24odCxlLG4pe050LmNhbGwodCxuKT8rK3Rbbl06YXIodCxuLDEpfSkpO3ZhciBtYT0kbyhxaSksdmE9JG8oSGkpO2Z1bmN0aW9uIGJhKHQsZSl7cmV0dXJuKEhhKHQpP0NlOmhyKSh0LGNpKGUsMykpfWZ1bmN0aW9uIHdhKHQsZSl7cmV0dXJuKEhhKHQpP0JlOnByKSh0LGNpKGUsMykpfXZhciBfYT1PbygoZnVuY3Rpb24odCxlLG4pe050LmNhbGwodCxuKT90W25dLnB1c2goZSk6YXIodCxuLFtlXSl9KSk7dmFyIEVhPVhyKChmdW5jdGlvbih0LGUsbil7dmFyIG89LTEsaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlLGE9R2EodCk/cih0Lmxlbmd0aCk6W107cmV0dXJuIGhyKHQsKGZ1bmN0aW9uKHQpe2FbKytvXT1pP1JlKGUsdCxuKTprcih0LGUsbil9KSksYX0pKSxTYT1PbygoZnVuY3Rpb24odCxlLG4pe2FyKHQsbixlKX0pKTtmdW5jdGlvbiBBYSh0LGUpe3JldHVybihIYSh0KT9qZTokcikodCxjaShlLDMpKX12YXIgSWE9T28oKGZ1bmN0aW9uKHQsZSxuKXt0W24/MDoxXS5wdXNoKGUpfSksKGZ1bmN0aW9uKCl7cmV0dXJuW1tdLFtdXX0pKTt2YXIgVGE9WHIoKGZ1bmN0aW9uKHQsZSl7aWYobnVsbD09dClyZXR1cm5bXTt2YXIgbj1lLmxlbmd0aDtyZXR1cm4gbj4xJiZfaSh0LGVbMF0sZVsxXSk/ZT1bXTpuPjImJl9pKGVbMF0sZVsxXSxlWzJdKSYmKGU9W2VbMF1dKSxIcih0LHZyKGUsMSksW10pfSkpLFJhPWNlfHxmdW5jdGlvbigpe3JldHVybiBnZS5EYXRlLm5vdygpfTtmdW5jdGlvbiB4YSh0LGUsbil7cmV0dXJuIGU9bj9vOmUsZT10JiZudWxsPT1lP3QubGVuZ3RoOmUsUW8odCxmLG8sbyxvLG8sZSl9ZnVuY3Rpb24gQ2EodCxlKXt2YXIgbjtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBCdChpKTtyZXR1cm4gdD1ncyh0KSxmdW5jdGlvbigpe3JldHVybi0tdD4wJiYobj1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKSksdDw9MSYmKGU9byksbn19dmFyIEJhPVhyKChmdW5jdGlvbih0LGUsbil7dmFyIHI9MTtpZihuLmxlbmd0aCl7dmFyIG89Zm4obixsaShCYSkpO3J8PWx9cmV0dXJuIFFvKHQscixlLG4sbyl9KSksa2E9WHIoKGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0zO2lmKG4ubGVuZ3RoKXt2YXIgbz1mbihuLGxpKGthKSk7cnw9bH1yZXR1cm4gUW8oZSxyLHQsbixvKX0pKTtmdW5jdGlvbiBMYSh0LGUsbil7dmFyIHIsYSxzLHUsbCxjLGY9MCxkPSExLGg9ITEscD0hMDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBCdChpKTtmdW5jdGlvbiBnKGUpe3ZhciBuPXIsaT1hO3JldHVybiByPWE9byxmPWUsdT10LmFwcGx5KGksbil9ZnVuY3Rpb24geSh0KXt2YXIgbj10LWM7cmV0dXJuIGM9PT1vfHxuPj1lfHxuPDB8fGgmJnQtZj49c31mdW5jdGlvbiBtKCl7dmFyIHQ9UmEoKTtpZih5KHQpKXJldHVybiB2KHQpO2w9TGkobSxmdW5jdGlvbih0KXt2YXIgbj1lLSh0LWMpO3JldHVybiBoP3duKG4scy0odC1mKSk6bn0odCkpfWZ1bmN0aW9uIHYodCl7cmV0dXJuIGw9byxwJiZyP2codCk6KHI9YT1vLHUpfWZ1bmN0aW9uIGIoKXt2YXIgdD1SYSgpLG49eSh0KTtpZihyPWFyZ3VtZW50cyxhPXRoaXMsYz10LG4pe2lmKGw9PT1vKXJldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZj10LGw9TGkobSxlKSxkP2codCk6dX0oYyk7aWYoaClyZXR1cm4gQW8obCksbD1MaShtLGUpLGcoYyl9cmV0dXJuIGw9PT1vJiYobD1MaShtLGUpKSx1fXJldHVybiBlPW1zKGUpfHwwLGVzKG4pJiYoZD0hIW4ubGVhZGluZyxzPShoPVwibWF4V2FpdFwiaW4gbik/Ym4obXMobi5tYXhXYWl0KXx8MCxlKTpzLHA9XCJ0cmFpbGluZ1wiaW4gbj8hIW4udHJhaWxpbmc6cCksYi5jYW5jZWw9ZnVuY3Rpb24oKXtsIT09byYmQW8obCksZj0wLHI9Yz1hPWw9b30sYi5mbHVzaD1mdW5jdGlvbigpe3JldHVybiBsPT09bz91OnYoUmEoKSl9LGJ9dmFyIE9hPVhyKChmdW5jdGlvbih0LGUpe3JldHVybiBmcih0LDEsZSl9KSksVWE9WHIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnIodCxtcyhlKXx8MCxuKX0pKTtmdW5jdGlvbiBqYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fG51bGwhPWUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEJ0KGkpO3ZhciBuPWZ1bmN0aW9uKCl7dmFyIHI9YXJndW1lbnRzLG89ZT9lLmFwcGx5KHRoaXMscik6clswXSxpPW4uY2FjaGU7aWYoaS5oYXMobykpcmV0dXJuIGkuZ2V0KG8pO3ZhciBhPXQuYXBwbHkodGhpcyxyKTtyZXR1cm4gbi5jYWNoZT1pLnNldChvLGEpfHxpLGF9O3JldHVybiBuLmNhY2hlPW5ldyhqYS5DYWNoZXx8Sm4pLG59ZnVuY3Rpb24gTmEodCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgQnQoaSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOnJldHVybiF0LmNhbGwodGhpcyk7Y2FzZSAxOnJldHVybiF0LmNhbGwodGhpcyxlWzBdKTtjYXNlIDI6cmV0dXJuIXQuY2FsbCh0aGlzLGVbMF0sZVsxXSk7Y2FzZSAzOnJldHVybiF0LmNhbGwodGhpcyxlWzBdLGVbMV0sZVsyXSl9cmV0dXJuIXQuYXBwbHkodGhpcyxlKX19amEuQ2FjaGU9Sm47dmFyIE1hPUVvKChmdW5jdGlvbih0LGUpe3ZhciBuPShlPTE9PWUubGVuZ3RoJiZIYShlWzBdKT9qZShlWzBdLFFlKGNpKCkpKTpqZSh2cihlLDEpLFFlKGNpKCkpKSkubGVuZ3RoO3JldHVybiBYcigoZnVuY3Rpb24ocil7Zm9yKHZhciBvPS0xLGk9d24oci5sZW5ndGgsbik7KytvPGk7KXJbb109ZVtvXS5jYWxsKHRoaXMscltvXSk7cmV0dXJuIFJlKHQsdGhpcyxyKX0pKX0pKSxQYT1YcigoZnVuY3Rpb24odCxlKXt2YXIgbj1mbihlLGxpKFBhKSk7cmV0dXJuIFFvKHQsbCxvLGUsbil9KSksV2E9WHIoKGZ1bmN0aW9uKHQsZSl7dmFyIG49Zm4oZSxsaShXYSkpO3JldHVybiBRbyh0LGMsbyxlLG4pfSkpLCRhPW9pKChmdW5jdGlvbih0LGUpe3JldHVybiBRbyh0LGQsbyxvLG8sZSl9KSk7ZnVuY3Rpb24gRGEodCxlKXtyZXR1cm4gdD09PWV8fHQhPXQmJmUhPWV9dmFyIEZhPUpvKFJyKSx6YT1KbygoZnVuY3Rpb24odCxlKXtyZXR1cm4gdD49ZX0pKSxxYT1McihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpP0xyOmZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmTnQuY2FsbCh0LFwiY2FsbGVlXCIpJiYhWXQuY2FsbCh0LFwiY2FsbGVlXCIpfSxIYT1yLmlzQXJyYXksVmE9X2U/UWUoX2UpOmZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmVHIodCk9PVV9O2Z1bmN0aW9uIEdhKHQpe3JldHVybiBudWxsIT10JiZ0cyh0Lmxlbmd0aCkmJiFaYSh0KX1mdW5jdGlvbiBKYSh0KXtyZXR1cm4gbnModCkmJkdhKHQpfXZhciBZYT1iZXx8bXUsS2E9RWU/UWUoRWUpOmZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmVHIodCk9PV99O2Z1bmN0aW9uIFhhKHQpe2lmKCFucyh0KSlyZXR1cm4hMTt2YXIgZT1Ucih0KTtyZXR1cm4gZT09RXx8XCJbb2JqZWN0IERPTUV4Y2VwdGlvbl1cIj09ZXx8XCJzdHJpbmdcIj09dHlwZW9mIHQubWVzc2FnZSYmXCJzdHJpbmdcIj09dHlwZW9mIHQubmFtZSYmIWlzKHQpfWZ1bmN0aW9uIFphKHQpe2lmKCFlcyh0KSlyZXR1cm4hMTt2YXIgZT1Ucih0KTtyZXR1cm4gZT09U3x8ZT09QXx8XCJbb2JqZWN0IEFzeW5jRnVuY3Rpb25dXCI9PWV8fFwiW29iamVjdCBQcm94eV1cIj09ZX1mdW5jdGlvbiBRYSh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD09Z3ModCl9ZnVuY3Rpb24gdHModCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmdDw9cH1mdW5jdGlvbiBlcyh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gbnVsbCE9dCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9ZnVuY3Rpb24gbnModCl7cmV0dXJuIG51bGwhPXQmJlwib2JqZWN0XCI9PXR5cGVvZiB0fXZhciBycz1TZT9RZShTZSk6ZnVuY3Rpb24odCl7cmV0dXJuIG5zKHQpJiZ5aSh0KT09SX07ZnVuY3Rpb24gb3ModCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHR8fG5zKHQpJiZUcih0KT09VH1mdW5jdGlvbiBpcyh0KXtpZighbnModCl8fFRyKHQpIT1SKXJldHVybiExO3ZhciBlPUd0KHQpO2lmKG51bGw9PT1lKXJldHVybiEwO3ZhciBuPU50LmNhbGwoZSxcImNvbnN0cnVjdG9yXCIpJiZlLmNvbnN0cnVjdG9yO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJm4gaW5zdGFuY2VvZiBuJiZqdC5jYWxsKG4pPT0kdH12YXIgYXM9QWU/UWUoQWUpOmZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmVHIodCk9PUN9O3ZhciBzcz1JZT9RZShJZSk6ZnVuY3Rpb24odCl7cmV0dXJuIG5zKHQpJiZ5aSh0KT09Qn07ZnVuY3Rpb24gdXModCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR8fCFIYSh0KSYmbnModCkmJlRyKHQpPT1rfWZ1bmN0aW9uIGxzKHQpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0fHxucyh0KSYmVHIodCk9PUx9dmFyIGNzPVRlP1FlKFRlKTpmdW5jdGlvbih0KXtyZXR1cm4gbnModCkmJnRzKHQubGVuZ3RoKSYmISF1ZVtUcih0KV19O3ZhciBmcz1KbyhXciksZHM9Sm8oKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ8PWV9KSk7ZnVuY3Rpb24gaHModCl7aWYoIXQpcmV0dXJuW107aWYoR2EodCkpcmV0dXJuIHVzKHQpP2duKHQpOmtvKHQpO2lmKFp0JiZ0W1p0XSlyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49W107IShlPXQubmV4dCgpKS5kb25lOyluLnB1c2goZS52YWx1ZSk7cmV0dXJuIG59KHRbWnRdKCkpO3ZhciBlPXlpKHQpO3JldHVybihlPT1JP2xuOmU9PUI/ZG46RHMpKHQpfWZ1bmN0aW9uIHBzKHQpe3JldHVybiB0Pyh0PW1zKHQpKT09PWh8fHQ9PT0tMS8wPzE3OTc2OTMxMzQ4NjIzMTU3ZTI5MioodDwwPy0xOjEpOnQ9PXQ/dDowOjA9PT10P3Q6MH1mdW5jdGlvbiBncyh0KXt2YXIgZT1wcyh0KSxuPWUlMTtyZXR1cm4gZT09ZT9uP2UtbjplOjB9ZnVuY3Rpb24geXModCl7cmV0dXJuIHQ/dXIoZ3ModCksMCx5KTowfWZ1bmN0aW9uIG1zKHQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiB0O2lmKGxzKHQpKXJldHVybiBnO2lmKGVzKHQpKXt2YXIgZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnZhbHVlT2Y/dC52YWx1ZU9mKCk6dDt0PWVzKGUpP2UrXCJcIjplfWlmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXJldHVybiAwPT09dD90Oit0O3Q9WmUodCk7dmFyIG49bXQudGVzdCh0KTtyZXR1cm4gbnx8YnQudGVzdCh0KT9kZSh0LnNsaWNlKDIpLG4/Mjo4KTp5dC50ZXN0KHQpP2c6K3R9ZnVuY3Rpb24gdnModCl7cmV0dXJuIExvKHQsT3ModCkpfWZ1bmN0aW9uIGJzKHQpe3JldHVybiBudWxsPT10P1wiXCI6Y28odCl9dmFyIHdzPVVvKChmdW5jdGlvbih0LGUpe2lmKElpKGUpfHxHYShlKSlMbyhlLExzKGUpLHQpO2Vsc2UgZm9yKHZhciBuIGluIGUpTnQuY2FsbChlLG4pJiZucih0LG4sZVtuXSl9KSksX3M9VW8oKGZ1bmN0aW9uKHQsZSl7TG8oZSxPcyhlKSx0KX0pKSxFcz1VbygoZnVuY3Rpb24odCxlLG4scil7TG8oZSxPcyhlKSx0LHIpfSkpLFNzPVVvKChmdW5jdGlvbih0LGUsbixyKXtMbyhlLExzKGUpLHQscil9KSksQXM9b2koc3IpO3ZhciBJcz1YcigoZnVuY3Rpb24odCxlKXt0PVJ0KHQpO3ZhciBuPS0xLHI9ZS5sZW5ndGgsaT1yPjI/ZVsyXTpvO2ZvcihpJiZfaShlWzBdLGVbMV0saSkmJihyPTEpOysrbjxyOylmb3IodmFyIGE9ZVtuXSxzPU9zKGEpLHU9LTEsbD1zLmxlbmd0aDsrK3U8bDspe3ZhciBjPXNbdV0sZj10W2NdOyhmPT09b3x8RGEoZixPdFtjXSkmJiFOdC5jYWxsKHQsYykpJiYodFtjXT1hW2NdKX1yZXR1cm4gdH0pKSxUcz1YcigoZnVuY3Rpb24odCl7cmV0dXJuIHQucHVzaChvLGVpKSxSZShqcyxvLHQpfSkpO2Z1bmN0aW9uIFJzKHQsZSxuKXt2YXIgcj1udWxsPT10P286QXIodCxlKTtyZXR1cm4gcj09PW8/bjpyfWZ1bmN0aW9uIHhzKHQsZSl7cmV0dXJuIG51bGwhPXQmJm1pKHQsZSxDcil9dmFyIENzPXpvKChmdW5jdGlvbih0LGUsbil7bnVsbCE9ZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZS50b1N0cmluZyYmKGU9V3QuY2FsbChlKSksdFtlXT1ufSksZXUob3UpKSxCcz16bygoZnVuY3Rpb24odCxlLG4pe251bGwhPWUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUudG9TdHJpbmcmJihlPVd0LmNhbGwoZSkpLE50LmNhbGwodCxlKT90W2VdLnB1c2gobik6dFtlXT1bbl19KSxjaSksa3M9WHIoa3IpO2Z1bmN0aW9uIExzKHQpe3JldHVybiBHYSh0KT9Ybih0KTpNcih0KX1mdW5jdGlvbiBPcyh0KXtyZXR1cm4gR2EodCk/WG4odCwhMCk6UHIodCl9dmFyIFVzPVVvKChmdW5jdGlvbih0LGUsbil7enIodCxlLG4pfSkpLGpzPVVvKChmdW5jdGlvbih0LGUsbixyKXt6cih0LGUsbixyKX0pKSxOcz1vaSgoZnVuY3Rpb24odCxlKXt2YXIgbj17fTtpZihudWxsPT10KXJldHVybiBuO3ZhciByPSExO2U9amUoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIGU9X28oZSx0KSxyfHwocj1lLmxlbmd0aD4xKSxlfSkpLExvKHQsYWkodCksbiksciYmKG49bHIobiw3LG5pKSk7Zm9yKHZhciBvPWUubGVuZ3RoO28tLTspaG8obixlW29dKTtyZXR1cm4gbn0pKTt2YXIgTXM9b2koKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXQ/e306ZnVuY3Rpb24odCxlKXtyZXR1cm4gVnIodCxlLChmdW5jdGlvbihlLG4pe3JldHVybiB4cyh0LG4pfSkpfSh0LGUpfSkpO2Z1bmN0aW9uIFBzKHQsZSl7aWYobnVsbD09dClyZXR1cm57fTt2YXIgbj1qZShhaSh0KSwoZnVuY3Rpb24odCl7cmV0dXJuW3RdfSkpO3JldHVybiBlPWNpKGUpLFZyKHQsbiwoZnVuY3Rpb24odCxuKXtyZXR1cm4gZSh0LG5bMF0pfSkpfXZhciBXcz1abyhMcyksJHM9Wm8oT3MpO2Z1bmN0aW9uIERzKHQpe3JldHVybiBudWxsPT10P1tdOnRuKHQsTHModCkpfXZhciBGcz1QbygoZnVuY3Rpb24odCxlLG4pe3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSx0KyhuP3pzKGUpOmUpfSkpO2Z1bmN0aW9uIHpzKHQpe3JldHVybiBYcyhicyh0KS50b0xvd2VyQ2FzZSgpKX1mdW5jdGlvbiBxcyh0KXtyZXR1cm4odD1icyh0KSkmJnQucmVwbGFjZShfdCxvbikucmVwbGFjZShlZSxcIlwiKX12YXIgSHM9UG8oKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCsobj9cIi1cIjpcIlwiKStlLnRvTG93ZXJDYXNlKCl9KSksVnM9UG8oKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCsobj9cIiBcIjpcIlwiKStlLnRvTG93ZXJDYXNlKCl9KSksR3M9TW8oXCJ0b0xvd2VyQ2FzZVwiKTt2YXIgSnM9UG8oKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCsobj9cIl9cIjpcIlwiKStlLnRvTG93ZXJDYXNlKCl9KSk7dmFyIFlzPVBvKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQrKG4/XCIgXCI6XCJcIikrWHMoZSl9KSk7dmFyIEtzPVBvKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQrKG4/XCIgXCI6XCJcIikrZS50b1VwcGVyQ2FzZSgpfSkpLFhzPU1vKFwidG9VcHBlckNhc2VcIik7ZnVuY3Rpb24gWnModCxlLG4pe3JldHVybiB0PWJzKHQpLChlPW4/bzplKT09PW8/ZnVuY3Rpb24odCl7cmV0dXJuIGllLnRlc3QodCl9KHQpP2Z1bmN0aW9uKHQpe3JldHVybiB0Lm1hdGNoKHJlKXx8W119KHQpOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hdGNoKGZ0KXx8W119KHQpOnQubWF0Y2goZSl8fFtdfXZhciBRcz1YcigoZnVuY3Rpb24odCxlKXt0cnl7cmV0dXJuIFJlKHQsbyxlKX1jYXRjaCh0KXtyZXR1cm4gWGEodCk/dDpuZXcgQXQodCl9fSkpLHR1PW9pKChmdW5jdGlvbih0LGUpe3JldHVybiBDZShlLChmdW5jdGlvbihlKXtlPVBpKGUpLGFyKHQsZSxCYSh0W2VdLHQpKX0pKSx0fSkpO2Z1bmN0aW9uIGV1KHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX12YXIgbnU9RG8oKSxydT1EbyghMCk7ZnVuY3Rpb24gb3UodCl7cmV0dXJuIHR9ZnVuY3Rpb24gaXUodCl7cmV0dXJuIE5yKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpscih0LDEpKX12YXIgYXU9WHIoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBrcihuLHQsZSl9fSkpLHN1PVhyKChmdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4ga3IodCxuLGUpfX0pKTtmdW5jdGlvbiB1dSh0LGUsbil7dmFyIHI9THMoZSksbz1TcihlLHIpO251bGwhPW58fGVzKGUpJiYoby5sZW5ndGh8fCFyLmxlbmd0aCl8fChuPWUsZT10LHQ9dGhpcyxvPVNyKGUsTHMoZSkpKTt2YXIgaT0hKGVzKG4pJiZcImNoYWluXCJpbiBuJiYhbi5jaGFpbiksYT1aYSh0KTtyZXR1cm4gQ2UobywoZnVuY3Rpb24obil7dmFyIHI9ZVtuXTt0W25dPXIsYSYmKHQucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fX2NoYWluX187aWYoaXx8ZSl7dmFyIG49dCh0aGlzLl9fd3JhcHBlZF9fKTtyZXR1cm4obi5fX2FjdGlvbnNfXz1rbyh0aGlzLl9fYWN0aW9uc19fKSkucHVzaCh7ZnVuYzpyLGFyZ3M6YXJndW1lbnRzLHRoaXNBcmc6dH0pLG4uX19jaGFpbl9fPWUsbn1yZXR1cm4gci5hcHBseSh0LE5lKFt0aGlzLnZhbHVlKCldLGFyZ3VtZW50cykpfSl9KSksdH1mdW5jdGlvbiBsdSgpe312YXIgY3U9SG8oamUpLGZ1PUhvKGtlKSxkdT1IbyhXZSk7ZnVuY3Rpb24gaHUodCl7cmV0dXJuIEVpKHQpP0dlKFBpKHQpKTpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIEFyKGUsdCl9fSh0KX12YXIgcHU9R28oKSxndT1HbyghMCk7ZnVuY3Rpb24geXUoKXtyZXR1cm5bXX1mdW5jdGlvbiBtdSgpe3JldHVybiExfXZhciB2dT1xbygoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCtlfSksMCksYnU9S28oXCJjZWlsXCIpLHd1PXFvKChmdW5jdGlvbih0LGUpe3JldHVybiB0L2V9KSwxKSxfdT1LbyhcImZsb29yXCIpO3ZhciBFdSxTdT1xbygoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCplfSksMSksQXU9S28oXCJyb3VuZFwiKSxJdT1xbygoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC1lfSksMCk7cmV0dXJuIERuLmFmdGVyPWZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgQnQoaSk7cmV0dXJuIHQ9Z3ModCksZnVuY3Rpb24oKXtpZigtLXQ8MSlyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxEbi5hcnk9eGEsRG4uYXNzaWduPXdzLERuLmFzc2lnbkluPV9zLERuLmFzc2lnbkluV2l0aD1FcyxEbi5hc3NpZ25XaXRoPVNzLERuLmF0PUFzLERuLmJlZm9yZT1DYSxEbi5iaW5kPUJhLERuLmJpbmRBbGw9dHUsRG4uYmluZEtleT1rYSxEbi5jYXN0QXJyYXk9ZnVuY3Rpb24oKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm5bXTt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIEhhKHQpP3Q6W3RdfSxEbi5jaGFpbj1oYSxEbi5jaHVuaz1mdW5jdGlvbih0LGUsbil7ZT0obj9faSh0LGUsbik6ZT09PW8pPzE6Ym4oZ3MoZSksMCk7dmFyIGk9bnVsbD09dD8wOnQubGVuZ3RoO2lmKCFpfHxlPDEpcmV0dXJuW107Zm9yKHZhciBhPTAscz0wLHU9cihwZShpL2UpKTthPGk7KXVbcysrXT1vbyh0LGEsYSs9ZSk7cmV0dXJuIHV9LERuLmNvbXBhY3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoLHI9MCxvPVtdOysrZTxuOyl7dmFyIGk9dFtlXTtpJiYob1tyKytdPWkpfXJldHVybiBvfSxEbi5jb25jYXQ9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoO2lmKCF0KXJldHVybltdO2Zvcih2YXIgZT1yKHQtMSksbj1hcmd1bWVudHNbMF0sbz10O28tLTspZVtvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gTmUoSGEobik/a28obik6W25dLHZyKGUsMSkpfSxEbi5jb25kPWZ1bmN0aW9uKHQpe3ZhciBlPW51bGw9PXQ/MDp0Lmxlbmd0aCxuPWNpKCk7cmV0dXJuIHQ9ZT9qZSh0LChmdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0WzFdKXRocm93IG5ldyBCdChpKTtyZXR1cm5bbih0WzBdKSx0WzFdXX0pKTpbXSxYcigoZnVuY3Rpb24obil7Zm9yKHZhciByPS0xOysrcjxlOyl7dmFyIG89dFtyXTtpZihSZShvWzBdLHRoaXMsbikpcmV0dXJuIFJlKG9bMV0sdGhpcyxuKX19KSl9LERuLmNvbmZvcm1zPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT1Mcyh0KTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGNyKG4sdCxlKX19KGxyKHQsMSkpfSxEbi5jb25zdGFudD1ldSxEbi5jb3VudEJ5PXlhLERuLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPUZuKHQpO3JldHVybiBudWxsPT1lP246aXIobixlKX0sRG4uY3Vycnk9ZnVuY3Rpb24gdChlLG4scil7dmFyIGk9UW8oZSw4LG8sbyxvLG8sbyxuPXI/bzpuKTtyZXR1cm4gaS5wbGFjZWhvbGRlcj10LnBsYWNlaG9sZGVyLGl9LERuLmN1cnJ5UmlnaHQ9ZnVuY3Rpb24gdChlLG4scil7dmFyIGk9UW8oZSx1LG8sbyxvLG8sbyxuPXI/bzpuKTtyZXR1cm4gaS5wbGFjZWhvbGRlcj10LnBsYWNlaG9sZGVyLGl9LERuLmRlYm91bmNlPUxhLERuLmRlZmF1bHRzPUlzLERuLmRlZmF1bHRzRGVlcD1UcyxEbi5kZWZlcj1PYSxEbi5kZWxheT1VYSxEbi5kaWZmZXJlbmNlPURpLERuLmRpZmZlcmVuY2VCeT1GaSxEbi5kaWZmZXJlbmNlV2l0aD16aSxEbi5kcm9wPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1udWxsPT10PzA6dC5sZW5ndGg7cmV0dXJuIHI/b28odCwoZT1ufHxlPT09bz8xOmdzKGUpKTwwPzA6ZSxyKTpbXX0sRG4uZHJvcFJpZ2h0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1udWxsPT10PzA6dC5sZW5ndGg7cmV0dXJuIHI/b28odCwwLChlPXItKGU9bnx8ZT09PW8/MTpncyhlKSkpPDA/MDplKTpbXX0sRG4uZHJvcFJpZ2h0V2hpbGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmdC5sZW5ndGg/Z28odCxjaShlLDMpLCEwLCEwKTpbXX0sRG4uZHJvcFdoaWxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP2dvKHQsY2koZSwzKSwhMCk6W119LERuLmZpbGw9ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9bnVsbD09dD8wOnQubGVuZ3RoO3JldHVybiBpPyhuJiZcIm51bWJlclwiIT10eXBlb2YgbiYmX2kodCxlLG4pJiYobj0wLHI9aSksZnVuY3Rpb24odCxlLG4scil7dmFyIGk9dC5sZW5ndGg7Zm9yKChuPWdzKG4pKTwwJiYobj0tbj5pPzA6aStuKSwocj1yPT09b3x8cj5pP2k6Z3MocikpPDAmJihyKz1pKSxyPW4+cj8wOnlzKHIpO248cjspdFtuKytdPWU7cmV0dXJuIHR9KHQsZSxuLHIpKTpbXX0sRG4uZmlsdGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKEhhKHQpP0xlOm1yKSh0LGNpKGUsMykpfSxEbi5mbGF0TWFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZyKEFhKHQsZSksMSl9LERuLmZsYXRNYXBEZWVwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZyKEFhKHQsZSksaCl9LERuLmZsYXRNYXBEZXB0aD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG49bj09PW8/MTpncyhuKSx2cihBYSh0LGUpLG4pfSxEbi5mbGF0dGVuPVZpLERuLmZsYXR0ZW5EZWVwPWZ1bmN0aW9uKHQpe3JldHVybihudWxsPT10PzA6dC5sZW5ndGgpP3ZyKHQsaCk6W119LERuLmZsYXR0ZW5EZXB0aD1mdW5jdGlvbih0LGUpe3JldHVybihudWxsPT10PzA6dC5sZW5ndGgpP3ZyKHQsZT1lPT09bz8xOmdzKGUpKTpbXX0sRG4uZmxpcD1mdW5jdGlvbih0KXtyZXR1cm4gUW8odCw1MTIpfSxEbi5mbG93PW51LERuLmZsb3dSaWdodD1ydSxEbi5mcm9tUGFpcnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoLHI9e307KytlPG47KXt2YXIgbz10W2VdO3Jbb1swXV09b1sxXX1yZXR1cm4gcn0sRG4uZnVuY3Rpb25zPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P1tdOlNyKHQsTHModCkpfSxEbi5mdW5jdGlvbnNJbj1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD9bXTpTcih0LE9zKHQpKX0sRG4uZ3JvdXBCeT1fYSxEbi5pbml0aWFsPWZ1bmN0aW9uKHQpe3JldHVybihudWxsPT10PzA6dC5sZW5ndGgpP29vKHQsMCwtMSk6W119LERuLmludGVyc2VjdGlvbj1KaSxEbi5pbnRlcnNlY3Rpb25CeT1ZaSxEbi5pbnRlcnNlY3Rpb25XaXRoPUtpLERuLmludmVydD1DcyxEbi5pbnZlcnRCeT1CcyxEbi5pbnZva2VNYXA9RWEsRG4uaXRlcmF0ZWU9aXUsRG4ua2V5Qnk9U2EsRG4ua2V5cz1McyxEbi5rZXlzSW49T3MsRG4ubWFwPUFhLERuLm1hcEtleXM9ZnVuY3Rpb24odCxlKXt2YXIgbj17fTtyZXR1cm4gZT1jaShlLDMpLF9yKHQsKGZ1bmN0aW9uKHQscixvKXthcihuLGUodCxyLG8pLHQpfSkpLG59LERuLm1hcFZhbHVlcz1mdW5jdGlvbih0LGUpe3ZhciBuPXt9O3JldHVybiBlPWNpKGUsMyksX3IodCwoZnVuY3Rpb24odCxyLG8pe2FyKG4scixlKHQscixvKSl9KSksbn0sRG4ubWF0Y2hlcz1mdW5jdGlvbih0KXtyZXR1cm4gRHIobHIodCwxKSl9LERuLm1hdGNoZXNQcm9wZXJ0eT1mdW5jdGlvbih0LGUpe3JldHVybiBGcih0LGxyKGUsMSkpfSxEbi5tZW1vaXplPWphLERuLm1lcmdlPVVzLERuLm1lcmdlV2l0aD1qcyxEbi5tZXRob2Q9YXUsRG4ubWV0aG9kT2Y9c3UsRG4ubWl4aW49dXUsRG4ubmVnYXRlPU5hLERuLm50aEFyZz1mdW5jdGlvbih0KXtyZXR1cm4gdD1ncyh0KSxYcigoZnVuY3Rpb24oZSl7cmV0dXJuIHFyKGUsdCl9KSl9LERuLm9taXQ9TnMsRG4ub21pdEJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFBzKHQsTmEoY2koZSkpKX0sRG4ub25jZT1mdW5jdGlvbih0KXtyZXR1cm4gQ2EoMix0KX0sRG4ub3JkZXJCeT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbnVsbD09dD9bXTooSGEoZSl8fChlPW51bGw9PWU/W106W2VdKSxIYShuPXI/bzpuKXx8KG49bnVsbD09bj9bXTpbbl0pLEhyKHQsZSxuKSl9LERuLm92ZXI9Y3UsRG4ub3ZlckFyZ3M9TWEsRG4ub3ZlckV2ZXJ5PWZ1LERuLm92ZXJTb21lPWR1LERuLnBhcnRpYWw9UGEsRG4ucGFydGlhbFJpZ2h0PVdhLERuLnBhcnRpdGlvbj1JYSxEbi5waWNrPU1zLERuLnBpY2tCeT1QcyxEbi5wcm9wZXJ0eT1odSxEbi5wcm9wZXJ0eU9mPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dD9vOkFyKHQsZSl9fSxEbi5wdWxsPVppLERuLnB1bGxBbGw9UWksRG4ucHVsbEFsbEJ5PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCYmdC5sZW5ndGgmJmUmJmUubGVuZ3RoP0dyKHQsZSxjaShuLDIpKTp0fSxEbi5wdWxsQWxsV2l0aD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQmJnQubGVuZ3RoJiZlJiZlLmxlbmd0aD9Hcih0LGUsbyxuKTp0fSxEbi5wdWxsQXQ9dGEsRG4ucmFuZ2U9cHUsRG4ucmFuZ2VSaWdodD1ndSxEbi5yZWFyZz0kYSxEbi5yZWplY3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4oSGEodCk/TGU6bXIpKHQsTmEoY2koZSwzKSkpfSxEbi5yZW1vdmU9ZnVuY3Rpb24odCxlKXt2YXIgbj1bXTtpZighdHx8IXQubGVuZ3RoKXJldHVybiBuO3ZhciByPS0xLG89W10saT10Lmxlbmd0aDtmb3IoZT1jaShlLDMpOysrcjxpOyl7dmFyIGE9dFtyXTtlKGEscix0KSYmKG4ucHVzaChhKSxvLnB1c2gocikpfXJldHVybiBKcih0LG8pLG59LERuLnJlc3Q9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBCdChpKTtyZXR1cm4gWHIodCxlPWU9PT1vP2U6Z3MoZSkpfSxEbi5yZXZlcnNlPWVhLERuLnNhbXBsZVNpemU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBlPShuP19pKHQsZSxuKTplPT09byk/MTpncyhlKSwoSGEodCk/UW46UXIpKHQsZSl9LERuLnNldD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG51bGw9PXQ/dDp0byh0LGUsbil9LERuLnNldFdpdGg9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHI9XCJmdW5jdGlvblwiPT10eXBlb2Ygcj9yOm8sbnVsbD09dD90OnRvKHQsZSxuLHIpfSxEbi5zaHVmZmxlPWZ1bmN0aW9uKHQpe3JldHVybihIYSh0KT90cjpybykodCl9LERuLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1udWxsPT10PzA6dC5sZW5ndGg7cmV0dXJuIHI/KG4mJlwibnVtYmVyXCIhPXR5cGVvZiBuJiZfaSh0LGUsbik/KGU9MCxuPXIpOihlPW51bGw9PWU/MDpncyhlKSxuPW49PT1vP3I6Z3MobikpLG9vKHQsZSxuKSk6W119LERuLnNvcnRCeT1UYSxEbi5zb3J0ZWRVbmlxPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD91byh0KTpbXX0sRG4uc29ydGVkVW5pcUJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP3VvKHQsY2koZSwyKSk6W119LERuLnNwbGl0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbiYmXCJudW1iZXJcIiE9dHlwZW9mIG4mJl9pKHQsZSxuKSYmKGU9bj1vKSwobj1uPT09bz95Om4+Pj4wKT8odD1icyh0KSkmJihcInN0cmluZ1wiPT10eXBlb2YgZXx8bnVsbCE9ZSYmIWFzKGUpKSYmIShlPWNvKGUpKSYmdW4odCk/U28oZ24odCksMCxuKTp0LnNwbGl0KGUsbik6W119LERuLnNwcmVhZD1mdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IEJ0KGkpO3JldHVybiBlPW51bGw9PWU/MDpibihncyhlKSwwKSxYcigoZnVuY3Rpb24obil7dmFyIHI9bltlXSxvPVNvKG4sMCxlKTtyZXR1cm4gciYmTmUobyxyKSxSZSh0LHRoaXMsbyl9KSl9LERuLnRhaWw9ZnVuY3Rpb24odCl7dmFyIGU9bnVsbD09dD8wOnQubGVuZ3RoO3JldHVybiBlP29vKHQsMSxlKTpbXX0sRG4udGFrZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQmJnQubGVuZ3RoP29vKHQsMCwoZT1ufHxlPT09bz8xOmdzKGUpKTwwPzA6ZSk6W119LERuLnRha2VSaWdodD1mdW5jdGlvbih0LGUsbil7dmFyIHI9bnVsbD09dD8wOnQubGVuZ3RoO3JldHVybiByP29vKHQsKGU9ci0oZT1ufHxlPT09bz8xOmdzKGUpKSk8MD8wOmUscik6W119LERuLnRha2VSaWdodFdoaWxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP2dvKHQsY2koZSwzKSwhMSwhMCk6W119LERuLnRha2VXaGlsZT1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD9nbyh0LGNpKGUsMykpOltdfSxEbi50YXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZSh0KSx0fSxEbi50aHJvdHRsZT1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITAsbz0hMDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBCdChpKTtyZXR1cm4gZXMobikmJihyPVwibGVhZGluZ1wiaW4gbj8hIW4ubGVhZGluZzpyLG89XCJ0cmFpbGluZ1wiaW4gbj8hIW4udHJhaWxpbmc6byksTGEodCxlLHtsZWFkaW5nOnIsbWF4V2FpdDplLHRyYWlsaW5nOm99KX0sRG4udGhydT1wYSxEbi50b0FycmF5PWhzLERuLnRvUGFpcnM9V3MsRG4udG9QYWlyc0luPSRzLERuLnRvUGF0aD1mdW5jdGlvbih0KXtyZXR1cm4gSGEodCk/amUodCxQaSk6bHModCk/W3RdOmtvKE1pKGJzKHQpKSl9LERuLnRvUGxhaW5PYmplY3Q9dnMsRG4udHJhbnNmb3JtPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1IYSh0KSxvPXJ8fFlhKHQpfHxjcyh0KTtpZihlPWNpKGUsNCksbnVsbD09bil7dmFyIGk9dCYmdC5jb25zdHJ1Y3RvcjtuPW8/cj9uZXcgaTpbXTplcyh0KSYmWmEoaSk/Rm4oR3QodCkpOnt9fXJldHVybihvP0NlOl9yKSh0LChmdW5jdGlvbih0LHIsbyl7cmV0dXJuIGUobix0LHIsbyl9KSksbn0sRG4udW5hcnk9ZnVuY3Rpb24odCl7cmV0dXJuIHhhKHQsMSl9LERuLnVuaW9uPW5hLERuLnVuaW9uQnk9cmEsRG4udW5pb25XaXRoPW9hLERuLnVuaXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQubGVuZ3RoP2ZvKHQpOltdfSxEbi51bmlxQnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmdC5sZW5ndGg/Zm8odCxjaShlLDIpKTpbXX0sRG4udW5pcVdpdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2U6byx0JiZ0Lmxlbmd0aD9mbyh0LG8sZSk6W119LERuLnVuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXR8fGhvKHQsZSl9LERuLnVuemlwPWlhLERuLnVuemlwV2l0aD1hYSxEbi51cGRhdGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsPT10P3Q6cG8odCxlLHdvKG4pKX0sRG4udXBkYXRlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByP3I6byxudWxsPT10P3Q6cG8odCxlLHdvKG4pLHIpfSxEbi52YWx1ZXM9RHMsRG4udmFsdWVzSW49ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/W106dG4odCxPcyh0KSl9LERuLndpdGhvdXQ9c2EsRG4ud29yZHM9WnMsRG4ud3JhcD1mdW5jdGlvbih0LGUpe3JldHVybiBQYSh3byhlKSx0KX0sRG4ueG9yPXVhLERuLnhvckJ5PWxhLERuLnhvcldpdGg9Y2EsRG4uemlwPWZhLERuLnppcE9iamVjdD1mdW5jdGlvbih0LGUpe3JldHVybiB2byh0fHxbXSxlfHxbXSxucil9LERuLnppcE9iamVjdERlZXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm8odHx8W10sZXx8W10sdG8pfSxEbi56aXBXaXRoPWRhLERuLmVudHJpZXM9V3MsRG4uZW50cmllc0luPSRzLERuLmV4dGVuZD1fcyxEbi5leHRlbmRXaXRoPUVzLHV1KERuLERuKSxEbi5hZGQ9dnUsRG4uYXR0ZW1wdD1RcyxEbi5jYW1lbENhc2U9RnMsRG4uY2FwaXRhbGl6ZT16cyxEbi5jZWlsPWJ1LERuLmNsYW1wPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbj09PW8mJihuPWUsZT1vKSxuIT09byYmKG49KG49bXMobikpPT1uP246MCksZSE9PW8mJihlPShlPW1zKGUpKT09ZT9lOjApLHVyKG1zKHQpLGUsbil9LERuLmNsb25lPWZ1bmN0aW9uKHQpe3JldHVybiBscih0LDQpfSxEbi5jbG9uZURlZXA9ZnVuY3Rpb24odCl7cmV0dXJuIGxyKHQsNSl9LERuLmNsb25lRGVlcFdpdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbHIodCw1LGU9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm8pfSxEbi5jbG9uZVdpdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbHIodCw0LGU9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm8pfSxEbi5jb25mb3Jtc1RvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PWV8fGNyKHQsZSxMcyhlKSl9LERuLmRlYnVycj1xcyxEbi5kZWZhdWx0VG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09dHx8dCE9dD9lOnR9LERuLmRpdmlkZT13dSxEbi5lbmRzV2l0aD1mdW5jdGlvbih0LGUsbil7dD1icyh0KSxlPWNvKGUpO3ZhciByPXQubGVuZ3RoLGk9bj1uPT09bz9yOnVyKGdzKG4pLDAscik7cmV0dXJuKG4tPWUubGVuZ3RoKT49MCYmdC5zbGljZShuLGkpPT1lfSxEbi5lcT1EYSxEbi5lc2NhcGU9ZnVuY3Rpb24odCl7cmV0dXJuKHQ9YnModCkpJiZYLnRlc3QodCk/dC5yZXBsYWNlKFksYW4pOnR9LERuLmVzY2FwZVJlZ0V4cD1mdW5jdGlvbih0KXtyZXR1cm4odD1icyh0KSkmJml0LnRlc3QodCk/dC5yZXBsYWNlKG90LFwiXFxcXCQmXCIpOnR9LERuLmV2ZXJ5PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1IYSh0KT9rZTpncjtyZXR1cm4gbiYmX2kodCxlLG4pJiYoZT1vKSxyKHQsY2koZSwzKSl9LERuLmZpbmQ9bWEsRG4uZmluZEluZGV4PXFpLERuLmZpbmRLZXk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRGUodCxjaShlLDMpLF9yKX0sRG4uZmluZExhc3Q9dmEsRG4uZmluZExhc3RJbmRleD1IaSxEbi5maW5kTGFzdEtleT1mdW5jdGlvbih0LGUpe3JldHVybiBEZSh0LGNpKGUsMyksRXIpfSxEbi5mbG9vcj1fdSxEbi5mb3JFYWNoPWJhLERuLmZvckVhY2hSaWdodD13YSxEbi5mb3JJbj1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT10P3Q6YnIodCxjaShlLDMpLE9zKX0sRG4uZm9ySW5SaWdodD1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT10P3Q6d3IodCxjaShlLDMpLE9zKX0sRG4uZm9yT3duPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJl9yKHQsY2koZSwzKSl9LERuLmZvck93blJpZ2h0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJkVyKHQsY2koZSwzKSl9LERuLmdldD1ScyxEbi5ndD1GYSxEbi5ndGU9emEsRG4uaGFzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGwhPXQmJm1pKHQsZSx4cil9LERuLmhhc0luPXhzLERuLmhlYWQ9R2ksRG4uaWRlbnRpdHk9b3UsRG4uaW5jbHVkZXM9ZnVuY3Rpb24odCxlLG4scil7dD1HYSh0KT90OkRzKHQpLG49biYmIXI/Z3Mobik6MDt2YXIgbz10Lmxlbmd0aDtyZXR1cm4gbjwwJiYobj1ibihvK24sMCkpLHVzKHQpP248PW8mJnQuaW5kZXhPZihlLG4pPi0xOiEhbyYmemUodCxlLG4pPi0xfSxEbi5pbmRleE9mPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1udWxsPT10PzA6dC5sZW5ndGg7aWYoIXIpcmV0dXJuLTE7dmFyIG89bnVsbD09bj8wOmdzKG4pO3JldHVybiBvPDAmJihvPWJuKHIrbywwKSksemUodCxlLG8pfSxEbi5pblJhbmdlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZT1wcyhlKSxuPT09bz8obj1lLGU9MCk6bj1wcyhuKSxmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ+PXduKGUsbikmJnQ8Ym4oZSxuKX0odD1tcyh0KSxlLG4pfSxEbi5pbnZva2U9a3MsRG4uaXNBcmd1bWVudHM9cWEsRG4uaXNBcnJheT1IYSxEbi5pc0FycmF5QnVmZmVyPVZhLERuLmlzQXJyYXlMaWtlPUdhLERuLmlzQXJyYXlMaWtlT2JqZWN0PUphLERuLmlzQm9vbGVhbj1mdW5jdGlvbih0KXtyZXR1cm4hMD09PXR8fCExPT09dHx8bnModCkmJlRyKHQpPT13fSxEbi5pc0J1ZmZlcj1ZYSxEbi5pc0RhdGU9S2EsRG4uaXNFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmMT09PXQubm9kZVR5cGUmJiFpcyh0KX0sRG4uaXNFbXB0eT1mdW5jdGlvbih0KXtpZihudWxsPT10KXJldHVybiEwO2lmKEdhKHQpJiYoSGEodCl8fFwic3RyaW5nXCI9PXR5cGVvZiB0fHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnNwbGljZXx8WWEodCl8fGNzKHQpfHxxYSh0KSkpcmV0dXJuIXQubGVuZ3RoO3ZhciBlPXlpKHQpO2lmKGU9PUl8fGU9PUIpcmV0dXJuIXQuc2l6ZTtpZihJaSh0KSlyZXR1cm4hTXIodCkubGVuZ3RoO2Zvcih2YXIgbiBpbiB0KWlmKE50LmNhbGwodCxuKSlyZXR1cm4hMTtyZXR1cm4hMH0sRG4uaXNFcXVhbD1mdW5jdGlvbih0LGUpe3JldHVybiBPcih0LGUpfSxEbi5pc0VxdWFsV2l0aD1mdW5jdGlvbih0LGUsbil7dmFyIHI9KG49XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uOm8pP24odCxlKTpvO3JldHVybiByPT09bz9Pcih0LGUsbyxuKTohIXJ9LERuLmlzRXJyb3I9WGEsRG4uaXNGaW5pdGU9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJndlKHQpfSxEbi5pc0Z1bmN0aW9uPVphLERuLmlzSW50ZWdlcj1RYSxEbi5pc0xlbmd0aD10cyxEbi5pc01hcD1ycyxEbi5pc01hdGNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1lfHxVcih0LGUsZGkoZSkpfSxEbi5pc01hdGNoV2l0aD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG49XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uOm8sVXIodCxlLGRpKGUpLG4pfSxEbi5pc05hTj1mdW5jdGlvbih0KXtyZXR1cm4gb3ModCkmJnQhPSt0fSxEbi5pc05hdGl2ZT1mdW5jdGlvbih0KXtpZihBaSh0KSl0aHJvdyBuZXcgQXQoXCJVbnN1cHBvcnRlZCBjb3JlLWpzIHVzZS4gVHJ5IGh0dHBzOi8vbnBtcy5pby9zZWFyY2g/cT1wb255ZmlsbC5cIik7cmV0dXJuIGpyKHQpfSxEbi5pc05pbD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dH0sRG4uaXNOdWxsPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dH0sRG4uaXNOdW1iZXI9b3MsRG4uaXNPYmplY3Q9ZXMsRG4uaXNPYmplY3RMaWtlPW5zLERuLmlzUGxhaW5PYmplY3Q9aXMsRG4uaXNSZWdFeHA9YXMsRG4uaXNTYWZlSW50ZWdlcj1mdW5jdGlvbih0KXtyZXR1cm4gUWEodCkmJnQ+PS05MDA3MTk5MjU0NzQwOTkxJiZ0PD1wfSxEbi5pc1NldD1zcyxEbi5pc1N0cmluZz11cyxEbi5pc1N5bWJvbD1scyxEbi5pc1R5cGVkQXJyYXk9Y3MsRG4uaXNVbmRlZmluZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1vfSxEbi5pc1dlYWtNYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5zKHQpJiZ5aSh0KT09T30sRG4uaXNXZWFrU2V0PWZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmXCJbb2JqZWN0IFdlYWtTZXRdXCI9PVRyKHQpfSxEbi5qb2luPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXQ/XCJcIjokZS5jYWxsKHQsZSl9LERuLmtlYmFiQ2FzZT1IcyxEbi5sYXN0PVhpLERuLmxhc3RJbmRleE9mPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1udWxsPT10PzA6dC5sZW5ndGg7aWYoIXIpcmV0dXJuLTE7dmFyIGk9cjtyZXR1cm4gbiE9PW8mJihpPShpPWdzKG4pKTwwP2JuKHIraSwwKTp3bihpLHItMSkpLGU9PWU/ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj1uKzE7ci0tOylpZih0W3JdPT09ZSlyZXR1cm4gcjtyZXR1cm4gcn0odCxlLGkpOkZlKHQsSGUsaSwhMCl9LERuLmxvd2VyQ2FzZT1WcyxEbi5sb3dlckZpcnN0PUdzLERuLmx0PWZzLERuLmx0ZT1kcyxEbi5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQubGVuZ3RoP3lyKHQsb3UsUnIpOm99LERuLm1heEJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP3lyKHQsY2koZSwyKSxScik6b30sRG4ubWVhbj1mdW5jdGlvbih0KXtyZXR1cm4gVmUodCxvdSl9LERuLm1lYW5CeT1mdW5jdGlvbih0LGUpe3JldHVybiBWZSh0LGNpKGUsMikpfSxEbi5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQubGVuZ3RoP3lyKHQsb3UsV3IpOm99LERuLm1pbkJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP3lyKHQsY2koZSwyKSxXcik6b30sRG4uc3R1YkFycmF5PXl1LERuLnN0dWJGYWxzZT1tdSxEbi5zdHViT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJue319LERuLnN0dWJTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlwifSxEbi5zdHViVHJ1ZT1mdW5jdGlvbigpe3JldHVybiEwfSxEbi5tdWx0aXBseT1TdSxEbi5udGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmdC5sZW5ndGg/cXIodCxncyhlKSk6b30sRG4ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBnZS5fPT09dGhpcyYmKGdlLl89RHQpLHRoaXN9LERuLm5vb3A9bHUsRG4ubm93PVJhLERuLnBhZD1mdW5jdGlvbih0LGUsbil7dD1icyh0KTt2YXIgcj0oZT1ncyhlKSk/cG4odCk6MDtpZighZXx8cj49ZSlyZXR1cm4gdDt2YXIgbz0oZS1yKS8yO3JldHVybiBWbyh5ZShvKSxuKSt0K1ZvKHBlKG8pLG4pfSxEbi5wYWRFbmQ9ZnVuY3Rpb24odCxlLG4pe3Q9YnModCk7dmFyIHI9KGU9Z3MoZSkpP3BuKHQpOjA7cmV0dXJuIGUmJnI8ZT90K1ZvKGUtcixuKTp0fSxEbi5wYWRTdGFydD1mdW5jdGlvbih0LGUsbil7dD1icyh0KTt2YXIgcj0oZT1ncyhlKSk/cG4odCk6MDtyZXR1cm4gZSYmcjxlP1ZvKGUtcixuKSt0OnR9LERuLnBhcnNlSW50PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbnx8bnVsbD09ZT9lPTA6ZSYmKGU9K2UpLEVuKGJzKHQpLnJlcGxhY2UoYXQsXCJcIiksZXx8MCl9LERuLnJhbmRvbT1mdW5jdGlvbih0LGUsbil7aWYobiYmXCJib29sZWFuXCIhPXR5cGVvZiBuJiZfaSh0LGUsbikmJihlPW49byksbj09PW8mJihcImJvb2xlYW5cIj09dHlwZW9mIGU/KG49ZSxlPW8pOlwiYm9vbGVhblwiPT10eXBlb2YgdCYmKG49dCx0PW8pKSx0PT09byYmZT09PW8/KHQ9MCxlPTEpOih0PXBzKHQpLGU9PT1vPyhlPXQsdD0wKTplPXBzKGUpKSx0PmUpe3ZhciByPXQ7dD1lLGU9cn1pZihufHx0JTF8fGUlMSl7dmFyIGk9U24oKTtyZXR1cm4gd24odCtpKihlLXQrZmUoXCIxZS1cIisoKGkrXCJcIikubGVuZ3RoLTEpKSksZSl9cmV0dXJuIFlyKHQsZSl9LERuLnJlZHVjZT1mdW5jdGlvbih0LGUsbil7dmFyIHI9SGEodCk/TWU6WWUsbz1hcmd1bWVudHMubGVuZ3RoPDM7cmV0dXJuIHIodCxjaShlLDQpLG4sbyxocil9LERuLnJlZHVjZVJpZ2h0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1IYSh0KT9QZTpZZSxvPWFyZ3VtZW50cy5sZW5ndGg8MztyZXR1cm4gcih0LGNpKGUsNCksbixvLHByKX0sRG4ucmVwZWF0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZT0obj9faSh0LGUsbik6ZT09PW8pPzE6Z3MoZSksS3IoYnModCksZSl9LERuLnJlcGxhY2U9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMsZT1icyh0WzBdKTtyZXR1cm4gdC5sZW5ndGg8Mz9lOmUucmVwbGFjZSh0WzFdLHRbMl0pfSxEbi5yZXN1bHQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPS0xLGk9KGU9X28oZSx0KSkubGVuZ3RoO2ZvcihpfHwoaT0xLHQ9byk7KytyPGk7KXt2YXIgYT1udWxsPT10P286dFtQaShlW3JdKV07YT09PW8mJihyPWksYT1uKSx0PVphKGEpP2EuY2FsbCh0KTphfXJldHVybiB0fSxEbi5yb3VuZD1BdSxEbi5ydW5JbkNvbnRleHQ9dCxEbi5zYW1wbGU9ZnVuY3Rpb24odCl7cmV0dXJuKEhhKHQpP1puOlpyKSh0KX0sRG4uc2l6ZT1mdW5jdGlvbih0KXtpZihudWxsPT10KXJldHVybiAwO2lmKEdhKHQpKXJldHVybiB1cyh0KT9wbih0KTp0Lmxlbmd0aDt2YXIgZT15aSh0KTtyZXR1cm4gZT09SXx8ZT09Qj90LnNpemU6TXIodCkubGVuZ3RofSxEbi5zbmFrZUNhc2U9SnMsRG4uc29tZT1mdW5jdGlvbih0LGUsbil7dmFyIHI9SGEodCk/V2U6aW87cmV0dXJuIG4mJl9pKHQsZSxuKSYmKGU9bykscih0LGNpKGUsMykpfSxEbi5zb3J0ZWRJbmRleD1mdW5jdGlvbih0LGUpe3JldHVybiBhbyh0LGUpfSxEbi5zb3J0ZWRJbmRleEJ5PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gc28odCxlLGNpKG4sMikpfSxEbi5zb3J0ZWRJbmRleE9mPWZ1bmN0aW9uKHQsZSl7dmFyIG49bnVsbD09dD8wOnQubGVuZ3RoO2lmKG4pe3ZhciByPWFvKHQsZSk7aWYocjxuJiZEYSh0W3JdLGUpKXJldHVybiByfXJldHVybi0xfSxEbi5zb3J0ZWRMYXN0SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYW8odCxlLCEwKX0sRG4uc29ydGVkTGFzdEluZGV4Qnk9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBzbyh0LGUsY2kobiwyKSwhMCl9LERuLnNvcnRlZExhc3RJbmRleE9mPWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09dD8wOnQubGVuZ3RoKXt2YXIgbj1hbyh0LGUsITApLTE7aWYoRGEodFtuXSxlKSlyZXR1cm4gbn1yZXR1cm4tMX0sRG4uc3RhcnRDYXNlPVlzLERuLnN0YXJ0c1dpdGg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PWJzKHQpLG49bnVsbD09bj8wOnVyKGdzKG4pLDAsdC5sZW5ndGgpLGU9Y28oZSksdC5zbGljZShuLG4rZS5sZW5ndGgpPT1lfSxEbi5zdWJ0cmFjdD1JdSxEbi5zdW09ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQubGVuZ3RoP0tlKHQsb3UpOjB9LERuLnN1bUJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP0tlKHQsY2koZSwyKSk6MH0sRG4udGVtcGxhdGU9ZnVuY3Rpb24odCxlLG4pe3ZhciByPURuLnRlbXBsYXRlU2V0dGluZ3M7biYmX2kodCxlLG4pJiYoZT1vKSx0PWJzKHQpLGU9RXMoe30sZSxyLHRpKTt2YXIgaSxhLHM9RXMoe30sZS5pbXBvcnRzLHIuaW1wb3J0cyx0aSksdT1McyhzKSxsPXRuKHMsdSksYz0wLGY9ZS5pbnRlcnBvbGF0ZXx8RXQsZD1cIl9fcCArPSAnXCIsaD14dCgoZS5lc2NhcGV8fEV0KS5zb3VyY2UrXCJ8XCIrZi5zb3VyY2UrXCJ8XCIrKGY9PT10dD9wdDpFdCkuc291cmNlK1wifFwiKyhlLmV2YWx1YXRlfHxFdCkuc291cmNlK1wifCRcIixcImdcIikscD1cIi8vIyBzb3VyY2VVUkw9XCIrKE50LmNhbGwoZSxcInNvdXJjZVVSTFwiKT8oZS5zb3VyY2VVUkwrXCJcIikucmVwbGFjZSgvXFxzL2csXCIgXCIpOlwibG9kYXNoLnRlbXBsYXRlU291cmNlc1tcIisgKytzZStcIl1cIikrXCJcXG5cIjt0LnJlcGxhY2UoaCwoZnVuY3Rpb24oZSxuLHIsbyxzLHUpe3JldHVybiByfHwocj1vKSxkKz10LnNsaWNlKGMsdSkucmVwbGFjZShTdCxzbiksbiYmKGk9ITAsZCs9XCInICtcXG5fX2UoXCIrbitcIikgK1xcbidcIikscyYmKGE9ITAsZCs9XCInO1xcblwiK3MrXCI7XFxuX19wICs9ICdcIiksciYmKGQrPVwiJyArXFxuKChfX3QgPSAoXCIrcitcIikpID09IG51bGwgPyAnJyA6IF9fdCkgK1xcbidcIiksYz11K2UubGVuZ3RoLGV9KSksZCs9XCInO1xcblwiO3ZhciBnPU50LmNhbGwoZSxcInZhcmlhYmxlXCIpJiZlLnZhcmlhYmxlO2lmKGcpe2lmKGR0LnRlc3QoZykpdGhyb3cgbmV3IEF0KFwiSW52YWxpZCBgdmFyaWFibGVgIG9wdGlvbiBwYXNzZWQgaW50byBgXy50ZW1wbGF0ZWBcIil9ZWxzZSBkPVwid2l0aCAob2JqKSB7XFxuXCIrZCtcIlxcbn1cXG5cIjtkPShhP2QucmVwbGFjZShILFwiXCIpOmQpLnJlcGxhY2UoVixcIiQxXCIpLnJlcGxhY2UoRyxcIiQxO1wiKSxkPVwiZnVuY3Rpb24oXCIrKGd8fFwib2JqXCIpK1wiKSB7XFxuXCIrKGc/XCJcIjpcIm9iaiB8fCAob2JqID0ge30pO1xcblwiKStcInZhciBfX3QsIF9fcCA9ICcnXCIrKGk/XCIsIF9fZSA9IF8uZXNjYXBlXCI6XCJcIikrKGE/XCIsIF9faiA9IEFycmF5LnByb3RvdHlwZS5qb2luO1xcbmZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxcblwiOlwiO1xcblwiKStkK1wicmV0dXJuIF9fcFxcbn1cIjt2YXIgeT1RcygoZnVuY3Rpb24oKXtyZXR1cm4gSXQodSxwK1wicmV0dXJuIFwiK2QpLmFwcGx5KG8sbCl9KSk7aWYoeS5zb3VyY2U9ZCxYYSh5KSl0aHJvdyB5O3JldHVybiB5fSxEbi50aW1lcz1mdW5jdGlvbih0LGUpe2lmKCh0PWdzKHQpKTwxfHx0PnApcmV0dXJuW107dmFyIG49eSxyPXduKHQseSk7ZT1jaShlKSx0LT15O2Zvcih2YXIgbz1YZShyLGUpOysrbjx0OyllKG4pO3JldHVybiBvfSxEbi50b0Zpbml0ZT1wcyxEbi50b0ludGVnZXI9Z3MsRG4udG9MZW5ndGg9eXMsRG4udG9Mb3dlcj1mdW5jdGlvbih0KXtyZXR1cm4gYnModCkudG9Mb3dlckNhc2UoKX0sRG4udG9OdW1iZXI9bXMsRG4udG9TYWZlSW50ZWdlcj1mdW5jdGlvbih0KXtyZXR1cm4gdD91cihncyh0KSwtOTAwNzE5OTI1NDc0MDk5MSxwKTowPT09dD90OjB9LERuLnRvU3RyaW5nPWJzLERuLnRvVXBwZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGJzKHQpLnRvVXBwZXJDYXNlKCl9LERuLnRyaW09ZnVuY3Rpb24odCxlLG4pe2lmKCh0PWJzKHQpKSYmKG58fGU9PT1vKSlyZXR1cm4gWmUodCk7aWYoIXR8fCEoZT1jbyhlKSkpcmV0dXJuIHQ7dmFyIHI9Z24odCksaT1nbihlKTtyZXR1cm4gU28ocixubihyLGkpLHJuKHIsaSkrMSkuam9pbihcIlwiKX0sRG4udHJpbUVuZD1mdW5jdGlvbih0LGUsbil7aWYoKHQ9YnModCkpJiYobnx8ZT09PW8pKXJldHVybiB0LnNsaWNlKDAseW4odCkrMSk7aWYoIXR8fCEoZT1jbyhlKSkpcmV0dXJuIHQ7dmFyIHI9Z24odCk7cmV0dXJuIFNvKHIsMCxybihyLGduKGUpKSsxKS5qb2luKFwiXCIpfSxEbi50cmltU3RhcnQ9ZnVuY3Rpb24odCxlLG4pe2lmKCh0PWJzKHQpKSYmKG58fGU9PT1vKSlyZXR1cm4gdC5yZXBsYWNlKGF0LFwiXCIpO2lmKCF0fHwhKGU9Y28oZSkpKXJldHVybiB0O3ZhciByPWduKHQpO3JldHVybiBTbyhyLG5uKHIsZ24oZSkpKS5qb2luKFwiXCIpfSxEbi50cnVuY2F0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPTMwLHI9XCIuLi5cIjtpZihlcyhlKSl7dmFyIGk9XCJzZXBhcmF0b3JcImluIGU/ZS5zZXBhcmF0b3I6aTtuPVwibGVuZ3RoXCJpbiBlP2dzKGUubGVuZ3RoKTpuLHI9XCJvbWlzc2lvblwiaW4gZT9jbyhlLm9taXNzaW9uKTpyfXZhciBhPSh0PWJzKHQpKS5sZW5ndGg7aWYodW4odCkpe3ZhciBzPWduKHQpO2E9cy5sZW5ndGh9aWYobj49YSlyZXR1cm4gdDt2YXIgdT1uLXBuKHIpO2lmKHU8MSlyZXR1cm4gcjt2YXIgbD1zP1NvKHMsMCx1KS5qb2luKFwiXCIpOnQuc2xpY2UoMCx1KTtpZihpPT09bylyZXR1cm4gbCtyO2lmKHMmJih1Kz1sLmxlbmd0aC11KSxhcyhpKSl7aWYodC5zbGljZSh1KS5zZWFyY2goaSkpe3ZhciBjLGY9bDtmb3IoaS5nbG9iYWx8fChpPXh0KGkuc291cmNlLGJzKGd0LmV4ZWMoaSkpK1wiZ1wiKSksaS5sYXN0SW5kZXg9MDtjPWkuZXhlYyhmKTspdmFyIGQ9Yy5pbmRleDtsPWwuc2xpY2UoMCxkPT09bz91OmQpfX1lbHNlIGlmKHQuaW5kZXhPZihjbyhpKSx1KSE9dSl7dmFyIGg9bC5sYXN0SW5kZXhPZihpKTtoPi0xJiYobD1sLnNsaWNlKDAsaCkpfXJldHVybiBsK3J9LERuLnVuZXNjYXBlPWZ1bmN0aW9uKHQpe3JldHVybih0PWJzKHQpKSYmSy50ZXN0KHQpP3QucmVwbGFjZShKLG1uKTp0fSxEbi51bmlxdWVJZD1mdW5jdGlvbih0KXt2YXIgZT0rK010O3JldHVybiBicyh0KStlfSxEbi51cHBlckNhc2U9S3MsRG4udXBwZXJGaXJzdD1YcyxEbi5lYWNoPWJhLERuLmVhY2hSaWdodD13YSxEbi5maXJzdD1HaSx1dShEbiwoRXU9e30sX3IoRG4sKGZ1bmN0aW9uKHQsZSl7TnQuY2FsbChEbi5wcm90b3R5cGUsZSl8fChFdVtlXT10KX0pKSxFdSkse2NoYWluOiExfSksRG4uVkVSU0lPTj1cIjQuMTcuMjFcIixDZShbXCJiaW5kXCIsXCJiaW5kS2V5XCIsXCJjdXJyeVwiLFwiY3VycnlSaWdodFwiLFwicGFydGlhbFwiLFwicGFydGlhbFJpZ2h0XCJdLChmdW5jdGlvbih0KXtEblt0XS5wbGFjZWhvbGRlcj1Ebn0pKSxDZShbXCJkcm9wXCIsXCJ0YWtlXCJdLChmdW5jdGlvbih0LGUpe0huLnByb3RvdHlwZVt0XT1mdW5jdGlvbihuKXtuPW49PT1vPzE6Ym4oZ3MobiksMCk7dmFyIHI9dGhpcy5fX2ZpbHRlcmVkX18mJiFlP25ldyBIbih0aGlzKTp0aGlzLmNsb25lKCk7cmV0dXJuIHIuX19maWx0ZXJlZF9fP3IuX190YWtlQ291bnRfXz13bihuLHIuX190YWtlQ291bnRfXyk6ci5fX3ZpZXdzX18ucHVzaCh7c2l6ZTp3bihuLHkpLHR5cGU6dCsoci5fX2Rpcl9fPDA/XCJSaWdodFwiOlwiXCIpfSkscn0sSG4ucHJvdG90eXBlW3QrXCJSaWdodFwiXT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZXZlcnNlKClbdF0oZSkucmV2ZXJzZSgpfX0pKSxDZShbXCJmaWx0ZXJcIixcIm1hcFwiLFwidGFrZVdoaWxlXCJdLChmdW5jdGlvbih0LGUpe3ZhciBuPWUrMSxyPTE9PW58fDM9PW47SG4ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2xvbmUoKTtyZXR1cm4gZS5fX2l0ZXJhdGVlc19fLnB1c2goe2l0ZXJhdGVlOmNpKHQsMyksdHlwZTpufSksZS5fX2ZpbHRlcmVkX189ZS5fX2ZpbHRlcmVkX198fHIsZX19KSksQ2UoW1wiaGVhZFwiLFwibGFzdFwiXSwoZnVuY3Rpb24odCxlKXt2YXIgbj1cInRha2VcIisoZT9cIlJpZ2h0XCI6XCJcIik7SG4ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbbl0oMSkudmFsdWUoKVswXX19KSksQ2UoW1wiaW5pdGlhbFwiLFwidGFpbFwiXSwoZnVuY3Rpb24odCxlKXt2YXIgbj1cImRyb3BcIisoZT9cIlwiOlwiUmlnaHRcIik7SG4ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19maWx0ZXJlZF9fP25ldyBIbih0aGlzKTp0aGlzW25dKDEpfX0pKSxIbi5wcm90b3R5cGUuY29tcGFjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcihvdSl9LEhuLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZpbHRlcih0KS5oZWFkKCl9LEhuLnByb3RvdHlwZS5maW5kTGFzdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKCkuZmluZCh0KX0sSG4ucHJvdG90eXBlLmludm9rZU1hcD1YcigoZnVuY3Rpb24odCxlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P25ldyBIbih0aGlzKTp0aGlzLm1hcCgoZnVuY3Rpb24obil7cmV0dXJuIGtyKG4sdCxlKX0pKX0pKSxIbi5wcm90b3R5cGUucmVqZWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZpbHRlcihOYShjaSh0KSkpfSxIbi5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlKXt0PWdzKHQpO3ZhciBuPXRoaXM7cmV0dXJuIG4uX19maWx0ZXJlZF9fJiYodD4wfHxlPDApP25ldyBIbihuKToodDwwP249bi50YWtlUmlnaHQoLXQpOnQmJihuPW4uZHJvcCh0KSksZSE9PW8mJihuPShlPWdzKGUpKTwwP24uZHJvcFJpZ2h0KC1lKTpuLnRha2UoZS10KSksbil9LEhuLnByb3RvdHlwZS50YWtlUmlnaHRXaGlsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKCkudGFrZVdoaWxlKHQpLnJldmVyc2UoKX0sSG4ucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWtlKHkpfSxfcihIbi5wcm90b3R5cGUsKGZ1bmN0aW9uKHQsZSl7dmFyIG49L14oPzpmaWx0ZXJ8ZmluZHxtYXB8cmVqZWN0KXxXaGlsZSQvLnRlc3QoZSkscj0vXig/OmhlYWR8bGFzdCkkLy50ZXN0KGUpLGk9RG5bcj9cInRha2VcIisoXCJsYXN0XCI9PWU/XCJSaWdodFwiOlwiXCIpOmVdLGE9cnx8L15maW5kLy50ZXN0KGUpO2kmJihEbi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fd3JhcHBlZF9fLHM9cj9bMV06YXJndW1lbnRzLHU9ZSBpbnN0YW5jZW9mIEhuLGw9c1swXSxjPXV8fEhhKGUpLGY9ZnVuY3Rpb24odCl7dmFyIGU9aS5hcHBseShEbixOZShbdF0scykpO3JldHVybiByJiZkP2VbMF06ZX07YyYmbiYmXCJmdW5jdGlvblwiPT10eXBlb2YgbCYmMSE9bC5sZW5ndGgmJih1PWM9ITEpO3ZhciBkPXRoaXMuX19jaGFpbl9fLGg9ISF0aGlzLl9fYWN0aW9uc19fLmxlbmd0aCxwPWEmJiFkLGc9dSYmIWg7aWYoIWEmJmMpe2U9Zz9lOm5ldyBIbih0aGlzKTt2YXIgeT10LmFwcGx5KGUscyk7cmV0dXJuIHkuX19hY3Rpb25zX18ucHVzaCh7ZnVuYzpwYSxhcmdzOltmXSx0aGlzQXJnOm99KSxuZXcgcW4oeSxkKX1yZXR1cm4gcCYmZz90LmFwcGx5KHRoaXMscyk6KHk9dGhpcy50aHJ1KGYpLHA/cj95LnZhbHVlKClbMF06eS52YWx1ZSgpOnkpfSl9KSksQ2UoW1wicG9wXCIsXCJwdXNoXCIsXCJzaGlmdFwiLFwic29ydFwiLFwic3BsaWNlXCIsXCJ1bnNoaWZ0XCJdLChmdW5jdGlvbih0KXt2YXIgZT1rdFt0XSxuPS9eKD86cHVzaHxzb3J0fHVuc2hpZnQpJC8udGVzdCh0KT9cInRhcFwiOlwidGhydVwiLHI9L14oPzpwb3B8c2hpZnQpJC8udGVzdCh0KTtEbi5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHM7aWYociYmIXRoaXMuX19jaGFpbl9fKXt2YXIgbz10aGlzLnZhbHVlKCk7cmV0dXJuIGUuYXBwbHkoSGEobyk/bzpbXSx0KX1yZXR1cm4gdGhpc1tuXSgoZnVuY3Rpb24obil7cmV0dXJuIGUuYXBwbHkoSGEobik/bjpbXSx0KX0pKX19KSksX3IoSG4ucHJvdG90eXBlLChmdW5jdGlvbih0LGUpe3ZhciBuPURuW2VdO2lmKG4pe3ZhciByPW4ubmFtZStcIlwiO050LmNhbGwoTG4scil8fChMbltyXT1bXSksTG5bcl0ucHVzaCh7bmFtZTplLGZ1bmM6bn0pfX0pKSxMbltGbyhvLDIpLm5hbWVdPVt7bmFtZTpcIndyYXBwZXJcIixmdW5jOm99XSxIbi5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgSG4odGhpcy5fX3dyYXBwZWRfXyk7cmV0dXJuIHQuX19hY3Rpb25zX189a28odGhpcy5fX2FjdGlvbnNfXyksdC5fX2Rpcl9fPXRoaXMuX19kaXJfXyx0Ll9fZmlsdGVyZWRfXz10aGlzLl9fZmlsdGVyZWRfXyx0Ll9faXRlcmF0ZWVzX189a28odGhpcy5fX2l0ZXJhdGVlc19fKSx0Ll9fdGFrZUNvdW50X189dGhpcy5fX3Rha2VDb3VudF9fLHQuX192aWV3c19fPWtvKHRoaXMuX192aWV3c19fKSx0fSxIbi5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe2lmKHRoaXMuX19maWx0ZXJlZF9fKXt2YXIgdD1uZXcgSG4odGhpcyk7dC5fX2Rpcl9fPS0xLHQuX19maWx0ZXJlZF9fPSEwfWVsc2UodD10aGlzLmNsb25lKCkpLl9fZGlyX18qPS0xO3JldHVybiB0fSxIbi5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9fd3JhcHBlZF9fLnZhbHVlKCksZT10aGlzLl9fZGlyX18sbj1IYSh0KSxyPWU8MCxvPW4/dC5sZW5ndGg6MCxpPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0tMSxvPW4ubGVuZ3RoO2Zvcig7KytyPG87KXt2YXIgaT1uW3JdLGE9aS5zaXplO3N3aXRjaChpLnR5cGUpe2Nhc2VcImRyb3BcIjp0Kz1hO2JyZWFrO2Nhc2VcImRyb3BSaWdodFwiOmUtPWE7YnJlYWs7Y2FzZVwidGFrZVwiOmU9d24oZSx0K2EpO2JyZWFrO2Nhc2VcInRha2VSaWdodFwiOnQ9Ym4odCxlLWEpfX1yZXR1cm57c3RhcnQ6dCxlbmQ6ZX19KDAsbyx0aGlzLl9fdmlld3NfXyksYT1pLnN0YXJ0LHM9aS5lbmQsdT1zLWEsbD1yP3M6YS0xLGM9dGhpcy5fX2l0ZXJhdGVlc19fLGY9Yy5sZW5ndGgsZD0wLGg9d24odSx0aGlzLl9fdGFrZUNvdW50X18pO2lmKCFufHwhciYmbz09dSYmaD09dSlyZXR1cm4geW8odCx0aGlzLl9fYWN0aW9uc19fKTt2YXIgcD1bXTt0OmZvcig7dS0tJiZkPGg7KXtmb3IodmFyIGc9LTEseT10W2wrPWVdOysrZzxmOyl7dmFyIG09Y1tnXSx2PW0uaXRlcmF0ZWUsYj1tLnR5cGUsdz12KHkpO2lmKDI9PWIpeT13O2Vsc2UgaWYoIXcpe2lmKDE9PWIpY29udGludWUgdDticmVhayB0fX1wW2QrK109eX1yZXR1cm4gcH0sRG4ucHJvdG90eXBlLmF0PWdhLERuLnByb3RvdHlwZS5jaGFpbj1mdW5jdGlvbigpe3JldHVybiBoYSh0aGlzKX0sRG4ucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbigpe3JldHVybiBuZXcgcW4odGhpcy52YWx1ZSgpLHRoaXMuX19jaGFpbl9fKX0sRG4ucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt0aGlzLl9fdmFsdWVzX189PT1vJiYodGhpcy5fX3ZhbHVlc19fPWhzKHRoaXMudmFsdWUoKSkpO3ZhciB0PXRoaXMuX19pbmRleF9fPj10aGlzLl9fdmFsdWVzX18ubGVuZ3RoO3JldHVybntkb25lOnQsdmFsdWU6dD9vOnRoaXMuX192YWx1ZXNfX1t0aGlzLl9faW5kZXhfXysrXX19LERuLnByb3RvdHlwZS5wbGFudD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzO24gaW5zdGFuY2VvZiB6bjspe3ZhciByPSRpKG4pO3IuX19pbmRleF9fPTAsci5fX3ZhbHVlc19fPW8sZT9pLl9fd3JhcHBlZF9fPXI6ZT1yO3ZhciBpPXI7bj1uLl9fd3JhcHBlZF9ffXJldHVybiBpLl9fd3JhcHBlZF9fPXQsZX0sRG4ucHJvdG90eXBlLnJldmVyc2U9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9fd3JhcHBlZF9fO2lmKHQgaW5zdGFuY2VvZiBIbil7dmFyIGU9dDtyZXR1cm4gdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgmJihlPW5ldyBIbih0aGlzKSksKGU9ZS5yZXZlcnNlKCkpLl9fYWN0aW9uc19fLnB1c2goe2Z1bmM6cGEsYXJnczpbZWFdLHRoaXNBcmc6b30pLG5ldyBxbihlLHRoaXMuX19jaGFpbl9fKX1yZXR1cm4gdGhpcy50aHJ1KGVhKX0sRG4ucHJvdG90eXBlLnRvSlNPTj1Ebi5wcm90b3R5cGUudmFsdWVPZj1Ebi5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4geW8odGhpcy5fX3dyYXBwZWRfXyx0aGlzLl9fYWN0aW9uc19fKX0sRG4ucHJvdG90eXBlLmZpcnN0PURuLnByb3RvdHlwZS5oZWFkLFp0JiYoRG4ucHJvdG90eXBlW1p0XT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSksRG59KCk7Z2UuXz12biwocj1mdW5jdGlvbigpe3JldHVybiB2bn0uY2FsbChlLG4sZSx0KSk9PT1vfHwodC5leHBvcnRzPXIpfS5jYWxsKHRoaXMpfSwzMDA6KHQsZSxuKT0+e3ZhciByLG87dD1uLm5tZCh0KSxmdW5jdGlvbihlKXtlLnJ1bm5pbmdJbk5vZGVKUz1mdW5jdGlvbigpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBwcm9jZXNzJiZcIm9iamVjdFwiPT10eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucyYmXCJzdHJpbmdcIj09dHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZX0sZS5ydW5uaW5nSW5NYWluTm9kZUpTTW9kdWxlPWZ1bmN0aW9uKCl7cmV0dXJuIGUucnVubmluZ0luTm9kZUpTKCkmJm4uY1tuLnNdPT09dH0sZS5jb21tb25KU0F2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0LmV4cG9ydHN9LGUucnVubmluZ0luV2ViV29ya2VyPWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdyYmXCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHNlbGYuYWRkRXZlbnRMaXN0ZW5lciYmXCJmdW5jdGlvblwiPT10eXBlb2Ygc2VsZi5jbG9zZX0sZS5ydW5uaW5nSW5Ob2RlQ2hpbGRQcm9jZXNzPWZ1bmN0aW9uKCl7cmV0dXJuIGUucnVubmluZ0luTm9kZUpTKCkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHByb2Nlc3Muc2VuZH0sZS5ydW5uaW5nSW5OdWxsT3JpZ2luPWZ1bmN0aW9uKCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5sb2NhdGlvbiYmXCJvYmplY3RcIj09dHlwZW9mIGRvY3VtZW50JiYoXCJodHRwOlwiIT09ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wmJlwiaHR0cHM6XCIhPT1kb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCl9LGUud2ViV29ya2Vyc0F2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIFdvcmtlciYmIWUucnVubmluZ0luTnVsbE9yaWdpbigpJiYoIWUucnVubmluZ0luTm9kZUpTKCkmJiEobmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50JiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJBbmRyb2lkIDQuM1wiKT49MCkpfSxlLmxvZz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSExKSxcIm9iamVjdFwiPT10eXBlb2YgY29uc29sZSYmKGNvbnNvbGUubG9nKHQpLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBkb2N1bWVudCYmKGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MKz10K1wiPGJyLz5cIikpfSxlLmNyZWF0ZUVycm9yTWVzc2FnZT1mdW5jdGlvbih0LG4pe2lmKHZvaWQgMD09PW4mJihuPVwiVW5oYW5kbGVkIGV4Y2VwdGlvblwiKSxudWxsPT10KXJldHVybiBuO2lmKG4rPVwiOiBcIixcIm9iamVjdFwiPT10eXBlb2YgdC5jb250ZW50KXtpZihlLnJ1bm5pbmdJbk5vZGVKUygpKXJldHVybiBuK3QuY29udGVudC5zdGFjazt2YXIgcj1KU09OLnN0cmluZ2lmeSh0LmNvbnRlbnQpO3JldHVyblwie31cIiE9PXI/bityOm4rdC5jb250ZW50fXJldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0LmNvbnRlbnQ/bit0LmNvbnRlbnQ6bit0fSxlLnByaW50RXhjZXB0aW9uQW5kU3RhY2tUcmFjZVRvQ29uc29sZT1mdW5jdGlvbih0LG4pe3ZvaWQgMD09PW4mJihuPVwiVW5oYW5kbGVkIGV4Y2VwdGlvblwiKSxlLmxvZyhlLmNyZWF0ZUVycm9yTWVzc2FnZSh0LG4pKX0sZS5nZXRHbG9iYWxPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2Ygbi5nP24uZzpcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93P3dpbmRvdzpcIm9iamVjdFwiPT10eXBlb2Ygc2VsZj9zZWxmOnt9fSxlLnRvU3RyaW5nPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsZS5jb21tb25KU0F2YWlsYWJsZSgpJiYodC5leHBvcnRzPWUpfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIFVpbnQ4QXJyYXkmJjAhPT1uZXcgVWludDhBcnJheSgxKS5zdWJhcnJheSgxKS5ieXRlTGVuZ3RoKXt2YXIgZT1mdW5jdGlvbih0LGUpe3ZhciBuPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDxlP2U6dD5uP246dH07dHw9MCxlfD0wLGFyZ3VtZW50cy5sZW5ndGg8MSYmKHQ9MCksYXJndW1lbnRzLmxlbmd0aDwyJiYoZT10aGlzLmxlbmd0aCksdDwwJiYodD10aGlzLmxlbmd0aCt0KSxlPDAmJihlPXRoaXMubGVuZ3RoK2UpLHQ9bih0LDAsdGhpcy5sZW5ndGgpO3ZhciByPShlPW4oZSwwLHRoaXMubGVuZ3RoKSktdDtyZXR1cm4gcjwwJiYocj0wKSxuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmJ1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdCp0aGlzLkJZVEVTX1BFUl9FTEVNRU5ULHIpfSxuPVtcIkludDhBcnJheVwiLFwiVWludDhBcnJheVwiLFwiVWludDhDbGFtcGVkQXJyYXlcIixcIkludDE2QXJyYXlcIixcIlVpbnQxNkFycmF5XCIsXCJJbnQzMkFycmF5XCIsXCJVaW50MzJBcnJheVwiLFwiRmxvYXQzMkFycmF5XCIsXCJGbG9hdDY0QXJyYXlcIl0scj12b2lkIDA7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdz9yPXdpbmRvdzpcIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmKHI9c2VsZiksdm9pZCAwIT09cilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKylyW25bb11dJiYocltuW29dXS5wcm90b3R5cGUuc3ViYXJyYXk9ZSl9fShyfHwocj17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5jb21wcmVzc0FzeW5jPWZ1bmN0aW9uKGUsbixyKXt2YXIgbz1uZXcgdC5UaW1lcixpPW5ldyB0LkNvbXByZXNzb3I7aWYoIXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcImNvbXByZXNzQXN5bmM6IE5vIGNhbGxiYWNrIGFyZ3VtZW50IGdpdmVuXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKWU9dC5lbmNvZGVVVEY4KGUpO2Vsc2UgaWYobnVsbD09ZXx8IShlIGluc3RhbmNlb2YgVWludDhBcnJheSkpcmV0dXJuIHZvaWQgcih2b2lkIDAsbmV3IFR5cGVFcnJvcihcImNvbXByZXNzQXN5bmM6IEludmFsaWQgaW5wdXQgYXJndW1lbnQsIG9ubHkgJ3N0cmluZycgYW5kICdVaW50OEFycmF5JyBhcmUgc3VwcG9ydGVkXCIpKTt2YXIgYT10LkFycmF5VG9vbHMuc3BsaXRCeXRlQXJyYXkoZSxuLmJsb2NrU2l6ZSkscz1bXSx1PWZ1bmN0aW9uKGUpe2lmKGU8YS5sZW5ndGgpe3ZhciBsPXZvaWQgMDt0cnl7bD1pLmNvbXByZXNzQmxvY2soYVtlXSl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgcih2b2lkIDAsdCl9cy5wdXNoKGwpLG8uZ2V0RWxhcHNlZFRpbWUoKTw9MjA/dShlKzEpOih0LmVucXVldWVJbW1lZGlhdGUoKGZ1bmN0aW9uKCl7cmV0dXJuIHUoZSsxKX0pKSxvLnJlc3RhcnQoKSl9ZWxzZXt2YXIgYz10LkFycmF5VG9vbHMuY29uY2F0VWludDhBcnJheXMocyk7dC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe3ZhciBlO3RyeXtlPXQuQ29tcHJlc3Npb25Db21tb24uZW5jb2RlQ29tcHJlc3NlZEJ5dGVzKGMsbi5vdXRwdXRFbmNvZGluZyl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgcih2b2lkIDAsdCl9dC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe3JldHVybiByKGUpfSkpfSkpfX07dC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe3JldHVybiB1KDApfSkpfSxlLmNyZWF0ZUNvbXByZXNzaW9uU3RyZWFtPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IHQuQ29tcHJlc3NvcixyPW5ldyhuKDk5KS5UcmFuc2Zvcm0pKHtkZWNvZGVTdHJpbmdzOiEwLGhpZ2hXYXRlck1hcms6NjU1MzZ9KTtyZXR1cm4gci5fdHJhbnNmb3JtPWZ1bmN0aW9uKG4sbyxpKXt2YXIgYTt0cnl7YT10LkJ1ZmZlclRvb2xzLnVpbnQ4QXJyYXlUb0J1ZmZlcihlLmNvbXByZXNzQmxvY2sodC5CdWZmZXJUb29scy5idWZmZXJUb1VpbnQ4QXJyYXkobikpKX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByLmVtaXQoXCJlcnJvclwiLHQpfXIucHVzaChhKSxpKCl9LHJ9LGV9KCk7dC5Bc3luY0NvbXByZXNzb3I9ZX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuZGVjb21wcmVzc0FzeW5jPWZ1bmN0aW9uKGUsbixyKXtpZighcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGVjb21wcmVzc0FzeW5jOiBObyBjYWxsYmFjayBhcmd1bWVudCBnaXZlblwiKTt2YXIgbz1uZXcgdC5UaW1lcjt0cnl7ZT10LkNvbXByZXNzaW9uQ29tbW9uLmRlY29kZUNvbXByZXNzZWRCeXRlcyhlLG4uaW5wdXRFbmNvZGluZyl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgcih2b2lkIDAsdCl9dmFyIGk9bmV3IHQuRGVjb21wcmVzc29yLGE9dC5BcnJheVRvb2xzLnNwbGl0Qnl0ZUFycmF5KGUsbi5ibG9ja1NpemUpLHM9W10sdT1mdW5jdGlvbihlKXtpZihlPGEubGVuZ3RoKXt2YXIgbD12b2lkIDA7dHJ5e2w9aS5kZWNvbXByZXNzQmxvY2soYVtlXSl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgcih2b2lkIDAsdCl9cy5wdXNoKGwpLG8uZ2V0RWxhcHNlZFRpbWUoKTw9MjA/dShlKzEpOih0LmVucXVldWVJbW1lZGlhdGUoKGZ1bmN0aW9uKCl7cmV0dXJuIHUoZSsxKX0pKSxvLnJlc3RhcnQoKSl9ZWxzZXt2YXIgYz10LkFycmF5VG9vbHMuY29uY2F0VWludDhBcnJheXMocyk7dC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe3ZhciBlO3RyeXtlPXQuQ29tcHJlc3Npb25Db21tb24uZW5jb2RlRGVjb21wcmVzc2VkQnl0ZXMoYyxuLm91dHB1dEVuY29kaW5nKX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByKHZvaWQgMCx0KX10LmVucXVldWVJbW1lZGlhdGUoKGZ1bmN0aW9uKCl7cmV0dXJuIHIoZSl9KSl9KSl9fTt0LmVucXVldWVJbW1lZGlhdGUoKGZ1bmN0aW9uKCl7cmV0dXJuIHUoMCl9KSl9LGUuY3JlYXRlRGVjb21wcmVzc2lvblN0cmVhbT1mdW5jdGlvbigpe3ZhciBlPW5ldyB0LkRlY29tcHJlc3NvcixyPW5ldyhuKDk5KS5UcmFuc2Zvcm0pKHtkZWNvZGVTdHJpbmdzOiEwLGhpZ2hXYXRlck1hcms6NjU1MzZ9KTtyZXR1cm4gci5fdHJhbnNmb3JtPWZ1bmN0aW9uKG4sbyxpKXt2YXIgYTt0cnl7YT10LkJ1ZmZlclRvb2xzLnVpbnQ4QXJyYXlUb0J1ZmZlcihlLmRlY29tcHJlc3NCbG9jayh0LkJ1ZmZlclRvb2xzLmJ1ZmZlclRvVWludDhBcnJheShuKSkpfWNhdGNoKHQpe3JldHVybiB2b2lkIHIuZW1pdChcImVycm9yXCIsdCl9ci5wdXNoKGEpLGkoKX0scn0sZX0oKTt0LkFzeW5jRGVjb21wcmVzc29yPWV9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKGUpe2UuY29tcHJlc3NBc3luYz1mdW5jdGlvbih0LG4scil7aWYoXCJCeXRlQXJyYXlcIiE9bi5pbnB1dEVuY29kaW5nfHx0IGluc3RhbmNlb2YgVWludDhBcnJheSl7dmFyIG89e3Rva2VuOk1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSx0eXBlOlwiY29tcHJlc3NcIixkYXRhOnQsaW5wdXRFbmNvZGluZzpuLmlucHV0RW5jb2Rpbmcsb3V0cHV0RW5jb2Rpbmc6bi5vdXRwdXRFbmNvZGluZ30saT1mdW5jdGlvbih0KXt2YXIgbj10LmRhdGE7biYmbi50b2tlbj09by50b2tlbiYmKGUuZ2xvYmFsV29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsaSksXCJlcnJvclwiPT1uLnR5cGU/cih2b2lkIDAsbmV3IEVycm9yKG4uZXJyb3IpKTpyKG4uZGF0YSkpfTtlLmdsb2JhbFdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGkpLGUuZ2xvYmFsV29ya2VyLnBvc3RNZXNzYWdlKG8sW10pfWVsc2Ugcih2b2lkIDAsbmV3IFR5cGVFcnJvcihcImNvbXByZXNzQXN5bmM6IGlucHV0IGlzIG5vdCBhIFVpbnQ4QXJyYXlcIikpfSxlLmRlY29tcHJlc3NBc3luYz1mdW5jdGlvbih0LG4scil7dmFyIG89e3Rva2VuOk1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSx0eXBlOlwiZGVjb21wcmVzc1wiLGRhdGE6dCxpbnB1dEVuY29kaW5nOm4uaW5wdXRFbmNvZGluZyxvdXRwdXRFbmNvZGluZzpuLm91dHB1dEVuY29kaW5nfSxpPWZ1bmN0aW9uKHQpe3ZhciBuPXQuZGF0YTtuJiZuLnRva2VuPT1vLnRva2VuJiYoZS5nbG9iYWxXb3JrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixpKSxcImVycm9yXCI9PW4udHlwZT9yKHZvaWQgMCxuZXcgRXJyb3Iobi5lcnJvcikpOnIobi5kYXRhKSl9O2UuZ2xvYmFsV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsaSksZS5nbG9iYWxXb3JrZXIucG9zdE1lc3NhZ2UobyxbXSl9LGUuaW5zdGFsbFdlYldvcmtlcklmTmVlZGVkPWZ1bmN0aW9uKCl7XCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnZvaWQgMD09PXNlbGYuZG9jdW1lbnQmJm51bGwhPXNlbGYuYWRkRXZlbnRMaXN0ZW5lciYmKHNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhO2lmKFwiY29tcHJlc3NcIj09bi50eXBlKXt2YXIgcj12b2lkIDA7dHJ5e3I9dC5jb21wcmVzcyhuLmRhdGEse291dHB1dEVuY29kaW5nOm4ub3V0cHV0RW5jb2Rpbmd9KX1jYXRjaChlKXtyZXR1cm4gdm9pZCBzZWxmLnBvc3RNZXNzYWdlKHt0b2tlbjpuLnRva2VuLHR5cGU6XCJlcnJvclwiLGVycm9yOnQuY3JlYXRlRXJyb3JNZXNzYWdlKGUpfSxbXSl9KG89e3Rva2VuOm4udG9rZW4sdHlwZTpcImNvbXByZXNzaW9uUmVzdWx0XCIsZGF0YTpyLGVuY29kaW5nOm4ub3V0cHV0RW5jb2Rpbmd9KS5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSYmLTE9PT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKFwiTVNJRSAxMFwiKT9zZWxmLnBvc3RNZXNzYWdlKG8sW28uZGF0YS5idWZmZXJdKTpzZWxmLnBvc3RNZXNzYWdlKG8sW10pfWVsc2UgaWYoXCJkZWNvbXByZXNzXCI9PW4udHlwZSl7dmFyIG8saT12b2lkIDA7dHJ5e2k9dC5kZWNvbXByZXNzKG4uZGF0YSx7aW5wdXRFbmNvZGluZzpuLmlucHV0RW5jb2Rpbmcsb3V0cHV0RW5jb2Rpbmc6bi5vdXRwdXRFbmNvZGluZ30pfWNhdGNoKGUpe3JldHVybiB2b2lkIHNlbGYucG9zdE1lc3NhZ2Uoe3Rva2VuOm4udG9rZW4sdHlwZTpcImVycm9yXCIsZXJyb3I6dC5jcmVhdGVFcnJvck1lc3NhZ2UoZSl9LFtdKX0obz17dG9rZW46bi50b2tlbix0eXBlOlwiZGVjb21wcmVzc2lvblJlc3VsdFwiLGRhdGE6aSxlbmNvZGluZzpuLm91dHB1dEVuY29kaW5nfSkuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJi0xPT09bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIk1TSUUgMTBcIik/c2VsZi5wb3N0TWVzc2FnZShvLFtvLmRhdGEuYnVmZmVyXSk6c2VsZi5wb3N0TWVzc2FnZShvLFtdKX19KSksc2VsZi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwoZnVuY3Rpb24oZSl7dC5sb2codC5jcmVhdGVFcnJvck1lc3NhZ2UoZS5lcnJvcixcIlVuZXhwZWN0ZWQgTFpVVEY4IFdlYldvcmtlciBleGNlcHRpb25cIikpfSkpKX0sZS5jcmVhdGVHbG9iYWxXb3JrZXJJZk5lZWRlZD1mdW5jdGlvbigpe2lmKGUuZ2xvYmFsV29ya2VyKXJldHVybiEwO2lmKCF0LndlYldvcmtlcnNBdmFpbGFibGUoKSlyZXR1cm4hMTtpZighZS5zY3JpcHRVUkkmJlwib2JqZWN0XCI9PXR5cGVvZiBkb2N1bWVudCl7dmFyIG49ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsenV0ZjhcIik7bnVsbCE9biYmKGUuc2NyaXB0VVJJPW4uZ2V0QXR0cmlidXRlKFwic3JjXCIpfHx2b2lkIDApfXJldHVybiEhZS5zY3JpcHRVUkkmJihlLmdsb2JhbFdvcmtlcj1uZXcgV29ya2VyKGUuc2NyaXB0VVJJKSwhMCl9LGUudGVybWluYXRlPWZ1bmN0aW9uKCl7ZS5nbG9iYWxXb3JrZXImJihlLmdsb2JhbFdvcmtlci50ZXJtaW5hdGUoKSxlLmdsb2JhbFdvcmtlcj12b2lkIDApfX0oZT10LldlYldvcmtlcnx8KHQuV2ViV29ya2VyPXt9KSksZS5pbnN0YWxsV2ViV29ya2VySWZOZWVkZWQoKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLG4pe3RoaXMuY29udGFpbmVyPXQsdGhpcy5zdGFydFBvc2l0aW9uPWUsdGhpcy5sZW5ndGg9bn1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRhaW5lclt0aGlzLnN0YXJ0UG9zaXRpb24rdF19LHQucHJvdG90eXBlLmdldEluUmV2ZXJzZWRPcmRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250YWluZXJbdGhpcy5zdGFydFBvc2l0aW9uK3RoaXMubGVuZ3RoLTEtdF19LHQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3RoaXMuY29udGFpbmVyW3RoaXMuc3RhcnRQb3NpdGlvbit0XT1lfSx0fSgpO3QuQXJyYXlTZWdtZW50PWV9KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3QuY29weUVsZW1lbnRzPWZ1bmN0aW9uKHQsZSxuLHIsbyl7Zm9yKDtvLS07KW5bcisrXT10W2UrK119LHQuemVyb0VsZW1lbnRzPWZ1bmN0aW9uKHQsZSxuKXtmb3IoO24tLTspdFtlKytdPTB9LHQuY291bnROb256ZXJvVmFsdWVzSW5BcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7bjx0Lmxlbmd0aDtuKyspdFtuXSYmZSsrO3JldHVybiBlfSx0LnRydW5jYXRlU3RhcnRpbmdFbGVtZW50cz1mdW5jdGlvbih0LGUpe2lmKHQubGVuZ3RoPD1lKXRocm93IG5ldyBSYW5nZUVycm9yKFwidHJ1bmNhdGVTdGFydGluZ0VsZW1lbnRzOiBSZXF1ZXN0ZWQgbGVuZ3RoIHNob3VsZCBiZSBzbWFsbGVyIHRoYW4gYXJyYXkgbGVuZ3RoXCIpO2Zvcih2YXIgbj10Lmxlbmd0aC1lLHI9MDtyPGU7cisrKXRbcl09dFtuK3JdO3QubGVuZ3RoPWV9LHQuZG91YmxlQnl0ZUFycmF5Q2FwYWNpdHk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkoMip0Lmxlbmd0aCk7cmV0dXJuIGUuc2V0KHQpLGV9LHQuY29uY2F0VWludDhBcnJheXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wLHI9dDtuPHIubGVuZ3RoO24rKyl7ZSs9KHU9cltuXSkubGVuZ3RofWZvcih2YXIgbz1uZXcgVWludDhBcnJheShlKSxpPTAsYT0wLHM9dDthPHMubGVuZ3RoO2ErKyl7dmFyIHU9c1thXTtvLnNldCh1LGkpLGkrPXUubGVuZ3RofXJldHVybiBvfSx0LnNwbGl0Qnl0ZUFycmF5PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoOyl7dmFyIG89TWF0aC5taW4oZSx0Lmxlbmd0aC1yKTtuLnB1c2godC5zdWJhcnJheShyLHIrbykpLHIrPW99cmV0dXJuIG59fSh0LkFycmF5VG9vbHN8fCh0LkFycmF5VG9vbHM9e30pKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dC5jb252ZXJ0VG9VaW50OEFycmF5SWZOZWVkZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgQnVmZmVyJiZCdWZmZXIuaXNCdWZmZXIoZSk/dC5idWZmZXJUb1VpbnQ4QXJyYXkoZSk6ZX0sdC51aW50OEFycmF5VG9CdWZmZXI9ZnVuY3Rpb24odCl7aWYoQnVmZmVyLnByb3RvdHlwZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe3ZhciBlPW5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxCdWZmZXIucHJvdG90eXBlKSxlfWZvcih2YXIgbj10Lmxlbmd0aCxyPW5ldyBCdWZmZXIobiksbz0wO288bjtvKyspcltvXT10W29dO3JldHVybiByfSx0LmJ1ZmZlclRvVWludDhBcnJheT1mdW5jdGlvbih0KXtpZihCdWZmZXIucHJvdG90eXBlIGluc3RhbmNlb2YgVWludDhBcnJheSlyZXR1cm4gbmV3IFVpbnQ4QXJyYXkodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCk7Zm9yKHZhciBlPXQubGVuZ3RoLG49bmV3IFVpbnQ4QXJyYXkoZSkscj0wO3I8ZTtyKyspbltyXT10W3JdO3JldHVybiBufX0odC5CdWZmZXJUb29sc3x8KHQuQnVmZmVyVG9vbHM9e30pKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7ZS5nZXRDcm9wcGVkQnVmZmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApO3ZhciBvPW5ldyBVaW50OEFycmF5KG4rcik7cmV0dXJuIG8uc2V0KHQuc3ViYXJyYXkoZSxlK24pKSxvfSxlLmdldENyb3BwZWRBbmRBcHBlbmRlZEJ5dGVBcnJheT1mdW5jdGlvbihlLG4scixvKXtyZXR1cm4gdC5BcnJheVRvb2xzLmNvbmNhdFVpbnQ4QXJyYXlzKFtlLnN1YmFycmF5KG4sbityKSxvXSl9LGUuZGV0ZWN0Q29tcHJlc3Npb25Tb3VyY2VFbmNvZGluZz1mdW5jdGlvbih0KXtpZihudWxsPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJkZXRlY3RDb21wcmVzc2lvblNvdXJjZUVuY29kaW5nOiBpbnB1dCBpcyBudWxsIG9yIHVuZGVmaW5lZFwiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm5cIlN0cmluZ1wiO2lmKHQgaW5zdGFuY2VvZiBVaW50OEFycmF5fHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBCdWZmZXImJkJ1ZmZlci5pc0J1ZmZlcih0KSlyZXR1cm5cIkJ5dGVBcnJheVwiO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJkZXRlY3RDb21wcmVzc2lvblNvdXJjZUVuY29kaW5nOiBpbnB1dCBtdXN0IGJlIG9mIHR5cGUgJ3N0cmluZycsICdVaW50OEFycmF5JyBvciAnQnVmZmVyJ1wiKX0sZS5lbmNvZGVDb21wcmVzc2VkQnl0ZXM9ZnVuY3Rpb24oZSxuKXtzd2l0Y2gobil7Y2FzZVwiQnl0ZUFycmF5XCI6cmV0dXJuIGU7Y2FzZVwiQnVmZmVyXCI6cmV0dXJuIHQuQnVmZmVyVG9vbHMudWludDhBcnJheVRvQnVmZmVyKGUpO2Nhc2VcIkJhc2U2NFwiOnJldHVybiB0LmVuY29kZUJhc2U2NChlKTtjYXNlXCJCaW5hcnlTdHJpbmdcIjpyZXR1cm4gdC5lbmNvZGVCaW5hcnlTdHJpbmcoZSk7Y2FzZVwiU3RvcmFnZUJpbmFyeVN0cmluZ1wiOnJldHVybiB0LmVuY29kZVN0b3JhZ2VCaW5hcnlTdHJpbmcoZSk7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKFwiZW5jb2RlQ29tcHJlc3NlZEJ5dGVzOiBpbnZhbGlkIG91dHB1dCBlbmNvZGluZyByZXF1ZXN0ZWRcIil9fSxlLmRlY29kZUNvbXByZXNzZWRCeXRlcz1mdW5jdGlvbihlLG4pe2lmKG51bGw9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcImRlY29kZUNvbXByZXNzZWREYXRhOiBJbnB1dCBpcyBudWxsIG9yIHVuZGVmaW5lZFwiKTtzd2l0Y2gobil7Y2FzZVwiQnl0ZUFycmF5XCI6Y2FzZVwiQnVmZmVyXCI6dmFyIHI9dC5CdWZmZXJUb29scy5jb252ZXJ0VG9VaW50OEFycmF5SWZOZWVkZWQoZSk7aWYoIShyIGluc3RhbmNlb2YgVWludDhBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRlY29kZUNvbXByZXNzZWREYXRhOiAnQnl0ZUFycmF5JyBvciAnQnVmZmVyJyBpbnB1dCB0eXBlIHdhcyBzcGVjaWZpZWQgYnV0IGlucHV0IGlzIG5vdCBhIFVpbnQ4QXJyYXkgb3IgQnVmZmVyXCIpO3JldHVybiByO2Nhc2VcIkJhc2U2NFwiOmlmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWNvZGVDb21wcmVzc2VkRGF0YTogJ0Jhc2U2NCcgaW5wdXQgdHlwZSB3YXMgc3BlY2lmaWVkIGJ1dCBpbnB1dCBpcyBub3QgYSBzdHJpbmdcIik7cmV0dXJuIHQuZGVjb2RlQmFzZTY0KGUpO2Nhc2VcIkJpbmFyeVN0cmluZ1wiOmlmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWNvZGVDb21wcmVzc2VkRGF0YTogJ0JpbmFyeVN0cmluZycgaW5wdXQgdHlwZSB3YXMgc3BlY2lmaWVkIGJ1dCBpbnB1dCBpcyBub3QgYSBzdHJpbmdcIik7cmV0dXJuIHQuZGVjb2RlQmluYXJ5U3RyaW5nKGUpO2Nhc2VcIlN0b3JhZ2VCaW5hcnlTdHJpbmdcIjppZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGVjb2RlQ29tcHJlc3NlZERhdGE6ICdTdG9yYWdlQmluYXJ5U3RyaW5nJyBpbnB1dCB0eXBlIHdhcyBzcGVjaWZpZWQgYnV0IGlucHV0IGlzIG5vdCBhIHN0cmluZ1wiKTtyZXR1cm4gdC5kZWNvZGVTdG9yYWdlQmluYXJ5U3RyaW5nKGUpO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihcImRlY29kZUNvbXByZXNzZWREYXRhOiBpbnZhbGlkIGlucHV0IGVuY29kaW5nIHJlcXVlc3RlZDogJ1wiLmNvbmNhdChuLFwiJ1wiKSl9fSxlLmVuY29kZURlY29tcHJlc3NlZEJ5dGVzPWZ1bmN0aW9uKGUsbil7c3dpdGNoKG4pe2Nhc2VcIlN0cmluZ1wiOnJldHVybiB0LmRlY29kZVVURjgoZSk7Y2FzZVwiQnl0ZUFycmF5XCI6cmV0dXJuIGU7Y2FzZVwiQnVmZmVyXCI6aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgQnVmZmVyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJlbmNvZGVEZWNvbXByZXNzZWRCeXRlczogYSAnQnVmZmVyJyB0eXBlIHdhcyBzcGVjaWZpZWQgYnV0IGlzIG5vdCBzdXBwb3J0ZWQgYXQgdGhlIGN1cnJlbnQgZW52aXJubWVudFwiKTtyZXR1cm4gdC5CdWZmZXJUb29scy51aW50OEFycmF5VG9CdWZmZXIoZSk7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKFwiZW5jb2RlRGVjb21wcmVzc2VkQnl0ZXM6IGludmFsaWQgb3V0cHV0IGVuY29kaW5nIHJlcXVlc3RlZFwiKX19fSh0LkNvbXByZXNzaW9uQ29tbW9ufHwodC5Db21wcmVzc2lvbkNvbW1vbj17fSkpfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbihlKXt2YXIgbixyPVtdO2UuZW5xdWV1ZUltbWVkaWF0ZT1mdW5jdGlvbih0KXtyLnB1c2godCksMT09PXIubGVuZ3RoJiZuKCl9LGUuaW5pdGlhbGl6ZVNjaGVkdWxlcj1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsbj1yO2U8bi5sZW5ndGg7ZSsrKXt2YXIgbz1uW2VdO3RyeXtvLmNhbGwodm9pZCAwKX1jYXRjaChlKXt0LnByaW50RXhjZXB0aW9uQW5kU3RhY2tUcmFjZVRvQ29uc29sZShlLFwiZW5xdWV1ZUltbWVkaWF0ZSBleGNlcHRpb25cIil9fXIubGVuZ3RoPTB9O2lmKHQucnVubmluZ0luTm9kZUpTKCkpbj1mdW5jdGlvbigpe3JldHVybiBzZXRJbW1lZGlhdGUoKGZ1bmN0aW9uKCl7cmV0dXJuIGUoKX0pKX07ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciYmXCJmdW5jdGlvblwiPT10eXBlb2Ygd2luZG93LnBvc3RNZXNzYWdlKXt2YXIgbyxpPVwiZW5xdWV1ZUltbWVkaWF0ZS1cIitNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsKGZ1bmN0aW9uKHQpe3QuZGF0YT09PWkmJmUoKX0pKSxvPXQucnVubmluZ0luTnVsbE9yaWdpbigpP1wiKlwiOndpbmRvdy5sb2NhdGlvbi5ocmVmLG49ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LnBvc3RNZXNzYWdlKGksbyl9fWVsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgTWVzc2FnZUNoYW5uZWwmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE1lc3NhZ2VQb3J0KXt2YXIgYT1uZXcgTWVzc2FnZUNoYW5uZWw7YS5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gZSgpfSxuPWZ1bmN0aW9uKCl7cmV0dXJuIGEucG9ydDIucG9zdE1lc3NhZ2UoMCl9fWVsc2Ugbj1mdW5jdGlvbigpe3JldHVybiBzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBlKCl9KSwwKX19LGUuaW5pdGlhbGl6ZVNjaGVkdWxlcigpfShlPXQuRXZlbnRMb29wfHwodC5FdmVudExvb3A9e30pKSx0LmVucXVldWVJbW1lZGlhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZW5xdWV1ZUltbWVkaWF0ZSh0KX19KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3Qub3ZlcnJpZGU9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5leHRlbmQoZSxuKX0sdC5leHRlbmQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJvYmogaXMgbnVsbCBvciB1bmRlZmluZWRcIik7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9iaiBpcyBub3QgYW4gb2JqZWN0XCIpO2lmKG51bGw9PWUmJihlPXt9KSxcIm9iamVjdFwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwibmV3UHJvcGVydGllcyBpcyBub3QgYW4gb2JqZWN0XCIpO2lmKG51bGwhPWUpZm9yKHZhciBuIGluIGUpdFtuXT1lW25dO3JldHVybiB0fX0odC5PYmplY3RUb29sc3x8KHQuT2JqZWN0VG9vbHM9e30pKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXt0LmdldFJhbmRvbUludGVnZXJJblJhbmdlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihlLXQpKX0sdC5nZXRSYW5kb21VVEYxNlN0cmluZ09mTGVuZ3RoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbj1cIlwiLHI9MDtyPGU7cisrKXt2YXIgbz12b2lkIDA7ZG97bz10LmdldFJhbmRvbUludGVnZXJJblJhbmdlKDAsMTExNDExMil9d2hpbGUobz49NTUyOTYmJm88PTU3MzQzKTtuKz10LkVuY29kaW5nLkNvZGVQb2ludC5kZWNvZGVUb1N0cmluZyhvKX1yZXR1cm4gbn19KG98fChvPXt9KSksZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZvaWQgMD09PXQmJih0PTEwMjQpLHRoaXMub3V0cHV0QnVmZmVyQ2FwYWNpdHk9dCx0aGlzLm91dHB1dFBvc2l0aW9uPTAsdGhpcy5vdXRwdXRTdHJpbmc9XCJcIix0aGlzLm91dHB1dEJ1ZmZlcj1uZXcgVWludDE2QXJyYXkodGhpcy5vdXRwdXRCdWZmZXJDYXBhY2l0eSl9cmV0dXJuIHQucHJvdG90eXBlLmFwcGVuZENoYXJDb2RlPWZ1bmN0aW9uKHQpe3RoaXMub3V0cHV0QnVmZmVyW3RoaXMub3V0cHV0UG9zaXRpb24rK109dCx0aGlzLm91dHB1dFBvc2l0aW9uPT09dGhpcy5vdXRwdXRCdWZmZXJDYXBhY2l0eSYmdGhpcy5mbHVzaEJ1ZmZlclRvT3V0cHV0U3RyaW5nKCl9LHQucHJvdG90eXBlLmFwcGVuZENoYXJDb2Rlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspdGhpcy5hcHBlbmRDaGFyQ29kZSh0W2VdKX0sdC5wcm90b3R5cGUuYXBwZW5kU3RyaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl0aGlzLmFwcGVuZENoYXJDb2RlKHQuY2hhckNvZGVBdChlKSl9LHQucHJvdG90eXBlLmFwcGVuZENvZGVQb2ludD1mdW5jdGlvbih0KXtpZih0PD02NTUzNSl0aGlzLmFwcGVuZENoYXJDb2RlKHQpO2Vsc2V7aWYoISh0PD0xMTE0MTExKSl0aHJvdyBuZXcgRXJyb3IoXCJhcHBlbmRDb2RlUG9pbnQ6IEEgY29kZSBwb2ludCBvZiBcIi5jb25jYXQodCxcIiBjYW5ub3QgYmUgZW5jb2RlZCBpbiBVVEYtMTZcIikpO3RoaXMuYXBwZW5kQ2hhckNvZGUoNTUyOTYrKHQtNjU1MzY+Pj4xMCkpLHRoaXMuYXBwZW5kQ2hhckNvZGUoNTYzMjArKHQtNjU1MzYmMTAyMykpfX0sdC5wcm90b3R5cGUuZ2V0T3V0cHV0U3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmx1c2hCdWZmZXJUb091dHB1dFN0cmluZygpLHRoaXMub3V0cHV0U3RyaW5nfSx0LnByb3RvdHlwZS5mbHVzaEJ1ZmZlclRvT3V0cHV0U3RyaW5nPWZ1bmN0aW9uKCl7dGhpcy5vdXRwdXRQb3NpdGlvbj09PXRoaXMub3V0cHV0QnVmZmVyQ2FwYWNpdHk/dGhpcy5vdXRwdXRTdHJpbmcrPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCx0aGlzLm91dHB1dEJ1ZmZlcik6dGhpcy5vdXRwdXRTdHJpbmcrPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCx0aGlzLm91dHB1dEJ1ZmZlci5zdWJhcnJheSgwLHRoaXMub3V0cHV0UG9zaXRpb24pKSx0aGlzLm91dHB1dFBvc2l0aW9uPTB9LHR9KCk7dC5TdHJpbmdCdWlsZGVyPWV9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5yZXN0YXJ0KCl9cmV0dXJuIGUucHJvdG90eXBlLnJlc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0VGltZT1lLmdldFRpbWVzdGFtcCgpfSxlLnByb3RvdHlwZS5nZXRFbGFwc2VkVGltZT1mdW5jdGlvbigpe3JldHVybiBlLmdldFRpbWVzdGFtcCgpLXRoaXMuc3RhcnRUaW1lfSxlLnByb3RvdHlwZS5nZXRFbGFwc2VkVGltZUFuZFJlc3RhcnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEVsYXBzZWRUaW1lKCk7cmV0dXJuIHRoaXMucmVzdGFydCgpLHR9LGUucHJvdG90eXBlLmxvZ0FuZFJlc3RhcnQ9ZnVuY3Rpb24oZSxuKXt2b2lkIDA9PT1uJiYobj0hMCk7dmFyIHI9dGhpcy5nZXRFbGFwc2VkVGltZSgpLG89XCJcIi5jb25jYXQoZSxcIjogXCIpLmNvbmNhdChyLnRvRml4ZWQoMyksXCJtc1wiKTtyZXR1cm4gdC5sb2cobyxuKSx0aGlzLnJlc3RhcnQoKSxyfSxlLmdldFRpbWVzdGFtcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRpbWVzdGFtcEZ1bmN8fHRoaXMuY3JlYXRlR2xvYmFsVGltZXN0YW1wRnVuY3Rpb24oKSx0aGlzLnRpbWVzdGFtcEZ1bmMoKX0sZS5nZXRNaWNyb3NlY29uZFRpbWVzdGFtcD1mdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKDFlMyplLmdldFRpbWVzdGFtcCgpKX0sZS5jcmVhdGVHbG9iYWxUaW1lc3RhbXBGdW5jdGlvbj1mdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBwcm9jZXNzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwcm9jZXNzLmhydGltZSl7dmFyIHQ9MDt0aGlzLnRpbWVzdGFtcEZ1bmM9ZnVuY3Rpb24oKXt2YXIgZT1wcm9jZXNzLmhydGltZSgpLG49MWUzKmVbMF0rZVsxXS8xZTY7cmV0dXJuIHQrbn0sdD1EYXRlLm5vdygpLXRoaXMudGltZXN0YW1wRnVuYygpfWVsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGNocm9tZSYmY2hyb21lLkludGVydmFsKXt2YXIgZT1EYXRlLm5vdygpLG49bmV3IGNocm9tZS5JbnRlcnZhbDtuLnN0YXJ0KCksdGhpcy50aW1lc3RhbXBGdW5jPWZ1bmN0aW9uKCl7cmV0dXJuIGUrbi5taWNyb3NlY29uZHMoKS8xZTN9fWVsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIHBlcmZvcm1hbmNlJiZwZXJmb3JtYW5jZS5ub3cpe3ZhciByPURhdGUubm93KCktcGVyZm9ybWFuY2Uubm93KCk7dGhpcy50aW1lc3RhbXBGdW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHIrcGVyZm9ybWFuY2Uubm93KCl9fWVsc2UgRGF0ZS5ub3c/dGhpcy50aW1lc3RhbXBGdW5jPWZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCl9OnRoaXMudGltZXN0YW1wRnVuYz1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0sZX0oKTt0LlRpbWVyPWV9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZvaWQgMD09PWUmJihlPSEwKSx0aGlzLk1pbmltdW1TZXF1ZW5jZUxlbmd0aD00LHRoaXMuTWF4aW11bVNlcXVlbmNlTGVuZ3RoPTMxLHRoaXMuTWF4aW11bU1hdGNoRGlzdGFuY2U9MzI3NjcsdGhpcy5QcmVmaXhIYXNoVGFibGVTaXplPTY1NTM3LHRoaXMuaW5wdXRCdWZmZXJTdHJlYW1PZmZzZXQ9MSxlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBVaW50MzJBcnJheT90aGlzLnByZWZpeEhhc2hUYWJsZT1uZXcgdC5Db21wcmVzc29yQ3VzdG9tSGFzaFRhYmxlKHRoaXMuUHJlZml4SGFzaFRhYmxlU2l6ZSk6dGhpcy5wcmVmaXhIYXNoVGFibGU9bmV3IHQuQ29tcHJlc3NvclNpbXBsZUhhc2hUYWJsZSh0aGlzLlByZWZpeEhhc2hUYWJsZVNpemUpfXJldHVybiBlLnByb3RvdHlwZS5jb21wcmVzc0Jsb2NrPWZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcImNvbXByZXNzQmxvY2s6IHVuZGVmaW5lZCBvciBudWxsIGlucHV0IHJlY2VpdmVkXCIpO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT10LmVuY29kZVVURjgoZSkpLGU9dC5CdWZmZXJUb29scy5jb252ZXJ0VG9VaW50OEFycmF5SWZOZWVkZWQoZSksdGhpcy5jb21wcmVzc1V0ZjhCbG9jayhlKX0sZS5wcm90b3R5cGUuY29tcHJlc3NVdGY4QmxvY2s9ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBuZXcgVWludDhBcnJheSgwKTt2YXIgZT10aGlzLmNyb3BBbmRBZGROZXdCeXRlc1RvSW5wdXRCdWZmZXIodCksbj10aGlzLmlucHV0QnVmZmVyLHI9dGhpcy5pbnB1dEJ1ZmZlci5sZW5ndGg7dGhpcy5vdXRwdXRCdWZmZXI9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpLHRoaXMub3V0cHV0QnVmZmVyUG9zaXRpb249MDtmb3IodmFyIG89MCxpPWU7aTxyO2krKyl7dmFyIGE9bltpXSxzPWk8bztpZihpPnItdGhpcy5NaW5pbXVtU2VxdWVuY2VMZW5ndGgpc3x8dGhpcy5vdXRwdXRSYXdCeXRlKGEpO2Vsc2V7dmFyIHU9dGhpcy5nZXRCdWNrZXRJbmRleEZvclByZWZpeChpKTtpZighcyl7dmFyIGw9dGhpcy5maW5kTG9uZ2VzdE1hdGNoKGksdSk7bnVsbCE9bCYmKHRoaXMub3V0cHV0UG9pbnRlckJ5dGVzKGwubGVuZ3RoLGwuZGlzdGFuY2UpLG89aStsLmxlbmd0aCxzPSEwKX1zfHx0aGlzLm91dHB1dFJhd0J5dGUoYSk7dmFyIGM9dGhpcy5pbnB1dEJ1ZmZlclN0cmVhbU9mZnNldCtpO3RoaXMucHJlZml4SGFzaFRhYmxlLmFkZFZhbHVlVG9CdWNrZXQodSxjKX19cmV0dXJuIHRoaXMub3V0cHV0QnVmZmVyLnN1YmFycmF5KDAsdGhpcy5vdXRwdXRCdWZmZXJQb3NpdGlvbil9LGUucHJvdG90eXBlLmZpbmRMb25nZXN0TWF0Y2g9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnByZWZpeEhhc2hUYWJsZS5nZXRBcnJheVNlZ21lbnRGb3JCdWNrZXRJbmRleChlLHRoaXMucmV1c2FibGVBcnJheVNlZ21lbnRPYmplY3QpO2lmKG51bGw9PW4pcmV0dXJuIG51bGw7Zm9yKHZhciByLG89dGhpcy5pbnB1dEJ1ZmZlcixpPTAsYT0wO2E8bi5sZW5ndGg7YSsrKXt2YXIgcz1uLmdldEluUmV2ZXJzZWRPcmRlcihhKS10aGlzLmlucHV0QnVmZmVyU3RyZWFtT2Zmc2V0LHU9dC1zLGw9dm9pZCAwO2lmKGw9dm9pZCAwPT09cj90aGlzLk1pbmltdW1TZXF1ZW5jZUxlbmd0aC0xOnI8MTI4JiZ1Pj0xMjg/aSsoaT4+PjEpOmksdT50aGlzLk1heGltdW1NYXRjaERpc3RhbmNlfHxsPj10aGlzLk1heGltdW1TZXF1ZW5jZUxlbmd0aHx8dCtsPj1vLmxlbmd0aClicmVhaztpZihvW3MrbF09PT1vW3QrbF0pZm9yKHZhciBjPTA7O2MrKyl7aWYodCtjPT09by5sZW5ndGh8fG9bcytjXSE9PW9bdCtjXSl7Yz5sJiYocj11LGk9Yyk7YnJlYWt9aWYoYz09PXRoaXMuTWF4aW11bVNlcXVlbmNlTGVuZ3RoKXJldHVybntkaXN0YW5jZTp1LGxlbmd0aDp0aGlzLk1heGltdW1TZXF1ZW5jZUxlbmd0aH19fXJldHVybiB2b2lkIDAhPT1yP3tkaXN0YW5jZTpyLGxlbmd0aDppfTpudWxsfSxlLnByb3RvdHlwZS5nZXRCdWNrZXRJbmRleEZvclByZWZpeD1mdW5jdGlvbih0KXtyZXR1cm4oNzg4MDU5OSp0aGlzLmlucHV0QnVmZmVyW3RdKzM5NjAxKnRoaXMuaW5wdXRCdWZmZXJbdCsxXSsxOTkqdGhpcy5pbnB1dEJ1ZmZlclt0KzJdK3RoaXMuaW5wdXRCdWZmZXJbdCszXSkldGhpcy5QcmVmaXhIYXNoVGFibGVTaXplfSxlLnByb3RvdHlwZS5vdXRwdXRQb2ludGVyQnl0ZXM9ZnVuY3Rpb24odCxlKXtlPDEyOD8odGhpcy5vdXRwdXRSYXdCeXRlKDE5Mnx0KSx0aGlzLm91dHB1dFJhd0J5dGUoZSkpOih0aGlzLm91dHB1dFJhd0J5dGUoMjI0fHQpLHRoaXMub3V0cHV0UmF3Qnl0ZShlPj4+OCksdGhpcy5vdXRwdXRSYXdCeXRlKDI1NSZlKSl9LGUucHJvdG90eXBlLm91dHB1dFJhd0J5dGU9ZnVuY3Rpb24odCl7dGhpcy5vdXRwdXRCdWZmZXJbdGhpcy5vdXRwdXRCdWZmZXJQb3NpdGlvbisrXT10fSxlLnByb3RvdHlwZS5jcm9wQW5kQWRkTmV3Qnl0ZXNUb0lucHV0QnVmZmVyPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PXRoaXMuaW5wdXRCdWZmZXIpcmV0dXJuIHRoaXMuaW5wdXRCdWZmZXI9ZSwwO3ZhciBuPU1hdGgubWluKHRoaXMuaW5wdXRCdWZmZXIubGVuZ3RoLHRoaXMuTWF4aW11bU1hdGNoRGlzdGFuY2UpLHI9dGhpcy5pbnB1dEJ1ZmZlci5sZW5ndGgtbjtyZXR1cm4gdGhpcy5pbnB1dEJ1ZmZlcj10LkNvbXByZXNzaW9uQ29tbW9uLmdldENyb3BwZWRBbmRBcHBlbmRlZEJ5dGVBcnJheSh0aGlzLmlucHV0QnVmZmVyLHIsbixlKSx0aGlzLmlucHV0QnVmZmVyU3RyZWFtT2Zmc2V0Kz1yLG59LGV9KCk7dC5Db21wcmVzc29yPWV9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3RoaXMubWluaW11bUJ1Y2tldENhcGFjaXR5PTQsdGhpcy5tYXhpbXVtQnVja2V0Q2FwYWNpdHk9NjQsdGhpcy5idWNrZXRMb2NhdG9ycz1uZXcgVWludDMyQXJyYXkoMip0KSx0aGlzLnN0b3JhZ2U9bmV3IFVpbnQzMkFycmF5KDIqdCksdGhpcy5zdG9yYWdlSW5kZXg9MX1yZXR1cm4gZS5wcm90b3R5cGUuYWRkVmFsdWVUb0J1Y2tldD1mdW5jdGlvbihlLG4pe2U8PD0xLHRoaXMuc3RvcmFnZUluZGV4Pj10aGlzLnN0b3JhZ2UubGVuZ3RoPj4+MSYmdGhpcy5jb21wYWN0KCk7dmFyIHIsbz10aGlzLmJ1Y2tldExvY2F0b3JzW2VdO2lmKDA9PT1vKW89dGhpcy5zdG9yYWdlSW5kZXgscj0xLHRoaXMuc3RvcmFnZVt0aGlzLnN0b3JhZ2VJbmRleF09bix0aGlzLnN0b3JhZ2VJbmRleCs9dGhpcy5taW5pbXVtQnVja2V0Q2FwYWNpdHk7ZWxzZXsocj10aGlzLmJ1Y2tldExvY2F0b3JzW2UrMV0pPT09dGhpcy5tYXhpbXVtQnVja2V0Q2FwYWNpdHktMSYmKHI9dGhpcy50cnVuY2F0ZUJ1Y2tldFRvTmV3ZXJFbGVtZW50cyhvLHIsdGhpcy5tYXhpbXVtQnVja2V0Q2FwYWNpdHkvMikpO3ZhciBpPW8rcjswPT09dGhpcy5zdG9yYWdlW2ldPyh0aGlzLnN0b3JhZ2VbaV09bixpPT09dGhpcy5zdG9yYWdlSW5kZXgmJih0aGlzLnN0b3JhZ2VJbmRleCs9cikpOih0LkFycmF5VG9vbHMuY29weUVsZW1lbnRzKHRoaXMuc3RvcmFnZSxvLHRoaXMuc3RvcmFnZSx0aGlzLnN0b3JhZ2VJbmRleCxyKSxvPXRoaXMuc3RvcmFnZUluZGV4LHRoaXMuc3RvcmFnZUluZGV4Kz1yLHRoaXMuc3RvcmFnZVt0aGlzLnN0b3JhZ2VJbmRleCsrXT1uLHRoaXMuc3RvcmFnZUluZGV4Kz1yKSxyKyt9dGhpcy5idWNrZXRMb2NhdG9yc1tlXT1vLHRoaXMuYnVja2V0TG9jYXRvcnNbZSsxXT1yfSxlLnByb3RvdHlwZS50cnVuY2F0ZUJ1Y2tldFRvTmV3ZXJFbGVtZW50cz1mdW5jdGlvbihlLG4scil7dmFyIG89ZStuLXI7cmV0dXJuIHQuQXJyYXlUb29scy5jb3B5RWxlbWVudHModGhpcy5zdG9yYWdlLG8sdGhpcy5zdG9yYWdlLGUsciksdC5BcnJheVRvb2xzLnplcm9FbGVtZW50cyh0aGlzLnN0b3JhZ2UsZStyLG4tcikscn0sZS5wcm90b3R5cGUuY29tcGFjdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYnVja2V0TG9jYXRvcnMsbj10aGlzLnN0b3JhZ2U7dGhpcy5idWNrZXRMb2NhdG9ycz1uZXcgVWludDMyQXJyYXkodGhpcy5idWNrZXRMb2NhdG9ycy5sZW5ndGgpLHRoaXMuc3RvcmFnZUluZGV4PTE7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKz0yKXt2YXIgbz1lW3IrMV07MCE9PW8mJih0aGlzLmJ1Y2tldExvY2F0b3JzW3JdPXRoaXMuc3RvcmFnZUluZGV4LHRoaXMuYnVja2V0TG9jYXRvcnNbcisxXT1vLHRoaXMuc3RvcmFnZUluZGV4Kz1NYXRoLm1heChNYXRoLm1pbigyKm8sdGhpcy5tYXhpbXVtQnVja2V0Q2FwYWNpdHkpLHRoaXMubWluaW11bUJ1Y2tldENhcGFjaXR5KSl9dGhpcy5zdG9yYWdlPW5ldyBVaW50MzJBcnJheSg4KnRoaXMuc3RvcmFnZUluZGV4KTtmb3Iocj0wO3I8ZS5sZW5ndGg7cis9Mil7dmFyIGk9ZVtyXTtpZigwIT09aSl7dmFyIGE9dGhpcy5idWNrZXRMb2NhdG9yc1tyXSxzPXRoaXMuYnVja2V0TG9jYXRvcnNbcisxXTt0LkFycmF5VG9vbHMuY29weUVsZW1lbnRzKG4saSx0aGlzLnN0b3JhZ2UsYSxzKX19fSxlLnByb3RvdHlwZS5nZXRBcnJheVNlZ21lbnRGb3JCdWNrZXRJbmRleD1mdW5jdGlvbihlLG4pe2U8PD0xO3ZhciByPXRoaXMuYnVja2V0TG9jYXRvcnNbZV07cmV0dXJuIDA9PT1yP251bGw6KHZvaWQgMD09PW4mJihuPW5ldyB0LkFycmF5U2VnbWVudCh0aGlzLnN0b3JhZ2Uscix0aGlzLmJ1Y2tldExvY2F0b3JzW2UrMV0pKSxuKX0sZS5wcm90b3R5cGUuZ2V0VXNlZEJ1Y2tldENvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguZmxvb3IodC5BcnJheVRvb2xzLmNvdW50Tm9uemVyb1ZhbHVlc0luQXJyYXkodGhpcy5idWNrZXRMb2NhdG9ycykvMil9LGUucHJvdG90eXBlLmdldFRvdGFsRWxlbWVudENvdW50PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wO2U8dGhpcy5idWNrZXRMb2NhdG9ycy5sZW5ndGg7ZSs9Mil0Kz10aGlzLmJ1Y2tldExvY2F0b3JzW2UrMV07cmV0dXJuIHR9LGV9KCk7dC5Db21wcmVzc29yQ3VzdG9tSGFzaFRhYmxlPWV9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3RoaXMubWF4aW11bUJ1Y2tldENhcGFjaXR5PTY0LHRoaXMuYnVja2V0cz1uZXcgQXJyYXkodCl9cmV0dXJuIGUucHJvdG90eXBlLmFkZFZhbHVlVG9CdWNrZXQ9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzLmJ1Y2tldHNbZV07dm9pZCAwPT09cj90aGlzLmJ1Y2tldHNbZV09W25dOihyLmxlbmd0aD09PXRoaXMubWF4aW11bUJ1Y2tldENhcGFjaXR5LTEmJnQuQXJyYXlUb29scy50cnVuY2F0ZVN0YXJ0aW5nRWxlbWVudHMocix0aGlzLm1heGltdW1CdWNrZXRDYXBhY2l0eS8yKSxyLnB1c2gobikpfSxlLnByb3RvdHlwZS5nZXRBcnJheVNlZ21lbnRGb3JCdWNrZXRJbmRleD1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXMuYnVja2V0c1tlXTtyZXR1cm4gdm9pZCAwPT09cj9udWxsOih2b2lkIDA9PT1uJiYobj1uZXcgdC5BcnJheVNlZ21lbnQociwwLHIubGVuZ3RoKSksbil9LGUucHJvdG90eXBlLmdldFVzZWRCdWNrZXRDb3VudD1mdW5jdGlvbigpe3JldHVybiB0LkFycmF5VG9vbHMuY291bnROb256ZXJvVmFsdWVzSW5BcnJheSh0aGlzLmJ1Y2tldHMpfSxlLnByb3RvdHlwZS5nZXRUb3RhbEVsZW1lbnRDb3VudD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPHRoaXMuYnVja2V0cy5sZW5ndGg7ZSsrKXZvaWQgMCE9PXRoaXMuYnVja2V0c1tlXSYmKHQrPXRoaXMuYnVja2V0c1tlXS5sZW5ndGgpO3JldHVybiB0fSxlfSgpO3QuQ29tcHJlc3NvclNpbXBsZUhhc2hUYWJsZT1lfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuTWF4aW11bU1hdGNoRGlzdGFuY2U9MzI3NjcsdGhpcy5vdXRwdXRQb3NpdGlvbj0wfXJldHVybiBlLnByb3RvdHlwZS5kZWNvbXByZXNzQmxvY2tUb1N0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gZT10LkJ1ZmZlclRvb2xzLmNvbnZlcnRUb1VpbnQ4QXJyYXlJZk5lZWRlZChlKSx0LmRlY29kZVVURjgodGhpcy5kZWNvbXByZXNzQmxvY2soZSkpfSxlLnByb3RvdHlwZS5kZWNvbXByZXNzQmxvY2s9ZnVuY3Rpb24oZSl7dGhpcy5pbnB1dEJ1ZmZlclJlbWFpbmRlciYmKGU9dC5BcnJheVRvb2xzLmNvbmNhdFVpbnQ4QXJyYXlzKFt0aGlzLmlucHV0QnVmZmVyUmVtYWluZGVyLGVdKSx0aGlzLmlucHV0QnVmZmVyUmVtYWluZGVyPXZvaWQgMCk7Zm9yKHZhciBuPXRoaXMuY3JvcE91dHB1dEJ1ZmZlclRvV2luZG93QW5kSW5pdGlhbGl6ZShNYXRoLm1heCg0KmUubGVuZ3RoLDEwMjQpKSxyPTAsbz1lLmxlbmd0aDtyPG87cisrKXt2YXIgaT1lW3JdO2lmKGk+Pj42PT0zKXt2YXIgYT1pPj4+NTtpZihyPT1vLTF8fHI9PW8tMiYmNz09YSl7dGhpcy5pbnB1dEJ1ZmZlclJlbWFpbmRlcj1lLnN1YmFycmF5KHIpO2JyZWFrfWlmKGVbcisxXT4+Pjc9PTEpdGhpcy5vdXRwdXRCeXRlKGkpO2Vsc2V7dmFyIHM9MzEmaSx1PXZvaWQgMDs2PT1hPyh1PWVbcisxXSxyKz0xKToodT1lW3IrMV08PDh8ZVtyKzJdLHIrPTIpO2Zvcih2YXIgbD10aGlzLm91dHB1dFBvc2l0aW9uLXUsYz0wO2M8cztjKyspdGhpcy5vdXRwdXRCeXRlKHRoaXMub3V0cHV0QnVmZmVyW2wrY10pfX1lbHNlIHRoaXMub3V0cHV0Qnl0ZShpKX1yZXR1cm4gdGhpcy5yb2xsQmFja0lmT3V0cHV0QnVmZmVyRW5kc1dpdGhBVHJ1bmNhdGVkTXVsdGlieXRlU2VxdWVuY2UoKSx0LkNvbXByZXNzaW9uQ29tbW9uLmdldENyb3BwZWRCdWZmZXIodGhpcy5vdXRwdXRCdWZmZXIsbix0aGlzLm91dHB1dFBvc2l0aW9uLW4pfSxlLnByb3RvdHlwZS5vdXRwdXRCeXRlPWZ1bmN0aW9uKGUpe3RoaXMub3V0cHV0UG9zaXRpb249PT10aGlzLm91dHB1dEJ1ZmZlci5sZW5ndGgmJih0aGlzLm91dHB1dEJ1ZmZlcj10LkFycmF5VG9vbHMuZG91YmxlQnl0ZUFycmF5Q2FwYWNpdHkodGhpcy5vdXRwdXRCdWZmZXIpKSx0aGlzLm91dHB1dEJ1ZmZlclt0aGlzLm91dHB1dFBvc2l0aW9uKytdPWV9LGUucHJvdG90eXBlLmNyb3BPdXRwdXRCdWZmZXJUb1dpbmRvd0FuZEluaXRpYWxpemU9ZnVuY3Rpb24oZSl7aWYoIXRoaXMub3V0cHV0QnVmZmVyKXJldHVybiB0aGlzLm91dHB1dEJ1ZmZlcj1uZXcgVWludDhBcnJheShlKSwwO3ZhciBuPU1hdGgubWluKHRoaXMub3V0cHV0UG9zaXRpb24sdGhpcy5NYXhpbXVtTWF0Y2hEaXN0YW5jZSk7aWYodGhpcy5vdXRwdXRCdWZmZXI9dC5Db21wcmVzc2lvbkNvbW1vbi5nZXRDcm9wcGVkQnVmZmVyKHRoaXMub3V0cHV0QnVmZmVyLHRoaXMub3V0cHV0UG9zaXRpb24tbixuLGUpLHRoaXMub3V0cHV0UG9zaXRpb249bix0aGlzLm91dHB1dEJ1ZmZlclJlbWFpbmRlcil7Zm9yKHZhciByPTA7cjx0aGlzLm91dHB1dEJ1ZmZlclJlbWFpbmRlci5sZW5ndGg7cisrKXRoaXMub3V0cHV0Qnl0ZSh0aGlzLm91dHB1dEJ1ZmZlclJlbWFpbmRlcltyXSk7dGhpcy5vdXRwdXRCdWZmZXJSZW1haW5kZXI9dm9pZCAwfXJldHVybiBufSxlLnByb3RvdHlwZS5yb2xsQmFja0lmT3V0cHV0QnVmZmVyRW5kc1dpdGhBVHJ1bmNhdGVkTXVsdGlieXRlU2VxdWVuY2U9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MTt0PD00JiZ0aGlzLm91dHB1dFBvc2l0aW9uLXQ+PTA7dCsrKXt2YXIgZT10aGlzLm91dHB1dEJ1ZmZlclt0aGlzLm91dHB1dFBvc2l0aW9uLXRdO2lmKHQ8NCYmZT4+PjM9PTMwfHx0PDMmJmU+Pj40PT0xNHx8dDwyJiZlPj4+NT09NilyZXR1cm4gdGhpcy5vdXRwdXRCdWZmZXJSZW1haW5kZXI9dGhpcy5vdXRwdXRCdWZmZXIuc3ViYXJyYXkodGhpcy5vdXRwdXRQb3NpdGlvbi10LHRoaXMub3V0cHV0UG9zaXRpb24pLHZvaWQodGhpcy5vdXRwdXRQb3NpdGlvbi09dCl9fSxlfSgpO3QuRGVjb21wcmVzc29yPWV9KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgbj1uZXcgVWludDhBcnJheShbNjUsNjYsNjcsNjgsNjksNzAsNzEsNzIsNzMsNzQsNzUsNzYsNzcsNzgsNzksODAsODEsODIsODMsODQsODUsODYsODcsODgsODksOTAsOTcsOTgsOTksMTAwLDEwMSwxMDIsMTAzLDEwNCwxMDUsMTA2LDEwNywxMDgsMTA5LDExMCwxMTEsMTEyLDExMywxMTQsMTE1LDExNiwxMTcsMTE4LDExOSwxMjAsMTIxLDEyMiw0OCw0OSw1MCw1MSw1Miw1Myw1NCw1NSw1Niw1Nyw0Myw0N10pLHI9bmV3IFVpbnQ4QXJyYXkoWzI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSw2MiwyNTUsMjU1LDI1NSw2Myw1Miw1Myw1NCw1NSw1Niw1Nyw1OCw1OSw2MCw2MSwyNTUsMjU1LDI1NSwwLDI1NSwyNTUsMjU1LDAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTEsMjU1LDI1NSwyNTUsMjU1XSk7ZS5lbmNvZGU9ZnVuY3Rpb24obil7cmV0dXJuIG4mJjAhPW4ubGVuZ3RoP3QucnVubmluZ0luTm9kZUpTKCk/dC5CdWZmZXJUb29scy51aW50OEFycmF5VG9CdWZmZXIobikudG9TdHJpbmcoXCJiYXNlNjRcIik6ZS5lbmNvZGVXaXRoSlMobik6XCJcIn0sZS5kZWNvZGU9ZnVuY3Rpb24obil7cmV0dXJuIG4/dC5ydW5uaW5nSW5Ob2RlSlMoKT90LkJ1ZmZlclRvb2xzLmJ1ZmZlclRvVWludDhBcnJheShCdWZmZXIuZnJvbShuLFwiYmFzZTY0XCIpKTplLmRlY29kZVdpdGhKUyhuKTpuZXcgVWludDhBcnJheSgwKX0sZS5lbmNvZGVXaXRoSlM9ZnVuY3Rpb24oZSxyKXtpZih2b2lkIDA9PT1yJiYocj0hMCksIWV8fDA9PWUubGVuZ3RoKXJldHVyblwiXCI7Zm9yKHZhciBvLGk9bixhPW5ldyB0LlN0cmluZ0J1aWxkZXIscz0wLHU9ZS5sZW5ndGg7czx1O3MrPTMpczw9dS0zPyhvPWVbc108PDE2fGVbcysxXTw8OHxlW3MrMl0sYS5hcHBlbmRDaGFyQ29kZShpW28+Pj4xOCY2M10pLGEuYXBwZW5kQ2hhckNvZGUoaVtvPj4+MTImNjNdKSxhLmFwcGVuZENoYXJDb2RlKGlbbz4+PjYmNjNdKSxhLmFwcGVuZENoYXJDb2RlKGlbNjMmb10pLG89MCk6cz09PXUtMj8obz1lW3NdPDwxNnxlW3MrMV08PDgsYS5hcHBlbmRDaGFyQ29kZShpW28+Pj4xOCY2M10pLGEuYXBwZW5kQ2hhckNvZGUoaVtvPj4+MTImNjNdKSxhLmFwcGVuZENoYXJDb2RlKGlbbz4+PjYmNjNdKSxyJiZhLmFwcGVuZENoYXJDb2RlKDYxKSk6cz09PXUtMSYmKG89ZVtzXTw8MTYsYS5hcHBlbmRDaGFyQ29kZShpW28+Pj4xOCY2M10pLGEuYXBwZW5kQ2hhckNvZGUoaVtvPj4+MTImNjNdKSxyJiYoYS5hcHBlbmRDaGFyQ29kZSg2MSksYS5hcHBlbmRDaGFyQ29kZSg2MSkpKTtyZXR1cm4gYS5nZXRPdXRwdXRTdHJpbmcoKX0sZS5kZWNvZGVXaXRoSlM9ZnVuY3Rpb24odCxlKXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO3ZhciBuPXQubGVuZ3RoJTQ7aWYoMT09PW4pdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBCYXNlNjQgc3RyaW5nOiBsZW5ndGggJSA0ID09IDFcIik7Mj09PW4/dCs9XCI9PVwiOjM9PT1uJiYodCs9XCI9XCIpLGV8fChlPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoKSk7Zm9yKHZhciBvPTAsaT10Lmxlbmd0aCxhPTA7YTxpO2ErPTQpe3ZhciBzPXJbdC5jaGFyQ29kZUF0KGEpXTw8MTh8clt0LmNoYXJDb2RlQXQoYSsxKV08PDEyfHJbdC5jaGFyQ29kZUF0KGErMildPDw2fHJbdC5jaGFyQ29kZUF0KGErMyldO2VbbysrXT1zPj4+MTYmMjU1LGVbbysrXT1zPj4+OCYyNTUsZVtvKytdPTI1NSZzfXJldHVybiA2MT09dC5jaGFyQ29kZUF0KGktMSkmJm8tLSw2MT09dC5jaGFyQ29kZUF0KGktMikmJm8tLSxlLnN1YmFycmF5KDAsbyl9fShlLkJhc2U2NHx8KGUuQmFzZTY0PXt9KSl9KHQuRW5jb2Rpbmd8fCh0LkVuY29kaW5nPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXtlLmVuY29kZT1mdW5jdGlvbihlKXtpZihudWxsPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJCaW5hcnlTdHJpbmcuZW5jb2RlOiB1bmRlZmluZWQgb3IgbnVsbCBpbnB1dCByZWNlaXZlZFwiKTtpZigwPT09ZS5sZW5ndGgpcmV0dXJuXCJcIjtmb3IodmFyIG49ZS5sZW5ndGgscj1uZXcgdC5TdHJpbmdCdWlsZGVyLG89MCxpPTEsYT0wO2E8bjthKz0yKXt2YXIgcz12b2lkIDA7cz1hPT1uLTE/ZVthXTw8ODplW2FdPDw4fGVbYSsxXSxyLmFwcGVuZENoYXJDb2RlKG88PDE2LWl8cz4+PmkpLG89cyYoMTw8aSktMSwxNT09PWk/KHIuYXBwZW5kQ2hhckNvZGUobyksbz0wLGk9MSk6aSs9MSxhPj1uLTImJnIuYXBwZW5kQ2hhckNvZGUobzw8MTYtaSl9cmV0dXJuIHIuYXBwZW5kQ2hhckNvZGUoMzI3Njh8biUyKSxyLmdldE91dHB1dFN0cmluZygpfSxlLmRlY29kZT1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQmluYXJ5U3RyaW5nLmRlY29kZTogaW52YWxpZCBpbnB1dCB0eXBlXCIpO2lmKFwiXCI9PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO2Zvcih2YXIgZT1uZXcgVWludDhBcnJheSgzKnQubGVuZ3RoKSxuPTAscj1mdW5jdGlvbih0KXtlW24rK109dD4+PjgsZVtuKytdPTI1NSZ0fSxvPTAsaT0wLGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIHM9dC5jaGFyQ29kZUF0KGEpO3M+PTMyNzY4PygzMjc2OT09cyYmbi0tLGk9MCk6KDA9PWk/bz1zOihyKG88PGl8cz4+PjE1LWkpLG89cyYoMTw8MTUtaSktMSksMTU9PWk/aT0wOmkrPTEpfXJldHVybiBlLnN1YmFycmF5KDAsbil9fShlLkJpbmFyeVN0cmluZ3x8KGUuQmluYXJ5U3RyaW5nPXt9KSl9KHQuRW5jb2Rpbmd8fCh0LkVuY29kaW5nPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt0LmVuY29kZUZyb21TdHJpbmc9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmNoYXJDb2RlQXQoZSk7aWYobjw1NTI5Nnx8bj41NjMxOSlyZXR1cm4gbjt2YXIgcj10LmNoYXJDb2RlQXQoZSsxKTtpZihyPj01NjMyMCYmcjw9NTczNDMpcmV0dXJuIHItNTYzMjArKG4tNTUyOTY8PDEwKSs2NTUzNjt0aHJvdyBuZXcgRXJyb3IoXCJnZXRVbmljb2RlQ29kZVBvaW50OiBSZWNlaXZlZCBhIGxlYWQgc3Vycm9nYXRlIGNoYXJhY3RlciwgY2hhciBjb2RlIFwiLmNvbmNhdChuLFwiLCBmb2xsb3dlZCBieSBcIikuY29uY2F0KHIsXCIsIHdoaWNoIGlzIG5vdCBhIHRyYWlsaW5nIHN1cnJvZ2F0ZSBjaGFyYWN0ZXIgY29kZS5cIikpfSx0LmRlY29kZVRvU3RyaW5nPWZ1bmN0aW9uKHQpe2lmKHQ8PTY1NTM1KXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHQpO2lmKHQ8PTExMTQxMTEpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYrKHQtNjU1MzY+Pj4xMCksNTYzMjArKHQtNjU1MzYmMTAyMykpO3Rocm93IG5ldyBFcnJvcihcImdldFN0cmluZ0Zyb21Vbmljb2RlQ29kZVBvaW50OiBBIGNvZGUgcG9pbnQgb2YgXCIuY29uY2F0KHQsXCIgY2Fubm90IGJlIGVuY29kZWQgaW4gVVRGLTE2XCIpKX19KHQuQ29kZVBvaW50fHwodC5Db2RlUG9pbnQ9e30pKX0odC5FbmNvZGluZ3x8KHQuRW5jb2Rpbmc9e30pKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPVtcIjAwMFwiLFwiMDAxXCIsXCIwMDJcIixcIjAwM1wiLFwiMDA0XCIsXCIwMDVcIixcIjAwNlwiLFwiMDA3XCIsXCIwMDhcIixcIjAwOVwiLFwiMDEwXCIsXCIwMTFcIixcIjAxMlwiLFwiMDEzXCIsXCIwMTRcIixcIjAxNVwiLFwiMDE2XCIsXCIwMTdcIixcIjAxOFwiLFwiMDE5XCIsXCIwMjBcIixcIjAyMVwiLFwiMDIyXCIsXCIwMjNcIixcIjAyNFwiLFwiMDI1XCIsXCIwMjZcIixcIjAyN1wiLFwiMDI4XCIsXCIwMjlcIixcIjAzMFwiLFwiMDMxXCIsXCIwMzJcIixcIjAzM1wiLFwiMDM0XCIsXCIwMzVcIixcIjAzNlwiLFwiMDM3XCIsXCIwMzhcIixcIjAzOVwiLFwiMDQwXCIsXCIwNDFcIixcIjA0MlwiLFwiMDQzXCIsXCIwNDRcIixcIjA0NVwiLFwiMDQ2XCIsXCIwNDdcIixcIjA0OFwiLFwiMDQ5XCIsXCIwNTBcIixcIjA1MVwiLFwiMDUyXCIsXCIwNTNcIixcIjA1NFwiLFwiMDU1XCIsXCIwNTZcIixcIjA1N1wiLFwiMDU4XCIsXCIwNTlcIixcIjA2MFwiLFwiMDYxXCIsXCIwNjJcIixcIjA2M1wiLFwiMDY0XCIsXCIwNjVcIixcIjA2NlwiLFwiMDY3XCIsXCIwNjhcIixcIjA2OVwiLFwiMDcwXCIsXCIwNzFcIixcIjA3MlwiLFwiMDczXCIsXCIwNzRcIixcIjA3NVwiLFwiMDc2XCIsXCIwNzdcIixcIjA3OFwiLFwiMDc5XCIsXCIwODBcIixcIjA4MVwiLFwiMDgyXCIsXCIwODNcIixcIjA4NFwiLFwiMDg1XCIsXCIwODZcIixcIjA4N1wiLFwiMDg4XCIsXCIwODlcIixcIjA5MFwiLFwiMDkxXCIsXCIwOTJcIixcIjA5M1wiLFwiMDk0XCIsXCIwOTVcIixcIjA5NlwiLFwiMDk3XCIsXCIwOThcIixcIjA5OVwiLFwiMTAwXCIsXCIxMDFcIixcIjEwMlwiLFwiMTAzXCIsXCIxMDRcIixcIjEwNVwiLFwiMTA2XCIsXCIxMDdcIixcIjEwOFwiLFwiMTA5XCIsXCIxMTBcIixcIjExMVwiLFwiMTEyXCIsXCIxMTNcIixcIjExNFwiLFwiMTE1XCIsXCIxMTZcIixcIjExN1wiLFwiMTE4XCIsXCIxMTlcIixcIjEyMFwiLFwiMTIxXCIsXCIxMjJcIixcIjEyM1wiLFwiMTI0XCIsXCIxMjVcIixcIjEyNlwiLFwiMTI3XCIsXCIxMjhcIixcIjEyOVwiLFwiMTMwXCIsXCIxMzFcIixcIjEzMlwiLFwiMTMzXCIsXCIxMzRcIixcIjEzNVwiLFwiMTM2XCIsXCIxMzdcIixcIjEzOFwiLFwiMTM5XCIsXCIxNDBcIixcIjE0MVwiLFwiMTQyXCIsXCIxNDNcIixcIjE0NFwiLFwiMTQ1XCIsXCIxNDZcIixcIjE0N1wiLFwiMTQ4XCIsXCIxNDlcIixcIjE1MFwiLFwiMTUxXCIsXCIxNTJcIixcIjE1M1wiLFwiMTU0XCIsXCIxNTVcIixcIjE1NlwiLFwiMTU3XCIsXCIxNThcIixcIjE1OVwiLFwiMTYwXCIsXCIxNjFcIixcIjE2MlwiLFwiMTYzXCIsXCIxNjRcIixcIjE2NVwiLFwiMTY2XCIsXCIxNjdcIixcIjE2OFwiLFwiMTY5XCIsXCIxNzBcIixcIjE3MVwiLFwiMTcyXCIsXCIxNzNcIixcIjE3NFwiLFwiMTc1XCIsXCIxNzZcIixcIjE3N1wiLFwiMTc4XCIsXCIxNzlcIixcIjE4MFwiLFwiMTgxXCIsXCIxODJcIixcIjE4M1wiLFwiMTg0XCIsXCIxODVcIixcIjE4NlwiLFwiMTg3XCIsXCIxODhcIixcIjE4OVwiLFwiMTkwXCIsXCIxOTFcIixcIjE5MlwiLFwiMTkzXCIsXCIxOTRcIixcIjE5NVwiLFwiMTk2XCIsXCIxOTdcIixcIjE5OFwiLFwiMTk5XCIsXCIyMDBcIixcIjIwMVwiLFwiMjAyXCIsXCIyMDNcIixcIjIwNFwiLFwiMjA1XCIsXCIyMDZcIixcIjIwN1wiLFwiMjA4XCIsXCIyMDlcIixcIjIxMFwiLFwiMjExXCIsXCIyMTJcIixcIjIxM1wiLFwiMjE0XCIsXCIyMTVcIixcIjIxNlwiLFwiMjE3XCIsXCIyMThcIixcIjIxOVwiLFwiMjIwXCIsXCIyMjFcIixcIjIyMlwiLFwiMjIzXCIsXCIyMjRcIixcIjIyNVwiLFwiMjI2XCIsXCIyMjdcIixcIjIyOFwiLFwiMjI5XCIsXCIyMzBcIixcIjIzMVwiLFwiMjMyXCIsXCIyMzNcIixcIjIzNFwiLFwiMjM1XCIsXCIyMzZcIixcIjIzN1wiLFwiMjM4XCIsXCIyMzlcIixcIjI0MFwiLFwiMjQxXCIsXCIyNDJcIixcIjI0M1wiLFwiMjQ0XCIsXCIyNDVcIixcIjI0NlwiLFwiMjQ3XCIsXCIyNDhcIixcIjI0OVwiLFwiMjUwXCIsXCIyNTFcIixcIjI1MlwiLFwiMjUzXCIsXCIyNTRcIixcIjI1NVwiXTt0LmVuY29kZT1mdW5jdGlvbih0KXtmb3IodmFyIG49W10scj0wO3I8dC5sZW5ndGg7cisrKW4ucHVzaChlW3Rbcl1dKTtyZXR1cm4gbi5qb2luKFwiIFwiKX19KHQuRGVjaW1hbFN0cmluZ3x8KHQuRGVjaW1hbFN0cmluZz17fSkpfSh0LkVuY29kaW5nfHwodC5FbmNvZGluZz17fSkpfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7ZS5lbmNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuQmluYXJ5U3RyaW5nLmVuY29kZShlKS5yZXBsYWNlKC9cXDAvZyxcIuiAglwiKX0sZS5kZWNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuQmluYXJ5U3RyaW5nLmRlY29kZShlLnJlcGxhY2UoL1xcdTgwMDIvZyxcIlxcMFwiKSl9fSh0LlN0b3JhZ2VCaW5hcnlTdHJpbmd8fCh0LlN0b3JhZ2VCaW5hcnlTdHJpbmc9e30pKX0odC5FbmNvZGluZ3x8KHQuRW5jb2Rpbmc9e30pKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKG4pe3ZhciByLG87bi5lbmNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJjAhPWUubGVuZ3RoP3QucnVubmluZ0luTm9kZUpTKCk/dC5CdWZmZXJUb29scy5idWZmZXJUb1VpbnQ4QXJyYXkoQnVmZmVyLmZyb20oZSxcInV0ZjhcIikpOm4uY3JlYXRlTmF0aXZlVGV4dEVuY29kZXJBbmREZWNvZGVySWZBdmFpbGFibGUoKT9yLmVuY29kZShlKTpuLmVuY29kZVdpdGhKUyhlKTpuZXcgVWludDhBcnJheSgwKX0sbi5kZWNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJjAhPWUubGVuZ3RoP3QucnVubmluZ0luTm9kZUpTKCk/dC5CdWZmZXJUb29scy51aW50OEFycmF5VG9CdWZmZXIoZSkudG9TdHJpbmcoXCJ1dGY4XCIpOm4uY3JlYXRlTmF0aXZlVGV4dEVuY29kZXJBbmREZWNvZGVySWZBdmFpbGFibGUoKT9vLmRlY29kZShlKTpuLmRlY29kZVdpdGhKUyhlKTpcIlwifSxuLmVuY29kZVdpdGhKUz1mdW5jdGlvbih0LG4pe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7bnx8KG49bmV3IFVpbnQ4QXJyYXkoNCp0Lmxlbmd0aCkpO2Zvcih2YXIgcj0wLG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIGk9ZS5Db2RlUG9pbnQuZW5jb2RlRnJvbVN0cmluZyh0LG8pO2lmKGk8PTEyNyluW3IrK109aTtlbHNlIGlmKGk8PTIwNDcpbltyKytdPTE5MnxpPj4+NixuW3IrK109MTI4fDYzJmk7ZWxzZSBpZihpPD02NTUzNSluW3IrK109MjI0fGk+Pj4xMixuW3IrK109MTI4fGk+Pj42JjYzLG5bcisrXT0xMjh8NjMmaTtlbHNle2lmKCEoaTw9MTExNDExMSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBVVEYtMTYgc3RyaW5nOiBFbmNvdW50ZXJlZCBhIGNoYXJhY3RlciB1bnN1cHBvcnRlZCBieSBVVEYtOC8xNiAoUkZDIDM2MjkpXCIpO25bcisrXT0yNDB8aT4+PjE4LG5bcisrXT0xMjh8aT4+PjEyJjYzLG5bcisrXT0xMjh8aT4+PjYmNjMsbltyKytdPTEyOHw2MyZpLG8rK319cmV0dXJuIG4uc3ViYXJyYXkoMCxyKX0sbi5kZWNvZGVXaXRoSlM9ZnVuY3Rpb24oZSxuLHIpe2lmKHZvaWQgMD09PW4mJihuPTApLCFlfHwwPT1lLmxlbmd0aClyZXR1cm5cIlwiO3ZvaWQgMD09PXImJihyPWUubGVuZ3RoKTtmb3IodmFyIG8saSxhPW5ldyB0LlN0cmluZ0J1aWxkZXIscz1uLHU9cjtzPHU7KXtpZigoaT1lW3NdKT4+Pjc9PTApbz1pLHMrPTE7ZWxzZSBpZihpPj4+NT09Nil7aWYocysxPj1yKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgVVRGLTggc3RyZWFtOiBUcnVuY2F0ZWQgY29kZXBvaW50IHNlcXVlbmNlIGVuY291bnRlcmVkIGF0IHBvc2l0aW9uIFwiK3MpO289KDMxJmkpPDw2fDYzJmVbcysxXSxzKz0yfWVsc2UgaWYoaT4+PjQ9PTE0KXtpZihzKzI+PXIpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBVVEYtOCBzdHJlYW06IFRydW5jYXRlZCBjb2RlcG9pbnQgc2VxdWVuY2UgZW5jb3VudGVyZWQgYXQgcG9zaXRpb24gXCIrcyk7bz0oMTUmaSk8PDEyfCg2MyZlW3MrMV0pPDw2fDYzJmVbcysyXSxzKz0zfWVsc2V7aWYoaT4+PjMhPTMwKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgVVRGLTggc3RyZWFtOiBBbiBpbnZhbGlkIGxlYWQgYnl0ZSB2YWx1ZSBlbmNvdW50ZXJlZCBhdCBwb3NpdGlvbiBcIitzKTtpZihzKzM+PXIpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBVVEYtOCBzdHJlYW06IFRydW5jYXRlZCBjb2RlcG9pbnQgc2VxdWVuY2UgZW5jb3VudGVyZWQgYXQgcG9zaXRpb24gXCIrcyk7bz0oNyZpKTw8MTh8KDYzJmVbcysxXSk8PDEyfCg2MyZlW3MrMl0pPDw2fDYzJmVbcyszXSxzKz00fWEuYXBwZW5kQ29kZVBvaW50KG8pfXJldHVybiBhLmdldE91dHB1dFN0cmluZygpfSxuLmNyZWF0ZU5hdGl2ZVRleHRFbmNvZGVyQW5kRGVjb2RlcklmQXZhaWxhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuISFyfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBUZXh0RW5jb2RlciYmKHI9bmV3IFRleHRFbmNvZGVyKFwidXRmLThcIiksbz1uZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKSwhMCl9fShlLlVURjh8fChlLlVURjg9e30pKX0odC5FbmNvZGluZ3x8KHQuRW5jb2Rpbmc9e30pKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXt0LmNvbXByZXNzPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwPT09biYmKG49e30pLG51bGw9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcImNvbXByZXNzOiB1bmRlZmluZWQgb3IgbnVsbCBpbnB1dCByZWNlaXZlZFwiKTt2YXIgcj10LkNvbXByZXNzaW9uQ29tbW9uLmRldGVjdENvbXByZXNzaW9uU291cmNlRW5jb2RpbmcoZSk7bj10Lk9iamVjdFRvb2xzLm92ZXJyaWRlKHtpbnB1dEVuY29kaW5nOnIsb3V0cHV0RW5jb2Rpbmc6XCJCeXRlQXJyYXlcIn0sbik7dmFyIG89KG5ldyB0LkNvbXByZXNzb3IpLmNvbXByZXNzQmxvY2soZSk7cmV0dXJuIHQuQ29tcHJlc3Npb25Db21tb24uZW5jb2RlQ29tcHJlc3NlZEJ5dGVzKG8sbi5vdXRwdXRFbmNvZGluZyl9LHQuZGVjb21wcmVzcz1mdW5jdGlvbihlLG4pe2lmKHZvaWQgMD09PW4mJihuPXt9KSxudWxsPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWNvbXByZXNzOiB1bmRlZmluZWQgb3IgbnVsbCBpbnB1dCByZWNlaXZlZFwiKTtuPXQuT2JqZWN0VG9vbHMub3ZlcnJpZGUoe2lucHV0RW5jb2Rpbmc6XCJCeXRlQXJyYXlcIixvdXRwdXRFbmNvZGluZzpcIlN0cmluZ1wifSxuKTt2YXIgcj10LkNvbXByZXNzaW9uQ29tbW9uLmRlY29kZUNvbXByZXNzZWRCeXRlcyhlLG4uaW5wdXRFbmNvZGluZyksbz0obmV3IHQuRGVjb21wcmVzc29yKS5kZWNvbXByZXNzQmxvY2socik7cmV0dXJuIHQuQ29tcHJlc3Npb25Db21tb24uZW5jb2RlRGVjb21wcmVzc2VkQnl0ZXMobyxuLm91dHB1dEVuY29kaW5nKX0sdC5jb21wcmVzc0FzeW5jPWZ1bmN0aW9uKGUsbixyKXt2YXIgbztudWxsPT1yJiYocj1mdW5jdGlvbigpe30pO3RyeXtvPXQuQ29tcHJlc3Npb25Db21tb24uZGV0ZWN0Q29tcHJlc3Npb25Tb3VyY2VFbmNvZGluZyhlKX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByKHZvaWQgMCx0KX1uPXQuT2JqZWN0VG9vbHMub3ZlcnJpZGUoe2lucHV0RW5jb2Rpbmc6byxvdXRwdXRFbmNvZGluZzpcIkJ5dGVBcnJheVwiLHVzZVdlYldvcmtlcjohMCxibG9ja1NpemU6NjU1MzZ9LG4pLHQuZW5xdWV1ZUltbWVkaWF0ZSgoZnVuY3Rpb24oKXtuLnVzZVdlYldvcmtlciYmdC5XZWJXb3JrZXIuY3JlYXRlR2xvYmFsV29ya2VySWZOZWVkZWQoKT90LldlYldvcmtlci5jb21wcmVzc0FzeW5jKGUsbixyKTp0LkFzeW5jQ29tcHJlc3Nvci5jb21wcmVzc0FzeW5jKGUsbixyKX0pKX0sdC5kZWNvbXByZXNzQXN5bmM9ZnVuY3Rpb24oZSxuLHIpe2lmKG51bGw9PXImJihyPWZ1bmN0aW9uKCl7fSksbnVsbCE9ZSl7bj10Lk9iamVjdFRvb2xzLm92ZXJyaWRlKHtpbnB1dEVuY29kaW5nOlwiQnl0ZUFycmF5XCIsb3V0cHV0RW5jb2Rpbmc6XCJTdHJpbmdcIix1c2VXZWJXb3JrZXI6ITAsYmxvY2tTaXplOjY1NTM2fSxuKTt2YXIgbz10LkJ1ZmZlclRvb2xzLmNvbnZlcnRUb1VpbnQ4QXJyYXlJZk5lZWRlZChlKTt0LkV2ZW50TG9vcC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe24udXNlV2ViV29ya2VyJiZ0LldlYldvcmtlci5jcmVhdGVHbG9iYWxXb3JrZXJJZk5lZWRlZCgpP3QuV2ViV29ya2VyLmRlY29tcHJlc3NBc3luYyhvLG4scik6dC5Bc3luY0RlY29tcHJlc3Nvci5kZWNvbXByZXNzQXN5bmMoZSxuLHIpfSkpfWVsc2Ugcih2b2lkIDAsbmV3IFR5cGVFcnJvcihcImRlY29tcHJlc3NBc3luYzogdW5kZWZpbmVkIG9yIG51bGwgaW5wdXQgcmVjZWl2ZWRcIikpfSx0LmNyZWF0ZUNvbXByZXNzaW9uU3RyZWFtPWZ1bmN0aW9uKCl7cmV0dXJuIHQuQXN5bmNDb21wcmVzc29yLmNyZWF0ZUNvbXByZXNzaW9uU3RyZWFtKCl9LHQuY3JlYXRlRGVjb21wcmVzc2lvblN0cmVhbT1mdW5jdGlvbigpe3JldHVybiB0LkFzeW5jRGVjb21wcmVzc29yLmNyZWF0ZURlY29tcHJlc3Npb25TdHJlYW0oKX0sdC5lbmNvZGVVVEY4PWZ1bmN0aW9uKGUpe3JldHVybiB0LkVuY29kaW5nLlVURjguZW5jb2RlKGUpfSx0LmRlY29kZVVURjg9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuRW5jb2RpbmcuVVRGOC5kZWNvZGUoZSl9LHQuZW5jb2RlQmFzZTY0PWZ1bmN0aW9uKGUpe3JldHVybiB0LkVuY29kaW5nLkJhc2U2NC5lbmNvZGUoZSl9LHQuZGVjb2RlQmFzZTY0PWZ1bmN0aW9uKGUpe3JldHVybiB0LkVuY29kaW5nLkJhc2U2NC5kZWNvZGUoZSl9LHQuZW5jb2RlQmluYXJ5U3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB0LkVuY29kaW5nLkJpbmFyeVN0cmluZy5lbmNvZGUoZSl9LHQuZGVjb2RlQmluYXJ5U3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB0LkVuY29kaW5nLkJpbmFyeVN0cmluZy5kZWNvZGUoZSl9LHQuZW5jb2RlU3RvcmFnZUJpbmFyeVN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gdC5FbmNvZGluZy5TdG9yYWdlQmluYXJ5U3RyaW5nLmVuY29kZShlKX0sdC5kZWNvZGVTdG9yYWdlQmluYXJ5U3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB0LkVuY29kaW5nLlN0b3JhZ2VCaW5hcnlTdHJpbmcuZGVjb2RlKGUpfX0ob3x8KG89e30pKX0sMzc0Oih0LGUsbik9Pntjb25zdHtBYm9ydEVycm9yOnIsY29kZXM6b309bigxNDEpLHtpc05vZGVTdHJlYW06aSxpc1dlYlN0cmVhbTphLGtDb250cm9sbGVyRXJyb3JGdW5jdGlvbjpzfT1uKDEzMiksdT1uKDg2KSx7RVJSX0lOVkFMSURfQVJHX1RZUEU6bH09bzt0LmV4cG9ydHMuYWRkQWJvcnRTaWduYWw9ZnVuY3Rpb24oZSxuKXtpZigoKHQsZSk9PntpZihcIm9iamVjdFwiIT10eXBlb2YgdHx8IShcImFib3J0ZWRcImluIHQpKXRocm93IG5ldyBsKGUsXCJBYm9ydFNpZ25hbFwiLHQpfSkoZSxcInNpZ25hbFwiKSwhaShuKSYmIWEobikpdGhyb3cgbmV3IGwoXCJzdHJlYW1cIixbXCJSZWFkYWJsZVN0cmVhbVwiLFwiV3JpdGFibGVTdHJlYW1cIixcIlN0cmVhbVwiXSxuKTtyZXR1cm4gdC5leHBvcnRzLmFkZEFib3J0U2lnbmFsTm9WYWxpZGF0ZShlLG4pfSx0LmV4cG9ydHMuYWRkQWJvcnRTaWduYWxOb1ZhbGlkYXRlPWZ1bmN0aW9uKHQsZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHR8fCEoXCJhYm9ydGVkXCJpbiB0KSlyZXR1cm4gZTtjb25zdCBuPWkoZSk/KCk9PntlLmRlc3Ryb3kobmV3IHIodm9pZCAwLHtjYXVzZTp0LnJlYXNvbn0pKX06KCk9PntlW3NdKG5ldyByKHZvaWQgMCx7Y2F1c2U6dC5yZWFzb259KSl9O3JldHVybiB0LmFib3J0ZWQ/bigpOih0LmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLG4pLHUoZSwoKCk9PnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsbikpKSksZX19LDYxNjoodCxlLG4pPT57Y29uc3R7U3RyaW5nUHJvdG90eXBlU2xpY2U6cixTeW1ib2xJdGVyYXRvcjpvLFR5cGVkQXJyYXlQcm90b3R5cGVTZXQ6aSxVaW50OEFycmF5OmF9PW4oMTkxKSx7QnVmZmVyOnN9PW4oNDg1KSx7aW5zcGVjdDp1fT1uKDc3NSk7dC5leHBvcnRzPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5oZWFkPW51bGwsdGhpcy50YWlsPW51bGwsdGhpcy5sZW5ndGg9MH1wdXNoKHQpe2NvbnN0IGU9e2RhdGE6dCxuZXh0Om51bGx9O3RoaXMubGVuZ3RoPjA/dGhpcy50YWlsLm5leHQ9ZTp0aGlzLmhlYWQ9ZSx0aGlzLnRhaWw9ZSwrK3RoaXMubGVuZ3RofXVuc2hpZnQodCl7Y29uc3QgZT17ZGF0YTp0LG5leHQ6dGhpcy5oZWFkfTswPT09dGhpcy5sZW5ndGgmJih0aGlzLnRhaWw9ZSksdGhpcy5oZWFkPWUsKyt0aGlzLmxlbmd0aH1zaGlmdCgpe2lmKDA9PT10aGlzLmxlbmd0aClyZXR1cm47Y29uc3QgdD10aGlzLmhlYWQuZGF0YTtyZXR1cm4gMT09PXRoaXMubGVuZ3RoP3RoaXMuaGVhZD10aGlzLnRhaWw9bnVsbDp0aGlzLmhlYWQ9dGhpcy5oZWFkLm5leHQsLS10aGlzLmxlbmd0aCx0fWNsZWFyKCl7dGhpcy5oZWFkPXRoaXMudGFpbD1udWxsLHRoaXMubGVuZ3RoPTB9am9pbih0KXtpZigwPT09dGhpcy5sZW5ndGgpcmV0dXJuXCJcIjtsZXQgZT10aGlzLmhlYWQsbj1cIlwiK2UuZGF0YTtmb3IoO251bGwhPT0oZT1lLm5leHQpOyluKz10K2UuZGF0YTtyZXR1cm4gbn1jb25jYXQodCl7aWYoMD09PXRoaXMubGVuZ3RoKXJldHVybiBzLmFsbG9jKDApO2NvbnN0IGU9cy5hbGxvY1Vuc2FmZSh0Pj4+MCk7bGV0IG49dGhpcy5oZWFkLHI9MDtmb3IoO247KWkoZSxuLmRhdGEscikscis9bi5kYXRhLmxlbmd0aCxuPW4ubmV4dDtyZXR1cm4gZX1jb25zdW1lKHQsZSl7Y29uc3Qgbj10aGlzLmhlYWQuZGF0YTtpZih0PG4ubGVuZ3RoKXtjb25zdCBlPW4uc2xpY2UoMCx0KTtyZXR1cm4gdGhpcy5oZWFkLmRhdGE9bi5zbGljZSh0KSxlfXJldHVybiB0PT09bi5sZW5ndGg/dGhpcy5zaGlmdCgpOmU/dGhpcy5fZ2V0U3RyaW5nKHQpOnRoaXMuX2dldEJ1ZmZlcih0KX1maXJzdCgpe3JldHVybiB0aGlzLmhlYWQuZGF0YX0qW29dKCl7Zm9yKGxldCB0PXRoaXMuaGVhZDt0O3Q9dC5uZXh0KXlpZWxkIHQuZGF0YX1fZ2V0U3RyaW5nKHQpe2xldCBlPVwiXCIsbj10aGlzLmhlYWQsbz0wO2Rve2NvbnN0IGk9bi5kYXRhO2lmKCEodD5pLmxlbmd0aCkpe3Q9PT1pLmxlbmd0aD8oZSs9aSwrK28sbi5uZXh0P3RoaXMuaGVhZD1uLm5leHQ6dGhpcy5oZWFkPXRoaXMudGFpbD1udWxsKTooZSs9cihpLDAsdCksdGhpcy5oZWFkPW4sbi5kYXRhPXIoaSx0KSk7YnJlYWt9ZSs9aSx0LT1pLmxlbmd0aCwrK299d2hpbGUobnVsbCE9PShuPW4ubmV4dCkpO3JldHVybiB0aGlzLmxlbmd0aC09byxlfV9nZXRCdWZmZXIodCl7Y29uc3QgZT1zLmFsbG9jVW5zYWZlKHQpLG49dDtsZXQgcj10aGlzLmhlYWQsbz0wO2Rve2NvbnN0IHM9ci5kYXRhO2lmKCEodD5zLmxlbmd0aCkpe3Q9PT1zLmxlbmd0aD8oaShlLHMsbi10KSwrK28sci5uZXh0P3RoaXMuaGVhZD1yLm5leHQ6dGhpcy5oZWFkPXRoaXMudGFpbD1udWxsKTooaShlLG5ldyBhKHMuYnVmZmVyLHMuYnl0ZU9mZnNldCx0KSxuLXQpLHRoaXMuaGVhZD1yLHIuZGF0YT1zLnNsaWNlKHQpKTticmVha31pKGUscyxuLXQpLHQtPXMubGVuZ3RoLCsrb313aGlsZShudWxsIT09KHI9ci5uZXh0KSk7cmV0dXJuIHRoaXMubGVuZ3RoLT1vLGV9W1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKV0odCxlKXtyZXR1cm4gdSh0aGlzLHsuLi5lLGRlcHRoOjAsY3VzdG9tSW5zcGVjdDohMX0pfX19LDgxODoodCxlLG4pPT57Y29uc3R7cGlwZWxpbmU6cn09big3NTQpLG89bigxODIpLHtkZXN0cm95ZXI6aX09bigyMzApLHtpc05vZGVTdHJlYW06YSxpc1JlYWRhYmxlOnMsaXNXcml0YWJsZTp1LGlzV2ViU3RyZWFtOmwsaXNUcmFuc2Zvcm1TdHJlYW06Yyxpc1dyaXRhYmxlU3RyZWFtOmYsaXNSZWFkYWJsZVN0cmVhbTpkfT1uKDEzMikse0Fib3J0RXJyb3I6aCxjb2Rlczp7RVJSX0lOVkFMSURfQVJHX1ZBTFVFOnAsRVJSX01JU1NJTkdfQVJHUzpnfX09bigxNDEpLHk9big4Nik7dC5leHBvcnRzPWZ1bmN0aW9uKC4uLnQpe2lmKDA9PT10Lmxlbmd0aCl0aHJvdyBuZXcgZyhcInN0cmVhbXNcIik7aWYoMT09PXQubGVuZ3RoKXJldHVybiBvLmZyb20odFswXSk7Y29uc3QgZT1bLi4udF07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdFswXSYmKHRbMF09by5mcm9tKHRbMF0pKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W3QubGVuZ3RoLTFdKXtjb25zdCBlPXQubGVuZ3RoLTE7dFtlXT1vLmZyb20odFtlXSl9Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDsrK24paWYoYSh0W25dKXx8bCh0W25dKSl7aWYobjx0Lmxlbmd0aC0xJiYhKHModFtuXSl8fGQodFtuXSl8fGModFtuXSkpKXRocm93IG5ldyBwKGBzdHJlYW1zWyR7bn1dYCxlW25dLFwibXVzdCBiZSByZWFkYWJsZVwiKTtpZihuPjAmJiEodSh0W25dKXx8Zih0W25dKXx8Yyh0W25dKSkpdGhyb3cgbmV3IHAoYHN0cmVhbXNbJHtufV1gLGVbbl0sXCJtdXN0IGJlIHdyaXRhYmxlXCIpfWxldCBuLG0sdixiLHc7Y29uc3QgXz10WzBdLEU9cih0LChmdW5jdGlvbih0KXtjb25zdCBlPWI7Yj1udWxsLGU/ZSh0KTp0P3cuZGVzdHJveSh0KTpBfHxTfHx3LmRlc3Ryb3koKX0pKSxTPSEhKHUoXyl8fGYoXyl8fGMoXykpLEE9ISEocyhFKXx8ZChFKXx8YyhFKSk7aWYodz1uZXcgbyh7d3JpdGFibGVPYmplY3RNb2RlOiEobnVsbD09X3x8IV8ud3JpdGFibGVPYmplY3RNb2RlKSxyZWFkYWJsZU9iamVjdE1vZGU6IShudWxsPT1FfHwhRS53cml0YWJsZU9iamVjdE1vZGUpLHdyaXRhYmxlOlMscmVhZGFibGU6QX0pLFMpe2lmKGEoXykpdy5fd3JpdGU9ZnVuY3Rpb24odCxlLHIpe18ud3JpdGUodCxlKT9yKCk6bj1yfSx3Ll9maW5hbD1mdW5jdGlvbih0KXtfLmVuZCgpLG09dH0sXy5vbihcImRyYWluXCIsKGZ1bmN0aW9uKCl7aWYobil7Y29uc3QgdD1uO249bnVsbCx0KCl9fSkpO2Vsc2UgaWYobChfKSl7Y29uc3QgdD0oYyhfKT9fLndyaXRhYmxlOl8pLmdldFdyaXRlcigpO3cuX3dyaXRlPWFzeW5jIGZ1bmN0aW9uKGUsbixyKXt0cnl7YXdhaXQgdC5yZWFkeSx0LndyaXRlKGUpLmNhdGNoKCgoKT0+e30pKSxyKCl9Y2F0Y2godCl7cih0KX19LHcuX2ZpbmFsPWFzeW5jIGZ1bmN0aW9uKGUpe3RyeXthd2FpdCB0LnJlYWR5LHQuY2xvc2UoKS5jYXRjaCgoKCk9Pnt9KSksbT1lfWNhdGNoKHQpe2UodCl9fX1jb25zdCB0PWMoRSk/RS5yZWFkYWJsZTpFO3kodCwoKCk9PntpZihtKXtjb25zdCB0PW07bT1udWxsLHQoKX19KSl9aWYoQSlpZihhKEUpKUUub24oXCJyZWFkYWJsZVwiLChmdW5jdGlvbigpe2lmKHYpe2NvbnN0IHQ9djt2PW51bGwsdCgpfX0pKSxFLm9uKFwiZW5kXCIsKGZ1bmN0aW9uKCl7dy5wdXNoKG51bGwpfSkpLHcuX3JlYWQ9ZnVuY3Rpb24oKXtmb3IoOzspe2NvbnN0IHQ9RS5yZWFkKCk7aWYobnVsbD09PXQpcmV0dXJuIHZvaWQodj13Ll9yZWFkKTtpZighdy5wdXNoKHQpKXJldHVybn19O2Vsc2UgaWYobChFKSl7Y29uc3QgdD0oYyhFKT9FLnJlYWRhYmxlOkUpLmdldFJlYWRlcigpO3cuX3JlYWQ9YXN5bmMgZnVuY3Rpb24oKXtmb3IoOzspdHJ5e2NvbnN0e3ZhbHVlOmUsZG9uZTpufT1hd2FpdCB0LnJlYWQoKTtpZighdy5wdXNoKGUpKXJldHVybjtpZihuKXJldHVybiB2b2lkIHcucHVzaChudWxsKX1jYXRjaHtyZXR1cm59fX1yZXR1cm4gdy5fZGVzdHJveT1mdW5jdGlvbih0LGUpe3R8fG51bGw9PT1ifHwodD1uZXcgaCksdj1udWxsLG49bnVsbCxtPW51bGwsbnVsbD09PWI/ZSh0KTooYj1lLGEoRSkmJmkoRSx0KSl9LHd9fSwyMzA6KHQsZSxuKT0+e2NvbnN0IHI9big1MzMpLHthZ2dyZWdhdGVUd29FcnJvcnM6byxjb2Rlczp7RVJSX01VTFRJUExFX0NBTExCQUNLOml9LEFib3J0RXJyb3I6YX09bigxNDEpLHtTeW1ib2w6c309bigxOTEpLHtrRGVzdHJveWVkOnUsaXNEZXN0cm95ZWQ6bCxpc0ZpbmlzaGVkOmMsaXNTZXJ2ZXJSZXF1ZXN0OmZ9PW4oMTMyKSxkPXMoXCJrRGVzdHJveVwiKSxoPXMoXCJrQ29uc3RydWN0XCIpO2Z1bmN0aW9uIHAodCxlLG4pe3QmJih0LnN0YWNrLGUmJiFlLmVycm9yZWQmJihlLmVycm9yZWQ9dCksbiYmIW4uZXJyb3JlZCYmKG4uZXJyb3JlZD10KSl9ZnVuY3Rpb24gZyh0LGUsbil7bGV0IG89ITE7ZnVuY3Rpb24gaShlKXtpZihvKXJldHVybjtvPSEwO2NvbnN0IGk9dC5fcmVhZGFibGVTdGF0ZSxhPXQuX3dyaXRhYmxlU3RhdGU7cChlLGEsaSksYSYmKGEuY2xvc2VkPSEwKSxpJiYoaS5jbG9zZWQ9ITApLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJm4oZSksZT9yLm5leHRUaWNrKHksdCxlKTpyLm5leHRUaWNrKG0sdCl9dHJ5e3QuX2Rlc3Ryb3koZXx8bnVsbCxpKX1jYXRjaChlKXtpKGUpfX1mdW5jdGlvbiB5KHQsZSl7dih0LGUpLG0odCl9ZnVuY3Rpb24gbSh0KXtjb25zdCBlPXQuX3JlYWRhYmxlU3RhdGUsbj10Ll93cml0YWJsZVN0YXRlO24mJihuLmNsb3NlRW1pdHRlZD0hMCksZSYmKGUuY2xvc2VFbWl0dGVkPSEwKSwobnVsbCE9biYmbi5lbWl0Q2xvc2V8fG51bGwhPWUmJmUuZW1pdENsb3NlKSYmdC5lbWl0KFwiY2xvc2VcIil9ZnVuY3Rpb24gdih0LGUpe2NvbnN0IG49dC5fcmVhZGFibGVTdGF0ZSxyPXQuX3dyaXRhYmxlU3RhdGU7bnVsbCE9ciYmci5lcnJvckVtaXR0ZWR8fG51bGwhPW4mJm4uZXJyb3JFbWl0dGVkfHwociYmKHIuZXJyb3JFbWl0dGVkPSEwKSxuJiYobi5lcnJvckVtaXR0ZWQ9ITApLHQuZW1pdChcImVycm9yXCIsZSkpfWZ1bmN0aW9uIGIodCxlLG4pe2NvbnN0IG89dC5fcmVhZGFibGVTdGF0ZSxpPXQuX3dyaXRhYmxlU3RhdGU7aWYobnVsbCE9aSYmaS5kZXN0cm95ZWR8fG51bGwhPW8mJm8uZGVzdHJveWVkKXJldHVybiB0aGlzO251bGwhPW8mJm8uYXV0b0Rlc3Ryb3l8fG51bGwhPWkmJmkuYXV0b0Rlc3Ryb3k/dC5kZXN0cm95KGUpOmUmJihlLnN0YWNrLGkmJiFpLmVycm9yZWQmJihpLmVycm9yZWQ9ZSksbyYmIW8uZXJyb3JlZCYmKG8uZXJyb3JlZD1lKSxuP3IubmV4dFRpY2sodix0LGUpOnYodCxlKSl9ZnVuY3Rpb24gdyh0KXtsZXQgZT0hMTtmdW5jdGlvbiBuKG4pe2lmKGUpcmV0dXJuIHZvaWQgYih0LG51bGwhPW4/bjpuZXcgaSk7ZT0hMDtjb25zdCBvPXQuX3JlYWRhYmxlU3RhdGUsYT10Ll93cml0YWJsZVN0YXRlLHM9YXx8bztvJiYoby5jb25zdHJ1Y3RlZD0hMCksYSYmKGEuY29uc3RydWN0ZWQ9ITApLHMuZGVzdHJveWVkP3QuZW1pdChkLG4pOm4/Yih0LG4sITApOnIubmV4dFRpY2soXyx0KX10cnl7dC5fY29uc3RydWN0KCh0PT57ci5uZXh0VGljayhuLHQpfSkpfWNhdGNoKHQpe3IubmV4dFRpY2sobix0KX19ZnVuY3Rpb24gXyh0KXt0LmVtaXQoaCl9ZnVuY3Rpb24gRSh0KXtyZXR1cm4obnVsbD09dD92b2lkIDA6dC5zZXRIZWFkZXIpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmFib3J0fWZ1bmN0aW9uIFModCl7dC5lbWl0KFwiY2xvc2VcIil9ZnVuY3Rpb24gQSh0LGUpe3QuZW1pdChcImVycm9yXCIsZSksci5uZXh0VGljayhTLHQpfXQuZXhwb3J0cz17Y29uc3RydWN0OmZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdC5fY29uc3RydWN0KXJldHVybjtjb25zdCBuPXQuX3JlYWRhYmxlU3RhdGUsbz10Ll93cml0YWJsZVN0YXRlO24mJihuLmNvbnN0cnVjdGVkPSExKSxvJiYoby5jb25zdHJ1Y3RlZD0hMSksdC5vbmNlKGgsZSksdC5saXN0ZW5lckNvdW50KGgpPjF8fHIubmV4dFRpY2sodyx0KX0sZGVzdHJveWVyOmZ1bmN0aW9uKHQsZSl7dCYmIWwodCkmJihlfHxjKHQpfHwoZT1uZXcgYSksZih0KT8odC5zb2NrZXQ9bnVsbCx0LmRlc3Ryb3koZSkpOkUodCk/dC5hYm9ydCgpOkUodC5yZXEpP3QucmVxLmFib3J0KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgdC5kZXN0cm95P3QuZGVzdHJveShlKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNsb3NlP3QuY2xvc2UoKTplP3IubmV4dFRpY2soQSx0LGUpOnIubmV4dFRpY2soUyx0KSx0LmRlc3Ryb3llZHx8KHRbdV09ITApKX0sZGVzdHJveTpmdW5jdGlvbih0LGUpe2NvbnN0IG49dGhpcy5fcmVhZGFibGVTdGF0ZSxyPXRoaXMuX3dyaXRhYmxlU3RhdGUsaT1yfHxuO3JldHVybiBudWxsIT1yJiZyLmRlc3Ryb3llZHx8bnVsbCE9biYmbi5kZXN0cm95ZWQ/KFwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUoKSx0aGlzKToocCh0LHIsbiksciYmKHIuZGVzdHJveWVkPSEwKSxuJiYobi5kZXN0cm95ZWQ9ITApLGkuY29uc3RydWN0ZWQ/Zyh0aGlzLHQsZSk6dGhpcy5vbmNlKGQsKGZ1bmN0aW9uKG4pe2codGhpcyxvKG4sdCksZSl9KSksdGhpcyl9LHVuZGVzdHJveTpmdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5fcmVhZGFibGVTdGF0ZSxlPXRoaXMuX3dyaXRhYmxlU3RhdGU7dCYmKHQuY29uc3RydWN0ZWQ9ITAsdC5jbG9zZWQ9ITEsdC5jbG9zZUVtaXR0ZWQ9ITEsdC5kZXN0cm95ZWQ9ITEsdC5lcnJvcmVkPW51bGwsdC5lcnJvckVtaXR0ZWQ9ITEsdC5yZWFkaW5nPSExLHQuZW5kZWQ9ITE9PT10LnJlYWRhYmxlLHQuZW5kRW1pdHRlZD0hMT09PXQucmVhZGFibGUpLGUmJihlLmNvbnN0cnVjdGVkPSEwLGUuZGVzdHJveWVkPSExLGUuY2xvc2VkPSExLGUuY2xvc2VFbWl0dGVkPSExLGUuZXJyb3JlZD1udWxsLGUuZXJyb3JFbWl0dGVkPSExLGUuZmluYWxDYWxsZWQ9ITEsZS5wcmVmaW5pc2hlZD0hMSxlLmVuZGVkPSExPT09ZS53cml0YWJsZSxlLmVuZGluZz0hMT09PWUud3JpdGFibGUsZS5maW5pc2hlZD0hMT09PWUud3JpdGFibGUpfSxlcnJvck9yRGVzdHJveTpifX0sMTgyOih0LGUsbik9Pntjb25zdHtPYmplY3REZWZpbmVQcm9wZXJ0aWVzOnIsT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOm8sT2JqZWN0S2V5czppLE9iamVjdFNldFByb3RvdHlwZU9mOmF9PW4oMTkxKTt0LmV4cG9ydHM9bDtjb25zdCBzPW4oODU4KSx1PW4oMzczKTthKGwucHJvdG90eXBlLHMucHJvdG90eXBlKSxhKGwscyk7e2NvbnN0IHQ9aSh1LnByb3RvdHlwZSk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2NvbnN0IG49dFtlXTtsLnByb3RvdHlwZVtuXXx8KGwucHJvdG90eXBlW25dPXUucHJvdG90eXBlW25dKX19ZnVuY3Rpb24gbCh0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBsKSlyZXR1cm4gbmV3IGwodCk7cy5jYWxsKHRoaXMsdCksdS5jYWxsKHRoaXMsdCksdD8odGhpcy5hbGxvd0hhbGZPcGVuPSExIT09dC5hbGxvd0hhbGZPcGVuLCExPT09dC5yZWFkYWJsZSYmKHRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGFibGU9ITEsdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRlZD0hMCx0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQ9ITApLCExPT09dC53cml0YWJsZSYmKHRoaXMuX3dyaXRhYmxlU3RhdGUud3JpdGFibGU9ITEsdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRpbmc9ITAsdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZD0hMCx0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkPSEwKSk6dGhpcy5hbGxvd0hhbGZPcGVuPSEwfWxldCBjLGY7ZnVuY3Rpb24gZCgpe3JldHVybiB2b2lkIDA9PT1jJiYoYz17fSksY31yKGwucHJvdG90eXBlLHt3cml0YWJsZTp7X19wcm90b19fOm51bGwsLi4ubyh1LnByb3RvdHlwZSxcIndyaXRhYmxlXCIpfSx3cml0YWJsZUhpZ2hXYXRlck1hcms6e19fcHJvdG9fXzpudWxsLC4uLm8odS5wcm90b3R5cGUsXCJ3cml0YWJsZUhpZ2hXYXRlck1hcmtcIil9LHdyaXRhYmxlT2JqZWN0TW9kZTp7X19wcm90b19fOm51bGwsLi4ubyh1LnByb3RvdHlwZSxcIndyaXRhYmxlT2JqZWN0TW9kZVwiKX0sd3JpdGFibGVCdWZmZXI6e19fcHJvdG9fXzpudWxsLC4uLm8odS5wcm90b3R5cGUsXCJ3cml0YWJsZUJ1ZmZlclwiKX0sd3JpdGFibGVMZW5ndGg6e19fcHJvdG9fXzpudWxsLC4uLm8odS5wcm90b3R5cGUsXCJ3cml0YWJsZUxlbmd0aFwiKX0sd3JpdGFibGVGaW5pc2hlZDp7X19wcm90b19fOm51bGwsLi4ubyh1LnByb3RvdHlwZSxcIndyaXRhYmxlRmluaXNoZWRcIil9LHdyaXRhYmxlQ29ya2VkOntfX3Byb3RvX186bnVsbCwuLi5vKHUucHJvdG90eXBlLFwid3JpdGFibGVDb3JrZWRcIil9LHdyaXRhYmxlRW5kZWQ6e19fcHJvdG9fXzpudWxsLC4uLm8odS5wcm90b3R5cGUsXCJ3cml0YWJsZUVuZGVkXCIpfSx3cml0YWJsZU5lZWREcmFpbjp7X19wcm90b19fOm51bGwsLi4ubyh1LnByb3RvdHlwZSxcIndyaXRhYmxlTmVlZERyYWluXCIpfSxkZXN0cm95ZWQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiB2b2lkIDAhPT10aGlzLl9yZWFkYWJsZVN0YXRlJiZ2b2lkIDAhPT10aGlzLl93cml0YWJsZVN0YXRlJiYodGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQmJnRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkKX0sc2V0KHQpe3RoaXMuX3JlYWRhYmxlU3RhdGUmJnRoaXMuX3dyaXRhYmxlU3RhdGUmJih0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZD10LHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkPXQpfX19KSxsLmZyb21XZWI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZCgpLm5ld1N0cmVhbUR1cGxleEZyb21SZWFkYWJsZVdyaXRhYmxlUGFpcih0LGUpfSxsLnRvV2ViPWZ1bmN0aW9uKHQpe3JldHVybiBkKCkubmV3UmVhZGFibGVXcml0YWJsZVBhaXJGcm9tRHVwbGV4KHQpfSxsLmZyb209ZnVuY3Rpb24odCl7cmV0dXJuIGZ8fChmPW4oNzQ5KSksZih0LFwiYm9keVwiKX19LDc0OToodCxlLG4pPT57Y29uc3Qgcj1uKDUzMyksbz1uKDQ4NSkse2lzUmVhZGFibGU6aSxpc1dyaXRhYmxlOmEsaXNJdGVyYWJsZTpzLGlzTm9kZVN0cmVhbTp1LGlzUmVhZGFibGVOb2RlU3RyZWFtOmwsaXNXcml0YWJsZU5vZGVTdHJlYW06Yyxpc0R1cGxleE5vZGVTdHJlYW06Zn09bigxMzIpLGQ9big4Nikse0Fib3J0RXJyb3I6aCxjb2Rlczp7RVJSX0lOVkFMSURfQVJHX1RZUEU6cCxFUlJfSU5WQUxJRF9SRVRVUk5fVkFMVUU6Z319PW4oMTQxKSx7ZGVzdHJveWVyOnl9PW4oMjMwKSxtPW4oMTgyKSx2PW4oODU4KSx7Y3JlYXRlRGVmZXJyZWRQcm9taXNlOmJ9PW4oNzc1KSx3PW4oOTEzKSxfPWdsb2JhbFRoaXMuQmxvYnx8by5CbG9iLEU9dm9pZCAwIT09Xz9mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIF99OmZ1bmN0aW9uKHQpe3JldHVybiExfSxTPWdsb2JhbFRoaXMuQWJvcnRDb250cm9sbGVyfHxuKDg3NikuQWJvcnRDb250cm9sbGVyLHtGdW5jdGlvblByb3RvdHlwZUNhbGw6QX09bigxOTEpO2NsYXNzIEkgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLCExPT09KG51bGw9PXQ/dm9pZCAwOnQucmVhZGFibGUpJiYodGhpcy5fcmVhZGFibGVTdGF0ZS5yZWFkYWJsZT0hMSx0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZGVkPSEwLHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZD0hMCksITE9PT0obnVsbD09dD92b2lkIDA6dC53cml0YWJsZSkmJih0aGlzLl93cml0YWJsZVN0YXRlLndyaXRhYmxlPSExLHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kaW5nPSEwLHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQ9ITAsdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZD0hMCl9fWZ1bmN0aW9uIFQodCl7Y29uc3QgZT10LnJlYWRhYmxlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnJlYWRhYmxlLnJlYWQ/di53cmFwKHQucmVhZGFibGUpOnQucmVhZGFibGUsbj10LndyaXRhYmxlO2xldCByLG8scyx1LGwsYz0hIWkoZSksZj0hIWEobik7ZnVuY3Rpb24gcCh0KXtjb25zdCBlPXU7dT1udWxsLGU/ZSh0KTp0JiZsLmRlc3Ryb3kodCl9cmV0dXJuIGw9bmV3IEkoe3JlYWRhYmxlT2JqZWN0TW9kZTohKG51bGw9PWV8fCFlLnJlYWRhYmxlT2JqZWN0TW9kZSksd3JpdGFibGVPYmplY3RNb2RlOiEobnVsbD09bnx8IW4ud3JpdGFibGVPYmplY3RNb2RlKSxyZWFkYWJsZTpjLHdyaXRhYmxlOmZ9KSxmJiYoZChuLCh0PT57Zj0hMSx0JiZ5KGUsdCkscCh0KX0pKSxsLl93cml0ZT1mdW5jdGlvbih0LGUsbyl7bi53cml0ZSh0LGUpP28oKTpyPW99LGwuX2ZpbmFsPWZ1bmN0aW9uKHQpe24uZW5kKCksbz10fSxuLm9uKFwiZHJhaW5cIiwoZnVuY3Rpb24oKXtpZihyKXtjb25zdCB0PXI7cj1udWxsLHQoKX19KSksbi5vbihcImZpbmlzaFwiLChmdW5jdGlvbigpe2lmKG8pe2NvbnN0IHQ9bztvPW51bGwsdCgpfX0pKSksYyYmKGQoZSwodD0+e2M9ITEsdCYmeShlLHQpLHAodCl9KSksZS5vbihcInJlYWRhYmxlXCIsKGZ1bmN0aW9uKCl7aWYocyl7Y29uc3QgdD1zO3M9bnVsbCx0KCl9fSkpLGUub24oXCJlbmRcIiwoZnVuY3Rpb24oKXtsLnB1c2gobnVsbCl9KSksbC5fcmVhZD1mdW5jdGlvbigpe2Zvcig7Oyl7Y29uc3QgdD1lLnJlYWQoKTtpZihudWxsPT09dClyZXR1cm4gdm9pZChzPWwuX3JlYWQpO2lmKCFsLnB1c2godCkpcmV0dXJufX0pLGwuX2Rlc3Ryb3k9ZnVuY3Rpb24odCxpKXt0fHxudWxsPT09dXx8KHQ9bmV3IGgpLHM9bnVsbCxyPW51bGwsbz1udWxsLG51bGw9PT11P2kodCk6KHU9aSx5KG4sdCkseShlLHQpKX0sbH10LmV4cG9ydHM9ZnVuY3Rpb24gdChlLG4pe2lmKGYoZSkpcmV0dXJuIGU7aWYobChlKSlyZXR1cm4gVCh7cmVhZGFibGU6ZX0pO2lmKGMoZSkpcmV0dXJuIFQoe3dyaXRhYmxlOmV9KTtpZih1KGUpKXJldHVybiBUKHt3cml0YWJsZTohMSxyZWFkYWJsZTohMX0pO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpe2NvbnN0e3ZhbHVlOnQsd3JpdGU6byxmaW5hbDppLGRlc3Ryb3k6YX09ZnVuY3Rpb24odCl7bGV0e3Byb21pc2U6ZSxyZXNvbHZlOm59PWIoKTtjb25zdCBvPW5ldyBTLGk9by5zaWduYWwsYT10KGFzeW5jIGZ1bmN0aW9uKigpe2Zvcig7Oyl7Y29uc3QgdD1lO2U9bnVsbDtjb25zdHtjaHVuazpvLGRvbmU6YSxjYjpzfT1hd2FpdCB0O2lmKHIubmV4dFRpY2socyksYSlyZXR1cm47aWYoaS5hYm9ydGVkKXRocm93IG5ldyBoKHZvaWQgMCx7Y2F1c2U6aS5yZWFzb259KTsoe3Byb21pc2U6ZSxyZXNvbHZlOm59PWIoKSkseWllbGQgb319KCkse3NpZ25hbDppfSk7cmV0dXJue3ZhbHVlOmEsd3JpdGUodCxlLHIpe2NvbnN0IG89bjtuPW51bGwsbyh7Y2h1bms6dCxkb25lOiExLGNiOnJ9KX0sZmluYWwodCl7Y29uc3QgZT1uO249bnVsbCxlKHtkb25lOiEwLGNiOnR9KX0sZGVzdHJveSh0LGUpe28uYWJvcnQoKSxlKHQpfX19KGUpO2lmKHModCkpcmV0dXJuIHcoSSx0LHtvYmplY3RNb2RlOiEwLHdyaXRlOm8sZmluYWw6aSxkZXN0cm95OmF9KTtjb25zdCB1PW51bGw9PXQ/dm9pZCAwOnQudGhlbjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB1KXtsZXQgZTtjb25zdCBuPUEodSx0LCh0PT57aWYobnVsbCE9dCl0aHJvdyBuZXcgZyhcIm51bGx5XCIsXCJib2R5XCIsdCl9KSwodD0+e3koZSx0KX0pKTtyZXR1cm4gZT1uZXcgSSh7b2JqZWN0TW9kZTohMCxyZWFkYWJsZTohMSx3cml0ZTpvLGZpbmFsKHQpe2koKGFzeW5jKCk9Pnt0cnl7YXdhaXQgbixyLm5leHRUaWNrKHQsbnVsbCl9Y2F0Y2goZSl7ci5uZXh0VGljayh0LGUpfX0pKX0sZGVzdHJveTphfSl9dGhyb3cgbmV3IGcoXCJJdGVyYWJsZSwgQXN5bmNJdGVyYWJsZSBvciBBc3luY0Z1bmN0aW9uXCIsbix0KX1pZihFKGUpKXJldHVybiB0KGUuYXJyYXlCdWZmZXIoKSk7aWYocyhlKSlyZXR1cm4gdyhJLGUse29iamVjdE1vZGU6ITAsd3JpdGFibGU6ITF9KTtpZihcIm9iamVjdFwiPT10eXBlb2YobnVsbD09ZT92b2lkIDA6ZS53cml0YWJsZSl8fFwib2JqZWN0XCI9PXR5cGVvZihudWxsPT1lP3ZvaWQgMDplLnJlYWRhYmxlKSl7cmV0dXJuIFQoe3JlYWRhYmxlOm51bGwhPWUmJmUucmVhZGFibGU/bChudWxsPT1lP3ZvaWQgMDplLnJlYWRhYmxlKT9udWxsPT1lP3ZvaWQgMDplLnJlYWRhYmxlOnQoZS5yZWFkYWJsZSk6dm9pZCAwLHdyaXRhYmxlOm51bGwhPWUmJmUud3JpdGFibGU/YyhudWxsPT1lP3ZvaWQgMDplLndyaXRhYmxlKT9udWxsPT1lP3ZvaWQgMDplLndyaXRhYmxlOnQoZS53cml0YWJsZSk6dm9pZCAwfSl9Y29uc3Qgbz1udWxsPT1lP3ZvaWQgMDplLnRoZW47aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygbyl7bGV0IHQ7cmV0dXJuIEEobyxlLChlPT57bnVsbCE9ZSYmdC5wdXNoKGUpLHQucHVzaChudWxsKX0pLChlPT57eSh0LGUpfSkpLHQ9bmV3IEkoe29iamVjdE1vZGU6ITAsd3JpdGFibGU6ITEscmVhZCgpe319KX10aHJvdyBuZXcgcChuLFtcIkJsb2JcIixcIlJlYWRhYmxlU3RyZWFtXCIsXCJXcml0YWJsZVN0cmVhbVwiLFwiU3RyZWFtXCIsXCJJdGVyYWJsZVwiLFwiQXN5bmNJdGVyYWJsZVwiLFwiRnVuY3Rpb25cIixcInsgcmVhZGFibGUsIHdyaXRhYmxlIH0gcGFpclwiLFwiUHJvbWlzZVwiXSxlKX19LDg2Oih0LGUsbik9Pntjb25zdCByPW4oNTMzKSx7QWJvcnRFcnJvcjpvLGNvZGVzOml9PW4oMTQxKSx7RVJSX0lOVkFMSURfQVJHX1RZUEU6YSxFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRTpzfT1pLHtrRW1wdHlPYmplY3Q6dSxvbmNlOmx9PW4oNzc1KSx7dmFsaWRhdGVBYm9ydFNpZ25hbDpjLHZhbGlkYXRlRnVuY3Rpb246Zix2YWxpZGF0ZU9iamVjdDpkLHZhbGlkYXRlQm9vbGVhbjpofT1uKDkwNCkse1Byb21pc2U6cCxQcm9taXNlUHJvdG90eXBlVGhlbjpnfT1uKDE5MSkse2lzQ2xvc2VkOnksaXNSZWFkYWJsZTptLGlzUmVhZGFibGVOb2RlU3RyZWFtOnYsaXNSZWFkYWJsZVN0cmVhbTpiLGlzUmVhZGFibGVGaW5pc2hlZDp3LGlzUmVhZGFibGVFcnJvcmVkOl8saXNXcml0YWJsZTpFLGlzV3JpdGFibGVOb2RlU3RyZWFtOlMsaXNXcml0YWJsZVN0cmVhbTpBLGlzV3JpdGFibGVGaW5pc2hlZDpJLGlzV3JpdGFibGVFcnJvcmVkOlQsaXNOb2RlU3RyZWFtOlIsd2lsbEVtaXRDbG9zZTp4LGtJc0Nsb3NlZFByb21pc2U6Q309bigxMzIpO2NvbnN0IEI9KCk9Pnt9O2Z1bmN0aW9uIGsodCxlLG4pe3ZhciBpLGg7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGg/KG49ZSxlPXUpOm51bGw9PWU/ZT11OmQoZSxcIm9wdGlvbnNcIiksZihuLFwiY2FsbGJhY2tcIiksYyhlLnNpZ25hbCxcIm9wdGlvbnMuc2lnbmFsXCIpLG49bChuKSxiKHQpfHxBKHQpKXJldHVybiBmdW5jdGlvbih0LGUsbil7bGV0IGk9ITEsYT1CO2lmKGUuc2lnbmFsKWlmKGE9KCk9PntpPSEwLG4uY2FsbCh0LG5ldyBvKHZvaWQgMCx7Y2F1c2U6ZS5zaWduYWwucmVhc29ufSkpfSxlLnNpZ25hbC5hYm9ydGVkKXIubmV4dFRpY2soYSk7ZWxzZXtjb25zdCByPW47bj1sKCgoLi4ubik9PntlLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIixhKSxyLmFwcGx5KHQsbil9KSksZS5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsYSl9Y29uc3Qgcz0oLi4uZSk9PntpfHxyLm5leHRUaWNrKCgoKT0+bi5hcHBseSh0LGUpKSl9O3JldHVybiBnKHRbQ10ucHJvbWlzZSxzLHMpLEJ9KHQsZSxuKTtpZighUih0KSl0aHJvdyBuZXcgYShcInN0cmVhbVwiLFtcIlJlYWRhYmxlU3RyZWFtXCIsXCJXcml0YWJsZVN0cmVhbVwiLFwiU3RyZWFtXCJdLHQpO2NvbnN0IHA9bnVsbCE9PShpPWUucmVhZGFibGUpJiZ2b2lkIDAhPT1pP2k6dih0KSxrPW51bGwhPT0oaD1lLndyaXRhYmxlKSYmdm9pZCAwIT09aD9oOlModCksTD10Ll93cml0YWJsZVN0YXRlLE89dC5fcmVhZGFibGVTdGF0ZSxVPSgpPT57dC53cml0YWJsZXx8TSgpfTtsZXQgaj14KHQpJiZ2KHQpPT09cCYmUyh0KT09PWssTj1JKHQsITEpO2NvbnN0IE09KCk9PntOPSEwLHQuZGVzdHJveWVkJiYoaj0hMSksKCFqfHx0LnJlYWRhYmxlJiYhcCkmJihwJiYhUHx8bi5jYWxsKHQpKX07bGV0IFA9dyh0LCExKTtjb25zdCBXPSgpPT57UD0hMCx0LmRlc3Ryb3llZCYmKGo9ITEpLCghanx8dC53cml0YWJsZSYmIWspJiYoayYmIU58fG4uY2FsbCh0KSl9LCQ9ZT0+e24uY2FsbCh0LGUpfTtsZXQgRD15KHQpO2NvbnN0IEY9KCk9PntEPSEwO2NvbnN0IGU9VCh0KXx8Xyh0KTtyZXR1cm4gZSYmXCJib29sZWFuXCIhPXR5cGVvZiBlP24uY2FsbCh0LGUpOnAmJiFQJiZ2KHQsITApJiYhdyh0LCExKT9uLmNhbGwodCxuZXcgcyk6IWt8fE58fEkodCwhMSk/dm9pZCBuLmNhbGwodCk6bi5jYWxsKHQsbmV3IHMpfSx6PSgpPT57RD0hMDtjb25zdCBlPVQodCl8fF8odCk7aWYoZSYmXCJib29sZWFuXCIhPXR5cGVvZiBlKXJldHVybiBuLmNhbGwodCxlKTtuLmNhbGwodCl9LHE9KCk9Pnt0LnJlcS5vbihcImZpbmlzaFwiLE0pfTshZnVuY3Rpb24odCl7cmV0dXJuIHQuc2V0SGVhZGVyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmFib3J0fSh0KT9rJiYhTCYmKHQub24oXCJlbmRcIixVKSx0Lm9uKFwiY2xvc2VcIixVKSk6KHQub24oXCJjb21wbGV0ZVwiLE0pLGp8fHQub24oXCJhYm9ydFwiLEYpLHQucmVxP3EoKTp0Lm9uKFwicmVxdWVzdFwiLHEpKSxqfHxcImJvb2xlYW5cIiE9dHlwZW9mIHQuYWJvcnRlZHx8dC5vbihcImFib3J0ZWRcIixGKSx0Lm9uKFwiZW5kXCIsVyksdC5vbihcImZpbmlzaFwiLE0pLCExIT09ZS5lcnJvciYmdC5vbihcImVycm9yXCIsJCksdC5vbihcImNsb3NlXCIsRiksRD9yLm5leHRUaWNrKEYpOm51bGwhPUwmJkwuZXJyb3JFbWl0dGVkfHxudWxsIT1PJiZPLmVycm9yRW1pdHRlZD9qfHxyLm5leHRUaWNrKHopOihwfHxqJiYhbSh0KXx8IU4mJiExIT09RSh0KSkmJihrfHxqJiYhRSh0KXx8IVAmJiExIT09bSh0KSk/TyYmdC5yZXEmJnQuYWJvcnRlZCYmci5uZXh0VGljayh6KTpyLm5leHRUaWNrKHopO2NvbnN0IEg9KCk9PntuPUIsdC5yZW1vdmVMaXN0ZW5lcihcImFib3J0ZWRcIixGKSx0LnJlbW92ZUxpc3RlbmVyKFwiY29tcGxldGVcIixNKSx0LnJlbW92ZUxpc3RlbmVyKFwiYWJvcnRcIixGKSx0LnJlbW92ZUxpc3RlbmVyKFwicmVxdWVzdFwiLHEpLHQucmVxJiZ0LnJlcS5yZW1vdmVMaXN0ZW5lcihcImZpbmlzaFwiLE0pLHQucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIixVKSx0LnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixVKSx0LnJlbW92ZUxpc3RlbmVyKFwiZmluaXNoXCIsTSksdC5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLFcpLHQucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLCQpLHQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLEYpfTtpZihlLnNpZ25hbCYmIUQpe2NvbnN0IGk9KCk9Pntjb25zdCByPW47SCgpLHIuY2FsbCh0LG5ldyBvKHZvaWQgMCx7Y2F1c2U6ZS5zaWduYWwucmVhc29ufSkpfTtpZihlLnNpZ25hbC5hYm9ydGVkKXIubmV4dFRpY2soaSk7ZWxzZXtjb25zdCByPW47bj1sKCgoLi4ubik9PntlLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIixpKSxyLmFwcGx5KHQsbil9KSksZS5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsaSl9fXJldHVybiBIfXQuZXhwb3J0cz1rLHQuZXhwb3J0cy5maW5pc2hlZD1mdW5jdGlvbih0LGUpe3ZhciBuO2xldCByPSExO3JldHVybiBudWxsPT09ZSYmKGU9dSksbnVsbCE9PShuPWUpJiZ2b2lkIDAhPT1uJiZuLmNsZWFudXAmJihoKGUuY2xlYW51cCxcImNsZWFudXBcIikscj1lLmNsZWFudXApLG5ldyBwKCgobixvKT0+e2NvbnN0IGk9ayh0LGUsKHQ9PntyJiZpKCksdD9vKHQpOm4oKX0pKX0pKX19LDkxMzoodCxlLG4pPT57Y29uc3Qgcj1uKDUzMykse1Byb21pc2VQcm90b3R5cGVUaGVuOm8sU3ltYm9sQXN5bmNJdGVyYXRvcjppLFN5bWJvbEl0ZXJhdG9yOmF9PW4oMTkxKSx7QnVmZmVyOnN9PW4oNDg1KSx7RVJSX0lOVkFMSURfQVJHX1RZUEU6dSxFUlJfU1RSRUFNX05VTExfVkFMVUVTOmx9PW4oMTQxKS5jb2Rlczt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe2xldCBjLGY7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBzKXJldHVybiBuZXcgdCh7b2JqZWN0TW9kZTohMCwuLi5uLHJlYWQoKXt0aGlzLnB1c2goZSksdGhpcy5wdXNoKG51bGwpfX0pO2lmKGUmJmVbaV0pZj0hMCxjPWVbaV0oKTtlbHNle2lmKCFlfHwhZVthXSl0aHJvdyBuZXcgdShcIml0ZXJhYmxlXCIsW1wiSXRlcmFibGVcIl0sZSk7Zj0hMSxjPWVbYV0oKX1jb25zdCBkPW5ldyB0KHtvYmplY3RNb2RlOiEwLGhpZ2hXYXRlck1hcms6MSwuLi5ufSk7bGV0IGg9ITE7cmV0dXJuIGQuX3JlYWQ9ZnVuY3Rpb24oKXtofHwoaD0hMCxhc3luYyBmdW5jdGlvbigpe2Zvcig7Oyl7dHJ5e2NvbnN0e3ZhbHVlOnQsZG9uZTplfT1mP2F3YWl0IGMubmV4dCgpOmMubmV4dCgpO2lmKGUpZC5wdXNoKG51bGwpO2Vsc2V7Y29uc3QgZT10JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnRoZW4/YXdhaXQgdDp0O2lmKG51bGw9PT1lKXRocm93IGg9ITEsbmV3IGw7aWYoZC5wdXNoKGUpKWNvbnRpbnVlO2g9ITF9fWNhdGNoKHQpe2QuZGVzdHJveSh0KX1icmVha319KCkpfSxkLl9kZXN0cm95PWZ1bmN0aW9uKHQsZSl7byhhc3luYyBmdW5jdGlvbih0KXtjb25zdCBlPW51bGwhPXQsbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBjLnRocm93O2lmKGUmJm4pe2NvbnN0e3ZhbHVlOmUsZG9uZTpufT1hd2FpdCBjLnRocm93KHQpO2lmKGF3YWl0IGUsbilyZXR1cm59aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYy5yZXR1cm4pe2NvbnN0e3ZhbHVlOnR9PWF3YWl0IGMucmV0dXJuKCk7YXdhaXQgdH19KHQpLCgoKT0+ci5uZXh0VGljayhlLHQpKSwobj0+ci5uZXh0VGljayhlLG58fHQpKSl9LGR9fSwyMDA6KHQsZSxuKT0+e2NvbnN0e0FycmF5SXNBcnJheTpyLE9iamVjdFNldFByb3RvdHlwZU9mOm99PW4oMTkxKSx7RXZlbnRFbWl0dGVyOml9PW4oNDY1KTtmdW5jdGlvbiBhKHQpe2kuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIHModCxlLG4pe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQucHJlcGVuZExpc3RlbmVyKXJldHVybiB0LnByZXBlbmRMaXN0ZW5lcihlLG4pO3QuX2V2ZW50cyYmdC5fZXZlbnRzW2VdP3IodC5fZXZlbnRzW2VdKT90Ll9ldmVudHNbZV0udW5zaGlmdChuKTp0Ll9ldmVudHNbZV09W24sdC5fZXZlbnRzW2VdXTp0Lm9uKGUsbil9byhhLnByb3RvdHlwZSxpLnByb3RvdHlwZSksbyhhLGkpLGEucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXM7ZnVuY3Rpb24gcihlKXt0LndyaXRhYmxlJiYhMT09PXQud3JpdGUoZSkmJm4ucGF1c2UmJm4ucGF1c2UoKX1mdW5jdGlvbiBvKCl7bi5yZWFkYWJsZSYmbi5yZXN1bWUmJm4ucmVzdW1lKCl9bi5vbihcImRhdGFcIixyKSx0Lm9uKFwiZHJhaW5cIixvKSx0Ll9pc1N0ZGlvfHxlJiYhMT09PWUuZW5kfHwobi5vbihcImVuZFwiLHUpLG4ub24oXCJjbG9zZVwiLGwpKTtsZXQgYT0hMTtmdW5jdGlvbiB1KCl7YXx8KGE9ITAsdC5lbmQoKSl9ZnVuY3Rpb24gbCgpe2F8fChhPSEwLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZGVzdHJveSYmdC5kZXN0cm95KCkpfWZ1bmN0aW9uIGModCl7ZigpLDA9PT1pLmxpc3RlbmVyQ291bnQodGhpcyxcImVycm9yXCIpJiZ0aGlzLmVtaXQoXCJlcnJvclwiLHQpfWZ1bmN0aW9uIGYoKXtuLnJlbW92ZUxpc3RlbmVyKFwiZGF0YVwiLHIpLHQucmVtb3ZlTGlzdGVuZXIoXCJkcmFpblwiLG8pLG4ucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIix1KSxuLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixsKSxuLnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixjKSx0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixjKSxuLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsZiksbi5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsZiksdC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsZil9cmV0dXJuIHMobixcImVycm9yXCIsYykscyh0LFwiZXJyb3JcIixjKSxuLm9uKFwiZW5kXCIsZiksbi5vbihcImNsb3NlXCIsZiksdC5vbihcImNsb3NlXCIsZiksdC5lbWl0KFwicGlwZVwiLG4pLHR9LHQuZXhwb3J0cz17U3RyZWFtOmEscHJlcGVuZExpc3RlbmVyOnN9fSw1NTQ6KHQsZSxuKT0+e2NvbnN0IHI9Z2xvYmFsVGhpcy5BYm9ydENvbnRyb2xsZXJ8fG4oODc2KS5BYm9ydENvbnRyb2xsZXIse2NvZGVzOntFUlJfSU5WQUxJRF9BUkdfVkFMVUU6byxFUlJfSU5WQUxJRF9BUkdfVFlQRTppLEVSUl9NSVNTSU5HX0FSR1M6YSxFUlJfT1VUX09GX1JBTkdFOnN9LEFib3J0RXJyb3I6dX09bigxNDEpLHt2YWxpZGF0ZUFib3J0U2lnbmFsOmwsdmFsaWRhdGVJbnRlZ2VyOmMsdmFsaWRhdGVPYmplY3Q6Zn09big5MDQpLGQ9bigxOTEpLlN5bWJvbChcImtXZWFrXCIpLHtmaW5pc2hlZDpofT1uKDg2KSxwPW4oODE4KSx7YWRkQWJvcnRTaWduYWxOb1ZhbGlkYXRlOmd9PW4oMzc0KSx7aXNXcml0YWJsZTp5LGlzTm9kZVN0cmVhbTptfT1uKDEzMikse0FycmF5UHJvdG90eXBlUHVzaDp2LE1hdGhGbG9vcjpiLE51bWJlcjp3LE51bWJlcklzTmFOOl8sUHJvbWlzZTpFLFByb21pc2VSZWplY3Q6UyxQcm9taXNlUHJvdG90eXBlVGhlbjpBLFN5bWJvbDpJfT1uKDE5MSksVD1JKFwia0VtcHR5XCIpLFI9SShcImtFb2ZcIik7ZnVuY3Rpb24geCh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IGkoXCJmblwiLFtcIkZ1bmN0aW9uXCIsXCJBc3luY0Z1bmN0aW9uXCJdLHQpO251bGwhPWUmJmYoZSxcIm9wdGlvbnNcIiksbnVsbCE9KG51bGw9PWU/dm9pZCAwOmUuc2lnbmFsKSYmbChlLnNpZ25hbCxcIm9wdGlvbnMuc2lnbmFsXCIpO2xldCBuPTE7cmV0dXJuIG51bGwhPShudWxsPT1lP3ZvaWQgMDplLmNvbmN1cnJlbmN5KSYmKG49YihlLmNvbmN1cnJlbmN5KSksYyhuLFwiY29uY3VycmVuY3lcIiwxKSxhc3luYyBmdW5jdGlvbiooKXt2YXIgbyxpO2NvbnN0IGE9bmV3IHIscz10aGlzLGw9W10sYz1hLnNpZ25hbCxmPXtzaWduYWw6Y30sZD0oKT0+YS5hYm9ydCgpO2xldCBoLHA7bnVsbCE9ZSYmbnVsbCE9PShvPWUuc2lnbmFsKSYmdm9pZCAwIT09byYmby5hYm9ydGVkJiZkKCksbnVsbD09ZXx8bnVsbD09PShpPWUuc2lnbmFsKXx8dm9pZCAwPT09aXx8aS5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIixkKTtsZXQgZz0hMTtmdW5jdGlvbiB5KCl7Zz0hMH0hYXN5bmMgZnVuY3Rpb24oKXt0cnl7Zm9yIGF3YWl0KGxldCBlIG9mIHMpe3ZhciByO2lmKGcpcmV0dXJuO2lmKGMuYWJvcnRlZCl0aHJvdyBuZXcgdTt0cnl7ZT10KGUsZil9Y2F0Y2godCl7ZT1TKHQpfWUhPT1UJiYoXCJmdW5jdGlvblwiPT10eXBlb2YobnVsbD09PShyPWUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmNhdGNoKSYmZS5jYXRjaCh5KSxsLnB1c2goZSksaCYmKGgoKSxoPW51bGwpLCFnJiZsLmxlbmd0aCYmbC5sZW5ndGg+PW4mJmF3YWl0IG5ldyBFKCh0PT57cD10fSkpKX1sLnB1c2goUil9Y2F0Y2godCl7Y29uc3QgZT1TKHQpO0EoZSx2b2lkIDAseSksbC5wdXNoKGUpfWZpbmFsbHl7dmFyIG87Zz0hMCxoJiYoaCgpLGg9bnVsbCksbnVsbD09ZXx8bnVsbD09PShvPWUuc2lnbmFsKXx8dm9pZCAwPT09b3x8by5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIixkKX19KCk7dHJ5e2Zvcig7Oyl7Zm9yKDtsLmxlbmd0aD4wOyl7Y29uc3QgdD1hd2FpdCBsWzBdO2lmKHQ9PT1SKXJldHVybjtpZihjLmFib3J0ZWQpdGhyb3cgbmV3IHU7dCE9PVQmJih5aWVsZCB0KSxsLnNoaWZ0KCkscCYmKHAoKSxwPW51bGwpfWF3YWl0IG5ldyBFKCh0PT57aD10fSkpfX1maW5hbGx5e2EuYWJvcnQoKSxnPSEwLHAmJihwKCkscD1udWxsKX19LmNhbGwodGhpcyl9YXN5bmMgZnVuY3Rpb24gQyh0LGU9dm9pZCAwKXtmb3IgYXdhaXQoY29uc3QgbiBvZiBCLmNhbGwodGhpcyx0LGUpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEIodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBpKFwiZm5cIixbXCJGdW5jdGlvblwiLFwiQXN5bmNGdW5jdGlvblwiXSx0KTtyZXR1cm4geC5jYWxsKHRoaXMsKGFzeW5jIGZ1bmN0aW9uKGUsbil7cmV0dXJuIGF3YWl0IHQoZSxuKT9lOlR9KSxlKX1jbGFzcyBrIGV4dGVuZHMgYXtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwicmVkdWNlXCIpLHRoaXMubWVzc2FnZT1cIlJlZHVjZSBvZiBhbiBlbXB0eSBzdHJlYW0gcmVxdWlyZXMgYW4gaW5pdGlhbCB2YWx1ZVwifX1mdW5jdGlvbiBMKHQpe2lmKHQ9dyh0KSxfKHQpKXJldHVybiAwO2lmKHQ8MCl0aHJvdyBuZXcgcyhcIm51bWJlclwiLFwiPj0gMFwiLHQpO3JldHVybiB0fXQuZXhwb3J0cy5zdHJlYW1SZXR1cm5pbmdPcGVyYXRvcnM9e2FzSW5kZXhlZFBhaXJzOmZ1bmN0aW9uKHQ9dm9pZCAwKXtyZXR1cm4gbnVsbCE9dCYmZih0LFwib3B0aW9uc1wiKSxudWxsIT0obnVsbD09dD92b2lkIDA6dC5zaWduYWwpJiZsKHQuc2lnbmFsLFwib3B0aW9ucy5zaWduYWxcIiksYXN5bmMgZnVuY3Rpb24qKCl7bGV0IGU9MDtmb3IgYXdhaXQoY29uc3QgciBvZiB0aGlzKXt2YXIgbjtpZihudWxsIT10JiZudWxsIT09KG49dC5zaWduYWwpJiZ2b2lkIDAhPT1uJiZuLmFib3J0ZWQpdGhyb3cgbmV3IHUoe2NhdXNlOnQuc2lnbmFsLnJlYXNvbn0pO3lpZWxkW2UrKyxyXX19LmNhbGwodGhpcyl9LGRyb3A6ZnVuY3Rpb24odCxlPXZvaWQgMCl7cmV0dXJuIG51bGwhPWUmJmYoZSxcIm9wdGlvbnNcIiksbnVsbCE9KG51bGw9PWU/dm9pZCAwOmUuc2lnbmFsKSYmbChlLnNpZ25hbCxcIm9wdGlvbnMuc2lnbmFsXCIpLHQ9TCh0KSxhc3luYyBmdW5jdGlvbiooKXt2YXIgbjtpZihudWxsIT1lJiZudWxsIT09KG49ZS5zaWduYWwpJiZ2b2lkIDAhPT1uJiZuLmFib3J0ZWQpdGhyb3cgbmV3IHU7Zm9yIGF3YWl0KGNvbnN0IG4gb2YgdGhpcyl7dmFyIHI7aWYobnVsbCE9ZSYmbnVsbCE9PShyPWUuc2lnbmFsKSYmdm9pZCAwIT09ciYmci5hYm9ydGVkKXRocm93IG5ldyB1O3QtLTw9MCYmKHlpZWxkIG4pfX0uY2FsbCh0aGlzKX0sZmlsdGVyOkIsZmxhdE1hcDpmdW5jdGlvbih0LGUpe2NvbnN0IG49eC5jYWxsKHRoaXMsdCxlKTtyZXR1cm4gYXN5bmMgZnVuY3Rpb24qKCl7Zm9yIGF3YWl0KGNvbnN0IHQgb2Ygbil5aWVsZCp0fS5jYWxsKHRoaXMpfSxtYXA6eCx0YWtlOmZ1bmN0aW9uKHQsZT12b2lkIDApe3JldHVybiBudWxsIT1lJiZmKGUsXCJvcHRpb25zXCIpLG51bGwhPShudWxsPT1lP3ZvaWQgMDplLnNpZ25hbCkmJmwoZS5zaWduYWwsXCJvcHRpb25zLnNpZ25hbFwiKSx0PUwodCksYXN5bmMgZnVuY3Rpb24qKCl7dmFyIG47aWYobnVsbCE9ZSYmbnVsbCE9PShuPWUuc2lnbmFsKSYmdm9pZCAwIT09biYmbi5hYm9ydGVkKXRocm93IG5ldyB1O2ZvciBhd2FpdChjb25zdCBuIG9mIHRoaXMpe3ZhciByO2lmKG51bGwhPWUmJm51bGwhPT0ocj1lLnNpZ25hbCkmJnZvaWQgMCE9PXImJnIuYWJvcnRlZCl0aHJvdyBuZXcgdTtpZighKHQtLSA+MCkpcmV0dXJuO3lpZWxkIG59fS5jYWxsKHRoaXMpfSxjb21wb3NlOmZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9ZSYmZihlLFwib3B0aW9uc1wiKSxudWxsIT0obnVsbD09ZT92b2lkIDA6ZS5zaWduYWwpJiZsKGUuc2lnbmFsLFwib3B0aW9ucy5zaWduYWxcIiksbSh0KSYmIXkodCkpdGhyb3cgbmV3IG8oXCJzdHJlYW1cIix0LFwibXVzdCBiZSB3cml0YWJsZVwiKTtjb25zdCBuPXAodGhpcyx0KTtyZXR1cm4gbnVsbCE9ZSYmZS5zaWduYWwmJmcoZS5zaWduYWwsbiksbn19LHQuZXhwb3J0cy5wcm9taXNlUmV0dXJuaW5nT3BlcmF0b3JzPXtldmVyeTphc3luYyBmdW5jdGlvbih0LGU9dm9pZCAwKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBpKFwiZm5cIixbXCJGdW5jdGlvblwiLFwiQXN5bmNGdW5jdGlvblwiXSx0KTtyZXR1cm4hYXdhaXQgQy5jYWxsKHRoaXMsKGFzeW5jKC4uLmUpPT4hYXdhaXQgdCguLi5lKSksZSl9LGZvckVhY2g6YXN5bmMgZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBpKFwiZm5cIixbXCJGdW5jdGlvblwiLFwiQXN5bmNGdW5jdGlvblwiXSx0KTtmb3IgYXdhaXQoY29uc3QgbiBvZiB4LmNhbGwodGhpcywoYXN5bmMgZnVuY3Rpb24oZSxuKXtyZXR1cm4gYXdhaXQgdChlLG4pLFR9KSxlKSk7fSxyZWR1Y2U6YXN5bmMgZnVuY3Rpb24odCxlLG4pe3ZhciBvO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IGkoXCJyZWR1Y2VyXCIsW1wiRnVuY3Rpb25cIixcIkFzeW5jRnVuY3Rpb25cIl0sdCk7bnVsbCE9biYmZihuLFwib3B0aW9uc1wiKSxudWxsIT0obnVsbD09bj92b2lkIDA6bi5zaWduYWwpJiZsKG4uc2lnbmFsLFwib3B0aW9ucy5zaWduYWxcIik7bGV0IGE9YXJndW1lbnRzLmxlbmd0aD4xO2lmKG51bGwhPW4mJm51bGwhPT0obz1uLnNpZ25hbCkmJnZvaWQgMCE9PW8mJm8uYWJvcnRlZCl7Y29uc3QgdD1uZXcgdSh2b2lkIDAse2NhdXNlOm4uc2lnbmFsLnJlYXNvbn0pO3Rocm93IHRoaXMub25jZShcImVycm9yXCIsKCgpPT57fSkpLGF3YWl0IGgodGhpcy5kZXN0cm95KHQpKSx0fWNvbnN0IHM9bmV3IHIsYz1zLnNpZ25hbDtpZihudWxsIT1uJiZuLnNpZ25hbCl7Y29uc3QgdD17b25jZTohMCxbZF06dGhpc307bi5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsKCgpPT5zLmFib3J0KCkpLHQpfWxldCBwPSExO3RyeXtmb3IgYXdhaXQoY29uc3QgciBvZiB0aGlzKXt2YXIgZztpZihwPSEwLG51bGwhPW4mJm51bGwhPT0oZz1uLnNpZ25hbCkmJnZvaWQgMCE9PWcmJmcuYWJvcnRlZCl0aHJvdyBuZXcgdTthP2U9YXdhaXQgdChlLHIse3NpZ25hbDpjfSk6KGU9cixhPSEwKX1pZighcCYmIWEpdGhyb3cgbmV3IGt9ZmluYWxseXtzLmFib3J0KCl9cmV0dXJuIGV9LHRvQXJyYXk6YXN5bmMgZnVuY3Rpb24odCl7bnVsbCE9dCYmZih0LFwib3B0aW9uc1wiKSxudWxsIT0obnVsbD09dD92b2lkIDA6dC5zaWduYWwpJiZsKHQuc2lnbmFsLFwib3B0aW9ucy5zaWduYWxcIik7Y29uc3QgZT1bXTtmb3IgYXdhaXQoY29uc3QgciBvZiB0aGlzKXt2YXIgbjtpZihudWxsIT10JiZudWxsIT09KG49dC5zaWduYWwpJiZ2b2lkIDAhPT1uJiZuLmFib3J0ZWQpdGhyb3cgbmV3IHUodm9pZCAwLHtjYXVzZTp0LnNpZ25hbC5yZWFzb259KTt2KGUscil9cmV0dXJuIGV9LHNvbWU6QyxmaW5kOmFzeW5jIGZ1bmN0aW9uKHQsZSl7Zm9yIGF3YWl0KGNvbnN0IG4gb2YgQi5jYWxsKHRoaXMsdCxlKSlyZXR1cm4gbn19fSw0Njc6KHQsZSxuKT0+e2NvbnN0e09iamVjdFNldFByb3RvdHlwZU9mOnJ9PW4oMTkxKTt0LmV4cG9ydHM9aTtjb25zdCBvPW4oMjEwKTtmdW5jdGlvbiBpKHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGkpKXJldHVybiBuZXcgaSh0KTtvLmNhbGwodGhpcyx0KX1yKGkucHJvdG90eXBlLG8ucHJvdG90eXBlKSxyKGksbyksaS5wcm90b3R5cGUuX3RyYW5zZm9ybT1mdW5jdGlvbih0LGUsbil7bihudWxsLHQpfX0sNzU0Oih0LGUsbik9Pntjb25zdCByPW4oNTMzKSx7QXJyYXlJc0FycmF5Om8sUHJvbWlzZTppLFN5bWJvbEFzeW5jSXRlcmF0b3I6YX09bigxOTEpLHM9big4Nikse29uY2U6dX09big3NzUpLGw9bigyMzApLGM9bigxODIpLHthZ2dyZWdhdGVUd29FcnJvcnM6Zixjb2Rlczp7RVJSX0lOVkFMSURfQVJHX1RZUEU6ZCxFUlJfSU5WQUxJRF9SRVRVUk5fVkFMVUU6aCxFUlJfTUlTU0lOR19BUkdTOnAsRVJSX1NUUkVBTV9ERVNUUk9ZRUQ6ZyxFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRTp5fSxBYm9ydEVycm9yOm19PW4oMTQxKSx7dmFsaWRhdGVGdW5jdGlvbjp2LHZhbGlkYXRlQWJvcnRTaWduYWw6Yn09big5MDQpLHtpc0l0ZXJhYmxlOncsaXNSZWFkYWJsZTpfLGlzUmVhZGFibGVOb2RlU3RyZWFtOkUsaXNOb2RlU3RyZWFtOlMsaXNUcmFuc2Zvcm1TdHJlYW06QSxpc1dlYlN0cmVhbTpJLGlzUmVhZGFibGVTdHJlYW06VCxpc1JlYWRhYmxlRW5kZWQ6Un09bigxMzIpLHg9Z2xvYmFsVGhpcy5BYm9ydENvbnRyb2xsZXJ8fG4oODc2KS5BYm9ydENvbnRyb2xsZXI7bGV0IEMsQjtmdW5jdGlvbiBrKHQsZSxuKXtsZXQgcj0hMTt0Lm9uKFwiY2xvc2VcIiwoKCk9PntyPSEwfSkpO3JldHVybntkZXN0cm95OmU9PntyfHwocj0hMCxsLmRlc3Ryb3llcih0LGV8fG5ldyBnKFwicGlwZVwiKSkpfSxjbGVhbnVwOnModCx7cmVhZGFibGU6ZSx3cml0YWJsZTpufSwodD0+e3I9IXR9KSl9fWZ1bmN0aW9uIEwodCl7aWYodyh0KSlyZXR1cm4gdDtpZihFKHQpKXJldHVybiBhc3luYyBmdW5jdGlvbioodCl7Qnx8KEI9big4NTgpKTt5aWVsZCpCLnByb3RvdHlwZVthXS5jYWxsKHQpfSh0KTt0aHJvdyBuZXcgZChcInZhbFwiLFtcIlJlYWRhYmxlXCIsXCJJdGVyYWJsZVwiLFwiQXN5bmNJdGVyYWJsZVwiXSx0KX1hc3luYyBmdW5jdGlvbiBPKHQsZSxuLHtlbmQ6cn0pe2xldCBvLGE9bnVsbDtjb25zdCB1PXQ9PntpZih0JiYobz10KSxhKXtjb25zdCB0PWE7YT1udWxsLHQoKX19LGw9KCk9Pm5ldyBpKCgodCxlKT0+e28/ZShvKTphPSgpPT57bz9lKG8pOnQoKX19KSk7ZS5vbihcImRyYWluXCIsdSk7Y29uc3QgYz1zKGUse3JlYWRhYmxlOiExfSx1KTt0cnl7ZS53cml0YWJsZU5lZWREcmFpbiYmYXdhaXQgbCgpO2ZvciBhd2FpdChjb25zdCBuIG9mIHQpZS53cml0ZShuKXx8YXdhaXQgbCgpO3ImJmUuZW5kKCksYXdhaXQgbCgpLG4oKX1jYXRjaCh0KXtuKG8hPT10P2Yobyx0KTp0KX1maW5hbGx5e2MoKSxlLm9mZihcImRyYWluXCIsdSl9fWFzeW5jIGZ1bmN0aW9uIFUodCxlLG4se2VuZDpyfSl7QShlKSYmKGU9ZS53cml0YWJsZSk7Y29uc3Qgbz1lLmdldFdyaXRlcigpO3RyeXtmb3IgYXdhaXQoY29uc3QgZSBvZiB0KWF3YWl0IG8ucmVhZHksby53cml0ZShlKS5jYXRjaCgoKCk9Pnt9KSk7YXdhaXQgby5yZWFkeSxyJiZhd2FpdCBvLmNsb3NlKCksbigpfWNhdGNoKHQpe3RyeXthd2FpdCBvLmFib3J0KHQpLG4odCl9Y2F0Y2godCl7bih0KX19fWZ1bmN0aW9uIGoodCxlLGkpe2lmKDE9PT10Lmxlbmd0aCYmbyh0WzBdKSYmKHQ9dFswXSksdC5sZW5ndGg8Mil0aHJvdyBuZXcgcChcInN0cmVhbXNcIik7Y29uc3QgYT1uZXcgeCxzPWEuc2lnbmFsLHU9bnVsbD09aT92b2lkIDA6aS5zaWduYWwsbD1bXTtmdW5jdGlvbiBmKCl7TShuZXcgbSl9bGV0IGcseTtiKHUsXCJvcHRpb25zLnNpZ25hbFwiKSxudWxsPT11fHx1LmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLGYpO2NvbnN0IHY9W107bGV0IFIsQj0wO2Z1bmN0aW9uIGoodCl7TSh0LDA9PS0tQil9ZnVuY3Rpb24gTSh0LG4pe2lmKCF0fHxnJiZcIkVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFXCIhPT1nLmNvZGV8fChnPXQpLGd8fG4pe2Zvcig7di5sZW5ndGg7KXYuc2hpZnQoKShnKTtudWxsPT11fHx1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLGYpLGEuYWJvcnQoKSxuJiYoZ3x8bC5mb3JFYWNoKCh0PT50KCkpKSxyLm5leHRUaWNrKGUsZyx5KSl9fWZvcihsZXQgRD0wO0Q8dC5sZW5ndGg7RCsrKXtjb25zdCBGPXRbRF0sej1EPHQubGVuZ3RoLTEscT1EPjAsSD16fHwhMSE9PShudWxsPT1pP3ZvaWQgMDppLmVuZCksVj1EPT09dC5sZW5ndGgtMTtpZihTKEYpKXtpZihIKXtjb25zdHtkZXN0cm95OkcsY2xlYW51cDpKfT1rKEYseixxKTt2LnB1c2goRyksXyhGKSYmViYmbC5wdXNoKEopfWZ1bmN0aW9uIFAodCl7dCYmXCJBYm9ydEVycm9yXCIhPT10Lm5hbWUmJlwiRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0VcIiE9PXQuY29kZSYmaih0KX1GLm9uKFwiZXJyb3JcIixQKSxfKEYpJiZWJiZsLnB1c2goKCgpPT57Ri5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsUCl9KSl9aWYoMD09PUQpaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgRil7aWYoUj1GKHtzaWduYWw6c30pLCF3KFIpKXRocm93IG5ldyBoKFwiSXRlcmFibGUsIEFzeW5jSXRlcmFibGUgb3IgU3RyZWFtXCIsXCJzb3VyY2VcIixSKX1lbHNlIFI9dyhGKXx8RShGKXx8QShGKT9GOmMuZnJvbShGKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEYpe3ZhciBXO2lmKEEoUikpUj1MKG51bGw9PT0oVz1SKXx8dm9pZCAwPT09Vz92b2lkIDA6Vy5yZWFkYWJsZSk7ZWxzZSBSPUwoUik7aWYoUj1GKFIse3NpZ25hbDpzfSkseil7aWYoIXcoUiwhMCkpdGhyb3cgbmV3IGgoXCJBc3luY0l0ZXJhYmxlXCIsYHRyYW5zZm9ybVske0QtMX1dYCxSKX1lbHNle3ZhciAkO0N8fChDPW4oNDY3KSk7Y29uc3QgWT1uZXcgQyh7b2JqZWN0TW9kZTohMH0pLEs9bnVsbD09PSgkPVIpfHx2b2lkIDA9PT0kP3ZvaWQgMDokLnRoZW47aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgSylCKyssSy5jYWxsKFIsKHQ9Pnt5PXQsbnVsbCE9dCYmWS53cml0ZSh0KSxIJiZZLmVuZCgpLHIubmV4dFRpY2soail9KSwodD0+e1kuZGVzdHJveSh0KSxyLm5leHRUaWNrKGosdCl9KSk7ZWxzZSBpZih3KFIsITApKUIrKyxPKFIsWSxqLHtlbmQ6SH0pO2Vsc2V7aWYoIVQoUikmJiFBKFIpKXRocm93IG5ldyBoKFwiQXN5bmNJdGVyYWJsZSBvciBQcm9taXNlXCIsXCJkZXN0aW5hdGlvblwiLFIpO3tjb25zdCBRPVIucmVhZGFibGV8fFI7QisrLE8oUSxZLGose2VuZDpIfSl9fVI9WTtjb25zdHtkZXN0cm95OlgsY2xlYW51cDpafT1rKFIsITEsITApO3YucHVzaChYKSxWJiZsLnB1c2goWil9fWVsc2UgaWYoUyhGKSl7aWYoRShSKSl7Qis9Mjtjb25zdCB0dD1OKFIsRixqLHtlbmQ6SH0pO18oRikmJlYmJmwucHVzaCh0dCl9ZWxzZSBpZihBKFIpfHxUKFIpKXtjb25zdCBldD1SLnJlYWRhYmxlfHxSO0IrKyxPKGV0LEYsaix7ZW5kOkh9KX1lbHNle2lmKCF3KFIpKXRocm93IG5ldyBkKFwidmFsXCIsW1wiUmVhZGFibGVcIixcIkl0ZXJhYmxlXCIsXCJBc3luY0l0ZXJhYmxlXCIsXCJSZWFkYWJsZVN0cmVhbVwiLFwiVHJhbnNmb3JtU3RyZWFtXCJdLFIpO0IrKyxPKFIsRixqLHtlbmQ6SH0pfVI9Rn1lbHNlIGlmKEkoRikpe2lmKEUoUikpQisrLFUoTChSKSxGLGose2VuZDpIfSk7ZWxzZSBpZihUKFIpfHx3KFIpKUIrKyxVKFIsRixqLHtlbmQ6SH0pO2Vsc2V7aWYoIUEoUikpdGhyb3cgbmV3IGQoXCJ2YWxcIixbXCJSZWFkYWJsZVwiLFwiSXRlcmFibGVcIixcIkFzeW5jSXRlcmFibGVcIixcIlJlYWRhYmxlU3RyZWFtXCIsXCJUcmFuc2Zvcm1TdHJlYW1cIl0sUik7QisrLFUoUi5yZWFkYWJsZSxGLGose2VuZDpIfSl9Uj1GfWVsc2UgUj1jLmZyb20oRil9cmV0dXJuKG51bGwhPXMmJnMuYWJvcnRlZHx8bnVsbCE9dSYmdS5hYm9ydGVkKSYmci5uZXh0VGljayhmKSxSfWZ1bmN0aW9uIE4odCxlLG4se2VuZDpvfSl7bGV0IGk9ITE7aWYoZS5vbihcImNsb3NlXCIsKCgpPT57aXx8bihuZXcgeSl9KSksdC5waXBlKGUse2VuZDohMX0pLG8pe2Z1bmN0aW9uIGEoKXtpPSEwLGUuZW5kKCl9Uih0KT9yLm5leHRUaWNrKGEpOnQub25jZShcImVuZFwiLGEpfWVsc2UgbigpO3JldHVybiBzKHQse3JlYWRhYmxlOiEwLHdyaXRhYmxlOiExfSwoZT0+e2NvbnN0IHI9dC5fcmVhZGFibGVTdGF0ZTtlJiZcIkVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFXCI9PT1lLmNvZGUmJnImJnIuZW5kZWQmJiFyLmVycm9yZWQmJiFyLmVycm9yRW1pdHRlZD90Lm9uY2UoXCJlbmRcIixuKS5vbmNlKFwiZXJyb3JcIixuKTpuKGUpfSkpLHMoZSx7cmVhZGFibGU6ITEsd3JpdGFibGU6ITB9LG4pfXQuZXhwb3J0cz17cGlwZWxpbmVJbXBsOmoscGlwZWxpbmU6ZnVuY3Rpb24oLi4udCl7cmV0dXJuIGoodCx1KGZ1bmN0aW9uKHQpe3JldHVybiB2KHRbdC5sZW5ndGgtMV0sXCJzdHJlYW1zW3N0cmVhbS5sZW5ndGggLSAxXVwiKSx0LnBvcCgpfSh0KSkpfX19LDg1ODoodCxlLG4pPT57Y29uc3Qgcj1uKDUzMykse0FycmF5UHJvdG90eXBlSW5kZXhPZjpvLE51bWJlcklzSW50ZWdlcjppLE51bWJlcklzTmFOOmEsTnVtYmVyUGFyc2VJbnQ6cyxPYmplY3REZWZpbmVQcm9wZXJ0aWVzOnUsT2JqZWN0S2V5czpsLE9iamVjdFNldFByb3RvdHlwZU9mOmMsUHJvbWlzZTpmLFNhZmVTZXQ6ZCxTeW1ib2xBc3luY0l0ZXJhdG9yOmgsU3ltYm9sOnB9PW4oMTkxKTt0LmV4cG9ydHM9VyxXLlJlYWRhYmxlU3RhdGU9UDtjb25zdHtFdmVudEVtaXR0ZXI6Z309big0NjUpLHtTdHJlYW06eSxwcmVwZW5kTGlzdGVuZXI6bX09bigyMDApLHtCdWZmZXI6dn09big0ODUpLHthZGRBYm9ydFNpZ25hbDpifT1uKDM3NCksdz1uKDg2KTtsZXQgXz1uKDc3NSkuZGVidWdsb2coXCJzdHJlYW1cIiwodD0+e189dH0pKTtjb25zdCBFPW4oNjE2KSxTPW4oMjMwKSx7Z2V0SGlnaFdhdGVyTWFyazpBLGdldERlZmF1bHRIaWdoV2F0ZXJNYXJrOkl9PW4oNDk4KSx7YWdncmVnYXRlVHdvRXJyb3JzOlQsY29kZXM6e0VSUl9JTlZBTElEX0FSR19UWVBFOlIsRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQ6eCxFUlJfT1VUX09GX1JBTkdFOkMsRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRjpCLEVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQ6a319PW4oMTQxKSx7dmFsaWRhdGVPYmplY3Q6TH09big5MDQpLE89cChcImtQYXVzZWRcIikse1N0cmluZ0RlY29kZXI6VX09big0NjQpLGo9big5MTMpO2MoVy5wcm90b3R5cGUseS5wcm90b3R5cGUpLGMoVyx5KTtjb25zdCBOPSgpPT57fSx7ZXJyb3JPckRlc3Ryb3k6TX09UztmdW5jdGlvbiBQKHQsZSxyKXtcImJvb2xlYW5cIiE9dHlwZW9mIHImJihyPWUgaW5zdGFuY2VvZiBuKDE4MikpLHRoaXMub2JqZWN0TW9kZT0hKCF0fHwhdC5vYmplY3RNb2RlKSxyJiYodGhpcy5vYmplY3RNb2RlPXRoaXMub2JqZWN0TW9kZXx8ISghdHx8IXQucmVhZGFibGVPYmplY3RNb2RlKSksdGhpcy5oaWdoV2F0ZXJNYXJrPXQ/QSh0aGlzLHQsXCJyZWFkYWJsZUhpZ2hXYXRlck1hcmtcIixyKTpJKCExKSx0aGlzLmJ1ZmZlcj1uZXcgRSx0aGlzLmxlbmd0aD0wLHRoaXMucGlwZXM9W10sdGhpcy5mbG93aW5nPW51bGwsdGhpcy5lbmRlZD0hMSx0aGlzLmVuZEVtaXR0ZWQ9ITEsdGhpcy5yZWFkaW5nPSExLHRoaXMuY29uc3RydWN0ZWQ9ITAsdGhpcy5zeW5jPSEwLHRoaXMubmVlZFJlYWRhYmxlPSExLHRoaXMuZW1pdHRlZFJlYWRhYmxlPSExLHRoaXMucmVhZGFibGVMaXN0ZW5pbmc9ITEsdGhpcy5yZXN1bWVTY2hlZHVsZWQ9ITEsdGhpc1tPXT1udWxsLHRoaXMuZXJyb3JFbWl0dGVkPSExLHRoaXMuZW1pdENsb3NlPSF0fHwhMSE9PXQuZW1pdENsb3NlLHRoaXMuYXV0b0Rlc3Ryb3k9IXR8fCExIT09dC5hdXRvRGVzdHJveSx0aGlzLmRlc3Ryb3llZD0hMSx0aGlzLmVycm9yZWQ9bnVsbCx0aGlzLmNsb3NlZD0hMSx0aGlzLmNsb3NlRW1pdHRlZD0hMSx0aGlzLmRlZmF1bHRFbmNvZGluZz10JiZ0LmRlZmF1bHRFbmNvZGluZ3x8XCJ1dGY4XCIsdGhpcy5hd2FpdERyYWluV3JpdGVycz1udWxsLHRoaXMubXVsdGlBd2FpdERyYWluPSExLHRoaXMucmVhZGluZ01vcmU9ITEsdGhpcy5kYXRhRW1pdHRlZD0hMSx0aGlzLmRlY29kZXI9bnVsbCx0aGlzLmVuY29kaW5nPW51bGwsdCYmdC5lbmNvZGluZyYmKHRoaXMuZGVjb2Rlcj1uZXcgVSh0LmVuY29kaW5nKSx0aGlzLmVuY29kaW5nPXQuZW5jb2RpbmcpfWZ1bmN0aW9uIFcodCl7aWYoISh0aGlzIGluc3RhbmNlb2YgVykpcmV0dXJuIG5ldyBXKHQpO2NvbnN0IGU9dGhpcyBpbnN0YW5jZW9mIG4oMTgyKTt0aGlzLl9yZWFkYWJsZVN0YXRlPW5ldyBQKHQsdGhpcyxlKSx0JiYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5yZWFkJiYodGhpcy5fcmVhZD10LnJlYWQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZGVzdHJveSYmKHRoaXMuX2Rlc3Ryb3k9dC5kZXN0cm95KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNvbnN0cnVjdCYmKHRoaXMuX2NvbnN0cnVjdD10LmNvbnN0cnVjdCksdC5zaWduYWwmJiFlJiZiKHQuc2lnbmFsLHRoaXMpKSx5LmNhbGwodGhpcyx0KSxTLmNvbnN0cnVjdCh0aGlzLCgoKT0+e3RoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlJiZIKHRoaXMsdGhpcy5fcmVhZGFibGVTdGF0ZSl9KSl9ZnVuY3Rpb24gJCh0LGUsbixyKXtfKFwicmVhZGFibGVBZGRDaHVua1wiLGUpO2NvbnN0IG89dC5fcmVhZGFibGVTdGF0ZTtsZXQgaTtpZihvLm9iamVjdE1vZGV8fChcInN0cmluZ1wiPT10eXBlb2YgZT8obj1ufHxvLmRlZmF1bHRFbmNvZGluZyxvLmVuY29kaW5nIT09biYmKHImJm8uZW5jb2Rpbmc/ZT12LmZyb20oZSxuKS50b1N0cmluZyhvLmVuY29kaW5nKTooZT12LmZyb20oZSxuKSxuPVwiXCIpKSk6ZSBpbnN0YW5jZW9mIHY/bj1cIlwiOnkuX2lzVWludDhBcnJheShlKT8oZT15Ll91aW50OEFycmF5VG9CdWZmZXIoZSksbj1cIlwiKTpudWxsIT1lJiYoaT1uZXcgUihcImNodW5rXCIsW1wic3RyaW5nXCIsXCJCdWZmZXJcIixcIlVpbnQ4QXJyYXlcIl0sZSkpKSxpKU0odCxpKTtlbHNlIGlmKG51bGw9PT1lKW8ucmVhZGluZz0hMSxmdW5jdGlvbih0LGUpe2lmKF8oXCJvbkVvZkNodW5rXCIpLGUuZW5kZWQpcmV0dXJuO2lmKGUuZGVjb2Rlcil7Y29uc3QgdD1lLmRlY29kZXIuZW5kKCk7dCYmdC5sZW5ndGgmJihlLmJ1ZmZlci5wdXNoKHQpLGUubGVuZ3RoKz1lLm9iamVjdE1vZGU/MTp0Lmxlbmd0aCl9ZS5lbmRlZD0hMCxlLnN5bmM/eih0KTooZS5uZWVkUmVhZGFibGU9ITEsZS5lbWl0dGVkUmVhZGFibGU9ITAscSh0KSl9KHQsbyk7ZWxzZSBpZihvLm9iamVjdE1vZGV8fGUmJmUubGVuZ3RoPjApaWYocilpZihvLmVuZEVtaXR0ZWQpTSh0LG5ldyBrKTtlbHNle2lmKG8uZGVzdHJveWVkfHxvLmVycm9yZWQpcmV0dXJuITE7RCh0LG8sZSwhMCl9ZWxzZSBpZihvLmVuZGVkKU0odCxuZXcgQik7ZWxzZXtpZihvLmRlc3Ryb3llZHx8by5lcnJvcmVkKXJldHVybiExO28ucmVhZGluZz0hMSxvLmRlY29kZXImJiFuPyhlPW8uZGVjb2Rlci53cml0ZShlKSxvLm9iamVjdE1vZGV8fDAhPT1lLmxlbmd0aD9EKHQsbyxlLCExKTpIKHQsbykpOkQodCxvLGUsITEpfWVsc2Ugcnx8KG8ucmVhZGluZz0hMSxIKHQsbykpO3JldHVybiFvLmVuZGVkJiYoby5sZW5ndGg8by5oaWdoV2F0ZXJNYXJrfHwwPT09by5sZW5ndGgpfWZ1bmN0aW9uIEQodCxlLG4scil7ZS5mbG93aW5nJiYwPT09ZS5sZW5ndGgmJiFlLnN5bmMmJnQubGlzdGVuZXJDb3VudChcImRhdGFcIik+MD8oZS5tdWx0aUF3YWl0RHJhaW4/ZS5hd2FpdERyYWluV3JpdGVycy5jbGVhcigpOmUuYXdhaXREcmFpbldyaXRlcnM9bnVsbCxlLmRhdGFFbWl0dGVkPSEwLHQuZW1pdChcImRhdGFcIixuKSk6KGUubGVuZ3RoKz1lLm9iamVjdE1vZGU/MTpuLmxlbmd0aCxyP2UuYnVmZmVyLnVuc2hpZnQobik6ZS5idWZmZXIucHVzaChuKSxlLm5lZWRSZWFkYWJsZSYmeih0KSksSCh0LGUpfVcucHJvdG90eXBlLmRlc3Ryb3k9Uy5kZXN0cm95LFcucHJvdG90eXBlLl91bmRlc3Ryb3k9Uy51bmRlc3Ryb3ksVy5wcm90b3R5cGUuX2Rlc3Ryb3k9ZnVuY3Rpb24odCxlKXtlKHQpfSxXLnByb3RvdHlwZVtnLmNhcHR1cmVSZWplY3Rpb25TeW1ib2xdPWZ1bmN0aW9uKHQpe3RoaXMuZGVzdHJveSh0KX0sVy5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0LGUpe3JldHVybiAkKHRoaXMsdCxlLCExKX0sVy5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbih0LGUpe3JldHVybiAkKHRoaXMsdCxlLCEwKX0sVy5wcm90b3R5cGUuaXNQYXVzZWQ9ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX3JlYWRhYmxlU3RhdGU7cmV0dXJuITA9PT10W09dfHwhMT09PXQuZmxvd2luZ30sVy5wcm90b3R5cGUuc2V0RW5jb2Rpbmc9ZnVuY3Rpb24odCl7Y29uc3QgZT1uZXcgVSh0KTt0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXI9ZSx0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nPXRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2Rlci5lbmNvZGluZztjb25zdCBuPXRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyO2xldCByPVwiXCI7Zm9yKGNvbnN0IHQgb2YgbilyKz1lLndyaXRlKHQpO3JldHVybiBuLmNsZWFyKCksXCJcIiE9PXImJm4ucHVzaChyKSx0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aD1yLmxlbmd0aCx0aGlzfTtmdW5jdGlvbiBGKHQsZSl7cmV0dXJuIHQ8PTB8fDA9PT1lLmxlbmd0aCYmZS5lbmRlZD8wOmUub2JqZWN0TW9kZT8xOmEodCk/ZS5mbG93aW5nJiZlLmxlbmd0aD9lLmJ1ZmZlci5maXJzdCgpLmxlbmd0aDplLmxlbmd0aDp0PD1lLmxlbmd0aD90OmUuZW5kZWQ/ZS5sZW5ndGg6MH1mdW5jdGlvbiB6KHQpe2NvbnN0IGU9dC5fcmVhZGFibGVTdGF0ZTtfKFwiZW1pdFJlYWRhYmxlXCIsZS5uZWVkUmVhZGFibGUsZS5lbWl0dGVkUmVhZGFibGUpLGUubmVlZFJlYWRhYmxlPSExLGUuZW1pdHRlZFJlYWRhYmxlfHwoXyhcImVtaXRSZWFkYWJsZVwiLGUuZmxvd2luZyksZS5lbWl0dGVkUmVhZGFibGU9ITAsci5uZXh0VGljayhxLHQpKX1mdW5jdGlvbiBxKHQpe2NvbnN0IGU9dC5fcmVhZGFibGVTdGF0ZTtfKFwiZW1pdFJlYWRhYmxlX1wiLGUuZGVzdHJveWVkLGUubGVuZ3RoLGUuZW5kZWQpLGUuZGVzdHJveWVkfHxlLmVycm9yZWR8fCFlLmxlbmd0aCYmIWUuZW5kZWR8fCh0LmVtaXQoXCJyZWFkYWJsZVwiKSxlLmVtaXR0ZWRSZWFkYWJsZT0hMSksZS5uZWVkUmVhZGFibGU9IWUuZmxvd2luZyYmIWUuZW5kZWQmJmUubGVuZ3RoPD1lLmhpZ2hXYXRlck1hcmssSyh0KX1mdW5jdGlvbiBIKHQsZSl7IWUucmVhZGluZ01vcmUmJmUuY29uc3RydWN0ZWQmJihlLnJlYWRpbmdNb3JlPSEwLHIubmV4dFRpY2soVix0LGUpKX1mdW5jdGlvbiBWKHQsZSl7Zm9yKDshZS5yZWFkaW5nJiYhZS5lbmRlZCYmKGUubGVuZ3RoPGUuaGlnaFdhdGVyTWFya3x8ZS5mbG93aW5nJiYwPT09ZS5sZW5ndGgpOyl7Y29uc3Qgbj1lLmxlbmd0aDtpZihfKFwibWF5YmVSZWFkTW9yZSByZWFkIDBcIiksdC5yZWFkKDApLG49PT1lLmxlbmd0aClicmVha31lLnJlYWRpbmdNb3JlPSExfWZ1bmN0aW9uIEcodCl7Y29uc3QgZT10Ll9yZWFkYWJsZVN0YXRlO2UucmVhZGFibGVMaXN0ZW5pbmc9dC5saXN0ZW5lckNvdW50KFwicmVhZGFibGVcIik+MCxlLnJlc3VtZVNjaGVkdWxlZCYmITE9PT1lW09dP2UuZmxvd2luZz0hMDp0Lmxpc3RlbmVyQ291bnQoXCJkYXRhXCIpPjA/dC5yZXN1bWUoKTplLnJlYWRhYmxlTGlzdGVuaW5nfHwoZS5mbG93aW5nPW51bGwpfWZ1bmN0aW9uIEoodCl7XyhcInJlYWRhYmxlIG5leHR0aWNrIHJlYWQgMFwiKSx0LnJlYWQoMCl9ZnVuY3Rpb24gWSh0LGUpe18oXCJyZXN1bWVcIixlLnJlYWRpbmcpLGUucmVhZGluZ3x8dC5yZWFkKDApLGUucmVzdW1lU2NoZWR1bGVkPSExLHQuZW1pdChcInJlc3VtZVwiKSxLKHQpLGUuZmxvd2luZyYmIWUucmVhZGluZyYmdC5yZWFkKDApfWZ1bmN0aW9uIEsodCl7Y29uc3QgZT10Ll9yZWFkYWJsZVN0YXRlO2ZvcihfKFwiZmxvd1wiLGUuZmxvd2luZyk7ZS5mbG93aW5nJiZudWxsIT09dC5yZWFkKCk7KTt9ZnVuY3Rpb24gWCh0LGUpe1wiZnVuY3Rpb25cIiE9dHlwZW9mIHQucmVhZCYmKHQ9Vy53cmFwKHQse29iamVjdE1vZGU6ITB9KSk7Y29uc3Qgbj1hc3luYyBmdW5jdGlvbioodCxlKXtsZXQgbixyPU47ZnVuY3Rpb24gbyhlKXt0aGlzPT09dD8ocigpLHI9Tik6cj1lfXQub24oXCJyZWFkYWJsZVwiLG8pO2NvbnN0IGk9dyh0LHt3cml0YWJsZTohMX0sKHQ9PntuPXQ/VChuLHQpOm51bGwscigpLHI9Tn0pKTt0cnl7Zm9yKDs7KXtjb25zdCBlPXQuZGVzdHJveWVkP251bGw6dC5yZWFkKCk7aWYobnVsbCE9PWUpeWllbGQgZTtlbHNle2lmKG4pdGhyb3cgbjtpZihudWxsPT09bilyZXR1cm47YXdhaXQgbmV3IGYobyl9fX1jYXRjaCh0KXt0aHJvdyBuPVQobix0KSxufWZpbmFsbHl7IW4mJiExPT09KG51bGw9PWU/dm9pZCAwOmUuZGVzdHJveU9uUmV0dXJuKXx8dm9pZCAwIT09biYmIXQuX3JlYWRhYmxlU3RhdGUuYXV0b0Rlc3Ryb3k/KHQub2ZmKFwicmVhZGFibGVcIixvKSxpKCkpOlMuZGVzdHJveWVyKHQsbnVsbCl9fSh0LGUpO3JldHVybiBuLnN0cmVhbT10LG59ZnVuY3Rpb24gWih0LGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbnVsbDtsZXQgbjtyZXR1cm4gZS5vYmplY3RNb2RlP249ZS5idWZmZXIuc2hpZnQoKTohdHx8dD49ZS5sZW5ndGg/KG49ZS5kZWNvZGVyP2UuYnVmZmVyLmpvaW4oXCJcIik6MT09PWUuYnVmZmVyLmxlbmd0aD9lLmJ1ZmZlci5maXJzdCgpOmUuYnVmZmVyLmNvbmNhdChlLmxlbmd0aCksZS5idWZmZXIuY2xlYXIoKSk6bj1lLmJ1ZmZlci5jb25zdW1lKHQsZS5kZWNvZGVyKSxufWZ1bmN0aW9uIFEodCl7Y29uc3QgZT10Ll9yZWFkYWJsZVN0YXRlO18oXCJlbmRSZWFkYWJsZVwiLGUuZW5kRW1pdHRlZCksZS5lbmRFbWl0dGVkfHwoZS5lbmRlZD0hMCxyLm5leHRUaWNrKHR0LGUsdCkpfWZ1bmN0aW9uIHR0KHQsZSl7aWYoXyhcImVuZFJlYWRhYmxlTlRcIix0LmVuZEVtaXR0ZWQsdC5sZW5ndGgpLCF0LmVycm9yZWQmJiF0LmNsb3NlRW1pdHRlZCYmIXQuZW5kRW1pdHRlZCYmMD09PXQubGVuZ3RoKWlmKHQuZW5kRW1pdHRlZD0hMCxlLmVtaXQoXCJlbmRcIiksZS53cml0YWJsZSYmITE9PT1lLmFsbG93SGFsZk9wZW4pci5uZXh0VGljayhldCxlKTtlbHNlIGlmKHQuYXV0b0Rlc3Ryb3kpe2NvbnN0IHQ9ZS5fd3JpdGFibGVTdGF0ZTsoIXR8fHQuYXV0b0Rlc3Ryb3kmJih0LmZpbmlzaGVkfHwhMT09PXQud3JpdGFibGUpKSYmZS5kZXN0cm95KCl9fWZ1bmN0aW9uIGV0KHQpe3Qud3JpdGFibGUmJiF0LndyaXRhYmxlRW5kZWQmJiF0LmRlc3Ryb3llZCYmdC5lbmQoKX1sZXQgbnQ7ZnVuY3Rpb24gcnQoKXtyZXR1cm4gdm9pZCAwPT09bnQmJihudD17fSksbnR9Vy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtfKFwicmVhZFwiLHQpLHZvaWQgMD09PXQ/dD1OYU46aSh0KXx8KHQ9cyh0LDEwKSk7Y29uc3QgZT10aGlzLl9yZWFkYWJsZVN0YXRlLG49dDtpZih0PmUuaGlnaFdhdGVyTWFyayYmKGUuaGlnaFdhdGVyTWFyaz1mdW5jdGlvbih0KXtpZih0PjEwNzM3NDE4MjQpdGhyb3cgbmV3IEMoXCJzaXplXCIsXCI8PSAxR2lCXCIsdCk7cmV0dXJuIHQtLSx0fD10Pj4+MSx0fD10Pj4+Mix0fD10Pj4+NCx0fD10Pj4+OCx0fD10Pj4+MTYsKyt0fSh0KSksMCE9PXQmJihlLmVtaXR0ZWRSZWFkYWJsZT0hMSksMD09PXQmJmUubmVlZFJlYWRhYmxlJiYoKDAhPT1lLmhpZ2hXYXRlck1hcms/ZS5sZW5ndGg+PWUuaGlnaFdhdGVyTWFyazplLmxlbmd0aD4wKXx8ZS5lbmRlZCkpcmV0dXJuIF8oXCJyZWFkOiBlbWl0UmVhZGFibGVcIixlLmxlbmd0aCxlLmVuZGVkKSwwPT09ZS5sZW5ndGgmJmUuZW5kZWQ/USh0aGlzKTp6KHRoaXMpLG51bGw7aWYoMD09PSh0PUYodCxlKSkmJmUuZW5kZWQpcmV0dXJuIDA9PT1lLmxlbmd0aCYmUSh0aGlzKSxudWxsO2xldCByLG89ZS5uZWVkUmVhZGFibGU7aWYoXyhcIm5lZWQgcmVhZGFibGVcIixvKSwoMD09PWUubGVuZ3RofHxlLmxlbmd0aC10PGUuaGlnaFdhdGVyTWFyaykmJihvPSEwLF8oXCJsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFya1wiLG8pKSxlLmVuZGVkfHxlLnJlYWRpbmd8fGUuZGVzdHJveWVkfHxlLmVycm9yZWR8fCFlLmNvbnN0cnVjdGVkKW89ITEsXyhcInJlYWRpbmcsIGVuZGVkIG9yIGNvbnN0cnVjdGluZ1wiLG8pO2Vsc2UgaWYobyl7XyhcImRvIHJlYWRcIiksZS5yZWFkaW5nPSEwLGUuc3luYz0hMCwwPT09ZS5sZW5ndGgmJihlLm5lZWRSZWFkYWJsZT0hMCk7dHJ5e3RoaXMuX3JlYWQoZS5oaWdoV2F0ZXJNYXJrKX1jYXRjaCh0KXtNKHRoaXMsdCl9ZS5zeW5jPSExLGUucmVhZGluZ3x8KHQ9RihuLGUpKX1yZXR1cm4gcj10PjA/Wih0LGUpOm51bGwsbnVsbD09PXI/KGUubmVlZFJlYWRhYmxlPWUubGVuZ3RoPD1lLmhpZ2hXYXRlck1hcmssdD0wKTooZS5sZW5ndGgtPXQsZS5tdWx0aUF3YWl0RHJhaW4/ZS5hd2FpdERyYWluV3JpdGVycy5jbGVhcigpOmUuYXdhaXREcmFpbldyaXRlcnM9bnVsbCksMD09PWUubGVuZ3RoJiYoZS5lbmRlZHx8KGUubmVlZFJlYWRhYmxlPSEwKSxuIT09dCYmZS5lbmRlZCYmUSh0aGlzKSksbnVsbD09PXJ8fGUuZXJyb3JFbWl0dGVkfHxlLmNsb3NlRW1pdHRlZHx8KGUuZGF0YUVtaXR0ZWQ9ITAsdGhpcy5lbWl0KFwiZGF0YVwiLHIpKSxyfSxXLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbih0KXt0aHJvdyBuZXcgeChcIl9yZWFkKClcIil9LFcucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMsbz10aGlzLl9yZWFkYWJsZVN0YXRlOzE9PT1vLnBpcGVzLmxlbmd0aCYmKG8ubXVsdGlBd2FpdERyYWlufHwoby5tdWx0aUF3YWl0RHJhaW49ITAsby5hd2FpdERyYWluV3JpdGVycz1uZXcgZChvLmF3YWl0RHJhaW5Xcml0ZXJzP1tvLmF3YWl0RHJhaW5Xcml0ZXJzXTpbXSkpKSxvLnBpcGVzLnB1c2godCksXyhcInBpcGUgY291bnQ9JWQgb3B0cz0lalwiLG8ucGlwZXMubGVuZ3RoLGUpO2NvbnN0IGk9KCFlfHwhMSE9PWUuZW5kKSYmdCE9PXIuc3Rkb3V0JiZ0IT09ci5zdGRlcnI/czp5O2Z1bmN0aW9uIGEoZSxyKXtfKFwib251bnBpcGVcIiksZT09PW4mJnImJiExPT09ci5oYXNVbnBpcGVkJiYoci5oYXNVbnBpcGVkPSEwLGZ1bmN0aW9uKCl7XyhcImNsZWFudXBcIiksdC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIscCksdC5yZW1vdmVMaXN0ZW5lcihcImZpbmlzaFwiLGcpLHUmJnQucmVtb3ZlTGlzdGVuZXIoXCJkcmFpblwiLHUpO3QucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLGgpLHQucmVtb3ZlTGlzdGVuZXIoXCJ1bnBpcGVcIixhKSxuLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIscyksbi5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLHkpLG4ucmVtb3ZlTGlzdGVuZXIoXCJkYXRhXCIsZiksbD0hMCx1JiZvLmF3YWl0RHJhaW5Xcml0ZXJzJiYoIXQuX3dyaXRhYmxlU3RhdGV8fHQuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSYmdSgpfSgpKX1mdW5jdGlvbiBzKCl7XyhcIm9uZW5kXCIpLHQuZW5kKCl9bGV0IHU7by5lbmRFbWl0dGVkP3IubmV4dFRpY2soaSk6bi5vbmNlKFwiZW5kXCIsaSksdC5vbihcInVucGlwZVwiLGEpO2xldCBsPSExO2Z1bmN0aW9uIGMoKXtsfHwoMT09PW8ucGlwZXMubGVuZ3RoJiZvLnBpcGVzWzBdPT09dD8oXyhcImZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZVwiLDApLG8uYXdhaXREcmFpbldyaXRlcnM9dCxvLm11bHRpQXdhaXREcmFpbj0hMSk6by5waXBlcy5sZW5ndGg+MSYmby5waXBlcy5pbmNsdWRlcyh0KSYmKF8oXCJmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2VcIixvLmF3YWl0RHJhaW5Xcml0ZXJzLnNpemUpLG8uYXdhaXREcmFpbldyaXRlcnMuYWRkKHQpKSxuLnBhdXNlKCkpLHV8fCh1PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Y29uc3Qgbj10Ll9yZWFkYWJsZVN0YXRlO24uYXdhaXREcmFpbldyaXRlcnM9PT1lPyhfKFwicGlwZU9uRHJhaW5cIiwxKSxuLmF3YWl0RHJhaW5Xcml0ZXJzPW51bGwpOm4ubXVsdGlBd2FpdERyYWluJiYoXyhcInBpcGVPbkRyYWluXCIsbi5hd2FpdERyYWluV3JpdGVycy5zaXplKSxuLmF3YWl0RHJhaW5Xcml0ZXJzLmRlbGV0ZShlKSksbi5hd2FpdERyYWluV3JpdGVycyYmMCE9PW4uYXdhaXREcmFpbldyaXRlcnMuc2l6ZXx8IXQubGlzdGVuZXJDb3VudChcImRhdGFcIil8fHQucmVzdW1lKCl9fShuLHQpLHQub24oXCJkcmFpblwiLHUpKX1mdW5jdGlvbiBmKGUpe18oXCJvbmRhdGFcIik7Y29uc3Qgbj10LndyaXRlKGUpO18oXCJkZXN0LndyaXRlXCIsbiksITE9PT1uJiZjKCl9ZnVuY3Rpb24gaChlKXtpZihfKFwib25lcnJvclwiLGUpLHkoKSx0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixoKSwwPT09dC5saXN0ZW5lckNvdW50KFwiZXJyb3JcIikpe2NvbnN0IG49dC5fd3JpdGFibGVTdGF0ZXx8dC5fcmVhZGFibGVTdGF0ZTtuJiYhbi5lcnJvckVtaXR0ZWQ/TSh0LGUpOnQuZW1pdChcImVycm9yXCIsZSl9fWZ1bmN0aW9uIHAoKXt0LnJlbW92ZUxpc3RlbmVyKFwiZmluaXNoXCIsZykseSgpfWZ1bmN0aW9uIGcoKXtfKFwib25maW5pc2hcIiksdC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIscCkseSgpfWZ1bmN0aW9uIHkoKXtfKFwidW5waXBlXCIpLG4udW5waXBlKHQpfXJldHVybiBuLm9uKFwiZGF0YVwiLGYpLG0odCxcImVycm9yXCIsaCksdC5vbmNlKFwiY2xvc2VcIixwKSx0Lm9uY2UoXCJmaW5pc2hcIixnKSx0LmVtaXQoXCJwaXBlXCIsbiksITA9PT10LndyaXRhYmxlTmVlZERyYWluP28uZmxvd2luZyYmYygpOm8uZmxvd2luZ3x8KF8oXCJwaXBlIHJlc3VtZVwiKSxuLnJlc3VtZSgpKSx0fSxXLnByb3RvdHlwZS51bnBpcGU9ZnVuY3Rpb24odCl7Y29uc3QgZT10aGlzLl9yZWFkYWJsZVN0YXRlO2lmKDA9PT1lLnBpcGVzLmxlbmd0aClyZXR1cm4gdGhpcztpZighdCl7Y29uc3QgdD1lLnBpcGVzO2UucGlwZXM9W10sdGhpcy5wYXVzZSgpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV0uZW1pdChcInVucGlwZVwiLHRoaXMse2hhc1VucGlwZWQ6ITF9KTtyZXR1cm4gdGhpc31jb25zdCBuPW8oZS5waXBlcyx0KTtyZXR1cm4tMT09PW58fChlLnBpcGVzLnNwbGljZShuLDEpLDA9PT1lLnBpcGVzLmxlbmd0aCYmdGhpcy5wYXVzZSgpLHQuZW1pdChcInVucGlwZVwiLHRoaXMse2hhc1VucGlwZWQ6ITF9KSksdGhpc30sVy5wcm90b3R5cGUub249ZnVuY3Rpb24odCxlKXtjb25zdCBuPXkucHJvdG90eXBlLm9uLmNhbGwodGhpcyx0LGUpLG89dGhpcy5fcmVhZGFibGVTdGF0ZTtyZXR1cm5cImRhdGFcIj09PXQ/KG8ucmVhZGFibGVMaXN0ZW5pbmc9dGhpcy5saXN0ZW5lckNvdW50KFwicmVhZGFibGVcIik+MCwhMSE9PW8uZmxvd2luZyYmdGhpcy5yZXN1bWUoKSk6XCJyZWFkYWJsZVwiPT09dCYmKG8uZW5kRW1pdHRlZHx8by5yZWFkYWJsZUxpc3RlbmluZ3x8KG8ucmVhZGFibGVMaXN0ZW5pbmc9by5uZWVkUmVhZGFibGU9ITAsby5mbG93aW5nPSExLG8uZW1pdHRlZFJlYWRhYmxlPSExLF8oXCJvbiByZWFkYWJsZVwiLG8ubGVuZ3RoLG8ucmVhZGluZyksby5sZW5ndGg/eih0aGlzKTpvLnJlYWRpbmd8fHIubmV4dFRpY2soSix0aGlzKSkpLG59LFcucHJvdG90eXBlLmFkZExpc3RlbmVyPVcucHJvdG90eXBlLm9uLFcucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj15LnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lci5jYWxsKHRoaXMsdCxlKTtyZXR1cm5cInJlYWRhYmxlXCI9PT10JiZyLm5leHRUaWNrKEcsdGhpcyksbn0sVy5wcm90b3R5cGUub2ZmPVcucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLFcucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbih0KXtjb25zdCBlPXkucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuXCJyZWFkYWJsZVwiIT09dCYmdm9pZCAwIT09dHx8ci5uZXh0VGljayhHLHRoaXMpLGV9LFcucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5fcmVhZGFibGVTdGF0ZTtyZXR1cm4gdC5mbG93aW5nfHwoXyhcInJlc3VtZVwiKSx0LmZsb3dpbmc9IXQucmVhZGFibGVMaXN0ZW5pbmcsZnVuY3Rpb24odCxlKXtlLnJlc3VtZVNjaGVkdWxlZHx8KGUucmVzdW1lU2NoZWR1bGVkPSEwLHIubmV4dFRpY2soWSx0LGUpKX0odGhpcyx0KSksdFtPXT0hMSx0aGlzfSxXLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3JldHVybiBfKFwiY2FsbCBwYXVzZSBmbG93aW5nPSVqXCIsdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSwhMSE9PXRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyYmKF8oXCJwYXVzZVwiKSx0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc9ITEsdGhpcy5lbWl0KFwicGF1c2VcIikpLHRoaXMuX3JlYWRhYmxlU3RhdGVbT109ITAsdGhpc30sVy5wcm90b3R5cGUud3JhcD1mdW5jdGlvbih0KXtsZXQgZT0hMTt0Lm9uKFwiZGF0YVwiLChuPT57IXRoaXMucHVzaChuKSYmdC5wYXVzZSYmKGU9ITAsdC5wYXVzZSgpKX0pKSx0Lm9uKFwiZW5kXCIsKCgpPT57dGhpcy5wdXNoKG51bGwpfSkpLHQub24oXCJlcnJvclwiLCh0PT57TSh0aGlzLHQpfSkpLHQub24oXCJjbG9zZVwiLCgoKT0+e3RoaXMuZGVzdHJveSgpfSkpLHQub24oXCJkZXN0cm95XCIsKCgpPT57dGhpcy5kZXN0cm95KCl9KSksdGhpcy5fcmVhZD0oKT0+e2UmJnQucmVzdW1lJiYoZT0hMSx0LnJlc3VtZSgpKX07Y29uc3Qgbj1sKHQpO2ZvcihsZXQgZT0xO2U8bi5sZW5ndGg7ZSsrKXtjb25zdCByPW5bZV07dm9pZCAwPT09dGhpc1tyXSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdFtyXSYmKHRoaXNbcl09dFtyXS5iaW5kKHQpKX1yZXR1cm4gdGhpc30sVy5wcm90b3R5cGVbaF09ZnVuY3Rpb24oKXtyZXR1cm4gWCh0aGlzKX0sVy5wcm90b3R5cGUuaXRlcmF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJkwodCxcIm9wdGlvbnNcIiksWCh0aGlzLHQpfSx1KFcucHJvdG90eXBlLHtyZWFkYWJsZTp7X19wcm90b19fOm51bGwsZ2V0KCl7Y29uc3QgdD10aGlzLl9yZWFkYWJsZVN0YXRlO3JldHVybiEoIXR8fCExPT09dC5yZWFkYWJsZXx8dC5kZXN0cm95ZWR8fHQuZXJyb3JFbWl0dGVkfHx0LmVuZEVtaXR0ZWQpfSxzZXQodCl7dGhpcy5fcmVhZGFibGVTdGF0ZSYmKHRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGFibGU9ISF0KX19LHJlYWRhYmxlRGlkUmVhZDp7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kYXRhRW1pdHRlZH19LHJlYWRhYmxlQWJvcnRlZDp7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hKCExPT09dGhpcy5fcmVhZGFibGVTdGF0ZS5yZWFkYWJsZXx8IXRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkJiYhdGhpcy5fcmVhZGFibGVTdGF0ZS5lcnJvcmVkfHx0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQpfX0scmVhZGFibGVIaWdoV2F0ZXJNYXJrOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmhpZ2hXYXRlck1hcmt9fSxyZWFkYWJsZUJ1ZmZlcjp7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZSYmdGhpcy5fcmVhZGFibGVTdGF0ZS5idWZmZXJ9fSxyZWFkYWJsZUZsb3dpbmc6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZ30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3JlYWRhYmxlU3RhdGUmJih0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc9dCl9fSxyZWFkYWJsZUxlbmd0aDp7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMSxnZXQoKXtyZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5sZW5ndGh9fSxyZWFkYWJsZU9iamVjdE1vZGU6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0KCl7cmV0dXJuISF0aGlzLl9yZWFkYWJsZVN0YXRlJiZ0aGlzLl9yZWFkYWJsZVN0YXRlLm9iamVjdE1vZGV9fSxyZWFkYWJsZUVuY29kaW5nOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldCgpe3JldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlP3RoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2Rpbmc6bnVsbH19LGVycm9yZWQ6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0KCl7cmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGU/dGhpcy5fcmVhZGFibGVTdGF0ZS5lcnJvcmVkOm51bGx9fSxjbG9zZWQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiEhdGhpcy5fcmVhZGFibGVTdGF0ZSYmdGhpcy5fcmVhZGFibGVTdGF0ZS5jbG9zZWR9fSxkZXN0cm95ZWQ6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0KCl7cmV0dXJuISF0aGlzLl9yZWFkYWJsZVN0YXRlJiZ0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZH0sc2V0KHQpe3RoaXMuX3JlYWRhYmxlU3RhdGUmJih0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZD10KX19LHJlYWRhYmxlRW5kZWQ6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0KCl7cmV0dXJuISF0aGlzLl9yZWFkYWJsZVN0YXRlJiZ0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWR9fX0pLHUoUC5wcm90b3R5cGUse3BpcGVzQ291bnQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiB0aGlzLnBpcGVzLmxlbmd0aH19LHBhdXNlZDp7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuITEhPT10aGlzW09dfSxzZXQodCl7dGhpc1tPXT0hIXR9fX0pLFcuX2Zyb21MaXN0PVosVy5mcm9tPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGooVyx0LGUpfSxXLmZyb21XZWI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcnQoKS5uZXdTdHJlYW1SZWFkYWJsZUZyb21SZWFkYWJsZVN0cmVhbSh0LGUpfSxXLnRvV2ViPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHJ0KCkubmV3UmVhZGFibGVTdHJlYW1Gcm9tU3RyZWFtUmVhZGFibGUodCxlKX0sVy53cmFwPWZ1bmN0aW9uKHQsZSl7dmFyIG4scjtyZXR1cm4gbmV3IFcoe29iamVjdE1vZGU6bnVsbD09PShuPW51bGwhPT0ocj10LnJlYWRhYmxlT2JqZWN0TW9kZSkmJnZvaWQgMCE9PXI/cjp0Lm9iamVjdE1vZGUpfHx2b2lkIDA9PT1ufHxuLC4uLmUsZGVzdHJveShlLG4pe1MuZGVzdHJveWVyKHQsZSksbihlKX19KS53cmFwKHQpfX0sNDk4Oih0LGUsbik9Pntjb25zdHtNYXRoRmxvb3I6cixOdW1iZXJJc0ludGVnZXI6b309bigxOTEpLHtFUlJfSU5WQUxJRF9BUkdfVkFMVUU6aX09bigxNDEpLmNvZGVzO2Z1bmN0aW9uIGEodCl7cmV0dXJuIHQ/MTY6MTYzODR9dC5leHBvcnRzPXtnZXRIaWdoV2F0ZXJNYXJrOmZ1bmN0aW9uKHQsZSxuLHMpe2NvbnN0IHU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsIT10LmhpZ2hXYXRlck1hcms/dC5oaWdoV2F0ZXJNYXJrOmU/dFtuXTpudWxsfShlLHMsbik7aWYobnVsbCE9dSl7aWYoIW8odSl8fHU8MCl7dGhyb3cgbmV3IGkocz9gb3B0aW9ucy4ke259YDpcIm9wdGlvbnMuaGlnaFdhdGVyTWFya1wiLHUpfXJldHVybiByKHUpfXJldHVybiBhKHQub2JqZWN0TW9kZSl9LGdldERlZmF1bHRIaWdoV2F0ZXJNYXJrOmF9fSwyMTA6KHQsZSxuKT0+e2NvbnN0e09iamVjdFNldFByb3RvdHlwZU9mOnIsU3ltYm9sOm99PW4oMTkxKTt0LmV4cG9ydHM9bDtjb25zdHtFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRDppfT1uKDE0MSkuY29kZXMsYT1uKDE4Mikse2dldEhpZ2hXYXRlck1hcms6c309big0OTgpO3IobC5wcm90b3R5cGUsYS5wcm90b3R5cGUpLHIobCxhKTtjb25zdCB1PW8oXCJrQ2FsbGJhY2tcIik7ZnVuY3Rpb24gbCh0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBsKSlyZXR1cm4gbmV3IGwodCk7Y29uc3QgZT10P3ModGhpcyx0LFwicmVhZGFibGVIaWdoV2F0ZXJNYXJrXCIsITApOm51bGw7MD09PWUmJih0PXsuLi50LGhpZ2hXYXRlck1hcms6bnVsbCxyZWFkYWJsZUhpZ2hXYXRlck1hcms6ZSx3cml0YWJsZUhpZ2hXYXRlck1hcms6dC53cml0YWJsZUhpZ2hXYXRlck1hcmt8fDB9KSxhLmNhbGwodGhpcyx0KSx0aGlzLl9yZWFkYWJsZVN0YXRlLnN5bmM9ITEsdGhpc1t1XT1udWxsLHQmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnRyYW5zZm9ybSYmKHRoaXMuX3RyYW5zZm9ybT10LnRyYW5zZm9ybSksXCJmdW5jdGlvblwiPT10eXBlb2YgdC5mbHVzaCYmKHRoaXMuX2ZsdXNoPXQuZmx1c2gpKSx0aGlzLm9uKFwicHJlZmluaXNoXCIsZil9ZnVuY3Rpb24gYyh0KXtcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzLl9mbHVzaHx8dGhpcy5kZXN0cm95ZWQ/KHRoaXMucHVzaChudWxsKSx0JiZ0KCkpOnRoaXMuX2ZsdXNoKCgoZSxuKT0+e2U/dD90KGUpOnRoaXMuZGVzdHJveShlKToobnVsbCE9biYmdGhpcy5wdXNoKG4pLHRoaXMucHVzaChudWxsKSx0JiZ0KCkpfSkpfWZ1bmN0aW9uIGYoKXt0aGlzLl9maW5hbCE9PWMmJmMuY2FsbCh0aGlzKX1sLnByb3RvdHlwZS5fZmluYWw9YyxsLnByb3RvdHlwZS5fdHJhbnNmb3JtPWZ1bmN0aW9uKHQsZSxuKXt0aHJvdyBuZXcgaShcIl90cmFuc2Zvcm0oKVwiKX0sbC5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPXRoaXMuX3JlYWRhYmxlU3RhdGUsbz10aGlzLl93cml0YWJsZVN0YXRlLGk9ci5sZW5ndGg7dGhpcy5fdHJhbnNmb3JtKHQsZSwoKHQsZSk9Pnt0P24odCk6KG51bGwhPWUmJnRoaXMucHVzaChlKSxvLmVuZGVkfHxpPT09ci5sZW5ndGh8fHIubGVuZ3RoPHIuaGlnaFdhdGVyTWFyaz9uKCk6dGhpc1t1XT1uKX0pKX0sbC5wcm90b3R5cGUuX3JlYWQ9ZnVuY3Rpb24oKXtpZih0aGlzW3VdKXtjb25zdCB0PXRoaXNbdV07dGhpc1t1XT1udWxsLHQoKX19fSwxMzI6KHQsZSxuKT0+e2NvbnN0e1N5bWJvbDpyLFN5bWJvbEFzeW5jSXRlcmF0b3I6byxTeW1ib2xJdGVyYXRvcjppLFN5bWJvbEZvcjphfT1uKDE5MSkscz1yKFwia0Rlc3Ryb3llZFwiKSx1PXIoXCJrSXNFcnJvcmVkXCIpLGw9cihcImtJc1JlYWRhYmxlXCIpLGM9cihcImtJc0Rpc3R1cmJlZFwiKSxmPWEoXCJub2RlanMud2Vic3RyZWFtLmlzQ2xvc2VkUHJvbWlzZVwiKSxkPWEoXCJub2RlanMud2Vic3RyZWFtLmNvbnRyb2xsZXJFcnJvckZ1bmN0aW9uXCIpO2Z1bmN0aW9uIGgodCxlPSExKXt2YXIgbjtyZXR1cm4hKCF0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnBpcGV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQub258fGUmJihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnBhdXNlfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnJlc3VtZSl8fHQuX3dyaXRhYmxlU3RhdGUmJiExPT09KG51bGw9PT0obj10Ll9yZWFkYWJsZVN0YXRlKXx8dm9pZCAwPT09bj92b2lkIDA6bi5yZWFkYWJsZSl8fHQuX3dyaXRhYmxlU3RhdGUmJiF0Ll9yZWFkYWJsZVN0YXRlKX1mdW5jdGlvbiBwKHQpe3ZhciBlO3JldHVybiEoIXR8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQud3JpdGV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQub258fHQuX3JlYWRhYmxlU3RhdGUmJiExPT09KG51bGw9PT0oZT10Ll93cml0YWJsZVN0YXRlKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS53cml0YWJsZSkpfWZ1bmN0aW9uIGcodCl7cmV0dXJuIHQmJih0Ll9yZWFkYWJsZVN0YXRlfHx0Ll93cml0YWJsZVN0YXRlfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LndyaXRlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm9ufHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnBpcGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQub24pfWZ1bmN0aW9uIHkodCl7cmV0dXJuISghdHx8Zyh0KXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5waXBlVGhyb3VnaHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5nZXRSZWFkZXJ8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuY2FuY2VsKX1mdW5jdGlvbiBtKHQpe3JldHVybiEoIXR8fGcodCl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuZ2V0V3JpdGVyfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmFib3J0KX1mdW5jdGlvbiB2KHQpe3JldHVybiEoIXR8fGcodCl8fFwib2JqZWN0XCIhPXR5cGVvZiB0LnJlYWRhYmxlfHxcIm9iamVjdFwiIT10eXBlb2YgdC53cml0YWJsZSl9ZnVuY3Rpb24gYih0KXtpZighZyh0KSlyZXR1cm4gbnVsbDtjb25zdCBlPXQuX3dyaXRhYmxlU3RhdGUsbj10Ll9yZWFkYWJsZVN0YXRlLHI9ZXx8bjtyZXR1cm4hISh0LmRlc3Ryb3llZHx8dFtzXXx8bnVsbCE9ciYmci5kZXN0cm95ZWQpfWZ1bmN0aW9uIHcodCl7aWYoIXAodCkpcmV0dXJuIG51bGw7aWYoITA9PT10LndyaXRhYmxlRW5kZWQpcmV0dXJuITA7Y29uc3QgZT10Ll93cml0YWJsZVN0YXRlO3JldHVybihudWxsPT1lfHwhZS5lcnJvcmVkKSYmKFwiYm9vbGVhblwiIT10eXBlb2YobnVsbD09ZT92b2lkIDA6ZS5lbmRlZCk/bnVsbDplLmVuZGVkKX1mdW5jdGlvbiBfKHQsZSl7aWYoIWgodCkpcmV0dXJuIG51bGw7Y29uc3Qgbj10Ll9yZWFkYWJsZVN0YXRlO3JldHVybihudWxsPT1ufHwhbi5lcnJvcmVkKSYmKFwiYm9vbGVhblwiIT10eXBlb2YobnVsbD09bj92b2lkIDA6bi5lbmRFbWl0dGVkKT9udWxsOiEhKG4uZW5kRW1pdHRlZHx8ITE9PT1lJiYhMD09PW4uZW5kZWQmJjA9PT1uLmxlbmd0aCkpfWZ1bmN0aW9uIEUodCl7cmV0dXJuIHQmJm51bGwhPXRbbF0/dFtsXTpcImJvb2xlYW5cIiE9dHlwZW9mKG51bGw9PXQ/dm9pZCAwOnQucmVhZGFibGUpP251bGw6IWIodCkmJihoKHQpJiZ0LnJlYWRhYmxlJiYhXyh0KSl9ZnVuY3Rpb24gUyh0KXtyZXR1cm5cImJvb2xlYW5cIiE9dHlwZW9mKG51bGw9PXQ/dm9pZCAwOnQud3JpdGFibGUpP251bGw6IWIodCkmJihwKHQpJiZ0LndyaXRhYmxlJiYhdyh0KSl9ZnVuY3Rpb24gQSh0KXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIHQuX2Nsb3NlZCYmXCJib29sZWFuXCI9PXR5cGVvZiB0Ll9kZWZhdWx0S2VlcEFsaXZlJiZcImJvb2xlYW5cIj09dHlwZW9mIHQuX3JlbW92ZWRDb25uZWN0aW9uJiZcImJvb2xlYW5cIj09dHlwZW9mIHQuX3JlbW92ZWRDb250TGVufWZ1bmN0aW9uIEkodCl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiB0Ll9zZW50MTAwJiZBKHQpfXQuZXhwb3J0cz17a0Rlc3Ryb3llZDpzLGlzRGlzdHVyYmVkOmZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiEoIXR8fCEobnVsbCE9PShlPXRbY10pJiZ2b2lkIDAhPT1lP2U6dC5yZWFkYWJsZURpZFJlYWR8fHQucmVhZGFibGVBYm9ydGVkKSl9LGtJc0Rpc3R1cmJlZDpjLGlzRXJyb3JlZDpmdW5jdGlvbih0KXt2YXIgZSxuLHIsbyxpLGEscyxsLGMsZjtyZXR1cm4hKCF0fHwhKG51bGwhPT0oZT1udWxsIT09KG49bnVsbCE9PShyPW51bGwhPT0obz1udWxsIT09KGk9bnVsbCE9PShhPXRbdV0pJiZ2b2lkIDAhPT1hP2E6dC5yZWFkYWJsZUVycm9yZWQpJiZ2b2lkIDAhPT1pP2k6dC53cml0YWJsZUVycm9yZWQpJiZ2b2lkIDAhPT1vP286bnVsbD09PShzPXQuX3JlYWRhYmxlU3RhdGUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmVycm9yRW1pdHRlZCkmJnZvaWQgMCE9PXI/cjpudWxsPT09KGw9dC5fd3JpdGFibGVTdGF0ZSl8fHZvaWQgMD09PWw/dm9pZCAwOmwuZXJyb3JFbWl0dGVkKSYmdm9pZCAwIT09bj9uOm51bGw9PT0oYz10Ll9yZWFkYWJsZVN0YXRlKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5lcnJvcmVkKSYmdm9pZCAwIT09ZT9lOm51bGw9PT0oZj10Ll93cml0YWJsZVN0YXRlKXx8dm9pZCAwPT09Zj92b2lkIDA6Zi5lcnJvcmVkKSl9LGtJc0Vycm9yZWQ6dSxpc1JlYWRhYmxlOkUsa0lzUmVhZGFibGU6bCxrSXNDbG9zZWRQcm9taXNlOmYsa0NvbnRyb2xsZXJFcnJvckZ1bmN0aW9uOmQsaXNDbG9zZWQ6ZnVuY3Rpb24odCl7aWYoIWcodCkpcmV0dXJuIG51bGw7aWYoXCJib29sZWFuXCI9PXR5cGVvZiB0LmNsb3NlZClyZXR1cm4gdC5jbG9zZWQ7Y29uc3QgZT10Ll93cml0YWJsZVN0YXRlLG49dC5fcmVhZGFibGVTdGF0ZTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mKG51bGw9PWU/dm9pZCAwOmUuY2xvc2VkKXx8XCJib29sZWFuXCI9PXR5cGVvZihudWxsPT1uP3ZvaWQgMDpuLmNsb3NlZCk/KG51bGw9PWU/dm9pZCAwOmUuY2xvc2VkKXx8KG51bGw9PW4/dm9pZCAwOm4uY2xvc2VkKTpcImJvb2xlYW5cIj09dHlwZW9mIHQuX2Nsb3NlZCYmQSh0KT90Ll9jbG9zZWQ6bnVsbH0saXNEZXN0cm95ZWQ6Yixpc0R1cGxleE5vZGVTdHJlYW06ZnVuY3Rpb24odCl7cmV0dXJuISghdHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5waXBlfHwhdC5fcmVhZGFibGVTdGF0ZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5vbnx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC53cml0ZSl9LGlzRmluaXNoZWQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZyh0KT8hIWIodCl8fCghMT09PShudWxsPT1lP3ZvaWQgMDplLnJlYWRhYmxlKXx8IUUodCkpJiYoITE9PT0obnVsbD09ZT92b2lkIDA6ZS53cml0YWJsZSl8fCFTKHQpKTpudWxsfSxpc0l0ZXJhYmxlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGwhPXQmJighMD09PWU/XCJmdW5jdGlvblwiPT10eXBlb2YgdFtvXTohMT09PWU/XCJmdW5jdGlvblwiPT10eXBlb2YgdFtpXTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W29dfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W2ldKX0saXNSZWFkYWJsZU5vZGVTdHJlYW06aCxpc1JlYWRhYmxlU3RyZWFtOnksaXNSZWFkYWJsZUVuZGVkOmZ1bmN0aW9uKHQpe2lmKCFoKHQpKXJldHVybiBudWxsO2lmKCEwPT09dC5yZWFkYWJsZUVuZGVkKXJldHVybiEwO2NvbnN0IGU9dC5fcmVhZGFibGVTdGF0ZTtyZXR1cm4hKCFlfHxlLmVycm9yZWQpJiYoXCJib29sZWFuXCIhPXR5cGVvZihudWxsPT1lP3ZvaWQgMDplLmVuZGVkKT9udWxsOmUuZW5kZWQpfSxpc1JlYWRhYmxlRmluaXNoZWQ6Xyxpc1JlYWRhYmxlRXJyb3JlZDpmdW5jdGlvbih0KXt2YXIgZSxuO3JldHVybiBnKHQpP3QucmVhZGFibGVFcnJvcmVkP3QucmVhZGFibGVFcnJvcmVkOm51bGwhPT0oZT1udWxsPT09KG49dC5fcmVhZGFibGVTdGF0ZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZXJyb3JlZCkmJnZvaWQgMCE9PWU/ZTpudWxsOm51bGx9LGlzTm9kZVN0cmVhbTpnLGlzV2ViU3RyZWFtOmZ1bmN0aW9uKHQpe3JldHVybiB5KHQpfHxtKHQpfHx2KHQpfSxpc1dyaXRhYmxlOlMsaXNXcml0YWJsZU5vZGVTdHJlYW06cCxpc1dyaXRhYmxlU3RyZWFtOm0saXNXcml0YWJsZUVuZGVkOncsaXNXcml0YWJsZUZpbmlzaGVkOmZ1bmN0aW9uKHQsZSl7aWYoIXAodCkpcmV0dXJuIG51bGw7aWYoITA9PT10LndyaXRhYmxlRmluaXNoZWQpcmV0dXJuITA7Y29uc3Qgbj10Ll93cml0YWJsZVN0YXRlO3JldHVybihudWxsPT1ufHwhbi5lcnJvcmVkKSYmKFwiYm9vbGVhblwiIT10eXBlb2YobnVsbD09bj92b2lkIDA6bi5maW5pc2hlZCk/bnVsbDohIShuLmZpbmlzaGVkfHwhMT09PWUmJiEwPT09bi5lbmRlZCYmMD09PW4ubGVuZ3RoKSl9LGlzV3JpdGFibGVFcnJvcmVkOmZ1bmN0aW9uKHQpe3ZhciBlLG47cmV0dXJuIGcodCk/dC53cml0YWJsZUVycm9yZWQ/dC53cml0YWJsZUVycm9yZWQ6bnVsbCE9PShlPW51bGw9PT0obj10Ll93cml0YWJsZVN0YXRlKXx8dm9pZCAwPT09bj92b2lkIDA6bi5lcnJvcmVkKSYmdm9pZCAwIT09ZT9lOm51bGw6bnVsbH0saXNTZXJ2ZXJSZXF1ZXN0OmZ1bmN0aW9uKHQpe3ZhciBlO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdC5fY29uc3VtaW5nJiZcImJvb2xlYW5cIj09dHlwZW9mIHQuX2R1bXBlZCYmdm9pZCAwPT09KG51bGw9PT0oZT10LnJlcSl8fHZvaWQgMD09PWU/dm9pZCAwOmUudXBncmFkZU9yQ29ubmVjdCl9LGlzU2VydmVyUmVzcG9uc2U6SSx3aWxsRW1pdENsb3NlOmZ1bmN0aW9uKHQpe2lmKCFnKHQpKXJldHVybiBudWxsO2NvbnN0IGU9dC5fd3JpdGFibGVTdGF0ZSxuPXQuX3JlYWRhYmxlU3RhdGUscj1lfHxuO3JldHVybiFyJiZJKHQpfHwhIShyJiZyLmF1dG9EZXN0cm95JiZyLmVtaXRDbG9zZSYmITE9PT1yLmNsb3NlZCl9LGlzVHJhbnNmb3JtU3RyZWFtOnZ9fSwzNzM6KHQsZSxuKT0+e2NvbnN0IHI9big1MzMpLHtBcnJheVByb3RvdHlwZVNsaWNlOm8sRXJyb3I6aSxGdW5jdGlvblByb3RvdHlwZVN5bWJvbEhhc0luc3RhbmNlOmEsT2JqZWN0RGVmaW5lUHJvcGVydHk6cyxPYmplY3REZWZpbmVQcm9wZXJ0aWVzOnUsT2JqZWN0U2V0UHJvdG90eXBlT2Y6bCxTdHJpbmdQcm90b3R5cGVUb0xvd2VyQ2FzZTpjLFN5bWJvbDpmLFN5bWJvbEhhc0luc3RhbmNlOmR9PW4oMTkxKTt0LmV4cG9ydHM9VSxVLldyaXRhYmxlU3RhdGU9TDtjb25zdHtFdmVudEVtaXR0ZXI6aH09big0NjUpLHA9bigyMDApLlN0cmVhbSx7QnVmZmVyOmd9PW4oNDg1KSx5PW4oMjMwKSx7YWRkQWJvcnRTaWduYWw6bX09bigzNzQpLHtnZXRIaWdoV2F0ZXJNYXJrOnYsZ2V0RGVmYXVsdEhpZ2hXYXRlck1hcms6Yn09big0OTgpLHtFUlJfSU5WQUxJRF9BUkdfVFlQRTp3LEVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEOl8sRVJSX01VTFRJUExFX0NBTExCQUNLOkUsRVJSX1NUUkVBTV9DQU5OT1RfUElQRTpTLEVSUl9TVFJFQU1fREVTVFJPWUVEOkEsRVJSX1NUUkVBTV9BTFJFQURZX0ZJTklTSEVEOkksRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUzpULEVSUl9TVFJFQU1fV1JJVEVfQUZURVJfRU5EOlIsRVJSX1VOS05PV05fRU5DT0RJTkc6eH09bigxNDEpLmNvZGVzLHtlcnJvck9yRGVzdHJveTpDfT15O2Z1bmN0aW9uIEIoKXt9bChVLnByb3RvdHlwZSxwLnByb3RvdHlwZSksbChVLHApO2NvbnN0IGs9ZihcImtPbkZpbmlzaGVkXCIpO2Z1bmN0aW9uIEwodCxlLHIpe1wiYm9vbGVhblwiIT10eXBlb2YgciYmKHI9ZSBpbnN0YW5jZW9mIG4oMTgyKSksdGhpcy5vYmplY3RNb2RlPSEoIXR8fCF0Lm9iamVjdE1vZGUpLHImJih0aGlzLm9iamVjdE1vZGU9dGhpcy5vYmplY3RNb2RlfHwhKCF0fHwhdC53cml0YWJsZU9iamVjdE1vZGUpKSx0aGlzLmhpZ2hXYXRlck1hcms9dD92KHRoaXMsdCxcIndyaXRhYmxlSGlnaFdhdGVyTWFya1wiLHIpOmIoITEpLHRoaXMuZmluYWxDYWxsZWQ9ITEsdGhpcy5uZWVkRHJhaW49ITEsdGhpcy5lbmRpbmc9ITEsdGhpcy5lbmRlZD0hMSx0aGlzLmZpbmlzaGVkPSExLHRoaXMuZGVzdHJveWVkPSExO2NvbnN0IG89ISghdHx8ITEhPT10LmRlY29kZVN0cmluZ3MpO3RoaXMuZGVjb2RlU3RyaW5ncz0hbyx0aGlzLmRlZmF1bHRFbmNvZGluZz10JiZ0LmRlZmF1bHRFbmNvZGluZ3x8XCJ1dGY4XCIsdGhpcy5sZW5ndGg9MCx0aGlzLndyaXRpbmc9ITEsdGhpcy5jb3JrZWQ9MCx0aGlzLnN5bmM9ITAsdGhpcy5idWZmZXJQcm9jZXNzaW5nPSExLHRoaXMub253cml0ZT1QLmJpbmQodm9pZCAwLGUpLHRoaXMud3JpdGVjYj1udWxsLHRoaXMud3JpdGVsZW49MCx0aGlzLmFmdGVyV3JpdGVUaWNrSW5mbz1udWxsLE8odGhpcyksdGhpcy5wZW5kaW5nY2I9MCx0aGlzLmNvbnN0cnVjdGVkPSEwLHRoaXMucHJlZmluaXNoZWQ9ITEsdGhpcy5lcnJvckVtaXR0ZWQ9ITEsdGhpcy5lbWl0Q2xvc2U9IXR8fCExIT09dC5lbWl0Q2xvc2UsdGhpcy5hdXRvRGVzdHJveT0hdHx8ITEhPT10LmF1dG9EZXN0cm95LHRoaXMuZXJyb3JlZD1udWxsLHRoaXMuY2xvc2VkPSExLHRoaXMuY2xvc2VFbWl0dGVkPSExLHRoaXNba109W119ZnVuY3Rpb24gTyh0KXt0LmJ1ZmZlcmVkPVtdLHQuYnVmZmVyZWRJbmRleD0wLHQuYWxsQnVmZmVycz0hMCx0LmFsbE5vb3A9ITB9ZnVuY3Rpb24gVSh0KXtjb25zdCBlPXRoaXMgaW5zdGFuY2VvZiBuKDE4Mik7aWYoIWUmJiFhKFUsdGhpcykpcmV0dXJuIG5ldyBVKHQpO3RoaXMuX3dyaXRhYmxlU3RhdGU9bmV3IEwodCx0aGlzLGUpLHQmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LndyaXRlJiYodGhpcy5fd3JpdGU9dC53cml0ZSksXCJmdW5jdGlvblwiPT10eXBlb2YgdC53cml0ZXYmJih0aGlzLl93cml0ZXY9dC53cml0ZXYpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZGVzdHJveSYmKHRoaXMuX2Rlc3Ryb3k9dC5kZXN0cm95KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmZpbmFsJiYodGhpcy5fZmluYWw9dC5maW5hbCksXCJmdW5jdGlvblwiPT10eXBlb2YgdC5jb25zdHJ1Y3QmJih0aGlzLl9jb25zdHJ1Y3Q9dC5jb25zdHJ1Y3QpLHQuc2lnbmFsJiZtKHQuc2lnbmFsLHRoaXMpKSxwLmNhbGwodGhpcyx0KSx5LmNvbnN0cnVjdCh0aGlzLCgoKT0+e2NvbnN0IHQ9dGhpcy5fd3JpdGFibGVTdGF0ZTt0LndyaXRpbmd8fEYodGhpcyx0KSxIKHRoaXMsdCl9KSl9ZnVuY3Rpb24gaih0LGUsbixvKXtjb25zdCBpPXQuX3dyaXRhYmxlU3RhdGU7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbilvPW4sbj1pLmRlZmF1bHRFbmNvZGluZztlbHNle2lmKG4pe2lmKFwiYnVmZmVyXCIhPT1uJiYhZy5pc0VuY29kaW5nKG4pKXRocm93IG5ldyB4KG4pfWVsc2Ugbj1pLmRlZmF1bHRFbmNvZGluZztcImZ1bmN0aW9uXCIhPXR5cGVvZiBvJiYobz1CKX1pZihudWxsPT09ZSl0aHJvdyBuZXcgVDtpZighaS5vYmplY3RNb2RlKWlmKFwic3RyaW5nXCI9PXR5cGVvZiBlKSExIT09aS5kZWNvZGVTdHJpbmdzJiYoZT1nLmZyb20oZSxuKSxuPVwiYnVmZmVyXCIpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIGcpbj1cImJ1ZmZlclwiO2Vsc2V7aWYoIXAuX2lzVWludDhBcnJheShlKSl0aHJvdyBuZXcgdyhcImNodW5rXCIsW1wic3RyaW5nXCIsXCJCdWZmZXJcIixcIlVpbnQ4QXJyYXlcIl0sZSk7ZT1wLl91aW50OEFycmF5VG9CdWZmZXIoZSksbj1cImJ1ZmZlclwifWxldCBhO3JldHVybiBpLmVuZGluZz9hPW5ldyBSOmkuZGVzdHJveWVkJiYoYT1uZXcgQShcIndyaXRlXCIpKSxhPyhyLm5leHRUaWNrKG8sYSksQyh0LGEsITApLGEpOihpLnBlbmRpbmdjYisrLGZ1bmN0aW9uKHQsZSxuLHIsbyl7Y29uc3QgaT1lLm9iamVjdE1vZGU/MTpuLmxlbmd0aDtlLmxlbmd0aCs9aTtjb25zdCBhPWUubGVuZ3RoPGUuaGlnaFdhdGVyTWFyazthfHwoZS5uZWVkRHJhaW49ITApO2Uud3JpdGluZ3x8ZS5jb3JrZWR8fGUuZXJyb3JlZHx8IWUuY29uc3RydWN0ZWQ/KGUuYnVmZmVyZWQucHVzaCh7Y2h1bms6bixlbmNvZGluZzpyLGNhbGxiYWNrOm99KSxlLmFsbEJ1ZmZlcnMmJlwiYnVmZmVyXCIhPT1yJiYoZS5hbGxCdWZmZXJzPSExKSxlLmFsbE5vb3AmJm8hPT1CJiYoZS5hbGxOb29wPSExKSk6KGUud3JpdGVsZW49aSxlLndyaXRlY2I9byxlLndyaXRpbmc9ITAsZS5zeW5jPSEwLHQuX3dyaXRlKG4scixlLm9ud3JpdGUpLGUuc3luYz0hMSk7cmV0dXJuIGEmJiFlLmVycm9yZWQmJiFlLmRlc3Ryb3llZH0odCxpLGUsbixvKSl9ZnVuY3Rpb24gTih0LGUsbixyLG8saSxhKXtlLndyaXRlbGVuPXIsZS53cml0ZWNiPWEsZS53cml0aW5nPSEwLGUuc3luYz0hMCxlLmRlc3Ryb3llZD9lLm9ud3JpdGUobmV3IEEoXCJ3cml0ZVwiKSk6bj90Ll93cml0ZXYobyxlLm9ud3JpdGUpOnQuX3dyaXRlKG8saSxlLm9ud3JpdGUpLGUuc3luYz0hMX1mdW5jdGlvbiBNKHQsZSxuLHIpey0tZS5wZW5kaW5nY2IscihuKSxEKGUpLEModCxuKX1mdW5jdGlvbiBQKHQsZSl7Y29uc3Qgbj10Ll93cml0YWJsZVN0YXRlLG89bi5zeW5jLGk9bi53cml0ZWNiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGk/KG4ud3JpdGluZz0hMSxuLndyaXRlY2I9bnVsbCxuLmxlbmd0aC09bi53cml0ZWxlbixuLndyaXRlbGVuPTAsZT8oZS5zdGFjayxuLmVycm9yZWR8fChuLmVycm9yZWQ9ZSksdC5fcmVhZGFibGVTdGF0ZSYmIXQuX3JlYWRhYmxlU3RhdGUuZXJyb3JlZCYmKHQuX3JlYWRhYmxlU3RhdGUuZXJyb3JlZD1lKSxvP3IubmV4dFRpY2soTSx0LG4sZSxpKTpNKHQsbixlLGkpKToobi5idWZmZXJlZC5sZW5ndGg+bi5idWZmZXJlZEluZGV4JiZGKHQsbiksbz9udWxsIT09bi5hZnRlcldyaXRlVGlja0luZm8mJm4uYWZ0ZXJXcml0ZVRpY2tJbmZvLmNiPT09aT9uLmFmdGVyV3JpdGVUaWNrSW5mby5jb3VudCsrOihuLmFmdGVyV3JpdGVUaWNrSW5mbz17Y291bnQ6MSxjYjppLHN0cmVhbTp0LHN0YXRlOm59LHIubmV4dFRpY2soVyxuLmFmdGVyV3JpdGVUaWNrSW5mbykpOiQodCxuLDEsaSkpKTpDKHQsbmV3IEUpfWZ1bmN0aW9uIFcoe3N0cmVhbTp0LHN0YXRlOmUsY291bnQ6bixjYjpyfSl7cmV0dXJuIGUuYWZ0ZXJXcml0ZVRpY2tJbmZvPW51bGwsJCh0LGUsbixyKX1mdW5jdGlvbiAkKHQsZSxuLHIpe2ZvcighZS5lbmRpbmcmJiF0LmRlc3Ryb3llZCYmMD09PWUubGVuZ3RoJiZlLm5lZWREcmFpbiYmKGUubmVlZERyYWluPSExLHQuZW1pdChcImRyYWluXCIpKTtuLS0gPjA7KWUucGVuZGluZ2NiLS0scigpO2UuZGVzdHJveWVkJiZEKGUpLEgodCxlKX1mdW5jdGlvbiBEKHQpe2lmKHQud3JpdGluZylyZXR1cm47Zm9yKGxldCBuPXQuYnVmZmVyZWRJbmRleDtuPHQuYnVmZmVyZWQubGVuZ3RoOysrbil7dmFyIGU7Y29uc3R7Y2h1bms6cixjYWxsYmFjazpvfT10LmJ1ZmZlcmVkW25dLGk9dC5vYmplY3RNb2RlPzE6ci5sZW5ndGg7dC5sZW5ndGgtPWksbyhudWxsIT09KGU9dC5lcnJvcmVkKSYmdm9pZCAwIT09ZT9lOm5ldyBBKFwid3JpdGVcIikpfWNvbnN0IG49dFtrXS5zcGxpY2UoMCk7Zm9yKGxldCBlPTA7ZTxuLmxlbmd0aDtlKyspe3ZhciByO25bZV0obnVsbCE9PShyPXQuZXJyb3JlZCkmJnZvaWQgMCE9PXI/cjpuZXcgQShcImVuZFwiKSl9Tyh0KX1mdW5jdGlvbiBGKHQsZSl7aWYoZS5jb3JrZWR8fGUuYnVmZmVyUHJvY2Vzc2luZ3x8ZS5kZXN0cm95ZWR8fCFlLmNvbnN0cnVjdGVkKXJldHVybjtjb25zdHtidWZmZXJlZDpuLGJ1ZmZlcmVkSW5kZXg6cixvYmplY3RNb2RlOml9PWUsYT1uLmxlbmd0aC1yO2lmKCFhKXJldHVybjtsZXQgcz1yO2lmKGUuYnVmZmVyUHJvY2Vzc2luZz0hMCxhPjEmJnQuX3dyaXRldil7ZS5wZW5kaW5nY2ItPWEtMTtjb25zdCByPWUuYWxsTm9vcD9COnQ9Pntmb3IobGV0IGU9cztlPG4ubGVuZ3RoOysrZSluW2VdLmNhbGxiYWNrKHQpfSxpPWUuYWxsTm9vcCYmMD09PXM/bjpvKG4scyk7aS5hbGxCdWZmZXJzPWUuYWxsQnVmZmVycyxOKHQsZSwhMCxlLmxlbmd0aCxpLFwiXCIsciksTyhlKX1lbHNle2Rve2NvbnN0e2NodW5rOnIsZW5jb2Rpbmc6byxjYWxsYmFjazphfT1uW3NdO25bcysrXT1udWxsO04odCxlLCExLGk/MTpyLmxlbmd0aCxyLG8sYSl9d2hpbGUoczxuLmxlbmd0aCYmIWUud3JpdGluZyk7cz09PW4ubGVuZ3RoP08oZSk6cz4yNTY/KG4uc3BsaWNlKDAscyksZS5idWZmZXJlZEluZGV4PTApOmUuYnVmZmVyZWRJbmRleD1zfWUuYnVmZmVyUHJvY2Vzc2luZz0hMX1mdW5jdGlvbiB6KHQpe3JldHVybiB0LmVuZGluZyYmIXQuZGVzdHJveWVkJiZ0LmNvbnN0cnVjdGVkJiYwPT09dC5sZW5ndGgmJiF0LmVycm9yZWQmJjA9PT10LmJ1ZmZlcmVkLmxlbmd0aCYmIXQuZmluaXNoZWQmJiF0LndyaXRpbmcmJiF0LmVycm9yRW1pdHRlZCYmIXQuY2xvc2VFbWl0dGVkfWZ1bmN0aW9uIHEodCxlKXtlLnByZWZpbmlzaGVkfHxlLmZpbmFsQ2FsbGVkfHwoXCJmdW5jdGlvblwiIT10eXBlb2YgdC5fZmluYWx8fGUuZGVzdHJveWVkPyhlLnByZWZpbmlzaGVkPSEwLHQuZW1pdChcInByZWZpbmlzaFwiKSk6KGUuZmluYWxDYWxsZWQ9ITAsZnVuY3Rpb24odCxlKXtsZXQgbj0hMTtmdW5jdGlvbiBvKG8pe2lmKG4pQyh0LG51bGwhPW8/bzpFKCkpO2Vsc2UgaWYobj0hMCxlLnBlbmRpbmdjYi0tLG8pe2NvbnN0IG49ZVtrXS5zcGxpY2UoMCk7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDt0Kyspblt0XShvKTtDKHQsbyxlLnN5bmMpfWVsc2UgeihlKSYmKGUucHJlZmluaXNoZWQ9ITAsdC5lbWl0KFwicHJlZmluaXNoXCIpLGUucGVuZGluZ2NiKyssci5uZXh0VGljayhWLHQsZSkpfWUuc3luYz0hMCxlLnBlbmRpbmdjYisrO3RyeXt0Ll9maW5hbChvKX1jYXRjaCh0KXtvKHQpfWUuc3luYz0hMX0odCxlKSkpfWZ1bmN0aW9uIEgodCxlLG4pe3ooZSkmJihxKHQsZSksMD09PWUucGVuZGluZ2NiJiYobj8oZS5wZW5kaW5nY2IrKyxyLm5leHRUaWNrKCgodCxlKT0+e3ooZSk/Vih0LGUpOmUucGVuZGluZ2NiLS19KSx0LGUpKTp6KGUpJiYoZS5wZW5kaW5nY2IrKyxWKHQsZSkpKSl9ZnVuY3Rpb24gVih0LGUpe2UucGVuZGluZ2NiLS0sZS5maW5pc2hlZD0hMDtjb25zdCBuPWVba10uc3BsaWNlKDApO2ZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7dCsrKW5bdF0oKTtpZih0LmVtaXQoXCJmaW5pc2hcIiksZS5hdXRvRGVzdHJveSl7Y29uc3QgZT10Ll9yZWFkYWJsZVN0YXRlOyghZXx8ZS5hdXRvRGVzdHJveSYmKGUuZW5kRW1pdHRlZHx8ITE9PT1lLnJlYWRhYmxlKSkmJnQuZGVzdHJveSgpfX1MLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLmJ1ZmZlcmVkLHRoaXMuYnVmZmVyZWRJbmRleCl9LHMoTC5wcm90b3R5cGUsXCJidWZmZXJlZFJlcXVlc3RDb3VudFwiLHtfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4gdGhpcy5idWZmZXJlZC5sZW5ndGgtdGhpcy5idWZmZXJlZEluZGV4fX0pLHMoVSxkLHtfX3Byb3RvX186bnVsbCx2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4hIWEodGhpcyx0KXx8dGhpcz09PVUmJih0JiZ0Ll93cml0YWJsZVN0YXRlIGluc3RhbmNlb2YgTCl9fSksVS5wcm90b3R5cGUucGlwZT1mdW5jdGlvbigpe0ModGhpcyxuZXcgUyl9LFUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4hMD09PWoodGhpcyx0LGUsbil9LFUucHJvdG90eXBlLmNvcms9ZnVuY3Rpb24oKXt0aGlzLl93cml0YWJsZVN0YXRlLmNvcmtlZCsrfSxVLnByb3RvdHlwZS51bmNvcms9ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX3dyaXRhYmxlU3RhdGU7dC5jb3JrZWQmJih0LmNvcmtlZC0tLHQud3JpdGluZ3x8Rih0aGlzLHQpKX0sVS5wcm90b3R5cGUuc2V0RGVmYXVsdEVuY29kaW5nPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1jKHQpKSwhZy5pc0VuY29kaW5nKHQpKXRocm93IG5ldyB4KHQpO3JldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZz10LHRoaXN9LFUucHJvdG90eXBlLl93cml0ZT1mdW5jdGlvbih0LGUsbil7aWYoIXRoaXMuX3dyaXRldil0aHJvdyBuZXcgXyhcIl93cml0ZSgpXCIpO3RoaXMuX3dyaXRldihbe2NodW5rOnQsZW5jb2Rpbmc6ZX1dLG4pfSxVLnByb3RvdHlwZS5fd3JpdGV2PW51bGwsVS5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQsZSxuKXtjb25zdCBvPXRoaXMuX3dyaXRhYmxlU3RhdGU7bGV0IGE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD8obj10LHQ9bnVsbCxlPW51bGwpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihuPWUsZT1udWxsKSxudWxsIT10KXtjb25zdCBuPWoodGhpcyx0LGUpO24gaW5zdGFuY2VvZiBpJiYoYT1uKX1yZXR1cm4gby5jb3JrZWQmJihvLmNvcmtlZD0xLHRoaXMudW5jb3JrKCkpLGF8fChvLmVycm9yZWR8fG8uZW5kaW5nP28uZmluaXNoZWQ/YT1uZXcgSShcImVuZFwiKTpvLmRlc3Ryb3llZCYmKGE9bmV3IEEoXCJlbmRcIikpOihvLmVuZGluZz0hMCxIKHRoaXMsbywhMCksby5lbmRlZD0hMCkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJihhfHxvLmZpbmlzaGVkP3IubmV4dFRpY2sobixhKTpvW2tdLnB1c2gobikpLHRoaXN9LHUoVS5wcm90b3R5cGUse2Nsb3NlZDp7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuISF0aGlzLl93cml0YWJsZVN0YXRlJiZ0aGlzLl93cml0YWJsZVN0YXRlLmNsb3NlZH19LGRlc3Ryb3llZDp7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuISF0aGlzLl93cml0YWJsZVN0YXRlJiZ0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZH0sc2V0KHQpe3RoaXMuX3dyaXRhYmxlU3RhdGUmJih0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZD10KX19LHdyaXRhYmxlOntfX3Byb3RvX186bnVsbCxnZXQoKXtjb25zdCB0PXRoaXMuX3dyaXRhYmxlU3RhdGU7cmV0dXJuISghdHx8ITE9PT10LndyaXRhYmxlfHx0LmRlc3Ryb3llZHx8dC5lcnJvcmVkfHx0LmVuZGluZ3x8dC5lbmRlZCl9LHNldCh0KXt0aGlzLl93cml0YWJsZVN0YXRlJiYodGhpcy5fd3JpdGFibGVTdGF0ZS53cml0YWJsZT0hIXQpfX0sd3JpdGFibGVGaW5pc2hlZDp7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuISF0aGlzLl93cml0YWJsZVN0YXRlJiZ0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkfX0sd3JpdGFibGVPYmplY3RNb2RlOntfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4hIXRoaXMuX3dyaXRhYmxlU3RhdGUmJnRoaXMuX3dyaXRhYmxlU3RhdGUub2JqZWN0TW9kZX19LHdyaXRhYmxlQnVmZmVyOntfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZSYmdGhpcy5fd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIoKX19LHdyaXRhYmxlRW5kZWQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiEhdGhpcy5fd3JpdGFibGVTdGF0ZSYmdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRpbmd9fSx3cml0YWJsZU5lZWREcmFpbjp7X19wcm90b19fOm51bGwsZ2V0KCl7Y29uc3QgdD10aGlzLl93cml0YWJsZVN0YXRlO3JldHVybiEhdCYmKCF0LmRlc3Ryb3llZCYmIXQuZW5kaW5nJiZ0Lm5lZWREcmFpbil9fSx3cml0YWJsZUhpZ2hXYXRlck1hcms6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiB0aGlzLl93cml0YWJsZVN0YXRlJiZ0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcmt9fSx3cml0YWJsZUNvcmtlZDp7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGU/dGhpcy5fd3JpdGFibGVTdGF0ZS5jb3JrZWQ6MH19LHdyaXRhYmxlTGVuZ3RoOntfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZSYmdGhpcy5fd3JpdGFibGVTdGF0ZS5sZW5ndGh9fSxlcnJvcmVkOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldCgpe3JldHVybiB0aGlzLl93cml0YWJsZVN0YXRlP3RoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JlZDpudWxsfX0sd3JpdGFibGVBYm9ydGVkOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldDpmdW5jdGlvbigpe3JldHVybiEoITE9PT10aGlzLl93cml0YWJsZVN0YXRlLndyaXRhYmxlfHwhdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQmJiF0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yZWR8fHRoaXMuX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQpfX19KTtjb25zdCBHPXkuZGVzdHJveTtsZXQgSjtmdW5jdGlvbiBZKCl7cmV0dXJuIHZvaWQgMD09PUomJihKPXt9KSxKfVUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuX3dyaXRhYmxlU3RhdGU7cmV0dXJuIW4uZGVzdHJveWVkJiYobi5idWZmZXJlZEluZGV4PG4uYnVmZmVyZWQubGVuZ3RofHxuW2tdLmxlbmd0aCkmJnIubmV4dFRpY2soRCxuKSxHLmNhbGwodGhpcyx0LGUpLHRoaXN9LFUucHJvdG90eXBlLl91bmRlc3Ryb3k9eS51bmRlc3Ryb3ksVS5wcm90b3R5cGUuX2Rlc3Ryb3k9ZnVuY3Rpb24odCxlKXtlKHQpfSxVLnByb3RvdHlwZVtoLmNhcHR1cmVSZWplY3Rpb25TeW1ib2xdPWZ1bmN0aW9uKHQpe3RoaXMuZGVzdHJveSh0KX0sVS5mcm9tV2ViPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFkoKS5uZXdTdHJlYW1Xcml0YWJsZUZyb21Xcml0YWJsZVN0cmVhbSh0LGUpfSxVLnRvV2ViPWZ1bmN0aW9uKHQpe3JldHVybiBZKCkubmV3V3JpdGFibGVTdHJlYW1Gcm9tU3RyZWFtV3JpdGFibGUodCl9fSw5MDQ6KHQsZSxuKT0+e2NvbnN0e0FycmF5SXNBcnJheTpyLEFycmF5UHJvdG90eXBlSW5jbHVkZXM6byxBcnJheVByb3RvdHlwZUpvaW46aSxBcnJheVByb3RvdHlwZU1hcDphLE51bWJlcklzSW50ZWdlcjpzLE51bWJlcklzTmFOOnUsTnVtYmVyTUFYX1NBRkVfSU5URUdFUjpsLE51bWJlck1JTl9TQUZFX0lOVEVHRVI6YyxOdW1iZXJQYXJzZUludDpmLE9iamVjdFByb3RvdHlwZUhhc093blByb3BlcnR5OmQsUmVnRXhwUHJvdG90eXBlRXhlYzpoLFN0cmluZzpwLFN0cmluZ1Byb3RvdHlwZVRvVXBwZXJDYXNlOmcsU3RyaW5nUHJvdG90eXBlVHJpbTp5fT1uKDE5MSkse2hpZGVTdGFja0ZyYW1lczptLGNvZGVzOntFUlJfU09DS0VUX0JBRF9QT1JUOnYsRVJSX0lOVkFMSURfQVJHX1RZUEU6YixFUlJfSU5WQUxJRF9BUkdfVkFMVUU6dyxFUlJfT1VUX09GX1JBTkdFOl8sRVJSX1VOS05PV05fU0lHTkFMOkV9fT1uKDE0MSkse25vcm1hbGl6ZUVuY29kaW5nOlN9PW4oNzc1KSx7aXNBc3luY0Z1bmN0aW9uOkEsaXNBcnJheUJ1ZmZlclZpZXc6SX09big3NzUpLnR5cGVzLFQ9e307Y29uc3QgUj0vXlswLTddKyQvO2NvbnN0IHg9bSgoKHQsZSxuPWMscj1sKT0+e2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBiKGUsXCJudW1iZXJcIix0KTtpZighcyh0KSl0aHJvdyBuZXcgXyhlLFwiYW4gaW50ZWdlclwiLHQpO2lmKHQ8bnx8dD5yKXRocm93IG5ldyBfKGUsYD49ICR7bn0gJiYgPD0gJHtyfWAsdCl9KSksQz1tKCgodCxlLG49LTIxNDc0ODM2NDgscj0yMTQ3NDgzNjQ3KT0+e2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBiKGUsXCJudW1iZXJcIix0KTtpZighcyh0KSl0aHJvdyBuZXcgXyhlLFwiYW4gaW50ZWdlclwiLHQpO2lmKHQ8bnx8dD5yKXRocm93IG5ldyBfKGUsYD49ICR7bn0gJiYgPD0gJHtyfWAsdCl9KSksQj1tKCgodCxlLG49ITEpPT57aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IGIoZSxcIm51bWJlclwiLHQpO2lmKCFzKHQpKXRocm93IG5ldyBfKGUsXCJhbiBpbnRlZ2VyXCIsdCk7Y29uc3Qgcj1uPzE6MCxvPTQyOTQ5NjcyOTU7aWYodDxyfHx0Pm8pdGhyb3cgbmV3IF8oZSxgPj0gJHtyfSAmJiA8PSAke299YCx0KX0pKTtmdW5jdGlvbiBrKHQsZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IGIoZSxcInN0cmluZ1wiLHQpfWNvbnN0IEw9bSgoKHQsZSxuKT0+e2lmKCFvKG4sdCkpe2NvbnN0IHI9aShhKG4sKHQ9Plwic3RyaW5nXCI9PXR5cGVvZiB0P2AnJHt0fSdgOnAodCkpKSxcIiwgXCIpO3Rocm93IG5ldyB3KGUsdCxcIm11c3QgYmUgb25lIG9mOiBcIityKX19KSk7ZnVuY3Rpb24gTyh0LGUpe2lmKFwiYm9vbGVhblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgYihlLFwiYm9vbGVhblwiLHQpfWZ1bmN0aW9uIFUodCxlLG4pe3JldHVybiBudWxsIT10JiZkKHQsZSk/dFtlXTpufWNvbnN0IGo9bSgoKHQsZSxuPW51bGwpPT57Y29uc3Qgbz1VKG4sXCJhbGxvd0FycmF5XCIsITEpLGk9VShuLFwiYWxsb3dGdW5jdGlvblwiLCExKTtpZighVShuLFwibnVsbGFibGVcIiwhMSkmJm51bGw9PT10fHwhbyYmcih0KXx8XCJvYmplY3RcIiE9dHlwZW9mIHQmJighaXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdCkpdGhyb3cgbmV3IGIoZSxcIk9iamVjdFwiLHQpfSkpLE49bSgoKHQsZSk9PntpZihudWxsIT10JiZcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgYihlLFwiYSBkaWN0aW9uYXJ5XCIsdCl9KSksTT1tKCgodCxlLG49MCk9PntpZighcih0KSl0aHJvdyBuZXcgYihlLFwiQXJyYXlcIix0KTtpZih0Lmxlbmd0aDxuKXt0aHJvdyBuZXcgdyhlLHQsYG11c3QgYmUgbG9uZ2VyIHRoYW4gJHtufWApfX0pKTtjb25zdCBQPW0oKCh0LGU9XCJidWZmZXJcIik9PntpZighSSh0KSl0aHJvdyBuZXcgYihlLFtcIkJ1ZmZlclwiLFwiVHlwZWRBcnJheVwiLFwiRGF0YVZpZXdcIl0sdCl9KSk7Y29uc3QgVz1tKCgodCxlKT0+e2lmKHZvaWQgMCE9PXQmJihudWxsPT09dHx8XCJvYmplY3RcIiE9dHlwZW9mIHR8fCEoXCJhYm9ydGVkXCJpbiB0KSkpdGhyb3cgbmV3IGIoZSxcIkFib3J0U2lnbmFsXCIsdCl9KSksJD1tKCgodCxlKT0+e2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IGIoZSxcIkZ1bmN0aW9uXCIsdCl9KSksRD1tKCgodCxlKT0+e2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fEEodCkpdGhyb3cgbmV3IGIoZSxcIkZ1bmN0aW9uXCIsdCl9KSksRj1tKCgodCxlKT0+e2lmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IGIoZSxcInVuZGVmaW5lZFwiLHQpfSkpO2NvbnN0IHo9L14oPzo8W14+XSo+KSg/Olxccyo7XFxzKlteO1wiXFxzXSsoPzo9KFwiKT9bXjtcIlxcc10qXFwxKT8pKiQvO2Z1bmN0aW9uIHEodCxlKXtpZih2b2lkIDA9PT10fHwhaCh6LHQpKXRocm93IG5ldyB3KGUsdCwnbXVzdCBiZSBhbiBhcnJheSBvciBzdHJpbmcgb2YgZm9ybWF0IFwiPC9zdHlsZXMuY3NzPjsgcmVsPXByZWxvYWQ7IGFzPXN0eWxlXCInKX10LmV4cG9ydHM9e2lzSW50MzI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT0oMHx0KX0saXNVaW50MzI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10Pj4+MH0scGFyc2VGaWxlTW9kZTpmdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09dCYmKHQ9biksXCJzdHJpbmdcIj09dHlwZW9mIHQpe2lmKG51bGw9PT1oKFIsdCkpdGhyb3cgbmV3IHcoZSx0LFwibXVzdCBiZSBhIDMyLWJpdCB1bnNpZ25lZCBpbnRlZ2VyIG9yIGFuIG9jdGFsIHN0cmluZ1wiKTt0PWYodCw4KX1yZXR1cm4gQih0LGUpLHR9LHZhbGlkYXRlQXJyYXk6TSx2YWxpZGF0ZVN0cmluZ0FycmF5OmZ1bmN0aW9uKHQsZSl7TSh0LGUpO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKWsodFtuXSxgJHtlfVske259XWApfSx2YWxpZGF0ZUJvb2xlYW5BcnJheTpmdW5jdGlvbih0LGUpe00odCxlKTtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKylPKHRbbl0sYCR7ZX1bJHtufV1gKX0sdmFsaWRhdGVCb29sZWFuOk8sdmFsaWRhdGVCdWZmZXI6UCx2YWxpZGF0ZURpY3Rpb25hcnk6Tix2YWxpZGF0ZUVuY29kaW5nOmZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1TKGUpLHI9dC5sZW5ndGg7aWYoXCJoZXhcIj09PW4mJnIlMiE9MCl0aHJvdyBuZXcgdyhcImVuY29kaW5nXCIsZSxgaXMgaW52YWxpZCBmb3IgZGF0YSBvZiBsZW5ndGggJHtyfWApfSx2YWxpZGF0ZUZ1bmN0aW9uOiQsdmFsaWRhdGVJbnQzMjpDLHZhbGlkYXRlSW50ZWdlcjp4LHZhbGlkYXRlTnVtYmVyOmZ1bmN0aW9uKHQsZSxuPXZvaWQgMCxyKXtpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgYihlLFwibnVtYmVyXCIsdCk7aWYobnVsbCE9biYmdDxufHxudWxsIT1yJiZ0PnJ8fChudWxsIT1ufHxudWxsIT1yKSYmdSh0KSl0aHJvdyBuZXcgXyhlLGAke251bGwhPW4/YD49ICR7bn1gOlwiXCJ9JHtudWxsIT1uJiZudWxsIT1yP1wiICYmIFwiOlwiXCJ9JHtudWxsIT1yP2A8PSAke3J9YDpcIlwifWAsdCl9LHZhbGlkYXRlT2JqZWN0OmosdmFsaWRhdGVPbmVPZjpMLHZhbGlkYXRlUGxhaW5GdW5jdGlvbjpELHZhbGlkYXRlUG9ydDpmdW5jdGlvbih0LGU9XCJQb3J0XCIsbj0hMCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQmJlwic3RyaW5nXCIhPXR5cGVvZiB0fHxcInN0cmluZ1wiPT10eXBlb2YgdCYmMD09PXkodCkubGVuZ3RofHwrdCE9K3Q+Pj4wfHx0PjY1NTM1fHwwPT09dCYmIW4pdGhyb3cgbmV3IHYoZSx0LG4pO3JldHVybiAwfHR9LHZhbGlkYXRlU2lnbmFsTmFtZTpmdW5jdGlvbih0LGU9XCJzaWduYWxcIil7aWYoayh0LGUpLHZvaWQgMD09PVRbdF0pe2lmKHZvaWQgMCE9PVRbZyh0KV0pdGhyb3cgbmV3IEUodCtcIiAoc2lnbmFscyBtdXN0IHVzZSBhbGwgY2FwaXRhbCBsZXR0ZXJzKVwiKTt0aHJvdyBuZXcgRSh0KX19LHZhbGlkYXRlU3RyaW5nOmssdmFsaWRhdGVVaW50MzI6Qix2YWxpZGF0ZVVuZGVmaW5lZDpGLHZhbGlkYXRlVW5pb246ZnVuY3Rpb24odCxlLG4pe2lmKCFvKG4sdCkpdGhyb3cgbmV3IGIoZSxgKCcke2kobixcInxcIil9JylgLHQpfSx2YWxpZGF0ZUFib3J0U2lnbmFsOlcsdmFsaWRhdGVMaW5rSGVhZGVyVmFsdWU6ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIHEodCxcImhpbnRzXCIpLHQ7aWYocih0KSl7Y29uc3QgZT10Lmxlbmd0aDtsZXQgbj1cIlwiO2lmKDA9PT1lKXJldHVybiBuO2ZvcihsZXQgcj0wO3I8ZTtyKyspe2NvbnN0IG89dFtyXTtxKG8sXCJoaW50c1wiKSxuKz1vLHIhPT1lLTEmJihuKz1cIiwgXCIpfXJldHVybiBufXRocm93IG5ldyB3KFwiaGludHNcIix0LCdtdXN0IGJlIGFuIGFycmF5IG9yIHN0cmluZyBvZiBmb3JtYXQgXCI8L3N0eWxlcy5jc3M+OyByZWw9cHJlbG9hZDsgYXM9c3R5bGVcIicpfX19LDk5Oih0LGUsbik9Pntjb25zdCByPW4oMjkyKSxvPW4oNzYwKSxpPXIuUmVhZGFibGUuZGVzdHJveTt0LmV4cG9ydHM9ci5SZWFkYWJsZSx0LmV4cG9ydHMuX3VpbnQ4QXJyYXlUb0J1ZmZlcj1yLl91aW50OEFycmF5VG9CdWZmZXIsdC5leHBvcnRzLl9pc1VpbnQ4QXJyYXk9ci5faXNVaW50OEFycmF5LHQuZXhwb3J0cy5pc0Rpc3R1cmJlZD1yLmlzRGlzdHVyYmVkLHQuZXhwb3J0cy5pc0Vycm9yZWQ9ci5pc0Vycm9yZWQsdC5leHBvcnRzLmlzUmVhZGFibGU9ci5pc1JlYWRhYmxlLHQuZXhwb3J0cy5SZWFkYWJsZT1yLlJlYWRhYmxlLHQuZXhwb3J0cy5Xcml0YWJsZT1yLldyaXRhYmxlLHQuZXhwb3J0cy5EdXBsZXg9ci5EdXBsZXgsdC5leHBvcnRzLlRyYW5zZm9ybT1yLlRyYW5zZm9ybSx0LmV4cG9ydHMuUGFzc1Rocm91Z2g9ci5QYXNzVGhyb3VnaCx0LmV4cG9ydHMuYWRkQWJvcnRTaWduYWw9ci5hZGRBYm9ydFNpZ25hbCx0LmV4cG9ydHMuZmluaXNoZWQ9ci5maW5pc2hlZCx0LmV4cG9ydHMuZGVzdHJveT1yLmRlc3Ryb3ksdC5leHBvcnRzLmRlc3Ryb3k9aSx0LmV4cG9ydHMucGlwZWxpbmU9ci5waXBlbGluZSx0LmV4cG9ydHMuY29tcG9zZT1yLmNvbXBvc2UsT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJwcm9taXNlc1wiLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6KCk9Pm99KSx0LmV4cG9ydHMuU3RyZWFtPXIuU3RyZWFtLHQuZXhwb3J0cy5kZWZhdWx0PXQuZXhwb3J0c30sMTQxOih0LGUsbik9Pntjb25zdHtmb3JtYXQ6cixpbnNwZWN0Om8sQWdncmVnYXRlRXJyb3I6aX09big3NzUpLGE9Z2xvYmFsVGhpcy5BZ2dyZWdhdGVFcnJvcnx8aSxzPVN5bWJvbChcImtJc05vZGVFcnJvclwiKSx1PVtcInN0cmluZ1wiLFwiZnVuY3Rpb25cIixcIm51bWJlclwiLFwib2JqZWN0XCIsXCJGdW5jdGlvblwiLFwiT2JqZWN0XCIsXCJib29sZWFuXCIsXCJiaWdpbnRcIixcInN5bWJvbFwiXSxsPS9eKFtBLVpdW2EtejAtOV0qKSskLyxjPXt9O2Z1bmN0aW9uIGYodCxlKXtpZighdCl0aHJvdyBuZXcgYy5FUlJfSU5URVJOQUxfQVNTRVJUSU9OKGUpfWZ1bmN0aW9uIGQodCl7bGV0IGU9XCJcIixuPXQubGVuZ3RoO2NvbnN0IHI9XCItXCI9PT10WzBdPzE6MDtmb3IoO24+PXIrNDtuLT0zKWU9YF8ke3Quc2xpY2Uobi0zLG4pfSR7ZX1gO3JldHVybmAke3Quc2xpY2UoMCxuKX0ke2V9YH1mdW5jdGlvbiBoKHQsZSxuKXtufHwobj1FcnJvcik7Y2xhc3MgTm9kZUVycm9yIGV4dGVuZHMgbntjb25zdHJ1Y3RvciguLi5uKXtzdXBlcihmdW5jdGlvbih0LGUsbil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSlyZXR1cm4gZihlLmxlbmd0aDw9bi5sZW5ndGgsYENvZGU6ICR7dH07IFRoZSBwcm92aWRlZCBhcmd1bWVudHMgbGVuZ3RoICgke24ubGVuZ3RofSkgZG9lcyBub3QgbWF0Y2ggdGhlIHJlcXVpcmVkIG9uZXMgKCR7ZS5sZW5ndGh9KS5gKSxlKC4uLm4pO2NvbnN0IG89KGUubWF0Y2goLyVbZGZpam9Pc10vZyl8fFtdKS5sZW5ndGg7cmV0dXJuIGYobz09PW4ubGVuZ3RoLGBDb2RlOiAke3R9OyBUaGUgcHJvdmlkZWQgYXJndW1lbnRzIGxlbmd0aCAoJHtuLmxlbmd0aH0pIGRvZXMgbm90IG1hdGNoIHRoZSByZXF1aXJlZCBvbmVzICgke299KS5gKSwwPT09bi5sZW5ndGg/ZTpyKGUsLi4ubil9KHQsZSxuKSl9dG9TdHJpbmcoKXtyZXR1cm5gJHt0aGlzLm5hbWV9IFske3R9XTogJHt0aGlzLm1lc3NhZ2V9YH19T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTm9kZUVycm9yLnByb3RvdHlwZSx7bmFtZTp7dmFsdWU6bi5uYW1lLHdyaXRhYmxlOiEwLGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSx0b1N0cmluZzp7dmFsdWUoKXtyZXR1cm5gJHt0aGlzLm5hbWV9IFske3R9XTogJHt0aGlzLm1lc3NhZ2V9YH0sd3JpdGFibGU6ITAsZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9fSksTm9kZUVycm9yLnByb3RvdHlwZS5jb2RlPXQsTm9kZUVycm9yLnByb3RvdHlwZVtzXT0hMCxjW3RdPU5vZGVFcnJvcn1mdW5jdGlvbiBwKHQpe2NvbnN0IGU9XCJfX25vZGVfaW50ZXJuYWxfXCIrdC5uYW1lO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIm5hbWVcIix7dmFsdWU6ZX0pLHR9Y2xhc3MgQWJvcnRFcnJvciBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQ9XCJUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkXCIsZT12b2lkIDApe2lmKHZvaWQgMCE9PWUmJlwib2JqZWN0XCIhPXR5cGVvZiBlKXRocm93IG5ldyBjLkVSUl9JTlZBTElEX0FSR19UWVBFKFwib3B0aW9uc1wiLFwiT2JqZWN0XCIsZSk7c3VwZXIodCxlKSx0aGlzLmNvZGU9XCJBQk9SVF9FUlJcIix0aGlzLm5hbWU9XCJBYm9ydEVycm9yXCJ9fWgoXCJFUlJfQVNTRVJUSU9OXCIsXCIlc1wiLEVycm9yKSxoKFwiRVJSX0lOVkFMSURfQVJHX1RZUEVcIiwoKHQsZSxuKT0+e2YoXCJzdHJpbmdcIj09dHlwZW9mIHQsXCInbmFtZScgbXVzdCBiZSBhIHN0cmluZ1wiKSxBcnJheS5pc0FycmF5KGUpfHwoZT1bZV0pO2xldCByPVwiVGhlIFwiO3QuZW5kc1dpdGgoXCIgYXJndW1lbnRcIik/cis9YCR7dH0gYDpyKz1gXCIke3R9XCIgJHt0LmluY2x1ZGVzKFwiLlwiKT9cInByb3BlcnR5XCI6XCJhcmd1bWVudFwifSBgLHIrPVwibXVzdCBiZSBcIjtjb25zdCBpPVtdLGE9W10scz1bXTtmb3IoY29uc3QgdCBvZiBlKWYoXCJzdHJpbmdcIj09dHlwZW9mIHQsXCJBbGwgZXhwZWN0ZWQgZW50cmllcyBoYXZlIHRvIGJlIG9mIHR5cGUgc3RyaW5nXCIpLHUuaW5jbHVkZXModCk/aS5wdXNoKHQudG9Mb3dlckNhc2UoKSk6bC50ZXN0KHQpP2EucHVzaCh0KTooZihcIm9iamVjdFwiIT09dCwnVGhlIHZhbHVlIFwib2JqZWN0XCIgc2hvdWxkIGJlIHdyaXR0ZW4gYXMgXCJPYmplY3RcIicpLHMucHVzaCh0KSk7aWYoYS5sZW5ndGg+MCl7Y29uc3QgdD1pLmluZGV4T2YoXCJvYmplY3RcIik7LTEhPT10JiYoaS5zcGxpY2UoaSx0LDEpLGEucHVzaChcIk9iamVjdFwiKSl9aWYoaS5sZW5ndGg+MCl7c3dpdGNoKGkubGVuZ3RoKXtjYXNlIDE6cis9YG9mIHR5cGUgJHtpWzBdfWA7YnJlYWs7Y2FzZSAyOnIrPWBvbmUgb2YgdHlwZSAke2lbMF19IG9yICR7aVsxXX1gO2JyZWFrO2RlZmF1bHQ6e2NvbnN0IHQ9aS5wb3AoKTtyKz1gb25lIG9mIHR5cGUgJHtpLmpvaW4oXCIsIFwiKX0sIG9yICR7dH1gfX0oYS5sZW5ndGg+MHx8cy5sZW5ndGg+MCkmJihyKz1cIiBvciBcIil9aWYoYS5sZW5ndGg+MCl7c3dpdGNoKGEubGVuZ3RoKXtjYXNlIDE6cis9YGFuIGluc3RhbmNlIG9mICR7YVswXX1gO2JyZWFrO2Nhc2UgMjpyKz1gYW4gaW5zdGFuY2Ugb2YgJHthWzBdfSBvciAke2FbMV19YDticmVhaztkZWZhdWx0Ontjb25zdCB0PWEucG9wKCk7cis9YGFuIGluc3RhbmNlIG9mICR7YS5qb2luKFwiLCBcIil9LCBvciAke3R9YH19cy5sZW5ndGg+MCYmKHIrPVwiIG9yIFwiKX1zd2l0Y2gocy5sZW5ndGgpe2Nhc2UgMDpicmVhaztjYXNlIDE6c1swXS50b0xvd2VyQ2FzZSgpIT09c1swXSYmKHIrPVwiYW4gXCIpLHIrPWAke3NbMF19YDticmVhaztjYXNlIDI6cis9YG9uZSBvZiAke3NbMF19IG9yICR7c1sxXX1gO2JyZWFrO2RlZmF1bHQ6e2NvbnN0IHQ9cy5wb3AoKTtyKz1gb25lIG9mICR7cy5qb2luKFwiLCBcIil9LCBvciAke3R9YH19aWYobnVsbD09bilyKz1gLiBSZWNlaXZlZCAke259YDtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJm4ubmFtZSlyKz1gLiBSZWNlaXZlZCBmdW5jdGlvbiAke24ubmFtZX1gO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIG4pe3ZhciBjO2lmKG51bGwhPT0oYz1uLmNvbnN0cnVjdG9yKSYmdm9pZCAwIT09YyYmYy5uYW1lKXIrPWAuIFJlY2VpdmVkIGFuIGluc3RhbmNlIG9mICR7bi5jb25zdHJ1Y3Rvci5uYW1lfWA7ZWxzZXtyKz1gLiBSZWNlaXZlZCAke28obix7ZGVwdGg6LTF9KX1gfX1lbHNle2xldCB0PW8obix7Y29sb3JzOiExfSk7dC5sZW5ndGg+MjUmJih0PWAke3Quc2xpY2UoMCwyNSl9Li4uYCkscis9YC4gUmVjZWl2ZWQgdHlwZSAke3R5cGVvZiBufSAoJHt0fSlgfXJldHVybiByfSksVHlwZUVycm9yKSxoKFwiRVJSX0lOVkFMSURfQVJHX1ZBTFVFXCIsKCh0LGUsbj1cImlzIGludmFsaWRcIik9PntsZXQgcj1vKGUpO3IubGVuZ3RoPjEyOCYmKHI9ci5zbGljZSgwLDEyOCkrXCIuLi5cIik7cmV0dXJuYFRoZSAke3QuaW5jbHVkZXMoXCIuXCIpP1wicHJvcGVydHlcIjpcImFyZ3VtZW50XCJ9ICcke3R9JyAke259LiBSZWNlaXZlZCAke3J9YH0pLFR5cGVFcnJvciksaChcIkVSUl9JTlZBTElEX1JFVFVSTl9WQUxVRVwiLCgodCxlLG4pPT57dmFyIHI7cmV0dXJuYEV4cGVjdGVkICR7dH0gdG8gYmUgcmV0dXJuZWQgZnJvbSB0aGUgXCIke2V9XCIgZnVuY3Rpb24gYnV0IGdvdCAke251bGwhPW4mJm51bGwhPT0ocj1uLmNvbnN0cnVjdG9yKSYmdm9pZCAwIT09ciYmci5uYW1lP2BpbnN0YW5jZSBvZiAke24uY29uc3RydWN0b3IubmFtZX1gOlwidHlwZSBcIit0eXBlb2Ygbn0uYH0pLFR5cGVFcnJvciksaChcIkVSUl9NSVNTSU5HX0FSR1NcIiwoKC4uLnQpPT57bGV0IGU7Zih0Lmxlbmd0aD4wLFwiQXQgbGVhc3Qgb25lIGFyZyBuZWVkcyB0byBiZSBzcGVjaWZpZWRcIik7Y29uc3Qgbj10Lmxlbmd0aDtzd2l0Y2godD0oQXJyYXkuaXNBcnJheSh0KT90Olt0XSkubWFwKCh0PT5gXCIke3R9XCJgKSkuam9pbihcIiBvciBcIiksbil7Y2FzZSAxOmUrPWBUaGUgJHt0WzBdfSBhcmd1bWVudGA7YnJlYWs7Y2FzZSAyOmUrPWBUaGUgJHt0WzBdfSBhbmQgJHt0WzFdfSBhcmd1bWVudHNgO2JyZWFrO2RlZmF1bHQ6e2NvbnN0IG49dC5wb3AoKTtlKz1gVGhlICR7dC5qb2luKFwiLCBcIil9LCBhbmQgJHtufSBhcmd1bWVudHNgfX1yZXR1cm5gJHtlfSBtdXN0IGJlIHNwZWNpZmllZGB9KSxUeXBlRXJyb3IpLGgoXCJFUlJfT1VUX09GX1JBTkdFXCIsKCh0LGUsbik9PntsZXQgcjtyZXR1cm4gZihlLCdNaXNzaW5nIFwicmFuZ2VcIiBhcmd1bWVudCcpLE51bWJlci5pc0ludGVnZXIobikmJk1hdGguYWJzKG4pPjIqKjMyP3I9ZChTdHJpbmcobikpOlwiYmlnaW50XCI9PXR5cGVvZiBuPyhyPVN0cmluZyhuKSwobj4ybioqMzJufHxuPC0oMm4qKjMybikpJiYocj1kKHIpKSxyKz1cIm5cIik6cj1vKG4pLGBUaGUgdmFsdWUgb2YgXCIke3R9XCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlICR7ZX0uIFJlY2VpdmVkICR7cn1gfSksUmFuZ2VFcnJvciksaChcIkVSUl9NVUxUSVBMRV9DQUxMQkFDS1wiLFwiQ2FsbGJhY2sgY2FsbGVkIG11bHRpcGxlIHRpbWVzXCIsRXJyb3IpLGgoXCJFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRFwiLFwiVGhlICVzIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWRcIixFcnJvciksaChcIkVSUl9TVFJFQU1fQUxSRUFEWV9GSU5JU0hFRFwiLFwiQ2Fubm90IGNhbGwgJXMgYWZ0ZXIgYSBzdHJlYW0gd2FzIGZpbmlzaGVkXCIsRXJyb3IpLGgoXCJFUlJfU1RSRUFNX0NBTk5PVF9QSVBFXCIsXCJDYW5ub3QgcGlwZSwgbm90IHJlYWRhYmxlXCIsRXJyb3IpLGgoXCJFUlJfU1RSRUFNX0RFU1RST1lFRFwiLFwiQ2Fubm90IGNhbGwgJXMgYWZ0ZXIgYSBzdHJlYW0gd2FzIGRlc3Ryb3llZFwiLEVycm9yKSxoKFwiRVJSX1NUUkVBTV9OVUxMX1ZBTFVFU1wiLFwiTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW1cIixUeXBlRXJyb3IpLGgoXCJFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRVwiLFwiUHJlbWF0dXJlIGNsb3NlXCIsRXJyb3IpLGgoXCJFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GXCIsXCJzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRlwiLEVycm9yKSxoKFwiRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVFwiLFwic3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnRcIixFcnJvciksaChcIkVSUl9TVFJFQU1fV1JJVEVfQUZURVJfRU5EXCIsXCJ3cml0ZSBhZnRlciBlbmRcIixFcnJvciksaChcIkVSUl9VTktOT1dOX0VOQ09ESU5HXCIsXCJVbmtub3duIGVuY29kaW5nOiAlc1wiLFR5cGVFcnJvciksdC5leHBvcnRzPXtBYm9ydEVycm9yLGFnZ3JlZ2F0ZVR3b0Vycm9yczpwKChmdW5jdGlvbih0LGUpe2lmKHQmJmUmJnQhPT1lKXtpZihBcnJheS5pc0FycmF5KGUuZXJyb3JzKSlyZXR1cm4gZS5lcnJvcnMucHVzaCh0KSxlO2NvbnN0IG49bmV3IGEoW2UsdF0sZS5tZXNzYWdlKTtyZXR1cm4gbi5jb2RlPWUuY29kZSxufXJldHVybiB0fHxlfSkpLGhpZGVTdGFja0ZyYW1lczpwLGNvZGVzOmN9fSwxOTE6dD0+e3QuZXhwb3J0cz17QXJyYXlJc0FycmF5OnQ9PkFycmF5LmlzQXJyYXkodCksQXJyYXlQcm90b3R5cGVJbmNsdWRlczoodCxlKT0+dC5pbmNsdWRlcyhlKSxBcnJheVByb3RvdHlwZUluZGV4T2Y6KHQsZSk9PnQuaW5kZXhPZihlKSxBcnJheVByb3RvdHlwZUpvaW46KHQsZSk9PnQuam9pbihlKSxBcnJheVByb3RvdHlwZU1hcDoodCxlKT0+dC5tYXAoZSksQXJyYXlQcm90b3R5cGVQb3A6KHQsZSk9PnQucG9wKGUpLEFycmF5UHJvdG90eXBlUHVzaDoodCxlKT0+dC5wdXNoKGUpLEFycmF5UHJvdG90eXBlU2xpY2U6KHQsZSxuKT0+dC5zbGljZShlLG4pLEVycm9yLEZ1bmN0aW9uUHJvdG90eXBlQ2FsbDoodCxlLC4uLm4pPT50LmNhbGwoZSwuLi5uKSxGdW5jdGlvblByb3RvdHlwZVN5bWJvbEhhc0luc3RhbmNlOih0LGUpPT5GdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXS5jYWxsKHQsZSksTWF0aEZsb29yOk1hdGguZmxvb3IsTnVtYmVyLE51bWJlcklzSW50ZWdlcjpOdW1iZXIuaXNJbnRlZ2VyLE51bWJlcklzTmFOOk51bWJlci5pc05hTixOdW1iZXJNQVhfU0FGRV9JTlRFR0VSOk51bWJlci5NQVhfU0FGRV9JTlRFR0VSLE51bWJlck1JTl9TQUZFX0lOVEVHRVI6TnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsTnVtYmVyUGFyc2VJbnQ6TnVtYmVyLnBhcnNlSW50LE9iamVjdERlZmluZVByb3BlcnRpZXM6KHQsZSk9Pk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsZSksT2JqZWN0RGVmaW5lUHJvcGVydHk6KHQsZSxuKT0+T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxuKSxPYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6KHQsZSk9Pk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxlKSxPYmplY3RLZXlzOnQ9Pk9iamVjdC5rZXlzKHQpLE9iamVjdFNldFByb3RvdHlwZU9mOih0LGUpPT5PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKSxQcm9taXNlLFByb21pc2VQcm90b3R5cGVDYXRjaDoodCxlKT0+dC5jYXRjaChlKSxQcm9taXNlUHJvdG90eXBlVGhlbjoodCxlLG4pPT50LnRoZW4oZSxuKSxQcm9taXNlUmVqZWN0OnQ9PlByb21pc2UucmVqZWN0KHQpLFJlZmxlY3RBcHBseTpSZWZsZWN0LmFwcGx5LFJlZ0V4cFByb3RvdHlwZVRlc3Q6KHQsZSk9PnQudGVzdChlKSxTYWZlU2V0OlNldCxTdHJpbmcsU3RyaW5nUHJvdG90eXBlU2xpY2U6KHQsZSxuKT0+dC5zbGljZShlLG4pLFN0cmluZ1Byb3RvdHlwZVRvTG93ZXJDYXNlOnQ9PnQudG9Mb3dlckNhc2UoKSxTdHJpbmdQcm90b3R5cGVUb1VwcGVyQ2FzZTp0PT50LnRvVXBwZXJDYXNlKCksU3RyaW5nUHJvdG90eXBlVHJpbTp0PT50LnRyaW0oKSxTeW1ib2wsU3ltYm9sRm9yOlN5bWJvbC5mb3IsU3ltYm9sQXN5bmNJdGVyYXRvcjpTeW1ib2wuYXN5bmNJdGVyYXRvcixTeW1ib2xIYXNJbnN0YW5jZTpTeW1ib2wuaGFzSW5zdGFuY2UsU3ltYm9sSXRlcmF0b3I6U3ltYm9sLml0ZXJhdG9yLFR5cGVkQXJyYXlQcm90b3R5cGVTZXQ6KHQsZSxuKT0+dC5zZXQoZSxuKSxVaW50OEFycmF5fX0sNzc1Oih0LGUsbik9Pntjb25zdCByPW4oNDg1KSxvPU9iamVjdC5nZXRQcm90b3R5cGVPZigoYXN5bmMgZnVuY3Rpb24oKXt9KSkuY29uc3RydWN0b3IsaT1nbG9iYWxUaGlzLkJsb2J8fHIuQmxvYixhPXZvaWQgMCE9PWk/ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBpfTpmdW5jdGlvbih0KXtyZXR1cm4hMX07Y2xhc3MgQWdncmVnYXRlRXJyb3IgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0KXtpZighQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgaW5wdXQgdG8gYmUgYW4gQXJyYXksIGdvdCBcIit0eXBlb2YgdCk7bGV0IGU9XCJcIjtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKyllKz1gICAgICR7dFtuXS5zdGFja31cXG5gO3N1cGVyKGUpLHRoaXMubmFtZT1cIkFnZ3JlZ2F0ZUVycm9yXCIsdGhpcy5lcnJvcnM9dH19dC5leHBvcnRzPXtBZ2dyZWdhdGVFcnJvcixrRW1wdHlPYmplY3Q6T2JqZWN0LmZyZWV6ZSh7fSksb25jZSh0KXtsZXQgZT0hMTtyZXR1cm4gZnVuY3Rpb24oLi4ubil7ZXx8KGU9ITAsdC5hcHBseSh0aGlzLG4pKX19LGNyZWF0ZURlZmVycmVkUHJvbWlzZTpmdW5jdGlvbigpe2xldCB0LGU7cmV0dXJue3Byb21pc2U6bmV3IFByb21pc2UoKChuLHIpPT57dD1uLGU9cn0pKSxyZXNvbHZlOnQscmVqZWN0OmV9fSxwcm9taXNpZnk6dD0+bmV3IFByb21pc2UoKChlLG4pPT57dCgoKHQsLi4ucik9PnQ/bih0KTplKC4uLnIpKSl9KSksZGVidWdsb2c6KCk9PmZ1bmN0aW9uKCl7fSxmb3JtYXQ6KHQsLi4uZSk9PnQucmVwbGFjZSgvJShbc2RpZmpdKS9nLChmdW5jdGlvbiguLi5bdCxuXSl7Y29uc3Qgcj1lLnNoaWZ0KCk7aWYoXCJmXCI9PT1uKXJldHVybiByLnRvRml4ZWQoNik7aWYoXCJqXCI9PT1uKXJldHVybiBKU09OLnN0cmluZ2lmeShyKTtpZihcInNcIj09PW4mJlwib2JqZWN0XCI9PXR5cGVvZiByKXtyZXR1cm5gJHtyLmNvbnN0cnVjdG9yIT09T2JqZWN0P3IuY29uc3RydWN0b3IubmFtZTpcIlwifSB7fWAudHJpbSgpfXJldHVybiByLnRvU3RyaW5nKCl9KSksaW5zcGVjdCh0KXtzd2l0Y2godHlwZW9mIHQpe2Nhc2VcInN0cmluZ1wiOmlmKHQuaW5jbHVkZXMoXCInXCIpKXtpZighdC5pbmNsdWRlcygnXCInKSlyZXR1cm5gXCIke3R9XCJgO2lmKCF0LmluY2x1ZGVzKFwiYFwiKSYmIXQuaW5jbHVkZXMoXCIke1wiKSlyZXR1cm5gXFxgJHt0fVxcYGB9cmV0dXJuYCcke3R9J2A7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIGlzTmFOKHQpP1wiTmFOXCI6T2JqZWN0LmlzKHQsLTApP1N0cmluZyh0KTp0O2Nhc2VcImJpZ2ludFwiOnJldHVybmAke1N0cmluZyh0KX1uYDtjYXNlXCJib29sZWFuXCI6Y2FzZVwidW5kZWZpbmVkXCI6cmV0dXJuIFN0cmluZyh0KTtjYXNlXCJvYmplY3RcIjpyZXR1cm5cInt9XCJ9fSx0eXBlczp7aXNBc3luY0Z1bmN0aW9uOnQ9PnQgaW5zdGFuY2VvZiBvLGlzQXJyYXlCdWZmZXJWaWV3OnQ9PkFycmF5QnVmZmVyLmlzVmlldyh0KX0saXNCbG9iOmF9LHQuZXhwb3J0cy5wcm9taXNpZnkuY3VzdG9tPVN5bWJvbC5mb3IoXCJub2RlanMudXRpbC5wcm9taXNpZnkuY3VzdG9tXCIpfSwyOTI6KHQsZSxuKT0+e2NvbnN0e0J1ZmZlcjpyfT1uKDQ4NSkse09iamVjdERlZmluZVByb3BlcnR5Om8sT2JqZWN0S2V5czppLFJlZmxlY3RBcHBseTphfT1uKDE5MSkse3Byb21pc2lmeTp7Y3VzdG9tOnN9fT1uKDc3NSkse3N0cmVhbVJldHVybmluZ09wZXJhdG9yczp1LHByb21pc2VSZXR1cm5pbmdPcGVyYXRvcnM6bH09big1NTQpLHtjb2Rlczp7RVJSX0lMTEVHQUxfQ09OU1RSVUNUT1I6Y319PW4oMTQxKSxmPW4oODE4KSx7cGlwZWxpbmU6ZH09big3NTQpLHtkZXN0cm95ZXI6aH09bigyMzApLHA9big4NiksZz1uKDc2MCkseT1uKDEzMiksbT10LmV4cG9ydHM9bigyMDApLlN0cmVhbTttLmlzRGlzdHVyYmVkPXkuaXNEaXN0dXJiZWQsbS5pc0Vycm9yZWQ9eS5pc0Vycm9yZWQsbS5pc1JlYWRhYmxlPXkuaXNSZWFkYWJsZSxtLlJlYWRhYmxlPW4oODU4KTtmb3IoY29uc3QgdyBvZiBpKHUpKXtjb25zdCBfPXVbd107ZnVuY3Rpb24gdiguLi50KXtpZihuZXcudGFyZ2V0KXRocm93IGMoKTtyZXR1cm4gbS5SZWFkYWJsZS5mcm9tKGEoXyx0aGlzLHQpKX1vKHYsXCJuYW1lXCIse19fcHJvdG9fXzpudWxsLHZhbHVlOl8ubmFtZX0pLG8odixcImxlbmd0aFwiLHtfX3Byb3RvX186bnVsbCx2YWx1ZTpfLmxlbmd0aH0pLG8obS5SZWFkYWJsZS5wcm90b3R5cGUsdyx7X19wcm90b19fOm51bGwsdmFsdWU6dixlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pfWZvcihjb25zdCBFIG9mIGkobCkpe2NvbnN0IFM9bFtFXTtmdW5jdGlvbiB2KC4uLnQpe2lmKG5ldy50YXJnZXQpdGhyb3cgYygpO3JldHVybiBhKFMsdGhpcyx0KX1vKHYsXCJuYW1lXCIse19fcHJvdG9fXzpudWxsLHZhbHVlOlMubmFtZX0pLG8odixcImxlbmd0aFwiLHtfX3Byb3RvX186bnVsbCx2YWx1ZTpTLmxlbmd0aH0pLG8obS5SZWFkYWJsZS5wcm90b3R5cGUsRSx7X19wcm90b19fOm51bGwsdmFsdWU6dixlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pfW0uV3JpdGFibGU9bigzNzMpLG0uRHVwbGV4PW4oMTgyKSxtLlRyYW5zZm9ybT1uKDIxMCksbS5QYXNzVGhyb3VnaD1uKDQ2NyksbS5waXBlbGluZT1kO2NvbnN0e2FkZEFib3J0U2lnbmFsOmJ9PW4oMzc0KTttLmFkZEFib3J0U2lnbmFsPWIsbS5maW5pc2hlZD1wLG0uZGVzdHJveT1oLG0uY29tcG9zZT1mLG8obSxcInByb21pc2VzXCIse19fcHJvdG9fXzpudWxsLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDooKT0+Z30pLG8oZCxzLHtfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiEwLGdldDooKT0+Zy5waXBlbGluZX0pLG8ocCxzLHtfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiEwLGdldDooKT0+Zy5maW5pc2hlZH0pLG0uU3RyZWFtPW0sbS5faXNVaW50OEFycmF5PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgVWludDhBcnJheX0sbS5fdWludDhBcnJheVRvQnVmZmVyPWZ1bmN0aW9uKHQpe3JldHVybiByLmZyb20odC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCl9fSw3NjA6KHQsZSxuKT0+e2NvbnN0e0FycmF5UHJvdG90eXBlUG9wOnIsUHJvbWlzZTpvfT1uKDE5MSkse2lzSXRlcmFibGU6aSxpc05vZGVTdHJlYW06YSxpc1dlYlN0cmVhbTpzfT1uKDEzMikse3BpcGVsaW5lSW1wbDp1fT1uKDc1NCkse2ZpbmlzaGVkOmx9PW4oODYpO24oOTEpLHQuZXhwb3J0cz17ZmluaXNoZWQ6bCxwaXBlbGluZTpmdW5jdGlvbiguLi50KXtyZXR1cm4gbmV3IG8oKChlLG4pPT57bGV0IG8sbDtjb25zdCBjPXRbdC5sZW5ndGgtMV07aWYoYyYmXCJvYmplY3RcIj09dHlwZW9mIGMmJiFhKGMpJiYhaShjKSYmIXMoYykpe2NvbnN0IGU9cih0KTtvPWUuc2lnbmFsLGw9ZS5lbmR9dSh0LCgodCxyKT0+e3Q/bih0KTplKHIpfSkse3NpZ25hbDpvLGVuZDpsfSl9KSl9fX0sNTMzOnQ9Pnt2YXIgZSxuLHI9dC5leHBvcnRzPXt9O2Z1bmN0aW9uIG8oKXt0aHJvdyBuZXcgRXJyb3IoXCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIGkoKXt0aHJvdyBuZXcgRXJyb3IoXCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9ZnVuY3Rpb24gYSh0KXtpZihlPT09c2V0VGltZW91dClyZXR1cm4gc2V0VGltZW91dCh0LDApO2lmKChlPT09b3x8IWUpJiZzZXRUaW1lb3V0KXJldHVybiBlPXNldFRpbWVvdXQsc2V0VGltZW91dCh0LDApO3RyeXtyZXR1cm4gZSh0LDApfWNhdGNoKG4pe3RyeXtyZXR1cm4gZS5jYWxsKG51bGwsdCwwKX1jYXRjaChuKXtyZXR1cm4gZS5jYWxsKHRoaXMsdCwwKX19fSFmdW5jdGlvbigpe3RyeXtlPVwiZnVuY3Rpb25cIj09dHlwZW9mIHNldFRpbWVvdXQ/c2V0VGltZW91dDpvfWNhdGNoKHQpe2U9b310cnl7bj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBjbGVhclRpbWVvdXQ/Y2xlYXJUaW1lb3V0Oml9Y2F0Y2godCl7bj1pfX0oKTt2YXIgcyx1PVtdLGw9ITEsYz0tMTtmdW5jdGlvbiBmKCl7bCYmcyYmKGw9ITEscy5sZW5ndGg/dT1zLmNvbmNhdCh1KTpjPS0xLHUubGVuZ3RoJiZkKCkpfWZ1bmN0aW9uIGQoKXtpZighbCl7dmFyIHQ9YShmKTtsPSEwO2Zvcih2YXIgZT11Lmxlbmd0aDtlOyl7Zm9yKHM9dSx1PVtdOysrYzxlOylzJiZzW2NdLnJ1bigpO2M9LTEsZT11Lmxlbmd0aH1zPW51bGwsbD0hMSxmdW5jdGlvbih0KXtpZihuPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQodCk7aWYoKG49PT1pfHwhbikmJmNsZWFyVGltZW91dClyZXR1cm4gbj1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KHQpO3RyeXtyZXR1cm4gbih0KX1jYXRjaChlKXt0cnl7cmV0dXJuIG4uY2FsbChudWxsLHQpfWNhdGNoKGUpe3JldHVybiBuLmNhbGwodGhpcyx0KX19fSh0KX19ZnVuY3Rpb24gaCh0LGUpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1lfWZ1bmN0aW9uIHAoKXt9ci5uZXh0VGljaz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3UucHVzaChuZXcgaCh0LGUpKSwxIT09dS5sZW5ndGh8fGx8fGEoZCl9LGgucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LHIudGl0bGU9XCJicm93c2VyXCIsci5icm93c2VyPSEwLHIuZW52PXt9LHIuYXJndj1bXSxyLnZlcnNpb249XCJcIixyLnZlcnNpb25zPXt9LHIub249cCxyLmFkZExpc3RlbmVyPXAsci5vbmNlPXAsci5vZmY9cCxyLnJlbW92ZUxpc3RlbmVyPXAsci5yZW1vdmVBbGxMaXN0ZW5lcnM9cCxyLmVtaXQ9cCxyLnByZXBlbmRMaXN0ZW5lcj1wLHIucHJlcGVuZE9uY2VMaXN0ZW5lcj1wLHIubGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybltdfSxyLmJpbmRpbmc9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LHIuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LHIuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSxyLnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSwzNzc6KHQsZSxuKT0+e3ZhciByPW4oNDg1KSxvPXIuQnVmZmVyO2Z1bmN0aW9uIGkodCxlKXtmb3IodmFyIG4gaW4gdCllW25dPXRbbl19ZnVuY3Rpb24gYSh0LGUsbil7cmV0dXJuIG8odCxlLG4pfW8uZnJvbSYmby5hbGxvYyYmby5hbGxvY1Vuc2FmZSYmby5hbGxvY1Vuc2FmZVNsb3c/dC5leHBvcnRzPXI6KGkocixlKSxlLkJ1ZmZlcj1hKSxpKG8sYSksYS5mcm9tPWZ1bmN0aW9uKHQsZSxuKXtpZihcIm51bWJlclwiPT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXJcIik7cmV0dXJuIG8odCxlLG4pfSxhLmFsbG9jPWZ1bmN0aW9uKHQsZSxuKXtpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlclwiKTt2YXIgcj1vKHQpO3JldHVybiB2b2lkIDAhPT1lP1wic3RyaW5nXCI9PXR5cGVvZiBuP3IuZmlsbChlLG4pOnIuZmlsbChlKTpyLmZpbGwoMCkscn0sYS5hbGxvY1Vuc2FmZT1mdW5jdGlvbih0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlclwiKTtyZXR1cm4gbyh0KX0sYS5hbGxvY1Vuc2FmZVNsb3c9ZnVuY3Rpb24odCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXJcIik7cmV0dXJuIHIuU2xvd0J1ZmZlcih0KX19LDQ2NDoodCxlLG4pPT57dmFyIHI9bigzNzcpLkJ1ZmZlcixvPXIuaXNFbmNvZGluZ3x8ZnVuY3Rpb24odCl7c3dpdGNoKCh0PVwiXCIrdCkmJnQudG9Mb3dlckNhc2UoKSl7Y2FzZVwiaGV4XCI6Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6Y2FzZVwiYXNjaWlcIjpjYXNlXCJiaW5hcnlcIjpjYXNlXCJiYXNlNjRcIjpjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpjYXNlXCJyYXdcIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX07ZnVuY3Rpb24gaSh0KXt2YXIgZTtzd2l0Y2godGhpcy5lbmNvZGluZz1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtpZighdClyZXR1cm5cInV0ZjhcIjtmb3IodmFyIGU7Oylzd2l0Y2godCl7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuXCJ1dGY4XCI7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuXCJ1dGYxNmxlXCI7Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuXCJsYXRpbjFcIjtjYXNlXCJiYXNlNjRcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImhleFwiOnJldHVybiB0O2RlZmF1bHQ6aWYoZSlyZXR1cm47dD0oXCJcIit0KS50b0xvd2VyQ2FzZSgpLGU9ITB9fSh0KTtpZihcInN0cmluZ1wiIT10eXBlb2YgZSYmKHIuaXNFbmNvZGluZz09PW98fCFvKHQpKSl0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIit0KTtyZXR1cm4gZXx8dH0odCksdGhpcy5lbmNvZGluZyl7Y2FzZVwidXRmMTZsZVwiOnRoaXMudGV4dD11LHRoaXMuZW5kPWwsZT00O2JyZWFrO2Nhc2VcInV0ZjhcIjp0aGlzLmZpbGxMYXN0PXMsZT00O2JyZWFrO2Nhc2VcImJhc2U2NFwiOnRoaXMudGV4dD1jLHRoaXMuZW5kPWYsZT0zO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIHRoaXMud3JpdGU9ZCx2b2lkKHRoaXMuZW5kPWgpfXRoaXMubGFzdE5lZWQ9MCx0aGlzLmxhc3RUb3RhbD0wLHRoaXMubGFzdENoYXI9ci5hbGxvY1Vuc2FmZShlKX1mdW5jdGlvbiBhKHQpe3JldHVybiB0PD0xMjc/MDp0Pj41PT02PzI6dD4+ND09MTQ/Mzp0Pj4zPT0zMD80OnQ+PjY9PTI/LTE6LTJ9ZnVuY3Rpb24gcyh0KXt2YXIgZT10aGlzLmxhc3RUb3RhbC10aGlzLmxhc3ROZWVkLG49ZnVuY3Rpb24odCxlLG4pe2lmKDEyOCE9KDE5MiZlWzBdKSlyZXR1cm4gdC5sYXN0TmVlZD0wLFwi77+9XCI7aWYodC5sYXN0TmVlZD4xJiZlLmxlbmd0aD4xKXtpZigxMjghPSgxOTImZVsxXSkpcmV0dXJuIHQubGFzdE5lZWQ9MSxcIu+/vVwiO2lmKHQubGFzdE5lZWQ+MiYmZS5sZW5ndGg+MiYmMTI4IT0oMTkyJmVbMl0pKXJldHVybiB0Lmxhc3ROZWVkPTIsXCLvv71cIn19KHRoaXMsdCk7cmV0dXJuIHZvaWQgMCE9PW4/bjp0aGlzLmxhc3ROZWVkPD10Lmxlbmd0aD8odC5jb3B5KHRoaXMubGFzdENoYXIsZSwwLHRoaXMubGFzdE5lZWQpLHRoaXMubGFzdENoYXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywwLHRoaXMubGFzdFRvdGFsKSk6KHQuY29weSh0aGlzLmxhc3RDaGFyLGUsMCx0Lmxlbmd0aCksdm9pZCh0aGlzLmxhc3ROZWVkLT10Lmxlbmd0aCkpfWZ1bmN0aW9uIHUodCxlKXtpZigodC5sZW5ndGgtZSklMj09MCl7dmFyIG49dC50b1N0cmluZyhcInV0ZjE2bGVcIixlKTtpZihuKXt2YXIgcj1uLmNoYXJDb2RlQXQobi5sZW5ndGgtMSk7aWYocj49NTUyOTYmJnI8PTU2MzE5KXJldHVybiB0aGlzLmxhc3ROZWVkPTIsdGhpcy5sYXN0VG90YWw9NCx0aGlzLmxhc3RDaGFyWzBdPXRbdC5sZW5ndGgtMl0sdGhpcy5sYXN0Q2hhclsxXT10W3QubGVuZ3RoLTFdLG4uc2xpY2UoMCwtMSl9cmV0dXJuIG59cmV0dXJuIHRoaXMubGFzdE5lZWQ9MSx0aGlzLmxhc3RUb3RhbD0yLHRoaXMubGFzdENoYXJbMF09dFt0Lmxlbmd0aC0xXSx0LnRvU3RyaW5nKFwidXRmMTZsZVwiLGUsdC5sZW5ndGgtMSl9ZnVuY3Rpb24gbCh0KXt2YXIgZT10JiZ0Lmxlbmd0aD90aGlzLndyaXRlKHQpOlwiXCI7aWYodGhpcy5sYXN0TmVlZCl7dmFyIG49dGhpcy5sYXN0VG90YWwtdGhpcy5sYXN0TmVlZDtyZXR1cm4gZSt0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKFwidXRmMTZsZVwiLDAsbil9cmV0dXJuIGV9ZnVuY3Rpb24gYyh0LGUpe3ZhciBuPSh0Lmxlbmd0aC1lKSUzO3JldHVybiAwPT09bj90LnRvU3RyaW5nKFwiYmFzZTY0XCIsZSk6KHRoaXMubGFzdE5lZWQ9My1uLHRoaXMubGFzdFRvdGFsPTMsMT09PW4/dGhpcy5sYXN0Q2hhclswXT10W3QubGVuZ3RoLTFdOih0aGlzLmxhc3RDaGFyWzBdPXRbdC5sZW5ndGgtMl0sdGhpcy5sYXN0Q2hhclsxXT10W3QubGVuZ3RoLTFdKSx0LnRvU3RyaW5nKFwiYmFzZTY0XCIsZSx0Lmxlbmd0aC1uKSl9ZnVuY3Rpb24gZih0KXt2YXIgZT10JiZ0Lmxlbmd0aD90aGlzLndyaXRlKHQpOlwiXCI7cmV0dXJuIHRoaXMubGFzdE5lZWQ/ZSt0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKFwiYmFzZTY0XCIsMCwzLXRoaXMubGFzdE5lZWQpOmV9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gdC50b1N0cmluZyh0aGlzLmVuY29kaW5nKX1mdW5jdGlvbiBoKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD90aGlzLndyaXRlKHQpOlwiXCJ9ZS5TdHJpbmdEZWNvZGVyPWksaS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7aWYoMD09PXQubGVuZ3RoKXJldHVyblwiXCI7dmFyIGUsbjtpZih0aGlzLmxhc3ROZWVkKXtpZih2b2lkIDA9PT0oZT10aGlzLmZpbGxMYXN0KHQpKSlyZXR1cm5cIlwiO249dGhpcy5sYXN0TmVlZCx0aGlzLmxhc3ROZWVkPTB9ZWxzZSBuPTA7cmV0dXJuIG48dC5sZW5ndGg/ZT9lK3RoaXMudGV4dCh0LG4pOnRoaXMudGV4dCh0LG4pOmV8fFwiXCJ9LGkucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Lmxlbmd0aD90aGlzLndyaXRlKHQpOlwiXCI7cmV0dXJuIHRoaXMubGFzdE5lZWQ/ZStcIu+/vVwiOmV9LGkucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZS5sZW5ndGgtMTtpZihyPG4pcmV0dXJuIDA7dmFyIG89YShlW3JdKTtpZihvPj0wKXJldHVybiBvPjAmJih0Lmxhc3ROZWVkPW8tMSksbztpZigtLXI8bnx8LTI9PT1vKXJldHVybiAwO2lmKG89YShlW3JdKSxvPj0wKXJldHVybiBvPjAmJih0Lmxhc3ROZWVkPW8tMiksbztpZigtLXI8bnx8LTI9PT1vKXJldHVybiAwO2lmKG89YShlW3JdKSxvPj0wKXJldHVybiBvPjAmJigyPT09bz9vPTA6dC5sYXN0TmVlZD1vLTMpLG87cmV0dXJuIDB9KHRoaXMsdCxlKTtpZighdGhpcy5sYXN0TmVlZClyZXR1cm4gdC50b1N0cmluZyhcInV0ZjhcIixlKTt0aGlzLmxhc3RUb3RhbD1uO3ZhciByPXQubGVuZ3RoLShuLXRoaXMubGFzdE5lZWQpO3JldHVybiB0LmNvcHkodGhpcy5sYXN0Q2hhciwwLHIpLHQudG9TdHJpbmcoXCJ1dGY4XCIsZSxyKX0saS5wcm90b3R5cGUuZmlsbExhc3Q9ZnVuY3Rpb24odCl7aWYodGhpcy5sYXN0TmVlZDw9dC5sZW5ndGgpcmV0dXJuIHQuY29weSh0aGlzLmxhc3RDaGFyLHRoaXMubGFzdFRvdGFsLXRoaXMubGFzdE5lZWQsMCx0aGlzLmxhc3ROZWVkKSx0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsMCx0aGlzLmxhc3RUb3RhbCk7dC5jb3B5KHRoaXMubGFzdENoYXIsdGhpcy5sYXN0VG90YWwtdGhpcy5sYXN0TmVlZCwwLHQubGVuZ3RoKSx0aGlzLmxhc3ROZWVkLT10Lmxlbmd0aH19LDU0Oih0LGUsbik9PntuLmQoZSx7TVM6KCk9PkEsY0Y6KCk9PkksQUs6KCk9PlQsTV86KCk9PlIsY1g6KCk9PngsQlQ6KCk9PkludGVyb3BFcnJvcixfVzooKT0+QixQZzooKT0+bHQsJGo6KCk9PlksVSQ6KCk9Pk4sVTc6KCk9Pk19KTt2YXIgcj17ZDoodCxlKT0+e2Zvcih2YXIgbiBpbiBlKXIubyhlLG4pJiYhci5vKHQsbikmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4se2VudW1lcmFibGU6ITAsZ2V0OmVbbl19KX0sbzoodCxlKT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LG89e307ci5kKG8se01TOigpPT5BcGlFcnJvcixjRjooKT0+QXBpUmVxdWVzdEVycm9yLEFLOigpPT5BdXRoVG9rZW5FeHBpcmVkRXJyb3IsTV86KCk9PkF1dGhvcml6YXRpb25FcnJvcixjWDooKT0+SW5pdGlhbGl6YXRpb25FcnJvcixZZDooKT0+bCxuajooKT0+Tm90SW1wbGVtZW50ZWRFcnJvcixPNDooKT0+UyxfVzooKT0+UGFyYW1ldGVyRXJyb3IsVSQ6KCk9PmEsVTc6KCk9PnN9KTtjbGFzcyBBcGlFcnJvciBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQsZSl7dmFyIG4scjtzdXBlcih0PW51bGwhPT0obj1udWxsIT10P3Q6bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKSYmdm9pZCAwIT09bj9uOlwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWRcIiksdGhpcy5uYW1lPXRoaXMuY29uc3RydWN0b3IubmFtZSx0aGlzLnN0YWNrPSh0P3RoaXMuc3RhY2s6bnVsbCE9PShyPW51bGw9PWU/dm9pZCAwOmUuc3RhY2spJiZ2b2lkIDAhPT1yP3I6dGhpcy5zdGFjaykucmVwbGFjZSgvXihcXHcqRXJyb3IpLyxgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCl9fWNsYXNzIEFwaVJlcXVlc3RFcnJvciBleHRlbmRzIEFwaUVycm9ye2NvbnN0cnVjdG9yKHQsZSxuKXt2YXIgcjtzdXBlcih0PW51bGwhPT0ocj1udWxsIT10P3Q6bnVsbD09bj92b2lkIDA6bi5tZXNzYWdlKSYmdm9pZCAwIT09cj9yOlwiQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiBleGVjdXRpbmcgdGhlIEFQSSByZXF1ZXN0XCIsbiksdGhpcy5zdGF0dXM9ZX19Y2xhc3MgQXV0aG9yaXphdGlvbkVycm9yIGV4dGVuZHMgQXBpRXJyb3J7Y29uc3RydWN0b3IodCxlKXt2YXIgbjtzdXBlcih0PW51bGwhPT0obj1udWxsIT10P3Q6bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKSYmdm9pZCAwIT09bj9uOlwiQW4gYXV0aG9yaXphdGlvbiBlcnJvciBvY2N1cnJlZFwiLGUpfX1jbGFzcyBBdXRoVG9rZW5FeHBpcmVkRXJyb3IgZXh0ZW5kcyBBcGlFcnJvcntjb25zdHJ1Y3Rvcih0LGUpe3ZhciBuO3N1cGVyKHQ9bnVsbCE9PShuPW51bGwhPXQ/dDpudWxsPT1lP3ZvaWQgMDplLm1lc3NhZ2UpJiZ2b2lkIDAhPT1uP246XCJUaGUgQVBJIHJlcXVlc3QgZmFpbGVkIGFzIHRoZSBhdXRob3JpemF0aW9uIHRva2VucyBoYXZlIGV4cGlyZWRcIixlKX19Y2xhc3MgSW5pdGlhbGl6YXRpb25FcnJvciBleHRlbmRzIEFwaUVycm9ye2NvbnN0cnVjdG9yKHQsZSl7dmFyIG47c3VwZXIodD1udWxsIT09KG49bnVsbCE9dD90Om51bGw9PWU/dm9pZCAwOmUubWVzc2FnZSkmJnZvaWQgMCE9PW4/bjpcIkFuIGluaXRpYWxpemF0aW9uIGVycm9yIG9jY3VycmVkXCIsZSl9fWNsYXNzIE5vdEltcGxlbWVudGVkRXJyb3IgZXh0ZW5kcyBBcGlFcnJvcntjb25zdHJ1Y3Rvcih0LGUpe3ZhciBuO3N1cGVyKHQ9bnVsbCE9PShuPW51bGwhPXQ/dDpudWxsPT1lP3ZvaWQgMDplLm1lc3NhZ2UpJiZ2b2lkIDAhPT1uP246XCJUaGUgbWV0aG9kIGhhcyBub3QgYmVlbiBpbXBsZW1lbnRlZFwiLGUpfX1jbGFzcyBQYXJhbWV0ZXJFcnJvciBleHRlbmRzIEFwaUVycm9ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQ9bnVsbCE9dD90OlwiSW52YWxpZCBwYXJhbWV0ZXIgZGV0ZWN0ZWRcIil9fWNvbnN0IGk9dD0+e2xldCBlPWZpbi5JbnRlZ3JhdGlvbnM7ZXx8KGZpbi5JbnRlZ3JhdGlvbnM9e30sZT1maW4uSW50ZWdyYXRpb25zKTtsZXQgbj1lW3RdO3JldHVybiBufHwoZVt0XT17fSxuPWVbdF0pLG59LGE9dD0+e2kodCkubG9nZ2luZ0VuYWJsZWQ9ITF9LHM9KHQsZT1cIjAuMC4wXCIpPT57aSh0KS5sb2dnaW5nRW5hYmxlZD0hMCxjb25zb2xlLmxvZyh1KHQpLGB2JHtlfWApfSx1PXQ9PmBbQG9wZW5maW4vJHt0LnRvTG93ZXJDYXNlKCl9XWA7Y2xhc3MgbHtjb25zdHJ1Y3Rvcih0KXt0aGlzLm5hbWU9dCx0aGlzLnByZWZpeD11KHQpLHRoaXMuaXNMb2dnaW5nRW5hYmxlZD10aGlzLmlzTG9nZ2luZ0VuYWJsZWQuYmluZCh0aGlzKSx0aGlzLmxvZ0Vycm9yPXRoaXMubG9nRXJyb3IuYmluZCh0aGlzKSx0aGlzLmxvZ0luZm89dGhpcy5sb2dJbmZvLmJpbmQodGhpcyksdGhpcy5sb2dXYXJuaW5nPXRoaXMubG9nV2FybmluZy5iaW5kKHRoaXMpfWlzTG9nZ2luZ0VuYWJsZWQoKXtyZXR1cm4gaSh0aGlzLm5hbWUpLmxvZ2dpbmdFbmFibGVkfWxvZ0Vycm9yKHQpe3RoaXMuaXNMb2dnaW5nRW5hYmxlZCgpJiYodC5pbm5lckVycm9yP2NvbnNvbGUuZXJyb3IodGhpcy5wcmVmaXgsdCxcIlxcblxcbihpbm5lcilcIix0LmlubmVyRXJyb3IpOmNvbnNvbGUuZXJyb3IodGhpcy5wcmVmaXgsdCkpfWxvZ0luZm8oLi4udCl7dGhpcy5pc0xvZ2dpbmdFbmFibGVkKCkmJmNvbnNvbGUubG9nKHRoaXMucHJlZml4LC4uLnQpfWxvZ1dhcm5pbmcoLi4udCl7dGhpcy5pc0xvZ2dpbmdFbmFibGVkKCkmJmNvbnNvbGUud2Fybih0aGlzLnByZWZpeCwuLi50KX19Y29uc3QgYz1cIm9hdXRoLWFwaS1hdXRoLWZsb3dcIixmPSh0LGUsbixyLG8saSxhLHMpPT5hc3luYyB1PT57Y29uc3QgbD1uZXcgVVJMKHUpO2lmKDAhPT1sLmhyZWYudG9Mb3dlckNhc2UoKS5pbmRleE9mKG8udG9Mb3dlckNhc2UoKSkpcmV0dXJuITE7aWYod2luZG93LmNsZWFySW50ZXJ2YWwocyksd2luZG93LmNsZWFyVGltZW91dChlKSx3aW5kb3cuY2xlYXJUaW1lb3V0KG4pLHQucmVtb3ZlQWxsTGlzdGVuZXJzKCksdC5jbG9zZSghMCksbC5zZWFyY2hQYXJhbXMuZ2V0KFwiZXJyb3JcIikpe2NvbnN0IHQ9bmV3IEFwaUVycm9yKFwiQXV0aG9yaXphdGlvbiBlcnJvclwiKTtyZXR1cm4gdC5kYXRhPWwudG9TdHJpbmcoKSxhKHQpLCEwfWlmKGwuc2VhcmNoUGFyYW1zLmdldChcInN0YXRlXCIpIT09cil7Y29uc3QgdD1uZXcgQXBpRXJyb3IoXCJTdGF0ZSBtaXNtYXRjaFwiKTtyZXR1cm4gdC5kYXRhPWwudG9TdHJpbmcoKSxhKHQpLCEwfWNvbnN0IGM9bC5zZWFyY2hQYXJhbXMuZ2V0KFwiY29kZVwiKTtpZighYyl7Y29uc3QgdD1uZXcgQXBpRXJyb3IoXCJBdXRob3JpemF0aW9uIGNvZGUgbWlzc2luZ1wiKTtyZXR1cm4gdC5kYXRhPWwudG9TdHJpbmcoKSxhKHQpLCEwfXJldHVybiBpKGMpLCEwfSxkPSh0LGUsbixyKT0+YXN5bmMobyxpKT0+e2xldCBhO2NvbnN0IHM9d2luZG93LnNldFRpbWVvdXQoKCgpPT57d2luZG93LmNsZWFySW50ZXJ2YWwoYSksd2luZG93LmNsZWFyVGltZW91dChzKSx0LnJlbW92ZUFsbExpc3RlbmVycygpLHQuY2xvc2UoITApLGkobmV3IEFwaUVycm9yKFwiQXV0aG9yaXphdGlvbiB0aW1lZCBvdXRcIikpfSksM2U1KTt0LmFkZExpc3RlbmVyKFwiY2xvc2luZ1wiLChhc3luYygpPT57ci5sb2dJbmZvKFwiVXNlciBjbG9zZWQgYXV0aCB3aW5kb3dcIiksd2luZG93LmNsZWFySW50ZXJ2YWwoYSksd2luZG93LmNsZWFyVGltZW91dChzKSx0LnJlbW92ZUFsbExpc3RlbmVycygpLGkobmV3IEFwaUVycm9yKFwiRmFpbGVkIHRvIGNvbXBsZXRlIGF1dGhvcml6YXRpb24gY29kZSBmbG93XCIpKX0pKTtjb25zdCB1PXdpbmRvdy5zZXRUaW1lb3V0KChhc3luYygpPT57dHJ5e2F3YWl0IHQuaXNTaG93aW5nKCl8fChyLmxvZ0luZm8oXCJTaG93aW5nIGF1dGggd2luZG93XCIpLGF3YWl0IHQuc2hvdyghMCksYXdhaXQgdC5mb2N1cygpKX1jYXRjaCh0KXtyLmxvZ1dhcm5pbmcoXCJVbmFibGUgdG8gc2hvdyBhdXRoIHdpbmRvd1wiKX19KSwyZTMpLHt2ZXJzaW9uOmx9PWF3YWl0IGZpbi5TeXN0ZW0uZ2V0UnVudGltZUluZm8oKTtwYXJzZUludChsLnNwbGl0KFwiLlwiKVswXSwxMCk+PTMwP2F3YWl0IGYodCxzLHUsZSxuLG8saSkoKGF3YWl0IHQuZ2V0SW5mbygpKS51cmwpfHxhd2FpdCB0LmFkZExpc3RlbmVyKFwidXJsLWNoYW5nZWRcIiwoYT0+e3IubG9nSW5mbyhcIkF1dGggd2luZG93IG5hdmlnYXRlZCB0b1wiLGEudXJsKSxmKHQscyx1LGUsbixvLGkpKGEudXJsKX0pKTphPXdpbmRvdy5zZXRJbnRlcnZhbCgoKCk9Pihhc3luYyh0LGUsbixyLG8saSxhLHMpPT57bGV0IHU7dHJ5e3U9YXdhaXQgdC5nZXRJbmZvKCl9Y2F0Y2godCl7cmV0dXJuIHdpbmRvdy5jbGVhckludGVydmFsKGUpLHdpbmRvdy5jbGVhclRpbWVvdXQobiksd2luZG93LmNsZWFyVGltZW91dChyKSxzKG5ldyBBcGlFcnJvcihcIkNvdWxkIG5vdCBsb2NhdGUgYXV0aCB3aW5kb3dcIikpLCExfXJldHVybiBmKHQsbixyLG8saSxhLHMsZSkodS51cmwpfSkodCxhLHMsdSxlLG4sbyxpKSksNTAwKX0saD0oKT0+e2xldCB0LGUsbixyO2NvbnN0IG89YXN5bmMoZSxuPSExKT0+e2NvbnN0e2NvbW1hbmQ6cixkYXRhOmEsaWQ6c309ZSx1PXtjb21tYW5kOnIsaWQ6c307dHJ5e2lmKCF0KXRocm93IG5ldyBFcnJvcihcIkFjY2VzcyB0b2tlbiBub3QgZm91bmRcIik7Y29uc3R7YXBpUmVxdWVzdFVybDpyLGRhdGE6cyxoZWFkZXJzOmwsaHR0cE1ldGhvZDpjLGluY2x1ZGVBdXRob3JpemF0aW9uOmZ9PWEsZD1hd2FpdChhc3luYyhlLG4scixvLGkpPT57dmFyIGEscztjb25zdCB1PU9iamVjdC5hc3NpZ24oe0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIn0sbyk7XCJQQVRDSFwiIT09biYmXCJQT1NUXCIhPT1uJiZcIlBVVFwiIT09bnx8L2NvbnRlbnQtdHlwZS9pLnRlc3QoT2JqZWN0LmtleXModSkuam9pbihcIixcIikpfHwodVtcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL2pzb25cIiksaSYmKHUuQXV0aG9yaXphdGlvbj1gQmVhcmVyICR7dH1gKTtjb25zdCBsPWF3YWl0IGZldGNoKGUse2JvZHk6XCJvYmplY3RcIj09dHlwZW9mIHI/SlNPTi5zdHJpbmdpZnkocik6cixoZWFkZXJzOnUsbWV0aG9kOm59KTtpZighbC5vayl7Y29uc3QgdD17bWVzc2FnZTpcIkZhaWxlZCB0byBleGVjdXRlIEFQSSByZXF1ZXN0XCJ9O3JldHVybihudWxsPT09KGE9bC5oZWFkZXJzLmdldChcIkNvbnRlbnQtVHlwZVwiKSl8fHZvaWQgMD09PWE/dm9pZCAwOmEuaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSYmKHQuZGF0YT1hd2FpdCBsLmpzb24oKSksW2wuc3RhdHVzLHZvaWQgMCx2b2lkIDAsdF19bGV0IGM7Y29uc3QgZj1udWxsIT09KHM9bC5oZWFkZXJzLmdldChcIkNvbnRlbnQtVHlwZVwiKSkmJnZvaWQgMCE9PXM/czpcIlwiO3N3aXRjaCghMCl7Y2FzZSFmOmJyZWFrO2Nhc2UvXmFwcGxpY2F0aW9uXFwvKFxcdytcXCspP2pzb24vaS50ZXN0KGYpOmM9YXdhaXQgbC5qc29uKCk7YnJlYWs7Y2FzZS9ebXVsdGlwYXJ0XFwvZm9ybS0/ZGF0YXxeYXBwbGljYXRpb25cXC94LT93d3ctP2Zvcm0tP3VybGVuY29kZWQvaS50ZXN0KGYpOmM9YXdhaXQgbC5mb3JtRGF0YSgpO2JyZWFrO2Nhc2UvXmFwcGxpY2F0aW9uXFwvKChbXi9dKyk/eG1sfHZuZFxcLm9wZW54bWxmb3JtYXRzKXxedGV4dFxcL3xeaW1hZ2VcXC9zdmcvaS50ZXN0KGYpOmM9YXdhaXQgbC50ZXh0KCk7YnJlYWs7ZGVmYXVsdDpjPWF3YWl0IGwuYXJyYXlCdWZmZXIoKX1yZXR1cm5bbC5zdGF0dXMsYyxmLHZvaWQgMF19KShyLGMscyxsLGYpLFtoLHAsZyx5XT1kO2lmKHUuc3RhdHVzPWgseSl7aWYoIW4mJjQwMT09PWgpe2NvbnN0W3Qsbl09YXdhaXQgaSgpO3JldHVybiBuPyh1LnN0YXR1cz10LHUuZXJyb3I9bix1KTphd2FpdCBvKGUsITApfXUuZXJyb3I9eX1lbHNlIHAmJih1LmRhdGE9cCx1LnR5cGU9Zyl9Y2F0Y2godCl7dCBpbnN0YW5jZW9mIEVycm9yP3UuZXJyb3I9e21lc3NhZ2U6dC5tZXNzYWdlfTp1LmVycm9yPXttZXNzYWdlOlwiRmFpbGVkIHRvIGV4ZWN1dGUgQVBJIHJlcXVlc3RcIn19cmV0dXJuIFByb21pc2UucmVzb2x2ZSh1KX0saT1hc3luYygpPT57dmFyIG87aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiQXV0aG9yaXphdGlvbiBzZXJ2ZXIgbWV0YWRhdGEgbm90IHNldFwiKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgSUQgbm90IHNldFwiKTtjb25zdCBpPWBncmFudF90eXBlPXJlZnJlc2hfdG9rZW4mY2xpZW50X2lkPSR7ZX0mcmVmcmVzaF90b2tlbj0ke3J9YCxhPWF3YWl0IGZldGNoKG4udG9rZW5fZW5kcG9pbnQse2JvZHk6aSxoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwifSxtZXRob2Q6XCJQT1NUXCJ9KTtpZighYS5vayl7Y29uc3QgdD17bWVzc2FnZTpcIkZhaWxlZCB0byByZWZyZXNoIGFjY2VzcyB0b2tlblwifTtyZXR1cm4obnVsbD09PShvPWEuaGVhZGVycy5nZXQoXCJDb250ZW50LVR5cGVcIikpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkmJih0LmRhdGE9YXdhaXQgYS5qc29uKCkpLFthLnN0YXR1cyx0XX1jb25zdCBzPWF3YWl0IGEuanNvbigpO3JldHVybiB0PXMuYWNjZXNzX3Rva2VuLFthLnN0YXR1c119O3NlbGYub25tZXNzYWdlPWFzeW5jIGk9Pntjb25zdHtjb21tYW5kOmEsaWQ6c309aS5kYXRhO2xldCB1PXtjb21tYW5kOmEsaWQ6c307c3dpdGNoKGEpe2Nhc2VcIkFQSV9SRVFVRVNUXCI6dT1hd2FpdCBvKGkuZGF0YSk7YnJlYWs7Y2FzZVwiQ09ERV9FWENIQU5HRVwiOnU9YXdhaXQoYXN5bmMgbz0+e3ZhciBpO2NvbnN0e2NvbW1hbmQ6YSxkYXRhOnMsaWQ6dX09byxsPXtjb21tYW5kOmEsaWQ6dX07dHJ5e2lmKCFuKXRocm93IG5ldyBFcnJvcihcIkF1dGhvcml6YXRpb24gc2VydmVyIG1ldGFkYXRhIG5vdCBzZXRcIik7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IElEIG5vdCBzZXRcIik7Y29uc3R7Y29kZTpvLGNvZGVWZXJpZmllcjphLHJlZGlyZWN0VXJpOnV9PXMsYz1gZ3JhbnRfdHlwZT1hdXRob3JpemF0aW9uX2NvZGUmY2xpZW50X2lkPSR7ZX0mY29kZT0ke299JmNvZGVfdmVyaWZpZXI9JHthfSZyZWRpcmVjdF91cmk9JHt1fWAsZj1hd2FpdCBmZXRjaChuLnRva2VuX2VuZHBvaW50LHtib2R5OmMsaGVhZGVyczp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvblwiLFwiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIn0sbWV0aG9kOlwiUE9TVFwifSk7aWYoZi5vayl7Y29uc3QgZT1hd2FpdCBmLmpzb24oKTt0PWUuYWNjZXNzX3Rva2VuLHI9ZS5yZWZyZXNoX3Rva2VufWVsc2V7Y29uc3QgdD17bWVzc2FnZTpcIkZhaWxlZCB0byByZXRyaWV2ZSB0b2tlbnNcIn07KG51bGw9PT0oaT1mLmhlYWRlcnMuZ2V0KFwiQ29udGVudC1UeXBlXCIpKXx8dm9pZCAwPT09aT92b2lkIDA6aS5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpJiYodC5kYXRhPWF3YWl0IGYuanNvbigpKSxsLmVycm9yPXR9fWNhdGNoKHQpe3QgaW5zdGFuY2VvZiBFcnJvcj9sLmVycm9yPXttZXNzYWdlOnQubWVzc2FnZX06bC5lcnJvcj17bWVzc2FnZTpcIkZhaWxlZCB0byByZXRyaWV2ZSB0b2tlbnNcIn19cmV0dXJuIFByb21pc2UucmVzb2x2ZShsKX0pKGkuZGF0YSk7YnJlYWs7Y2FzZVwiRVhQSVJFX1RPS0VOU1wiOnU9YXdhaXQoYXN5bmMgZT0+e3ZhciBvO2NvbnN0e2NvbW1hbmQ6aSxleHBpcmVBY2Nlc3NUb2tlbk9ubHk6YSxpZDpzfT1lLHU9e2NvbW1hbmQ6aSxpZDpzfTt0cnl7aWYoIWEmJiFyKXRocm93IG5ldyBFcnJvcihcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kXCIpO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIkF1dGhvcml6YXRpb24gc2VydmVyIG1ldGFkYXRhIG5vdCBzZXRcIik7aWYoIW4ucmV2b2NhdGlvbl9lbmRwb2ludCl0aHJvdyBuZXcgRXJyb3IoXCJSZXZvY2F0aW9uIGVuZHBvaW50IG1pc3NpbmcgaW4gYXV0aG9yaXphdGlvbiBzZXJ2ZXIgbWV0YWRhdGFcIik7Y29uc3QgZT1hP3Q6cixpPWF3YWl0IGZldGNoKGAke24ucmV2b2NhdGlvbl9lbmRwb2ludH0/dG9rZW49JHtlfWAse2hlYWRlcnM6e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIn19KTtpZighaS5vayl7Y29uc3QgdD17bWVzc2FnZTpcIkZhaWxlZCB0byByZXZva2UgdG9rZW5zXCJ9OyhudWxsPT09KG89aS5oZWFkZXJzLmdldChcIkNvbnRlbnQtVHlwZVwiKSl8fHZvaWQgMD09PW8/dm9pZCAwOm8uaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSYmKHQuZGF0YT1hd2FpdCBpLmpzb24oKSksdS5lcnJvcj10fX1jYXRjaCh0KXt0IGluc3RhbmNlb2YgRXJyb3I/dS5lcnJvcj17bWVzc2FnZTp0Lm1lc3NhZ2V9OnUuZXJyb3I9e21lc3NhZ2U6XCJGYWlsZWQgdG8gcmV2b2tlIHRva2Vuc1wifX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHUpfSkoaS5kYXRhKTticmVhaztjYXNlXCJJTklUXCI6dT1hd2FpdChhc3luYyB0PT57Y29uc3R7Y29tbWFuZDpyLGRhdGE6byxpZDppfT10LGE9e2NvbW1hbmQ6cixpZDppfTtyZXR1cm4gZT1vLmNsaWVudElkLG49by5tZXRhZGF0YSxQcm9taXNlLnJlc29sdmUoYSl9KShpLmRhdGEpO2JyZWFrO2RlZmF1bHQ6dS5lcnJvcj1uZXcgRXJyb3IoYFVuZXhwZWN0ZWQgb2F1dGggd29ya2VyIGNvbW1hbmQ6ICR7YX1gKX1zZWxmLnBvc3RNZXNzYWdlKHUpfX07dmFyIHA7IWZ1bmN0aW9uKHQpe3QuQXBpUmVxdWVzdD1cIkFQSV9SRVFVRVNUXCIsdC5Db2RlRXhjaGFuZ2U9XCJDT0RFX0VYQ0hBTkdFXCIsdC5FeHBpcmVUb2tlbnM9XCJFWFBJUkVfVE9LRU5TXCIsdC5Jbml0PVwiSU5JVFwifShwfHwocD17fSkpO2NvbnN0IGc9W10seT10PT57Zy5wdXNoKHQpfSxtPSh0LGUpPT4obixyLG8pPT5uZXcgUHJvbWlzZSgoKGksYSk9Pntjb25zdCBzPXtjb21tYW5kOnAuQ29kZUV4Y2hhbmdlLGRhdGE6e2NvZGU6bixjb2RlVmVyaWZpZXI6cixyZWRpcmVjdFVyaTpvfSxpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCl9LHtjb21tYW5kOnUsaWQ6bH09czt5KHtjb21tYW5kOnUsaWQ6bCxyZWplY3Q6YSxyZXNvbHZlOml9KSx0LnBvc3RNZXNzYWdlKHMpLGUubG9nSW5mbyhcIldvcmtlciByZXF1ZXN0IHNlbnRcIixzKX0pKSx2PSh0LGUsbik9PihyLG8saSxhLHMpPT5uZXcgUHJvbWlzZSgoKHUsbCk9Pntjb25zdCBjPXtjb21tYW5kOnAuQXBpUmVxdWVzdCxkYXRhOnthcGlSZXF1ZXN0VXJsOnIsY2xpZW50SWQ6dCxkYXRhOmksaGVhZGVyczphLGh0dHBNZXRob2Q6byxpbmNsdWRlQXV0aG9yaXphdGlvbjpzfSxpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCl9LHtjb21tYW5kOmYsaWQ6ZH09Yzt5KHtjb21tYW5kOmYsaWQ6ZCxyZWplY3Q6bCxyZXNvbHZlOnV9KSxlLnBvc3RNZXNzYWdlKGMpLG4ubG9nSW5mbyhcIldvcmtlciByZXF1ZXN0IHNlbnRcIixjKX0pKSxiPSh0LGUpPT5uPT5uZXcgUHJvbWlzZSgoKHIsbyk9Pntjb25zdCBpPXtjb21tYW5kOnAuRXhwaXJlVG9rZW5zLGV4cGlyZUFjY2Vzc1Rva2VuT25seTpuLGlkOkRhdGUubm93KCkudG9TdHJpbmcoKX0se2NvbW1hbmQ6YSxpZDpzfT1pO3koe2NvbW1hbmQ6YSxpZDpzLHJlamVjdDpvLHJlc29sdmU6cn0pLHQucG9zdE1lc3NhZ2UoaSksZS5sb2dJbmZvKFwiV29ya2VyIHJlcXVlc3Qgc2VudFwiLGkpfSkpLHc9dD0+ZT0+e3QubG9nSW5mbyhcIldvcmtlciByZXNwb25zZSByZWNlaXZlZFwiLGUuZGF0YSk7Y29uc3Qgbj1lLmRhdGEse2NvbW1hbmQ6cixlcnJvcjpvLGlkOml9PW4sYT1mdW5jdGlvbih0LGUpe3ZhciBuPXt9O2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiZlLmluZGV4T2Yocik8MCYmKG5bcl09dFtyXSk7aWYobnVsbCE9dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG89MDtmb3Iocj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO288ci5sZW5ndGg7bysrKWUuaW5kZXhPZihyW29dKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodCxyW29dKSYmKG5bcltvXV09dFtyW29dXSl9cmV0dXJuIG59KG4sW1wiY29tbWFuZFwiLFwiZXJyb3JcIixcImlkXCJdKSxzPSgodCxlKT0+Zy5maW5kKChuPT5uLmNvbW1hbmQ9PT1lJiZuLmlkPT09dCkpKShpLHIpO3M/KG8/KFwic3RhdHVzXCJpbiBhJiZ2b2lkIDAhPT1hLnN0YXR1cyYmKG8uc3RhdHVzPWEuc3RhdHVzKSxzLnJlamVjdChvKSk6cy5yZXNvbHZlKGEpLF8oaSxyKSk6dC5sb2dFcnJvcihuZXcgRXJyb3IoXCJVbmFibGUgdG8gbG9jYXRlIGF3YWl0ZWQgcmVxdWVzdFwiKSl9LF89KHQsZSk9Pntjb25zdCBuPWcuZmluZEluZGV4KChuPT5uLmNvbW1hbmQ9PT1lJiZuLmlkPT09dCkpO24+PTAmJmcuc3BsaWNlKG4sMSl9LEU9KHQsZSk9PmFzeW5jKCk9Pnt0cnl7YXdhaXQgYih0LGUpKCExKX1jYXRjaCh0KXtlLmxvZ1dhcm5pbmcodC5tZXNzYWdlKX10LnRlcm1pbmF0ZSgpLGUubG9nSW5mbyhcIldvcmtlciB0ZXJtaW5hdGVkXCIpfTtjbGFzcyBTe2dldCBhcGlPcmlnaW4oKXtyZXR1cm4gdGhpcy5fYXBpT3JpZ2lufWdldCBjbGllbnRJZCgpe3JldHVybiB0aGlzLl9jbGllbnRJZH1nZXQgbG9nZ2VyKCl7cmV0dXJuIHRoaXMuX2xvZ2dlcn1nZXQgbWV0YWRhdGEoKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGF9Z2V0IHdvcmtlcigpe3JldHVybiB0aGlzLl93b3JrZXJ9Y29uc3RydWN0b3IodCxlLG4scixvKXtpZih0aGlzLmV4ZWN1dGVBcGlSZXF1ZXN0PWFzeW5jKHQsZT1cIkdFVFwiLG4scixvPSEwLGk9ITEpPT57dGhpcy5fbG9nZ2VyLmxvZ0luZm8oXCJFeGVjdXRlQXBpUmVxdWVzdCBzdGFydGVkXCIsdCxlLG4scik7dHJ5e2NvbnN0IGk9YXdhaXQoKHQsZSk9PmFzeW5jKG4scixvLGksYSk9Pnt0cnl7cmV0dXJuIGF3YWl0IGUuZXhlY3V0ZUFwaVJlcXVlc3QoYCR7dH0ke259YCxyLG8saSxhKX1jYXRjaCh0KXtsZXQgZTtjb25zdHtkYXRhOm4sbWVzc2FnZTpyLHN0YXR1czpvfT10O3Rocm93IGU9dCBpbnN0YW5jZW9mIEVycm9yP25ldyBBcGlSZXF1ZXN0RXJyb3IocixvKTpcIkZhaWxlZCB0byByZWZyZXNoIGFjY2VzcyB0b2tlblwiPT09cj9uZXcgQXV0aFRva2VuRXhwaXJlZEVycm9yKHIpOm5ldyBBcGlSZXF1ZXN0RXJyb3IocixvKSxlLmRhdGE9bixlfX0pKHRoaXMuX2FwaU9yaWdpbix0aGlzLl93b3JrZXIpKHQsZSxuLHIsbyk7cmV0dXJuIHRoaXMuX2xvZ2dlci5sb2dJbmZvKFwiRXhlY3V0ZUFwaVJlcXVlc3QgY29tcGxldGVkXCIsaSksaX1jYXRjaCh0KXtpZih0IGluc3RhbmNlb2YgQXBpUmVxdWVzdEVycm9yKXtjb25zdHtkYXRhOmUsbWVzc2FnZTpuLG5hbWU6cixzdGFjazpvfT10LGk9dGhpcy5nZXRFcnJvck1lc3NhZ2VGcm9tU2VydmVyUmVzcG9uc2UoZSk7aSYmKHQubWVzc2FnZT1pLHQuc3RhY2s9bnVsbD09bz92b2lkIDA6by5yZXBsYWNlKGAke3J9OiAke259YCxgJHtyfTogJHtpfWApKX10aHJvdyBpJiZ0aGlzLmxvZ2dlci5sb2dFcnJvcih0KSx0fX0sISh0JiZlJiZuJiZyJiZvKSl0aHJvdyBuZXcgSW5pdGlhbGl6YXRpb25FcnJvcihcIlByb3ZpZGVyIGhhcyBub3QgYmVlbiBwcm9wZXJseSBpbml0aWFsaXplZCAoY2FsbCBpbml0IHRvIGNyZWF0ZSBuZXcgaW5zdGFuY2VzKVwiKTt0aGlzLl9hcGlPcmlnaW49dCx0aGlzLl9jbGllbnRJZD1lLHRoaXMuX21ldGFkYXRhPW4sdGhpcy5fd29ya2VyPXIsdGhpcy5fbG9nZ2VyPW8sdGhpcy5hdXRob3JpemU9dGhpcy5hdXRob3JpemUuYmluZCh0aGlzKSx0aGlzLmNsb3NlPXRoaXMuY2xvc2UuYmluZCh0aGlzKSx0aGlzLmV4ZWN1dGVBcGlSZXF1ZXN0PXRoaXMuZXhlY3V0ZUFwaVJlcXVlc3QuYmluZCh0aGlzKSx0aGlzLmV4cGlyZVRva2Vucz10aGlzLmV4cGlyZVRva2Vucy5iaW5kKHRoaXMpLHRoaXMuZ2V0RXJyb3JNZXNzYWdlRnJvbVNlcnZlclJlc3BvbnNlPXRoaXMuZ2V0RXJyb3JNZXNzYWdlRnJvbVNlcnZlclJlc3BvbnNlLmJpbmQodGhpcyl9YXN5bmMgYXV0aG9yaXplKHQsZSxuKXtpZih0aGlzLl9sb2dnZXIubG9nSW5mbyhcIkF1dGhvcml6ZSBzdGFydGVkXCIsdCxlLG4pLCF0aGlzLl9tZXRhZGF0YXx8IXRoaXMuX2NsaWVudElkfHwhdGhpcy5fd29ya2VyKXRocm93IG5ldyBJbml0aWFsaXphdGlvbkVycm9yKFwiUHJvdmlkZXIgaGFzIG5vdCBiZWVuIHByb3Blcmx5IGluaXRpYWxpemVkIChjYWxsIGluaXQgdG8gY3JlYXRlIG5ldyBpbnN0YW5jZXMpXCIpO3RyeXthd2FpdChyPXRoaXMuX21ldGFkYXRhLG89dGhpcy5fY2xpZW50SWQsaT10aGlzLl93b3JrZXIsYT10aGlzLl9sb2dnZXIsYXN5bmModCxlLG4pPT57Y29uc3R7YXV0aG9yaXphdGlvbl9lbmRwb2ludDpzfT1yLHU9ZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCksbD0oYXdhaXQgdS5nZXRDaGlsZFdpbmRvd3MoKSkuZmluZCgodD0+dC5pZGVudGl0eS5uYW1lPT09YykpO2wmJmF3YWl0IGwuY2xvc2UoITApO2NvbnN0IGY9KG5ldyBEYXRlKS5nZXRUaW1lKCkudG9TdHJpbmcoKSxoPSgoKT0+e2NvbnN0IHQ9bmV3IFVpbnQzMkFycmF5KDY0KTtyZXR1cm4gd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXModCksQXJyYXkuZnJvbSh0LCh0PT5gMCR7dC50b1N0cmluZygxNil9YC5zbGljZSgtMikpKS5qb2luKFwiXCIpfSkoKSxwPShhd2FpdChhc3luYyB0PT57Y29uc3QgZT0obmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCksbj1hd2FpdCB3aW5kb3cuY3J5cHRvLnN1YnRsZS5kaWdlc3QoXCJTSEEtMjU2XCIsZSkscj1hd2FpdCh0PT5uZXcgUHJvbWlzZSgoKGUsbik9Pnt0cnl7Y29uc3Qgcj1uZXcgQmxvYihbdF0pLG89bmV3IEZpbGVSZWFkZXI7by5vbmxvYWQ9dD0+e3ZhciByLG87Y29uc3QgaT1udWxsPT09KHI9dC50YXJnZXQpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnJlc3VsdDtpZihpKXtjb25zdFssdF09QXJyYXkuZnJvbShudWxsIT09KG89aS5tYXRjaCgvYmFzZTY0LCguKikkL2kpKSYmdm9pZCAwIT09bz9vOltdKTtlKG51bGwhPXQ/dDpcIlwiKX1uKG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZW1wdHkgcmVzdWx0XCIpKX0sby5yZWFkQXNEYXRhVVJMKHIpfWNhdGNoKHQpe24odCl9fSkpKShuKTtyZXR1cm4gci5yZXBsYWNlKC9cXCsvZyxcIi1cIikucmVwbGFjZSgvXFwvL2csXCJfXCIpfSkoaCkpLnJlcGxhY2UoLz0rJC8sXCJcIik7bGV0IGc9XCJcIjtlJiYoZz1cIiZcIixnKz1PYmplY3QuZW50cmllcyhlKS5tYXAoKHQ9PmAke2VuY29kZVVSSUNvbXBvbmVudCh0WzBdKX09JHtlbmNvZGVVUklDb21wb25lbnQodFsxXSl9YCkpLmpvaW4oXCImXCIpKTtjb25zdCB5PWAke3N9P2NsaWVudF9pZD0ke2VuY29kZVVSSUNvbXBvbmVudChvKX0mcmVkaXJlY3RfdXJpPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQpfSZyZXNwb25zZV90eXBlPWNvZGUmc3RhdGU9JHtmfSZjb2RlX2NoYWxsZW5nZT0ke3B9JmNvZGVfY2hhbGxlbmdlX21ldGhvZD1TMjU2JHtnfWAsbT1udWxsIT1uP246e30se2RlZmF1bHRIZWlnaHQ6dixkZWZhdWx0V2lkdGg6Yn09bSx3PWZ1bmN0aW9uKHQsZSl7dmFyIG49e307Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJmUuaW5kZXhPZihyKTwwJiYobltyXT10W3JdKTtpZihudWxsIT10JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihyPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCk7bzxyLmxlbmd0aDtvKyspZS5pbmRleE9mKHJbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0LHJbb10pJiYobltyW29dXT10W3Jbb11dKX1yZXR1cm4gbn0obSxbXCJkZWZhdWx0SGVpZ2h0XCIsXCJkZWZhdWx0V2lkdGhcIl0pO2EubG9nSW5mbyhcIlN0YXJ0aW5nIE9BdXRoIGZsb3dcIix5KTtjb25zdCBfPWF3YWl0IGZpbi5XaW5kb3cuY3JlYXRlKE9iamVjdC5hc3NpZ24oe2Fsd2F5c09uVG9wOiEwLG1heGltaXphYmxlOiExLG1pbmltaXphYmxlOiExLGF1dG9TaG93OiExLGRlZmF1bHRDZW50ZXJlZDohMCxkZWZhdWx0SGVpZ2h0Om51bGwhPXY/djo3MDAsZGVmYXVsdFdpZHRoOm51bGwhPWI/Yjo2MDAsaW5jbHVkZUluU25hcHNob3RzOiExLG5hbWU6YyxyZXNpemFibGU6ITEsc2F2ZVdpbmRvd1N0YXRlOiExLHNob3dUYXNrYmFySWNvbjohMSx1cmw6eX0sdykpLEU9YXdhaXQgbmV3IFByb21pc2UoZChfLGYsdCxhKSk7YS5sb2dJbmZvKFwiUmVjZWl2ZWQgYXV0aG9yaXphdGlvbiBjb2RlXCIpLGF3YWl0IGkuZXhjaGFuZ2VDb2RlRm9yVG9rZW5zKEUsaCx0KSxhLmxvZ0luZm8oXCJSZWNlaXZlZCB0b2tlbnNcIil9KSh0LGUsbiksdGhpcy5fbG9nZ2VyLmxvZ0luZm8oXCJBdXRob3JpemUgY29tcGxldGVkXCIpfWNhdGNoKHQpe2xldCBlO2lmKHQgaW5zdGFuY2VvZiBBcGlFcnJvcil7Y29uc3R7ZGF0YTpufT10LHI9dGhpcy5nZXRFcnJvck1lc3NhZ2VGcm9tU2VydmVyUmVzcG9uc2Uobik7ZT1uZXcgQXV0aG9yaXphdGlvbkVycm9yKHIsdCksZS5kYXRhPW59ZWxzZSBlPW5ldyBBdXRob3JpemF0aW9uRXJyb3Iodm9pZCAwLHQpO3Rocm93IHRoaXMubG9nZ2VyLmxvZ0Vycm9yKGUpLGV9dmFyIHIsbyxpLGF9YXN5bmMgY2xvc2UoKXt2YXIgdDt0aGlzLl9sb2dnZXIubG9nSW5mbyhcIkNsb3NlIHN0YXJ0ZWRcIik7dHJ5e2F3YWl0KG51bGw9PT0odD10aGlzLl93b3JrZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnRlcm1pbmF0ZSgpKSx0aGlzLl93b3JrZXI9dm9pZCAwLHRoaXMuX2FwaU9yaWdpbj12b2lkIDAsdGhpcy5fY2xpZW50SWQ9dm9pZCAwLHRoaXMuX21ldGFkYXRhPXZvaWQgMCx0aGlzLl9sb2dnZXIubG9nSW5mbyhcIkNsb3NlIGNvbXBsZXRlZFwiKX1jYXRjaCh0KXtjb25zdCBlPW5ldyBBcGlFcnJvcih2b2lkIDAsdCk7dGhyb3cgdGhpcy5fbG9nZ2VyLmxvZ0Vycm9yKGUpLGV9fWFzeW5jIGV4cGlyZVRva2Vucyh0PSExKXt2YXIgZTt0aGlzLl9sb2dnZXIubG9nSW5mbyhcIkV4cGlyZVRva2VucyBzdGFydGVkXCIpO3RyeXthd2FpdChudWxsPT09KGU9dGhpcy5fd29ya2VyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5leHBpcmVUb2tlbnModCkpLHRoaXMuX2xvZ2dlci5sb2dJbmZvKFwiRXhwaXJlVG9rZW5zIGNvbXBsZXRlZFwiKX1jYXRjaCh0KXtjb25zdCBlPW5ldyBBcGlFcnJvcih2b2lkIDAsdCk7dGhyb3cgdGhpcy5fbG9nZ2VyLmxvZ0Vycm9yKGUpLGV9fWdldEVycm9yTWVzc2FnZUZyb21TZXJ2ZXJSZXNwb25zZSh0KXt0JiZ0aGlzLl9sb2dnZXIubG9nV2FybmluZyh0KX1zdGF0aWMgYXN5bmMgaW5pdCh0LGUsbixyLC4uLm8pe2NvbnN0IGk9bmV3IGwocik7bGV0IGE7aS5sb2dJbmZvKFwiSW5pdCBzdGFydGVkXCIsdCxlLG4pO3RyeXthPW5ldyBVUkwoZSl9Y2F0Y2godCl7Y29uc3QgZT1uZXcgUGFyYW1ldGVyRXJyb3IoXCJVbmV4cGVjdGVkIGludmFsaWQgQVBJIG9yaWdpblwiKTt0aHJvdyBpLmxvZ0Vycm9yKGUpLGV9dHJ5e2NvbnN0IGU9YXdhaXQoYXN5bmMgdD0+e2xldCBlO3RyeXtlPW5ldyBVUkwodCl9Y2F0Y2godCl7dGhyb3cgbmV3IFBhcmFtZXRlckVycm9yKFwiVW5leHBlY3RlZCBpbnZhbGlkIG1ldGFkYXRhIFVSTFwiKX1jb25zdCBuPWF3YWl0IGZldGNoKGUse2hlYWRlcnM6e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIn19KTtpZighbi5vayl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmV0cmlldmUgYXV0aG9yaXphdGlvbiBzZXJ2ZXIgbWV0YWRhdGFcIik7Y29uc3Qgcj1hd2FpdCBuLmpzb24oKTtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGVtcHR5IGF1dGhvcml6YXRpb24gc2VydmVyIG1ldGFkYXRhIHJlc3BvbnNlXCIpO2lmKCFyLnJlc3BvbnNlX3R5cGVzX3N1cHBvcnRlZC5maW5kKCh0PT5cImNvZGVcIj09PXQudG9Mb3dlckNhc2UoKSkpKXRocm93IG5ldyBFcnJvcihcIkF1dGhvcml6YXRpb24gc2VydmVyIGRvZXMgbm90IHN1cHBvcnQgdGhlIGF1dGhvcml6YXRpb24gY29kZSByZXNwb25zZSB0eXBlXCIpO3JldHVybiByfSkodCkscj1hd2FpdChhc3luYyh0LGUsbik9Pntjb25zdCByPW5ldyBCbG9iKFtgKCR7aH0pKClgXSx7dHlwZTpcInRleHQvamF2YXNjcmlwdFwifSksbz1VUkwuY3JlYXRlT2JqZWN0VVJMKHIpLGk9bmV3IFdvcmtlcihvKTtyZXR1cm4gaS5vbm1lc3NhZ2U9dyhuKSxhd2FpdCgodCxlLG4scik9Pm5ldyBQcm9taXNlKCgobyxpKT0+e2NvbnN0IGE9e2NvbW1hbmQ6cC5Jbml0LGRhdGE6e2NsaWVudElkOmUsbWV0YWRhdGE6dH0saWQ6RGF0ZS5ub3coKS50b1N0cmluZygpfSx7Y29tbWFuZDpzLGlkOnV9PWE7eSh7Y29tbWFuZDpzLGlkOnUscmVqZWN0OmkscmVzb2x2ZTpvfSksbi5wb3N0TWVzc2FnZShhKSxyLmxvZ0luZm8oXCJXb3JrZXIgcmVxdWVzdCBzZW50XCIsYSl9KSkpKHQsZSxpLG4pLHtleGNoYW5nZUNvZGVGb3JUb2tlbnM6bShpLG4pLGV4ZWN1dGVBcGlSZXF1ZXN0OnYoZSxpLG4pLGV4cGlyZVRva2VuczpiKGksbiksdGVybWluYXRlOkUoaSxuKX19KShlLG4saSk7cmV0dXJuIGkubG9nSW5mbyhcIkluaXQgY29tcGxldGVkXCIsZSksbmV3IFMoYS5vcmlnaW4sbixlLHIsaSl9Y2F0Y2godCl7bGV0IGU7dGhyb3cgZT10IGluc3RhbmNlb2YgQXBpRXJyb3I/dDpuZXcgSW5pdGlhbGl6YXRpb25FcnJvcih2b2lkIDAsdCksaS5sb2dFcnJvcihlKSxlfX19dmFyIEE9by5NUyxJPW8uY0YsVD1vLkFLLFI9by5NXyx4PW8uY1gsQz1vLk80LEI9by5fVyxrPW8uVSQsTD1vLlU3LE89big5NTEpO2NvbnN0IFU9XCIxLjAuMVwiLGo9XCJNaWNyb3NvZnQzNjVcIixOPSgpPT57ayhqKX0sTT0oKT0+e0woaixVKX07XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBmaW4mJk9iamVjdC5hc3NpZ24od2luZG93LHtmaW46e319KSxPYmplY3QuYXNzaWduKGZpbix7SW50ZWdyYXRpb25zOntNaWNyb3NvZnQzNjU6e2VuYWJsZUxvZ2dpbmc6TSxkaXNhYmxlTG9nZ2luZzpOfX19KSk7Y29uc3QgUD10PT5hc3luYyhlLG4scixvLGkpPT57dmFyIGE7cmV0dXJuIGU9KGE9ZSkuc3RhcnRzV2l0aChcIi9cIik/YTpgLyR7YX1gLHQuZXhlY3V0ZUFwaVJlcXVlc3QoZSxuLHIsbyxpLCEwKX0sVz1hc3luYyh0LGUsbj1bXSk9Pntjb25zdCByPVtcImlkXCIsXCJ1c2VyUHJpbmNpcGFsTmFtZVwiLFwidXNlclR5cGVcIiwuLi5uXS5qb2luKFwiLFwiKSxvPWF3YWl0KGFzeW5jKHQsZT1bXSk9PntpZighKG51bGw9PWU/dm9pZCAwOmUubGVuZ3RoKSlyZXR1cm5bXTtjb25zdCBuPVtdO2ZvcihsZXQgcj0wO3I8ZS5sZW5ndGg7cis9MjApe2NvbnN0IG89e3JlcXVlc3RzOmUuc2xpY2UocixyKzIwKS5tYXAoKHQ9Pih0LmlkPWNyeXB0by5yYW5kb21VVUlEKCksdCkpKX07bi5wdXNoKHQuZXhlY3V0ZUFwaVJlcXVlc3QoXCIvdjEuMC8kYmF0Y2hcIixcIlBPU1RcIixvKSl9Y29uc3Qgcj0oYXdhaXQgUHJvbWlzZS5hbGwobikpLmZsYXRNYXAoKHQ9PnQuZGF0YS5yZXNwb25zZXMpKTtyZXR1cm4gZS5tYXAoKHQ9Pnt2YXIgZTtyZXR1cm4gbnVsbD09PShlPXIuZmluZCgoZT0+ZS5pZD09PXQuaWQpKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuYm9keX0pKX0pKHQsZS5tYXAoKHQ9Pih7bWV0aG9kOlwiR0VUXCIsdXJsOmAvdXNlcnM/JGZpbHRlcj1tYWlsIGVxICcke2VuY29kZVVSSUNvbXBvbmVudCh0KX0nJiRzZWxlY3Q9JHtyfWB9KSkpKSxpPW8ubWFwKCh0PT57dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10LnZhbHVlKXx8dm9pZCAwPT09ZT92b2lkIDA6ZVswXX0pKTtyZXR1cm4gdC5sb2dnZXIubG9nSW5mbyhcIlJlc29sdmVkIHVzZXJzIGZyb20gZW1haWwgYWRkcmVzc2VzXCIsaSxlKSxpfTt2YXIgJD1uKDMwMCk7Y29uc3QgRD10PT50Lm1hcCgodD0+dD97aWQ6dC51c2VyUHJpbmNpcGFsTmFtZSxlbWFpbEFkZHJlc3M6dC5tYWlsLG5hbWU6dC5kaXNwbGF5TmFtZX06dm9pZCAwKSksRj1hc3luYyh0LGUpPT57dHJ5e2F3YWl0IGZpbi5TeXN0ZW0ucmVnaXN0ZXJVc2FnZSh7dHlwZTpcImludGVncmF0aW9uLWZlYXR1cmVcIixkYXRhOnthcGlWZXJzaW9uOlUsY29tcG9uZW50TmFtZTp0fX0pfWNhdGNoKG4pe2UubG9nV2FybmluZyhgVW5hYmxlIHRvIHJlZ2lzdGVyIHVzYWdlIGZvciBmZWF0dXJlICR7dH06ICR7bnVsbD09bj92b2lkIDA6bi5tZXNzYWdlfWApfX0sej10PT57bGV0IGU9dDtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90LmZpbHRlcihCb29sZWFuKS5tYXAoeik6KFwib2JqZWN0XCI9PXR5cGVvZiB0JiYoZT1PYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModCkuZmlsdGVyKCgoWyx0XSk9PnZvaWQgMCE9PShudWxsIT10P3Q6dm9pZCAwKSkpLm1hcCgoKFt0LGVdKT0+W3QseihlKV0pKSkpLGUpfSxxPXQ9Pi8jRVhUI0AvLnRlc3QodC51c2VyUHJpbmNpcGFsTmFtZSk7dmFyIEg7IWZ1bmN0aW9uKHQpe3QuTVMzNjU9XCJNUy0zNjVcIix0LlRlYW1zPVwiTVMtVEVBTVNcIn0oSHx8KEg9e30pKTtjbGFzcyBWIGV4dGVuZHMgQ3tnZXQgY3VycmVudFVzZXIoKXtyZXR1cm4gdGhpcy5fY3VycmVudFVzZXJ9Z2V0IHJlZGlyZWN0VXJpKCl7cmV0dXJuIHRoaXMuX3JlZGlyZWN0VXJpfWdldCBwZXJtaXNzaW9ucygpe3JldHVybiB0aGlzLl9wZXJtaXNzaW9uc31nZXQgdGVuYW50SWQoKXtyZXR1cm4gdGhpcy5fdGVuYW50SWR9Y29uc3RydWN0b3IodCxlLG4scixvLGksYSxzKXtzdXBlcih0LGUsaSxhLHMpLHRoaXMuX3Blcm1pc3Npb25zPW8sdGhpcy5fcmVkaXJlY3RVcmk9cix0aGlzLl90ZW5hbnRJZD1uLEYoSC5NUzM2NSxzKX1hc3luYyBhdXRob3JpemUodCxlLG4pe2F3YWl0IHN1cGVyLmF1dGhvcml6ZSh0LGUsbik7Y29uc3Qgcj1hd2FpdChhc3luYyB0PT57Y29uc3R7ZGF0YTplfT1hd2FpdCB0LmV4ZWN1dGVBcGlSZXF1ZXN0KFwiL3YxLjAvbWVcIik7cmV0dXJuIGV9KSh0aGlzKTt0aGlzLl9jdXJyZW50VXNlcj1yfWdldEVycm9yTWVzc2FnZUZyb21TZXJ2ZXJSZXNwb25zZSh0KXt2YXIgZSxuLHI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpdHJ5e3JldHVybiBudWxsPT09KG49bnVsbD09PShlPW5ldyBVUkwodCkuc2VhcmNoUGFyYW1zLmdldChcImVycm9yX2Rlc2NyaXB0aW9uXCIpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zcGxpdCgvXFxyXFxuLykpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuWzBdfWNhdGNoKHQpe3JldHVybn1yZXR1cm4gbnVsbD09PShyPW51bGw9PXQ/dm9pZCAwOnQuZXJyb3IpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLm1lc3NhZ2V9c3RhdGljIGFzeW5jIGluaXQodCxlLG4scixvLGksYSl7Y29uc3Qgcz1hd2FpdCBzdXBlci5pbml0KHQsZSxuLHIpO3JldHVybiBuZXcgVihlLG4sbyxpLGEsbnVsbD09cz92b2lkIDA6cy5tZXRhZGF0YSxudWxsPT1zP3ZvaWQgMDpzLndvcmtlcixudWxsPT1zP3ZvaWQgMDpzLmxvZ2dlcil9fWNvbnN0IEc9W1wiVXNlci5SZWFkQmFzaWMuQWxsXCIsXCJUZWFtLlJlYWRCYXNpYy5BbGxcIixcIkNoYW5uZWwuUmVhZEJhc2ljLkFsbFwiLFwiQ2hhbm5lbE1lc3NhZ2UuU2VuZFwiLFwiQ2hhdC5DcmVhdGVcIixcIkNoYXRNZXNzYWdlLlNlbmRcIixcIm9mZmxpbmVfYWNjZXNzXCJdO2xldCBKO2NvbnN0IFk9YXN5bmModCxlLG4scj1bXSxvLGkpPT57YXdhaXQgSyh0LGUsbixyKTtjb25zdCBhPU9iamVjdC5hc3NpZ24oe3Njb3BlOlsuLi5HLC4uLnJdLmpvaW4oXCIgXCIpfSxvKSxzPU9iamVjdC5hc3NpZ24oe2RlZmF1bHRIZWlnaHQ6NjAwLGRlZmF1bHRXaWR0aDo1NTB9LGkpO3JldHVybiBhd2FpdCBKLmF1dGhvcml6ZShuLGEscykse2NsaWVudElkOnQsY3VycmVudFVzZXI6Si5jdXJyZW50VXNlcixkaXNjb25uZWN0OkouY2xvc2UsZXhlY3V0ZUFwaVJlcXVlc3Q6UChKKSxwcm92aWRlcjpKLHRlbmFudElkOmV9fSxLPWFzeW5jKHQsZSxuLHIpPT57aWYoIXQpdGhyb3cgbmV3IEIoXCJJbnZhbGlkIGNsaWVudCBJRFwiKTtpZighZSl0aHJvdyBuZXcgQihcIkludmFsaWQgdGVuYW50IElEXCIpO2lmKCFuKXRocm93IG5ldyBCKFwiSW52YWxpZCByZWRpcmVjdCBVUklcIik7Y29uc3Qgbz1gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLyR7ZX0vdjIuMC8ud2VsbC1rbm93bi9vcGVuaWQtY29uZmlndXJhdGlvbmA7KCFKfHxKLmNsaWVudElkIT09dHx8Si50ZW5hbnRJZCE9PWV8fEoucmVkaXJlY3RVcmkhPT1ufHwoMCxPLnhvcikoSi5wZXJtaXNzaW9ucyxyKS5sZW5ndGg+MCkmJihKPWF3YWl0IFYuaW5pdChvLFwiaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tXCIsdCxqLGUsbixyKSl9O2NsYXNzIEludGVyb3BFcnJvciBleHRlbmRzIEF7Y29uc3RydWN0b3IodCxlKXt2YXIgbjtzdXBlcih0PW51bGwhPT0obj1udWxsIT10P3Q6bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKSYmdm9pZCAwIT09bj9uOlwiQW4gaW50ZXJvcCBlcnJvciBvY2N1cnJlZFwiLGUpfX12YXIgWCxaLFE7IWZ1bmN0aW9uKHQpe3QuQXBwTm90Rm91bmQ9XCJBcHBOb3RGb3VuZFwiLHQuRXJyb3JPbkxhdW5jaD1cIkVycm9yT25MYXVuY2hcIix0LkFwcFRpbWVvdXQ9XCJBcHBUaW1lb3V0XCIsdC5SZXNvbHZlclVuYXZhaWxhYmxlPVwiUmVzb2x2ZXJVbmF2YWlsYWJsZVwifShYfHwoWD17fSkpLGZ1bmN0aW9uKHQpe3QuTm9BcHBzRm91bmQ9XCJOb0FwcHNGb3VuZFwiLHQuUmVzb2x2ZXJVbmF2YWlsYWJsZT1cIlJlc29sdmVyVW5hdmFpbGFibGVcIix0LlJlc29sdmVyVGltZW91dD1cIlJlc29sdmVyVGltZW91dFwifShafHwoWj17fSkpLGZ1bmN0aW9uKHQpe3QuTm9DaGFubmVsRm91bmQ9XCJOb0NoYW5uZWxGb3VuZFwiLHQuQWNjZXNzRGVuaWVkPVwiQWNjZXNzRGVuaWVkXCIsdC5DcmVhdGlvbkZhaWxlZD1cIkNyZWF0aW9uRmFpbGVkXCJ9KFF8fChRPXt9KSk7dmFyIHR0LGV0O3R0PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlLG49T2JqZWN0LnByb3RvdHlwZSxyPW4uaGFzT3duUHJvcGVydHksbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LGk9by5pdGVyYXRvcnx8XCJAQGl0ZXJhdG9yXCIsYT1vLmFzeW5jSXRlcmF0b3J8fFwiQEBhc3luY0l0ZXJhdG9yXCIscz1vLnRvU3RyaW5nVGFnfHxcIkBAdG9TdHJpbmdUYWdcIjtmdW5jdGlvbiB1KHQsZSxuKXtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLHRbZV19dHJ5e3Uoe30sXCJcIil9Y2F0Y2godCl7dT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRbZV09bn19ZnVuY3Rpb24gbCh0LGUsbixyKXt2YXIgbz1lJiZlLnByb3RvdHlwZSBpbnN0YW5jZW9mIHk/ZTp5LGk9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksYT1uZXcgeChyfHxbXSk7cmV0dXJuIGkuX2ludm9rZT1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZjtyZXR1cm4gZnVuY3Rpb24obyxpKXtpZihyPT09aCl0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO2lmKHI9PT1wKXtpZihcInRocm93XCI9PT1vKXRocm93IGk7cmV0dXJuIEIoKX1mb3Iobi5tZXRob2Q9byxuLmFyZz1pOzspe3ZhciBhPW4uZGVsZWdhdGU7aWYoYSl7dmFyIHM9SShhLG4pO2lmKHMpe2lmKHM9PT1nKWNvbnRpbnVlO3JldHVybiBzfX1pZihcIm5leHRcIj09PW4ubWV0aG9kKW4uc2VudD1uLl9zZW50PW4uYXJnO2Vsc2UgaWYoXCJ0aHJvd1wiPT09bi5tZXRob2Qpe2lmKHI9PT1mKXRocm93IHI9cCxuLmFyZztuLmRpc3BhdGNoRXhjZXB0aW9uKG4uYXJnKX1lbHNlXCJyZXR1cm5cIj09PW4ubWV0aG9kJiZuLmFicnVwdChcInJldHVyblwiLG4uYXJnKTtyPWg7dmFyIHU9Yyh0LGUsbik7aWYoXCJub3JtYWxcIj09PXUudHlwZSl7aWYocj1uLmRvbmU/cDpkLHUuYXJnPT09Zyljb250aW51ZTtyZXR1cm57dmFsdWU6dS5hcmcsZG9uZTpuLmRvbmV9fVwidGhyb3dcIj09PXUudHlwZSYmKHI9cCxuLm1ldGhvZD1cInRocm93XCIsbi5hcmc9dS5hcmcpfX19KHQsbixhKSxpfWZ1bmN0aW9uIGModCxlLG4pe3RyeXtyZXR1cm57dHlwZTpcIm5vcm1hbFwiLGFyZzp0LmNhbGwoZSxuKX19Y2F0Y2godCl7cmV0dXJue3R5cGU6XCJ0aHJvd1wiLGFyZzp0fX19dC53cmFwPWw7dmFyIGY9XCJzdXNwZW5kZWRTdGFydFwiLGQ9XCJzdXNwZW5kZWRZaWVsZFwiLGg9XCJleGVjdXRpbmdcIixwPVwiY29tcGxldGVkXCIsZz17fTtmdW5jdGlvbiB5KCl7fWZ1bmN0aW9uIG0oKXt9ZnVuY3Rpb24gdigpe312YXIgYj17fTtiW2ldPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3ZhciB3PU9iamVjdC5nZXRQcm90b3R5cGVPZixfPXcmJncodyhDKFtdKSkpO18mJl8hPT1uJiZyLmNhbGwoXyxpKSYmKGI9Xyk7dmFyIEU9di5wcm90b3R5cGU9eS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiKTtmdW5jdGlvbiBTKHQpe1tcIm5leHRcIixcInRocm93XCIsXCJyZXR1cm5cIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dSh0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2UoZSx0KX0pKX0pKX1mdW5jdGlvbiBBKHQsZSl7ZnVuY3Rpb24gbihvLGksYSxzKXt2YXIgdT1jKHRbb10sdCxpKTtpZihcInRocm93XCIhPT11LnR5cGUpe3ZhciBsPXUuYXJnLGY9bC52YWx1ZTtyZXR1cm4gZiYmXCJvYmplY3RcIj09dHlwZW9mIGYmJnIuY2FsbChmLFwiX19hd2FpdFwiKT9lLnJlc29sdmUoZi5fX2F3YWl0KS50aGVuKChmdW5jdGlvbih0KXtuKFwibmV4dFwiLHQsYSxzKX0pLChmdW5jdGlvbih0KXtuKFwidGhyb3dcIix0LGEscyl9KSk6ZS5yZXNvbHZlKGYpLnRoZW4oKGZ1bmN0aW9uKHQpe2wudmFsdWU9dCxhKGwpfSksKGZ1bmN0aW9uKHQpe3JldHVybiBuKFwidGhyb3dcIix0LGEscyl9KSl9cyh1LmFyZyl9dmFyIG87dGhpcy5faW52b2tlPWZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gaSgpe3JldHVybiBuZXcgZSgoZnVuY3Rpb24oZSxvKXtuKHQscixlLG8pfSkpfXJldHVybiBvPW8/by50aGVuKGksaSk6aSgpfX1mdW5jdGlvbiBJKHQsbil7dmFyIHI9dC5pdGVyYXRvcltuLm1ldGhvZF07aWYocj09PWUpe2lmKG4uZGVsZWdhdGU9bnVsbCxcInRocm93XCI9PT1uLm1ldGhvZCl7aWYodC5pdGVyYXRvci5yZXR1cm4mJihuLm1ldGhvZD1cInJldHVyblwiLG4uYXJnPWUsSSh0LG4pLFwidGhyb3dcIj09PW4ubWV0aG9kKSlyZXR1cm4gZztuLm1ldGhvZD1cInRocm93XCIsbi5hcmc9bmV3IFR5cGVFcnJvcihcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIil9cmV0dXJuIGd9dmFyIG89YyhyLHQuaXRlcmF0b3Isbi5hcmcpO2lmKFwidGhyb3dcIj09PW8udHlwZSlyZXR1cm4gbi5tZXRob2Q9XCJ0aHJvd1wiLG4uYXJnPW8uYXJnLG4uZGVsZWdhdGU9bnVsbCxnO3ZhciBpPW8uYXJnO3JldHVybiBpP2kuZG9uZT8oblt0LnJlc3VsdE5hbWVdPWkudmFsdWUsbi5uZXh0PXQubmV4dExvYyxcInJldHVyblwiIT09bi5tZXRob2QmJihuLm1ldGhvZD1cIm5leHRcIixuLmFyZz1lKSxuLmRlbGVnYXRlPW51bGwsZyk6aToobi5tZXRob2Q9XCJ0aHJvd1wiLG4uYXJnPW5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKSxuLmRlbGVnYXRlPW51bGwsZyl9ZnVuY3Rpb24gVCh0KXt2YXIgZT17dHJ5TG9jOnRbMF19OzEgaW4gdCYmKGUuY2F0Y2hMb2M9dFsxXSksMiBpbiB0JiYoZS5maW5hbGx5TG9jPXRbMl0sZS5hZnRlckxvYz10WzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaChlKX1mdW5jdGlvbiBSKHQpe3ZhciBlPXQuY29tcGxldGlvbnx8e307ZS50eXBlPVwibm9ybWFsXCIsZGVsZXRlIGUuYXJnLHQuY29tcGxldGlvbj1lfWZ1bmN0aW9uIHgodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOlwicm9vdFwifV0sdC5mb3JFYWNoKFQsdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gQyh0KXtpZih0KXt2YXIgbj10W2ldO2lmKG4pcmV0dXJuIG4uY2FsbCh0KTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm5leHQpcmV0dXJuIHQ7aWYoIWlzTmFOKHQubGVuZ3RoKSl7dmFyIG89LTEsYT1mdW5jdGlvbiBuKCl7Zm9yKDsrK288dC5sZW5ndGg7KWlmKHIuY2FsbCh0LG8pKXJldHVybiBuLnZhbHVlPXRbb10sbi5kb25lPSExLG47cmV0dXJuIG4udmFsdWU9ZSxuLmRvbmU9ITAsbn07cmV0dXJuIGEubmV4dD1hfX1yZXR1cm57bmV4dDpCfX1mdW5jdGlvbiBCKCl7cmV0dXJue3ZhbHVlOmUsZG9uZTohMH19cmV0dXJuIG0ucHJvdG90eXBlPUUuY29uc3RydWN0b3I9dix2LmNvbnN0cnVjdG9yPW0sbS5kaXNwbGF5TmFtZT11KHYscyxcIkdlbmVyYXRvckZ1bmN0aW9uXCIpLHQuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbih0KXt2YXIgZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yO3JldHVybiEhZSYmKGU9PT1tfHxcIkdlbmVyYXRvckZ1bmN0aW9uXCI9PT0oZS5kaXNwbGF5TmFtZXx8ZS5uYW1lKSl9LHQubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LHYpOih0Ll9fcHJvdG9fXz12LHUodCxzLFwiR2VuZXJhdG9yRnVuY3Rpb25cIikpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRSksdH0sdC5hd3JhcD1mdW5jdGlvbih0KXtyZXR1cm57X19hd2FpdDp0fX0sUyhBLnByb3RvdHlwZSksQS5wcm90b3R5cGVbYV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdC5Bc3luY0l0ZXJhdG9yPUEsdC5hc3luYz1mdW5jdGlvbihlLG4scixvLGkpe3ZvaWQgMD09PWkmJihpPVByb21pc2UpO3ZhciBhPW5ldyBBKGwoZSxuLHIsbyksaSk7cmV0dXJuIHQuaXNHZW5lcmF0b3JGdW5jdGlvbihuKT9hOmEubmV4dCgpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiB0LmRvbmU/dC52YWx1ZTphLm5leHQoKX0pKX0sUyhFKSx1KEUscyxcIkdlbmVyYXRvclwiKSxFW2ldPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LEUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgR2VuZXJhdG9yXVwifSx0LmtleXM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpZS5wdXNoKG4pO3JldHVybiBlLnJldmVyc2UoKSxmdW5jdGlvbiBuKCl7Zm9yKDtlLmxlbmd0aDspe3ZhciByPWUucG9wKCk7aWYociBpbiB0KXJldHVybiBuLnZhbHVlPXIsbi5kb25lPSExLG59cmV0dXJuIG4uZG9uZT0hMCxufX0sdC52YWx1ZXM9Qyx4LnByb3RvdHlwZT17Y29uc3RydWN0b3I6eCxyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD1lLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9XCJuZXh0XCIsdGhpcy5hcmc9ZSx0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChSKSwhdClmb3IodmFyIG4gaW4gdGhpcylcInRcIj09PW4uY2hhckF0KDApJiZyLmNhbGwodGhpcyxuKSYmIWlzTmFOKCtuLnNsaWNlKDEpKSYmKHRoaXNbbl09ZSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIHQ9dGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247aWYoXCJ0aHJvd1wiPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSl0aHJvdyB0O3ZhciBuPXRoaXM7ZnVuY3Rpb24gbyhyLG8pe3JldHVybiBzLnR5cGU9XCJ0aHJvd1wiLHMuYXJnPXQsbi5uZXh0PXIsbyYmKG4ubWV0aG9kPVwibmV4dFwiLG4uYXJnPWUpLCEhb31mb3IodmFyIGk9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2k+PTA7LS1pKXt2YXIgYT10aGlzLnRyeUVudHJpZXNbaV0scz1hLmNvbXBsZXRpb247aWYoXCJyb290XCI9PT1hLnRyeUxvYylyZXR1cm4gbyhcImVuZFwiKTtpZihhLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgdT1yLmNhbGwoYSxcImNhdGNoTG9jXCIpLGw9ci5jYWxsKGEsXCJmaW5hbGx5TG9jXCIpO2lmKHUmJmwpe2lmKHRoaXMucHJldjxhLmNhdGNoTG9jKXJldHVybiBvKGEuY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxhLmZpbmFsbHlMb2MpcmV0dXJuIG8oYS5maW5hbGx5TG9jKX1lbHNlIGlmKHUpe2lmKHRoaXMucHJldjxhLmNhdGNoTG9jKXJldHVybiBvKGEuY2F0Y2hMb2MsITApfWVsc2V7aWYoIWwpdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7aWYodGhpcy5wcmV2PGEuZmluYWxseUxvYylyZXR1cm4gbyhhLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbbl07aWYoby50cnlMb2M8PXRoaXMucHJldiYmci5jYWxsKG8sXCJmaW5hbGx5TG9jXCIpJiZ0aGlzLnByZXY8by5maW5hbGx5TG9jKXt2YXIgaT1vO2JyZWFrfX1pJiYoXCJicmVha1wiPT09dHx8XCJjb250aW51ZVwiPT09dCkmJmkudHJ5TG9jPD1lJiZlPD1pLmZpbmFsbHlMb2MmJihpPW51bGwpO3ZhciBhPWk/aS5jb21wbGV0aW9uOnt9O3JldHVybiBhLnR5cGU9dCxhLmFyZz1lLGk/KHRoaXMubWV0aG9kPVwibmV4dFwiLHRoaXMubmV4dD1pLmZpbmFsbHlMb2MsZyk6dGhpcy5jb21wbGV0ZShhKX0sY29tcGxldGU6ZnVuY3Rpb24odCxlKXtpZihcInRocm93XCI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuXCJicmVha1wiPT09dC50eXBlfHxcImNvbnRpbnVlXCI9PT10LnR5cGU/dGhpcy5uZXh0PXQuYXJnOlwicmV0dXJuXCI9PT10LnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz10LmFyZyx0aGlzLm1ldGhvZD1cInJldHVyblwiLHRoaXMubmV4dD1cImVuZFwiKTpcIm5vcm1hbFwiPT09dC50eXBlJiZlJiYodGhpcy5uZXh0PWUpLGd9LGZpbmlzaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgbj10aGlzLnRyeUVudHJpZXNbZV07aWYobi5maW5hbGx5TG9jPT09dClyZXR1cm4gdGhpcy5jb21wbGV0ZShuLmNvbXBsZXRpb24sbi5hZnRlckxvYyksUihuKSxnfX0sY2F0Y2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIG49dGhpcy50cnlFbnRyaWVzW2VdO2lmKG4udHJ5TG9jPT09dCl7dmFyIHI9bi5jb21wbGV0aW9uO2lmKFwidGhyb3dcIj09PXIudHlwZSl7dmFyIG89ci5hcmc7UihuKX1yZXR1cm4gb319dGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6Qyh0KSxyZXN1bHROYW1lOm4sbmV4dExvYzpyfSxcIm5leHRcIj09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9ZSksZ319LHR9KHQuZXhwb3J0cyk7dHJ5e3JlZ2VuZXJhdG9yUnVudGltZT1lfWNhdGNoKHQpe0Z1bmN0aW9uKFwiclwiLFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShlKX19LHR0KGV0PXtleHBvcnRzOnt9fSxldC5leHBvcnRzKTt2YXIgbnQ7IWZ1bmN0aW9uKHQpe3QuQ29udGFjdD1cImZkYzMuY29udGFjdFwiLHQuQ29udGFjdExpc3Q9XCJmZGMzLmNvbnRhY3RMaXN0XCIsdC5Db3VudHJ5PVwiZmRjMy5jb3VudHJ5XCIsdC5JbnN0cnVtZW50PVwiZmRjMy5pbnN0cnVtZW50XCIsdC5Pcmdhbml6YXRpb249XCJmZGMzLm9yZ2FuaXphdGlvblwiLHQuUG9ydGZvbGlvPVwiZmRjMy5wb3J0Zm9saW9cIix0LlBvc2l0aW9uPVwiZmRjMy5wb3NpdGlvblwifShudHx8KG50PXt9KSk7dmFyIHJ0OyFmdW5jdGlvbih0KXt0LlN0YXJ0Q2FsbD1cIlN0YXJ0Q2FsbFwiLHQuU3RhcnRDaGF0PVwiU3RhcnRDaGF0XCIsdC5WaWV3Q2hhcnQ9XCJWaWV3Q2hhcnRcIix0LlZpZXdDb250YWN0PVwiVmlld0NvbnRhY3RcIix0LlZpZXdRdW90ZT1cIlZpZXdRdW90ZVwiLHQuVmlld05ld3M9XCJWaWV3TmV3c1wiLHQuVmlld0luc3RydW1lbnQ9XCJWaWV3SW5zdHJ1bWVudFwiLHQuVmlld0FuYWx5c2lzPVwiVmlld0FuYWx5c2lzXCJ9KHJ0fHwocnQ9e30pKTtjb25zdCBvdD1cIm9mbXMzNjVhY3Rpb25cIixpdD1hc3luYyh0LGUpPT57dmFyIG4scixvLGk7Y29uc3R7Y2hhcnRJbWFnZTphLGNvbnRleHQ6c309ZSx7cHJpY2VDdXJyZW50OnUscHJpY2VIaWdoOmwscHJpY2VMb3c6YyxwcmljZU9wZW46Zn09ZSxkPShudWxsPT09KHI9bnVsbD09PShuPXMuaWQpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnRpY2tlcil8fHZvaWQgMD09PXI/dm9pZCAwOnIudHJpbSgpKXx8dm9pZCAwLGg9KG51bGw9PT0obz1zLm5hbWUpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnRyaW0oKSl8fHZvaWQgMDtsZXQgcCxnLHksbSx2LGI7aWYobnVsbCE9ZS50aW1lc3RhbXB8fCFhKXRyeXtwPW5ldyBEYXRlKG51bGwhPT0oaT1lLnRpbWVzdGFtcCkmJnZvaWQgMCE9PWk/aTpEYXRlLm5vdygpKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1xcLlxcZCtaJC8sXCIrMDA6MDBcIil9Y2F0Y2gobil7dC5sb2dnZXIubG9nV2FybmluZyhcIkludmFsaWQgdGltZXN0YW1wXCIsZS50aW1lc3RhbXApfWlmKG51bGwhPXUmJm51bGwhPWYmJihnPXUtZix5PWcvZioxMDAsdj1nPjA/XCLilrJcIjpnPDA/XCLilrxcIjpcIuKXj1wiLG09Zz4wP1wiR29vZFwiOmc8MD9cIkF0dGVudGlvblwiOlwiV2FybmluZ1wiKSxhKXtpZighL15pbWFnZVxcLyhnaWZ8anAoZXxlP2cpfHBuZykkL2kudGVzdChhLnR5cGUpKXRocm93IG5ldyBCKFwiQ2hhcnQgaW1hZ2UgTUlNRSB0eXBlIG5vdCBzdXBwb3J0ZWRcIik7dHJ5e2I9YXdhaXQoYXN5bmMgdD0+bmV3IFByb21pc2UoKChlLG4pPT57Y29uc3Qgcj1uZXcgRmlsZVJlYWRlcjtyLm9ubG9hZGVuZD0oKT0+ZShyLnJlc3VsdCksci5vbmVycm9yPSgpPT5uKG5ldyBFcnJvcihcIkZhaWxlZCB0byBjb252ZXJ0IGJsb2IgdG8gYmFzZTY0XCIpKSxyLnJlYWRBc0RhdGFVUkwodCl9KSkpKGEpfWNhdGNoKHQpe3Rocm93IG5ldyBBKFwiRmFpbGVkIHRvIGNvbnZlcnQgYmxvYiB0byBiYXNlNjRcIix0KX19Y29uc3Qgdz0oYXdhaXQgZmluLlN5c3RlbS5nZXRSdW50aW1lSW5mbygpKS5tYW5pZmVzdFVybCxfPXtjb250ZXh0OnMsaW50ZW50OmE/cnQuVmlld0NoYXJ0OnJ0LlZpZXdJbnN0cnVtZW50LHZlcnNpb246VX0sRT0oUz1fLCgwLCQuY29tcHJlc3MpKEpTT04uc3RyaW5naWZ5KFMpLHtvdXRwdXRFbmNvZGluZzpcIkJhc2U2NFwifSkpO3ZhciBTO2NvbnN0IEk9YCR7d30/JCQke290fT0ke2VuY29kZVVSSUNvbXBvbmVudChFKX1gLFQ9YGh0dHBzOi8vc3RhcnQub3BlbmZpbi5jby8/bWFuaWZlc3Q9JHtlbmNvZGVVUklDb21wb25lbnQoSSl9YCxSPXskc2NoZW1hOlwiaHR0cDovL2FkYXB0aXZlY2FyZHMuaW8vc2NoZW1hcy9hZGFwdGl2ZS1jYXJkLmpzb25cIix0eXBlOlwiQWRhcHRpdmVDYXJkXCIsdmVyc2lvbjpcIjEuNFwiLGJvZHk6W3t0eXBlOlwiQ29sdW1uU2V0XCIsY29sdW1uczpbe3R5cGU6XCJDb2x1bW5cIix3aWR0aDpcInN0cmV0Y2hcIixpdGVtczpbe3R5cGU6XCJDb250YWluZXJcIixpdGVtczpbe3R5cGU6XCJUZXh0QmxvY2tcIix0ZXh0Om51bGwhPWg/aDpkLnRvVXBwZXJDYXNlKCksd3JhcDohMCxzaXplOlwiTGFyZ2VcIixzcGFjaW5nOlwiTm9uZVwifSxoJiZ7dHlwZTpcIlRleHRCbG9ja1wiLHRleHQ6ZC50b1VwcGVyQ2FzZSgpLGlzU3VidGxlOiEwLHdyYXA6ITAsc3BhY2luZzpcIk5vbmVcIn0scCYme3R5cGU6XCJUZXh0QmxvY2tcIix0ZXh0OmB7e0RBVEUoJHtwfSwgU0hPUlQpfX0ge3tUSU1FKCR7cH0pfX1gLHdyYXA6ITAsc2l6ZTpcIlNtYWxsXCJ9XX1dfSxudWxsIT11JiYhYiYme3R5cGU6XCJDb2x1bW5cIix3aWR0aDpcInN0cmV0Y2hcIixpdGVtczpbe3R5cGU6XCJUZXh0QmxvY2tcIix0ZXh0OnUudG9GaXhlZCgyKSxzaXplOlwiRXh0cmFMYXJnZVwiLHdyYXA6ITAsaG9yaXpvbnRhbEFsaWdubWVudDpcIlJpZ2h0XCJ9LG51bGwhPWcmJm51bGwhPXkmJnt0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDpgJHt2fSAke2cudG9GaXhlZCgyKX0gKCR7eS50b0ZpeGVkKDIpfSUpYCxjb2xvcjptLHNwYWNpbmc6XCJOb25lXCIsd3JhcDohMCxob3Jpem9udGFsQWxpZ25tZW50OlwiUmlnaHRcIn0sKG51bGwhPWZ8fG51bGwhPWx8fG51bGwhPWMpJiZ7dHlwZTpcIkNvbnRhaW5lclwiLGhvcml6b250YWxBbGlnbm1lbnQ6XCJSaWdodFwiLGl0ZW1zOlt7dHlwZTpcIkNvbHVtblNldFwiLGNvbHVtbnM6W3t0eXBlOlwiQ29sdW1uXCIsd2lkdGg6XCJzdHJldGNoXCIsaXRlbXM6W251bGwhPWYmJnt0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDpcIk9wZW5cIix3cmFwOiEwLGhvcml6b250YWxBbGlnbm1lbnQ6XCJSaWdodFwiLHNpemU6XCJTbWFsbFwiLHdlaWdodDpcIkJvbGRlclwiLHNwYWNpbmc6XCJOb25lXCJ9LG51bGwhPWwmJnt0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDpcIkhpZ2hcIix3cmFwOiEwLHNwYWNpbmc6XCJOb25lXCIsaG9yaXpvbnRhbEFsaWdubWVudDpcIlJpZ2h0XCIsc2l6ZTpcIlNtYWxsXCIsd2VpZ2h0OlwiQm9sZGVyXCJ9LG51bGwhPWMmJnt0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDpcIkxvd1wiLHdyYXA6ITAsc3BhY2luZzpcIk5vbmVcIixob3Jpem9udGFsQWxpZ25tZW50OlwiUmlnaHRcIixzaXplOlwiU21hbGxcIix3ZWlnaHQ6XCJCb2xkZXJcIn1dfSx7dHlwZTpcIkNvbHVtblwiLHdpZHRoOlwiYXV0b1wiLGl0ZW1zOltudWxsIT1mJiZ7dHlwZTpcIlRleHRCbG9ja1wiLHRleHQ6Zi50b0ZpeGVkKDIpLHdyYXA6ITAsc3BhY2luZzpcIk5vbmVcIixob3Jpem9udGFsQWxpZ25tZW50OlwiUmlnaHRcIixzaXplOlwiU21hbGxcIn0sbnVsbCE9bCYme3R5cGU6XCJUZXh0QmxvY2tcIix0ZXh0OmwudG9GaXhlZCgyKSx3cmFwOiEwLHNwYWNpbmc6XCJOb25lXCIsaG9yaXpvbnRhbEFsaWdubWVudDpcIlJpZ2h0XCIsc2l6ZTpcIlNtYWxsXCJ9LG51bGwhPWMmJnt0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDpjLnRvRml4ZWQoMiksd3JhcDohMCxzcGFjaW5nOlwiTm9uZVwiLGhvcml6b250YWxBbGlnbm1lbnQ6XCJSaWdodFwiLHNpemU6XCJTbWFsbFwifV19XX1dLHNwYWNpbmc6XCJTbWFsbFwifV19XX0sYiYme3R5cGU6XCJJbWFnZVwiLHVybDpcIi4uL2hvc3RlZENvbnRlbnRzLzEvJHZhbHVlXCIsc3BhY2luZzpcIlNtYWxsXCJ9LHt0eXBlOlwiQWN0aW9uU2V0XCIsYWN0aW9uczpbe3R5cGU6XCJBY3Rpb24uT3BlblVybFwiLHVybDpULHRpdGxlOlwiT3BlblwifV19XX0seD17YXR0YWNobWVudHM6W3tpZDpcIjFcIixjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3ZuZC5taWNyb3NvZnQuY2FyZC5hZGFwdGl2ZVwiLGNvbnRlbnQ6SlNPTi5zdHJpbmdpZnkoeihSKSl9XSxib2R5Ontjb250ZW50VHlwZTpcImh0bWxcIixjb250ZW50Oic8YXR0YWNobWVudCBpZD1cIjFcIj48L2F0dGFjaG1lbnQ+J30sc3VtbWFyeTpcIlRlc3Qgc3VtbWFyeVwifTtpZihiKXtjb25zdFssdCxlXT1bLi4uYi5tYXRjaCgvXmRhdGE6KFteO10rKTtiYXNlNjQsKC4rKSQvaSldO3guaG9zdGVkQ29udGVudHM9W3tcIkBtaWNyb3NvZnQuZ3JhcGgudGVtcG9yYXJ5SWRcIjpcIjFcIixjb250ZW50Qnl0ZXM6ZSxjb250ZW50VHlwZTp0fV19cmV0dXJuIHh9LGF0PXQ9PnQ/XCJtc3RlYW1zOlwiOlwiaHR0cHM6Ly90ZWFtcy5taWNyb3NvZnQuY29tXCIsc3Q9YXN5bmMgdD0+e2NvbnN0IGU9bnVsbD09dD92b2lkIDA6dFtvdF07aWYoZSl0cnl7Y29uc3QgdD0odD0+e2NvbnN0IGU9KDAsJC5kZWNvbXByZXNzKSh0LHtpbnB1dEVuY29kaW5nOlwiQmFzZTY0XCIsb3V0cHV0RW5jb2Rpbmc6XCJTdHJpbmdcIn0pO3JldHVybiBKU09OLnBhcnNlKGUpfSkoZSkse2NvbnRleHQ6bixpbnRlbnQ6cn09dCxvPXtjb250ZXh0Om4sbmFtZTpyfTtyZXR1cm4gYXdhaXQgZmluLm1lLmludGVyb3AuZmlyZUludGVudChvKSxvfWNhdGNoKHQpe2NvbnN0IGU9dC5tZXNzYWdlO3Rocm93IG5ldyBBKFwiRmFpbGVkIHRvIGRlY29tcHJlc3Mgc2hhcmUgcGF5bG9hZFwiKyhlP2AgKCR7ZX0pYDpcIlwiKSx0KX19LHV0PWFzeW5jKHQsZSxuKT0+e2NvbnN0IHI9YXdhaXQoYXN5bmModCxlLG49W10pPT57dHJ5e2NvbnN0IHI9W1wiaWRcIiwuLi5uXS5qb2luKFwiLFwiKSx7ZGF0YTpvfT1hd2FpdCB0LmV4ZWN1dGVBcGlSZXF1ZXN0KGAvdjEuMC90ZWFtcy8ke2VuY29kZVVSSUNvbXBvbmVudChlKX0/JHNlbGVjdD0ke3J9YCk7cmV0dXJuIG99Y2F0Y2godCl7aWYoNDA0IT09dC5zdGF0dXMpdGhyb3cgdH19KSh0LGUsW1wiZGlzcGxheU5hbWVcIl0pO2lmKCFyKXJldHVybjtsZXQgbztpZih0LmxvZ2dlci5sb2dJbmZvKFwiUmVzb2x2ZWQgdGVhbVwiLHIpLG4pe2lmKG89YXdhaXQoYXN5bmModCxlLG4scj1bXSk9Pnt0cnl7Y29uc3Qgbz1bXCJpZFwiLC4uLnJdLmpvaW4oXCIsXCIpLHtkYXRhOml9PWF3YWl0IHQuZXhlY3V0ZUFwaVJlcXVlc3QoYC92MS4wL3RlYW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KG4pfS9jaGFubmVscy8ke2VuY29kZVVSSUNvbXBvbmVudChlKX0/JHNlbGVjdD0ke299YCk7cmV0dXJuIGl9Y2F0Y2godCl7aWYoNDA0IT09dC5zdGF0dXMpdGhyb3cgdH19KSh0LG4sZSxbXCJkaXNwbGF5TmFtZVwiXSksIW8pcmV0dXJuIHZvaWQgdC5sb2dnZXIubG9nV2FybmluZyhgQ291bGQgbm90IHJlc29sdmUgY2hhbm5lbCBmcm9tIGlkICR7bn1gKX1lbHNle3QubG9nZ2VyLmxvZ0luZm8oXCJObyBjaGFubmVsIGlkIHN1cHBsaWVkLCB1c2luZyBwcmltYXJ5IGNoYW5uZWxcIik7Y29uc3R7ZGF0YTpufT1hd2FpdCB0LmV4ZWN1dGVBcGlSZXF1ZXN0KGAvdjEuMC90ZWFtcy8ke2VuY29kZVVSSUNvbXBvbmVudChlKX0vcHJpbWFyeUNoYW5uZWw/JHNlbGVjdD1kaXNwbGF5TmFtZSxpZGApO289bn1jb25zdCBpPXtjaGFubmVsSWQ6by5pZCxjaGFubmVsTmFtZTpvLmRpc3BsYXlOYW1lLHRlYW1JZDpyLmlkLHRlYW1OYW1lOnIuZGlzcGxheU5hbWV9O3JldHVybiB0LmxvZ2dlci5sb2dJbmZvKFwiUmVzb2x2ZWQgdGVhbSBjaGFubmVsXCIsZSxuLGkpLGl9O2NsYXNzIGx0e2NvbnN0cnVjdG9yKHQsZT0hMCl7dGhpcy5sb2dnZXI9dC5wcm92aWRlci5sb2dnZXIsdGhpcy5wcm92aWRlcj10LnByb3ZpZGVyLHRoaXMudXNlTXNUZWFtc1Byb3RvY29sPWUsdGhpcy5yZWdpc3RlckludGVudEhhbmRsZXJzPXRoaXMucmVnaXN0ZXJJbnRlbnRIYW5kbGVycy5iaW5kKHRoaXMpLHRoaXMuc2hhcmU9dGhpcy5zaGFyZS5iaW5kKHRoaXMpLHRoaXMuc3RhcnRDYWxsPXRoaXMuc3RhcnRDYWxsLmJpbmQodGhpcyksdGhpcy5zdGFydENoYXQ9dGhpcy5zdGFydENoYXQuYmluZCh0aGlzKSx0aGlzLmVuYWJsZVNoYXJlUGF5bG9hZEhhbmRsZXIoKSxGKEguVGVhbXMsdGhpcy5sb2dnZXIpfWFzeW5jIGVuYWJsZVNoYXJlUGF5bG9hZEhhbmRsZXIoKXtjb25zdHtpbml0aWFsT3B0aW9uczp0fT1hd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRJbmZvKCkse3VzZXJBcHBDb25maWdBcmdzOmV9PXQsbj1hd2FpdCBzdChlKTtuJiZ0aGlzLmxvZ2dlci5sb2dJbmZvKFwiRmlyaW5nIGludGVudFwiLG4pLGZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLmFkZExpc3RlbmVyKFwicnVuLXJlcXVlc3RlZFwiLChhc3luYyB0PT57dHJ5e2NvbnN0IGU9YXdhaXQgc3QodC51c2VyQXBwQ29uZmlnQXJncyk7ZSYmdGhpcy5sb2dnZXIubG9nSW5mbyhcIkZpcmluZyBpbnRlbnRcIixlKX1jYXRjaCh0KXt0aGlzLmxvZ2dlci5sb2dFcnJvcih0KX19KSl9YXN5bmMgb3BlblVybCh0KXt0aGlzLmxvZ2dlci5sb2dJbmZvKFwib3BlblVybCBzdGFydGVkXCIsdCk7dHJ5e2NvbnN0IGU9dGhpcy51c2VNc1RlYW1zUHJvdG9jb2w/dC5yZXBsYWNlKC9eaHR0cHM6XFwvXFwvdGVhbXMubWljcm9zb2Z0LmNvbVxcLy9pLFwibXN0ZWFtczpcIik6dDt0aGlzLmxvZ2dlci5sb2dJbmZvKFwiT3BlbmluZyB1cmxcIixlKSxhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3NlcihlKSx0aGlzLmxvZ2dlci5sb2dJbmZvKFwib3BlblVybCBjb21wbGV0ZWRcIil9Y2F0Y2godCl7dGhyb3cgdGhpcy5sb2dnZXIubG9nRXJyb3IodCksdH19YXN5bmMgcmVnaXN0ZXJJbnRlbnRIYW5kbGVycygpe2lmKHRoaXMubG9nZ2VyLmxvZ0luZm8oXCJyZWdpc3RlckludGVudEhhbmRsZXJzIHN0YXJ0ZWRcIiksdGhpcy51bnN1YnNjcmliZUludGVudEhhbmRsZXJzKXJldHVybnt1bnN1YnNjcmliZTp0aGlzLnVuc3Vic2NyaWJlSW50ZW50SGFuZGxlcnN9O3RyeXthd2FpdCBmaW4ubWUuaW50ZXJvcC5nZXRDb250ZXh0R3JvdXBzKCk7Y29uc3QgdD1hd2FpdCBmaW4ubWUuaW50ZXJvcC5yZWdpc3RlckludGVudEhhbmRsZXIoKGFzeW5jIHQ9Pnt0cnl7YXdhaXQoKHQsZSk9PmFzeW5jIG49Pnt2YXIgcixvLGksYTtpZih0LmxvZ2dlci5sb2dJbmZvKFwiaGFuZGxlU3RhcnRDYWxsSW50ZW50IHN0YXJ0ZWRcIixuKSwobnVsbD09PShyPW4ubmFtZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIudG9Mb3dlckNhc2UoKSkhPT1ydC5TdGFydENhbGwudG9Mb3dlckNhc2UoKSl0aHJvdyBuZXcgQShgVW5leHBlY3RlZCBpbnRlbnQgdHlwZTogJHtuLm5hbWV9YCk7Y29uc3R7Y29udGV4dDpzfT1uO2lmKChudWxsPT09KG89cy50eXBlKXx8dm9pZCAwPT09bz92b2lkIDA6by50b0xvd2VyQ2FzZSgpKSE9PW50LkNvbnRhY3QudG9Mb3dlckNhc2UoKSYmKG51bGw9PT0oaT1zLnR5cGUpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnRvTG93ZXJDYXNlKCkpIT09bnQuQ29udGFjdExpc3QudG9Mb3dlckNhc2UoKSl0aHJvdyBuZXcgQShgVW5leHBlY3RlZCBjb250ZXh0IHR5cGU6ICR7cy50eXBlfWApO2NvbnN0IHU9KG51bGw9PT0oYT1zLnR5cGUpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLnRvTG93ZXJDYXNlKCkpPT09bnQuQ29udGFjdExpc3QudG9Mb3dlckNhc2UoKT9zLmNvbnRhY3RzLm1hcCgodD0+dC5pZC5lbWFpbCkpLmZpbHRlcihCb29sZWFuKTpbcy5pZC5lbWFpbF0sbD1hd2FpdCBlKHUpO3QubG9nZ2VyLmxvZ0luZm8oXCJoYW5kbGVTdGFydENhbGxJbnRlbnQgY29tcGxldGVkXCIsbCl9KSh0aGlzLnByb3ZpZGVyLHRoaXMuc3RhcnRDYWxsKSh0KX1jYXRjaCh0KXt0aHJvdyB0aGlzLmxvZ2dlci5sb2dFcnJvcih0KSx0fX0pLFwiU3RhcnRDYWxsXCIpLGU9YXdhaXQgZmluLm1lLmludGVyb3AucmVnaXN0ZXJJbnRlbnRIYW5kbGVyKChhc3luYyB0PT57dHJ5e2F3YWl0KCh0LGUpPT5hc3luYyBuPT57dmFyIHIsbyxpLGE7aWYodC5sb2dnZXIubG9nSW5mbyhcImhhbmRsZVN0YXJ0Q2hhdEludGVudCBzdGFydGVkXCIsbiksKG51bGw9PT0ocj1uLm5hbWUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnRvTG93ZXJDYXNlKCkpIT09cnQuU3RhcnRDaGF0LnRvTG93ZXJDYXNlKCkpdGhyb3cgbmV3IEEoYFVuZXhwZWN0ZWQgaW50ZW50IHR5cGU6ICR7bi5uYW1lfWApO2NvbnN0e2NvbnRleHQ6c309bjtpZigobnVsbD09PShvPXMudHlwZSl8fHZvaWQgMD09PW8/dm9pZCAwOm8udG9Mb3dlckNhc2UoKSkhPT1udC5Db250YWN0LnRvTG93ZXJDYXNlKCkmJihudWxsPT09KGk9cy50eXBlKXx8dm9pZCAwPT09aT92b2lkIDA6aS50b0xvd2VyQ2FzZSgpKSE9PW50LkNvbnRhY3RMaXN0LnRvTG93ZXJDYXNlKCkpdGhyb3cgbmV3IEEoYFVuZXhwZWN0ZWQgY29udGV4dCB0eXBlOiAke3MudHlwZX1gKTtjb25zdCB1PShudWxsPT09KGE9cy50eXBlKXx8dm9pZCAwPT09YT92b2lkIDA6YS50b0xvd2VyQ2FzZSgpKT09PW50LkNvbnRhY3RMaXN0LnRvTG93ZXJDYXNlKCk/cy5jb250YWN0cy5tYXAoKHQ9PnQuaWQuZW1haWwpKS5maWx0ZXIoQm9vbGVhbik6W3MuaWQuZW1haWxdLGw9YXdhaXQgZSh7ZW1haWxBZGRyZXNzZXM6dSx0b3BpY05hbWU6cy5uYW1lfSk7dC5sb2dnZXIubG9nSW5mbyhcImhhbmRsZVN0YXJ0Q2hhdEludGVudCBjb21wbGV0ZWRcIixsKX0pKHRoaXMucHJvdmlkZXIsdGhpcy5zdGFydENoYXQpKHQpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmxvZ0Vycm9yKHQpLHR9fSksXCJTdGFydENoYXRcIik7cmV0dXJuIHRoaXMudW5zdWJzY3JpYmVJbnRlbnRIYW5kbGVycz1hc3luYygpPT57dGhpcy5sb2dnZXIubG9nSW5mbyhcInVuc3Vic2NyaWJlSW50ZW50SGFuZGxlcnMgc3RhcnRlZFwiKSxhd2FpdCB0LnVuc3Vic2NyaWJlKCksYXdhaXQgZS51bnN1YnNjcmliZSgpLHRoaXMudW5zdWJzY3JpYmVJbnRlbnRIYW5kbGVycz12b2lkIDAsdGhpcy5sb2dnZXIubG9nSW5mbyhcInVuc3Vic2NyaWJlSW50ZW50SGFuZGxlcnMgY29tcGxldGVkXCIpfSx0aGlzLmxvZ2dlci5sb2dJbmZvKFwicmVnaXN0ZXJJbnRlbnRIYW5kbGVycyBjb21wbGV0ZWRcIikse3Vuc3Vic2NyaWJlOnRoaXMudW5zdWJzY3JpYmVJbnRlbnRIYW5kbGVyc319Y2F0Y2godCl7Y29uc3QgZT1uZXcgSW50ZXJvcEVycm9yKHQubWVzc2FnZSk7dGhyb3cgdGhpcy5sb2dnZXIubG9nRXJyb3IoZSksZX19YXN5bmMgc2hhcmUodCl7dmFyIGUsbixyLG87dGhpcy5sb2dnZXIubG9nSW5mbyhcInNoYXJlIHN0YXJ0ZWRcIix0KTt0cnl7aWYoIXQudGFyZ2V0KXRocm93IG5ldyBCKFwiVGFyZ2V0IG5vdCBwcm92aWRlZFwiKTtpZigobnVsbD09PShlPXQuY29udGV4dCl8fHZvaWQgMD09PWU/dm9pZCAwOmUudHlwZS50b0xvd2VyQ2FzZSgpKSE9PW50Lkluc3RydW1lbnQudG9Mb3dlckNhc2UoKSl0aHJvdyBuZXcgQihcIlVuc3VwcG9ydGVkIGNvbnRleHQgdHlwZVwiKTtpZighKG51bGw9PT0ocj1udWxsPT09KG49dC5jb250ZXh0KXx8dm9pZCAwPT09bj92b2lkIDA6bi5pZCl8fHZvaWQgMD09PXI/dm9pZCAwOnIudGlja2VyKSl0aHJvdyBuZXcgQihcIlRpY2tlciBub3QgcHJvdmlkZWRcIik7aWYoIXQuY2hhcnRJbWFnZSYmbnVsbD09dC5wcmljZUN1cnJlbnQpdGhyb3cgbmV3IEIoXCJDdXJyZW50IHByaWNlIG5vdCBwcm92aWRlZFwiKTtjb25zdCBpPW51bGw9PT0obz10LnNob3dNZXNzYWdlKXx8dm9pZCAwPT09b3x8byxhPWF3YWl0IGl0KHRoaXMucHJvdmlkZXIsdCk7bGV0IHM7aWYoQXJyYXkuaXNBcnJheSh0LnRhcmdldCkpe2NvbnN0e3RhcmdldDplfT10LG49YXdhaXQgVyh0aGlzLnByb3ZpZGVyLGUsW1wiZGlzcGxheU5hbWVcIixcIm1haWxcIl0pLHI9bi5maWx0ZXIoQm9vbGVhbik7aWYoIXIubGVuZ3RoKXJldHVybiB0aGlzLmxvZ2dlci5sb2dXYXJuaW5nKFwiQ291bGQgbm90IHJlc29sdmUgYW55IHZhbGlkIHVzZXJzIGZyb20gZW1haWwgYWRkcmVzc2VzXCIsZSksZS5tYXAoKCgpPT57fSkpO2NvbnN0e2lkOm8sd2ViVXJsOnV9PWF3YWl0KGFzeW5jKHQsZSk9Pntjb25zdCBuPXtjaGF0VHlwZTplLmxlbmd0aD4yP1wiZ3JvdXBcIjpcIm9uZU9uT25lXCIsbWVtYmVyczplLm1hcCgoZT0+KHtcIkBvZGF0YS50eXBlXCI6XCIjbWljcm9zb2Z0LmdyYXBoLmFhZFVzZXJDb252ZXJzYXRpb25NZW1iZXJcIixyb2xlczpxKGUpP1tcImd1ZXN0XCJdOltcIm93bmVyXCJdLFwidXNlckBvZGF0YS5iaW5kXCI6YCR7dC5hcGlPcmlnaW59L3YxLjAvdXNlcnMoJyR7ZS5pZH0nKWB9KSkpfSx7ZGF0YTpyfT1hd2FpdCB0LmV4ZWN1dGVBcGlSZXF1ZXN0KFwiL3YxLjAvY2hhdHNcIixcIlBPU1RcIixuKTtyZXR1cm4gcn0pKHRoaXMucHJvdmlkZXIsW3RoaXMucHJvdmlkZXIuY3VycmVudFVzZXIsLi4ucl0pLHtkYXRhOmx9PWF3YWl0IHRoaXMucHJvdmlkZXIuZXhlY3V0ZUFwaVJlcXVlc3QoYC92MS4wL2NoYXRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KG8pfS9tZXNzYWdlc2AsXCJQT1NUXCIsYSk7dGhpcy5sb2dnZXIubG9nSW5mbyhcIlNlbnQgY2hhdCBtZXNzYWdlXCIsbCksaSYmYXdhaXQgdGhpcy5vcGVuVXJsKHUpLHM9RChuKX1lbHNle2NvbnN0e3RhcmdldDplfT10LG49YXdhaXQgdXQodGhpcy5wcm92aWRlcixlLnRlYW1JZCxlLmNoYW5uZWxJZCk7aWYoIW4pcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIubG9nV2FybmluZyhcIkNvdWxkIG5vdCByZXNvbHZlIHRlYW0vY2hhbm5lbFwiLGUudGVhbUlkLGUuY2hhbm5lbElkKTtjb25zdHtjaGFubmVsSWQ6cix0ZWFtSWQ6b309bix7ZGF0YTp1fT1hd2FpdCB0aGlzLnByb3ZpZGVyLmV4ZWN1dGVBcGlSZXF1ZXN0KGAvdjEuMC90ZWFtcy8ke2VuY29kZVVSSUNvbXBvbmVudChvKX0vY2hhbm5lbHMvJHtlbmNvZGVVUklDb21wb25lbnQocil9L21lc3NhZ2VzYCxcIlBPU1RcIixhKTt0aGlzLmxvZ2dlci5sb2dJbmZvKFwiU2VudCBjaGF0IG1lc3NhZ2VcIix1KSxpJiZhd2FpdCB0aGlzLm9wZW5VcmwodS53ZWJVcmwpLHM9bn1yZXR1cm4gdGhpcy5sb2dnZXIubG9nSW5mbyhcInNoYXJlIGNvbXBsZXRlZFwiLHMpLHN9Y2F0Y2godCl7dGhyb3cgdGhpcy5sb2dnZXIubG9nRXJyb3IodCksdH19YXN5bmMgc3RhcnRDYWxsKHQ9W10sZT0hMSl7dGhpcy5sb2dnZXIubG9nSW5mbyhcInN0YXJ0Q2FsbCBzdGFydGVkXCIsdCk7dHJ5e2xldCBuPWAke2F0KHRoaXMudXNlTXNUZWFtc1Byb3RvY29sKX0vbC9jYWxsLzAvMD9gO2NvbnN0IHI9YXdhaXQgVyh0aGlzLnByb3ZpZGVyLHQsW1wiZGlzcGxheU5hbWVcIixcIm1haWxcIl0pLG89ci5maWx0ZXIoQm9vbGVhbikubWFwKCh0PT5lbmNvZGVVUklDb21wb25lbnQodC51c2VyUHJpbmNpcGFsTmFtZSkpKTtpZighby5sZW5ndGgpcmV0dXJuIHRoaXMubG9nZ2VyLmxvZ1dhcm5pbmcoXCJDb3VsZCBub3QgcmVzb2x2ZSBhbnkgdmFsaWQgdXNlcnMgZnJvbSBzdXBwbGllZCBlbWFpbHNcIix0KSx0Lm1hcCgoKCk9Pnt9KSk7bis9YHVzZXJzPSR7by5qb2luKFwiLFwiKX0md2l0aFZpZGVvPSR7ZX1gLHRoaXMubG9nZ2VyLmxvZ0luZm8oXCJPcGVuaW5nIFRlYW1zXCIsbiksYXdhaXQgZmluLlN5c3RlbS5vcGVuVXJsV2l0aEJyb3dzZXIobik7Y29uc3QgaT1EKHIpO3JldHVybiB0aGlzLmxvZ2dlci5sb2dJbmZvKFwic3RhcnRDYWxsIGNvbXBsZXRlZFwiLGkpLGl9Y2F0Y2godCl7dGhyb3cgdGhpcy5sb2dnZXIubG9nRXJyb3IodCksdH19YXN5bmMgc3RhcnRDaGF0KHQpe3RoaXMubG9nZ2VyLmxvZ0luZm8oXCJzdGFydENoYXQgc3RhcnRlZFwiLHQpO3RyeXtsZXQgZSxuO2lmKFwidGVhbUlkXCJpbiB0KXtjb25zdHt0ZWFtSWQ6cixjaGFubmVsSWQ6b309dCxpPWF3YWl0IHV0KHRoaXMucHJvdmlkZXIscixvKTtpZighaSlyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci5sb2dXYXJuaW5nKFwiQ291bGQgbm90IHJlc29sdmUgdGVhbS9jaGFubmVsXCIscixvKTtlPWAke2F0KHRoaXMudXNlTXNUZWFtc1Byb3RvY29sKX0vbC9jaGFubmVsLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGkuY2hhbm5lbElkKX0vJHtlbmNvZGVVUklDb21wb25lbnQoaS5jaGFubmVsTmFtZSl9P2dyb3VwSWQ9JHtpLnRlYW1JZH0mdGVuYW50SWQ9JHt0aGlzLnByb3ZpZGVyLnRlbmFudElkfWAsbj1pfWVsc2V7Y29uc3R7ZW1haWxBZGRyZXNzZXM6cixtZXNzYWdlOm8sdG9waWNOYW1lOml9PXQ7ZT1gJHthdCh0aGlzLnVzZU1zVGVhbXNQcm90b2NvbCl9L2wvY2hhdC8wLzA/YDtjb25zdCBhPWF3YWl0IFcodGhpcy5wcm92aWRlcixyLFtcImRpc3BsYXlOYW1lXCIsXCJtYWlsXCJdKSxzPWEuZmlsdGVyKEJvb2xlYW4pLm1hcCgodD0+ZW5jb2RlVVJJQ29tcG9uZW50KHQudXNlclByaW5jaXBhbE5hbWUpKSk7aWYoIXMubGVuZ3RoKXJldHVybiB0aGlzLmxvZ2dlci5sb2dXYXJuaW5nKFwiQ291bGQgbm90IHJlc29sdmUgYW55IHZhbGlkIHVzZXJzIGZyb20gZW1haWwgYWRkcmVzc2VzXCIsciksci5tYXAoKCgpPT57fSkpO2UrPWB1c2Vycz0ke3Muam9pbihcIixcIil9YCxpJiYoZSs9YCZ0b3BpY05hbWU9JHtlbmNvZGVVUklDb21wb25lbnQoaSl9YCksbyYmKGUrPWAmbWVzc2FnZT0ke2VuY29kZVVSSUNvbXBvbmVudChvKX1gKSxuPUQoYSl9cmV0dXJuIHRoaXMubG9nZ2VyLmxvZ0luZm8oXCJPcGVuaW5nIFRlYW1zXCIsZSksYXdhaXQgZmluLlN5c3RlbS5vcGVuVXJsV2l0aEJyb3dzZXIoZSksdGhpcy5sb2dnZXIubG9nSW5mbyhcInN0YXJ0Q2hhdCBjb21wbGV0ZWRcIixuKSxufWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmxvZ0Vycm9yKHQpLHR9fX19LDkxOigpPT57fX0sZT17fTtmdW5jdGlvbiBuKHIpe3ZhciBvPWVbcl07aWYodm9pZCAwIT09bylyZXR1cm4gby5leHBvcnRzO3ZhciBpPWVbcl09e2lkOnIsbG9hZGVkOiExLGV4cG9ydHM6e319O3JldHVybiB0W3JdLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLG4pLGkubG9hZGVkPSEwLGkuZXhwb3J0c31uLmM9ZSxuLmQ9KHQsZSk9Pntmb3IodmFyIHIgaW4gZSluLm8oZSxyKSYmIW4ubyh0LHIpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHtlbnVtZXJhYmxlOiEwLGdldDplW3JdfSl9LG4uZz1mdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBnbG9iYWxUaGlzKXJldHVybiBnbG9iYWxUaGlzO3RyeXtyZXR1cm4gdGhpc3x8bmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKX1jYXRjaCh0KXtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93KXJldHVybiB3aW5kb3d9fSgpLG4ubz0odCxlKT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSksbi5ubWQ9dD0+KHQucGF0aHM9W10sdC5jaGlsZHJlbnx8KHQuY2hpbGRyZW49W10pLHQpO3ZhciByPW4obi5zPTU0KSxvPXIuTVMsaT1yLmNGLGE9ci5BSyxzPXIuTV8sdT1yLmNYLGw9ci5CVCxjPXIuX1csZj1yLlBnLGQ9ci4kaixoPXIuVSQscD1yLlU3O2V4cG9ydHtvIGFzIEFwaUVycm9yLGkgYXMgQXBpUmVxdWVzdEVycm9yLGEgYXMgQXV0aFRva2VuRXhwaXJlZEVycm9yLHMgYXMgQXV0aG9yaXphdGlvbkVycm9yLHUgYXMgSW5pdGlhbGl6YXRpb25FcnJvcixsIGFzIEludGVyb3BFcnJvcixjIGFzIFBhcmFtZXRlckVycm9yLGYgYXMgVGVhbXNDb25uZWN0aW9uLGQgYXMgY29ubmVjdCxoIGFzIGRpc2FibGVMb2dnaW5nLHAgYXMgZW5hYmxlTG9nZ2luZ307IiwiKCgpPT57dmFyIGU9ezg0NzooZSx0KT0+e3ZhciBhPXsyMzQ2OmZ1bmN0aW9uKGUsdCxhKXt2YXIgbj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmdldE1vc3RSZWFkYWJsZT10LmRhcmtlbkNvbG9yPXQubGlnaHRlbkNvbG9yPXZvaWQgMDtjb25zdCByPW4oYSg2NTM1KSk7dC5saWdodGVuQ29sb3I9KGUsdCk9Pm8oZSxcImxpZ2h0ZW5cIix0KSx0LmRhcmtlbkNvbG9yPShlLHQpPT5vKGUsXCJkYXJrZW5cIix0KTtjb25zdCBvPShlLHQsYSk9PntpZihhJiYoYTwwfHxhPjEwMCkpdGhyb3cgbmV3IEVycm9yKGAke2F9IG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxMDBgKTtyZXR1cm4oMCxyLmRlZmF1bHQpKGUpW3RdKGEpLnRvU3RyaW5nKCl9O3QuZ2V0TW9zdFJlYWRhYmxlPShlLHQpPT5yLmRlZmF1bHQubW9zdFJlYWRhYmxlKGUsdCkudG9IZXhTdHJpbmcoKX0sMjMxNzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSWNvblNpemU9dC5UcmFuc2l0aW9uPXQuTGluZUhlaWdodD10LkZvbnRXZWlnaHQ9dC5Gb250U2l6ZT10LkZvbnRGYW1pbHk9dC5TaGFkb3c9dC5SYWRpdXM9dC5Vbml0UHg9dC5Vbml0PXQuU2l6ZU5hbWU9dC5TaXplPXQuQ29sb3I9dm9pZCAwLHQuQ29sb3I9e3doaXRlOlwiI0ZGRkZGRlwiLGxpZ2h0R3JheTE6XCIjRkFGQkZFXCIsbGlnaHRHcmF5MjpcIiNGM0Y1RjhcIixsaWdodEdyYXkzOlwiI0VDRUVGMVwiLGxpZ2h0R3JheTQ6XCIjRERERkU0XCIsbGlnaHRHcmF5NTpcIiNDOUNCRDJcIixuZXV0cmFsR3JheTpcIiM3RDgwOEFcIixuZXV0cmFsR3JheTgwOlwicmdiYSgxMjUsMTI4LDEzOCwwLjgpXCIsc2lsdmVyR3JheTpcIiNDMEMxQzJcIixkYXJrR3JheTE6XCIjNTM1NjVGXCIsZGFya0dyYXkyOlwiIzM4M0E0MFwiLGRhcmtHcmF5MzpcIiMyRjMxMzZcIixkYXJrR3JheTQ6XCIjMjQyNjJCXCIsZGFya0dyYXk1OlwiIzFFMUYyM1wiLGRhcmtHcmF5NjpcIiMxMTEyMTRcIixvcGVuRmluRGFya2VzdDpcIiMzRDM5Q0RcIixvcGVuRmluRGFya2VyOlwiIzQ2NDJFMFwiLG9wZW5GaW46XCIjNTA0Q0ZGXCIsb3BlbkZpbkxpZ2h0OlwiIzUyNTRGQlwiLG9wZW5GaW5MaWdodGVyOlwiIzVDNUVGRVwiLG9wZW5GaW5MaWdodGVzdDpcIiM2ODY0RkZcIixmdW5jdGlvbmFsMTpcIiMyMDc3MzVcIixmdW5jdGlvbmFsMjpcIiM0NkM4RjFcIixmdW5jdGlvbmFsMzpcIiMwQTc2RDNcIixmdW5jdGlvbmFsNDpcIiM2Q0FERTVcIixmdW5jdGlvbmFsNTpcIiMwQTc2RDNcIixmdW5jdGlvbmFsNjpcIiM4ODJCRkVcIixmdW5jdGlvbmFsNzpcIiNGMzE4MThcIixmdW5jdGlvbmFsODpcIiNDOTM0MDBcIixmdW5jdGlvbmFsOTpcIiNGRjVFNjBcIixmdW5jdGlvbmFsMTA6XCIjRjQ4RjAwXCIscHVycGxlOlwiIzhDNjFGRlwiLGxpZ2h0Ymx1ZTpcIiMzNkMzRkVcIixhcXVhOlwiIzAwQ0M4OFwiLHllbGxvdzpcIiNGRkVCMDBcIixzYWxtb246XCIjRkY4QzRDXCIscGluazpcIiNGRjVFNjBcIixsaWdodHBpbms6XCIjRkY4RkI4XCIsd2hpdGUwMDpcInJnYmEoMjU1LDI1NSwyNTUsMC4wKVwiLHdoaXRlMTA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuMSlcIix3aGl0ZTIwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjIpXCIsd2hpdGUzMDpcInJnYmEoMjU1LDI1NSwyNTUsMC4zKVwiLHdoaXRlNDA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuNClcIix3aGl0ZTUwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjUpXCIsd2hpdGU2MDpcInJnYmEoMjU1LDI1NSwyNTUsMC42KVwiLHdoaXRlNzA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuNylcIix3aGl0ZTgwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCIsd2hpdGU5MDpcInJnYmEoMjU1LDI1NSwyNTUsMC45KVwiLGJsYWNrMDA6XCJyZ2JhKDAsMCwwLDAuMClcIixibGFjazEwOlwicmdiYSgwLDAsMCwwLjEpXCIsYmxhY2syMDpcInJnYmEoMCwwLDAsMC4yKVwiLGJsYWNrMzA6XCJyZ2JhKDAsMCwwLDAuMylcIixibGFjazQwOlwicmdiYSgwLDAsMCwwLjQpXCIsYmxhY2s1MDpcInJnYmEoMCwwLDAsMC41KVwiLGJsYWNrNjA6XCJyZ2JhKDAsMCwwLDAuNilcIixibGFjazcwOlwicmdiYSgwLDAsMCwwLjcpXCIsYmxhY2s4MDpcInJnYmEoMCwwLDAsMC44KVwiLGJsYWNrOTA6XCJyZ2JhKDAsMCwwLDAuOSlcIix0cmFuc3BhcmVudDpcInRyYW5zcGFyZW50XCIsb3BlbkZpbkFjdGl2ZTpcIiM0NjQyRkZcIixvcGVuRmluSG92ZXI6XCIjNjk2NUZGXCIsbGlnaHRHcmF5NEFjdGl2ZTpcIiNEN0RBREZcIixsaWdodEdyYXk0SG92ZXI6XCIjRUJFQ0VGXCIsZGFya0dyYXkyQWN0aXZlOlwiIzMzMzUzQlwiLGRhcmtHcmF5MkhvdmVyOlwiIzQ0NDY0RVwifSx0LlNpemU9e3hzbWFsbDpcInhzbWFsbFwiLHNtYWxsOlwic21hbGxcIixiYXNlOlwiYmFzZVwiLGxhcmdlOlwibGFyZ2VcIix4bGFyZ2U6XCJ4bGFyZ2VcIix4eGxhcmdlOlwieHhsYXJnZVwiLHh4eGxhcmdlOlwieHh4bGFyZ2VcIix4eHh4bGFyZ2U6XCJ4eHh4bGFyZ2VcIn0sdC5TaXplTmFtZT17W3QuU2l6ZS54c21hbGxdOlwiRXh0cmEgU21hbGxcIixbdC5TaXplLnNtYWxsXTpcIlNtYWxsXCIsW3QuU2l6ZS5iYXNlXTpcIkJhc2VcIixbdC5TaXplLmxhcmdlXTpcIkxhcmdlXCIsW3QuU2l6ZS54bGFyZ2VdOlwiRXh0cmEgTGFyZ2VcIixbdC5TaXplLnh4bGFyZ2VdOlwiMlggTGFyZ2VcIixbdC5TaXplLnh4eGxhcmdlXTpcIjNYIExhcmdlXCIsW3QuU2l6ZS54eHh4bGFyZ2VdOlwiNFggTGFyZ2VcIn0sdC5Vbml0PXtbdC5TaXplLnhzbWFsbF06NCxbdC5TaXplLnNtYWxsXTo4LFt0LlNpemUuYmFzZV06MTIsW3QuU2l6ZS5sYXJnZV06MTYsW3QuU2l6ZS54bGFyZ2VdOjIwLFt0LlNpemUueHhsYXJnZV06MjQsW3QuU2l6ZS54eHhsYXJnZV06MzIsW3QuU2l6ZS54eHh4bGFyZ2VdOjQ4fSx0LlVuaXRQeD17W3QuU2l6ZS54c21hbGxdOlwiNHB4XCIsW3QuU2l6ZS5zbWFsbF06XCI4cHhcIixbdC5TaXplLmJhc2VdOlwiMTJweFwiLFt0LlNpemUubGFyZ2VdOlwiMTZweFwiLFt0LlNpemUueGxhcmdlXTpcIjIwcHhcIixbdC5TaXplLnh4bGFyZ2VdOlwiMjRweFwiLFt0LlNpemUueHh4bGFyZ2VdOlwiMzJweFwiLFt0LlNpemUueHh4eGxhcmdlXTpcIjQ4cHhcIn0sdC5SYWRpdXM9e1t0LlNpemUueHNtYWxsXTpcIjJweFwiLFt0LlNpemUuc21hbGxdOlwiNHB4XCIsW3QuU2l6ZS5iYXNlXTpcIjhweFwiLFt0LlNpemUubGFyZ2VdOlwiMjRweFwiLHBpbGw6XCIxMDB2aFwiLHJvdW5kOlwiNTAlXCIsbm9uZTpcIjBcIn0sdC5TaGFkb3c9e1t0LlNpemUuYmFzZV06XCIwIDRweCA0cHggcmdiYSgwLCAwLCAwLCAwLjI1KVwifSx0LkZvbnRGYW1pbHk9W1wiSW50ZXJcIixcInN5c3RlbS11aVwiLFwiQmxpbmtNYWNTeXN0ZW1Gb250XCIsXCJTZWdvZSBVSVwiLFwiUm9ib3RvXCIsXCJPeHlnZW4tU2Fuc1wiLFwiVWJ1bnR1XCIsXCJDYW50YXJlbGxcIixcIkhlbHZldGljYSBOZXVlXCIsXCJzYW5zLXNlcmlmXCJdLmpvaW4oXCIsXCIpLHQuRm9udFNpemU9e1t0LlNpemUueHNtYWxsXTpcIjhweFwiLFt0LlNpemUuc21hbGxdOlwiMTBweFwiLFt0LlNpemUuYmFzZV06XCIxMnB4XCIsW3QuU2l6ZS5sYXJnZV06XCIxNHB4XCIsW3QuU2l6ZS54bGFyZ2VdOlwiMTZweFwiLFt0LlNpemUueHhsYXJnZV06XCIxOHB4XCIsW3QuU2l6ZS54eHhsYXJnZV06XCIyMHB4XCIsW3QuU2l6ZS54eHh4bGFyZ2VdOlwiNDBweFwifSx0LkZvbnRXZWlnaHQ9e25vcm1hbDo0MDAsYm9sZDo2MDB9LHQuTGluZUhlaWdodD17dWk6MSxoZWFkaW5nOjEuMix0ZXh0OjEuNX0sdC5UcmFuc2l0aW9uPXtiYXNlOlwiMjAwbXMgY3ViaWMtYmV6aWVyKDAuMTYsIDEsIDAuMywgMSlcIixub25lOlwiMG1zXCJ9LHQuSWNvblNpemU9e1t0LlNpemUueHNtYWxsXTp0LlVuaXRQeC5zbWFsbCxbdC5TaXplLnNtYWxsXTp0LlVuaXRQeC5iYXNlLFt0LlNpemUuYmFzZV06XCIxNXB4XCIsW3QuU2l6ZS5sYXJnZV06dC5Vbml0UHgueGxhcmdlLFt0LlNpemUueGxhcmdlXTp0LlVuaXRQeC54eGxhcmdlLFt0LlNpemUueHhsYXJnZV06dC5Vbml0UHgueHh4bGFyZ2UsW3QuU2l6ZS54eHhsYXJnZV06dC5Vbml0UHgueHh4eGxhcmdlfX0sNjg5MzooZSx0LGEpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5jcmVhdGVUaGVtZT12b2lkIDA7Y29uc3Qgbj1hKDIzMTcpLHI9YSgyMzQ2KSxvPWEoNTkzOSksaT17Zm9udEZhbWlseTpuLkZvbnRGYW1pbHksZm9udFNpemU6bi5Gb250U2l6ZSxmb250V2VpZ2h0Om4uRm9udFdlaWdodCxsaW5lSGVpZ2h0Om4uTGluZUhlaWdodCxpY29uU2l6ZTpuLkljb25TaXplLHJhZGl1czpuLlJhZGl1cyxzaGFkb3c6bi5TaGFkb3csdHJhbnNpdGlvbjpuLlRyYW5zaXRpb24sdW5pdDpuLlVuaXQscHg6bi5Vbml0UHh9LHM9KGUsdCk9Pih7W2Ake2V9QWN0aXZlYF06KDAsci5kYXJrZW5Db2xvcikodCwyKSxbYCR7ZX1Ib3ZlcmBdOigwLHIubGlnaHRlbkNvbG9yKSh0LDUpLFtgJHtlfUZvY3VzZWRgXTooMCxyLmdldE1vc3RSZWFkYWJsZSkodCxbbi5Db2xvci53aGl0ZSxuLkNvbG9yLmRhcmtHcmF5NV0pLFtgJHtlfVRleHRgXTooMCxyLmdldE1vc3RSZWFkYWJsZSkodCxbbi5Db2xvci53aGl0ZSxuLkNvbG9yLmRhcmtHcmF5NV0pfSk7dC5jcmVhdGVUaGVtZT1lPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSkse3BhbGV0dGU6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scyhvLlBhbGV0dGUuYnJhbmRQcmltYXJ5LGUuYnJhbmRQcmltYXJ5KSkscyhvLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnksZS5icmFuZFNlY29uZGFyeSkpLGUpfSl9LDU5Mzk6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlBhbGV0dGU9dm9pZCAwLHQuUGFsZXR0ZT17YmFja2dyb3VuZDE6XCJiYWNrZ3JvdW5kMVwiLGJhY2tncm91bmQyOlwiYmFja2dyb3VuZDJcIixiYWNrZ3JvdW5kMzpcImJhY2tncm91bmQzXCIsYmFja2dyb3VuZDQ6XCJiYWNrZ3JvdW5kNFwiLGJhY2tncm91bmQ1OlwiYmFja2dyb3VuZDVcIixiYWNrZ3JvdW5kNjpcImJhY2tncm91bmQ2XCIsYnJhbmRQcmltYXJ5OlwiYnJhbmRQcmltYXJ5XCIsYnJhbmRTZWNvbmRhcnk6XCJicmFuZFNlY29uZGFyeVwiLGJyYW5kUHJpbWFyeUFjdGl2ZTpcImJyYW5kUHJpbWFyeUFjdGl2ZVwiLGJyYW5kUHJpbWFyeUhvdmVyOlwiYnJhbmRQcmltYXJ5SG92ZXJcIixicmFuZFByaW1hcnlGb2N1c2VkOlwiYnJhbmRQcmltYXJ5Rm9jdXNlZFwiLGJyYW5kUHJpbWFyeVRleHQ6XCJicmFuZFByaW1hcnlUZXh0XCIsYnJhbmRTZWNvbmRhcnlBY3RpdmU6XCJicmFuZFNlY29uZGFyeUFjdGl2ZVwiLGJyYW5kU2Vjb25kYXJ5SG92ZXI6XCJicmFuZFNlY29uZGFyeUhvdmVyXCIsYnJhbmRTZWNvbmRhcnlGb2N1c2VkOlwiYnJhbmRTZWNvbmRhcnlGb2N1c2VkXCIsYnJhbmRTZWNvbmRhcnlUZXh0OlwiYnJhbmRTZWNvbmRhcnlUZXh0XCIsaW5wdXRCYWNrZ3JvdW5kOlwiaW5wdXRCYWNrZ3JvdW5kXCIsaW5wdXRDb2xvcjpcImlucHV0Q29sb3JcIixpbnB1dFBsYWNlaG9sZGVyOlwiaW5wdXRQbGFjZWhvbGRlclwiLGlucHV0RGlzYWJsZWQ6XCJpbnB1dERpc2FibGVkXCIsaW5wdXRGb2N1c2VkOlwiaW5wdXRGb2N1c2VkXCIsaW5wdXRCb3JkZXI6XCJpbnB1dEJvcmRlclwiLHN0YXR1c1N1Y2Nlc3M6XCJzdGF0dXNTdWNjZXNzXCIsc3RhdHVzV2FybmluZzpcInN0YXR1c1dhcm5pbmdcIixzdGF0dXNDcml0aWNhbDpcInN0YXR1c0NyaXRpY2FsXCIsc3RhdHVzQWN0aXZlOlwic3RhdHVzQWN0aXZlXCIsdGV4dERlZmF1bHQ6XCJ0ZXh0RGVmYXVsdFwiLHRleHRIZWxwOlwidGV4dEhlbHBcIix0ZXh0SW5hY3RpdmU6XCJ0ZXh0SW5hY3RpdmVcIixib3JkZXJOZXV0cmFsOlwiYm9yZGVyTmV1dHJhbFwiLGNvbnRlbnRCYWNrZ3JvdW5kMTpcImNvbnRlbnRCYWNrZ3JvdW5kMVwiLGNvbnRlbnRCYWNrZ3JvdW5kMjpcImNvbnRlbnRCYWNrZ3JvdW5kMlwiLGNvbnRlbnRCYWNrZ3JvdW5kMzpcImNvbnRlbnRCYWNrZ3JvdW5kM1wiLGNvbnRlbnRCYWNrZ3JvdW5kNDpcImNvbnRlbnRCYWNrZ3JvdW5kNFwiLGNvbnRlbnRCYWNrZ3JvdW5kNTpcImNvbnRlbnRCYWNrZ3JvdW5kNVwiLGxpbmtEZWZhdWx0OlwibGlua0RlZmF1bHRcIixsaW5rSG92ZXI6XCJsaW5rSG92ZXJcIn19LDY1MzU6ZnVuY3Rpb24oZSl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4oZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkodCl9dmFyIHQ9L15cXHMrLyxhPS9cXHMrJC87ZnVuY3Rpb24gbihyLG8pe2lmKG89b3x8e30sKHI9cnx8XCJcIilpbnN0YW5jZW9mIG4pcmV0dXJuIHI7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpcmV0dXJuIG5ldyBuKHIsbyk7dmFyIGk9ZnVuY3Rpb24obil7dmFyIHIsbyxpLHM9e3I6MCxnOjAsYjowfSxjPTEsZD1udWxsLGw9bnVsbCx1PW51bGwscD0hMSxoPSExO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj1mdW5jdGlvbihlKXtlPWUucmVwbGFjZSh0LFwiXCIpLnJlcGxhY2UoYSxcIlwiKS50b0xvd2VyQ2FzZSgpO3ZhciBuLHI9ITE7aWYodltlXSllPXZbZV0scj0hMDtlbHNlIGlmKFwidHJhbnNwYXJlbnRcIj09ZSlyZXR1cm57cjowLGc6MCxiOjAsYTowLGZvcm1hdDpcIm5hbWVcIn07cmV0dXJuKG49Ty5yZ2IuZXhlYyhlKSk/e3I6blsxXSxnOm5bMl0sYjpuWzNdfToobj1PLnJnYmEuZXhlYyhlKSk/e3I6blsxXSxnOm5bMl0sYjpuWzNdLGE6bls0XX06KG49Ty5oc2wuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sbDpuWzNdfToobj1PLmhzbGEuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sbDpuWzNdLGE6bls0XX06KG49Ty5oc3YuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sdjpuWzNdfToobj1PLmhzdmEuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sdjpuWzNdLGE6bls0XX06KG49Ty5oZXg4LmV4ZWMoZSkpP3tyOkEoblsxXSksZzpBKG5bMl0pLGI6QShuWzNdKSxhOkYobls0XSksZm9ybWF0OnI/XCJuYW1lXCI6XCJoZXg4XCJ9OihuPU8uaGV4Ni5leGVjKGUpKT97cjpBKG5bMV0pLGc6QShuWzJdKSxiOkEoblszXSksZm9ybWF0OnI/XCJuYW1lXCI6XCJoZXhcIn06KG49Ty5oZXg0LmV4ZWMoZSkpP3tyOkEoblsxXStcIlwiK25bMV0pLGc6QShuWzJdK1wiXCIrblsyXSksYjpBKG5bM10rXCJcIituWzNdKSxhOkYobls0XStcIlwiK25bNF0pLGZvcm1hdDpyP1wibmFtZVwiOlwiaGV4OFwifTohIShuPU8uaGV4My5leGVjKGUpKSYme3I6QShuWzFdK1wiXCIrblsxXSksZzpBKG5bMl0rXCJcIituWzJdKSxiOkEoblszXStcIlwiK25bM10pLGZvcm1hdDpyP1wibmFtZVwiOlwiaGV4XCJ9fShuKSksXCJvYmplY3RcIj09ZShuKSYmKEUobi5yKSYmRShuLmcpJiZFKG4uYik/KHI9bi5yLG89bi5nLGk9bi5iLHM9e3I6MjU1KlAociwyNTUpLGc6MjU1KlAobywyNTUpLGI6MjU1KlAoaSwyNTUpfSxwPSEwLGg9XCIlXCI9PT1TdHJpbmcobi5yKS5zdWJzdHIoLTEpP1wicHJnYlwiOlwicmdiXCIpOkUobi5oKSYmRShuLnMpJiZFKG4udik/KGQ9TShuLnMpLGw9TShuLnYpLHM9ZnVuY3Rpb24oZSx0LGEpe2U9NipQKGUsMzYwKSx0PVAodCwxMDApLGE9UChhLDEwMCk7dmFyIG49TWF0aC5mbG9vcihlKSxyPWUtbixvPWEqKDEtdCksaT1hKigxLXIqdCkscz1hKigxLSgxLXIpKnQpLGM9biU2O3JldHVybntyOjI1NSpbYSxpLG8sbyxzLGFdW2NdLGc6MjU1KltzLGEsYSxpLG8sb11bY10sYjoyNTUqW28sbyxzLGEsYSxpXVtjXX19KG4uaCxkLGwpLHA9ITAsaD1cImhzdlwiKTpFKG4uaCkmJkUobi5zKSYmRShuLmwpJiYoZD1NKG4ucyksdT1NKG4ubCkscz1mdW5jdGlvbihlLHQsYSl7dmFyIG4scixvO2Z1bmN0aW9uIGkoZSx0LGEpe3JldHVybiBhPDAmJihhKz0xKSxhPjEmJihhLT0xKSxhPDEvNj9lKzYqKHQtZSkqYTphPC41P3Q6YTwyLzM/ZSsodC1lKSooMi8zLWEpKjY6ZX1pZihlPVAoZSwzNjApLHQ9UCh0LDEwMCksYT1QKGEsMTAwKSwwPT09dCluPXI9bz1hO2Vsc2V7dmFyIHM9YTwuNT9hKigxK3QpOmErdC1hKnQsYz0yKmEtcztuPWkoYyxzLGUrMS8zKSxyPWkoYyxzLGUpLG89aShjLHMsZS0xLzMpfXJldHVybntyOjI1NSpuLGc6MjU1KnIsYjoyNTUqb319KG4uaCxkLHUpLHA9ITAsaD1cImhzbFwiKSxuLmhhc093blByb3BlcnR5KFwiYVwiKSYmKGM9bi5hKSksYz1TKGMpLHtvazpwLGZvcm1hdDpuLmZvcm1hdHx8aCxyOk1hdGgubWluKDI1NSxNYXRoLm1heChzLnIsMCkpLGc6TWF0aC5taW4oMjU1LE1hdGgubWF4KHMuZywwKSksYjpNYXRoLm1pbigyNTUsTWF0aC5tYXgocy5iLDApKSxhOmN9fShyKTt0aGlzLl9vcmlnaW5hbElucHV0PXIsdGhpcy5fcj1pLnIsdGhpcy5fZz1pLmcsdGhpcy5fYj1pLmIsdGhpcy5fYT1pLmEsdGhpcy5fcm91bmRBPU1hdGgucm91bmQoMTAwKnRoaXMuX2EpLzEwMCx0aGlzLl9mb3JtYXQ9by5mb3JtYXR8fGkuZm9ybWF0LHRoaXMuX2dyYWRpZW50VHlwZT1vLmdyYWRpZW50VHlwZSx0aGlzLl9yPDEmJih0aGlzLl9yPU1hdGgucm91bmQodGhpcy5fcikpLHRoaXMuX2c8MSYmKHRoaXMuX2c9TWF0aC5yb3VuZCh0aGlzLl9nKSksdGhpcy5fYjwxJiYodGhpcy5fYj1NYXRoLnJvdW5kKHRoaXMuX2IpKSx0aGlzLl9vaz1pLm9rfWZ1bmN0aW9uIHIoZSx0LGEpe2U9UChlLDI1NSksdD1QKHQsMjU1KSxhPVAoYSwyNTUpO3ZhciBuLHIsbz1NYXRoLm1heChlLHQsYSksaT1NYXRoLm1pbihlLHQsYSkscz0obytpKS8yO2lmKG89PWkpbj1yPTA7ZWxzZXt2YXIgYz1vLWk7c3dpdGNoKHI9cz4uNT9jLygyLW8taSk6Yy8obytpKSxvKXtjYXNlIGU6bj0odC1hKS9jKyh0PGE/NjowKTticmVhaztjYXNlIHQ6bj0oYS1lKS9jKzI7YnJlYWs7Y2FzZSBhOm49KGUtdCkvYys0fW4vPTZ9cmV0dXJue2g6bixzOnIsbDpzfX1mdW5jdGlvbiBvKGUsdCxhKXtlPVAoZSwyNTUpLHQ9UCh0LDI1NSksYT1QKGEsMjU1KTt2YXIgbixyLG89TWF0aC5tYXgoZSx0LGEpLGk9TWF0aC5taW4oZSx0LGEpLHM9byxjPW8taTtpZihyPTA9PT1vPzA6Yy9vLG89PWkpbj0wO2Vsc2V7c3dpdGNoKG8pe2Nhc2UgZTpuPSh0LWEpL2MrKHQ8YT82OjApO2JyZWFrO2Nhc2UgdDpuPShhLWUpL2MrMjticmVhaztjYXNlIGE6bj0oZS10KS9jKzR9bi89Nn1yZXR1cm57aDpuLHM6cix2OnN9fWZ1bmN0aW9uIGkoZSx0LGEsbil7dmFyIHI9W3goTWF0aC5yb3VuZChlKS50b1N0cmluZygxNikpLHgoTWF0aC5yb3VuZCh0KS50b1N0cmluZygxNikpLHgoTWF0aC5yb3VuZChhKS50b1N0cmluZygxNikpXTtyZXR1cm4gbiYmclswXS5jaGFyQXQoMCk9PXJbMF0uY2hhckF0KDEpJiZyWzFdLmNoYXJBdCgwKT09clsxXS5jaGFyQXQoMSkmJnJbMl0uY2hhckF0KDApPT1yWzJdLmNoYXJBdCgxKT9yWzBdLmNoYXJBdCgwKStyWzFdLmNoYXJBdCgwKStyWzJdLmNoYXJBdCgwKTpyLmpvaW4oXCJcIil9ZnVuY3Rpb24gcyhlLHQsYSxuKXtyZXR1cm5beChJKG4pKSx4KE1hdGgucm91bmQoZSkudG9TdHJpbmcoMTYpKSx4KE1hdGgucm91bmQodCkudG9TdHJpbmcoMTYpKSx4KE1hdGgucm91bmQoYSkudG9TdHJpbmcoMTYpKV0uam9pbihcIlwiKX1mdW5jdGlvbiBjKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9Ic2woKTtyZXR1cm4gYS5zLT10LzEwMCxhLnM9QyhhLnMpLG4oYSl9ZnVuY3Rpb24gZChlLHQpe3Q9MD09PXQ/MDp0fHwxMDt2YXIgYT1uKGUpLnRvSHNsKCk7cmV0dXJuIGEucys9dC8xMDAsYS5zPUMoYS5zKSxuKGEpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIG4oZSkuZGVzYXR1cmF0ZSgxMDApfWZ1bmN0aW9uIHUoZSx0KXt0PTA9PT10PzA6dHx8MTA7dmFyIGE9bihlKS50b0hzbCgpO3JldHVybiBhLmwrPXQvMTAwLGEubD1DKGEubCksbihhKX1mdW5jdGlvbiBwKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9SZ2IoKTtyZXR1cm4gYS5yPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuci1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksYS5nPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuZy1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksYS5iPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuYi1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksbihhKX1mdW5jdGlvbiBoKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9Ic2woKTtyZXR1cm4gYS5sLT10LzEwMCxhLmw9QyhhLmwpLG4oYSl9ZnVuY3Rpb24gZihlLHQpe3ZhciBhPW4oZSkudG9Ic2woKSxyPShhLmgrdCklMzYwO3JldHVybiBhLmg9cjwwPzM2MCtyOnIsbihhKX1mdW5jdGlvbiBnKGUpe3ZhciB0PW4oZSkudG9Ic2woKTtyZXR1cm4gdC5oPSh0LmgrMTgwKSUzNjAsbih0KX1mdW5jdGlvbiBtKGUsdCl7aWYoaXNOYU4odCl8fHQ8PTApdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgdG8gcG9seWFkIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7Zm9yKHZhciBhPW4oZSkudG9Ic2woKSxyPVtuKGUpXSxvPTM2MC90LGk9MTtpPHQ7aSsrKXIucHVzaChuKHtoOihhLmgraSpvKSUzNjAsczphLnMsbDphLmx9KSk7cmV0dXJuIHJ9ZnVuY3Rpb24gdyhlKXt2YXIgdD1uKGUpLnRvSHNsKCksYT10Lmg7cmV0dXJuW24oZSksbih7aDooYSs3MiklMzYwLHM6dC5zLGw6dC5sfSksbih7aDooYSsyMTYpJTM2MCxzOnQucyxsOnQubH0pXX1mdW5jdGlvbiB5KGUsdCxhKXt0PXR8fDYsYT1hfHwzMDt2YXIgcj1uKGUpLnRvSHNsKCksbz0zNjAvYSxpPVtuKGUpXTtmb3Ioci5oPShyLmgtKG8qdD4+MSkrNzIwKSUzNjA7LS10OylyLmg9KHIuaCtvKSUzNjAsaS5wdXNoKG4ocikpO3JldHVybiBpfWZ1bmN0aW9uIGsoZSx0KXt0PXR8fDY7Zm9yKHZhciBhPW4oZSkudG9Ic3YoKSxyPWEuaCxvPWEucyxpPWEudixzPVtdLGM9MS90O3QtLTspcy5wdXNoKG4oe2g6cixzOm8sdjppfSkpLGk9KGkrYyklMTtyZXR1cm4gc31uLnByb3RvdHlwZT17aXNEYXJrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QnJpZ2h0bmVzcygpPDEyOH0saXNMaWdodDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzRGFyaygpfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29rfSxnZXRPcmlnaW5hbElucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWdpbmFsSW5wdXR9LGdldEZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JtYXR9LGdldEFscGhhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F9LGdldEJyaWdodG5lc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRvUmdiKCk7cmV0dXJuKDI5OSplLnIrNTg3KmUuZysxMTQqZS5iKS8xZTN9LGdldEx1bWluYW5jZTpmdW5jdGlvbigpe3ZhciBlLHQsYSxuPXRoaXMudG9SZ2IoKTtyZXR1cm4gZT1uLnIvMjU1LHQ9bi5nLzI1NSxhPW4uYi8yNTUsLjIxMjYqKGU8PS4wMzkyOD9lLzEyLjkyOk1hdGgucG93KChlKy4wNTUpLzEuMDU1LDIuNCkpKy43MTUyKih0PD0uMDM5Mjg/dC8xMi45MjpNYXRoLnBvdygodCsuMDU1KS8xLjA1NSwyLjQpKSsuMDcyMiooYTw9LjAzOTI4P2EvMTIuOTI6TWF0aC5wb3coKGErLjA1NSkvMS4wNTUsMi40KSl9LHNldEFscGhhOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hPVMoZSksdGhpcy5fcm91bmRBPU1hdGgucm91bmQoMTAwKnRoaXMuX2EpLzEwMCx0aGlzfSx0b0hzdjpmdW5jdGlvbigpe3ZhciBlPW8odGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpO3JldHVybntoOjM2MCplLmgsczplLnMsdjplLnYsYTp0aGlzLl9hfX0sdG9Ic3ZTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1vKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iKSx0PU1hdGgucm91bmQoMzYwKmUuaCksYT1NYXRoLnJvdW5kKDEwMCplLnMpLG49TWF0aC5yb3VuZCgxMDAqZS52KTtyZXR1cm4gMT09dGhpcy5fYT9cImhzdihcIit0K1wiLCBcIithK1wiJSwgXCIrbitcIiUpXCI6XCJoc3ZhKFwiK3QrXCIsIFwiK2ErXCIlLCBcIituK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b0hzbDpmdW5jdGlvbigpe3ZhciBlPXIodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpO3JldHVybntoOjM2MCplLmgsczplLnMsbDplLmwsYTp0aGlzLl9hfX0sdG9Ic2xTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iKSx0PU1hdGgucm91bmQoMzYwKmUuaCksYT1NYXRoLnJvdW5kKDEwMCplLnMpLG49TWF0aC5yb3VuZCgxMDAqZS5sKTtyZXR1cm4gMT09dGhpcy5fYT9cImhzbChcIit0K1wiLCBcIithK1wiJSwgXCIrbitcIiUpXCI6XCJoc2xhKFwiK3QrXCIsIFwiK2ErXCIlLCBcIituK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b0hleDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLl9yLHRoaXMuX2csdGhpcy5fYixlKX0sdG9IZXhTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuXCIjXCIrdGhpcy50b0hleChlKX0sdG9IZXg4OmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlLHQsYSxuLHIpe3ZhciBvPVt4KE1hdGgucm91bmQoZSkudG9TdHJpbmcoMTYpKSx4KE1hdGgucm91bmQodCkudG9TdHJpbmcoMTYpKSx4KE1hdGgucm91bmQoYSkudG9TdHJpbmcoMTYpKSx4KEkobikpXTtyZXR1cm4gciYmb1swXS5jaGFyQXQoMCk9PW9bMF0uY2hhckF0KDEpJiZvWzFdLmNoYXJBdCgwKT09b1sxXS5jaGFyQXQoMSkmJm9bMl0uY2hhckF0KDApPT1vWzJdLmNoYXJBdCgxKSYmb1szXS5jaGFyQXQoMCk9PW9bM10uY2hhckF0KDEpP29bMF0uY2hhckF0KDApK29bMV0uY2hhckF0KDApK29bMl0uY2hhckF0KDApK29bM10uY2hhckF0KDApOm8uam9pbihcIlwiKX0odGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsdGhpcy5fYSxlKX0sdG9IZXg4U3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVyblwiI1wiK3RoaXMudG9IZXg4KGUpfSx0b1JnYjpmdW5jdGlvbigpe3JldHVybntyOk1hdGgucm91bmQodGhpcy5fciksZzpNYXRoLnJvdW5kKHRoaXMuX2cpLGI6TWF0aC5yb3VuZCh0aGlzLl9iKSxhOnRoaXMuX2F9fSx0b1JnYlN0cmluZzpmdW5jdGlvbigpe3JldHVybiAxPT10aGlzLl9hP1wicmdiKFwiK01hdGgucm91bmQodGhpcy5fcikrXCIsIFwiK01hdGgucm91bmQodGhpcy5fZykrXCIsIFwiK01hdGgucm91bmQodGhpcy5fYikrXCIpXCI6XCJyZ2JhKFwiK01hdGgucm91bmQodGhpcy5fcikrXCIsIFwiK01hdGgucm91bmQodGhpcy5fZykrXCIsIFwiK01hdGgucm91bmQodGhpcy5fYikrXCIsIFwiK3RoaXMuX3JvdW5kQStcIilcIn0sdG9QZXJjZW50YWdlUmdiOmZ1bmN0aW9uKCl7cmV0dXJue3I6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9yLDI1NSkpK1wiJVwiLGc6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9nLDI1NSkpK1wiJVwiLGI6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9iLDI1NSkpK1wiJVwiLGE6dGhpcy5fYX19LHRvUGVyY2VudGFnZVJnYlN0cmluZzpmdW5jdGlvbigpe3JldHVybiAxPT10aGlzLl9hP1wicmdiKFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fciwyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fZywyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fYiwyNTUpKStcIiUpXCI6XCJyZ2JhKFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fciwyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fZywyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fYiwyNTUpKStcIiUsIFwiK3RoaXMuX3JvdW5kQStcIilcIn0sdG9OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl9hP1widHJhbnNwYXJlbnRcIjohKHRoaXMuX2E8MSkmJihiW2kodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsITApXXx8ITEpfSx0b0ZpbHRlcjpmdW5jdGlvbihlKXt2YXIgdD1cIiNcIitzKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iLHRoaXMuX2EpLGE9dCxyPXRoaXMuX2dyYWRpZW50VHlwZT9cIkdyYWRpZW50VHlwZSA9IDEsIFwiOlwiXCI7aWYoZSl7dmFyIG89bihlKTthPVwiI1wiK3Moby5fcixvLl9nLG8uX2Isby5fYSl9cmV0dXJuXCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoXCIrcitcInN0YXJ0Q29sb3JzdHI9XCIrdCtcIixlbmRDb2xvcnN0cj1cIithK1wiKVwifSx0b1N0cmluZzpmdW5jdGlvbihlKXt2YXIgdD0hIWU7ZT1lfHx0aGlzLl9mb3JtYXQ7dmFyIGE9ITEsbj10aGlzLl9hPDEmJnRoaXMuX2E+PTA7cmV0dXJuIHR8fCFufHxcImhleFwiIT09ZSYmXCJoZXg2XCIhPT1lJiZcImhleDNcIiE9PWUmJlwiaGV4NFwiIT09ZSYmXCJoZXg4XCIhPT1lJiZcIm5hbWVcIiE9PWU/KFwicmdiXCI9PT1lJiYoYT10aGlzLnRvUmdiU3RyaW5nKCkpLFwicHJnYlwiPT09ZSYmKGE9dGhpcy50b1BlcmNlbnRhZ2VSZ2JTdHJpbmcoKSksXCJoZXhcIiE9PWUmJlwiaGV4NlwiIT09ZXx8KGE9dGhpcy50b0hleFN0cmluZygpKSxcImhleDNcIj09PWUmJihhPXRoaXMudG9IZXhTdHJpbmcoITApKSxcImhleDRcIj09PWUmJihhPXRoaXMudG9IZXg4U3RyaW5nKCEwKSksXCJoZXg4XCI9PT1lJiYoYT10aGlzLnRvSGV4OFN0cmluZygpKSxcIm5hbWVcIj09PWUmJihhPXRoaXMudG9OYW1lKCkpLFwiaHNsXCI9PT1lJiYoYT10aGlzLnRvSHNsU3RyaW5nKCkpLFwiaHN2XCI9PT1lJiYoYT10aGlzLnRvSHN2U3RyaW5nKCkpLGF8fHRoaXMudG9IZXhTdHJpbmcoKSk6XCJuYW1lXCI9PT1lJiYwPT09dGhpcy5fYT90aGlzLnRvTmFtZSgpOnRoaXMudG9SZ2JTdHJpbmcoKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLnRvU3RyaW5nKCkpfSxfYXBwbHlNb2RpZmljYXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgYT1lLmFwcGx5KG51bGwsW3RoaXNdLmNvbmNhdChbXS5zbGljZS5jYWxsKHQpKSk7cmV0dXJuIHRoaXMuX3I9YS5fcix0aGlzLl9nPWEuX2csdGhpcy5fYj1hLl9iLHRoaXMuc2V0QWxwaGEoYS5fYSksdGhpc30sbGlnaHRlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbih1LGFyZ3VtZW50cyl9LGJyaWdodGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKHAsYXJndW1lbnRzKX0sZGFya2VuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGgsYXJndW1lbnRzKX0sZGVzYXR1cmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihjLGFyZ3VtZW50cyl9LHNhdHVyYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGQsYXJndW1lbnRzKX0sZ3JleXNjYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGwsYXJndW1lbnRzKX0sc3BpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihmLGFyZ3VtZW50cyl9LF9hcHBseUNvbWJpbmF0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYXBwbHkobnVsbCxbdGhpc10uY29uY2F0KFtdLnNsaWNlLmNhbGwodCkpKX0sYW5hbG9nb3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oeSxhcmd1bWVudHMpfSxjb21wbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oZyxhcmd1bWVudHMpfSxtb25vY2hyb21hdGljOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oayxhcmd1bWVudHMpfSxzcGxpdGNvbXBsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbih3LGFyZ3VtZW50cyl9LHRyaWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24obSxbM10pfSx0ZXRyYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihtLFs0XSl9fSxuLmZyb21SYXRpbz1mdW5jdGlvbih0LGEpe2lmKFwib2JqZWN0XCI9PWUodCkpe3ZhciByPXt9O2Zvcih2YXIgbyBpbiB0KXQuaGFzT3duUHJvcGVydHkobykmJihyW29dPVwiYVwiPT09bz90W29dOk0odFtvXSkpO3Q9cn1yZXR1cm4gbih0LGEpfSxuLmVxdWFscz1mdW5jdGlvbihlLHQpe3JldHVybiEoIWV8fCF0KSYmbihlKS50b1JnYlN0cmluZygpPT1uKHQpLnRvUmdiU3RyaW5nKCl9LG4ucmFuZG9tPWZ1bmN0aW9uKCl7cmV0dXJuIG4uZnJvbVJhdGlvKHtyOk1hdGgucmFuZG9tKCksZzpNYXRoLnJhbmRvbSgpLGI6TWF0aC5yYW5kb20oKX0pfSxuLm1peD1mdW5jdGlvbihlLHQsYSl7YT0wPT09YT8wOmF8fDUwO3ZhciByPW4oZSkudG9SZ2IoKSxvPW4odCkudG9SZ2IoKSxpPWEvMTAwO3JldHVybiBuKHtyOihvLnItci5yKSppK3IucixnOihvLmctci5nKSppK3IuZyxiOihvLmItci5iKSppK3IuYixhOihvLmEtci5hKSppK3IuYX0pfSxuLnJlYWRhYmlsaXR5PWZ1bmN0aW9uKGUsdCl7dmFyIGE9bihlKSxyPW4odCk7cmV0dXJuKE1hdGgubWF4KGEuZ2V0THVtaW5hbmNlKCksci5nZXRMdW1pbmFuY2UoKSkrLjA1KS8oTWF0aC5taW4oYS5nZXRMdW1pbmFuY2UoKSxyLmdldEx1bWluYW5jZSgpKSsuMDUpfSxuLmlzUmVhZGFibGU9ZnVuY3Rpb24oZSx0LGEpe3ZhciByLG8saSxzLGMsZD1uLnJlYWRhYmlsaXR5KGUsdCk7c3dpdGNoKG89ITEsKGk9YSxcIkFBXCIhPT0ocz0oKGk9aXx8e2xldmVsOlwiQUFcIixzaXplOlwic21hbGxcIn0pLmxldmVsfHxcIkFBXCIpLnRvVXBwZXJDYXNlKCkpJiZcIkFBQVwiIT09cyYmKHM9XCJBQVwiKSxcInNtYWxsXCIhPT0oYz0oaS5zaXplfHxcInNtYWxsXCIpLnRvTG93ZXJDYXNlKCkpJiZcImxhcmdlXCIhPT1jJiYoYz1cInNtYWxsXCIpLHI9e2xldmVsOnMsc2l6ZTpjfSkubGV2ZWwrci5zaXplKXtjYXNlXCJBQXNtYWxsXCI6Y2FzZVwiQUFBbGFyZ2VcIjpvPWQ+PTQuNTticmVhaztjYXNlXCJBQWxhcmdlXCI6bz1kPj0zO2JyZWFrO2Nhc2VcIkFBQXNtYWxsXCI6bz1kPj03fXJldHVybiBvfSxuLm1vc3RSZWFkYWJsZT1mdW5jdGlvbihlLHQsYSl7dmFyIHIsbyxpLHMsYz1udWxsLGQ9MDtvPShhPWF8fHt9KS5pbmNsdWRlRmFsbGJhY2tDb2xvcnMsaT1hLmxldmVsLHM9YS5zaXplO2Zvcih2YXIgbD0wO2w8dC5sZW5ndGg7bCsrKShyPW4ucmVhZGFiaWxpdHkoZSx0W2xdKSk+ZCYmKGQ9cixjPW4odFtsXSkpO3JldHVybiBuLmlzUmVhZGFibGUoZSxjLHtsZXZlbDppLHNpemU6c30pfHwhbz9jOihhLmluY2x1ZGVGYWxsYmFja0NvbG9ycz0hMSxuLm1vc3RSZWFkYWJsZShlLFtcIiNmZmZcIixcIiMwMDBcIl0sYSkpfTt2YXIgdj1uLm5hbWVzPXthbGljZWJsdWU6XCJmMGY4ZmZcIixhbnRpcXVld2hpdGU6XCJmYWViZDdcIixhcXVhOlwiMGZmXCIsYXF1YW1hcmluZTpcIjdmZmZkNFwiLGF6dXJlOlwiZjBmZmZmXCIsYmVpZ2U6XCJmNWY1ZGNcIixiaXNxdWU6XCJmZmU0YzRcIixibGFjazpcIjAwMFwiLGJsYW5jaGVkYWxtb25kOlwiZmZlYmNkXCIsYmx1ZTpcIjAwZlwiLGJsdWV2aW9sZXQ6XCI4YTJiZTJcIixicm93bjpcImE1MmEyYVwiLGJ1cmx5d29vZDpcImRlYjg4N1wiLGJ1cm50c2llbm5hOlwiZWE3ZTVkXCIsY2FkZXRibHVlOlwiNWY5ZWEwXCIsY2hhcnRyZXVzZTpcIjdmZmYwMFwiLGNob2NvbGF0ZTpcImQyNjkxZVwiLGNvcmFsOlwiZmY3ZjUwXCIsY29ybmZsb3dlcmJsdWU6XCI2NDk1ZWRcIixjb3Juc2lsazpcImZmZjhkY1wiLGNyaW1zb246XCJkYzE0M2NcIixjeWFuOlwiMGZmXCIsZGFya2JsdWU6XCIwMDAwOGJcIixkYXJrY3lhbjpcIjAwOGI4YlwiLGRhcmtnb2xkZW5yb2Q6XCJiODg2MGJcIixkYXJrZ3JheTpcImE5YTlhOVwiLGRhcmtncmVlbjpcIjAwNjQwMFwiLGRhcmtncmV5OlwiYTlhOWE5XCIsZGFya2toYWtpOlwiYmRiNzZiXCIsZGFya21hZ2VudGE6XCI4YjAwOGJcIixkYXJrb2xpdmVncmVlbjpcIjU1NmIyZlwiLGRhcmtvcmFuZ2U6XCJmZjhjMDBcIixkYXJrb3JjaGlkOlwiOTkzMmNjXCIsZGFya3JlZDpcIjhiMDAwMFwiLGRhcmtzYWxtb246XCJlOTk2N2FcIixkYXJrc2VhZ3JlZW46XCI4ZmJjOGZcIixkYXJrc2xhdGVibHVlOlwiNDgzZDhiXCIsZGFya3NsYXRlZ3JheTpcIjJmNGY0ZlwiLGRhcmtzbGF0ZWdyZXk6XCIyZjRmNGZcIixkYXJrdHVycXVvaXNlOlwiMDBjZWQxXCIsZGFya3Zpb2xldDpcIjk0MDBkM1wiLGRlZXBwaW5rOlwiZmYxNDkzXCIsZGVlcHNreWJsdWU6XCIwMGJmZmZcIixkaW1ncmF5OlwiNjk2OTY5XCIsZGltZ3JleTpcIjY5Njk2OVwiLGRvZGdlcmJsdWU6XCIxZTkwZmZcIixmaXJlYnJpY2s6XCJiMjIyMjJcIixmbG9yYWx3aGl0ZTpcImZmZmFmMFwiLGZvcmVzdGdyZWVuOlwiMjI4YjIyXCIsZnVjaHNpYTpcImYwZlwiLGdhaW5zYm9ybzpcImRjZGNkY1wiLGdob3N0d2hpdGU6XCJmOGY4ZmZcIixnb2xkOlwiZmZkNzAwXCIsZ29sZGVucm9kOlwiZGFhNTIwXCIsZ3JheTpcIjgwODA4MFwiLGdyZWVuOlwiMDA4MDAwXCIsZ3JlZW55ZWxsb3c6XCJhZGZmMmZcIixncmV5OlwiODA4MDgwXCIsaG9uZXlkZXc6XCJmMGZmZjBcIixob3RwaW5rOlwiZmY2OWI0XCIsaW5kaWFucmVkOlwiY2Q1YzVjXCIsaW5kaWdvOlwiNGIwMDgyXCIsaXZvcnk6XCJmZmZmZjBcIixraGFraTpcImYwZTY4Y1wiLGxhdmVuZGVyOlwiZTZlNmZhXCIsbGF2ZW5kZXJibHVzaDpcImZmZjBmNVwiLGxhd25ncmVlbjpcIjdjZmMwMFwiLGxlbW9uY2hpZmZvbjpcImZmZmFjZFwiLGxpZ2h0Ymx1ZTpcImFkZDhlNlwiLGxpZ2h0Y29yYWw6XCJmMDgwODBcIixsaWdodGN5YW46XCJlMGZmZmZcIixsaWdodGdvbGRlbnJvZHllbGxvdzpcImZhZmFkMlwiLGxpZ2h0Z3JheTpcImQzZDNkM1wiLGxpZ2h0Z3JlZW46XCI5MGVlOTBcIixsaWdodGdyZXk6XCJkM2QzZDNcIixsaWdodHBpbms6XCJmZmI2YzFcIixsaWdodHNhbG1vbjpcImZmYTA3YVwiLGxpZ2h0c2VhZ3JlZW46XCIyMGIyYWFcIixsaWdodHNreWJsdWU6XCI4N2NlZmFcIixsaWdodHNsYXRlZ3JheTpcIjc4OVwiLGxpZ2h0c2xhdGVncmV5OlwiNzg5XCIsbGlnaHRzdGVlbGJsdWU6XCJiMGM0ZGVcIixsaWdodHllbGxvdzpcImZmZmZlMFwiLGxpbWU6XCIwZjBcIixsaW1lZ3JlZW46XCIzMmNkMzJcIixsaW5lbjpcImZhZjBlNlwiLG1hZ2VudGE6XCJmMGZcIixtYXJvb246XCI4MDAwMDBcIixtZWRpdW1hcXVhbWFyaW5lOlwiNjZjZGFhXCIsbWVkaXVtYmx1ZTpcIjAwMDBjZFwiLG1lZGl1bW9yY2hpZDpcImJhNTVkM1wiLG1lZGl1bXB1cnBsZTpcIjkzNzBkYlwiLG1lZGl1bXNlYWdyZWVuOlwiM2NiMzcxXCIsbWVkaXVtc2xhdGVibHVlOlwiN2I2OGVlXCIsbWVkaXVtc3ByaW5nZ3JlZW46XCIwMGZhOWFcIixtZWRpdW10dXJxdW9pc2U6XCI0OGQxY2NcIixtZWRpdW12aW9sZXRyZWQ6XCJjNzE1ODVcIixtaWRuaWdodGJsdWU6XCIxOTE5NzBcIixtaW50Y3JlYW06XCJmNWZmZmFcIixtaXN0eXJvc2U6XCJmZmU0ZTFcIixtb2NjYXNpbjpcImZmZTRiNVwiLG5hdmFqb3doaXRlOlwiZmZkZWFkXCIsbmF2eTpcIjAwMDA4MFwiLG9sZGxhY2U6XCJmZGY1ZTZcIixvbGl2ZTpcIjgwODAwMFwiLG9saXZlZHJhYjpcIjZiOGUyM1wiLG9yYW5nZTpcImZmYTUwMFwiLG9yYW5nZXJlZDpcImZmNDUwMFwiLG9yY2hpZDpcImRhNzBkNlwiLHBhbGVnb2xkZW5yb2Q6XCJlZWU4YWFcIixwYWxlZ3JlZW46XCI5OGZiOThcIixwYWxldHVycXVvaXNlOlwiYWZlZWVlXCIscGFsZXZpb2xldHJlZDpcImRiNzA5M1wiLHBhcGF5YXdoaXA6XCJmZmVmZDVcIixwZWFjaHB1ZmY6XCJmZmRhYjlcIixwZXJ1OlwiY2Q4NTNmXCIscGluazpcImZmYzBjYlwiLHBsdW06XCJkZGEwZGRcIixwb3dkZXJibHVlOlwiYjBlMGU2XCIscHVycGxlOlwiODAwMDgwXCIscmViZWNjYXB1cnBsZTpcIjY2MzM5OVwiLHJlZDpcImYwMFwiLHJvc3licm93bjpcImJjOGY4ZlwiLHJveWFsYmx1ZTpcIjQxNjllMVwiLHNhZGRsZWJyb3duOlwiOGI0NTEzXCIsc2FsbW9uOlwiZmE4MDcyXCIsc2FuZHlicm93bjpcImY0YTQ2MFwiLHNlYWdyZWVuOlwiMmU4YjU3XCIsc2Vhc2hlbGw6XCJmZmY1ZWVcIixzaWVubmE6XCJhMDUyMmRcIixzaWx2ZXI6XCJjMGMwYzBcIixza3libHVlOlwiODdjZWViXCIsc2xhdGVibHVlOlwiNmE1YWNkXCIsc2xhdGVncmF5OlwiNzA4MDkwXCIsc2xhdGVncmV5OlwiNzA4MDkwXCIsc25vdzpcImZmZmFmYVwiLHNwcmluZ2dyZWVuOlwiMDBmZjdmXCIsc3RlZWxibHVlOlwiNDY4MmI0XCIsdGFuOlwiZDJiNDhjXCIsdGVhbDpcIjAwODA4MFwiLHRoaXN0bGU6XCJkOGJmZDhcIix0b21hdG86XCJmZjYzNDdcIix0dXJxdW9pc2U6XCI0MGUwZDBcIix2aW9sZXQ6XCJlZTgyZWVcIix3aGVhdDpcImY1ZGViM1wiLHdoaXRlOlwiZmZmXCIsd2hpdGVzbW9rZTpcImY1ZjVmNVwiLHllbGxvdzpcImZmMFwiLHllbGxvd2dyZWVuOlwiOWFjZDMyXCJ9LGI9bi5oZXhOYW1lcz1mdW5jdGlvbihlKXt2YXIgdD17fTtmb3IodmFyIGEgaW4gZSllLmhhc093blByb3BlcnR5KGEpJiYodFtlW2FdXT1hKTtyZXR1cm4gdH0odik7ZnVuY3Rpb24gUyhlKXtyZXR1cm4gZT1wYXJzZUZsb2F0KGUpLChpc05hTihlKXx8ZTwwfHxlPjEpJiYoZT0xKSxlfWZ1bmN0aW9uIFAoZSx0KXsoZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJi0xIT1lLmluZGV4T2YoXCIuXCIpJiYxPT09cGFyc2VGbG9hdChlKX0pKGUpJiYoZT1cIjEwMCVcIik7dmFyIGE9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJi0xIT1lLmluZGV4T2YoXCIlXCIpfShlKTtyZXR1cm4gZT1NYXRoLm1pbih0LE1hdGgubWF4KDAscGFyc2VGbG9hdChlKSkpLGEmJihlPXBhcnNlSW50KGUqdCwxMCkvMTAwKSxNYXRoLmFicyhlLXQpPDFlLTY/MTplJXQvcGFyc2VGbG9hdCh0KX1mdW5jdGlvbiBDKGUpe3JldHVybiBNYXRoLm1pbigxLE1hdGgubWF4KDAsZSkpfWZ1bmN0aW9uIEEoZSl7cmV0dXJuIHBhcnNlSW50KGUsMTYpfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIDE9PWUubGVuZ3RoP1wiMFwiK2U6XCJcIitlfWZ1bmN0aW9uIE0oZSl7cmV0dXJuIGU8PTEmJihlPTEwMCplK1wiJVwiKSxlfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIE1hdGgucm91bmQoMjU1KnBhcnNlRmxvYXQoZSkpLnRvU3RyaW5nKDE2KX1mdW5jdGlvbiBGKGUpe3JldHVybiBBKGUpLzI1NX12YXIgVyxULEQsTz0oVD1cIltcXFxcc3xcXFxcKF0rKFwiKyhXPVwiKD86Wy1cXFxcK10/XFxcXGQqXFxcXC5cXFxcZCslPyl8KD86Wy1cXFxcK10/XFxcXGQrJT8pXCIpK1wiKVssfFxcXFxzXSsoXCIrVytcIilbLHxcXFxcc10rKFwiK1crXCIpXFxcXHMqXFxcXCk/XCIsRD1cIltcXFxcc3xcXFxcKF0rKFwiK1crXCIpWyx8XFxcXHNdKyhcIitXK1wiKVssfFxcXFxzXSsoXCIrVytcIilbLHxcXFxcc10rKFwiK1crXCIpXFxcXHMqXFxcXCk/XCIse0NTU19VTklUOm5ldyBSZWdFeHAoVykscmdiOm5ldyBSZWdFeHAoXCJyZ2JcIitUKSxyZ2JhOm5ldyBSZWdFeHAoXCJyZ2JhXCIrRCksaHNsOm5ldyBSZWdFeHAoXCJoc2xcIitUKSxoc2xhOm5ldyBSZWdFeHAoXCJoc2xhXCIrRCksaHN2Om5ldyBSZWdFeHAoXCJoc3ZcIitUKSxoc3ZhOm5ldyBSZWdFeHAoXCJoc3ZhXCIrRCksaGV4MzovXiM/KFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pJC8saGV4NjovXiM/KFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pJC8saGV4NDovXiM/KFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KSQvLGhleDg6L14jPyhbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkkL30pO2Z1bmN0aW9uIEUoZSl7cmV0dXJuISFPLkNTU19VTklULmV4ZWMoZSl9cmV0dXJuIG59KCl9fSxuPXt9O2Z1bmN0aW9uIHIoZSl7dmFyIHQ9bltlXTtpZih2b2lkIDAhPT10KXJldHVybiB0LmV4cG9ydHM7dmFyIG89bltlXT17ZXhwb3J0czp7fX07cmV0dXJuIGFbZV0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsciksby5leHBvcnRzfXZhciBvPXt9OygoKT0+e3ZhciBlPW87T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5jcmVhdGVUaGVtZT1lLlBhbGV0dGU9ZS5Db2xvcj12b2lkIDA7dmFyIHQ9cigyMzE3KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIkNvbG9yXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuQ29sb3J9fSk7dmFyIGE9cig1OTM5KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlBhbGV0dGVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5QYWxldHRlfX0pO3ZhciBuPXIoNjg5Myk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJjcmVhdGVUaGVtZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuLmNyZWF0ZVRoZW1lfX0pfSkoKTt2YXIgaT10O2Zvcih2YXIgcyBpbiBvKWlbc109b1tzXTtvLl9fZXNNb2R1bGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSw4Nzc6KCk9Pnt9LDY3OigpPT57fSwyNTQ6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtOdDooKT0+VWUsQWc6KCk9PkdlfSk7dmFyIG49e307YS5yKG4pLGEuZChuLHtjcmVhdGVOYW1lc3BhY2VkTG9jYWxTdG9yYWdlOigpPT54LGdldEl0ZW06KCk9PkYscmVtb3ZlSXRlbTooKT0+VyxzZXRJdGVtOigpPT5JfSk7dmFyIHI9YSg2NzUpLG89YSg3MjMpLGk9YSgxODEpO2FzeW5jIGZ1bmN0aW9uIHMoKXtjb25zdCBlPVwiZ2V0TWFuaWZlc3RPdmVycmlkZXNcIix7bWFuaWZlc3Q6dCxpbml0aWFsT3B0aW9uczphfT1hd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRJbmZvKCk7cmV0dXJuIHQ/LnBsYXRmb3JtLndvcmtzcGFjZXx8dD8ucGxhdGZvcm0uaG9tZXx8YT8ud29ya3NwYWNlfHxhPy5ob21lfHxjb25zb2xlLndhcm4oYCR7ZX06IE1pc3NpbmcgSG9tZSBkZXZlbG9wbWVudCBtYW5pZmVzdCBvdmVycmlkZXMsIHVzaW5nIERlc2t0b3AgT3duZXIgU2V0dGluZ3MuYCksdD8ucGxhdGZvcm0ud29ya3NwYWNlPyhKU09OLnN0cmluZ2lmeSh0Py5wbGF0Zm9ybS53b3Jrc3BhY2UpLHQ/LnBsYXRmb3JtLndvcmtzcGFjZSk6dD8ucGxhdGZvcm0uaG9tZT8oSlNPTi5zdHJpbmdpZnkodD8ucGxhdGZvcm0uaG9tZSksdD8ucGxhdGZvcm0uaG9tZSk6YT8ud29ya3NwYWNlPyhKU09OLnN0cmluZ2lmeShhPy53b3Jrc3BhY2UpLGE/LndvcmtzcGFjZSk6YT8uaG9tZT8oSlNPTi5zdHJpbmdpZnkoYT8uaG9tZSksYT8uaG9tZSk6e319Y29uc3QgYz1lPT5maW4uU3lzdGVtLmdldFN5c3RlbUFwcENvbmZpZyhlKTthc3luYyBmdW5jdGlvbiBkKCl7Y29uc3QgZT1cImdldERPU092ZXJyaWRlc1wiO2lmKCFvLmNJKXJldHVybiBjb25zb2xlLndhcm4oYCR7ZX06IHRoZSBmaW4gQVBJIHdhcyBub3QgYXZhaWxhYmxlLCByZXR1cm5pbmcgbm8gcmVzdWx0YCkse307dHJ5e2xldCB0PWF3YWl0IGMoXCJ3b3Jrc3BhY2VcIikuY2F0Y2goKHQ9Pntjb25zb2xlLndhcm4oYCR7ZX06IGN1c3RvbUNvbmZpZyBlbnRyeSBmb3IgU3lzdGVtQXBwIHdvcmtzcGFjZSBub3QgYXZhaWxhYmxlIGluIERlc2t0b3AgT3duZXIgU2V0dGluZ3MuICR7dD8ubWVzc2FnZX1gKX0pKTtyZXR1cm4gdHx8KHQ9YXdhaXQgYyhcImhvbWVcIikpLEpTT04uc3RyaW5naWZ5KHQpLHR9Y2F0Y2godCl7aWYoIW8uSGQpcmV0dXJue307aWYoISh0IGluc3RhbmNlb2YgRXJyb3IpKXRocm93IHQ7Y29uc29sZS53YXJuKGAke2V9OiBNaXNzaW5nIFdvcmtzcGFjZSBEZXNrdG9wIE93bmVyIFNldHRpbmdzIGNvbmZpZ3VyYXRpb24sIHVzaW5nIGRlZmF1bHRzLiAke3Q/Lm1lc3NhZ2V9YCl9cmV0dXJue319bGV0IGwsdTtjb25zdCBwPWU9PmUucmVwbGFjZSgvXFwvJC8sXCJcIik7YXN5bmMgZnVuY3Rpb24gaCgpe2NvbnN0IGU9KGF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7aWYobClyZXR1cm4gbDtjb25zdCBlPVwiZ2V0T3ZlcnJpZGVzXCI7aWYoIW8uY0kpcmV0dXJuIG8uWVkmJmNvbnNvbGUud2FybihgJHtlfTogVGhlIEZpbiBBUEkgd2FzIG5vdCBhdmFpbGFibGUuIFJldHVybmluZyBhbiBlbXB0eSByZXN1bHQuYCkse307Y29uc3RbdCxhXT1hd2FpdCBQcm9taXNlLmFsbChbZCgpLHMoKV0pO3JldHVybiBsPXsuLi5hLC4uLnQsZGlzYWJsZVJ1bnRpbWVWYWxpZGF0aW9uOmEuZGlzYWJsZVJ1bnRpbWVWYWxpZGF0aW9ufHx0LmRpc2FibGVSdW50aW1lVmFsaWRhdGlvbn0sbH0oKSkuYnJvd3NlckJhc2VVcmw7aWYoZSl0cnl7Y29uc3QgdD1uZXcgVVJMKGUpO2lmKHQucGF0aG5hbWUuZW5kc1dpdGgoXCIvXCIpKXQucGF0aG5hbWU9cCh0LnBhdGhuYW1lKTtlbHNle2lmKFwiL3dvcmtzcGFjZVwiPT09dC5wYXRobmFtZSlyZXR1cm4gdC5wYXRobmFtZSs9YC8ke28uZXR9YCx0LnRvU3RyaW5nKCk7Y29uc29sZS53YXJuKGBAb3BlbmZpbi93b3Jrc3BhY2UtcGxhdGZvcm06IGJyb3dzZXJPdmVycmlkZUJhc2VVcmwgbXVzdCBiZSBhIHZhbGlkIHVybCwgd2l0aCBwYXRoOiAvd29ya3NwYWNlLiBFeHBlY3RlZCA8cHJvdG9jb2w+Oi8vPG9wdGlvbmFsIHN1YmRvbWFpbj4uPGRvbWFpbj4vd29ya3NwYWNlIGJ1dCBnb3QgJHtlfWApfX1jYXRjaCh0KXtjb25zb2xlLndhcm4oYEBvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybTogYnJvd3Nlck92ZXJyaWRlQmFzZVVybCBtdXN0IGJlIGEgdmFsaWQgdXJsLiBFeHBlY3RlZCA8cHJvdG9jb2w+Oi8vPG9wdGlvbmFsIHN1YmRvbWFpbj4uPGRvbWFpbj4vd29ya3NwYWNlIGJ1dCBnb3QgJHtlfWApfXJldHVybiB1Pz9vLmJEfWFzeW5jIGZ1bmN0aW9uIGYoZT0hMSl7Y29uc3QgdD1hd2FpdCBoKCkraS5BeS5FbnRlcnByaXNlQnJvd3NlcjtyZXR1cm4gZT90OnAodCl9dmFyIGc9YSg3MCk7Y29uc3QgbT0oZSx0KT0+e2NvbnN0IGE9ZTtyZXR1cm4gYS53b3Jrc3BhY2VQbGF0Zm9ybXx8KGEud29ya3NwYWNlUGxhdGZvcm09e30pLGEud29ya3NwYWNlUGxhdGZvcm0uX2ludGVybmFsRGVmZXJTaG93T3B0aW9ucz17c2V0QXNGb3JlZ3JvdW5kOiEhdCxkZWZlclNob3dFbmFibGVkOiEwLGF1dG9TaG93OmEud29ya3NwYWNlUGxhdGZvcm0/Ll9pbnRlcm5hbEF1dG9TaG93fHxhLndvcmtzcGFjZVBsYXRmb3JtPy5faW50ZXJuYWxEZWZlclNob3dPcHRpb25zPy5hdXRvU2hvd3x8dm9pZCAwPT09YS5hdXRvU2hvd3x8YS5hdXRvU2hvd30sYS5hdXRvU2hvdz0hMSxhfTtjb25zdCB3PShlLHQ9MCk9PntsZXQgYSxuLHI9ITE7Y29uc3Qgbz1hc3luYyBuPT57Y29uc3QgaT1hd2FpdCBlKC4uLm4pO2lmKHIpe2F3YWl0IG5ldyBQcm9taXNlKChlPT5zZXRUaW1lb3V0KGUsdCkpKTtjb25zdCBlPWE7cmV0dXJuIGE9dm9pZCAwLHI9ITEsbyhlKX1yZXR1cm4gaX07cmV0dXJuKC4uLmUpPT4obj8ocj0hMCxhPWUpOm49byhlKS5jYXRjaCgoZT0+e3Rocm93IGNvbnNvbGUuZXJyb3IoXCJtYWtlRGVib3VuY2VkRnVuY1wiLGUpLGV9KSkuZmluYWxseSgoKCk9PntuPXZvaWQgMH0pKSxuKX07dmFyIHk7IWZ1bmN0aW9uKGUpe2UuVG9wPVwidG9wXCIsZS5CZWxvdz1cImJlbG93XCJ9KHl8fCh5PXt9KSk7Y29uc3Qgaz1hc3luYyBlPT57dHJ5e3JldHVybiEhZSYmXCJtYXhpbWl6ZWRcIj09PWF3YWl0IGUuZ2V0U3RhdGUoKX1jYXRjaChlKXtyZXR1cm4gY29uc29sZS53YXJuKFwicGFyZW50V2luZG93TWF4aW1pemVkIC0gRmFpbGVkIHRvIGdldCBwYXJlbnQgd2luZG93IHN0YXRlXCIsZSksITF9fTthc3luYyBmdW5jdGlvbiB2KGUsdCxhLG4scixvKXtjb25zdCBpPSEhZSYmKDAsZy5JcSkoZSkscz1hd2FpdChhc3luYyhlLHQpPT57dHJ5e3JldHVybiBlP2F3YWl0IGUuZ2V0Qm91bmRzKCk6dH1jYXRjaChlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiZ2V0UGFyZW50V2luZG93Qm91bmRzIC0gRmFpbGVkIHRvIGdldCBwYXJlbnQgd2luZG93IGJvdW5kc1wiLGUpLHR9fSkoaSxvKTtpZihuPT09eS5CZWxvdyl7aWYoIWl8fGF3YWl0IGsoaSkpe2NvbnN0IGU9aT8oYXdhaXQoMCxnLnVyKShzKSkuYXZhaWxhYmxlUmVjdDooYXdhaXQgZmluLlN5c3RlbS5nZXRNb25pdG9ySW5mbygpKS5wcmltYXJ5TW9uaXRvci5hdmFpbGFibGVSZWN0O3JldHVybntsZWZ0OigwLGcuVjEpKGUpLmxlZnQtdC8yLHRvcDpyP2UuYm90dG9tLTEyODplLmJvdHRvbSsxMix3aWR0aDp0LGhlaWdodDphfX1yZXR1cm57bGVmdDooMCxnLlYxKShzKS5sZWZ0LXQvMix0b3A6cj9zLmJvdHRvbS0xMjg6cy5ib3R0b20rMTIsd2lkdGg6dCxoZWlnaHQ6YX19aWYoIWl8fGF3YWl0IGsoaSkpe2NvbnN0IGU9aT8oYXdhaXQoMCxnLnVyKShzKSkuYXZhaWxhYmxlUmVjdDooYXdhaXQgZmluLlN5c3RlbS5nZXRNb25pdG9ySW5mbygpKS5wcmltYXJ5TW9uaXRvci5hdmFpbGFibGVSZWN0O3JldHVybntsZWZ0OigwLGcuVjEpKGUpLmxlZnQtdC8yLHRvcDplLnRvcCsyMCx3aWR0aDp0LGhlaWdodDphfX1yZXR1cm57bGVmdDooMCxnLlYxKShzKS5sZWZ0LXQvMix0b3A6cy50b3ArMjAsd2lkdGg6dCxoZWlnaHQ6YX19dygoYXN5bmMgZnVuY3Rpb24oZSx0LGEsbixyKXtjb25zdCBvPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksaT1hd2FpdCB2KGUsby53aWR0aCxvLmhlaWdodCxhLG4scik7aWYoMD09PWkud2lkdGh8fDA9PT1pLmhlaWdodClyZXR1cm47Y29uc3Qgcz0oMCxnLlR2KSgpO2F3YWl0IHMuc2V0Qm91bmRzKGkpLGF3YWl0IHMuc2hvdygpO2NvbnN0IGM9c2V0VGltZW91dCgoKCk9PnMuY2xvc2UoKSksbj81ZTM6M2UzKSxkPSgpPT57Y2xlYXJUaW1lb3V0KGMpLHMuY2xvc2UoKX07aWYoZSl7Y29uc3QgdD0oMCxnLklxKShlKTt0Lm9uKFwiYm91bmRzLWNoYW5naW5nXCIsKCgpPT5kKCkpKSx0Lm9uKFwiYmx1cnJlZFwiLCgoKT0+ZCgpKSksdC5vbihcIm1heGltaXplZFwiLCgoKT0+ZCgpKSksdC5vbihcIm1pbmltaXplZFwiLCgoKT0+ZCgpKSksdC5vbihcInJlc3RvcmVkXCIsKCgpPT5kKCkpKX19KSwxMCk7Y29uc3QgYj1hc3luYyBlPT57Y29uc3QgdD1lJiZhd2FpdCgwLGcuSXEpKGUpLmdldEJvdW5kcygpLGE9ZT9hd2FpdCgwLGcudXIpKHQpOihhd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCkpLnByaW1hcnlNb25pdG9yO3JldHVybigwLGcuVkUpKGEuYXZhaWxhYmxlUmVjdCl9O3ZhciBTPWEoOTU3KTtmdW5jdGlvbiBQKCl7bGV0IGUsdDtyZXR1cm57cHJvbWlzZTpuZXcgUHJvbWlzZSgoKGEsbik9PntlPWEsdD1ufSkpLHJlc29sdmU6ZSxyZWplY3Q6dH19Y29uc3QgQz1cImRvY2szXCIsQT1yZXF1aXJlKFwiZGV4aWVcIikseD1lPT4oe3NldEl0ZW06KHQsYSk9Pntsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHtlfS0ke3R9YCxhKX0sZ2V0SXRlbTp0PT5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtlfS0ke3R9YCkscmVtb3ZlSXRlbTp0PT5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgJHtlfS0ke3R9YCl9KSxNPXgoby4kaCksST1NLnNldEl0ZW0sRj1NLmdldEl0ZW0sVz1NLnJlbW92ZUl0ZW07dmFyIFQ7IWZ1bmN0aW9uKGUpe2UuQ3VycmVudFdvcmtzcGFjZUlkPVwiY3VycmVudFdvcmtzcGFjZUlkXCIsZS5MYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJsYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLk1hY2hpbmVOYW1lPVwibWFjaGluZU5hbWVcIixlLk5ld1RhYlBhZ2VMYXlvdXQ9XCJOZXdUYWJQYWdlTGF5b3V0XCIsZS5OZXdUYWJQYWdlU29ydD1cIk5ld1RhYlBhZ2VTb3J0XCIsZS5Eb2NrUG9zaXRpb249XCJEb2NrUG9zaXRpb25cIixlLlNlbGVjdGVkQ29sb3JTY2hlbWU9XCJTZWxlY3RlZENvbG9yU2NoZW1lXCIsZS5UaGVtZVBhbGV0dGVTaGVldD1cIlRoZW1lUGFsZXR0ZVNoZWV0XCIsZS5IYXNNb3ZlZFN0b3JlPVwiSGFzTW92ZWRTdG9yZVwiLGUuUGFnZURyYWdTdGF0ZT1cIkJyb3dzZXJQYWdlRHJhZ1N0YXRlXCJ9KFR8fChUPXt9KSk7Y29uc3QgRD1ULE89ZT0+ZStcIi1cIitmaW4ubWUudXVpZCxFPShlLHQpPT57Y29uc3QgYT1vLkFUJiZvLmNJJiZuZXcgQS5EZXhpZShlKTtyZXR1cm4gYSYmYS52ZXJzaW9uKC4xKS5zdG9yZXMoe1t0XTpcIlwifSksYX0sXz0oZSx0KT0+e2NvbnN0IGE9RShPKGUpLHQpLG49RShlLHQpO2lmKCFhfHwhbil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gbWlncmF0ZSBzdG9yZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4oYXN5bmMoZSx0LGEpPT57Y29uc3Qgbj1GKEQuSGFzTW92ZWRTdG9yZSkscj1uP0pTT04ucGFyc2Uobik6e307aWYociYmclthXSlyZXR1cm47clthXT0hMCxJKEQuSGFzTW92ZWRTdG9yZSxKU09OLnN0cmluZ2lmeShyKSk7Y29uc3Qgbz1hd2FpdCBlW2FdLnRvQXJyYXkoKTthd2FpdCB0W2FdLmJ1bGtQdXQobyl9KShuLGEsZSksYX0sQj1cImRvY2szLXByb3ZpZGVyLWNvbmZpZ1wiLFI9by5BVCYmby5jSSYmbmV3IEEuRGV4aWUoTyhcImRvY2szLXByb3ZpZGVyLWNvbmZpZ1wiKSk7UiYmUi52ZXJzaW9uKC4xKS5zdG9yZXMoe1tCXTpcIlwifSk7dmFyICQsTCxOLEcsVT1mdW5jdGlvbihlLHQsYSxuLHIpe2lmKFwibVwiPT09bil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO2lmKFwiYVwiPT09biYmIXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P2UhPT10fHwhcjohdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO3JldHVyblwiYVwiPT09bj9yLmNhbGwoZSxhKTpyP3IudmFsdWU9YTp0LnNldChlLGEpLGF9LFY9ZnVuY3Rpb24oZSx0LGEsbil7aWYoXCJhXCI9PT1hJiYhbil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZSE9PXR8fCFuOiF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO3JldHVyblwibVwiPT09YT9uOlwiYVwiPT09YT9uLmNhbGwoZSk6bj9uLnZhbHVlOnQuZ2V0KGUpfTtjbGFzcyBIe3N0YXRpYyBnZXRPdmVycmlkZUNvbnN0cnVjdG9yKC4uLmUpe3JldHVybiBjbGFzcyBleHRlbmRzIEh7Y29uc3RydWN0b3IoKXtzdXBlciguLi5lKX19fWNvbnN0cnVjdG9yKGUsdCl7aWYoJC5zZXQodGhpcyx2b2lkIDApLEwuc2V0KHRoaXMsdm9pZCAwKSxOLnNldCh0aGlzLG51bGwpLEcuc2V0KHRoaXMsUCgpKSxILmluc3RhbmNlKXRocm93IG5ldyBFcnJvcihcIkRvY2szUHJvdmlkZXIgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC5cIik7SC5pbnN0YW5jZT10aGlzLFUodGhpcywkLGUsXCJmXCIpLFUodGhpcyxMLHQsXCJmXCIpLHRoaXMucmVnaXN0ZXJDaGFubmVsQWN0aW9ucygpfWFzeW5jIGxhdW5jaEVudHJ5KGUpe31nZXQgcmVhZHkoKXtyZXR1cm4gVih0aGlzLEcsXCJmXCIpLnByb21pc2V9YXN5bmMgYm9va21hcmtDb250ZW50TWVudUVudHJ5KGUpe31nZXQgY29uZmlnKCl7cmV0dXJuIFYodGhpcywkLFwiZlwiKX1zZXQgY29uZmlnKGUpe1UodGhpcywkLGUsXCJmXCIpfWFzeW5jIHVwZGF0ZUNvbmZpZyhlKXthd2FpdCB0aGlzLmhhbmRsZUNvbmZpZ0NoYW5nZShlKX1hc3luYyBzaHV0ZG93bigpe2F3YWl0IFByb21pc2UuYWxsKFtWKHRoaXMsTCxcImZcIikuZGVzdHJveSgpLHRoaXMuZ2V0V2luZG93U3luYygpLmNsb3NlKCEwKV0pLEguaW5zdGFuY2U9bnVsbH1hc3luYyBzYXZlQ29uZmlnKHtjb25maWc6ZX0pe1UodGhpcywkLGUsXCJmXCIpLGF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUpe2lmKCFSKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBzYXZlIERvY2sgcHJvdmlkZXIgY29uZmlnIC0gSW5kZXhlZERiIG5vdCBzdXBwb3J0ZWRcIik7YXdhaXQgUltCXS5wdXQoZSxcImxhdGVzdFwiKX0oZSl9YXN5bmMgaGFuZGxlQ29uZmlnQ2hhbmdlKGUpe1YodGhpcyxOLFwiZlwiKSYmYXdhaXQgVih0aGlzLEwsXCJmXCIpLmRpc3BhdGNoKFYodGhpcyxOLFwiZlwiKSxcImhhbmRsZS1kb2NrLWNvbmZpZy11cGRhdGVkXCIsZSl9YXN5bmMgbG9hZENvbmZpZygpe2NvbnN0IGU9YXdhaXQgYXN5bmMgZnVuY3Rpb24oKXtpZighUil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IERvY2sgcHJvdmlkZXIgY29uZmlnIC0gSW5kZXhlZERCIG5vdCBzdXBwb3J0ZWRcIik7dHJ5e3JldHVybiBhd2FpdCBSW0JdLmdldChcImxhdGVzdFwiKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gcmV0cmlldmUgRG9jayBwcm92aWRlciBjb25maWcgZnJvbSBJbmRleGVkREJcIixlKX19KCk7cmV0dXJuIGUmJlUodGhpcywkLGUsXCJmXCIpLFYodGhpcywkLFwiZlwiKX1nZXRXaW5kb3dTeW5jKCl7cmV0dXJuIGZpbi5XaW5kb3cud3JhcFN5bmMoe3V1aWQ6ZmluLm1lLmlkZW50aXR5LnV1aWQsbmFtZTpDfSl9cmVnaXN0ZXJDaGFubmVsQWN0aW9ucygpe1YodGhpcyxMLFwiZlwiKS5yZWdpc3RlcihcImxhdW5jaC1lbnRyeVwiLHRoaXMubGF1bmNoRW50cnkuYmluZCh0aGlzKSksVih0aGlzLEwsXCJmXCIpLnJlZ2lzdGVyKFwic2F2ZS1jb25maWdcIix0aGlzLnNhdmVDb25maWcuYmluZCh0aGlzKSksVih0aGlzLEwsXCJmXCIpLnJlZ2lzdGVyKFwiYm9va21hcmstY29udGVudC1tZW51LWVudHJ5XCIsdGhpcy5ib29rbWFya0NvbnRlbnRNZW51RW50cnkuYmluZCh0aGlzKSksVih0aGlzLEwsXCJmXCIpLm9uQ29ubmVjdGlvbigoZT0+e2UubmFtZT09PUMmJlUodGhpcyxOLGUsXCJmXCIpfSkpLFYodGhpcyxMLFwiZlwiKS5yZWdpc3RlcihcInJlYWR5XCIsKGFzeW5jKGUsdCk9PntpZihWKHRoaXMsTixcImZcIik/LmVuZHBvaW50SWQhPT10LmVuZHBvaW50SWQpdGhyb3cgbmV3IEVycm9yKGBEb2NrM1Byb3ZpZGVyOiAncmVhZHknIGFjdGlvbiByZWNlaXZlZCBmcm9tIHVuZXhwZWN0ZWQgY2xpZW50ICR7dC5uYW1lfSAoJHt0LnV1aWR9KWApO1YodGhpcyxHLFwiZlwiKS5yZXNvbHZlKCl9KSksVih0aGlzLEwsXCJmXCIpLm9uRGlzY29ubmVjdGlvbigoZT0+e1YodGhpcyxOLFwiZlwiKT8uZW5kcG9pbnRJZD09PWUuZW5kcG9pbnRJZCYmKFUodGhpcyxOLG51bGwsXCJmXCIpLFUodGhpcyxHLFAoKSxcImZcIikpfSkpfX0kPW5ldyBXZWFrTWFwLEw9bmV3IFdlYWtNYXAsTj1uZXcgV2Vha01hcCxHPW5ldyBXZWFrTWFwLEguaW5zdGFuY2U9bnVsbDtjb25zdCB6PWFzeW5jIGU9Pntjb25zdCB0PWU/ZmluLldpbmRvdy53cmFwU3luYyhlKTpmaW4uV2luZG93LmdldEN1cnJlbnRTeW5jKCksYT1hd2FpdCB0LmdldE9wdGlvbnMoKTtyZXR1cm4gYS53b3Jrc3BhY2VQbGF0Zm9ybT8ud2luZG93VHlwZSYmXCJlbnRlcnByaXNlXCI9PT1hLndvcmtzcGFjZVBsYXRmb3JtLndpbmRvd1R5cGV9O2xldCBxO2EoMjc3KTt2YXIgaj1hKDQzOCk7Y29uc3QgSz1yZXF1aXJlKFwibG9kYXNoLmRlYm91bmNlXCIpO3ZhciBYPWEubihLKTtmdW5jdGlvbiBRKCl7cmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKEQuTWFjaGluZU5hbWUpPz9cInVua25vd25cIn1sZXQgWTthc3luYyBmdW5jdGlvbiBaKCl7cmV0dXJuIFl8fChZPWF3YWl0IGZpbi5TeXN0ZW0uZ2V0TWFjaGluZUlkKCkpLFl9dmFyIEo9YSgzMzMpO2NvbnN0IGVlPWFzeW5jIGU9Pih7Li4uZSxsYXlvdXREZXRhaWxzOnttYWNoaW5lSWQ6YXdhaXQgWigpLG1hY2hpbmVOYW1lOlEoKX19KSx0ZT1hc3luYyBlPT57Y29uc3QgdD1hd2FpdChhc3luYyhlLHQpPT4oe3BhZ2VJZDooMCxKLk4pKCksdGl0bGU6ZSxsYXlvdXQ6YXdhaXQgZWUodCksaXNSZWFkT25seTohMX0pKShlLnRpdGxlLHplKGUubGF5b3V0KSk7cmV0dXJuIGUucGFuZWxzJiYodC5wYW5lbHM9ZS5wYW5lbHMubWFwKChlPT4oey4uLmUsdmlld09wdGlvbnM6SGUoZS52aWV3T3B0aW9ucyl9KSkpKSx7Li4uZSwuLi50fX07dmFyIGFlPWEoNzkpLG5lPWEoNzg2KTt2YXIgcmU9YSgxMDIpO2NvbnN0IG9lPShlLHQpPT50P2Ake3R9LSR7ZS51dWlkfS0ke2UubmFtZX1gOmBfX2Jyb3dzZXJfd2luZG93X18tJHtlLnV1aWR9LSR7ZS5uYW1lfWAsaWU9bmV3IE1hcCxzZT0oZSx0KT0+e2NvbnN0IGE9b2UoZSx0KTtyZXR1cm4gbj1hLGllLmhhcyhuKXx8aWUuc2V0KG4sKDAscmUuQSkobikpLGllLmdldChuKSgpO3ZhciBufTt2YXIgY2UsZGUsbGUsdWUscGUsaGU7IWZ1bmN0aW9uKGUpe2UuQ2xvc2VCcm93c2VyV2luZG93PVwiY2xvc2UtYnJvd3Nlci13aW5kb3dcIixlLlF1aXRQbGF0Zm9ybT1cInF1aXQtcGxhdGZvcm1cIixlLkNsb3NlUGFnZT1cImNsb3NlLXBhZ2VcIixlLkFkZFRvQ2hhbm5lbD1cImFkZC10by1jaGFubmVsXCIsZS5SZW1vdmVGcm9tQ2hhbm5lbD1cInJlbW92ZS1mcm9tLWNoYW5uZWxcIixlLk9wZW5TYXZlTW9kYWxJbnRlcm5hbD1cIm9wZW4tc2F2ZS1tb2RhbC1pbnRlcm5hbFwiLGUuRHVwbGljYXRlUGFnZT1cImR1cGxpY2F0ZS1wYWdlXCIsZS5TZXRTZWxlY3RlZFNjaGVtZT1cInNldC1zZWxlY3RlZC1zY2hlbWVcIixlLlNob3dCcm93c2VySW5kaWNhdG9yPVwic2hvdy1icm93c2VyLWluZGljYXRvclwiLGUuU2V0U2VsZWN0ZWRMYW5ndWFnZT1cInNldC1zZWxlY3RlZC1sYW5ndWFnZVwiLGUuUmVmcmVzaEJvb2ttYXJrc0ludGVybmFsPVwicmVmcmVzaC1ib29rbWFya3NcIixlLkdldExheW91dHNXaXRoU2VsZWN0ZWRWaWV3c0ludGVybmFsPVwiZ2V0LWxheW91dHMtd2l0aC1zZWxlY3RlZC12aWV3c1wiLGUuRm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbD1cImZvY3VzLWFuZC1leHBhbmQtc2VhcmNoXCJ9KGNlfHwoY2U9e30pKSxmdW5jdGlvbihlKXtlLkdldFBhZ2VzPVwiZ2V0LXBhZ2VzXCIsZS5HZXRBY3RpdmVQYWdlRm9yV2luZG93PVwiZ2V0LWFjdGl2ZS1wYWdlLWZvci13aW5kb3dcIixlLkF0dGFjaFBhZ2VzVG9XaW5kb3c9XCJhdHRhY2gtcGFnZXMtdG8td2luZG93XCIsZS5EZXRhY2hQYWdlc0Zyb21XaW5kb3c9XCJkZXRhY2gtcGFnZXMtZnJvbS13aW5kb3dcIixlLlNldEFjdGl2ZVBhZ2VGb3JXaW5kb3c9XCJzZXQtYWN0aXZlLXBhZ2UtZm9yLXdpbmRvd1wiLGUuUmVuYW1lUGFnZT1cInJlbmFtZS1wYWdlXCIsZS5SZW9yZGVyUGFnZXNGb3JXaW5kb3c9XCJyZW9yZGVyLXBhZ2VzLWZvci13aW5kb3dcIixlLlVwZGF0ZVBhZ2VGb3JXaW5kb3c9XCJ1cGRhdGUtcGFnZS1mb3Itd2luZG93XCIsZS5VcGRhdGVQYWdlc1dpbmRvd09wdGlvbnM9XCJ1cGRhdGUtcGFnZXMtd2luZG93LW9wdGlvbnNcIixlLklzRGV0YWNoaW5nUGFnZXM9XCJpcy1kZXRhY2hpbmctcGFnZXNcIixlLklzQWN0aXZlUGFnZUNoYW5naW5nPVwiaXMtYWN0aXZlLXBhZ2UtY2hhbmdpbmdcIn0oZGV8fChkZT17fSkpLGZ1bmN0aW9uKGUpe2UuR2V0QXBwcz1cImdldC1hcHBzXCIsZS5HZXRDdXJhdGVkQ29udGVudD1cImdldC1jdXJhdGVkLWNvbnRlbnRcIixlLkdldFJlY2VudGx5VmlzaXRlZD1cImdldC1yZWNlbnRseS12aXNpdGVkXCIsZS5HZXRTZWFyY2hQcm92aWRlcnM9XCJnZXQtc2VhcmNoLXByb3ZpZGVyc1wifShsZXx8KGxlPXt9KSksZnVuY3Rpb24oZSl7ZS5DcmVhdGVCb29rbWFya05vZGU9XCJjcmVhdGUtYm9va21hcmstbm9kZVwiLGUuR2V0Qm9va21hcmtOb2RlPVwiZ2V0LWJvb2ttYXJrLW5vZGVcIixlLlNlYXJjaEJvb2ttYXJrTm9kZXM9XCJzZWFyY2gtYm9va21hcmstbm9kZXNcIixlLlVwZGF0ZUJvb2ttYXJrTm9kZT1cInVwZGF0ZS1ib29rbWFyay1ub2RlXCIsZS5EZWxldGVCb29rbWFya05vZGU9XCJkZWxldGUtYm9va21hcmstbm9kZVwifSh1ZXx8KHVlPXt9KSksZnVuY3Rpb24oZSl7ZS5VcGRhdGVGYXZvcml0ZUVudHJpZXM9XCJ1cGRhdGUtZmF2b3JpdGUtZW50cmllc1wiLGUuVXBkYXRlQ29udGVudE1lbnU9XCJ1cGRhdGUtY29udGVudC1tZW51XCIsZS5OYXZpZ2F0ZUNvbnRlbnRNZW51PVwibmF2aWdhdGUtY29udGVudC1tZW51XCJ9KHBlfHwocGU9e30pKSxmdW5jdGlvbihlKXtlLlNlbmRVcGRhdGVWZXJzaW9uTW9kYWxSZXNwb25zZT1cInNlbmQtdXBkYXRlLXZlcnNpb24tbW9kYWwtcmVzcG9uc2VcIn0oaGV8fChoZT17fSkpO2NvbnN0IGZlPXsuLi5jZSwuLi5kZSwuLi5wZX0sZ2U9KDAscmUuQSkoYCR7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbiYmZmluPy5tZS5pZGVudGl0eS51dWlkfS1lbnRlcnByaXNlLWJvb2ttYXJrc2ApLG1lPWU9Pih7aWRlbnRpdHk6ZSxvcGVuZmluV2luZG93OmZpbi5XaW5kb3cud3JhcFN5bmMoZSksX2Jvb2ttYXJrczp7X2NyZWF0ZUJvb2ttYXJrTm9kZTphc3luYyBlPT4oYXN5bmMgZT0+KGF3YWl0IGdlKCkpLmRpc3BhdGNoKHVlLkNyZWF0ZUJvb2ttYXJrTm9kZSxlKSkoZSksX2dldEJvb2ttYXJrTm9kZTphc3luYyBlPT4oYXN5bmMgZT0+KGF3YWl0IGdlKCkpLmRpc3BhdGNoKHVlLkdldEJvb2ttYXJrTm9kZSxlKSkoZSksX3NlYXJjaEJvb2ttYXJrTm9kZXM6YXN5bmMgZT0+KGFzeW5jIGU9Pihhd2FpdCBnZSgpKS5kaXNwYXRjaCh1ZS5TZWFyY2hCb29rbWFya05vZGVzLGUpKShlKSxfdXBkYXRlQm9va21hcmtOb2RlOmFzeW5jIGU9Pihhc3luYyBlPT4oYXdhaXQgZ2UoKSkuZGlzcGF0Y2godWUuVXBkYXRlQm9va21hcmtOb2RlLGUpKShlKSxfZGVsZXRlQm9va21hcmtOb2RlOmFzeW5jIGU9Pihhc3luYyBlPT4oYXdhaXQgZ2UoKSkuZGlzcGF0Y2godWUuRGVsZXRlQm9va21hcmtOb2RlLGUpKShlKX0sZ2V0UGFnZXM6YXN5bmMoKT0+KGF3YWl0KDAsYWUuYlcpKGUpKS5kaXNwYXRjaChhZS5PRi5HZXRQYWdlc0ZvcldpbmRvdyxlKSxnZXRQYWdlOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLmJXKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0UGFnZUZvcldpbmRvdyx7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pLGFkZFBhZ2U6YXN5bmMgdD0+VWUoKS5Ccm93c2VyLndyYXBTeW5jKGUpLl9hZGRQYWdlKHQpLF9hZGRQYWdlOmFzeW5jKHQsYSk9Pntjb25zdCBuPWF3YWl0KDAsYWUuYlcpKGUpLHI9e2lkZW50aXR5OmUscGFnZTp0LGluc2VydGlvbkluZGV4OmE/LmluZGV4LG11bHRpSW5zdGFuY2VWaWV3QmVoYXZpb3I6YT8ubXVsdGlJbnN0YW5jZVZpZXdCZWhhdmlvcn07cmV0dXJuIG4uZGlzcGF0Y2goYWUuT0YuQWRkUGFnZSxyKX0sX2FkZFBhZ2VzOmFzeW5jKHQsYSxuKT0+e2NvbnN0IHI9YXdhaXQoMCxhZS5iVykoZSksbz10Lm1hcCgoKHtwYWdlOmUsb3B0czp0fSk9Pih7Li4uZSxtdWx0aUluc3RhbmNlVmlld0JlaGF2aW9yOnQ/Lm11bHRpSW5zdGFuY2VWaWV3QmVoYXZpb3J8fFwiZHVwbGljYXRlXCJ9KSkpLGk9e2lkZW50aXR5OmUscGFnZXM6byxpbnNlcnRpb25JbmRleDphLHJlcGxhY2VBY3RpdmVQYWdlOm59O3JldHVybiByLmRpc3BhdGNoKGFlLk9GLkF0dGFjaFBhZ2VzVG9XaW5kb3csaSl9LHJlbW92ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuYlcpKGUpKS5kaXNwYXRjaChhZS5PRi5EZXRhY2hQYWdlc0Zyb21XaW5kb3cse2lkZW50aXR5OmUscGFnZUlkczpbdF19KSxyZXBhcmVudFBhZ2U6YXN5bmMgdD0+VWUoKS5Ccm93c2VyLndyYXBTeW5jKGUpLl9yZXBhcmVudFBhZ2UodCksX3JlcGFyZW50UGFnZTphc3luYyB0PT57Y29uc3R7cGFnZUlkOmF9PXQsbj1hd2FpdCgwLGFlLmJXKShlKSxyPShhd2FpdCBuLmRpc3BhdGNoKGFlLk9GLkdldEFsbEF0dGFjaGVkUGFnZXMsdm9pZCAwKSkuZmluZCgoKHtwYWdlSWQ6ZX0pPT5lPT09YSkpO2lmKCFyKXRocm93IG5ldyBFcnJvcihgUmVwYXJlbnQgUGFnZSBFcnJvcjogVGFyZ2V0IHBhZ2Ugd2l0aCBwYWdlSWQgJHthfSBub3QgZm91bmRgKTtyLm11bHRpSW5zdGFuY2VWaWV3QmVoYXZpb3I9XCJyZXBhcmVudFwiO2NvbnN0IG89e2lkZW50aXR5OmUscGFnZXM6W3JdLGluc2VydGlvbkluZGV4OnQuaW5kZXh9O3JldHVybiBuLmRpc3BhdGNoKGFlLk9GLkF0dGFjaFBhZ2VzVG9XaW5kb3csbyl9LHNldEFjdGl2ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuYlcpKGUpKS5kaXNwYXRjaChhZS5PRi5TZXRBY3RpdmVQYWdlLHtpZGVudGl0eTplLHBhZ2VJZDp0fSksdXBkYXRlUGFnZTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCgwLGFlLmJXKShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2goYWUuT0YuVXBkYXRlUGFnZUZvcldpbmRvdyx0KX0scmVvcmRlclBhZ2VzOmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0KDAsYWUuYlcpKGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaChhZS5PRi5SZW9yZGVyUGFnZXNGb3JXaW5kb3csdCl9LF9vcGVuR2xvYmFsQ29udGV4dE1lbnU6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQoMCxhZS5iVykoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKGFlLk9GLk9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsLHQpfSxyZXBsYWNlVG9vbGJhck9wdGlvbnM6YXN5bmMgdD0+e2F3YWl0KDAsYWUuYlcpKGUpO2NvbnN0IGE9ZmluLldpbmRvdy53cmFwU3luYyhlKTthd2FpdCBhLnVwZGF0ZU9wdGlvbnMoe3dvcmtzcGFjZVBsYXRmb3JtOnt0b29sYmFyT3B0aW9uczp0fX0pfSxyZXBsYWNlV2luZG93U3RhdGVCdXR0b25PcHRpb25zOmFzeW5jIHQ9Pnthd2FpdCgwLGFlLmJXKShlKTtjb25zdCBhPWZpbi5XaW5kb3cud3JhcFN5bmMoZSk7YXdhaXQgYS51cGRhdGVPcHRpb25zKHt3b3Jrc3BhY2VQbGF0Zm9ybTp7d2luZG93U3RhdGVCdXR0b25PcHRpb25zOnR9fSl9LHVwZGF0ZUJyb3dzZXJXaW5kb3dUaXRsZTphc3luYyB0PT57Y29uc3QgYT1maW4uV2luZG93LndyYXBTeW5jKGUpO1wic3RyaW5nXCIhPXR5cGVvZiB0P2F3YWl0IGEudXBkYXRlT3B0aW9ucyh7d29ya3NwYWNlUGxhdGZvcm06e3RpdGxlOnR9fSk6Y29uc29sZS53YXJuKFwiVHlwZSBzdHJpbmcgZm9yIHdpbmRvdyB0aXRsZSBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFdpbmRvd1RpdGxlIHR5cGUgaW5zdGVhZFwiLHQpfSxfb3BlblZpZXdUYWJDb250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCgwLGFlLmJXKShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2goYWUuT0YuT3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsLHQpfSxfb3BlblBhZ2VUYWJDb250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCgwLGFlLmJXKShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2goYWUuT0YuT3BlblBhZ2VUYWJDb250ZXh0TWVudUludGVybmFsLHQpfSxfb3BlblNhdmVNb2RhbDphc3luYyB0PT57YXdhaXQoMCxhZS5iVykoZSk7cmV0dXJuKGF3YWl0IHNlKGUpKS5kaXNwYXRjaChmZS5PcGVuU2F2ZU1vZGFsSW50ZXJuYWwsdCl9LF9nZXRMYXlvdXRzV2l0aFNlbGVjdGVkVmlld3M6YXN5bmMoKT0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChmZS5HZXRMYXlvdXRzV2l0aFNlbGVjdGVkVmlld3NJbnRlcm5hbCxlKSxfb3BlblNhdmVCdXR0b25Db250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCgwLGFlLmJXKShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2goYWUuT0YuT3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsLHQpfSxfYWRkRGVmYXVsdFBhZ2U6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQoMCxhZS5iVykoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKGFlLk9GLkFkZERlZmF1bHRQYWdlLHQpfSxfdHJhY2tSZW1vdmVkVGFiOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLmJXKShlKSkuZGlzcGF0Y2goYWUuT0YuVHJhY2tSZW1vdmVkVGFiSW50ZXJuYWwsdCksX3Jlc3RvcmVSZW1vdmVkVGFiOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLmJXKShlKSkuZGlzcGF0Y2goYWUuT0YuUmVzdG9yZVJlbW92ZWRUYWJJbnRlcm5hbCx0KSxfdHJhY2tWaXNpdGVkU2l0ZTphc3luYyB0PT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLlRyYWNrVmlzaXRlZFNpdGVJbnRlcm5hbCx0KSxfZ2V0UmVjZW50bHlWaXNpdGVkU2l0ZXM6YXN5bmMgdD0+KGF3YWl0KDAsYWUuYlcpKGUpKS5kaXNwYXRjaChhZS5PRi5HZXRSZWNlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsLHQpLF9nZXRGcmVxdWVudGx5VmlzaXRlZFNpdGVzOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLmJXKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsLHQpLF9zZWFyY2hTaXRlczphc3luYyB0PT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLlNlYXJjaFNpdGVzSW50ZXJuYWwse2lkZW50aXR5OmUscmVxOnR9KSxfZ2V0U2VhcmNoUHJvdmlkZXJzOmFzeW5jKCk9Pihhd2FpdCgwLGFlLmJXKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0U2VhcmNoUHJvdmlkZXJzSW50ZXJuYWwse2lkZW50aXR5OmV9KSxfZ2V0Q3VyYXRlZENvbnRlbnQ6YXN5bmMgdD0+KGF3YWl0KDAsYWUuYlcpKGUpKS5kaXNwYXRjaChhZS5PRi5HZXRDdXJhdGVkQ29udGVudEludGVybmFsLHtpZGVudGl0eTplLHJlcTp0fSksX2hhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLmJXKShlKSkuZGlzcGF0Y2goYWUuT0YuSGFuZGxlUmVxdWVzdE5hdmlnYXRpb25JbnRlcm5hbCx0KSxfc2VuZFVwZGF0ZVZlcnNpb25Nb2RhbFJlc3BvbnNlOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLmJXKShlKSkuZGlzcGF0Y2goYWUuT0YuU2VuZFVwZGF0ZVZlcnNpb25Nb2RhbFJlc3BvbnNlSW50ZXJuYWwsdCl9KSx3ZT1lPT57Y29uc3QgdD1maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSk7cmV0dXJue3dyYXBTeW5jOmU9Pm1lKGUpLGNyZWF0ZVdpbmRvdzphc3luYyBhPT57Y29uc3Qgbj0oKCk9Pntjb25zdCBlPWBicm93c2VyLXdpbmRvdy1zdGFydHVwLSR7KDAsSi5OKSgpfWA7cmV0dXJuIG5lLkEubWFya1N0YXJ0KGUpLGV9KSgpOyhlPT57ZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKHt1dWlkOmZpbi5tZS5pZGVudGl0eS51dWlkfSkub25jZShcIndpbmRvdy1zaG93blwiLCgoKT0+e25lLkEubWFya0FuZE1lYXN1cmUoXCJicm93c2VyLXdpbmRvdy1zaG93blwiLGUpfSkpfSkobiksYXdhaXQoMCxhZS5iVykoZSk7Y29uc3Qgcj1hd2FpdCB0LmNyZWF0ZVdpbmRvdyhhKTtyZXR1cm4oZT0+e25lLkEubWFya0FuZE1lYXN1cmUoXCJicm93c2VyLXdpbmRvdy1zdGFydGVkXCIsZSl9KShuKSxtZShyLmlkZW50aXR5KX0sZ2V0QWxsQXR0YWNoZWRQYWdlczphc3luYygpPT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLkdldEFsbEF0dGFjaGVkUGFnZXMsdm9pZCAwKSxnZXRBbGxXaW5kb3dzOmFzeW5jKCk9Pnthd2FpdCgwLGFlLmJXKShlKTtyZXR1cm4oYXdhaXQoMCxnLklvKSgpKS5tYXAoKGU9Pm1lKGUuaWRlbnRpdHkpKSl9LGdldFVuaXF1ZVBhZ2VUaXRsZTphc3luYyB0PT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLkdldFVuaXF1ZVBhZ2VUaXRsZSx0KSxnZXRMYXN0Rm9jdXNlZFdpbmRvdzphc3luYygpPT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLkdldExhc3RGb2N1c2VkQnJvd3NlcldpbmRvdyx2b2lkIDApLGdldFBhZ2VCeVZpZXdJZGVudGl0eTphc3luYyB0PT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLkdldFBhZ2VCeVZpZXdJZGVudGl0eSx0KX19O3ZhciB5ZT1hKDUyMyk7ZnVuY3Rpb24ga2UoZSx0KXtyZXR1cm4gYXN5bmMoYSwuLi5uKT0+e2UuaGFzKGEpJiZlLmdldChhKS5mb3JFYWNoKChlPT5lKC4uLm4pKSksdCYmYXdhaXQgdCh7ZXZlbnQ6YSxwYXlsb2FkOm59KX19ZnVuY3Rpb24gdmUoZSx0KXtyZXR1cm4gdCYmdCgodD0+e2NvbnN0e2V2ZW50OmEscGF5bG9hZDpufT10O2UuaGFzKGEpJiZlLmdldChhKS5mb3JFYWNoKChlPT5lKC4uLm4pKSl9KSksKHQsYSk9PntlLmhhcyh0KXx8ZS5zZXQodCxuZXcgU2V0KSxlLmdldCh0KS5hZGQoYSl9fWZ1bmN0aW9uIGJlKGUpe3JldHVybih0LGEpPT57ZS5oYXModCl8fGUuc2V0KHQsbmV3IFNldCk7Y29uc3Qgbj1lLmdldCh0KSxyPSguLi5lKT0+e2EoLi4uZSksbi5kZWxldGUocil9O24uYWRkKHIpfX1mdW5jdGlvbiBTZShlKXtyZXR1cm4odCxhKT0+e2UuaGFzKHQpJiZlLmdldCh0KS5kZWxldGUoYSl9fWNvbnN0IFBlPXtuYW1lOmcuUS5Ccm93c2VyTWVudSxhbHdheXNPblRvcDohMCxhdXRvU2hvdzohMCxmcmFtZTohMSxyZXNpemFibGU6ITEsYmFja2dyb3VuZENvbG9yOlwiIzJmMzEzNlwiLHNtYWxsV2luZG93OiEwLHNob3dUYXNrYmFySWNvbjohMSxiYWNrZ3JvdW5kVGhyb3R0bGluZzohMSxzYXZlV2luZG93U3RhdGU6ITF9O2Z1bmN0aW9uIENlKGUpe2NvbnN0IHQ9ey4uLlBlLC4uLmV9O3JldHVybiB0LnVybD0oMCx5ZS5UdCkodC51cmw/P1wiXCIpLHR9Y29uc3QgQWU9ZnVuY3Rpb24oZSl7Y29uc3QgdD1uZXcgTWFwO3JldHVybntlbWl0OmtlKHQsKHQ9Pm8uY0kmJmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLnB1Ymxpc2goZSx0KSkpLGFkZExpc3RlbmVyOnZlKHQsKHQ9Pm8uY0kmJmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLnN1YnNjcmliZSh7dXVpZDpmaW4ubWUudXVpZH0sZSx0KSkpLGFkZExpc3RlbmVyV2l0aFVVSUQ6YT0+dmUodCwodD0+by5jSSYmZmluLkludGVyQXBwbGljYXRpb25CdXMuc3Vic2NyaWJlKHt1dWlkOmF9LGUsdCkpKSxyZW1vdmVMaXN0ZW5lcjpTZSh0KSxvbmNlOmJlKHQpfX0oXCJ3aW5kb3cubWVudVwiKSx4ZT0oZSx0KT0+ZmluLldpbmRvdy53cmFwU3luYyhlKS51cGRhdGVPcHRpb25zKHtvcGFjaXR5OnR9KSxNZT1lPT5BZS5lbWl0KFwicmVzcG9uc2VcIixlKSxJZT13KCgoKT0+KDAsai52MSkoKS5nZXRDaGlsZFdpbmRvd3MoKSksNTAwKTtjb25zdCBGZT1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIFdlKGUsdCxhKXtjb25zdCBuPUNlKGUpLG89YXdhaXQoMCxTLnFxKShmaW4ubWUuaWRlbnRpdHkpLGk9YXdhaXQoMCxTLmw1KShmaW4ubWUuaWRlbnRpdHkpPT09ci5xVC5EYXJrLHM9bz8udGhlbWU7aWYobi5iYWNrZ3JvdW5kQ29sb3I9cz8uW2k/ci5xVC5EYXJrOnIucVQuTGlnaHRdPy5wYWxldHRlPy5pbnB1dEJhY2tncm91bmR8fG4uYmFja2dyb3VuZENvbG9yLCFGZS5oYXMobi5uYW1lKSl7cmV0dXJuIG5ldyBQcm9taXNlKChyPT57QWUub25jZShcInJlYWR5XCIsKGFzeW5jIGU9PntpZihlLm5hbWU9PT1uLm5hbWUpe2NvbnN0IHQ9YXdhaXQgRmUuZ2V0KG4ubmFtZSk7bi5wcmV2ZW50Qmx1cnx8dC5vbmNlKFwiYmx1cnJlZFwiLChhc3luYygpPT57aWYoeGUoZSwwKSx0LmhpZGUoKSxNZSh7bmFtZTpuLm5hbWUsZGF0YTp7YWN0aW9uTmFtZTpcIkNhbmNlbFwifX0pLGE9dC5pZGVudGl0eS5uYW1lLFtnLlEuQnJvd3NlclNhdmVNZW51LGcuUS5EZXNrdG9wU2lnbmFsc01vZGFsXS5pbmNsdWRlcyhhKSl7Y29uc3QgZT1hd2FpdCB0LmdldE9wdGlvbnMoKTtcInN1Ym1pdHRpbmdcIiE9PWUuY3VzdG9tQ29udGV4dCYmXCJlcnJvclwiIT09ZS5jdXN0b21Db250ZXh0JiZ0LmNsb3NlKCl9ZWxzZSB0LmlkZW50aXR5Lm5hbWUuc3RhcnRzV2l0aChnLlEuQnJvd3Nlck1lbnUpJiZ0LmNsb3NlKCk7dmFyIGF9KSksc2V0VGltZW91dCgoYXN5bmMoKT0+e2F3YWl0IHhlKGUsMSk7MSE9PShhd2FpdCBmaW4uV2luZG93LndyYXBTeW5jKGUpLmdldE9wdGlvbnMoKSkub3BhY2l0eSYmeGUoZSwxKX0pKSxyKHQpfX0pKTtjb25zdCBvPShhc3luYygpPT57Y29uc3Qgcj1hd2FpdCBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5jcmVhdGVXaW5kb3cobSh7Li4ubixvcGFjaXR5OjAsdXJsOnR8fG4udXJsLGRlZmF1bHRMZWZ0OmE/LmxlZnQsZGVmYXVsdFRvcDphPy50b3AsZGVmYXVsdFdpZHRoOmE/LndpZHRoLGRlZmF1bHRIZWlnaHQ6YT8uaGVpZ2h0LHdvcmtzcGFjZVBsYXRmb3JtOntwcmV2ZW50Qmx1cjplLnByZXZlbnRCbHVyfX0sITApKTtyZXR1cm4gci5vbmNlKFwiY2xvc2VkXCIsKCgpPT57RmUuZGVsZXRlKG4ubmFtZSl9KSkscn0pKCk7RmUuc2V0KG4ubmFtZSxvKX0pKX1yZXR1cm4gRmUuZ2V0KG4ubmFtZSl9YXN5bmMgZnVuY3Rpb24gVGUoZSx0KXtjb25zdCBhPUNlKGUpLG49e3RvcDphLnRvcCxsZWZ0OmEubGVmdCx3aWR0aDphLmRlZmF1bHRXaWR0aHx8YS53aWR0aCxoZWlnaHQ6YS5kZWZhdWx0SGVpZ2h0fHxhLmhlaWdodH07cmV0dXJuIHQuc2V0KFwicGFyZW50TmFtZVwiLGZpbi5XaW5kb3cuZ2V0Q3VycmVudFN5bmMoKS5pZGVudGl0eS5uYW1lKSx7bmFtZTphLm5hbWUsYm91bmRzOm4scm91dGU6YCR7YS51cmx9IyR7dC50b1N0cmluZygpfWB9fWFzeW5jIGZ1bmN0aW9uIERlKHtvcHRpb25zOmUscGFyYW1ldGVyczp0fSl7Y29uc3QgYT10Pz9uZXcgVVJMU2VhcmNoUGFyYW1zLG49Q2UoZSkse25hbWU6cixtb2RhbFBhcmVudElkZW50aXR5Om99PW47aWYoIWEuaGFzKFwiaXNFbnRlcnByaXNlXCIpKXtjb25zdCBlPWAke2F3YWl0KGFzeW5jIGU9PihxfHwocT1hd2FpdCB6KGUpKSxxKSkobyl9YDthLnNldChcImlzRW50ZXJwcmlzZVwiLGUpfWxldCBpPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUpe3JldHVybihhd2FpdCBJZSgpKS5maW5kKCh0PT50LmlkZW50aXR5Lm5hbWU9PT1lKSl9KHIpO2lmKGkpYXdhaXQgYXN5bmMgZnVuY3Rpb24oZSx0KXtjb25zdHtuYW1lOmEsYm91bmRzOm4scm91dGU6cn09YXdhaXQgVGUoZSx0KSxvPXt1dWlkOmZpbi5tZS5pZGVudGl0eS51dWlkLG5hbWU6YX0saT1maW4uV2luZG93LndyYXBTeW5jKG8pO2F3YWl0IFByb21pc2UuYWxsKFtpLmhpZGUoKSx4ZShvLDApLGkuc2V0Qm91bmRzKG4pXSksZS5wcmV2ZW50Qmx1cnx8aS5vbmNlKFwiYmx1cnJlZFwiLCgoKT0+e3hlKG8sMCksaS5oaWRlKCksTWUoe25hbWU6by5uYW1lLGRhdGE6e2FjdGlvbk5hbWU6XCJDYW5jZWxcIn19KX0pKSxBZS5lbWl0KFwidXBkYXRlXCIsYSxuLHIpLGF3YWl0IE1lKHtuYW1lOmEsZGF0YTp7YWN0aW9uTmFtZTpcIkNhbmNlbFwifX0pfShuLGEpO2Vsc2V7Y29uc3R7cm91dGU6dCxib3VuZHM6cn09YXdhaXQgVGUoZSxhKTtpPWF3YWl0IFdlKHsuLi5ufSx0LHIpfXJldHVybiBpfWNvbnN0IE9lPWU9Pih7Y3JlYXRlUGFnZTphc3luYyB0PT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLkNyZWF0ZVNhdmVkUGFnZUludGVybmFsLHQpLGRlbGV0ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuYlcpKGUpKS5kaXNwYXRjaChhZS5PRi5EZWxldGVTYXZlZFBhZ2VJbnRlcm5hbCx0KSx1cGRhdGVQYWdlOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLmJXKShlKSkuZGlzcGF0Y2goYWUuT0YuVXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWwsdCksZ2V0UGFnZTphc3luYyB0PT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLkdldFNhdmVkUGFnZSx0KSxnZXRQYWdlczphc3luYyB0PT4oYXdhaXQoMCxhZS5iVykoZSkpLmRpc3BhdGNoKGFlLk9GLkdldFNhdmVkUGFnZXMsdCksc2F2ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuYlcpKGUpKS5kaXNwYXRjaChhZS5PRi5TYXZlUGFnZSx0KSxjcmVhdGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLkNyZWF0ZVNhdmVkV29ya3NwYWNlLHQpLGRlbGV0ZVdvcmtzcGFjZTphc3luYyB0PT57Y29uc3QgYT1VZSgpLG49YXdhaXQgYS5nZXRDdXJyZW50V29ya3NwYWNlKCk7aWYobi53b3Jrc3BhY2VJZD09PXQpdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZGVsZXRlIGN1cnJlbnQgYWN0aXZlIHdvcmtzcGFjZSAke24udGl0bGV9YCk7cmV0dXJuKGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLkRlbGV0ZVNhdmVkV29ya3NwYWNlLHQpfSx1cGRhdGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLlVwZGF0ZVNhdmVkV29ya3NwYWNlLHQpLGdldFdvcmtzcGFjZTphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0U2F2ZWRXb3Jrc3BhY2UsdCksZ2V0V29ya3NwYWNlczphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0U2F2ZWRXb3Jrc3BhY2VzLHQpLGdldFdvcmtzcGFjZXNNZXRhZGF0YTphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0U2F2ZWRXb3Jrc3BhY2VzTWV0YWRhdGEsdCksc2F2ZVdvcmtzcGFjZTphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuU2F2ZVdvcmtzcGFjZSx0KSxnZXREb2NrUHJvdmlkZXJDb25maWc6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLkdldERvY2tQcm92aWRlckNvbmZpZyx0KSxzYXZlRG9ja1Byb3ZpZGVyQ29uZmlnOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLk4pKGUpKS5kaXNwYXRjaChhZS5PRi5TYXZlRG9ja1Byb3ZpZGVyQ29uZmlnLHQpfSk7dmFyIEVlOyFmdW5jdGlvbihlKXtlLlVwZGF0ZVBsYXRmb3JtVGhlbWVTY2hlbWU9XCJ1cGRhdGUtcGxhdGZvcm0tdGhlbWUtc2NoZW1lXCJ9KEVlfHwoRWU9e30pKTsoMCxyZS5BKShcIm9mLXdvcmtzcGFjZS1ub3RpZmljYXRpb25zLXN5bmNcIik7YSg2OTUpO3ZhciBfZT1hKDg5OCk7Y29uc3QgQmU9ci5xVC5TeXN0ZW0sUmU9ZT0+T2JqZWN0LmVudHJpZXMoZSkucmVkdWNlKCgoZSxbdCxhXSk9PmAke2V9LS13b3Jrc3BhY2UtcGFsZXR0ZS0ke3R9OiAke2F9O2ApLFwiXCIpLCRlPShlLHQpPT57Y29uc3QgYT0hIWUuY29udGVudEJhY2tncm91bmQ1JiZcIiMwMDAwMDBcIiE9PWUuY29udGVudEJhY2tncm91bmQ1LG49ISFlLmNvbnRlbnRCYWNrZ3JvdW5kNCYmXCIjMDAwMDAwXCIhPT1lLmNvbnRlbnRCYWNrZ3JvdW5kNCxyPSgwLF9lLmI0KShlLnRleHREZWZhdWx0KSxvPSgwLF9lLmI0KShlLnRleHRJbmFjdGl2ZSksaT1yLnJnYixzPW8ucmdiLGM9ci5hbHBoYT9wYXJzZUZsb2F0KHIuYWxwaGEudG9TdHJpbmcoKSk6MSxkPW8uYWxwaGE/cGFyc2VGbG9hdChvLmFscGhhLnRvU3RyaW5nKCkpOjE7cmV0dXJue2RvY2tFeHBhbmRlZENvbnRhaW5lckJvcmRlckNvbG9yOmE/ZS5jb250ZW50QmFja2dyb3VuZDU6ZS5iYWNrZ3JvdW5kNCxkb2NrRXhwYW5kZWRDb250YWluZXJCb3JkZXJSYWRpdXM6YSYmdD9cIjBcIjpcIjEwcHhcIixkb2NrRXhwYW5kZWRDb250YWluZXJCYWNrZ3JvdW5kOm4/ZS5jb250ZW50QmFja2dyb3VuZDQ6ZS5iYWNrZ3JvdW5kMSxmaWxsZXJCYWNrZ3JvdW5kQ29sb3I6bj9lLmNvbnRlbnRCYWNrZ3JvdW5kNDpcImluaGVyaXRcIixkb2NrQ29tcGFuaW9uQ29udGFpbmVyQmFja2dyb3VuZDpuP2UuY29udGVudEJhY2tncm91bmQ0OlwiaW5oZXJpdFwiLGRvY2tDb21wb25lbnRDb250YWluZXJCYWNrZ3JvdW5kOmE/ZS5jb250ZW50QmFja2dyb3VuZDU6ZS5iYWNrZ3JvdW5kNSxzdHlsZWREcm9wZG93bkFjdGl2ZUJhY2tncm91bmQ6YCR7YT9lLmNvbnRlbnRCYWNrZ3JvdW5kNTplLmJhY2tncm91bmQ0fWAsY29udGVudE1lbnVXcmFwcGVySW50ZXJuYWxEaXZCb3JkZXJDb2xvcjphP2UuY29udGVudEJhY2tncm91bmQ1OmUuYmFja2dyb3VuZDUsY29udGVudE1lbnVJdGVtQ29udGFpbmVyQWN0aXZlQmFja2dyb3VuZDphP2UuY29udGVudEJhY2tncm91bmQ1OmUuYmFja2dyb3VuZDMsY29udGVudE1lbnVJdGVtQ29udGFpbmVySG92ZXJCYWNrZ3JvdW5kOmE/ZS5jb250ZW50QmFja2dyb3VuZDU6ZS5iYWNrZ3JvdW5kMixjb250ZW50TWVudUhlYWRlckJvcmRlckNvbG9yOmE/ZS5jb250ZW50QmFja2dyb3VuZDU6ZS5iYWNrZ3JvdW5kNSxkb2NrQ29tcGFuaW9uU2VwYXJhdG9yQm9yZGVyQ29sb3I6YT9lLmNvbnRlbnRCYWNrZ3JvdW5kNTplLmJhY2tncm91bmQzLGRvY2tDb21wb25lbnRDb250YWluZXJCb3JkZXJDb2xvcjphP2UuY29udGVudEJhY2tncm91bmQ1OmUuYmFja2dyb3VuZDUsY29tcGFuaW9uRG9ja0J1dHRvbkFjdGl2ZUJhY2tncm91bmQ6YT9lLmNvbnRlbnRCYWNrZ3JvdW5kNTplLmJhY2tncm91bmQ0LGNvbXBhbmlvbkRvY2tCdXR0b25Ib3ZlckJhY2tncm91bmQ6YT9lLmNvbnRlbnRCYWNrZ3JvdW5kNTplLmJhY2tncm91bmQ0LFwiY29tcHV0ZWQtc2Nyb2xsYmFyLXRodW1iLWFscGhhXCI6YyxcImNvbXB1dGVkLXNjcm9sbGJhci10cmFjay1hbHBoYVwiOmQsXCJzY3JvbGxiYXItdGh1bWItcmdiXCI6aSxcInNjcm9sbGJhci10cmFjay1yZ2JcIjpzfX0sTGU9KGUsdCxhKT0+KHtzZWxlY3RlZFRhYjpcImRhcmtcIj09PXQ/ZS5iYWNrZ3JvdW5kMzplLmJhY2tncm91bmQxLC4uLiRlKGUsYSl9KTtuZXcgY2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5wcm92aWRlclN0b3JhZ2U9ZSx0aGlzLmdldFZhcnNCeVNjaGVtZT1lPT5cImRhcmtcIj09PWU/dGhpcy5kYXJrUGFsZXR0ZVZhcnM6dGhpcy5saWdodFBhbGV0dGVWYXJzLHRoaXMuc2V0V29ya3NwYWNlU3RvcmFnZT1lPT57dGhpcy53b3Jrc3BhY2VTdG9yYWdlPWV9LHRoaXMudHJ5U3luY2hyb25pemVXb3Jrc3BhY2VTdG9yYWdlPSgpPT57aWYodGhpcy53b3Jrc3BhY2VTdG9yYWdlKXtjb25zdCBlPXRoaXMuZ2V0U2NoZW1lKCk7aWYodGhpcy53b3Jrc3BhY2VTdG9yYWdlLnNldEl0ZW0oRC5TZWxlY3RlZENvbG9yU2NoZW1lLGUpLHRoaXMuZGFya1BhbGV0dGVWYXJzJiZ0aGlzLmxpZ2h0UGFsZXR0ZVZhcnMpaWYoXCJkYXJrXCI9PT1lfHxcImxpZ2h0XCI9PT1lKXRoaXMud29ya3NwYWNlU3RvcmFnZS5zZXRJdGVtKEQuVGhlbWVQYWxldHRlU2hlZXQsYDpyb290eyR7dGhpcy5nZXRWYXJzQnlTY2hlbWUoZSl9fWApO2Vsc2V7Y29uc3QgZT1gQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayl7OnJvb3QgeyR7dGhpcy5nZXRWYXJzQnlTY2hlbWUoXCJkYXJrXCIpfX19YCx0PWBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBsaWdodCl7OnJvb3R7JHt0aGlzLmdldFZhcnNCeVNjaGVtZShcImxpZ2h0XCIpfX19YDt0aGlzLndvcmtzcGFjZVN0b3JhZ2Uuc2V0SXRlbShELlRoZW1lUGFsZXR0ZVNoZWV0LGAke3R9JHtlfWApfX19LHRoaXMuc2V0UGFsZXR0ZXM9YXN5bmMoe2xpZ2h0OmUsZGFyazp0fSxhKT0+e3RoaXMubGlnaHRQYWxldHRlVmFycz1SZSh7Li4uZSwuLi5MZShlLFwibGlnaHRcIixhKX0pLHRoaXMuZGFya1BhbGV0dGVWYXJzPVJlKHsuLi50LC4uLkxlKHQsXCJkYXJrXCIsYSl9KX19c2V0U2NoZW1lKGUpe3RoaXMucHJvdmlkZXJTdG9yYWdlLnNldEl0ZW0oRC5TZWxlY3RlZENvbG9yU2NoZW1lLGUpfWdldFNjaGVtZSgpe3JldHVybiBudWxsPT09dGhpcy5wcm92aWRlclN0b3JhZ2UuZ2V0SXRlbShELlNlbGVjdGVkQ29sb3JTY2hlbWUpJiZ0aGlzLnByb3ZpZGVyU3RvcmFnZS5zZXRJdGVtKEQuU2VsZWN0ZWRDb2xvclNjaGVtZSxCZSksdGhpcy5wcm92aWRlclN0b3JhZ2UuZ2V0SXRlbShELlNlbGVjdGVkQ29sb3JTY2hlbWUpfX0obik7Y29uc3QgTmU9ZT0+KHtnZXRUaGVtZXM6YXN5bmMoKT0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLkdldFRoZW1lcyx2b2lkIDApLHNldFNlbGVjdGVkU2NoZW1lOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLk4pKGUpKS5kaXNwYXRjaChhZS5PRi5TZXRTZWxlY3RlZFNjaGVtZSx0KSxnZXRTZWxlY3RlZFNjaGVtZTphc3luYygpPT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0U2VsZWN0ZWRTY2hlbWUsdm9pZCAwKX0pLEdlPWU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKTtsZXQgYTtjb25zdCBuPU9iamVjdC5hc3NpZ24odCx7YXBwbHlTbmFwc2hvdDphc3luYyh0LGEpPT57aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQmJiF0Py53aW5kb3dzKXRocm93IG5ldyBFcnJvcihcIk5vdCBhIHZhbGlkIGJyb3dzZXIgc25hcHNob3RcIik7cmV0dXJuIGZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5hcHBseVNuYXBzaG90KHQsYSl9LGdldFNuYXBzaG90OigpPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuZ2V0U25hcHNob3QoKS50aGVuKChlPT5lKSksZ2V0Vmlld1NuYXBzaG90OnQ9PmZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5nZXRWaWV3U25hcHNob3QodCksY3JlYXRlVmlldzoodCxhLG4pPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuY3JlYXRlVmlldyh0LGEsbiksbGF1bmNoQXBwOmFzeW5jIHQ9Pntjb25zb2xlLndhcm4oXCJsYXVuY2hBcHAgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIEl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSBjcmVhdGVWaWV3IC0gaHR0cHM6Ly9kZXZlbG9wZXJzLm9wZW5maW4uY28vb2YtZG9jcy9kb2NzL3BsYXRmb3JtLWdldHRpbmctc3RhcnRlZCNhZGQtYS12aWV3LXRvLWFuLWV4aXN0aW5nLXdpbmRvdyBvciAgY3JlYXRlV2luZG93IC0gaHR0cHM6Ly9kZXZlbG9wZXJzLm9wZW5maW4uY28vb2YtZG9jcy9kb2NzL3BsYXRmb3JtLWdldHRpbmctc3RhcnRlZCNjcmVhdGUtYS1wbGF0Zm9ybS13aW5kb3cgaW5zdGVhZC5cIiksdC50YXJnZXR8fCh0LnRhcmdldD17dXVpZDpvLiRoLG5hbWU6by52TCxlbnRpdHlUeXBlOm8uZlR8fFwidW5rbm93blwifSk7cmV0dXJuKGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLkxhdW5jaEFwcCx0KX0sX2ludm9rZUN1c3RvbUFjdGlvbjphc3luYyh0LGEpPT57Y29uc3Qgbj1hd2FpdCgwLGFlLk4pKGUpLG89e2FjdGlvbklkOnQscGF5bG9hZDp7Li4uYSxjYWxsZXJUeXBlOmEuY2FsbGVyVHlwZXx8ci52Yy5BUEl9fTtyZXR1cm4gbi5kaXNwYXRjaChhZS5PRi5JbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbCxvKX0sX3JlcXVlc3RRdWl0UGxhdGZvcm1EaWFsb2c6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLlJlcXVlc3RRdWl0UGxhdGZvcm1EaWFsb2dJbnRlcm5hbCx0KSxfc2hvd1VwZGF0ZVZlcnNpb25Nb2RhbDphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuU2hvd1VwZGF0ZVZlcnNpb25Nb2RhbEludGVybmFsLHQpLGdldEN1cnJlbnRXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLkdldEN1cnJlbnRXb3Jrc3BhY2UsdCksYXBwbHlXb3Jrc3BhY2U6YXN5bmModCxhKT0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLkFwcGx5V29ya3NwYWNlLHsuLi50LG9wdGlvbnM6YX0pLHJlc3RvcmVMYXN0U2F2ZWRXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLlJlc3RvcmVMYXN0U2F2ZWRXb3Jrc3BhY2VJbnRlcm5hbCx0KSxzZXRBY3RpdmVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLlNldEFjdGl2ZVdvcmtzcGFjZSx0KSxnZXRMYW5ndWFnZTphc3luYygpPT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0TGFuZ3VhZ2UpLF9nZXRMYW5ndWFnZVJlc291cmNlczphc3luYygpPT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0TGFuZ3VhZ2VSZXNvdXJjZXNJbnRlcm5hbCksc2V0TGFuZ3VhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLlNldExhbmd1YWdlLHQpLF9yYWlzZUFuYWx5dGljczphc3luYyB0PT57aWYoYXx8KGE9YXdhaXQoMCxhZS5LWikoZSkpLFwib2JqZWN0XCI9PXR5cGVvZiBhJiZhPy5hbmFseXRpY3M/LmlzU3VwcG9ydGVkKXtyZXR1cm4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuQW5hbHl0aWNzLHQpfWUudXVpZH0sZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZzphc3luYygpPT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuR2V0Tm90aWZpY2F0aW9uc0NvbmZpZyksX3JlZnJlc2hCb29rbWFya3NJbnRlcm5hbDphc3luYygpPT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuUmVmcmVzaEJvb2ttYXJrc0ludGVybmFsKSxfbGF1bmNoQm9va21hcmtJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuTGF1bmNoQm9va21hcmtJbnRlcm5hbCx0KSxfdXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLk4pKGUpKS5kaXNwYXRjaChhZS5PRi5VcGRhdGVEb2NrRmF2b3JpdGVzSW50ZXJuYWwsdCksX3VwZGF0ZUNvbnRlbnRNZW51SW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLlVwZGF0ZUNvbnRlbnRNZW51SW50ZXJuYWwsdCksX2xhdW5jaERvY2tFbnRyeUludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLk4pKGUpKS5kaXNwYXRjaChhZS5PRi5MYXVuY2hEb2NrRW50cnlJbnRlcm5hbCx0KSxfc2V0RG9ja0Zhdm9yaXRlc0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLk4pKGUpKS5kaXNwYXRjaChhZS5PRi5TZXREb2NrRmF2b3JpdGVzT3JkZXJJbnRlcm5hbCx0KSxfc2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuU2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbCx0KSxfcmVtb3ZlRG9ja0Zhdm9yaXRlSW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0KDAsYWUuTikoZSkpLmRpc3BhdGNoKGFlLk9GLlJlbW92ZURvY2tGYXZvcml0ZUludGVybmFsLHQpLF9hZGREb2NrRmF2b3JpdGVJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuQWRkRG9ja0Zhdm9yaXRlSW50ZXJuYWwsdCksX25hdmlnYXRlQ29udGVudE1lbnVJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQoMCxhZS5OKShlKSkuZGlzcGF0Y2goYWUuT0YuTmF2aWdhdGVDb250ZW50TWVudUludGVybmFsLHQpLF9vcGVuRG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsOmFzeW5jKCk9Pihhd2FpdCgwLGFlLk4pKGUpKS5kaXNwYXRjaChhZS5PRi5HZXREb2NrV29ya3NwYWNlc0NvbnRleHRNZW51SW50ZXJuYWwpLF9oYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLGFlLk4pKGUpKS5kaXNwYXRjaChhZS5PRi5IYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsLHQpLF9mb2N1c0FuZEV4cGFuZFNlYXJjaEludGVybmFsOmFzeW5jKCk9Pihhd2FpdCgwLGFlLk4pKGUpKS5kaXNwYXRjaChhZS5PRi5Gb2N1c0FuZEV4cGFuZFNlYXJjaEludGVybmFsKSxfc2hvd0Fib3V0UGFnZVBvcHVwOmFzeW5jIGU9Pihhc3luYyBlPT57Y29uc3QgdD1uZXcgVVJMU2VhcmNoUGFyYW1zKHsuLi5lLHRpdGxlOlwiQWJvdXRcIn0pLGE9YXdhaXQgYihmaW4ubWUuaWRlbnRpdHkpLG49ZS5jb3B5cmlnaHRNZXNzYWdlPzMyMDoyODYscj0oMCxnLlhxKShhLHtoZWlnaHQ6bix3aWR0aDozNjB9KTtyZXR1cm4gRGUoe29wdGlvbnM6e2ZyYW1lOiEwLHNtYWxsV2luZG93OiEwLHNhdmVXaW5kb3dTdGF0ZTohMSxzaG93VGFza2Jhckljb246ITAsaW5jbHVkZUluU25hcHNob3RzOiExLHdvcmtzcGFjZVBsYXRmb3JtOnt3aW5kb3dUeXBlOlwiZW50ZXJwcmlzZVwifSxyZXNpemFibGU6ITEsbmFtZTpnLlEuQWJvdXRQYWdlV2luZG93LHVybDphd2FpdCBmKCkraS5BeS5FbnRlcnByaXNlQWJvdXRQYWdlLGRlZmF1bHRXaWR0aDozNjAsZGVmYXVsdEhlaWdodDpuLHByZXZlbnRCbHVyOiEwLC4uLnJ9LHBhcmFtZXRlcnM6dH0pfSkoZSksVGhlbWU6TmUoZSksQnJvd3Nlcjp3ZShlKSxTdG9yYWdlOk9lKGUpfSk7cmV0dXJuIG59LFVlPSgpPT5HZShmaW4ubWUuaWRlbnRpdHkpO2NvbnN0IFZlPShlLHQpPT5lLmNvbnRlbnQ/ey4uLmUsY29udGVudDplLmNvbnRlbnQubWFwKChlPT5WZShlLHQpKSl9OnsuLi5lLGNvbXBvbmVudFN0YXRlOnQoZS5jb21wb25lbnRTdGF0ZSl9LEhlPWU9Pih7Li4uZSxuYW1lOnZvaWQgMH0pLHplPWU9Pntjb25zdCB0PXsuLi5lfTtyZXR1cm4gVmUodCxIZSl9LHFlPWU9Pntjb25zdCB0PVtdO3JldHVybihlJiZBcnJheS5pc0FycmF5KGUpP2U6W10pLmZvckVhY2goKGU9PntpZihcImNvbXBvbmVudFwiPT09ZS50eXBlKXJldHVybiB0LnB1c2goZS5jb21wb25lbnRTdGF0ZSk7Y29uc3QgYT1xZShlLmNvbnRlbnQpO3QucHVzaCguLi5hKX0pKSx0fTtuZXcgTWFwLG5ldyBNYXA7Y29uc3QgamU9YXN5bmMoZSx0KT0+e2NvbnN0IGE9KGU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS5MYXlvdXQud3JhcFN5bmMoZSk7cmV0dXJue3Nob3c6YXN5bmMoKT0+e2NvbnN0IGE9YXdhaXQgdC5nZXRDb25maWcoKSx7c2V0dGluZ3M6bixkaW1lbnNpb25zOnJ9PWEsbz1hd2FpdCB6KGUpO2F3YWl0IHQucmVwbGFjZSh7Li4uYSxzZXR0aW5nczp7Li4ubixoYXNIZWFkZXJzOiEwLHJlb3JkZXJFbmFibGVkOiEwfSxkaW1lbnNpb25zOnsuLi5yLGhlYWRlckhlaWdodDpvPzI4OjMwfX0pfSxoaWRlOmFzeW5jIGU9Pntjb25zdCBhPWF3YWl0IHQuZ2V0Q29uZmlnKCkse3NldHRpbmdzOm4sZGltZW5zaW9uczpyfT1hd2FpdCBhO2F3YWl0IHQucmVwbGFjZSh7Li4uYSxzZXR0aW5nczp7Li4ubixoYXNIZWFkZXJzOiExLHJlb3JkZXJFbmFibGVkOmU/LnNldHRpbmdzPy5yZW9yZGVyRW5hYmxlZD8/ITF9LGRpbWVuc2lvbnM6ey4uLnIsaGVhZGVySGVpZ2h0OjB9fSl9LGlzU2hvd2luZ1RhYnM6YXN5bmMoKT0+e3RyeXtjb25zdCBlPWF3YWl0IHQuZ2V0Q29uZmlnKCkse3NldHRpbmdzOmF9PWF3YWl0IGU7cmV0dXJuIGEuaGFzSGVhZGVyc31jYXRjaChlKXtyZXR1cm4gY29uc29sZS5lcnJvcihcImZhaWxlZCB0byBnZXQgbGF5b3V0IGNvbmZpZzogXCIsZSksITB9fX19KSh7Li4uZy4kcCxsYXlvdXROYW1lOmUubGF5b3V0Q29udGFpbmVyS2V5fSksbj1hd2FpdCBhLmlzU2hvd2luZ1RhYnMoKTt0PjE/bnx8YXdhaXQgYS5zaG93KCk6MT09PXQmJm4mJmF3YWl0IGEuaGlkZSh7c2V0dGluZ3M6e3Jlb3JkZXJFbmFibGVkOiEwfX0pfSxLZT0oWCgpKChhc3luYyBlPT57dHJ5e2lmKCFlfHwhZS5sYXlvdXRDb250YWluZXJLZXkpcmV0dXJuO2NvbnN0IHQ9YXdhaXQoYXN5bmMgZT0+ZmluLlBsYXRmb3JtLkxheW91dC53cmFwU3luYyh7Li4uZmluLm1lLmlkZW50aXR5LGxheW91dE5hbWU6ZX0pLmdldENvbmZpZygpKShlLmxheW91dENvbnRhaW5lcktleSksYT10LmNvbnRlbnQ/cWUodC5jb250ZW50KTpbXSxuPWEubGVuZ3RoO24+MT8oYXN5bmMgZT0+e2lmKFwibXVsdGlWaWV3XCIhPT1lLmF0dGFjaGVkUGFnZVR5cGUpe2NvbnN0IHQ9YXdhaXQgVWUoKS5Ccm93c2VyLmdldFVuaXF1ZVBhZ2VUaXRsZSgpO1VlKCkuQnJvd3Nlci53cmFwU3luYyhnLiRwKS51cGRhdGVQYWdlKHtwYWdlSWQ6ZS5wYWdlSWQscGFnZTp7dGl0bGU6ZS50aXRsZT8/dCxzaW5nbGVWaWV3TmFtZTpudWxsLGF0dGFjaGVkUGFnZVR5cGU6XCJtdWx0aVZpZXdcIn19KX19KShlKToxPT09biYmKGFzeW5jKGUsdCk9Pntjb25zdCBhPVVlKCkuQnJvd3Nlci53cmFwU3luYyhnLiRwKTtpZihcInNpbmdsZVZpZXdcIiE9PWUuYXR0YWNoZWRQYWdlVHlwZSl7Y29uc3Qgbj1hd2FpdCB0ZShlKTtkZWxldGUgbi5sYXlvdXQsZGVsZXRlIG4ucGFnZUlkO2NvbnN0IHI9ZmluLlZpZXcud3JhcFN5bmMoe3V1aWQ6Zy4kcC51dWlkLG5hbWU6dH0pLG89YXdhaXQgci5nZXRJbmZvKCksaT17Li4ubix0aXRsZTpudWxsLHNpbmdsZVZpZXdOYW1lOnQsaGFzVW5zYXZlZENoYW5nZXM6ITEsYXR0YWNoZWRQYWdlVHlwZTpcInNpbmdsZVZpZXdcIixwYWdlSWNvbjpvLmZhdmljb25zWzBdfTthd2FpdCBhLnVwZGF0ZVBhZ2Uoe3BhZ2VJZDplLnBhZ2VJZCxwYWdlOml9KX19KShlLGFbMF0ubmFtZSksYXdhaXQgamUoZSxuKX1jYXRjaChlKXt9fSksNTAse2xlYWRpbmc6ITEsdHJhaWxpbmc6ITB9KSxyZXF1aXJlKFwicmVhY3QtaTE4bmV4dFwiKSxyZXF1aXJlKFwiaTE4bmV4dFwiKSk7YS5uKEtlKSgpLnQ7bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5xdWV1ZT1bXSx0aGlzLmxvY2tlZD0hMX1sb2NrKCl7cmV0dXJuIG5ldyBQcm9taXNlKChlPT57dGhpcy5sb2NrZWQ/dGhpcy5xdWV1ZS5wdXNoKGUpOih0aGlzLmxvY2tlZD0hMCxlKCkpfSkpfXVubG9jaygpe2lmKHRoaXMucXVldWUubGVuZ3RoPjApe2NvbnN0IGU9dGhpcy5xdWV1ZS5zaGlmdCgpO2UmJmUoKX1lbHNlIHRoaXMubG9ja2VkPSExfX07bmV3IE1hcDtjb25zdCBYZT1tKHthbHdheXNPblRvcDohMCxhdXRvU2hvdzohMSxmcmFtZTohMSxyZXNpemFibGU6ITEsc2hvd1Rhc2tiYXJJY29uOiExfSk7IWZ1bmN0aW9uKGU9WGUpe2NvbnN0IHQ9bmV3IE1hcH0oKTtuZXcgTWFwO0RhdGUubm93KCk7WCgpKChhc3luYygpPT57Y29uc3QgZT1hd2FpdCBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5BcHBsaWNhdGlvbi5nZXRDaGlsZFdpbmRvd3MoKTtsZXQgdCxhPSExO2Zvcihjb25zdCBuIG9mIGUpaWYobi5pZGVudGl0eS5uYW1lPT09Zy5RLkJyb3dzZXJNZW51fHxuLmlkZW50aXR5Lm5hbWU9PT1nLlEuQnJvd3NlclNhdmVNZW51P3Q9bjphd2FpdCgwLGcuaGIpKG4uaWRlbnRpdHkpJiYoYT0hMCksYSlicmVhazshYSYmdCYmdC5jbG9zZSgpfSksMTAwLHtsZWFkaW5nOiExLHRyYWlsaW5nOiEwfSk7dmFyIFFlLFllOyFmdW5jdGlvbihlKXtlLlNhdmU9XCJTYXZlXCIsZS5TYXZlQXM9XCJTYXZlQXNcIn0oUWV8fChRZT17fSkpLGZ1bmN0aW9uKGUpe2UuR2xvYmFsTWVudT1cImdsb2JhbC1tZW51XCIsZS5Db250ZXh0TWVudT1cImNvbnRleHQtbWVudVwiLGUuUmVuYW1lU3VwZXJ0YWI9XCJyZW5hbWUtc3VwZXJ0YWJcIixlLkFkZEVkaXRCb29rbWFyaz1cImFkZC1lZGl0LWJvb2ttYXJrXCIsZS5Ecm9wZG93bk1lbnU9XCJkcm9wZG93bi1tZW51XCIsZS5ab29tQ29udHJvbHM9XCJ6b29tLWNvbnRyb2xzXCJ9KFllfHwoWWU9e30pKTtjb25zdCBaZT1cInZpc2l0ZWQtc2l0ZXNcIixKZT1cInJlbW92ZWQtdGFiLXN0YWNrXCIsZXQ9KG8uQVQmJm8uY0kmJl8oXCJvcGVuZmluLWhvbWUtcGFnZXNcIixcInBhZ2VzXCIpLG8uQVQmJm8uY0kmJm5ldyBBLkRleGllKE8oXCJvcGVuZmluLWVudGVycHJpc2Utc2l0ZS1oaXN0b3J5XCIpKSk7ZXQmJmV0LnZlcnNpb24oLjEpLnN0b3Jlcyh7W1plXTpcImlkLCB1cmxcIn0pO2NvbnN0IHR0PW8uQVQmJm8uY0kmJm5ldyBBLkRleGllKE8oXCJvcGVuZmluLWVudGVycHJpc2UtdGFiLWhpc3RvcnlcIikpO3R0JiZ0dC52ZXJzaW9uKC4xKS5zdG9yZXMoe1tKZV06XCJcIn0pO3ZhciBhdDshZnVuY3Rpb24oZSl7ZS5MYWJlbD1cIm5vcm1hbFwiLGUuU2VwYXJhdG9yPVwic2VwYXJhdG9yXCIsZS5TdWJtZW51PVwic3VibWVudVwiLGUuQ2hlY2tib3g9XCJjaGVja2JveFwifShhdHx8KGF0PXt9KSk7YXQuU2VwYXJhdG9yO2EoOTk1KTtuZXcgTWFwKFtbXCJibHVlXCIse25hbWU6XCJCbHVlXCIsY29sb3I6XCIjMDA5MUVCXCJ9XSxbXCJpbmRpZ29cIix7bmFtZTpcIkluZGlnb1wiLGNvbG9yOlwiIzY0NTBGRlwifV0sW1wicGlua1wiLHtuYW1lOlwiUGlua1wiLGNvbG9yOlwiI0U4NzhDRlwifV0sW1widGVhbFwiLHtuYW1lOlwiVGVhbFwiLGNvbG9yOlwiIzI0RDFEMVwifV0sW1wiZ3JlZW5cIix7bmFtZTpcIkdyZWVuXCIsY29sb3I6XCIjMDBBRjc4XCJ9XSxbXCJvcmFuZ2VcIix7bmFtZTpcIk9yYW5nZVwiLGNvbG9yOlwiI0ZGN0QzN1wifV0sW1wicmVkXCIse25hbWU6XCJSZWRcIixjb2xvcjpcIiNGOTQxNDRcIn1dLFtcInllbGxvd1wiLHtuYW1lOlwiWWVsbG93XCIsY29sb3I6XCIjRjlDNzRGXCJ9XSxbXCJncmF5XCIse25hbWU6XCJHcmF5XCIsY29sb3I6XCIjODI4Nzg4XCJ9XV0pO3ZhciBudDshZnVuY3Rpb24oZSl7ZVtlLlRvcExlZnQ9MF09XCJUb3BMZWZ0XCIsZVtlLlRvcFJpZ2h0PTFdPVwiVG9wUmlnaHRcIixlW2UuQm90dG9tTGVmdD0yXT1cIkJvdHRvbUxlZnRcIixlW2UuQm90dG9tUmlnaHQ9M109XCJCb3R0b21SaWdodFwiLGVbZS5DZW50ZXI9NF09XCJDZW50ZXJcIn0obnR8fChudD17fSkpOygwLHJlLkEpKGAke1widW5kZWZpbmVkXCIhPXR5cGVvZiBmaW4mJmZpbj8ubWUuaWRlbnRpdHkudXVpZH0tZW50ZXJwcmlzZS1kb2NrYCk7Y29uc3QgcnQ9XCJkb2NrLXByb3ZpZGVyLWNvbmZpZ3NcIixvdD1vLkFUJiZvLmNJJiZuZXcgQS5EZXhpZShPKFwiZG9jay1wcm92aWRlci1jb25maWdzXCIpKTtvdCYmb3QudmVyc2lvbiguMSkuc3RvcmVzKHtbcnRdOlwiXCJ9KTtjb25zdCBpdD1cIndvcmtzcGFjZXNcIjtvLkFUJiZvLmNJJiZfKFwib3BlbmZpbi13b3Jrc3BhY2UtcGxhdGZvcm0td29ya3NwYWNlc1wiLGl0KTthKDI1MCk7YSgxNzkpfSw2NzU6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtxVDooKT0+byx2YzooKT0+aH0pO3ZhciBuLHIsbyxpLHMsYyxkLGwsdSxwLGg7YSgxNzkpLGEoMjUwKTshZnVuY3Rpb24oZSl7ZS5VcmxDaGFuZ2U9XCJVUkxfQ0hBTkdFXCIsZS5WaWV3QWRkZWQ9XCJWSUVXX0FEREVEXCIsZS5WaWV3UmVtb3ZlZD1cIlZJRVdfUkVNT1ZFRFwiLGUuUGFnZUNvbnRleHRBZGRlZD1cIlBBR0VfQ09OVEVYVF9BRERFRFwiLGUuUGFnZUNvbnRleHRSZW1vdmVkPVwiUEFHRV9DT05URVhUX1JFTU9WRURcIn0obnx8KG49e30pKSxmdW5jdGlvbihlKXtlLk5ld1dpbmRvdz1cIk5ld1dpbmRvd1wiLGUuTmV3UGFnZT1cIk5ld1BhZ2VcIixlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLlNhdmVQYWdlQXM9XCJTYXZlUGFnZUFzXCIsZS5QcmludD1cIlByaW50XCIsZS5QcmludEFsbD1cIlByaW50QWxsXCIsZS5QcmludFNjcmVlbj1cIlByaW50U2NyZWVuXCIsZS5DbG9zZVdpbmRvdz1cIkNsb3NlV2luZG93XCIsZS5SZXN0b3JlQ2hhbmdlcz1cIlJlc3RvcmVDaGFuZ2VzXCIsZS5TYXZlV29ya3NwYWNlPVwiU2F2ZVdvcmtzcGFjZVwiLGUuU2F2ZVdvcmtzcGFjZUFzPVwiU2F2ZVdvcmtzcGFjZUFzXCIsZS5SZW5hbWVXb3Jrc3BhY2U9XCJSZW5hbWVXb3Jrc3BhY2VcIixlLlN3aXRjaFdvcmtzcGFjZT1cIlN3aXRjaFdvcmtzcGFjZVwiLGUuRGVsZXRlV29ya3NwYWNlPVwiRGVsZXRlV29ya3NwYWNlXCIsZS5Eb3dubG9hZHM9XCJEb3dubG9hZHNcIixlLk9wZW5TdG9yZWZyb250PVwiT3BlblN0b3JlZnJvbnRcIixlLk1hbmFnZURlc2t0b3BTaWduYWxzPVwiTWFuYWdlRGVza3RvcFNpZ25hbHNcIixlLkFwcGVhcmFuY2U9XCJBcHBlYXJhbmNlXCIsZS5RdWl0PVwiUXVpdFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KHJ8fChyPXt9KSksZnVuY3Rpb24oZSl7ZS5MaWdodD1cImxpZ2h0XCIsZS5EYXJrPVwiZGFya1wiLGUuU3lzdGVtPVwic3lzdGVtXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5DbG9zZT1cIkNsb3NlXCIsZS5EdXBsaWNhdGU9XCJEdXBsaWNhdGVcIixlLlJlbmFtZT1cIlJlbmFtZVwiLGUuU2F2ZT1cIlNhdmVcIixlLlNhdmVBcz1cIlNhdmUgQXNcIixlLk5ld1BhZ2U9XCJOZXcgUGFnZVwiLGUuRGVsZXRlUGFnZT1cIkRlbGV0ZSBQYWdlXCIsZS5TYXZlV29ya3NwYWNlQXM9XCJTYXZlV29ya3NwYWNlQXNcIixlLlJlZnJlc2g9XCJSZWZyZXNoXCIsZS5DbG9zZU90aGVycz1cIkNsb3NlIG90aGVyc1wiLGUuRGVsZXRlPVwiRGVsZXRlXCIsZS5QcmludD1cIlByaW50XCIsZS5QcmludEFsbD1cIlByaW50QWxsXCIsZS5QcmludFNjcmVlbj1cIlByaW50U2NyZWVuXCIsZS5NYW5hZ2VEZXNrdG9wU2lnbmFscz1cIk1hbmFnZURlc2t0b3BTaWduYWxzXCIsZS5BZGRUb0NoYW5uZWw9XCJBZGRUb0NoYW5uZWxcIixlLkN1c3RvbT1cIkN1c3RvbVwifShpfHwoaT17fSkpLGZ1bmN0aW9uKGUpe2UuTG9jaz1cIkxvY2tcIixlLlNob3dIaWRlVGFicz1cIlNob3dIaWRlVGFic1wiLGUuQWRkVG9DaGFuZWw9XCJBZGRUb0NoYW5uZWxcIixlLk1hbmFnZURlc2t0b3BTaWduYWxzPVwiTWFuYWdlRGVza3RvcFNpZ25hbHNcIixlLlByaW50PVwiUHJpbnRcIixlLlBpbj1cIlBpblwifShzfHwocz17fSkpLGZ1bmN0aW9uKGUpe2UuRWRpdE5hbWU9XCJFZGl0IE5hbWVcIixlLk1vdmU9XCJNb3ZlXCIsZS5EZWxldGU9XCJEZWxldGVcIn0oY3x8KGM9e30pKSxmdW5jdGlvbihlKXtlLk5ld1ZpZXc9XCJOZXdWaWV3XCIsZS5EdXBsaWNhdGVWaWV3cz1cIkR1cGxpY2F0ZVZpZXdcIixlLk9wZW5XaXRoRGVmYXVsdEJyb3dzZXI9XCJPcGVuV2l0aERlZmF1bHRCcm93c2VyXCIsZS5SZWxvYWRWaWV3cz1cIlJlbG9hZFRhYlwiLGUuQ2xvc2VWaWV3cz1cIkNsb3NlVGFiXCIsZS5BZGRUb0NoYW5uZWw9XCJBZGRUb0NoYW5uZWxcIixlLlJlbW92ZUZyb21DaGFubmVsPVwiUmVtb3ZlRnJvbUNoYW5uZWxcIixlLkJhY2s9XCJCYWNrXCIsZS5Gb3J3YXJkPVwiRm9yd2FyZFwiLGUuUHJpbnQ9XCJQcmludFwiLGUuUHJpbnRBbGw9XCJQcmludEFsbFwiLGUuUHJpbnRTY3JlZW49XCJQcmludFNjcmVlblwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KGR8fChkPXt9KSksZnVuY3Rpb24oZSl7ZS5TaG93SGlkZVRhYnM9XCJTaG93SGlkZVRhYnNcIixlLkNvbG9yTGlua2luZz1cIkNvbG9yTGlua2luZ1wiLGUuUHJlc2V0TGF5b3V0cz1cIlByZXNldExheW91dHNcIixlLkxvY2tVbmxvY2tQYWdlPVwiTG9ja1VubG9ja1BhZ2VcIixlLlNhdmVNZW51PVwiU2F2ZU1lbnVcIixlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLk1pbmltaXNlPVwiTWluaW1pc2VcIixlLk1heGltaXNlPVwiTWF4aW1pc2VcIixlLkNsb3NlPVwiQ2xvc2VcIixlLkN1c3RvbT1cIkN1c3RvbVwifShsfHwobD17fSkpLGZ1bmN0aW9uKGUpe2UuU2F2ZVBhZ2U9XCJTYXZlUGFnZVwiLGUuU2F2ZVdvcmtzcGFjZT1cIlNhdmVXb3Jrc3BhY2VcIixlLlNhdmVQYWdlQXM9XCJTYXZlUGFnZUFzXCIsZS5TYXZlV29ya3NwYWNlQXM9XCJTYXZlV29ya3NwYWNlQXNcIixlLkN1c3RvbT1cIkN1c3RvbVwifSh1fHwodT17fSkpLGZ1bmN0aW9uKGUpe2UuQnJvd3Nlcj1cImJyb3dzZXJcIixlLlBsYXRmb3JtPVwicGxhdGZvcm1cIn0ocHx8KHA9e30pKSxmdW5jdGlvbihlKXtlLkN1c3RvbUJ1dHRvbj1cIkN1c3RvbUJ1dHRvblwiLGUuU3RvcmVDdXN0b21CdXR0b249XCJTdG9yZUN1c3RvbUJ1dHRvblwiLGUuQ3VzdG9tRHJvcGRvd25JdGVtPVwiQ3VzdG9tRHJvcGRvd25JdGVtXCIsZS5HbG9iYWxDb250ZXh0TWVudT1cIkdsb2JhbENvbnRleHRNZW51XCIsZS5WaWV3VGFiQ29udGV4dE1lbnU9XCJWaWV3VGFiQ29udGV4dE1lbnVcIixlLlBhZ2VUYWJDb250ZXh0TWVudT1cIlBhZ2VUYWJDb250ZXh0TWVudVwiLGUuU2F2ZUJ1dHRvbkNvbnRleHRNZW51PVwiU2F2ZUJ1dHRvbkNvbnRleHRNZW51XCIsZS5BUEk9XCJBUElcIn0oaHx8KGg9e30pKTt2YXIgZjshZnVuY3Rpb24oZSl7ZS5TQVZFX1BBR0U9XCJTQVZFX1BBR0VcIixlLlNBVkVfV09SS1NQQUNFPVwiU0FWRV9XT1JLU1BBQ0VcIixlLlNBVkVfUEFHRV9BUz1cIlNBVkVfUEFHRV9BU1wiLGUuU0FWRV9XT1JLU1BBQ0VfQVM9XCJTQVZFX1dPUktTUEFDRV9BU1wiLGUuUkVOQU1FX1BBR0U9XCJSRU5BTUVfUEFHRVwiLGUuUkVOQU1FX1dPUktTUEFDRT1cIlJFTkFNRV9XT1JLU1BBQ0VcIn0oZnx8KGY9e30pKX0sMjQ4OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthLmQodCx7SDooKT0+b30pO3ZhciBuPWEoNDM4KSxyPWEoNzg2KTtjb25zdCBvPShlLHQpPT57ci5BLm1hcmtTdGFydChgJHtlfS1yZWdpc3RyYXRpb25gKSwoMCxuLkJZKSgpLm9uY2UoXCJzdGFydGVkXCIsKCgpPT5yLkEubWFya0FuZE1lYXN1cmUoXCJ3b3Jrc3BhY2UtYXBwLXN0YXJ0ZWRcIixgJHtlfS1yZWdpc3RyYXRpb25gKSkpO2NvbnN0IGE9ZmluLldpbmRvdy53cmFwU3luYyh0KTthLm9uY2UoXCJpbml0aWFsaXplZFwiLCgoKT0+ci5BLm1hcmtBbmRNZWFzdXJlKGAke2V9LXdpbmRvdy1pbml0aWFsaXplZGAsYCR7ZX0tcmVnaXN0cmF0aW9uYCkpKSxhLm9uY2UoXCJzaG93blwiLCgoKT0+e3IuQS5tYXJrQW5kTWVhc3VyZShgJHtlfS1zaG93YCxgJHtlfS1yZWdpc3RyYXRpb25gKX0pKX19LDgzNDooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5yKHQpLGEuZCh0LHtDTElBY3Rpb246KCk9PnguUEssQ0xJRmlsdGVyT3B0aW9uVHlwZTooKT0+eC5vbyxDTElUZW1wbGF0ZTooKT0+eC5mQyxkZXJlZ2lzdGVyOigpPT5GLGhpZGU6KCk9PlQscmVnaXN0ZXI6KCk9Pkksc2hvdzooKT0+V30pO3ZhciBuPWEoNzIzKSxyPWEoNzg2KSxvPWEoMjc3KSxpPWEoNzApO2NvbnN0IHM9XCIwXCIsYz1cIjJcIixkPVwiM1wiLGw9XCI1XCIsdT1cIjZcIjt2YXIgcD1hKDY5NSksaD1hKDc5KSxmPWEoODcwKTt2YXIgZz1hKDkwNSk7Y29uc3QgbT0oKT0+e307ZnVuY3Rpb24gdyhlKXtjb25zdCB0PXt9O2xldCBhPVtdO2xldCBuPVtdO2xldCByPW51bGw7bGV0IG89Zy5aby5Jbml0aWFsO3QuZ2V0U3RhdHVzPSgpPT5vLHQuZ2V0UmVzdWx0QnVmZmVyPSgpPT5hLHQuc2V0UmVzdWx0QnVmZmVyPWU9PnthPWUsYT8ubGVuZ3RoJiZ0Lm9uQ2hhbmdlKCl9LHQuZ2V0UmV2b2tlZEJ1ZmZlcj0oKT0+bix0LnNldFJldm9rZWRCdWZmZXI9ZT0+e249ZSxuPy5sZW5ndGgmJnQub25DaGFuZ2UoKX0sdC5zZXRVcGRhdGVkQ29udGV4dD1lPT57cj1lLG51bGwhPT1yJiZ0Lm9uQ2hhbmdlKCl9LHQuZ2V0VXBkYXRlZENvbnRleHQ9KCk9PnIsdC5vbkNoYW5nZT1tO2NvbnN0IGk9e307cmV0dXJuIHQucmVzPWksaS5jbG9zZT0oKT0+e28hPT1nLlpvLkNsb3NlJiYobz1nLlpvLkNsb3NlLHQub25DaGFuZ2UoKSl9LGkub3Blbj0oKT0+e28hPT1nLlpvLk9wZW4mJihvPWcuWm8uT3Blbix0Lm9uQ2hhbmdlKCkpfSxpLnJlc3BvbmQ9YT0+e2NvbnN0IG49ZnVuY3Rpb24oZT1bXSx0PVtdLGE9XCJhc2NlbmRpbmdcIil7Y29uc3Qgbj1bXSxyPW5ldyBNYXA7dC5mb3JFYWNoKChlPT57aWYoZS5rZXkpcmV0dXJuIHIuc2V0KGUua2V5LGUpO24ucHVzaChlKX0pKTtsZXQgbz1lLm1hcCgoZT0+e2lmKGUua2V5KXtjb25zdCB0PXIuZ2V0KGUua2V5KTtpZih0KXJldHVybiByLmRlbGV0ZShlLmtleSksdH1yZXR1cm4gZX0pKTtyZXR1cm4gby5wdXNoKC4uLnIudmFsdWVzKCksLi4ubiksbz1cImFzY2VuZGluZ1wiPT09YT9vLnNvcnQoKChlLHQpPT4oZT8uc2NvcmU/PzEvMCktKHQ/LnNjb3JlPz8xLzApKSk6by5zb3J0KCgoZSx0KT0+KHQ/LnNjb3JlPz8xLzApLShlPy5zY29yZT8/MS8wKSkpLG99KHQuZ2V0UmVzdWx0QnVmZmVyKCksYSxlKTt0LnNldFJlc3VsdEJ1ZmZlcihuKX0saS5yZXZva2U9KC4uLmUpPT57Y29uc3QgYT1uZXcgU2V0KGUpLG49dC5nZXRSZXN1bHRCdWZmZXIoKS5maWx0ZXIoKCh7a2V5OmV9KT0+e2NvbnN0IHQ9YS5oYXMoZSk7cmV0dXJuIHQmJmEuZGVsZXRlKGUpLCF0fSkpO3Quc2V0UmVzdWx0QnVmZmVyKG4pLGEuc2l6ZSYmKHQuZ2V0UmV2b2tlZEJ1ZmZlcigpLmZvckVhY2goKGU9PmEuYWRkKGUpKSksdC5zZXRSZXZva2VkQnVmZmVyKFsuLi5hXSkpfSxpLnVwZGF0ZUNvbnRleHQ9ZT0+e3Quc2V0VXBkYXRlZENvbnRleHQoZSl9LHR9Y29uc3QgeT1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIGsoZSl7Y29uc3R7aWQ6dCxwcm92aWRlcklkOmF9PWUsbj1QLmdldFByb3ZpZGVyT3JGYWlsKGEpO2xldCByPXkuZ2V0KHQpO3J8fChyPWZ1bmN0aW9uKGUsdCl7Y29uc3QgYT1uZXcgU2V0O2xldCBuPSExO3JldHVybntjbG9zZTooKT0+e249ITA7Zm9yKGNvbnN0IGUgb2YgYSllKCl9LHJlcTp7aWQ6ZSwuLi50LGNvbnRleHQ6dD8uY29udGV4dHx8e30sb25DbG9zZTplPT57YS5hZGQoZSksbiYmZSgpfSxyZW1vdmVMaXN0ZW5lcjplPT57YS5kZWxldGUoZSl9fX19KHQsZSkseS5zZXQodCxyKSk7Y29uc3Qgbz13KCksaT0oKT0+e2NvbnN0IGU9by5nZXRSZXN1bHRCdWZmZXIoKTtvLnNldFJlc3VsdEJ1ZmZlcihbXSk7Y29uc3Qgbj1vLmdldFJldm9rZWRCdWZmZXIoKTtvLnNldFJldm9rZWRCdWZmZXIoW10pO2NvbnN0IHI9by5nZXRVcGRhdGVkQ29udGV4dCgpO28uc2V0VXBkYXRlZENvbnRleHQobnVsbCk7Y29uc3QgaT1vLmdldFN0YXR1cygpOyFhc3luYyBmdW5jdGlvbihlKXsoYXdhaXQoMCxwLmdqKSgpKS5kaXNwYXRjaChzLGUpfSh7aWQ6dCxwcm92aWRlcklkOmEscmVzdWx0czplLHJldm9rZWQ6bixzdGF0dXM6aSxjb250ZXh0OnJ9KX07bGV0IGM9ITAsZD0hMTtvLm9uQ2hhbmdlPSgpPT57aWYoYylyZXR1cm4gYz0hMSx2b2lkIGkoKTtkfHwoZD0hMCxzZXRUaW1lb3V0KCgoKT0+e2Q9ITEsaSgpfSksMTAwKSl9O3RyeXtjb25zdHtyZXN1bHRzOmUsY29udGV4dDppfT1hd2FpdCBuLm9uVXNlcklucHV0KHIucmVxLG8ucmVzKSxzPW8uZ2V0U3RhdHVzKCk7cmV0dXJue2lkOnQscHJvdmlkZXJJZDphLHN0YXR1czpzLHJlc3VsdHM6ZSxjb250ZXh0Oml9fWNhdGNoKGUpe3JldHVybiBjb25zb2xlLmVycm9yKGBPcGVuRmluL1dvcmtzcGFjZS9Ib21lLiBVbmNhdWdodCBleGNlcHRpb24gaW4gc2VhcmNoIHByb3ZpZGVyICR7YX0gZm9yIHNlYXJjaCAke3R9YCxcIlRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgc2VhcmNoIHByb3ZpZGVyLlwiLGUpLHtpZDp0LHByb3ZpZGVySWQ6YSxlcnJvcjplPy5tZXNzYWdlfX19YXN5bmMgZnVuY3Rpb24gdigpe2Zvcihjb25zdHtyZXE6ZSxjbG9zZTp0fW9mIHkudmFsdWVzKCkpdCgpLHkuZGVsZXRlKGUuaWQpfWFzeW5jIGZ1bmN0aW9uIGIoZSx0KXtjb25zdCBhPVAuZ2V0UHJvdmlkZXJPckZhaWwoZS5wcm92aWRlcklkKTtyZXR1cm4gZS5yZXN1bHQuZGlzcGF0Y2hlcklkZW50aXR5PXQsYS5vblJlc3VsdERpc3BhdGNoPy4oZS5yZXN1bHQpfWZ1bmN0aW9uIFMoZSl7Y29uc3QgdD15LmdldChlLmlkKTt0Py5jbG9zZSgpLHkuZGVsZXRlKGUuaWQpfWNvbnN0IFA9bmV3IGYueE0oXCJob21lXCIpLEM9YXN5bmMgZT0+e2F3YWl0KDAscC5uQSkoKTshKFwic2tpcFBsYXRmb3JtSW5pdENoZWNrXCJpbiBlJiYhMD09PWUuc2tpcFBsYXRmb3JtSW5pdENoZWNrKSYmYXdhaXQoMCxoLktaKShmaW4ubWUuaWRlbnRpdHkpO1AuYXNzZXJ0Tm90QWxyZWFkeVJlZ2lzdGVyZWQoZS5pZCksUC5zZXRQcm92aWRlcihlKTtjb25zdCB0PWF3YWl0KDAscC5naikoKTtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5ob21lQ2hhbm5lbEFjdGlvbnNSZWdpc3RlcmVkfHwoZS5ob21lQ2hhbm5lbEFjdGlvbnNSZWdpc3RlcmVkPSEwLGUucmVnaXN0ZXIocyxrKSxlLnJlZ2lzdGVyKHUsUyksZS5yZWdpc3RlcihsLGIpLGUuYWRkRGlzY29ubmVjdGlvbkxpc3RlbmVyKHYpKX0odCksdC5kaXNwYXRjaChjLHtpZDplLmlkLHRpdGxlOmUudGl0bGUsaWNvbjplLmljb24sY2xpZW50QVBJVmVyc2lvbjpuLmV0LGlkZW50aXR5OmZpbi5tZS5pZGVudGl0eSxzY29yZU9yZGVyOmUuc2NvcmVPcmRlcixjb21tYW5kQ29kZTplLmNvbW1hbmRDb2RlLGRlc2NyaXB0aW9uOmUuZGVzY3JpcHRpb24saGlkZGVuOmUuaGlkZGVuLGxpc3RUaXRsZTplLmxpc3RUaXRsZSxpbnB1dFBsYWNlaG9sZGVyOmUuaW5wdXRQbGFjZWhvbGRlcixpbnB1dExhbmRpbmdQbGFjZWhvbGRlcjplLmlucHV0TGFuZGluZ1BsYWNlaG9sZGVyLGxvZ29Vcmw6ZS5sb2dvVXJsLGRpc3BhdGNoRm9jdXNFdmVudHM6ZS5kaXNwYXRjaEZvY3VzRXZlbnRzfSl9O3ZhciBBPWEoMjQ4KSx4PWEoODcyKTtsZXQgTTtjb25zdCBJPWFzeW5jIGU9PntpZighZS5pY29uKXRocm93IG5ldyBFcnJvcihgJHtlLmlkfSBwcm92aWRlciBuZWVkcyB0byBoYXZlIGljb24gcHJvcGVydHkgZGVmaW5lZC5gKTsoMCxBLkgpKFwiaG9tZVwiLGkuRjIpO2NvbnN0IHQ9YXdhaXQgQyhlKTtyZXR1cm4gTT1uZXcgUHJvbWlzZSgoKGEsaSk9Pnt0cnl7KDAsby5HUikoe2FsbG93ZWQ6ITAsY29tcG9uZW50VmVyc2lvbjp0Py53b3Jrc3BhY2VWZXJzaW9ufSksbi5ldCxhKHsuLi50LGNsaWVudEFQSVZlcnNpb246bi5ldCxzZXRTZWFyY2hRdWVyeTphc3luYyB0PT4oYXdhaXQoMCxwLk43KSgpKS5kaXNwYXRjaChcInNldC1zZWFyY2gtcXVlcnlcIix7cXVlcnk6dCxwcm92aWRlcklEOmUuaWR9KX0pfWNhdGNoKGUpeygwLG8uR1IpKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZSBpbnN0YW5jZW9mIEVycm9yP2UubWVzc2FnZTpcInVua25vd25cIn0pLGkoZSl9ZmluYWxseXtyLkEubWFya0VuZEFuZE1lYXN1cmUoXCJob21lLXJlZ2lzdHJhdGlvblwiKX19KSksTX0sRj1hc3luYyBlPT57UC5kZWxldGVQcm92aWRlcihlKTtjb25zdCB0PWF3YWl0KDAscC5naikoKTthd2FpdCB0LmRpc3BhdGNoKGQsZSl9O2FzeW5jIGZ1bmN0aW9uIFcoKXtyLkEubWFya1N0YXJ0KFwiaG9tZS1zaG93XCIpLGF3YWl0IE07Y29uc3QgZT1hd2FpdCgwLHAuTjcpKCk7YXdhaXQgZS5kaXNwYXRjaChcInNob3ctaG9tZVwiLHZvaWQgMCl9YXN5bmMgZnVuY3Rpb24gVCgpe2F3YWl0IE07Y29uc3QgZT1hd2FpdCgwLHAuTjcpKCk7YXdhaXQgZS5kaXNwYXRjaChcImhpZGUtaG9tZVwiLHZvaWQgMCl9fSw4NzA6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHt4TTooKT0+c30pO3ZhciBuPWEoOTk1KTtjbGFzcyByIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSx0KXtjb25zdCBhPSgwLG4udGl0bGVDYXNlKShlKTtzdXBlcihgJHthfSBQcm92aWRlci4gJHthfSBQcm92aWRlciR7dD9gIHdpdGggaWQgJHt0fWA6XCJcIn0gaXMgbm90IGN1cnJlbnRseSByZWdpc3RlcmVkLmApfX1jbGFzcyBvIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSx0KXtjb25zdCBhPSgwLG4udGl0bGVDYXNlKShlKTtzdXBlcihgJHthfSBQcm92aWRlci4gJHthfSBQcm92aWRlciR7dD9gIHdpdGggaWQgJHt0fWA6XCJcIn0gaXMgYWxyZWFkeSByZWdpc3RlcmVkLiBDYWxsIFxcYGRlcmVnaXN0ZXJcXGAgYmVmb3JlIHJlZ2lzdGVyaW5nIGFnYWluLmApfX1jbGFzcyBpIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSx0KXtjb25zdCBhPSgwLG4udGl0bGVDYXNlKShlKTtzdXBlcihgRmFpbGVkIHRvIGdldCAke2F9IFByb3ZpZGVyLiAke2F9IFByb3ZpZGVyIHdpdGggaWQgJHt0fSBpcyBub3QgY3VycmVudGx5IHJlZ2lzdGVyZWQuYCl9fWNsYXNzIHN7Y29uc3RydWN0b3IoZSl7dGhpcy5wcm92aWRlcnNNYXA9bmV3IE1hcCx0aGlzLnByb3ZpZGVyVHlwZT1lfWFzc2VydE5vdEFscmVhZHlSZWdpc3RlcmVkKGUpe2lmKHRoaXMuaGFzUHJvdmlkZXIoZSkpdGhyb3cgbmV3IG8odGhpcy5wcm92aWRlclR5cGUsZSl9YXNzZXJ0UmVnaXN0ZXJlZChlKXtpZighdGhpcy5oYXNQcm92aWRlcihlKSl0aHJvdyBuZXcgcih0aGlzLnByb3ZpZGVyVHlwZSxlKX1nZXRQcm92aWRlcihlKXtyZXR1cm4gdGhpcy5wcm92aWRlcnNNYXAuZ2V0KGUpfWhhc1Byb3ZpZGVyKGUpe3JldHVybiB0aGlzLnByb3ZpZGVyc01hcC5oYXMoZSl9c2V0UHJvdmlkZXIoZSl7dGhpcy5wcm92aWRlcnNNYXAuc2V0KGUuaWQsZSl9ZGVsZXRlUHJvdmlkZXIoZSl7dGhpcy5wcm92aWRlcnNNYXAuZGVsZXRlKGUpfWdldFByb3ZpZGVyT3JGYWlsKGUpe2NvbnN0IHQ9dGhpcy5nZXRQcm92aWRlcihlKTtpZighdCl0aHJvdyBuZXcgaSh0aGlzLnByb3ZpZGVyVHlwZSxlKTtyZXR1cm4gdH1jbGVhclByb3ZpZGVycygpe3RoaXMucHJvdmlkZXJzTWFwLmNsZWFyKCl9fX0sMTI5OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjt2YXIgbixyLG87YS5kKHQse1A6KCk9PnIsUjooKT0+b30pLGZ1bmN0aW9uKGUpe2UuRmV0Y2hpbmc9XCJmZXRjaGluZ1wiLGUuRmV0Y2hlZD1cImZldGNoZWRcIixlLkNvbXBsZXRlPVwiY29tcGxldGVcIn0obnx8KG49e30pKSxmdW5jdGlvbihlKXtlLlVzZXJBY3Rpb249XCJ1c2VyLWFjdGlvblwiLGUuRm9jdXNDaGFuZ2U9XCJmb2N1cy1jaGFuZ2VcIixlLlJlbG9hZD1cInJlbG9hZFwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuQWN0aXZlPVwiYWN0aXZlXCIsZS5EZWZhdWx0PVwiZGVmYXVsdFwifShvfHwobz17fSkpfSw2MDA6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO3ZhciBuO2EuZCh0LHthOigpPT5ufSksZnVuY3Rpb24oZSl7ZS5BY3Rpb25CdXR0b249XCJBY3Rpb25CdXR0b25cIixlLkRyb3Bkb3duQnV0dG9uPVwiRHJvcGRvd25CdXR0b25cIn0obnx8KG49e30pKX0sODcyOihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjt2YXIgbixyLG87YS5kKHQse1BLOigpPT5uLGZDOigpPT5yLG9vOigpPT5vfSksZnVuY3Rpb24oZSl7ZS5TdWdnZXN0aW9uPVwic3VnZ2VzdGlvblwifShufHwobj17fSkpLGZ1bmN0aW9uKGUpe2UuQ29udGFjdD1cIkNvbnRhY3RcIixlLkN1c3RvbT1cIkN1c3RvbVwiLGUuTGlzdD1cIkxpc3RcIixlLlBsYWluPVwiUGxhaW5cIixlLlNpbXBsZVRleHQ9XCJTaW1wbGVUZXh0XCIsZS5Mb2FkaW5nPVwiTG9hZGluZ1wiLGUuRXJyb3I9XCJFcnJvclwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuTXVsdGlTZWxlY3Q9XCJNdWx0aVNlbGVjdFwifShvfHwobz17fSkpfSwxNzk6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EoMTI5KSxhKDg3MiksYSg3MTApLGEoMTg0KSxhKDYwMCl9LDcxMDooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIG4scjthLmQodCx7djooKT0+bix6OigpPT5yfSksZnVuY3Rpb24oZSl7ZS5TbmFwc2hvdD1cInNuYXBzaG90XCIsZS5NYW5pZmVzdD1cIm1hbmlmZXN0XCIsZS5WaWV3PVwidmlld1wiLGUuRXh0ZXJuYWw9XCJleHRlcm5hbFwifShufHwobj17fSkpLGZ1bmN0aW9uKGUpe2UuTGFuZGluZ1BhZ2U9XCJsYW5kaW5nUGFnZVwiLGUuQXBwR3JpZD1cImFwcEdyaWRcIn0ocnx8KHI9e30pKX0sMTg0OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthLmQodCx7U006KCk9Pm8sY2U6KCk9Pm4saW46KCk9PmksbnA6KCk9PnJ9KTtjb25zdCBuPXtDb250YWluZXI6XCJDb250YWluZXJcIixCdXR0b246XCJCdXR0b25cIixTcGxpdEJ1dHRvbjpcIlNwbGl0QnV0dG9uXCJ9LHI9e1RleHQ6XCJUZXh0XCIsSW1hZ2U6XCJJbWFnZVwiLExpc3Q6XCJMaXN0XCJ9LG89ey4uLm4sLi4ucn07dmFyIGk7IWZ1bmN0aW9uKGUpe2UuUHJpbWFyeT1cInByaW1hcnlcIixlLlNlY29uZGFyeT1cInNlY29uZGFyeVwiLGUuVGV4dE9ubHk9XCJ0ZXh0T25seVwifShpfHwoaT17fSkpfSw1OTg6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2Eucih0KSxhLmQodCx7QXBwTWFuaWZlc3RUeXBlOigpPT5vLnYsU3RvcmVmcm9udFRlbXBsYXRlOigpPT5vLnosZGVyZWdpc3RlcjooKT0+eSxoaWRlOigpPT5rLHJlZ2lzdGVyOigpPT53LHNob3c6KCk9PnZ9KTt2YXIgbj1hKDI3Nykscj1hKDY5NSksbz1hKDcxMCksaT1hKDcyMykscz1hKDc4NiksYz1hKDcwKSxkPWEoNzkpLGw9YSg4NzApO2xldCB1PSExO2FzeW5jIGZ1bmN0aW9uIHAoZSx0LGEpe2NvbnN0IG49YXdhaXQoMCxyLnA0KSgpO3RyeXtyZXR1cm4gYXdhaXQgbi5kaXNwYXRjaChlLmFjdGlvbixlLnBheWxvYWQpfWNhdGNoKHIpe2lmKHIgaW5zdGFuY2VvZiBFcnJvciYmLTEhPT1yLnRvU3RyaW5nKCkuaW5kZXhPZihlLmFjdGlvbikpcmV0dXJuIHV8fGNvbnNvbGUud2FybihcIllvdSBhcmUgdXNpbmcgYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBXb3Jrc3BhY2UgY2xpZW50IGxpYnJhcnkgdGhhdCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50bHkgcnVubmluZyB3b3Jrc3BhY2UgcHJvdmlkZXIuIFBsZWFzZSB1cGdyYWRlIHRoZSBXb3Jrc3BhY2UgdG8gdmVyc2lvbiA5LjAgb3IgbGF0ZXIuXCIpLHU9ITAsYXdhaXQgbi5kaXNwYXRjaCh0LmFjdGlvbix0LnBheWxvYWQpLGE7dGhyb3cgcn19Y29uc3QgaD1uZXcgbC54TShcInN0b3JlZnJvbnRcIiksZj1hc3luYyBlPT57YXdhaXQoMCxkLktaKShmaW4ubWUuaWRlbnRpdHkpO2NvbnN0IHQ9YXdhaXQoMCxyLk43KSgpO3JldHVybiBoLmFzc2VydE5vdEFscmVhZHlSZWdpc3RlcmVkKGUuaWQpLGguc2V0UHJvdmlkZXIoZSksKGU9PntlLnN0b3JlZnJvbnRDaGFubmVsQWN0aW9uc1JlZ2lzdGVyZWR8fChlLnN0b3JlZnJvbnRDaGFubmVsQWN0aW9uc1JlZ2lzdGVyZWQ9ITAsZS5yZWdpc3RlcihcImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWFwcHNcIiwoZT0+aC5nZXRQcm92aWRlck9yRmFpbChlKS5nZXRBcHBzKCkpKSxlLnJlZ2lzdGVyKFwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItZm9vdGVyXCIsKGU9PmguZ2V0UHJvdmlkZXJPckZhaWwoZSkuZ2V0Rm9vdGVyKCkpKSxlLnJlZ2lzdGVyKFwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItbGFuZGluZy1wYWdlXCIsKGU9PmguZ2V0UHJvdmlkZXJPckZhaWwoZSkuZ2V0TGFuZGluZ1BhZ2UoKSkpLGUucmVnaXN0ZXIoXCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1uYXZpZ2F0aW9uXCIsKGU9PmguZ2V0UHJvdmlkZXJPckZhaWwoZSkuZ2V0TmF2aWdhdGlvbigpKSksZS5yZWdpc3RlcihcImxhdW5jaC1zdG9yZWZyb250LXByb3ZpZGVyLWFwcFwiLCgoe2lkOmUsYXBwOnR9KT0+aC5nZXRQcm92aWRlck9yRmFpbChlKS5sYXVuY2hBcHAodCkpKSl9KSh0KSxlLmNsaWVudEFQSVZlcnNpb249aS5ldCxwKHthY3Rpb246XCJyZWdpc3Rlci1wcm92aWRlclwiLHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTpcInN0b3JlZnJvbnRcIixpbmZvOmV9fSx7YWN0aW9uOlwicmVnaXN0ZXItc3RvcmVmcm9udC1wcm92aWRlclwiLHBheWxvYWQ6ZX0se3dvcmtzcGFjZVZlcnNpb246XCJ1bmtub3duXCJ9KX07dmFyIGc9YSgyNDgpO2xldCBtO2NvbnN0IHc9YXN5bmMgZT0+eygwLGcuSCkoXCJzdG9yZVwiLGMuZ1EpO2NvbnN0IHQ9YXdhaXQgZihlKTtyZXR1cm4gbT1uZXcgUHJvbWlzZSgoKGEsbyk9Pnt0cnl7KDAsbi54dCkoe2FsbG93ZWQ6ITAsY29tcG9uZW50VmVyc2lvbjp0Py53b3Jrc3BhY2VWZXJzaW9ufSksaS5ldCxhKHtjbGllbnRBUElWZXJzaW9uOmkuZXQsd29ya3NwYWNlVmVyc2lvbjp0Py53b3Jrc3BhY2VWZXJzaW9uPz9cIlwiLHVwZGF0ZUFwcENhcmRCdXR0b25zOmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0KDAsci5tUSkoKTthd2FpdCBhLmRpc3BhdGNoKFwidXBkYXRlLWFwcC1jYXJkLWJ1dHRvbi1jb25maWdcIix7Li4udCxpZDplLmlkLHRpdGxlOmUudGl0bGUsaWNvbjplLmljb24scGxhdGZvcm1JZGVudGl0eTpmaW4ubWUuaWRlbnRpdHl9KX19KX1jYXRjaChlKXsoMCxuLnh0KSh7YWxsb3dlZDohMSxyZWplY3Rpb25Db2RlOmUgaW5zdGFuY2VvZiBFcnJvcj9lLm1lc3NhZ2U6XCJ1bmtub3duXCJ9KSxvKGUpfWZpbmFsbHl7cy5BLm1hcmtFbmRBbmRNZWFzdXJlKFwic3RvcmUtcmVnaXN0cmF0aW9uXCIpfX0pKSxtfSx5PWFzeW5jIGU9Pihhd2FpdCBtLGguYXNzZXJ0UmVnaXN0ZXJlZChlKSxoLmRlbGV0ZVByb3ZpZGVyKGUpLGF3YWl0KDAsci5uQSkoKSxwKHthY3Rpb246XCJkZXJlZ2lzdGVyLXByb3ZpZGVyXCIscGF5bG9hZDp7cHJvdmlkZXJUeXBlOlwic3RvcmVmcm9udFwiLGlkOmV9fSx7YWN0aW9uOlwiZGVyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIscGF5bG9hZDplfSkpLGs9YXN5bmMoKT0+KGF3YWl0IG0sYXdhaXQoMCxyLm5BKSgpLHAoe2FjdGlvbjpcImhpZGUtcHJvdmlkZXItd2luZG93XCIscGF5bG9hZDp7cHJvdmlkZXJUeXBlOlwic3RvcmVmcm9udFwifX0se2FjdGlvbjpcImhpZGUtc3RvcmVmcm9udFwifSkpLHY9YXN5bmMoKT0+KHMuQS5tYXJrU3RhcnQoXCJzdG9yZS1zaG93XCIpLGF3YWl0IG0sYXdhaXQoMCxyLm5BKSgpLHAoe2FjdGlvbjpcInNob3ctcHJvdmlkZXItd2luZG93XCIscGF5bG9hZDp7cHJvdmlkZXJUeXBlOlwic3RvcmVmcm9udFwifX0se2FjdGlvbjpcInNob3ctc3RvcmVmcm9udFwifSkpfSwyNTA6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO3ZhciBuOyFmdW5jdGlvbihlKXtlLkxlZnQ9XCJMZWZ0XCIsZS5SaWdodD1cIlJpZ2h0XCIsZS5Ub3A9XCJUb3BcIixlLkJvdHRvbT1cIkJvdHRvbVwifShufHwobj17fSkpfSw3OTooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIG47YS5kKHQse0taOigpPT5vLE46KCk9PmksT0Y6KCk9Pm4sYlc6KCk9PnN9KSxmdW5jdGlvbihlKXtlLkxhdW5jaEFwcD1cImxhdW5jaEFwcFwiLGUuU2F2ZVBhZ2U9XCJzYXZlUGFnZVwiLGUuR2V0U2F2ZWRQYWdlPVwiZ2V0U2F2ZWRQYWdlXCIsZS5DcmVhdGVTYXZlZFBhZ2U9XCJjcmVhdGVTYXZlZFBhZ2VcIixlLlVwZGF0ZVNhdmVkUGFnZT1cInVwZGF0ZVNhdmVkUGFnZVwiLGUuRGVsZXRlU2F2ZWRQYWdlPVwiZGVsZXRlU2F2ZWRQYWdlXCIsZS5HZXRTYXZlZFBhZ2VzPVwiZ2V0U2F2ZWRQYWdlc1wiLGUuQ3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWw9XCJjcmVhdGVTYXZlZFBhZ2VJbnRlcm5hbFwiLGUuVXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWw9XCJ1cGRhdGVTYXZlZFBhZ2VJbnRlcm5hbFwiLGUuRGVsZXRlU2F2ZWRQYWdlSW50ZXJuYWw9XCJkZWxldGVTYXZlZFBhZ2VJbnRlcm5hbFwiLGUuVXBkYXRlUGFnZUZvcldpbmRvdz1cInVwZGF0ZVBhZ2VGb3JXaW5kb3dcIixlLkF0dGFjaFBhZ2VzVG9XaW5kb3c9XCJhdHRhY2hQYWdlc1RvV2luZG93XCIsZS5EZXRhY2hQYWdlc0Zyb21XaW5kb3c9XCJkZXRhY2hQYWdlc0Zyb21XaW5kb3dcIixlLlJlb3JkZXJQYWdlc0ZvcldpbmRvdz1cInJlb3JkZXJQYWdlc0ZvcldpbmRvd1wiLGUuU2V0QWN0aXZlUGFnZT1cInNldEFjdGl2ZVBhZ2VcIixlLkFkZFBhZ2U9XCJhZGRQYWdlXCIsZS5BZGREZWZhdWx0UGFnZT1cImFkZERlZmF1bHRQYWdlXCIsZS5HZXRBbGxBdHRhY2hlZFBhZ2VzPVwiZ2V0QWxsQXR0YWNoZWRQYWdlc1wiLGUuR2V0QWN0aXZlUGFnZUlkRm9yV2luZG93PVwiZ2V0QWN0aXZlUGFnZUlkRm9yV2luZG93XCIsZS5HZXRQYWdlc0ZvcldpbmRvdz1cImdldFBhZ2VzRm9yV2luZG93XCIsZS5HZXRQYWdlRm9yV2luZG93PVwiZ2V0UGFnZUZvcldpbmRvd1wiLGUuR2V0U2F2ZWRQYWdlTWV0YWRhdGE9XCJnZXRTYXZlZFBhZ2VNZXRhZGF0YVwiLGUuR2V0VW5pcXVlUGFnZVRpdGxlPVwiZ2V0VW5pcXVlUGFnZVRpdGxlXCIsZS5HZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJnZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLkdldFBhZ2VCeVZpZXdJZGVudGl0eT1cImdldFBhZ2VCeVZpZXdJZGVudGl0eVwiLGUuR2V0VGhlbWVzPVwiZ2V0VGhlbWVzXCIsZS5HZXRTZWxlY3RlZFNjaGVtZT1cImdldFNlbGVjdGVkU2NoZW1lXCIsZS5TZXRTZWxlY3RlZFNjaGVtZT1cInNldFNlbGVjdGVkU2NoZW1lXCIsZS5PcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsXCIsZS5PcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWxcIixlLk9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuT3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsPVwib3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsXCIsZS5JbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbD1cImludm9rZUN1c3RvbUFjdGlvbkludGVybmFsXCIsZS5SZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWw9XCJyZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWxcIixlLkdldFNhdmVkV29ya3NwYWNlPVwiZ2V0U2F2ZWRXb3Jrc3BhY2VcIixlLkNyZWF0ZVNhdmVkV29ya3NwYWNlPVwiY3JlYXRlU2F2ZWRXb3Jrc3BhY2VcIixlLlVwZGF0ZVNhdmVkV29ya3NwYWNlPVwidXBkYXRlU2F2ZWRXb3Jrc3BhY2VcIixlLkRlbGV0ZVNhdmVkV29ya3NwYWNlPVwiZGVsZXRlU2F2ZWRXb3Jrc3BhY2VcIixlLkdldFNhdmVkV29ya3NwYWNlcz1cImdldFNhdmVkV29ya3NwYWNlc1wiLGUuR2V0U2F2ZWRXb3Jrc3BhY2VzTWV0YWRhdGE9XCJnZXRTYXZlZFdvcmtzcGFjZXNNZXRhZGF0YVwiLGUuU2F2ZVdvcmtzcGFjZT1cInNhdmVXb3Jrc3BhY2VcIixlLkdldEN1cnJlbnRXb3Jrc3BhY2U9XCJnZXRDdXJyZW50V29ya3NwYWNlXCIsZS5BcHBseVdvcmtzcGFjZT1cImFwcGx5V29ya3NwYWNlXCIsZS5SZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWw9XCJyZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWxcIixlLlNldEFjdGl2ZVdvcmtzcGFjZT1cInNldEFjdGl2ZVdvcmtzcGFjZVwiLGUuSXNCcm93c2VySW5pdGlhbGl6ZWQ9XCJpc0Jyb3dzZXJJbml0aWFsaXplZFwiLGUuQW5hbHl0aWNzPVwiYW5hbHl0aWNzSW50ZXJuYWxcIixlLkdldExhbmd1YWdlPVwiZ2V0TGFuZ3VhZ2VcIixlLkdldExhbmd1YWdlUmVzb3VyY2VzSW50ZXJuYWw9XCJnZXRMYW5ndWFnZVJlc291cmNlc0ludGVybmFsXCIsZS5TZXRMYW5ndWFnZT1cInNldExhbmd1YWdlXCIsZS5HZXREb2NrUHJvdmlkZXJDb25maWc9XCJnZXREb2NrUHJvdmlkZXJDb25maWdcIixlLlNhdmVEb2NrUHJvdmlkZXJDb25maWc9XCJzYXZlRG9ja1Byb3ZpZGVyQ29uZmlnXCIsZS5IYW5kbGVTYXZlTW9kYWxPblBhZ2VDbG9zZT1cImhhbmRsZVNhdmVNb2RhbE9uUGFnZUNsb3NlXCIsZS5TaG91bGRQYWdlQ2xvc2U9XCJzaG91bGRQYWdlQ2xvc2VcIixlLlNob3VsZFdpbmRvd0Nsb3NlPVwic2hvdWxkV2luZG93Q2xvc2VcIixlLkNvcHlQYWdlPVwiY29weVBhZ2VcIixlLkhhbmRsZVBhZ2VDaGFuZ2VzPVwiaGFuZGxlUGFnZUNoYW5nZXNcIixlLk1hcmtVbnNhdmVkUGFnZXNBc1NhdmVkSW50ZXJuYWw9XCJtYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsXCIsZS5UcmFja1JlbW92ZWRUYWJJbnRlcm5hbD1cInRyYWNrUmVtb3ZlZFRhYkludGVybmFsXCIsZS5SZXN0b3JlUmVtb3ZlZFRhYkludGVybmFsPVwicmVzdG9yZVJlbW92ZWRUYWJJbnRlcm5hbFwiLGUuVHJhY2tWaXNpdGVkU2l0ZUludGVybmFsPVwidHJhY2tWaXNpdGVkU2l0ZUludGVybmFsXCIsZS5HZXRSZWNlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsPVwiZ2V0UmVjZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbFwiLGUuR2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsPVwiZ2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsXCIsZS5TZWFyY2hTaXRlc0ludGVybmFsPVwic2VhcmNoU2l0ZXNJbnRlcm5hbFwiLGUuR2V0U2VhcmNoUHJvdmlkZXJzSW50ZXJuYWw9XCJnZXRTZWFyY2hQcm92aWRlcnNJbnRlcm5hbFwiLGUuR2V0Q3VyYXRlZENvbnRlbnRJbnRlcm5hbD1cImdldEN1cmF0ZWRDb250ZW50SW50ZXJuYWxcIixlLkhhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uSW50ZXJuYWw9XCJoYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbkludGVybmFsXCIsZS5SZWZyZXNoQm9va21hcmtzSW50ZXJuYWw9XCJyZWZyZXNoQm9va21hcmtzSW50ZXJuYWxcIixlLkxhdW5jaEJvb2ttYXJrSW50ZXJuYWw9XCJsYXVuY2hCb29rbWFya0ludGVybmFsXCIsZS5HZXROb3RpZmljYXRpb25zQ29uZmlnPVwiZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZ1wiLGUuVXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsPVwidXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsXCIsZS5VcGRhdGVDb250ZW50TWVudUludGVybmFsPVwidXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbFwiLGUuTGF1bmNoRG9ja0VudHJ5SW50ZXJuYWw9XCJsYXVuY2hEb2NrRW50cnlJbnRlcm5hbFwiLGUuU2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWw9XCJzZXREb2NrRmF2b3JpdGVzT3JkZXJJbnRlcm5hbFwiLGUuTmF2aWdhdGVDb250ZW50TWVudUludGVybmFsPVwibmF2aWdhdGVDb250ZW50TWVudUludGVybmFsXCIsZS5TZXREZWZhdWx0RG9ja0J1dHRvbnNPcmRlckludGVybmFsPVwic2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbFwiLGUuR2V0RG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsPVwiZ2V0RG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsXCIsZS5IYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsPVwiaGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbFwiLGUuUmVtb3ZlRG9ja0Zhdm9yaXRlSW50ZXJuYWw9XCJyZW1vdmVEb2NrRmF2b3JpdGVJbnRlcm5hbFwiLGUuQWRkRG9ja0Zhdm9yaXRlSW50ZXJuYWw9XCJhZGREb2NrRmF2b3JpdGVJbnRlcm5hbFwiLGUuRm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbD1cImZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWxcIixlLlNlbmRVcGRhdGVWZXJzaW9uTW9kYWxSZXNwb25zZUludGVybmFsPVwic2VuZFVwZGF0ZVZlcnNpb25Nb2RhbFJlc3BvbnNlSW50ZXJuYWxcIixlLlNob3dVcGRhdGVWZXJzaW9uTW9kYWxJbnRlcm5hbD1cInNob3dVcGRhdGVWZXJzaW9uTW9kYWxJbnRlcm5hbFwifShufHwobj17fSkpO2NvbnN0IHI9YXN5bmMgZT0+ZmluLlBsYXRmb3JtLndyYXBTeW5jKGUpLmdldENsaWVudCgpLG89YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgcihlKSxhPVwiVGFyZ2V0IGlzIG5vdCBhIFdvcmtzcGFjZSBQbGF0Zm9ybS4gVGFyZ2V0IG11c3QgY2FsbCBXb3Jrc3BhY2VQbGF0Zm9ybS5pbml0XCI7bGV0IG47dHJ5e249YXdhaXQgdC5kaXNwYXRjaChcImlzV29ya3NwYWNlUGxhdGZvcm1cIil9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGEpfWlmKFwiYm9vbGVhblwiPT10eXBlb2YgbiYmbilyZXR1cm4gY29uc29sZS53YXJuKFwiWW91IGFyZSB1c2luZyBhbiBvbGRlciB2ZXJzaW9uIG9mIHRoZSB3b3Jrc3BhY2UgcGxhdGZvcm0uIFBsZWFzZSB1cGRhdGUgeW91ciB3b3Jrc3BhY2UgcGxhdGZvcm0uXCIpLG47aWYoXCJvYmplY3RcIj09dHlwZW9mIG4mJm4uaXNXb3Jrc3BhY2VQbGF0Zm9ybSlyZXR1cm4gbjt0aHJvdyBuZXcgRXJyb3IoYSl9LGk9YXN5bmMgZT0+KGF3YWl0IG8oZSkscihlKSkscz1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCBvKGUpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0JiYhMCE9PXQ/LmlzQnJvd3NlckluaXRpYWxpemVkKXRocm93IG5ldyBFcnJvcihcIlRhcmdldCBpcyBub3QgYSBCcm93c2VyLWVuYWJsZWQgV29ya3NwYWNlIFBsYXRmb3JtLlwiKTtyZXR1cm4gcihlKX19LDY5NTooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5kKHQse043OigpPT5mLGdqOigpPT5sLG1ROigpPT5oLG5BOigpPT5wLHA0OigpPT5jfSk7dmFyIG49YSgxMDIpLHI9YSg3MjMpLG89YSg3MCksaT1hKDkwNSk7Y29uc3Qgcz0oMCxuLkEpKFwiX19vZl93b3Jrc3BhY2VfcHJvdG9jb2xfX1wiKSxjPXMsZD1zLGw9KDAsbi5BKShpLkJUKSx1PWU9Pntjb25zdCB0PW5ldyBVUkwoZSk7cmV0dXJuIHQuc2VhcmNoUGFyYW1zLmFwcGVuZChcImlzTGF1bmNoZWRWaWFMaWJcIixcInRydWVcIiksdC50b1N0cmluZygpfSxwPWFzeW5jKCk9PntpZighYXdhaXQoMCxvLkMpKG8ueHQpKXtpZihyLmp3fHwtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIldpblwiKSlyZXR1cm4gdm9pZCBhd2FpdCBmaW4uQXBwbGljYXRpb24uc3RhcnRGcm9tTWFuaWZlc3QodShyLm03KSk7YXdhaXQgZmluLlN5c3RlbS5vcGVuVXJsV2l0aEJyb3dzZXIodShyLnQ4KSl9fSxoPWFzeW5jKCk9Pihhd2FpdCBwKCksYygpKSxmPWFzeW5jKCk9Pihhd2FpdCBwKCksZCgpKX0sOTA1OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthLmQodCx7QlQ6KCk9Pm4sWm86KCk9Pm99KTtjb25zdCBuPVwiX19zZWFyY2gtb3BlbmZpbi1icm93c2VyLWhvbWUtdG9waWNfX1wiO3ZhciByLG87IWZ1bmN0aW9uKGUpe2UuRmV0Y2hpbmc9XCJmZXRjaGluZ1wiLGUuRmV0Y2hlZD1cImZldGNoZWRcIixlLkNvbXBsZXRlPVwiY29tcGxldGVcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlW2UuSW5pdGlhbD0wXT1cIkluaXRpYWxcIixlW2UuT3Blbj0xXT1cIk9wZW5cIixlW2UuQ2xvc2U9Ml09XCJDbG9zZVwifShvfHwobz17fSkpfSw5NTc6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtxcTooKT0+UyxsNTooKT0+UH0pO3ZhciBuPWEoODQ3KSxyPWEoODk4KSxvPWEoNzApLGk9YSgyNTQpLHM9YSg2NzUpLGM9YSg4NzcpLGQ9YS5uKGMpLGw9YSg2NyksdT1hLm4obCk7Y29uc3QgcD17bGlnaHQ6e3N5bWJvbDp1KCk/LnNyY3x8XCJcIn0sZGFyazp7c3ltYm9sOmQoKT8uc3JjfHxcIlwifX07YSg2OTUpO3ZhciBoPWEoNzkpO2NvbnN0IGY9XCJkYXJrXCIsZz17W24uUGFsZXR0ZS5icmFuZFByaW1hcnldOlwiIzBBNzZEM1wiLFtuLlBhbGV0dGUuYnJhbmRQcmltYXJ5QWN0aXZlXTpcIiMwQTcxQzlcIixbbi5QYWxldHRlLmJyYW5kUHJpbWFyeUhvdmVyXTpcIiMwQjg0RUJcIixbbi5QYWxldHRlLmJyYW5kUHJpbWFyeUZvY3VzZWRdOm4uQ29sb3Iud2hpdGUsW24uUGFsZXR0ZS5icmFuZFByaW1hcnlUZXh0XTpuLkNvbG9yLndoaXRlLFtuLlBhbGV0dGUuc3RhdHVzU3VjY2Vzc106bi5Db2xvci5mdW5jdGlvbmFsMSxbbi5QYWxldHRlLnN0YXR1c1dhcm5pbmddOm4uQ29sb3IuZnVuY3Rpb25hbDEwLFtuLlBhbGV0dGUuc3RhdHVzQ3JpdGljYWxdOm4uQ29sb3IuZnVuY3Rpb25hbDcsW24uUGFsZXR0ZS5zdGF0dXNBY3RpdmVdOm4uQ29sb3IuZnVuY3Rpb25hbDMsW24uUGFsZXR0ZS5jb250ZW50QmFja2dyb3VuZDFdOlwiIzBBNzZEM1wiLFtuLlBhbGV0dGUuY29udGVudEJhY2tncm91bmQyXTpcIiMwMDAwMDBcIixbbi5QYWxldHRlLmNvbnRlbnRCYWNrZ3JvdW5kM106XCIjMDAwMDAwXCIsW24uUGFsZXR0ZS5jb250ZW50QmFja2dyb3VuZDRdOlwiIzAwMDAwMFwiLFtuLlBhbGV0dGUuY29udGVudEJhY2tncm91bmQ1XTpcIiMwMDAwMDBcIixbbi5QYWxldHRlLmJvcmRlck5ldXRyYWxdOm4uQ29sb3Iuc2lsdmVyR3JheX0sbT17Li4uZyxbbi5QYWxldHRlLmJhY2tncm91bmQxXTpuLkNvbG9yLndoaXRlLFtuLlBhbGV0dGUuYmFja2dyb3VuZDJdOm4uQ29sb3IubGlnaHRHcmF5MSxbbi5QYWxldHRlLmJhY2tncm91bmQzXTpuLkNvbG9yLmxpZ2h0R3JheTIsW24uUGFsZXR0ZS5iYWNrZ3JvdW5kNF06bi5Db2xvci5saWdodEdyYXkzLFtuLlBhbGV0dGUuYmFja2dyb3VuZDVdOm4uQ29sb3IubGlnaHRHcmF5NCxbbi5QYWxldHRlLmJhY2tncm91bmQ2XTpuLkNvbG9yLmxpZ2h0R3JheTUsW24uUGFsZXR0ZS5icmFuZFNlY29uZGFyeV06bi5Db2xvci5saWdodEdyYXk0LFtuLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnlBY3RpdmVdOm4uQ29sb3IubGlnaHRHcmF5NEFjdGl2ZSxbbi5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5SG92ZXJdOm4uQ29sb3IubGlnaHRHcmF5NEhvdmVyLFtuLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnlGb2N1c2VkXTpuLkNvbG9yLmRhcmtHcmF5NSxbbi5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5VGV4dF06bi5Db2xvci5kYXJrR3JheTUsW24uUGFsZXR0ZS5pbnB1dEJhY2tncm91bmRdOm4uQ29sb3IubGlnaHRHcmF5Myxbbi5QYWxldHRlLmlucHV0Q29sb3JdOm4uQ29sb3IuZGFya0dyYXk1LFtuLlBhbGV0dGUuaW5wdXRQbGFjZWhvbGRlcl06bi5Db2xvci5kYXJrR3JheTIsW24uUGFsZXR0ZS5pbnB1dERpc2FibGVkXTpuLkNvbG9yLm5ldXRyYWxHcmF5LFtuLlBhbGV0dGUuaW5wdXRGb2N1c2VkXTpuLkNvbG9yLmxpZ2h0R3JheTUsW24uUGFsZXR0ZS5pbnB1dEJvcmRlcl06bi5Db2xvci5uZXV0cmFsR3JheSxbbi5QYWxldHRlLnRleHREZWZhdWx0XTpuLkNvbG9yLmRhcmtHcmF5NSxbbi5QYWxldHRlLnRleHRIZWxwXTpuLkNvbG9yLmRhcmtHcmF5Myxbbi5QYWxldHRlLnRleHRJbmFjdGl2ZV06bi5Db2xvci5uZXV0cmFsR3JheX0sdz17Li4uZyxbbi5QYWxldHRlLmJhY2tncm91bmQxXTpuLkNvbG9yLmRhcmtHcmF5Nixbbi5QYWxldHRlLmJhY2tncm91bmQyXTpuLkNvbG9yLmRhcmtHcmF5NSxbbi5QYWxldHRlLmJhY2tncm91bmQzXTpuLkNvbG9yLmRhcmtHcmF5NCxbbi5QYWxldHRlLmJhY2tncm91bmQ0XTpuLkNvbG9yLmRhcmtHcmF5Myxbbi5QYWxldHRlLmJhY2tncm91bmQ1XTpuLkNvbG9yLmRhcmtHcmF5Mixbbi5QYWxldHRlLmJhY2tncm91bmQ2XTpuLkNvbG9yLmRhcmtHcmF5MSxbbi5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5XTpuLkNvbG9yLmRhcmtHcmF5Mixbbi5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5QWN0aXZlXTpuLkNvbG9yLmRhcmtHcmF5MkFjdGl2ZSxbbi5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5SG92ZXJdOm4uQ29sb3IuZGFya0dyYXkySG92ZXIsW24uUGFsZXR0ZS5icmFuZFNlY29uZGFyeUZvY3VzZWRdOm4uQ29sb3Iud2hpdGUsW24uUGFsZXR0ZS5icmFuZFNlY29uZGFyeVRleHRdOm4uQ29sb3Iud2hpdGUsW24uUGFsZXR0ZS5pbnB1dEJhY2tncm91bmRdOm4uQ29sb3IuZGFya0dyYXkxLFtuLlBhbGV0dGUuaW5wdXRDb2xvcl06bi5Db2xvci53aGl0ZSxbbi5QYWxldHRlLmlucHV0UGxhY2Vob2xkZXJdOm4uQ29sb3IubGlnaHRHcmF5NSxbbi5QYWxldHRlLmlucHV0RGlzYWJsZWRdOm4uQ29sb3IubmV1dHJhbEdyYXksW24uUGFsZXR0ZS5pbnB1dEZvY3VzZWRdOm4uQ29sb3IubGlnaHRHcmF5NSxbbi5QYWxldHRlLmlucHV0Qm9yZGVyXTpuLkNvbG9yLm5ldXRyYWxHcmF5LFtuLlBhbGV0dGUudGV4dERlZmF1bHRdOm4uQ29sb3Iud2hpdGUsW24uUGFsZXR0ZS50ZXh0SGVscF06bi5Db2xvci5saWdodEdyYXk1LFtuLlBhbGV0dGUudGV4dEluYWN0aXZlXTpuLkNvbG9yLm5ldXRyYWxHcmF5fSx5PVt7bGFiZWw6XCJPcGVuRmluIERlZmF1bHQgTGlnaHQgYW5kIERhcmsgVGhlbWVcIixwYWxldHRlczp7bGlnaHQ6ey4uLm0sYmFja2dyb3VuZFByaW1hcnk6bi5Db2xvci5kYXJrR3JheTV9LGRhcms6ey4uLncsYmFja2dyb3VuZFByaW1hcnk6bi5Db2xvci5kYXJrR3JheTV9fX1dLGs9ZT0+e2NvbnN0e2JhY2tncm91bmQ6dCxmb3JlZ3JvdW5kOmF9PWU7cmV0dXJue2JhY2tncm91bmQ6dCxmb3JlZ3JvdW5kOmE/P1wiI0ZGRkZGRlwifX0sdj0oZSx0KT0+KHtpY29uczp7c3ltYm9sOmUuYnJhbmQ/Lmljb25zPy5bdF0/LnN5bWJvbHx8cFt0XS5zeW1ib2x9fSksYj1lPT57Y29uc3R7bGlnaHQ6dCxkYXJrOmF9PVwicGFsZXR0ZXNcImluIGU/ZS5wYWxldHRlczp7bGlnaHQ6ZS5wYWxldHRlLGRhcms6ZS5wYWxldHRlfSxvPSgwLHIuS0QpKHcsYSksaT0oMCxyLktEKShtLHQpLHM9KChlLHQpPT57Y29uc3QgYT17Li4uZX0sbj17Li4udH07bGV0IG89dC5iYWNrZ3JvdW5kUHJpbWFyeT8oMCxyLnB1KSh0LmJhY2tncm91bmRQcmltYXJ5LCEwKTp7fSxpPWUuYmFja2dyb3VuZFByaW1hcnk/KDAsci5wdSkoZS5iYWNrZ3JvdW5kUHJpbWFyeSk6e307cmV0dXJuIG89ey4uLm8sLi4ubn0saT17Li4uaSwuLi5hfSx7bGlnaHQ6ey4uLnQsLi4ub30sZGFyazp7Li4uZSwuLi5pfX19KShhLHQpLGM9ey4uLigwLG4uY3JlYXRlVGhlbWUpKHsuLi5vLC4uLnM/LmRhcmt9KSxicmFuZDp2KGUsXCJkYXJrXCIpfSxkPXsuLi4oMCxuLmNyZWF0ZVRoZW1lKSh7Li4uaSwuLi5zPy5saWdodH0pLGJyYW5kOnYoZSxcImxpZ2h0XCIpfSx7bGlnaHQ6bCxkYXJrOnV9PShlPT57Y29uc3QgdD1PYmplY3Qua2V5cyhlLm5vdGlmaWNhdGlvbkluZGljYXRvckNvbG9ycz8/e30pO2lmKHQ/Lmxlbmd0aCl7Y29uc3QgYT17fSxuPXt9O3JldHVybiB0LmZvckVhY2goKHQ9Pntjb25zdCByPWUubm90aWZpY2F0aW9uSW5kaWNhdG9yQ29sb3JzW3RdO1wiYmFja2dyb3VuZFwiaW4gcj8oYVt0XT1rKHIpLG5bdF09ayhyKSk6KGFbdF09ayhyLmRhcms/P3IubGlnaHQpLG5bdF09ayhyLmxpZ2h0Pz9yLmRhcmspKX0pKSx7bGlnaHQ6bixkYXJrOmF9fXJldHVybntsaWdodDpudWxsLGRhcms6bnVsbH19KShlKTtyZXR1cm4gYy5ub3RpZmljYXRpb25JbmRpY2F0b3JDb2xvcnM9dSxkLm5vdGlmaWNhdGlvbkluZGljYXRvckNvbG9ycz1sLHtkYXJrOmMsbGlnaHQ6ZH19LFM9YXN5bmMgZT0+e2NvbnN0e3RoZW1lczp0LHNlbGVjdGVkU2NoZW1lOmF9PWF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PWZpbj8uX19pbnRlcm5hbF8/LmluaXRpYWxPcHRpb25zPy53b3Jrc3BhY2VQbGF0Zm9ybT8uX3RoZW1lRGF0YTtpZighdHx8ZS51dWlkIT09by4kcC51dWlkKXJldHVybnt0aGVtZXM6YXdhaXQoMCxpLkFnKShlKS5UaGVtZS5nZXRUaGVtZXMoKSxzZWxlY3RlZFNjaGVtZTphd2FpdCgwLGkuQWcpKGUpLlRoZW1lLmdldFNlbGVjdGVkU2NoZW1lKCl9O3JldHVybiB0fSkoZSk7dmFyIG4scjtyZXR1cm4obj10Py5sZW5ndGg/dDp5LHI9YSxuLm1hcCgoZT0+e2NvbnN0IHQ9XCJwYWxldHRlc1wiaW4gZT9lLmRlZmF1bHQ6Zix7bGlnaHQ6YSxkYXJrOm59PWIoZSk7cmV0dXJue2xhYmVsOmUubGFiZWwsbG9nb1VybDplLmxvZ29VcmwsdGhlbWU6e2Rhcms6bixsaWdodDphfSxkZWZhdWx0U2NoZW1lOnI/P3R9fSkpKVswXX0sUD1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCgwLGguTikoZXx8ZmluLm1lLmlkZW50aXR5KSxhPWF3YWl0IHQuZGlzcGF0Y2goaC5PRi5HZXRTZWxlY3RlZFNjaGVtZSx2b2lkIDApO3JldHVybiBhPT09cy5xVC5TeXN0ZW0/d2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLm1hdGNoZXM/XCJkYXJrXCI6XCJsaWdodFwiOmF9fSw0Mzg6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtCWTooKT0+bCxNVzooKT0+bix2MTooKT0+ZH0pO3ZhciBuLHIsbz1hKDcyMyk7IWZ1bmN0aW9uKGUpe2UuV29ya3NwYWNlPVwib3BlbmZpbi13b3Jrc3BhY2VcIixlLk9sZFdvcmtzcGFjZT1cIm9wZW5maW4tYnJvd3NlclwifShufHwobj17fSkpLGZ1bmN0aW9uKGUpe2UuRmluUHJvdG9jb2w9XCJmaW4tcHJvdG9jb2xcIn0ocnx8KHI9e30pKTtjb25zdCBpPXt1dWlkOm8uJGh9LHM9e3V1aWQ6bi5Xb3Jrc3BhY2V9LGM9ZT0+e2lmKCFvLmNJKXRocm93IG5ldyBFcnJvcihcImdldEFwcGxpY2F0aW9uIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uIE9wZW5GaW4gZW52LiBBdm9pZCB1c2luZyB0aGlzIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKGUpfSxkPSgpPT5jKGkpLGw9KCk9PmMocyl9LDEwMjooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5kKHQse0E6KCk9Pm99KTt2YXIgbj1hKDcyMyk7Y29uc3Qgcj1uLllZJiZcImNvbXBsZXRlXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlJiZuZXcgUHJvbWlzZSgoZT0+ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwoKCk9PntcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiZlKCl9KSkpKTtmdW5jdGlvbiBvKGUpe2xldCB0O2NvbnN0IGE9bmV3IFNldDtyZXR1cm4oKT0+e2lmKCFuLmNJKXRocm93IG5ldyBFcnJvcihcImdldENoYW5uZWxDbGllbnQgY2Fubm90IGJlIHVzZWQgb3V0c2lkZSBhbiBPcGVuRmluIGVudi4gQXZvaWQgdXNpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiB0fHwodD0oYXN5bmMoKT0+e2F3YWl0IHI7Y29uc3Qgbz17Y2xpZW50QVBJVmVyc2lvbjpuLmV0fSxpPWF3YWl0IGZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChlLHtwYXlsb2FkOm99KTtyZXR1cm4gaS5vbkRpc2Nvbm5lY3Rpb24oKGFzeW5jKCk9PnthLmZvckVhY2goKGU9PmUoKSkpLGEuY2xlYXIoKSxjb25zb2xlLndhcm4oYGRpc2Nvbm5lY3RlZCBmcm9tIGNoYW5uZWwgcHJvdmlkZXIgJHtlfWApLHQ9dm9pZCAwfSkpLGl9KSgpLnRoZW4oKGU9PihlLmFkZERpc2Nvbm5lY3Rpb25MaXN0ZW5lcj1lPT57YS5hZGQoZSl9LGUpKSkuY2F0Y2goKGE9Pnt0aHJvdyB0PXZvaWQgMCxuZXcgRXJyb3IoYGZhaWxlZCB0byBjb25uZWN0IHRvIGNoYW5uZWwgcHJvdmlkZXIgJHtlfTogJHthfWApfSkpKSx0fX19LDcyMzooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIG47YS5kKHQseyRoOigpPT5jLEFUOigpPT5pLEhkOigpPT5wLFlZOigpPT5vLGJEOigpPT5tLGNJOigpPT5yLGV0OigpPT53LGZUOigpPT5sLGp3OigpPT51LG03OigpPT5mLHQ4OigpPT5oLHZMOigpPT5kfSksZnVuY3Rpb24oZSl7ZS5Mb2NhbD1cImxvY2FsXCIsZS5EZXY9XCJkZXZcIixlLlN0YWdpbmc9XCJzdGFnaW5nXCIsZS5Qcm9kPVwicHJvZFwifShufHwobj17fSkpO2NvbnN0IHI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbixvPShcInVuZGVmaW5lZFwiPT10eXBlb2YgcHJvY2Vzc3x8cHJvY2Vzcy5lbnYsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyksaT1vJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgaW5kZXhlZERCLHM9bz93aW5kb3cub3JpZ2luOm4uTG9jYWwsYz1yJiZmaW4ubWUudXVpZCxkPXImJmZpbi5tZS5uYW1lLGw9ciYmZmluLm1lLmVudGl0eVR5cGUsdT1cInByb2RcIj09PW4uTG9jYWwscD0obi5EZXYsbi5TdGFnaW5nLFwicHJvZFwiPT09bi5Qcm9kKSxoPVwiZmluczovL3N5c3RlbS1hcHBzL3dvcmtzcGFjZVwiLGY9XCJodHRwczovL3dvcmtzcGFjZS5vcGVuZmluLmNvL3dvcmtzcGFjZS8yMi4zLjkvYXBwLmpzb25cIixnPWU9PmUuc3RhcnRzV2l0aChcImh0dHA6Ly9cIil8fGUuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpP2U6cytlLG09KGcoXCJodHRwczovL3dvcmtzcGFjZS5vcGVuZmluLmNvL3dvcmtzcGFjZS8yMi4zLjlcIiksZyhcImh0dHBzOi8vd29ya3NwYWNlLm9wZW5maW4uY28vd29ya3NwYWNlLzIyLjMuOVwiKSksdz0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9ET0NTX1BMQVRGT1JNX1VSTCYmZyhXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMJiZnKFdPUktTUEFDRV9ET0NTX0NMSUVOVF9VUkwpLFwiMjIuMy45XCIpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfQlVJTERfU0hBJiZXT1JLU1BBQ0VfQlVJTERfU0hBfSw3ODY6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtBOigpPT5yfSk7Y29uc3Qgbj1cIm9mLXdvcmtzcGFjZS1cIjtjb25zdCByPW5ldyBjbGFzc3ttYXJrKGUpe3BlcmZvcm1hbmNlLm1hcmsoYCR7bn0ke2V9YCl9bWFya1N0YXJ0KGUpe3BlcmZvcm1hbmNlLm1hcmsoYCR7bn0ke2V9LXN0YXJ0YCl9bWFya0VuZChlKXtwZXJmb3JtYW5jZS5tYXJrKGAke259JHtlfS1lbmRgKX1tYXJrRW5kQW5kTWVhc3VyZShlKXtwZXJmb3JtYW5jZS5tYXJrKGAke259JHtlfS1lbmRgKTt0cnl7cmV0dXJuIHBlcmZvcm1hbmNlLm1lYXN1cmUoYCR7bn0ke2V9YCxgJHtufSR7ZX0tc3RhcnRgLGAke259JHtlfS1lbmRgKX1jYXRjaChlKXswfX1tYXJrQW5kTWVhc3VyZShlLHQpe3BlcmZvcm1hbmNlLm1hcmsoYCR7bn0ke2V9YCk7dHJ5e3JldHVybiBwZXJmb3JtYW5jZS5tZWFzdXJlKGAke259JHtlfS1tZWFzdXJlYCxgJHtufSR7dH0tc3RhcnRgLGAke259JHtlfWApfWNhdGNoKGUpezB9fXJlcG9ydFdvcmtzcGFjZVBlcmZvcm1hbmNlRW50cmllcygpe3JldHVybiBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibWVhc3VyZVwiKS5maWx0ZXIoKGU9PmUubmFtZS5zdGFydHNXaXRoKG4pKSl9cmVwb3J0V29ya3NwYWNlUGVyZm9ybWFuY2UoKXtyZXR1cm4gdGhpcy5yZXBvcnRXb3Jrc3BhY2VQZXJmb3JtYW5jZUVudHJpZXMoKS5tYXAoKGU9Pih7bmFtZTplLm5hbWUucmVwbGFjZShgJHtufWAsXCJcIikucmVwbGFjZShcIi1tZWFzdXJlXCIsXCJcIiksZHVyYXRpb246ZS5kdXJhdGlvbn0pKSl9fX0sMTgxOihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjt2YXIgbixyO2EuZCh0LHtBeTooKT0+ZCxzUDooKT0+c30pLGZ1bmN0aW9uKGUpe2UuSG9tZT1cIi9ob21lL1wiLGUuSG9tZVNlYXJjaD1cIi9ob21lLz9kZWVwbGluaz1zZWFyY2hcIixlLkhvbWVQYWdlc1JlbmFtZT1cIi9ob21lL3BhZ2VzL3JlbmFtZS9cIixlLkRvY2s9XCIvZG9jay9cIixlLkRvY3M9XCIvcHJvdmlkZXIvZG9jcy9cIixlLlN0b3JlZnJvbnQ9XCIvc3RvcmVmcm9udC9cIixlLkRlcHJlY2F0ZWRBbGVydD1cIi9wcm92aWRlci9kZXByZWNhdGVkLWFsZXJ0L1wiLGUuQW5hbHl0aWNzPVwiL3Byb3ZpZGVyL2FuYWx5dGljcy9cIixlLlByb3ZpZGVyPVwiL3Byb3ZpZGVyL1wifShufHwobj17fSkpLGZ1bmN0aW9uKGUpe2UuQnJvd3Nlcj1cIi9icm93c2VyL1wiLGUuQnJvd3NlclBvcHVwTWVudT1cIi9wb3B1cC1tZW51L1wiLGUuQnJvd3NlclBvcHVwTWVudVNhdmVNb2RhbD1cIi9wb3B1cC1tZW51L3NhdmUtbW9kYWwvXCIsZS5Ccm93c2VyUG9wdXBNZW51TGF5b3V0cz1cIi9wb3B1cC1tZW51L2xheW91dHMvbGF5b3V0cy9cIixlLkJyb3dzZXJQb3B1cE1lbnVDb2xvckxpbmtpbmc9XCIvcG9wdXAtbWVudS9jb2xvci1saW5raW5nL2NvbG9yLWxpbmtpbmcvXCIsZS5Ccm93c2VySW5kaWNhdG9yPVwiL2luZGljYXRvci9cIixlLkJyb3dzZXJQb3B1cE1lbnVBZGRyZXNzU2VhcmNoUmVzdWx0c1ZpZXc9XCIvcG9wdXAtbWVudS9hZGRyZXNzLXNlYXJjaC1yZXN1bHRzLXZpZXcvXCIsZS5SZXNwb25zZU1vZGFsPVwiL3BvcHVwLW1lbnUvcmVzcG9uc2UtbW9kYWwvXCIsZS5DbG9zZUNvbmZpcm1hdGlvbk1vZGFsPVwiL3BvcHVwLW1lbnUvY2xvc2UtY29uZmlybWF0aW9uLW1vZGFsL1wiLGUuRW50ZXJwcmlzZUJyb3dzZXI9XCIvZW50ZXJwcmlzZS9cIixlLkVudGVycHJpc2VMYW5kaW5nUGFnZT1cIi9lbnRlcnByaXNlL2xhbmRpbmcvXCIsZS5FbnRlcnByaXNlQ29udGV4dE1lbnU9XCIvY29udGV4dC1tZW51L1wiLGUuRW50ZXJwcmlzZUJvb2ttYXJrRGlhbG9nPVwiL2Jvb2ttYXJrLWRpYWxvZy9cIixlLkVudGVycHJpc2VBYm91dFBhZ2U9XCIvcG9wdXAtbWVudS9hYm91dC9cIixlLkRyb3Bkb3duTWVudT1cIi9kcm9wZG93bi1tZW51L1wiLGUuRW50ZXJwcmlzZURvY2s9XCIvZG9jay9cIixlLlpvb21Db250cm9sc0RpYWxvZz1cIi96b29tLWNvbnRyb2xzLWRpYWxvZy9cIixlLkRlc2t0b3BTaWduYWxzTW9kYWw9XCIvcG9wdXAtbWVudS9kZXNrdG9wLXNpZ25hbHMtbW9kYWwvXCJ9KHJ8fChyPXt9KSk7Y29uc3Qgbz17Li4ubiwuLi5yfSxpPVwiL21pY3Jvc29mdC0zNjUtaW50ZWdyYXRpb24tYXNzZXRzL1wiLHM9e0ljb25PcGVuRmluTG9nbzpcIi9pY29ucy9vcGVuZmlubG9nby5zdmdcIixJY29uRmlsdGVyOlwiL2ljb25zL2ZpbHRlci5zdmdcIixMaWdodFN0b3JlZnJvbnQ6XCIvaWNvbnMvc3RvcmUtaWNvbi1saWdodC5wbmdcIixEYXJrU3RvcmVmcm9udDpcIi9pY29ucy9zdG9yZS1pY29uLWRhcmsucG5nXCIsQ2FsbEljb25MaWdodDpcIi9pY29ucy9jYWxsLWljb24tbGlnaHQuc3ZnXCIsQ2FsbEljb25EYXJrOlwiL2ljb25zL2NhbGwtaWNvbi1kYXJrLnN2Z1wiLENoYXRJY29uTGlnaHQ6XCIvaWNvbnMvY2hhdC1pY29uLWxpZ2h0LnN2Z1wiLENoYXRJY29uRGFyazpcIi9pY29ucy9jaGF0LWljb24tZGFyay5zdmdcIixNZXNzYWdlSWNvbkxpZ2h0OlwiL2ljb25zL21lc3NhZ2UtaWNvbi1saWdodC5zdmdcIixNZXNzYWdlSWNvbkRhcms6XCIvaWNvbnMvbWVzc2FnZS1pY29uLWRhcmsuc3ZnXCIsTWljcm9zb2Z0MzY1QXNzZXRzOntNaWNyb3NvZnQzNjVEb2N1bWVudEljb246YCR7aX1taWNyb3NvZnQtMzY1LWRvY3VtZW50LWljb24uc3ZnYCxNaWNyb3NvZnQzNjVFeGNlbEljb246YCR7aX1taWNyb3NvZnQtMzY1LWV4Y2VsLWljb24uc3ZnYCxNaWNyb3NvZnQzNjVQb3dlcnBvaW50SWNvbjpgJHtpfW1pY3Jvc29mdC0zNjUtcG93ZXJwb2ludC1pY29uLnN2Z2AsTWljcm9zb2Z0MzY1T3V0bG9va0ljb246YCR7aX1taWNyb3NvZnQtMzY1LW91dGxvb2staWNvbi5zdmdgLE1pY3Jvc29mdDM2NVRlYW1zSWNvbjpgJHtpfW1pY3Jvc29mdC0zNjUtdGVhbXMtaWNvbi5zdmdgLE1pY3Jvc29mdDM2NUljb246YCR7aX1taWNyb3NvZnQtMzY1LWljb24uc3ZnYCxQREZGaWxlSWNvbjpgJHtpfXBkZi1maWxlLWljb24uc3ZnYH0sRG9ja0ljb25MaWdodDpcIi9pY29ucy9kb2NrLWljb24tbGlnaHQucG5nXCIsRG9ja0ljb25EYXJrOlwiL2ljb25zL2RvY2staWNvbi1kYXJrLnBuZ1wifTt2YXIgYzshZnVuY3Rpb24oZSl7ZS5TZWFyY2g9XCJzZWFyY2hcIn0oY3x8KGM9e30pKTtjb25zdCBkPW99LDUyMzooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5kKHQse09YOigpPT5pLFR0OigpPT5zfSk7dmFyIG4scj1hKDcyMyk7IWZ1bmN0aW9uKGUpe2UuSG9tZT1cIi9ob21lXCIsZS5Ccm93c2VyPVwiL2Jyb3dzZXJcIixlLkVudGVycHJpc2U9XCIvZW50ZXJwcmlzZVwiLGUuUHJvdmlkZXI9XCIvcHJvdmlkZXJcIixlLlN0b3JlZnJvbnQ9XCIvc3RvcmVmcm9udFwiLGUuRG9jaz1cIi9kb2NrXCJ9KG58fChuPXt9KSk7Y29uc3Qgbz1cIi93b3Jrc3BhY2UvMjIuMy45XCI7ZnVuY3Rpb24gaShlKXtyZXR1cm4gbytlfWZ1bmN0aW9uIHMoZSx0KXtpZighci5ZWSl0aHJvdyBuZXcgRXJyb3IoXCJyZXNvbHZlQWJzb2x1dGVQYXRoIGNhbiBvbmx5IGJlIHVzZWQgaW4gYSB3aW5kb3dcIik7Y29uc3QgYT10Pz93aW5kb3cubG9jYXRpb247aWYoL14oPzpbYS16XSs6KT9cXC9cXC8vaS50ZXN0KGUpKXJldHVybiBlO2NvbnN0IG49YCR7YS5wcm90b2NvbH0vLyR7YS5ob3N0bmFtZX1gO3JldHVybiBuZXcgVVJMKGUsbikuaHJlZn19LDg5ODooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5kKHQse0tEOigpPT5jLGI0OigpPT5pLHB1OigpPT5zfSk7Y29uc3Qgbj1lPT5lLnJlcGxhY2UoL1teXFxkLF0vZyxcIlwiKS5zcGxpdChcIixcIikscj1lPT57aWYoZS5sZW5ndGg8Mil0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvbG9yIG9iamVjdCwgY2Fubm90IGNvbnZlcnQgdG8gSFNMLlwiKTtjb25zdCB0PWVbMF0vMjU1LGE9ZVsxXS8yNTUsbj1lWzJdLzI1NSxyPU1hdGgubWluKHQsYSxuKSxvPU1hdGgubWF4KHQsYSxuKSxpPW8tcjtsZXQgcz0wLGM9MCxkPTA7cmV0dXJuIHM9MD09PWk/MDpvPT09dD8oYS1uKS9pJTY6bz09PWE/KG4tdCkvaSsyOih0LWEpL2krNCxzPU1hdGgucm91bmQoNjAqcyksczwwJiYocys9MzYwKSxkPShvK3IpLzIsYz0wPT1pPzA6aS8oMS1NYXRoLmFicygyKmQtMSkpLGM9KygxMDAqYykudG9GaXhlZCgxKSxkPSsoMTAwKmQpLnRvRml4ZWQoMSkse2hzbDpgaHNsKCR7c30sICR7Y30lLCAke2R9JSlgLGhzbGE6YGhzbCgke3N9LCAke2N9JSwgJHtkfSUsIDEpYCxodWU6cyxsaWdodG5lc3M6ZCxzYXR1cmF0aW9uOmN9fSxvPWU9PntpZighZS5pbmNsdWRlcyhcIiNcIikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBoZXggdmFsdWUsIGNhbm5vdCBjb252ZXJ0IHRvIFJHQi4gSGV4IHZhbHVlIGJlZ2lucyB3aXRoIGEgaGFzaHRhZy5cIik7bGV0IHQ9MCxhPTAsbj0wO2lmKDQ9PT1lLmxlbmd0aCl0PWAweCR7ZVsxXX0ke2VbMV19YCxhPWAweCR7ZVsyXX0ke2VbMl19YCxuPWAweCR7ZVszXX0ke2VbM119YDtlbHNle2lmKDchPT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleCBzdHJpbmcgbGVuZ3RoLCBjYW5ub3QgY29udmVydCB0byBSR0IuXCIpO3Q9YDB4JHtlWzFdfSR7ZVsyXX1gLGE9YDB4JHtlWzNdfSR7ZVs0XX1gLG49YDB4JHtlWzVdfSR7ZVs2XX1gfXJldHVyblsrdCwrYSwrbl19LGk9ZT0+e2NvbnN0IHQ9ZTtpZih0LnN0YXJ0c1dpdGgoXCIjXCIpKXtyZXR1cm57cmdiOm8odCkuam9pbihcIiwgXCIpLGFscGhhOjF9fWNvbnN0IGE9dC5tYXRjaCgvXFxkezEsM30oXFwuXFxkKyk/L2cpO2lmKGEpe2NvbnN0W2UsdCxuLHJdPWE7cmV0dXJue3JnYjpgJHtlfSwgJHt0fSwgJHtufWAsYWxwaGE6dm9pZCAwIT09cj9wYXJzZUZsb2F0KHIpOjF9fXJldHVybntyZ2I6byhlKS5qb2luKFwiLCBcIiksYWxwaGE6MX19LHM9KGUsdD0hMSk9Pntjb25zdCBhPShlPT57aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ29sb3IgaXMgbm90IGRlZmluZWRcIik7Y29uc3QgdD1lLnRvTG93ZXJDYXNlKCk7bGV0IGE7aWYodC5pbmNsdWRlcyhcInJnYlwiKSl7Y29uc3QgZT1uKHQpO2UubGVuZ3RoPjMmJmUucG9wKCksYT1yKGUpLmh1ZX1pZih0LmluY2x1ZGVzKFwiI1wiKSl7Y29uc3QgZT1vKHQpO2E9cihlKS5odWV9dC5pbmNsdWRlcyhcImhzbFwiKSYmKGE9bih0KVswXSk7Y29uc3QgaT1hPy50b1N0cmluZygpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgSHVlIHdhcyB1bmFibGUgdG8gYmUgZXh0cmFjdGVkIGZyb20gXCIke3R9XCIsIGNoZWNrIGNvbG9yIGZvcm1hdC4gQWNjZXB0ZWQgZm9ybWF0cyBhcmU6IHJnYigpLCByZ2JhKCksIGhleCwgaHNsKCksIGFuZCBoc2xhKClgKTtyZXR1cm4gaX0pKGUpO3JldHVybiB0P3tiYWNrZ3JvdW5kMTpgaHNsYSgke2F9LCAwJSwgMTAwJSwgMSlgLGJhY2tncm91bmQyOmBoc2xhKCR7YX0sIDY3JSwgOTklLCAxKWAsYmFja2dyb3VuZDM6YGhzbGEoJHthfSwgMjYlLCA5NiUsIDEpYCxiYWNrZ3JvdW5kNDpgaHNsYSgke2F9LCAxNSUsIDk0JSwgMSlgLGJhY2tncm91bmQ1OmBoc2xhKCR7YX0sIDEwJSwgODglLCAxKWAsYmFja2dyb3VuZDY6YGhzbGEoJHthfSwgODAlLCA4MCUsIDEpYH06e2JhY2tncm91bmQxOmBoc2xhKCR7YX0sIDglLCA3JSwgMSlgLGJhY2tncm91bmQyOmBoc2xhKCR7YX0sIDglLCAxMyUsIDEpYCxiYWNrZ3JvdW5kMzpgaHNsYSgke2F9LCA5JSwgMTUlLCAxKWAsYmFja2dyb3VuZDQ6YGhzbGEoJHthfSwgNiUsIDIzJSwgMSlgLGJhY2tncm91bmQ1OmBoc2xhKCR7YX0sIDIxJSwgMjglLCAxKWAsYmFja2dyb3VuZDY6YGhzbGEoJHthfSwgNSUsIDUxJSwgMSlgfX0sYz0oZSx0KT0+e2NvbnN0IGE9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKG49PnthW25dPXRbbl0/dFtuXTplW25dfSkpLGF9fSwyNzc6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtHUjooKT0+cyxraTooKT0+ZCx4dDooKT0+Y30pO3ZhciBuLHI9YSg3MjMpLG89YSg3MCk7YSgyNTQpOyFmdW5jdGlvbihlKXtlLkJyb3dzZXI9XCJCcm93c2VyXCIsZS5Eb2NrPVwiRG9ja1wiLGUuRW50ZXJwcmlzZURvY2s9XCJFbnRlcnByaXNlRG9ja1wiLGUuSG9tZT1cIkhvbWVcIixlLk5vdGlmaWNhdGlvbj1cIk5vdGlmaWNhdGlvblwiLGUuU3RvcmVmcm9udD1cIlN0b3JlZnJvbnRcIixlLlBsYXRmb3JtPVwiUGxhdGZvcm1cIixlLlRoZW1pbmc9XCJUaGVtaW5nXCIsZS5NaWNyb2Zsb3c9XCJNaWNyb2Zsb3dcIn0obnx8KG49e30pKTtjb25zdCBpPWFzeW5jKGUsdCxhPVwid29ya3NwYWNlLWxpY2Vuc2luZ1wiKT0+e2NvbnN0IG49e2FwaVZlcnNpb246dC5hcGlWZXJzaW9ufHxyLmV0LGNvbXBvbmVudE5hbWU6ZSxjb21wb25lbnRWZXJzaW9uOnQuY29tcG9uZW50VmVyc2lvbnx8ci5ldCxhbGxvd2VkOnQuYWxsb3dlZCxyZWplY3Rpb25Db2RlOnQucmVqZWN0aW9uQ29kZX07ZmluLlN5c3RlbS5yZWdpc3RlclVzYWdlKHt0eXBlOmEsZGF0YTpufSl9O2NvbnN0IHM9ZT0+e28uRjIudXVpZD09PW8uJHAudXVpZCYmby5GMi5uYW1lPT09by4kcC5uYW1lfHxpKG4uSG9tZSxlKX0sYz1lPT57aShuLlN0b3JlZnJvbnQsZSl9LGQ9ZT0+e2kobi5Eb2NrLGUpfTtuZXcgTWFwfSwzMzM6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oKXtyZXR1cm4gdm9pZCAwIT09dHlwZW9mIGNyeXB0byYmXCJyYW5kb21VVUlEXCJpbiBjcnlwdG8mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNyeXB0by5yYW5kb21VVUlEP2NyeXB0by5yYW5kb21VVUlEKCk6XCIxMDAwMDAwMC0xMDAwLTQwMDAtODAwMC0xMDAwMDAwMDAwMDBcIi5yZXBsYWNlKC9bMDE4XS9nLChlPT4oZV5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSYxNT4+ZS80KS50b1N0cmluZygxNikpKX1hLmQodCx7TjooKT0+bn0pfSw3MDooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5kKHQseyRwOigpPT5sLEM6KCk9PnksRjI6KCk9PnAsSW86KCk9PncsSXE6KCk9PmQsUTooKT0+bixUNzooKT0+aCxUdjooKT0+dSxWMTooKT0+aSxWRTooKT0+cyxYcTooKT0+YyxnUTooKT0+ZixoYjooKT0+bSx1cjooKT0+ayx4dDooKT0+Z30pO3ZhciBuLHI9YSg0MzgpLG89YSg3MjMpOyFmdW5jdGlvbihlKXtlLkhvbWU9XCJvcGVuZmluLWhvbWVcIixlLkRvY2s9XCJvcGVuZmluLWRvY2tcIixlLlN0b3JlZnJvbnQ9XCJvcGVuZmluLXN0b3JlZnJvbnRcIixlLkhvbWVJbnRlcm5hbD1cIm9wZW5maW4taG9tZS1pbnRlcm5hbFwiLGUuQnJvd3Nlck1lbnU9XCJvcGVuZmluLWJyb3dzZXItbWVudVwiLGUuQnJvd3NlclNhdmVNZW51PVwib3BlbmZpbi1icm93c2VyLXNhdmUtbWVudVwiLGUuQnJvd3NlckluZGljYXRvcj1cIm9wZW5maW4tYnJvd3Nlci1pbmRpY2F0b3JcIixlLkJyb3dzZXJXaW5kb3c9XCJpbnRlcm5hbC1nZW5lcmF0ZWQtd2luZG93XCIsZS5DbGFzc2ljV2luZG93PVwiaW50ZXJuYWwtZ2VuZXJhdGVkLWNsYXNzaWMtd2luZG93XCIsZS5FbnRlcnByaXNlQ29udGV4dE1lbnU9XCJvcGVuZmluLWVudGVycHJpc2UtY29udGV4dC1tZW51XCIsZS5Ccm93c2VyQWRkcmVzc1NlYXJjaFByZWZpeD1cIm9wZW5maW4tYnJvd3Nlci1tZW51LWFkZHJlc3Mtc2VhcmNoLVwiLGUuRW50ZXJwcmlzZUJvb2ttYXJrRGlhbG9nV2luZG93PVwib3BlbmZpbi1lbnRlcnByaXNlLWJvb2ttYXJrLWRpYWxvZ1wiLGUuRHJvcGRvd25NZW51PVwib3BlbmZpbi1lbnRlcnByaXNlLWRyb3Bkb3duLW1lbnVcIixlLkRvY2tDb21wYW5pb249XCJvcGVuZmluLWRvY2stY29tcGFuaW9uXCIsZS5BSUNvbXBhbmlvblByZWZpeD1cIm9wZW5maW4tYWktY29tcGFuaW9uLVwiLGUuVXBkYXRlVmVyc2lvbk1vZGFsPVwiaGVyZS11cGRhdGUtdmVyc2lvbi1tb2RhbFwiLGUuWm9vbUNvbnRyb2xzRGlhbG9nPVwiaGVyZS16b29tLWNvbnRyb2xzLWRpYWxvZ1wiLGUuQWJvdXRQYWdlV2luZG93PVwiaGVyZS1hYm91dC1wYWdlXCIsZS5EZXNrdG9wU2lnbmFsc01vZGFsPVwiaGVyZS1kZXNrdG9wLXNpZ25hbHMtbW9kYWxcIn0obnx8KG49e30pKTtjb25zdCBpPWU9Pih7bGVmdDooZS5sZWZ0KyhlLnJpZ2h0Pz9lLmxlZnQrZS53aWR0aCkpLzIsdG9wOihlLnRvcCsoZS5ib3R0b20/P2UudG9wK2UuaGVpZ2h0KSkvMn0pLHM9ZT0+KHtsZWZ0OihlLmxlZnQrZS5yaWdodCkvMix0b3A6KGUudG9wK2UuYm90dG9tKS8yfSksYz0oZSx0KT0+e2NvbnN0IGE9dC53aWR0aC8yLG49dC5oZWlnaHQvMjtyZXR1cm57bGVmdDpNYXRoLnJvdW5kKGUubGVmdC1hKSx0b3A6TWF0aC5yb3VuZChlLnRvcC1uKSx3aWR0aDp0LndpZHRoLGhlaWdodDp0LmhlaWdodH19O2Z1bmN0aW9uIGQoZSl7aWYoIW8uY0kpdGhyb3cgbmV3IEVycm9yKFwiZ2V0T0ZXaW5kb3cgY2FuIG9ubHkgYmUgdXNlZCBpbiBhbiBPcGVuRmluIGVudi4gQXZvaWQgY2FsbGluZyB0aGlzIG1ldGhvZCBkdXJpbmcgcHJlLXJlbmRlcmluZy5cIik7cmV0dXJuIGZpbi5XaW5kb3cud3JhcFN5bmMoZSl9Y29uc3QgbD17bmFtZTpvLnZMLHV1aWQ6by4kaH07ZnVuY3Rpb24gdSgpe3JldHVybiBkKGwpfWNvbnN0IHA9e25hbWU6bi5Ib21lLHV1aWQ6ci5NVy5Xb3Jrc3BhY2V9LGg9e25hbWU6bi5Eb2NrLHV1aWQ6ci5NVy5Xb3Jrc3BhY2V9LGY9e25hbWU6bi5TdG9yZWZyb250LHV1aWQ6ci5NVy5Xb3Jrc3BhY2V9LGc9e25hbWU6ci5NVy5Xb3Jrc3BhY2UsdXVpZDpyLk1XLldvcmtzcGFjZX07Y29uc3QgbT1hc3luYyBlPT57dHJ5e2NvbnN0IHQ9YXdhaXQgZmluLldpbmRvdy53cmFwU3luYyh7bmFtZTplLm5hbWUsdXVpZDplLnV1aWQ/P2Zpbi5tZS51dWlkfSkuZ2V0T3B0aW9ucygpO3JldHVybihcImJyb3dzZXJcIj09PXQud29ya3NwYWNlUGxhdGZvcm0/LndpbmRvd1R5cGV8fFwiZW50ZXJwcmlzZVwiPT09dC53b3Jrc3BhY2VQbGF0Zm9ybT8ud2luZG93VHlwZSkmJnQud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzfWNhdGNoKGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJpc0Jyb3dzZXJXaW5kb3cgZXJyb3I6IFwiLGUpLCExfX07YXN5bmMgZnVuY3Rpb24gdygpe2NvbnN0IGU9YXdhaXQgZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0Q2hpbGRXaW5kb3dzKCksdD1hd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoYXN5bmMgZT0+bShlLmlkZW50aXR5KSkpKTtyZXR1cm4gZS5maWx0ZXIoKChlLGEpPT50W2FdKSl9Y29uc3QgeT1lPT5kKGUpLmdldEluZm8oKS50aGVuKCgoKT0+ITApKS5jYXRjaCgoKCk9PiExKSk7YXN5bmMgZnVuY3Rpb24gayhlKXtjb25zdCB0PWF3YWl0IGZpbi5TeXN0ZW0uZ2V0TW9uaXRvckluZm8oKTtyZXR1cm5bdC5wcmltYXJ5TW9uaXRvciwuLi50Lm5vblByaW1hcnlNb25pdG9yc10ucmVkdWNlKCgodCxhKT0+e2NvbnN0IG49ZnVuY3Rpb24oZSx0KXtjb25zdCBhPWUudG9wLG49ZS5sZWZ0LHI9ZS50b3ArZS5oZWlnaHQsbz1lLmxlZnQrZS53aWR0aCxpPXQubW9uaXRvclJlY3QudG9wLHM9dC5tb25pdG9yUmVjdC5sZWZ0LGM9dC5tb25pdG9yUmVjdC5ib3R0b20sZD10Lm1vbml0b3JSZWN0LnJpZ2h0O2lmKGE+Y3x8cjxpfHxuPmR8fG88cylyZXR1cm4gMDtjb25zdCBsPU1hdGgubWF4KGEsaSksdT1NYXRoLm1heChuLHMpO3JldHVybihNYXRoLm1pbihyLGMpLWwpKihNYXRoLm1pbihvLGQpLXUpLyhlLmhlaWdodCplLndpZHRoKX0oZSxhKTtyZXR1cm4gbj50LnBlcmNlbnRhZ2U/e3BlcmNlbnRhZ2U6bixtb25pdG9yOmF9OnR9KSx7cGVyY2VudGFnZTowLG1vbml0b3I6dC5wcmltYXJ5TW9uaXRvcn0pLm1vbml0b3J9fSw5OTU6ZT0+e1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1yZXF1aXJlKFwidGl0bGUtY2FzZVwiKX19LHQ9e307ZnVuY3Rpb24gYShuKXt2YXIgcj10W25dO2lmKHZvaWQgMCE9PXIpcmV0dXJuIHIuZXhwb3J0czt2YXIgbz10W25dPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtuXShvLG8uZXhwb3J0cyxhKSxvLmV4cG9ydHN9YS5uPWU9Pnt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/KCk9PmUuZGVmYXVsdDooKT0+ZTtyZXR1cm4gYS5kKHQse2E6dH0pLHR9LGEuZD0oZSx0KT0+e2Zvcih2YXIgbiBpbiB0KWEubyh0LG4pJiYhYS5vKGUsbikmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4se2VudW1lcmFibGU6ITAsZ2V0OnRbbl19KX0sYS5vPShlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSxhLnI9ZT0+e1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9O3ZhciBuPXt9OygoKT0+e1widXNlIHN0cmljdFwiO2EucihuKSxhLmQobix7QWN0aW9uVHJpZ2dlcjooKT0+QmUuUCxBcHBNYW5pZmVzdFR5cGU6KCk9PiRlLnYsQnV0dG9uU3R5bGU6KCk9PlJlLmluLENMSUFjdGlvbjooKT0+Ti5QSyxDTElGaWx0ZXJPcHRpb25UeXBlOigpPT5OLm9vLENMSVRlbXBsYXRlOigpPT5OLmZDLENvbnRhaW5lclRlbXBsYXRlRnJhZ21lbnROYW1lczooKT0+UmUuY2UsRG9jazooKT0+ZSxEb2NrQnV0dG9uTmFtZXM6KCk9PnUuYSxIb21lOigpPT5TLEludGVncmF0aW9uczooKT0+dCxQcmVzZW50YXRpb25UZW1wbGF0ZUZyYWdtZW50TmFtZXM6KCk9PlJlLm5wLFNlYXJjaFRhZ0JhY2tncm91bmQ6KCk9PkJlLlIsU3RvcmVmcm9udDooKT0+X2UsU3RvcmVmcm9udFRlbXBsYXRlOigpPT4kZS56LFRlbXBsYXRlRnJhZ21lbnRUeXBlczooKT0+UmUuU019KTt2YXIgZT17fTthLnIoZSksYS5kKGUse0RvY2tCdXR0b25OYW1lczooKT0+dS5hLGRlcmVnaXN0ZXI6KCk9Pm0sbWluaW1pemU6KCk9PncscmVnaXN0ZXI6KCk9Pmcsc2hvdzooKT0+eX0pO3ZhciB0PXt9O2Eucih0KSxhLmQodCx7TWljcm9zb2Z0MzY1V29ya2Zsb3dJbnRlZ3JhdGlvbjooKT0+RWV9KTt2YXIgcj1hKDcyMyksbz1hKDc4NiksaT1hKDI3Nykscz1hKDcwKSxjPWEoNjk1KSxkPWEoNzkpO3ZhciBsPWEoMjQ4KSx1PWEoNjAwKTtsZXQgcCxoO2NvbnN0IGY9KGU9W10pPT57Y29uc3QgdD1lLmZpbHRlcigoZT0+ISFlLmlkKSkubWFwKChlPT5lLmlkKSk7aWYobmV3IFNldCh0KS5zaXplIT09dC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiRG9jayBwcm92aWRlciBidXR0b25zIG11c3QgaGF2ZSB1bmlxdWUgaWRlbnRpZmllcnMgaWYgc3BlY2lmaWVkLlwiKX0sZz1hc3luYyBlPT57KDAsbC5IKShcImRvY2tcIixzLlQ3KTtjb25zdCB0PWF3YWl0KGFzeW5jIGU9Pnthd2FpdCgwLGQuS1opKGZpbi5tZS5pZGVudGl0eSk7Y29uc3QgdD1hd2FpdCgwLGMuTjcpKCk7aWYoaCl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB1c2luZyBgRG9jay5yZWdpc3RlcmAuIEEgRG9jayBwcm92aWRlciBmb3IgdGhpcyBXb3Jrc3BhY2UgUGxhdGZvcm0gaXMgYWxyZWFkeSByZWdpc3RlcmVkLiBDYWxsIGBEb2NrLmRlcmVnaXN0ZXJgIGJlZm9yZSBjYWxsaW5nIGBEb2NrLnJlZ2lzdGVyYCBhZ2Fpbi5cIik7cmV0dXJuIGg9ZSxlLmNsaWVudEFQSVZlcnNpb249ci5ldCx0LmRpc3BhdGNoKFwicmVnaXN0ZXItcHJvdmlkZXJcIix7cHJvdmlkZXJUeXBlOlwiZG9ja1wiLGluZm86ZX0pfSkoZSk7cmV0dXJuIHA9bmV3IFByb21pc2UoKChhLG4pPT57dHJ5eyhlPT57ZS53b3Jrc3BhY2VDb21wb25lbnRzJiYhQXJyYXkuaXNBcnJheShlLndvcmtzcGFjZUNvbXBvbmVudHMpJiZjb25zb2xlLndhcm4oXCJVc2luZyB0aGUgYFdvcmtzcGFjZUNvbXBvbmVudEJ1dHRvbk9wdGlvbnNgIHR5cGUgdG8gY29uZmlndXJlIHRoZSBXb3Jrc3BhY2UgQ29tcG9uZW50cyBCdXR0b25zIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgYFdvcmtzcGFjZUJ1dHRvbnNDb25maWdgIGluc3RlYWQuXCIpfSkoZSksZihlLmJ1dHRvbnMpLCgwLGkua2kpKHthbGxvd2VkOiEwLGNvbXBvbmVudFZlcnNpb246dD8ud29ya3NwYWNlVmVyc2lvbn0pLHIuZXQsYSh7Y2xpZW50QVBJVmVyc2lvbjpyLmV0LHdvcmtzcGFjZVZlcnNpb246dD8ud29ya3NwYWNlVmVyc2lvbj8/XCJcIix1cGRhdGVEb2NrUHJvdmlkZXJDb25maWc6YXN5bmMgdD0+e2lmKCFoKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHVzaW5nIGBEb2NrLnVwZGF0ZURvY2tQcm92aWRlckNvbmZpZ2AuIERvY2sgcHJvdmlkZXIgaXMgbm90IHJlZ2lzdGVyZWQuIE1ha2Ugc3VyZSB0byBjYWxsIGBEb2NrLnJlZ2lzdGVyYCBmaXJzdC5cIik7Zih0LmJ1dHRvbnMpO2NvbnN0IGE9YXdhaXQoMCxjLk43KSgpO2F3YWl0IGEuZGlzcGF0Y2goXCJ1cGRhdGUtcHJvdmlkZXJcIix7cHJvdmlkZXJUeXBlOlwiZG9ja1wiLHByb3ZpZGVyOnsuLi5lLHdvcmtzcGFjZUNvbXBvbmVudHM6dC53b3Jrc3BhY2VDb21wb25lbnRzLGJ1dHRvbnM6dC5idXR0b25zLHRpdGxlOnQudGl0bGUsaWNvbjp0Lmljb24sZGlzYWJsZVVzZXJSZWFycmFuZ2VtZW50OnQuZGlzYWJsZVVzZXJSZWFycmFuZ2VtZW50LGlkOmUuaWR9fSl9fSl9Y2F0Y2goZSl7KDAsaS5raSkoe2FsbG93ZWQ6ITEscmVqZWN0aW9uQ29kZTplIGluc3RhbmNlb2YgRXJyb3I/ZS5tZXNzYWdlOlwidW5rbm93blwifSksbihlKSxwPXZvaWQgMH1maW5hbGx5e28uQS5tYXJrRW5kQW5kTWVhc3VyZShcImRvY2stcmVnaXN0cmF0aW9uXCIpfX0pKSxwfSxtPWFzeW5jKCk9PntpZihhd2FpdCBwLCFoKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHVzaW5nIGBEb2NrLmRlcmVnaXN0ZXJgLiBEb2NrIHByb3ZpZGVyIGlzIG5vdCByZWdpc3RlcmVkLiBDYWxsIGBEb2NrLnJlZ2lzdGVyYCBiZWZvcmUgY2FsbGluZyBgRG9jay5kZXJlZ2lzdGVyYC5cIik7Y29uc3QgZT1hd2FpdCgwLGMuTjcpKCk7YXdhaXQgZS5kaXNwYXRjaChcImRlcmVnaXN0ZXItcHJvdmlkZXJcIix7cHJvdmlkZXJUeXBlOlwiZG9ja1wiLGlkOmguaWR9KSxoPXZvaWQgMCxwPXZvaWQgMH0sdz1hc3luYygpPT57YXdhaXQgcCxhd2FpdCgwLGMubkEpKCksYXdhaXQoYXN5bmMgZT0+KGF3YWl0KDAsYy5wNCkoKSkuZGlzcGF0Y2goXCJoaWRlLXByb3ZpZGVyLXdpbmRvd1wiLHtwcm92aWRlclR5cGU6ZX0pKShcImRvY2tcIil9LHk9YXN5bmMoKT0+e28uQS5tYXJrU3RhcnQoXCJkb2NrLXNob3dcIiksYXdhaXQgcCxhd2FpdCgwLGMubkEpKCksYXdhaXQoYXN5bmMgZT0+KGF3YWl0KDAsYy5wNCkoKSkuZGlzcGF0Y2goXCJzaG93LXByb3ZpZGVyLXdpbmRvd1wiLHtwcm92aWRlclR5cGU6ZX0pKShcImRvY2tcIil9O3ZhciBrLHYsYixTPWEoODM0KSxQPWZ1bmN0aW9uKGUsdCxhLG4scil7aWYoXCJtXCI9PT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7aWYoXCJhXCI9PT1uJiYhcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZSE9PXR8fCFyOiF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJhXCI9PT1uP3IuY2FsbChlLGEpOnI/ci52YWx1ZT1hOnQuc2V0KGUsYSksYX0sQz1mdW5jdGlvbihlLHQsYSxuKXtpZihcImFcIj09PWEmJiFuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD9lIT09dHx8IW46IXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJtXCI9PT1hP246XCJhXCI9PT1hP24uY2FsbChlKTpuP24udmFsdWU6dC5nZXQoZSl9O2s9bmV3IFdlYWtNYXAsdj1uZXcgV2Vha01hcCxiPW5ldyBXZWFrTWFwO2NvbnN0IEE9Y2xhc3N7Y29uc3RydWN0b3IoZSl7ay5zZXQodGhpcyx2b2lkIDApLHYuc2V0KHRoaXMsdm9pZCAwKSxiLnNldCh0aGlzLHZvaWQgMCksUCh0aGlzLGssZSxcImZcIiksUCh0aGlzLHYsbmV3IE1hcCxcImZcIiksUCh0aGlzLGIsW10sXCJmXCIpfWdldChlKXtpZihDKHRoaXMsdixcImZcIikuaGFzKGUpKXJldHVybiB0aGlzLnVwZGF0ZVF1ZXVlKGUpLEModGhpcyx2LFwiZlwiKS5nZXQoZSl9aGFzKGUpe3JldHVybiBDKHRoaXMsdixcImZcIikuaGFzKGUpfXB1dChlLHQpe2lmKEModGhpcyx2LFwiZlwiKS5oYXMoZSkpQyh0aGlzLHYsXCJmXCIpLnNldChlLHQpLHRoaXMudXBkYXRlUXVldWUoZSk7ZWxzZXtpZihDKHRoaXMsYixcImZcIikubGVuZ3RoPT09Qyh0aGlzLGssXCJmXCIpKXtjb25zdCBlPUModGhpcyxiLFwiZlwiKS5zaGlmdCgpO2UmJkModGhpcyx2LFwiZlwiKS5kZWxldGUoZSl9Qyh0aGlzLHYsXCJmXCIpLnNldChlLHQpLEModGhpcyxiLFwiZlwiKS5wdXNoKGUpfX11cGRhdGVRdWV1ZShlKXtjb25zdCB0PUModGhpcyxiLFwiZlwiKS5pbmRleE9mKGUpOy0xIT09dCYmKEModGhpcyxiLFwiZlwiKS5zcGxpY2UodCwxKSxDKHRoaXMsYixcImZcIikucHVzaChlKSl9fTtmdW5jdGlvbiB4KGUpe3JldHVybiBlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmIUFycmF5LmlzQXJyYXkoZSl9ZnVuY3Rpb24gTShlLC4uLnQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gZTtjb25zdCBhPXQuc2hpZnQoKTtyZXR1cm4geChlKSYmeChhKSYmT2JqZWN0LmVudHJpZXMoYSkuZm9yRWFjaCgoKFt0LGFdKT0+e2lmKHgoYSkpcmV0dXJuIGVbdF18fChlW3RdPXt9KSxNKGVbdF0sYSk7ZVt0XT1hfSkpLE0oZSwuLi50KX12YXIgSSxGLFcsVCxELE89YSgxODEpLEU9YSg1MjMpLF89ZnVuY3Rpb24oZSx0LGEsbixyKXtpZihcIm1cIj09PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtpZihcImFcIj09PW4mJiFyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD9lIT09dHx8IXI6IXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cImFcIj09PW4/ci5jYWxsKGUsYSk6cj9yLnZhbHVlPWE6dC5zZXQoZSxhKSxhfSxCPWZ1bmN0aW9uKGUsdCxhLG4pe2lmKFwiYVwiPT09YSYmIW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P2UhPT10fHwhbjohdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cIm1cIj09PWE/bjpcImFcIj09PWE/bi5jYWxsKGUpOm4/bi52YWx1ZTp0LmdldChlKX07Rj1uZXcgV2Vha01hcCxXPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsST1uZXcgV2Vha1NldCxEPWZ1bmN0aW9uKCl7Y29uc3QgZT1BcnJheS5mcm9tKEIodGhpcyxGLFwiZlwiKS5lbnRyaWVzKCkpLnJlZHVjZSgoKGUsdCk9PiFlfHx0WzFdLnRpbWVzdGFtcDxlWzFdLnRpbWVzdGFtcD90OmUpLG51bGwpO3JldHVybiBlP2VbMF06bnVsbH07Y29uc3QgUj1jbGFzc3tjb25zdHJ1Y3RvcihlPTNlNSx0PTEwMCl7SS5hZGQodGhpcyksRi5zZXQodGhpcyx2b2lkIDApLFcuc2V0KHRoaXMsdm9pZCAwKSxULnNldCh0aGlzLHZvaWQgMCksXyh0aGlzLEYsbmV3IE1hcCxcImZcIiksXyh0aGlzLFcsZSxcImZcIiksXyh0aGlzLFQsdCxcImZcIil9Z2V0KGUpe2NvbnN0IHQ9Qih0aGlzLEYsXCJmXCIpLmdldChlKTtpZighdClyZXR1cm4gbnVsbDtyZXR1cm4gRGF0ZS5ub3coKS10LnRpbWVzdGFtcDxCKHRoaXMsVyxcImZcIik/dC52YWx1ZTooQih0aGlzLEYsXCJmXCIpLmRlbGV0ZShlKSxudWxsKX1wdXQoZSx0KXtpZihCKHRoaXMsRixcImZcIikuc2l6ZT49Qih0aGlzLFQsXCJmXCIpKXtjb25zdCBlPUIodGhpcyxJLFwibVwiLEQpLmNhbGwodGhpcyk7bnVsbCE9ZSYmQih0aGlzLEYsXCJmXCIpLmRlbGV0ZShlKX1CKHRoaXMsRixcImZcIikuc2V0KGUse3ZhbHVlOnQsdGltZXN0YW1wOkRhdGUubm93KCl9KX1yZW1vdmUoZSl7Qih0aGlzLEYsXCJmXCIpLmRlbGV0ZShlKX1jbGVhcigpe0IodGhpcyxGLFwiZlwiKS5jbGVhcigpfX07dmFyICQsTD1hKDMzMyksTj1hKDg3MiksRz1mdW5jdGlvbihlLHQsYSxuKXtpZihcImFcIj09PWEmJiFuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD9lIT09dHx8IW46IXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJtXCI9PT1hP246XCJhXCI9PT1hP24uY2FsbChlKTpuP24udmFsdWU6dC5nZXQoZSl9O2NvbnN0IFU9e307Y2xhc3MgVntjb25zdHJ1Y3RvcihlKXskLnNldCh0aGlzLG5ldyBTZXQpLHRoaXMuX2luaXRpYWxpemVXb3JrZmxvd3M9YXN5bmMoZT10aGlzLmNvbmZpZyk9Pntjb25zdHt3b3JrZmxvd3M6dH09ZTtmb3IoY29uc3QgZSBpbiB0KXtpZighdFtlXS5kaXNhYmxlQXV0b0luaXRpYWxpemUpdHJ5e0codGhpcywkLFwiZlwiKS5oYXMoZSk/Y29uc29sZS53YXJuKGBXb3JrZmxvdyAke2V9IGFscmVhZHkgaW5pdGlhbGl6ZWQuYCk6KEcodGhpcywkLFwiZlwiKS5hZGQoZSksYXdhaXQgdGhpcy5pbml0aWFsaXplV29ya2Zsb3coZSkpfWNhdGNoKHQpe0codGhpcywkLFwiZlwiKS5kZWxldGUoZSksY29uc29sZS5lcnJvcihgRXJyb3IgcmVnaXN0ZXJpbmcgJHtlfTpgLHQpfX19O2NvbnN0IHQ9TSh7fSxVLGUpO3RoaXMuY29uZmlnPXR9YXN5bmMgaW5pdGlhbGl6ZVdvcmtmbG93KGUpe0codGhpcywkLFwiZlwiKS5hZGQoZSl9fSQ9bmV3IFdlYWtNYXA7Y29uc3QgSD1yZXF1aXJlKFwiQG9wZW5maW4vbWljcm9zb2Z0MzY1XCIpO2xldCB6PTA7Y29uc3QgcT17Y2hhdE1lc3NhZ2U6XCJDaGF0IE1lc3NhZ2VcIixldmVudDpcIkV2ZW50XCIsbWVzc2FnZTpcIkVtYWlsXCIsZHJpdmU6XCJEb2N1bWVudFwiLGNvbnRhY3Q6XCJDb250YWN0XCIsdXNlcjpcIlVzZXJcIixsaXN0OlwiTGlzdFwifSxqPXtwZGY6XCJQREZcIixkb2N4OlwiV29yZFwiLHBwdHg6XCJQb3dlclBvaW50XCIseGxzeDpcIkV4Y2VsXCIsb25lbm90ZTpcIk9uZU5vdGVcIn0sSz17Y2hhdE1lc3NhZ2U6W1wiQ2hhdC5SZWFkXCIsXCJDaGFubmVsTWVzc2FnZS5SZWFkLkFsbFwiXSxsaXN0OltcIlNpdGVzLlJlYWQuQWxsXCJdLGV2ZW50OltcIkNhbGVuZGFycy5SZWFkXCJdLG1lc3NhZ2U6W1wiTWFpbC5SZWFkV3JpdGUuU2hhcmVkXCJdLGNvbnRhY3Q6W1wiQ29udGFjdHMuUmVhZC5TaGFyZWRcIixcIk1haWwuUmVhZFdyaXRlLlNoYXJlZFwiXSx1c2VyOltcIlVzZXIuUmVhZC5BbGxcIixcIlByZXNlbmNlLlJlYWQuQWxsXCJdfSxYPVwiTUlDUk9TT0ZUXzM2NV9TRUFSQ0hfVFlQRV9GSUxURVJcIixRPVwiTUlDUk9TT0ZUXzM2NV9TRUFSQ0hfRklMRV9UWVBFX0ZJTFRFUlwiLFk9XCJNSUNST1NPRlRfMzY1X1NFQVJDSF9ERVBBUlRNRU5UX0ZJTFRFUlwiLFo9XCJNSUNST1NPRlRfMzY1X1NFQVJDSF9KT0JfVElUTEVfRklMVEVSXCIsSj1cIlRlYW1zIENhbGxcIixlZT1cIlRlYW1zIENoYXRcIix0ZT1cIkVtYWlsXCIsYWU9KGUsdCk9Pntjb25zdCBhPVtdLG49e2l0ZW06ZS5jb250ZXh0LnNlbGVjdGVkRmlsdGVycz8uZmluZCgoZT0+ZS5pZD09PVgpKSxkb2N1bWVudFR5cGU6ZS5jb250ZXh0LnNlbGVjdGVkRmlsdGVycz8uZmluZCgoZT0+ZS5pZD09PVEpKX0scj1be3ZhbHVlOlwiRG9jdW1lbnRcIixpc1NlbGVjdGVkOiEhbi5pdGVtPy5vcHRpb25zPy5maW5kKCgoe3ZhbHVlOmV9KT0+XCJGaWxlXCI9PT1lKSk/LmlzU2VsZWN0ZWR9LHt2YWx1ZTpcIkNvbnRhY3RcIixpc1NlbGVjdGVkOiEhbi5pdGVtPy5vcHRpb25zPy5maW5kKCgoe3ZhbHVlOmV9KT0+XCJDb250YWN0XCI9PT1lKSk/LmlzU2VsZWN0ZWR9LHt2YWx1ZTpcIkNoYXQgTWVzc2FnZVwiLGlzU2VsZWN0ZWQ6ISFuLml0ZW0/Lm9wdGlvbnM/LmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkNoYXQgTWVzc2FnZVwiPT09ZSkpPy5pc1NlbGVjdGVkfSx7dmFsdWU6XCJFbWFpbFwiLGlzU2VsZWN0ZWQ6ISFuLml0ZW0/Lm9wdGlvbnM/LmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkVtYWlsXCI9PT1lKSk/LmlzU2VsZWN0ZWR9LHt2YWx1ZTpcIkV2ZW50XCIsaXNTZWxlY3RlZDohIW4uaXRlbT8ub3B0aW9ucz8uZmluZCgoKHt2YWx1ZTplfSk9PlwiRXZlbnRcIj09PWUpKT8uaXNTZWxlY3RlZH0se3ZhbHVlOlwiTGlzdFwiLGlzU2VsZWN0ZWQ6ISFuLml0ZW0/Lm9wdGlvbnM/LmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkxpc3RcIj09PWUpKT8uaXNTZWxlY3RlZH1dO3JldHVybiBhLnB1c2goe2lkOlgsdGl0bGU6XCJUeXBlXCIsdHlwZTpOLm9vLk11bHRpU2VsZWN0LG9wdGlvbnM6ci5maWx0ZXIoKGU9PnQuaGFzKGUudmFsdWUpKSl9KSxcIkRvY3VtZW50XCI9PT1uLml0ZW0/Lm9wdGlvbnM/LmZpbHRlcigoZT0+ZS5pc1NlbGVjdGVkKSk/LlswXS52YWx1ZSYmYS5wdXNoKHtpZDpRLHRpdGxlOlwiRmlsZSBUeXBlXCIsdHlwZTpOLm9vLk11bHRpU2VsZWN0LG9wdGlvbnM6T2JqZWN0LmVudHJpZXMoaikubWFwKCgoWyxlXSk9Pih7dmFsdWU6ZSxpc1NlbGVjdGVkOiEhbi5kb2N1bWVudFR5cGU/Lm9wdGlvbnM/LmZpbHRlcigoZT0+ZS5pc1NlbGVjdGVkKSk/LmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkZpbGVcIj09PWUpKT8uaXNTZWxlY3RlZH0pKSl9KSxhfSxuZT0oZSx0KT0+e2NvbnN0IGE9dC5jb250ZXh0LnNlbGVjdGVkRmlsdGVycz8uZmluZCgoZT0+ZS5pZD09PVgpKT8ub3B0aW9ucztpZighQXJyYXkuaXNBcnJheShhKXx8IWEuZmluZCgoZT0+XCJDb250YWN0XCI9PT1lLnZhbHVlfHxcIlVzZXJcIj09PWUudmFsdWUpKT8uaXNTZWxlY3RlZClyZXR1cm5bXTtjb25zdHtkZXBhcnRtZW50Om4sam9iVGl0bGU6cn09ZS5yZWR1Y2UoKChlLHQpPT4odC5kZXBhcnRtZW50JiZlLmRlcGFydG1lbnQuYWRkKHQuZGVwYXJ0bWVudCksdC5qb2JUaXRsZSYmZS5qb2JUaXRsZS5hZGQodC5qb2JUaXRsZSksZSkpLHtkZXBhcnRtZW50Om5ldyBTZXQsam9iVGl0bGU6bmV3IFNldH0pLG89dC5jb250ZXh0LnNlbGVjdGVkRmlsdGVycz8uZmluZCgoZT0+ZS5pZD09PVkpKSxpPUFycmF5LmZyb20obikubWFwKChlPT4oe3ZhbHVlOmUsaXNTZWxlY3RlZDohIW8/Lm9wdGlvbnM/LmZpbmQoKCh7dmFsdWU6dH0pPT50PT09ZSkpPy5pc1NlbGVjdGVkfSkpKSxzPXQuY29udGV4dC5zZWxlY3RlZEZpbHRlcnM/LmZpbmQoKGU9PmUuaWQ9PT1ZKSksYz1BcnJheS5mcm9tKHIpLm1hcCgoZT0+KHt2YWx1ZTplLGlzU2VsZWN0ZWQ6ISFzPy5vcHRpb25zPy5maW5kKCgoe3ZhbHVlOnR9KT0+dD09PWUpKT8uaXNTZWxlY3RlZH0pKSk7cmV0dXJuW3tpZDpZLHRpdGxlOlwiRGVwYXJ0bWVudFwiLHR5cGU6Ti5vby5NdWx0aVNlbGVjdCxvcHRpb25zOml9LHtpZDpaLHRpdGxlOlwiSm9iIFRpdGxlXCIsdHlwZTpOLm9vLk11bHRpU2VsZWN0LG9wdGlvbnM6Y31dfSxyZT1lPT57Y29uc3QgdD1lLmNvbnRleHQuc2VsZWN0ZWRGaWx0ZXJzPy5maW5kKChlPT5lLmlkPT09WSkpLGE9QXJyYXkuaXNBcnJheSh0Py5vcHRpb25zKT90Lm9wdGlvbnMuZmlsdGVyKChlPT5lLmlzU2VsZWN0ZWQpKS5tYXAoKGU9PmUudmFsdWUpKTpbXSxuPWUuY29udGV4dC5zZWxlY3RlZEZpbHRlcnM/LmZpbmQoKGU9PmUuaWQ9PT1aKSk7cmV0dXJue2RlcGFydG1lbnQ6YSxqb2JUaXRsZTpBcnJheS5pc0FycmF5KG4/Lm9wdGlvbnMpP24ub3B0aW9ucy5maWx0ZXIoKGU9PmUuaXNTZWxlY3RlZCkpLm1hcCgoZT0+ZS52YWx1ZSkpOltdfX0sb2U9KGUsdCk9Pntjb25zdHtkZXBhcnRtZW50OmEsam9iVGl0bGU6bn09dDtyZXR1cm4gZS5maWx0ZXIoKGU9PighYS5sZW5ndGh8fGEuaW5jbHVkZXMoZS5kZXBhcnRtZW50KSkmJighbi5sZW5ndGh8fG4uaW5jbHVkZXMoZS5qb2JUaXRsZSkpKSl9LGllPWU9Pntjb25zdCB0PUFycmF5LmlzQXJyYXkoZS5jb250ZXh0LnNlbGVjdGVkRmlsdGVycz8uZmluZCgoZT0+ZS5pZD09PVEpKT8ub3B0aW9ucyk/ZS5jb250ZXh0LnNlbGVjdGVkRmlsdGVycy5maW5kKChlPT5lLmlkPT09USkpPy5vcHRpb25zOltdO3JldHVybntmaWx0ZXJGaWxlczp0JiZ0LnNvbWUoKCh7aXNTZWxlY3RlZDplfSk9PmUpKSxzaG93V29yZDp0LmZpbmQoKCh7dmFsdWU6ZX0pPT5cIldvcmRcIj09PWUpKT8uaXNTZWxlY3RlZCxzaG93RXhjZWw6dC5maW5kKCgoe3ZhbHVlOmV9KT0+XCJFeGNlbFwiPT09ZSkpPy5pc1NlbGVjdGVkLHNob3dQb3dlclBvaW50OnQuZmluZCgoKHt2YWx1ZTplfSk9PlwiUG93ZXJQb2ludFwiPT09ZSkpPy5pc1NlbGVjdGVkLHNob3dQREY6dC5maW5kKCgoe3ZhbHVlOmV9KT0+XCJQREZcIj09PWUpKT8uaXNTZWxlY3RlZCxzaG93T25lTm90ZTp0LmZpbmQoKCh7dmFsdWU6ZX0pPT5cIk9uZU5vdGVcIj09PWUpKT8uaXNTZWxlY3RlZH19LHNlPShlLHQpPT57Y29uc3QgYT1bXTtyZXR1cm4gdC5zaG93V29yZCYmYS5wdXNoKFwiLmRvY3hcIiksdC5zaG93RXhjZWwmJmEucHVzaChcIi54bHN4XCIpLHQuc2hvd1Bvd2VyUG9pbnQmJmEucHVzaChcIi5wcHR4XCIpLHQuc2hvd1BERiYmYS5wdXNoKFwiLnBkZlwiKSx0LnNob3dPbmVOb3RlJiZhLnB1c2goXCIub25lXCIpLGUuZmlsdGVyKChlPT57aWYoZS5maWxlKXtjb25zdCB0PWUubmFtZS5zdWJzdHJpbmcoZS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7cmV0dXJuIGEuaW5jbHVkZXModCl9cmV0dXJuITF9KSl9LGNlPShlPVwiXCIpPT57c3dpdGNoKGUuc3BsaXQoXCIuXCIpLnBvcCgpPy50b0xvd2VyQ2FzZSgpPz9cIlwiKXtjYXNlXCJkb2N4XCI6Y2FzZVwiZG9jXCI6cmV0dXJuXCJNaWNyb3NvZnQgV29yZFwiO2Nhc2VcInhsc3hcIjpjYXNlXCJ4bHNcIjpyZXR1cm5cIk1pY3Jvc29mdCBFeGNlbFwiO2Nhc2VcInBwdHhcIjpjYXNlXCJwcHRcIjpyZXR1cm5cIk1pY3Jvc29mdCBQb3dlclBvaW50XCI7Y2FzZVwicGRmXCI6cmV0dXJuXCJQREZcIjtjYXNlXCJwbmdcIjpjYXNlXCJqcGdcIjpjYXNlXCJqcGVnXCI6Y2FzZVwiZ2lmXCI6cmV0dXJuXCJJbWFnZVwiO2Nhc2VcInR4dFwiOnJldHVyblwiVGV4dFwiO2RlZmF1bHQ6cmV0dXJuXCJGaWxlXCJ9fSxkZT0oZT1cIlwiKT0+e3N3aXRjaChlLnNwbGl0KFwiLlwiKS5wb3AoKT8udG9Mb3dlckNhc2UoKT8/XCJcIil7Y2FzZVwiZG9jeFwiOmNhc2VcImRvY1wiOnJldHVybigwLEUuT1gpKE8uc1AuTWljcm9zb2Z0MzY1QXNzZXRzLk1pY3Jvc29mdDM2NURvY3VtZW50SWNvbik7Y2FzZVwieGxzeFwiOmNhc2VcInhsc1wiOnJldHVybigwLEUuT1gpKE8uc1AuTWljcm9zb2Z0MzY1QXNzZXRzLk1pY3Jvc29mdDM2NUV4Y2VsSWNvbik7Y2FzZVwicHB0eFwiOmNhc2VcInBwdFwiOnJldHVybigwLEUuT1gpKE8uc1AuTWljcm9zb2Z0MzY1QXNzZXRzLk1pY3Jvc29mdDM2NVBvd2VycG9pbnRJY29uKTtjYXNlXCJwZGZcIjpyZXR1cm4oMCxFLk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5QREZGaWxlSWNvbik7ZGVmYXVsdDpyZXR1cm59fSxsZT1lPT5lLnJlcGxhY2UoL1xcKy9nLFwiX1wiKS5yZXBsYWNlKC9cXC8vZyxcIi1cIik7dmFyIHVlLHBlLGhlLGZlLGdlLG1lLHdlLHllLGtlLHZlLGJlLFNlLFBlLENlLEFlLHhlLE1lLEllLEZlLFdlLFRlLERlPWZ1bmN0aW9uKGUsdCxhLG4pe2lmKFwiYVwiPT09YSYmIW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P2UhPT10fHwhbjohdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cIm1cIj09PWE/bjpcImFcIj09PWE/bi5jYWxsKGUpOm4/bi52YWx1ZTp0LmdldChlKX0sT2U9ZnVuY3Rpb24oZSx0LGEsbixyKXtpZihcIm1cIj09PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtpZihcImFcIj09PW4mJiFyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD9lIT09dHx8IXI6IXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cImFcIj09PW4/ci5jYWxsKGUsYSk6cj9yLnZhbHVlPWE6dC5zZXQoZSxhKSxhfTtjbGFzcyBFZSBleHRlbmRzIFZ7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD1NKHt9LHt3b3JrZmxvd3M6e3NlYXJjaDooeis9MSx7aG9tZVByb3ZpZGVyOntkZXNjcmlwdGlvbjpcIk1pY3Jvc29mdCAzNjUgc2VhcmNoIHJlc3VsdHMgcHJvdmlkZXJcIixpZDpgTVMzNjUtJHtmaW4ubWUuaWRlbnRpdHkudXVpZH0tJHt6fWAsbG9nb1VybDooMCxFLk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVJY29uKSxpY29uOigwLEUuT1gpKE8uc1AuTWljcm9zb2Z0MzY1QXNzZXRzLk1pY3Jvc29mdDM2NUljb24pLHRpdGxlOlwiTWljcm9zb2Z0IDM2NSBTZWFyY2hcIixpbnB1dFBsYWNlaG9sZGVyOlwiV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBzZWFyY2ggaW4gTWljcm9zb2Z0IDM2NSB0b2RheT9cIixkaXNwYXRjaEZvY3VzRXZlbnRzOiEwfSxtaWNyb3NvZnRFbnRpdHlUeXBlQ29uZmlnOnttZXNzYWdlOiEwLGNoYXRNZXNzYWdlOiEwLGRyaXZlOiEwLGV2ZW50OiEwLHVzZXI6ITAsY29udGFjdDohMCxsaXN0OiEwfSx1c2VUZWFtc0RlZXBMaW5rOiEwfSl9fSxlKTtzdXBlcih0KSx1ZS5hZGQodGhpcykscGUuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLndvcmtmbG93SW50ZWdyYXRpb25OYW1lPVwiTWljcm9zb2Z0IDM2NVwiLGhlLnNldCh0aGlzLHZvaWQgMCksZmUuc2V0KHRoaXMsdm9pZCAwKSxnZS5zZXQodGhpcywxKSxtZS5zZXQodGhpcyxuZXcgU2V0KSx3ZS5zZXQodGhpcyxuZXcgQSgxMDApKSx5ZS5zZXQodGhpcyxuZXcgUig2ZTQpKSx0aGlzLmNvbm5lY3Q9YXN5bmMoZT10aGlzLmNvbmZpZy5jb25uZWN0KT0+e2NvbnN0e2NsaWVudElkOnQsdGVuYW50SWQ6YSxyZWRpcmVjdFVyaTpufT1lLHI9dGhpcy5jb25maWcud29ya2Zsb3dzPy5zZWFyY2g/T2JqZWN0LmVudHJpZXModGhpcy5jb25maWcud29ya2Zsb3dzPy5zZWFyY2g/Lm1pY3Jvc29mdEVudGl0eVR5cGVDb25maWc/P3t9KS5maWx0ZXIoKChbZSx0XSk9PnQpKS5tYXAoKChbZV0pPT5LW2VdKSkuZmlsdGVyKChlPT52b2lkIDAhPT1lKSkuZmxhdCgpOltdO3RoaXMuY29uZmlnLmNvbm5lY3Q9ZSxPZSh0aGlzLHBlLGF3YWl0KDAsSC5jb25uZWN0KSh0LGEsbixbLi4ubmV3IFNldChyKV0pLFwiZlwiKX0sa2Uuc2V0KHRoaXMsKCgpPT57aWYoIURlKHRoaXMscGUsXCJmXCIpKXRocm93IG5ldyBFcnJvcihcIk1pY3Jvc29mdDM2NVdvcmtmbG93SW50ZWdyYXRpb24gbm90IGNvbm5lY3RlZFwiKTtyZXR1cm4gRGUodGhpcyxwZSxcImZcIil9KSksQ2Uuc2V0KHRoaXMsKGFzeW5jIGU9PntpZihPZSh0aGlzLGZlLGUsXCJmXCIpLGUuZGF0YT8uaXRlbT8uaWQpe2NvbnN0IHQ9RGUodGhpcyx5ZSxcImZcIikuZ2V0KGUuZGF0YS5pdGVtLmlkKTtpZih0KXJldHVybiB2b2lkIERlKHRoaXMsaGUsXCJmXCIpLnJlc3BvbmQoW3RdKX1pZihcInVzZXJcIj09PWUuZGF0YT8udHlwZSlEZSh0aGlzLEZlLFwiZlwiKS5jYWxsKHRoaXMsZSl9KSksQWUuc2V0KHRoaXMsKGFzeW5jIGU9Pnthd2FpdCBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5jcmVhdGVXaW5kb3coe2xheW91dDp7Y29udGVudDpbe3R5cGU6XCJzdGFja1wiLGNvbnRlbnQ6W3t0eXBlOlwiY29tcG9uZW50XCIsY29tcG9uZW50TmFtZTpcInZpZXdcIixjb21wb25lbnRTdGF0ZTp7dXJsOmV9fV19XX0sd29ya3NwYWNlUGxhdGZvcm06dm9pZCAwfSl9KSkseGUuc2V0KHRoaXMsKGFzeW5jIGU9PntpZihlLmRhdGEuaXRlbS5jaGFubmVsSWRlbnRpdHkudGVhbUlkKXtjb25zdCB0PW5ldyBVUkwoYG1zdGVhbXM6L2wvY2hhbm5lbC8ke2UuZGF0YS5pdGVtLmNoYW5uZWxJZGVudGl0eS5jaGFubmVsSWR9LyR7ZS5kYXRhLml0ZW0uaWR9YCk7cmV0dXJuITE9PT10aGlzLmNvbmZpZy53b3JrZmxvd3M/LnNlYXJjaD8udXNlVGVhbXNEZWVwTGluayYmKHQucHJvdG9jb2w9XCJodHRwczpcIiksdC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiY29udGV4dFwiLEpTT04uc3RyaW5naWZ5KHtjb250ZXh0VHlwZTpcImNoYW5uZWxcIn0pKSx2b2lkIGF3YWl0IGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKHQudG9TdHJpbmcoKSl9Y29uc3QgdD1uZXcgVVJMKGBtc3RlYW1zOi9sL21lc3NhZ2UvJHtlLmRhdGEuaXRlbS5jaGF0SWR9LyR7ZS5kYXRhLml0ZW0uaWR9YCk7ITE9PT10aGlzLmNvbmZpZy53b3JrZmxvd3M/LnNlYXJjaD8udXNlVGVhbXNEZWVwTGluayYmKHQucHJvdG9jb2w9XCJodHRwczpcIiksdC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiY29udGV4dFwiLEpTT04uc3RyaW5naWZ5KHtjb250ZXh0VHlwZTpcImNoYXRcIn0pKSxhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3Nlcih0LnRvU3RyaW5nKCkpfSkpLE1lLnNldCh0aGlzLChhc3luYyBlPT57c3dpdGNoKGUuYWN0aW9uLm5hbWUpe2Nhc2UgSjp7Y29uc3QgdD1uZXcgSC5UZWFtc0Nvbm5lY3Rpb24oRGUodGhpcyxrZSxcImZcIikuY2FsbCh0aGlzKSx0aGlzLmNvbmZpZy53b3JrZmxvd3M/LnNlYXJjaD8udXNlVGVhbXNEZWVwTGluayk7RGUodGhpcyx1ZSxcIm1cIix2ZSkuY2FsbCh0aGlzLCgoKT0+dC5zdGFydENhbGwoW2UuZGF0YS5pdGVtLm1haWxdKSkpO2JyZWFrfWNhc2UgdGU6e2NvbnN0IHQ9YXdhaXQgdGhpcy5leGVjdXRlQXBpUmVxdWVzdChcIi92MS4wL21lL21lc3NhZ2VzXCIsXCJQT1NUXCIse3RvUmVjaXBpZW50czpbe2VtYWlsQWRkcmVzczp7YWRkcmVzczplLmRhdGEuaXRlbS5tYWlsfX1dfSk7bGV0IGE9dC5kYXRhLndlYkxpbms7Y29uc3Qgbj1uZXcgVVJMKHQuZGF0YS53ZWJMaW5rKTtpZihcIi9vd2EvXCI9PT1uLnBhdGhuYW1lKXtjb25zdCBlPW4uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KFwiJlwiKS5yZWR1Y2UoKChlLHQpPT57Y29uc3RbYSxuXT10LnNwbGl0KFwiPVwiKTtyZXR1cm4gZVthXT1uLGV9KSx7fSk7aWYoZS5JdGVtSUQpe2NvbnN0IHQ9ZS5JdGVtSUQ7YT1gJHtuLm9yaWdpbn0vbWFpbC9kZWVwbGluay9jb21wb3NlLyR7dH0/SXRlbUlEPSR7dH0mZXh2c3VybD0xYH19YXdhaXQgZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkuY3JlYXRlVmlldyh7dXJsOmF9KTticmVha31jYXNlIGVlOntjb25zdCB0PURlKHRoaXMsa2UsXCJmXCIpLmNhbGwodGhpcyksYT1uZXcgSC5UZWFtc0Nvbm5lY3Rpb24odCx0aGlzLmNvbmZpZy53b3JrZmxvd3M/LnNlYXJjaD8udXNlVGVhbXNEZWVwTGluayk7RGUodGhpcyx1ZSxcIm1cIix2ZSkuY2FsbCh0aGlzLCgoKT0+YS5zdGFydENoYXQoe2VtYWlsQWRkcmVzc2VzOlt0LmN1cnJlbnRVc2VyLm1haWwsZS5kYXRhLml0ZW0ubWFpbF19KSkpO2JyZWFrfWRlZmF1bHQ6Y29uc29sZS53YXJuKFwiVW5oYW5kbGVkIHVzZXIgYWN0aW9uIGZvciByZXN1bHQ6XCIsZSxgVW5rbm93biBhY3Rpb24gXCIke2UuYWN0aW9uLm5hbWV9XCJgKX19KSksSWUuc2V0KHRoaXMsKGFzeW5jIGU9Pntzd2l0Y2goZS5kYXRhLnR5cGUpe2Nhc2VcImRyaXZlSXRlbVwiOkRlKHRoaXMsQWUsXCJmXCIpLmNhbGwodGhpcyxlLmRhdGEuaXRlbS53ZWJVcmwpO2JyZWFrO2Nhc2VcImV2ZW50XCI6e2NvbnN0IHQ9ZS5kYXRhLml0ZW0sYT1hd2FpdCB0aGlzLmV4ZWN1dGVBcGlSZXF1ZXN0KGAvdjEuMC9tZS9ldmVudHMvJHt0LmlkfWApO0RlKHRoaXMsQWUsXCJmXCIpLmNhbGwodGhpcyxhLmRhdGEud2ViTGluayk7YnJlYWt9Y2FzZVwiY2hhdE1lc3NhZ2VcIjpEZSh0aGlzLHhlLFwiZlwiKS5jYWxsKHRoaXMsZSk7YnJlYWs7Y2FzZVwibWVzc2FnZVwiOkRlKHRoaXMsQWUsXCJmXCIpLmNhbGwodGhpcyxlLmRhdGEuaXRlbS53ZWJMaW5rKTticmVhaztjYXNlXCJsaXN0XCI6e2NvbnN0IHQ9ZS5kYXRhLml0ZW0sYT1hd2FpdCB0aGlzLmV4ZWN1dGVBcGlSZXF1ZXN0KGAvdjEuMC9zaXRlcy8ke3QucGFyZW50UmVmZXJlbmNlPy5zaXRlSWR9L2xpc3RzLyR7dC5pZH1gKTtEZSh0aGlzLEFlLFwiZlwiKS5jYWxsKHRoaXMsYS5kYXRhLndlYlVybCk7YnJlYWt9Y2FzZVwidXNlclwiOkRlKHRoaXMsTWUsXCJmXCIpLmNhbGwodGhpcyxlKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIlVuaGFuZGxlZCB1c2VyIGFjdGlvbiBmb3IgcmVzdWx0OlwiLGUsYFVua25vd24gcmVzdWx0IHR5cGUgXCIke2UuZGF0YS50eXBlfVwiYCl9fSkpLEZlLnNldCh0aGlzLChhc3luYyBlPT57bGV0IHQsYTtjb25zdCBuPVtdLHI9ZS5kYXRhLml0ZW07RGUodGhpcyx3ZSxcImZcIikuaGFzKHIuaWQpP3Q9RGUodGhpcyx3ZSxcImZcIikuZ2V0KHIuaWQpOm4ucHVzaCh7aWQ6XCJjb250YWN0UGhvdG9cIixtZXRob2Q6XCJHRVRcIix1cmw6YC91c2Vycy8ke2UuZGF0YS5pdGVtLmlkfS9waG90by8kdmFsdWVgLGhlYWRlcnM6e0NvbnNpc3RlbmN5TGV2ZWw6XCJldmVudHVhbFwifX0pLG4ucHVzaCh7aWQ6XCJwcmVzZW5jZVwiLG1ldGhvZDpcIkdFVFwiLHVybDpgL3VzZXJzLyR7ZS5kYXRhLml0ZW0uaWR9L3ByZXNlbmNlYH0pO3RyeXtjb25zdCBlPWF3YWl0IERlKHRoaXMsdWUsXCJtXCIsYmUpLmNhbGwodGhpcyxuKSxpPWUuZGF0YT8ucmVzcG9uc2VzLmZpbmQoKGU9PlwiY29udGFjdFBob3RvXCI9PT1lLmlkKSk7aSYmMjAwIT09aS5zdGF0dXMmJmNvbnNvbGUud2FybihcIkVycm9yIGZldGNoaW5nIHVzZXIgcGhvdG9cIixpKSxpPy5ib2R5JiYyMDA9PT1pPy5zdGF0dXMmJih0PWBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7aS5ib2R5fWAsRGUodGhpcyx3ZSxcImZcIikucHV0KHIuaWQsdCkpO2NvbnN0IHM9ZS5kYXRhPy5yZXNwb25zZXMuZmluZCgoZT0+XCJwcmVzZW5jZVwiPT09ZS5pZCkpOzIwMCE9PXMuc3RhdHVzJiZjb25zb2xlLndhcm4oXCJFcnJvciBmZXRjaGluZyB1c2VyIHByZXNlbmNlXCIscykscz8uYm9keSYmMjAwPT09cy5zdGF0dXMmJihvPXMuYm9keSxhPXthdmFpbGFibGU6XCJhdmFpbGFibGVcIixhdmFpbGFibGVpZGxlOlwiYXZhaWxhYmxlXCIsYXdheTpcImF3YXlcIixiZXJpZ2h0YmFjazpcImF3YXlcIixidXN5OlwiYnVzeVwiLGJ1c3lpZGxlOlwiYnVzeVwiLGRvbm90ZGlzdHVyYjpcImRvLW5vdC1kaXN0dXJiXCIsb2ZmbGluZTpcIm9mZmxpbmVcIixwcmVzZW5jZXVua25vd246XCJvZmZsaW5lXCJ9W28uYXZhaWxhYmlsaXR5Py50b0xvd2VyQ2FzZSgpXSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHVzZXIgZGF0YVwiLGUpfXZhciBvO2NvbnN0IGk9W1tcIkRlcGFydG1lbnRcIixyLmRlcGFydG1lbnR8fFwiTi9BXCJdLFtcIkVtYWlsXCIsci5tYWlsfHxcIk4vQVwiXSxbXCJXb3JrIFBob25lXCIsci5idXNpbmVzc1Bob25lcz8uWzBdfHxcIk4vQVwiXSxbXCJNb2JpbGVcIixyLm1vYmlsZVBob25lfHxcIk4vQVwiXSxbXCJMb2NhdGlvblwiLHIub2ZmaWNlTG9jYXRpb258fFwiTi9BXCJdXSxzPXsuLi5lLHRlbXBsYXRlOk4uZkMuQ29udGFjdCx0ZW1wbGF0ZUNvbnRlbnQ6e25hbWU6ZS5kYXRhLml0ZW0uZGlzcGxheU5hbWUsdGl0bGU6ZS5kYXRhLml0ZW0uam9iVGl0bGUsZGV0YWlsczpbaV0scGhvdG9Vcmw6dCxvbmxpbmVTdGF0dXM6YSxidXR0b25zOlt7dHlwZTpcImJ1dHRvblwiLGljb246e2xpZ2h0OigwLEUuT1gpKE8uc1AuQ2FsbEljb25MaWdodCksZGFyazooMCxFLk9YKShPLnNQLkNhbGxJY29uRGFyayl9LHRvb2x0aXA6XCJUZWFtcyBDYWxsXCIsYWN0aW9uOkp9LHt0eXBlOlwiYnV0dG9uXCIsaWNvbjp7bGlnaHQ6KDAsRS5PWCkoTy5zUC5DaGF0SWNvbkxpZ2h0KSxkYXJrOigwLEUuT1gpKE8uc1AuQ2hhdEljb25EYXJrKX0sdG9vbHRpcDpcIkNoYXRcIixhY3Rpb246ZWV9LHt0eXBlOlwiYnV0dG9uXCIsaWNvbjp7bGlnaHQ6KDAsRS5PWCkoTy5zUC5NZXNzYWdlSWNvbkxpZ2h0KSxkYXJrOigwLEUuT1gpKE8uc1AuTWVzc2FnZUljb25EYXJrKX0sdG9vbHRpcDpcIkUtbWFpbFwiLGFjdGlvbjp0ZX1dfX07RGUodGhpcyx5ZSxcImZcIikucHV0KGUuZGF0YS5pdGVtLmlkLHMpLERlKHRoaXMsaGUsXCJmXCIpLnJlc3BvbmQoW3NdKX0pKSxXZS5zZXQodGhpcywoYXN5bmMoZSx0KT0+e2lmKERlKHRoaXMsaGUsXCJmXCIpJiZEZSh0aGlzLGhlLFwiZlwiKS5jbG9zZSgpLE9lKHRoaXMsaGUsdCxcImZcIiksRGUodGhpcyxoZSxcImZcIikub3BlbigpLGUucXVlcnkubGVuZ3RoPERlKHRoaXMsZ2UsXCJmXCIpKXJldHVybntyZXN1bHRzOltdfTtjb25zdCBhPWVuY29kZVVSSUNvbXBvbmVudChlLnF1ZXJ5KSxuPVtdLHI9KChlLHQpPT57Y29uc3QgYT1BcnJheS5pc0FycmF5KGUuY29udGV4dC5zZWxlY3RlZEZpbHRlcnM/LmZpbmQoKGU9PmUuaWQ9PT1YKSk/Lm9wdGlvbnMpP2UuY29udGV4dC5zZWxlY3RlZEZpbHRlcnMuZmluZCgoZT0+ZS5pZD09PVgpKT8ub3B0aW9uczpbXSxuPWEuZXZlcnkoKCh7aXNTZWxlY3RlZDplfSk9PiFlKSk7cmV0dXJue3Nob3dEb2N1bWVudHM6dC5oYXMoXCJEb2N1bWVudFwiKSYmKG58fCEhYS5maW5kKCgoe3ZhbHVlOmV9KT0+XCJEb2N1bWVudFwiPT09ZSkpPy5pc1NlbGVjdGVkKSxzaG93Q29udGFjdHM6dC5oYXMoXCJDb250YWN0XCIpJiYobnx8ISFhLmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkNvbnRhY3RcIj09PWUpKT8uaXNTZWxlY3RlZCksc2hvd0NoYXRNZXNzYWdlczp0LmhhcyhcIkNoYXQgTWVzc2FnZVwiKSYmKG58fCEhYS5maW5kKCgoe3ZhbHVlOmV9KT0+XCJDaGF0IE1lc3NhZ2VcIj09PWUpKT8uaXNTZWxlY3RlZCksc2hvd01lc3NhZ2VzOnQuaGFzKFwiRW1haWxcIikmJihufHwhIWEuZmluZCgoKHt2YWx1ZTplfSk9PlwiRW1haWxcIj09PWUpKT8uaXNTZWxlY3RlZCksc2hvd0V2ZW50czp0LmhhcyhcIkV2ZW50XCIpJiYobnx8ISFhLmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkV2ZW50XCI9PT1lKSk/LmlzU2VsZWN0ZWQpLHNob3dMaXN0czp0LmhhcyhcIkxpc3RcIikmJihufHwhIWEuZmluZCgoKHt2YWx1ZTplfSk9PlwiTGlzdFwiPT09ZSkpPy5pc1NlbGVjdGVkKX19KShlLERlKHRoaXMsbWUsXCJmXCIpKTtpZihyLnNob3dEb2N1bWVudHMpe2NvbnN0IGU9YCcke2F9J2A7bi5wdXNoKHtpZDpcImRyaXZlSXRlbVwiLG1ldGhvZDpcIkdFVFwiLHVybDpgL21lL2RyaXZlL3Jvb3Qvc2VhcmNoKHE9JHtlbmNvZGVVUklDb21wb25lbnQoZSl9KWAsaGVhZGVyczp7Q29uc2lzdGVuY3lMZXZlbDpcImV2ZW50dWFsXCJ9fSl9aWYoci5zaG93RXZlbnRzJiZuLnB1c2goe2lkOlwiZXZlbnRcIix1cmw6XCIvc2VhcmNoL3F1ZXJ5XCIsbWV0aG9kOlwiUE9TVFwiLGJvZHk6e3JlcXVlc3RzOlt7ZW50aXR5VHlwZXM6W1wiZXZlbnRcIl0scXVlcnk6e3F1ZXJ5U3RyaW5nOmUucXVlcnl9LGZyb206MCxzaXplOjEwfV19LGhlYWRlcnM6e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCJ9fSksci5zaG93Q29udGFjdHMpe2NvbnN0IHQ9YFwiJHtlLnF1ZXJ5fVwiYDtuLnB1c2goe2lkOlwiY29udGFjdFwiLG1ldGhvZDpcIkdFVFwiLHVybDpgL21lL2NvbnRhY3RzPyRzZWFyY2g9JHtlbmNvZGVVUklDb21wb25lbnQodCl9JiR0b3A9MTBgfSk7Y29uc3QgYT1bXCJkaXNwbGF5TmFtZVwiLFwiZ2l2ZW5OYW1lXCIsXCJzdXJuYW1lXCJdLm1hcCgodD0+YFwiJHt0fToke2UucXVlcnl9XCJgKSkuam9pbihcIiBPUiBcIik7bi5wdXNoKHtpZDpcInVzZXJcIixtZXRob2Q6XCJHRVRcIix1cmw6YC91c2Vycz8kc2VhcmNoPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGEpfSYkdG9wPTEwJiRzZWxlY3Q9aWQsZGlzcGxheU5hbWUsZGVwYXJ0bWVudCxtYWlsLGJ1c2luZXNzUGhvbmVzLG1vYmlsZVBob25lLG9mZmljZUxvY2F0aW9uLGpvYlRpdGxlYCxoZWFkZXJzOntDb25zaXN0ZW5jeUxldmVsOlwiZXZlbnR1YWxcIn19KX1pZihyLnNob3dNZXNzYWdlcyYmbi5wdXNoKHtpZDpcIm1lc3NhZ2VcIixtZXRob2Q6XCJHRVRcIix1cmw6YC9tZS9tZXNzYWdlcz8kc2VsZWN0PXNlbmRlcixzdWJqZWN0LGJvZHlQcmV2aWV3LHJlY2VpdmVkRGF0ZVRpbWUsd2ViTGluayYkc2VhcmNoPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGBcIiR7ZS5xdWVyeX1cImApfSYkdG9wPTEwYH0pLHIuc2hvd0NoYXRNZXNzYWdlcyYmbi5wdXNoKHtpZDpcImNoYXRNZXNzYWdlXCIsdXJsOlwiL3NlYXJjaC9xdWVyeVwiLG1ldGhvZDpcIlBPU1RcIixib2R5OntyZXF1ZXN0czpbe2VudGl0eVR5cGVzOltcImNoYXRNZXNzYWdlXCJdLHF1ZXJ5OntxdWVyeVN0cmluZzplLnF1ZXJ5fSxmcm9tOjAsc2l6ZToxMH1dfSxoZWFkZXJzOntcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifX0pLHIuc2hvd0xpc3RzJiZuLnB1c2goe2lkOlwibGlzdFwiLHVybDpcIi9zZWFyY2gvcXVlcnlcIixtZXRob2Q6XCJQT1NUXCIsYm9keTp7cmVxdWVzdHM6W3tlbnRpdHlUeXBlczpbXCJsaXN0XCJdLHF1ZXJ5OntxdWVyeVN0cmluZzplLnF1ZXJ5fSxmcm9tOjAsc2l6ZToxMH1dfSxoZWFkZXJzOntcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifX0pLDA9PT1uLmxlbmd0aClyZXR1cm57cmVzdWx0czpbXX07Y29uc3R7cmVzdWx0czpvLGZpbHRlcnM6aX09YXdhaXQgRGUodGhpcyx1ZSxcIm1cIixTZSkuY2FsbCh0aGlzLG4sZSk7cmV0dXJuIG8uZmluZCgoZT0+ZS5rZXk9PT1EZSh0aGlzLGZlLFwiZlwiKT8ua2V5KSk/LnRlbXBsYXRlPT09Ti5mQy5Mb2FkaW5nJiZEZSh0aGlzLENlLFwiZlwiKS5jYWxsKHRoaXMsRGUodGhpcyxmZSxcImZcIikpLHtyZXN1bHRzOm8sY29udGV4dDp7ZmlsdGVyczppfX19KSksVGUuc2V0KHRoaXMsKGFzeW5jIGU9Pntzd2l0Y2goZS5hY3Rpb24udHJpZ2dlcil7Y2FzZSBCZS5QLkZvY3VzQ2hhbmdlOkRlKHRoaXMsQ2UsXCJmXCIpLmNhbGwodGhpcyxlKTticmVhaztjYXNlIEJlLlAuVXNlckFjdGlvbjpEZSh0aGlzLEllLFwiZlwiKS5jYWxsKHRoaXMsZSk7YnJlYWs7Y2FzZSBCZS5QLlJlbG9hZDpicmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihgVW5rbm93biBhY3Rpb24gdHJpZ2dlcjogJHtlLmFjdGlvbi50cmlnZ2VyfWApfX0pKSx0aGlzLmluaXRpYWxpemVXb3JrZmxvdz1hc3luYyBlPT57aWYoXCJzZWFyY2hcIiE9PWUpdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gaW5pdGlhbGl6ZSB1bmtub3duIHdvcmtmbG93OiAke2V9YCk7YXdhaXQgUy5yZWdpc3Rlcih7Li4udGhpcy5jb25maWcud29ya2Zsb3dzLnNlYXJjaC5ob21lUHJvdmlkZXIsb25Vc2VySW5wdXQ6RGUodGhpcyxXZSxcImZcIiksb25SZXN1bHREaXNwYXRjaDpEZSh0aGlzLFRlLFwiZlwiKX0pLCgwLEguZW5hYmxlTG9nZ2luZykoKSxhd2FpdCB0aGlzLmNvbm5lY3QoKSxzdXBlci5pbml0aWFsaXplV29ya2Zsb3coZSl9LE9iamVjdC5lbnRyaWVzKHQud29ya2Zsb3dzPy5zZWFyY2g/Lm1pY3Jvc29mdEVudGl0eVR5cGVDb25maWd8fHt9KS5maWx0ZXIoKChbZSx0XSk9PnQpKS5mb3JFYWNoKCgoW2VdKT0+e0RlKHRoaXMsbWUsXCJmXCIpLmFkZChxW2VdKX0pKX1hc3luYyBleGVjdXRlQXBpUmVxdWVzdCguLi5lKXtyZXR1cm4gRGUodGhpcyx1ZSxcIm1cIix2ZSkuY2FsbCh0aGlzLCgoKT0+RGUodGhpcyxrZSxcImZcIikuY2FsbCh0aGlzKS5leGVjdXRlQXBpUmVxdWVzdCguLi5lKSkpfX1wZT1uZXcgV2Vha01hcCxoZT1uZXcgV2Vha01hcCxmZT1uZXcgV2Vha01hcCxnZT1uZXcgV2Vha01hcCxtZT1uZXcgV2Vha01hcCx3ZT1uZXcgV2Vha01hcCx5ZT1uZXcgV2Vha01hcCxrZT1uZXcgV2Vha01hcCxDZT1uZXcgV2Vha01hcCxBZT1uZXcgV2Vha01hcCx4ZT1uZXcgV2Vha01hcCxNZT1uZXcgV2Vha01hcCxJZT1uZXcgV2Vha01hcCxGZT1uZXcgV2Vha01hcCxXZT1uZXcgV2Vha01hcCxUZT1uZXcgV2Vha01hcCx1ZT1uZXcgV2Vha1NldCx2ZT1hc3luYyBmdW5jdGlvbihlKXt0cnl7cmV0dXJuIGF3YWl0IGUoKX1jYXRjaCh0KXtpZih0IGluc3RhbmNlb2YgSC5BdXRoVG9rZW5FeHBpcmVkRXJyb3IpcmV0dXJuIGF3YWl0IHRoaXMuY29ubmVjdCgpLGUoKTt0aHJvdyB0fX0sYmU9YXN5bmMgZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZXhlY3V0ZUFwaVJlcXVlc3QoXCIvdjEuMC8kYmF0Y2hcIixcIlBPU1RcIix7cmVxdWVzdHM6ZX0pfSxTZT1hc3luYyBmdW5jdGlvbihlLHQpe3RyeXtjb25zdCBhPWF3YWl0IERlKHRoaXMsdWUsXCJtXCIsYmUpLmNhbGwodGhpcyxlKTtyZXR1cm57ZmlsdGVyczpbLi4uYWUodCxEZSh0aGlzLG1lLFwiZlwiKSksLi4ubmUoYS5kYXRhLnJlc3BvbnNlcy5maW5kKChlPT5cInVzZXJcIj09PWUuaWQpKT8uYm9keT8udmFsdWV8fFtdLHQpXSxyZXN1bHRzOkRlKHRoaXMsdWUsXCJtXCIsUGUpLmNhbGwodGhpcyxhLHQpfX1jYXRjaChlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGV4ZWN1dGUgQmF0Y2ggQVBJIHJlcXVlc3Q6IFwiLGUpLHtmaWx0ZXJzOltdLHJlc3VsdHM6W3trZXk6KDAsTC5OKSgpLHRpdGxlOlwiRXJyb3IgRmV0Y2hpbmcgU2VhcmNoIFJlc3VsdHNcIixkZXNjcmlwdGlvbjpcIlwiLGFjdGlvbnM6W10sdGVtcGxhdGU6Ti5mQy5FcnJvcix0ZW1wbGF0ZUNvbnRlbnQ6YEZhaWxlZCB0byBleGVjdXRlIEJhdGNoIEFQSSByZXF1ZXN0OiAke0pTT04uc3RyaW5naWZ5KGUpfWB9XX19fSxQZT1mdW5jdGlvbihlLHQpe2xldCBhPVtdO2Zvcihjb25zdCBuIG9mIGUuZGF0YS5yZXNwb25zZXMpaWYoMjAwPT09bi5zdGF0dXMpc3dpdGNoKG4uaWQpe2Nhc2VcImRyaXZlSXRlbVwiOntjb25zdCBlPWllKHQpLHI9ZS5maWx0ZXJGaWxlcz9zZShuLmJvZHkudmFsdWUsZSk6bi5ib2R5LnZhbHVlO2EucHVzaCguLi4ocnx8W10pLm1hcCgoZT0+KHtrZXk6ZS5pZD8/KDAsTC5OKSgpLHRpdGxlOmUubmFtZT8/XCJcIixkZXNjcmlwdGlvbjplLmZpbGU/Lm1pbWVUeXBlPz9cIlwiLGxhYmVsOmNlKGUubmFtZSksaWNvbjpkZShlLm5hbWUpLGRhdGE6e3R5cGU6XCJkcml2ZUl0ZW1cIixpdGVtOmV9LGFjdGlvbnM6W3tuYW1lOlwiTGF1bmNoXCJ9XSx0ZW1wbGF0ZTpOLmZDLlBsYWluLHRlbXBsYXRlQ29udGVudDp2b2lkIDB9KSkpKTticmVha31jYXNlXCJldmVudFwiOmEucHVzaCguLi5uLmJvZHk/LnZhbHVlPy5bMF0/LmhpdHNDb250YWluZXJzPy5bMF0/LmhpdHM/LmZpbHRlcigoZT0+ZS5yZXNvdXJjZS5zdWJqZWN0KSkubWFwKChlPT57Y29uc3QgdD1lLnJlc291cmNlLGE9bGUoZS5oaXRJZCk7cmV0dXJue2tleTphLHRpdGxlOnQuc3ViamVjdD8/XCJcIixsYWJlbDpcIkNhbGVuZGFyIEV2ZW50XCIsaWNvbjooMCxFLk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVPdXRsb29rSWNvbiksYWN0aW9uczpbe25hbWU6XCJMYXVuY2hcIn1dLGRhdGE6e3R5cGU6XCJldmVudFwiLGl0ZW06ey4uLnQsaWQ6YX19LHRlbXBsYXRlOk4uZkMuUGxhaW4sdGVtcGxhdGVDb250ZW50OnZvaWQgMH19KSl8fFtdKTticmVhaztjYXNlXCJjb250YWN0XCI6e2NvbnN0IGU9cmUodCkscj1vZShuLmJvZHkudmFsdWV8fFtdLGUpO2EucHVzaCguLi4ocnx8W10pLm1hcCgoZT0+KHtrZXk6ZS5pZD8/KDAsTC5OKSgpLHRpdGxlOmUuZGlzcGxheU5hbWU/P1wiXCIsbGFiZWw6XCJPdXRsb29rIGNvbnRhY3RcIixpY29uOigwLEUuT1gpKE8uc1AuTWljcm9zb2Z0MzY1QXNzZXRzLk1pY3Jvc29mdDM2NU91dGxvb2tJY29uKSxhY3Rpb25zOltdLGRhdGE6e3R5cGU6XCJjb250YWN0XCIsaXRlbTplfSx0ZW1wbGF0ZTpOLmZDLlBsYWluLHRlbXBsYXRlQ29udGVudDp2b2lkIDB9KSkpKTticmVha31jYXNlXCJ1c2VyXCI6e2NvbnN0IGU9cmUodCkscj1vZShuLmJvZHkudmFsdWV8fFtdLGUpO2EucHVzaCguLi4ocnx8W10pLm1hcCgoZT0+KHtrZXk6ZS5pZD8/KDAsTC5OKSgpLHRpdGxlOmUuZGlzcGxheU5hbWU/P1wiXCIsbGFiZWw6XCJUZWFtcyBjb250YWN0XCIsaWNvbjooMCxFLk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVUZWFtc0ljb24pLGFjdGlvbnM6W10sZGF0YTp7dHlwZTpcInVzZXJcIixpdGVtOmV9LHRlbXBsYXRlOk4uZkMuTG9hZGluZyx0ZW1wbGF0ZUNvbnRlbnQ6dm9pZCAwfSkpKSk7YnJlYWt9Y2FzZVwibWVzc2FnZVwiOmEucHVzaCguLi4obi5ib2R5LnZhbHVlfHxbXSkubWFwKChlPT4oe2tleTplLmlkPz8oMCxMLk4pKCksdGl0bGU6YCR7ZS5zdWJqZWN0Pz9cIlVudGl0bGVkIE1lc3NhZ2VcIn0ke2UuaXNEcmFmdD9cIiAoRHJhZnQpXCI6XCJcIn1gLGxhYmVsOlwiRW1haWxcIixpY29uOigwLEUuT1gpKE8uc1AuTWljcm9zb2Z0MzY1QXNzZXRzLk1pY3Jvc29mdDM2NU91dGxvb2tJY29uKSxhY3Rpb25zOltdLGRhdGE6e3R5cGU6XCJtZXNzYWdlXCIsaXRlbTplfSx0ZW1wbGF0ZTpOLmZDLlBsYWluLHRlbXBsYXRlQ29udGVudDp2b2lkIDB9KSkpKTticmVhaztjYXNlXCJjaGF0TWVzc2FnZVwiOmEucHVzaCguLi5uLmJvZHk/LnZhbHVlPy5bMF0/LmhpdHNDb250YWluZXJzPy5bMF0/LmhpdHM/Lm1hcCgoZT0+e2NvbnN0IHQ9ZS5yZXNvdXJjZTtyZXR1cm57a2V5OnQuaWQ/PygwLEwuTikoKSx0aXRsZTplLnN1bW1hcnk/P1wiVW50aXRsZWQgTWVzc2FnZVwiLGxhYmVsOlwiQ2hhdFwiLGljb246KDAsRS5PWCkoTy5zUC5NaWNyb3NvZnQzNjVBc3NldHMuTWljcm9zb2Z0MzY1VGVhbXNJY29uKSxhY3Rpb25zOltdLGRhdGE6e3R5cGU6XCJjaGF0TWVzc2FnZVwiLGl0ZW06dH0sdGVtcGxhdGU6Ti5mQy5QbGFpbix0ZW1wbGF0ZUNvbnRlbnQ6dm9pZCAwfX0pKXx8W10pO2JyZWFrO2Nhc2VcImxpc3RcIjphLnB1c2goLi4ubi5ib2R5Py52YWx1ZT8uWzBdPy5oaXRzQ29udGFpbmVycz8uWzBdPy5oaXRzPy5tYXAoKGU9Pntjb25zdCB0PWUucmVzb3VyY2UsYT1sZShlLmhpdElkKTtyZXR1cm57a2V5OmEsdGl0bGU6dC5kaXNwbGF5TmFtZT8/XCJVbnRpdGxlZCBMaXN0XCIsbGFiZWw6XCJMaXN0XCIsYWN0aW9uczpbe25hbWU6XCJMYXVuY2hcIn1dLGRhdGE6e3R5cGU6XCJsaXN0XCIsaXRlbTp7Li4udCxpZDphfX0sdGVtcGxhdGU6Ti5mQy5QbGFpbix0ZW1wbGF0ZUNvbnRlbnQ6dm9pZCAwfX0pKXx8W10pO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKGBVbmtub3duIGJhdGNoIHJlc3BvbnNlIGlkOiAke24uaWR9YCxuLmJvZHkpfWVsc2UgY29uc29sZS53YXJuKFwiQmF0Y2ggQVBJIHJlcXVlc3QgZmFpbGVkOiBcIixuKTtyZXR1cm4gYT1hLm1hcCgoZT0+e2lmKCFlLmRhdGE/Lml0ZW0/LmlkKXJldHVybiBlO2NvbnN0IHQ9RGUodGhpcyx5ZSxcImZcIikuZ2V0KGUuZGF0YS5pdGVtLmlkKTtyZXR1cm4gdD97Li4uZSx0ZW1wbGF0ZTp0LnRlbXBsYXRlLHRlbXBsYXRlQ29udGVudDp0LnRlbXBsYXRlQ29udGVudH06ZX0pKSxhLnNvcnQoKChlLHQpPT5lLnRpdGxlPnQudGl0bGU/MTotMSkpfTt2YXIgX2U9YSg1OTgpLEJlPWEoMTI5KSxSZT1hKDE4NCksJGU9YSg3MTApfSkoKSxtb2R1bGUuZXhwb3J0cz1ufSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIi8qXG4gKiBEZXhpZS5qcyAtIGEgbWluaW1hbGlzdGljIHdyYXBwZXIgZm9yIEluZGV4ZWREQlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqXG4gKiBCeSBEYXZpZCBGYWhsYW5kZXIsIGRhdmlkLmZhaGxhbmRlckBnbWFpbC5jb21cbiAqXG4gKiBWZXJzaW9uIDQuMC4xMSwgV2VkIEphbiAxNSAyMDI1XG4gKlxuICogaHR0cHM6Ly9kZXhpZS5vcmdcbiAqXG4gKiBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCwgSmFudWFyeSAyMDA0LCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvXG4gKi9cbiBcbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkRleGllID0gZmFjdG9yeSgpKTtcbn0pKHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxuICAgIHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cbiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG4gICAgUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG4gICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxuICAgIElORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuICAgIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG4gICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxuICAgIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH1cbiAgICB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcbiAgICAgICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbiAgICB9XG5cbiAgICB2YXIgX2dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOlxuICAgICAgICB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDpcbiAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDpcbiAgICAgICAgICAgICAgICBnbG9iYWw7XG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzO1xuICAgIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbiAgICBpZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmICFfZ2xvYmFsLlByb21pc2UpIHtcbiAgICAgICAgX2dsb2JhbC5Qcm9taXNlID0gUHJvbWlzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgZXh0ZW5zaW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZXh0ZW5zaW9uICE9PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGtleXMoZXh0ZW5zaW9uKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIG9ialtrZXldID0gZXh0ZW5zaW9uW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gICAgdmFyIF9oYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbiAgICBmdW5jdGlvbiBoYXNPd24ob2JqLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBfaGFzT3duLmNhbGwob2JqLCBwcm9wKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcHMocHJvdG8sIGV4dGVuc2lvbikge1xuICAgICAgICBpZiAodHlwZW9mIGV4dGVuc2lvbiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIGV4dGVuc2lvbiA9IGV4dGVuc2lvbihnZXRQcm90byhwcm90bykpO1xuICAgICAgICAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgPyBrZXlzIDogUmVmbGVjdC5vd25LZXlzKShleHRlbnNpb24pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgc2V0UHJvcChwcm90bywga2V5LCBleHRlbnNpb25ba2V5XSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4gICAgZnVuY3Rpb24gc2V0UHJvcChvYmosIHByb3AsIGZ1bmN0aW9uT3JHZXRTZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBleHRlbmQoZnVuY3Rpb25PckdldFNldCAmJiBoYXNPd24oZnVuY3Rpb25PckdldFNldCwgXCJnZXRcIikgJiYgdHlwZW9mIGZ1bmN0aW9uT3JHZXRTZXQuZ2V0ID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIHsgZ2V0OiBmdW5jdGlvbk9yR2V0U2V0LmdldCwgc2V0OiBmdW5jdGlvbk9yR2V0U2V0LnNldCwgY29uZmlndXJhYmxlOiB0cnVlIH0gOlxuICAgICAgICAgICAgeyB2YWx1ZTogZnVuY3Rpb25PckdldFNldCwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9LCBvcHRpb25zKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlcml2ZShDaGlsZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogZnVuY3Rpb24gKFBhcmVudCkge1xuICAgICAgICAgICAgICAgIENoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGFyZW50LnByb3RvdHlwZSk7XG4gICAgICAgICAgICAgICAgc2V0UHJvcChDaGlsZC5wcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgQ2hpbGQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZDogcHJvcHMuYmluZChudWxsLCBDaGlsZC5wcm90b3R5cGUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG4gICAgZnVuY3Rpb24gZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCkge1xuICAgICAgICB2YXIgcGQgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKTtcbiAgICAgICAgdmFyIHByb3RvO1xuICAgICAgICByZXR1cm4gcGQgfHwgKHByb3RvID0gZ2V0UHJvdG8ob2JqKSkgJiYgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBwcm9wKTtcbiAgICB9XG4gICAgdmFyIF9zbGljZSA9IFtdLnNsaWNlO1xuICAgIGZ1bmN0aW9uIHNsaWNlKGFyZ3MsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgcmV0dXJuIF9zbGljZS5jYWxsKGFyZ3MsIHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvdmVycmlkZShvcmlnRnVuYywgb3ZlcnJpZGVkRmFjdG9yeSkge1xuICAgICAgICByZXR1cm4gb3ZlcnJpZGVkRmFjdG9yeShvcmlnRnVuYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFzc2VydChiKSB7XG4gICAgICAgIGlmICghYilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzc2VydGlvbiBGYWlsZWRcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFzYXAkMShmbikge1xuICAgICAgICBpZiAoX2dsb2JhbC5zZXRJbW1lZGlhdGUpXG4gICAgICAgICAgICBzZXRJbW1lZGlhdGUoZm4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXJyYXlUb09iamVjdChhcnJheSwgZXh0cmFjdG9yKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgaXRlbSwgaSkge1xuICAgICAgICAgICAgdmFyIG5hbWVBbmRWYWx1ZSA9IGV4dHJhY3RvcihpdGVtLCBpKTtcbiAgICAgICAgICAgIGlmIChuYW1lQW5kVmFsdWUpXG4gICAgICAgICAgICAgICAgcmVzdWx0W25hbWVBbmRWYWx1ZVswXV0gPSBuYW1lQW5kVmFsdWVbMV07XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJ5S2V5UGF0aChvYmosIGtleVBhdGgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyAmJiBoYXNPd24ob2JqLCBrZXlQYXRoKSlcbiAgICAgICAgICAgIHJldHVybiBvYmpba2V5UGF0aF07XG4gICAgICAgIGlmICgha2V5UGF0aClcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlQYXRoLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoW2ldKTtcbiAgICAgICAgICAgICAgICBydi5wdXNoKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBlcmlvZCA9IGtleVBhdGguaW5kZXhPZignLicpO1xuICAgICAgICBpZiAocGVyaW9kICE9PSAtMSkge1xuICAgICAgICAgICAgdmFyIGlubmVyT2JqID0gb2JqW2tleVBhdGguc3Vic3RyKDAsIHBlcmlvZCldO1xuICAgICAgICAgICAgcmV0dXJuIGlubmVyT2JqID09IG51bGwgPyB1bmRlZmluZWQgOiBnZXRCeUtleVBhdGgoaW5uZXJPYmosIGtleVBhdGguc3Vic3RyKHBlcmlvZCArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIW9iaiB8fCBrZXlQYXRoID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICgnaXNGcm96ZW4nIGluIE9iamVjdCAmJiBPYmplY3QuaXNGcm96ZW4ob2JqKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlQYXRoICE9PSAnc3RyaW5nJyAmJiAnbGVuZ3RoJyBpbiBrZXlQYXRoKSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiAnbGVuZ3RoJyBpbiB2YWx1ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleVBhdGgubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aFtpXSwgdmFsdWVbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHBlcmlvZCA9IGtleVBhdGguaW5kZXhPZignLicpO1xuICAgICAgICAgICAgaWYgKHBlcmlvZCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEtleVBhdGggPSBrZXlQYXRoLnN1YnN0cigwLCBwZXJpb2QpO1xuICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdLZXlQYXRoID0ga2V5UGF0aC5zdWJzdHIocGVyaW9kICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ0tleVBhdGggPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShvYmopICYmICFpc05hTihwYXJzZUludChjdXJyZW50S2V5UGF0aCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zcGxpY2UoY3VycmVudEtleVBhdGgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbY3VycmVudEtleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialtjdXJyZW50S2V5UGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyT2JqID0gb2JqW2N1cnJlbnRLZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbm5lck9iaiB8fCAhaGFzT3duKG9iaiwgY3VycmVudEtleVBhdGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJPYmogPSAob2JqW2N1cnJlbnRLZXlQYXRoXSA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGlubmVyT2JqLCByZW1haW5pbmdLZXlQYXRoLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkob2JqKSAmJiAhaXNOYU4ocGFyc2VJbnQoa2V5UGF0aCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNwbGljZShrZXlQYXRoLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmpba2V5UGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBkZWxCeUtleVBhdGgob2JqLCBrZXlQYXRoKSB7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB1bmRlZmluZWQpO1xuICAgICAgICBlbHNlIGlmICgnbGVuZ3RoJyBpbiBrZXlQYXRoKVxuICAgICAgICAgICAgW10ubWFwLmNhbGwoa2V5UGF0aCwgZnVuY3Rpb24gKGtwKSB7XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga3AsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2hhbGxvd0Nsb25lKG9iaikge1xuICAgICAgICB2YXIgcnYgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgbSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24ob2JqLCBtKSlcbiAgICAgICAgICAgICAgICBydlttXSA9IG9ialttXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIHZhciBjb25jYXQgPSBbXS5jb25jYXQ7XG4gICAgZnVuY3Rpb24gZmxhdHRlbihhKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQuYXBwbHkoW10sIGEpO1xuICAgIH1cbiAgICB2YXIgaW50cmluc2ljVHlwZU5hbWVzID0gXCJCaWdVaW50NjRBcnJheSxCaWdJbnQ2NEFycmF5LEFycmF5LEJvb2xlYW4sU3RyaW5nLERhdGUsUmVnRXhwLEJsb2IsRmlsZSxGaWxlTGlzdCxGaWxlU3lzdGVtRmlsZUhhbmRsZSxGaWxlU3lzdGVtRGlyZWN0b3J5SGFuZGxlLEFycmF5QnVmZmVyLERhdGFWaWV3LFVpbnQ4Q2xhbXBlZEFycmF5LEltYWdlQml0bWFwLEltYWdlRGF0YSxNYXAsU2V0LENyeXB0b0tleVwiXG4gICAgICAgIC5zcGxpdCgnLCcpLmNvbmNhdChmbGF0dGVuKFs4LCAxNiwgMzIsIDY0XS5tYXAoZnVuY3Rpb24gKG51bSkgeyByZXR1cm4gW1wiSW50XCIsIFwiVWludFwiLCBcIkZsb2F0XCJdLm1hcChmdW5jdGlvbiAodCkgeyByZXR1cm4gdCArIG51bSArIFwiQXJyYXlcIjsgfSk7IH0pKSkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7IHJldHVybiBfZ2xvYmFsW3RdOyB9KTtcbiAgICB2YXIgaW50cmluc2ljVHlwZXMgPSBuZXcgU2V0KGludHJpbnNpY1R5cGVOYW1lcy5tYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIF9nbG9iYWxbdF07IH0pKTtcbiAgICBmdW5jdGlvbiBjbG9uZVNpbXBsZU9iamVjdFRyZWUobykge1xuICAgICAgICB2YXIgcnYgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKVxuICAgICAgICAgICAgaWYgKGhhc093bihvLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciB2ID0gb1trXTtcbiAgICAgICAgICAgICAgICBydltrXSA9ICF2IHx8IHR5cGVvZiB2ICE9PSAnb2JqZWN0JyB8fCBpbnRyaW5zaWNUeXBlcy5oYXModi5jb25zdHJ1Y3RvcikgPyB2IDogY2xvbmVTaW1wbGVPYmplY3RUcmVlKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9iamVjdElzRW1wdHkobykge1xuICAgICAgICBmb3IgKHZhciBrIGluIG8pXG4gICAgICAgICAgICBpZiAoaGFzT3duKG8sIGspKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBjaXJjdWxhclJlZnMgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGRlZXBDbG9uZShhbnkpIHtcbiAgICAgICAgY2lyY3VsYXJSZWZzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdmFyIHJ2ID0gaW5uZXJEZWVwQ2xvbmUoYW55KTtcbiAgICAgICAgY2lyY3VsYXJSZWZzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbm5lckRlZXBDbG9uZSh4KSB7XG4gICAgICAgIGlmICgheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgdmFyIHJ2ID0gY2lyY3VsYXJSZWZzLmdldCh4KTtcbiAgICAgICAgaWYgKHJ2KVxuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICBpZiAoaXNBcnJheSh4KSkge1xuICAgICAgICAgICAgcnYgPSBbXTtcbiAgICAgICAgICAgIGNpcmN1bGFyUmVmcy5zZXQoeCwgcnYpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB4Lmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgIHJ2LnB1c2goaW5uZXJEZWVwQ2xvbmUoeFtpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGludHJpbnNpY1R5cGVzLmhhcyh4LmNvbnN0cnVjdG9yKSkge1xuICAgICAgICAgICAgcnYgPSB4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb3RvID0gZ2V0UHJvdG8oeCk7XG4gICAgICAgICAgICBydiA9IHByb3RvID09PSBPYmplY3QucHJvdG90eXBlID8ge30gOiBPYmplY3QuY3JlYXRlKHByb3RvKTtcbiAgICAgICAgICAgIGNpcmN1bGFyUmVmcy5zZXQoeCwgcnYpO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiB4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc093bih4LCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBydltwcm9wXSA9IGlubmVyRGVlcENsb25lKHhbcHJvcF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIHZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuICAgIGZ1bmN0aW9uIHRvU3RyaW5nVGFnKG8pIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICAgIH1cbiAgICB2YXIgaXRlcmF0b3JTeW1ib2wgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/XG4gICAgICAgIFN5bWJvbC5pdGVyYXRvciA6XG4gICAgICAgICdAQGl0ZXJhdG9yJztcbiAgICB2YXIgZ2V0SXRlcmF0b3JPZiA9IHR5cGVvZiBpdGVyYXRvclN5bWJvbCA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICByZXR1cm4geCAhPSBudWxsICYmIChpID0geFtpdGVyYXRvclN5bWJvbF0pICYmIGkuYXBwbHkoeCk7XG4gICAgfSA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH07XG4gICAgZnVuY3Rpb24gZGVsQXJyYXlJdGVtKGEsIHgpIHtcbiAgICAgICAgdmFyIGkgPSBhLmluZGV4T2YoeCk7XG4gICAgICAgIGlmIChpID49IDApXG4gICAgICAgICAgICBhLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuIGkgPj0gMDtcbiAgICB9XG4gICAgdmFyIE5PX0NIQVJfQVJSQVkgPSB7fTtcbiAgICBmdW5jdGlvbiBnZXRBcnJheU9mKGFycmF5TGlrZSkge1xuICAgICAgICB2YXIgaSwgYSwgeCwgaXQ7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShhcnJheUxpa2UpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheUxpa2Uuc2xpY2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzID09PSBOT19DSEFSX0FSUkFZICYmIHR5cGVvZiBhcnJheUxpa2UgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBbYXJyYXlMaWtlXTtcbiAgICAgICAgICAgIGlmICgoaXQgPSBnZXRJdGVyYXRvck9mKGFycmF5TGlrZSkpKSB7XG4gICAgICAgICAgICAgICAgYSA9IFtdO1xuICAgICAgICAgICAgICAgIHdoaWxlICgoeCA9IGl0Lm5leHQoKSksICF4LmRvbmUpXG4gICAgICAgICAgICAgICAgICAgIGEucHVzaCh4LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcnJheUxpa2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FycmF5TGlrZV07XG4gICAgICAgICAgICBpID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBhID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICAgICAgICAgIGFbaV0gPSBhcnJheUxpa2VbaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW2FycmF5TGlrZV07XG4gICAgICAgIH1cbiAgICAgICAgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGEgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICBhW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgdmFyIGlzQXN5bmNGdW5jdGlvbiA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbltTeW1ib2wudG9TdHJpbmdUYWddID09PSAnQXN5bmNGdW5jdGlvbic7IH1cbiAgICAgICAgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTtcblxuICAgIHZhciBkZXhpZUVycm9yTmFtZXMgPSBbXG4gICAgICAgICdNb2RpZnknLFxuICAgICAgICAnQnVsaycsXG4gICAgICAgICdPcGVuRmFpbGVkJyxcbiAgICAgICAgJ1ZlcnNpb25DaGFuZ2UnLFxuICAgICAgICAnU2NoZW1hJyxcbiAgICAgICAgJ1VwZ3JhZGUnLFxuICAgICAgICAnSW52YWxpZFRhYmxlJyxcbiAgICAgICAgJ01pc3NpbmdBUEknLFxuICAgICAgICAnTm9TdWNoRGF0YWJhc2UnLFxuICAgICAgICAnSW52YWxpZEFyZ3VtZW50JyxcbiAgICAgICAgJ1N1YlRyYW5zYWN0aW9uJyxcbiAgICAgICAgJ1Vuc3VwcG9ydGVkJyxcbiAgICAgICAgJ0ludGVybmFsJyxcbiAgICAgICAgJ0RhdGFiYXNlQ2xvc2VkJyxcbiAgICAgICAgJ1ByZW1hdHVyZUNvbW1pdCcsXG4gICAgICAgICdGb3JlaWduQXdhaXQnXG4gICAgXTtcbiAgICB2YXIgaWRiRG9tRXJyb3JOYW1lcyA9IFtcbiAgICAgICAgJ1Vua25vd24nLFxuICAgICAgICAnQ29uc3RyYWludCcsXG4gICAgICAgICdEYXRhJyxcbiAgICAgICAgJ1RyYW5zYWN0aW9uSW5hY3RpdmUnLFxuICAgICAgICAnUmVhZE9ubHknLFxuICAgICAgICAnVmVyc2lvbicsXG4gICAgICAgICdOb3RGb3VuZCcsXG4gICAgICAgICdJbnZhbGlkU3RhdGUnLFxuICAgICAgICAnSW52YWxpZEFjY2VzcycsXG4gICAgICAgICdBYm9ydCcsXG4gICAgICAgICdUaW1lb3V0JyxcbiAgICAgICAgJ1F1b3RhRXhjZWVkZWQnLFxuICAgICAgICAnU3ludGF4JyxcbiAgICAgICAgJ0RhdGFDbG9uZSdcbiAgICBdO1xuICAgIHZhciBlcnJvckxpc3QgPSBkZXhpZUVycm9yTmFtZXMuY29uY2F0KGlkYkRvbUVycm9yTmFtZXMpO1xuICAgIHZhciBkZWZhdWx0VGV4dHMgPSB7XG4gICAgICAgIFZlcnNpb25DaGFuZ2VkOiBcIkRhdGFiYXNlIHZlcnNpb24gY2hhbmdlZCBieSBvdGhlciBkYXRhYmFzZSBjb25uZWN0aW9uXCIsXG4gICAgICAgIERhdGFiYXNlQ2xvc2VkOiBcIkRhdGFiYXNlIGhhcyBiZWVuIGNsb3NlZFwiLFxuICAgICAgICBBYm9ydDogXCJUcmFuc2FjdGlvbiBhYm9ydGVkXCIsXG4gICAgICAgIFRyYW5zYWN0aW9uSW5hY3RpdmU6IFwiVHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgY29tcGxldGVkIG9yIGZhaWxlZFwiLFxuICAgICAgICBNaXNzaW5nQVBJOiBcIkluZGV4ZWREQiBBUEkgbWlzc2luZy4gUGxlYXNlIHZpc2l0IGh0dHBzOi8vdGlueXVybC5jb20veTJ1dXZza2JcIlxuICAgIH07XG4gICAgZnVuY3Rpb24gRGV4aWVFcnJvcihuYW1lLCBtc2cpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbXNnO1xuICAgIH1cbiAgICBkZXJpdmUoRGV4aWVFcnJvcikuZnJvbShFcnJvcikuZXh0ZW5kKHtcbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZTsgfVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGdldE11bHRpRXJyb3JNZXNzYWdlKG1zZywgZmFpbHVyZXMpIHtcbiAgICAgICAgcmV0dXJuIG1zZyArIFwiLiBFcnJvcnM6IFwiICsgT2JqZWN0LmtleXMoZmFpbHVyZXMpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZhaWx1cmVzW2tleV0udG9TdHJpbmcoKTsgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHYsIGksIHMpIHsgcmV0dXJuIHMuaW5kZXhPZih2KSA9PT0gaTsgfSlcbiAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTW9kaWZ5RXJyb3IobXNnLCBmYWlsdXJlcywgc3VjY2Vzc0NvdW50LCBmYWlsZWRLZXlzKSB7XG4gICAgICAgIHRoaXMuZmFpbHVyZXMgPSBmYWlsdXJlcztcbiAgICAgICAgdGhpcy5mYWlsZWRLZXlzID0gZmFpbGVkS2V5cztcbiAgICAgICAgdGhpcy5zdWNjZXNzQ291bnQgPSBzdWNjZXNzQ291bnQ7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGdldE11bHRpRXJyb3JNZXNzYWdlKG1zZywgZmFpbHVyZXMpO1xuICAgIH1cbiAgICBkZXJpdmUoTW9kaWZ5RXJyb3IpLmZyb20oRGV4aWVFcnJvcik7XG4gICAgZnVuY3Rpb24gQnVsa0Vycm9yKG1zZywgZmFpbHVyZXMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJCdWxrRXJyb3JcIjtcbiAgICAgICAgdGhpcy5mYWlsdXJlcyA9IE9iamVjdC5rZXlzKGZhaWx1cmVzKS5tYXAoZnVuY3Rpb24gKHBvcykgeyByZXR1cm4gZmFpbHVyZXNbcG9zXTsgfSk7XG4gICAgICAgIHRoaXMuZmFpbHVyZXNCeVBvcyA9IGZhaWx1cmVzO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNdWx0aUVycm9yTWVzc2FnZShtc2csIHRoaXMuZmFpbHVyZXMpO1xuICAgIH1cbiAgICBkZXJpdmUoQnVsa0Vycm9yKS5mcm9tKERleGllRXJyb3IpO1xuICAgIHZhciBlcnJuYW1lcyA9IGVycm9yTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkgeyByZXR1cm4gKG9ialtuYW1lXSA9IG5hbWUgKyBcIkVycm9yXCIsIG9iaik7IH0sIHt9KTtcbiAgICB2YXIgQmFzZUV4Y2VwdGlvbiA9IERleGllRXJyb3I7XG4gICAgdmFyIGV4Y2VwdGlvbnMgPSBlcnJvckxpc3QucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHtcbiAgICAgICAgdmFyIGZ1bGxOYW1lID0gbmFtZSArIFwiRXJyb3JcIjtcbiAgICAgICAgZnVuY3Rpb24gRGV4aWVFcnJvcihtc2dPcklubmVyLCBpbm5lcikge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gZnVsbE5hbWU7XG4gICAgICAgICAgICBpZiAoIW1zZ09ySW5uZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBkZWZhdWx0VGV4dHNbbmFtZV0gfHwgZnVsbE5hbWU7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbXNnT3JJbm5lciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChtc2dPcklubmVyKS5jb25jYXQoIWlubmVyID8gJycgOiAnXFxuICcgKyBpbm5lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lciA9IGlubmVyIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbXNnT3JJbm5lciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChtc2dPcklubmVyLm5hbWUsIFwiIFwiKS5jb25jYXQobXNnT3JJbm5lci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyID0gbXNnT3JJbm5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZXJpdmUoRGV4aWVFcnJvcikuZnJvbShCYXNlRXhjZXB0aW9uKTtcbiAgICAgICAgb2JqW25hbWVdID0gRGV4aWVFcnJvcjtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gICAgZXhjZXB0aW9ucy5TeW50YXggPSBTeW50YXhFcnJvcjtcbiAgICBleGNlcHRpb25zLlR5cGUgPSBUeXBlRXJyb3I7XG4gICAgZXhjZXB0aW9ucy5SYW5nZSA9IFJhbmdlRXJyb3I7XG4gICAgdmFyIGV4Y2VwdGlvbk1hcCA9IGlkYkRvbUVycm9yTmFtZXMucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHtcbiAgICAgICAgb2JqW25hbWUgKyBcIkVycm9yXCJdID0gZXhjZXB0aW9uc1tuYW1lXTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gICAgZnVuY3Rpb24gbWFwRXJyb3IoZG9tRXJyb3IsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCFkb21FcnJvciB8fCBkb21FcnJvciBpbnN0YW5jZW9mIERleGllRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBTeW50YXhFcnJvciB8fCAhZG9tRXJyb3IubmFtZSB8fCAhZXhjZXB0aW9uTWFwW2RvbUVycm9yLm5hbWVdKVxuICAgICAgICAgICAgcmV0dXJuIGRvbUVycm9yO1xuICAgICAgICB2YXIgcnYgPSBuZXcgZXhjZXB0aW9uTWFwW2RvbUVycm9yLm5hbWVdKG1lc3NhZ2UgfHwgZG9tRXJyb3IubWVzc2FnZSwgZG9tRXJyb3IpO1xuICAgICAgICBpZiAoXCJzdGFja1wiIGluIGRvbUVycm9yKSB7XG4gICAgICAgICAgICBzZXRQcm9wKHJ2LCBcInN0YWNrXCIsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlubmVyLnN0YWNrO1xuICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICB2YXIgZnVsbE5hbWVFeGNlcHRpb25zID0gZXJyb3JMaXN0LnJlZHVjZShmdW5jdGlvbiAob2JqLCBuYW1lKSB7XG4gICAgICAgIGlmIChbXCJTeW50YXhcIiwgXCJUeXBlXCIsIFwiUmFuZ2VcIl0uaW5kZXhPZihuYW1lKSA9PT0gLTEpXG4gICAgICAgICAgICBvYmpbbmFtZSArIFwiRXJyb3JcIl0gPSBleGNlcHRpb25zW25hbWVdO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sIHt9KTtcbiAgICBmdWxsTmFtZUV4Y2VwdGlvbnMuTW9kaWZ5RXJyb3IgPSBNb2RpZnlFcnJvcjtcbiAgICBmdWxsTmFtZUV4Y2VwdGlvbnMuRGV4aWVFcnJvciA9IERleGllRXJyb3I7XG4gICAgZnVsbE5hbWVFeGNlcHRpb25zLkJ1bGtFcnJvciA9IEJ1bGtFcnJvcjtcblxuICAgIGZ1bmN0aW9uIG5vcCgpIHsgfVxuICAgIGZ1bmN0aW9uIG1pcnJvcih2YWwpIHsgcmV0dXJuIHZhbDsgfVxuICAgIGZ1bmN0aW9uIHB1cmVGdW5jdGlvbkNoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT0gbnVsbCB8fCBmMSA9PT0gbWlycm9yKVxuICAgICAgICAgICAgcmV0dXJuIGYyO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIGYyKGYxKHZhbCkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjYWxsQm90aChvbjEsIG9uMikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb24xLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBvbjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaG9va0NyZWF0aW5nQ2hhaW4oZjEsIGYyKSB7XG4gICAgICAgIGlmIChmMSA9PT0gbm9wKVxuICAgICAgICAgICAgcmV0dXJuIGYyO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAocmVzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gcmVzO1xuICAgICAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgb25lcnJvciA9IHRoaXMub25lcnJvcjtcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcmVzMiA9IGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAob25zdWNjZXNzKVxuICAgICAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgICAgIGlmIChvbmVycm9yKVxuICAgICAgICAgICAgICAgIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlczIgIT09IHVuZGVmaW5lZCA/IHJlczIgOiByZXM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhvb2tEZWxldGluZ0NoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB2YXIgb25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MsXG4gICAgICAgICAgICBvbmVycm9yID0gdGhpcy5vbmVycm9yO1xuICAgICAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSB0aGlzLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChvbnN1Y2Nlc3MpXG4gICAgICAgICAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSB0aGlzLm9uc3VjY2VzcyA/IGNhbGxCb3RoKG9uc3VjY2VzcywgdGhpcy5vbnN1Y2Nlc3MpIDogb25zdWNjZXNzO1xuICAgICAgICAgICAgaWYgKG9uZXJyb3IpXG4gICAgICAgICAgICAgICAgdGhpcy5vbmVycm9yID0gdGhpcy5vbmVycm9yID8gY2FsbEJvdGgob25lcnJvciwgdGhpcy5vbmVycm9yKSA6IG9uZXJyb3I7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhvb2tVcGRhdGluZ0NoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtb2RpZmljYXRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gZjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGV4dGVuZChtb2RpZmljYXRpb25zLCByZXMpO1xuICAgICAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgb25lcnJvciA9IHRoaXMub25lcnJvcjtcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcmVzMiA9IGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAob25zdWNjZXNzKVxuICAgICAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgICAgIGlmIChvbmVycm9yKVxuICAgICAgICAgICAgICAgIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlcyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAocmVzMiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcmVzMikgOlxuICAgICAgICAgICAgICAgIChleHRlbmQocmVzLCByZXMyKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJldmVyc2VTdG9wcGFibGVFdmVudENoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gZjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvbWlzYWJsZUNoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBmMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHJlcyAmJiB0eXBlb2YgcmVzLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpeiA9IHRoaXMsIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYyLmFwcGx5KHRoaXosIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGRlYnVnID0gdHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvXihodHRwfGh0dHBzKTpcXC9cXC8obG9jYWxob3N0fDEyN1xcLjBcXC4wXFwuMSkvLnRlc3QobG9jYXRpb24uaHJlZik7XG4gICAgZnVuY3Rpb24gc2V0RGVidWcodmFsdWUsIGZpbHRlcikge1xuICAgICAgICBkZWJ1ZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHZhciBJTlRFUk5BTCA9IHt9O1xuICAgIHZhciBaT05FX0VDSE9fTElNSVQgPSAxMDAsIF9hJDEgPSB0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcgP1xuICAgICAgICBbXSA6XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYmFsUCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjcnlwdG8gPT09ICd1bmRlZmluZWQnIHx8ICFjcnlwdG8uc3VidGxlKVxuICAgICAgICAgICAgICAgIHJldHVybiBbZ2xvYmFsUCwgZ2V0UHJvdG8oZ2xvYmFsUCksIGdsb2JhbFBdO1xuICAgICAgICAgICAgdmFyIG5hdGl2ZVAgPSBjcnlwdG8uc3VidGxlLmRpZ2VzdChcIlNIQS01MTJcIiwgbmV3IFVpbnQ4QXJyYXkoWzBdKSk7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIG5hdGl2ZVAsXG4gICAgICAgICAgICAgICAgZ2V0UHJvdG8obmF0aXZlUCksXG4gICAgICAgICAgICAgICAgZ2xvYmFsUFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSkoKSwgcmVzb2x2ZWROYXRpdmVQcm9taXNlID0gX2EkMVswXSwgbmF0aXZlUHJvbWlzZVByb3RvID0gX2EkMVsxXSwgcmVzb2x2ZWRHbG9iYWxQcm9taXNlID0gX2EkMVsyXSwgbmF0aXZlUHJvbWlzZVRoZW4gPSBuYXRpdmVQcm9taXNlUHJvdG8gJiYgbmF0aXZlUHJvbWlzZVByb3RvLnRoZW47XG4gICAgdmFyIE5hdGl2ZVByb21pc2UgPSByZXNvbHZlZE5hdGl2ZVByb21pc2UgJiYgcmVzb2x2ZWROYXRpdmVQcm9taXNlLmNvbnN0cnVjdG9yO1xuICAgIHZhciBwYXRjaEdsb2JhbFByb21pc2UgPSAhIXJlc29sdmVkR2xvYmFsUHJvbWlzZTtcbiAgICBmdW5jdGlvbiBzY2hlZHVsZVBoeXNpY2FsVGljaygpIHtcbiAgICAgICAgcXVldWVNaWNyb3Rhc2socGh5c2ljYWxUaWNrKTtcbiAgICB9XG4gICAgdmFyIGFzYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICAgICAgbWljcm90aWNrUXVldWUucHVzaChbY2FsbGJhY2ssIGFyZ3NdKTtcbiAgICAgICAgaWYgKG5lZWRzTmV3UGh5c2ljYWxUaWNrKSB7XG4gICAgICAgICAgICBzY2hlZHVsZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGlzT3V0c2lkZU1pY3JvVGljayA9IHRydWUsXG4gICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSB0cnVlLFxuICAgIHVuaGFuZGxlZEVycm9ycyA9IFtdLFxuICAgIHJlamVjdGluZ0Vycm9ycyA9IFtdLFxuICAgIHJlamVjdGlvbk1hcHBlciA9IG1pcnJvcjtcbiAgICB2YXIgZ2xvYmFsUFNEID0ge1xuICAgICAgICBpZDogJ2dsb2JhbCcsXG4gICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgcmVmOiAwLFxuICAgICAgICB1bmhhbmRsZWRzOiBbXSxcbiAgICAgICAgb251bmhhbmRsZWQ6IG5vcCxcbiAgICAgICAgcGdwOiBmYWxzZSxcbiAgICAgICAgZW52OiB7fSxcbiAgICAgICAgZmluYWxpemU6IG5vcFxuICAgIH07XG4gICAgdmFyIFBTRCA9IGdsb2JhbFBTRDtcbiAgICB2YXIgbWljcm90aWNrUXVldWUgPSBbXTtcbiAgICB2YXIgbnVtU2NoZWR1bGVkQ2FsbHMgPSAwO1xuICAgIHZhciB0aWNrRmluYWxpemVycyA9IFtdO1xuICAgIGZ1bmN0aW9uIERleGllUHJvbWlzZShmbikge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Jyk7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLl9saWIgPSBmYWxzZTtcbiAgICAgICAgdmFyIHBzZCA9ICh0aGlzLl9QU0QgPSBQU0QpO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBpZiAoZm4gIT09IElOVEVSTkFMKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBhIGZ1bmN0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICBoYW5kbGVSZWplY3Rpb24odGhpcywgdGhpcy5fdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N0YXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBudWxsO1xuICAgICAgICArK3BzZC5yZWY7XG4gICAgICAgIGV4ZWN1dGVQcm9taXNlVGFzayh0aGlzLCBmbik7XG4gICAgfVxuICAgIHZhciB0aGVuUHJvcCA9IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcHNkID0gUFNELCBtaWNyb1Rhc2tJZCA9IHRvdGFsRWNob2VzO1xuICAgICAgICAgICAgZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3NpYmxlQXdhaXQgPSAhcHNkLmdsb2JhbCAmJiAocHNkICE9PSBQU0QgfHwgbWljcm9UYXNrSWQgIT09IHRvdGFsRWNob2VzKTtcbiAgICAgICAgICAgICAgICB2YXIgY2xlYW51cCA9IHBvc3NpYmxlQXdhaXQgJiYgIWRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIoX3RoaXMsIG5ldyBMaXN0ZW5lcihuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uRnVsZmlsbGVkLCBwc2QsIHBvc3NpYmxlQXdhaXQsIGNsZWFudXApLCBuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uUmVqZWN0ZWQsIHBzZCwgcG9zc2libGVBd2FpdCwgY2xlYW51cCksIHJlc29sdmUsIHJlamVjdCwgcHNkKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnNvbGVUYXNrKVxuICAgICAgICAgICAgICAgICAgICBydi5fY29uc29sZVRhc2sgPSB0aGlzLl9jb25zb2xlVGFzaztcbiAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGVuLnByb3RvdHlwZSA9IElOVEVSTkFMO1xuICAgICAgICAgICAgcmV0dXJuIHRoZW47XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBzZXRQcm9wKHRoaXMsICd0aGVuJywgdmFsdWUgJiYgdmFsdWUucHJvdG90eXBlID09PSBJTlRFUk5BTCA/XG4gICAgICAgICAgICAgICAgdGhlblByb3AgOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogdGhlblByb3Auc2V0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHByb3BzKERleGllUHJvbWlzZS5wcm90b3R5cGUsIHtcbiAgICAgICAgdGhlbjogdGhlblByb3AsXG4gICAgICAgIF90aGVuOiBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIodGhpcywgbmV3IExpc3RlbmVyKG51bGwsIG51bGwsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBQU0QpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0Y2g6IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF0sIGhhbmRsZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicgPyB0aGlzLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnIgaW5zdGFuY2VvZiB0eXBlID8gaGFuZGxlcihlcnIpIDogUHJvbWlzZVJlamVjdChlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IHRoaXMudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnIgJiYgZXJyLm5hbWUgPT09IHR5cGUgPyBoYW5kbGVyKGVycikgOiBQcm9taXNlUmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZpbmFsbHk6IGZ1bmN0aW9uIChvbkZpbmFsbHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUob25GaW5hbGx5KCkpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZVJlamVjdChlcnIpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB0aW1lb3V0OiBmdW5jdGlvbiAobXMsIG1zZykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBtcyA8IEluZmluaXR5ID9cbiAgICAgICAgICAgICAgICBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVqZWN0KG5ldyBleGNlcHRpb25zLlRpbWVvdXQobXNnKSk7IH0sIG1zKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGhlbihyZXNvbHZlLCByZWplY3QpLmZpbmFsbHkoY2xlYXJUaW1lb3V0LmJpbmQobnVsbCwgaGFuZGxlKSk7XG4gICAgICAgICAgICAgICAgfSkgOiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZylcbiAgICAgICAgc2V0UHJvcChEZXhpZVByb21pc2UucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsICdEZXhpZS5Qcm9taXNlJyk7XG4gICAgZ2xvYmFsUFNELmVudiA9IHNuYXBTaG90KCk7XG4gICAgZnVuY3Rpb24gTGlzdGVuZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHJlc29sdmUsIHJlamVjdCwgem9uZSkge1xuICAgICAgICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICAgICAgICB0aGlzLm9uUmVqZWN0ZWQgPSB0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVqZWN0ZWQgOiBudWxsO1xuICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgdGhpcy5wc2QgPSB6b25lO1xuICAgIH1cbiAgICBwcm9wcyhEZXhpZVByb21pc2UsIHtcbiAgICAgICAgYWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0QXJyYXlPZi5hcHBseShudWxsLCBhcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgLm1hcChvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gdmFsdWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoYSkudGhlbihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbaV0gPSB4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS0tcmVtYWluaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGV4aWVQcm9taXNlKVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBydiA9IG5ldyBEZXhpZVByb21pc2UoSU5URVJOQUwsIHRydWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiBQcm9taXNlUmVqZWN0LFxuICAgICAgICByYWNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0QXJyYXlPZi5hcHBseShudWxsLCBhcmd1bWVudHMpLm1hcChvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihyZXNvbHZlLCByZWplY3QpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBQU0Q6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUFNEOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIFBTRCA9IHZhbHVlOyB9XG4gICAgICAgIH0sXG4gICAgICAgIHRvdGFsRWNob2VzOiB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdG90YWxFY2hvZXM7IH0gfSxcbiAgICAgICAgbmV3UFNEOiBuZXdTY29wZSxcbiAgICAgICAgdXNlUFNEOiB1c2VQU0QsXG4gICAgICAgIHNjaGVkdWxlcjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhc2FwOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHsgYXNhcCA9IHZhbHVlOyB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdGlvbk1hcHBlcjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByZWplY3Rpb25NYXBwZXI7IH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZWplY3Rpb25NYXBwZXIgPSB2YWx1ZTsgfVxuICAgICAgICB9LFxuICAgICAgICBmb2xsb3c6IGZ1bmN0aW9uIChmbiwgem9uZVByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBzZCA9IFBTRDtcbiAgICAgICAgICAgICAgICAgICAgcHNkLnVuaGFuZGxlZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcHNkLm9udW5oYW5kbGVkID0gcmVqZWN0O1xuICAgICAgICAgICAgICAgICAgICBwc2QuZmluYWxpemUgPSBjYWxsQm90aChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2F0X2VuZF9vZl90aGlzX29yX25leHRfcGh5c2ljYWxfdGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudW5oYW5kbGVkcy5sZW5ndGggPT09IDAgPyByZXNvbHZlKCkgOiByZWplY3QoX3RoaXMudW5oYW5kbGVkc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgcHNkLmZpbmFsaXplKTtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9LCB6b25lUHJvcHMsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChOYXRpdmVQcm9taXNlKSB7XG4gICAgICAgIGlmIChOYXRpdmVQcm9taXNlLmFsbFNldHRsZWQpXG4gICAgICAgICAgICBzZXRQcm9wKERleGllUHJvbWlzZSwgXCJhbGxTZXR0bGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVQcm9taXNlcyA9IGdldEFycmF5T2YuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5tYXAob25Qb3NzaWJsZVBhcmFsbGVsbEFzeW5jKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVQcm9taXNlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IHBvc3NpYmxlUHJvbWlzZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBBcnJheShyZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZVByb21pc2VzLmZvckVhY2goZnVuY3Rpb24gKHAsIGkpIHsgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHApLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiByZXN1bHRzW2ldID0geyBzdGF0dXM6IFwiZnVsZmlsbGVkXCIsIHZhbHVlOiB2YWx1ZSB9OyB9LCBmdW5jdGlvbiAocmVhc29uKSB7IHJldHVybiByZXN1bHRzW2ldID0geyBzdGF0dXM6IFwicmVqZWN0ZWRcIiwgcmVhc29uOiByZWFzb24gfTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIC0tcmVtYWluaW5nIHx8IHJlc29sdmUocmVzdWx0cyk7IH0pOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoTmF0aXZlUHJvbWlzZS5hbnkgJiYgdHlwZW9mIEFnZ3JlZ2F0ZUVycm9yICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHNldFByb3AoRGV4aWVQcm9taXNlLCBcImFueVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3NpYmxlUHJvbWlzZXMgPSBnZXRBcnJheU9mLmFwcGx5KG51bGwsIGFyZ3VtZW50cykubWFwKG9uUG9zc2libGVQYXJhbGxlbGxBc3luYyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVQcm9taXNlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEFnZ3JlZ2F0ZUVycm9yKFtdKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSBwb3NzaWJsZVByb21pc2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gbmV3IEFycmF5KHJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlUHJvbWlzZXMuZm9yRWFjaChmdW5jdGlvbiAocCwgaSkgeyByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUocCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9LCBmdW5jdGlvbiAoZmFpbHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXNbaV0gPSBmYWlsdXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEtLXJlbWFpbmluZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEFnZ3JlZ2F0ZUVycm9yKGZhaWx1cmVzKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoTmF0aXZlUHJvbWlzZS53aXRoUmVzb2x2ZXJzKVxuICAgICAgICAgICAgRGV4aWVQcm9taXNlLndpdGhSZXNvbHZlcnMgPSBOYXRpdmVQcm9taXNlLndpdGhSZXNvbHZlcnM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4ZWN1dGVQcm9taXNlVGFzayhwcm9taXNlLCBmbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBwcm9taXNlKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpO1xuICAgICAgICAgICAgICAgIHZhciBzaG91bGRFeGVjdXRlVGljayA9IHByb21pc2UuX2xpYiAmJiBiZWdpbk1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVQcm9taXNlVGFzayhwcm9taXNlLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIERleGllUHJvbWlzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX3RoZW4ocmVzb2x2ZSwgcmVqZWN0KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3N0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlQWxsTGlzdGVuZXJzKHByb21pc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRXhlY3V0ZVRpY2spXG4gICAgICAgICAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICB9LCBoYW5kbGVSZWplY3Rpb24uYmluZChudWxsLCBwcm9taXNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBoYW5kbGVSZWplY3Rpb24ocHJvbWlzZSwgZXgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlamVjdGlvbihwcm9taXNlLCByZWFzb24pIHtcbiAgICAgICAgcmVqZWN0aW5nRXJyb3JzLnB1c2gocmVhc29uKTtcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgc2hvdWxkRXhlY3V0ZVRpY2sgPSBwcm9taXNlLl9saWIgJiYgYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICByZWFzb24gPSByZWplY3Rpb25NYXBwZXIocmVhc29uKTtcbiAgICAgICAgcHJvbWlzZS5fc3RhdGUgPSBmYWxzZTtcbiAgICAgICAgcHJvbWlzZS5fdmFsdWUgPSByZWFzb247XG4gICAgICAgIGFkZFBvc3NpYmx5VW5oYW5kbGVkRXJyb3IocHJvbWlzZSk7XG4gICAgICAgIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKTtcbiAgICAgICAgaWYgKHNob3VsZEV4ZWN1dGVUaWNrKVxuICAgICAgICAgICAgZW5kTWljcm9UaWNrU2NvcGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcGFnYXRlQWxsTGlzdGVuZXJzKHByb21pc2UpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHByb21pc2UuX2xpc3RlbmVycztcbiAgICAgICAgcHJvbWlzZS5fbGlzdGVuZXJzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIocHJvbWlzZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHNkID0gcHJvbWlzZS5fUFNEO1xuICAgICAgICAtLXBzZC5yZWYgfHwgcHNkLmZpbmFsaXplKCk7XG4gICAgICAgIGlmIChudW1TY2hlZHVsZWRDYWxscyA9PT0gMCkge1xuICAgICAgICAgICAgKytudW1TY2hlZHVsZWRDYWxscztcbiAgICAgICAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgfSwgW10pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZVRvTGlzdGVuZXIocHJvbWlzZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBudWxsKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNiID0gcHJvbWlzZS5fc3RhdGUgPyBsaXN0ZW5lci5vbkZ1bGZpbGxlZCA6IGxpc3RlbmVyLm9uUmVqZWN0ZWQ7XG4gICAgICAgIGlmIChjYiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIChwcm9taXNlLl9zdGF0ZSA/IGxpc3RlbmVyLnJlc29sdmUgOiBsaXN0ZW5lci5yZWplY3QpKHByb21pc2UuX3ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICArK2xpc3RlbmVyLnBzZC5yZWY7XG4gICAgICAgICsrbnVtU2NoZWR1bGVkQ2FsbHM7XG4gICAgICAgIGFzYXAoY2FsbExpc3RlbmVyLCBbY2IsIHByb21pc2UsIGxpc3RlbmVyXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNhbGxMaXN0ZW5lcihjYiwgcHJvbWlzZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXQsIHZhbHVlID0gcHJvbWlzZS5fdmFsdWU7XG4gICAgICAgICAgICBpZiAoIXByb21pc2UuX3N0YXRlICYmIHJlamVjdGluZ0Vycm9ycy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmVqZWN0aW5nRXJyb3JzID0gW107XG4gICAgICAgICAgICByZXQgPSBkZWJ1ZyAmJiBwcm9taXNlLl9jb25zb2xlVGFzayA/IHByb21pc2UuX2NvbnNvbGVUYXNrLnJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiBjYih2YWx1ZSk7IH0pIDogY2IodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFwcm9taXNlLl9zdGF0ZSAmJiByZWplY3RpbmdFcnJvcnMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbWFya0Vycm9yQXNIYW5kbGVkKHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGlzdGVuZXIucmVzb2x2ZShyZXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lci5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoLS1udW1TY2hlZHVsZWRDYWxscyA9PT0gMClcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgLS1saXN0ZW5lci5wc2QucmVmIHx8IGxpc3RlbmVyLnBzZC5maW5hbGl6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBoeXNpY2FsVGljaygpIHtcbiAgICAgICAgdXNlUFNEKGdsb2JhbFBTRCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmVnaW5NaWNyb1RpY2tTY29wZSgpICYmIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiZWdpbk1pY3JvVGlja1Njb3BlKCkge1xuICAgICAgICB2YXIgd2FzUm9vdEV4ZWMgPSBpc091dHNpZGVNaWNyb1RpY2s7XG4gICAgICAgIGlzT3V0c2lkZU1pY3JvVGljayA9IGZhbHNlO1xuICAgICAgICBuZWVkc05ld1BoeXNpY2FsVGljayA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gd2FzUm9vdEV4ZWM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVuZE1pY3JvVGlja1Njb3BlKCkge1xuICAgICAgICB2YXIgY2FsbGJhY2tzLCBpLCBsO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB3aGlsZSAobWljcm90aWNrUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrcyA9IG1pY3JvdGlja1F1ZXVlO1xuICAgICAgICAgICAgICAgIG1pY3JvdGlja1F1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgbCA9IGNhbGxiYWNrcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGNhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVswXS5hcHBseShudWxsLCBpdGVtWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKG1pY3JvdGlja1F1ZXVlLmxlbmd0aCA+IDApO1xuICAgICAgICBpc091dHNpZGVNaWNyb1RpY2sgPSB0cnVlO1xuICAgICAgICBuZWVkc05ld1BoeXNpY2FsVGljayA9IHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmFsaXplUGh5c2ljYWxUaWNrKCkge1xuICAgICAgICB2YXIgdW5oYW5kbGVkRXJycyA9IHVuaGFuZGxlZEVycm9ycztcbiAgICAgICAgdW5oYW5kbGVkRXJyb3JzID0gW107XG4gICAgICAgIHVuaGFuZGxlZEVycnMuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgcC5fUFNELm9udW5oYW5kbGVkLmNhbGwobnVsbCwgcC5fdmFsdWUsIHApO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGZpbmFsaXplcnMgPSB0aWNrRmluYWxpemVycy5zbGljZSgwKTtcbiAgICAgICAgdmFyIGkgPSBmaW5hbGl6ZXJzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGkpXG4gICAgICAgICAgICBmaW5hbGl6ZXJzWy0taV0oKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcnVuX2F0X2VuZF9vZl90aGlzX29yX25leHRfcGh5c2ljYWxfdGljayhmbikge1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZXIoKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgdGlja0ZpbmFsaXplcnMuc3BsaWNlKHRpY2tGaW5hbGl6ZXJzLmluZGV4T2YoZmluYWxpemVyKSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGlja0ZpbmFsaXplcnMucHVzaChmaW5hbGl6ZXIpO1xuICAgICAgICArK251bVNjaGVkdWxlZENhbGxzO1xuICAgICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKVxuICAgICAgICAgICAgICAgIGZpbmFsaXplUGh5c2ljYWxUaWNrKCk7XG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkUG9zc2libHlVbmhhbmRsZWRFcnJvcihwcm9taXNlKSB7XG4gICAgICAgIGlmICghdW5oYW5kbGVkRXJyb3JzLnNvbWUoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAuX3ZhbHVlID09PSBwcm9taXNlLl92YWx1ZTsgfSkpXG4gICAgICAgICAgICB1bmhhbmRsZWRFcnJvcnMucHVzaChwcm9taXNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFya0Vycm9yQXNIYW5kbGVkKHByb21pc2UpIHtcbiAgICAgICAgdmFyIGkgPSB1bmhhbmRsZWRFcnJvcnMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaSlcbiAgICAgICAgICAgIGlmICh1bmhhbmRsZWRFcnJvcnNbLS1pXS5fdmFsdWUgPT09IHByb21pc2UuX3ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdW5oYW5kbGVkRXJyb3JzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIFByb21pc2VSZWplY3QocmVhc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKElOVEVSTkFMLCBmYWxzZSwgcmVhc29uKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gd3JhcChmbiwgZXJyb3JDYXRjaGVyKSB7XG4gICAgICAgIHZhciBwc2QgPSBQU0Q7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2FzUm9vdEV4ZWMgPSBiZWdpbk1pY3JvVGlja1Njb3BlKCksIG91dGVyU2NvcGUgPSBQU0Q7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN3aXRjaFRvWm9uZShwc2QsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBlcnJvckNhdGNoZXIgJiYgZXJyb3JDYXRjaGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoVG9ab25lKG91dGVyU2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAod2FzUm9vdEV4ZWMpXG4gICAgICAgICAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciB0YXNrID0geyBhd2FpdHM6IDAsIGVjaG9lczogMCwgaWQ6IDAgfTtcbiAgICB2YXIgdGFza0NvdW50ZXIgPSAwO1xuICAgIHZhciB6b25lU3RhY2sgPSBbXTtcbiAgICB2YXIgem9uZUVjaG9lcyA9IDA7XG4gICAgdmFyIHRvdGFsRWNob2VzID0gMDtcbiAgICB2YXIgem9uZV9pZF9jb3VudGVyID0gMDtcbiAgICBmdW5jdGlvbiBuZXdTY29wZShmbiwgcHJvcHMsIGExLCBhMikge1xuICAgICAgICB2YXIgcGFyZW50ID0gUFNELCBwc2QgPSBPYmplY3QuY3JlYXRlKHBhcmVudCk7XG4gICAgICAgIHBzZC5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHBzZC5yZWYgPSAwO1xuICAgICAgICBwc2QuZ2xvYmFsID0gZmFsc2U7XG4gICAgICAgIHBzZC5pZCA9ICsrem9uZV9pZF9jb3VudGVyO1xuICAgICAgICBnbG9iYWxQU0QuZW52O1xuICAgICAgICBwc2QuZW52ID0gcGF0Y2hHbG9iYWxQcm9taXNlID8ge1xuICAgICAgICAgICAgUHJvbWlzZTogRGV4aWVQcm9taXNlLFxuICAgICAgICAgICAgUHJvbWlzZVByb3A6IHsgdmFsdWU6IERleGllUHJvbWlzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgYWxsOiBEZXhpZVByb21pc2UuYWxsLFxuICAgICAgICAgICAgcmFjZTogRGV4aWVQcm9taXNlLnJhY2UsXG4gICAgICAgICAgICBhbGxTZXR0bGVkOiBEZXhpZVByb21pc2UuYWxsU2V0dGxlZCxcbiAgICAgICAgICAgIGFueTogRGV4aWVQcm9taXNlLmFueSxcbiAgICAgICAgICAgIHJlc29sdmU6IERleGllUHJvbWlzZS5yZXNvbHZlLFxuICAgICAgICAgICAgcmVqZWN0OiBEZXhpZVByb21pc2UucmVqZWN0LFxuICAgICAgICB9IDoge307XG4gICAgICAgIGlmIChwcm9wcylcbiAgICAgICAgICAgIGV4dGVuZChwc2QsIHByb3BzKTtcbiAgICAgICAgKytwYXJlbnQucmVmO1xuICAgICAgICBwc2QuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAtLXRoaXMucGFyZW50LnJlZiB8fCB0aGlzLnBhcmVudC5maW5hbGl6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcnYgPSB1c2VQU0QocHNkLCBmbiwgYTEsIGEyKTtcbiAgICAgICAgaWYgKHBzZC5yZWYgPT09IDApXG4gICAgICAgICAgICBwc2QuZmluYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpIHtcbiAgICAgICAgaWYgKCF0YXNrLmlkKVxuICAgICAgICAgICAgdGFzay5pZCA9ICsrdGFza0NvdW50ZXI7XG4gICAgICAgICsrdGFzay5hd2FpdHM7XG4gICAgICAgIHRhc2suZWNob2VzICs9IFpPTkVfRUNIT19MSU1JVDtcbiAgICAgICAgcmV0dXJuIHRhc2suaWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKCkge1xuICAgICAgICBpZiAoIXRhc2suYXdhaXRzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoLS10YXNrLmF3YWl0cyA9PT0gMClcbiAgICAgICAgICAgIHRhc2suaWQgPSAwO1xuICAgICAgICB0YXNrLmVjaG9lcyA9IHRhc2suYXdhaXRzICogWk9ORV9FQ0hPX0xJTUlUO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCgnJyArIG5hdGl2ZVByb21pc2VUaGVuKS5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJykgPT09IC0xKSB7XG4gICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzID0gZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMgPSBub3A7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uUG9zc2libGVQYXJhbGxlbGxBc3luYyhwb3NzaWJsZVByb21pc2UpIHtcbiAgICAgICAgaWYgKHRhc2suZWNob2VzICYmIHBvc3NpYmxlUHJvbWlzZSAmJiBwb3NzaWJsZVByb21pc2UuY29uc3RydWN0b3IgPT09IE5hdGl2ZVByb21pc2UpIHtcbiAgICAgICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICByZXR1cm4gcG9zc2libGVQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zc2libGVQcm9taXNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b25lRW50ZXJFY2hvKHRhcmdldFpvbmUpIHtcbiAgICAgICAgKyt0b3RhbEVjaG9lcztcbiAgICAgICAgaWYgKCF0YXNrLmVjaG9lcyB8fCAtLXRhc2suZWNob2VzID09PSAwKSB7XG4gICAgICAgICAgICB0YXNrLmVjaG9lcyA9IHRhc2suYXdhaXRzID0gdGFzay5pZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgem9uZVN0YWNrLnB1c2goUFNEKTtcbiAgICAgICAgc3dpdGNoVG9ab25lKHRhcmdldFpvbmUsIHRydWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b25lTGVhdmVFY2hvKCkge1xuICAgICAgICB2YXIgem9uZSA9IHpvbmVTdGFja1t6b25lU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHpvbmVTdGFjay5wb3AoKTtcbiAgICAgICAgc3dpdGNoVG9ab25lKHpvbmUsIGZhbHNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3dpdGNoVG9ab25lKHRhcmdldFpvbmUsIGJFbnRlcmluZ1pvbmUpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRab25lID0gUFNEO1xuICAgICAgICBpZiAoYkVudGVyaW5nWm9uZSA/IHRhc2suZWNob2VzICYmICghem9uZUVjaG9lcysrIHx8IHRhcmdldFpvbmUgIT09IFBTRCkgOiB6b25lRWNob2VzICYmICghLS16b25lRWNob2VzIHx8IHRhcmdldFpvbmUgIT09IFBTRCkpIHtcbiAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGJFbnRlcmluZ1pvbmUgPyB6b25lRW50ZXJFY2hvLmJpbmQobnVsbCwgdGFyZ2V0Wm9uZSkgOiB6b25lTGVhdmVFY2hvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0Wm9uZSA9PT0gUFNEKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBQU0QgPSB0YXJnZXRab25lO1xuICAgICAgICBpZiAoY3VycmVudFpvbmUgPT09IGdsb2JhbFBTRClcbiAgICAgICAgICAgIGdsb2JhbFBTRC5lbnYgPSBzbmFwU2hvdCgpO1xuICAgICAgICBpZiAocGF0Y2hHbG9iYWxQcm9taXNlKSB7XG4gICAgICAgICAgICB2YXIgR2xvYmFsUHJvbWlzZSA9IGdsb2JhbFBTRC5lbnYuUHJvbWlzZTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbnYgPSB0YXJnZXRab25lLmVudjtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Wm9uZS5nbG9iYWwgfHwgdGFyZ2V0Wm9uZS5nbG9iYWwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2dsb2JhbCwgJ1Byb21pc2UnLCB0YXJnZXRFbnYuUHJvbWlzZVByb3ApO1xuICAgICAgICAgICAgICAgIEdsb2JhbFByb21pc2UuYWxsID0gdGFyZ2V0RW52LmFsbDtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJhY2UgPSB0YXJnZXRFbnYucmFjZTtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJlc29sdmUgPSB0YXJnZXRFbnYucmVzb2x2ZTtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJlamVjdCA9IHRhcmdldEVudi5yZWplY3Q7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVudi5hbGxTZXR0bGVkKVxuICAgICAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLmFsbFNldHRsZWQgPSB0YXJnZXRFbnYuYWxsU2V0dGxlZDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RW52LmFueSlcbiAgICAgICAgICAgICAgICAgICAgR2xvYmFsUHJvbWlzZS5hbnkgPSB0YXJnZXRFbnYuYW55O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNuYXBTaG90KCkge1xuICAgICAgICB2YXIgR2xvYmFsUHJvbWlzZSA9IF9nbG9iYWwuUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHBhdGNoR2xvYmFsUHJvbWlzZSA/IHtcbiAgICAgICAgICAgIFByb21pc2U6IEdsb2JhbFByb21pc2UsXG4gICAgICAgICAgICBQcm9taXNlUHJvcDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfZ2xvYmFsLCBcIlByb21pc2VcIiksXG4gICAgICAgICAgICBhbGw6IEdsb2JhbFByb21pc2UuYWxsLFxuICAgICAgICAgICAgcmFjZTogR2xvYmFsUHJvbWlzZS5yYWNlLFxuICAgICAgICAgICAgYWxsU2V0dGxlZDogR2xvYmFsUHJvbWlzZS5hbGxTZXR0bGVkLFxuICAgICAgICAgICAgYW55OiBHbG9iYWxQcm9taXNlLmFueSxcbiAgICAgICAgICAgIHJlc29sdmU6IEdsb2JhbFByb21pc2UucmVzb2x2ZSxcbiAgICAgICAgICAgIHJlamVjdDogR2xvYmFsUHJvbWlzZS5yZWplY3QsXG4gICAgICAgIH0gOiB7fTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXNlUFNEKHBzZCwgZm4sIGExLCBhMiwgYTMpIHtcbiAgICAgICAgdmFyIG91dGVyU2NvcGUgPSBQU0Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2hUb1pvbmUocHNkLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBmbihhMSwgYTIsIGEzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHN3aXRjaFRvWm9uZShvdXRlclNjb3BlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbmF0aXZlQXdhaXRDb21wYXRpYmxlV3JhcChmbiwgem9uZSwgcG9zc2libGVBd2FpdCwgY2xlYW51cCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nID8gZm4gOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0ZXJab25lID0gUFNEO1xuICAgICAgICAgICAgaWYgKHBvc3NpYmxlQXdhaXQpXG4gICAgICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgIHN3aXRjaFRvWm9uZSh6b25lLCB0cnVlKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2hUb1pvbmUob3V0ZXJab25lLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNsZWFudXApXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXhlY0luR2xvYmFsQ29udGV4dChjYikge1xuICAgICAgICBpZiAoUHJvbWlzZSA9PT0gTmF0aXZlUHJvbWlzZSAmJiB0YXNrLmVjaG9lcyA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHpvbmVFY2hvZXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5xdWV1ZU5hdGl2ZU1pY3JvVGFzayhjYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgcmVqZWN0aW9uID0gRGV4aWVQcm9taXNlLnJlamVjdDtcblxuICAgIGZ1bmN0aW9uIHRlbXBUcmFuc2FjdGlvbihkYiwgbW9kZSwgc3RvcmVOYW1lcywgZm4pIHtcbiAgICAgICAgaWYgKCFkYi5pZGJkYiB8fCAoIWRiLl9zdGF0ZS5vcGVuQ29tcGxldGUgJiYgKCFQU0QubGV0VGhyb3VnaCAmJiAhZGIuX3ZpcCkpKSB7XG4gICAgICAgICAgICBpZiAoZGIuX3N0YXRlLm9wZW5Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoZGIuX3N0YXRlLmRiT3BlbkVycm9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRiLl9zdGF0ZS5pc0JlaW5nT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYi5fc3RhdGUuYXV0b09wZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoKSk7XG4gICAgICAgICAgICAgICAgZGIub3BlbigpLmNhdGNoKG5vcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGIuX3N0YXRlLmRiUmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdGVtcFRyYW5zYWN0aW9uKGRiLCBtb2RlLCBzdG9yZU5hbWVzLCBmbik7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRyYW5zID0gZGIuX2NyZWF0ZVRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGRiLl9kYlNjaGVtYSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRyYW5zLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGRiLl9zdGF0ZS5QUjEzOThfbWF4TG9vcCA9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXgubmFtZSA9PT0gZXJybmFtZXMuSW52YWxpZFN0YXRlICYmIGRiLmlzT3BlbigpICYmIC0tZGIuX3N0YXRlLlBSMTM5OF9tYXhMb29wID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RleGllOiBOZWVkIHRvIHJlb3BlbiBkYicpO1xuICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSh7IGRpc2FibGVBdXRvT3BlbjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYi5vcGVuKCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB0ZW1wVHJhbnNhY3Rpb24oZGIsIG1vZGUsIHN0b3JlTmFtZXMsIGZuKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zLl9wcm9taXNlKG1vZGUsIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3U2NvcGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBQU0QudHJhbnMgPSB0cmFucztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKHJlc29sdmUsIHJlamVjdCwgdHJhbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdyZWFkd3JpdGUnKVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMuY29tbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZSA9PT0gJ3JlYWRvbmx5JyA/IHJlc3VsdCA6IHRyYW5zLl9jb21wbGV0aW9uLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0OyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIERFWElFX1ZFUlNJT04gPSAnNC4wLjExJztcbiAgICB2YXIgbWF4U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZSg2NTUzNSk7XG4gICAgdmFyIG1pbktleSA9IC1JbmZpbml0eTtcbiAgICB2YXIgSU5WQUxJRF9LRVlfQVJHVU1FTlQgPSBcIkludmFsaWQga2V5IHByb3ZpZGVkLiBLZXlzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgRGF0ZSBvciBBcnJheTxzdHJpbmcgfCBudW1iZXIgfCBEYXRlPi5cIjtcbiAgICB2YXIgU1RSSU5HX0VYUEVDVEVEID0gXCJTdHJpbmcgZXhwZWN0ZWQuXCI7XG4gICAgdmFyIGNvbm5lY3Rpb25zID0gW107XG4gICAgdmFyIERCTkFNRVNfREIgPSAnX19kYm5hbWVzJztcbiAgICB2YXIgUkVBRE9OTFkgPSAncmVhZG9ubHknO1xuICAgIHZhciBSRUFEV1JJVEUgPSAncmVhZHdyaXRlJztcblxuICAgIGZ1bmN0aW9uIGNvbWJpbmUoZmlsdGVyMSwgZmlsdGVyMikge1xuICAgICAgICByZXR1cm4gZmlsdGVyMSA/XG4gICAgICAgICAgICBmaWx0ZXIyID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBmaWx0ZXIxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgJiYgZmlsdGVyMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IDpcbiAgICAgICAgICAgICAgICBmaWx0ZXIxIDpcbiAgICAgICAgICAgIGZpbHRlcjI7XG4gICAgfVxuXG4gICAgdmFyIEFueVJhbmdlID0ge1xuICAgICAgICB0eXBlOiAzICxcbiAgICAgICAgbG93ZXI6IC1JbmZpbml0eSxcbiAgICAgICAgbG93ZXJPcGVuOiBmYWxzZSxcbiAgICAgICAgdXBwZXI6IFtbXV0sXG4gICAgICAgIHVwcGVyT3BlbjogZmFsc2VcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gd29ya2Fyb3VuZEZvclVuZGVmaW5lZFByaW1LZXkoa2V5UGF0aCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGtleVBhdGggPT09IFwic3RyaW5nXCIgJiYgIS9cXC4vLnRlc3Qoa2V5UGF0aClcbiAgICAgICAgICAgID8gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChvYmpba2V5UGF0aF0gPT09IHVuZGVmaW5lZCAmJiAoa2V5UGF0aCBpbiBvYmopKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IGRlZXBDbG9uZShvYmopO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmo7IH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRW50aXR5KCkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb25zLlR5cGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbXAoYSwgYikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHRhID0gdHlwZShhKTtcbiAgICAgICAgICAgIHZhciB0YiA9IHR5cGUoYik7XG4gICAgICAgICAgICBpZiAodGEgIT09IHRiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhID09PSAnQXJyYXknKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAodGIgPT09ICdBcnJheScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBpZiAodGEgPT09ICdiaW5hcnknKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAodGIgPT09ICdiaW5hcnknKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKHRhID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKHRiID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIGlmICh0YSA9PT0gJ0RhdGUnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAodGIgIT09ICdEYXRlJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHRhKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdEYXRlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG4gICAgICAgICAgICAgICAgY2FzZSAnYmluYXJ5Jzoge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZVVpbnQ4QXJyYXlzKGdldFVpbnQ4QXJyYXkoYSksIGdldFVpbnQ4QXJyYXkoYikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdBcnJheSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlQXJyYXlzKGEsIGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBhcmVBcnJheXMoYSwgYikge1xuICAgICAgICB2YXIgYWwgPSBhLmxlbmd0aDtcbiAgICAgICAgdmFyIGJsID0gYi5sZW5ndGg7XG4gICAgICAgIHZhciBsID0gYWwgPCBibCA/IGFsIDogYmw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gY21wKGFbaV0sIGJbaV0pO1xuICAgICAgICAgICAgaWYgKHJlcyAhPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbCA9PT0gYmwgPyAwIDogYWwgPCBibCA/IC0xIDogMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29tcGFyZVVpbnQ4QXJyYXlzKGEsIGIpIHtcbiAgICAgICAgdmFyIGFsID0gYS5sZW5ndGg7XG4gICAgICAgIHZhciBibCA9IGIubGVuZ3RoO1xuICAgICAgICB2YXIgbCA9IGFsIDwgYmwgPyBhbCA6IGJsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFbaV0gPCBiW2ldID8gLTEgOiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbCA9PT0gYmwgPyAwIDogYWwgPCBibCA/IC0xIDogMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdHlwZSh4KSB7XG4gICAgICAgIHZhciB0ID0gdHlwZW9mIHg7XG4gICAgICAgIGlmICh0ICE9PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHgpKVxuICAgICAgICAgICAgcmV0dXJuICdiaW5hcnknO1xuICAgICAgICB2YXIgdHNUYWcgPSB0b1N0cmluZ1RhZyh4KTtcbiAgICAgICAgcmV0dXJuIHRzVGFnID09PSAnQXJyYXlCdWZmZXInID8gJ2JpbmFyeScgOiB0c1RhZztcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VWludDhBcnJheShhKSB7XG4gICAgICAgIGlmIChhIGluc3RhbmNlb2YgVWludDhBcnJheSlcbiAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGEpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGEuYnVmZmVyLCBhLmJ5dGVPZmZzZXQsIGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShhKTtcbiAgICB9XG5cbiAgICB2YXIgVGFibGUgPSAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVGFibGUoKSB7XG4gICAgICAgIH1cbiAgICAgICAgVGFibGUucHJvdG90eXBlLl90cmFucyA9IGZ1bmN0aW9uIChtb2RlLCBmbiwgd3JpdGVMb2NrZWQpIHtcbiAgICAgICAgICAgIHZhciB0cmFucyA9IHRoaXMuX3R4IHx8IFBTRC50cmFucztcbiAgICAgICAgICAgIHZhciB0YWJsZU5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgICAgICB2YXIgdGFzayA9IGRlYnVnICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmNyZWF0ZVRhc2sgJiYgY29uc29sZS5jcmVhdGVUYXNrKFwiRGV4aWU6IFwiLmNvbmNhdChtb2RlID09PSAncmVhZG9ubHknID8gJ3JlYWQnIDogJ3dyaXRlJywgXCIgXCIpLmNvbmNhdCh0aGlzLm5hbWUpKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrVGFibGVJblRyYW5zYWN0aW9uKHJlc29sdmUsIHJlamVjdCwgdHJhbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRyYW5zLnNjaGVtYVt0YWJsZU5hbWVdKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5Ob3RGb3VuZChcIlRhYmxlIFwiICsgdGFibGVOYW1lICsgXCIgbm90IHBhcnQgb2YgdHJhbnNhY3Rpb25cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuKHRyYW5zLmlkYnRyYW5zLCB0cmFucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgd2FzUm9vdEV4ZWMgPSBiZWdpbk1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBwID0gdHJhbnMgJiYgdHJhbnMuZGIuX25vdmlwID09PSB0aGlzLmRiLl9ub3ZpcCA/XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zID09PSBQU0QudHJhbnMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuX3Byb21pc2UobW9kZSwgY2hlY2tUYWJsZUluVHJhbnNhY3Rpb24sIHdyaXRlTG9ja2VkKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29wZShmdW5jdGlvbiAoKSB7IHJldHVybiB0cmFucy5fcHJvbWlzZShtb2RlLCBjaGVja1RhYmxlSW5UcmFuc2FjdGlvbiwgd3JpdGVMb2NrZWQpOyB9LCB7IHRyYW5zOiB0cmFucywgdHJhbnNsZXNzOiBQU0QudHJhbnNsZXNzIHx8IFBTRCB9KSA6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBUcmFuc2FjdGlvbih0aGlzLmRiLCBtb2RlLCBbdGhpcy5uYW1lXSwgY2hlY2tUYWJsZUluVHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHAuX2NvbnNvbGVUYXNrID0gdGFzaztcbiAgICAgICAgICAgICAgICAgICAgcCA9IHAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS50cmFjZShlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAod2FzUm9vdEV4ZWMpXG4gICAgICAgICAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5T3JDcml0LCBjYikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChrZXlPckNyaXQgJiYga2V5T3JDcml0LmNvbnN0cnVjdG9yID09PSBPYmplY3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoa2V5T3JDcml0KS5maXJzdChjYik7XG4gICAgICAgICAgICBpZiAoa2V5T3JDcml0ID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5UeXBlKFwiSW52YWxpZCBhcmd1bWVudCB0byBUYWJsZS5nZXQoKVwiKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWRvbmx5JywgZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvcmUuZ2V0KHsgdHJhbnM6IHRyYW5zLCBrZXk6IGtleU9yQ3JpdCB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBfdGhpcy5ob29rLnJlYWRpbmcuZmlyZShyZXMpOyB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUud2hlcmUgPSBmdW5jdGlvbiAoaW5kZXhPckNyaXQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5kZXhPckNyaXQgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5kYi5XaGVyZUNsYXVzZSh0aGlzLCBpbmRleE9yQ3JpdCk7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShpbmRleE9yQ3JpdCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmRiLldoZXJlQ2xhdXNlKHRoaXMsIFwiW1wiLmNvbmNhdChpbmRleE9yQ3JpdC5qb2luKCcrJyksIFwiXVwiKSk7XG4gICAgICAgICAgICB2YXIga2V5UGF0aHMgPSBrZXlzKGluZGV4T3JDcml0KTtcbiAgICAgICAgICAgIGlmIChrZXlQYXRocy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKGtleVBhdGhzWzBdKVxuICAgICAgICAgICAgICAgICAgICAuZXF1YWxzKGluZGV4T3JDcml0W2tleVBhdGhzWzBdXSk7XG4gICAgICAgICAgICB2YXIgY29tcG91bmRJbmRleCA9IHRoaXMuc2NoZW1hLmluZGV4ZXMuY29uY2F0KHRoaXMuc2NoZW1hLnByaW1LZXkpLmZpbHRlcihmdW5jdGlvbiAoaXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXguY29tcG91bmQgJiZcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aHMuZXZlcnkoZnVuY3Rpb24gKGtleVBhdGgpIHsgcmV0dXJuIGl4LmtleVBhdGguaW5kZXhPZihrZXlQYXRoKSA+PSAwOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleVBhdGhzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aHMuaW5kZXhPZihpeC5rZXlQYXRoW2ldKSA9PT0gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmtleVBhdGgubGVuZ3RoIC0gYi5rZXlQYXRoLmxlbmd0aDsgfSlbMF07XG4gICAgICAgICAgICBpZiAoY29tcG91bmRJbmRleCAmJiB0aGlzLmRiLl9tYXhLZXkgIT09IG1heFN0cmluZykge1xuICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoc0luVmFsaWRPcmRlciA9IGNvbXBvdW5kSW5kZXgua2V5UGF0aC5zbGljZSgwLCBrZXlQYXRocy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZShrZXlQYXRoc0luVmFsaWRPcmRlcilcbiAgICAgICAgICAgICAgICAgICAgLmVxdWFscyhrZXlQYXRoc0luVmFsaWRPcmRlci5tYXAoZnVuY3Rpb24gKGtwKSB7IHJldHVybiBpbmRleE9yQ3JpdFtrcF07IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29tcG91bmRJbmRleCAmJiBkZWJ1ZylcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJUaGUgcXVlcnkgXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGluZGV4T3JDcml0KSwgXCIgb24gXCIpLmNvbmNhdCh0aGlzLm5hbWUsIFwiIHdvdWxkIGJlbmVmaXQgZnJvbSBhIFwiKSArXG4gICAgICAgICAgICAgICAgICAgIFwiY29tcG91bmQgaW5kZXggW1wiLmNvbmNhdChrZXlQYXRocy5qb2luKCcrJyksIFwiXVwiKSk7XG4gICAgICAgICAgICB2YXIgaWR4QnlOYW1lID0gdGhpcy5zY2hlbWEuaWR4QnlOYW1lO1xuICAgICAgICAgICAgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY21wKGEsIGIpID09PSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF9hID0ga2V5UGF0aHMucmVkdWNlKGZ1bmN0aW9uIChfYSwga2V5UGF0aCkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBfYVswXSwgcHJldkZpbHRlckZuID0gX2FbMV07XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gaWR4QnlOYW1lW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGluZGV4T3JDcml0W2tleVBhdGhdO1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIHByZXZJbmRleCB8fCBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgcHJldkluZGV4IHx8ICFpbmRleCA/XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lKHByZXZGaWx0ZXJGbiwgaW5kZXggJiYgaW5kZXgubXVsdGkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gZ2V0QnlLZXlQYXRoKHgsIGtleVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNBcnJheShwcm9wKSAmJiBwcm9wLnNvbWUoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGVxdWFscyh2YWx1ZSwgaXRlbSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gZXF1YWxzKHZhbHVlLCBnZXRCeUtleVBhdGgoeCwga2V5UGF0aCkpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBwcmV2RmlsdGVyRm5cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSwgW251bGwsIG51bGxdKSwgaWR4ID0gX2FbMF0sIGZpbHRlckZ1bmN0aW9uID0gX2FbMV07XG4gICAgICAgICAgICByZXR1cm4gaWR4ID9cbiAgICAgICAgICAgICAgICB0aGlzLndoZXJlKGlkeC5uYW1lKS5lcXVhbHMoaW5kZXhPckNyaXRbaWR4LmtleVBhdGhdKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZpbHRlckZ1bmN0aW9uKSA6XG4gICAgICAgICAgICAgICAgY29tcG91bmRJbmRleCA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyKGZpbHRlckZ1bmN0aW9uKSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2hlcmUoa2V5UGF0aHMpLmVxdWFscygnJyk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmFuZChmaWx0ZXJGdW5jdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uICh0aGVuU2hvcnRjdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmNvdW50KHRoZW5TaG9ydGN1dCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5vZmZzZXQob2Zmc2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmxpbWl0ID0gZnVuY3Rpb24gKG51bVJvd3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmxpbWl0KG51bVJvd3MpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuZWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkuZWFjaChjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKHRoZW5TaG9ydGN1dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkudG9BcnJheSh0aGVuU2hvcnRjdXQpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUudG9Db2xsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmRiLkNvbGxlY3Rpb24obmV3IHRoaXMuZGIuV2hlcmVDbGF1c2UodGhpcykpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUub3JkZXJCeSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmRiLkNvbGxlY3Rpb24obmV3IHRoaXMuZGIuV2hlcmVDbGF1c2UodGhpcywgaXNBcnJheShpbmRleCkgP1xuICAgICAgICAgICAgICAgIFwiW1wiLmNvbmNhdChpbmRleC5qb2luKCcrJyksIFwiXVwiKSA6XG4gICAgICAgICAgICAgICAgaW5kZXgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5yZXZlcnNlKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5tYXBUb0NsYXNzID0gZnVuY3Rpb24gKGNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLCBkYiA9IF9hLmRiLCB0YWJsZU5hbWUgPSBfYS5uYW1lO1xuICAgICAgICAgICAgdGhpcy5zY2hlbWEubWFwcGVkQ2xhc3MgPSBjb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIGlmIChjb25zdHJ1Y3Rvci5wcm90b3R5cGUgaW5zdGFuY2VvZiBFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvciA9ICAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICAgICAgICAgICAgICBfX2V4dGVuZHMoY2xhc3NfMSwgX3N1cGVyKTtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2xhc3NfMSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xhc3NfMS5wcm90b3R5cGUsIFwiZGJcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBkYjsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjbGFzc18xLnByb3RvdHlwZS50YWJsZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRhYmxlTmFtZTsgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzXzE7XG4gICAgICAgICAgICAgICAgfShjb25zdHJ1Y3RvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluaGVyaXRlZFByb3BzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvdG8gPSBjb25zdHJ1Y3Rvci5wcm90b3R5cGU7IHByb3RvOyBwcm90byA9IGdldFByb3RvKHByb3RvKSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wTmFtZSkgeyByZXR1cm4gaW5oZXJpdGVkUHJvcHMuYWRkKHByb3BOYW1lKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVhZEhvb2sgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmopXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUoY29uc3RydWN0b3IucHJvdG90eXBlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBtIGluIG9iailcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbmhlcml0ZWRQcm9wcy5oYXMobSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc1ttXSA9IG9ialttXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjaGVtYS5yZWFkSG9vaykge1xuICAgICAgICAgICAgICAgIHRoaXMuaG9vay5yZWFkaW5nLnVuc3Vic2NyaWJlKHRoaXMuc2NoZW1hLnJlYWRIb29rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2NoZW1hLnJlYWRIb29rID0gcmVhZEhvb2s7XG4gICAgICAgICAgICB0aGlzLmhvb2soXCJyZWFkaW5nXCIsIHJlYWRIb29rKTtcbiAgICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmRlZmluZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gQ2xhc3MoY29udGVudCkge1xuICAgICAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcFRvQ2xhc3MoQ2xhc3MpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5zY2hlbWEucHJpbUtleSwgYXV0byA9IF9hLmF1dG8sIGtleVBhdGggPSBfYS5rZXlQYXRoO1xuICAgICAgICAgICAgdmFyIG9ialRvQWRkID0gb2JqO1xuICAgICAgICAgICAgaWYgKGtleVBhdGggJiYgYXV0bykge1xuICAgICAgICAgICAgICAgIG9ialRvQWRkID0gd29ya2Fyb3VuZEZvclVuZGVmaW5lZFByaW1LZXkoa2V5UGF0aCkob2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZHdyaXRlJywgZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAnYWRkJywga2V5czoga2V5ICE9IG51bGwgPyBba2V5XSA6IG51bGwsIHZhbHVlczogW29ialRvQWRkXSB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcmVzLm51bUZhaWx1cmVzID8gRGV4aWVQcm9taXNlLnJlamVjdChyZXMuZmFpbHVyZXNbMF0pIDogcmVzLmxhc3RSZXN1bHQ7IH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxhc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgbGFzdFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGtleU9yT2JqZWN0LCBtb2RpZmljYXRpb25zKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGtleU9yT2JqZWN0ID09PSAnb2JqZWN0JyAmJiAhaXNBcnJheShrZXlPck9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gZ2V0QnlLZXlQYXRoKGtleU9yT2JqZWN0LCB0aGlzLnNjaGVtYS5wcmltS2V5LmtleVBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJHaXZlbiBvYmplY3QgZG9lcyBub3QgY29udGFpbiBpdHMgcHJpbWFyeSBrZXlcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKFwiOmlkXCIpLmVxdWFscyhrZXkpLm1vZGlmeShtb2RpZmljYXRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKFwiOmlkXCIpLmVxdWFscyhrZXlPck9iamVjdCkubW9kaWZ5KG1vZGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5zY2hlbWEucHJpbUtleSwgYXV0byA9IF9hLmF1dG8sIGtleVBhdGggPSBfYS5rZXlQYXRoO1xuICAgICAgICAgICAgdmFyIG9ialRvQWRkID0gb2JqO1xuICAgICAgICAgICAgaWYgKGtleVBhdGggJiYgYXV0bykge1xuICAgICAgICAgICAgICAgIG9ialRvQWRkID0gd29ya2Fyb3VuZEZvclVuZGVmaW5lZFByaW1LZXkoa2V5UGF0aCkob2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZHdyaXRlJywgZnVuY3Rpb24gKHRyYW5zKSB7IHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ3B1dCcsIHZhbHVlczogW29ialRvQWRkXSwga2V5czoga2V5ICE9IG51bGwgPyBba2V5XSA6IG51bGwgfSk7IH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcmVzLm51bUZhaWx1cmVzID8gRGV4aWVQcm9taXNlLnJlamVjdChyZXMuZmFpbHVyZXNbMF0pIDogcmVzLmxhc3RSZXN1bHQ7IH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxhc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgbGFzdFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZHdyaXRlJywgZnVuY3Rpb24gKHRyYW5zKSB7IHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2RlbGV0ZScsIGtleXM6IFtrZXldIH0pOyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5udW1GYWlsdXJlcyA/IERleGllUHJvbWlzZS5yZWplY3QocmVzLmZhaWx1cmVzWzBdKSA6IHVuZGVmaW5lZDsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdkZWxldGVSYW5nZScsIHJhbmdlOiBBbnlSYW5nZSB9KTsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMubnVtRmFpbHVyZXMgPyBEZXhpZVByb21pc2UucmVqZWN0KHJlcy5mYWlsdXJlc1swXSkgOiB1bmRlZmluZWQ7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYnVsa0dldCA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkb25seScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLmdldE1hbnkoe1xuICAgICAgICAgICAgICAgICAgICBrZXlzOiBrZXlzLFxuICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnNcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIHJlc3VsdC5tYXAoZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gX3RoaXMuaG9vay5yZWFkaW5nLmZpcmUocmVzKTsgfSk7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5idWxrQWRkID0gZnVuY3Rpb24gKG9iamVjdHMsIGtleXNPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIga2V5cyA9IEFycmF5LmlzQXJyYXkoa2V5c09yT3B0aW9ucykgPyBrZXlzT3JPcHRpb25zIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgKGtleXMgPyB1bmRlZmluZWQgOiBrZXlzT3JPcHRpb25zKTtcbiAgICAgICAgICAgIHZhciB3YW50UmVzdWx0cyA9IG9wdGlvbnMgPyBvcHRpb25zLmFsbEtleXMgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnNjaGVtYS5wcmltS2V5LCBhdXRvID0gX2EuYXV0bywga2V5UGF0aCA9IF9hLmtleVBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKGtleVBhdGggJiYga2V5cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiYnVsa0FkZCgpOiBrZXlzIGFyZ3VtZW50IGludmFsaWQgb24gdGFibGVzIHdpdGggaW5ib3VuZCBrZXlzXCIpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlzICYmIGtleXMubGVuZ3RoICE9PSBvYmplY3RzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiQXJndW1lbnRzIG9iamVjdHMgYW5kIGtleXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aFwiKTtcbiAgICAgICAgICAgICAgICB2YXIgbnVtT2JqZWN0cyA9IG9iamVjdHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3RzVG9BZGQgPSBrZXlQYXRoICYmIGF1dG8gP1xuICAgICAgICAgICAgICAgICAgICBvYmplY3RzLm1hcCh3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKSkgOlxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2FkZCcsIGtleXM6IGtleXMsIHZhbHVlczogb2JqZWN0c1RvQWRkLCB3YW50UmVzdWx0czogd2FudFJlc3VsdHMgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzLCByZXN1bHRzID0gX2EucmVzdWx0cywgbGFzdFJlc3VsdCA9IF9hLmxhc3RSZXN1bHQsIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB3YW50UmVzdWx0cyA/IHJlc3VsdHMgOiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQnVsa0Vycm9yKFwiXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiLmJ1bGtBZGQoKTogXCIpLmNvbmNhdChudW1GYWlsdXJlcywgXCIgb2YgXCIpLmNvbmNhdChudW1PYmplY3RzLCBcIiBvcGVyYXRpb25zIGZhaWxlZFwiKSwgZmFpbHVyZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5idWxrUHV0ID0gZnVuY3Rpb24gKG9iamVjdHMsIGtleXNPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIga2V5cyA9IEFycmF5LmlzQXJyYXkoa2V5c09yT3B0aW9ucykgPyBrZXlzT3JPcHRpb25zIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgKGtleXMgPyB1bmRlZmluZWQgOiBrZXlzT3JPcHRpb25zKTtcbiAgICAgICAgICAgIHZhciB3YW50UmVzdWx0cyA9IG9wdGlvbnMgPyBvcHRpb25zLmFsbEtleXMgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnNjaGVtYS5wcmltS2V5LCBhdXRvID0gX2EuYXV0bywga2V5UGF0aCA9IF9hLmtleVBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKGtleVBhdGggJiYga2V5cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiYnVsa1B1dCgpOiBrZXlzIGFyZ3VtZW50IGludmFsaWQgb24gdGFibGVzIHdpdGggaW5ib3VuZCBrZXlzXCIpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlzICYmIGtleXMubGVuZ3RoICE9PSBvYmplY3RzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiQXJndW1lbnRzIG9iamVjdHMgYW5kIGtleXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aFwiKTtcbiAgICAgICAgICAgICAgICB2YXIgbnVtT2JqZWN0cyA9IG9iamVjdHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3RzVG9QdXQgPSBrZXlQYXRoICYmIGF1dG8gP1xuICAgICAgICAgICAgICAgICAgICBvYmplY3RzLm1hcCh3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKSkgOlxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ3B1dCcsIGtleXM6IGtleXMsIHZhbHVlczogb2JqZWN0c1RvUHV0LCB3YW50UmVzdWx0czogd2FudFJlc3VsdHMgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzLCByZXN1bHRzID0gX2EucmVzdWx0cywgbGFzdFJlc3VsdCA9IF9hLmxhc3RSZXN1bHQsIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB3YW50UmVzdWx0cyA/IHJlc3VsdHMgOiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQnVsa0Vycm9yKFwiXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiLmJ1bGtQdXQoKTogXCIpLmNvbmNhdChudW1GYWlsdXJlcywgXCIgb2YgXCIpLmNvbmNhdChudW1PYmplY3RzLCBcIiBvcGVyYXRpb25zIGZhaWxlZFwiKSwgZmFpbHVyZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5idWxrVXBkYXRlID0gZnVuY3Rpb24gKGtleXNBbmRDaGFuZ2VzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvcmVUYWJsZSA9IHRoaXMuY29yZTtcbiAgICAgICAgICAgIHZhciBrZXlzID0ga2V5c0FuZENoYW5nZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkgeyByZXR1cm4gZW50cnkua2V5OyB9KTtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VTcGVjcyA9IGtleXNBbmRDaGFuZ2VzLm1hcChmdW5jdGlvbiAoZW50cnkpIHsgcmV0dXJuIGVudHJ5LmNoYW5nZXM7IH0pO1xuICAgICAgICAgICAgdmFyIG9mZnNldE1hcCA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29yZVRhYmxlLmdldE1hbnkoeyB0cmFuczogdHJhbnMsIGtleXM6IGtleXMsIGNhY2hlOiAnY2xvbmUnIH0pLnRoZW4oZnVuY3Rpb24gKG9ianMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdEtleXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdE9ianMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAga2V5c0FuZENoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoX2EsIGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hLmtleSwgY2hhbmdlcyA9IF9hLmNoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gb2Jqc1tpZHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSBPYmplY3Qua2V5cyhjaGFuZ2VzKTsgX2kgPCBfYi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBfYltfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNoYW5nZXNba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoID09PSBfdGhpcy5zY2hlbWEucHJpbUtleS5rZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21wKHZhbHVlLCBrZXkpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuQ29uc3RyYWludChcIkNhbm5vdCB1cGRhdGUgcHJpbWFyeSBrZXkgaW4gYnVsa1VwZGF0ZSgpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldE1hcC5wdXNoKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0S2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0T2Jqcy5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRW50cmllcyA9IHJlc3VsdEtleXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29yZVRhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAubXV0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogcmVzdWx0S2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogcmVzdWx0T2JqcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiBrZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVNwZWNzOiBjaGFuZ2VTcGVjc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgZmFpbHVyZXMgPSBfYS5mYWlsdXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1GYWlsdXJlcyA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVtRW50cmllcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSBPYmplY3Qua2V5cyhmYWlsdXJlcyk7IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IF9iW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcGVkT2Zmc2V0ID0gb2Zmc2V0TWFwW051bWJlcihvZmZzZXQpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwcGVkT2Zmc2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmUgPSBmYWlsdXJlc1tvZmZzZXRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmFpbHVyZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXNbbWFwcGVkT2Zmc2V0XSA9IGZhaWx1cmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJ1bGtFcnJvcihcIlwiLmNvbmNhdChfdGhpcy5uYW1lLCBcIi5idWxrVXBkYXRlKCk6IFwiKS5jb25jYXQobnVtRmFpbHVyZXMsIFwiIG9mIFwiKS5jb25jYXQobnVtRW50cmllcywgXCIgb3BlcmF0aW9ucyBmYWlsZWRcIiksIGZhaWx1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmJ1bGtEZWxldGUgPSBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBudW1LZXlzID0ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2RlbGV0ZScsIGtleXM6IGtleXMgfSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHZhciBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzLCBsYXN0UmVzdWx0ID0gX2EubGFzdFJlc3VsdCwgZmFpbHVyZXMgPSBfYS5mYWlsdXJlcztcbiAgICAgICAgICAgICAgICBpZiAobnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBCdWxrRXJyb3IoXCJcIi5jb25jYXQoX3RoaXMubmFtZSwgXCIuYnVsa0RlbGV0ZSgpOiBcIikuY29uY2F0KG51bUZhaWx1cmVzLCBcIiBvZiBcIikuY29uY2F0KG51bUtleXMsIFwiIG9wZXJhdGlvbnMgZmFpbGVkXCIpLCBmYWlsdXJlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRhYmxlO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBFdmVudHMoY3R4KSB7XG4gICAgICAgIHZhciBldnMgPSB7fTtcbiAgICAgICAgdmFyIHJ2ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoaSAtIDEpO1xuICAgICAgICAgICAgICAgIHdoaWxlICgtLWkpXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGV2c1tldmVudE5hbWVdLnN1YnNjcmliZS5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIChldmVudE5hbWUpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBldnNbZXZlbnROYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcnYuYWRkRXZlbnRUeXBlID0gYWRkO1xuICAgICAgICBmb3IgKHZhciBpID0gMSwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIGFkZChhcmd1bWVudHNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydjtcbiAgICAgICAgZnVuY3Rpb24gYWRkKGV2ZW50TmFtZSwgY2hhaW5GdW5jdGlvbiwgZGVmYXVsdEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZENvbmZpZ3VyZWRFdmVudHMoZXZlbnROYW1lKTtcbiAgICAgICAgICAgIGlmICghY2hhaW5GdW5jdGlvbilcbiAgICAgICAgICAgICAgICBjaGFpbkZ1bmN0aW9uID0gcmV2ZXJzZVN0b3BwYWJsZUV2ZW50Q2hhaW47XG4gICAgICAgICAgICBpZiAoIWRlZmF1bHRGdW5jdGlvbilcbiAgICAgICAgICAgICAgICBkZWZhdWx0RnVuY3Rpb24gPSBub3A7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyczogW10sXG4gICAgICAgICAgICAgICAgZmlyZTogZGVmYXVsdEZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnN1YnNjcmliZXJzLmluZGV4T2YoY2IpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycy5wdXNoKGNiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlyZSA9IGNoYWluRnVuY3Rpb24oY29udGV4dC5maXJlLCBjYik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycyA9IGNvbnRleHQuc3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4gIT09IGNiOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maXJlID0gY29udGV4dC5zdWJzY3JpYmVycy5yZWR1Y2UoY2hhaW5GdW5jdGlvbiwgZGVmYXVsdEZ1bmN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXZzW2V2ZW50TmFtZV0gPSBydltldmVudE5hbWVdID0gY29udGV4dDtcbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGFkZENvbmZpZ3VyZWRFdmVudHMoY2ZnKSB7XG4gICAgICAgICAgICBrZXlzKGNmZykuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBjZmdbZXZlbnROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShhcmdzKSkge1xuICAgICAgICAgICAgICAgICAgICBhZGQoZXZlbnROYW1lLCBjZmdbZXZlbnROYW1lXVswXSwgY2ZnW2V2ZW50TmFtZV1bMV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmdzID09PSAnYXNhcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBhZGQoZXZlbnROYW1lLCBtaXJyb3IsIGZ1bmN0aW9uIGZpcmUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNhcCQxKGZ1bmN0aW9uIGZpcmVFdmVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiSW52YWxpZCBldmVudCBjb25maWdcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VDbGFzc0NvbnN0cnVjdG9yKHByb3RvdHlwZSwgY29uc3RydWN0b3IpIHtcbiAgICAgICAgZGVyaXZlKGNvbnN0cnVjdG9yKS5mcm9tKHsgcHJvdG90eXBlOiBwcm90b3R5cGUgfSk7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZUNvbnN0cnVjdG9yKGRiKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ2xhc3NDb25zdHJ1Y3RvcihUYWJsZS5wcm90b3R5cGUsIGZ1bmN0aW9uIFRhYmxlKG5hbWUsIHRhYmxlU2NoZW1hLCB0cmFucykge1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdGhpcy5fdHggPSB0cmFucztcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYSA9IHRhYmxlU2NoZW1hO1xuICAgICAgICAgICAgdGhpcy5ob29rID0gZGIuX2FsbFRhYmxlc1tuYW1lXSA/IGRiLl9hbGxUYWJsZXNbbmFtZV0uaG9vayA6IEV2ZW50cyhudWxsLCB7XG4gICAgICAgICAgICAgICAgXCJjcmVhdGluZ1wiOiBbaG9va0NyZWF0aW5nQ2hhaW4sIG5vcF0sXG4gICAgICAgICAgICAgICAgXCJyZWFkaW5nXCI6IFtwdXJlRnVuY3Rpb25DaGFpbiwgbWlycm9yXSxcbiAgICAgICAgICAgICAgICBcInVwZGF0aW5nXCI6IFtob29rVXBkYXRpbmdDaGFpbiwgbm9wXSxcbiAgICAgICAgICAgICAgICBcImRlbGV0aW5nXCI6IFtob29rRGVsZXRpbmdDaGFpbiwgbm9wXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzUGxhaW5LZXlSYW5nZShjdHgsIGlnbm9yZUxpbWl0RmlsdGVyKSB7XG4gICAgICAgIHJldHVybiAhKGN0eC5maWx0ZXIgfHwgY3R4LmFsZ29yaXRobSB8fCBjdHgub3IpICYmXG4gICAgICAgICAgICAoaWdub3JlTGltaXRGaWx0ZXIgPyBjdHguanVzdExpbWl0IDogIWN0eC5yZXBsYXlGaWx0ZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRGaWx0ZXIoY3R4LCBmbikge1xuICAgICAgICBjdHguZmlsdGVyID0gY29tYmluZShjdHguZmlsdGVyLCBmbik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZFJlcGxheUZpbHRlcihjdHgsIGZhY3RvcnksIGlzTGltaXRGaWx0ZXIpIHtcbiAgICAgICAgdmFyIGN1cnIgPSBjdHgucmVwbGF5RmlsdGVyO1xuICAgICAgICBjdHgucmVwbGF5RmlsdGVyID0gY3VyciA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbWJpbmUoY3VycigpLCBmYWN0b3J5KCkpOyB9IDogZmFjdG9yeTtcbiAgICAgICAgY3R4Lmp1c3RMaW1pdCA9IGlzTGltaXRGaWx0ZXIgJiYgIWN1cnI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZE1hdGNoRmlsdGVyKGN0eCwgZm4pIHtcbiAgICAgICAgY3R4LmlzTWF0Y2ggPSBjb21iaW5lKGN0eC5pc01hdGNoLCBmbik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEluZGV4T3JTdG9yZShjdHgsIGNvcmVTY2hlbWEpIHtcbiAgICAgICAgaWYgKGN0eC5pc1ByaW1LZXkpXG4gICAgICAgICAgICByZXR1cm4gY29yZVNjaGVtYS5wcmltYXJ5S2V5O1xuICAgICAgICB2YXIgaW5kZXggPSBjb3JlU2NoZW1hLmdldEluZGV4QnlLZXlQYXRoKGN0eC5pbmRleCk7XG4gICAgICAgIGlmICghaW5kZXgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoXCJLZXlQYXRoIFwiICsgY3R4LmluZGV4ICsgXCIgb24gb2JqZWN0IHN0b3JlIFwiICsgY29yZVNjaGVtYS5uYW1lICsgXCIgaXMgbm90IGluZGV4ZWRcIik7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgZnVuY3Rpb24gb3BlbkN1cnNvcihjdHgsIGNvcmVUYWJsZSwgdHJhbnMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgY29yZVRhYmxlLnNjaGVtYSk7XG4gICAgICAgIHJldHVybiBjb3JlVGFibGUub3BlbkN1cnNvcih7XG4gICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICB2YWx1ZXM6ICFjdHgua2V5c09ubHksXG4gICAgICAgICAgICByZXZlcnNlOiBjdHguZGlyID09PSAncHJldicsXG4gICAgICAgICAgICB1bmlxdWU6ICEhY3R4LnVuaXF1ZSxcbiAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHJhbmdlOiBjdHgucmFuZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGl0ZXIoY3R4LCBmbiwgY29yZVRyYW5zLCBjb3JlVGFibGUpIHtcbiAgICAgICAgdmFyIGZpbHRlciA9IGN0eC5yZXBsYXlGaWx0ZXIgPyBjb21iaW5lKGN0eC5maWx0ZXIsIGN0eC5yZXBsYXlGaWx0ZXIoKSkgOiBjdHguZmlsdGVyO1xuICAgICAgICBpZiAoIWN0eC5vcikge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdGUob3BlbkN1cnNvcihjdHgsIGNvcmVUYWJsZSwgY29yZVRyYW5zKSwgY29tYmluZShjdHguYWxnb3JpdGhtLCBmaWx0ZXIpLCBmbiwgIWN0eC5rZXlzT25seSAmJiBjdHgudmFsdWVNYXBwZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNldF8xID0ge307XG4gICAgICAgICAgICB2YXIgdW5pb24gPSBmdW5jdGlvbiAoaXRlbSwgY3Vyc29yLCBhZHZhbmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIgfHwgZmlsdGVyKGN1cnNvciwgYWR2YW5jZSwgZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gY3Vyc29yLnN0b3AocmVzdWx0KTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gY3Vyc29yLmZhaWwoZXJyKTsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1hcnlLZXkgPSBjdXJzb3IucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9ICcnICsgcHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9ICcnICsgbmV3IFVpbnQ4QXJyYXkocHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzT3duKHNldF8xLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRfMVtrZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKGl0ZW0sIGN1cnNvciwgYWR2YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICBjdHgub3IuX2l0ZXJhdGUodW5pb24sIGNvcmVUcmFucyksXG4gICAgICAgICAgICAgICAgaXRlcmF0ZShvcGVuQ3Vyc29yKGN0eCwgY29yZVRhYmxlLCBjb3JlVHJhbnMpLCBjdHguYWxnb3JpdGhtLCB1bmlvbiwgIWN0eC5rZXlzT25seSAmJiBjdHgudmFsdWVNYXBwZXIpXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpdGVyYXRlKGN1cnNvclByb21pc2UsIGZpbHRlciwgZm4sIHZhbHVlTWFwcGVyKSB7XG4gICAgICAgIHZhciBtYXBwZWRGbiA9IHZhbHVlTWFwcGVyID8gZnVuY3Rpb24gKHgsIGMsIGEpIHsgcmV0dXJuIGZuKHZhbHVlTWFwcGVyKHgpLCBjLCBhKTsgfSA6IGZuO1xuICAgICAgICB2YXIgd3JhcHBlZEZuID0gd3JhcChtYXBwZWRGbik7XG4gICAgICAgIHJldHVybiBjdXJzb3JQcm9taXNlLnRoZW4oZnVuY3Rpb24gKGN1cnNvcikge1xuICAgICAgICAgICAgaWYgKGN1cnNvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJzb3Iuc3RhcnQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGN1cnNvci5jb250aW51ZSgpOyB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlciB8fCBmaWx0ZXIoY3Vyc29yLCBmdW5jdGlvbiAoYWR2YW5jZXIpIHsgcmV0dXJuIGMgPSBhZHZhbmNlcjsgfSwgZnVuY3Rpb24gKHZhbCkgeyBjdXJzb3Iuc3RvcCh2YWwpOyBjID0gbm9wOyB9LCBmdW5jdGlvbiAoZSkgeyBjdXJzb3IuZmFpbChlKTsgYyA9IG5vcDsgfSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVkRm4oY3Vyc29yLnZhbHVlLCBjdXJzb3IsIGZ1bmN0aW9uIChhZHZhbmNlcikgeyByZXR1cm4gYyA9IGFkdmFuY2VyOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgUHJvcE1vZGlmaWNhdGlvbiA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQcm9wTW9kaWZpY2F0aW9uKHNwZWMpIHtcbiAgICAgICAgICAgIHRoaXNbXCJAQHByb3Btb2RcIl0gPSBzcGVjO1xuICAgICAgICB9XG4gICAgICAgIFByb3BNb2RpZmljYXRpb24ucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBzcGVjID0gdGhpc1tcIkBAcHJvcG1vZFwiXTtcbiAgICAgICAgICAgIGlmIChzcGVjLmFkZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBzcGVjLmFkZDtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSh0ZXJtKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCAoaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdKSwgdHJ1ZSksIHRlcm0sIHRydWUpLnNvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChOdW1iZXIodmFsdWUpIHx8IDApICsgdGVybTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlcm0gPT09ICdiaWdpbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmlnSW50KHZhbHVlKSArIHRlcm07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmlnSW50KDApICsgdGVybTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0ZXJtIFwiLmNvbmNhdCh0ZXJtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3BlYy5yZW1vdmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBzdWJ0cmFoZW5kXzEgPSBzcGVjLnJlbW92ZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShzdWJ0cmFoZW5kXzEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gIXN1YnRyYWhlbmRfMS5pbmNsdWRlcyhpdGVtKTsgfSkuc29ydCgpIDogW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3VidHJhaGVuZF8xID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkgLSBzdWJ0cmFoZW5kXzE7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWJ0cmFoZW5kXzEgPT09ICdiaWdpbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmlnSW50KHZhbHVlKSAtIHN1YnRyYWhlbmRfMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoX2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCaWdJbnQoMCkgLSBzdWJ0cmFoZW5kXzE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3VidHJhaGVuZCBcIi5jb25jYXQoc3VidHJhaGVuZF8xKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJlZml4VG9SZXBsYWNlID0gKF9hID0gc3BlYy5yZXBsYWNlUHJlZml4KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF07XG4gICAgICAgICAgICBpZiAocHJlZml4VG9SZXBsYWNlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuc3RhcnRzV2l0aChwcmVmaXhUb1JlcGxhY2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNwZWMucmVwbGFjZVByZWZpeFsxXSArIHZhbHVlLnN1YnN0cmluZyhwcmVmaXhUb1JlcGxhY2UubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByb3BNb2RpZmljYXRpb247XG4gICAgfSgpKTtcblxuICAgIHZhciBDb2xsZWN0aW9uID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24oKSB7XG4gICAgICAgIH1cbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAoZm4sIGNiKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgcmV0dXJuIGN0eC5lcnJvciA/XG4gICAgICAgICAgICAgICAgY3R4LnRhYmxlLl90cmFucyhudWxsLCByZWplY3Rpb24uYmluZChudWxsLCBjdHguZXJyb3IpKSA6XG4gICAgICAgICAgICAgICAgY3R4LnRhYmxlLl90cmFucygncmVhZG9ubHknLCBmbikudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIHJldHVybiBjdHguZXJyb3IgP1xuICAgICAgICAgICAgICAgIGN0eC50YWJsZS5fdHJhbnMobnVsbCwgcmVqZWN0aW9uLmJpbmQobnVsbCwgY3R4LmVycm9yKSkgOlxuICAgICAgICAgICAgICAgIGN0eC50YWJsZS5fdHJhbnMoJ3JlYWR3cml0ZScsIGZuLCBcImxvY2tlZFwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX2FkZEFsZ29yaXRobSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIGN0eC5hbGdvcml0aG0gPSBjb21iaW5lKGN0eC5hbGdvcml0aG0sIGZuKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX2l0ZXJhdGUgPSBmdW5jdGlvbiAoZm4sIGNvcmVUcmFucykge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZXIodGhpcy5fY3R4LCBmbiwgY29yZVRyYW5zLCB0aGlzLl9jdHgudGFibGUuY29yZSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICAgICAgICB2YXIgcnYgPSBPYmplY3QuY3JlYXRlKHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlKSwgY3R4ID0gT2JqZWN0LmNyZWF0ZSh0aGlzLl9jdHgpO1xuICAgICAgICAgICAgaWYgKHByb3BzKVxuICAgICAgICAgICAgICAgIGV4dGVuZChjdHgsIHByb3BzKTtcbiAgICAgICAgICAgIHJ2Ll9jdHggPSBjdHg7XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC52YWx1ZU1hcHBlciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZWFjaCA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkKGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gaXRlcihjdHgsIGZuLCB0cmFucywgY3R4LnRhYmxlLmNvcmUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gX3RoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICB2YXIgY29yZVRhYmxlID0gY3R4LnRhYmxlLmNvcmU7XG4gICAgICAgICAgICAgICAgaWYgKGlzUGxhaW5LZXlSYW5nZShjdHgsIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3JlVGFibGUuY291bnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZ2V0SW5kZXhPclN0b3JlKGN0eCwgY29yZVRhYmxlLnNjaGVtYSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IGN0eC5yYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb3VudCkgeyByZXR1cm4gTWF0aC5taW4oY291bnQsIGN0eC5saW1pdCk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXIoY3R4LCBmdW5jdGlvbiAoKSB7ICsrY291bnQ7IHJldHVybiBmYWxzZTsgfSwgdHJhbnMsIGNvcmVUYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvdW50OyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuc29ydEJ5ID0gZnVuY3Rpb24gKGtleVBhdGgsIGNiKSB7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBrZXlQYXRoLnNwbGl0KCcuJykucmV2ZXJzZSgpLCBsYXN0UGFydCA9IHBhcnRzWzBdLCBsYXN0SW5kZXggPSBwYXJ0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0dmFsKG9iaiwgaSkge1xuICAgICAgICAgICAgICAgIGlmIChpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dmFsKG9ialtwYXJ0c1tpXV0sIGkgLSAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqW2xhc3RQYXJ0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcmRlciA9IHRoaXMuX2N0eC5kaXIgPT09IFwibmV4dFwiID8gMSA6IC0xO1xuICAgICAgICAgICAgZnVuY3Rpb24gc29ydGVyKGEsIGIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYVZhbCA9IGdldHZhbChhLCBsYXN0SW5kZXgpLCBiVmFsID0gZ2V0dmFsKGIsIGxhc3RJbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNtcChhVmFsLCBiVmFsKSAqIG9yZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheShmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhLnNvcnQoc29ydGVyKTtcbiAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWQoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IF90aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5kaXIgPT09ICduZXh0JyAmJiBpc1BsYWluS2V5UmFuZ2UoY3R4LCB0cnVlKSAmJiBjdHgubGltaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZU1hcHBlcl8xID0gY3R4LnZhbHVlTWFwcGVyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBnZXRJbmRleE9yU3RvcmUoY3R4LCBjdHgudGFibGUuY29yZS5zY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnRhYmxlLmNvcmUucXVlcnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ6IGN0eC5saW1pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBjdHgucmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBfYS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVNYXBwZXJfMSA/IHJlc3VsdC5tYXAodmFsdWVNYXBwZXJfMSkgOiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFfMSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlcihjdHgsIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBhXzEucHVzaChpdGVtKTsgfSwgdHJhbnMsIGN0eC50YWJsZS5jb3JlKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFfMTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgaWYgKG9mZnNldCA8PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgY3R4Lm9mZnNldCArPSBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAoaXNQbGFpbktleVJhbmdlKGN0eCkpIHtcbiAgICAgICAgICAgICAgICBhZGRSZXBsYXlGaWx0ZXIoY3R4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gb2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldExlZnQgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0TGVmdCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tb2Zmc2V0TGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuYWR2YW5jZShvZmZzZXRMZWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWRkUmVwbGF5RmlsdGVyKGN0eCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IG9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICgtLW9mZnNldExlZnQgPCAwKTsgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5saW1pdCA9IGZ1bmN0aW9uIChudW1Sb3dzKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHgubGltaXQgPSBNYXRoLm1pbih0aGlzLl9jdHgubGltaXQsIG51bVJvd3MpO1xuICAgICAgICAgICAgYWRkUmVwbGF5RmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByb3dzTGVmdCA9IG51bVJvd3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC0tcm93c0xlZnQgPD0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3dzTGVmdCA+PSAwO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS51bnRpbCA9IGZ1bmN0aW9uIChmaWx0ZXJGdW5jdGlvbiwgYkluY2x1ZGVTdG9wRW50cnkpIHtcbiAgICAgICAgICAgIGFkZEZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyRnVuY3Rpb24oY3Vyc29yLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYkluY2x1ZGVTdG9wRW50cnk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoMSkudG9BcnJheShmdW5jdGlvbiAoYSkgeyByZXR1cm4gYVswXTsgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKS5maXJzdChjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXJGdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkRmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKGN1cnNvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJGdW5jdGlvbihjdXJzb3IudmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhZGRNYXRjaEZpbHRlcih0aGlzLl9jdHgsIGZpbHRlckZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5hbmQgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZmlsdGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUub3IgPSBmdW5jdGlvbiAoaW5kZXhOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuZGIuV2hlcmVDbGF1c2UodGhpcy5fY3R4LnRhYmxlLCBpbmRleE5hbWUsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LmRpciA9ICh0aGlzLl9jdHguZGlyID09PSBcInByZXZcIiA/IFwibmV4dFwiIDogXCJwcmV2XCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uZGlyZWN0aW9uY2hhbmdlKVxuICAgICAgICAgICAgICAgIHRoaXMuX29uZGlyZWN0aW9uY2hhbmdlKHRoaXMuX2N0eC5kaXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmRlc2MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmVhY2hLZXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2YWwsIGN1cnNvcikgeyBjYihjdXJzb3Iua2V5LCBjdXJzb3IpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZWFjaFVuaXF1ZUtleSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdGhpcy5fY3R4LnVuaXF1ZSA9IFwidW5pcXVlXCI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoS2V5KGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZWFjaFByaW1hcnlLZXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2YWwsIGN1cnNvcikgeyBjYihjdXJzb3IucHJpbWFyeUtleSwgY3Vyc29yKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoaXRlbSwgY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgYS5wdXNoKGN1cnNvci5rZXkpO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucHJpbWFyeUtleXMgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBpZiAoY3R4LmRpciA9PT0gJ25leHQnICYmIGlzUGxhaW5LZXlSYW5nZShjdHgsIHRydWUpICYmIGN0eC5saW1pdCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgY3R4LnRhYmxlLmNvcmUuc2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC50YWJsZS5jb3JlLnF1ZXJ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogY3R4LmxpbWl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IGN0eC5yYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX2EucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LmtleXNPbmx5ID0gIWN0eC5pc01hdGNoO1xuICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKGl0ZW0sIGN1cnNvcikge1xuICAgICAgICAgICAgICAgIGEucHVzaChjdXJzb3IucHJpbWFyeUtleSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS51bmlxdWVLZXlzID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHgudW5pcXVlID0gXCJ1bmlxdWVcIjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtleXMoY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maXJzdEtleSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoMSkua2V5cyhmdW5jdGlvbiAoYSkgeyByZXR1cm4gYVswXTsgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmxhc3RLZXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKS5maXJzdEtleShjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmRpc3RpbmN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eCwgaWR4ID0gY3R4LmluZGV4ICYmIGN0eC50YWJsZS5zY2hlbWEuaWR4QnlOYW1lW2N0eC5pbmRleF07XG4gICAgICAgICAgICBpZiAoIWlkeCB8fCAhaWR4Lm11bHRpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgdmFyIHNldCA9IHt9O1xuICAgICAgICAgICAgYWRkRmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKGN1cnNvcikge1xuICAgICAgICAgICAgICAgIHZhciBzdHJLZXkgPSBjdXJzb3IucHJpbWFyeUtleS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGhhc093bihzZXQsIHN0cktleSk7XG4gICAgICAgICAgICAgICAgc2V0W3N0cktleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZm91bmQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5tb2RpZnkgPSBmdW5jdGlvbiAoY2hhbmdlcykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3JpdGUoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGlmeWVyO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2hhbmdlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBtb2RpZnllciA9IGNoYW5nZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5UGF0aHMgPSBrZXlzKGNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtS2V5cyA9IGtleVBhdGhzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZ5ZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFueXRoaW5nTW9kaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtS2V5czsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBrZXlQYXRoc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gY2hhbmdlc1trZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ1ZhbCA9IGdldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgUHJvcE1vZGlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgoaXRlbSwga2V5UGF0aCwgdmFsLmV4ZWN1dGUob3JpZ1ZhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnl0aGluZ01vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3JpZ1ZhbCAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoLCB2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnl0aGluZ01vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW55dGhpbmdNb2RpZmllZDtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvcmVUYWJsZSA9IGN0eC50YWJsZS5jb3JlO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IGNvcmVUYWJsZS5zY2hlbWEucHJpbWFyeUtleSwgb3V0Ym91bmQgPSBfYS5vdXRib3VuZCwgZXh0cmFjdEtleSA9IF9hLmV4dHJhY3RLZXk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbWl0ID0gMjAwO1xuICAgICAgICAgICAgICAgIHZhciBtb2RpZnlDaHVua1NpemUgPSBfdGhpcy5kYi5fb3B0aW9ucy5tb2RpZnlDaHVua1NpemU7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGlmeUNodW5rU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZGlmeUNodW5rU2l6ZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQgPSBtb2RpZnlDaHVua1NpemVbY29yZVRhYmxlLm5hbWVdIHx8IG1vZGlmeUNodW5rU2l6ZVsnKiddIHx8IDIwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0ID0gbW9kaWZ5Q2h1bmtTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0b3RhbEZhaWx1cmVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGZhaWxlZEtleXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYXBwbHlNdXRhdGVSZXN1bHQgPSBmdW5jdGlvbiAoZXhwZWN0ZWRDb3VudCwgcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IHJlcy5mYWlsdXJlcywgbnVtRmFpbHVyZXMgPSByZXMubnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDb3VudCArPSBleHBlY3RlZENvdW50IC0gbnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBrZXlzKGZhaWx1cmVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZhaWx1cmVzLnB1c2goZmFpbHVyZXNbcG9zXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jbG9uZSgpLnByaW1hcnlLZXlzKCkudGhlbihmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3JpdGVyaWEgPSBpc1BsYWluS2V5UmFuZ2UoY3R4KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbWl0ID09PSBJbmZpbml0eSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBjaGFuZ2VzICE9PSAnZnVuY3Rpb24nIHx8IGNoYW5nZXMgPT09IGRlbGV0ZUNhbGxiYWNrKSAmJiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogY3R4LmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IGN0eC5yYW5nZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dENodW5rID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gTWF0aC5taW4obGltaXQsIGtleXMubGVuZ3RoIC0gb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3JlVGFibGUuZ2V0TWFueSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGtleXMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBjb3VudCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU6IFwiaW1tdXRhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHV0VmFsdWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEtleXMgPSBvdXRib3VuZCA/IFtdIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsZXRlS2V5cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ1ZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4XzEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGVlcENsb25lKG9yaWdWYWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltS2V5OiBrZXlzW29mZnNldCArIGldXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RpZnllci5jYWxsKGN0eF8xLCBjdHhfMS52YWx1ZSwgY3R4XzEpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eF8xLnZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVLZXlzLnB1c2goa2V5c1tvZmZzZXQgKyBpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghb3V0Ym91bmQgJiYgY21wKGV4dHJhY3RLZXkob3JpZ1ZhbHVlKSwgZXh0cmFjdEtleShjdHhfMS52YWx1ZSkpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlS2V5cy5wdXNoKGtleXNbb2Zmc2V0ICsgaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFZhbHVlcy5wdXNoKGN0eF8xLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1dFZhbHVlcy5wdXNoKGN0eF8xLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0Ym91bmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1dEtleXMucHVzaChrZXlzW29mZnNldCArIGldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFkZFZhbHVlcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVUYWJsZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdhZGQnLCB2YWx1ZXM6IGFkZFZhbHVlcyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcG9zIGluIHJlcy5mYWlsdXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUtleXMuc3BsaWNlKHBhcnNlSW50KHBvcyksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlNdXRhdGVSZXN1bHQoYWRkVmFsdWVzLmxlbmd0aCwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gKHB1dFZhbHVlcy5sZW5ndGggPiAwIHx8IChjcml0ZXJpYSAmJiB0eXBlb2YgY2hhbmdlcyA9PT0gJ29iamVjdCcpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlVGFibGUubXV0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czogcHV0S2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogcHV0VmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyaWE6IGNyaXRlcmlhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3BlYzogdHlwZW9mIGNoYW5nZXMgIT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjaGFuZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGRpdGlvbmFsQ2h1bms6IG9mZnNldCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBhcHBseU11dGF0ZVJlc3VsdChwdXRWYWx1ZXMubGVuZ3RoLCByZXMpOyB9KTsgfSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiAoZGVsZXRlS2V5cy5sZW5ndGggPiAwIHx8IChjcml0ZXJpYSAmJiBjaGFuZ2VzID09PSBkZWxldGVDYWxsYmFjaykpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVUYWJsZS5tdXRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiBkZWxldGVLZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyaWE6IGNyaXRlcmlhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGRpdGlvbmFsQ2h1bms6IG9mZnNldCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBhcHBseU11dGF0ZVJlc3VsdChkZWxldGVLZXlzLmxlbmd0aCwgcmVzKTsgfSk7IH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGggPiBvZmZzZXQgKyBjb3VudCAmJiBuZXh0Q2h1bmsob2Zmc2V0ICsgbGltaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0Q2h1bmsoMCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxGYWlsdXJlcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RpZnlFcnJvcihcIkVycm9yIG1vZGlmeWluZyBvbmUgb3IgbW9yZSBvYmplY3RzXCIsIHRvdGFsRmFpbHVyZXMsIHN1Y2Nlc3NDb3VudCwgZmFpbGVkS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHgsIHJhbmdlID0gY3R4LnJhbmdlO1xuICAgICAgICAgICAgaWYgKGlzUGxhaW5LZXlSYW5nZShjdHgpICYmXG4gICAgICAgICAgICAgICAgKGN0eC5pc1ByaW1LZXkgfHwgcmFuZ2UudHlwZSA9PT0gMyApKVxuICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fd3JpdGUoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gY3R4LnRhYmxlLmNvcmUuc2NoZW1hLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3JlUmFuZ2UgPSByYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC50YWJsZS5jb3JlLmNvdW50KHsgdHJhbnM6IHRyYW5zLCBxdWVyeTogeyBpbmRleDogcHJpbWFyeUtleSwgcmFuZ2U6IGNvcmVSYW5nZSB9IH0pLnRoZW4oZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnRhYmxlLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAnZGVsZXRlUmFuZ2UnLCByYW5nZTogY29yZVJhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7IF9hLmxhc3RSZXN1bHQ7IF9hLnJlc3VsdHM7IHZhciBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1GYWlsdXJlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGlmeUVycm9yKFwiQ291bGQgbm90IGRlbGV0ZSBzb21lIHZhbHVlc1wiLCBPYmplY3Qua2V5cyhmYWlsdXJlcykubWFwKGZ1bmN0aW9uIChwb3MpIHsgcmV0dXJuIGZhaWx1cmVzW3Bvc107IH0pLCBjb3VudCAtIG51bUZhaWx1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnQgLSBudW1GYWlsdXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGlmeShkZWxldGVDYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2xsZWN0aW9uO1xuICAgIH0oKSk7XG4gICAgdmFyIGRlbGV0ZUNhbGxiYWNrID0gZnVuY3Rpb24gKHZhbHVlLCBjdHgpIHsgcmV0dXJuIGN0eC52YWx1ZSA9IG51bGw7IH07XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDb2xsZWN0aW9uQ29uc3RydWN0b3IoZGIpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VDbGFzc0NvbnN0cnVjdG9yKENvbGxlY3Rpb24ucHJvdG90eXBlLCBmdW5jdGlvbiBDb2xsZWN0aW9uKHdoZXJlQ2xhdXNlLCBrZXlSYW5nZUdlbmVyYXRvcikge1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdmFyIGtleVJhbmdlID0gQW55UmFuZ2UsIGVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChrZXlSYW5nZUdlbmVyYXRvcilcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBrZXlSYW5nZSA9IGtleVJhbmdlR2VuZXJhdG9yKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3aGVyZUN0eCA9IHdoZXJlQ2xhdXNlLl9jdHg7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB3aGVyZUN0eC50YWJsZTtcbiAgICAgICAgICAgIHZhciByZWFkaW5nSG9vayA9IHRhYmxlLmhvb2sucmVhZGluZy5maXJlO1xuICAgICAgICAgICAgdGhpcy5fY3R4ID0ge1xuICAgICAgICAgICAgICAgIHRhYmxlOiB0YWJsZSxcbiAgICAgICAgICAgICAgICBpbmRleDogd2hlcmVDdHguaW5kZXgsXG4gICAgICAgICAgICAgICAgaXNQcmltS2V5OiAoIXdoZXJlQ3R4LmluZGV4IHx8ICh0YWJsZS5zY2hlbWEucHJpbUtleS5rZXlQYXRoICYmIHdoZXJlQ3R4LmluZGV4ID09PSB0YWJsZS5zY2hlbWEucHJpbUtleS5uYW1lKSksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IGtleVJhbmdlLFxuICAgICAgICAgICAgICAgIGtleXNPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkaXI6IFwibmV4dFwiLFxuICAgICAgICAgICAgICAgIHVuaXF1ZTogXCJcIixcbiAgICAgICAgICAgICAgICBhbGdvcml0aG06IG51bGwsXG4gICAgICAgICAgICAgICAgZmlsdGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIHJlcGxheUZpbHRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBqdXN0TGltaXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNNYXRjaDogbnVsbCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgbGltaXQ6IEluZmluaXR5LFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBvcjogd2hlcmVDdHgub3IsXG4gICAgICAgICAgICAgICAgdmFsdWVNYXBwZXI6IHJlYWRpbmdIb29rICE9PSBtaXJyb3IgPyByZWFkaW5nSG9vayA6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNpbXBsZUNvbXBhcmUoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2ltcGxlQ29tcGFyZVJldmVyc2UoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmYWlsKGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlLCBlcnIsIFQpIHtcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZSBpbnN0YW5jZW9mIFdoZXJlQ2xhdXNlID9cbiAgICAgICAgICAgIG5ldyBjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZS5Db2xsZWN0aW9uKGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlKSA6XG4gICAgICAgICAgICBjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZTtcbiAgICAgICAgY29sbGVjdGlvbi5fY3R4LmVycm9yID0gVCA/IG5ldyBUKGVycikgOiBuZXcgVHlwZUVycm9yKGVycik7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbXB0eUNvbGxlY3Rpb24od2hlcmVDbGF1c2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3aGVyZUNsYXVzZS5Db2xsZWN0aW9uKHdoZXJlQ2xhdXNlLCBmdW5jdGlvbiAoKSB7IHJldHVybiByYW5nZUVxdWFsKFwiXCIpOyB9KS5saW1pdCgwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBwZXJGYWN0b3J5KGRpcikge1xuICAgICAgICByZXR1cm4gZGlyID09PSBcIm5leHRcIiA/XG4gICAgICAgICAgICBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50b1VwcGVyQ2FzZSgpOyB9IDpcbiAgICAgICAgICAgIGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRvTG93ZXJDYXNlKCk7IH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxvd2VyRmFjdG9yeShkaXIpIHtcbiAgICAgICAgcmV0dXJuIGRpciA9PT0gXCJuZXh0XCIgP1xuICAgICAgICAgICAgZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9Mb3dlckNhc2UoKTsgfSA6XG4gICAgICAgICAgICBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50b1VwcGVyQ2FzZSgpOyB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBuZXh0Q2FzaW5nKGtleSwgbG93ZXJLZXksIHVwcGVyTmVlZGxlLCBsb3dlck5lZWRsZSwgY21wLCBkaXIpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGtleS5sZW5ndGgsIGxvd2VyTmVlZGxlLmxlbmd0aCk7XG4gICAgICAgIHZhciBsbHAgPSAtMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGx3cktleUNoYXIgPSBsb3dlcktleVtpXTtcbiAgICAgICAgICAgIGlmIChsd3JLZXlDaGFyICE9PSBsb3dlck5lZWRsZVtpXSkge1xuICAgICAgICAgICAgICAgIGlmIChjbXAoa2V5W2ldLCB1cHBlck5lZWRsZVtpXSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCBpKSArIHVwcGVyTmVlZGxlW2ldICsgdXBwZXJOZWVkbGUuc3Vic3RyKGkgKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAoY21wKGtleVtpXSwgbG93ZXJOZWVkbGVbaV0pIDwgMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleS5zdWJzdHIoMCwgaSkgKyBsb3dlck5lZWRsZVtpXSArIHVwcGVyTmVlZGxlLnN1YnN0cihpICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGxscCA+PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCBsbHApICsgbG93ZXJLZXlbbGxwXSArIHVwcGVyTmVlZGxlLnN1YnN0cihsbHAgKyAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbXAoa2V5W2ldLCBsd3JLZXlDaGFyKSA8IDApXG4gICAgICAgICAgICAgICAgbGxwID0gaTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoIDwgbG93ZXJOZWVkbGUubGVuZ3RoICYmIGRpciA9PT0gXCJuZXh0XCIpXG4gICAgICAgICAgICByZXR1cm4ga2V5ICsgdXBwZXJOZWVkbGUuc3Vic3RyKGtleS5sZW5ndGgpO1xuICAgICAgICBpZiAobGVuZ3RoIDwga2V5Lmxlbmd0aCAmJiBkaXIgPT09IFwicHJldlwiKVxuICAgICAgICAgICAgcmV0dXJuIGtleS5zdWJzdHIoMCwgdXBwZXJOZWVkbGUubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIChsbHAgPCAwID8gbnVsbCA6IGtleS5zdWJzdHIoMCwgbGxwKSArIGxvd2VyTmVlZGxlW2xscF0gKyB1cHBlck5lZWRsZS5zdWJzdHIobGxwICsgMSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRJZ25vcmVDYXNlQWxnb3JpdGhtKHdoZXJlQ2xhdXNlLCBtYXRjaCwgbmVlZGxlcywgc3VmZml4KSB7XG4gICAgICAgIHZhciB1cHBlciwgbG93ZXIsIGNvbXBhcmUsIHVwcGVyTmVlZGxlcywgbG93ZXJOZWVkbGVzLCBkaXJlY3Rpb24sIG5leHRLZXlTdWZmaXgsIG5lZWRsZXNMZW4gPSBuZWVkbGVzLmxlbmd0aDtcbiAgICAgICAgaWYgKCFuZWVkbGVzLmV2ZXJ5KGZ1bmN0aW9uIChzKSB7IHJldHVybiB0eXBlb2YgcyA9PT0gJ3N0cmluZyc7IH0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFpbCh3aGVyZUNsYXVzZSwgU1RSSU5HX0VYUEVDVEVEKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBpbml0RGlyZWN0aW9uKGRpcikge1xuICAgICAgICAgICAgdXBwZXIgPSB1cHBlckZhY3RvcnkoZGlyKTtcbiAgICAgICAgICAgIGxvd2VyID0gbG93ZXJGYWN0b3J5KGRpcik7XG4gICAgICAgICAgICBjb21wYXJlID0gKGRpciA9PT0gXCJuZXh0XCIgPyBzaW1wbGVDb21wYXJlIDogc2ltcGxlQ29tcGFyZVJldmVyc2UpO1xuICAgICAgICAgICAgdmFyIG5lZWRsZUJvdW5kcyA9IG5lZWRsZXMubWFwKGZ1bmN0aW9uIChuZWVkbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBsb3dlcjogbG93ZXIobmVlZGxlKSwgdXBwZXI6IHVwcGVyKG5lZWRsZSkgfTtcbiAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZShhLmxvd2VyLCBiLmxvd2VyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXBwZXJOZWVkbGVzID0gbmVlZGxlQm91bmRzLm1hcChmdW5jdGlvbiAobmIpIHsgcmV0dXJuIG5iLnVwcGVyOyB9KTtcbiAgICAgICAgICAgIGxvd2VyTmVlZGxlcyA9IG5lZWRsZUJvdW5kcy5tYXAoZnVuY3Rpb24gKG5iKSB7IHJldHVybiBuYi5sb3dlcjsgfSk7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXI7XG4gICAgICAgICAgICBuZXh0S2V5U3VmZml4ID0gKGRpciA9PT0gXCJuZXh0XCIgPyBcIlwiIDogc3VmZml4KTtcbiAgICAgICAgfVxuICAgICAgICBpbml0RGlyZWN0aW9uKFwibmV4dFwiKTtcbiAgICAgICAgdmFyIGMgPSBuZXcgd2hlcmVDbGF1c2UuQ29sbGVjdGlvbih3aGVyZUNsYXVzZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UodXBwZXJOZWVkbGVzWzBdLCBsb3dlck5lZWRsZXNbbmVlZGxlc0xlbiAtIDFdICsgc3VmZml4KTsgfSk7XG4gICAgICAgIGMuX29uZGlyZWN0aW9uY2hhbmdlID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaW5pdERpcmVjdGlvbihkaXJlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZmlyc3RQb3NzaWJsZU5lZWRsZSA9IDA7XG4gICAgICAgIGMuX2FkZEFsZ29yaXRobShmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gY3Vyc29yLmtleTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB2YXIgbG93ZXJLZXkgPSBsb3dlcihrZXkpO1xuICAgICAgICAgICAgaWYgKG1hdGNoKGxvd2VyS2V5LCBsb3dlck5lZWRsZXMsIGZpcnN0UG9zc2libGVOZWVkbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbG93ZXN0UG9zc2libGVDYXNpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBmaXJzdFBvc3NpYmxlTmVlZGxlOyBpIDwgbmVlZGxlc0xlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXNpbmcgPSBuZXh0Q2FzaW5nKGtleSwgbG93ZXJLZXksIHVwcGVyTmVlZGxlc1tpXSwgbG93ZXJOZWVkbGVzW2ldLCBjb21wYXJlLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FzaW5nID09PSBudWxsICYmIGxvd2VzdFBvc3NpYmxlQ2FzaW5nID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RQb3NzaWJsZU5lZWRsZSA9IGkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsb3dlc3RQb3NzaWJsZUNhc2luZyA9PT0gbnVsbCB8fCBjb21wYXJlKGxvd2VzdFBvc3NpYmxlQ2FzaW5nLCBjYXNpbmcpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXN0UG9zc2libGVDYXNpbmcgPSBjYXNpbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvd2VzdFBvc3NpYmxlQ2FzaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkgeyBjdXJzb3IuY29udGludWUobG93ZXN0UG9zc2libGVDYXNpbmcgKyBuZXh0S2V5U3VmZml4KTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlUmFuZ2UobG93ZXIsIHVwcGVyLCBsb3dlck9wZW4sIHVwcGVyT3Blbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogMiAsXG4gICAgICAgICAgICBsb3dlcjogbG93ZXIsXG4gICAgICAgICAgICB1cHBlcjogdXBwZXIsXG4gICAgICAgICAgICBsb3dlck9wZW46IGxvd2VyT3BlbixcbiAgICAgICAgICAgIHVwcGVyT3BlbjogdXBwZXJPcGVuXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJhbmdlRXF1YWwodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IDEgLFxuICAgICAgICAgICAgbG93ZXI6IHZhbHVlLFxuICAgICAgICAgICAgdXBwZXI6IHZhbHVlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIFdoZXJlQ2xhdXNlID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFdoZXJlQ2xhdXNlKCkge1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaGVyZUNsYXVzZS5wcm90b3R5cGUsIFwiQ29sbGVjdGlvblwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY3R4LnRhYmxlLmRiLkNvbGxlY3Rpb247XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5iZXR3ZWVuID0gZnVuY3Rpb24gKGxvd2VyLCB1cHBlciwgaW5jbHVkZUxvd2VyLCBpbmNsdWRlVXBwZXIpIHtcbiAgICAgICAgICAgIGluY2x1ZGVMb3dlciA9IGluY2x1ZGVMb3dlciAhPT0gZmFsc2U7XG4gICAgICAgICAgICBpbmNsdWRlVXBwZXIgPSBpbmNsdWRlVXBwZXIgPT09IHRydWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy5fY21wKGxvd2VyLCB1cHBlcikgPiAwKSB8fFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5fY21wKGxvd2VyLCB1cHBlcikgPT09IDAgJiYgKGluY2x1ZGVMb3dlciB8fCBpbmNsdWRlVXBwZXIpICYmICEoaW5jbHVkZUxvd2VyICYmIGluY2x1ZGVVcHBlcikpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKGxvd2VyLCB1cHBlciwgIWluY2x1ZGVMb3dlciwgIWluY2x1ZGVVcHBlcik7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJhbmdlRXF1YWwodmFsdWUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmFib3ZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZSh2YWx1ZSwgdW5kZWZpbmVkLCB0cnVlKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5hYm92ZU9yRXF1YWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKHZhbHVlLCB1bmRlZmluZWQsIGZhbHNlKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5iZWxvdyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UodW5kZWZpbmVkLCB2YWx1ZSwgZmFsc2UsIHRydWUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmJlbG93T3JFcXVhbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UodW5kZWZpbmVkLCB2YWx1ZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBTVFJJTkdfRVhQRUNURUQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmV0d2VlbihzdHIsIHN0ciArIG1heFN0cmluZywgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5zdGFydHNXaXRoSWdub3JlQ2FzZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIGlmIChzdHIgPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRzV2l0aChzdHIpO1xuICAgICAgICAgICAgcmV0dXJuIGFkZElnbm9yZUNhc2VBbGdvcml0aG0odGhpcywgZnVuY3Rpb24gKHgsIGEpIHsgcmV0dXJuIHguaW5kZXhPZihhWzBdKSA9PT0gMDsgfSwgW3N0cl0sIG1heFN0cmluZyk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5lcXVhbHNJZ25vcmVDYXNlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIGFkZElnbm9yZUNhc2VBbGdvcml0aG0odGhpcywgZnVuY3Rpb24gKHgsIGEpIHsgcmV0dXJuIHggPT09IGFbMF07IH0sIFtzdHJdLCBcIlwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmFueU9mSWdub3JlQ2FzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBnZXRBcnJheU9mLmFwcGx5KE5PX0NIQVJfQVJSQVksIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIGFkZElnbm9yZUNhc2VBbGdvcml0aG0odGhpcywgZnVuY3Rpb24gKHgsIGEpIHsgcmV0dXJuIGEuaW5kZXhPZih4KSAhPT0gLTE7IH0sIHNldCwgXCJcIik7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5zdGFydHNXaXRoQW55T2ZJZ25vcmVDYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4gYS5zb21lKGZ1bmN0aW9uIChuKSB7IHJldHVybiB4LmluZGV4T2YobikgPT09IDA7IH0pOyB9LCBzZXQsIG1heFN0cmluZyk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5hbnlPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgdmFyIGNvbXBhcmUgPSB0aGlzLl9jbXA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNldC5zb3J0KGNvbXBhcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGMgPSBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKHNldFswXSwgc2V0W3NldC5sZW5ndGggLSAxXSk7IH0pO1xuICAgICAgICAgICAgYy5fb25kaXJlY3Rpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29tcGFyZSA9IChkaXJlY3Rpb24gPT09IFwibmV4dFwiID9cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2FzY2VuZGluZyA6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9kZXNjZW5kaW5nKTtcbiAgICAgICAgICAgICAgICBzZXQuc29ydChjb21wYXJlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBjLl9hZGRBbGdvcml0aG0oZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjdXJzb3Iua2V5O1xuICAgICAgICAgICAgICAgIHdoaWxlIChjb21wYXJlKGtleSwgc2V0W2ldKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gc2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZShrZXksIHNldFtpXSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKGZ1bmN0aW9uICgpIHsgY3Vyc29yLmNvbnRpbnVlKHNldFtpXSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLm5vdEVxdWFsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbkFueVJhbmdlKFtbbWluS2V5LCB2YWx1ZV0sIFt2YWx1ZSwgdGhpcy5kYi5fbWF4S2V5XV0sIHsgaW5jbHVkZUxvd2VyczogZmFsc2UsIGluY2x1ZGVVcHBlcnM6IGZhbHNlIH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUubm9uZU9mID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzZXQuc29ydCh0aGlzLl9hc2NlbmRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmFuZ2VzID0gc2V0LnJlZHVjZShmdW5jdGlvbiAocmVzLCB2YWwpIHsgcmV0dXJuIHJlcyA/XG4gICAgICAgICAgICAgICAgcmVzLmNvbmNhdChbW3Jlc1tyZXMubGVuZ3RoIC0gMV1bMV0sIHZhbF1dKSA6XG4gICAgICAgICAgICAgICAgW1ttaW5LZXksIHZhbF1dOyB9LCBudWxsKTtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKFtzZXRbc2V0Lmxlbmd0aCAtIDFdLCB0aGlzLmRiLl9tYXhLZXldKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluQW55UmFuZ2UocmFuZ2VzLCB7IGluY2x1ZGVMb3dlcnM6IGZhbHNlLCBpbmNsdWRlVXBwZXJzOiBmYWxzZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmluQW55UmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2VzLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNtcCA9IHRoaXMuX2NtcCwgYXNjZW5kaW5nID0gdGhpcy5fYXNjZW5kaW5nLCBkZXNjZW5kaW5nID0gdGhpcy5fZGVzY2VuZGluZywgbWluID0gdGhpcy5fbWluLCBtYXggPSB0aGlzLl9tYXg7XG4gICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCFyYW5nZXMuZXZlcnkoZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlWzBdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VbMV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBhc2NlbmRpbmcocmFuZ2VbMF0sIHJhbmdlWzFdKSA8PSAwO1xuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBcIkZpcnN0IGFyZ3VtZW50IHRvIGluQW55UmFuZ2UoKSBtdXN0IGJlIGFuIEFycmF5IG9mIHR3by12YWx1ZSBBcnJheXMgW2xvd2VyLHVwcGVyXSB3aGVyZSB1cHBlciBtdXN0IG5vdCBiZSBsb3dlciB0aGFuIGxvd2VyXCIsIGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmNsdWRlTG93ZXJzID0gIW9wdGlvbnMgfHwgb3B0aW9ucy5pbmNsdWRlTG93ZXJzICE9PSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBpbmNsdWRlVXBwZXJzID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGVVcHBlcnMgPT09IHRydWU7XG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRSYW5nZShyYW5nZXMsIG5ld1JhbmdlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwLCBsID0gcmFuZ2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbXAobmV3UmFuZ2VbMF0sIHJhbmdlWzFdKSA8IDAgJiYgY21wKG5ld1JhbmdlWzFdLCByYW5nZVswXSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZVswXSA9IG1pbihyYW5nZVswXSwgbmV3UmFuZ2VbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VbMV0gPSBtYXgocmFuZ2VbMV0sIG5ld1JhbmdlWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpID09PSBsKVxuICAgICAgICAgICAgICAgICAgICByYW5nZXMucHVzaChuZXdSYW5nZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzb3J0RGlyZWN0aW9uID0gYXNjZW5kaW5nO1xuICAgICAgICAgICAgZnVuY3Rpb24gcmFuZ2VTb3J0ZXIoYSwgYikgeyByZXR1cm4gc29ydERpcmVjdGlvbihhWzBdLCBiWzBdKTsgfVxuICAgICAgICAgICAgdmFyIHNldDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2V0ID0gcmFuZ2VzLnJlZHVjZShhZGRSYW5nZSwgW10pO1xuICAgICAgICAgICAgICAgIHNldC5zb3J0KHJhbmdlU29ydGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByYW5nZVBvcyA9IDA7XG4gICAgICAgICAgICB2YXIga2V5SXNCZXlvbmRDdXJyZW50RW50cnkgPSBpbmNsdWRlVXBwZXJzID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBhc2NlbmRpbmcoa2V5LCBzZXRbcmFuZ2VQb3NdWzFdKSA+IDA7IH0gOlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGFzY2VuZGluZyhrZXksIHNldFtyYW5nZVBvc11bMV0pID49IDA7IH07XG4gICAgICAgICAgICB2YXIga2V5SXNCZWZvcmVDdXJyZW50RW50cnkgPSBpbmNsdWRlTG93ZXJzID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBkZXNjZW5kaW5nKGtleSwgc2V0W3JhbmdlUG9zXVswXSkgPiAwOyB9IDpcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBkZXNjZW5kaW5nKGtleSwgc2V0W3JhbmdlUG9zXVswXSkgPj0gMDsgfTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGtleVdpdGhpbkN1cnJlbnRSYW5nZShrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWtleUlzQmV5b25kQ3VycmVudEVudHJ5KGtleSkgJiYgIWtleUlzQmVmb3JlQ3VycmVudEVudHJ5KGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2hlY2tLZXkgPSBrZXlJc0JleW9uZEN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgIHZhciBjID0gbmV3IHRoaXMuQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZShzZXRbMF1bMF0sIHNldFtzZXQubGVuZ3RoIC0gMV1bMV0sICFpbmNsdWRlTG93ZXJzLCAhaW5jbHVkZVVwcGVycyk7IH0pO1xuICAgICAgICAgICAgYy5fb25kaXJlY3Rpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tLZXkgPSBrZXlJc0JleW9uZEN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbiA9IGFzY2VuZGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrS2V5ID0ga2V5SXNCZWZvcmVDdXJyZW50RW50cnk7XG4gICAgICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb24gPSBkZXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXQuc29ydChyYW5nZVNvcnRlcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYy5fYWRkQWxnb3JpdGhtKGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gY3Vyc29yLmtleTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY2hlY2tLZXkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICArK3JhbmdlUG9zO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VQb3MgPT09IHNldC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGtleVdpdGhpbkN1cnJlbnRSYW5nZShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChfdGhpcy5fY21wKGtleSwgc2V0W3JhbmdlUG9zXVsxXSkgPT09IDAgfHwgX3RoaXMuX2NtcChrZXksIHNldFtyYW5nZVBvc11bMF0pID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnREaXJlY3Rpb24gPT09IGFzY2VuZGluZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoc2V0W3JhbmdlUG9zXVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKHNldFtyYW5nZVBvc11bMV0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5zdGFydHNXaXRoQW55T2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKCFzZXQuZXZlcnkoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHR5cGVvZiBzID09PSAnc3RyaW5nJzsgfSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBcInN0YXJ0c1dpdGhBbnlPZigpIG9ubHkgd29ya3Mgd2l0aCBzdHJpbmdzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNldC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluQW55UmFuZ2Uoc2V0Lm1hcChmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBbc3RyLCBzdHIgKyBtYXhTdHJpbmddOyB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBXaGVyZUNsYXVzZTtcbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlV2hlcmVDbGF1c2VDb25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoV2hlcmVDbGF1c2UucHJvdG90eXBlLCBmdW5jdGlvbiBXaGVyZUNsYXVzZSh0YWJsZSwgaW5kZXgsIG9yQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdGhpcy5fY3R4ID0ge1xuICAgICAgICAgICAgICAgIHRhYmxlOiB0YWJsZSxcbiAgICAgICAgICAgICAgICBpbmRleDogaW5kZXggPT09IFwiOmlkXCIgPyBudWxsIDogaW5kZXgsXG4gICAgICAgICAgICAgICAgb3I6IG9yQ29sbGVjdGlvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuX2NtcCA9IHRoaXMuX2FzY2VuZGluZyA9IGNtcDtcbiAgICAgICAgICAgIHRoaXMuX2Rlc2NlbmRpbmcgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gY21wKGIsIGEpOyB9O1xuICAgICAgICAgICAgdGhpcy5fbWF4ID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA+IDAgPyBhIDogYjsgfTtcbiAgICAgICAgICAgIHRoaXMuX21pbiA9IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBjbXAoYSwgYikgPCAwID8gYSA6IGI7IH07XG4gICAgICAgICAgICB0aGlzLl9JREJLZXlSYW5nZSA9IGRiLl9kZXBzLklEQktleVJhbmdlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9JREJLZXlSYW5nZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5NaXNzaW5nQVBJKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldmVudCk7XG4gICAgICAgICAgICByZWplY3QoZXZlbnQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KVxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICB2YXIgREVYSUVfU1RPUkFHRV9NVVRBVEVEX0VWRU5UX05BTUUgPSAnc3RvcmFnZW11dGF0ZWQnO1xuICAgIHZhciBTVE9SQUdFX01VVEFURURfRE9NX0VWRU5UX05BTUUgPSAneC1zdG9yYWdlbXV0YXRlZC0xJztcbiAgICB2YXIgZ2xvYmFsRXZlbnRzID0gRXZlbnRzKG51bGwsIERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FKTtcblxuICAgIHZhciBUcmFuc2FjdGlvbiA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBUcmFuc2FjdGlvbigpIHtcbiAgICAgICAgfVxuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuX2xvY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhc3NlcnQoIVBTRC5nbG9iYWwpO1xuICAgICAgICAgICAgKyt0aGlzLl9yZWN1bG9jaztcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZWN1bG9jayA9PT0gMSAmJiAhUFNELmdsb2JhbClcbiAgICAgICAgICAgICAgICBQU0QubG9ja093bmVyRm9yID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuX3VubG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFzc2VydCghUFNELmdsb2JhbCk7XG4gICAgICAgICAgICBpZiAoLS10aGlzLl9yZWN1bG9jayA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmICghUFNELmdsb2JhbClcbiAgICAgICAgICAgICAgICAgICAgUFNELmxvY2tPd25lckZvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuX2Jsb2NrZWRGdW5jcy5sZW5ndGggPiAwICYmICF0aGlzLl9sb2NrZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm5BbmRQU0QgPSB0aGlzLl9ibG9ja2VkRnVuY3Muc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZVBTRChmbkFuZFBTRFsxXSwgZm5BbmRQU0RbMF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLl9sb2NrZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjdWxvY2sgJiYgUFNELmxvY2tPd25lckZvciAhPT0gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpZGJ0cmFucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICghdGhpcy5tb2RlKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgdmFyIGlkYmRiID0gdGhpcy5kYi5pZGJkYjtcbiAgICAgICAgICAgIHZhciBkYk9wZW5FcnJvciA9IHRoaXMuZGIuX3N0YXRlLmRiT3BlbkVycm9yO1xuICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLmlkYnRyYW5zKTtcbiAgICAgICAgICAgIGlmICghaWRidHJhbnMgJiYgIWlkYmRiKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChkYk9wZW5FcnJvciAmJiBkYk9wZW5FcnJvci5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJEYXRhYmFzZUNsb3NlZEVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZChkYk9wZW5FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJNaXNzaW5nQVBJRXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoZGJPcGVuRXJyb3IubWVzc2FnZSwgZGJPcGVuRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuT3BlbkZhaWxlZChkYk9wZW5FcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5UcmFuc2FjdGlvbkluYWN0aXZlKCk7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5fY29tcGxldGlvbi5fc3RhdGUgPT09IG51bGwpO1xuICAgICAgICAgICAgaWRidHJhbnMgPSB0aGlzLmlkYnRyYW5zID0gaWRidHJhbnMgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5kYi5jb3JlXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5kYi5jb3JlLnRyYW5zYWN0aW9uKHRoaXMuc3RvcmVOYW1lcywgdGhpcy5tb2RlLCB7IGR1cmFiaWxpdHk6IHRoaXMuY2hyb21lVHJhbnNhY3Rpb25EdXJhYmlsaXR5IH0pXG4gICAgICAgICAgICAgICAgICAgIDogaWRiZGIudHJhbnNhY3Rpb24odGhpcy5zdG9yZU5hbWVzLCB0aGlzLm1vZGUsIHsgZHVyYWJpbGl0eTogdGhpcy5jaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHkgfSkpO1xuICAgICAgICAgICAgaWRidHJhbnMub25lcnJvciA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQoZXYpO1xuICAgICAgICAgICAgICAgIF90aGlzLl9yZWplY3QoaWRidHJhbnMuZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmFib3J0ID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlICYmIF90aGlzLl9yZWplY3QobmV3IGV4Y2VwdGlvbnMuQWJvcnQoaWRidHJhbnMuZXJyb3IpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbihcImFib3J0XCIpLmZpcmUoZXYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmNvbXBsZXRlID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Jlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoJ211dGF0ZWRQYXJ0cycgaW4gaWRidHJhbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRXZlbnRzLnN0b3JhZ2VtdXRhdGVkLmZpcmUoaWRidHJhbnNbXCJtdXRhdGVkUGFydHNcIl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5fcHJvbWlzZSA9IGZ1bmN0aW9uIChtb2RlLCBmbiwgYldyaXRlTG9jaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChtb2RlID09PSAncmVhZHdyaXRlJyAmJiB0aGlzLm1vZGUgIT09ICdyZWFkd3JpdGUnKVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuUmVhZE9ubHkoXCJUcmFuc2FjdGlvbiBpcyByZWFkb25seVwiKSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuVHJhbnNhY3Rpb25JbmFjdGl2ZSgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9sb2NrZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Jsb2NrZWRGdW5jcy5wdXNoKFtmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3Byb21pc2UobW9kZSwgZm4sIGJXcml0ZUxvY2spLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIFBTRF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYldyaXRlTG9jaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbG9jaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ2ID0gZm4ocmVzb2x2ZSwgcmVqZWN0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnYgJiYgcnYudGhlbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydi50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBwLmZpbmFsbHkoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX3VubG9jaygpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcC5fbGliID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBmbihyZXNvbHZlLCByZWplY3QsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ2ICYmIHJ2LnRoZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBydi50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcC5fbGliID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLl9yb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuX3Jvb3QoKSA6IHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS53YWl0Rm9yID0gZnVuY3Rpb24gKHByb21pc2VMaWtlKSB7XG4gICAgICAgICAgICB2YXIgcm9vdCA9IHRoaXMuX3Jvb3QoKTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gRGV4aWVQcm9taXNlLnJlc29sdmUocHJvbWlzZUxpa2UpO1xuICAgICAgICAgICAgaWYgKHJvb3QuX3dhaXRpbmdGb3IpIHtcbiAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nRm9yID0gcm9vdC5fd2FpdGluZ0Zvci50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb21pc2U7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcm9vdC5fd2FpdGluZ0ZvciA9IHByb21pc2U7XG4gICAgICAgICAgICAgICAgcm9vdC5fd2FpdGluZ1F1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gcm9vdC5pZGJ0cmFucy5vYmplY3RTdG9yZShyb290LnN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgICAgIChmdW5jdGlvbiBzcGluKCkge1xuICAgICAgICAgICAgICAgICAgICArK3Jvb3QuX3NwaW5Db3VudDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJvb3QuX3dhaXRpbmdRdWV1ZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAocm9vdC5fd2FpdGluZ1F1ZXVlLnNoaWZ0KCkpKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb290Ll93YWl0aW5nRm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuZ2V0KC1JbmZpbml0eSkub25zdWNjZXNzID0gc3BpbjtcbiAgICAgICAgICAgICAgICB9KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGN1cnJlbnRXYWl0UHJvbWlzZSA9IHJvb3QuX3dhaXRpbmdGb3I7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJvb3QuX3dhaXRpbmdRdWV1ZS5wdXNoKHdyYXAocmVzb2x2ZS5iaW5kKG51bGwsIHJlcykpKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcm9vdC5fd2FpdGluZ1F1ZXVlLnB1c2god3JhcChyZWplY3QuYmluZChudWxsLCBlcnIpKSk7IH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdC5fd2FpdGluZ0ZvciA9PT0gY3VycmVudFdhaXRQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nRm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaWRidHJhbnMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWRidHJhbnMuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QobmV3IGV4Y2VwdGlvbnMuQWJvcnQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS50YWJsZSA9IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBtZW1vaXplZFRhYmxlcyA9ICh0aGlzLl9tZW1vaXplZFRhYmxlcyB8fCAodGhpcy5fbWVtb2l6ZWRUYWJsZXMgPSB7fSkpO1xuICAgICAgICAgICAgaWYgKGhhc093bihtZW1vaXplZFRhYmxlcywgdGFibGVOYW1lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVtb2l6ZWRUYWJsZXNbdGFibGVOYW1lXTtcbiAgICAgICAgICAgIHZhciB0YWJsZVNjaGVtYSA9IHRoaXMuc2NoZW1hW3RhYmxlTmFtZV07XG4gICAgICAgICAgICBpZiAoIXRhYmxlU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTm90Rm91bmQoXCJUYWJsZSBcIiArIHRhYmxlTmFtZSArIFwiIG5vdCBwYXJ0IG9mIHRyYW5zYWN0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uQm91bmRUYWJsZSA9IG5ldyB0aGlzLmRiLlRhYmxlKHRhYmxlTmFtZSwgdGFibGVTY2hlbWEsIHRoaXMpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25Cb3VuZFRhYmxlLmNvcmUgPSB0aGlzLmRiLmNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgIG1lbW9pemVkVGFibGVzW3RhYmxlTmFtZV0gPSB0cmFuc2FjdGlvbkJvdW5kVGFibGU7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Cb3VuZFRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVHJhbnNhY3Rpb247XG4gICAgfSgpKTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRyYW5zYWN0aW9uQ29uc3RydWN0b3IoZGIpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VDbGFzc0NvbnN0cnVjdG9yKFRyYW5zYWN0aW9uLnByb3RvdHlwZSwgZnVuY3Rpb24gVHJhbnNhY3Rpb24obW9kZSwgc3RvcmVOYW1lcywgZGJzY2hlbWEsIGNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eSwgcGFyZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmVOYW1lcyA9IHN0b3JlTmFtZXM7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYSA9IGRic2NoZW1hO1xuICAgICAgICAgICAgdGhpcy5jaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHkgPSBjaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHk7XG4gICAgICAgICAgICB0aGlzLmlkYnRyYW5zID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub24gPSBFdmVudHModGhpcywgXCJjb21wbGV0ZVwiLCBcImVycm9yXCIsIFwiYWJvcnRcIik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudCB8fCBudWxsO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fcmVjdWxvY2sgPSAwO1xuICAgICAgICAgICAgdGhpcy5fYmxvY2tlZEZ1bmNzID0gW107XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl93YWl0aW5nRm9yID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3dhaXRpbmdRdWV1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9zcGluQ291bnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5fY29tcGxldGlvbiA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0aW9uLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uLmNvbXBsZXRlLmZpcmUoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdhc0FjdGl2ZSA9IF90aGlzLmFjdGl2ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbi5lcnJvci5maXJlKGUpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudCA/XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5fcmVqZWN0KGUpIDpcbiAgICAgICAgICAgICAgICAgICAgd2FzQWN0aXZlICYmIF90aGlzLmlkYnRyYW5zICYmIF90aGlzLmlkYnRyYW5zLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVJbmRleFNwZWMobmFtZSwga2V5UGF0aCwgdW5pcXVlLCBtdWx0aSwgYXV0bywgY29tcG91bmQsIGlzUHJpbUtleSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGtleVBhdGg6IGtleVBhdGgsXG4gICAgICAgICAgICB1bmlxdWU6IHVuaXF1ZSxcbiAgICAgICAgICAgIG11bHRpOiBtdWx0aSxcbiAgICAgICAgICAgIGF1dG86IGF1dG8sXG4gICAgICAgICAgICBjb21wb3VuZDogY29tcG91bmQsXG4gICAgICAgICAgICBzcmM6ICh1bmlxdWUgJiYgIWlzUHJpbUtleSA/ICcmJyA6ICcnKSArIChtdWx0aSA/ICcqJyA6ICcnKSArIChhdXRvID8gXCIrK1wiIDogXCJcIikgKyBuYW1lRnJvbUtleVBhdGgoa2V5UGF0aClcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbmFtZUZyb21LZXlQYXRoKGtleVBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICBrZXlQYXRoIDpcbiAgICAgICAgICAgIGtleVBhdGggPyAoJ1snICsgW10uam9pbi5jYWxsKGtleVBhdGgsICcrJykgKyAnXScpIDogXCJcIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZVNjaGVtYShuYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgcHJpbUtleTogcHJpbUtleSxcbiAgICAgICAgICAgIGluZGV4ZXM6IGluZGV4ZXMsXG4gICAgICAgICAgICBtYXBwZWRDbGFzczogbnVsbCxcbiAgICAgICAgICAgIGlkeEJ5TmFtZTogYXJyYXlUb09iamVjdChpbmRleGVzLCBmdW5jdGlvbiAoaW5kZXgpIHsgcmV0dXJuIFtpbmRleC5uYW1lLCBpbmRleF07IH0pXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2FmYXJpTXVsdGlTdG9yZUZpeChzdG9yZU5hbWVzKSB7XG4gICAgICAgIHJldHVybiBzdG9yZU5hbWVzLmxlbmd0aCA9PT0gMSA/IHN0b3JlTmFtZXNbMF0gOiBzdG9yZU5hbWVzO1xuICAgIH1cbiAgICB2YXIgZ2V0TWF4S2V5ID0gZnVuY3Rpb24gKElkYktleVJhbmdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBJZGJLZXlSYW5nZS5vbmx5KFtbXV0pO1xuICAgICAgICAgICAgZ2V0TWF4S2V5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1tdXTsgfTtcbiAgICAgICAgICAgIHJldHVybiBbW11dO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBnZXRNYXhLZXkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBtYXhTdHJpbmc7IH07XG4gICAgICAgICAgICByZXR1cm4gbWF4U3RyaW5nO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldEtleUV4dHJhY3RvcihrZXlQYXRoKSB7XG4gICAgICAgIGlmIChrZXlQYXRoID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQ7IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGtleVBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0U2luZ2xlUGF0aEtleUV4dHJhY3RvcihrZXlQYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoKTsgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRTaW5nbGVQYXRoS2V5RXh0cmFjdG9yKGtleVBhdGgpIHtcbiAgICAgICAgdmFyIHNwbGl0ID0ga2V5UGF0aC5zcGxpdCgnLicpO1xuICAgICAgICBpZiAoc3BsaXQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqW2tleVBhdGhdOyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIGdldEJ5S2V5UGF0aChvYmosIGtleVBhdGgpOyB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXJyYXlpZnkoYXJyYXlMaWtlKSB7XG4gICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGFycmF5TGlrZSk7XG4gICAgfVxuICAgIHZhciBfaWRfY291bnRlciA9IDA7XG4gICAgZnVuY3Rpb24gZ2V0S2V5UGF0aEFsaWFzKGtleVBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGtleVBhdGggPT0gbnVsbCA/XG4gICAgICAgICAgICBcIjppZFwiIDpcbiAgICAgICAgICAgIHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAga2V5UGF0aCA6XG4gICAgICAgICAgICAgICAgXCJbXCIuY29uY2F0KGtleVBhdGguam9pbignKycpLCBcIl1cIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZURCQ29yZShkYiwgSWRiS2V5UmFuZ2UsIHRtcFRyYW5zKSB7XG4gICAgICAgIGZ1bmN0aW9uIGV4dHJhY3RTY2hlbWEoZGIsIHRyYW5zKSB7XG4gICAgICAgICAgICB2YXIgdGFibGVzID0gYXJyYXlpZnkoZGIub2JqZWN0U3RvcmVOYW1lcyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBkYi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0YWJsZXM6IHRhYmxlcy5tYXAoZnVuY3Rpb24gKHRhYmxlKSB7IHJldHVybiB0cmFucy5vYmplY3RTdG9yZSh0YWJsZSk7IH0pLm1hcChmdW5jdGlvbiAoc3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoID0gc3RvcmUua2V5UGF0aCwgYXV0b0luY3JlbWVudCA9IHN0b3JlLmF1dG9JbmNyZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG91bmQgPSBpc0FycmF5KGtleVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG91dGJvdW5kID0ga2V5UGF0aCA9PSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4QnlLZXlQYXRoID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0b3JlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1ByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGJvdW5kOiBvdXRib3VuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG91bmQ6IGNvbXBvdW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBrZXlQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiBhdXRvSW5jcmVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RLZXk6IGdldEtleUV4dHJhY3RvcihrZXlQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhlczogYXJyYXlpZnkoc3RvcmUuaW5kZXhOYW1lcykubWFwKGZ1bmN0aW9uIChpbmRleE5hbWUpIHsgcmV0dXJuIHN0b3JlLmluZGV4KGluZGV4TmFtZSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gaW5kZXgubmFtZSwgdW5pcXVlID0gaW5kZXgudW5pcXVlLCBtdWx0aUVudHJ5ID0gaW5kZXgubXVsdGlFbnRyeSwga2V5UGF0aCA9IGluZGV4LmtleVBhdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21wb3VuZCA9IGlzQXJyYXkoa2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG91bmQ6IGNvbXBvdW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5UGF0aDoga2V5UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogdW5pcXVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlFbnRyeTogbXVsdGlFbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RLZXk6IGdldEtleUV4dHJhY3RvcihrZXlQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleEJ5S2V5UGF0aFtnZXRLZXlQYXRoQWxpYXMoa2V5UGF0aCldID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEluZGV4QnlLZXlQYXRoOiBmdW5jdGlvbiAoa2V5UGF0aCkgeyByZXR1cm4gaW5kZXhCeUtleVBhdGhbZ2V0S2V5UGF0aEFsaWFzKGtleVBhdGgpXTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4QnlLZXlQYXRoW1wiOmlkXCJdID0gcmVzdWx0LnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhCeUtleVBhdGhbZ2V0S2V5UGF0aEFsaWFzKGtleVBhdGgpXSA9IHJlc3VsdC5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhhc0dldEFsbDogdGFibGVzLmxlbmd0aCA+IDAgJiYgKCdnZXRBbGwnIGluIHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlc1swXSkpICYmXG4gICAgICAgICAgICAgICAgICAgICEodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgL1NhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIS8oQ2hyb21lXFwvfEVkZ2VcXC8pLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBbXS5jb25jYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvU2FmYXJpXFwvKFxcZCopLykpWzFdIDwgNjA0KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlSURCS2V5UmFuZ2UocmFuZ2UpIHtcbiAgICAgICAgICAgIGlmIChyYW5nZS50eXBlID09PSAzIClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmIChyYW5nZS50eXBlID09PSA0IClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY29udmVydCBuZXZlciB0eXBlIHRvIElEQktleVJhbmdlXCIpO1xuICAgICAgICAgICAgdmFyIGxvd2VyID0gcmFuZ2UubG93ZXIsIHVwcGVyID0gcmFuZ2UudXBwZXIsIGxvd2VyT3BlbiA9IHJhbmdlLmxvd2VyT3BlbiwgdXBwZXJPcGVuID0gcmFuZ2UudXBwZXJPcGVuO1xuICAgICAgICAgICAgdmFyIGlkYlJhbmdlID0gbG93ZXIgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgdXBwZXIgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgIG51bGwgOlxuICAgICAgICAgICAgICAgICAgICBJZGJLZXlSYW5nZS51cHBlckJvdW5kKHVwcGVyLCAhIXVwcGVyT3BlbikgOlxuICAgICAgICAgICAgICAgIHVwcGVyID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICBJZGJLZXlSYW5nZS5sb3dlckJvdW5kKGxvd2VyLCAhIWxvd2VyT3BlbikgOlxuICAgICAgICAgICAgICAgICAgICBJZGJLZXlSYW5nZS5ib3VuZChsb3dlciwgdXBwZXIsICEhbG93ZXJPcGVuLCAhIXVwcGVyT3Blbik7XG4gICAgICAgICAgICByZXR1cm4gaWRiUmFuZ2U7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRGJDb3JlVGFibGUodGFibGVTY2hlbWEpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZU5hbWUgPSB0YWJsZVNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgZnVuY3Rpb24gbXV0YXRlKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gX2EudHJhbnMsIHR5cGUgPSBfYS50eXBlLCBrZXlzID0gX2Eua2V5cywgdmFsdWVzID0gX2EudmFsdWVzLCByYW5nZSA9IF9hLnJhbmdlO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSB3cmFwKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0Ym91bmQgPSBzdG9yZS5rZXlQYXRoID09IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0FkZE9yUHV0ID0gdHlwZSA9PT0gXCJwdXRcIiB8fCB0eXBlID09PSBcImFkZFwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQWRkT3JQdXQgJiYgdHlwZSAhPT0gJ2RlbGV0ZScgJiYgdHlwZSAhPT0gJ2RlbGV0ZVJhbmdlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3BlcmF0aW9uIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSAoa2V5cyB8fCB2YWx1ZXMgfHwgeyBsZW5ndGg6IDEgfSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5cyAmJiB2YWx1ZXMgJiYga2V5cy5sZW5ndGggIT09IHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdpdmVuIGtleXMgYXJyYXkgbXVzdCBoYXZlIHNhbWUgbGVuZ3RoIGFzIGdpdmVuIHZhbHVlcyBhcnJheS5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgbnVtRmFpbHVyZXM6IDAsIGZhaWx1cmVzOiB7fSwgcmVzdWx0czogW10sIGxhc3RSZXN1bHQ6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1GYWlsdXJlcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrbnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnZGVsZXRlUmFuZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UudHlwZSA9PT0gNCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyBudW1GYWlsdXJlczogbnVtRmFpbHVyZXMsIGZhaWx1cmVzOiBmYWlsdXJlcywgcmVzdWx0czogW10sIGxhc3RSZXN1bHQ6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS50eXBlID09PSAzIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXFzLnB1c2gocmVxID0gc3RvcmUuY2xlYXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5wdXNoKHJlcSA9IHN0b3JlLmRlbGV0ZShtYWtlSURCS2V5UmFuZ2UocmFuZ2UpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EgPSBpc0FkZE9yUHV0ID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRib3VuZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZXMsIGtleXNdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3ZhbHVlcywgbnVsbF0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtrZXlzLCBudWxsXSwgYXJnczEgPSBfYVswXSwgYXJnczIgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FkZE9yUHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXFzLnB1c2gocmVxID0gKGFyZ3MyICYmIGFyZ3MyW2ldICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVbdHlwZV0oYXJnczFbaV0sIGFyZ3MyW2ldKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVt0eXBlXShhcmdzMVtpXSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBlcnJvckhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXFzLnB1c2gocmVxID0gc3RvcmVbdHlwZV0oYXJnczFbaV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBlcnJvckhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBkb25lID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFJlc3VsdCA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXFzLmZvckVhY2goZnVuY3Rpb24gKHJlcSwgaSkgeyByZXR1cm4gcmVxLmVycm9yICE9IG51bGwgJiYgKGZhaWx1cmVzW2ldID0gcmVxLmVycm9yKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1GYWlsdXJlczogbnVtRmFpbHVyZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXM6IGZhaWx1cmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IHR5cGUgPT09IFwiZGVsZXRlXCIgPyBrZXlzIDogcmVxcy5tYXAoZnVuY3Rpb24gKHJlcSkgeyByZXR1cm4gcmVxLnJlc3VsdDsgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJlc3VsdDogbGFzdFJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBkb25lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gb3BlbkN1cnNvcihfYSkge1xuICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IF9hLnRyYW5zLCB2YWx1ZXMgPSBfYS52YWx1ZXMsIHF1ZXJ5ID0gX2EucXVlcnksIHJldmVyc2UgPSBfYS5yZXZlcnNlLCB1bmlxdWUgPSBfYS51bmlxdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IHdyYXAocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHF1ZXJ5LmluZGV4LCByYW5nZSA9IHF1ZXJ5LnJhbmdlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaW5kZXguaXNQcmltYXJ5S2V5ID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmluZGV4KGluZGV4Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gcmV2ZXJzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHJldnVuaXF1ZVwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZXZcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmV4dHVuaXF1ZVwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5leHRcIjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IHZhbHVlcyB8fCAhKCdvcGVuS2V5Q3Vyc29yJyBpbiBzb3VyY2UpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5vcGVuQ3Vyc29yKG1ha2VJREJLZXlSYW5nZShyYW5nZSksIGRpcmVjdGlvbikgOlxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLm9wZW5LZXlDdXJzb3IobWFrZUlEQktleVJhbmdlKHJhbmdlKSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuX19faWQgPSArK19pZF9jb3VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY3Vyc29yQ29udGludWUgPSBjdXJzb3IuY29udGludWUuYmluZChjdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jdXJzb3JDb250aW51ZVByaW1hcnlLZXkgPSBjdXJzb3IuY29udGludWVQcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9jdXJzb3JDb250aW51ZVByaW1hcnlLZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2N1cnNvckNvbnRpbnVlUHJpbWFyeUtleSA9IF9jdXJzb3JDb250aW51ZVByaW1hcnlLZXkuYmluZChjdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jdXJzb3JBZHZhbmNlID0gY3Vyc29yLmFkdmFuY2UuYmluZChjdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvVGhyb3dDdXJzb3JJc05vdFN0YXJ0ZWQgPSBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIkN1cnNvciBub3Qgc3RhcnRlZFwiKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb1Rocm93Q3Vyc29ySXNTdG9wcGVkID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJDdXJzb3Igbm90IHN0b3BwZWRcIik7IH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IudHJhbnMgPSB0cmFucztcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5zdG9wID0gY3Vyc29yLmNvbnRpbnVlID0gY3Vyc29yLmNvbnRpbnVlUHJpbWFyeUtleSA9IGN1cnNvci5hZHZhbmNlID0gZG9UaHJvd0N1cnNvcklzTm90U3RhcnRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5mYWlsID0gd3JhcChyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ290T25lID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydChmdW5jdGlvbiAoKSB7IHJldHVybiBnb3RPbmUtLSA/IF90aGlzLmNvbnRpbnVlKCkgOiBfdGhpcy5zdG9wKCk7IH0pLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXM7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5zdGFydCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVyYXRpb25Qcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmVJdGVyYXRpb24sIHJlamVjdEl0ZXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlSXRlcmF0aW9uID0gd3JhcChyZXNvbHZlSXRlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0SXRlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmZhaWwgPSByZWplY3RJdGVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5zdG9wID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RvcCA9IGN1cnNvci5jb250aW51ZSA9IGN1cnNvci5jb250aW51ZVByaW1hcnlLZXkgPSBjdXJzb3IuYWR2YW5jZSA9IGRvVGhyb3dDdXJzb3JJc1N0b3BwZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlSXRlcmF0aW9uKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3VhcmRlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5mYWlsKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RhcnQgPSBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIkN1cnNvciBiZWhpbmQgbGFzdCBlbnRyeVwiKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZ3VhcmRlZENhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUgPSBfY3Vyc29yQ29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlUHJpbWFyeUtleSA9IF9jdXJzb3JDb250aW51ZVByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmFkdmFuY2UgPSBfY3Vyc29yQWR2YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlcmF0aW9uUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGN1cnNvcik7XG4gICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBxdWVyeShoYXNHZXRBbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSB3cmFwKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gcmVxdWVzdC50cmFucywgdmFsdWVzID0gcmVxdWVzdC52YWx1ZXMsIGxpbWl0ID0gcmVxdWVzdC5saW1pdCwgcXVlcnkgPSByZXF1ZXN0LnF1ZXJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vbkluZmluaXRMaW1pdCA9IGxpbWl0ID09PSBJbmZpbml0eSA/IHVuZGVmaW5lZCA6IGxpbWl0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcXVlcnkuaW5kZXgsIHJhbmdlID0gcXVlcnkucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGluZGV4LmlzUHJpbWFyeUtleSA/IHN0b3JlIDogc3RvcmUuaW5kZXgoaW5kZXgubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRiS2V5UmFuZ2UgPSBtYWtlSURCS2V5UmFuZ2UocmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbWl0ID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgcmVzdWx0OiBbXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNHZXRBbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gdmFsdWVzID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLmdldEFsbChpZGJLZXlSYW5nZSwgbm9uSW5maW5pdExpbWl0KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRBbGxLZXlzKGlkYktleVJhbmdlLCBub25JbmZpbml0TGltaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIHJlc29sdmUoeyByZXN1bHQ6IGV2ZW50LnRhcmdldC5yZXN1bHQgfSk7IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudF8xID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxXzEgPSB2YWx1ZXMgfHwgISgnb3BlbktleUN1cnNvcicgaW4gc291cmNlKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5vcGVuQ3Vyc29yKGlkYktleVJhbmdlKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5vcGVuS2V5Q3Vyc29yKGlkYktleVJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXFfMS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJlcV8xLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHJlc3VsdDogcmVzdWx0XzEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdF8xLnB1c2godmFsdWVzID8gY3Vyc29yLnZhbHVlIDogY3Vyc29yLnByaW1hcnlLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKytjb3VudF8xID09PSBsaW1pdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgcmVzdWx0OiByZXN1bHRfMSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXFfMS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHRhYmxlU2NoZW1hLFxuICAgICAgICAgICAgICAgIG11dGF0ZTogbXV0YXRlLFxuICAgICAgICAgICAgICAgIGdldE1hbnk6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSBfYS50cmFucywga2V5cyA9IF9hLmtleXM7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gd3JhcChyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5Q291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyZXN1bHRbcmVxLl9wb3NdID0gcmVxLnJlc3VsdCkgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgrK2NhbGxiYWNrQ291bnQgPT09IGtleUNvdW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxlciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEgPSBzdG9yZS5nZXQoa2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5fcG9zID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHN1Y2Nlc3NIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGVycm9ySGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKytrZXlDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5Q291bnQgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IF9hLnRyYW5zLCBrZXkgPSBfYS5rZXk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gd3JhcChyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiByZXNvbHZlKGV2ZW50LnRhcmdldC5yZXN1bHQpOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnkoaGFzR2V0QWxsKSxcbiAgICAgICAgICAgICAgICBvcGVuQ3Vyc29yOiBvcGVuQ3Vyc29yLFxuICAgICAgICAgICAgICAgIGNvdW50OiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gX2EucXVlcnksIHRyYW5zID0gX2EudHJhbnM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHF1ZXJ5LmluZGV4LCByYW5nZSA9IHF1ZXJ5LnJhbmdlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBpbmRleC5pc1ByaW1hcnlLZXkgPyBzdG9yZSA6IHN0b3JlLmluZGV4KGluZGV4Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkYktleVJhbmdlID0gbWFrZUlEQktleVJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBpZGJLZXlSYW5nZSA/IHNvdXJjZS5jb3VudChpZGJLZXlSYW5nZSkgOiBzb3VyY2UuY291bnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uIChldikgeyByZXR1cm4gcmVzb2x2ZShldi50YXJnZXQucmVzdWx0KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IGV4dHJhY3RTY2hlbWEoZGIsIHRtcFRyYW5zKSwgc2NoZW1hID0gX2Euc2NoZW1hLCBoYXNHZXRBbGwgPSBfYS5oYXNHZXRBbGw7XG4gICAgICAgIHZhciB0YWJsZXMgPSBzY2hlbWEudGFibGVzLm1hcChmdW5jdGlvbiAodGFibGVTY2hlbWEpIHsgcmV0dXJuIGNyZWF0ZURiQ29yZVRhYmxlKHRhYmxlU2NoZW1hKTsgfSk7XG4gICAgICAgIHZhciB0YWJsZU1hcCA9IHt9O1xuICAgICAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbiAodGFibGUpIHsgcmV0dXJuIHRhYmxlTWFwW3RhYmxlLm5hbWVdID0gdGFibGU7IH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhY2s6IFwiZGJjb3JlXCIsXG4gICAgICAgICAgICB0cmFuc2FjdGlvbjogZGIudHJhbnNhY3Rpb24uYmluZChkYiksXG4gICAgICAgICAgICB0YWJsZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGFibGVNYXBbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRhYmxlICdcIi5jb25jYXQobmFtZSwgXCInIG5vdCBmb3VuZFwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlTWFwW25hbWVdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIE1JTl9LRVk6IC1JbmZpbml0eSxcbiAgICAgICAgICAgIE1BWF9LRVk6IGdldE1heEtleShJZGJLZXlSYW5nZSksXG4gICAgICAgICAgICBzY2hlbWE6IHNjaGVtYVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pZGRsZXdhcmVTdGFjayhzdGFja0ltcGwsIG1pZGRsZXdhcmVzKSB7XG4gICAgICAgIHJldHVybiBtaWRkbGV3YXJlcy5yZWR1Y2UoZnVuY3Rpb24gKGRvd24sIF9hKSB7XG4gICAgICAgICAgICB2YXIgY3JlYXRlID0gX2EuY3JlYXRlO1xuICAgICAgICAgICAgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZG93biksIGNyZWF0ZShkb3duKSkpO1xuICAgICAgICB9LCBzdGFja0ltcGwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVNaWRkbGV3YXJlU3RhY2tzKG1pZGRsZXdhcmVzLCBpZGJkYiwgX2EsIHRtcFRyYW5zKSB7XG4gICAgICAgIHZhciBJREJLZXlSYW5nZSA9IF9hLklEQktleVJhbmdlOyBfYS5pbmRleGVkREI7XG4gICAgICAgIHZhciBkYmNvcmUgPSBjcmVhdGVNaWRkbGV3YXJlU3RhY2soY3JlYXRlREJDb3JlKGlkYmRiLCBJREJLZXlSYW5nZSwgdG1wVHJhbnMpLCBtaWRkbGV3YXJlcy5kYmNvcmUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGJjb3JlOiBkYmNvcmVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLCB0bXBUcmFucykge1xuICAgICAgICB2YXIgaWRiZGIgPSB0bXBUcmFucy5kYjtcbiAgICAgICAgdmFyIHN0YWNrcyA9IGNyZWF0ZU1pZGRsZXdhcmVTdGFja3MoZGIuX21pZGRsZXdhcmVzLCBpZGJkYiwgZGIuX2RlcHMsIHRtcFRyYW5zKTtcbiAgICAgICAgZGIuY29yZSA9IHN0YWNrcy5kYmNvcmU7XG4gICAgICAgIGRiLnRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdmFyIHRhYmxlTmFtZSA9IHRhYmxlLm5hbWU7XG4gICAgICAgICAgICBpZiAoZGIuY29yZS5zY2hlbWEudGFibGVzLnNvbWUoZnVuY3Rpb24gKHRibCkgeyByZXR1cm4gdGJsLm5hbWUgPT09IHRhYmxlTmFtZTsgfSkpIHtcbiAgICAgICAgICAgICAgICB0YWJsZS5jb3JlID0gZGIuY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChkYlt0YWJsZU5hbWVdIGluc3RhbmNlb2YgZGIuVGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGJbdGFibGVOYW1lXS5jb3JlID0gdGFibGUuY29yZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEFwaU9uUGxhY2UoZGIsIG9ianMsIHRhYmxlTmFtZXMsIGRic2NoZW1hKSB7XG4gICAgICAgIHRhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgc2NoZW1hID0gZGJzY2hlbWFbdGFibGVOYW1lXTtcbiAgICAgICAgICAgIG9ianMuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3BEZXNjID0gZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgdGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoIXByb3BEZXNjIHx8IChcInZhbHVlXCIgaW4gcHJvcERlc2MgJiYgcHJvcERlc2MudmFsdWUgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iaiA9PT0gZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlIHx8IG9iaiBpbnN0YW5jZW9mIGRiLlRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcm9wKG9iaiwgdGFibGVOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnRhYmxlKHRhYmxlTmFtZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lUHJvcGVydHkodGhpcywgdGFibGVOYW1lLCB7IHZhbHVlOiB2YWx1ZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialt0YWJsZU5hbWVdID0gbmV3IGRiLlRhYmxlKHRhYmxlTmFtZSwgc2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVGFibGVzQXBpKGRiLCBvYmpzKSB7XG4gICAgICAgIG9ianMuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9ialtrZXldIGluc3RhbmNlb2YgZGIuVGFibGUpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxvd2VyVmVyc2lvbkZpcnN0KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEuX2NmZy52ZXJzaW9uIC0gYi5fY2ZnLnZlcnNpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJ1blVwZ3JhZGVycyhkYiwgb2xkVmVyc2lvbiwgaWRiVXBncmFkZVRyYW5zLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGdsb2JhbFNjaGVtYSA9IGRiLl9kYlNjaGVtYTtcbiAgICAgICAgaWYgKGlkYlVwZ3JhZGVUcmFucy5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCckbWV0YScpICYmICFnbG9iYWxTY2hlbWEuJG1ldGEpIHtcbiAgICAgICAgICAgIGdsb2JhbFNjaGVtYS4kbWV0YSA9IGNyZWF0ZVRhYmxlU2NoZW1hKFwiJG1ldGFcIiwgcGFyc2VJbmRleFN5bnRheChcIlwiKVswXSwgW10pO1xuICAgICAgICAgICAgZGIuX3N0b3JlTmFtZXMucHVzaCgnJG1ldGEnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhbnMgPSBkYi5fY3JlYXRlVHJhbnNhY3Rpb24oJ3JlYWR3cml0ZScsIGRiLl9zdG9yZU5hbWVzLCBnbG9iYWxTY2hlbWEpO1xuICAgICAgICB0cmFucy5jcmVhdGUoaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgdHJhbnMuX2NvbXBsZXRpb24uY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgdmFyIHJlamVjdFRyYW5zYWN0aW9uID0gdHJhbnMuX3JlamVjdC5iaW5kKHRyYW5zKTtcbiAgICAgICAgdmFyIHRyYW5zbGVzcyA9IFBTRC50cmFuc2xlc3MgfHwgUFNEO1xuICAgICAgICBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBQU0QudHJhbnMgPSB0cmFucztcbiAgICAgICAgICAgIFBTRC50cmFuc2xlc3MgPSB0cmFuc2xlc3M7XG4gICAgICAgICAgICBpZiAob2xkVmVyc2lvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGtleXMoZ2xvYmFsU2NoZW1hKS5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFibGUoaWRiVXBncmFkZVRyYW5zLCB0YWJsZU5hbWUsIGdsb2JhbFNjaGVtYVt0YWJsZU5hbWVdLnByaW1LZXksIGdsb2JhbFNjaGVtYVt0YWJsZU5hbWVdLmluZGV4ZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdlbmVyYXRlTWlkZGxld2FyZVN0YWNrcyhkYiwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgICAgICAgICBEZXhpZVByb21pc2UuZm9sbG93KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRiLm9uLnBvcHVsYXRlLmZpcmUodHJhbnMpOyB9KS5jYXRjaChyZWplY3RUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZU1pZGRsZXdhcmVTdGFja3MoZGIsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEV4aXN0aW5nVmVyc2lvbihkYiwgdHJhbnMsIG9sZFZlcnNpb24pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChvbGRWZXJzaW9uKSB7IHJldHVybiB1cGRhdGVUYWJsZXNBbmRJbmRleGVzKGRiLCBvbGRWZXJzaW9uLCB0cmFucywgaWRiVXBncmFkZVRyYW5zKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKHJlamVjdFRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhdGNoQ3VycmVudFZlcnNpb24oZGIsIGlkYlVwZ3JhZGVUcmFucykge1xuICAgICAgICBjcmVhdGVNaXNzaW5nVGFibGVzKGRiLl9kYlNjaGVtYSwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgaWYgKGlkYlVwZ3JhZGVUcmFucy5kYi52ZXJzaW9uICUgMTAgPT09IDAgJiYgIWlkYlVwZ3JhZGVUcmFucy5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCckbWV0YScpKSB7XG4gICAgICAgICAgICBpZGJVcGdyYWRlVHJhbnMuZGIuY3JlYXRlT2JqZWN0U3RvcmUoJyRtZXRhJykuYWRkKE1hdGguY2VpbCgoaWRiVXBncmFkZVRyYW5zLmRiLnZlcnNpb24gLyAxMCkgLSAxKSwgJ3ZlcnNpb24nKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZ2xvYmFsU2NoZW1hID0gYnVpbGRHbG9iYWxTY2hlbWEoZGIsIGRiLmlkYmRiLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhkYiwgZGIuX2RiU2NoZW1hLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICB2YXIgZGlmZiA9IGdldFNjaGVtYURpZmYoZ2xvYmFsU2NoZW1hLCBkYi5fZGJTY2hlbWEpO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uICh0YWJsZUNoYW5nZSkge1xuICAgICAgICAgICAgaWYgKHRhYmxlQ2hhbmdlLmNoYW5nZS5sZW5ndGggfHwgdGFibGVDaGFuZ2UucmVjcmVhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gcGF0Y2ggaW5kZXhlcyBvZiB0YWJsZSBcIi5jb25jYXQodGFibGVDaGFuZ2UubmFtZSwgXCIgYmVjYXVzZSBpdCBoYXMgY2hhbmdlcyBvbiB0aGUgdHlwZSBvZiBpbmRleCBvciBwcmltYXJ5IGtleS5cIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2b2lkIDAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGlkYlVwZ3JhZGVUcmFucy5vYmplY3RTdG9yZSh0YWJsZUNoYW5nZS5uYW1lKTtcbiAgICAgICAgICAgIHRhYmxlQ2hhbmdlLmFkZC5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVidWcpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJEZXhpZSB1cGdyYWRlIHBhdGNoOiBDcmVhdGluZyBtaXNzaW5nIGluZGV4IFwiLmNvbmNhdCh0YWJsZUNoYW5nZS5uYW1lLCBcIi5cIikuY29uY2F0KGlkeC5zcmMpKTtcbiAgICAgICAgICAgICAgICBhZGRJbmRleChzdG9yZSwgaWR4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZGlmZi5jaGFuZ2U7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGFibGVDaGFuZ2UgPSBfYVtfaV07XG4gICAgICAgICAgICB2YXIgc3RhdGVfMSA9IF9sb29wXzEodGFibGVDaGFuZ2UpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZV8xID09PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZV8xLnZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEV4aXN0aW5nVmVyc2lvbihkYiwgdHJhbnMsIG9sZFZlcnNpb24pIHtcbiAgICAgICAgaWYgKHRyYW5zLnN0b3JlTmFtZXMuaW5jbHVkZXMoJyRtZXRhJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmFucy50YWJsZSgnJG1ldGEnKS5nZXQoJ3ZlcnNpb24nKS50aGVuKGZ1bmN0aW9uIChtZXRhVmVyc2lvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhVmVyc2lvbiAhPSBudWxsID8gbWV0YVZlcnNpb24gOiBvbGRWZXJzaW9uO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUob2xkVmVyc2lvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlVGFibGVzQW5kSW5kZXhlcyhkYiwgb2xkVmVyc2lvbiwgdHJhbnMsIGlkYlVwZ3JhZGVUcmFucykge1xuICAgICAgICB2YXIgcXVldWUgPSBbXTtcbiAgICAgICAgdmFyIHZlcnNpb25zID0gZGIuX3ZlcnNpb25zO1xuICAgICAgICB2YXIgZ2xvYmFsU2NoZW1hID0gZGIuX2RiU2NoZW1hID0gYnVpbGRHbG9iYWxTY2hlbWEoZGIsIGRiLmlkYmRiLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICB2YXIgdmVyc1RvUnVuID0gdmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2Ll9jZmcudmVyc2lvbiA+PSBvbGRWZXJzaW9uOyB9KTtcbiAgICAgICAgaWYgKHZlcnNUb1J1bi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZlcnNUb1J1bi5mb3JFYWNoKGZ1bmN0aW9uICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkU2NoZW1hID0gZ2xvYmFsU2NoZW1hO1xuICAgICAgICAgICAgICAgIHZhciBuZXdTY2hlbWEgPSB2ZXJzaW9uLl9jZmcuZGJzY2hlbWE7XG4gICAgICAgICAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoZGIsIG9sZFNjaGVtYSwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgICAgICAgICBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhkYiwgbmV3U2NoZW1hLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICAgICAgICAgIGdsb2JhbFNjaGVtYSA9IGRiLl9kYlNjaGVtYSA9IG5ld1NjaGVtYTtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IGdldFNjaGVtYURpZmYob2xkU2NoZW1hLCBuZXdTY2hlbWEpO1xuICAgICAgICAgICAgICAgIGRpZmYuYWRkLmZvckVhY2goZnVuY3Rpb24gKHR1cGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRhYmxlKGlkYlVwZ3JhZGVUcmFucywgdHVwbGVbMF0sIHR1cGxlWzFdLnByaW1LZXksIHR1cGxlWzFdLmluZGV4ZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRpZmYuY2hhbmdlLmZvckVhY2goZnVuY3Rpb24gKGNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlLnJlY3JlYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5VcGdyYWRlKFwiTm90IHlldCBzdXBwb3J0IGZvciBjaGFuZ2luZyBwcmltYXJ5IGtleVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZV8xID0gaWRiVXBncmFkZVRyYW5zLm9iamVjdFN0b3JlKGNoYW5nZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5hZGQuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7IHJldHVybiBhZGRJbmRleChzdG9yZV8xLCBpZHgpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5jaGFuZ2UuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVfMS5kZWxldGVJbmRleChpZHgubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkSW5kZXgoc3RvcmVfMSwgaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmRlbC5mb3JFYWNoKGZ1bmN0aW9uIChpZHhOYW1lKSB7IHJldHVybiBzdG9yZV8xLmRlbGV0ZUluZGV4KGlkeE5hbWUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50VXBncmFkZSA9IHZlcnNpb24uX2NmZy5jb250ZW50VXBncmFkZTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudFVwZ3JhZGUgJiYgdmVyc2lvbi5fY2ZnLnZlcnNpb24gPiBvbGRWZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlTWlkZGxld2FyZVN0YWNrcyhkYiwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnMuX21lbW9pemVkVGFibGVzID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGdyYWRlU2NoZW1hXzEgPSBzaGFsbG93Q2xvbmUobmV3U2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgZGlmZi5kZWwuZm9yRWFjaChmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVTY2hlbWFfMVt0YWJsZV0gPSBvbGRTY2hlbWFbdGFibGVdO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVGFibGVzQXBpKGRiLCBbZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgIHNldEFwaU9uUGxhY2UoZGIsIFtkYi5UcmFuc2FjdGlvbi5wcm90b3R5cGVdLCBrZXlzKHVwZ3JhZGVTY2hlbWFfMSksIHVwZ3JhZGVTY2hlbWFfMSk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zLnNjaGVtYSA9IHVwZ3JhZGVTY2hlbWFfMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRVcGdyYWRlSXNBc3luY18xID0gaXNBc3luY0Z1bmN0aW9uKGNvbnRlbnRVcGdyYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRVcGdyYWRlSXNBc3luY18xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZV8xO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZUZvbGxvd2VkID0gRGV4aWVQcm9taXNlLmZvbGxvdyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZV8xID0gY29udGVudFVwZ3JhZGUodHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudFVwZ3JhZGVJc0FzeW5jXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlY3JlbWVudG9yID0gZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMuYmluZChudWxsLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWVfMS50aGVuKGRlY3JlbWVudG9yLCBkZWNyZW1lbnRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyZXR1cm5WYWx1ZV8xICYmIHR5cGVvZiByZXR1cm5WYWx1ZV8xLnRoZW4gPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgICAgICAgICAgICAgRGV4aWVQcm9taXNlLnJlc29sdmUocmV0dXJuVmFsdWVfMSkgOiBwcm9taXNlRm9sbG93ZWQudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiByZXR1cm5WYWx1ZV8xOyB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGZ1bmN0aW9uIChpZGJ0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBuZXdTY2hlbWEgPSB2ZXJzaW9uLl9jZmcuZGJzY2hlbWE7XG4gICAgICAgICAgICAgICAgZGVsZXRlUmVtb3ZlZFRhYmxlcyhuZXdTY2hlbWEsIGlkYnRyYW5zKTtcbiAgICAgICAgICAgICAgICByZW1vdmVUYWJsZXNBcGkoZGIsIFtkYi5UcmFuc2FjdGlvbi5wcm90b3R5cGVdKTtcbiAgICAgICAgICAgICAgICBzZXRBcGlPblBsYWNlKGRiLCBbZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlXSwgZGIuX3N0b3JlTmFtZXMsIGRiLl9kYlNjaGVtYSk7XG4gICAgICAgICAgICAgICAgdHJhbnMuc2NoZW1hID0gZGIuX2RiU2NoZW1hO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGZ1bmN0aW9uIChpZGJ0cmFucykge1xuICAgICAgICAgICAgICAgIGlmIChkYi5pZGJkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCckbWV0YScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmNlaWwoZGIuaWRiZGIudmVyc2lvbiAvIDEwKSA9PT0gdmVyc2lvbi5fY2ZnLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmlkYmRiLmRlbGV0ZU9iamVjdFN0b3JlKCckbWV0YScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRiLl9kYlNjaGVtYS4kbWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLl9zdG9yZU5hbWVzID0gZGIuX3N0b3JlTmFtZXMuZmlsdGVyKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBuYW1lICE9PSAnJG1ldGEnOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkYnRyYW5zLm9iamVjdFN0b3JlKCckbWV0YScpLnB1dCh2ZXJzaW9uLl9jZmcudmVyc2lvbiwgJ3ZlcnNpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gcnVuUXVldWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcXVldWUubGVuZ3RoID8gRGV4aWVQcm9taXNlLnJlc29sdmUocXVldWUuc2hpZnQoKSh0cmFucy5pZGJ0cmFucykpLnRoZW4ocnVuUXVldWUpIDpcbiAgICAgICAgICAgICAgICBEZXhpZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5RdWV1ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3JlYXRlTWlzc2luZ1RhYmxlcyhnbG9iYWxTY2hlbWEsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRTY2hlbWFEaWZmKG9sZFNjaGVtYSwgbmV3U2NoZW1hKSB7XG4gICAgICAgIHZhciBkaWZmID0ge1xuICAgICAgICAgICAgZGVsOiBbXSxcbiAgICAgICAgICAgIGFkZDogW10sXG4gICAgICAgICAgICBjaGFuZ2U6IFtdXG4gICAgICAgIH07XG4gICAgICAgIHZhciB0YWJsZTtcbiAgICAgICAgZm9yICh0YWJsZSBpbiBvbGRTY2hlbWEpIHtcbiAgICAgICAgICAgIGlmICghbmV3U2NoZW1hW3RhYmxlXSlcbiAgICAgICAgICAgICAgICBkaWZmLmRlbC5wdXNoKHRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHRhYmxlIGluIG5ld1NjaGVtYSkge1xuICAgICAgICAgICAgdmFyIG9sZERlZiA9IG9sZFNjaGVtYVt0YWJsZV0sIG5ld0RlZiA9IG5ld1NjaGVtYVt0YWJsZV07XG4gICAgICAgICAgICBpZiAoIW9sZERlZikge1xuICAgICAgICAgICAgICAgIGRpZmYuYWRkLnB1c2goW3RhYmxlLCBuZXdEZWZdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRhYmxlLFxuICAgICAgICAgICAgICAgICAgICBkZWY6IG5ld0RlZixcbiAgICAgICAgICAgICAgICAgICAgcmVjcmVhdGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBkZWw6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhZGQ6IFtdLFxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoKFxuICAgICAgICAgICAgICAgICcnICsgKG9sZERlZi5wcmltS2V5LmtleVBhdGggfHwgJycpKSAhPT0gKCcnICsgKG5ld0RlZi5wcmltS2V5LmtleVBhdGggfHwgJycpKSB8fFxuICAgICAgICAgICAgICAgICAgICAob2xkRGVmLnByaW1LZXkuYXV0byAhPT0gbmV3RGVmLnByaW1LZXkuYXV0bykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlLnJlY3JlYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGlmZi5jaGFuZ2UucHVzaChjaGFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEluZGV4ZXMgPSBvbGREZWYuaWR4QnlOYW1lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SW5kZXhlcyA9IG5ld0RlZi5pZHhCeU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHhOYW1lID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGlkeE5hbWUgaW4gb2xkSW5kZXhlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdJbmRleGVzW2lkeE5hbWVdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5kZWwucHVzaChpZHhOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGlkeE5hbWUgaW4gbmV3SW5kZXhlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZElkeCA9IG9sZEluZGV4ZXNbaWR4TmFtZV0sIG5ld0lkeCA9IG5ld0luZGV4ZXNbaWR4TmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9sZElkeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuYWRkLnB1c2gobmV3SWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9sZElkeC5zcmMgIT09IG5ld0lkeC5zcmMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmNoYW5nZS5wdXNoKG5ld0lkeCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZS5kZWwubGVuZ3RoID4gMCB8fCBjaGFuZ2UuYWRkLmxlbmd0aCA+IDAgfHwgY2hhbmdlLmNoYW5nZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmLmNoYW5nZS5wdXNoKGNoYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpZmY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRhYmxlKGlkYnRyYW5zLCB0YWJsZU5hbWUsIHByaW1LZXksIGluZGV4ZXMpIHtcbiAgICAgICAgdmFyIHN0b3JlID0gaWRidHJhbnMuZGIuY3JlYXRlT2JqZWN0U3RvcmUodGFibGVOYW1lLCBwcmltS2V5LmtleVBhdGggP1xuICAgICAgICAgICAgeyBrZXlQYXRoOiBwcmltS2V5LmtleVBhdGgsIGF1dG9JbmNyZW1lbnQ6IHByaW1LZXkuYXV0byB9IDpcbiAgICAgICAgICAgIHsgYXV0b0luY3JlbWVudDogcHJpbUtleS5hdXRvIH0pO1xuICAgICAgICBpbmRleGVzLmZvckVhY2goZnVuY3Rpb24gKGlkeCkgeyByZXR1cm4gYWRkSW5kZXgoc3RvcmUsIGlkeCk7IH0pO1xuICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pc3NpbmdUYWJsZXMobmV3U2NoZW1hLCBpZGJ0cmFucykge1xuICAgICAgICBrZXlzKG5ld1NjaGVtYSkuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnModGFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIGlmIChkZWJ1ZylcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnRGV4aWU6IENyZWF0aW5nIG1pc3NpbmcgdGFibGUnLCB0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgIGNyZWF0ZVRhYmxlKGlkYnRyYW5zLCB0YWJsZU5hbWUsIG5ld1NjaGVtYVt0YWJsZU5hbWVdLnByaW1LZXksIG5ld1NjaGVtYVt0YWJsZU5hbWVdLmluZGV4ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVsZXRlUmVtb3ZlZFRhYmxlcyhuZXdTY2hlbWEsIGlkYnRyYW5zKSB7XG4gICAgICAgIFtdLnNsaWNlLmNhbGwoaWRidHJhbnMuZGIub2JqZWN0U3RvcmVOYW1lcykuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3U2NoZW1hW3N0b3JlTmFtZV0gPT0gbnVsbCAmJiBpZGJ0cmFucy5kYi5kZWxldGVPYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkSW5kZXgoc3RvcmUsIGlkeCkge1xuICAgICAgICBzdG9yZS5jcmVhdGVJbmRleChpZHgubmFtZSwgaWR4LmtleVBhdGgsIHsgdW5pcXVlOiBpZHgudW5pcXVlLCBtdWx0aUVudHJ5OiBpZHgubXVsdGkgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkR2xvYmFsU2NoZW1hKGRiLCBpZGJkYiwgdG1wVHJhbnMpIHtcbiAgICAgICAgdmFyIGdsb2JhbFNjaGVtYSA9IHt9O1xuICAgICAgICB2YXIgZGJTdG9yZU5hbWVzID0gc2xpY2UoaWRiZGIub2JqZWN0U3RvcmVOYW1lcywgMCk7XG4gICAgICAgIGRiU3RvcmVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IHRtcFRyYW5zLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XG4gICAgICAgICAgICB2YXIga2V5UGF0aCA9IHN0b3JlLmtleVBhdGg7XG4gICAgICAgICAgICB2YXIgcHJpbUtleSA9IGNyZWF0ZUluZGV4U3BlYyhuYW1lRnJvbUtleVBhdGgoa2V5UGF0aCksIGtleVBhdGggfHwgXCJcIiwgdHJ1ZSwgZmFsc2UsICEhc3RvcmUuYXV0b0luY3JlbWVudCwga2V5UGF0aCAmJiB0eXBlb2Yga2V5UGF0aCAhPT0gXCJzdHJpbmdcIiwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdG9yZS5pbmRleE5hbWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkYmluZGV4ID0gc3RvcmUuaW5kZXgoc3RvcmUuaW5kZXhOYW1lc1tqXSk7XG4gICAgICAgICAgICAgICAga2V5UGF0aCA9IGlkYmluZGV4LmtleVBhdGg7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gY3JlYXRlSW5kZXhTcGVjKGlkYmluZGV4Lm5hbWUsIGtleVBhdGgsICEhaWRiaW5kZXgudW5pcXVlLCAhIWlkYmluZGV4Lm11bHRpRW50cnksIGZhbHNlLCBrZXlQYXRoICYmIHR5cGVvZiBrZXlQYXRoICE9PSBcInN0cmluZ1wiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsb2JhbFNjaGVtYVtzdG9yZU5hbWVdID0gY3JlYXRlVGFibGVTY2hlbWEoc3RvcmVOYW1lLCBwcmltS2V5LCBpbmRleGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBnbG9iYWxTY2hlbWE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRHbG9iYWxTY2hlbWEoZGIsIGlkYmRiLCB0bXBUcmFucykge1xuICAgICAgICBkYi52ZXJubyA9IGlkYmRiLnZlcnNpb24gLyAxMDtcbiAgICAgICAgdmFyIGdsb2JhbFNjaGVtYSA9IGRiLl9kYlNjaGVtYSA9IGJ1aWxkR2xvYmFsU2NoZW1hKGRiLCBpZGJkYiwgdG1wVHJhbnMpO1xuICAgICAgICBkYi5fc3RvcmVOYW1lcyA9IHNsaWNlKGlkYmRiLm9iamVjdFN0b3JlTmFtZXMsIDApO1xuICAgICAgICBzZXRBcGlPblBsYWNlKGRiLCBbZGIuX2FsbFRhYmxlc10sIGtleXMoZ2xvYmFsU2NoZW1hKSwgZ2xvYmFsU2NoZW1hKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdmVyaWZ5SW5zdGFsbGVkU2NoZW1hKGRiLCB0bXBUcmFucykge1xuICAgICAgICB2YXIgaW5zdGFsbGVkU2NoZW1hID0gYnVpbGRHbG9iYWxTY2hlbWEoZGIsIGRiLmlkYmRiLCB0bXBUcmFucyk7XG4gICAgICAgIHZhciBkaWZmID0gZ2V0U2NoZW1hRGlmZihpbnN0YWxsZWRTY2hlbWEsIGRiLl9kYlNjaGVtYSk7XG4gICAgICAgIHJldHVybiAhKGRpZmYuYWRkLmxlbmd0aCB8fCBkaWZmLmNoYW5nZS5zb21lKGZ1bmN0aW9uIChjaCkgeyByZXR1cm4gY2guYWRkLmxlbmd0aCB8fCBjaC5jaGFuZ2UubGVuZ3RoOyB9KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkanVzdFRvRXhpc3RpbmdJbmRleE5hbWVzKGRiLCBzY2hlbWEsIGlkYnRyYW5zKSB7XG4gICAgICAgIHZhciBzdG9yZU5hbWVzID0gaWRidHJhbnMuZGIub2JqZWN0U3RvcmVOYW1lcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdG9yZU5hbWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc3RvcmVOYW1lID0gc3RvcmVOYW1lc1tpXTtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGlkYnRyYW5zLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XG4gICAgICAgICAgICBkYi5faGFzR2V0QWxsID0gJ2dldEFsbCcgaW4gc3RvcmU7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0b3JlLmluZGV4TmFtZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhOYW1lID0gc3RvcmUuaW5kZXhOYW1lc1tqXTtcbiAgICAgICAgICAgICAgICB2YXIga2V5UGF0aCA9IHN0b3JlLmluZGV4KGluZGV4TmFtZSkua2V5UGF0aDtcbiAgICAgICAgICAgICAgICB2YXIgZGV4aWVOYW1lID0gdHlwZW9mIGtleVBhdGggPT09ICdzdHJpbmcnID8ga2V5UGF0aCA6IFwiW1wiICsgc2xpY2Uoa2V5UGF0aCkuam9pbignKycpICsgXCJdXCI7XG4gICAgICAgICAgICAgICAgaWYgKHNjaGVtYVtzdG9yZU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleFNwZWMgPSBzY2hlbWFbc3RvcmVOYW1lXS5pZHhCeU5hbWVbZGV4aWVOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4U3BlYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhTcGVjLm5hbWUgPSBpbmRleE5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hW3N0b3JlTmFtZV0uaWR4QnlOYW1lW2RleGllTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWFbc3RvcmVOYW1lXS5pZHhCeU5hbWVbaW5kZXhOYW1lXSA9IGluZGV4U3BlYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgL1NhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgIS8oQ2hyb21lXFwvfEVkZ2VcXC8pLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgICAgICAgICBfZ2xvYmFsLldvcmtlckdsb2JhbFNjb3BlICYmIF9nbG9iYWwgaW5zdGFuY2VvZiBfZ2xvYmFsLldvcmtlckdsb2JhbFNjb3BlICYmXG4gICAgICAgICAgICBbXS5jb25jYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvU2FmYXJpXFwvKFxcZCopLykpWzFdIDwgNjA0KSB7XG4gICAgICAgICAgICBkYi5faGFzR2V0QWxsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VJbmRleFN5bnRheChwcmltS2V5QW5kSW5kZXhlcykge1xuICAgICAgICByZXR1cm4gcHJpbUtleUFuZEluZGV4ZXMuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKGluZGV4LCBpbmRleE51bSkge1xuICAgICAgICAgICAgaW5kZXggPSBpbmRleC50cmltKCk7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGluZGV4LnJlcGxhY2UoLyhbJipdfFxcK1xcKykvZywgXCJcIik7XG4gICAgICAgICAgICB2YXIga2V5UGF0aCA9IC9eXFxbLy50ZXN0KG5hbWUpID8gbmFtZS5tYXRjaCgvXlxcWyguKilcXF0kLylbMV0uc3BsaXQoJysnKSA6IG5hbWU7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlSW5kZXhTcGVjKG5hbWUsIGtleVBhdGggfHwgbnVsbCwgL1xcJi8udGVzdChpbmRleCksIC9cXCovLnRlc3QoaW5kZXgpLCAvXFwrXFwrLy50ZXN0KGluZGV4KSwgaXNBcnJheShrZXlQYXRoKSwgaW5kZXhOdW0gPT09IDApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgVmVyc2lvbiA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWZXJzaW9uKCkge1xuICAgICAgICB9XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLl9wYXJzZVN0b3Jlc1NwZWMgPSBmdW5jdGlvbiAoc3RvcmVzLCBvdXRTY2hlbWEpIHtcbiAgICAgICAgICAgIGtleXMoc3RvcmVzKS5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmVzW3RhYmxlTmFtZV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBwYXJzZUluZGV4U3ludGF4KHN0b3Jlc1t0YWJsZU5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1LZXkgPSBpbmRleGVzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIHByaW1LZXkudW5pcXVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1LZXkubXVsdGkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoXCJQcmltYXJ5IGtleSBjYW5ub3QgYmUgbXVsdGktdmFsdWVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBpbmRleGVzLmZvckVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeC5hdXRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlNjaGVtYShcIk9ubHkgcHJpbWFyeSBrZXkgY2FuIGJlIG1hcmtlZCBhcyBhdXRvSW5jcmVtZW50ICgrKylcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlkeC5rZXlQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlNjaGVtYShcIkluZGV4IG11c3QgaGF2ZSBhIG5hbWUgYW5kIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBvdXRTY2hlbWFbdGFibGVOYW1lXSA9IGNyZWF0ZVRhYmxlU2NoZW1hKHRhYmxlTmFtZSwgcHJpbUtleSwgaW5kZXhlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLnN0b3JlcyA9IGZ1bmN0aW9uIChzdG9yZXMpIHtcbiAgICAgICAgICAgIHZhciBkYiA9IHRoaXMuZGI7XG4gICAgICAgICAgICB0aGlzLl9jZmcuc3RvcmVzU291cmNlID0gdGhpcy5fY2ZnLnN0b3Jlc1NvdXJjZSA/XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRoaXMuX2NmZy5zdG9yZXNTb3VyY2UsIHN0b3JlcykgOlxuICAgICAgICAgICAgICAgIHN0b3JlcztcbiAgICAgICAgICAgIHZhciB2ZXJzaW9ucyA9IGRiLl92ZXJzaW9ucztcbiAgICAgICAgICAgIHZhciBzdG9yZXNTcGVjID0ge307XG4gICAgICAgICAgICB2YXIgZGJzY2hlbWEgPSB7fTtcbiAgICAgICAgICAgIHZlcnNpb25zLmZvckVhY2goZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBleHRlbmQoc3RvcmVzU3BlYywgdmVyc2lvbi5fY2ZnLnN0b3Jlc1NvdXJjZSk7XG4gICAgICAgICAgICAgICAgZGJzY2hlbWEgPSAodmVyc2lvbi5fY2ZnLmRic2NoZW1hID0ge30pO1xuICAgICAgICAgICAgICAgIHZlcnNpb24uX3BhcnNlU3RvcmVzU3BlYyhzdG9yZXNTcGVjLCBkYnNjaGVtYSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRiLl9kYlNjaGVtYSA9IGRic2NoZW1hO1xuICAgICAgICAgICAgcmVtb3ZlVGFibGVzQXBpKGRiLCBbZGIuX2FsbFRhYmxlcywgZGIsIGRiLlRyYW5zYWN0aW9uLnByb3RvdHlwZV0pO1xuICAgICAgICAgICAgc2V0QXBpT25QbGFjZShkYiwgW2RiLl9hbGxUYWJsZXMsIGRiLCBkYi5UcmFuc2FjdGlvbi5wcm90b3R5cGUsIHRoaXMuX2NmZy50YWJsZXNdLCBrZXlzKGRic2NoZW1hKSwgZGJzY2hlbWEpO1xuICAgICAgICAgICAgZGIuX3N0b3JlTmFtZXMgPSBrZXlzKGRic2NoZW1hKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBWZXJzaW9uLnByb3RvdHlwZS51cGdyYWRlID0gZnVuY3Rpb24gKHVwZ3JhZGVGdW5jdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fY2ZnLmNvbnRlbnRVcGdyYWRlID0gcHJvbWlzYWJsZUNoYWluKHRoaXMuX2NmZy5jb250ZW50VXBncmFkZSB8fCBub3AsIHVwZ3JhZGVGdW5jdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZlcnNpb247XG4gICAgfSgpKTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVZlcnNpb25Db25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoVmVyc2lvbi5wcm90b3R5cGUsIGZ1bmN0aW9uIFZlcnNpb24odmVyc2lvbk51bWJlcikge1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdGhpcy5fY2ZnID0ge1xuICAgICAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgc3RvcmVzU291cmNlOiBudWxsLFxuICAgICAgICAgICAgICAgIGRic2NoZW1hOiB7fSxcbiAgICAgICAgICAgICAgICB0YWJsZXM6IHt9LFxuICAgICAgICAgICAgICAgIGNvbnRlbnRVcGdyYWRlOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXREYk5hbWVzVGFibGUoaW5kZXhlZERCLCBJREJLZXlSYW5nZSkge1xuICAgICAgICB2YXIgZGJOYW1lc0RCID0gaW5kZXhlZERCW1wiX2RiTmFtZXNEQlwiXTtcbiAgICAgICAgaWYgKCFkYk5hbWVzREIpIHtcbiAgICAgICAgICAgIGRiTmFtZXNEQiA9IGluZGV4ZWREQltcIl9kYk5hbWVzREJcIl0gPSBuZXcgRGV4aWUkMShEQk5BTUVTX0RCLCB7XG4gICAgICAgICAgICAgICAgYWRkb25zOiBbXSxcbiAgICAgICAgICAgICAgICBpbmRleGVkREI6IGluZGV4ZWREQixcbiAgICAgICAgICAgICAgICBJREJLZXlSYW5nZTogSURCS2V5UmFuZ2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRiTmFtZXNEQi52ZXJzaW9uKDEpLnN0b3Jlcyh7IGRibmFtZXM6IFwibmFtZVwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYk5hbWVzREIudGFibGUoXCJkYm5hbWVzXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNEYXRhYmFzZXNOYXRpdmUoaW5kZXhlZERCKSB7XG4gICAgICAgIHJldHVybiBpbmRleGVkREIgJiYgdHlwZW9mIGluZGV4ZWREQi5kYXRhYmFzZXMgPT09IFwiZnVuY3Rpb25cIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGF0YWJhc2VOYW1lcyhfYSkge1xuICAgICAgICB2YXIgaW5kZXhlZERCID0gX2EuaW5kZXhlZERCLCBJREJLZXlSYW5nZSA9IF9hLklEQktleVJhbmdlO1xuICAgICAgICByZXR1cm4gaGFzRGF0YWJhc2VzTmF0aXZlKGluZGV4ZWREQilcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKGluZGV4ZWREQi5kYXRhYmFzZXMoKSkudGhlbihmdW5jdGlvbiAoaW5mb3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5mb3NcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoaW5mbykgeyByZXR1cm4gaW5mby5uYW1lOyB9KVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBuYW1lICE9PSBEQk5BTUVTX0RCOyB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IGdldERiTmFtZXNUYWJsZShpbmRleGVkREIsIElEQktleVJhbmdlKS50b0NvbGxlY3Rpb24oKS5wcmltYXJ5S2V5cygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBfb25EYXRhYmFzZUNyZWF0ZWQoX2EsIG5hbWUpIHtcbiAgICAgICAgdmFyIGluZGV4ZWREQiA9IF9hLmluZGV4ZWREQiwgSURCS2V5UmFuZ2UgPSBfYS5JREJLZXlSYW5nZTtcbiAgICAgICAgIWhhc0RhdGFiYXNlc05hdGl2ZShpbmRleGVkREIpICYmXG4gICAgICAgICAgICBuYW1lICE9PSBEQk5BTUVTX0RCICYmXG4gICAgICAgICAgICBnZXREYk5hbWVzVGFibGUoaW5kZXhlZERCLCBJREJLZXlSYW5nZSkucHV0KHsgbmFtZTogbmFtZSB9KS5jYXRjaChub3ApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBfb25EYXRhYmFzZURlbGV0ZWQoX2EsIG5hbWUpIHtcbiAgICAgICAgdmFyIGluZGV4ZWREQiA9IF9hLmluZGV4ZWREQiwgSURCS2V5UmFuZ2UgPSBfYS5JREJLZXlSYW5nZTtcbiAgICAgICAgIWhhc0RhdGFiYXNlc05hdGl2ZShpbmRleGVkREIpICYmXG4gICAgICAgICAgICBuYW1lICE9PSBEQk5BTUVTX0RCICYmXG4gICAgICAgICAgICBnZXREYk5hbWVzVGFibGUoaW5kZXhlZERCLCBJREJLZXlSYW5nZSkuZGVsZXRlKG5hbWUpLmNhdGNoKG5vcCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmlwKGZuKSB7XG4gICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBQU0QubGV0VGhyb3VnaCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWRiUmVhZHkoKSB7XG4gICAgICAgIHZhciBpc1NhZmFyaSA9ICFuYXZpZ2F0b3IudXNlckFnZW50RGF0YSAmJlxuICAgICAgICAgICAgL1NhZmFyaVxcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgIS9DaHJvbShlfGl1bSlcXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIGlmICghaXNTYWZhcmkgfHwgIWluZGV4ZWREQi5kYXRhYmFzZXMpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHZhciBpbnRlcnZhbElkO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIHZhciB0cnlJZGIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBpbmRleGVkREIuZGF0YWJhc2VzKCkuZmluYWxseShyZXNvbHZlKTsgfTtcbiAgICAgICAgICAgIGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh0cnlJZGIsIDEwMCk7XG4gICAgICAgICAgICB0cnlJZGIoKTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiBjbGVhckludGVydmFsKGludGVydmFsSWQpOyB9KTtcbiAgICB9XG5cbiAgICB2YXIgX2E7XG4gICAgZnVuY3Rpb24gaXNFbXB0eVJhbmdlKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuICEoXCJmcm9tXCIgaW4gbm9kZSk7XG4gICAgfVxuICAgIHZhciBSYW5nZVNldCA9IGZ1bmN0aW9uIChmcm9tT3JUcmVlLCB0bykge1xuICAgICAgICBpZiAodGhpcykge1xuICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGFyZ3VtZW50cy5sZW5ndGggPyB7IGQ6IDEsIGZyb206IGZyb21PclRyZWUsIHRvOiBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHRvIDogZnJvbU9yVHJlZSB9IDogeyBkOiAwIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJ2ID0gbmV3IFJhbmdlU2V0KCk7XG4gICAgICAgICAgICBpZiAoZnJvbU9yVHJlZSAmJiAoXCJkXCIgaW4gZnJvbU9yVHJlZSkpIHtcbiAgICAgICAgICAgICAgICBleHRlbmQocnYsIGZyb21PclRyZWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBwcm9wcyhSYW5nZVNldC5wcm90b3R5cGUsIChfYSA9IHtcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKHJhbmdlU2V0KSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VSYW5nZXModGhpcywgcmFuZ2VTZXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZEtleTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGFkZFJhbmdlKHRoaXMsIGtleSwga2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRLZXlzOiBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGFkZFJhbmdlKF90aGlzLCBrZXksIGtleSk7IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhc0tleTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gZ2V0UmFuZ2VTZXRJdGVyYXRvcih0aGlzKS5uZXh0KGtleSkudmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUgJiYgY21wKG5vZGUuZnJvbSwga2V5KSA8PSAwICYmIGNtcChub2RlLnRvLCBrZXkpID49IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9hW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRSYW5nZVNldEl0ZXJhdG9yKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICBfYSkpO1xuICAgIGZ1bmN0aW9uIGFkZFJhbmdlKHRhcmdldCwgZnJvbSwgdG8pIHtcbiAgICAgICAgdmFyIGRpZmYgPSBjbXAoZnJvbSwgdG8pO1xuICAgICAgICBpZiAoaXNOYU4oZGlmZikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChkaWZmID4gMClcbiAgICAgICAgICAgIHRocm93IFJhbmdlRXJyb3IoKTtcbiAgICAgICAgaWYgKGlzRW1wdHlSYW5nZSh0YXJnZXQpKVxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuZCh0YXJnZXQsIHsgZnJvbTogZnJvbSwgdG86IHRvLCBkOiAxIH0pO1xuICAgICAgICB2YXIgbGVmdCA9IHRhcmdldC5sO1xuICAgICAgICB2YXIgcmlnaHQgPSB0YXJnZXQucjtcbiAgICAgICAgaWYgKGNtcCh0bywgdGFyZ2V0LmZyb20pIDwgMCkge1xuICAgICAgICAgICAgbGVmdFxuICAgICAgICAgICAgICAgID8gYWRkUmFuZ2UobGVmdCwgZnJvbSwgdG8pXG4gICAgICAgICAgICAgICAgOiAodGFyZ2V0LmwgPSB7IGZyb206IGZyb20sIHRvOiB0bywgZDogMSwgbDogbnVsbCwgcjogbnVsbCB9KTtcbiAgICAgICAgICAgIHJldHVybiByZWJhbGFuY2UodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY21wKGZyb20sIHRhcmdldC50bykgPiAwKSB7XG4gICAgICAgICAgICByaWdodFxuICAgICAgICAgICAgICAgID8gYWRkUmFuZ2UocmlnaHQsIGZyb20sIHRvKVxuICAgICAgICAgICAgICAgIDogKHRhcmdldC5yID0geyBmcm9tOiBmcm9tLCB0bzogdG8sIGQ6IDEsIGw6IG51bGwsIHI6IG51bGwgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmViYWxhbmNlKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNtcChmcm9tLCB0YXJnZXQuZnJvbSkgPCAwKSB7XG4gICAgICAgICAgICB0YXJnZXQuZnJvbSA9IGZyb207XG4gICAgICAgICAgICB0YXJnZXQubCA9IG51bGw7XG4gICAgICAgICAgICB0YXJnZXQuZCA9IHJpZ2h0ID8gcmlnaHQuZCArIDEgOiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbXAodG8sIHRhcmdldC50bykgPiAwKSB7XG4gICAgICAgICAgICB0YXJnZXQudG8gPSB0bztcbiAgICAgICAgICAgIHRhcmdldC5yID0gbnVsbDtcbiAgICAgICAgICAgIHRhcmdldC5kID0gdGFyZ2V0LmwgPyB0YXJnZXQubC5kICsgMSA6IDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJpZ2h0V2FzQ3V0T2ZmID0gIXRhcmdldC5yO1xuICAgICAgICBpZiAobGVmdCAmJiAhdGFyZ2V0LmwpIHtcbiAgICAgICAgICAgIG1lcmdlUmFuZ2VzKHRhcmdldCwgbGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJpZ2h0ICYmIHJpZ2h0V2FzQ3V0T2ZmKSB7XG4gICAgICAgICAgICBtZXJnZVJhbmdlcyh0YXJnZXQsIHJpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBtZXJnZVJhbmdlcyh0YXJnZXQsIG5ld1NldCkge1xuICAgICAgICBmdW5jdGlvbiBfYWRkUmFuZ2VTZXQodGFyZ2V0LCBfYSkge1xuICAgICAgICAgICAgdmFyIGZyb20gPSBfYS5mcm9tLCB0byA9IF9hLnRvLCBsID0gX2EubCwgciA9IF9hLnI7XG4gICAgICAgICAgICBhZGRSYW5nZSh0YXJnZXQsIGZyb20sIHRvKTtcbiAgICAgICAgICAgIGlmIChsKVxuICAgICAgICAgICAgICAgIF9hZGRSYW5nZVNldCh0YXJnZXQsIGwpO1xuICAgICAgICAgICAgaWYgKHIpXG4gICAgICAgICAgICAgICAgX2FkZFJhbmdlU2V0KHRhcmdldCwgcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0VtcHR5UmFuZ2UobmV3U2V0KSlcbiAgICAgICAgICAgIF9hZGRSYW5nZVNldCh0YXJnZXQsIG5ld1NldCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJhbmdlc092ZXJsYXAocmFuZ2VTZXQxLCByYW5nZVNldDIpIHtcbiAgICAgICAgdmFyIGkxID0gZ2V0UmFuZ2VTZXRJdGVyYXRvcihyYW5nZVNldDIpO1xuICAgICAgICB2YXIgbmV4dFJlc3VsdDEgPSBpMS5uZXh0KCk7XG4gICAgICAgIGlmIChuZXh0UmVzdWx0MS5kb25lKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgYSA9IG5leHRSZXN1bHQxLnZhbHVlO1xuICAgICAgICB2YXIgaTIgPSBnZXRSYW5nZVNldEl0ZXJhdG9yKHJhbmdlU2V0MSk7XG4gICAgICAgIHZhciBuZXh0UmVzdWx0MiA9IGkyLm5leHQoYS5mcm9tKTtcbiAgICAgICAgdmFyIGIgPSBuZXh0UmVzdWx0Mi52YWx1ZTtcbiAgICAgICAgd2hpbGUgKCFuZXh0UmVzdWx0MS5kb25lICYmICFuZXh0UmVzdWx0Mi5kb25lKSB7XG4gICAgICAgICAgICBpZiAoY21wKGIuZnJvbSwgYS50bykgPD0gMCAmJiBjbXAoYi50bywgYS5mcm9tKSA+PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY21wKGEuZnJvbSwgYi5mcm9tKSA8IDBcbiAgICAgICAgICAgICAgICA/IChhID0gKG5leHRSZXN1bHQxID0gaTEubmV4dChiLmZyb20pKS52YWx1ZSlcbiAgICAgICAgICAgICAgICA6IChiID0gKG5leHRSZXN1bHQyID0gaTIubmV4dChhLmZyb20pKS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRSYW5nZVNldEl0ZXJhdG9yKG5vZGUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gaXNFbXB0eVJhbmdlKG5vZGUpID8gbnVsbCA6IHsgczogMCwgbjogbm9kZSB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlQcm92aWRlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXRlLnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UHJvdmlkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0YXRlLm4ubCAmJiBjbXAoa2V5LCBzdGF0ZS5uLmZyb20pIDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0geyB1cDogc3RhdGUsIG46IHN0YXRlLm4ubCwgczogMSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0YXRlLm4ubClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0geyB1cDogc3RhdGUsIG46IHN0YXRlLm4ubCwgczogMSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWtleVByb3ZpZGVkIHx8IGNtcChrZXksIHN0YXRlLm4udG8pIDw9IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBzdGF0ZS5uLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5uLnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUucyA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0geyB1cDogc3RhdGUsIG46IHN0YXRlLm4uciwgczogMCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS51cDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWJhbGFuY2UodGFyZ2V0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHZhciBkaWZmID0gKCgoX2EgPSB0YXJnZXQucikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmQpIHx8IDApIC0gKCgoX2IgPSB0YXJnZXQubCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmQpIHx8IDApO1xuICAgICAgICB2YXIgciA9IGRpZmYgPiAxID8gXCJyXCIgOiBkaWZmIDwgLTEgPyBcImxcIiA6IFwiXCI7XG4gICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICB2YXIgbCA9IHIgPT09IFwiclwiID8gXCJsXCIgOiBcInJcIjtcbiAgICAgICAgICAgIHZhciByb290Q2xvbmUgPSBfX2Fzc2lnbih7fSwgdGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBvbGRSb290UmlnaHQgPSB0YXJnZXRbcl07XG4gICAgICAgICAgICB0YXJnZXQuZnJvbSA9IG9sZFJvb3RSaWdodC5mcm9tO1xuICAgICAgICAgICAgdGFyZ2V0LnRvID0gb2xkUm9vdFJpZ2h0LnRvO1xuICAgICAgICAgICAgdGFyZ2V0W3JdID0gb2xkUm9vdFJpZ2h0W3JdO1xuICAgICAgICAgICAgcm9vdENsb25lW3JdID0gb2xkUm9vdFJpZ2h0W2xdO1xuICAgICAgICAgICAgdGFyZ2V0W2xdID0gcm9vdENsb25lO1xuICAgICAgICAgICAgcm9vdENsb25lLmQgPSBjb21wdXRlRGVwdGgocm9vdENsb25lKTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQuZCA9IGNvbXB1dGVEZXB0aCh0YXJnZXQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wdXRlRGVwdGgoX2EpIHtcbiAgICAgICAgdmFyIHIgPSBfYS5yLCBsID0gX2EubDtcbiAgICAgICAgcmV0dXJuIChyID8gKGwgPyBNYXRoLm1heChyLmQsIGwuZCkgOiByLmQpIDogbCA/IGwuZCA6IDApICsgMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHRlbmRPYnNlcnZhYmlsaXR5U2V0KHRhcmdldCwgbmV3U2V0KSB7XG4gICAgICAgIGtleXMobmV3U2V0KS5mb3JFYWNoKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0W3BhcnRdKVxuICAgICAgICAgICAgICAgIG1lcmdlUmFuZ2VzKHRhcmdldFtwYXJ0XSwgbmV3U2V0W3BhcnRdKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0YXJnZXRbcGFydF0gPSBjbG9uZVNpbXBsZU9iamVjdFRyZWUobmV3U2V0W3BhcnRdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb2JzU2V0c092ZXJsYXAob3MxLCBvczIpIHtcbiAgICAgICAgcmV0dXJuIG9zMS5hbGwgfHwgb3MyLmFsbCB8fCBPYmplY3Qua2V5cyhvczEpLnNvbWUoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gb3MyW2tleV0gJiYgcmFuZ2VzT3ZlcmxhcChvczJba2V5XSwgb3MxW2tleV0pOyB9KTtcbiAgICB9XG5cbiAgICB2YXIgY2FjaGUgPSB7fTtcblxuICAgIHZhciB1bnNpZ25hbGVkUGFydHMgPSB7fTtcbiAgICB2YXIgaXNUYXNrRW5xdWV1ZWQgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiBzaWduYWxTdWJzY3JpYmVyc0xhemlseShwYXJ0LCBvcHRpbWlzdGljKSB7XG4gICAgICAgIGV4dGVuZE9ic2VydmFiaWxpdHlTZXQodW5zaWduYWxlZFBhcnRzLCBwYXJ0KTtcbiAgICAgICAgaWYgKCFpc1Rhc2tFbnF1ZXVlZCkge1xuICAgICAgICAgICAgaXNUYXNrRW5xdWV1ZWQgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaXNUYXNrRW5xdWV1ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSB1bnNpZ25hbGVkUGFydHM7XG4gICAgICAgICAgICAgICAgdW5zaWduYWxlZFBhcnRzID0ge307XG4gICAgICAgICAgICAgICAgc2lnbmFsU3Vic2NyaWJlcnNOb3cocGFydHMsIGZhbHNlKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNpZ25hbFN1YnNjcmliZXJzTm93KHVwZGF0ZWRQYXJ0cywgZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMpIHtcbiAgICAgICAgaWYgKGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzID09PSB2b2lkIDApIHsgZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgcXVlcmllc1RvU2lnbmFsID0gbmV3IFNldCgpO1xuICAgICAgICBpZiAodXBkYXRlZFBhcnRzLmFsbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC52YWx1ZXMoY2FjaGUpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciB0YmxDYWNoZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBjb2xsZWN0VGFibGVTdWJzY3JpYmVycyh0YmxDYWNoZSwgdXBkYXRlZFBhcnRzLCBxdWVyaWVzVG9TaWduYWwsIGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB1cGRhdGVkUGFydHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSAvXmlkYlxcOlxcL1xcLyguKilcXC8oLiopXFwvLy5leGVjKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYk5hbWUgPSBwYXJ0c1sxXSwgdGFibGVOYW1lID0gcGFydHNbMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YmxDYWNoZSA9IGNhY2hlW1wiaWRiOi8vXCIuY29uY2F0KGRiTmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZU5hbWUpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRibENhY2hlKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdFRhYmxlU3Vic2NyaWJlcnModGJsQ2FjaGUsIHVwZGF0ZWRQYXJ0cywgcXVlcmllc1RvU2lnbmFsLCBkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXJpZXNUb1NpZ25hbC5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiByZXF1ZXJ5KCk7IH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb2xsZWN0VGFibGVTdWJzY3JpYmVycyh0YmxDYWNoZSwgdXBkYXRlZFBhcnRzLCBvdXRRdWVyaWVzVG9TaWduYWwsIGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKSB7XG4gICAgICAgIHZhciB1cGRhdGVkRW50cnlMaXN0cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmVudHJpZXModGJsQ2FjaGUucXVlcmllcy5xdWVyeSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBfYVtfaV0sIGluZGV4TmFtZSA9IF9iWzBdLCBlbnRyaWVzID0gX2JbMV07XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWRFbnRyaWVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIGVudHJpZXNfMSA9IGVudHJpZXM7IF9jIDwgZW50cmllc18xLmxlbmd0aDsgX2MrKykge1xuICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNfMVtfY107XG4gICAgICAgICAgICAgICAgaWYgKG9ic1NldHNPdmVybGFwKHVwZGF0ZWRQYXJ0cywgZW50cnkub2JzU2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiBvdXRRdWVyaWVzVG9TaWduYWwuYWRkKHJlcXVlcnkpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRFbnRyaWVzLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcylcbiAgICAgICAgICAgICAgICB1cGRhdGVkRW50cnlMaXN0cy5wdXNoKFtpbmRleE5hbWUsIGZpbHRlcmVkRW50cmllc10pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcykge1xuICAgICAgICAgICAgZm9yICh2YXIgX2QgPSAwLCB1cGRhdGVkRW50cnlMaXN0c18xID0gdXBkYXRlZEVudHJ5TGlzdHM7IF9kIDwgdXBkYXRlZEVudHJ5TGlzdHNfMS5sZW5ndGg7IF9kKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgX2UgPSB1cGRhdGVkRW50cnlMaXN0c18xW19kXSwgaW5kZXhOYW1lID0gX2VbMF0sIGZpbHRlcmVkRW50cmllcyA9IF9lWzFdO1xuICAgICAgICAgICAgICAgIHRibENhY2hlLnF1ZXJpZXMucXVlcnlbaW5kZXhOYW1lXSA9IGZpbHRlcmVkRW50cmllcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRleGllT3BlbihkYikge1xuICAgICAgICB2YXIgc3RhdGUgPSBkYi5fc3RhdGU7XG4gICAgICAgIHZhciBpbmRleGVkREIgPSBkYi5fZGVwcy5pbmRleGVkREI7XG4gICAgICAgIGlmIChzdGF0ZS5pc0JlaW5nT3BlbmVkIHx8IGRiLmlkYmRiKVxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmRiUmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RhdGUuZGJPcGVuRXJyb3IgP1xuICAgICAgICAgICAgICAgIHJlamVjdGlvbihzdGF0ZS5kYk9wZW5FcnJvcikgOlxuICAgICAgICAgICAgICAgIGRiOyB9KTtcbiAgICAgICAgc3RhdGUuaXNCZWluZ09wZW5lZCA9IHRydWU7XG4gICAgICAgIHN0YXRlLmRiT3BlbkVycm9yID0gbnVsbDtcbiAgICAgICAgc3RhdGUub3BlbkNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIHZhciBvcGVuQ2FuY2VsbGVyID0gc3RhdGUub3BlbkNhbmNlbGxlcjtcbiAgICAgICAgdmFyIG5hdGl2ZVZlclRvT3BlbiA9IE1hdGgucm91bmQoZGIudmVybm8gKiAxMCk7XG4gICAgICAgIHZhciBzY2hlbWFQYXRjaE1vZGUgPSBmYWxzZTtcbiAgICAgICAgZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxlZCgpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5vcGVuQ2FuY2VsbGVyICE9PSBvcGVuQ2FuY2VsbGVyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCdkYi5vcGVuKCkgd2FzIGNhbmNlbGxlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvbHZlRGJSZWFkeSA9IHN0YXRlLmRiUmVhZHlSZXNvbHZlLFxuICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gPSBudWxsLCB3YXNDcmVhdGVkID0gZmFsc2U7XG4gICAgICAgIHZhciB0cnlPcGVuREIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRocm93SWZDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIGlmICghaW5kZXhlZERCKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoKTtcbiAgICAgICAgICAgIHZhciBkYk5hbWUgPSBkYi5uYW1lO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHN0YXRlLmF1dG9TY2hlbWEgfHwgIW5hdGl2ZVZlclRvT3BlbiA/XG4gICAgICAgICAgICAgICAgaW5kZXhlZERCLm9wZW4oZGJOYW1lKSA6XG4gICAgICAgICAgICAgICAgaW5kZXhlZERCLm9wZW4oZGJOYW1lLCBuYXRpdmVWZXJUb09wZW4pO1xuICAgICAgICAgICAgaWYgKCFyZXEpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTWlzc2luZ0FQSSgpO1xuICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgIHJlcS5vbmJsb2NrZWQgPSB3cmFwKGRiLl9maXJlT25CbG9ja2VkKTtcbiAgICAgICAgICAgIHJlcS5vbnVwZ3JhZGVuZWVkZWQgPSB3cmFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uID0gcmVxLnRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5hdXRvU2NoZW1hICYmICFkYi5fb3B0aW9ucy5hbGxvd0VtcHR5REIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBwcmV2ZW50RGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5yZXN1bHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHJlcSA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShkYk5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBkZWxyZXEub25zdWNjZXNzID0gZGVscmVxLm9uZXJyb3IgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgZXhjZXB0aW9ucy5Ob1N1Y2hEYXRhYmFzZShcIkRhdGFiYXNlIFwiLmNvbmNhdChkYk5hbWUsIFwiIGRvZXNudCBleGlzdFwiKSkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbi5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvbGRWZXIgPSBlLm9sZFZlcnNpb24gPiBNYXRoLnBvdygyLCA2MikgPyAwIDogZS5vbGRWZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICB3YXNDcmVhdGVkID0gb2xkVmVyIDwgMTtcbiAgICAgICAgICAgICAgICAgICAgZGIuaWRiZGIgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZW1hUGF0Y2hNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaEN1cnJlbnRWZXJzaW9uKGRiLCB1cGdyYWRlVHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJ1blVwZ3JhZGVycyhkYiwgb2xkVmVyIC8gMTAsIHVwZ3JhZGVUcmFuc2FjdGlvbiwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHdyYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGlkYmRiID0gZGIuaWRiZGIgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZU5hbWVzID0gc2xpY2UoaWRiZGIub2JqZWN0U3RvcmVOYW1lcyk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdFN0b3JlTmFtZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXBUcmFucyA9IGlkYmRiLnRyYW5zYWN0aW9uKHNhZmFyaU11bHRpU3RvcmVGaXgob2JqZWN0U3RvcmVOYW1lcyksICdyZWFkb25seScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmF1dG9TY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEdsb2JhbFNjaGVtYShkYiwgaWRiZGIsIHRtcFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdFRvRXhpc3RpbmdJbmRleE5hbWVzKGRiLCBkYi5fZGJTY2hlbWEsIHRtcFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZlcmlmeUluc3RhbGxlZFNjaGVtYShkYiwgdG1wVHJhbnMpICYmICFzY2hlbWFQYXRjaE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRGV4aWUgU2NoZW1hRGlmZjogU2NoZW1hIHdhcyBleHRlbmRlZCB3aXRob3V0IGluY3JlYXNpbmcgdGhlIG51bWJlciBwYXNzZWQgdG8gZGIudmVyc2lvbigpLiBEZXhpZSB3aWxsIGFkZCBtaXNzaW5nIHBhcnRzIGFuZCBpbmNyZW1lbnQgbmF0aXZlIHZlcnNpb24gbnVtYmVyIHRvIHdvcmthcm91bmQgdGhpcy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkYmRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZVZlclRvT3BlbiA9IGlkYmRiLnZlcnNpb24gKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWFQYXRjaE1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnlPcGVuREIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLCB0bXBUcmFucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goZGIpO1xuICAgICAgICAgICAgICAgIGlkYmRiLm9udmVyc2lvbmNoYW5nZSA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLnZjRmlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkYi5vbihcInZlcnNpb25jaGFuZ2VcIikuZmlyZShldik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWRiZGIub25jbG9zZSA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLm9uKFwiY2xvc2VcIikuZmlyZShldik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHdhc0NyZWF0ZWQpXG4gICAgICAgICAgICAgICAgICAgIF9vbkRhdGFiYXNlQ3JlYXRlZChkYi5fZGVwcywgZGJOYW1lKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlVua25vd25FcnJvclwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuUFIxMzk4X21heExvb3AgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5QUjEzOThfbWF4TG9vcC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdEZXhpZTogV29ya2Fyb3VuZCBmb3IgQ2hyb21lIFVua25vd25FcnJvciBvbiBvcGVuKCknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnlPcGVuREIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiVmVyc2lvbkVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChuYXRpdmVWZXJUb09wZW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVWZXJUb09wZW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeU9wZW5EQigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmFjZShbXG4gICAgICAgICAgICBvcGVuQ2FuY2VsbGVyLFxuICAgICAgICAgICAgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnID8gRGV4aWVQcm9taXNlLnJlc29sdmUoKSA6IGlkYlJlYWR5KCkpLnRoZW4odHJ5T3BlbkRCKVxuICAgICAgICBdKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93SWZDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkID0gW107XG4gICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUodmlwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRiLm9uLnJlYWR5LmZpcmUoZGIudmlwKTsgfSkpLnRoZW4oZnVuY3Rpb24gZmlyZVJlbWFpbmRlcnMoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbWFpbmRlcnNfMSA9IHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkLnJlZHVjZShwcm9taXNhYmxlQ2hhaW4sIG5vcCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZSh2aXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVtYWluZGVyc18xKGRiLnZpcCk7IH0pKS50aGVuKGZpcmVSZW1haW5kZXJzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUub3BlbkNhbmNlbGxlciA9PT0gb3BlbkNhbmNlbGxlcikge1xuICAgICAgICAgICAgICAgIHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc0JlaW5nT3BlbmVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHN0YXRlLmRiT3BlbkVycm9yID0gZXJyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gJiYgdXBncmFkZVRyYW5zYWN0aW9uLmFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICAgICAgaWYgKG9wZW5DYW5jZWxsZXIgPT09IHN0YXRlLm9wZW5DYW5jZWxsZXIpIHtcbiAgICAgICAgICAgICAgICBkYi5fY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZXJyKTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzdGF0ZS5vcGVuQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgcmVzb2x2ZURiUmVhZHkoKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAod2FzQ3JlYXRlZCkge1xuICAgICAgICAgICAgICAgIHZhciBldmVyeXRoaW5nXzEgPSB7fTtcbiAgICAgICAgICAgICAgICBkYi50YWJsZXMuZm9yRWFjaChmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuc2NoZW1hLmluZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4Lm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlcnl0aGluZ18xW1wiaWRiOi8vXCIuY29uY2F0KGRiLm5hbWUsIFwiL1wiKS5jb25jYXQodGFibGUubmFtZSwgXCIvXCIpLmNvbmNhdChpZHgubmFtZSldID0gbmV3IFJhbmdlU2V0KC1JbmZpbml0eSwgW1tbXV1dKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZXJ5dGhpbmdfMVtcImlkYjovL1wiLmNvbmNhdChkYi5uYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlLm5hbWUsIFwiL1wiKV0gPSBldmVyeXRoaW5nXzFbXCJpZGI6Ly9cIi5jb25jYXQoZGIubmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZS5uYW1lLCBcIi86ZGVsc1wiKV0gPSBuZXcgUmFuZ2VTZXQoLUluZmluaXR5LCBbW1tdXV0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdsb2JhbEV2ZW50cyhERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSkuZmlyZShldmVyeXRoaW5nXzEpO1xuICAgICAgICAgICAgICAgIHNpZ25hbFN1YnNjcmliZXJzTm93KGV2ZXJ5dGhpbmdfMSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGI7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF3YWl0SXRlcmF0b3IoaXRlcmF0b3IpIHtcbiAgICAgICAgdmFyIGNhbGxOZXh0ID0gZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gaXRlcmF0b3IubmV4dChyZXN1bHQpOyB9LCBkb1Rocm93ID0gZnVuY3Rpb24gKGVycm9yKSB7IHJldHVybiBpdGVyYXRvci50aHJvdyhlcnJvcik7IH0sIG9uU3VjY2VzcyA9IHN0ZXAoY2FsbE5leHQpLCBvbkVycm9yID0gc3RlcChkb1Rocm93KTtcbiAgICAgICAgZnVuY3Rpb24gc3RlcChnZXROZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gZ2V0TmV4dCh2YWwpLCB2YWx1ZSA9IG5leHQudmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQuZG9uZSA/IHZhbHVlIDpcbiAgICAgICAgICAgICAgICAgICAgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUudGhlbiAhPT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FycmF5KHZhbHVlKSA/IFByb21pc2UuYWxsKHZhbHVlKS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcikgOiBvblN1Y2Nlc3ModmFsdWUpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGVwKGNhbGxOZXh0KSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4dHJhY3RUcmFuc2FjdGlvbkFyZ3MobW9kZSwgX3RhYmxlQXJnc18sIHNjb3BlRnVuYykge1xuICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChpIDwgMilcbiAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIlRvbyBmZXcgYXJndW1lbnRzXCIpO1xuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpIC0gMSk7XG4gICAgICAgIHdoaWxlICgtLWkpXG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgc2NvcGVGdW5jID0gYXJncy5wb3AoKTtcbiAgICAgICAgdmFyIHRhYmxlcyA9IGZsYXR0ZW4oYXJncyk7XG4gICAgICAgIHJldHVybiBbbW9kZSwgdGFibGVzLCBzY29wZUZ1bmNdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbnRlclRyYW5zYWN0aW9uU2NvcGUoZGIsIG1vZGUsIHN0b3JlTmFtZXMsIHBhcmVudFRyYW5zYWN0aW9uLCBzY29wZUZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNsZXNzID0gUFNELnRyYW5zbGVzcyB8fCBQU0Q7XG4gICAgICAgICAgICB2YXIgdHJhbnMgPSBkYi5fY3JlYXRlVHJhbnNhY3Rpb24obW9kZSwgc3RvcmVOYW1lcywgZGIuX2RiU2NoZW1hLCBwYXJlbnRUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICB0cmFucy5leHBsaWNpdCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgem9uZVByb3BzID0ge1xuICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICB0cmFuc2xlc3M6IHRyYW5zbGVzc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgIHRyYW5zLmlkYnRyYW5zID0gcGFyZW50VHJhbnNhY3Rpb24uaWRidHJhbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0cmFucy5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMuX2V4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGIuX3N0YXRlLlBSMTM5OF9tYXhMb29wID0gMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleC5uYW1lID09PSBlcnJuYW1lcy5JbnZhbGlkU3RhdGUgJiYgZGIuaXNPcGVuKCkgJiYgLS1kYi5fc3RhdGUuUFIxMzk4X21heExvb3AgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RleGllOiBOZWVkIHRvIHJlb3BlbiBkYicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoeyBkaXNhYmxlQXV0b09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRiLm9wZW4oKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVudGVyVHJhbnNhY3Rpb25TY29wZShkYiwgbW9kZSwgc3RvcmVOYW1lcywgbnVsbCwgc2NvcGVGdW5jKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNjb3BlRnVuY0lzQXN5bmMgPSBpc0FzeW5jRnVuY3Rpb24oc2NvcGVGdW5jKTtcbiAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlRm9sbG93ZWQgPSBEZXhpZVByb21pc2UuZm9sbG93KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHNjb3BlRnVuYy5jYWxsKHRyYW5zLCB0cmFucyk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVjcmVtZW50b3IgPSBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cy5iaW5kKG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUudGhlbihkZWNyZW1lbnRvciwgZGVjcmVtZW50b3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiByZXR1cm5WYWx1ZS5uZXh0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiByZXR1cm5WYWx1ZS50aHJvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhd2FpdEl0ZXJhdG9yKHJldHVyblZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHpvbmVQcm9wcyk7XG4gICAgICAgICAgICByZXR1cm4gKHJldHVyblZhbHVlICYmIHR5cGVvZiByZXR1cm5WYWx1ZS50aGVuID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgICAgICBEZXhpZVByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZSkudGhlbihmdW5jdGlvbiAoeCkgeyByZXR1cm4gdHJhbnMuYWN0aXZlID9cbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgICA6IHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5QcmVtYXR1cmVDb21taXQoXCJUcmFuc2FjdGlvbiBjb21taXR0ZWQgdG9vIGVhcmx5LiBTZWUgaHR0cDovL2JpdC5seS8ya2Rja01uXCIpKTsgfSlcbiAgICAgICAgICAgICAgICA6IHByb21pc2VGb2xsb3dlZC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJldHVyblZhbHVlOyB9KSkudGhlbihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgdHJhbnMuX3Jlc29sdmUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnMuX2NvbXBsZXRpb24udGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB4OyB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdHJhbnMuX3JlamVjdChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhZChhLCB2YWx1ZSwgY291bnQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGlzQXJyYXkoYSkgPyBhLnNsaWNlKCkgOiBbYV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSlcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlVmlydHVhbEluZGV4TWlkZGxld2FyZShkb3duKSB7XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZG93biksIHsgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBkb3duLnRhYmxlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIHNjaGVtYSA9IHRhYmxlLnNjaGVtYTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhMb29rdXAgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgYWxsVmlydHVhbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhZGRWaXJ0dWFsSW5kZXhlcyhrZXlQYXRoLCBrZXlUYWlsLCBsb3dMZXZlbEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoQWxpYXMgPSBnZXRLZXlQYXRoQWxpYXMoa2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleExpc3QgPSAoaW5kZXhMb29rdXBba2V5UGF0aEFsaWFzXSA9IGluZGV4TG9va3VwW2tleVBhdGhBbGlhc10gfHwgW10pO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5TGVuZ3RoID0ga2V5UGF0aCA9PSBudWxsID8gMCA6IHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/IDEgOiBrZXlQYXRoLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmlydHVhbCA9IGtleVRhaWwgPiAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmlydHVhbEluZGV4ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxvd0xldmVsSW5kZXgpLCB7IG5hbWU6IGlzVmlydHVhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcIi5jb25jYXQoa2V5UGF0aEFsaWFzLCBcIih2aXJ0dWFsLWZyb206XCIpLmNvbmNhdChsb3dMZXZlbEluZGV4Lm5hbWUsIFwiKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbG93TGV2ZWxJbmRleC5uYW1lLCBsb3dMZXZlbEluZGV4OiBsb3dMZXZlbEluZGV4LCBpc1ZpcnR1YWw6IGlzVmlydHVhbCwga2V5VGFpbDoga2V5VGFpbCwga2V5TGVuZ3RoOiBrZXlMZW5ndGgsIGV4dHJhY3RLZXk6IGdldEtleUV4dHJhY3RvcihrZXlQYXRoKSwgdW5pcXVlOiAhaXNWaXJ0dWFsICYmIGxvd0xldmVsSW5kZXgudW5pcXVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbmRleExpc3QucHVzaCh2aXJ0dWFsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXZpcnR1YWxJbmRleC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFZpcnR1YWxJbmRleGVzLnB1c2godmlydHVhbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5TGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpcnR1YWxLZXlQYXRoID0ga2V5TGVuZ3RoID09PSAyID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlQYXRoWzBdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlQYXRoLnNsaWNlKDAsIGtleUxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVmlydHVhbEluZGV4ZXModmlydHVhbEtleVBhdGgsIGtleVRhaWwgKyAxLCBsb3dMZXZlbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmRleExpc3Quc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5rZXlUYWlsIC0gYi5rZXlUYWlsOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcnR1YWxJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHByaW1hcnlLZXkgPSBhZGRWaXJ0dWFsSW5kZXhlcyhzY2hlbWEucHJpbWFyeUtleS5rZXlQYXRoLCAwLCBzY2hlbWEucHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgaW5kZXhMb29rdXBbXCI6aWRcIl0gPSBbcHJpbWFyeUtleV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNjaGVtYS5pbmRleGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGFkZFZpcnR1YWxJbmRleGVzKGluZGV4LmtleVBhdGgsIDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZmluZEJlc3RJbmRleChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBpbmRleExvb2t1cFtnZXRLZXlQYXRoQWxpYXMoa2V5UGF0aCldO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICYmIHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNsYXRlUmFuZ2UocmFuZ2UsIGtleVRhaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJhbmdlLnR5cGUgPT09IDEgID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyOiBwYWQocmFuZ2UubG93ZXIsIHJhbmdlLmxvd2VyT3BlbiA/IGRvd24uTUFYX0tFWSA6IGRvd24uTUlOX0tFWSwga2V5VGFpbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlck9wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlcjogcGFkKHJhbmdlLnVwcGVyLCByYW5nZS51cHBlck9wZW4gPyBkb3duLk1JTl9LRVkgOiBkb3duLk1BWF9LRVksIGtleVRhaWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJPcGVuOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZVJlcXVlc3QocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHJlcS5xdWVyeS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4LmlzVmlydHVhbCA/IF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXEpLCB7IHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4Lmxvd0xldmVsSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHRyYW5zbGF0ZVJhbmdlKHJlcS5xdWVyeS5yYW5nZSwgaW5kZXgua2V5VGFpbClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSkgOiByZXE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGFibGUpLCB7IHNjaGVtYTogX19hc3NpZ24oX19hc3NpZ24oe30sIHNjaGVtYSksIHsgcHJpbWFyeUtleTogcHJpbWFyeUtleSwgaW5kZXhlczogYWxsVmlydHVhbEluZGV4ZXMsIGdldEluZGV4QnlLZXlQYXRoOiBmaW5kQmVzdEluZGV4IH0pLCBjb3VudDogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLmNvdW50KHRyYW5zbGF0ZVJlcXVlc3QocmVxKSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHF1ZXJ5OiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUucXVlcnkodHJhbnNsYXRlUmVxdWVzdChyZXEpKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgb3BlbkN1cnNvcjogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hID0gcmVxLnF1ZXJ5LmluZGV4LCBrZXlUYWlsID0gX2Eua2V5VGFpbCwgaXNWaXJ0dWFsID0gX2EuaXNWaXJ0dWFsLCBrZXlMZW5ndGggPSBfYS5rZXlMZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmlydHVhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUub3BlbkN1cnNvcihyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlVmlydHVhbEN1cnNvcihjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfY29udGludWUoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSAhPSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShwYWQoa2V5LCByZXEucmV2ZXJzZSA/IGRvd24uTUFYX0tFWSA6IGRvd24uTUlOX0tFWSwga2V5VGFpbCkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS51bmlxdWUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShjdXJzb3Iua2V5LnNsaWNlKDAsIGtleUxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChyZXEucmV2ZXJzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRvd24uTUlOX0tFWVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRvd24uTUFYX0tFWSwga2V5VGFpbCkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpcnR1YWxDdXJzb3IgPSBPYmplY3QuY3JlYXRlKGN1cnNvciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTogeyB2YWx1ZTogX2NvbnRpbnVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlUHJpbWFyeUtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChrZXksIHByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWVQcmltYXJ5S2V5KHBhZChrZXksIGRvd24uTUFYX0tFWSwga2V5VGFpbCksIHByaW1hcnlLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGN1cnNvci5rZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleUxlbmd0aCA9PT0gMSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVswXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleS5zbGljZSgwLCBrZXlMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aXJ0dWFsQ3Vyc29yO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLm9wZW5DdXJzb3IodHJhbnNsYXRlUmVxdWVzdChyZXEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjdXJzb3IpIHsgcmV0dXJuIGN1cnNvciAmJiBjcmVhdGVWaXJ0dWFsQ3Vyc29yKGN1cnNvcik7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9IH0pO1xuICAgIH1cbiAgICB2YXIgdmlydHVhbEluZGV4TWlkZGxld2FyZSA9IHtcbiAgICAgICAgc3RhY2s6IFwiZGJjb3JlXCIsXG4gICAgICAgIG5hbWU6IFwiVmlydHVhbEluZGV4TWlkZGxld2FyZVwiLFxuICAgICAgICBsZXZlbDogMSxcbiAgICAgICAgY3JlYXRlOiBjcmVhdGVWaXJ0dWFsSW5kZXhNaWRkbGV3YXJlXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldE9iamVjdERpZmYoYSwgYiwgcnYsIHByZngpIHtcbiAgICAgICAgcnYgPSBydiB8fCB7fTtcbiAgICAgICAgcHJmeCA9IHByZnggfHwgJyc7XG4gICAgICAgIGtleXMoYSkuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgaWYgKCFoYXNPd24oYiwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICBydltwcmZ4ICsgcHJvcF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgYXAgPSBhW3Byb3BdLCBicCA9IGJbcHJvcF07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGJwID09PSAnb2JqZWN0JyAmJiBhcCAmJiBicCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXBUeXBlTmFtZSA9IHRvU3RyaW5nVGFnKGFwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJwVHlwZU5hbWUgPSB0b1N0cmluZ1RhZyhicCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcFR5cGVOYW1lICE9PSBicFR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydltwcmZ4ICsgcHJvcF0gPSBiW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFwVHlwZU5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRPYmplY3REaWZmKGFwLCBicCwgcnYsIHByZnggKyBwcm9wICsgJy4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcCAhPT0gYnApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXAgIT09IGJwKVxuICAgICAgICAgICAgICAgICAgICBydltwcmZ4ICsgcHJvcF0gPSBiW3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAga2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICBpZiAoIWhhc093bihhLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RWZmZWN0aXZlS2V5cyhwcmltYXJ5S2V5LCByZXEpIHtcbiAgICAgICAgaWYgKHJlcS50eXBlID09PSAnZGVsZXRlJylcbiAgICAgICAgICAgIHJldHVybiByZXEua2V5cztcbiAgICAgICAgcmV0dXJuIHJlcS5rZXlzIHx8IHJlcS52YWx1ZXMubWFwKHByaW1hcnlLZXkuZXh0cmFjdEtleSk7XG4gICAgfVxuXG4gICAgdmFyIGhvb2tzTWlkZGxld2FyZSA9IHtcbiAgICAgICAgc3RhY2s6IFwiZGJjb3JlXCIsXG4gICAgICAgIG5hbWU6IFwiSG9va3NNaWRkbGV3YXJlXCIsXG4gICAgICAgIGxldmVsOiAyLFxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChkb3duQ29yZSkgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBkb3duQ29yZSksIHsgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG93blRhYmxlID0gZG93bkNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJpbWFyeUtleSA9IGRvd25UYWJsZS5zY2hlbWEucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGVNaWRkbGV3YXJlID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGRvd25UYWJsZSksIHsgbXV0YXRlOiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHhUcmFucyA9IFBTRC50cmFucztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IGR4VHJhbnMudGFibGUodGFibGVOYW1lKS5ob29rLCBkZWxldGluZyA9IF9hLmRlbGV0aW5nLCBjcmVhdGluZyA9IF9hLmNyZWF0aW5nLCB1cGRhdGluZyA9IF9hLnVwZGF0aW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyZXEudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcmVhdGluZy5maXJlID09PSBub3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR4VHJhbnMuX3Byb21pc2UoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFkZFB1dE9yRGVsZXRlKHJlcSk7IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3B1dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcmVhdGluZy5maXJlID09PSBub3AgJiYgdXBkYXRpbmcuZmlyZSA9PT0gbm9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkeFRyYW5zLl9wcm9taXNlKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhZGRQdXRPckRlbGV0ZShyZXEpOyB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRpbmcuZmlyZSA9PT0gbm9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkeFRyYW5zLl9wcm9taXNlKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhZGRQdXRPckRlbGV0ZShyZXEpOyB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVSYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGluZy5maXJlID09PSBub3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR4VHJhbnMuX3Byb21pc2UoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlbGV0ZVJhbmdlKHJlcSk7IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5tdXRhdGUocmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFB1dE9yRGVsZXRlKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkeFRyYW5zID0gUFNELnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gcmVxLmtleXMgfHwgZ2V0RWZmZWN0aXZlS2V5cyhwcmltYXJ5S2V5LCByZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgha2V5cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiS2V5cyBtaXNzaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcSA9IHJlcS50eXBlID09PSAnYWRkJyB8fCByZXEudHlwZSA9PT0gJ3B1dCcgPyBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVxKSwgeyBrZXlzOiBrZXlzIH0pIDogX19hc3NpZ24oe30sIHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS50eXBlICE9PSAnZGVsZXRlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnZhbHVlcyA9IF9fc3ByZWFkQXJyYXkoW10sIHJlcS52YWx1ZXMsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEua2V5cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLmtleXMgPSBfX3NwcmVhZEFycmF5KFtdLCByZXEua2V5cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEV4aXN0aW5nVmFsdWVzKGRvd25UYWJsZSwgcmVxLCBrZXlzKS50aGVuKGZ1bmN0aW9uIChleGlzdGluZ1ZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dHMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5LCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IGV4aXN0aW5nVmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IHsgb25lcnJvcjogbnVsbCwgb25zdWNjZXNzOiBudWxsIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnR5cGUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRpbmcuZmlyZS5jYWxsKGN0eCwga2V5LCBleGlzdGluZ1ZhbHVlLCBkeFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcS50eXBlID09PSAnYWRkJyB8fCBleGlzdGluZ1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VuZXJhdGVkUHJpbWFyeUtleSA9IGNyZWF0aW5nLmZpcmUuY2FsbChjdHgsIGtleSwgcmVxLnZhbHVlc1tpXSwgZHhUcmFucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBudWxsICYmIGdlbmVyYXRlZFByaW1hcnlLZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBnZW5lcmF0ZWRQcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEua2V5c1tpXSA9IGtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmltYXJ5S2V5Lm91dGJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgocmVxLnZhbHVlc1tpXSwgcHJpbWFyeUtleS5rZXlQYXRoLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdERpZmYgPSBnZXRPYmplY3REaWZmKGV4aXN0aW5nVmFsdWUsIHJlcS52YWx1ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRpdGlvbmFsQ2hhbmdlc18xID0gdXBkYXRpbmcuZmlyZS5jYWxsKGN0eCwgb2JqZWN0RGlmZiwga2V5LCBleGlzdGluZ1ZhbHVlLCBkeFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbENoYW5nZXNfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdGVkVmFsdWVfMSA9IHJlcS52YWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGFkZGl0aW9uYWxDaGFuZ2VzXzEpLmZvckVhY2goZnVuY3Rpb24gKGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd24ocmVxdWVzdGVkVmFsdWVfMSwga2V5UGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRWYWx1ZV8xW2tleVBhdGhdID0gYWRkaXRpb25hbENoYW5nZXNfMVtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChyZXF1ZXN0ZWRWYWx1ZV8xLCBrZXlQYXRoLCBhZGRpdGlvbmFsQ2hhbmdlc18xW2tleVBhdGhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb3duVGFibGUubXV0YXRlKHJlcSkudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IF9hLmZhaWx1cmVzLCByZXN1bHRzID0gX2EucmVzdWx0cywgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgbGFzdFJlc3VsdCA9IF9hLmxhc3RSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbUtleSA9IHJlc3VsdHMgPyByZXN1bHRzW2ldIDoga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY29udGV4dHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1LZXkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgub25lcnJvciAmJiBjdHgub25lcnJvcihmYWlsdXJlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgub25zdWNjZXNzICYmIGN0eC5vbnN1Y2Nlc3MocmVxLnR5cGUgPT09ICdwdXQnICYmIGV4aXN0aW5nVmFsdWVzW2ldID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS52YWx1ZXNbaV0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbUtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZhaWx1cmVzOiBmYWlsdXJlcywgcmVzdWx0czogcmVzdWx0cywgbnVtRmFpbHVyZXM6IG51bUZhaWx1cmVzLCBsYXN0UmVzdWx0OiBsYXN0UmVzdWx0IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dHMuZm9yRWFjaChmdW5jdGlvbiAoY3R4KSB7IHJldHVybiBjdHgub25lcnJvciAmJiBjdHgub25lcnJvcihlcnJvcik7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVSYW5nZShyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlTmV4dENodW5rKHJlcS50cmFucywgcmVxLnJhbmdlLCAxMDAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVOZXh0Q2h1bmsodHJhbnMsIHJhbmdlLCBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb3duVGFibGUucXVlcnkoeyB0cmFuczogdHJhbnMsIHZhbHVlczogZmFsc2UsIHF1ZXJ5OiB7IGluZGV4OiBwcmltYXJ5S2V5LCByYW5nZTogcmFuZ2UgfSwgbGltaXQ6IGxpbWl0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX2EucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkUHV0T3JEZWxldGUoeyB0eXBlOiAnZGVsZXRlJywga2V5czogcmVzdWx0LCB0cmFuczogdHJhbnMgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm51bUZhaWx1cmVzID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLmZhaWx1cmVzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBmYWlsdXJlczogW10sIG51bUZhaWx1cmVzOiAwLCBsYXN0UmVzdWx0OiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVOZXh0Q2h1bmsodHJhbnMsIF9fYXNzaWduKF9fYXNzaWduKHt9LCByYW5nZSksIHsgbG93ZXI6IHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0sIGxvd2VyT3BlbjogdHJ1ZSB9KSwgbGltaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVNaWRkbGV3YXJlO1xuICAgICAgICAgICAgfSB9KSk7IH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIGdldEV4aXN0aW5nVmFsdWVzKHRhYmxlLCByZXEsIGVmZmVjdGl2ZUtleXMpIHtcbiAgICAgICAgcmV0dXJuIHJlcS50eXBlID09PSBcImFkZFwiXG4gICAgICAgICAgICA/IFByb21pc2UucmVzb2x2ZShbXSlcbiAgICAgICAgICAgIDogdGFibGUuZ2V0TWFueSh7IHRyYW5zOiByZXEudHJhbnMsIGtleXM6IGVmZmVjdGl2ZUtleXMsIGNhY2hlOiBcImltbXV0YWJsZVwiIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEZyb21UcmFuc2FjdGlvbkNhY2hlKGtleXMsIGNhY2hlLCBjbG9uZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFjYWNoZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmIChjYWNoZS5rZXlzLmxlbmd0aCA8IGtleXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSAwOyBpIDwgY2FjaGUua2V5cy5sZW5ndGggJiYgaiA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoY21wKGNhY2hlLmtleXNbaV0sIGtleXNbal0pICE9PSAwKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjbG9uZSA/IGRlZXBDbG9uZShjYWNoZS52YWx1ZXNbaV0pIDogY2FjaGUudmFsdWVzW2ldKTtcbiAgICAgICAgICAgICAgICArK2o7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA9PT0ga2V5cy5sZW5ndGggPyByZXN1bHQgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNhY2hlRXhpc3RpbmdWYWx1ZXNNaWRkbGV3YXJlID0ge1xuICAgICAgICBzdGFjazogXCJkYmNvcmVcIixcbiAgICAgICAgbGV2ZWw6IC0xLFxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChjb3JlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRhYmxlOiBmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCB0YWJsZSksIHsgZ2V0TWFueTogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVxLmNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZS5nZXRNYW55KHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZWRSZXN1bHQgPSBnZXRGcm9tVHJhbnNhY3Rpb25DYWNoZShyZXEua2V5cywgcmVxLnRyYW5zW1wiX2NhY2hlXCJdLCByZXEuY2FjaGUgPT09IFwiY2xvbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoY2FjaGVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLmdldE1hbnkocmVxKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnRyYW5zW1wiX2NhY2hlXCJdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czogcmVxLmtleXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHJlcS5jYWNoZSA9PT0gXCJjbG9uZVwiID8gZGVlcENsb25lKHJlcykgOiByZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBtdXRhdGU6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnR5cGUgIT09IFwiYWRkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS50cmFuc1tcIl9jYWNoZVwiXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLm11dGF0ZShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaXNDYWNoYWJsZUNvbnRleHQoY3R4LCB0YWJsZSkge1xuICAgICAgICByZXR1cm4gKGN0eC50cmFucy5tb2RlID09PSAncmVhZG9ubHknICYmXG4gICAgICAgICAgICAhIWN0eC5zdWJzY3IgJiZcbiAgICAgICAgICAgICFjdHgudHJhbnMuZXhwbGljaXQgJiZcbiAgICAgICAgICAgIGN0eC50cmFucy5kYi5fb3B0aW9ucy5jYWNoZSAhPT0gJ2Rpc2FibGVkJyAmJlxuICAgICAgICAgICAgIXRhYmxlLnNjaGVtYS5wcmltYXJ5S2V5Lm91dGJvdW5kKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0NhY2hhYmxlUmVxdWVzdCh0eXBlLCByZXEpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdxdWVyeSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcS52YWx1ZXMgJiYgIXJlcS51bmlxdWU7XG4gICAgICAgICAgICBjYXNlICdnZXQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgJ2dldE1hbnknOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgJ2NvdW50JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlICdvcGVuQ3Vyc29yJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgb2JzZXJ2YWJpbGl0eU1pZGRsZXdhcmUgPSB7XG4gICAgICAgIHN0YWNrOiBcImRiY29yZVwiLFxuICAgICAgICBsZXZlbDogMCxcbiAgICAgICAgbmFtZTogXCJPYnNlcnZhYmlsaXR5XCIsXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGNvcmUpIHtcbiAgICAgICAgICAgIHZhciBkYk5hbWUgPSBjb3JlLnNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgdmFyIEZVTExfUkFOR0UgPSBuZXcgUmFuZ2VTZXQoY29yZS5NSU5fS0VZLCBjb3JlLk1BWF9LRVkpO1xuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb3JlKSwgeyB0cmFuc2FjdGlvbjogZnVuY3Rpb24gKHN0b3JlcywgbW9kZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoUFNELnN1YnNjciAmJiBtb2RlICE9PSAncmVhZG9ubHknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5SZWFkT25seShcIlJlYWR3cml0ZSB0cmFuc2FjdGlvbiBpbiBsaXZlUXVlcnkgY29udGV4dC4gUXVlcmllciBzb3VyY2U6IFwiLmNvbmNhdChQU0QucXVlcmllcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3JlLnRyYW5zYWN0aW9uKHN0b3JlcywgbW9kZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSwgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NoZW1hID0gdGFibGUuc2NoZW1hO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbWFyeUtleSA9IHNjaGVtYS5wcmltYXJ5S2V5LCBpbmRleGVzID0gc2NoZW1hLmluZGV4ZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0S2V5ID0gcHJpbWFyeUtleS5leHRyYWN0S2V5LCBvdXRib3VuZCA9IHByaW1hcnlLZXkub3V0Ym91bmQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleGVzV2l0aEF1dG9JbmNQSyA9IHByaW1hcnlLZXkuYXV0b0luY3JlbWVudCAmJiBpbmRleGVzLmZpbHRlcihmdW5jdGlvbiAoaW5kZXgpIHsgcmV0dXJuIGluZGV4LmNvbXBvdW5kICYmIGluZGV4LmtleVBhdGguaW5jbHVkZXMocHJpbWFyeUtleS5rZXlQYXRoKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZUNsb25lID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRhYmxlKSwgeyBtdXRhdGU6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IHJlcS50cmFucztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRlZFBhcnRzID0gcmVxLm11dGF0ZWRQYXJ0cyB8fCAocmVxLm11dGF0ZWRQYXJ0cyA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0UmFuZ2VTZXQgPSBmdW5jdGlvbiAoaW5kZXhOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSwgXCIvXCIpLmNvbmNhdChpbmRleE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG11dGF0ZWRQYXJ0c1twYXJ0XSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG11dGF0ZWRQYXJ0c1twYXJ0XSA9IG5ldyBSYW5nZVNldCgpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGtSYW5nZVNldCA9IGdldFJhbmdlU2V0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxzUmFuZ2VTZXQgPSBnZXRSYW5nZVNldChcIjpkZWxzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gcmVxLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jID0gcmVxLnR5cGUgPT09IFwiZGVsZXRlUmFuZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtyZXEucmFuZ2VdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVxLnR5cGUgPT09IFwiZGVsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW3JlcS5rZXlzXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZXEudmFsdWVzLmxlbmd0aCA8IDUwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbZ2V0RWZmZWN0aXZlS2V5cyhwcmltYXJ5S2V5LCByZXEpLmZpbHRlcihmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIGlkOyB9KSwgcmVxLnZhbHVlc11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdLCBrZXlzID0gX2NbMF0sIG5ld09ianMgPSBfY1sxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkQ2FjaGUgPSByZXEudHJhbnNbXCJfY2FjaGVcIl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoa2V5cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGtSYW5nZVNldC5hZGRLZXlzKGtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkT2JqcyA9IHR5cGUgPT09ICdkZWxldGUnIHx8IGtleXMubGVuZ3RoID09PSBuZXdPYmpzLmxlbmd0aCA/IGdldEZyb21UcmFuc2FjdGlvbkNhY2hlKGtleXMsIG9sZENhY2hlKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2xkT2Jqcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0LmFkZEtleXMoa2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZE9ianMgfHwgbmV3T2Jqcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tBZmZlY3RlZEluZGV4ZXMoZ2V0UmFuZ2VTZXQsIHNjaGVtYSwgb2xkT2JqcywgbmV3T2Jqcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiAoX2EgPSBrZXlzLmxvd2VyKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb3JlLk1JTl9LRVksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogKF9iID0ga2V5cy51cHBlcikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogY29yZS5NQVhfS0VZXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldC5hZGQocmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwa1JhbmdlU2V0LmFkZChyYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwa1JhbmdlU2V0LmFkZChGVUxMX1JBTkdFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0LmFkZChGVUxMX1JBTkdFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hLmluZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7IHJldHVybiBnZXRSYW5nZVNldChpZHgubmFtZSkuYWRkKEZVTExfUkFOR0UpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLm11dGF0ZShyZXEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5cyAmJiAocmVxLnR5cGUgPT09ICdhZGQnIHx8IHJlcS50eXBlID09PSAncHV0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXQuYWRkS2V5cyhyZXMucmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhlc1dpdGhBdXRvSW5jUEspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleGVzV2l0aEF1dG9JbmNQSy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeFZhbHMgPSByZXEudmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gaWR4LmV4dHJhY3RLZXkodik7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGtQb3MgPSBpZHgua2V5UGF0aC5maW5kSW5kZXgoZnVuY3Rpb24gKHByb3ApIHsgcmV0dXJuIHByb3AgPT09IHByaW1hcnlLZXkua2V5UGF0aDsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByZXMucmVzdWx0cy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4VmFsc1tpXVtwa1Bvc10gPSByZXMucmVzdWx0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRSYW5nZVNldChpZHgubmFtZSkuYWRkS2V5cyhpZHhWYWxzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFucy5tdXRhdGVkUGFydHMgPSBleHRlbmRPYnNlcnZhYmlsaXR5U2V0KHRyYW5zLm11dGF0ZWRQYXJ0cyB8fCB7fSwgbXV0YXRlZFBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnZXRSYW5nZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9iLCBfYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfZCA9IF9hLnF1ZXJ5LCBpbmRleCA9IF9kLmluZGV4LCByYW5nZSA9IF9kLnJhbmdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmFuZ2VTZXQoKF9iID0gcmFuZ2UubG93ZXIpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGNvcmUuTUlOX0tFWSwgKF9jID0gcmFuZ2UudXBwZXIpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGNvcmUuTUFYX0tFWSksXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZFN1YnNjcmliZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAocmVxKSB7IHJldHVybiBbcHJpbWFyeUtleSwgbmV3IFJhbmdlU2V0KHJlcS5rZXkpXTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldE1hbnk6IGZ1bmN0aW9uIChyZXEpIHsgcmV0dXJuIFtwcmltYXJ5S2V5LCBuZXcgUmFuZ2VTZXQoKS5hZGRLZXlzKHJlcS5rZXlzKV07IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogZ2V0UmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogZ2V0UmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuQ3Vyc29yOiBnZXRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAga2V5cyhyZWFkU3Vic2NyaWJlcnMpLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDbG9uZVttZXRob2RdID0gZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3IgPSBQU0Quc3Vic2NyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0xpdmVRdWVyeSA9ICEhc3Vic2NyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWNoYWJsZSA9IGlzQ2FjaGFibGVDb250ZXh0KFBTRCwgdGFibGUpICYmIGlzQ2FjaGFibGVSZXF1ZXN0KG1ldGhvZCwgcmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JzU2V0ID0gY2FjaGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByZXEub2JzU2V0ID0ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzdWJzY3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGl2ZVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRSYW5nZVNldCA9IGZ1bmN0aW9uIChpbmRleE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSwgXCIvXCIpLmNvbmNhdChpbmRleE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvYnNTZXRbcGFydF0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob2JzU2V0W3BhcnRdID0gbmV3IFJhbmdlU2V0KCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBrUmFuZ2VTZXRfMSA9IGdldFJhbmdlU2V0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsc1JhbmdlU2V0XzEgPSBnZXRSYW5nZVNldChcIjpkZWxzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EgPSByZWFkU3Vic2NyaWJlcnNbbWV0aG9kXShyZXEpLCBxdWVyaWVkSW5kZXggPSBfYVswXSwgcXVlcmllZFJhbmdlcyA9IF9hWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSAncXVlcnknICYmIHF1ZXJpZWRJbmRleC5pc1ByaW1hcnlLZXkgJiYgIXJlcS52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZChxdWVyaWVkUmFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJhbmdlU2V0KHF1ZXJpZWRJbmRleC5uYW1lIHx8IFwiXCIpLmFkZChxdWVyaWVkUmFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJpZWRJbmRleC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiY291bnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZChGVUxMX1JBTkdFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlzUHJvbWlzZV8xID0gbWV0aG9kID09PSBcInF1ZXJ5XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0Ym91bmQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnZhbHVlcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5xdWVyeShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVxKSwgeyB2YWx1ZXM6IGZhbHNlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVbbWV0aG9kXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSBcInF1ZXJ5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdXRib3VuZCAmJiByZXEudmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleXNQcm9taXNlXzEudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdGluZ0tleXMgPSBfYS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXRfMS5hZGRLZXlzKHJlc3VsdGluZ0tleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBLZXlzID0gcmVxLnZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzLnJlc3VsdC5tYXAoZXh0cmFjdEtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlcy5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXRfMS5hZGRLZXlzKHBLZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZEtleXMocEtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJvcGVuQ3Vyc29yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3JfMSA9IHJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YW50VmFsdWVzXzEgPSByZXEudmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjdXJzb3JfMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5jcmVhdGUoY3Vyc29yXzEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxzUmFuZ2VTZXRfMS5hZGRLZXkoY3Vyc29yXzEucHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcl8xLmtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwa2V5ID0gY3Vyc29yXzEucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxzUmFuZ2VTZXRfMS5hZGRLZXkocGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FudFZhbHVlc18xICYmIHBrUmFuZ2VTZXRfMS5hZGRLZXkoY3Vyc29yXzEucHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcl8xLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGVbbWV0aG9kXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZUNsb25lO1xuICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBmdW5jdGlvbiB0cmFja0FmZmVjdGVkSW5kZXhlcyhnZXRSYW5nZVNldCwgc2NoZW1hLCBvbGRPYmpzLCBuZXdPYmpzKSB7XG4gICAgICAgIGZ1bmN0aW9uIGFkZEFmZmVjdGVkSW5kZXgoaXgpIHtcbiAgICAgICAgICAgIHZhciByYW5nZVNldCA9IGdldFJhbmdlU2V0KGl4Lm5hbWUgfHwgXCJcIik7XG4gICAgICAgICAgICBmdW5jdGlvbiBleHRyYWN0S2V5KG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmogIT0gbnVsbCA/IGl4LmV4dHJhY3RLZXkob2JqKSA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWRkS2V5T3JLZXlzID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gaXgubXVsdGlFbnRyeSAmJiBpc0FycmF5KGtleSlcbiAgICAgICAgICAgICAgICA/IGtleS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHJhbmdlU2V0LmFkZEtleShrZXkpOyB9KVxuICAgICAgICAgICAgICAgIDogcmFuZ2VTZXQuYWRkS2V5KGtleSk7IH07XG4gICAgICAgICAgICAob2xkT2JqcyB8fCBuZXdPYmpzKS5mb3JFYWNoKGZ1bmN0aW9uIChfLCBpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZEtleSA9IG9sZE9ianMgJiYgZXh0cmFjdEtleShvbGRPYmpzW2ldKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3S2V5ID0gbmV3T2JqcyAmJiBleHRyYWN0S2V5KG5ld09ianNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChjbXAob2xkS2V5LCBuZXdLZXkpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRLZXkgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleU9yS2V5cyhvbGRLZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3S2V5ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRLZXlPcktleXMobmV3S2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuaW5kZXhlcy5mb3JFYWNoKGFkZEFmZmVjdGVkSW5kZXgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkanVzdE9wdGltaXN0aWNGcm9tRmFpbHVyZXModGJsQ2FjaGUsIHJlcSwgcmVzKSB7XG4gICAgICAgIGlmIChyZXMubnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICByZXR1cm4gcmVxO1xuICAgICAgICBpZiAocmVxLnR5cGUgPT09ICdkZWxldGVSYW5nZScpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBudW1CdWxrT3BzID0gcmVxLmtleXNcbiAgICAgICAgICAgID8gcmVxLmtleXMubGVuZ3RoXG4gICAgICAgICAgICA6ICd2YWx1ZXMnIGluIHJlcSAmJiByZXEudmFsdWVzXG4gICAgICAgICAgICAgICAgPyByZXEudmFsdWVzLmxlbmd0aFxuICAgICAgICAgICAgICAgIDogMTtcbiAgICAgICAgaWYgKHJlcy5udW1GYWlsdXJlcyA9PT0gbnVtQnVsa09wcykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsb25lID0gX19hc3NpZ24oe30sIHJlcSk7XG4gICAgICAgIGlmIChpc0FycmF5KGNsb25lLmtleXMpKSB7XG4gICAgICAgICAgICBjbG9uZS5rZXlzID0gY2xvbmUua2V5cy5maWx0ZXIoZnVuY3Rpb24gKF8sIGkpIHsgcmV0dXJuICEoaSBpbiByZXMuZmFpbHVyZXMpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ3ZhbHVlcycgaW4gY2xvbmUgJiYgaXNBcnJheShjbG9uZS52YWx1ZXMpKSB7XG4gICAgICAgICAgICBjbG9uZS52YWx1ZXMgPSBjbG9uZS52YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uIChfLCBpKSB7IHJldHVybiAhKGkgaW4gcmVzLmZhaWx1cmVzKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQWJvdmVMb3dlcihrZXksIHJhbmdlKSB7XG4gICAgICAgIHJldHVybiByYW5nZS5sb3dlciA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgIDogcmFuZ2UubG93ZXJPcGVuXG4gICAgICAgICAgICAgICAgPyBjbXAoa2V5LCByYW5nZS5sb3dlcikgPiAwXG4gICAgICAgICAgICAgICAgOiBjbXAoa2V5LCByYW5nZS5sb3dlcikgPj0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNCZWxvd1VwcGVyKGtleSwgcmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHJhbmdlLnVwcGVyID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgOiByYW5nZS51cHBlck9wZW5cbiAgICAgICAgICAgICAgICA/IGNtcChrZXksIHJhbmdlLnVwcGVyKSA8IDBcbiAgICAgICAgICAgICAgICA6IGNtcChrZXksIHJhbmdlLnVwcGVyKSA8PSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1dpdGhpblJhbmdlKGtleSwgcmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIGlzQWJvdmVMb3dlcihrZXksIHJhbmdlKSAmJiBpc0JlbG93VXBwZXIoa2V5LCByYW5nZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwbHlPcHRpbWlzdGljT3BzKHJlc3VsdCwgcmVxLCBvcHMsIHRhYmxlLCBjYWNoZUVudHJ5LCBpbW11dGFibGUpIHtcbiAgICAgICAgaWYgKCFvcHMgfHwgb3BzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIHZhciBpbmRleCA9IHJlcS5xdWVyeS5pbmRleDtcbiAgICAgICAgdmFyIG11bHRpRW50cnkgPSBpbmRleC5tdWx0aUVudHJ5O1xuICAgICAgICB2YXIgcXVlcnlSYW5nZSA9IHJlcS5xdWVyeS5yYW5nZTtcbiAgICAgICAgdmFyIHByaW1hcnlLZXkgPSB0YWJsZS5zY2hlbWEucHJpbWFyeUtleTtcbiAgICAgICAgdmFyIGV4dHJhY3RQcmltS2V5ID0gcHJpbWFyeUtleS5leHRyYWN0S2V5O1xuICAgICAgICB2YXIgZXh0cmFjdEluZGV4ID0gaW5kZXguZXh0cmFjdEtleTtcbiAgICAgICAgdmFyIGV4dHJhY3RMb3dMZXZlbEluZGV4ID0gKGluZGV4Lmxvd0xldmVsSW5kZXggfHwgaW5kZXgpLmV4dHJhY3RLZXk7XG4gICAgICAgIHZhciBmaW5hbFJlc3VsdCA9IG9wcy5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgb3ApIHtcbiAgICAgICAgICAgIHZhciBtb2RpZmVkUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgdmFyIGluY2x1ZGVkVmFsdWVzID0gW107XG4gICAgICAgICAgICBpZiAob3AudHlwZSA9PT0gJ2FkZCcgfHwgb3AudHlwZSA9PT0gJ3B1dCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZWRQS3MgPSBuZXcgUmFuZ2VTZXQoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gb3AudmFsdWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9wLnZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBrID0gZXh0cmFjdFByaW1LZXkodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZWRQS3MuaGFzS2V5KHBrKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZXh0cmFjdEluZGV4KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG11bHRpRW50cnkgJiYgaXNBcnJheShrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGtleS5zb21lKGZ1bmN0aW9uIChrKSB7IHJldHVybiBpc1dpdGhpblJhbmdlKGssIHF1ZXJ5UmFuZ2UpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpc1dpdGhpblJhbmdlKGtleSwgcXVlcnlSYW5nZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkUEtzLmFkZEtleShwayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAob3AudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nS2V5c18xID0gbmV3IFJhbmdlU2V0KCkuYWRkS2V5cyhyZXEudmFsdWVzID8gcmVzdWx0Lm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gZXh0cmFjdFByaW1LZXkodik7IH0pIDogcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZlZFJlc3VsdCA9IHJlc3VsdC5jb25jYXQocmVxLnZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBpbmNsdWRlZFZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZXh0cmFjdFByaW1LZXkodik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nS2V5c18xLmhhc0tleShrZXkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdLZXlzXzEuYWRkS2V5KGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbmNsdWRlZFZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGV4dHJhY3RQcmltS2V5KHYpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdLZXlzXzEuaGFzS2V5KGspKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdLZXlzXzEuYWRkS2V5KGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAncHV0Jzoge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5U2V0XzEgPSBuZXcgUmFuZ2VTZXQoKS5hZGRLZXlzKG9wLnZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGV4dHJhY3RQcmltS2V5KHYpOyB9KSk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmZWRSZXN1bHQgPSByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAha2V5U2V0XzEuaGFzS2V5KHJlcS52YWx1ZXMgPyBleHRyYWN0UHJpbUtleShpdGVtKSA6IGl0ZW0pOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChcbiAgICAgICAgICAgICAgICAgICAgcmVxLnZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBpbmNsdWRlZFZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbmNsdWRlZFZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGV4dHJhY3RQcmltS2V5KHYpOyB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5c1RvRGVsZXRlXzEgPSBuZXcgUmFuZ2VTZXQoKS5hZGRLZXlzKG9wLmtleXMpO1xuICAgICAgICAgICAgICAgICAgICBtb2RpZmVkUmVzdWx0ID0gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFrZXlzVG9EZWxldGVfMS5oYXNLZXkocmVxLnZhbHVlcyA/IGV4dHJhY3RQcmltS2V5KGl0ZW0pIDogaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVSYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhciByYW5nZV8xID0gb3AucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmZWRSZXN1bHQgPSByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAhaXNXaXRoaW5SYW5nZShleHRyYWN0UHJpbUtleShpdGVtKSwgcmFuZ2VfMSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2RpZmVkUmVzdWx0O1xuICAgICAgICB9LCByZXN1bHQpO1xuICAgICAgICBpZiAoZmluYWxSZXN1bHQgPT09IHJlc3VsdClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGZpbmFsUmVzdWx0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBjbXAoZXh0cmFjdExvd0xldmVsSW5kZXgoYSksIGV4dHJhY3RMb3dMZXZlbEluZGV4KGIpKSB8fFxuICAgICAgICAgICAgICAgIGNtcChleHRyYWN0UHJpbUtleShhKSwgZXh0cmFjdFByaW1LZXkoYikpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlcS5saW1pdCAmJiByZXEubGltaXQgPCBJbmZpbml0eSkge1xuICAgICAgICAgICAgaWYgKGZpbmFsUmVzdWx0Lmxlbmd0aCA+IHJlcS5saW1pdCkge1xuICAgICAgICAgICAgICAgIGZpbmFsUmVzdWx0Lmxlbmd0aCA9IHJlcS5saW1pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5sZW5ndGggPT09IHJlcS5saW1pdCAmJiBmaW5hbFJlc3VsdC5sZW5ndGggPCByZXEubGltaXQpIHtcbiAgICAgICAgICAgICAgICBjYWNoZUVudHJ5LmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW1tdXRhYmxlID8gT2JqZWN0LmZyZWV6ZShmaW5hbFJlc3VsdCkgOiBmaW5hbFJlc3VsdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcmVSYW5nZXNFcXVhbChyMSwgcjIpIHtcbiAgICAgICAgcmV0dXJuIChjbXAocjEubG93ZXIsIHIyLmxvd2VyKSA9PT0gMCAmJlxuICAgICAgICAgICAgY21wKHIxLnVwcGVyLCByMi51cHBlcikgPT09IDAgJiZcbiAgICAgICAgICAgICEhcjEubG93ZXJPcGVuID09PSAhIXIyLmxvd2VyT3BlbiAmJlxuICAgICAgICAgICAgISFyMS51cHBlck9wZW4gPT09ICEhcjIudXBwZXJPcGVuKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wYXJlTG93ZXJzKGxvd2VyMSwgbG93ZXIyLCBsb3dlck9wZW4xLCBsb3dlck9wZW4yKSB7XG4gICAgICAgIGlmIChsb3dlcjEgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBsb3dlcjIgIT09IHVuZGVmaW5lZCA/IC0xIDogMDtcbiAgICAgICAgaWYgKGxvd2VyMiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIHZhciBjID0gY21wKGxvd2VyMSwgbG93ZXIyKTtcbiAgICAgICAgaWYgKGMgPT09IDApIHtcbiAgICAgICAgICAgIGlmIChsb3dlck9wZW4xICYmIGxvd2VyT3BlbjIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAobG93ZXJPcGVuMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmIChsb3dlck9wZW4yKVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gY29tcGFyZVVwcGVycyh1cHBlcjEsIHVwcGVyMiwgdXBwZXJPcGVuMSwgdXBwZXJPcGVuMikge1xuICAgICAgICBpZiAodXBwZXIxID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdXBwZXIyICE9PSB1bmRlZmluZWQgPyAxIDogMDtcbiAgICAgICAgaWYgKHVwcGVyMiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB2YXIgYyA9IGNtcCh1cHBlcjEsIHVwcGVyMik7XG4gICAgICAgIGlmIChjID09PSAwKSB7XG4gICAgICAgICAgICBpZiAodXBwZXJPcGVuMSAmJiB1cHBlck9wZW4yKVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgaWYgKHVwcGVyT3BlbjEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKHVwcGVyT3BlbjIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzU3VwZXJSYW5nZShyMSwgcjIpIHtcbiAgICAgICAgcmV0dXJuIChjb21wYXJlTG93ZXJzKHIxLmxvd2VyLCByMi5sb3dlciwgcjEubG93ZXJPcGVuLCByMi5sb3dlck9wZW4pIDw9IDAgJiZcbiAgICAgICAgICAgIGNvbXBhcmVVcHBlcnMocjEudXBwZXIsIHIyLnVwcGVyLCByMS51cHBlck9wZW4sIHIyLnVwcGVyT3BlbikgPj0gMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmluZENvbXBhdGlibGVRdWVyeShkYk5hbWUsIHRhYmxlTmFtZSwgdHlwZSwgcmVxKSB7XG4gICAgICAgIHZhciB0YmxDYWNoZSA9IGNhY2hlW1wiaWRiOi8vXCIuY29uY2F0KGRiTmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZU5hbWUpXTtcbiAgICAgICAgaWYgKCF0YmxDYWNoZSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgdmFyIHF1ZXJpZXMgPSB0YmxDYWNoZS5xdWVyaWVzW3R5cGVdO1xuICAgICAgICBpZiAoIXF1ZXJpZXMpXG4gICAgICAgICAgICByZXR1cm4gW251bGwsIGZhbHNlLCB0YmxDYWNoZSwgbnVsbF07XG4gICAgICAgIHZhciBpbmRleE5hbWUgPSByZXEucXVlcnkgPyByZXEucXVlcnkuaW5kZXgubmFtZSA6IG51bGw7XG4gICAgICAgIHZhciBlbnRyaWVzID0gcXVlcmllc1tpbmRleE5hbWUgfHwgJyddO1xuICAgICAgICBpZiAoIWVudHJpZXMpXG4gICAgICAgICAgICByZXR1cm4gW251bGwsIGZhbHNlLCB0YmxDYWNoZSwgbnVsbF07XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAncXVlcnknOlxuICAgICAgICAgICAgICAgIHZhciBlcXVhbEVudHJ5ID0gZW50cmllcy5maW5kKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50cnkucmVxLmxpbWl0ID09PSByZXEubGltaXQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnJlcS52YWx1ZXMgPT09IHJlcS52YWx1ZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZVJhbmdlc0VxdWFsKGVudHJ5LnJlcS5xdWVyeS5yYW5nZSwgcmVxLnF1ZXJ5LnJhbmdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZXF1YWxFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFsRW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyaWVzLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHZhciBzdXBlckVudHJ5ID0gZW50cmllcy5maW5kKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSAnbGltaXQnIGluIGVudHJ5LnJlcSA/IGVudHJ5LnJlcS5saW1pdCA6IEluZmluaXR5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGxpbWl0ID49IHJlcS5saW1pdCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlcS52YWx1ZXMgPyBlbnRyeS5yZXEudmFsdWVzIDogdHJ1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VwZXJSYW5nZShlbnRyeS5yZXEucXVlcnkucmFuZ2UsIHJlcS5xdWVyeS5yYW5nZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBbc3VwZXJFbnRyeSwgZmFsc2UsIHRibENhY2hlLCBlbnRyaWVzXTtcbiAgICAgICAgICAgIGNhc2UgJ2NvdW50JzpcbiAgICAgICAgICAgICAgICB2YXIgY291bnRRdWVyeSA9IGVudHJpZXMuZmluZChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZVJhbmdlc0VxdWFsKGVudHJ5LnJlcS5xdWVyeS5yYW5nZSwgcmVxLnF1ZXJ5LnJhbmdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvdW50UXVlcnksICEhY291bnRRdWVyeSwgdGJsQ2FjaGUsIGVudHJpZXNdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3Vic2NyaWJlVG9DYWNoZUVudHJ5KGNhY2hlRW50cnksIGNvbnRhaW5lciwgcmVxdWVyeSwgc2lnbmFsKSB7XG4gICAgICAgIGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuYWRkKHJlcXVlcnkpO1xuICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuZGVsZXRlKHJlcXVlcnkpO1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVucXVlRm9yRGVsZXRpb24oY2FjaGVFbnRyeSwgY29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVucXVlRm9yRGVsZXRpb24oY2FjaGVFbnRyeSwgY29udGFpbmVyKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbEFycmF5SXRlbShjb250YWluZXIsIGNhY2hlRW50cnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAzMDAwKTtcbiAgICB9XG5cbiAgICB2YXIgY2FjaGVNaWRkbGV3YXJlID0ge1xuICAgICAgICBzdGFjazogJ2RiY29yZScsXG4gICAgICAgIGxldmVsOiAwLFxuICAgICAgICBuYW1lOiAnQ2FjaGUnLFxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChjb3JlKSB7XG4gICAgICAgICAgICB2YXIgZGJOYW1lID0gY29yZS5zY2hlbWEubmFtZTtcbiAgICAgICAgICAgIHZhciBjb3JlTVcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29yZSksIHsgdHJhbnNhY3Rpb246IGZ1bmN0aW9uIChzdG9yZXMsIG1vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkYnRyYW5zID0gY29yZS50cmFuc2FjdGlvbihzdG9yZXMsIG1vZGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWR3cml0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY18xID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpZ25hbCA9IGFjXzEuc2lnbmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZFRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKHdhc0NvbW1pdHRlZCkgeyByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjXzEuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWR3cml0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFmZmVjdGVkU3Vic2NyaWJlcnNfMSA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzdG9yZXNfMSA9IHN0b3JlczsgX2kgPCBzdG9yZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZU5hbWUgPSBzdG9yZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGJsQ2FjaGUgPSBjYWNoZVtcImlkYjovL1wiLmNvbmNhdChkYk5hbWUsIFwiL1wiKS5jb25jYXQoc3RvcmVOYW1lKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGJsQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBjb3JlLnRhYmxlKHN0b3JlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wcyA9IHRibENhY2hlLm9wdGltaXN0aWNPcHMuZmlsdGVyKGZ1bmN0aW9uIChvcCkgeyByZXR1cm4gb3AudHJhbnMgPT09IGlkYnRyYW5zOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRidHJhbnMuX2V4cGxpY2l0ICYmIHdhc0NvbW1pdHRlZCAmJiBpZGJ0cmFucy5tdXRhdGVkUGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IE9iamVjdC52YWx1ZXModGJsQ2FjaGUucXVlcmllcy5xdWVyeSk7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cmllcyA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgX2QgPSBlbnRyaWVzLnNsaWNlKCk7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYnNTZXRzT3ZlcmxhcChlbnRyeS5vYnNTZXQsIGlkYnRyYW5zLm11dGF0ZWRQYXJ0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKGVudHJpZXMsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAocmVxdWVyeSkgeyByZXR1cm4gYWZmZWN0ZWRTdWJzY3JpYmVyc18xLmFkZChyZXF1ZXJ5KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRibENhY2hlLm9wdGltaXN0aWNPcHMgPSB0YmxDYWNoZS5vcHRpbWlzdGljT3BzLmZpbHRlcihmdW5jdGlvbiAob3ApIHsgcmV0dXJuIG9wLnRyYW5zICE9PSBpZGJ0cmFuczsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9lID0gMCwgX2YgPSBPYmplY3QudmFsdWVzKHRibENhY2hlLnF1ZXJpZXMucXVlcnkpOyBfZSA8IF9mLmxlbmd0aDsgX2UrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJpZXMgPSBfZltfZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfZyA9IDAsIF9oID0gZW50cmllcy5zbGljZSgpOyBfZyA8IF9oLmxlbmd0aDsgX2crKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IF9oW19nXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkucmVzICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRidHJhbnMubXV0YXRlZFBhcnRzXG4gICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXNDb21taXR0ZWQgJiYgIWVudHJ5LmRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJlZXplUmVzdWx0cyA9IE9iamVjdC5pc0Zyb3plbihlbnRyeS5yZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZFJlcyA9IGFwcGx5T3B0aW1pc3RpY09wcyhlbnRyeS5yZXMsIGVudHJ5LnJlcSwgb3BzLCB0YWJsZSwgZW50cnksIGZyZWV6ZVJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKGVudHJpZXMsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiBhZmZlY3RlZFN1YnNjcmliZXJzXzEuYWRkKHJlcXVlcnkpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZFJlcyAhPT0gZW50cnkucmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkucmVzID0gbW9kUmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnByb21pc2UgPSBEZXhpZVByb21pc2UucmVzb2x2ZSh7IHJlc3VsdDogbW9kUmVzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKGVudHJpZXMsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIGFmZmVjdGVkU3Vic2NyaWJlcnNfMS5hZGQocmVxdWVyeSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmZmVjdGVkU3Vic2NyaWJlcnNfMS5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiByZXF1ZXJ5KCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07IH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVuZFRyYW5zYWN0aW9uKGZhbHNlKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVuZFRyYW5zYWN0aW9uKGZhbHNlKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGVuZFRyYW5zYWN0aW9uKHRydWUpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWRidHJhbnM7XG4gICAgICAgICAgICAgICAgfSwgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvd25UYWJsZSA9IGNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1LZXkgPSBkb3duVGFibGUuc2NoZW1hLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZU1XID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGRvd25UYWJsZSksIHsgbXV0YXRlOiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gUFNELnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmltS2V5Lm91dGJvdW5kIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLmRiLl9vcHRpb25zLmNhY2hlID09PSAnZGlzYWJsZWQnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLmV4cGxpY2l0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLmlkYnRyYW5zLm1vZGUgIT09ICdyZWFkd3JpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb3duVGFibGUubXV0YXRlKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YmxDYWNoZSA9IGNhY2hlW1wiaWRiOi8vXCIuY29uY2F0KGRiTmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZU5hbWUpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRibENhY2hlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG93blRhYmxlLm11dGF0ZShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gZG93blRhYmxlLm11dGF0ZShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocmVxLnR5cGUgPT09ICdhZGQnIHx8IHJlcS50eXBlID09PSAncHV0JykgJiYgKHJlcS52YWx1ZXMubGVuZ3RoID49IDUwIHx8IGdldEVmZmVjdGl2ZUtleXMocHJpbUtleSwgcmVxKS5zb21lKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleSA9PSBudWxsOyB9KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXFXaXRoUmVzb2x2ZWRLZXlzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHJlcSksIHsgdmFsdWVzOiByZXEudmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmZhaWx1cmVzW2ldKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVXaXRoS2V5ID0gKChfYSA9IHByaW1LZXkua2V5UGF0aCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCcuJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRlZXBDbG9uZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogX19hc3NpZ24oe30sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKHZhbHVlV2l0aEtleSwgcHJpbUtleS5rZXlQYXRoLCByZXMucmVzdWx0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVdpdGhLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ZWRSZXEgPSBhZGp1c3RPcHRpbWlzdGljRnJvbUZhaWx1cmVzKHRibENhY2hlLCByZXFXaXRoUmVzb2x2ZWRLZXlzLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUub3B0aW1pc3RpY09wcy5wdXNoKGFkanVzdGVkUmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlcS5tdXRhdGVkUGFydHMgJiYgc2lnbmFsU3Vic2NyaWJlcnNMYXppbHkocmVxLm11dGF0ZWRQYXJ0cyk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRibENhY2hlLm9wdGltaXN0aWNPcHMucHVzaChyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEubXV0YXRlZFBhcnRzICYmIHNpZ25hbFN1YnNjcmliZXJzTGF6aWx5KHJlcS5tdXRhdGVkUGFydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5udW1GYWlsdXJlcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0odGJsQ2FjaGUub3B0aW1pc3RpY09wcywgcmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ZWRSZXEgPSBhZGp1c3RPcHRpbWlzdGljRnJvbUZhaWx1cmVzKHRibENhY2hlLCByZXEsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkanVzdGVkUmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRibENhY2hlLm9wdGltaXN0aWNPcHMucHVzaChhZGp1c3RlZFJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5tdXRhdGVkUGFydHMgJiYgc2lnbmFsU3Vic2NyaWJlcnNMYXppbHkocmVxLm11dGF0ZWRQYXJ0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbEFycmF5SXRlbSh0YmxDYWNoZS5vcHRpbWlzdGljT3BzLCByZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm11dGF0ZWRQYXJ0cyAmJiBzaWduYWxTdWJzY3JpYmVyc0xhemlseShyZXEubXV0YXRlZFBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcXVlcnk6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NhY2hhYmxlQ29udGV4dChQU0QsIGRvd25UYWJsZSkgfHwgIWlzQ2FjaGFibGVSZXF1ZXN0KFwicXVlcnlcIiwgcmVxKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5xdWVyeShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmVlemVSZXN1bHRzID0gKChfYSA9IFBTRC50cmFucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRiLl9vcHRpb25zLmNhY2hlKSA9PT0gJ2ltbXV0YWJsZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9iID0gUFNELCByZXF1ZXJ5ID0gX2IucmVxdWVyeSwgc2lnbmFsID0gX2Iuc2lnbmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYyA9IGZpbmRDb21wYXRpYmxlUXVlcnkoZGJOYW1lLCB0YWJsZU5hbWUsICdxdWVyeScsIHJlcSksIGNhY2hlRW50cnkgPSBfY1swXSwgZXhhY3RNYXRjaCA9IF9jWzFdLCB0YmxDYWNoZSA9IF9jWzJdLCBjb250YWluZXIgPSBfY1szXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVFbnRyeSAmJiBleGFjdE1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkub2JzU2V0ID0gcmVxLm9ic1NldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gZG93blRhYmxlLnF1ZXJ5KHJlcSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkucmVzID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyZWV6ZVJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJlc3VsdC5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShyZXN1bHRbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMucmVzdWx0ID0gZGVlcENsb25lKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIgJiYgY2FjaGVFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0oY29udGFpbmVyLCBjYWNoZUVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzU2V0OiByZXEub2JzU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzOiBuZXcgU2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncXVlcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxOiByZXEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJ0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5wdXNoKGNhY2hlRW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyID0gW2NhY2hlRW50cnldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YmxDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRibENhY2hlID0gY2FjaGVbXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeToge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ianM6IG5ldyBNYXAoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pc3RpY09wczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmFsZWRQYXJ0czoge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUucXVlcmllcy5xdWVyeVtyZXEucXVlcnkuaW5kZXgubmFtZSB8fCAnJ10gPSBjb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlVG9DYWNoZUVudHJ5KGNhY2hlRW50cnksIGNvbnRhaW5lciwgcmVxdWVyeSwgc2lnbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeS5wcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBhcHBseU9wdGltaXN0aWNPcHMocmVzLnJlc3VsdCwgcmVxLCB0YmxDYWNoZSA9PT0gbnVsbCB8fCB0YmxDYWNoZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGJsQ2FjaGUub3B0aW1pc3RpY09wcywgZG93blRhYmxlLCBjYWNoZUVudHJ5LCBmcmVlemVSZXN1bHRzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZU1XO1xuICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICByZXR1cm4gY29yZU1XO1xuICAgICAgICB9LFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB2aXBpZnkodGFyZ2V0LCB2aXBEYikge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHRhcmdldCwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAnZGInKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlwRGI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgRGV4aWUkMSA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEZXhpZShuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5fbWlkZGxld2FyZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMudmVybm8gPSAwO1xuICAgICAgICAgICAgdmFyIGRlcHMgPSBEZXhpZS5kZXBlbmRlbmNpZXM7XG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucyA9IF9fYXNzaWduKHtcbiAgICAgICAgICAgICAgICBhZGRvbnM6IERleGllLmFkZG9ucywgYXV0b09wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgaW5kZXhlZERCOiBkZXBzLmluZGV4ZWREQiwgSURCS2V5UmFuZ2U6IGRlcHMuSURCS2V5UmFuZ2UsIGNhY2hlOiAnY2xvbmVkJyB9LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuX2RlcHMgPSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZERCOiBvcHRpb25zLmluZGV4ZWREQixcbiAgICAgICAgICAgICAgICBJREJLZXlSYW5nZTogb3B0aW9ucy5JREJLZXlSYW5nZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBhZGRvbnMgPSBvcHRpb25zLmFkZG9ucztcbiAgICAgICAgICAgIHRoaXMuX2RiU2NoZW1hID0ge307XG4gICAgICAgICAgICB0aGlzLl92ZXJzaW9ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fc3RvcmVOYW1lcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fYWxsVGFibGVzID0ge307XG4gICAgICAgICAgICB0aGlzLmlkYmRiID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX25vdmlwID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBkYk9wZW5FcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICBpc0JlaW5nT3BlbmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvblJlYWR5QmVpbmdGaXJlZDogbnVsbCxcbiAgICAgICAgICAgICAgICBvcGVuQ29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRiUmVhZHlSZXNvbHZlOiBub3AsXG4gICAgICAgICAgICAgICAgZGJSZWFkeVByb21pc2U6IG51bGwsXG4gICAgICAgICAgICAgICAgY2FuY2VsT3Blbjogbm9wLFxuICAgICAgICAgICAgICAgIG9wZW5DYW5jZWxsZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgYXV0b1NjaGVtYTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBQUjEzOThfbWF4TG9vcDogMyxcbiAgICAgICAgICAgICAgICBhdXRvT3Blbjogb3B0aW9ucy5hdXRvT3BlbixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzdGF0ZS5kYlJlYWR5UHJvbWlzZSA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kYlJlYWR5UmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXRlLm9wZW5DYW5jZWxsZXIgPSBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5jYW5jZWxPcGVuID0gcmVqZWN0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgICAgIHRoaXMub24gPSBFdmVudHModGhpcywgXCJwb3B1bGF0ZVwiLCBcImJsb2NrZWRcIiwgXCJ2ZXJzaW9uY2hhbmdlXCIsIFwiY2xvc2VcIiwgeyByZWFkeTogW3Byb21pc2FibGVDaGFpbiwgbm9wXSB9KTtcbiAgICAgICAgICAgIHRoaXMub24ucmVhZHkuc3Vic2NyaWJlID0gb3ZlcnJpZGUodGhpcy5vbi5yZWFkeS5zdWJzY3JpYmUsIGZ1bmN0aW9uIChzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN1YnNjcmliZXIsIGJTdGlja3kpIHtcbiAgICAgICAgICAgICAgICAgICAgRGV4aWUudmlwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IF90aGlzLl9zdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5vcGVuQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmRiT3BlbkVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZXhpZVByb21pc2UucmVzb2x2ZSgpLnRoZW4oc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJTdGlja3kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUub25SZWFkeUJlaW5nRmlyZWQucHVzaChzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYlN0aWNreSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYl8xID0gX3RoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFiU3RpY2t5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmUoZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYl8xLm9uLnJlYWR5LnVuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGJfMS5vbi5yZWFkeS51bnN1YnNjcmliZSh1bnN1YnNjcmliZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLkNvbGxlY3Rpb24gPSBjcmVhdGVDb2xsZWN0aW9uQ29uc3RydWN0b3IodGhpcyk7XG4gICAgICAgICAgICB0aGlzLlRhYmxlID0gY3JlYXRlVGFibGVDb25zdHJ1Y3Rvcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuVHJhbnNhY3Rpb24gPSBjcmVhdGVUcmFuc2FjdGlvbkNvbnN0cnVjdG9yKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5WZXJzaW9uID0gY3JlYXRlVmVyc2lvbkNvbnN0cnVjdG9yKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5XaGVyZUNsYXVzZSA9IGNyZWF0ZVdoZXJlQ2xhdXNlQ29uc3RydWN0b3IodGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9uKFwidmVyc2lvbmNoYW5nZVwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXYubmV3VmVyc2lvbiA+IDApXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkFub3RoZXIgY29ubmVjdGlvbiB3YW50cyB0byB1cGdyYWRlIGRhdGFiYXNlICdcIi5jb25jYXQoX3RoaXMubmFtZSwgXCInLiBDbG9zaW5nIGRiIG5vdyB0byByZXN1bWUgdGhlIHVwZ3JhZGUuXCIpKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkFub3RoZXIgY29ubmVjdGlvbiB3YW50cyB0byBkZWxldGUgZGF0YWJhc2UgJ1wiLmNvbmNhdChfdGhpcy5uYW1lLCBcIicuIENsb3NpbmcgZGIgbm93IHRvIHJlc3VtZSB0aGUgZGVsZXRlIHJlcXVlc3QuXCIpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZSh7IGRpc2FibGVBdXRvT3BlbjogZmFsc2UgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub24oXCJibG9ja2VkXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIGlmICghZXYubmV3VmVyc2lvbiB8fCBldi5uZXdWZXJzaW9uIDwgZXYub2xkVmVyc2lvbilcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRGV4aWUuZGVsZXRlKCdcIi5jb25jYXQoX3RoaXMubmFtZSwgXCInKSB3YXMgYmxvY2tlZFwiKSk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJVcGdyYWRlICdcIi5jb25jYXQoX3RoaXMubmFtZSwgXCInIGJsb2NrZWQgYnkgb3RoZXIgY29ubmVjdGlvbiBob2xkaW5nIHZlcnNpb24gXCIpLmNvbmNhdChldi5vbGRWZXJzaW9uIC8gMTApKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fbWF4S2V5ID0gZ2V0TWF4S2V5KG9wdGlvbnMuSURCS2V5UmFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAobW9kZSwgc3RvcmVOYW1lcywgZGJzY2hlbWEsIHBhcmVudFRyYW5zYWN0aW9uKSB7IHJldHVybiBuZXcgX3RoaXMuVHJhbnNhY3Rpb24obW9kZSwgc3RvcmVOYW1lcywgZGJzY2hlbWEsIF90aGlzLl9vcHRpb25zLmNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eSwgcGFyZW50VHJhbnNhY3Rpb24pOyB9O1xuICAgICAgICAgICAgdGhpcy5fZmlyZU9uQmxvY2tlZCA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIF90aGlzLm9uKFwiYmxvY2tlZFwiKS5maXJlKGV2KTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLm5hbWUgPT09IF90aGlzLm5hbWUgJiYgYyAhPT0gX3RoaXMgJiYgIWMuX3N0YXRlLnZjRmlyZWQ7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMub24oXCJ2ZXJzaW9uY2hhbmdlXCIpLmZpcmUoZXYpOyB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnVzZShjYWNoZUV4aXN0aW5nVmFsdWVzTWlkZGxld2FyZSk7XG4gICAgICAgICAgICB0aGlzLnVzZShjYWNoZU1pZGRsZXdhcmUpO1xuICAgICAgICAgICAgdGhpcy51c2Uob2JzZXJ2YWJpbGl0eU1pZGRsZXdhcmUpO1xuICAgICAgICAgICAgdGhpcy51c2UodmlydHVhbEluZGV4TWlkZGxld2FyZSk7XG4gICAgICAgICAgICB0aGlzLnVzZShob29rc01pZGRsZXdhcmUpO1xuICAgICAgICAgICAgdmFyIHZpcERCID0gbmV3IFByb3h5KHRoaXMsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChfLCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ192aXAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAndGFibGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YWJsZU5hbWUpIHsgcmV0dXJuIHZpcGlmeShfdGhpcy50YWJsZSh0YWJsZU5hbWUpLCB2aXBEQik7IH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBydiA9IFJlZmxlY3QuZ2V0KF8sIHByb3AsIHJlY2VpdmVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ2IGluc3RhbmNlb2YgVGFibGUpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlwaWZ5KHJ2LCB2aXBEQik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAndGFibGVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBydi5tYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHZpcGlmeSh0LCB2aXBEQik7IH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ19jcmVhdGVUcmFuc2FjdGlvbicpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eCA9IHJ2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcGlmeSh0eCwgdmlwREIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52aXAgPSB2aXBEQjtcbiAgICAgICAgICAgIGFkZG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChhZGRvbikgeyByZXR1cm4gYWRkb24oX3RoaXMpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBEZXhpZS5wcm90b3R5cGUudmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyKSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4odmVyc2lvbk51bWJlcikgfHwgdmVyc2lvbk51bWJlciA8IDAuMSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5UeXBlKFwiR2l2ZW4gdmVyc2lvbiBpcyBub3QgYSBwb3NpdGl2ZSBudW1iZXJcIik7XG4gICAgICAgICAgICB2ZXJzaW9uTnVtYmVyID0gTWF0aC5yb3VuZCh2ZXJzaW9uTnVtYmVyICogMTApIC8gMTA7XG4gICAgICAgICAgICBpZiAodGhpcy5pZGJkYiB8fCB0aGlzLl9zdGF0ZS5pc0JlaW5nT3BlbmVkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlNjaGVtYShcIkNhbm5vdCBhZGQgdmVyc2lvbiB3aGVuIGRhdGFiYXNlIGlzIG9wZW5cIik7XG4gICAgICAgICAgICB0aGlzLnZlcm5vID0gTWF0aC5tYXgodGhpcy52ZXJubywgdmVyc2lvbk51bWJlcik7XG4gICAgICAgICAgICB2YXIgdmVyc2lvbnMgPSB0aGlzLl92ZXJzaW9ucztcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uSW5zdGFuY2UgPSB2ZXJzaW9ucy5maWx0ZXIoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYuX2NmZy52ZXJzaW9uID09PSB2ZXJzaW9uTnVtYmVyOyB9KVswXTtcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uSW5zdGFuY2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZlcnNpb25JbnN0YW5jZTtcbiAgICAgICAgICAgIHZlcnNpb25JbnN0YW5jZSA9IG5ldyB0aGlzLlZlcnNpb24odmVyc2lvbk51bWJlcik7XG4gICAgICAgICAgICB2ZXJzaW9ucy5wdXNoKHZlcnNpb25JbnN0YW5jZSk7XG4gICAgICAgICAgICB2ZXJzaW9ucy5zb3J0KGxvd2VyVmVyc2lvbkZpcnN0KTtcbiAgICAgICAgICAgIHZlcnNpb25JbnN0YW5jZS5zdG9yZXMoe30pO1xuICAgICAgICAgICAgdGhpcy5fc3RhdGUuYXV0b1NjaGVtYSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHZlcnNpb25JbnN0YW5jZTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLl93aGVuUmVhZHkgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuaWRiZGIgJiYgKHRoaXMuX3N0YXRlLm9wZW5Db21wbGV0ZSB8fCBQU0QubGV0VGhyb3VnaCB8fCB0aGlzLl92aXApKSA/IGZuKCkgOiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX3N0YXRlLm9wZW5Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKF90aGlzLl9zdGF0ZS5kYk9wZW5FcnJvcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLl9zdGF0ZS5pc0JlaW5nT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuX3N0YXRlLmF1dG9PcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub3BlbigpLmNhdGNoKG5vcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLl9zdGF0ZS5kYlJlYWR5UHJvbWlzZS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9KS50aGVuKGZuKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gX2Euc3RhY2ssIGNyZWF0ZSA9IF9hLmNyZWF0ZSwgbGV2ZWwgPSBfYS5sZXZlbCwgbmFtZSA9IF9hLm5hbWU7XG4gICAgICAgICAgICBpZiAobmFtZSlcbiAgICAgICAgICAgICAgICB0aGlzLnVudXNlKHsgc3RhY2s6IHN0YWNrLCBuYW1lOiBuYW1lIH0pO1xuICAgICAgICAgICAgdmFyIG1pZGRsZXdhcmVzID0gdGhpcy5fbWlkZGxld2FyZXNbc3RhY2tdIHx8ICh0aGlzLl9taWRkbGV3YXJlc1tzdGFja10gPSBbXSk7XG4gICAgICAgICAgICBtaWRkbGV3YXJlcy5wdXNoKHsgc3RhY2s6IHN0YWNrLCBjcmVhdGU6IGNyZWF0ZSwgbGV2ZWw6IGxldmVsID09IG51bGwgPyAxMCA6IGxldmVsLCBuYW1lOiBuYW1lIH0pO1xuICAgICAgICAgICAgbWlkZGxld2FyZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5sZXZlbCAtIGIubGV2ZWw7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS51bnVzZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gX2Euc3RhY2ssIG5hbWUgPSBfYS5uYW1lLCBjcmVhdGUgPSBfYS5jcmVhdGU7XG4gICAgICAgICAgICBpZiAoc3RhY2sgJiYgdGhpcy5fbWlkZGxld2FyZXNbc3RhY2tdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWlkZGxld2FyZXNbc3RhY2tdID0gdGhpcy5fbWlkZGxld2FyZXNbc3RhY2tdLmZpbHRlcihmdW5jdGlvbiAobXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZSA/IG13LmNyZWF0ZSAhPT0gY3JlYXRlIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPyBtdy5uYW1lICE9PSBuYW1lIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdXNlUFNEKGdsb2JhbFBTRCxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRleGllT3BlbihfdGhpcyk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuX2Nsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5fc3RhdGU7XG4gICAgICAgICAgICB2YXIgaWR4ID0gY29ubmVjdGlvbnMuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gMClcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlkYmRiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGJkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAgICAgdGhpcy5pZGJkYiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kYlJlYWR5UHJvbWlzZSA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJSZWFkeVJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5DYW5jZWxsZXIgPSBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY2FuY2VsT3BlbiA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8geyBkaXNhYmxlQXV0b09wZW46IHRydWUgfSA6IF9hLCBkaXNhYmxlQXV0b09wZW4gPSBfYi5kaXNhYmxlQXV0b09wZW47XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZTtcbiAgICAgICAgICAgIGlmIChkaXNhYmxlQXV0b09wZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNCZWluZ09wZW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jYW5jZWxPcGVuKG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHN0YXRlLmF1dG9PcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3RhdGUuZGJPcGVuRXJyb3IgPSBuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5hdXRvT3BlbiA9IHRoaXMuX29wdGlvbnMuYXV0b09wZW4gfHxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNCZWluZ09wZW5lZDtcbiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kYk9wZW5FcnJvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoY2xvc2VPcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGNsb3NlT3B0aW9ucyA9PT0gdm9pZCAwKSB7IGNsb3NlT3B0aW9ucyA9IHsgZGlzYWJsZUF1dG9PcGVuOiB0cnVlIH07IH1cbiAgICAgICAgICAgIHZhciBoYXNJbnZhbGlkQXJndW1lbnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ29iamVjdCc7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9EZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlKGNsb3NlT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBfdGhpcy5fZGVwcy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoX3RoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vbkRhdGFiYXNlRGVsZXRlZChfdGhpcy5fZGVwcywgX3RoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25ibG9ja2VkID0gX3RoaXMuX2ZpcmVPbkJsb2NrZWQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzSW52YWxpZEFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiSW52YWxpZCBjbG9zZU9wdGlvbnMgYXJndW1lbnQgdG8gZGIuZGVsZXRlKClcIik7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJSZWFkeVByb21pc2UudGhlbihkb0RlbGV0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb0RlbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuYmFja2VuZERCID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWRiZGI7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5pc09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pZGJkYiAhPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLmhhc0JlZW5DbG9zZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJPcGVuRXJyb3IgPSB0aGlzLl9zdGF0ZS5kYk9wZW5FcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYk9wZW5FcnJvciAmJiAoZGJPcGVuRXJyb3IubmFtZSA9PT0gJ0RhdGFiYXNlQ2xvc2VkJyk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5oYXNGYWlsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGUuZGJPcGVuRXJyb3IgIT09IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5keW5hbWljYWxseU9wZW5lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZS5hdXRvU2NoZW1hO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV4aWUucHJvdG90eXBlLCBcInRhYmxlc1wiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzKHRoaXMuX2FsbFRhYmxlcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBfdGhpcy5fYWxsVGFibGVzW25hbWVdOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBleHRyYWN0VHJhbnNhY3Rpb25BcmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5fdHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAobW9kZSwgdGFibGVzLCBzY29wZUZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcGFyZW50VHJhbnNhY3Rpb24gPSBQU0QudHJhbnM7XG4gICAgICAgICAgICBpZiAoIXBhcmVudFRyYW5zYWN0aW9uIHx8IHBhcmVudFRyYW5zYWN0aW9uLmRiICE9PSB0aGlzIHx8IG1vZGUuaW5kZXhPZignIScpICE9PSAtMSlcbiAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB2YXIgb25seUlmQ29tcGF0aWJsZSA9IG1vZGUuaW5kZXhPZignPycpICE9PSAtMTtcbiAgICAgICAgICAgIG1vZGUgPSBtb2RlLnJlcGxhY2UoJyEnLCAnJykucmVwbGFjZSgnPycsICcnKTtcbiAgICAgICAgICAgIHZhciBpZGJNb2RlLCBzdG9yZU5hbWVzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdG9yZU5hbWVzID0gdGFibGVzLm1hcChmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHRhYmxlIGluc3RhbmNlb2YgX3RoaXMuVGFibGUgPyB0YWJsZS5uYW1lIDogdGFibGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RvcmVOYW1lICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRhYmxlIGFyZ3VtZW50IHRvIERleGllLnRyYW5zYWN0aW9uKCkuIE9ubHkgVGFibGUgb3IgU3RyaW5nIGFyZSBhbGxvd2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVOYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlID09IFwiclwiIHx8IG1vZGUgPT09IFJFQURPTkxZKVxuICAgICAgICAgICAgICAgICAgICBpZGJNb2RlID0gUkVBRE9OTFk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PSBcInJ3XCIgfHwgbW9kZSA9PSBSRUFEV1JJVEUpXG4gICAgICAgICAgICAgICAgICAgIGlkYk1vZGUgPSBSRUFEV1JJVEU7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJJbnZhbGlkIHRyYW5zYWN0aW9uIG1vZGU6IFwiICsgbW9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbi5tb2RlID09PSBSRUFET05MWSAmJiBpZGJNb2RlID09PSBSRUFEV1JJVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmx5SWZDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50VHJhbnNhY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlN1YlRyYW5zYWN0aW9uKFwiQ2Fubm90IGVudGVyIGEgc3ViLXRyYW5zYWN0aW9uIHdpdGggUkVBRFdSSVRFIG1vZGUgd2hlbiBwYXJlbnQgdHJhbnNhY3Rpb24gaXMgUkVBRE9OTFlcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbiAmJiBwYXJlbnRUcmFuc2FjdGlvbi5zdG9yZU5hbWVzLmluZGV4T2Yoc3RvcmVOYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ubHlJZkNvbXBhdGlibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TdWJUcmFuc2FjdGlvbihcIlRhYmxlIFwiICsgc3RvcmVOYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiBub3QgaW5jbHVkZWQgaW4gcGFyZW50IHRyYW5zYWN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob25seUlmQ29tcGF0aWJsZSAmJiBwYXJlbnRUcmFuc2FjdGlvbiAmJiAhcGFyZW50VHJhbnNhY3Rpb24uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnRUcmFuc2FjdGlvbiA/XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uLl9wcm9taXNlKG51bGwsIGZ1bmN0aW9uIChfLCByZWplY3QpIHsgcmVqZWN0KGUpOyB9KSA6XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdGlvbihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbnRlclRyYW5zYWN0aW9uID0gZW50ZXJUcmFuc2FjdGlvblNjb3BlLmJpbmQobnVsbCwgdGhpcywgaWRiTW9kZSwgc3RvcmVOYW1lcywgcGFyZW50VHJhbnNhY3Rpb24sIHNjb3BlRnVuYyk7XG4gICAgICAgICAgICByZXR1cm4gKHBhcmVudFRyYW5zYWN0aW9uID9cbiAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbi5fcHJvbWlzZShpZGJNb2RlLCBlbnRlclRyYW5zYWN0aW9uLCBcImxvY2tcIikgOlxuICAgICAgICAgICAgICAgIFBTRC50cmFucyA/XG4gICAgICAgICAgICAgICAgICAgIHVzZVBTRChQU0QudHJhbnNsZXNzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fd2hlblJlYWR5KGVudGVyVHJhbnNhY3Rpb24pOyB9KSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3doZW5SZWFkeShlbnRlclRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS50YWJsZSA9IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgIGlmICghaGFzT3duKHRoaXMuX2FsbFRhYmxlcywgdGFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRUYWJsZShcIlRhYmxlIFwiLmNvbmNhdCh0YWJsZU5hbWUsIFwiIGRvZXMgbm90IGV4aXN0XCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbGxUYWJsZXNbdGFibGVOYW1lXTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERleGllO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgc3ltYm9sT2JzZXJ2YWJsZSA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJvYnNlcnZhYmxlXCIgaW4gU3ltYm9sXG4gICAgICAgID8gU3ltYm9sLm9ic2VydmFibGVcbiAgICAgICAgOiBcIkBAb2JzZXJ2YWJsZVwiO1xuICAgIHZhciBPYnNlcnZhYmxlID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgICAgIH1cbiAgICAgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHgsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZSgheCB8fCB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geyBuZXh0OiB4LCBlcnJvcjogZXJyb3IsIGNvbXBsZXRlOiBjb21wbGV0ZSB9IDogeCk7XG4gICAgICAgIH07XG4gICAgICAgIE9ic2VydmFibGUucHJvdG90eXBlW3N5bWJvbE9ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYnNlcnZhYmxlO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgZG9tRGVwcztcbiAgICB0cnkge1xuICAgICAgICBkb21EZXBzID0ge1xuICAgICAgICAgICAgaW5kZXhlZERCOiBfZ2xvYmFsLmluZGV4ZWREQiB8fCBfZ2xvYmFsLm1vekluZGV4ZWREQiB8fCBfZ2xvYmFsLndlYmtpdEluZGV4ZWREQiB8fCBfZ2xvYmFsLm1zSW5kZXhlZERCLFxuICAgICAgICAgICAgSURCS2V5UmFuZ2U6IF9nbG9iYWwuSURCS2V5UmFuZ2UgfHwgX2dsb2JhbC53ZWJraXRJREJLZXlSYW5nZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBkb21EZXBzID0geyBpbmRleGVkREI6IG51bGwsIElEQktleVJhbmdlOiBudWxsIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGl2ZVF1ZXJ5KHF1ZXJpZXIpIHtcbiAgICAgICAgdmFyIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHZhciBjdXJyZW50VmFsdWU7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICB2YXIgc2NvcGVGdW5jSXNBc3luYyA9IGlzQXN5bmNGdW5jdGlvbihxdWVyaWVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGUoY3R4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHdhc1Jvb3RFeGVjID0gYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBydiA9IG5ld1Njb3BlKHF1ZXJpZXIsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydiA9IHJ2LmZpbmFsbHkoZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHdhc1Jvb3RFeGVjICYmIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsb3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGFib3J0Q29udHJvbGxlcjtcbiAgICAgICAgICAgIHZhciBhY2N1bU11dHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50T2JzID0ge307XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xuICAgICAgICAgICAgICAgIGdldCBjbG9zZWQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9zZWQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydGVkTGlzdGVuaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRXZlbnRzLnN0b3JhZ2VtdXRhdGVkLnVuc3Vic2NyaWJlKG11dGF0aW9uTGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb2JzZXJ2ZXIuc3RhcnQgJiYgb2JzZXJ2ZXIuc3RhcnQoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHZhciBzdGFydGVkTGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgZG9RdWVyeSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4ZWNJbkdsb2JhbENvbnRleHQoX2RvUXVlcnkpOyB9O1xuICAgICAgICAgICAgZnVuY3Rpb24gc2hvdWxkTm90aWZ5KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYnNTZXRzT3ZlcmxhcChjdXJyZW50T2JzLCBhY2N1bU11dHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG11dGF0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbiAocGFydHMpIHtcbiAgICAgICAgICAgICAgICBleHRlbmRPYnNlcnZhYmlsaXR5U2V0KGFjY3VtTXV0cywgcGFydHMpO1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGROb3RpZnkoKSkge1xuICAgICAgICAgICAgICAgICAgICBkb1F1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBfZG9RdWVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VkIHx8XG4gICAgICAgICAgICAgICAgICAgICFkb21EZXBzLmluZGV4ZWREQilcbiAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjY3VtTXV0cyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBzdWJzY3IgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyOiBzdWJzY3IsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVyeTogZG9RdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcmllcjogcXVlcmllcixcbiAgICAgICAgICAgICAgICAgICAgdHJhbnM6IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBleGVjdXRlKGN0eCk7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHJldCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkIHx8IGN0eC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFjY3VtTXV0cyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50T2JzID0gc3Vic2NyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9iamVjdElzRW1wdHkoY3VycmVudE9icykgJiYgIXN0YXJ0ZWRMaXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbEV2ZW50cyhERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSwgbXV0YXRpb25MaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydGVkTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBleGVjSW5HbG9iYWxDb250ZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuICFjbG9zZWQgJiYgb2JzZXJ2ZXIubmV4dCAmJiBvYnNlcnZlci5uZXh0KHJlc3VsdCk7IH0pO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFbJ0RhdGFiYXNlQ2xvc2VkRXJyb3InLCAnQWJvcnRFcnJvciddLmluY2x1ZGVzKGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY0luR2xvYmFsQ29udGV4dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGRvUXVlcnksIDApO1xuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICAgIG9ic2VydmFibGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBoYXNWYWx1ZTsgfTtcbiAgICAgICAgb2JzZXJ2YWJsZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGN1cnJlbnRWYWx1ZTsgfTtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfVxuXG4gICAgdmFyIERleGllID0gRGV4aWUkMTtcbiAgICBwcm9wcyhEZXhpZSwgX19hc3NpZ24oX19hc3NpZ24oe30sIGZ1bGxOYW1lRXhjZXB0aW9ucyksIHtcbiAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoZGF0YWJhc2VOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGIgPSBuZXcgRGV4aWUoZGF0YWJhc2VOYW1lLCB7IGFkZG9uczogW10gfSk7XG4gICAgICAgICAgICByZXR1cm4gZGIuZGVsZXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4aXN0czogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWUobmFtZSwgeyBhZGRvbnM6IFtdIH0pLm9wZW4oKS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KS5jYXRjaCgnTm9TdWNoRGF0YWJhc2VFcnJvcicsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0RGF0YWJhc2VOYW1lczogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXREYXRhYmFzZU5hbWVzKERleGllLmRlcGVuZGVuY2llcykudGhlbihjYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmluZUNsYXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBDbGFzcyhjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIENsYXNzO1xuICAgICAgICB9LCBpZ25vcmVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKHNjb3BlRnVuYykge1xuICAgICAgICAgICAgcmV0dXJuIFBTRC50cmFucyA/XG4gICAgICAgICAgICAgICAgdXNlUFNEKFBTRC50cmFuc2xlc3MsIHNjb3BlRnVuYykgOlxuICAgICAgICAgICAgICAgIHNjb3BlRnVuYygpO1xuICAgICAgICB9LCB2aXA6IHZpcCwgYXN5bmM6IGZ1bmN0aW9uIChnZW5lcmF0b3JGbikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBhd2FpdEl0ZXJhdG9yKGdlbmVyYXRvckZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJ2IHx8IHR5cGVvZiBydi50aGVuICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sIHNwYXduOiBmdW5jdGlvbiAoZ2VuZXJhdG9yRm4sIGFyZ3MsIHRoaXopIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gYXdhaXRJdGVyYXRvcihnZW5lcmF0b3JGbi5hcHBseSh0aGl6LCBhcmdzIHx8IFtdKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFydiB8fCB0eXBlb2YgcnYudGhlbiAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRUcmFuc2FjdGlvbjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBQU0QudHJhbnMgfHwgbnVsbDsgfVxuICAgICAgICB9LCB3YWl0Rm9yOiBmdW5jdGlvbiAocHJvbWlzZU9yRnVuY3Rpb24sIG9wdGlvbmFsVGltZW91dCkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBEZXhpZVByb21pc2UucmVzb2x2ZSh0eXBlb2YgcHJvbWlzZU9yRnVuY3Rpb24gPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgICAgIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKHByb21pc2VPckZ1bmN0aW9uKSA6XG4gICAgICAgICAgICAgICAgcHJvbWlzZU9yRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgLnRpbWVvdXQob3B0aW9uYWxUaW1lb3V0IHx8IDYwMDAwKTtcbiAgICAgICAgICAgIHJldHVybiBQU0QudHJhbnMgP1xuICAgICAgICAgICAgICAgIFBTRC50cmFucy53YWl0Rm9yKHByb21pc2UpIDpcbiAgICAgICAgICAgICAgICBwcm9taXNlO1xuICAgICAgICB9LFxuICAgICAgICBQcm9taXNlOiBEZXhpZVByb21pc2UsXG4gICAgICAgIGRlYnVnOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlYnVnOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBzZXREZWJ1Zyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlcml2ZTogZGVyaXZlLCBleHRlbmQ6IGV4dGVuZCwgcHJvcHM6IHByb3BzLCBvdmVycmlkZTogb3ZlcnJpZGUsXG4gICAgICAgIEV2ZW50czogRXZlbnRzLCBvbjogZ2xvYmFsRXZlbnRzLCBsaXZlUXVlcnk6IGxpdmVRdWVyeSwgZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldDogZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldCxcbiAgICAgICAgZ2V0QnlLZXlQYXRoOiBnZXRCeUtleVBhdGgsIHNldEJ5S2V5UGF0aDogc2V0QnlLZXlQYXRoLCBkZWxCeUtleVBhdGg6IGRlbEJ5S2V5UGF0aCwgc2hhbGxvd0Nsb25lOiBzaGFsbG93Q2xvbmUsIGRlZXBDbG9uZTogZGVlcENsb25lLCBnZXRPYmplY3REaWZmOiBnZXRPYmplY3REaWZmLCBjbXA6IGNtcCwgYXNhcDogYXNhcCQxLFxuICAgICAgICBtaW5LZXk6IG1pbktleSxcbiAgICAgICAgYWRkb25zOiBbXSxcbiAgICAgICAgY29ubmVjdGlvbnM6IGNvbm5lY3Rpb25zLFxuICAgICAgICBlcnJuYW1lczogZXJybmFtZXMsXG4gICAgICAgIGRlcGVuZGVuY2llczogZG9tRGVwcywgY2FjaGU6IGNhY2hlLFxuICAgICAgICBzZW1WZXI6IERFWElFX1ZFUlNJT04sIHZlcnNpb246IERFWElFX1ZFUlNJT04uc3BsaXQoJy4nKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobikgeyByZXR1cm4gcGFyc2VJbnQobik7IH0pXG4gICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChwLCBjLCBpKSB7IHJldHVybiBwICsgKGMgLyBNYXRoLnBvdygxMCwgaSAqIDIpKTsgfSkgfSkpO1xuICAgIERleGllLm1heEtleSA9IGdldE1heEtleShEZXhpZS5kZXBlbmRlbmNpZXMuSURCS2V5UmFuZ2UpO1xuXG4gICAgaWYgKHR5cGVvZiBkaXNwYXRjaEV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZ2xvYmFsRXZlbnRzKERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FLCBmdW5jdGlvbiAodXBkYXRlZFBhcnRzKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BhZ2F0aW5nTG9jYWxseSkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudF8xO1xuICAgICAgICAgICAgICAgIGV2ZW50XzEgPSBuZXcgQ3VzdG9tRXZlbnQoU1RPUkFHRV9NVVRBVEVEX0RPTV9FVkVOVF9OQU1FLCB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDogdXBkYXRlZFBhcnRzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvcGFnYXRpbmdMb2NhbGx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50KGV2ZW50XzEpO1xuICAgICAgICAgICAgICAgIHByb3BhZ2F0aW5nTG9jYWxseSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihTVE9SQUdFX01VVEFURURfRE9NX0VWRU5UX05BTUUsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGRldGFpbCA9IF9hLmRldGFpbDtcbiAgICAgICAgICAgIGlmICghcHJvcGFnYXRpbmdMb2NhbGx5KSB7XG4gICAgICAgICAgICAgICAgcHJvcGFnYXRlTG9jYWxseShkZXRhaWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcGFnYXRlTG9jYWxseSh1cGRhdGVQYXJ0cykge1xuICAgICAgICB2YXIgd2FzTWUgPSBwcm9wYWdhdGluZ0xvY2FsbHk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9wYWdhdGluZ0xvY2FsbHkgPSB0cnVlO1xuICAgICAgICAgICAgZ2xvYmFsRXZlbnRzLnN0b3JhZ2VtdXRhdGVkLmZpcmUodXBkYXRlUGFydHMpO1xuICAgICAgICAgICAgc2lnbmFsU3Vic2NyaWJlcnNOb3codXBkYXRlUGFydHMsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgcHJvcGFnYXRpbmdMb2NhbGx5ID0gd2FzTWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHByb3BhZ2F0aW5nTG9jYWxseSA9IGZhbHNlO1xuXG4gICAgdmFyIGJjO1xuICAgIHZhciBjcmVhdGVCQyA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBpZiAodHlwZW9mIEJyb2FkY2FzdENoYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0ZUJDID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmMgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbChTVE9SQUdFX01VVEFURURfRE9NX0VWRU5UX05BTUUpO1xuICAgICAgICAgICAgYmMub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2KSB7IHJldHVybiBldi5kYXRhICYmIHByb3BhZ2F0ZUxvY2FsbHkoZXYuZGF0YSk7IH07XG4gICAgICAgIH07XG4gICAgICAgIGNyZWF0ZUJDKCk7XG4gICAgICAgIGlmICh0eXBlb2YgYmMudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGJjLnVucmVmKCk7XG4gICAgICAgIH1cbiAgICAgICAgZ2xvYmFsRXZlbnRzKERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FLCBmdW5jdGlvbiAoY2hhbmdlZFBhcnRzKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BhZ2F0aW5nTG9jYWxseSkge1xuICAgICAgICAgICAgICAgIGJjLnBvc3RNZXNzYWdlKGNoYW5nZWRQYXJ0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghRGV4aWUkMS5kaXNhYmxlQmZDYWNoZSAmJiBldmVudC5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVidWcpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0RleGllOiBoYW5kbGluZyBwZXJzaXN0ZWQgcGFnZWhpZGUnKTtcbiAgICAgICAgICAgICAgICBiYyA9PT0gbnVsbCB8fCBiYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbm5lY3Rpb25zXzEgPSBjb25uZWN0aW9uczsgX2kgPCBjb25uZWN0aW9uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGIgPSBjb25uZWN0aW9uc18xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoeyBkaXNhYmxlQXV0b09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VzaG93JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIURleGllJDEuZGlzYWJsZUJmQ2FjaGUgJiYgZXZlbnQucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdEZXhpZTogaGFuZGxpbmcgcGVyc2lzdGVkIHBhZ2VzaG93Jyk7XG4gICAgICAgICAgICAgICAgY3JlYXRlQkMoKTtcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVMb2NhbGx5KHsgYWxsOiBuZXcgUmFuZ2VTZXQoLUluZmluaXR5LCBbW11dKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IGFkZDogdmFsdWUgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IHJlbW92ZTogdmFsdWUgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVwbGFjZVByZWZpeChhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IHJlcGxhY2VQcmVmaXg6IFthLCBiXSB9KTtcbiAgICB9XG5cbiAgICBEZXhpZVByb21pc2UucmVqZWN0aW9uTWFwcGVyID0gbWFwRXJyb3I7XG4gICAgc2V0RGVidWcoZGVidWcpO1xuXG4gICAgdmFyIG5hbWVkRXhwb3J0cyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICAgICAgX19wcm90b19fOiBudWxsLFxuICAgICAgICBEZXhpZTogRGV4aWUkMSxcbiAgICAgICAgbGl2ZVF1ZXJ5OiBsaXZlUXVlcnksXG4gICAgICAgIEVudGl0eTogRW50aXR5LFxuICAgICAgICBjbXA6IGNtcCxcbiAgICAgICAgUHJvcE1vZGlmaWNhdGlvbjogUHJvcE1vZGlmaWNhdGlvbixcbiAgICAgICAgcmVwbGFjZVByZWZpeDogcmVwbGFjZVByZWZpeCxcbiAgICAgICAgYWRkOiBhZGQsXG4gICAgICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgICAgICAnZGVmYXVsdCc6IERleGllJDEsXG4gICAgICAgIFJhbmdlU2V0OiBSYW5nZVNldCxcbiAgICAgICAgbWVyZ2VSYW5nZXM6IG1lcmdlUmFuZ2VzLFxuICAgICAgICByYW5nZXNPdmVybGFwOiByYW5nZXNPdmVybGFwXG4gICAgfSk7XG5cbiAgICBfX2Fzc2lnbihEZXhpZSQxLCBuYW1lZEV4cG9ydHMsIHsgZGVmYXVsdDogRGV4aWUkMSB9KTtcblxuICAgIHJldHVybiBEZXhpZSQxO1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZXhpZS5qcy5tYXBcbiIsIi8vIE1ha2luZyB0aGUgbW9kdWxlIHZlcnNpb24gY29uc3VtYWJsZSB2aWEgcmVxdWlyZSAtIHRvIHByb2hpYml0XG4vLyBtdWx0aXBsZSBvY2N1cnJhbmNpZXMgb2YgdGhlIHNhbWUgbW9kdWxlIGluIHRoZSBzYW1lIGFwcFxuLy8gKGR1YWwgcGFja2FnZSBoYXphcmQsIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcGFja2FnZXMuaHRtbCNkdWFsLXBhY2thZ2UtaGF6YXJkKVxuaW1wb3J0IF9EZXhpZSBmcm9tIFwiLi9kaXN0L2RleGllLmpzXCI7XG5jb25zdCBEZXhpZVN5bWJvbCA9IFN5bWJvbC5mb3IoXCJEZXhpZVwiKTtcbmNvbnN0IERleGllID0gZ2xvYmFsVGhpc1tEZXhpZVN5bWJvbF0gfHwgKGdsb2JhbFRoaXNbRGV4aWVTeW1ib2xdID0gX0RleGllKTtcbmlmIChfRGV4aWUuc2VtVmVyICE9PSBEZXhpZS5zZW1WZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFR3byBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgRGV4aWUgbG9hZGVkIGluIHRoZSBzYW1lIGFwcDogJHtfRGV4aWUuc2VtVmVyfSBhbmQgJHtEZXhpZS5zZW1WZXJ9YCk7XG59XG5jb25zdCB7IGxpdmVRdWVyeSwgbWVyZ2VSYW5nZXMsIHJhbmdlc092ZXJsYXAsIFJhbmdlU2V0LCBjbXAsIEVudGl0eSxcbiAgICBQcm9wTW9kaWZpY2F0aW9uLCByZXBsYWNlUHJlZml4LCBhZGQsIHJlbW92ZSB9ID0gRGV4aWU7XG5leHBvcnQgeyBsaXZlUXVlcnksIG1lcmdlUmFuZ2VzLCByYW5nZXNPdmVybGFwLCBSYW5nZVNldCwgY21wLCBEZXhpZSwgRW50aXR5LFxuICAgIFByb3BNb2RpZmljYXRpb24sIHJlcGxhY2VQcmVmaXgsIGFkZCwgcmVtb3ZlIH07XG5leHBvcnQgZGVmYXVsdCBEZXhpZTtcbiIsImltcG9ydCBlIGZyb21cInZvaWQtZWxlbWVudHNcIjt2YXIgdD0vXFxzKFteJ1wiL1xccz48XSs/KVtcXHMvPl18KFteXFxzPV0rKT1cXHM/KFwiLio/XCJ8Jy4qPycpL2c7ZnVuY3Rpb24gbihuKXt2YXIgcj17dHlwZTpcInRhZ1wiLG5hbWU6XCJcIix2b2lkRWxlbWVudDohMSxhdHRyczp7fSxjaGlsZHJlbjpbXX0saT1uLm1hdGNoKC88XFwvPyhbXlxcc10rPylbL1xccz5dLyk7aWYoaSYmKHIubmFtZT1pWzFdLChlW2lbMV1dfHxcIi9cIj09PW4uY2hhckF0KG4ubGVuZ3RoLTIpKSYmKHIudm9pZEVsZW1lbnQ9ITApLHIubmFtZS5zdGFydHNXaXRoKFwiIS0tXCIpKSl7dmFyIHM9bi5pbmRleE9mKFwiLS1cXHgzZVwiKTtyZXR1cm57dHlwZTpcImNvbW1lbnRcIixjb21tZW50Oi0xIT09cz9uLnNsaWNlKDQscyk6XCJcIn19Zm9yKHZhciBhPW5ldyBSZWdFeHAodCksYz1udWxsO251bGwhPT0oYz1hLmV4ZWMobikpOylpZihjWzBdLnRyaW0oKSlpZihjWzFdKXt2YXIgbz1jWzFdLnRyaW0oKSxsPVtvLFwiXCJdO28uaW5kZXhPZihcIj1cIik+LTEmJihsPW8uc3BsaXQoXCI9XCIpKSxyLmF0dHJzW2xbMF1dPWxbMV0sYS5sYXN0SW5kZXgtLX1lbHNlIGNbMl0mJihyLmF0dHJzW2NbMl1dPWNbM10udHJpbSgpLnN1YnN0cmluZygxLGNbM10ubGVuZ3RoLTEpKTtyZXR1cm4gcn12YXIgcj0vPFthLXpBLVowLTlcXC1cXCFcXC9dKD86XCJbXlwiXSpcInwnW14nXSonfFteJ1wiPl0pKj4vZyxpPS9eXFxzKiQvLHM9T2JqZWN0LmNyZWF0ZShudWxsKTtmdW5jdGlvbiBhKGUsdCl7c3dpdGNoKHQudHlwZSl7Y2FzZVwidGV4dFwiOnJldHVybiBlK3QuY29udGVudDtjYXNlXCJ0YWdcIjpyZXR1cm4gZSs9XCI8XCIrdC5uYW1lKyh0LmF0dHJzP2Z1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgbiBpbiBlKXQucHVzaChuKyc9XCInK2Vbbl0rJ1wiJyk7cmV0dXJuIHQubGVuZ3RoP1wiIFwiK3Quam9pbihcIiBcIik6XCJcIn0odC5hdHRycyk6XCJcIikrKHQudm9pZEVsZW1lbnQ/XCIvPlwiOlwiPlwiKSx0LnZvaWRFbGVtZW50P2U6ZSt0LmNoaWxkcmVuLnJlZHVjZShhLFwiXCIpK1wiPC9cIit0Lm5hbWUrXCI+XCI7Y2FzZVwiY29tbWVudFwiOnJldHVybiBlK1wiXFx4M2MhLS1cIit0LmNvbW1lbnQrXCItLVxceDNlXCJ9fXZhciBjPXtwYXJzZTpmdW5jdGlvbihlLHQpe3R8fCh0PXt9KSx0LmNvbXBvbmVudHN8fCh0LmNvbXBvbmVudHM9cyk7dmFyIGEsYz1bXSxvPVtdLGw9LTEsbT0hMTtpZigwIT09ZS5pbmRleE9mKFwiPFwiKSl7dmFyIHU9ZS5pbmRleE9mKFwiPFwiKTtjLnB1c2goe3R5cGU6XCJ0ZXh0XCIsY29udGVudDotMT09PXU/ZTplLnN1YnN0cmluZygwLHUpfSl9cmV0dXJuIGUucmVwbGFjZShyLGZ1bmN0aW9uKHIscyl7aWYobSl7aWYociE9PVwiPC9cIithLm5hbWUrXCI+XCIpcmV0dXJuO209ITF9dmFyIHUsZj1cIi9cIiE9PXIuY2hhckF0KDEpLGg9ci5zdGFydHNXaXRoKFwiXFx4M2MhLS1cIikscD1zK3IubGVuZ3RoLGQ9ZS5jaGFyQXQocCk7aWYoaCl7dmFyIHY9bihyKTtyZXR1cm4gbDwwPyhjLnB1c2godiksYyk6KCh1PW9bbF0pLmNoaWxkcmVuLnB1c2godiksYyl9aWYoZiYmKGwrKyxcInRhZ1wiPT09KGE9bihyKSkudHlwZSYmdC5jb21wb25lbnRzW2EubmFtZV0mJihhLnR5cGU9XCJjb21wb25lbnRcIixtPSEwKSxhLnZvaWRFbGVtZW50fHxtfHwhZHx8XCI8XCI9PT1kfHxhLmNoaWxkcmVuLnB1c2goe3R5cGU6XCJ0ZXh0XCIsY29udGVudDplLnNsaWNlKHAsZS5pbmRleE9mKFwiPFwiLHApKX0pLDA9PT1sJiZjLnB1c2goYSksKHU9b1tsLTFdKSYmdS5jaGlsZHJlbi5wdXNoKGEpLG9bbF09YSksKCFmfHxhLnZvaWRFbGVtZW50KSYmKGw+LTEmJihhLnZvaWRFbGVtZW50fHxhLm5hbWU9PT1yLnNsaWNlKDIsLTEpKSYmKGwtLSxhPS0xPT09bD9jOm9bbF0pLCFtJiZcIjxcIiE9PWQmJmQpKXt1PS0xPT09bD9jOm9bbF0uY2hpbGRyZW47dmFyIHg9ZS5pbmRleE9mKFwiPFwiLHApLGc9ZS5zbGljZShwLC0xPT09eD92b2lkIDA6eCk7aS50ZXN0KGcpJiYoZz1cIiBcIiksKHg+LTEmJmwrdS5sZW5ndGg+PTB8fFwiIFwiIT09ZykmJnUucHVzaCh7dHlwZTpcInRleHRcIixjb250ZW50Omd9KX19KSxjfSxzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrYShcIlwiLHQpfSxcIlwiKX19O2V4cG9ydCBkZWZhdWx0IGM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1odG1sLXBhcnNlLXN0cmluZ2lmeS5tb2R1bGUuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGlzU3RyaW5nID0gb2JqID0+IHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xuY29uc3QgZGVmZXIgPSAoKSA9PiB7XG4gIGxldCByZXM7XG4gIGxldCByZWo7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgcmVzID0gcmVzb2x2ZTtcbiAgICByZWogPSByZWplY3Q7XG4gIH0pO1xuICBwcm9taXNlLnJlc29sdmUgPSByZXM7XG4gIHByb21pc2UucmVqZWN0ID0gcmVqO1xuICByZXR1cm4gcHJvbWlzZTtcbn07XG5jb25zdCBtYWtlU3RyaW5nID0gb2JqZWN0ID0+IHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gJyc7XG4gIHJldHVybiAnJyArIG9iamVjdDtcbn07XG5jb25zdCBjb3B5ID0gKGEsIHMsIHQpID0+IHtcbiAgYS5mb3JFYWNoKG0gPT4ge1xuICAgIGlmIChzW21dKSB0W21dID0gc1ttXTtcbiAgfSk7XG59O1xuY29uc3QgbGFzdE9mUGF0aFNlcGFyYXRvclJlZ0V4cCA9IC8jIyMvZztcbmNvbnN0IGNsZWFuS2V5ID0ga2V5ID0+IGtleSAmJiBrZXkuaW5kZXhPZignIyMjJykgPiAtMSA/IGtleS5yZXBsYWNlKGxhc3RPZlBhdGhTZXBhcmF0b3JSZWdFeHAsICcuJykgOiBrZXk7XG5jb25zdCBjYW5Ob3RUcmF2ZXJzZURlZXBlciA9IG9iamVjdCA9PiAhb2JqZWN0IHx8IGlzU3RyaW5nKG9iamVjdCk7XG5jb25zdCBnZXRMYXN0T2ZQYXRoID0gKG9iamVjdCwgcGF0aCwgRW1wdHkpID0+IHtcbiAgY29uc3Qgc3RhY2sgPSAhaXNTdHJpbmcocGF0aCkgPyBwYXRoIDogcGF0aC5zcGxpdCgnLicpO1xuICBsZXQgc3RhY2tJbmRleCA9IDA7XG4gIHdoaWxlIChzdGFja0luZGV4IDwgc3RhY2subGVuZ3RoIC0gMSkge1xuICAgIGlmIChjYW5Ob3RUcmF2ZXJzZURlZXBlcihvYmplY3QpKSByZXR1cm4ge307XG4gICAgY29uc3Qga2V5ID0gY2xlYW5LZXkoc3RhY2tbc3RhY2tJbmRleF0pO1xuICAgIGlmICghb2JqZWN0W2tleV0gJiYgRW1wdHkpIG9iamVjdFtrZXldID0gbmV3IEVtcHR5KCk7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmplY3QgPSB7fTtcbiAgICB9XG4gICAgKytzdGFja0luZGV4O1xuICB9XG4gIGlmIChjYW5Ob3RUcmF2ZXJzZURlZXBlcihvYmplY3QpKSByZXR1cm4ge307XG4gIHJldHVybiB7XG4gICAgb2JqOiBvYmplY3QsXG4gICAgazogY2xlYW5LZXkoc3RhY2tbc3RhY2tJbmRleF0pXG4gIH07XG59O1xuY29uc3Qgc2V0UGF0aCA9IChvYmplY3QsIHBhdGgsIG5ld1ZhbHVlKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBvYmosXG4gICAga1xuICB9ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgsIE9iamVjdCk7XG4gIGlmIChvYmogIT09IHVuZGVmaW5lZCB8fCBwYXRoLmxlbmd0aCA9PT0gMSkge1xuICAgIG9ialtrXSA9IG5ld1ZhbHVlO1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgZSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgbGV0IHAgPSBwYXRoLnNsaWNlKDAsIHBhdGgubGVuZ3RoIC0gMSk7XG4gIGxldCBsYXN0ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHAsIE9iamVjdCk7XG4gIHdoaWxlIChsYXN0Lm9iaiA9PT0gdW5kZWZpbmVkICYmIHAubGVuZ3RoKSB7XG4gICAgZSA9IGAke3BbcC5sZW5ndGggLSAxXX0uJHtlfWA7XG4gICAgcCA9IHAuc2xpY2UoMCwgcC5sZW5ndGggLSAxKTtcbiAgICBsYXN0ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHAsIE9iamVjdCk7XG4gICAgaWYgKGxhc3QgJiYgbGFzdC5vYmogJiYgdHlwZW9mIGxhc3Qub2JqW2Ake2xhc3Qua30uJHtlfWBdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbGFzdC5vYmogPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG4gIGxhc3Qub2JqW2Ake2xhc3Qua30uJHtlfWBdID0gbmV3VmFsdWU7XG59O1xuY29uc3QgcHVzaFBhdGggPSAob2JqZWN0LCBwYXRoLCBuZXdWYWx1ZSwgY29uY2F0KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBvYmosXG4gICAga1xuICB9ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgsIE9iamVjdCk7XG4gIG9ialtrXSA9IG9ialtrXSB8fCBbXTtcbiAgb2JqW2tdLnB1c2gobmV3VmFsdWUpO1xufTtcbmNvbnN0IGdldFBhdGggPSAob2JqZWN0LCBwYXRoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBvYmosXG4gICAga1xuICB9ID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgpO1xuICBpZiAoIW9iaikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgcmV0dXJuIG9ialtrXTtcbn07XG5jb25zdCBnZXRQYXRoV2l0aERlZmF1bHRzID0gKGRhdGEsIGRlZmF1bHREYXRhLCBrZXkpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBnZXRQYXRoKGRhdGEsIGtleSk7XG4gIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiBnZXRQYXRoKGRlZmF1bHREYXRhLCBrZXkpO1xufTtcbmNvbnN0IGRlZXBFeHRlbmQgPSAodGFyZ2V0LCBzb3VyY2UsIG92ZXJ3cml0ZSkgPT4ge1xuICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XG4gICAgaWYgKHByb3AgIT09ICdfX3Byb3RvX18nICYmIHByb3AgIT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgIGlmIChwcm9wIGluIHRhcmdldCkge1xuICAgICAgICBpZiAoaXNTdHJpbmcodGFyZ2V0W3Byb3BdKSB8fCB0YXJnZXRbcHJvcF0gaW5zdGFuY2VvZiBTdHJpbmcgfHwgaXNTdHJpbmcoc291cmNlW3Byb3BdKSB8fCBzb3VyY2VbcHJvcF0gaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgICBpZiAob3ZlcndyaXRlKSB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSwgb3ZlcndyaXRlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcbmNvbnN0IHJlZ2V4RXNjYXBlID0gc3RyID0+IHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgJ1xcXFwkJicpO1xudmFyIF9lbnRpdHlNYXAgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmIzM5OycsXG4gICcvJzogJyYjeDJGOydcbn07XG5jb25zdCBlc2NhcGUgPSBkYXRhID0+IHtcbiAgaWYgKGlzU3RyaW5nKGRhdGEpKSB7XG4gICAgcmV0dXJuIGRhdGEucmVwbGFjZSgvWyY8PlwiJ1xcL10vZywgcyA9PiBfZW50aXR5TWFwW3NdKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn07XG5jbGFzcyBSZWdFeHBDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKGNhcGFjaXR5KSB7XG4gICAgdGhpcy5jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgIHRoaXMucmVnRXhwTWFwID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVnRXhwUXVldWUgPSBbXTtcbiAgfVxuICBnZXRSZWdFeHAocGF0dGVybikge1xuICAgIGNvbnN0IHJlZ0V4cEZyb21DYWNoZSA9IHRoaXMucmVnRXhwTWFwLmdldChwYXR0ZXJuKTtcbiAgICBpZiAocmVnRXhwRnJvbUNhY2hlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiByZWdFeHBGcm9tQ2FjaGU7XG4gICAgfVxuICAgIGNvbnN0IHJlZ0V4cE5ldyA9IG5ldyBSZWdFeHAocGF0dGVybik7XG4gICAgaWYgKHRoaXMucmVnRXhwUXVldWUubGVuZ3RoID09PSB0aGlzLmNhcGFjaXR5KSB7XG4gICAgICB0aGlzLnJlZ0V4cE1hcC5kZWxldGUodGhpcy5yZWdFeHBRdWV1ZS5zaGlmdCgpKTtcbiAgICB9XG4gICAgdGhpcy5yZWdFeHBNYXAuc2V0KHBhdHRlcm4sIHJlZ0V4cE5ldyk7XG4gICAgdGhpcy5yZWdFeHBRdWV1ZS5wdXNoKHBhdHRlcm4pO1xuICAgIHJldHVybiByZWdFeHBOZXc7XG4gIH1cbn1cbmNvbnN0IGNoYXJzID0gWycgJywgJywnLCAnPycsICchJywgJzsnXTtcbmNvbnN0IGxvb2tzTGlrZU9iamVjdFBhdGhSZWdFeHBDYWNoZSA9IG5ldyBSZWdFeHBDYWNoZSgyMCk7XG5jb25zdCBsb29rc0xpa2VPYmplY3RQYXRoID0gKGtleSwgbnNTZXBhcmF0b3IsIGtleVNlcGFyYXRvcikgPT4ge1xuICBuc1NlcGFyYXRvciA9IG5zU2VwYXJhdG9yIHx8ICcnO1xuICBrZXlTZXBhcmF0b3IgPSBrZXlTZXBhcmF0b3IgfHwgJyc7XG4gIGNvbnN0IHBvc3NpYmxlQ2hhcnMgPSBjaGFycy5maWx0ZXIoYyA9PiBuc1NlcGFyYXRvci5pbmRleE9mKGMpIDwgMCAmJiBrZXlTZXBhcmF0b3IuaW5kZXhPZihjKSA8IDApO1xuICBpZiAocG9zc2libGVDaGFycy5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xuICBjb25zdCByID0gbG9va3NMaWtlT2JqZWN0UGF0aFJlZ0V4cENhY2hlLmdldFJlZ0V4cChgKCR7cG9zc2libGVDaGFycy5tYXAoYyA9PiBjID09PSAnPycgPyAnXFxcXD8nIDogYykuam9pbignfCcpfSlgKTtcbiAgbGV0IG1hdGNoZWQgPSAhci50ZXN0KGtleSk7XG4gIGlmICghbWF0Y2hlZCkge1xuICAgIGNvbnN0IGtpID0ga2V5LmluZGV4T2Yoa2V5U2VwYXJhdG9yKTtcbiAgICBpZiAoa2kgPiAwICYmICFyLnRlc3Qoa2V5LnN1YnN0cmluZygwLCBraSkpKSB7XG4gICAgICBtYXRjaGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1hdGNoZWQ7XG59O1xuY29uc3QgZGVlcEZpbmQgPSBmdW5jdGlvbiAob2JqLCBwYXRoKSB7XG4gIGxldCBrZXlTZXBhcmF0b3IgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICcuJztcbiAgaWYgKCFvYmopIHJldHVybiB1bmRlZmluZWQ7XG4gIGlmIChvYmpbcGF0aF0pIHJldHVybiBvYmpbcGF0aF07XG4gIGNvbnN0IHRva2VucyA9IHBhdGguc3BsaXQoa2V5U2VwYXJhdG9yKTtcbiAgbGV0IGN1cnJlbnQgPSBvYmo7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDspIHtcbiAgICBpZiAoIWN1cnJlbnQgfHwgdHlwZW9mIGN1cnJlbnQgIT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBsZXQgbmV4dDtcbiAgICBsZXQgbmV4dFBhdGggPSAnJztcbiAgICBmb3IgKGxldCBqID0gaTsgaiA8IHRva2Vucy5sZW5ndGg7ICsraikge1xuICAgICAgaWYgKGogIT09IGkpIHtcbiAgICAgICAgbmV4dFBhdGggKz0ga2V5U2VwYXJhdG9yO1xuICAgICAgfVxuICAgICAgbmV4dFBhdGggKz0gdG9rZW5zW2pdO1xuICAgICAgbmV4dCA9IGN1cnJlbnRbbmV4dFBhdGhdO1xuICAgICAgaWYgKG5leHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXS5pbmRleE9mKHR5cGVvZiBuZXh0KSA+IC0xICYmIGogPCB0b2tlbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGkgKz0gaiAtIGkgKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgY3VycmVudCA9IG5leHQ7XG4gIH1cbiAgcmV0dXJuIGN1cnJlbnQ7XG59O1xuY29uc3QgZ2V0Q2xlYW5lZENvZGUgPSBjb2RlID0+IGNvZGUgJiYgY29kZS5yZXBsYWNlKCdfJywgJy0nKTtcblxuY29uc3QgY29uc29sZUxvZ2dlciA9IHtcbiAgdHlwZTogJ2xvZ2dlcicsXG4gIGxvZyhhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ2xvZycsIGFyZ3MpO1xuICB9LFxuICB3YXJuKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnd2FybicsIGFyZ3MpO1xuICB9LFxuICBlcnJvcihhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ2Vycm9yJywgYXJncyk7XG4gIH0sXG4gIG91dHB1dCh0eXBlLCBhcmdzKSB7XG4gICAgaWYgKGNvbnNvbGUgJiYgY29uc29sZVt0eXBlXSkgY29uc29sZVt0eXBlXS5hcHBseShjb25zb2xlLCBhcmdzKTtcbiAgfVxufTtcbmNsYXNzIExvZ2dlciB7XG4gIGNvbnN0cnVjdG9yKGNvbmNyZXRlTG9nZ2VyKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHRoaXMuaW5pdChjb25jcmV0ZUxvZ2dlciwgb3B0aW9ucyk7XG4gIH1cbiAgaW5pdChjb25jcmV0ZUxvZ2dlcikge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB0aGlzLnByZWZpeCA9IG9wdGlvbnMucHJlZml4IHx8ICdpMThuZXh0Oic7XG4gICAgdGhpcy5sb2dnZXIgPSBjb25jcmV0ZUxvZ2dlciB8fCBjb25zb2xlTG9nZ2VyO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5kZWJ1ZyA9IG9wdGlvbnMuZGVidWc7XG4gIH1cbiAgbG9nKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnbG9nJywgJycsIHRydWUpO1xuICB9XG4gIHdhcm4oKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ3dhcm4nLCAnJywgdHJ1ZSk7XG4gIH1cbiAgZXJyb3IoKSB7XG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICBhcmdzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ2Vycm9yJywgJycpO1xuICB9XG4gIGRlcHJlY2F0ZSgpIHtcbiAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjQpLCBfa2V5NCA9IDA7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgIGFyZ3NbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnd2FybicsICdXQVJOSU5HIERFUFJFQ0FURUQ6ICcsIHRydWUpO1xuICB9XG4gIGZvcndhcmQoYXJncywgbHZsLCBwcmVmaXgsIGRlYnVnT25seSkge1xuICAgIGlmIChkZWJ1Z09ubHkgJiYgIXRoaXMuZGVidWcpIHJldHVybiBudWxsO1xuICAgIGlmIChpc1N0cmluZyhhcmdzWzBdKSkgYXJnc1swXSA9IGAke3ByZWZpeH0ke3RoaXMucHJlZml4fSAke2FyZ3NbMF19YDtcbiAgICByZXR1cm4gdGhpcy5sb2dnZXJbbHZsXShhcmdzKTtcbiAgfVxuICBjcmVhdGUobW9kdWxlTmFtZSkge1xuICAgIHJldHVybiBuZXcgTG9nZ2VyKHRoaXMubG9nZ2VyLCB7XG4gICAgICAuLi57XG4gICAgICAgIHByZWZpeDogYCR7dGhpcy5wcmVmaXh9OiR7bW9kdWxlTmFtZX06YFxuICAgICAgfSxcbiAgICAgIC4uLnRoaXMub3B0aW9uc1xuICAgIH0pO1xuICB9XG4gIGNsb25lKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB0aGlzLm9wdGlvbnM7XG4gICAgb3B0aW9ucy5wcmVmaXggPSBvcHRpb25zLnByZWZpeCB8fCB0aGlzLnByZWZpeDtcbiAgICByZXR1cm4gbmV3IExvZ2dlcih0aGlzLmxvZ2dlciwgb3B0aW9ucyk7XG4gIH1cbn1cbnZhciBiYXNlTG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG5jbGFzcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm9ic2VydmVycyA9IHt9O1xuICB9XG4gIG9uKGV2ZW50cywgbGlzdGVuZXIpIHtcbiAgICBldmVudHMuc3BsaXQoJyAnKS5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgIGlmICghdGhpcy5vYnNlcnZlcnNbZXZlbnRdKSB0aGlzLm9ic2VydmVyc1tldmVudF0gPSBuZXcgTWFwKCk7XG4gICAgICBjb25zdCBudW1MaXN0ZW5lcnMgPSB0aGlzLm9ic2VydmVyc1tldmVudF0uZ2V0KGxpc3RlbmVyKSB8fCAwO1xuICAgICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdLnNldChsaXN0ZW5lciwgbnVtTGlzdGVuZXJzICsgMSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGlmICghdGhpcy5vYnNlcnZlcnNbZXZlbnRdKSByZXR1cm47XG4gICAgaWYgKCFsaXN0ZW5lcikge1xuICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdLmRlbGV0ZShsaXN0ZW5lcik7XG4gIH1cbiAgZW1pdChldmVudCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cbiAgICBpZiAodGhpcy5vYnNlcnZlcnNbZXZlbnRdKSB7XG4gICAgICBjb25zdCBjbG9uZWQgPSBBcnJheS5mcm9tKHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5lbnRyaWVzKCkpO1xuICAgICAgY2xvbmVkLmZvckVhY2goX3JlZiA9PiB7XG4gICAgICAgIGxldCBbb2JzZXJ2ZXIsIG51bVRpbWVzQWRkZWRdID0gX3JlZjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1UaW1lc0FkZGVkOyBpKyspIHtcbiAgICAgICAgICBvYnNlcnZlciguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLm9ic2VydmVyc1snKiddKSB7XG4gICAgICBjb25zdCBjbG9uZWQgPSBBcnJheS5mcm9tKHRoaXMub2JzZXJ2ZXJzWycqJ10uZW50cmllcygpKTtcbiAgICAgIGNsb25lZC5mb3JFYWNoKF9yZWYyID0+IHtcbiAgICAgICAgbGV0IFtvYnNlcnZlciwgbnVtVGltZXNBZGRlZF0gPSBfcmVmMjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1UaW1lc0FkZGVkOyBpKyspIHtcbiAgICAgICAgICBvYnNlcnZlci5hcHBseShvYnNlcnZlciwgW2V2ZW50LCAuLi5hcmdzXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBSZXNvdXJjZVN0b3JlIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7XG4gICAgICBuczogWyd0cmFuc2xhdGlvbiddLFxuICAgICAgZGVmYXVsdE5TOiAndHJhbnNsYXRpb24nXG4gICAgfTtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZGF0YSA9IGRhdGEgfHwge307XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICBpZiAodGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yID0gJy4nO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBhZGROYW1lc3BhY2VzKG5zKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKG5zKSA8IDApIHtcbiAgICAgIHRoaXMub3B0aW9ucy5ucy5wdXNoKG5zKTtcbiAgICB9XG4gIH1cbiAgcmVtb3ZlTmFtZXNwYWNlcyhucykge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5vcHRpb25zLm5zLmluZGV4T2YobnMpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLm9wdGlvbnMubnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cbiAgZ2V0UmVzb3VyY2UobG5nLCBucywga2V5KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleVNlcGFyYXRvciA6IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgY29uc3QgaWdub3JlSlNPTlN0cnVjdHVyZSA9IG9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlIDogdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmU7XG4gICAgbGV0IHBhdGg7XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXRoID0gW2xuZywgbnNdO1xuICAgICAgaWYgKGtleSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShrZXkpKSB7XG4gICAgICAgICAgcGF0aC5wdXNoKC4uLmtleSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcoa2V5KSAmJiBrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgICBwYXRoLnB1c2goLi4ua2V5LnNwbGl0KGtleVNlcGFyYXRvcikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGgucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGdldFBhdGgodGhpcy5kYXRhLCBwYXRoKTtcbiAgICBpZiAoIXJlc3VsdCAmJiAhbnMgJiYgIWtleSAmJiBsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIGxuZyA9IHBhdGhbMF07XG4gICAgICBucyA9IHBhdGhbMV07XG4gICAgICBrZXkgPSBwYXRoLnNsaWNlKDIpLmpvaW4oJy4nKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdCB8fCAhaWdub3JlSlNPTlN0cnVjdHVyZSB8fCAhaXNTdHJpbmcoa2V5KSkgcmV0dXJuIHJlc3VsdDtcbiAgICByZXR1cm4gZGVlcEZpbmQodGhpcy5kYXRhICYmIHRoaXMuZGF0YVtsbmddICYmIHRoaXMuZGF0YVtsbmddW25zXSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICB9XG4gIGFkZFJlc291cmNlKGxuZywgbnMsIGtleSwgdmFsdWUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge1xuICAgICAgc2lsZW50OiBmYWxzZVxuICAgIH07XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBsZXQgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICBpZiAoa2V5KSBwYXRoID0gcGF0aC5jb25jYXQoa2V5U2VwYXJhdG9yID8ga2V5LnNwbGl0KGtleVNlcGFyYXRvcikgOiBrZXkpO1xuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICAgIHZhbHVlID0gbnM7XG4gICAgICBucyA9IHBhdGhbMV07XG4gICAgfVxuICAgIHRoaXMuYWRkTmFtZXNwYWNlcyhucyk7XG4gICAgc2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgsIHZhbHVlKTtcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywga2V5LCB2YWx1ZSk7XG4gIH1cbiAgYWRkUmVzb3VyY2VzKGxuZywgbnMsIHJlc291cmNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7XG4gICAgICBzaWxlbnQ6IGZhbHNlXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IG0gaW4gcmVzb3VyY2VzKSB7XG4gICAgICBpZiAoaXNTdHJpbmcocmVzb3VyY2VzW21dKSB8fCBBcnJheS5pc0FycmF5KHJlc291cmNlc1ttXSkpIHRoaXMuYWRkUmVzb3VyY2UobG5nLCBucywgbSwgcmVzb3VyY2VzW21dLCB7XG4gICAgICAgIHNpbGVudDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCByZXNvdXJjZXMpO1xuICB9XG4gIGFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIHJlc291cmNlcywgZGVlcCwgb3ZlcndyaXRlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IHtcbiAgICAgIHNpbGVudDogZmFsc2UsXG4gICAgICBza2lwQ29weTogZmFsc2VcbiAgICB9O1xuICAgIGxldCBwYXRoID0gW2xuZywgbnNdO1xuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICAgIGRlZXAgPSByZXNvdXJjZXM7XG4gICAgICByZXNvdXJjZXMgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG4gICAgdGhpcy5hZGROYW1lc3BhY2VzKG5zKTtcbiAgICBsZXQgcGFjayA9IGdldFBhdGgodGhpcy5kYXRhLCBwYXRoKSB8fCB7fTtcbiAgICBpZiAoIW9wdGlvbnMuc2tpcENvcHkpIHJlc291cmNlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzb3VyY2VzKSk7XG4gICAgaWYgKGRlZXApIHtcbiAgICAgIGRlZXBFeHRlbmQocGFjaywgcmVzb3VyY2VzLCBvdmVyd3JpdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWNrID0ge1xuICAgICAgICAuLi5wYWNrLFxuICAgICAgICAuLi5yZXNvdXJjZXNcbiAgICAgIH07XG4gICAgfVxuICAgIHNldFBhdGgodGhpcy5kYXRhLCBwYXRoLCBwYWNrKTtcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywgcmVzb3VyY2VzKTtcbiAgfVxuICByZW1vdmVSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgaWYgKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbbG5nXVtuc107XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlTmFtZXNwYWNlcyhucyk7XG4gICAgdGhpcy5lbWl0KCdyZW1vdmVkJywgbG5nLCBucyk7XG4gIH1cbiAgaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpICE9PSB1bmRlZmluZWQ7XG4gIH1cbiAgZ2V0UmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIGlmICghbnMpIG5zID0gdGhpcy5vcHRpb25zLmRlZmF1bHROUztcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgPT09ICd2MScpIHJldHVybiB7XG4gICAgICAuLi57fSxcbiAgICAgIC4uLnRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucylcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpO1xuICB9XG4gIGdldERhdGFCeUxhbmd1YWdlKGxuZykge1xuICAgIHJldHVybiB0aGlzLmRhdGFbbG5nXTtcbiAgfVxuICBoYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMobG5nKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YUJ5TGFuZ3VhZ2UobG5nKTtcbiAgICBjb25zdCBuID0gZGF0YSAmJiBPYmplY3Qua2V5cyhkYXRhKSB8fCBbXTtcbiAgICByZXR1cm4gISFuLmZpbmQodiA9PiBkYXRhW3ZdICYmIE9iamVjdC5rZXlzKGRhdGFbdl0pLmxlbmd0aCA+IDApO1xuICB9XG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9XG59XG5cbnZhciBwb3N0UHJvY2Vzc29yID0ge1xuICBwcm9jZXNzb3JzOiB7fSxcbiAgYWRkUG9zdFByb2Nlc3Nvcihtb2R1bGUpIHtcbiAgICB0aGlzLnByb2Nlc3NvcnNbbW9kdWxlLm5hbWVdID0gbW9kdWxlO1xuICB9LFxuICBoYW5kbGUocHJvY2Vzc29ycywgdmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcikge1xuICAgIHByb2Nlc3NvcnMuZm9yRWFjaChwcm9jZXNzb3IgPT4ge1xuICAgICAgaWYgKHRoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdKSB2YWx1ZSA9IHRoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdLnByb2Nlc3ModmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59O1xuXG5jb25zdCBjaGVja2VkTG9hZGVkRm9yID0ge307XG5jbGFzcyBUcmFuc2xhdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3Ioc2VydmljZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgc3VwZXIoKTtcbiAgICBjb3B5KFsncmVzb3VyY2VTdG9yZScsICdsYW5ndWFnZVV0aWxzJywgJ3BsdXJhbFJlc29sdmVyJywgJ2ludGVycG9sYXRvcicsICdiYWNrZW5kQ29ubmVjdG9yJywgJ2kxOG5Gb3JtYXQnLCAndXRpbHMnXSwgc2VydmljZXMsIHRoaXMpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciA9ICcuJztcbiAgICB9XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgndHJhbnNsYXRvcicpO1xuICB9XG4gIGNoYW5nZUxhbmd1YWdlKGxuZykge1xuICAgIGlmIChsbmcpIHRoaXMubGFuZ3VhZ2UgPSBsbmc7XG4gIH1cbiAgZXhpc3RzKGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7XG4gICAgICBpbnRlcnBvbGF0aW9uOiB7fVxuICAgIH07XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkIHx8IGtleSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZShrZXksIG9wdGlvbnMpO1xuICAgIHJldHVybiByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXMgIT09IHVuZGVmaW5lZDtcbiAgfVxuICBleHRyYWN0RnJvbUtleShrZXksIG9wdGlvbnMpIHtcbiAgICBsZXQgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zU2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLm5zU2VwYXJhdG9yO1xuICAgIGlmIChuc1NlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSBuc1NlcGFyYXRvciA9ICc6JztcbiAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGxldCBuYW1lc3BhY2VzID0gb3B0aW9ucy5ucyB8fCB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TIHx8IFtdO1xuICAgIGNvbnN0IHdvdWxkQ2hlY2tGb3JOc0luS2V5ID0gbnNTZXBhcmF0b3IgJiYga2V5LmluZGV4T2YobnNTZXBhcmF0b3IpID4gLTE7XG4gICAgY29uc3Qgc2VlbXNOYXR1cmFsTGFuZ3VhZ2UgPSAhdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yICYmICFvcHRpb25zLmtleVNlcGFyYXRvciAmJiAhdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkTnNTZXBhcmF0b3IgJiYgIW9wdGlvbnMubnNTZXBhcmF0b3IgJiYgIWxvb2tzTGlrZU9iamVjdFBhdGgoa2V5LCBuc1NlcGFyYXRvciwga2V5U2VwYXJhdG9yKTtcbiAgICBpZiAod291bGRDaGVja0Zvck5zSW5LZXkgJiYgIXNlZW1zTmF0dXJhbExhbmd1YWdlKSB7XG4gICAgICBjb25zdCBtID0ga2V5Lm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgaWYgKG0gJiYgbS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIG5hbWVzcGFjZXM6IGlzU3RyaW5nKG5hbWVzcGFjZXMpID8gW25hbWVzcGFjZXNdIDogbmFtZXNwYWNlc1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgcGFydHMgPSBrZXkuc3BsaXQobnNTZXBhcmF0b3IpO1xuICAgICAgaWYgKG5zU2VwYXJhdG9yICE9PSBrZXlTZXBhcmF0b3IgfHwgbnNTZXBhcmF0b3IgPT09IGtleVNlcGFyYXRvciAmJiB0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihwYXJ0c1swXSkgPiAtMSkgbmFtZXNwYWNlcyA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgICBrZXkgPSBwYXJ0cy5qb2luKGtleVNlcGFyYXRvcik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBrZXksXG4gICAgICBuYW1lc3BhY2VzOiBpc1N0cmluZyhuYW1lc3BhY2VzKSA/IFtuYW1lc3BhY2VzXSA6IG5hbWVzcGFjZXNcbiAgICB9O1xuICB9XG4gIHRyYW5zbGF0ZShrZXlzLCBvcHRpb25zLCBsYXN0S2V5KSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JyAmJiB0aGlzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIpIHtcbiAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoYXJndW1lbnRzKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykgb3B0aW9ucyA9IHtcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICAgIGlmIChrZXlzID09PSB1bmRlZmluZWQgfHwga2V5cyA9PT0gbnVsbCkgcmV0dXJuICcnO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShrZXlzKSkga2V5cyA9IFtTdHJpbmcoa2V5cyldO1xuICAgIGNvbnN0IHJldHVybkRldGFpbHMgPSBvcHRpb25zLnJldHVybkRldGFpbHMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucmV0dXJuRGV0YWlscyA6IHRoaXMub3B0aW9ucy5yZXR1cm5EZXRhaWxzO1xuICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleVNlcGFyYXRvciA6IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgY29uc3Qge1xuICAgICAga2V5LFxuICAgICAgbmFtZXNwYWNlc1xuICAgIH0gPSB0aGlzLmV4dHJhY3RGcm9tS2V5KGtleXNba2V5cy5sZW5ndGggLSAxXSwgb3B0aW9ucyk7XG4gICAgY29uc3QgbmFtZXNwYWNlID0gbmFtZXNwYWNlc1tuYW1lc3BhY2VzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGxuZyA9IG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2U7XG4gICAgY29uc3QgYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUgPSBvcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlIHx8IHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZTtcbiAgICBpZiAobG5nICYmIGxuZy50b0xvd2VyQ2FzZSgpID09PSAnY2ltb2RlJykge1xuICAgICAgaWYgKGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlKSB7XG4gICAgICAgIGNvbnN0IG5zU2VwYXJhdG9yID0gb3B0aW9ucy5uc1NlcGFyYXRvciB8fCB0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7XG4gICAgICAgIGlmIChyZXR1cm5EZXRhaWxzKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlczogYCR7bmFtZXNwYWNlfSR7bnNTZXBhcmF0b3J9JHtrZXl9YCxcbiAgICAgICAgICAgIHVzZWRLZXk6IGtleSxcbiAgICAgICAgICAgIGV4YWN0VXNlZEtleToga2V5LFxuICAgICAgICAgICAgdXNlZExuZzogbG5nLFxuICAgICAgICAgICAgdXNlZE5TOiBuYW1lc3BhY2UsXG4gICAgICAgICAgICB1c2VkUGFyYW1zOiB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7bmFtZXNwYWNlfSR7bnNTZXBhcmF0b3J9JHtrZXl9YDtcbiAgICAgIH1cbiAgICAgIGlmIChyZXR1cm5EZXRhaWxzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVzOiBrZXksXG4gICAgICAgICAgdXNlZEtleToga2V5LFxuICAgICAgICAgIGV4YWN0VXNlZEtleToga2V5LFxuICAgICAgICAgIHVzZWRMbmc6IGxuZyxcbiAgICAgICAgICB1c2VkTlM6IG5hbWVzcGFjZSxcbiAgICAgICAgICB1c2VkUGFyYW1zOiB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZShrZXlzLCBvcHRpb25zKTtcbiAgICBsZXQgcmVzID0gcmVzb2x2ZWQgJiYgcmVzb2x2ZWQucmVzO1xuICAgIGNvbnN0IHJlc1VzZWRLZXkgPSByZXNvbHZlZCAmJiByZXNvbHZlZC51c2VkS2V5IHx8IGtleTtcbiAgICBjb25zdCByZXNFeGFjdFVzZWRLZXkgPSByZXNvbHZlZCAmJiByZXNvbHZlZC5leGFjdFVzZWRLZXkgfHwga2V5O1xuICAgIGNvbnN0IHJlc1R5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHJlcyk7XG4gICAgY29uc3Qgbm9PYmplY3QgPSBbJ1tvYmplY3QgTnVtYmVyXScsICdbb2JqZWN0IEZ1bmN0aW9uXScsICdbb2JqZWN0IFJlZ0V4cF0nXTtcbiAgICBjb25zdCBqb2luQXJyYXlzID0gb3B0aW9ucy5qb2luQXJyYXlzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmpvaW5BcnJheXMgOiB0aGlzLm9wdGlvbnMuam9pbkFycmF5cztcbiAgICBjb25zdCBoYW5kbGVBc09iamVjdEluSTE4bkZvcm1hdCA9ICF0aGlzLmkxOG5Gb3JtYXQgfHwgdGhpcy5pMThuRm9ybWF0LmhhbmRsZUFzT2JqZWN0O1xuICAgIGNvbnN0IGhhbmRsZUFzT2JqZWN0ID0gIWlzU3RyaW5nKHJlcykgJiYgdHlwZW9mIHJlcyAhPT0gJ2Jvb2xlYW4nICYmIHR5cGVvZiByZXMgIT09ICdudW1iZXInO1xuICAgIGlmIChoYW5kbGVBc09iamVjdEluSTE4bkZvcm1hdCAmJiByZXMgJiYgaGFuZGxlQXNPYmplY3QgJiYgbm9PYmplY3QuaW5kZXhPZihyZXNUeXBlKSA8IDAgJiYgIShpc1N0cmluZyhqb2luQXJyYXlzKSAmJiBBcnJheS5pc0FycmF5KHJlcykpKSB7XG4gICAgICBpZiAoIW9wdGlvbnMucmV0dXJuT2JqZWN0cyAmJiAhdGhpcy5vcHRpb25zLnJldHVybk9iamVjdHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2FybignYWNjZXNzaW5nIGFuIG9iamVjdCAtIGJ1dCByZXR1cm5PYmplY3RzIG9wdGlvbnMgaXMgbm90IGVuYWJsZWQhJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIgPyB0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyKHJlc1VzZWRLZXksIHJlcywge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgbnM6IG5hbWVzcGFjZXNcbiAgICAgICAgfSkgOiBga2V5ICcke2tleX0gKCR7dGhpcy5sYW5ndWFnZX0pJyByZXR1cm5lZCBhbiBvYmplY3QgaW5zdGVhZCBvZiBzdHJpbmcuYDtcbiAgICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgICByZXNvbHZlZC5yZXMgPSByO1xuICAgICAgICAgIHJlc29sdmVkLnVzZWRQYXJhbXMgPSB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpO1xuICAgICAgICAgIHJldHVybiByZXNvbHZlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgY29uc3QgcmVzVHlwZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KHJlcyk7XG4gICAgICAgIGNvbnN0IGNvcHkgPSByZXNUeXBlSXNBcnJheSA/IFtdIDoge307XG4gICAgICAgIGNvbnN0IG5ld0tleVRvVXNlID0gcmVzVHlwZUlzQXJyYXkgPyByZXNFeGFjdFVzZWRLZXkgOiByZXNVc2VkS2V5O1xuICAgICAgICBmb3IgKGNvbnN0IG0gaW4gcmVzKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXMsIG0pKSB7XG4gICAgICAgICAgICBjb25zdCBkZWVwS2V5ID0gYCR7bmV3S2V5VG9Vc2V9JHtrZXlTZXBhcmF0b3J9JHttfWA7XG4gICAgICAgICAgICBjb3B5W21dID0gdGhpcy50cmFuc2xhdGUoZGVlcEtleSwge1xuICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAuLi57XG4gICAgICAgICAgICAgICAgam9pbkFycmF5czogZmFsc2UsXG4gICAgICAgICAgICAgICAgbnM6IG5hbWVzcGFjZXNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29weVttXSA9PT0gZGVlcEtleSkgY29weVttXSA9IHJlc1ttXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzID0gY29weTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ICYmIGlzU3RyaW5nKGpvaW5BcnJheXMpICYmIEFycmF5LmlzQXJyYXkocmVzKSkge1xuICAgICAgcmVzID0gcmVzLmpvaW4oam9pbkFycmF5cyk7XG4gICAgICBpZiAocmVzKSByZXMgPSB0aGlzLmV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5cywgb3B0aW9ucywgbGFzdEtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB1c2VkRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgbGV0IHVzZWRLZXkgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG5lZWRzUGx1cmFsSGFuZGxpbmcgPSBvcHRpb25zLmNvdW50ICE9PSB1bmRlZmluZWQgJiYgIWlzU3RyaW5nKG9wdGlvbnMuY291bnQpO1xuICAgICAgY29uc3QgaGFzRGVmYXVsdFZhbHVlID0gVHJhbnNsYXRvci5oYXNEZWZhdWx0VmFsdWUob3B0aW9ucyk7XG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWVTdWZmaXggPSBuZWVkc1BsdXJhbEhhbmRsaW5nID8gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgobG5nLCBvcHRpb25zLmNvdW50LCBvcHRpb25zKSA6ICcnO1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlU3VmZml4T3JkaW5hbEZhbGxiYWNrID0gb3B0aW9ucy5vcmRpbmFsICYmIG5lZWRzUGx1cmFsSGFuZGxpbmcgPyB0aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChsbmcsIG9wdGlvbnMuY291bnQsIHtcbiAgICAgICAgb3JkaW5hbDogZmFsc2VcbiAgICAgIH0pIDogJyc7XG4gICAgICBjb25zdCBuZWVkc1plcm9TdWZmaXhMb29rdXAgPSBuZWVkc1BsdXJhbEhhbmRsaW5nICYmICFvcHRpb25zLm9yZGluYWwgJiYgb3B0aW9ucy5jb3VudCA9PT0gMCAmJiB0aGlzLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKTtcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG5lZWRzWmVyb1N1ZmZpeExvb2t1cCAmJiBvcHRpb25zW2BkZWZhdWx0VmFsdWUke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2BdIHx8IG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7ZGVmYXVsdFZhbHVlU3VmZml4fWBdIHx8IG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7ZGVmYXVsdFZhbHVlU3VmZml4T3JkaW5hbEZhbGxiYWNrfWBdIHx8IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAocmVzKSAmJiBoYXNEZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdXNlZERlZmF1bHQgPSB0cnVlO1xuICAgICAgICByZXMgPSBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuaXNWYWxpZExvb2t1cChyZXMpKSB7XG4gICAgICAgIHVzZWRLZXkgPSB0cnVlO1xuICAgICAgICByZXMgPSBrZXk7XG4gICAgICB9XG4gICAgICBjb25zdCBtaXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXkgPSBvcHRpb25zLm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSB8fCB0aGlzLm9wdGlvbnMubWlzc2luZ0tleU5vVmFsdWVGYWxsYmFja1RvS2V5O1xuICAgICAgY29uc3QgcmVzRm9yTWlzc2luZyA9IG1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSAmJiB1c2VkS2V5ID8gdW5kZWZpbmVkIDogcmVzO1xuICAgICAgY29uc3QgdXBkYXRlTWlzc2luZyA9IGhhc0RlZmF1bHRWYWx1ZSAmJiBkZWZhdWx0VmFsdWUgIT09IHJlcyAmJiB0aGlzLm9wdGlvbnMudXBkYXRlTWlzc2luZztcbiAgICAgIGlmICh1c2VkS2V5IHx8IHVzZWREZWZhdWx0IHx8IHVwZGF0ZU1pc3NpbmcpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKHVwZGF0ZU1pc3NpbmcgPyAndXBkYXRlS2V5JyA6ICdtaXNzaW5nS2V5JywgbG5nLCBuYW1lc3BhY2UsIGtleSwgdXBkYXRlTWlzc2luZyA/IGRlZmF1bHRWYWx1ZSA6IHJlcyk7XG4gICAgICAgIGlmIChrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgICBjb25zdCBmayA9IHRoaXMucmVzb2x2ZShrZXksIHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBrZXlTZXBhcmF0b3I6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGZrICYmIGZrLnJlcykgdGhpcy5sb2dnZXIud2FybignU2VlbXMgdGhlIGxvYWRlZCB0cmFuc2xhdGlvbnMgd2VyZSBpbiBmbGF0IEpTT04gZm9ybWF0IGluc3RlYWQgb2YgbmVzdGVkLiBFaXRoZXIgc2V0IGtleVNlcGFyYXRvcjogZmFsc2Ugb24gaW5pdCBvciBtYWtlIHN1cmUgeW91ciB0cmFuc2xhdGlvbnMgYXJlIHB1Ymxpc2hlZCBpbiBuZXN0ZWQgZm9ybWF0LicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsbmdzID0gW107XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrTG5ncyA9IHRoaXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZywgb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2ZhbGxiYWNrJyAmJiBmYWxsYmFja0xuZ3MgJiYgZmFsbGJhY2tMbmdzWzBdKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmYWxsYmFja0xuZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxuZ3MucHVzaChmYWxsYmFja0xuZ3NbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICBsbmdzID0gdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsbmdzLnB1c2gob3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VuZCA9IChsLCBrLCBzcGVjaWZpY0RlZmF1bHRWYWx1ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmF1bHRGb3JNaXNzaW5nID0gaGFzRGVmYXVsdFZhbHVlICYmIHNwZWNpZmljRGVmYXVsdFZhbHVlICE9PSByZXMgPyBzcGVjaWZpY0RlZmF1bHRWYWx1ZSA6IHJlc0Zvck1pc3Npbmc7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5taXNzaW5nS2V5SGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKGwsIG5hbWVzcGFjZSwgaywgZGVmYXVsdEZvck1pc3NpbmcsIHVwZGF0ZU1pc3NpbmcsIG9wdGlvbnMpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5iYWNrZW5kQ29ubmVjdG9yICYmIHRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZykge1xuICAgICAgICAgICAgdGhpcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKGwsIG5hbWVzcGFjZSwgaywgZGVmYXVsdEZvck1pc3NpbmcsIHVwZGF0ZU1pc3NpbmcsIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmVtaXQoJ21pc3NpbmdLZXknLCBsLCBuYW1lc3BhY2UsIGssIHJlcyk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmcpIHtcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNhdmVNaXNzaW5nUGx1cmFscyAmJiBuZWVkc1BsdXJhbEhhbmRsaW5nKSB7XG4gICAgICAgICAgICBsbmdzLmZvckVhY2gobGFuZ3VhZ2UgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBzdWZmaXhlcyA9IHRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4ZXMobGFuZ3VhZ2UsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICBpZiAobmVlZHNaZXJvU3VmZml4TG9va3VwICYmIG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYF0gJiYgc3VmZml4ZXMuaW5kZXhPZihgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gKSA8IDApIHtcbiAgICAgICAgICAgICAgICBzdWZmaXhlcy5wdXNoKGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN1ZmZpeGVzLmZvckVhY2goc3VmZml4ID0+IHtcbiAgICAgICAgICAgICAgICBzZW5kKFtsYW5ndWFnZV0sIGtleSArIHN1ZmZpeCwgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHtzdWZmaXh9YF0gfHwgZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VuZChsbmdzLCBrZXksIGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXMgPSB0aGlzLmV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5cywgb3B0aW9ucywgcmVzb2x2ZWQsIGxhc3RLZXkpO1xuICAgICAgaWYgKHVzZWRLZXkgJiYgcmVzID09PSBrZXkgJiYgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSkgcmVzID0gYCR7bmFtZXNwYWNlfToke2tleX1gO1xuICAgICAgaWYgKCh1c2VkS2V5IHx8IHVzZWREZWZhdWx0KSAmJiB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcikge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScpIHtcbiAgICAgICAgICByZXMgPSB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5ID8gYCR7bmFtZXNwYWNlfToke2tleX1gIDoga2V5LCB1c2VkRGVmYXVsdCA/IHJlcyA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzID0gdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIocmVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmV0dXJuRGV0YWlscykge1xuICAgICAgcmVzb2x2ZWQucmVzID0gcmVzO1xuICAgICAgcmVzb2x2ZWQudXNlZFBhcmFtcyA9IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXksIG9wdGlvbnMsIHJlc29sdmVkLCBsYXN0S2V5KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBpZiAodGhpcy5pMThuRm9ybWF0ICYmIHRoaXMuaTE4bkZvcm1hdC5wYXJzZSkge1xuICAgICAgcmVzID0gdGhpcy5pMThuRm9ybWF0LnBhcnNlKHJlcywge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzLFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9LCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlIHx8IHJlc29sdmVkLnVzZWRMbmcsIHJlc29sdmVkLnVzZWROUywgcmVzb2x2ZWQudXNlZEtleSwge1xuICAgICAgICByZXNvbHZlZFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghb3B0aW9ucy5za2lwSW50ZXJwb2xhdGlvbikge1xuICAgICAgaWYgKG9wdGlvbnMuaW50ZXJwb2xhdGlvbikgdGhpcy5pbnRlcnBvbGF0b3IuaW5pdCh7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIC4uLntcbiAgICAgICAgICBpbnRlcnBvbGF0aW9uOiB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbixcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaW50ZXJwb2xhdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBza2lwT25WYXJpYWJsZXMgPSBpc1N0cmluZyhyZXMpICYmIChvcHRpb25zICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzIDogdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzKTtcbiAgICAgIGxldCBuZXN0QmVmO1xuICAgICAgaWYgKHNraXBPblZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBuYiA9IHJlcy5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtcbiAgICAgICAgbmVzdEJlZiA9IG5iICYmIG5iLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGxldCBkYXRhID0gb3B0aW9ucy5yZXBsYWNlICYmICFpc1N0cmluZyhvcHRpb25zLnJlcGxhY2UpID8gb3B0aW9ucy5yZXBsYWNlIDogb3B0aW9ucztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzKSBkYXRhID0ge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzLFxuICAgICAgICAuLi5kYXRhXG4gICAgICB9O1xuICAgICAgcmVzID0gdGhpcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUocmVzLCBkYXRhLCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlIHx8IHJlc29sdmVkLnVzZWRMbmcsIG9wdGlvbnMpO1xuICAgICAgaWYgKHNraXBPblZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBuYSA9IHJlcy5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtcbiAgICAgICAgY29uc3QgbmVzdEFmdCA9IG5hICYmIG5hLmxlbmd0aDtcbiAgICAgICAgaWYgKG5lc3RCZWYgPCBuZXN0QWZ0KSBvcHRpb25zLm5lc3QgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghb3B0aW9ucy5sbmcgJiYgdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScgJiYgcmVzb2x2ZWQgJiYgcmVzb2x2ZWQucmVzKSBvcHRpb25zLmxuZyA9IHRoaXMubGFuZ3VhZ2UgfHwgcmVzb2x2ZWQudXNlZExuZztcbiAgICAgIGlmIChvcHRpb25zLm5lc3QgIT09IGZhbHNlKSByZXMgPSB0aGlzLmludGVycG9sYXRvci5uZXN0KHJlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0S2V5ICYmIGxhc3RLZXlbMF0gPT09IGFyZ3NbMF0gJiYgIW9wdGlvbnMuY29udGV4dCkge1xuICAgICAgICAgIF90aGlzLmxvZ2dlci53YXJuKGBJdCBzZWVtcyB5b3UgYXJlIG5lc3RpbmcgcmVjdXJzaXZlbHkga2V5OiAke2FyZ3NbMF19IGluIGtleTogJHtrZXlbMF19YCk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzLnRyYW5zbGF0ZSguLi5hcmdzLCBrZXkpO1xuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICBpZiAob3B0aW9ucy5pbnRlcnBvbGF0aW9uKSB0aGlzLmludGVycG9sYXRvci5yZXNldCgpO1xuICAgIH1cbiAgICBjb25zdCBwb3N0UHJvY2VzcyA9IG9wdGlvbnMucG9zdFByb2Nlc3MgfHwgdGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzO1xuICAgIGNvbnN0IHBvc3RQcm9jZXNzb3JOYW1lcyA9IGlzU3RyaW5nKHBvc3RQcm9jZXNzKSA/IFtwb3N0UHJvY2Vzc10gOiBwb3N0UHJvY2VzcztcbiAgICBpZiAocmVzICE9PSB1bmRlZmluZWQgJiYgcmVzICE9PSBudWxsICYmIHBvc3RQcm9jZXNzb3JOYW1lcyAmJiBwb3N0UHJvY2Vzc29yTmFtZXMubGVuZ3RoICYmIG9wdGlvbnMuYXBwbHlQb3N0UHJvY2Vzc29yICE9PSBmYWxzZSkge1xuICAgICAgcmVzID0gcG9zdFByb2Nlc3Nvci5oYW5kbGUocG9zdFByb2Nlc3Nvck5hbWVzLCByZXMsIGtleSwgdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5wb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZCA/IHtcbiAgICAgICAgaTE4blJlc29sdmVkOiB7XG4gICAgICAgICAgLi4ucmVzb2x2ZWQsXG4gICAgICAgICAgdXNlZFBhcmFtczogdGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhvcHRpb25zKVxuICAgICAgICB9LFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9IDogb3B0aW9ucywgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgcmVzb2x2ZShrZXlzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGxldCBmb3VuZDtcbiAgICBsZXQgdXNlZEtleTtcbiAgICBsZXQgZXhhY3RVc2VkS2V5O1xuICAgIGxldCB1c2VkTG5nO1xuICAgIGxldCB1c2VkTlM7XG4gICAgaWYgKGlzU3RyaW5nKGtleXMpKSBrZXlzID0gW2tleXNdO1xuICAgIGtleXMuZm9yRWFjaChrID0+IHtcbiAgICAgIGlmICh0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG4gICAgICBjb25zdCBleHRyYWN0ZWQgPSB0aGlzLmV4dHJhY3RGcm9tS2V5KGssIG9wdGlvbnMpO1xuICAgICAgY29uc3Qga2V5ID0gZXh0cmFjdGVkLmtleTtcbiAgICAgIHVzZWRLZXkgPSBrZXk7XG4gICAgICBsZXQgbmFtZXNwYWNlcyA9IGV4dHJhY3RlZC5uYW1lc3BhY2VzO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5mYWxsYmFja05TKSBuYW1lc3BhY2VzID0gbmFtZXNwYWNlcy5jb25jYXQodGhpcy5vcHRpb25zLmZhbGxiYWNrTlMpO1xuICAgICAgY29uc3QgbmVlZHNQbHVyYWxIYW5kbGluZyA9IG9wdGlvbnMuY291bnQgIT09IHVuZGVmaW5lZCAmJiAhaXNTdHJpbmcob3B0aW9ucy5jb3VudCk7XG4gICAgICBjb25zdCBuZWVkc1plcm9TdWZmaXhMb29rdXAgPSBuZWVkc1BsdXJhbEhhbmRsaW5nICYmICFvcHRpb25zLm9yZGluYWwgJiYgb3B0aW9ucy5jb3VudCA9PT0gMCAmJiB0aGlzLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKTtcbiAgICAgIGNvbnN0IG5lZWRzQ29udGV4dEhhbmRsaW5nID0gb3B0aW9ucy5jb250ZXh0ICE9PSB1bmRlZmluZWQgJiYgKGlzU3RyaW5nKG9wdGlvbnMuY29udGV4dCkgfHwgdHlwZW9mIG9wdGlvbnMuY29udGV4dCA9PT0gJ251bWJlcicpICYmIG9wdGlvbnMuY29udGV4dCAhPT0gJyc7XG4gICAgICBjb25zdCBjb2RlcyA9IG9wdGlvbnMubG5ncyA/IG9wdGlvbnMubG5ncyA6IHRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkob3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSwgb3B0aW9ucy5mYWxsYmFja0xuZyk7XG4gICAgICBuYW1lc3BhY2VzLmZvckVhY2gobnMgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuICAgICAgICB1c2VkTlMgPSBucztcbiAgICAgICAgaWYgKCFjaGVja2VkTG9hZGVkRm9yW2Ake2NvZGVzWzBdfS0ke25zfWBdICYmIHRoaXMudXRpbHMgJiYgdGhpcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UgJiYgIXRoaXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlKHVzZWROUykpIHtcbiAgICAgICAgICBjaGVja2VkTG9hZGVkRm9yW2Ake2NvZGVzWzBdfS0ke25zfWBdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBrZXkgXCIke3VzZWRLZXl9XCIgZm9yIGxhbmd1YWdlcyBcIiR7Y29kZXMuam9pbignLCAnKX1cIiB3b24ndCBnZXQgcmVzb2x2ZWQgYXMgbmFtZXNwYWNlIFwiJHt1c2VkTlN9XCIgd2FzIG5vdCB5ZXQgbG9hZGVkYCwgJ1RoaXMgbWVhbnMgc29tZXRoaW5nIElTIFdST05HIGluIHlvdXIgc2V0dXAuIFlvdSBhY2Nlc3MgdGhlIHQgZnVuY3Rpb24gYmVmb3JlIGkxOG5leHQuaW5pdCAvIGkxOG5leHQubG9hZE5hbWVzcGFjZSAvIGkxOG5leHQuY2hhbmdlTGFuZ3VhZ2Ugd2FzIGRvbmUuIFdhaXQgZm9yIHRoZSBjYWxsYmFjayBvciBQcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlIGFjY2Vzc2luZyBpdCEhIScpO1xuICAgICAgICB9XG4gICAgICAgIGNvZGVzLmZvckVhY2goY29kZSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHJldHVybjtcbiAgICAgICAgICB1c2VkTG5nID0gY29kZTtcbiAgICAgICAgICBjb25zdCBmaW5hbEtleXMgPSBba2V5XTtcbiAgICAgICAgICBpZiAodGhpcy5pMThuRm9ybWF0ICYmIHRoaXMuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKSB7XG4gICAgICAgICAgICB0aGlzLmkxOG5Gb3JtYXQuYWRkTG9va3VwS2V5cyhmaW5hbEtleXMsIGtleSwgY29kZSwgbnMsIG9wdGlvbnMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgcGx1cmFsU3VmZml4O1xuICAgICAgICAgICAgaWYgKG5lZWRzUGx1cmFsSGFuZGxpbmcpIHBsdXJhbFN1ZmZpeCA9IHRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KGNvZGUsIG9wdGlvbnMuY291bnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgemVyb1N1ZmZpeCA9IGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2A7XG4gICAgICAgICAgICBjb25zdCBvcmRpbmFsUHJlZml4ID0gYCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn1vcmRpbmFsJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfWA7XG4gICAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykge1xuICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChrZXkgKyBwbHVyYWxTdWZmaXgpO1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vcmRpbmFsICYmIHBsdXJhbFN1ZmZpeC5pbmRleE9mKG9yZGluYWxQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZmluYWxLZXlzLnB1c2goa2V5ICsgcGx1cmFsU3VmZml4LnJlcGxhY2Uob3JkaW5hbFByZWZpeCwgdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcikpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChuZWVkc1plcm9TdWZmaXhMb29rdXApIHtcbiAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChrZXkgKyB6ZXJvU3VmZml4KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5lZWRzQ29udGV4dEhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRLZXkgPSBgJHtrZXl9JHt0aGlzLm9wdGlvbnMuY29udGV4dFNlcGFyYXRvcn0ke29wdGlvbnMuY29udGV4dH1gO1xuICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChjb250ZXh0S2V5KTtcbiAgICAgICAgICAgICAgaWYgKG5lZWRzUGx1cmFsSGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChjb250ZXh0S2V5ICsgcGx1cmFsU3VmZml4KTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vcmRpbmFsICYmIHBsdXJhbFN1ZmZpeC5pbmRleE9mKG9yZGluYWxQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChjb250ZXh0S2V5ICsgcGx1cmFsU3VmZml4LnJlcGxhY2Uob3JkaW5hbFByZWZpeCwgdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmVlZHNaZXJvU3VmZml4TG9va3VwKSB7XG4gICAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChjb250ZXh0S2V5ICsgemVyb1N1ZmZpeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBwb3NzaWJsZUtleTtcbiAgICAgICAgICB3aGlsZSAocG9zc2libGVLZXkgPSBmaW5hbEtleXMucG9wKCkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkge1xuICAgICAgICAgICAgICBleGFjdFVzZWRLZXkgPSBwb3NzaWJsZUtleTtcbiAgICAgICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlc291cmNlKGNvZGUsIG5zLCBwb3NzaWJsZUtleSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICByZXM6IGZvdW5kLFxuICAgICAgdXNlZEtleSxcbiAgICAgIGV4YWN0VXNlZEtleSxcbiAgICAgIHVzZWRMbmcsXG4gICAgICB1c2VkTlNcbiAgICB9O1xuICB9XG4gIGlzVmFsaWRMb29rdXAocmVzKSB7XG4gICAgcmV0dXJuIHJlcyAhPT0gdW5kZWZpbmVkICYmICEoIXRoaXMub3B0aW9ucy5yZXR1cm5OdWxsICYmIHJlcyA9PT0gbnVsbCkgJiYgISghdGhpcy5vcHRpb25zLnJldHVybkVtcHR5U3RyaW5nICYmIHJlcyA9PT0gJycpO1xuICB9XG4gIGdldFJlc291cmNlKGNvZGUsIG5zLCBrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gICAgaWYgKHRoaXMuaTE4bkZvcm1hdCAmJiB0aGlzLmkxOG5Gb3JtYXQuZ2V0UmVzb3VyY2UpIHJldHVybiB0aGlzLmkxOG5Gb3JtYXQuZ2V0UmVzb3VyY2UoY29kZSwgbnMsIGtleSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2VTdG9yZS5nZXRSZXNvdXJjZShjb2RlLCBucywga2V5LCBvcHRpb25zKTtcbiAgfVxuICBnZXRVc2VkUGFyYW1zRGV0YWlscygpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgY29uc3Qgb3B0aW9uc0tleXMgPSBbJ2RlZmF1bHRWYWx1ZScsICdvcmRpbmFsJywgJ2NvbnRleHQnLCAncmVwbGFjZScsICdsbmcnLCAnbG5ncycsICdmYWxsYmFja0xuZycsICducycsICdrZXlTZXBhcmF0b3InLCAnbnNTZXBhcmF0b3InLCAncmV0dXJuT2JqZWN0cycsICdyZXR1cm5EZXRhaWxzJywgJ2pvaW5BcnJheXMnLCAncG9zdFByb2Nlc3MnLCAnaW50ZXJwb2xhdGlvbiddO1xuICAgIGNvbnN0IHVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSA9IG9wdGlvbnMucmVwbGFjZSAmJiAhaXNTdHJpbmcob3B0aW9ucy5yZXBsYWNlKTtcbiAgICBsZXQgZGF0YSA9IHVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSA/IG9wdGlvbnMucmVwbGFjZSA6IG9wdGlvbnM7XG4gICAgaWYgKHVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSAmJiB0eXBlb2Ygb3B0aW9ucy5jb3VudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuY291bnQgPSBvcHRpb25zLmNvdW50O1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcykge1xuICAgICAgZGF0YSA9IHtcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyxcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCF1c2VPcHRpb25zUmVwbGFjZUZvckRhdGEpIHtcbiAgICAgIGRhdGEgPSB7XG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH07XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBvcHRpb25zS2V5cykge1xuICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBzdGF0aWMgaGFzRGVmYXVsdFZhbHVlKG9wdGlvbnMpIHtcbiAgICBjb25zdCBwcmVmaXggPSAnZGVmYXVsdFZhbHVlJztcbiAgICBmb3IgKGNvbnN0IG9wdGlvbiBpbiBvcHRpb25zKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIG9wdGlvbikgJiYgcHJlZml4ID09PSBvcHRpb24uc3Vic3RyaW5nKDAsIHByZWZpeC5sZW5ndGgpICYmIHVuZGVmaW5lZCAhPT0gb3B0aW9uc1tvcHRpb25dKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuY29uc3QgY2FwaXRhbGl6ZSA9IHN0cmluZyA9PiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XG5jbGFzcyBMYW5ndWFnZVV0aWwge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLnN1cHBvcnRlZExuZ3MgPSB0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncyB8fCBmYWxzZTtcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdsYW5ndWFnZVV0aWxzJyk7XG4gIH1cbiAgZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpIHtcbiAgICBjb2RlID0gZ2V0Q2xlYW5lZENvZGUoY29kZSk7XG4gICAgaWYgKCFjb2RlIHx8IGNvZGUuaW5kZXhPZignLScpIDwgMCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcCA9IGNvZGUuc3BsaXQoJy0nKTtcbiAgICBpZiAocC5sZW5ndGggPT09IDIpIHJldHVybiBudWxsO1xuICAgIHAucG9wKCk7XG4gICAgaWYgKHBbcC5sZW5ndGggLSAxXS50b0xvd2VyQ2FzZSgpID09PSAneCcpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShwLmpvaW4oJy0nKSk7XG4gIH1cbiAgZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSkge1xuICAgIGNvZGUgPSBnZXRDbGVhbmVkQ29kZShjb2RlKTtcbiAgICBpZiAoIWNvZGUgfHwgY29kZS5pbmRleE9mKCctJykgPCAwKSByZXR1cm4gY29kZTtcbiAgICBjb25zdCBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgIHJldHVybiB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShwWzBdKTtcbiAgfVxuICBmb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkge1xuICAgIGlmIChpc1N0cmluZyhjb2RlKSAmJiBjb2RlLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICBpZiAodHlwZW9mIEludGwgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBJbnRsLmdldENhbm9uaWNhbExvY2FsZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGV0IGZvcm1hdHRlZENvZGUgPSBJbnRsLmdldENhbm9uaWNhbExvY2FsZXMoY29kZSlbMF07XG4gICAgICAgICAgaWYgKGZvcm1hdHRlZENvZGUgJiYgdGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZykge1xuICAgICAgICAgICAgZm9ybWF0dGVkQ29kZSA9IGZvcm1hdHRlZENvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZvcm1hdHRlZENvZGUpIHJldHVybiBmb3JtYXR0ZWRDb2RlO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlY2lhbENhc2VzID0gWydoYW5zJywgJ2hhbnQnLCAnbGF0bicsICdjeXJsJywgJ2NhbnMnLCAnbW9uZycsICdhcmFiJ107XG4gICAgICBsZXQgcCA9IGNvZGUuc3BsaXQoJy0nKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG93ZXJDYXNlTG5nKSB7XG4gICAgICAgIHAgPSBwLm1hcChwYXJ0ID0+IHBhcnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICB9IGVsc2UgaWYgKHAubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHBbMF0gPSBwWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHBbMV0gPSBwWzFdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzFdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMV0gPSBjYXBpdGFsaXplKHBbMV0udG9Mb3dlckNhc2UoKSk7XG4gICAgICB9IGVsc2UgaWYgKHAubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIHBbMF0gPSBwWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChwWzFdLmxlbmd0aCA9PT0gMikgcFsxXSA9IHBbMV0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKHBbMF0gIT09ICdzZ24nICYmIHBbMl0ubGVuZ3RoID09PSAyKSBwWzJdID0gcFsyXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsxXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzFdID0gY2FwaXRhbGl6ZShwWzFdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsyXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzJdID0gY2FwaXRhbGl6ZShwWzJdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHAuam9pbignLScpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsZWFuQ29kZSB8fCB0aGlzLm9wdGlvbnMubG93ZXJDYXNlTG5nID8gY29kZS50b0xvd2VyQ2FzZSgpIDogY29kZTtcbiAgfVxuICBpc1N1cHBvcnRlZENvZGUoY29kZSkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCA9PT0gJ2xhbmd1YWdlT25seScgfHwgdGhpcy5vcHRpb25zLm5vbkV4cGxpY2l0U3VwcG9ydGVkTG5ncykge1xuICAgICAgY29kZSA9IHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSk7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy5zdXBwb3J0ZWRMbmdzIHx8ICF0aGlzLnN1cHBvcnRlZExuZ3MubGVuZ3RoIHx8IHRoaXMuc3VwcG9ydGVkTG5ncy5pbmRleE9mKGNvZGUpID4gLTE7XG4gIH1cbiAgZ2V0QmVzdE1hdGNoRnJvbUNvZGVzKGNvZGVzKSB7XG4gICAgaWYgKCFjb2RlcykgcmV0dXJuIG51bGw7XG4gICAgbGV0IGZvdW5kO1xuICAgIGNvZGVzLmZvckVhY2goY29kZSA9PiB7XG4gICAgICBpZiAoZm91bmQpIHJldHVybjtcbiAgICAgIGNvbnN0IGNsZWFuZWRMbmcgPSB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKTtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MgfHwgdGhpcy5pc1N1cHBvcnRlZENvZGUoY2xlYW5lZExuZykpIGZvdW5kID0gY2xlYW5lZExuZztcbiAgICB9KTtcbiAgICBpZiAoIWZvdW5kICYmIHRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzKSB7XG4gICAgICBjb2Rlcy5mb3JFYWNoKGNvZGUgPT4ge1xuICAgICAgICBpZiAoZm91bmQpIHJldHVybjtcbiAgICAgICAgY29uc3QgbG5nT25seSA9IHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSk7XG4gICAgICAgIGlmICh0aGlzLmlzU3VwcG9ydGVkQ29kZShsbmdPbmx5KSkgcmV0dXJuIGZvdW5kID0gbG5nT25seTtcbiAgICAgICAgZm91bmQgPSB0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncy5maW5kKHN1cHBvcnRlZExuZyA9PiB7XG4gICAgICAgICAgaWYgKHN1cHBvcnRlZExuZyA9PT0gbG5nT25seSkgcmV0dXJuIHN1cHBvcnRlZExuZztcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nLmluZGV4T2YoJy0nKSA8IDAgJiYgbG5nT25seS5pbmRleE9mKCctJykgPCAwKSByZXR1cm47XG4gICAgICAgICAgaWYgKHN1cHBvcnRlZExuZy5pbmRleE9mKCctJykgPiAwICYmIGxuZ09ubHkuaW5kZXhPZignLScpIDwgMCAmJiBzdXBwb3J0ZWRMbmcuc3Vic3RyaW5nKDAsIHN1cHBvcnRlZExuZy5pbmRleE9mKCctJykpID09PSBsbmdPbmx5KSByZXR1cm4gc3VwcG9ydGVkTG5nO1xuICAgICAgICAgIGlmIChzdXBwb3J0ZWRMbmcuaW5kZXhPZihsbmdPbmx5KSA9PT0gMCAmJiBsbmdPbmx5Lmxlbmd0aCA+IDEpIHJldHVybiBzdXBwb3J0ZWRMbmc7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghZm91bmQpIGZvdW5kID0gdGhpcy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZylbMF07XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG4gIGdldEZhbGxiYWNrQ29kZXMoZmFsbGJhY2tzLCBjb2RlKSB7XG4gICAgaWYgKCFmYWxsYmFja3MpIHJldHVybiBbXTtcbiAgICBpZiAodHlwZW9mIGZhbGxiYWNrcyA9PT0gJ2Z1bmN0aW9uJykgZmFsbGJhY2tzID0gZmFsbGJhY2tzKGNvZGUpO1xuICAgIGlmIChpc1N0cmluZyhmYWxsYmFja3MpKSBmYWxsYmFja3MgPSBbZmFsbGJhY2tzXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmYWxsYmFja3MpKSByZXR1cm4gZmFsbGJhY2tzO1xuICAgIGlmICghY29kZSkgcmV0dXJuIGZhbGxiYWNrcy5kZWZhdWx0IHx8IFtdO1xuICAgIGxldCBmb3VuZCA9IGZhbGxiYWNrc1tjb2RlXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3NbdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSldO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzW3RoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSldO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzLmRlZmF1bHQ7XG4gICAgcmV0dXJuIGZvdW5kIHx8IFtdO1xuICB9XG4gIHRvUmVzb2x2ZUhpZXJhcmNoeShjb2RlLCBmYWxsYmFja0NvZGUpIHtcbiAgICBjb25zdCBmYWxsYmFja0NvZGVzID0gdGhpcy5nZXRGYWxsYmFja0NvZGVzKGZhbGxiYWNrQ29kZSB8fCB0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcgfHwgW10sIGNvZGUpO1xuICAgIGNvbnN0IGNvZGVzID0gW107XG4gICAgY29uc3QgYWRkQ29kZSA9IGMgPT4ge1xuICAgICAgaWYgKCFjKSByZXR1cm47XG4gICAgICBpZiAodGhpcy5pc1N1cHBvcnRlZENvZGUoYykpIHtcbiAgICAgICAgY29kZXMucHVzaChjKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYHJlamVjdGluZyBsYW5ndWFnZSBjb2RlIG5vdCBmb3VuZCBpbiBzdXBwb3J0ZWRMbmdzOiAke2N9YCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoaXNTdHJpbmcoY29kZSkgJiYgKGNvZGUuaW5kZXhPZignLScpID4gLTEgfHwgY29kZS5pbmRleE9mKCdfJykgPiAtMSkpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2xhbmd1YWdlT25seScpIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnbGFuZ3VhZ2VPbmx5JyAmJiB0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2N1cnJlbnRPbmx5JykgYWRkQ29kZSh0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdjdXJyZW50T25seScpIGFkZENvZGUodGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSk7XG4gICAgfSBlbHNlIGlmIChpc1N0cmluZyhjb2RlKSkge1xuICAgICAgYWRkQ29kZSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSk7XG4gICAgfVxuICAgIGZhbGxiYWNrQ29kZXMuZm9yRWFjaChmYyA9PiB7XG4gICAgICBpZiAoY29kZXMuaW5kZXhPZihmYykgPCAwKSBhZGRDb2RlKHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGZjKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvZGVzO1xuICB9XG59XG5cbmxldCBzZXRzID0gW3tcbiAgbG5nczogWydhY2gnLCAnYWsnLCAnYW0nLCAnYXJuJywgJ2JyJywgJ2ZpbCcsICdndW4nLCAnbG4nLCAnbWZlJywgJ21nJywgJ21pJywgJ29jJywgJ3B0JywgJ3B0LUJSJywgJ3RnJywgJ3RsJywgJ3RpJywgJ3RyJywgJ3V6JywgJ3dhJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAxXG59LCB7XG4gIGxuZ3M6IFsnYWYnLCAnYW4nLCAnYXN0JywgJ2F6JywgJ2JnJywgJ2JuJywgJ2NhJywgJ2RhJywgJ2RlJywgJ2RldicsICdlbCcsICdlbicsICdlbycsICdlcycsICdldCcsICdldScsICdmaScsICdmbycsICdmdXInLCAnZnknLCAnZ2wnLCAnZ3UnLCAnaGEnLCAnaGknLCAnaHUnLCAnaHknLCAnaWEnLCAnaXQnLCAna2snLCAna24nLCAna3UnLCAnbGInLCAnbWFpJywgJ21sJywgJ21uJywgJ21yJywgJ25haCcsICduYXAnLCAnbmInLCAnbmUnLCAnbmwnLCAnbm4nLCAnbm8nLCAnbnNvJywgJ3BhJywgJ3BhcCcsICdwbXMnLCAncHMnLCAncHQtUFQnLCAncm0nLCAnc2NvJywgJ3NlJywgJ3NpJywgJ3NvJywgJ3NvbicsICdzcScsICdzdicsICdzdycsICd0YScsICd0ZScsICd0aycsICd1cicsICd5byddLFxuICBucjogWzEsIDJdLFxuICBmYzogMlxufSwge1xuICBsbmdzOiBbJ2F5JywgJ2JvJywgJ2NnZycsICdmYScsICdodCcsICdpZCcsICdqYScsICdqYm8nLCAna2EnLCAna20nLCAna28nLCAna3knLCAnbG8nLCAnbXMnLCAnc2FoJywgJ3N1JywgJ3RoJywgJ3R0JywgJ3VnJywgJ3ZpJywgJ3dvJywgJ3poJ10sXG4gIG5yOiBbMV0sXG4gIGZjOiAzXG59LCB7XG4gIGxuZ3M6IFsnYmUnLCAnYnMnLCAnY25yJywgJ2R6JywgJ2hyJywgJ3J1JywgJ3NyJywgJ3VrJ10sXG4gIG5yOiBbMSwgMiwgNV0sXG4gIGZjOiA0XG59LCB7XG4gIGxuZ3M6IFsnYXInXSxcbiAgbnI6IFswLCAxLCAyLCAzLCAxMSwgMTAwXSxcbiAgZmM6IDVcbn0sIHtcbiAgbG5nczogWydjcycsICdzayddLFxuICBucjogWzEsIDIsIDVdLFxuICBmYzogNlxufSwge1xuICBsbmdzOiBbJ2NzYicsICdwbCddLFxuICBucjogWzEsIDIsIDVdLFxuICBmYzogN1xufSwge1xuICBsbmdzOiBbJ2N5J10sXG4gIG5yOiBbMSwgMiwgMywgOF0sXG4gIGZjOiA4XG59LCB7XG4gIGxuZ3M6IFsnZnInXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDlcbn0sIHtcbiAgbG5nczogWydnYSddLFxuICBucjogWzEsIDIsIDMsIDcsIDExXSxcbiAgZmM6IDEwXG59LCB7XG4gIGxuZ3M6IFsnZ2QnXSxcbiAgbnI6IFsxLCAyLCAzLCAyMF0sXG4gIGZjOiAxMVxufSwge1xuICBsbmdzOiBbJ2lzJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAxMlxufSwge1xuICBsbmdzOiBbJ2p2J10sXG4gIG5yOiBbMCwgMV0sXG4gIGZjOiAxM1xufSwge1xuICBsbmdzOiBbJ2t3J10sXG4gIG5yOiBbMSwgMiwgMywgNF0sXG4gIGZjOiAxNFxufSwge1xuICBsbmdzOiBbJ2x0J10sXG4gIG5yOiBbMSwgMiwgMTBdLFxuICBmYzogMTVcbn0sIHtcbiAgbG5nczogWydsdiddLFxuICBucjogWzEsIDIsIDBdLFxuICBmYzogMTZcbn0sIHtcbiAgbG5nczogWydtayddLFxuICBucjogWzEsIDJdLFxuICBmYzogMTdcbn0sIHtcbiAgbG5nczogWydtbmsnXSxcbiAgbnI6IFswLCAxLCAyXSxcbiAgZmM6IDE4XG59LCB7XG4gIGxuZ3M6IFsnbXQnXSxcbiAgbnI6IFsxLCAyLCAxMSwgMjBdLFxuICBmYzogMTlcbn0sIHtcbiAgbG5nczogWydvciddLFxuICBucjogWzIsIDFdLFxuICBmYzogMlxufSwge1xuICBsbmdzOiBbJ3JvJ10sXG4gIG5yOiBbMSwgMiwgMjBdLFxuICBmYzogMjBcbn0sIHtcbiAgbG5nczogWydzbCddLFxuICBucjogWzUsIDEsIDIsIDNdLFxuICBmYzogMjFcbn0sIHtcbiAgbG5nczogWydoZScsICdpdyddLFxuICBucjogWzEsIDIsIDIwLCAyMV0sXG4gIGZjOiAyMlxufV07XG5sZXQgX3J1bGVzUGx1cmFsc1R5cGVzID0ge1xuICAxOiBuID0+IE51bWJlcihuID4gMSksXG4gIDI6IG4gPT4gTnVtYmVyKG4gIT0gMSksXG4gIDM6IG4gPT4gMCxcbiAgNDogbiA9PiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICUgMTAgPj0gMiAmJiBuICUgMTAgPD0gNCAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpLFxuICA1OiBuID0+IE51bWJlcihuID09IDAgPyAwIDogbiA9PSAxID8gMSA6IG4gPT0gMiA/IDIgOiBuICUgMTAwID49IDMgJiYgbiAlIDEwMCA8PSAxMCA/IDMgOiBuICUgMTAwID49IDExID8gNCA6IDUpLFxuICA2OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA+PSAyICYmIG4gPD0gNCA/IDEgOiAyKSxcbiAgNzogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMiksXG4gIDg6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiAhPSA4ICYmIG4gIT0gMTEgPyAyIDogMyksXG4gIDk6IG4gPT4gTnVtYmVyKG4gPj0gMiksXG4gIDEwOiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IG4gPCA3ID8gMiA6IG4gPCAxMSA/IDMgOiA0KSxcbiAgMTE6IG4gPT4gTnVtYmVyKG4gPT0gMSB8fCBuID09IDExID8gMCA6IG4gPT0gMiB8fCBuID09IDEyID8gMSA6IG4gPiAyICYmIG4gPCAyMCA/IDIgOiAzKSxcbiAgMTI6IG4gPT4gTnVtYmVyKG4gJSAxMCAhPSAxIHx8IG4gJSAxMDAgPT0gMTEpLFxuICAxMzogbiA9PiBOdW1iZXIobiAhPT0gMCksXG4gIDE0OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IG4gPT0gMyA/IDIgOiAzKSxcbiAgMTU6IG4gPT4gTnVtYmVyKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogbiAlIDEwID49IDIgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKSxcbiAgMTY6IG4gPT4gTnVtYmVyKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogbiAhPT0gMCA/IDEgOiAyKSxcbiAgMTc6IG4gPT4gTnVtYmVyKG4gPT0gMSB8fCBuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IDEpLFxuICAxODogbiA9PiBOdW1iZXIobiA9PSAwID8gMCA6IG4gPT0gMSA/IDEgOiAyKSxcbiAgMTk6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDAgfHwgbiAlIDEwMCA+IDEgJiYgbiAlIDEwMCA8IDExID8gMSA6IG4gJSAxMDAgPiAxMCAmJiBuICUgMTAwIDwgMjAgPyAyIDogMyksXG4gIDIwOiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAwIHx8IG4gJSAxMDAgPiAwICYmIG4gJSAxMDAgPCAyMCA/IDEgOiAyKSxcbiAgMjE6IG4gPT4gTnVtYmVyKG4gJSAxMDAgPT0gMSA/IDEgOiBuICUgMTAwID09IDIgPyAyIDogbiAlIDEwMCA9PSAzIHx8IG4gJSAxMDAgPT0gNCA/IDMgOiAwKSxcbiAgMjI6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogKG4gPCAwIHx8IG4gPiAxMCkgJiYgbiAlIDEwID09IDAgPyAyIDogMylcbn07XG5jb25zdCBub25JbnRsVmVyc2lvbnMgPSBbJ3YxJywgJ3YyJywgJ3YzJ107XG5jb25zdCBpbnRsVmVyc2lvbnMgPSBbJ3Y0J107XG5jb25zdCBzdWZmaXhlc09yZGVyID0ge1xuICB6ZXJvOiAwLFxuICBvbmU6IDEsXG4gIHR3bzogMixcbiAgZmV3OiAzLFxuICBtYW55OiA0LFxuICBvdGhlcjogNVxufTtcbmNvbnN0IGNyZWF0ZVJ1bGVzID0gKCkgPT4ge1xuICBjb25zdCBydWxlcyA9IHt9O1xuICBzZXRzLmZvckVhY2goc2V0ID0+IHtcbiAgICBzZXQubG5ncy5mb3JFYWNoKGwgPT4ge1xuICAgICAgcnVsZXNbbF0gPSB7XG4gICAgICAgIG51bWJlcnM6IHNldC5ucixcbiAgICAgICAgcGx1cmFsczogX3J1bGVzUGx1cmFsc1R5cGVzW3NldC5mY11cbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gcnVsZXM7XG59O1xuY2xhc3MgUGx1cmFsUmVzb2x2ZXIge1xuICBjb25zdHJ1Y3RvcihsYW5ndWFnZVV0aWxzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHRoaXMubGFuZ3VhZ2VVdGlscyA9IGxhbmd1YWdlVXRpbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdwbHVyYWxSZXNvbHZlcicpO1xuICAgIGlmICgoIXRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiB8fCBpbnRsVmVyc2lvbnMuaW5jbHVkZXModGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OKSkgJiYgKHR5cGVvZiBJbnRsID09PSAndW5kZWZpbmVkJyB8fCAhSW50bC5QbHVyYWxSdWxlcykpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiA9ICd2Myc7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcignWW91ciBlbnZpcm9ubWVudCBzZWVtcyBub3QgdG8gYmUgSW50bCBBUEkgY29tcGF0aWJsZSwgdXNlIGFuIEludGwuUGx1cmFsUnVsZXMgcG9seWZpbGwuIFdpbGwgZmFsbGJhY2sgdG8gdGhlIGNvbXBhdGliaWxpdHlKU09OIHYzIGZvcm1hdCBoYW5kbGluZy4nKTtcbiAgICB9XG4gICAgdGhpcy5ydWxlcyA9IGNyZWF0ZVJ1bGVzKCk7XG4gICAgdGhpcy5wbHVyYWxSdWxlc0NhY2hlID0ge307XG4gIH1cbiAgYWRkUnVsZShsbmcsIG9iaikge1xuICAgIHRoaXMucnVsZXNbbG5nXSA9IG9iajtcbiAgfVxuICBjbGVhckNhY2hlKCkge1xuICAgIHRoaXMucGx1cmFsUnVsZXNDYWNoZSA9IHt9O1xuICB9XG4gIGdldFJ1bGUoY29kZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBpZiAodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpIHtcbiAgICAgIGNvbnN0IGNsZWFuZWRDb2RlID0gZ2V0Q2xlYW5lZENvZGUoY29kZSA9PT0gJ2RldicgPyAnZW4nIDogY29kZSk7XG4gICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy5vcmRpbmFsID8gJ29yZGluYWwnIDogJ2NhcmRpbmFsJztcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjbGVhbmVkQ29kZSxcbiAgICAgICAgdHlwZVxuICAgICAgfSk7XG4gICAgICBpZiAoY2FjaGVLZXkgaW4gdGhpcy5wbHVyYWxSdWxlc0NhY2hlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGVbY2FjaGVLZXldO1xuICAgICAgfVxuICAgICAgbGV0IHJ1bGU7XG4gICAgICB0cnkge1xuICAgICAgICBydWxlID0gbmV3IEludGwuUGx1cmFsUnVsZXMoY2xlYW5lZENvZGUsIHtcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghY29kZS5tYXRjaCgvLXxfLykpIHJldHVybjtcbiAgICAgICAgY29uc3QgbG5nUGFydCA9IHRoaXMubGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKTtcbiAgICAgICAgcnVsZSA9IHRoaXMuZ2V0UnVsZShsbmdQYXJ0LCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGx1cmFsUnVsZXNDYWNoZVtjYWNoZUtleV0gPSBydWxlO1xuICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJ1bGVzW2NvZGVdIHx8IHRoaXMucnVsZXNbdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpXTtcbiAgfVxuICBuZWVkc1BsdXJhbChjb2RlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKSB7XG4gICAgICByZXR1cm4gcnVsZSAmJiBydWxlLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMubGVuZ3RoID4gMTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bGUgJiYgcnVsZS5udW1iZXJzLmxlbmd0aCA+IDE7XG4gIH1cbiAgZ2V0UGx1cmFsRm9ybXNPZktleShjb2RlLCBrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3VmZml4ZXMoY29kZSwgb3B0aW9ucykubWFwKHN1ZmZpeCA9PiBgJHtrZXl9JHtzdWZmaXh9YCk7XG4gIH1cbiAgZ2V0U3VmZml4ZXMoY29kZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBjb25zdCBydWxlID0gdGhpcy5nZXRSdWxlKGNvZGUsIG9wdGlvbnMpO1xuICAgIGlmICghcnVsZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpIHtcbiAgICAgIHJldHVybiBydWxlLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMuc29ydCgocGx1cmFsQ2F0ZWdvcnkxLCBwbHVyYWxDYXRlZ29yeTIpID0+IHN1ZmZpeGVzT3JkZXJbcGx1cmFsQ2F0ZWdvcnkxXSAtIHN1ZmZpeGVzT3JkZXJbcGx1cmFsQ2F0ZWdvcnkyXSkubWFwKHBsdXJhbENhdGVnb3J5ID0+IGAke3RoaXMub3B0aW9ucy5wcmVwZW5kfSR7b3B0aW9ucy5vcmRpbmFsID8gYG9yZGluYWwke3RoaXMub3B0aW9ucy5wcmVwZW5kfWAgOiAnJ30ke3BsdXJhbENhdGVnb3J5fWApO1xuICAgIH1cbiAgICByZXR1cm4gcnVsZS5udW1iZXJzLm1hcChudW1iZXIgPT4gdGhpcy5nZXRTdWZmaXgoY29kZSwgbnVtYmVyLCBvcHRpb25zKSk7XG4gIH1cbiAgZ2V0U3VmZml4KGNvZGUsIGNvdW50KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSwgb3B0aW9ucyk7XG4gICAgaWYgKHJ1bGUpIHtcbiAgICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5vcHRpb25zLnByZXBlbmR9JHtvcHRpb25zLm9yZGluYWwgPyBgb3JkaW5hbCR7dGhpcy5vcHRpb25zLnByZXBlbmR9YCA6ICcnfSR7cnVsZS5zZWxlY3QoY291bnQpfWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5nZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUocnVsZSwgY291bnQpO1xuICAgIH1cbiAgICB0aGlzLmxvZ2dlci53YXJuKGBubyBwbHVyYWwgcnVsZSBmb3VuZCBmb3I6ICR7Y29kZX1gKTtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgZ2V0U3VmZml4UmV0cm9Db21wYXRpYmxlKHJ1bGUsIGNvdW50KSB7XG4gICAgY29uc3QgaWR4ID0gcnVsZS5ub0FicyA/IHJ1bGUucGx1cmFscyhjb3VudCkgOiBydWxlLnBsdXJhbHMoTWF0aC5hYnMoY291bnQpKTtcbiAgICBsZXQgc3VmZml4ID0gcnVsZS5udW1iZXJzW2lkeF07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCAmJiBydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgaWYgKHN1ZmZpeCA9PT0gMikge1xuICAgICAgICBzdWZmaXggPSAncGx1cmFsJztcbiAgICAgIH0gZWxzZSBpZiAoc3VmZml4ID09PSAxKSB7XG4gICAgICAgIHN1ZmZpeCA9ICcnO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXR1cm5TdWZmaXggPSAoKSA9PiB0aGlzLm9wdGlvbnMucHJlcGVuZCAmJiBzdWZmaXgudG9TdHJpbmcoKSA/IHRoaXMub3B0aW9ucy5wcmVwZW5kICsgc3VmZml4LnRvU3RyaW5nKCkgOiBzdWZmaXgudG9TdHJpbmcoKTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID09PSAndjEnKSB7XG4gICAgICBpZiAoc3VmZml4ID09PSAxKSByZXR1cm4gJyc7XG4gICAgICBpZiAodHlwZW9mIHN1ZmZpeCA9PT0gJ251bWJlcicpIHJldHVybiBgX3BsdXJhbF8ke3N1ZmZpeC50b1N0cmluZygpfWA7XG4gICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gPT09ICd2MicpIHtcbiAgICAgIHJldHVybiByZXR1cm5TdWZmaXgoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCAmJiBydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnByZXBlbmQgJiYgaWR4LnRvU3RyaW5nKCkgPyB0aGlzLm9wdGlvbnMucHJlcGVuZCArIGlkeC50b1N0cmluZygpIDogaWR4LnRvU3RyaW5nKCk7XG4gIH1cbiAgc2hvdWxkVXNlSW50bEFwaSgpIHtcbiAgICByZXR1cm4gIW5vbkludGxWZXJzaW9ucy5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pO1xuICB9XG59XG5cbmNvbnN0IGRlZXBGaW5kV2l0aERlZmF1bHRzID0gZnVuY3Rpb24gKGRhdGEsIGRlZmF1bHREYXRhLCBrZXkpIHtcbiAgbGV0IGtleVNlcGFyYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJy4nO1xuICBsZXQgaWdub3JlSlNPTlN0cnVjdHVyZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogdHJ1ZTtcbiAgbGV0IHBhdGggPSBnZXRQYXRoV2l0aERlZmF1bHRzKGRhdGEsIGRlZmF1bHREYXRhLCBrZXkpO1xuICBpZiAoIXBhdGggJiYgaWdub3JlSlNPTlN0cnVjdHVyZSAmJiBpc1N0cmluZyhrZXkpKSB7XG4gICAgcGF0aCA9IGRlZXBGaW5kKGRhdGEsIGtleSwga2V5U2VwYXJhdG9yKTtcbiAgICBpZiAocGF0aCA9PT0gdW5kZWZpbmVkKSBwYXRoID0gZGVlcEZpbmQoZGVmYXVsdERhdGEsIGtleSwga2V5U2VwYXJhdG9yKTtcbiAgfVxuICByZXR1cm4gcGF0aDtcbn07XG5jb25zdCByZWdleFNhZmUgPSB2YWwgPT4gdmFsLnJlcGxhY2UoL1xcJC9nLCAnJCQkJCcpO1xuY2xhc3MgSW50ZXJwb2xhdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2ludGVycG9sYXRvcicpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5mb3JtYXQgPSBvcHRpb25zLmludGVycG9sYXRpb24gJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdCB8fCAodmFsdWUgPT4gdmFsdWUpO1xuICAgIHRoaXMuaW5pdChvcHRpb25zKTtcbiAgfVxuICBpbml0KCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBpZiAoIW9wdGlvbnMuaW50ZXJwb2xhdGlvbikgb3B0aW9ucy5pbnRlcnBvbGF0aW9uID0ge1xuICAgICAgZXNjYXBlVmFsdWU6IHRydWVcbiAgICB9O1xuICAgIGNvbnN0IHtcbiAgICAgIGVzY2FwZTogZXNjYXBlJDEsXG4gICAgICBlc2NhcGVWYWx1ZSxcbiAgICAgIHVzZVJhd1ZhbHVlVG9Fc2NhcGUsXG4gICAgICBwcmVmaXgsXG4gICAgICBwcmVmaXhFc2NhcGVkLFxuICAgICAgc3VmZml4LFxuICAgICAgc3VmZml4RXNjYXBlZCxcbiAgICAgIGZvcm1hdFNlcGFyYXRvcixcbiAgICAgIHVuZXNjYXBlU3VmZml4LFxuICAgICAgdW5lc2NhcGVQcmVmaXgsXG4gICAgICBuZXN0aW5nUHJlZml4LFxuICAgICAgbmVzdGluZ1ByZWZpeEVzY2FwZWQsXG4gICAgICBuZXN0aW5nU3VmZml4LFxuICAgICAgbmVzdGluZ1N1ZmZpeEVzY2FwZWQsXG4gICAgICBuZXN0aW5nT3B0aW9uc1NlcGFyYXRvcixcbiAgICAgIG1heFJlcGxhY2VzLFxuICAgICAgYWx3YXlzRm9ybWF0XG4gICAgfSA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbjtcbiAgICB0aGlzLmVzY2FwZSA9IGVzY2FwZSQxICE9PSB1bmRlZmluZWQgPyBlc2NhcGUkMSA6IGVzY2FwZTtcbiAgICB0aGlzLmVzY2FwZVZhbHVlID0gZXNjYXBlVmFsdWUgIT09IHVuZGVmaW5lZCA/IGVzY2FwZVZhbHVlIDogdHJ1ZTtcbiAgICB0aGlzLnVzZVJhd1ZhbHVlVG9Fc2NhcGUgPSB1c2VSYXdWYWx1ZVRvRXNjYXBlICE9PSB1bmRlZmluZWQgPyB1c2VSYXdWYWx1ZVRvRXNjYXBlIDogZmFsc2U7XG4gICAgdGhpcy5wcmVmaXggPSBwcmVmaXggPyByZWdleEVzY2FwZShwcmVmaXgpIDogcHJlZml4RXNjYXBlZCB8fCAne3snO1xuICAgIHRoaXMuc3VmZml4ID0gc3VmZml4ID8gcmVnZXhFc2NhcGUoc3VmZml4KSA6IHN1ZmZpeEVzY2FwZWQgfHwgJ319JztcbiAgICB0aGlzLmZvcm1hdFNlcGFyYXRvciA9IGZvcm1hdFNlcGFyYXRvciB8fCAnLCc7XG4gICAgdGhpcy51bmVzY2FwZVByZWZpeCA9IHVuZXNjYXBlU3VmZml4ID8gJycgOiB1bmVzY2FwZVByZWZpeCB8fCAnLSc7XG4gICAgdGhpcy51bmVzY2FwZVN1ZmZpeCA9IHRoaXMudW5lc2NhcGVQcmVmaXggPyAnJyA6IHVuZXNjYXBlU3VmZml4IHx8ICcnO1xuICAgIHRoaXMubmVzdGluZ1ByZWZpeCA9IG5lc3RpbmdQcmVmaXggPyByZWdleEVzY2FwZShuZXN0aW5nUHJlZml4KSA6IG5lc3RpbmdQcmVmaXhFc2NhcGVkIHx8IHJlZ2V4RXNjYXBlKCckdCgnKTtcbiAgICB0aGlzLm5lc3RpbmdTdWZmaXggPSBuZXN0aW5nU3VmZml4ID8gcmVnZXhFc2NhcGUobmVzdGluZ1N1ZmZpeCkgOiBuZXN0aW5nU3VmZml4RXNjYXBlZCB8fCByZWdleEVzY2FwZSgnKScpO1xuICAgIHRoaXMubmVzdGluZ09wdGlvbnNTZXBhcmF0b3IgPSBuZXN0aW5nT3B0aW9uc1NlcGFyYXRvciB8fCAnLCc7XG4gICAgdGhpcy5tYXhSZXBsYWNlcyA9IG1heFJlcGxhY2VzIHx8IDEwMDA7XG4gICAgdGhpcy5hbHdheXNGb3JtYXQgPSBhbHdheXNGb3JtYXQgIT09IHVuZGVmaW5lZCA/IGFsd2F5c0Zvcm1hdCA6IGZhbHNlO1xuICAgIHRoaXMucmVzZXRSZWdFeHAoKTtcbiAgfVxuICByZXNldCgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLmluaXQodGhpcy5vcHRpb25zKTtcbiAgfVxuICByZXNldFJlZ0V4cCgpIHtcbiAgICBjb25zdCBnZXRPclJlc2V0UmVnRXhwID0gKGV4aXN0aW5nUmVnRXhwLCBwYXR0ZXJuKSA9PiB7XG4gICAgICBpZiAoZXhpc3RpbmdSZWdFeHAgJiYgZXhpc3RpbmdSZWdFeHAuc291cmNlID09PSBwYXR0ZXJuKSB7XG4gICAgICAgIGV4aXN0aW5nUmVnRXhwLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIHJldHVybiBleGlzdGluZ1JlZ0V4cDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4sICdnJyk7XG4gICAgfTtcbiAgICB0aGlzLnJlZ2V4cCA9IGdldE9yUmVzZXRSZWdFeHAodGhpcy5yZWdleHAsIGAke3RoaXMucHJlZml4fSguKz8pJHt0aGlzLnN1ZmZpeH1gKTtcbiAgICB0aGlzLnJlZ2V4cFVuZXNjYXBlID0gZ2V0T3JSZXNldFJlZ0V4cCh0aGlzLnJlZ2V4cFVuZXNjYXBlLCBgJHt0aGlzLnByZWZpeH0ke3RoaXMudW5lc2NhcGVQcmVmaXh9KC4rPykke3RoaXMudW5lc2NhcGVTdWZmaXh9JHt0aGlzLnN1ZmZpeH1gKTtcbiAgICB0aGlzLm5lc3RpbmdSZWdleHAgPSBnZXRPclJlc2V0UmVnRXhwKHRoaXMubmVzdGluZ1JlZ2V4cCwgYCR7dGhpcy5uZXN0aW5nUHJlZml4fSguKz8pJHt0aGlzLm5lc3RpbmdTdWZmaXh9YCk7XG4gIH1cbiAgaW50ZXJwb2xhdGUoc3RyLCBkYXRhLCBsbmcsIG9wdGlvbnMpIHtcbiAgICBsZXQgbWF0Y2g7XG4gICAgbGV0IHZhbHVlO1xuICAgIGxldCByZXBsYWNlcztcbiAgICBjb25zdCBkZWZhdWx0RGF0YSA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzIHx8IHt9O1xuICAgIGNvbnN0IGhhbmRsZUZvcm1hdCA9IGtleSA9PiB7XG4gICAgICBpZiAoa2V5LmluZGV4T2YodGhpcy5mb3JtYXRTZXBhcmF0b3IpIDwgMCkge1xuICAgICAgICBjb25zdCBwYXRoID0gZGVlcEZpbmRXaXRoRGVmYXVsdHMoZGF0YSwgZGVmYXVsdERhdGEsIGtleSwgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciwgdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5hbHdheXNGb3JtYXQgPyB0aGlzLmZvcm1hdChwYXRoLCB1bmRlZmluZWQsIGxuZywge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBpbnRlcnBvbGF0aW9ua2V5OiBrZXlcbiAgICAgICAgfSkgOiBwYXRoO1xuICAgICAgfVxuICAgICAgY29uc3QgcCA9IGtleS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcik7XG4gICAgICBjb25zdCBrID0gcC5zaGlmdCgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IGYgPSBwLmpvaW4odGhpcy5mb3JtYXRTZXBhcmF0b3IpLnRyaW0oKTtcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdChkZWVwRmluZFdpdGhEZWZhdWx0cyhkYXRhLCBkZWZhdWx0RGF0YSwgaywgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciwgdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUpLCBmLCBsbmcsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgaW50ZXJwb2xhdGlvbmtleToga1xuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLnJlc2V0UmVnRXhwKCk7XG4gICAgY29uc3QgbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyID0gb3B0aW9ucyAmJiBvcHRpb25zLm1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlciB8fCB0aGlzLm9wdGlvbnMubWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyO1xuICAgIGNvbnN0IHNraXBPblZhcmlhYmxlcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgOiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXM7XG4gICAgY29uc3QgdG9kb3MgPSBbe1xuICAgICAgcmVnZXg6IHRoaXMucmVnZXhwVW5lc2NhcGUsXG4gICAgICBzYWZlVmFsdWU6IHZhbCA9PiByZWdleFNhZmUodmFsKVxuICAgIH0sIHtcbiAgICAgIHJlZ2V4OiB0aGlzLnJlZ2V4cCxcbiAgICAgIHNhZmVWYWx1ZTogdmFsID0+IHRoaXMuZXNjYXBlVmFsdWUgPyByZWdleFNhZmUodGhpcy5lc2NhcGUodmFsKSkgOiByZWdleFNhZmUodmFsKVxuICAgIH1dO1xuICAgIHRvZG9zLmZvckVhY2godG9kbyA9PiB7XG4gICAgICByZXBsYWNlcyA9IDA7XG4gICAgICB3aGlsZSAobWF0Y2ggPSB0b2RvLnJlZ2V4LmV4ZWMoc3RyKSkge1xuICAgICAgICBjb25zdCBtYXRjaGVkVmFyID0gbWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICB2YWx1ZSA9IGhhbmRsZUZvcm1hdChtYXRjaGVkVmFyKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc3QgdGVtcCA9IG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcihzdHIsIG1hdGNoLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHZhbHVlID0gaXNTdHJpbmcodGVtcCkgPyB0ZW1wIDogJyc7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvcHRpb25zLCBtYXRjaGVkVmFyKSkge1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKHNraXBPblZhcmlhYmxlcykge1xuICAgICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBtaXNzZWQgdG8gcGFzcyBpbiB2YXJpYWJsZSAke21hdGNoZWRWYXJ9IGZvciBpbnRlcnBvbGF0aW5nICR7c3RyfWApO1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaW5nKHZhbHVlKSAmJiAhdGhpcy51c2VSYXdWYWx1ZVRvRXNjYXBlKSB7XG4gICAgICAgICAgdmFsdWUgPSBtYWtlU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzYWZlVmFsdWUgPSB0b2RvLnNhZmVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG1hdGNoWzBdLCBzYWZlVmFsdWUpO1xuICAgICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgICAgdG9kby5yZWdleC5sYXN0SW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIHRvZG8ucmVnZXgubGFzdEluZGV4IC09IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2RvLnJlZ2V4Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZXMrKztcbiAgICAgICAgaWYgKHJlcGxhY2VzID49IHRoaXMubWF4UmVwbGFjZXMpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzdHI7XG4gIH1cbiAgbmVzdChzdHIsIGZjKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgdmFsdWU7XG4gICAgbGV0IGNsb25lZE9wdGlvbnM7XG4gICAgY29uc3QgaGFuZGxlSGFzT3B0aW9ucyA9IChrZXksIGluaGVyaXRlZE9wdGlvbnMpID0+IHtcbiAgICAgIGNvbnN0IHNlcCA9IHRoaXMubmVzdGluZ09wdGlvbnNTZXBhcmF0b3I7XG4gICAgICBpZiAoa2V5LmluZGV4T2Yoc2VwKSA8IDApIHJldHVybiBrZXk7XG4gICAgICBjb25zdCBjID0ga2V5LnNwbGl0KG5ldyBSZWdFeHAoYCR7c2VwfVsgXSp7YCkpO1xuICAgICAgbGV0IG9wdGlvbnNTdHJpbmcgPSBgeyR7Y1sxXX1gO1xuICAgICAga2V5ID0gY1swXTtcbiAgICAgIG9wdGlvbnNTdHJpbmcgPSB0aGlzLmludGVycG9sYXRlKG9wdGlvbnNTdHJpbmcsIGNsb25lZE9wdGlvbnMpO1xuICAgICAgY29uc3QgbWF0Y2hlZFNpbmdsZVF1b3RlcyA9IG9wdGlvbnNTdHJpbmcubWF0Y2goLycvZyk7XG4gICAgICBjb25zdCBtYXRjaGVkRG91YmxlUXVvdGVzID0gb3B0aW9uc1N0cmluZy5tYXRjaCgvXCIvZyk7XG4gICAgICBpZiAobWF0Y2hlZFNpbmdsZVF1b3RlcyAmJiBtYXRjaGVkU2luZ2xlUXVvdGVzLmxlbmd0aCAlIDIgPT09IDAgJiYgIW1hdGNoZWREb3VibGVRdW90ZXMgfHwgbWF0Y2hlZERvdWJsZVF1b3Rlcy5sZW5ndGggJSAyICE9PSAwKSB7XG4gICAgICAgIG9wdGlvbnNTdHJpbmcgPSBvcHRpb25zU3RyaW5nLnJlcGxhY2UoLycvZywgJ1wiJyk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjbG9uZWRPcHRpb25zID0gSlNPTi5wYXJzZShvcHRpb25zU3RyaW5nKTtcbiAgICAgICAgaWYgKGluaGVyaXRlZE9wdGlvbnMpIGNsb25lZE9wdGlvbnMgPSB7XG4gICAgICAgICAgLi4uaW5oZXJpdGVkT3B0aW9ucyxcbiAgICAgICAgICAuLi5jbG9uZWRPcHRpb25zXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYGZhaWxlZCBwYXJzaW5nIG9wdGlvbnMgc3RyaW5nIGluIG5lc3RpbmcgZm9yIGtleSAke2tleX1gLCBlKTtcbiAgICAgICAgcmV0dXJuIGAke2tleX0ke3NlcH0ke29wdGlvbnNTdHJpbmd9YDtcbiAgICAgIH1cbiAgICAgIGlmIChjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZSAmJiBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZS5pbmRleE9mKHRoaXMucHJlZml4KSA+IC0xKSBkZWxldGUgY2xvbmVkT3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH07XG4gICAgd2hpbGUgKG1hdGNoID0gdGhpcy5uZXN0aW5nUmVnZXhwLmV4ZWMoc3RyKSkge1xuICAgICAgbGV0IGZvcm1hdHRlcnMgPSBbXTtcbiAgICAgIGNsb25lZE9wdGlvbnMgPSB7XG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH07XG4gICAgICBjbG9uZWRPcHRpb25zID0gY2xvbmVkT3B0aW9ucy5yZXBsYWNlICYmICFpc1N0cmluZyhjbG9uZWRPcHRpb25zLnJlcGxhY2UpID8gY2xvbmVkT3B0aW9ucy5yZXBsYWNlIDogY2xvbmVkT3B0aW9ucztcbiAgICAgIGNsb25lZE9wdGlvbnMuYXBwbHlQb3N0UHJvY2Vzc29yID0gZmFsc2U7XG4gICAgICBkZWxldGUgY2xvbmVkT3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgICBsZXQgZG9SZWR1Y2UgPSBmYWxzZTtcbiAgICAgIGlmIChtYXRjaFswXS5pbmRleE9mKHRoaXMuZm9ybWF0U2VwYXJhdG9yKSAhPT0gLTEgJiYgIS97Lip9Ly50ZXN0KG1hdGNoWzFdKSkge1xuICAgICAgICBjb25zdCByID0gbWF0Y2hbMV0uc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpLm1hcChlbGVtID0+IGVsZW0udHJpbSgpKTtcbiAgICAgICAgbWF0Y2hbMV0gPSByLnNoaWZ0KCk7XG4gICAgICAgIGZvcm1hdHRlcnMgPSByO1xuICAgICAgICBkb1JlZHVjZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IGZjKGhhbmRsZUhhc09wdGlvbnMuY2FsbCh0aGlzLCBtYXRjaFsxXS50cmltKCksIGNsb25lZE9wdGlvbnMpLCBjbG9uZWRPcHRpb25zKTtcbiAgICAgIGlmICh2YWx1ZSAmJiBtYXRjaFswXSA9PT0gc3RyICYmICFpc1N0cmluZyh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgIGlmICghaXNTdHJpbmcodmFsdWUpKSB2YWx1ZSA9IG1ha2VTdHJpbmcodmFsdWUpO1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBtaXNzZWQgdG8gcmVzb2x2ZSAke21hdGNoWzFdfSBmb3IgbmVzdGluZyAke3N0cn1gKTtcbiAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmIChkb1JlZHVjZSkge1xuICAgICAgICB2YWx1ZSA9IGZvcm1hdHRlcnMucmVkdWNlKCh2LCBmKSA9PiB0aGlzLmZvcm1hdCh2LCBmLCBvcHRpb25zLmxuZywge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgaW50ZXJwb2xhdGlvbmtleTogbWF0Y2hbMV0udHJpbSgpXG4gICAgICAgIH0pLCB2YWx1ZS50cmltKCkpO1xuICAgICAgfVxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHZhbHVlKTtcbiAgICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuY29uc3QgcGFyc2VGb3JtYXRTdHIgPSBmb3JtYXRTdHIgPT4ge1xuICBsZXQgZm9ybWF0TmFtZSA9IGZvcm1hdFN0ci50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgY29uc3QgZm9ybWF0T3B0aW9ucyA9IHt9O1xuICBpZiAoZm9ybWF0U3RyLmluZGV4T2YoJygnKSA+IC0xKSB7XG4gICAgY29uc3QgcCA9IGZvcm1hdFN0ci5zcGxpdCgnKCcpO1xuICAgIGZvcm1hdE5hbWUgPSBwWzBdLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIGNvbnN0IG9wdFN0ciA9IHBbMV0uc3Vic3RyaW5nKDAsIHBbMV0ubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGZvcm1hdE5hbWUgPT09ICdjdXJyZW5jeScgJiYgb3B0U3RyLmluZGV4T2YoJzonKSA8IDApIHtcbiAgICAgIGlmICghZm9ybWF0T3B0aW9ucy5jdXJyZW5jeSkgZm9ybWF0T3B0aW9ucy5jdXJyZW5jeSA9IG9wdFN0ci50cmltKCk7XG4gICAgfSBlbHNlIGlmIChmb3JtYXROYW1lID09PSAncmVsYXRpdmV0aW1lJyAmJiBvcHRTdHIuaW5kZXhPZignOicpIDwgMCkge1xuICAgICAgaWYgKCFmb3JtYXRPcHRpb25zLnJhbmdlKSBmb3JtYXRPcHRpb25zLnJhbmdlID0gb3B0U3RyLnRyaW0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgb3B0cyA9IG9wdFN0ci5zcGxpdCgnOycpO1xuICAgICAgb3B0cy5mb3JFYWNoKG9wdCA9PiB7XG4gICAgICAgIGlmIChvcHQpIHtcbiAgICAgICAgICBjb25zdCBba2V5LCAuLi5yZXN0XSA9IG9wdC5zcGxpdCgnOicpO1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHJlc3Quam9pbignOicpLnRyaW0oKS5yZXBsYWNlKC9eJyt8JyskL2csICcnKTtcbiAgICAgICAgICBjb25zdCB0cmltbWVkS2V5ID0ga2V5LnRyaW0oKTtcbiAgICAgICAgICBpZiAoIWZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0pIGZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0gPSB2YWw7XG4gICAgICAgICAgaWYgKHZhbCA9PT0gJ2ZhbHNlJykgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IGZhbHNlO1xuICAgICAgICAgIGlmICh2YWwgPT09ICd0cnVlJykgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IHRydWU7XG4gICAgICAgICAgaWYgKCFpc05hTih2YWwpKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gcGFyc2VJbnQodmFsLCAxMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGZvcm1hdE5hbWUsXG4gICAgZm9ybWF0T3B0aW9uc1xuICB9O1xufTtcbmNvbnN0IGNyZWF0ZUNhY2hlZEZvcm1hdHRlciA9IGZuID0+IHtcbiAgY29uc3QgY2FjaGUgPSB7fTtcbiAgcmV0dXJuICh2YWwsIGxuZywgb3B0aW9ucykgPT4ge1xuICAgIGxldCBvcHRGb3JDYWNoZSA9IG9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9ua2V5ICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0gJiYgb3B0aW9uc1tvcHRpb25zLmludGVycG9sYXRpb25rZXldKSB7XG4gICAgICBvcHRGb3JDYWNoZSA9IHtcbiAgICAgICAgLi4ub3B0Rm9yQ2FjaGUsXG4gICAgICAgIFtvcHRpb25zLmludGVycG9sYXRpb25rZXldOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IGxuZyArIEpTT04uc3RyaW5naWZ5KG9wdEZvckNhY2hlKTtcbiAgICBsZXQgZm9ybWF0dGVyID0gY2FjaGVba2V5XTtcbiAgICBpZiAoIWZvcm1hdHRlcikge1xuICAgICAgZm9ybWF0dGVyID0gZm4oZ2V0Q2xlYW5lZENvZGUobG5nKSwgb3B0aW9ucyk7XG4gICAgICBjYWNoZVtrZXldID0gZm9ybWF0dGVyO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVyKHZhbCk7XG4gIH07XG59O1xuY2xhc3MgRm9ybWF0dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2Zvcm1hdHRlcicpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5mb3JtYXRzID0ge1xuICAgICAgbnVtYmVyOiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICBjdXJyZW5jeTogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG5nLCB7XG4gICAgICAgICAgLi4ub3B0LFxuICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmFsID0+IGZvcm1hdHRlci5mb3JtYXQodmFsKTtcbiAgICAgIH0pLFxuICAgICAgZGF0ZXRpbWU6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG5nLCB7XG4gICAgICAgICAgLi4ub3B0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmFsID0+IGZvcm1hdHRlci5mb3JtYXQodmFsKTtcbiAgICAgIH0pLFxuICAgICAgcmVsYXRpdmV0aW1lOiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwsIG9wdC5yYW5nZSB8fCAnZGF5Jyk7XG4gICAgICB9KSxcbiAgICAgIGxpc3Q6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTGlzdEZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSlcbiAgICB9O1xuICAgIHRoaXMuaW5pdChvcHRpb25zKTtcbiAgfVxuICBpbml0KHNlcnZpY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIGludGVycG9sYXRpb246IHt9XG4gICAgfTtcbiAgICB0aGlzLmZvcm1hdFNlcGFyYXRvciA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXRTZXBhcmF0b3IgfHwgJywnO1xuICB9XG4gIGFkZChuYW1lLCBmYykge1xuICAgIHRoaXMuZm9ybWF0c1tuYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpXSA9IGZjO1xuICB9XG4gIGFkZENhY2hlZChuYW1lLCBmYykge1xuICAgIHRoaXMuZm9ybWF0c1tuYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpXSA9IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcihmYyk7XG4gIH1cbiAgZm9ybWF0KHZhbHVlLCBmb3JtYXQsIGxuZykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBjb25zdCBmb3JtYXRzID0gZm9ybWF0LnNwbGl0KHRoaXMuZm9ybWF0U2VwYXJhdG9yKTtcbiAgICBpZiAoZm9ybWF0cy5sZW5ndGggPiAxICYmIGZvcm1hdHNbMF0uaW5kZXhPZignKCcpID4gMSAmJiBmb3JtYXRzWzBdLmluZGV4T2YoJyknKSA8IDAgJiYgZm9ybWF0cy5maW5kKGYgPT4gZi5pbmRleE9mKCcpJykgPiAtMSkpIHtcbiAgICAgIGNvbnN0IGxhc3RJbmRleCA9IGZvcm1hdHMuZmluZEluZGV4KGYgPT4gZi5pbmRleE9mKCcpJykgPiAtMSk7XG4gICAgICBmb3JtYXRzWzBdID0gW2Zvcm1hdHNbMF0sIC4uLmZvcm1hdHMuc3BsaWNlKDEsIGxhc3RJbmRleCldLmpvaW4odGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBmb3JtYXRzLnJlZHVjZSgobWVtLCBmKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGZvcm1hdE5hbWUsXG4gICAgICAgIGZvcm1hdE9wdGlvbnNcbiAgICAgIH0gPSBwYXJzZUZvcm1hdFN0cihmKTtcbiAgICAgIGlmICh0aGlzLmZvcm1hdHNbZm9ybWF0TmFtZV0pIHtcbiAgICAgICAgbGV0IGZvcm1hdHRlZCA9IG1lbTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB2YWxPcHRpb25zID0gb3B0aW9ucyAmJiBvcHRpb25zLmZvcm1hdFBhcmFtcyAmJiBvcHRpb25zLmZvcm1hdFBhcmFtc1tvcHRpb25zLmludGVycG9sYXRpb25rZXldIHx8IHt9O1xuICAgICAgICAgIGNvbnN0IGwgPSB2YWxPcHRpb25zLmxvY2FsZSB8fCB2YWxPcHRpb25zLmxuZyB8fCBvcHRpb25zLmxvY2FsZSB8fCBvcHRpb25zLmxuZyB8fCBsbmc7XG4gICAgICAgICAgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRzW2Zvcm1hdE5hbWVdKG1lbSwgbCwge1xuICAgICAgICAgICAgLi4uZm9ybWF0T3B0aW9ucyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAuLi52YWxPcHRpb25zXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2FybihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYHRoZXJlIHdhcyBubyBmb3JtYXQgZnVuY3Rpb24gZm9yICR7Zm9ybWF0TmFtZX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZW07XG4gICAgfSwgdmFsdWUpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuY29uc3QgcmVtb3ZlUGVuZGluZyA9IChxLCBuYW1lKSA9PiB7XG4gIGlmIChxLnBlbmRpbmdbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgIGRlbGV0ZSBxLnBlbmRpbmdbbmFtZV07XG4gICAgcS5wZW5kaW5nQ291bnQtLTtcbiAgfVxufTtcbmNsYXNzIENvbm5lY3RvciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKGJhY2tlbmQsIHN0b3JlLCBzZXJ2aWNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYmFja2VuZCA9IGJhY2tlbmQ7XG4gICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIHRoaXMuc2VydmljZXMgPSBzZXJ2aWNlcztcbiAgICB0aGlzLmxhbmd1YWdlVXRpbHMgPSBzZXJ2aWNlcy5sYW5ndWFnZVV0aWxzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnYmFja2VuZENvbm5lY3RvcicpO1xuICAgIHRoaXMud2FpdGluZ1JlYWRzID0gW107XG4gICAgdGhpcy5tYXhQYXJhbGxlbFJlYWRzID0gb3B0aW9ucy5tYXhQYXJhbGxlbFJlYWRzIHx8IDEwO1xuICAgIHRoaXMucmVhZGluZ0NhbGxzID0gMDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSBvcHRpb25zLm1heFJldHJpZXMgPj0gMCA/IG9wdGlvbnMubWF4UmV0cmllcyA6IDU7XG4gICAgdGhpcy5yZXRyeVRpbWVvdXQgPSBvcHRpb25zLnJldHJ5VGltZW91dCA+PSAxID8gb3B0aW9ucy5yZXRyeVRpbWVvdXQgOiAzNTA7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICBpZiAodGhpcy5iYWNrZW5kICYmIHRoaXMuYmFja2VuZC5pbml0KSB7XG4gICAgICB0aGlzLmJhY2tlbmQuaW5pdChzZXJ2aWNlcywgb3B0aW9ucy5iYWNrZW5kLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cbiAgcXVldWVMb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCB0b0xvYWQgPSB7fTtcbiAgICBjb25zdCBwZW5kaW5nID0ge307XG4gICAgY29uc3QgdG9Mb2FkTGFuZ3VhZ2VzID0ge307XG4gICAgY29uc3QgdG9Mb2FkTmFtZXNwYWNlcyA9IHt9O1xuICAgIGxhbmd1YWdlcy5mb3JFYWNoKGxuZyA9PiB7XG4gICAgICBsZXQgaGFzQWxsTmFtZXNwYWNlcyA9IHRydWU7XG4gICAgICBuYW1lc3BhY2VzLmZvckVhY2gobnMgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gYCR7bG5nfXwke25zfWA7XG4gICAgICAgIGlmICghb3B0aW9ucy5yZWxvYWQgJiYgdGhpcy5zdG9yZS5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkge1xuICAgICAgICAgIHRoaXMuc3RhdGVbbmFtZV0gPSAyO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGVbbmFtZV0gPCAwKSA7IGVsc2UgaWYgKHRoaXMuc3RhdGVbbmFtZV0gPT09IDEpIHtcbiAgICAgICAgICBpZiAocGVuZGluZ1tuYW1lXSA9PT0gdW5kZWZpbmVkKSBwZW5kaW5nW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnN0YXRlW25hbWVdID0gMTtcbiAgICAgICAgICBoYXNBbGxOYW1lc3BhY2VzID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHBlbmRpbmdbbmFtZV0gPT09IHVuZGVmaW5lZCkgcGVuZGluZ1tuYW1lXSA9IHRydWU7XG4gICAgICAgICAgaWYgKHRvTG9hZFtuYW1lXSA9PT0gdW5kZWZpbmVkKSB0b0xvYWRbbmFtZV0gPSB0cnVlO1xuICAgICAgICAgIGlmICh0b0xvYWROYW1lc3BhY2VzW25zXSA9PT0gdW5kZWZpbmVkKSB0b0xvYWROYW1lc3BhY2VzW25zXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCFoYXNBbGxOYW1lc3BhY2VzKSB0b0xvYWRMYW5ndWFnZXNbbG5nXSA9IHRydWU7XG4gICAgfSk7XG4gICAgaWYgKE9iamVjdC5rZXlzKHRvTG9hZCkubGVuZ3RoIHx8IE9iamVjdC5rZXlzKHBlbmRpbmcpLmxlbmd0aCkge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtcbiAgICAgICAgcGVuZGluZyxcbiAgICAgICAgcGVuZGluZ0NvdW50OiBPYmplY3Qua2V5cyhwZW5kaW5nKS5sZW5ndGgsXG4gICAgICAgIGxvYWRlZDoge30sXG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvTG9hZDogT2JqZWN0LmtleXModG9Mb2FkKSxcbiAgICAgIHBlbmRpbmc6IE9iamVjdC5rZXlzKHBlbmRpbmcpLFxuICAgICAgdG9Mb2FkTGFuZ3VhZ2VzOiBPYmplY3Qua2V5cyh0b0xvYWRMYW5ndWFnZXMpLFxuICAgICAgdG9Mb2FkTmFtZXNwYWNlczogT2JqZWN0LmtleXModG9Mb2FkTmFtZXNwYWNlcylcbiAgICB9O1xuICB9XG4gIGxvYWRlZChuYW1lLCBlcnIsIGRhdGEpIHtcbiAgICBjb25zdCBzID0gbmFtZS5zcGxpdCgnfCcpO1xuICAgIGNvbnN0IGxuZyA9IHNbMF07XG4gICAgY29uc3QgbnMgPSBzWzFdO1xuICAgIGlmIChlcnIpIHRoaXMuZW1pdCgnZmFpbGVkTG9hZGluZycsIGxuZywgbnMsIGVycik7XG4gICAgaWYgKCFlcnIgJiYgZGF0YSkge1xuICAgICAgdGhpcy5zdG9yZS5hZGRSZXNvdXJjZUJ1bmRsZShsbmcsIG5zLCBkYXRhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge1xuICAgICAgICBza2lwQ29weTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGVbbmFtZV0gPSBlcnIgPyAtMSA6IDI7XG4gICAgaWYgKGVyciAmJiBkYXRhKSB0aGlzLnN0YXRlW25hbWVdID0gMDtcbiAgICBjb25zdCBsb2FkZWQgPSB7fTtcbiAgICB0aGlzLnF1ZXVlLmZvckVhY2gocSA9PiB7XG4gICAgICBwdXNoUGF0aChxLmxvYWRlZCwgW2xuZ10sIG5zKTtcbiAgICAgIHJlbW92ZVBlbmRpbmcocSwgbmFtZSk7XG4gICAgICBpZiAoZXJyKSBxLmVycm9ycy5wdXNoKGVycik7XG4gICAgICBpZiAocS5wZW5kaW5nQ291bnQgPT09IDAgJiYgIXEuZG9uZSkge1xuICAgICAgICBPYmplY3Qua2V5cyhxLmxvYWRlZCkuZm9yRWFjaChsID0+IHtcbiAgICAgICAgICBpZiAoIWxvYWRlZFtsXSkgbG9hZGVkW2xdID0ge307XG4gICAgICAgICAgY29uc3QgbG9hZGVkS2V5cyA9IHEubG9hZGVkW2xdO1xuICAgICAgICAgIGlmIChsb2FkZWRLZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgbG9hZGVkS2V5cy5mb3JFYWNoKG4gPT4ge1xuICAgICAgICAgICAgICBpZiAobG9hZGVkW2xdW25dID09PSB1bmRlZmluZWQpIGxvYWRlZFtsXVtuXSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBxLmRvbmUgPSB0cnVlO1xuICAgICAgICBpZiAocS5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgcS5jYWxsYmFjayhxLmVycm9ycyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcS5jYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5lbWl0KCdsb2FkZWQnLCBsb2FkZWQpO1xuICAgIHRoaXMucXVldWUgPSB0aGlzLnF1ZXVlLmZpbHRlcihxID0+ICFxLmRvbmUpO1xuICB9XG4gIHJlYWQobG5nLCBucywgZmNOYW1lKSB7XG4gICAgbGV0IHRyaWVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAwO1xuICAgIGxldCB3YWl0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB0aGlzLnJldHJ5VGltZW91dDtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gNSA/IGFyZ3VtZW50c1s1XSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIWxuZy5sZW5ndGgpIHJldHVybiBjYWxsYmFjayhudWxsLCB7fSk7XG4gICAgaWYgKHRoaXMucmVhZGluZ0NhbGxzID49IHRoaXMubWF4UGFyYWxsZWxSZWFkcykge1xuICAgICAgdGhpcy53YWl0aW5nUmVhZHMucHVzaCh7XG4gICAgICAgIGxuZyxcbiAgICAgICAgbnMsXG4gICAgICAgIGZjTmFtZSxcbiAgICAgICAgdHJpZWQsXG4gICAgICAgIHdhaXQsXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZWFkaW5nQ2FsbHMrKztcbiAgICBjb25zdCByZXNvbHZlciA9IChlcnIsIGRhdGEpID0+IHtcbiAgICAgIHRoaXMucmVhZGluZ0NhbGxzLS07XG4gICAgICBpZiAodGhpcy53YWl0aW5nUmVhZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy53YWl0aW5nUmVhZHMuc2hpZnQoKTtcbiAgICAgICAgdGhpcy5yZWFkKG5leHQubG5nLCBuZXh0Lm5zLCBuZXh0LmZjTmFtZSwgbmV4dC50cmllZCwgbmV4dC53YWl0LCBuZXh0LmNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIGlmIChlcnIgJiYgZGF0YSAmJiB0cmllZCA8IHRoaXMubWF4UmV0cmllcykge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlYWQuY2FsbCh0aGlzLCBsbmcsIG5zLCBmY05hbWUsIHRyaWVkICsgMSwgd2FpdCAqIDIsIGNhbGxiYWNrKTtcbiAgICAgICAgfSwgd2FpdCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKGVyciwgZGF0YSk7XG4gICAgfTtcbiAgICBjb25zdCBmYyA9IHRoaXMuYmFja2VuZFtmY05hbWVdLmJpbmQodGhpcy5iYWNrZW5kKTtcbiAgICBpZiAoZmMubGVuZ3RoID09PSAyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByID0gZmMobG5nLCBucyk7XG4gICAgICAgIGlmIChyICYmIHR5cGVvZiByLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByLnRoZW4oZGF0YSA9PiByZXNvbHZlcihudWxsLCBkYXRhKSkuY2F0Y2gocmVzb2x2ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmVyKG51bGwsIHIpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzb2x2ZXIoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGZjKGxuZywgbnMsIHJlc29sdmVyKTtcbiAgfVxuICBwcmVwYXJlTG9hZGluZyhsYW5ndWFnZXMsIG5hbWVzcGFjZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7XG4gICAgaWYgKCF0aGlzLmJhY2tlbmQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ05vIGJhY2tlbmQgd2FzIGFkZGVkIHZpYSBpMThuZXh0LnVzZS4gV2lsbCBub3QgbG9hZCByZXNvdXJjZXMuJyk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgaWYgKGlzU3RyaW5nKGxhbmd1YWdlcykpIGxhbmd1YWdlcyA9IHRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobGFuZ3VhZ2VzKTtcbiAgICBpZiAoaXNTdHJpbmcobmFtZXNwYWNlcykpIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc107XG4gICAgY29uc3QgdG9Mb2FkID0gdGhpcy5xdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgaWYgKCF0b0xvYWQudG9Mb2FkLmxlbmd0aCkge1xuICAgICAgaWYgKCF0b0xvYWQucGVuZGluZy5sZW5ndGgpIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdG9Mb2FkLnRvTG9hZC5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgdGhpcy5sb2FkT25lKG5hbWUpO1xuICAgIH0pO1xuICB9XG4gIGxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHRoaXMucHJlcGFyZUxvYWRpbmcobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCB7fSwgY2FsbGJhY2spO1xuICB9XG4gIHJlbG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wcmVwYXJlTG9hZGluZyhsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIHtcbiAgICAgIHJlbG9hZDogdHJ1ZVxuICAgIH0sIGNhbGxiYWNrKTtcbiAgfVxuICBsb2FkT25lKG5hbWUpIHtcbiAgICBsZXQgcHJlZml4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgICBjb25zdCBzID0gbmFtZS5zcGxpdCgnfCcpO1xuICAgIGNvbnN0IGxuZyA9IHNbMF07XG4gICAgY29uc3QgbnMgPSBzWzFdO1xuICAgIHRoaXMucmVhZChsbmcsIG5zLCAncmVhZCcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICBpZiAoZXJyKSB0aGlzLmxvZ2dlci53YXJuKGAke3ByZWZpeH1sb2FkaW5nIG5hbWVzcGFjZSAke25zfSBmb3IgbGFuZ3VhZ2UgJHtsbmd9IGZhaWxlZGAsIGVycik7XG4gICAgICBpZiAoIWVyciAmJiBkYXRhKSB0aGlzLmxvZ2dlci5sb2coYCR7cHJlZml4fWxvYWRlZCBuYW1lc3BhY2UgJHtuc30gZm9yIGxhbmd1YWdlICR7bG5nfWAsIGRhdGEpO1xuICAgICAgdGhpcy5sb2FkZWQobmFtZSwgZXJyLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuICBzYXZlTWlzc2luZyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlLCBpc1VwZGF0ZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiB7fTtcbiAgICBsZXQgY2xiID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiAoKSA9PiB7fTtcbiAgICBpZiAodGhpcy5zZXJ2aWNlcy51dGlscyAmJiB0aGlzLnNlcnZpY2VzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZSAmJiAhdGhpcy5zZXJ2aWNlcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UobmFtZXNwYWNlKSkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybihgZGlkIG5vdCBzYXZlIGtleSBcIiR7a2V5fVwiIGFzIHRoZSBuYW1lc3BhY2UgXCIke25hbWVzcGFjZX1cIiB3YXMgbm90IHlldCBsb2FkZWRgLCAnVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCB8fCBrZXkgPT09IG51bGwgfHwga2V5ID09PSAnJykgcmV0dXJuO1xuICAgIGlmICh0aGlzLmJhY2tlbmQgJiYgdGhpcy5iYWNrZW5kLmNyZWF0ZSkge1xuICAgICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaXNVcGRhdGVcbiAgICAgIH07XG4gICAgICBjb25zdCBmYyA9IHRoaXMuYmFja2VuZC5jcmVhdGUuYmluZCh0aGlzLmJhY2tlbmQpO1xuICAgICAgaWYgKGZjLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICBpZiAoZmMubGVuZ3RoID09PSA1KSB7XG4gICAgICAgICAgICByID0gZmMobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSwgb3B0cyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHIgPSBmYyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHIgJiYgdHlwZW9mIHIudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgci50aGVuKGRhdGEgPT4gY2xiKG51bGwsIGRhdGEpKS5jYXRjaChjbGIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbGIobnVsbCwgcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjbGIoZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmMobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSwgY2xiLCBvcHRzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFsYW5ndWFnZXMgfHwgIWxhbmd1YWdlc1swXSkgcmV0dXJuO1xuICAgIHRoaXMuc3RvcmUuYWRkUmVzb3VyY2UobGFuZ3VhZ2VzWzBdLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSk7XG4gIH1cbn1cblxuY29uc3QgZ2V0ID0gKCkgPT4gKHtcbiAgZGVidWc6IGZhbHNlLFxuICBpbml0SW1tZWRpYXRlOiB0cnVlLFxuICBuczogWyd0cmFuc2xhdGlvbiddLFxuICBkZWZhdWx0TlM6IFsndHJhbnNsYXRpb24nXSxcbiAgZmFsbGJhY2tMbmc6IFsnZGV2J10sXG4gIGZhbGxiYWNrTlM6IGZhbHNlLFxuICBzdXBwb3J0ZWRMbmdzOiBmYWxzZSxcbiAgbm9uRXhwbGljaXRTdXBwb3J0ZWRMbmdzOiBmYWxzZSxcbiAgbG9hZDogJ2FsbCcsXG4gIHByZWxvYWQ6IGZhbHNlLFxuICBzaW1wbGlmeVBsdXJhbFN1ZmZpeDogdHJ1ZSxcbiAga2V5U2VwYXJhdG9yOiAnLicsXG4gIG5zU2VwYXJhdG9yOiAnOicsXG4gIHBsdXJhbFNlcGFyYXRvcjogJ18nLFxuICBjb250ZXh0U2VwYXJhdG9yOiAnXycsXG4gIHBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzOiBmYWxzZSxcbiAgc2F2ZU1pc3Npbmc6IGZhbHNlLFxuICB1cGRhdGVNaXNzaW5nOiBmYWxzZSxcbiAgc2F2ZU1pc3NpbmdUbzogJ2ZhbGxiYWNrJyxcbiAgc2F2ZU1pc3NpbmdQbHVyYWxzOiB0cnVlLFxuICBtaXNzaW5nS2V5SGFuZGxlcjogZmFsc2UsXG4gIG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcjogZmFsc2UsXG4gIHBvc3RQcm9jZXNzOiBmYWxzZSxcbiAgcG9zdFByb2Nlc3NQYXNzUmVzb2x2ZWQ6IGZhbHNlLFxuICByZXR1cm5OdWxsOiBmYWxzZSxcbiAgcmV0dXJuRW1wdHlTdHJpbmc6IHRydWUsXG4gIHJldHVybk9iamVjdHM6IGZhbHNlLFxuICBqb2luQXJyYXlzOiBmYWxzZSxcbiAgcmV0dXJuZWRPYmplY3RIYW5kbGVyOiBmYWxzZSxcbiAgcGFyc2VNaXNzaW5nS2V5SGFuZGxlcjogZmFsc2UsXG4gIGFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleTogZmFsc2UsXG4gIGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlOiBmYWxzZSxcbiAgb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXI6IGFyZ3MgPT4ge1xuICAgIGxldCByZXQgPSB7fTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdvYmplY3QnKSByZXQgPSBhcmdzWzFdO1xuICAgIGlmIChpc1N0cmluZyhhcmdzWzFdKSkgcmV0LmRlZmF1bHRWYWx1ZSA9IGFyZ3NbMV07XG4gICAgaWYgKGlzU3RyaW5nKGFyZ3NbMl0pKSByZXQudERlc2NyaXB0aW9uID0gYXJnc1syXTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMl0gPT09ICdvYmplY3QnIHx8IHR5cGVvZiBhcmdzWzNdID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IGFyZ3NbM10gfHwgYXJnc1syXTtcbiAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgcmV0W2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbiAgaW50ZXJwb2xhdGlvbjoge1xuICAgIGVzY2FwZVZhbHVlOiB0cnVlLFxuICAgIGZvcm1hdDogdmFsdWUgPT4gdmFsdWUsXG4gICAgcHJlZml4OiAne3snLFxuICAgIHN1ZmZpeDogJ319JyxcbiAgICBmb3JtYXRTZXBhcmF0b3I6ICcsJyxcbiAgICB1bmVzY2FwZVByZWZpeDogJy0nLFxuICAgIG5lc3RpbmdQcmVmaXg6ICckdCgnLFxuICAgIG5lc3RpbmdTdWZmaXg6ICcpJyxcbiAgICBuZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjogJywnLFxuICAgIG1heFJlcGxhY2VzOiAxMDAwLFxuICAgIHNraXBPblZhcmlhYmxlczogdHJ1ZVxuICB9XG59KTtcbmNvbnN0IHRyYW5zZm9ybU9wdGlvbnMgPSBvcHRpb25zID0+IHtcbiAgaWYgKGlzU3RyaW5nKG9wdGlvbnMubnMpKSBvcHRpb25zLm5zID0gW29wdGlvbnMubnNdO1xuICBpZiAoaXNTdHJpbmcob3B0aW9ucy5mYWxsYmFja0xuZykpIG9wdGlvbnMuZmFsbGJhY2tMbmcgPSBbb3B0aW9ucy5mYWxsYmFja0xuZ107XG4gIGlmIChpc1N0cmluZyhvcHRpb25zLmZhbGxiYWNrTlMpKSBvcHRpb25zLmZhbGxiYWNrTlMgPSBbb3B0aW9ucy5mYWxsYmFja05TXTtcbiAgaWYgKG9wdGlvbnMuc3VwcG9ydGVkTG5ncyAmJiBvcHRpb25zLnN1cHBvcnRlZExuZ3MuaW5kZXhPZignY2ltb2RlJykgPCAwKSB7XG4gICAgb3B0aW9ucy5zdXBwb3J0ZWRMbmdzID0gb3B0aW9ucy5zdXBwb3J0ZWRMbmdzLmNvbmNhdChbJ2NpbW9kZSddKTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn07XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcbmNvbnN0IGJpbmRNZW1iZXJGdW5jdGlvbnMgPSBpbnN0ID0+IHtcbiAgY29uc3QgbWVtcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0KSk7XG4gIG1lbXMuZm9yRWFjaChtZW0gPT4ge1xuICAgIGlmICh0eXBlb2YgaW5zdFttZW1dID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpbnN0W21lbV0gPSBpbnN0W21lbV0uYmluZChpbnN0KTtcbiAgICB9XG4gIH0pO1xufTtcbmNsYXNzIEkxOG4gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm9wdGlvbnMgPSB0cmFuc2Zvcm1PcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuc2VydmljZXMgPSB7fTtcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXI7XG4gICAgdGhpcy5tb2R1bGVzID0ge1xuICAgICAgZXh0ZXJuYWw6IFtdXG4gICAgfTtcbiAgICBiaW5kTWVtYmVyRnVuY3Rpb25zKHRoaXMpO1xuICAgIGlmIChjYWxsYmFjayAmJiAhdGhpcy5pc0luaXRpYWxpemVkICYmICFvcHRpb25zLmlzQ2xvbmUpIHtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmluaXRJbW1lZGlhdGUpIHtcbiAgICAgICAgdGhpcy5pbml0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5pbml0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfVxuICBpbml0KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSB0cnVlO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuZGVmYXVsdE5TICYmIG9wdGlvbnMuZGVmYXVsdE5TICE9PSBmYWxzZSAmJiBvcHRpb25zLm5zKSB7XG4gICAgICBpZiAoaXNTdHJpbmcob3B0aW9ucy5ucykpIHtcbiAgICAgICAgb3B0aW9ucy5kZWZhdWx0TlMgPSBvcHRpb25zLm5zO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLm5zLmluZGV4T2YoJ3RyYW5zbGF0aW9uJykgPCAwKSB7XG4gICAgICAgIG9wdGlvbnMuZGVmYXVsdE5TID0gb3B0aW9ucy5uc1swXTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVmT3B0cyA9IGdldCgpO1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIC4uLmRlZk9wdHMsXG4gICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAuLi50cmFuc2Zvcm1PcHRpb25zKG9wdGlvbnMpXG4gICAgfTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uID0ge1xuICAgICAgICAuLi5kZWZPcHRzLmludGVycG9sYXRpb24sXG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLm5zU2VwYXJhdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy51c2VyRGVmaW5lZE5zU2VwYXJhdG9yID0gb3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICB9XG4gICAgY29uc3QgY3JlYXRlQ2xhc3NPbkRlbWFuZCA9IENsYXNzT3JPYmplY3QgPT4ge1xuICAgICAgaWYgKCFDbGFzc09yT2JqZWN0KSByZXR1cm4gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgQ2xhc3NPck9iamVjdCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIG5ldyBDbGFzc09yT2JqZWN0KCk7XG4gICAgICByZXR1cm4gQ2xhc3NPck9iamVjdDtcbiAgICB9O1xuICAgIGlmICghdGhpcy5vcHRpb25zLmlzQ2xvbmUpIHtcbiAgICAgIGlmICh0aGlzLm1vZHVsZXMubG9nZ2VyKSB7XG4gICAgICAgIGJhc2VMb2dnZXIuaW5pdChjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5sb2dnZXIpLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmFzZUxvZ2dlci5pbml0KG51bGwsIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBsZXQgZm9ybWF0dGVyO1xuICAgICAgaWYgKHRoaXMubW9kdWxlcy5mb3JtYXR0ZXIpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gdGhpcy5tb2R1bGVzLmZvcm1hdHRlcjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEludGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZvcm1hdHRlciA9IEZvcm1hdHRlcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGx1ID0gbmV3IExhbmd1YWdlVXRpbCh0aGlzLm9wdGlvbnMpO1xuICAgICAgdGhpcy5zdG9yZSA9IG5ldyBSZXNvdXJjZVN0b3JlKHRoaXMub3B0aW9ucy5yZXNvdXJjZXMsIHRoaXMub3B0aW9ucyk7XG4gICAgICBjb25zdCBzID0gdGhpcy5zZXJ2aWNlcztcbiAgICAgIHMubG9nZ2VyID0gYmFzZUxvZ2dlcjtcbiAgICAgIHMucmVzb3VyY2VTdG9yZSA9IHRoaXMuc3RvcmU7XG4gICAgICBzLmxhbmd1YWdlVXRpbHMgPSBsdTtcbiAgICAgIHMucGx1cmFsUmVzb2x2ZXIgPSBuZXcgUGx1cmFsUmVzb2x2ZXIobHUsIHtcbiAgICAgICAgcHJlcGVuZDogdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcixcbiAgICAgICAgY29tcGF0aWJpbGl0eUpTT046IHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTixcbiAgICAgICAgc2ltcGxpZnlQbHVyYWxTdWZmaXg6IHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeFxuICAgICAgfSk7XG4gICAgICBpZiAoZm9ybWF0dGVyICYmICghdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0IHx8IHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdCA9PT0gZGVmT3B0cy5pbnRlcnBvbGF0aW9uLmZvcm1hdCkpIHtcbiAgICAgICAgcy5mb3JtYXR0ZXIgPSBjcmVhdGVDbGFzc09uRGVtYW5kKGZvcm1hdHRlcik7XG4gICAgICAgIHMuZm9ybWF0dGVyLmluaXQocywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0ID0gcy5mb3JtYXR0ZXIuZm9ybWF0LmJpbmQocy5mb3JtYXR0ZXIpO1xuICAgICAgfVxuICAgICAgcy5pbnRlcnBvbGF0b3IgPSBuZXcgSW50ZXJwb2xhdG9yKHRoaXMub3B0aW9ucyk7XG4gICAgICBzLnV0aWxzID0ge1xuICAgICAgICBoYXNMb2FkZWROYW1lc3BhY2U6IHRoaXMuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQodGhpcylcbiAgICAgIH07XG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3IgPSBuZXcgQ29ubmVjdG9yKGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmJhY2tlbmQpLCBzLnJlc291cmNlU3RvcmUsIHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IpIHtcbiAgICAgICAgcy5sYW5ndWFnZURldGVjdG9yID0gY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3Rvcik7XG4gICAgICAgIGlmIChzLmxhbmd1YWdlRGV0ZWN0b3IuaW5pdCkgcy5sYW5ndWFnZURldGVjdG9yLmluaXQocywgdGhpcy5vcHRpb25zLmRldGVjdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdCkge1xuICAgICAgICBzLmkxOG5Gb3JtYXQgPSBjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5pMThuRm9ybWF0KTtcbiAgICAgICAgaWYgKHMuaTE4bkZvcm1hdC5pbml0KSBzLmkxOG5Gb3JtYXQuaW5pdCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNsYXRvciA9IG5ldyBUcmFuc2xhdG9yKHRoaXMuc2VydmljZXMsIHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1vZHVsZXMuZXh0ZXJuYWwuZm9yRWFjaChtID0+IHtcbiAgICAgICAgaWYgKG0uaW5pdCkgbS5pbml0KHRoaXMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuZm9ybWF0ID0gdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0O1xuICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gbm9vcDtcbiAgICBpZiAodGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nICYmICF0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IgJiYgIXRoaXMub3B0aW9ucy5sbmcpIHtcbiAgICAgIGNvbnN0IGNvZGVzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgIGlmIChjb2Rlcy5sZW5ndGggPiAwICYmIGNvZGVzWzBdICE9PSAnZGV2JykgdGhpcy5vcHRpb25zLmxuZyA9IGNvZGVzWzBdO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5vcHRpb25zLmxuZykge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignaW5pdDogbm8gbGFuZ3VhZ2VEZXRlY3RvciBpcyB1c2VkIGFuZCBubyBsbmcgaXMgZGVmaW5lZCcpO1xuICAgIH1cbiAgICBjb25zdCBzdG9yZUFwaSA9IFsnZ2V0UmVzb3VyY2UnLCAnaGFzUmVzb3VyY2VCdW5kbGUnLCAnZ2V0UmVzb3VyY2VCdW5kbGUnLCAnZ2V0RGF0YUJ5TGFuZ3VhZ2UnXTtcbiAgICBzdG9yZUFwaS5mb3JFYWNoKGZjTmFtZSA9PiB7XG4gICAgICB0aGlzW2ZjTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zdG9yZVtmY05hbWVdKC4uLmFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IHN0b3JlQXBpQ2hhaW5lZCA9IFsnYWRkUmVzb3VyY2UnLCAnYWRkUmVzb3VyY2VzJywgJ2FkZFJlc291cmNlQnVuZGxlJywgJ3JlbW92ZVJlc291cmNlQnVuZGxlJ107XG4gICAgc3RvcmVBcGlDaGFpbmVkLmZvckVhY2goZmNOYW1lID0+IHtcbiAgICAgIHRoaXNbZmNOYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuc3RvcmVbZmNOYW1lXSguLi5hcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBjb25zdCBsb2FkID0gKCkgPT4ge1xuICAgICAgY29uc3QgZmluaXNoID0gKGVyciwgdCkgPT4ge1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQgJiYgIXRoaXMuaW5pdGlhbGl6ZWRTdG9yZU9uY2UpIHRoaXMubG9nZ2VyLndhcm4oJ2luaXQ6IGkxOG5leHQgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4gWW91IHNob3VsZCBjYWxsIGluaXQganVzdCBvbmNlIScpO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pc0Nsb25lKSB0aGlzLmxvZ2dlci5sb2coJ2luaXRpYWxpemVkJywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5lbWl0KCdpbml0aWFsaXplZCcsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUodCk7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgdCk7XG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMubGFuZ3VhZ2VzICYmIHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJICE9PSAndjEnICYmICF0aGlzLmlzSW5pdGlhbGl6ZWQpIHJldHVybiBmaW5pc2gobnVsbCwgdGhpcy50LmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5jaGFuZ2VMYW5ndWFnZSh0aGlzLm9wdGlvbnMubG5nLCBmaW5pc2gpO1xuICAgIH07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5yZXNvdXJjZXMgfHwgIXRoaXMub3B0aW9ucy5pbml0SW1tZWRpYXRlKSB7XG4gICAgICBsb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFRpbWVvdXQobG9hZCwgMCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBsb2FkUmVzb3VyY2VzKGxhbmd1YWdlKSB7XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBub29wO1xuICAgIGxldCB1c2VkQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICBjb25zdCB1c2VkTG5nID0gaXNTdHJpbmcobGFuZ3VhZ2UpID8gbGFuZ3VhZ2UgOiB0aGlzLmxhbmd1YWdlO1xuICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2UgPT09ICdmdW5jdGlvbicpIHVzZWRDYWxsYmFjayA9IGxhbmd1YWdlO1xuICAgIGlmICghdGhpcy5vcHRpb25zLnJlc291cmNlcyB8fCB0aGlzLm9wdGlvbnMucGFydGlhbEJ1bmRsZWRMYW5ndWFnZXMpIHtcbiAgICAgIGlmICh1c2VkTG5nICYmIHVzZWRMbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScgJiYgKCF0aGlzLm9wdGlvbnMucHJlbG9hZCB8fCB0aGlzLm9wdGlvbnMucHJlbG9hZC5sZW5ndGggPT09IDApKSByZXR1cm4gdXNlZENhbGxiYWNrKCk7XG4gICAgICBjb25zdCB0b0xvYWQgPSBbXTtcbiAgICAgIGNvbnN0IGFwcGVuZCA9IGxuZyA9PiB7XG4gICAgICAgIGlmICghbG5nKSByZXR1cm47XG4gICAgICAgIGlmIChsbmcgPT09ICdjaW1vZGUnKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGxuZ3MgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGxuZyk7XG4gICAgICAgIGxuZ3MuZm9yRWFjaChsID0+IHtcbiAgICAgICAgICBpZiAobCA9PT0gJ2NpbW9kZScpIHJldHVybjtcbiAgICAgICAgICBpZiAodG9Mb2FkLmluZGV4T2YobCkgPCAwKSB0b0xvYWQucHVzaChsKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgaWYgKCF1c2VkTG5nKSB7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrcyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyk7XG4gICAgICAgIGZhbGxiYWNrcy5mb3JFYWNoKGwgPT4gYXBwZW5kKGwpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcGVuZCh1c2VkTG5nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJlbG9hZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMucHJlbG9hZC5mb3JFYWNoKGwgPT4gYXBwZW5kKGwpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5sb2FkKHRvTG9hZCwgdGhpcy5vcHRpb25zLm5zLCBlID0+IHtcbiAgICAgICAgaWYgKCFlICYmICF0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgJiYgdGhpcy5sYW5ndWFnZSkgdGhpcy5zZXRSZXNvbHZlZExhbmd1YWdlKHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICB1c2VkQ2FsbGJhY2soZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlZENhbGxiYWNrKG51bGwpO1xuICAgIH1cbiAgfVxuICByZWxvYWRSZXNvdXJjZXMobG5ncywgbnMsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIGlmICh0eXBlb2YgbG5ncyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBsbmdzO1xuICAgICAgbG5ncyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBucztcbiAgICAgIG5zID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWxuZ3MpIGxuZ3MgPSB0aGlzLmxhbmd1YWdlcztcbiAgICBpZiAoIW5zKSBucyA9IHRoaXMub3B0aW9ucy5ucztcbiAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IG5vb3A7XG4gICAgdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLnJlbG9hZChsbmdzLCBucywgZXJyID0+IHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9XG4gIHVzZShtb2R1bGUpIHtcbiAgICBpZiAoIW1vZHVsZSkgdGhyb3cgbmV3IEVycm9yKCdZb3UgYXJlIHBhc3NpbmcgYW4gdW5kZWZpbmVkIG1vZHVsZSEgUGxlYXNlIGNoZWNrIHRoZSBvYmplY3QgeW91IGFyZSBwYXNzaW5nIHRvIGkxOG5leHQudXNlKCknKTtcbiAgICBpZiAoIW1vZHVsZS50eXBlKSB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgcGFzc2luZyBhIHdyb25nIG1vZHVsZSEgUGxlYXNlIGNoZWNrIHRoZSBvYmplY3QgeW91IGFyZSBwYXNzaW5nIHRvIGkxOG5leHQudXNlKCknKTtcbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdiYWNrZW5kJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmJhY2tlbmQgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2xvZ2dlcicgfHwgbW9kdWxlLmxvZyAmJiBtb2R1bGUud2FybiAmJiBtb2R1bGUuZXJyb3IpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5sb2dnZXIgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2xhbmd1YWdlRGV0ZWN0b3InKSB7XG4gICAgICB0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3RvciA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnaTE4bkZvcm1hdCcpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5pMThuRm9ybWF0ID0gbW9kdWxlO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdwb3N0UHJvY2Vzc29yJykge1xuICAgICAgcG9zdFByb2Nlc3Nvci5hZGRQb3N0UHJvY2Vzc29yKG1vZHVsZSk7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2Zvcm1hdHRlcicpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5mb3JtYXR0ZXIgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJzNyZFBhcnR5Jykge1xuICAgICAgdGhpcy5tb2R1bGVzLmV4dGVybmFsLnB1c2gobW9kdWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2V0UmVzb2x2ZWRMYW5ndWFnZShsKSB7XG4gICAgaWYgKCFsIHx8ICF0aGlzLmxhbmd1YWdlcykgcmV0dXJuO1xuICAgIGlmIChbJ2NpbW9kZScsICdkZXYnXS5pbmRleE9mKGwpID4gLTEpIHJldHVybjtcbiAgICBmb3IgKGxldCBsaSA9IDA7IGxpIDwgdGhpcy5sYW5ndWFnZXMubGVuZ3RoOyBsaSsrKSB7XG4gICAgICBjb25zdCBsbmdJbkxuZ3MgPSB0aGlzLmxhbmd1YWdlc1tsaV07XG4gICAgICBpZiAoWydjaW1vZGUnLCAnZGV2J10uaW5kZXhPZihsbmdJbkxuZ3MpID4gLTEpIGNvbnRpbnVlO1xuICAgICAgaWYgKHRoaXMuc3RvcmUuaGFzTGFuZ3VhZ2VTb21lVHJhbnNsYXRpb25zKGxuZ0luTG5ncykpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlZExhbmd1YWdlID0gbG5nSW5MbmdzO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY2hhbmdlTGFuZ3VhZ2UobG5nLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgIHRoaXMuaXNMYW5ndWFnZUNoYW5naW5nVG8gPSBsbmc7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIHRoaXMuZW1pdCgnbGFuZ3VhZ2VDaGFuZ2luZycsIGxuZyk7XG4gICAgY29uc3Qgc2V0TG5nUHJvcHMgPSBsID0+IHtcbiAgICAgIHRoaXMubGFuZ3VhZ2UgPSBsO1xuICAgICAgdGhpcy5sYW5ndWFnZXMgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGwpO1xuICAgICAgdGhpcy5yZXNvbHZlZExhbmd1YWdlID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5zZXRSZXNvbHZlZExhbmd1YWdlKGwpO1xuICAgIH07XG4gICAgY29uc3QgZG9uZSA9IChlcnIsIGwpID0+IHtcbiAgICAgIGlmIChsKSB7XG4gICAgICAgIHNldExuZ1Byb3BzKGwpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0b3IuY2hhbmdlTGFuZ3VhZ2UobCk7XG4gICAgICAgIHRoaXMuaXNMYW5ndWFnZUNoYW5naW5nVG8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZW1pdCgnbGFuZ3VhZ2VDaGFuZ2VkJywgbCk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZygnbGFuZ3VhZ2VDaGFuZ2VkJywgbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgZGVmZXJyZWQucmVzb2x2ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIudCguLi5hcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVyciwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLnQoLi4uYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2V0TG5nID0gbG5ncyA9PiB7XG4gICAgICBpZiAoIWxuZyAmJiAhbG5ncyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IpIGxuZ3MgPSBbXTtcbiAgICAgIGNvbnN0IGwgPSBpc1N0cmluZyhsbmdzKSA/IGxuZ3MgOiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0QmVzdE1hdGNoRnJvbUNvZGVzKGxuZ3MpO1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxhbmd1YWdlKSB7XG4gICAgICAgICAgc2V0TG5nUHJvcHMobCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zbGF0b3IubGFuZ3VhZ2UpIHRoaXMudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShsKTtcbiAgICAgICAgaWYgKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuY2FjaGVVc2VyTGFuZ3VhZ2UpIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5jYWNoZVVzZXJMYW5ndWFnZShsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubG9hZFJlc291cmNlcyhsLCBlcnIgPT4ge1xuICAgICAgICBkb25lKGVyciwgbCk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGlmICghbG5nICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jKSB7XG4gICAgICBzZXRMbmcodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpKTtcbiAgICB9IGVsc2UgaWYgKCFsbmcgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5hc3luYykge1xuICAgICAgaWYgKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoKS50aGVuKHNldExuZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuZGV0ZWN0KHNldExuZyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldExuZyhsbmcpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgZ2V0Rml4ZWRUKGxuZywgbnMsIGtleVByZWZpeCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuICAgIGNvbnN0IGZpeGVkVCA9IGZ1bmN0aW9uIChrZXksIG9wdHMpIHtcbiAgICAgIGxldCBvcHRpb25zO1xuICAgICAgaWYgKHR5cGVvZiBvcHRzICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3QgPSBuZXcgQXJyYXkoX2xlbjMgPiAyID8gX2xlbjMgLSAyIDogMCksIF9rZXkzID0gMjsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgICAgIHJlc3RbX2tleTMgLSAyXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IF90aGlzMy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKFtrZXksIG9wdHNdLmNvbmNhdChyZXN0KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgIC4uLm9wdHNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMubG5nID0gb3B0aW9ucy5sbmcgfHwgZml4ZWRULmxuZztcbiAgICAgIG9wdGlvbnMubG5ncyA9IG9wdGlvbnMubG5ncyB8fCBmaXhlZFQubG5ncztcbiAgICAgIG9wdGlvbnMubnMgPSBvcHRpb25zLm5zIHx8IGZpeGVkVC5ucztcbiAgICAgIGlmIChvcHRpb25zLmtleVByZWZpeCAhPT0gJycpIG9wdGlvbnMua2V5UHJlZml4ID0gb3B0aW9ucy5rZXlQcmVmaXggfHwga2V5UHJlZml4IHx8IGZpeGVkVC5rZXlQcmVmaXg7XG4gICAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBfdGhpczMub3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgJy4nO1xuICAgICAgbGV0IHJlc3VsdEtleTtcbiAgICAgIGlmIChvcHRpb25zLmtleVByZWZpeCAmJiBBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgcmVzdWx0S2V5ID0ga2V5Lm1hcChrID0+IGAke29wdGlvbnMua2V5UHJlZml4fSR7a2V5U2VwYXJhdG9yfSR7a31gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdEtleSA9IG9wdGlvbnMua2V5UHJlZml4ID8gYCR7b3B0aW9ucy5rZXlQcmVmaXh9JHtrZXlTZXBhcmF0b3J9JHtrZXl9YCA6IGtleTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfdGhpczMudChyZXN1bHRLZXksIG9wdGlvbnMpO1xuICAgIH07XG4gICAgaWYgKGlzU3RyaW5nKGxuZykpIHtcbiAgICAgIGZpeGVkVC5sbmcgPSBsbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpeGVkVC5sbmdzID0gbG5nO1xuICAgIH1cbiAgICBmaXhlZFQubnMgPSBucztcbiAgICBmaXhlZFQua2V5UHJlZml4ID0ga2V5UHJlZml4O1xuICAgIHJldHVybiBmaXhlZFQ7XG4gIH1cbiAgdCgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIHRoaXMudHJhbnNsYXRvci50cmFuc2xhdGUoLi4uYXJndW1lbnRzKTtcbiAgfVxuICBleGlzdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRvciAmJiB0aGlzLnRyYW5zbGF0b3IuZXhpc3RzKC4uLmFyZ3VtZW50cyk7XG4gIH1cbiAgc2V0RGVmYXVsdE5hbWVzcGFjZShucykge1xuICAgIHRoaXMub3B0aW9ucy5kZWZhdWx0TlMgPSBucztcbiAgfVxuICBoYXNMb2FkZWROYW1lc3BhY2UobnMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2hhc0xvYWRlZE5hbWVzcGFjZTogaTE4bmV4dCB3YXMgbm90IGluaXRpYWxpemVkJywgdGhpcy5sYW5ndWFnZXMpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubGFuZ3VhZ2VzIHx8ICF0aGlzLmxhbmd1YWdlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2hhc0xvYWRlZE5hbWVzcGFjZTogaTE4bi5sYW5ndWFnZXMgd2VyZSB1bmRlZmluZWQgb3IgZW1wdHknLCB0aGlzLmxhbmd1YWdlcyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGxuZyA9IG9wdGlvbnMubG5nIHx8IHRoaXMucmVzb2x2ZWRMYW5ndWFnZSB8fCB0aGlzLmxhbmd1YWdlc1swXTtcbiAgICBjb25zdCBmYWxsYmFja0xuZyA9IHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyA6IGZhbHNlO1xuICAgIGNvbnN0IGxhc3RMbmcgPSB0aGlzLmxhbmd1YWdlc1t0aGlzLmxhbmd1YWdlcy5sZW5ndGggLSAxXTtcbiAgICBpZiAobG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBsb2FkTm90UGVuZGluZyA9IChsLCBuKSA9PiB7XG4gICAgICBjb25zdCBsb2FkU3RhdGUgPSB0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3Iuc3RhdGVbYCR7bH18JHtufWBdO1xuICAgICAgcmV0dXJuIGxvYWRTdGF0ZSA9PT0gLTEgfHwgbG9hZFN0YXRlID09PSAwIHx8IGxvYWRTdGF0ZSA9PT0gMjtcbiAgICB9O1xuICAgIGlmIChvcHRpb25zLnByZWNoZWNrKSB7XG4gICAgICBjb25zdCBwcmVSZXN1bHQgPSBvcHRpb25zLnByZWNoZWNrKHRoaXMsIGxvYWROb3RQZW5kaW5nKTtcbiAgICAgIGlmIChwcmVSZXN1bHQgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHByZVJlc3VsdDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykpIHJldHVybiB0cnVlO1xuICAgIGlmICghdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgfHwgdGhpcy5vcHRpb25zLnJlc291cmNlcyAmJiAhdGhpcy5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAobG9hZE5vdFBlbmRpbmcobG5nLCBucykgJiYgKCFmYWxsYmFja0xuZyB8fCBsb2FkTm90UGVuZGluZyhsYXN0TG5nLCBucykpKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgbG9hZE5hbWVzcGFjZXMobnMsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIGlmICghdGhpcy5vcHRpb25zLm5zKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGlmIChpc1N0cmluZyhucykpIG5zID0gW25zXTtcbiAgICBucy5mb3JFYWNoKG4gPT4ge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKG4pIDwgMCkgdGhpcy5vcHRpb25zLm5zLnB1c2gobik7XG4gICAgfSk7XG4gICAgdGhpcy5sb2FkUmVzb3VyY2VzKGVyciA9PiB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVycik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9XG4gIGxvYWRMYW5ndWFnZXMobG5ncywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgaWYgKGlzU3RyaW5nKGxuZ3MpKSBsbmdzID0gW2xuZ3NdO1xuICAgIGNvbnN0IHByZWxvYWRlZCA9IHRoaXMub3B0aW9ucy5wcmVsb2FkIHx8IFtdO1xuICAgIGNvbnN0IG5ld0xuZ3MgPSBsbmdzLmZpbHRlcihsbmcgPT4gcHJlbG9hZGVkLmluZGV4T2YobG5nKSA8IDAgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkQ29kZShsbmcpKTtcbiAgICBpZiAoIW5ld0xuZ3MubGVuZ3RoKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkID0gcHJlbG9hZGVkLmNvbmNhdChuZXdMbmdzKTtcbiAgICB0aGlzLmxvYWRSZXNvdXJjZXMoZXJyID0+IHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgZGlyKGxuZykge1xuICAgIGlmICghbG5nKSBsbmcgPSB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgfHwgKHRoaXMubGFuZ3VhZ2VzICYmIHRoaXMubGFuZ3VhZ2VzLmxlbmd0aCA+IDAgPyB0aGlzLmxhbmd1YWdlc1swXSA6IHRoaXMubGFuZ3VhZ2UpO1xuICAgIGlmICghbG5nKSByZXR1cm4gJ3J0bCc7XG4gICAgY29uc3QgcnRsTG5ncyA9IFsnYXInLCAnc2h1JywgJ3NxcicsICdzc2gnLCAneGFhJywgJ3loZCcsICd5dWQnLCAnYWFvJywgJ2FiaCcsICdhYnYnLCAnYWNtJywgJ2FjcScsICdhY3cnLCAnYWN4JywgJ2FjeScsICdhZGYnLCAnYWRzJywgJ2FlYicsICdhZWMnLCAnYWZiJywgJ2FqcCcsICdhcGMnLCAnYXBkJywgJ2FyYicsICdhcnEnLCAnYXJzJywgJ2FyeScsICdhcnonLCAnYXV6JywgJ2F2bCcsICdheWgnLCAnYXlsJywgJ2F5bicsICdheXAnLCAnYmJ6JywgJ3BnYScsICdoZScsICdpdycsICdwcycsICdwYnQnLCAncGJ1JywgJ3BzdCcsICdwcnAnLCAncHJkJywgJ3VnJywgJ3VyJywgJ3lkZCcsICd5ZHMnLCAneWloJywgJ2ppJywgJ3lpJywgJ2hibycsICdtZW4nLCAneG1uJywgJ2ZhJywgJ2pwcicsICdwZW8nLCAncGVzJywgJ3BycycsICdkdicsICdzYW0nLCAnY2tiJ107XG4gICAgY29uc3QgbGFuZ3VhZ2VVdGlscyA9IHRoaXMuc2VydmljZXMgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzIHx8IG5ldyBMYW5ndWFnZVV0aWwoZ2V0KCkpO1xuICAgIHJldHVybiBydGxMbmdzLmluZGV4T2YobGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShsbmcpKSA+IC0xIHx8IGxuZy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJy1hcmFiJykgPiAxID8gJ3J0bCcgOiAnbHRyJztcbiAgfVxuICBzdGF0aWMgY3JlYXRlSW5zdGFuY2UoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBuZXcgSTE4bihvcHRpb25zLCBjYWxsYmFjayk7XG4gIH1cbiAgY2xvbmVJbnN0YW5jZSgpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBub29wO1xuICAgIGNvbnN0IGZvcmtSZXNvdXJjZVN0b3JlID0gb3B0aW9ucy5mb3JrUmVzb3VyY2VTdG9yZTtcbiAgICBpZiAoZm9ya1Jlc291cmNlU3RvcmUpIGRlbGV0ZSBvcHRpb25zLmZvcmtSZXNvdXJjZVN0b3JlO1xuICAgIGNvbnN0IG1lcmdlZE9wdGlvbnMgPSB7XG4gICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgLi4ue1xuICAgICAgICBpc0Nsb25lOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjbG9uZSA9IG5ldyBJMThuKG1lcmdlZE9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zLmRlYnVnICE9PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5wcmVmaXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xvbmUubG9nZ2VyID0gY2xvbmUubG9nZ2VyLmNsb25lKG9wdGlvbnMpO1xuICAgIH1cbiAgICBjb25zdCBtZW1iZXJzVG9Db3B5ID0gWydzdG9yZScsICdzZXJ2aWNlcycsICdsYW5ndWFnZSddO1xuICAgIG1lbWJlcnNUb0NvcHkuZm9yRWFjaChtID0+IHtcbiAgICAgIGNsb25lW21dID0gdGhpc1ttXTtcbiAgICB9KTtcbiAgICBjbG9uZS5zZXJ2aWNlcyA9IHtcbiAgICAgIC4uLnRoaXMuc2VydmljZXNcbiAgICB9O1xuICAgIGNsb25lLnNlcnZpY2VzLnV0aWxzID0ge1xuICAgICAgaGFzTG9hZGVkTmFtZXNwYWNlOiBjbG9uZS5oYXNMb2FkZWROYW1lc3BhY2UuYmluZChjbG9uZSlcbiAgICB9O1xuICAgIGlmIChmb3JrUmVzb3VyY2VTdG9yZSkge1xuICAgICAgY2xvbmUuc3RvcmUgPSBuZXcgUmVzb3VyY2VTdG9yZSh0aGlzLnN0b3JlLmRhdGEsIG1lcmdlZE9wdGlvbnMpO1xuICAgICAgY2xvbmUuc2VydmljZXMucmVzb3VyY2VTdG9yZSA9IGNsb25lLnN0b3JlO1xuICAgIH1cbiAgICBjbG9uZS50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IoY2xvbmUuc2VydmljZXMsIG1lcmdlZE9wdGlvbnMpO1xuICAgIGNsb25lLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNCA+IDEgPyBfbGVuNCAtIDEgOiAwKSwgX2tleTQgPSAxOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgICAgIGFyZ3NbX2tleTQgLSAxXSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgICB9XG4gICAgICBjbG9uZS5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9KTtcbiAgICBjbG9uZS5pbml0KG1lcmdlZE9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICBjbG9uZS50cmFuc2xhdG9yLm9wdGlvbnMgPSBtZXJnZWRPcHRpb25zO1xuICAgIGNsb25lLnRyYW5zbGF0b3IuYmFja2VuZENvbm5lY3Rvci5zZXJ2aWNlcy51dGlscyA9IHtcbiAgICAgIGhhc0xvYWRlZE5hbWVzcGFjZTogY2xvbmUuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQoY2xvbmUpXG4gICAgfTtcbiAgICByZXR1cm4gY2xvbmU7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBzdG9yZTogdGhpcy5zdG9yZSxcbiAgICAgIGxhbmd1YWdlOiB0aGlzLmxhbmd1YWdlLFxuICAgICAgbGFuZ3VhZ2VzOiB0aGlzLmxhbmd1YWdlcyxcbiAgICAgIHJlc29sdmVkTGFuZ3VhZ2U6IHRoaXMucmVzb2x2ZWRMYW5ndWFnZVxuICAgIH07XG4gIH1cbn1cbmNvbnN0IGluc3RhbmNlID0gSTE4bi5jcmVhdGVJbnN0YW5jZSgpO1xuaW5zdGFuY2UuY3JlYXRlSW5zdGFuY2UgPSBJMThuLmNyZWF0ZUluc3RhbmNlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3RhbmNlO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEkxOG5Db250ZXh0IH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBJMThuZXh0UHJvdmlkZXIoX3JlZikge1xuICBsZXQge1xuICAgIGkxOG4sXG4gICAgZGVmYXVsdE5TLFxuICAgIGNoaWxkcmVuXG4gIH0gPSBfcmVmO1xuICBjb25zdCB2YWx1ZSA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICBpMThuLFxuICAgIGRlZmF1bHROU1xuICB9KSwgW2kxOG4sIGRlZmF1bHROU10pO1xuICByZXR1cm4gY3JlYXRlRWxlbWVudChJMThuQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlXG4gIH0sIGNoaWxkcmVuKTtcbn0iLCJpbXBvcnQgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbm9kZXNUb1N0cmluZywgVHJhbnMgYXMgVHJhbnNXaXRob3V0Q29udGV4dCB9IGZyb20gJy4vVHJhbnNXaXRob3V0Q29udGV4dC5qcyc7XG5pbXBvcnQgeyBnZXRJMThuLCBJMThuQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5leHBvcnQgeyBub2Rlc1RvU3RyaW5nIH07XG5leHBvcnQgZnVuY3Rpb24gVHJhbnMoX3JlZikge1xuICBsZXQge1xuICAgIGNoaWxkcmVuLFxuICAgIGNvdW50LFxuICAgIHBhcmVudCxcbiAgICBpMThuS2V5LFxuICAgIGNvbnRleHQsXG4gICAgdE9wdGlvbnMgPSB7fSxcbiAgICB2YWx1ZXMsXG4gICAgZGVmYXVsdHMsXG4gICAgY29tcG9uZW50cyxcbiAgICBucyxcbiAgICBpMThuOiBpMThuRnJvbVByb3BzLFxuICAgIHQ6IHRGcm9tUHJvcHMsXG4gICAgc2hvdWxkVW5lc2NhcGUsXG4gICAgLi4uYWRkaXRpb25hbFByb3BzXG4gIH0gPSBfcmVmO1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Db250ZXh0LFxuICAgIGRlZmF1bHROUzogZGVmYXVsdE5TRnJvbUNvbnRleHRcbiAgfSA9IHVzZUNvbnRleHQoSTE4bkNvbnRleHQpIHx8IHt9O1xuICBjb25zdCBpMThuID0gaTE4bkZyb21Qcm9wcyB8fCBpMThuRnJvbUNvbnRleHQgfHwgZ2V0STE4bigpO1xuICBjb25zdCB0ID0gdEZyb21Qcm9wcyB8fCBpMThuICYmIGkxOG4udC5iaW5kKGkxOG4pO1xuICByZXR1cm4gVHJhbnNXaXRob3V0Q29udGV4dCh7XG4gICAgY2hpbGRyZW4sXG4gICAgY291bnQsXG4gICAgcGFyZW50LFxuICAgIGkxOG5LZXksXG4gICAgY29udGV4dCxcbiAgICB0T3B0aW9ucyxcbiAgICB2YWx1ZXMsXG4gICAgZGVmYXVsdHMsXG4gICAgY29tcG9uZW50cyxcbiAgICBuczogbnMgfHwgdCAmJiB0Lm5zIHx8IGRlZmF1bHROU0Zyb21Db250ZXh0IHx8IGkxOG4gJiYgaTE4bi5vcHRpb25zICYmIGkxOG4ub3B0aW9ucy5kZWZhdWx0TlMsXG4gICAgaTE4bixcbiAgICB0OiB0RnJvbVByb3BzLFxuICAgIHNob3VsZFVuZXNjYXBlLFxuICAgIC4uLmFkZGl0aW9uYWxQcm9wc1xuICB9KTtcbn0iLCJpbXBvcnQgeyBGcmFnbWVudCwgaXNWYWxpZEVsZW1lbnQsIGNsb25lRWxlbWVudCwgY3JlYXRlRWxlbWVudCwgQ2hpbGRyZW4gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSFRNTCBmcm9tICdodG1sLXBhcnNlLXN0cmluZ2lmeSc7XG5pbXBvcnQgeyBpc09iamVjdCwgaXNTdHJpbmcsIHdhcm4sIHdhcm5PbmNlIH0gZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyBnZXREZWZhdWx0cyB9IGZyb20gJy4vZGVmYXVsdHMuanMnO1xuaW1wb3J0IHsgZ2V0STE4biB9IGZyb20gJy4vaTE4bkluc3RhbmNlLmpzJztcbmNvbnN0IGhhc0NoaWxkcmVuID0gKG5vZGUsIGNoZWNrTGVuZ3RoKSA9PiB7XG4gIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBiYXNlID0gbm9kZS5wcm9wcyA/IG5vZGUucHJvcHMuY2hpbGRyZW4gOiBub2RlLmNoaWxkcmVuO1xuICBpZiAoY2hlY2tMZW5ndGgpIHJldHVybiBiYXNlLmxlbmd0aCA+IDA7XG4gIHJldHVybiAhIWJhc2U7XG59O1xuY29uc3QgZ2V0Q2hpbGRyZW4gPSBub2RlID0+IHtcbiAgaWYgKCFub2RlKSByZXR1cm4gW107XG4gIGNvbnN0IGNoaWxkcmVuID0gbm9kZS5wcm9wcyA/IG5vZGUucHJvcHMuY2hpbGRyZW4gOiBub2RlLmNoaWxkcmVuO1xuICByZXR1cm4gbm9kZS5wcm9wcyAmJiBub2RlLnByb3BzLmkxOG5Jc0R5bmFtaWNMaXN0ID8gZ2V0QXNBcnJheShjaGlsZHJlbikgOiBjaGlsZHJlbjtcbn07XG5jb25zdCBoYXNWYWxpZFJlYWN0Q2hpbGRyZW4gPSBjaGlsZHJlbiA9PiBBcnJheS5pc0FycmF5KGNoaWxkcmVuKSAmJiBjaGlsZHJlbi5ldmVyeShpc1ZhbGlkRWxlbWVudCk7XG5jb25zdCBnZXRBc0FycmF5ID0gZGF0YSA9PiBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbmNvbnN0IG1lcmdlUHJvcHMgPSAoc291cmNlLCB0YXJnZXQpID0+IHtcbiAgY29uc3QgbmV3VGFyZ2V0ID0ge1xuICAgIC4uLnRhcmdldFxuICB9O1xuICBuZXdUYXJnZXQucHJvcHMgPSBPYmplY3QuYXNzaWduKHNvdXJjZS5wcm9wcywgdGFyZ2V0LnByb3BzKTtcbiAgcmV0dXJuIG5ld1RhcmdldDtcbn07XG5leHBvcnQgY29uc3Qgbm9kZXNUb1N0cmluZyA9IChjaGlsZHJlbiwgaTE4bk9wdGlvbnMpID0+IHtcbiAgaWYgKCFjaGlsZHJlbikgcmV0dXJuICcnO1xuICBsZXQgc3RyaW5nTm9kZSA9ICcnO1xuICBjb25zdCBjaGlsZHJlbkFycmF5ID0gZ2V0QXNBcnJheShjaGlsZHJlbik7XG4gIGNvbnN0IGtlZXBBcnJheSA9IGkxOG5PcHRpb25zLnRyYW5zU3VwcG9ydEJhc2ljSHRtbE5vZGVzICYmIGkxOG5PcHRpb25zLnRyYW5zS2VlcEJhc2ljSHRtbE5vZGVzRm9yID8gaTE4bk9wdGlvbnMudHJhbnNLZWVwQmFzaWNIdG1sTm9kZXNGb3IgOiBbXTtcbiAgY2hpbGRyZW5BcnJheS5mb3JFYWNoKChjaGlsZCwgY2hpbGRJbmRleCkgPT4ge1xuICAgIGlmIChpc1N0cmluZyhjaGlsZCkpIHtcbiAgICAgIHN0cmluZ05vZGUgKz0gYCR7Y2hpbGR9YDtcbiAgICB9IGVsc2UgaWYgKGlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBwcm9wcyxcbiAgICAgICAgdHlwZVxuICAgICAgfSA9IGNoaWxkO1xuICAgICAgY29uc3QgY2hpbGRQcm9wc0NvdW50ID0gT2JqZWN0LmtleXMocHJvcHMpLmxlbmd0aDtcbiAgICAgIGNvbnN0IHNob3VsZEtlZXBDaGlsZCA9IGtlZXBBcnJheS5pbmRleE9mKHR5cGUpID4gLTE7XG4gICAgICBjb25zdCBjaGlsZENoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW47XG4gICAgICBpZiAoIWNoaWxkQ2hpbGRyZW4gJiYgc2hvdWxkS2VlcENoaWxkICYmICFjaGlsZFByb3BzQ291bnQpIHtcbiAgICAgICAgc3RyaW5nTm9kZSArPSBgPCR7dHlwZX0vPmA7XG4gICAgICB9IGVsc2UgaWYgKCFjaGlsZENoaWxkcmVuICYmICghc2hvdWxkS2VlcENoaWxkIHx8IGNoaWxkUHJvcHNDb3VudCkgfHwgcHJvcHMuaTE4bklzRHluYW1pY0xpc3QpIHtcbiAgICAgICAgc3RyaW5nTm9kZSArPSBgPCR7Y2hpbGRJbmRleH0+PC8ke2NoaWxkSW5kZXh9PmA7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZEtlZXBDaGlsZCAmJiBjaGlsZFByb3BzQ291bnQgPT09IDEgJiYgaXNTdHJpbmcoY2hpbGRDaGlsZHJlbikpIHtcbiAgICAgICAgc3RyaW5nTm9kZSArPSBgPCR7dHlwZX0+JHtjaGlsZENoaWxkcmVufTwvJHt0eXBlfT5gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IG5vZGVzVG9TdHJpbmcoY2hpbGRDaGlsZHJlbiwgaTE4bk9wdGlvbnMpO1xuICAgICAgICBzdHJpbmdOb2RlICs9IGA8JHtjaGlsZEluZGV4fT4ke2NvbnRlbnR9PC8ke2NoaWxkSW5kZXh9PmA7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGlsZCA9PT0gbnVsbCkge1xuICAgICAgd2FybihgVHJhbnM6IHRoZSBwYXNzZWQgaW4gdmFsdWUgaXMgaW52YWxpZCAtIHNlZW1zIHlvdSBwYXNzZWQgaW4gYSBudWxsIGNoaWxkLmApO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoY2hpbGQpKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGZvcm1hdCxcbiAgICAgICAgLi4uY2xvbmVcbiAgICAgIH0gPSBjaGlsZDtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjbG9uZSk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmb3JtYXQgPyBgJHtrZXlzWzBdfSwgJHtmb3JtYXR9YCA6IGtleXNbMF07XG4gICAgICAgIHN0cmluZ05vZGUgKz0gYHt7JHt2YWx1ZX19fWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKGByZWFjdC1pMThuZXh0OiB0aGUgcGFzc2VkIGluIG9iamVjdCBjb250YWluZWQgbW9yZSB0aGFuIG9uZSB2YXJpYWJsZSAtIHRoZSBvYmplY3Qgc2hvdWxkIGxvb2sgbGlrZSB7eyB2YWx1ZSwgZm9ybWF0IH19IHdoZXJlIGZvcm1hdCBpcyBvcHRpb25hbC5gLCBjaGlsZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdhcm4oYFRyYW5zOiB0aGUgcGFzc2VkIGluIHZhbHVlIGlzIGludmFsaWQgLSBzZWVtcyB5b3UgcGFzc2VkIGluIGEgdmFyaWFibGUgbGlrZSB7bnVtYmVyfSAtIHBsZWFzZSBwYXNzIGluIHZhcmlhYmxlcyBmb3IgaW50ZXJwb2xhdGlvbiBhcyBmdWxsIG9iamVjdHMgbGlrZSB7e251bWJlcn19LmAsIGNoaWxkKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gc3RyaW5nTm9kZTtcbn07XG5jb25zdCByZW5kZXJOb2RlcyA9IChjaGlsZHJlbiwgdGFyZ2V0U3RyaW5nLCBpMThuLCBpMThuT3B0aW9ucywgY29tYmluZWRUT3B0cywgc2hvdWxkVW5lc2NhcGUpID0+IHtcbiAgaWYgKHRhcmdldFN0cmluZyA9PT0gJycpIHJldHVybiBbXTtcbiAgY29uc3Qga2VlcEFycmF5ID0gaTE4bk9wdGlvbnMudHJhbnNLZWVwQmFzaWNIdG1sTm9kZXNGb3IgfHwgW107XG4gIGNvbnN0IGVtcHR5Q2hpbGRyZW5CdXROZWVkc0hhbmRsaW5nID0gdGFyZ2V0U3RyaW5nICYmIG5ldyBSZWdFeHAoa2VlcEFycmF5Lm1hcChrZWVwID0+IGA8JHtrZWVwfWApLmpvaW4oJ3wnKSkudGVzdCh0YXJnZXRTdHJpbmcpO1xuICBpZiAoIWNoaWxkcmVuICYmICFlbXB0eUNoaWxkcmVuQnV0TmVlZHNIYW5kbGluZyAmJiAhc2hvdWxkVW5lc2NhcGUpIHJldHVybiBbdGFyZ2V0U3RyaW5nXTtcbiAgY29uc3QgZGF0YSA9IHt9O1xuICBjb25zdCBnZXREYXRhID0gY2hpbGRzID0+IHtcbiAgICBjb25zdCBjaGlsZHJlbkFycmF5ID0gZ2V0QXNBcnJheShjaGlsZHMpO1xuICAgIGNoaWxkcmVuQXJyYXkuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICBpZiAoaXNTdHJpbmcoY2hpbGQpKSByZXR1cm47XG4gICAgICBpZiAoaGFzQ2hpbGRyZW4oY2hpbGQpKSBnZXREYXRhKGdldENoaWxkcmVuKGNoaWxkKSk7ZWxzZSBpZiAoaXNPYmplY3QoY2hpbGQpICYmICFpc1ZhbGlkRWxlbWVudChjaGlsZCkpIE9iamVjdC5hc3NpZ24oZGF0YSwgY2hpbGQpO1xuICAgIH0pO1xuICB9O1xuICBnZXREYXRhKGNoaWxkcmVuKTtcbiAgY29uc3QgYXN0ID0gSFRNTC5wYXJzZShgPDA+JHt0YXJnZXRTdHJpbmd9PC8wPmApO1xuICBjb25zdCBvcHRzID0ge1xuICAgIC4uLmRhdGEsXG4gICAgLi4uY29tYmluZWRUT3B0c1xuICB9O1xuICBjb25zdCByZW5kZXJJbm5lciA9IChjaGlsZCwgbm9kZSwgcm9vdFJlYWN0Tm9kZSkgPT4ge1xuICAgIGNvbnN0IGNoaWxkcyA9IGdldENoaWxkcmVuKGNoaWxkKTtcbiAgICBjb25zdCBtYXBwZWRDaGlsZHJlbiA9IG1hcEFTVChjaGlsZHMsIG5vZGUuY2hpbGRyZW4sIHJvb3RSZWFjdE5vZGUpO1xuICAgIHJldHVybiBoYXNWYWxpZFJlYWN0Q2hpbGRyZW4oY2hpbGRzKSAmJiBtYXBwZWRDaGlsZHJlbi5sZW5ndGggPT09IDAgfHwgY2hpbGQucHJvcHMgJiYgY2hpbGQucHJvcHMuaTE4bklzRHluYW1pY0xpc3QgPyBjaGlsZHMgOiBtYXBwZWRDaGlsZHJlbjtcbiAgfTtcbiAgY29uc3QgcHVzaFRyYW5zbGF0ZWRKU1ggPSAoY2hpbGQsIGlubmVyLCBtZW0sIGksIGlzVm9pZCkgPT4ge1xuICAgIGlmIChjaGlsZC5kdW1teSkge1xuICAgICAgY2hpbGQuY2hpbGRyZW4gPSBpbm5lcjtcbiAgICAgIG1lbS5wdXNoKGNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICBrZXk6IGlcbiAgICAgIH0sIGlzVm9pZCA/IHVuZGVmaW5lZCA6IGlubmVyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lbS5wdXNoKC4uLkNoaWxkcmVuLm1hcChbY2hpbGRdLCBjID0+IHtcbiAgICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgICAgLi4uYy5wcm9wc1xuICAgICAgICB9O1xuICAgICAgICBkZWxldGUgcHJvcHMuaTE4bklzRHluYW1pY0xpc3Q7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KGMudHlwZSwge1xuICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgIGtleTogaSxcbiAgICAgICAgICByZWY6IGMucmVmXG4gICAgICAgIH0sIGlzVm9pZCA/IG51bGwgOiBpbm5lcik7XG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBtYXBBU1QgPSAocmVhY3ROb2RlLCBhc3ROb2RlLCByb290UmVhY3ROb2RlKSA9PiB7XG4gICAgY29uc3QgcmVhY3ROb2RlcyA9IGdldEFzQXJyYXkocmVhY3ROb2RlKTtcbiAgICBjb25zdCBhc3ROb2RlcyA9IGdldEFzQXJyYXkoYXN0Tm9kZSk7XG4gICAgcmV0dXJuIGFzdE5vZGVzLnJlZHVjZSgobWVtLCBub2RlLCBpKSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2xhdGlvbkNvbnRlbnQgPSBub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW5bMF0gJiYgbm9kZS5jaGlsZHJlblswXS5jb250ZW50ICYmIGkxOG4uc2VydmljZXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKG5vZGUuY2hpbGRyZW5bMF0uY29udGVudCwgb3B0cywgaTE4bi5sYW5ndWFnZSk7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAndGFnJykge1xuICAgICAgICBsZXQgdG1wID0gcmVhY3ROb2Rlc1twYXJzZUludChub2RlLm5hbWUsIDEwKV07XG4gICAgICAgIGlmIChyb290UmVhY3ROb2RlLmxlbmd0aCA9PT0gMSAmJiAhdG1wKSB0bXAgPSByb290UmVhY3ROb2RlWzBdW25vZGUubmFtZV07XG4gICAgICAgIGlmICghdG1wKSB0bXAgPSB7fTtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBPYmplY3Qua2V5cyhub2RlLmF0dHJzKS5sZW5ndGggIT09IDAgPyBtZXJnZVByb3BzKHtcbiAgICAgICAgICBwcm9wczogbm9kZS5hdHRyc1xuICAgICAgICB9LCB0bXApIDogdG1wO1xuICAgICAgICBjb25zdCBpc0VsZW1lbnQgPSBpc1ZhbGlkRWxlbWVudChjaGlsZCk7XG4gICAgICAgIGNvbnN0IGlzVmFsaWRUcmFuc2xhdGlvbldpdGhDaGlsZHJlbiA9IGlzRWxlbWVudCAmJiBoYXNDaGlsZHJlbihub2RlLCB0cnVlKSAmJiAhbm9kZS52b2lkRWxlbWVudDtcbiAgICAgICAgY29uc3QgaXNFbXB0eVRyYW5zV2l0aEhUTUwgPSBlbXB0eUNoaWxkcmVuQnV0TmVlZHNIYW5kbGluZyAmJiBpc09iamVjdChjaGlsZCkgJiYgY2hpbGQuZHVtbXkgJiYgIWlzRWxlbWVudDtcbiAgICAgICAgY29uc3QgaXNLbm93bkNvbXBvbmVudCA9IGlzT2JqZWN0KGNoaWxkcmVuKSAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChjaGlsZHJlbiwgbm9kZS5uYW1lKTtcbiAgICAgICAgaWYgKGlzU3RyaW5nKGNoaWxkKSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gaTE4bi5zZXJ2aWNlcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUoY2hpbGQsIG9wdHMsIGkxOG4ubGFuZ3VhZ2UpO1xuICAgICAgICAgIG1lbS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChoYXNDaGlsZHJlbihjaGlsZCkgfHwgaXNWYWxpZFRyYW5zbGF0aW9uV2l0aENoaWxkcmVuKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJJbm5lcihjaGlsZCwgbm9kZSwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgICAgICAgcHVzaFRyYW5zbGF0ZWRKU1goY2hpbGQsIGlubmVyLCBtZW0sIGkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRW1wdHlUcmFuc1dpdGhIVE1MKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSBtYXBBU1QocmVhY3ROb2Rlcywgbm9kZS5jaGlsZHJlbiwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgICAgICAgcHVzaFRyYW5zbGF0ZWRKU1goY2hpbGQsIGlubmVyLCBtZW0sIGkpO1xuICAgICAgICB9IGVsc2UgaWYgKE51bWJlci5pc05hTihwYXJzZUZsb2F0KG5vZGUubmFtZSkpKSB7XG4gICAgICAgICAgaWYgKGlzS25vd25Db21wb25lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGlubmVyID0gcmVuZGVySW5uZXIoY2hpbGQsIG5vZGUsIHJvb3RSZWFjdE5vZGUpO1xuICAgICAgICAgICAgcHVzaFRyYW5zbGF0ZWRKU1goY2hpbGQsIGlubmVyLCBtZW0sIGksIG5vZGUudm9pZEVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaTE4bk9wdGlvbnMudHJhbnNTdXBwb3J0QmFzaWNIdG1sTm9kZXMgJiYga2VlcEFycmF5LmluZGV4T2Yobm9kZS5uYW1lKSA+IC0xKSB7XG4gICAgICAgICAgICBpZiAobm9kZS52b2lkRWxlbWVudCkge1xuICAgICAgICAgICAgICBtZW0ucHVzaChjcmVhdGVFbGVtZW50KG5vZGUubmFtZSwge1xuICAgICAgICAgICAgICAgIGtleTogYCR7bm9kZS5uYW1lfS0ke2l9YFxuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBpbm5lciA9IG1hcEFTVChyZWFjdE5vZGVzLCBub2RlLmNoaWxkcmVuLCByb290UmVhY3ROb2RlKTtcbiAgICAgICAgICAgICAgbWVtLnB1c2goY3JlYXRlRWxlbWVudChub2RlLm5hbWUsIHtcbiAgICAgICAgICAgICAgICBrZXk6IGAke25vZGUubmFtZX0tJHtpfWBcbiAgICAgICAgICAgICAgfSwgaW5uZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUudm9pZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIG1lbS5wdXNoKGA8JHtub2RlLm5hbWV9IC8+YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGlubmVyID0gbWFwQVNUKHJlYWN0Tm9kZXMsIG5vZGUuY2hpbGRyZW4sIHJvb3RSZWFjdE5vZGUpO1xuICAgICAgICAgICAgbWVtLnB1c2goYDwke25vZGUubmFtZX0+JHtpbm5lcn08LyR7bm9kZS5uYW1lfT5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoY2hpbGQpICYmICFpc0VsZW1lbnQpIHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gbm9kZS5jaGlsZHJlblswXSA/IHRyYW5zbGF0aW9uQ29udGVudCA6IG51bGw7XG4gICAgICAgICAgaWYgKGNvbnRlbnQpIG1lbS5wdXNoKGNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHB1c2hUcmFuc2xhdGVkSlNYKGNoaWxkLCB0cmFuc2xhdGlvbkNvbnRlbnQsIG1lbSwgaSwgbm9kZS5jaGlsZHJlbi5sZW5ndGggIT09IDEgfHwgIXRyYW5zbGF0aW9uQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgY29uc3Qgd3JhcFRleHROb2RlcyA9IGkxOG5PcHRpb25zLnRyYW5zV3JhcFRleHROb2RlcztcbiAgICAgICAgY29uc3QgY29udGVudCA9IHNob3VsZFVuZXNjYXBlID8gaTE4bk9wdGlvbnMudW5lc2NhcGUoaTE4bi5zZXJ2aWNlcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUobm9kZS5jb250ZW50LCBvcHRzLCBpMThuLmxhbmd1YWdlKSkgOiBpMThuLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShub2RlLmNvbnRlbnQsIG9wdHMsIGkxOG4ubGFuZ3VhZ2UpO1xuICAgICAgICBpZiAod3JhcFRleHROb2Rlcykge1xuICAgICAgICAgIG1lbS5wdXNoKGNyZWF0ZUVsZW1lbnQod3JhcFRleHROb2Rlcywge1xuICAgICAgICAgICAga2V5OiBgJHtub2RlLm5hbWV9LSR7aX1gXG4gICAgICAgICAgfSwgY29udGVudCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lbS5wdXNoKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtO1xuICAgIH0sIFtdKTtcbiAgfTtcbiAgY29uc3QgcmVzdWx0ID0gbWFwQVNUKFt7XG4gICAgZHVtbXk6IHRydWUsXG4gICAgY2hpbGRyZW46IGNoaWxkcmVuIHx8IFtdXG4gIH1dLCBhc3QsIGdldEFzQXJyYXkoY2hpbGRyZW4gfHwgW10pKTtcbiAgcmV0dXJuIGdldENoaWxkcmVuKHJlc3VsdFswXSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIFRyYW5zKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBjaGlsZHJlbixcbiAgICBjb3VudCxcbiAgICBwYXJlbnQsXG4gICAgaTE4bktleSxcbiAgICBjb250ZXh0LFxuICAgIHRPcHRpb25zID0ge30sXG4gICAgdmFsdWVzLFxuICAgIGRlZmF1bHRzLFxuICAgIGNvbXBvbmVudHMsXG4gICAgbnMsXG4gICAgaTE4bjogaTE4bkZyb21Qcm9wcyxcbiAgICB0OiB0RnJvbVByb3BzLFxuICAgIHNob3VsZFVuZXNjYXBlLFxuICAgIC4uLmFkZGl0aW9uYWxQcm9wc1xuICB9ID0gX3JlZjtcbiAgY29uc3QgaTE4biA9IGkxOG5Gcm9tUHJvcHMgfHwgZ2V0STE4bigpO1xuICBpZiAoIWkxOG4pIHtcbiAgICB3YXJuT25jZSgnWW91IHdpbGwgbmVlZCB0byBwYXNzIGluIGFuIGkxOG5leHQgaW5zdGFuY2UgYnkgdXNpbmcgaTE4bmV4dFJlYWN0TW9kdWxlJyk7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG4gIGNvbnN0IHQgPSB0RnJvbVByb3BzIHx8IGkxOG4udC5iaW5kKGkxOG4pIHx8IChrID0+IGspO1xuICBjb25zdCByZWFjdEkxOG5leHRPcHRpb25zID0ge1xuICAgIC4uLmdldERlZmF1bHRzKCksXG4gICAgLi4uKGkxOG4ub3B0aW9ucyAmJiBpMThuLm9wdGlvbnMucmVhY3QpXG4gIH07XG4gIGxldCBuYW1lc3BhY2VzID0gbnMgfHwgdC5ucyB8fCBpMThuLm9wdGlvbnMgJiYgaTE4bi5vcHRpb25zLmRlZmF1bHROUztcbiAgbmFtZXNwYWNlcyA9IGlzU3RyaW5nKG5hbWVzcGFjZXMpID8gW25hbWVzcGFjZXNdIDogbmFtZXNwYWNlcyB8fCBbJ3RyYW5zbGF0aW9uJ107XG4gIGNvbnN0IG5vZGVBc1N0cmluZyA9IG5vZGVzVG9TdHJpbmcoY2hpbGRyZW4sIHJlYWN0STE4bmV4dE9wdGlvbnMpO1xuICBjb25zdCBkZWZhdWx0VmFsdWUgPSBkZWZhdWx0cyB8fCBub2RlQXNTdHJpbmcgfHwgcmVhY3RJMThuZXh0T3B0aW9ucy50cmFuc0VtcHR5Tm9kZVZhbHVlIHx8IGkxOG5LZXk7XG4gIGNvbnN0IHtcbiAgICBoYXNoVHJhbnNLZXlcbiAgfSA9IHJlYWN0STE4bmV4dE9wdGlvbnM7XG4gIGNvbnN0IGtleSA9IGkxOG5LZXkgfHwgKGhhc2hUcmFuc0tleSA/IGhhc2hUcmFuc0tleShub2RlQXNTdHJpbmcgfHwgZGVmYXVsdFZhbHVlKSA6IG5vZGVBc1N0cmluZyB8fCBkZWZhdWx0VmFsdWUpO1xuICBpZiAoaTE4bi5vcHRpb25zICYmIGkxOG4ub3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIGkxOG4ub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpIHtcbiAgICB2YWx1ZXMgPSB2YWx1ZXMgJiYgT2JqZWN0LmtleXModmFsdWVzKS5sZW5ndGggPiAwID8ge1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgLi4uaTE4bi5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlc1xuICAgIH0gOiB7XG4gICAgICAuLi5pMThuLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzXG4gICAgfTtcbiAgfVxuICBjb25zdCBpbnRlcnBvbGF0aW9uT3ZlcnJpZGUgPSB2YWx1ZXMgfHwgY291bnQgIT09IHVuZGVmaW5lZCB8fCAhY2hpbGRyZW4gPyB0T3B0aW9ucy5pbnRlcnBvbGF0aW9uIDoge1xuICAgIGludGVycG9sYXRpb246IHtcbiAgICAgIC4uLnRPcHRpb25zLmludGVycG9sYXRpb24sXG4gICAgICBwcmVmaXg6ICcjJD8nLFxuICAgICAgc3VmZml4OiAnPyQjJ1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY29tYmluZWRUT3B0cyA9IHtcbiAgICAuLi50T3B0aW9ucyxcbiAgICBjb250ZXh0OiBjb250ZXh0IHx8IHRPcHRpb25zLmNvbnRleHQsXG4gICAgY291bnQsXG4gICAgLi4udmFsdWVzLFxuICAgIC4uLmludGVycG9sYXRpb25PdmVycmlkZSxcbiAgICBkZWZhdWx0VmFsdWUsXG4gICAgbnM6IG5hbWVzcGFjZXNcbiAgfTtcbiAgY29uc3QgdHJhbnNsYXRpb24gPSBrZXkgPyB0KGtleSwgY29tYmluZWRUT3B0cykgOiBkZWZhdWx0VmFsdWU7XG4gIGlmIChjb21wb25lbnRzKSB7XG4gICAgT2JqZWN0LmtleXMoY29tcG9uZW50cykuZm9yRWFjaChjID0+IHtcbiAgICAgIGNvbnN0IGNvbXAgPSBjb21wb25lbnRzW2NdO1xuICAgICAgaWYgKHR5cGVvZiBjb21wLnR5cGUgPT09ICdmdW5jdGlvbicgfHwgIWNvbXAucHJvcHMgfHwgIWNvbXAucHJvcHMuY2hpbGRyZW4gfHwgdHJhbnNsYXRpb24uaW5kZXhPZihgJHtjfS8+YCkgPCAwICYmIHRyYW5zbGF0aW9uLmluZGV4T2YoYCR7Y30gLz5gKSA8IDApIHJldHVybjtcbiAgICAgIGZ1bmN0aW9uIENvbXBvbmVudGl6ZWQoKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCBjb21wKTtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudHNbY10gPSBjcmVhdGVFbGVtZW50KENvbXBvbmVudGl6ZWQpO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGNvbnRlbnQgPSByZW5kZXJOb2Rlcyhjb21wb25lbnRzIHx8IGNoaWxkcmVuLCB0cmFuc2xhdGlvbiwgaTE4biwgcmVhY3RJMThuZXh0T3B0aW9ucywgY29tYmluZWRUT3B0cywgc2hvdWxkVW5lc2NhcGUpO1xuICBjb25zdCB1c2VBc1BhcmVudCA9IHBhcmVudCAhPT0gdW5kZWZpbmVkID8gcGFyZW50IDogcmVhY3RJMThuZXh0T3B0aW9ucy5kZWZhdWx0VHJhbnNQYXJlbnQ7XG4gIHJldHVybiB1c2VBc1BhcmVudCA/IGNyZWF0ZUVsZW1lbnQodXNlQXNQYXJlbnQsIGFkZGl0aW9uYWxQcm9wcywgY29udGVudCkgOiBjb250ZW50O1xufSIsImltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAnLi91c2VUcmFuc2xhdGlvbi5qcyc7XG5leHBvcnQgZnVuY3Rpb24gVHJhbnNsYXRpb24ocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIG5zLFxuICAgIGNoaWxkcmVuLFxuICAgIC4uLm9wdGlvbnNcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbdCwgaTE4biwgcmVhZHldID0gdXNlVHJhbnNsYXRpb24obnMsIG9wdGlvbnMpO1xuICByZXR1cm4gY2hpbGRyZW4odCwge1xuICAgIGkxOG4sXG4gICAgbG5nOiBpMThuLmxhbmd1YWdlXG4gIH0sIHJlYWR5KTtcbn0iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdHMsIHNldERlZmF1bHRzIH0gZnJvbSAnLi9kZWZhdWx0cy5qcyc7XG5pbXBvcnQgeyBnZXRJMThuLCBzZXRJMThuIH0gZnJvbSAnLi9pMThuSW5zdGFuY2UuanMnO1xuaW1wb3J0IHsgaW5pdFJlYWN0STE4bmV4dCB9IGZyb20gJy4vaW5pdFJlYWN0STE4bmV4dC5qcyc7XG5leHBvcnQgeyBnZXREZWZhdWx0cywgc2V0RGVmYXVsdHMsIGdldEkxOG4sIHNldEkxOG4sIGluaXRSZWFjdEkxOG5leHQgfTtcbmV4cG9ydCBjb25zdCBJMThuQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTtcbmV4cG9ydCBjbGFzcyBSZXBvcnROYW1lc3BhY2VzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy51c2VkTmFtZXNwYWNlcyA9IHt9O1xuICB9XG4gIGFkZFVzZWROYW1lc3BhY2VzKG5hbWVzcGFjZXMpIHtcbiAgICBuYW1lc3BhY2VzLmZvckVhY2gobnMgPT4ge1xuICAgICAgaWYgKCF0aGlzLnVzZWROYW1lc3BhY2VzW25zXSkgdGhpcy51c2VkTmFtZXNwYWNlc1tuc10gPSB0cnVlO1xuICAgIH0pO1xuICB9XG4gIGdldFVzZWROYW1lc3BhY2VzID0gKCkgPT4gT2JqZWN0LmtleXModGhpcy51c2VkTmFtZXNwYWNlcyk7XG59XG5leHBvcnQgY29uc3QgY29tcG9zZUluaXRpYWxQcm9wcyA9IEZvckNvbXBvbmVudCA9PiBhc3luYyBjdHggPT4ge1xuICBjb25zdCBjb21wb25lbnRzSW5pdGlhbFByb3BzID0gRm9yQ29tcG9uZW50LmdldEluaXRpYWxQcm9wcyA/IGF3YWl0IEZvckNvbXBvbmVudC5nZXRJbml0aWFsUHJvcHMoY3R4KSA6IHt9O1xuICBjb25zdCBpMThuSW5pdGlhbFByb3BzID0gZ2V0SW5pdGlhbFByb3BzKCk7XG4gIHJldHVybiB7XG4gICAgLi4uY29tcG9uZW50c0luaXRpYWxQcm9wcyxcbiAgICAuLi5pMThuSW5pdGlhbFByb3BzXG4gIH07XG59O1xuZXhwb3J0IGNvbnN0IGdldEluaXRpYWxQcm9wcyA9ICgpID0+IHtcbiAgY29uc3QgaTE4biA9IGdldEkxOG4oKTtcbiAgY29uc3QgbmFtZXNwYWNlcyA9IGkxOG4ucmVwb3J0TmFtZXNwYWNlcyA/IGkxOG4ucmVwb3J0TmFtZXNwYWNlcy5nZXRVc2VkTmFtZXNwYWNlcygpIDogW107XG4gIGNvbnN0IHJldCA9IHt9O1xuICBjb25zdCBpbml0aWFsSTE4blN0b3JlID0ge307XG4gIGkxOG4ubGFuZ3VhZ2VzLmZvckVhY2gobCA9PiB7XG4gICAgaW5pdGlhbEkxOG5TdG9yZVtsXSA9IHt9O1xuICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICBpbml0aWFsSTE4blN0b3JlW2xdW25zXSA9IGkxOG4uZ2V0UmVzb3VyY2VCdW5kbGUobCwgbnMpIHx8IHt9O1xuICAgIH0pO1xuICB9KTtcbiAgcmV0LmluaXRpYWxJMThuU3RvcmUgPSBpbml0aWFsSTE4blN0b3JlO1xuICByZXQuaW5pdGlhbExhbmd1YWdlID0gaTE4bi5sYW5ndWFnZTtcbiAgcmV0dXJuIHJldDtcbn07IiwiaW1wb3J0IHsgdW5lc2NhcGUgfSBmcm9tICcuL3VuZXNjYXBlLmpzJztcbmxldCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgYmluZEkxOG46ICdsYW5ndWFnZUNoYW5nZWQnLFxuICBiaW5kSTE4blN0b3JlOiAnJyxcbiAgdHJhbnNFbXB0eU5vZGVWYWx1ZTogJycsXG4gIHRyYW5zU3VwcG9ydEJhc2ljSHRtbE5vZGVzOiB0cnVlLFxuICB0cmFuc1dyYXBUZXh0Tm9kZXM6ICcnLFxuICB0cmFuc0tlZXBCYXNpY0h0bWxOb2Rlc0ZvcjogWydicicsICdzdHJvbmcnLCAnaScsICdwJ10sXG4gIHVzZVN1c3BlbnNlOiB0cnVlLFxuICB1bmVzY2FwZVxufTtcbmV4cG9ydCBjb25zdCBzZXREZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAuLi5vcHRpb25zXG4gIH07XG59O1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4gZGVmYXVsdE9wdGlvbnM7IiwibGV0IGkxOG5JbnN0YW5jZTtcbmV4cG9ydCBjb25zdCBzZXRJMThuID0gaW5zdGFuY2UgPT4ge1xuICBpMThuSW5zdGFuY2UgPSBpbnN0YW5jZTtcbn07XG5leHBvcnQgY29uc3QgZ2V0STE4biA9ICgpID0+IGkxOG5JbnN0YW5jZTsiLCJleHBvcnQgeyBUcmFucyB9IGZyb20gJy4vVHJhbnMuanMnO1xuZXhwb3J0IHsgVHJhbnMgYXMgVHJhbnNXaXRob3V0Q29udGV4dCB9IGZyb20gJy4vVHJhbnNXaXRob3V0Q29udGV4dC5qcyc7XG5leHBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJy4vdXNlVHJhbnNsYXRpb24uanMnO1xuZXhwb3J0IHsgd2l0aFRyYW5zbGF0aW9uIH0gZnJvbSAnLi93aXRoVHJhbnNsYXRpb24uanMnO1xuZXhwb3J0IHsgVHJhbnNsYXRpb24gfSBmcm9tICcuL1RyYW5zbGF0aW9uLmpzJztcbmV4cG9ydCB7IEkxOG5leHRQcm92aWRlciB9IGZyb20gJy4vSTE4bmV4dFByb3ZpZGVyLmpzJztcbmV4cG9ydCB7IHdpdGhTU1IgfSBmcm9tICcuL3dpdGhTU1IuanMnO1xuZXhwb3J0IHsgdXNlU1NSIH0gZnJvbSAnLi91c2VTU1IuanMnO1xuZXhwb3J0IHsgaW5pdFJlYWN0STE4bmV4dCB9IGZyb20gJy4vaW5pdFJlYWN0STE4bmV4dC5qcyc7XG5leHBvcnQgeyBzZXREZWZhdWx0cywgZ2V0RGVmYXVsdHMgfSBmcm9tICcuL2RlZmF1bHRzLmpzJztcbmV4cG9ydCB7IHNldEkxOG4sIGdldEkxOG4gfSBmcm9tICcuL2kxOG5JbnN0YW5jZS5qcyc7XG5leHBvcnQgeyBJMThuQ29udGV4dCwgY29tcG9zZUluaXRpYWxQcm9wcywgZ2V0SW5pdGlhbFByb3BzIH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmV4cG9ydCBjb25zdCBkYXRlID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3QgdGltZSA9ICgpID0+ICcnO1xuZXhwb3J0IGNvbnN0IG51bWJlciA9ICgpID0+ICcnO1xuZXhwb3J0IGNvbnN0IHNlbGVjdCA9ICgpID0+ICcnO1xuZXhwb3J0IGNvbnN0IHBsdXJhbCA9ICgpID0+ICcnO1xuZXhwb3J0IGNvbnN0IHNlbGVjdE9yZGluYWwgPSAoKSA9PiAnJzsiLCJpbXBvcnQgeyBzZXREZWZhdWx0cyB9IGZyb20gJy4vZGVmYXVsdHMuanMnO1xuaW1wb3J0IHsgc2V0STE4biB9IGZyb20gJy4vaTE4bkluc3RhbmNlLmpzJztcbmV4cG9ydCBjb25zdCBpbml0UmVhY3RJMThuZXh0ID0ge1xuICB0eXBlOiAnM3JkUGFydHknLFxuICBpbml0KGluc3RhbmNlKSB7XG4gICAgc2V0RGVmYXVsdHMoaW5zdGFuY2Uub3B0aW9ucy5yZWFjdCk7XG4gICAgc2V0STE4bihpbnN0YW5jZSk7XG4gIH1cbn07IiwiY29uc3QgbWF0Y2hIdG1sRW50aXR5ID0gLyYoPzphbXB8IzM4fGx0fCM2MHxndHwjNjJ8YXBvc3wjMzl8cXVvdHwjMzR8bmJzcHwjMTYwfGNvcHl8IzE2OXxyZWd8IzE3NHxoZWxsaXB8IzgyMzB8I3gyRnwjNDcpOy9nO1xuY29uc3QgaHRtbEVudGl0aWVzID0ge1xuICAnJmFtcDsnOiAnJicsXG4gICcmIzM4Oyc6ICcmJyxcbiAgJyZsdDsnOiAnPCcsXG4gICcmIzYwOyc6ICc8JyxcbiAgJyZndDsnOiAnPicsXG4gICcmIzYyOyc6ICc+JyxcbiAgJyZhcG9zOyc6IFwiJ1wiLFxuICAnJiMzOTsnOiBcIidcIixcbiAgJyZxdW90Oyc6ICdcIicsXG4gICcmIzM0Oyc6ICdcIicsXG4gICcmbmJzcDsnOiAnICcsXG4gICcmIzE2MDsnOiAnICcsXG4gICcmY29weTsnOiAnwqknLFxuICAnJiMxNjk7JzogJ8KpJyxcbiAgJyZyZWc7JzogJ8KuJyxcbiAgJyYjMTc0Oyc6ICfCricsXG4gICcmaGVsbGlwOyc6ICfigKYnLFxuICAnJiM4MjMwOyc6ICfigKYnLFxuICAnJiN4MkY7JzogJy8nLFxuICAnJiM0NzsnOiAnLydcbn07XG5jb25zdCB1bmVzY2FwZUh0bWxFbnRpdHkgPSBtID0+IGh0bWxFbnRpdGllc1ttXTtcbmV4cG9ydCBjb25zdCB1bmVzY2FwZSA9IHRleHQgPT4gdGV4dC5yZXBsYWNlKG1hdGNoSHRtbEVudGl0eSwgdW5lc2NhcGVIdG1sRW50aXR5KTsiLCJpbXBvcnQgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0STE4biwgSTE4bkNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQuanMnO1xuZXhwb3J0IGNvbnN0IHVzZVNTUiA9IGZ1bmN0aW9uIChpbml0aWFsSTE4blN0b3JlLCBpbml0aWFsTGFuZ3VhZ2UpIHtcbiAgbGV0IHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgY29uc3Qge1xuICAgIGkxOG46IGkxOG5Gcm9tUHJvcHNcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Db250ZXh0XG4gIH0gPSB1c2VDb250ZXh0KEkxOG5Db250ZXh0KSB8fCB7fTtcbiAgY29uc3QgaTE4biA9IGkxOG5Gcm9tUHJvcHMgfHwgaTE4bkZyb21Db250ZXh0IHx8IGdldEkxOG4oKTtcbiAgaWYgKGkxOG4ub3B0aW9ucyAmJiBpMThuLm9wdGlvbnMuaXNDbG9uZSkgcmV0dXJuO1xuICBpZiAoaW5pdGlhbEkxOG5TdG9yZSAmJiAhaTE4bi5pbml0aWFsaXplZFN0b3JlT25jZSkge1xuICAgIGkxOG4uc2VydmljZXMucmVzb3VyY2VTdG9yZS5kYXRhID0gaW5pdGlhbEkxOG5TdG9yZTtcbiAgICBpMThuLm9wdGlvbnMubnMgPSBPYmplY3QudmFsdWVzKGluaXRpYWxJMThuU3RvcmUpLnJlZHVjZSgobWVtLCBsbmdSZXNvdXJjZXMpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKGxuZ1Jlc291cmNlcykuZm9yRWFjaChucyA9PiB7XG4gICAgICAgIGlmIChtZW0uaW5kZXhPZihucykgPCAwKSBtZW0ucHVzaChucyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtZW07XG4gICAgfSwgaTE4bi5vcHRpb25zLm5zKTtcbiAgICBpMThuLmluaXRpYWxpemVkU3RvcmVPbmNlID0gdHJ1ZTtcbiAgICBpMThuLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICB9XG4gIGlmIChpbml0aWFsTGFuZ3VhZ2UgJiYgIWkxOG4uaW5pdGlhbGl6ZWRMYW5ndWFnZU9uY2UpIHtcbiAgICBpMThuLmNoYW5nZUxhbmd1YWdlKGluaXRpYWxMYW5ndWFnZSk7XG4gICAgaTE4bi5pbml0aWFsaXplZExhbmd1YWdlT25jZSA9IHRydWU7XG4gIH1cbn07IiwiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ29udGV4dCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldEkxOG4sIGdldERlZmF1bHRzLCBSZXBvcnROYW1lc3BhY2VzLCBJMThuQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5pbXBvcnQgeyB3YXJuT25jZSwgbG9hZE5hbWVzcGFjZXMsIGxvYWRMYW5ndWFnZXMsIGhhc0xvYWRlZE5hbWVzcGFjZSwgaXNTdHJpbmcsIGlzT2JqZWN0IH0gZnJvbSAnLi91dGlscy5qcyc7XG5jb25zdCB1c2VQcmV2aW91cyA9ICh2YWx1ZSwgaWdub3JlKSA9PiB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlZi5jdXJyZW50ID0gaWdub3JlID8gcmVmLmN1cnJlbnQgOiB2YWx1ZTtcbiAgfSwgW3ZhbHVlLCBpZ25vcmVdKTtcbiAgcmV0dXJuIHJlZi5jdXJyZW50O1xufTtcbmNvbnN0IGFsd2F5c05ld1QgPSAoaTE4biwgbGFuZ3VhZ2UsIG5hbWVzcGFjZSwga2V5UHJlZml4KSA9PiBpMThuLmdldEZpeGVkVChsYW5ndWFnZSwgbmFtZXNwYWNlLCBrZXlQcmVmaXgpO1xuY29uc3QgdXNlTWVtb2l6ZWRUID0gKGkxOG4sIGxhbmd1YWdlLCBuYW1lc3BhY2UsIGtleVByZWZpeCkgPT4gdXNlQ2FsbGJhY2soYWx3YXlzTmV3VChpMThuLCBsYW5ndWFnZSwgbmFtZXNwYWNlLCBrZXlQcmVmaXgpLCBbaTE4biwgbGFuZ3VhZ2UsIG5hbWVzcGFjZSwga2V5UHJlZml4XSk7XG5leHBvcnQgY29uc3QgdXNlVHJhbnNsYXRpb24gPSBmdW5jdGlvbiAobnMpIHtcbiAgbGV0IHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgY29uc3Qge1xuICAgIGkxOG46IGkxOG5Gcm9tUHJvcHNcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Db250ZXh0LFxuICAgIGRlZmF1bHROUzogZGVmYXVsdE5TRnJvbUNvbnRleHRcbiAgfSA9IHVzZUNvbnRleHQoSTE4bkNvbnRleHQpIHx8IHt9O1xuICBjb25zdCBpMThuID0gaTE4bkZyb21Qcm9wcyB8fCBpMThuRnJvbUNvbnRleHQgfHwgZ2V0STE4bigpO1xuICBpZiAoaTE4biAmJiAhaTE4bi5yZXBvcnROYW1lc3BhY2VzKSBpMThuLnJlcG9ydE5hbWVzcGFjZXMgPSBuZXcgUmVwb3J0TmFtZXNwYWNlcygpO1xuICBpZiAoIWkxOG4pIHtcbiAgICB3YXJuT25jZSgnWW91IHdpbGwgbmVlZCB0byBwYXNzIGluIGFuIGkxOG5leHQgaW5zdGFuY2UgYnkgdXNpbmcgaW5pdFJlYWN0STE4bmV4dCcpO1xuICAgIGNvbnN0IG5vdFJlYWR5VCA9IChrLCBvcHRzT3JEZWZhdWx0VmFsdWUpID0+IHtcbiAgICAgIGlmIChpc1N0cmluZyhvcHRzT3JEZWZhdWx0VmFsdWUpKSByZXR1cm4gb3B0c09yRGVmYXVsdFZhbHVlO1xuICAgICAgaWYgKGlzT2JqZWN0KG9wdHNPckRlZmF1bHRWYWx1ZSkgJiYgaXNTdHJpbmcob3B0c09yRGVmYXVsdFZhbHVlLmRlZmF1bHRWYWx1ZSkpIHJldHVybiBvcHRzT3JEZWZhdWx0VmFsdWUuZGVmYXVsdFZhbHVlO1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoaykgPyBrW2subGVuZ3RoIC0gMV0gOiBrO1xuICAgIH07XG4gICAgY29uc3QgcmV0Tm90UmVhZHkgPSBbbm90UmVhZHlULCB7fSwgZmFsc2VdO1xuICAgIHJldE5vdFJlYWR5LnQgPSBub3RSZWFkeVQ7XG4gICAgcmV0Tm90UmVhZHkuaTE4biA9IHt9O1xuICAgIHJldE5vdFJlYWR5LnJlYWR5ID0gZmFsc2U7XG4gICAgcmV0dXJuIHJldE5vdFJlYWR5O1xuICB9XG4gIGlmIChpMThuLm9wdGlvbnMucmVhY3QgJiYgaTE4bi5vcHRpb25zLnJlYWN0LndhaXQgIT09IHVuZGVmaW5lZCkgd2Fybk9uY2UoJ0l0IHNlZW1zIHlvdSBhcmUgc3RpbGwgdXNpbmcgdGhlIG9sZCB3YWl0IG9wdGlvbiwgeW91IG1heSBtaWdyYXRlIHRvIHRoZSBuZXcgdXNlU3VzcGVuc2UgYmVoYXZpb3VyLicpO1xuICBjb25zdCBpMThuT3B0aW9ucyA9IHtcbiAgICAuLi5nZXREZWZhdWx0cygpLFxuICAgIC4uLmkxOG4ub3B0aW9ucy5yZWFjdCxcbiAgICAuLi5wcm9wc1xuICB9O1xuICBjb25zdCB7XG4gICAgdXNlU3VzcGVuc2UsXG4gICAga2V5UHJlZml4XG4gIH0gPSBpMThuT3B0aW9ucztcbiAgbGV0IG5hbWVzcGFjZXMgPSBucyB8fCBkZWZhdWx0TlNGcm9tQ29udGV4dCB8fCBpMThuLm9wdGlvbnMgJiYgaTE4bi5vcHRpb25zLmRlZmF1bHROUztcbiAgbmFtZXNwYWNlcyA9IGlzU3RyaW5nKG5hbWVzcGFjZXMpID8gW25hbWVzcGFjZXNdIDogbmFtZXNwYWNlcyB8fCBbJ3RyYW5zbGF0aW9uJ107XG4gIGlmIChpMThuLnJlcG9ydE5hbWVzcGFjZXMuYWRkVXNlZE5hbWVzcGFjZXMpIGkxOG4ucmVwb3J0TmFtZXNwYWNlcy5hZGRVc2VkTmFtZXNwYWNlcyhuYW1lc3BhY2VzKTtcbiAgY29uc3QgcmVhZHkgPSAoaTE4bi5pc0luaXRpYWxpemVkIHx8IGkxOG4uaW5pdGlhbGl6ZWRTdG9yZU9uY2UpICYmIG5hbWVzcGFjZXMuZXZlcnkobiA9PiBoYXNMb2FkZWROYW1lc3BhY2UobiwgaTE4biwgaTE4bk9wdGlvbnMpKTtcbiAgY29uc3QgbWVtb0dldFQgPSB1c2VNZW1vaXplZFQoaTE4biwgcHJvcHMubG5nIHx8IG51bGwsIGkxOG5PcHRpb25zLm5zTW9kZSA9PT0gJ2ZhbGxiYWNrJyA/IG5hbWVzcGFjZXMgOiBuYW1lc3BhY2VzWzBdLCBrZXlQcmVmaXgpO1xuICBjb25zdCBnZXRUID0gKCkgPT4gbWVtb0dldFQ7XG4gIGNvbnN0IGdldE5ld1QgPSAoKSA9PiBhbHdheXNOZXdUKGkxOG4sIHByb3BzLmxuZyB8fCBudWxsLCBpMThuT3B0aW9ucy5uc01vZGUgPT09ICdmYWxsYmFjaycgPyBuYW1lc3BhY2VzIDogbmFtZXNwYWNlc1swXSwga2V5UHJlZml4KTtcbiAgY29uc3QgW3QsIHNldFRdID0gdXNlU3RhdGUoZ2V0VCk7XG4gIGxldCBqb2luZWROUyA9IG5hbWVzcGFjZXMuam9pbigpO1xuICBpZiAocHJvcHMubG5nKSBqb2luZWROUyA9IGAke3Byb3BzLmxuZ30ke2pvaW5lZE5TfWA7XG4gIGNvbnN0IHByZXZpb3VzSm9pbmVkTlMgPSB1c2VQcmV2aW91cyhqb2luZWROUyk7XG4gIGNvbnN0IGlzTW91bnRlZCA9IHVzZVJlZih0cnVlKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBiaW5kSTE4bixcbiAgICAgIGJpbmRJMThuU3RvcmVcbiAgICB9ID0gaTE4bk9wdGlvbnM7XG4gICAgaXNNb3VudGVkLmN1cnJlbnQgPSB0cnVlO1xuICAgIGlmICghcmVhZHkgJiYgIXVzZVN1c3BlbnNlKSB7XG4gICAgICBpZiAocHJvcHMubG5nKSB7XG4gICAgICAgIGxvYWRMYW5ndWFnZXMoaTE4biwgcHJvcHMubG5nLCBuYW1lc3BhY2VzLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSBzZXRUKGdldE5ld1QpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWROYW1lc3BhY2VzKGkxOG4sIG5hbWVzcGFjZXMsICgpID0+IHtcbiAgICAgICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHNldFQoZ2V0TmV3VCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVhZHkgJiYgcHJldmlvdXNKb2luZWROUyAmJiBwcmV2aW91c0pvaW5lZE5TICE9PSBqb2luZWROUyAmJiBpc01vdW50ZWQuY3VycmVudCkge1xuICAgICAgc2V0VChnZXROZXdUKTtcbiAgICB9XG4gICAgY29uc3QgYm91bmRSZXNldCA9ICgpID0+IHtcbiAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkgc2V0VChnZXROZXdUKTtcbiAgICB9O1xuICAgIGlmIChiaW5kSTE4biAmJiBpMThuKSBpMThuLm9uKGJpbmRJMThuLCBib3VuZFJlc2V0KTtcbiAgICBpZiAoYmluZEkxOG5TdG9yZSAmJiBpMThuKSBpMThuLnN0b3JlLm9uKGJpbmRJMThuU3RvcmUsIGJvdW5kUmVzZXQpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQuY3VycmVudCA9IGZhbHNlO1xuICAgICAgaWYgKGJpbmRJMThuICYmIGkxOG4pIGJpbmRJMThuLnNwbGl0KCcgJykuZm9yRWFjaChlID0+IGkxOG4ub2ZmKGUsIGJvdW5kUmVzZXQpKTtcbiAgICAgIGlmIChiaW5kSTE4blN0b3JlICYmIGkxOG4pIGJpbmRJMThuU3RvcmUuc3BsaXQoJyAnKS5mb3JFYWNoKGUgPT4gaTE4bi5zdG9yZS5vZmYoZSwgYm91bmRSZXNldCkpO1xuICAgIH07XG4gIH0sIFtpMThuLCBqb2luZWROU10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc01vdW50ZWQuY3VycmVudCAmJiByZWFkeSkge1xuICAgICAgc2V0VChnZXRUKTtcbiAgICB9XG4gIH0sIFtpMThuLCBrZXlQcmVmaXgsIHJlYWR5XSk7XG4gIGNvbnN0IHJldCA9IFt0LCBpMThuLCByZWFkeV07XG4gIHJldC50ID0gdDtcbiAgcmV0LmkxOG4gPSBpMThuO1xuICByZXQucmVhZHkgPSByZWFkeTtcbiAgaWYgKHJlYWR5KSByZXR1cm4gcmV0O1xuICBpZiAoIXJlYWR5ICYmICF1c2VTdXNwZW5zZSkgcmV0dXJuIHJldDtcbiAgdGhyb3cgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgaWYgKHByb3BzLmxuZykge1xuICAgICAgbG9hZExhbmd1YWdlcyhpMThuLCBwcm9wcy5sbmcsIG5hbWVzcGFjZXMsICgpID0+IHJlc29sdmUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvYWROYW1lc3BhY2VzKGkxOG4sIG5hbWVzcGFjZXMsICgpID0+IHJlc29sdmUoKSk7XG4gICAgfVxuICB9KTtcbn07IiwiZXhwb3J0IGZ1bmN0aW9uIHdhcm4oKSB7XG4gIGlmIChjb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pKSBhcmdzWzBdID0gYHJlYWN0LWkxOG5leHQ6OiAke2FyZ3NbMF19YDtcbiAgICBjb25zb2xlLndhcm4oLi4uYXJncyk7XG4gIH1cbn1cbmNvbnN0IGFscmVhZHlXYXJuZWQgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiB3YXJuT25jZSgpIHtcbiAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG4gIGlmIChpc1N0cmluZyhhcmdzWzBdKSAmJiBhbHJlYWR5V2FybmVkW2FyZ3NbMF1dKSByZXR1cm47XG4gIGlmIChpc1N0cmluZyhhcmdzWzBdKSkgYWxyZWFkeVdhcm5lZFthcmdzWzBdXSA9IG5ldyBEYXRlKCk7XG4gIHdhcm4oLi4uYXJncyk7XG59XG5jb25zdCBsb2FkZWRDbGIgPSAoaTE4biwgY2IpID0+ICgpID0+IHtcbiAgaWYgKGkxOG4uaXNJbml0aWFsaXplZCkge1xuICAgIGNiKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZWQgPSAoKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaTE4bi5vZmYoJ2luaXRpYWxpemVkJywgaW5pdGlhbGl6ZWQpO1xuICAgICAgfSwgMCk7XG4gICAgICBjYigpO1xuICAgIH07XG4gICAgaTE4bi5vbignaW5pdGlhbGl6ZWQnLCBpbml0aWFsaXplZCk7XG4gIH1cbn07XG5leHBvcnQgY29uc3QgbG9hZE5hbWVzcGFjZXMgPSAoaTE4biwgbnMsIGNiKSA9PiB7XG4gIGkxOG4ubG9hZE5hbWVzcGFjZXMobnMsIGxvYWRlZENsYihpMThuLCBjYikpO1xufTtcbmV4cG9ydCBjb25zdCBsb2FkTGFuZ3VhZ2VzID0gKGkxOG4sIGxuZywgbnMsIGNiKSA9PiB7XG4gIGlmIChpc1N0cmluZyhucykpIG5zID0gW25zXTtcbiAgbnMuZm9yRWFjaChuID0+IHtcbiAgICBpZiAoaTE4bi5vcHRpb25zLm5zLmluZGV4T2YobikgPCAwKSBpMThuLm9wdGlvbnMubnMucHVzaChuKTtcbiAgfSk7XG4gIGkxOG4ubG9hZExhbmd1YWdlcyhsbmcsIGxvYWRlZENsYihpMThuLCBjYikpO1xufTtcbmNvbnN0IG9sZEkxOG5leHRIYXNMb2FkZWROYW1lc3BhY2UgPSBmdW5jdGlvbiAobnMsIGkxOG4pIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICBjb25zdCBsbmcgPSBpMThuLmxhbmd1YWdlc1swXTtcbiAgY29uc3QgZmFsbGJhY2tMbmcgPSBpMThuLm9wdGlvbnMgPyBpMThuLm9wdGlvbnMuZmFsbGJhY2tMbmcgOiBmYWxzZTtcbiAgY29uc3QgbGFzdExuZyA9IGkxOG4ubGFuZ3VhZ2VzW2kxOG4ubGFuZ3VhZ2VzLmxlbmd0aCAtIDFdO1xuICBpZiAobG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSByZXR1cm4gdHJ1ZTtcbiAgY29uc3QgbG9hZE5vdFBlbmRpbmcgPSAobCwgbikgPT4ge1xuICAgIGNvbnN0IGxvYWRTdGF0ZSA9IGkxOG4uc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5zdGF0ZVtgJHtsfXwke259YF07XG4gICAgcmV0dXJuIGxvYWRTdGF0ZSA9PT0gLTEgfHwgbG9hZFN0YXRlID09PSAyO1xuICB9O1xuICBpZiAob3B0aW9ucy5iaW5kSTE4biAmJiBvcHRpb25zLmJpbmRJMThuLmluZGV4T2YoJ2xhbmd1YWdlQ2hhbmdpbmcnKSA+IC0xICYmIGkxOG4uc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5iYWNrZW5kICYmIGkxOG4uaXNMYW5ndWFnZUNoYW5naW5nVG8gJiYgIWxvYWROb3RQZW5kaW5nKGkxOG4uaXNMYW5ndWFnZUNoYW5naW5nVG8sIG5zKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoaTE4bi5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkgcmV0dXJuIHRydWU7XG4gIGlmICghaTE4bi5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgfHwgaTE4bi5vcHRpb25zLnJlc291cmNlcyAmJiAhaTE4bi5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKGxvYWROb3RQZW5kaW5nKGxuZywgbnMpICYmICghZmFsbGJhY2tMbmcgfHwgbG9hZE5vdFBlbmRpbmcobGFzdExuZywgbnMpKSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn07XG5leHBvcnQgY29uc3QgaGFzTG9hZGVkTmFtZXNwYWNlID0gZnVuY3Rpb24gKG5zLCBpMThuKSB7XG4gIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgaWYgKCFpMThuLmxhbmd1YWdlcyB8fCAhaTE4bi5sYW5ndWFnZXMubGVuZ3RoKSB7XG4gICAgd2Fybk9uY2UoJ2kxOG4ubGFuZ3VhZ2VzIHdlcmUgdW5kZWZpbmVkIG9yIGVtcHR5JywgaTE4bi5sYW5ndWFnZXMpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IGlzTmV3ZXJJMThuZXh0ID0gaTE4bi5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgIT09IHVuZGVmaW5lZDtcbiAgaWYgKCFpc05ld2VySTE4bmV4dCkge1xuICAgIHJldHVybiBvbGRJMThuZXh0SGFzTG9hZGVkTmFtZXNwYWNlKG5zLCBpMThuLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gaTE4bi5oYXNMb2FkZWROYW1lc3BhY2UobnMsIHtcbiAgICBsbmc6IG9wdGlvbnMubG5nLFxuICAgIHByZWNoZWNrOiAoaTE4bkluc3RhbmNlLCBsb2FkTm90UGVuZGluZykgPT4ge1xuICAgICAgaWYgKG9wdGlvbnMuYmluZEkxOG4gJiYgb3B0aW9ucy5iaW5kSTE4bi5pbmRleE9mKCdsYW5ndWFnZUNoYW5naW5nJykgPiAtMSAmJiBpMThuSW5zdGFuY2Uuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5iYWNrZW5kICYmIGkxOG5JbnN0YW5jZS5pc0xhbmd1YWdlQ2hhbmdpbmdUbyAmJiAhbG9hZE5vdFBlbmRpbmcoaTE4bkluc3RhbmNlLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvLCBucykpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xufTtcbmV4cG9ydCBjb25zdCBnZXREaXNwbGF5TmFtZSA9IENvbXBvbmVudCA9PiBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgKGlzU3RyaW5nKENvbXBvbmVudCkgJiYgQ29tcG9uZW50Lmxlbmd0aCA+IDAgPyBDb21wb25lbnQgOiAnVW5rbm93bicpO1xuZXhwb3J0IGNvbnN0IGlzU3RyaW5nID0gb2JqID0+IHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xuZXhwb3J0IGNvbnN0IGlzT2JqZWN0ID0gb2JqID0+IHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbDsiLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlU1NSIH0gZnJvbSAnLi91c2VTU1IuanMnO1xuaW1wb3J0IHsgY29tcG9zZUluaXRpYWxQcm9wcyB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5pbXBvcnQgeyBnZXREaXNwbGF5TmFtZSB9IGZyb20gJy4vdXRpbHMuanMnO1xuZXhwb3J0IGNvbnN0IHdpdGhTU1IgPSAoKSA9PiBmdW5jdGlvbiBFeHRlbmQoV3JhcHBlZENvbXBvbmVudCkge1xuICBmdW5jdGlvbiBJMThuZXh0V2l0aFNTUihfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIGluaXRpYWxJMThuU3RvcmUsXG4gICAgICBpbml0aWFsTGFuZ3VhZ2UsXG4gICAgICAuLi5yZXN0XG4gICAgfSA9IF9yZWY7XG4gICAgdXNlU1NSKGluaXRpYWxJMThuU3RvcmUsIGluaXRpYWxMYW5ndWFnZSk7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoV3JhcHBlZENvbXBvbmVudCwge1xuICAgICAgLi4ucmVzdFxuICAgIH0pO1xuICB9XG4gIEkxOG5leHRXaXRoU1NSLmdldEluaXRpYWxQcm9wcyA9IGNvbXBvc2VJbml0aWFsUHJvcHMoV3JhcHBlZENvbXBvbmVudCk7XG4gIEkxOG5leHRXaXRoU1NSLmRpc3BsYXlOYW1lID0gYHdpdGhJMThuZXh0U1NSKCR7Z2V0RGlzcGxheU5hbWUoV3JhcHBlZENvbXBvbmVudCl9KWA7XG4gIEkxOG5leHRXaXRoU1NSLldyYXBwZWRDb21wb25lbnQgPSBXcmFwcGVkQ29tcG9uZW50O1xuICByZXR1cm4gSTE4bmV4dFdpdGhTU1I7XG59OyIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIGZvcndhcmRSZWYgYXMgZm9yd2FyZFJlZlJlYWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICcuL3VzZVRyYW5zbGF0aW9uLmpzJztcbmltcG9ydCB7IGdldERpc3BsYXlOYW1lIH0gZnJvbSAnLi91dGlscy5qcyc7XG5leHBvcnQgY29uc3Qgd2l0aFRyYW5zbGF0aW9uID0gZnVuY3Rpb24gKG5zKSB7XG4gIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIEV4dGVuZChXcmFwcGVkQ29tcG9uZW50KSB7XG4gICAgZnVuY3Rpb24gSTE4bmV4dFdpdGhUcmFuc2xhdGlvbihfcmVmKSB7XG4gICAgICBsZXQge1xuICAgICAgICBmb3J3YXJkZWRSZWYsXG4gICAgICAgIC4uLnJlc3RcbiAgICAgIH0gPSBfcmVmO1xuICAgICAgY29uc3QgW3QsIGkxOG4sIHJlYWR5XSA9IHVzZVRyYW5zbGF0aW9uKG5zLCB7XG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIGtleVByZWZpeDogb3B0aW9ucy5rZXlQcmVmaXhcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcGFzc0Rvd25Qcm9wcyA9IHtcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgdCxcbiAgICAgICAgaTE4bixcbiAgICAgICAgdFJlYWR5OiByZWFkeVxuICAgICAgfTtcbiAgICAgIGlmIChvcHRpb25zLndpdGhSZWYgJiYgZm9yd2FyZGVkUmVmKSB7XG4gICAgICAgIHBhc3NEb3duUHJvcHMucmVmID0gZm9yd2FyZGVkUmVmO1xuICAgICAgfSBlbHNlIGlmICghb3B0aW9ucy53aXRoUmVmICYmIGZvcndhcmRlZFJlZikge1xuICAgICAgICBwYXNzRG93blByb3BzLmZvcndhcmRlZFJlZiA9IGZvcndhcmRlZFJlZjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KFdyYXBwZWRDb21wb25lbnQsIHBhc3NEb3duUHJvcHMpO1xuICAgIH1cbiAgICBJMThuZXh0V2l0aFRyYW5zbGF0aW9uLmRpc3BsYXlOYW1lID0gYHdpdGhJMThuZXh0VHJhbnNsYXRpb24oJHtnZXREaXNwbGF5TmFtZShXcmFwcGVkQ29tcG9uZW50KX0pYDtcbiAgICBJMThuZXh0V2l0aFRyYW5zbGF0aW9uLldyYXBwZWRDb21wb25lbnQgPSBXcmFwcGVkQ29tcG9uZW50O1xuICAgIGNvbnN0IGZvcndhcmRSZWYgPSAocHJvcHMsIHJlZikgPT4gY3JlYXRlRWxlbWVudChJMThuZXh0V2l0aFRyYW5zbGF0aW9uLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgZm9yd2FyZGVkUmVmOiByZWZcbiAgICB9KSk7XG4gICAgcmV0dXJuIG9wdGlvbnMud2l0aFJlZiA/IGZvcndhcmRSZWZSZWFjdChmb3J3YXJkUmVmKSA6IEkxOG5leHRXaXRoVHJhbnNsYXRpb247XG4gIH07XG59OyIsIi8qKlxuICogQGxpY2Vuc2UgUmVhY3RcbiAqIHJlYWN0LmRldmVsb3BtZW50LmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJlxuICAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyhtZXRob2ROYW1lLCBpbmZvKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29tcG9uZW50LnByb3RvdHlwZSwgbWV0aG9kTmFtZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBcIiVzKC4uLikgaXMgZGVwcmVjYXRlZCBpbiBwbGFpbiBKYXZhU2NyaXB0IFJlYWN0IGNsYXNzZXMuICVzXCIsXG4gICAgICAgICAgICBpbmZvWzBdLFxuICAgICAgICAgICAgaW5mb1sxXVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpIHtcbiAgICAgIGlmIChudWxsID09PSBtYXliZUl0ZXJhYmxlIHx8IFwib2JqZWN0XCIgIT09IHR5cGVvZiBtYXliZUl0ZXJhYmxlKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIG1heWJlSXRlcmFibGUgPVxuICAgICAgICAoTUFZQkVfSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbTUFZQkVfSVRFUkFUT1JfU1lNQk9MXSkgfHxcbiAgICAgICAgbWF5YmVJdGVyYWJsZVtcIkBAaXRlcmF0b3JcIl07XG4gICAgICByZXR1cm4gXCJmdW5jdGlvblwiID09PSB0eXBlb2YgbWF5YmVJdGVyYWJsZSA/IG1heWJlSXRlcmFibGUgOiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgY2FsbGVyTmFtZSkge1xuICAgICAgcHVibGljSW5zdGFuY2UgPVxuICAgICAgICAoKHB1YmxpY0luc3RhbmNlID0gcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IpICYmXG4gICAgICAgICAgKHB1YmxpY0luc3RhbmNlLmRpc3BsYXlOYW1lIHx8IHB1YmxpY0luc3RhbmNlLm5hbWUpKSB8fFxuICAgICAgICBcIlJlYWN0Q2xhc3NcIjtcbiAgICAgIHZhciB3YXJuaW5nS2V5ID0gcHVibGljSW5zdGFuY2UgKyBcIi5cIiArIGNhbGxlck5hbWU7XG4gICAgICBkaWRXYXJuU3RhdGVVcGRhdGVGb3JVbm1vdW50ZWRDb21wb25lbnRbd2FybmluZ0tleV0gfHxcbiAgICAgICAgKGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJDYW4ndCBjYWxsICVzIG9uIGEgY29tcG9uZW50IHRoYXQgaXMgbm90IHlldCBtb3VudGVkLiBUaGlzIGlzIGEgbm8tb3AsIGJ1dCBpdCBtaWdodCBpbmRpY2F0ZSBhIGJ1ZyBpbiB5b3VyIGFwcGxpY2F0aW9uLiBJbnN0ZWFkLCBhc3NpZ24gdG8gYHRoaXMuc3RhdGVgIGRpcmVjdGx5IG9yIGRlZmluZSBhIGBzdGF0ZSA9IHt9O2AgY2xhc3MgcHJvcGVydHkgd2l0aCB0aGUgZGVzaXJlZCBzdGF0ZSBpbiB0aGUgJXMgY29tcG9uZW50LlwiLFxuICAgICAgICAgIGNhbGxlck5hbWUsXG4gICAgICAgICAgcHVibGljSW5zdGFuY2VcbiAgICAgICAgKSxcbiAgICAgICAgKGRpZFdhcm5TdGF0ZVVwZGF0ZUZvclVubW91bnRlZENvbXBvbmVudFt3YXJuaW5nS2V5XSA9ICEwKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIENvbXBvbmVudChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgIHRoaXMucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ29tcG9uZW50RHVtbXkoKSB7fVxuICAgIGZ1bmN0aW9uIFB1cmVDb21wb25lbnQocHJvcHMsIGNvbnRleHQsIHVwZGF0ZXIpIHtcbiAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgICAgIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tLZXlTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICExO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSAhMDtcbiAgICAgIH1cbiAgICAgIGlmIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQpIHtcbiAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gY29uc29sZTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdC5lcnJvcjtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMCA9XG4gICAgICAgICAgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFN5bWJvbCAmJlxuICAgICAgICAgICAgU3ltYm9sLnRvU3RyaW5nVGFnICYmXG4gICAgICAgICAgICB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddKSB8fFxuICAgICAgICAgIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHxcbiAgICAgICAgICBcIk9iamVjdFwiO1xuICAgICAgICBKU0NvbXBpbGVyX3RlbXBfY29uc3QuY2FsbChcbiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQsXG4gICAgICAgICAgXCJUaGUgcHJvdmlkZWQga2V5IGlzIGFuIHVuc3VwcG9ydGVkIHR5cGUgJXMuIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLlwiLFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpIHtcbiAgICAgIGlmIChudWxsID09IHR5cGUpIHJldHVybiBudWxsO1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHR5cGUpXG4gICAgICAgIHJldHVybiB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9DTElFTlRfUkVGRVJFTkNFXG4gICAgICAgICAgPyBudWxsXG4gICAgICAgICAgOiB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBudWxsO1xuICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0eXBlKSByZXR1cm4gdHlwZTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFJFQUNUX0ZSQUdNRU5UX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiRnJhZ21lbnRcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlByb2ZpbGVyXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1RSSUNUX01PREVfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdHJpY3RNb2RlXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZVwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZUxpc3RcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9BQ1RJVklUWV9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIkFjdGl2aXR5XCI7XG4gICAgICB9XG4gICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHR5cGUpXG4gICAgICAgIHN3aXRjaCAoXG4gICAgICAgICAgKFwibnVtYmVyXCIgPT09IHR5cGVvZiB0eXBlLnRhZyAmJlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJSZWNlaXZlZCBhbiB1bmV4cGVjdGVkIG9iamVjdCBpbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoKS4gVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLlwiXG4gICAgICAgICAgICApLFxuICAgICAgICAgIHR5cGUuJCR0eXBlb2YpXG4gICAgICAgICkge1xuICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gXCJQb3J0YWxcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0NPTlRFWFRfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAodHlwZS5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIikgKyBcIi5Qcm92aWRlclwiO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OU1VNRVJfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAodHlwZS5fY29udGV4dC5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIikgKyBcIi5Db25zdW1lclwiO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRTpcbiAgICAgICAgICAgIHZhciBpbm5lclR5cGUgPSB0eXBlLnJlbmRlcjtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLmRpc3BsYXlOYW1lO1xuICAgICAgICAgICAgdHlwZSB8fFxuICAgICAgICAgICAgICAoKHR5cGUgPSBpbm5lclR5cGUuZGlzcGxheU5hbWUgfHwgaW5uZXJUeXBlLm5hbWUgfHwgXCJcIiksXG4gICAgICAgICAgICAgICh0eXBlID0gXCJcIiAhPT0gdHlwZSA/IFwiRm9yd2FyZFJlZihcIiArIHR5cGUgKyBcIilcIiA6IFwiRm9yd2FyZFJlZlwiKSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZTtcbiAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRTpcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIChpbm5lclR5cGUgPSB0eXBlLmRpc3BsYXlOYW1lIHx8IG51bGwpLFxuICAgICAgICAgICAgICBudWxsICE9PSBpbm5lclR5cGVcbiAgICAgICAgICAgICAgICA/IGlubmVyVHlwZVxuICAgICAgICAgICAgICAgIDogZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUudHlwZSkgfHwgXCJNZW1vXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgICAgICBpbm5lclR5cGUgPSB0eXBlLl9wYXlsb2FkO1xuICAgICAgICAgICAgdHlwZSA9IHR5cGUuX2luaXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUoaW5uZXJUeXBlKSk7XG4gICAgICAgICAgICB9IGNhdGNoICh4KSB7fVxuICAgICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VGFza05hbWUodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHJldHVybiBcIjw+XCI7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlICYmXG4gICAgICAgIG51bGwgIT09IHR5cGUgJiZcbiAgICAgICAgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFXG4gICAgICApXG4gICAgICAgIHJldHVybiBcIjwuLi4+XCI7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgcmV0dXJuIG5hbWUgPyBcIjxcIiArIG5hbWUgKyBcIj5cIiA6IFwiPC4uLj5cIjtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0T3duZXIoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkE7XG4gICAgICByZXR1cm4gbnVsbCA9PT0gZGlzcGF0Y2hlciA/IG51bGwgOiBkaXNwYXRjaGVyLmdldE93bmVyKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFVua25vd25Pd25lcigpIHtcbiAgICAgIHJldHVybiBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzVmFsaWRLZXkoY29uZmlnKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsIFwia2V5XCIpKSB7XG4gICAgICAgIHZhciBnZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbmZpZywgXCJrZXlcIikuZ2V0O1xuICAgICAgICBpZiAoZ2V0dGVyICYmIGdldHRlci5pc1JlYWN0V2FybmluZykgcmV0dXJuICExO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29uZmlnLmtleTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gICAgICBmdW5jdGlvbiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkoKSB7XG4gICAgICAgIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duIHx8XG4gICAgICAgICAgKChzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9ICEwKSxcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCIlczogYGtleWAgaXMgbm90IGEgcHJvcC4gVHJ5aW5nIHRvIGFjY2VzcyBpdCB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lIHZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgcHJvcC4gKGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvc3BlY2lhbC1wcm9wcylcIixcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lXG4gICAgICAgICAgKSk7XG4gICAgICB9XG4gICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSAhMDtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgXCJrZXlcIiwge1xuICAgICAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ0tleSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVsZW1lbnRSZWZHZXR0ZXJXaXRoRGVwcmVjYXRpb25XYXJuaW5nKCkge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodGhpcy50eXBlKTtcbiAgICAgIGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gfHxcbiAgICAgICAgKChkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdID0gITApLFxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiQWNjZXNzaW5nIGVsZW1lbnQucmVmIHdhcyByZW1vdmVkIGluIFJlYWN0IDE5LiByZWYgaXMgbm93IGEgcmVndWxhciBwcm9wLiBJdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgSlNYIEVsZW1lbnQgdHlwZSBpbiBhIGZ1dHVyZSByZWxlYXNlLlwiXG4gICAgICAgICkpO1xuICAgICAgY29tcG9uZW50TmFtZSA9IHRoaXMucHJvcHMucmVmO1xuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29tcG9uZW50TmFtZSA/IGNvbXBvbmVudE5hbWUgOiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBSZWFjdEVsZW1lbnQoXG4gICAgICB0eXBlLFxuICAgICAga2V5LFxuICAgICAgc2VsZixcbiAgICAgIHNvdXJjZSxcbiAgICAgIG93bmVyLFxuICAgICAgcHJvcHMsXG4gICAgICBkZWJ1Z1N0YWNrLFxuICAgICAgZGVidWdUYXNrXG4gICAgKSB7XG4gICAgICBzZWxmID0gcHJvcHMucmVmO1xuICAgICAgdHlwZSA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHByb3BzOiBwcm9wcyxcbiAgICAgICAgX293bmVyOiBvd25lclxuICAgICAgfTtcbiAgICAgIG51bGwgIT09ICh2b2lkIDAgIT09IHNlbGYgPyBzZWxmIDogbnVsbClcbiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJyZWZcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgICAgICBnZXQ6IGVsZW1lbnRSZWZHZXR0ZXJXaXRoRGVwcmVjYXRpb25XYXJuaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJyZWZcIiwgeyBlbnVtZXJhYmxlOiAhMSwgdmFsdWU6IG51bGwgfSk7XG4gICAgICB0eXBlLl9zdG9yZSA9IHt9O1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUuX3N0b3JlLCBcInZhbGlkYXRlZFwiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiAwXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z0luZm9cIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJfZGVidWdTdGFja1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBkZWJ1Z1N0YWNrXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z1Rhc2tcIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogZGVidWdUYXNrXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5mcmVlemUgJiYgKE9iamVjdC5mcmVlemUodHlwZS5wcm9wcyksIE9iamVjdC5mcmVlemUodHlwZSkpO1xuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsb25lQW5kUmVwbGFjZUtleShvbGRFbGVtZW50LCBuZXdLZXkpIHtcbiAgICAgIG5ld0tleSA9IFJlYWN0RWxlbWVudChcbiAgICAgICAgb2xkRWxlbWVudC50eXBlLFxuICAgICAgICBuZXdLZXksXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBvbGRFbGVtZW50Ll9vd25lcixcbiAgICAgICAgb2xkRWxlbWVudC5wcm9wcyxcbiAgICAgICAgb2xkRWxlbWVudC5fZGVidWdTdGFjayxcbiAgICAgICAgb2xkRWxlbWVudC5fZGVidWdUYXNrXG4gICAgICApO1xuICAgICAgb2xkRWxlbWVudC5fc3RvcmUgJiZcbiAgICAgICAgKG5ld0tleS5fc3RvcmUudmFsaWRhdGVkID0gb2xkRWxlbWVudC5fc3RvcmUudmFsaWRhdGVkKTtcbiAgICAgIHJldHVybiBuZXdLZXk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50KG9iamVjdCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIG9iamVjdCAmJlxuICAgICAgICBudWxsICE9PSBvYmplY3QgJiZcbiAgICAgICAgb2JqZWN0LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEVcbiAgICAgICk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVzY2FwZShrZXkpIHtcbiAgICAgIHZhciBlc2NhcGVyTG9va3VwID0geyBcIj1cIjogXCI9MFwiLCBcIjpcIjogXCI9MlwiIH07XG4gICAgICByZXR1cm4gKFxuICAgICAgICBcIiRcIiArXG4gICAgICAgIGtleS5yZXBsYWNlKC9bPTpdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgIHJldHVybiBlc2NhcGVyTG9va3VwW21hdGNoXTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRLZXkoZWxlbWVudCwgaW5kZXgpIHtcbiAgICAgIHJldHVybiBcIm9iamVjdFwiID09PSB0eXBlb2YgZWxlbWVudCAmJlxuICAgICAgICBudWxsICE9PSBlbGVtZW50ICYmXG4gICAgICAgIG51bGwgIT0gZWxlbWVudC5rZXlcbiAgICAgICAgPyAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihlbGVtZW50LmtleSksIGVzY2FwZShcIlwiICsgZWxlbWVudC5rZXkpKVxuICAgICAgICA6IGluZGV4LnRvU3RyaW5nKDM2KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbm9vcCQxKCkge31cbiAgICBmdW5jdGlvbiByZXNvbHZlVGhlbmFibGUodGhlbmFibGUpIHtcbiAgICAgIHN3aXRjaCAodGhlbmFibGUuc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgXCJmdWxmaWxsZWRcIjpcbiAgICAgICAgICByZXR1cm4gdGhlbmFibGUudmFsdWU7XG4gICAgICAgIGNhc2UgXCJyZWplY3RlZFwiOlxuICAgICAgICAgIHRocm93IHRoZW5hYmxlLnJlYXNvbjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBzd2l0Y2ggKFxuICAgICAgICAgICAgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0aGVuYWJsZS5zdGF0dXNcbiAgICAgICAgICAgICAgPyB0aGVuYWJsZS50aGVuKG5vb3AkMSwgbm9vcCQxKVxuICAgICAgICAgICAgICA6ICgodGhlbmFibGUuc3RhdHVzID0gXCJwZW5kaW5nXCIpLFxuICAgICAgICAgICAgICAgIHRoZW5hYmxlLnRoZW4oXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZnVsZmlsbGVkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgXCJwZW5kaW5nXCIgPT09IHRoZW5hYmxlLnN0YXR1cyAmJlxuICAgICAgICAgICAgICAgICAgICAgICgodGhlbmFibGUuc3RhdHVzID0gXCJmdWxmaWxsZWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgKHRoZW5hYmxlLnZhbHVlID0gZnVsZmlsbGVkVmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgXCJwZW5kaW5nXCIgPT09IHRoZW5hYmxlLnN0YXR1cyAmJlxuICAgICAgICAgICAgICAgICAgICAgICgodGhlbmFibGUuc3RhdHVzID0gXCJyZWplY3RlZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAodGhlbmFibGUucmVhc29uID0gZXJyb3IpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApKSxcbiAgICAgICAgICAgIHRoZW5hYmxlLnN0YXR1cylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNhc2UgXCJmdWxmaWxsZWRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIHRoZW5hYmxlLnZhbHVlO1xuICAgICAgICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgICAgICAgIHRocm93IHRoZW5hYmxlLnJlYXNvbjtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyB0aGVuYWJsZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFwSW50b0FycmF5KGNoaWxkcmVuLCBhcnJheSwgZXNjYXBlZFByZWZpeCwgbmFtZVNvRmFyLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgY2hpbGRyZW47XG4gICAgICBpZiAoXCJ1bmRlZmluZWRcIiA9PT0gdHlwZSB8fCBcImJvb2xlYW5cIiA9PT0gdHlwZSkgY2hpbGRyZW4gPSBudWxsO1xuICAgICAgdmFyIGludm9rZUNhbGxiYWNrID0gITE7XG4gICAgICBpZiAobnVsbCA9PT0gY2hpbGRyZW4pIGludm9rZUNhbGxiYWNrID0gITA7XG4gICAgICBlbHNlXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2sgPSAhMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIHN3aXRjaCAoY2hpbGRyZW4uJCR0eXBlb2YpIHtcbiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9FTEVNRU5UX1RZUEU6XG4gICAgICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6XG4gICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2sgPSAhMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIChpbnZva2VDYWxsYmFjayA9IGNoaWxkcmVuLl9pbml0KSxcbiAgICAgICAgICAgICAgICAgIG1hcEludG9BcnJheShcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2soY2hpbGRyZW4uX3BheWxvYWQpLFxuICAgICAgICAgICAgICAgICAgICBhcnJheSxcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlZFByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZVNvRmFyLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGlmIChpbnZva2VDYWxsYmFjaykge1xuICAgICAgICBpbnZva2VDYWxsYmFjayA9IGNoaWxkcmVuO1xuICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrKGludm9rZUNhbGxiYWNrKTtcbiAgICAgICAgdmFyIGNoaWxkS2V5ID1cbiAgICAgICAgICBcIlwiID09PSBuYW1lU29GYXIgPyBcIi5cIiArIGdldEVsZW1lbnRLZXkoaW52b2tlQ2FsbGJhY2ssIDApIDogbmFtZVNvRmFyO1xuICAgICAgICBpc0FycmF5SW1wbChjYWxsYmFjaylcbiAgICAgICAgICA/ICgoZXNjYXBlZFByZWZpeCA9IFwiXCIpLFxuICAgICAgICAgICAgbnVsbCAhPSBjaGlsZEtleSAmJlxuICAgICAgICAgICAgICAoZXNjYXBlZFByZWZpeCA9XG4gICAgICAgICAgICAgICAgY2hpbGRLZXkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgXCIkJi9cIikgKyBcIi9cIiksXG4gICAgICAgICAgICBtYXBJbnRvQXJyYXkoY2FsbGJhY2ssIGFycmF5LCBlc2NhcGVkUHJlZml4LCBcIlwiLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIDogbnVsbCAhPSBjYWxsYmFjayAmJlxuICAgICAgICAgICAgKGlzVmFsaWRFbGVtZW50KGNhbGxiYWNrKSAmJlxuICAgICAgICAgICAgICAobnVsbCAhPSBjYWxsYmFjay5rZXkgJiZcbiAgICAgICAgICAgICAgICAoKGludm9rZUNhbGxiYWNrICYmIGludm9rZUNhbGxiYWNrLmtleSA9PT0gY2FsbGJhY2sua2V5KSB8fFxuICAgICAgICAgICAgICAgICAgY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjYWxsYmFjay5rZXkpKSxcbiAgICAgICAgICAgICAgKGVzY2FwZWRQcmVmaXggPSBjbG9uZUFuZFJlcGxhY2VLZXkoXG4gICAgICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgZXNjYXBlZFByZWZpeCArXG4gICAgICAgICAgICAgICAgICAobnVsbCA9PSBjYWxsYmFjay5rZXkgfHxcbiAgICAgICAgICAgICAgICAgIChpbnZva2VDYWxsYmFjayAmJiBpbnZva2VDYWxsYmFjay5rZXkgPT09IGNhbGxiYWNrLmtleSlcbiAgICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICAgIDogKFwiXCIgKyBjYWxsYmFjay5rZXkpLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJCYvXCJcbiAgICAgICAgICAgICAgICAgICAgICApICsgXCIvXCIpICtcbiAgICAgICAgICAgICAgICAgIGNoaWxkS2V5XG4gICAgICAgICAgICAgICkpLFxuICAgICAgICAgICAgICBcIlwiICE9PSBuYW1lU29GYXIgJiZcbiAgICAgICAgICAgICAgICBudWxsICE9IGludm9rZUNhbGxiYWNrICYmXG4gICAgICAgICAgICAgICAgaXNWYWxpZEVsZW1lbnQoaW52b2tlQ2FsbGJhY2spICYmXG4gICAgICAgICAgICAgICAgbnVsbCA9PSBpbnZva2VDYWxsYmFjay5rZXkgJiZcbiAgICAgICAgICAgICAgICBpbnZva2VDYWxsYmFjay5fc3RvcmUgJiZcbiAgICAgICAgICAgICAgICAhaW52b2tlQ2FsbGJhY2suX3N0b3JlLnZhbGlkYXRlZCAmJlxuICAgICAgICAgICAgICAgIChlc2NhcGVkUHJlZml4Ll9zdG9yZS52YWxpZGF0ZWQgPSAyKSxcbiAgICAgICAgICAgICAgKGNhbGxiYWNrID0gZXNjYXBlZFByZWZpeCkpLFxuICAgICAgICAgICAgYXJyYXkucHVzaChjYWxsYmFjaykpO1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGludm9rZUNhbGxiYWNrID0gMDtcbiAgICAgIGNoaWxkS2V5ID0gXCJcIiA9PT0gbmFtZVNvRmFyID8gXCIuXCIgOiBuYW1lU29GYXIgKyBcIjpcIjtcbiAgICAgIGlmIChpc0FycmF5SW1wbChjaGlsZHJlbikpXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspXG4gICAgICAgICAgKG5hbWVTb0ZhciA9IGNoaWxkcmVuW2ldKSxcbiAgICAgICAgICAgICh0eXBlID0gY2hpbGRLZXkgKyBnZXRFbGVtZW50S2V5KG5hbWVTb0ZhciwgaSkpLFxuICAgICAgICAgICAgKGludm9rZUNhbGxiYWNrICs9IG1hcEludG9BcnJheShcbiAgICAgICAgICAgICAgbmFtZVNvRmFyLFxuICAgICAgICAgICAgICBhcnJheSxcbiAgICAgICAgICAgICAgZXNjYXBlZFByZWZpeCxcbiAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICAgICkpO1xuICAgICAgZWxzZSBpZiAoKChpID0gZ2V0SXRlcmF0b3JGbihjaGlsZHJlbikpLCBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBpKSlcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBpID09PSBjaGlsZHJlbi5lbnRyaWVzICYmXG4gICAgICAgICAgICAoZGlkV2FybkFib3V0TWFwcyB8fFxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgXCJVc2luZyBNYXBzIGFzIGNoaWxkcmVuIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSBhbiBhcnJheSBvZiBrZXllZCBSZWFjdEVsZW1lbnRzIGluc3RlYWQuXCJcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIChkaWRXYXJuQWJvdXRNYXBzID0gITApKSxcbiAgICAgICAgICAgIGNoaWxkcmVuID0gaS5jYWxsKGNoaWxkcmVuKSxcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICEobmFtZVNvRmFyID0gY2hpbGRyZW4ubmV4dCgpKS5kb25lO1xuXG4gICAgICAgIClcbiAgICAgICAgICAobmFtZVNvRmFyID0gbmFtZVNvRmFyLnZhbHVlKSxcbiAgICAgICAgICAgICh0eXBlID0gY2hpbGRLZXkgKyBnZXRFbGVtZW50S2V5KG5hbWVTb0ZhciwgaSsrKSksXG4gICAgICAgICAgICAoaW52b2tlQ2FsbGJhY2sgKz0gbWFwSW50b0FycmF5KFxuICAgICAgICAgICAgICBuYW1lU29GYXIsXG4gICAgICAgICAgICAgIGFycmF5LFxuICAgICAgICAgICAgICBlc2NhcGVkUHJlZml4LFxuICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICAgICAgKSk7XG4gICAgICBlbHNlIGlmIChcIm9iamVjdFwiID09PSB0eXBlKSB7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBjaGlsZHJlbi50aGVuKVxuICAgICAgICAgIHJldHVybiBtYXBJbnRvQXJyYXkoXG4gICAgICAgICAgICByZXNvbHZlVGhlbmFibGUoY2hpbGRyZW4pLFxuICAgICAgICAgICAgYXJyYXksXG4gICAgICAgICAgICBlc2NhcGVkUHJlZml4LFxuICAgICAgICAgICAgbmFtZVNvRmFyLFxuICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICApO1xuICAgICAgICBhcnJheSA9IFN0cmluZyhjaGlsZHJlbik7XG4gICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgIFwiT2JqZWN0cyBhcmUgbm90IHZhbGlkIGFzIGEgUmVhY3QgY2hpbGQgKGZvdW5kOiBcIiArXG4gICAgICAgICAgICAoXCJbb2JqZWN0IE9iamVjdF1cIiA9PT0gYXJyYXlcbiAgICAgICAgICAgICAgPyBcIm9iamVjdCB3aXRoIGtleXMge1wiICsgT2JqZWN0LmtleXMoY2hpbGRyZW4pLmpvaW4oXCIsIFwiKSArIFwifVwiXG4gICAgICAgICAgICAgIDogYXJyYXkpICtcbiAgICAgICAgICAgIFwiKS4gSWYgeW91IG1lYW50IHRvIHJlbmRlciBhIGNvbGxlY3Rpb24gb2YgY2hpbGRyZW4sIHVzZSBhbiBhcnJheSBpbnN0ZWFkLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2s7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jLCBjb250ZXh0KSB7XG4gICAgICBpZiAobnVsbCA9PSBjaGlsZHJlbikgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgICBjb3VudCA9IDA7XG4gICAgICBtYXBJbnRvQXJyYXkoY2hpbGRyZW4sIHJlc3VsdCwgXCJcIiwgXCJcIiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgY2hpbGQsIGNvdW50KyspO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBsYXp5SW5pdGlhbGl6ZXIocGF5bG9hZCkge1xuICAgICAgaWYgKC0xID09PSBwYXlsb2FkLl9zdGF0dXMpIHtcbiAgICAgICAgdmFyIGN0b3IgPSBwYXlsb2FkLl9yZXN1bHQ7XG4gICAgICAgIGN0b3IgPSBjdG9yKCk7XG4gICAgICAgIGN0b3IudGhlbihcbiAgICAgICAgICBmdW5jdGlvbiAobW9kdWxlT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcGF5bG9hZC5fc3RhdHVzIHx8IC0xID09PSBwYXlsb2FkLl9zdGF0dXMpXG4gICAgICAgICAgICAgIChwYXlsb2FkLl9zdGF0dXMgPSAxKSwgKHBheWxvYWQuX3Jlc3VsdCA9IG1vZHVsZU9iamVjdCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICgwID09PSBwYXlsb2FkLl9zdGF0dXMgfHwgLTEgPT09IHBheWxvYWQuX3N0YXR1cylcbiAgICAgICAgICAgICAgKHBheWxvYWQuX3N0YXR1cyA9IDIpLCAocGF5bG9hZC5fcmVzdWx0ID0gZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgLTEgPT09IHBheWxvYWQuX3N0YXR1cyAmJlxuICAgICAgICAgICgocGF5bG9hZC5fc3RhdHVzID0gMCksIChwYXlsb2FkLl9yZXN1bHQgPSBjdG9yKSk7XG4gICAgICB9XG4gICAgICBpZiAoMSA9PT0gcGF5bG9hZC5fc3RhdHVzKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIChjdG9yID0gcGF5bG9hZC5fcmVzdWx0KSxcbiAgICAgICAgICB2b2lkIDAgPT09IGN0b3IgJiZcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwibGF6eTogRXhwZWN0ZWQgdGhlIHJlc3VsdCBvZiBhIGR5bmFtaWMgaW1wb3J0KCkgY2FsbC4gSW5zdGVhZCByZWNlaXZlZDogJXNcXG5cXG5Zb3VyIGNvZGUgc2hvdWxkIGxvb2sgbGlrZTogXFxuICBjb25zdCBNeUNvbXBvbmVudCA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL015Q29tcG9uZW50JykpXFxuXFxuRGlkIHlvdSBhY2NpZGVudGFsbHkgcHV0IGN1cmx5IGJyYWNlcyBhcm91bmQgdGhlIGltcG9ydD9cIixcbiAgICAgICAgICAgICAgY3RvclxuICAgICAgICAgICAgKSxcbiAgICAgICAgICBcImRlZmF1bHRcIiBpbiBjdG9yIHx8XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcImxhenk6IEV4cGVjdGVkIHRoZSByZXN1bHQgb2YgYSBkeW5hbWljIGltcG9ydCgpIGNhbGwuIEluc3RlYWQgcmVjZWl2ZWQ6ICVzXFxuXFxuWW91ciBjb2RlIHNob3VsZCBsb29rIGxpa2U6IFxcbiAgY29uc3QgTXlDb21wb25lbnQgPSBsYXp5KCgpID0+IGltcG9ydCgnLi9NeUNvbXBvbmVudCcpKVwiLFxuICAgICAgICAgICAgICBjdG9yXG4gICAgICAgICAgICApLFxuICAgICAgICAgIGN0b3IuZGVmYXVsdFxuICAgICAgICApO1xuICAgICAgdGhyb3cgcGF5bG9hZC5fcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiByZXNvbHZlRGlzcGF0Y2hlcigpIHtcbiAgICAgIHZhciBkaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDtcbiAgICAgIG51bGwgPT09IGRpc3BhdGNoZXIgJiZcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIkludmFsaWQgaG9vayBjYWxsLiBIb29rcyBjYW4gb25seSBiZSBjYWxsZWQgaW5zaWRlIG9mIHRoZSBib2R5IG9mIGEgZnVuY3Rpb24gY29tcG9uZW50LiBUaGlzIGNvdWxkIGhhcHBlbiBmb3Igb25lIG9mIHRoZSBmb2xsb3dpbmcgcmVhc29uczpcXG4xLiBZb3UgbWlnaHQgaGF2ZSBtaXNtYXRjaGluZyB2ZXJzaW9ucyBvZiBSZWFjdCBhbmQgdGhlIHJlbmRlcmVyIChzdWNoIGFzIFJlYWN0IERPTSlcXG4yLiBZb3UgbWlnaHQgYmUgYnJlYWtpbmcgdGhlIFJ1bGVzIG9mIEhvb2tzXFxuMy4gWW91IG1pZ2h0IGhhdmUgbW9yZSB0aGFuIG9uZSBjb3B5IG9mIFJlYWN0IGluIHRoZSBzYW1lIGFwcFxcblNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL2ludmFsaWQtaG9vay1jYWxsIGZvciB0aXBzIGFib3V0IGhvdyB0byBkZWJ1ZyBhbmQgZml4IHRoaXMgcHJvYmxlbS5cIlxuICAgICAgICApO1xuICAgICAgcmV0dXJuIGRpc3BhdGNoZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5vb3AoKSB7fVxuICAgIGZ1bmN0aW9uIGVucXVldWVUYXNrKHRhc2spIHtcbiAgICAgIGlmIChudWxsID09PSBlbnF1ZXVlVGFza0ltcGwpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHJlcXVpcmVTdHJpbmcgPSAoXCJyZXF1aXJlXCIgKyBNYXRoLnJhbmRvbSgpKS5zbGljZSgwLCA3KTtcbiAgICAgICAgICBlbnF1ZXVlVGFza0ltcGwgPSAobW9kdWxlICYmIG1vZHVsZVtyZXF1aXJlU3RyaW5nXSkuY2FsbChcbiAgICAgICAgICAgIG1vZHVsZSxcbiAgICAgICAgICAgIFwidGltZXJzXCJcbiAgICAgICAgICApLnNldEltbWVkaWF0ZTtcbiAgICAgICAgfSBjYXRjaCAoX2Vycikge1xuICAgICAgICAgIGVucXVldWVUYXNrSW1wbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgITEgPT09IGRpZFdhcm5BYm91dE1lc3NhZ2VDaGFubmVsICYmXG4gICAgICAgICAgICAgICgoZGlkV2FybkFib3V0TWVzc2FnZUNoYW5uZWwgPSAhMCksXG4gICAgICAgICAgICAgIFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAmJlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICBcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBoYXZlIGEgTWVzc2FnZUNoYW5uZWwgaW1wbGVtZW50YXRpb24sIHNvIGVucXVldWluZyB0YXNrcyB2aWEgYXdhaXQgYWN0KGFzeW5jICgpID0+IC4uLikgd2lsbCBmYWlsLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZSBhdCBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzIGlmIHlvdSBlbmNvdW50ZXIgdGhpcyB3YXJuaW5nLlwiXG4gICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBjYWxsYmFjaztcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2Uodm9pZCAwKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICByZXR1cm4gZW5xdWV1ZVRhc2tJbXBsKHRhc2spO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZ2dyZWdhdGVFcnJvcnMoZXJyb3JzKSB7XG4gICAgICByZXR1cm4gMSA8IGVycm9ycy5sZW5ndGggJiYgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgQWdncmVnYXRlRXJyb3JcbiAgICAgICAgPyBuZXcgQWdncmVnYXRlRXJyb3IoZXJyb3JzKVxuICAgICAgICA6IGVycm9yc1swXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCkge1xuICAgICAgcHJldkFjdFNjb3BlRGVwdGggIT09IGFjdFNjb3BlRGVwdGggLSAxICYmXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJZb3Ugc2VlbSB0byBoYXZlIG92ZXJsYXBwaW5nIGFjdCgpIGNhbGxzLCB0aGlzIGlzIG5vdCBzdXBwb3J0ZWQuIEJlIHN1cmUgdG8gYXdhaXQgcHJldmlvdXMgYWN0KCkgY2FsbHMgYmVmb3JlIG1ha2luZyBhIG5ldyBvbmUuIFwiXG4gICAgICAgICk7XG4gICAgICBhY3RTY29wZURlcHRoID0gcHJldkFjdFNjb3BlRGVwdGg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5Rmx1c2hBc3luY0FjdFdvcmsocmV0dXJuVmFsdWUsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHF1ZXVlID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWU7XG4gICAgICBpZiAobnVsbCAhPT0gcXVldWUpXG4gICAgICAgIGlmICgwICE9PSBxdWV1ZS5sZW5ndGgpXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZsdXNoQWN0UXVldWUocXVldWUpO1xuICAgICAgICAgICAgZW5xdWV1ZVRhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yayhyZXR1cm5WYWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlIFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID0gbnVsbDtcbiAgICAgIDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoXG4gICAgICAgID8gKChxdWV1ZSA9IGFnZ3JlZ2F0ZUVycm9ycyhSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMpKSxcbiAgICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDApLFxuICAgICAgICAgIHJlamVjdChxdWV1ZSkpXG4gICAgICAgIDogcmVzb2x2ZShyZXR1cm5WYWx1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZsdXNoQWN0UXVldWUocXVldWUpIHtcbiAgICAgIGlmICghaXNGbHVzaGluZykge1xuICAgICAgICBpc0ZsdXNoaW5nID0gITA7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuZGlkVXNlUHJvbWlzZSA9ICExO1xuICAgICAgICAgICAgICB2YXIgY29udGludWF0aW9uID0gY2FsbGJhY2soITEpO1xuICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gY29udGludWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmRpZFVzZVByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgIHF1ZXVlW2ldID0gY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICBxdWV1ZS5zcGxpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gY29udGludWF0aW9uO1xuICAgICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgICAgICB9IHdoaWxlICgxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBxdWV1ZS5zcGxpY2UoMCwgaSArIDEpLCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaXNGbHVzaGluZyA9ICExO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiZcbiAgICAgIFwiZnVuY3Rpb25cIiA9PT1cbiAgICAgICAgdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQgJiZcbiAgICAgIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQoRXJyb3IoKSk7XG4gICAgdmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC50cmFuc2l0aW9uYWwuZWxlbWVudFwiKSxcbiAgICAgIFJFQUNUX1BPUlRBTF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnBvcnRhbFwiKSxcbiAgICAgIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuZnJhZ21lbnRcIiksXG4gICAgICBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN0cmljdF9tb2RlXCIpLFxuICAgICAgUkVBQ1RfUFJPRklMRVJfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5wcm9maWxlclwiKTtcbiAgICBTeW1ib2wuZm9yKFwicmVhY3QucHJvdmlkZXJcIik7XG4gICAgdmFyIFJFQUNUX0NPTlNVTUVSX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuY29uc3VtZXJcIiksXG4gICAgICBSRUFDVF9DT05URVhUX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuY29udGV4dFwiKSxcbiAgICAgIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuZm9yd2FyZF9yZWZcIiksXG4gICAgICBSRUFDVF9TVVNQRU5TRV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlXCIpLFxuICAgICAgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlX2xpc3RcIiksXG4gICAgICBSRUFDVF9NRU1PX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb1wiKSxcbiAgICAgIFJFQUNUX0xBWllfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5sYXp5XCIpLFxuICAgICAgUkVBQ1RfQUNUSVZJVFlfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5hY3Rpdml0eVwiKSxcbiAgICAgIE1BWUJFX0lURVJBVE9SX1NZTUJPTCA9IFN5bWJvbC5pdGVyYXRvcixcbiAgICAgIGRpZFdhcm5TdGF0ZVVwZGF0ZUZvclVubW91bnRlZENvbXBvbmVudCA9IHt9LFxuICAgICAgUmVhY3ROb29wVXBkYXRlUXVldWUgPSB7XG4gICAgICAgIGlzTW91bnRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICAgICAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgXCJmb3JjZVVwZGF0ZVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgICAgICAgd2Fybk5vb3AocHVibGljSW5zdGFuY2UsIFwicmVwbGFjZVN0YXRlXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgICAgICAgIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCBcInNldFN0YXRlXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXNzaWduID0gT2JqZWN0LmFzc2lnbixcbiAgICAgIGVtcHR5T2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmZyZWV6ZShlbXB0eU9iamVjdCk7XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge307XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWFsU3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgIT09IHR5cGVvZiBwYXJ0aWFsU3RhdGUgJiZcbiAgICAgICAgXCJmdW5jdGlvblwiICE9PSB0eXBlb2YgcGFydGlhbFN0YXRlICYmXG4gICAgICAgIG51bGwgIT0gcGFydGlhbFN0YXRlXG4gICAgICApXG4gICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgIFwidGFrZXMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcyB0byB1cGRhdGUgb3IgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMuXCJcbiAgICAgICAgKTtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcywgcGFydGlhbFN0YXRlLCBjYWxsYmFjaywgXCJzZXRTdGF0ZVwiKTtcbiAgICB9O1xuICAgIENvbXBvbmVudC5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcywgY2FsbGJhY2ssIFwiZm9yY2VVcGRhdGVcIik7XG4gICAgfTtcbiAgICB2YXIgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgICAgIGlzTW91bnRlZDogW1xuICAgICAgICAgIFwiaXNNb3VudGVkXCIsXG4gICAgICAgICAgXCJJbnN0ZWFkLCBtYWtlIHN1cmUgdG8gY2xlYW4gdXAgc3Vic2NyaXB0aW9ucyBhbmQgcGVuZGluZyByZXF1ZXN0cyBpbiBjb21wb25lbnRXaWxsVW5tb3VudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy5cIlxuICAgICAgICBdLFxuICAgICAgICByZXBsYWNlU3RhdGU6IFtcbiAgICAgICAgICBcInJlcGxhY2VTdGF0ZVwiLFxuICAgICAgICAgIFwiUmVmYWN0b3IgeW91ciBjb2RlIHRvIHVzZSBzZXRTdGF0ZSBpbnN0ZWFkIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8zMjM2KS5cIlxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgZm5OYW1lO1xuICAgIGZvciAoZm5OYW1lIGluIGRlcHJlY2F0ZWRBUElzKVxuICAgICAgZGVwcmVjYXRlZEFQSXMuaGFzT3duUHJvcGVydHkoZm5OYW1lKSAmJlxuICAgICAgICBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcoZm5OYW1lLCBkZXByZWNhdGVkQVBJc1tmbk5hbWVdKTtcbiAgICBDb21wb25lbnREdW1teS5wcm90b3R5cGUgPSBDb21wb25lbnQucHJvdG90eXBlO1xuICAgIGRlcHJlY2F0ZWRBUElzID0gUHVyZUNvbXBvbmVudC5wcm90b3R5cGUgPSBuZXcgQ29tcG9uZW50RHVtbXkoKTtcbiAgICBkZXByZWNhdGVkQVBJcy5jb25zdHJ1Y3RvciA9IFB1cmVDb21wb25lbnQ7XG4gICAgYXNzaWduKGRlcHJlY2F0ZWRBUElzLCBDb21wb25lbnQucHJvdG90eXBlKTtcbiAgICBkZXByZWNhdGVkQVBJcy5pc1B1cmVSZWFjdENvbXBvbmVudCA9ICEwO1xuICAgIHZhciBpc0FycmF5SW1wbCA9IEFycmF5LmlzQXJyYXksXG4gICAgICBSRUFDVF9DTElFTlRfUkVGRVJFTkNFID0gU3ltYm9sLmZvcihcInJlYWN0LmNsaWVudC5yZWZlcmVuY2VcIiksXG4gICAgICBSZWFjdFNoYXJlZEludGVybmFscyA9IHtcbiAgICAgICAgSDogbnVsbCxcbiAgICAgICAgQTogbnVsbCxcbiAgICAgICAgVDogbnVsbCxcbiAgICAgICAgUzogbnVsbCxcbiAgICAgICAgVjogbnVsbCxcbiAgICAgICAgYWN0UXVldWU6IG51bGwsXG4gICAgICAgIGlzQmF0Y2hpbmdMZWdhY3k6ICExLFxuICAgICAgICBkaWRTY2hlZHVsZUxlZ2FjeVVwZGF0ZTogITEsXG4gICAgICAgIGRpZFVzZVByb21pc2U6ICExLFxuICAgICAgICB0aHJvd25FcnJvcnM6IFtdLFxuICAgICAgICBnZXRDdXJyZW50U3RhY2s6IG51bGwsXG4gICAgICAgIHJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzOiAwXG4gICAgICB9LFxuICAgICAgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgY3JlYXRlVGFzayA9IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA/IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH07XG4gICAgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgICByZWFjdF9zdGFja19ib3R0b21fZnJhbWU6IGZ1bmN0aW9uIChjYWxsU3RhY2tGb3JFcnJvcikge1xuICAgICAgICByZXR1cm4gY2FsbFN0YWNrRm9yRXJyb3IoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biwgZGlkV2FybkFib3V0T2xkSlNYUnVudGltZTtcbiAgICB2YXIgZGlkV2FybkFib3V0RWxlbWVudFJlZiA9IHt9O1xuICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1N0YWNrID0gZGVwcmVjYXRlZEFQSXMucmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lLmJpbmQoXG4gICAgICBkZXByZWNhdGVkQVBJcyxcbiAgICAgIFVua25vd25Pd25lclxuICAgICkoKTtcbiAgICB2YXIgdW5rbm93bk93bmVyRGVidWdUYXNrID0gY3JlYXRlVGFzayhnZXRUYXNrTmFtZShVbmtub3duT3duZXIpKTtcbiAgICB2YXIgZGlkV2FybkFib3V0TWFwcyA9ICExLFxuICAgICAgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvXFwvKy9nLFxuICAgICAgcmVwb3J0R2xvYmFsRXJyb3IgPVxuICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiByZXBvcnRFcnJvclxuICAgICAgICAgID8gcmVwb3J0RXJyb3JcbiAgICAgICAgICA6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHdpbmRvdyAmJlxuICAgICAgICAgICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHdpbmRvdy5FcnJvckV2ZW50XG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyB3aW5kb3cuRXJyb3JFdmVudChcImVycm9yXCIsIHtcbiAgICAgICAgICAgICAgICAgIGJ1YmJsZXM6ICEwLFxuICAgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogITAsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgICAgICAgICBcIm9iamVjdFwiID09PSB0eXBlb2YgZXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gZXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICA/IFN0cmluZyhlcnJvci5tZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpKSByZXR1cm47XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHByb2Nlc3MgJiZcbiAgICAgICAgICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBwcm9jZXNzLmVtaXRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbWl0KFwidW5jYXVnaHRFeGNlcHRpb25cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICBkaWRXYXJuQWJvdXRNZXNzYWdlQ2hhbm5lbCA9ICExLFxuICAgICAgZW5xdWV1ZVRhc2tJbXBsID0gbnVsbCxcbiAgICAgIGFjdFNjb3BlRGVwdGggPSAwLFxuICAgICAgZGlkV2Fybk5vQXdhaXRBY3QgPSAhMSxcbiAgICAgIGlzRmx1c2hpbmcgPSAhMSxcbiAgICAgIHF1ZXVlU2V2ZXJhbE1pY3JvdGFza3MgPVxuICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBxdWV1ZU1pY3JvdGFza1xuICAgICAgICAgID8gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVldWVNaWNyb3Rhc2soY2FsbGJhY2spO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IGVucXVldWVUYXNrO1xuICAgIGRlcHJlY2F0ZWRBUElzID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICBfX3Byb3RvX186IG51bGwsXG4gICAgICBjOiBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VNZW1vQ2FjaGUoc2l6ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZXhwb3J0cy5DaGlsZHJlbiA9IHtcbiAgICAgIG1hcDogbWFwQ2hpbGRyZW4sXG4gICAgICBmb3JFYWNoOiBmdW5jdGlvbiAoY2hpbGRyZW4sIGZvckVhY2hGdW5jLCBmb3JFYWNoQ29udGV4dCkge1xuICAgICAgICBtYXBDaGlsZHJlbihcbiAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3JFYWNoRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9yRWFjaENvbnRleHRcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBjb3VudDogZnVuY3Rpb24gKGNoaWxkcmVuKSB7XG4gICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBuKys7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbjtcbiAgICAgIH0sXG4gICAgICB0b0FycmF5OiBmdW5jdGlvbiAoY2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBtYXBDaGlsZHJlbihjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgfSkgfHwgW11cbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBvbmx5OiBmdW5jdGlvbiAoY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKCFpc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpXG4gICAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgICBcIlJlYWN0LkNoaWxkcmVuLm9ubHkgZXhwZWN0ZWQgdG8gcmVjZWl2ZSBhIHNpbmdsZSBSZWFjdCBlbGVtZW50IGNoaWxkLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgfVxuICAgIH07XG4gICAgZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgZXhwb3J0cy5GcmFnbWVudCA9IFJFQUNUX0ZSQUdNRU5UX1RZUEU7XG4gICAgZXhwb3J0cy5Qcm9maWxlciA9IFJFQUNUX1BST0ZJTEVSX1RZUEU7XG4gICAgZXhwb3J0cy5QdXJlQ29tcG9uZW50ID0gUHVyZUNvbXBvbmVudDtcbiAgICBleHBvcnRzLlN0cmljdE1vZGUgPSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFO1xuICAgIGV4cG9ydHMuU3VzcGVuc2UgPSBSRUFDVF9TVVNQRU5TRV9UWVBFO1xuICAgIGV4cG9ydHMuX19DTElFTlRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfV0FSTl9VU0VSU19USEVZX0NBTk5PVF9VUEdSQURFID1cbiAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzO1xuICAgIGV4cG9ydHMuX19DT01QSUxFUl9SVU5USU1FID0gZGVwcmVjYXRlZEFQSXM7XG4gICAgZXhwb3J0cy5hY3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBwcmV2QWN0UXVldWUgPSBSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZSxcbiAgICAgICAgcHJldkFjdFNjb3BlRGVwdGggPSBhY3RTY29wZURlcHRoO1xuICAgICAgYWN0U2NvcGVEZXB0aCsrO1xuICAgICAgdmFyIHF1ZXVlID0gKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID1cbiAgICAgICAgICBudWxsICE9PSBwcmV2QWN0UXVldWUgPyBwcmV2QWN0UXVldWUgOiBbXSksXG4gICAgICAgIGRpZEF3YWl0QWN0Q2FsbCA9ICExO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMucHVzaChlcnJvcik7XG4gICAgICB9XG4gICAgICBpZiAoMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGgpXG4gICAgICAgIHRocm93IChcbiAgICAgICAgICAocG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCksXG4gICAgICAgICAgKGNhbGxiYWNrID0gYWdncmVnYXRlRXJyb3JzKFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycykpLFxuICAgICAgICAgIChSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoID0gMCksXG4gICAgICAgICAgY2FsbGJhY2spXG4gICAgICAgICk7XG4gICAgICBpZiAoXG4gICAgICAgIG51bGwgIT09IHJlc3VsdCAmJlxuICAgICAgICBcIm9iamVjdFwiID09PSB0eXBlb2YgcmVzdWx0ICYmXG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHJlc3VsdC50aGVuXG4gICAgICApIHtcbiAgICAgICAgdmFyIHRoZW5hYmxlID0gcmVzdWx0O1xuICAgICAgICBxdWV1ZVNldmVyYWxNaWNyb3Rhc2tzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBkaWRBd2FpdEFjdENhbGwgfHxcbiAgICAgICAgICAgIGRpZFdhcm5Ob0F3YWl0QWN0IHx8XG4gICAgICAgICAgICAoKGRpZFdhcm5Ob0F3YWl0QWN0ID0gITApLFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJZb3UgY2FsbGVkIGFjdChhc3luYyAoKSA9PiAuLi4pIHdpdGhvdXQgYXdhaXQuIFRoaXMgY291bGQgbGVhZCB0byB1bmV4cGVjdGVkIHRlc3RpbmcgYmVoYXZpb3VyLCBpbnRlcmxlYXZpbmcgbXVsdGlwbGUgYWN0IGNhbGxzIGFuZCBtaXhpbmcgdGhlaXIgc2NvcGVzLiBZb3Ugc2hvdWxkIC0gYXdhaXQgYWN0KGFzeW5jICgpID0+IC4uLik7XCJcbiAgICAgICAgICAgICkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0aGVuOiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBkaWRBd2FpdEFjdENhbGwgPSAhMDtcbiAgICAgICAgICAgIHRoZW5hYmxlLnRoZW4oXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXR1cm5WYWx1ZSkge1xuICAgICAgICAgICAgICAgIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpO1xuICAgICAgICAgICAgICAgIGlmICgwID09PSBwcmV2QWN0U2NvcGVEZXB0aCkge1xuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZmx1c2hBY3RRdWV1ZShxdWV1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgZW5xdWV1ZVRhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Rmx1c2hBc3luY0FjdFdvcmsoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvciQwKSB7XG4gICAgICAgICAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yJDApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGhyb3duRXJyb3IgPSBhZ2dyZWdhdGVFcnJvcnMoXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoX3Rocm93bkVycm9yKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgcmVzb2x2ZShyZXR1cm5WYWx1ZSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpO1xuICAgICAgICAgICAgICAgIDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICA/ICgoZXJyb3IgPSBhZ2dyZWdhdGVFcnJvcnMoXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzXG4gICAgICAgICAgICAgICAgICAgICkpLFxuICAgICAgICAgICAgICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDApLFxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpKVxuICAgICAgICAgICAgICAgICAgOiByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHZhciByZXR1cm5WYWx1ZSRqc2NvbXAkMCA9IHJlc3VsdDtcbiAgICAgIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpO1xuICAgICAgMCA9PT0gcHJldkFjdFNjb3BlRGVwdGggJiZcbiAgICAgICAgKGZsdXNoQWN0UXVldWUocXVldWUpLFxuICAgICAgICAwICE9PSBxdWV1ZS5sZW5ndGggJiZcbiAgICAgICAgICBxdWV1ZVNldmVyYWxNaWNyb3Rhc2tzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCB8fFxuICAgICAgICAgICAgICBkaWRXYXJuTm9Bd2FpdEFjdCB8fFxuICAgICAgICAgICAgICAoKGRpZFdhcm5Ob0F3YWl0QWN0ID0gITApLFxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgIFwiQSBjb21wb25lbnQgc3VzcGVuZGVkIGluc2lkZSBhbiBgYWN0YCBzY29wZSwgYnV0IHRoZSBgYWN0YCBjYWxsIHdhcyBub3QgYXdhaXRlZC4gV2hlbiB0ZXN0aW5nIFJlYWN0IGNvbXBvbmVudHMgdGhhdCBkZXBlbmQgb24gYXN5bmNocm9ub3VzIGRhdGEsIHlvdSBtdXN0IGF3YWl0IHRoZSByZXN1bHQ6XFxuXFxuYXdhaXQgYWN0KCgpID0+IC4uLilcIlxuICAgICAgICAgICAgICApKTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID0gbnVsbCkpO1xuICAgICAgaWYgKDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoKVxuICAgICAgICB0aHJvdyAoXG4gICAgICAgICAgKChjYWxsYmFjayA9IGFnZ3JlZ2F0ZUVycm9ycyhSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMpKSxcbiAgICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDApLFxuICAgICAgICAgIGNhbGxiYWNrKVxuICAgICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGhlbjogZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCA9ICEwO1xuICAgICAgICAgIDAgPT09IHByZXZBY3RTY29wZURlcHRoXG4gICAgICAgICAgICA/ICgoUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgPSBxdWV1ZSksXG4gICAgICAgICAgICAgIGVucXVldWVUYXNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yayhcbiAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlJGpzY29tcCQwLFxuICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgOiByZXNvbHZlKHJldHVyblZhbHVlJGpzY29tcCQwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY2FjaGUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY2FwdHVyZU93bmVyU3RhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZ2V0Q3VycmVudFN0YWNrID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuZ2V0Q3VycmVudFN0YWNrO1xuICAgICAgcmV0dXJuIG51bGwgPT09IGdldEN1cnJlbnRTdGFjayA/IG51bGwgOiBnZXRDdXJyZW50U3RhY2soKTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY2xvbmVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbmZpZywgY2hpbGRyZW4pIHtcbiAgICAgIGlmIChudWxsID09PSBlbGVtZW50IHx8IHZvaWQgMCA9PT0gZWxlbWVudClcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgXCJUaGUgYXJndW1lbnQgbXVzdCBiZSBhIFJlYWN0IGVsZW1lbnQsIGJ1dCB5b3UgcGFzc2VkIFwiICtcbiAgICAgICAgICAgIGVsZW1lbnQgK1xuICAgICAgICAgICAgXCIuXCJcbiAgICAgICAgKTtcbiAgICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcyksXG4gICAgICAgIGtleSA9IGVsZW1lbnQua2V5LFxuICAgICAgICBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuICAgICAgaWYgKG51bGwgIT0gY29uZmlnKSB7XG4gICAgICAgIHZhciBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQ7XG4gICAgICAgIGE6IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgXCJyZWZcIikgJiZcbiAgICAgICAgICAgIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFxuICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgIFwicmVmXCJcbiAgICAgICAgICAgICkuZ2V0KSAmJlxuICAgICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0LmlzUmVhY3RXYXJuaW5nXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IHZvaWQgMCAhPT0gY29uZmlnLnJlZjtcbiAgICAgICAgfVxuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgJiYgKG93bmVyID0gZ2V0T3duZXIoKSk7XG4gICAgICAgIGhhc1ZhbGlkS2V5KGNvbmZpZykgJiZcbiAgICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjb25maWcua2V5KSwgKGtleSA9IFwiXCIgKyBjb25maWcua2V5KSk7XG4gICAgICAgIGZvciAocHJvcE5hbWUgaW4gY29uZmlnKVxuICAgICAgICAgICFoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpIHx8XG4gICAgICAgICAgICBcImtleVwiID09PSBwcm9wTmFtZSB8fFxuICAgICAgICAgICAgXCJfX3NlbGZcIiA9PT0gcHJvcE5hbWUgfHxcbiAgICAgICAgICAgIFwiX19zb3VyY2VcIiA9PT0gcHJvcE5hbWUgfHxcbiAgICAgICAgICAgIChcInJlZlwiID09PSBwcm9wTmFtZSAmJiB2b2lkIDAgPT09IGNvbmZpZy5yZWYpIHx8XG4gICAgICAgICAgICAocHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXSk7XG4gICAgICB9XG4gICAgICB2YXIgcHJvcE5hbWUgPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgICAgIGlmICgxID09PSBwcm9wTmFtZSkgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIGVsc2UgaWYgKDEgPCBwcm9wTmFtZSkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBBcnJheShwcm9wTmFtZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcE5hbWU7IGkrKylcbiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHRbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgICAgICBwcm9wcy5jaGlsZHJlbiA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdDtcbiAgICAgIH1cbiAgICAgIHByb3BzID0gUmVhY3RFbGVtZW50KFxuICAgICAgICBlbGVtZW50LnR5cGUsXG4gICAgICAgIGtleSxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIG93bmVyLFxuICAgICAgICBwcm9wcyxcbiAgICAgICAgZWxlbWVudC5fZGVidWdTdGFjayxcbiAgICAgICAgZWxlbWVudC5fZGVidWdUYXNrXG4gICAgICApO1xuICAgICAgZm9yIChrZXkgPSAyOyBrZXkgPCBhcmd1bWVudHMubGVuZ3RoOyBrZXkrKylcbiAgICAgICAgKG93bmVyID0gYXJndW1lbnRzW2tleV0pLFxuICAgICAgICAgIGlzVmFsaWRFbGVtZW50KG93bmVyKSAmJiBvd25lci5fc3RvcmUgJiYgKG93bmVyLl9zdG9yZS52YWxpZGF0ZWQgPSAxKTtcbiAgICAgIHJldHVybiBwcm9wcztcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JlYXRlQ29udGV4dCA9IGZ1bmN0aW9uIChkZWZhdWx0VmFsdWUpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0NPTlRFWFRfVFlQRSxcbiAgICAgICAgX2N1cnJlbnRWYWx1ZTogZGVmYXVsdFZhbHVlLFxuICAgICAgICBfY3VycmVudFZhbHVlMjogZGVmYXVsdFZhbHVlLFxuICAgICAgICBfdGhyZWFkQ291bnQ6IDAsXG4gICAgICAgIFByb3ZpZGVyOiBudWxsLFxuICAgICAgICBDb25zdW1lcjogbnVsbFxuICAgICAgfTtcbiAgICAgIGRlZmF1bHRWYWx1ZS5Qcm92aWRlciA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIGRlZmF1bHRWYWx1ZS5Db25zdW1lciA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0NPTlNVTUVSX1RZUEUsXG4gICAgICAgIF9jb250ZXh0OiBkZWZhdWx0VmFsdWVcbiAgICAgIH07XG4gICAgICBkZWZhdWx0VmFsdWUuX2N1cnJlbnRSZW5kZXJlciA9IG51bGw7XG4gICAgICBkZWZhdWx0VmFsdWUuX2N1cnJlbnRSZW5kZXJlcjIgPSBudWxsO1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIGNoaWxkcmVuKSB7XG4gICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbm9kZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaXNWYWxpZEVsZW1lbnQobm9kZSkgJiYgbm9kZS5fc3RvcmUgJiYgKG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IDEpO1xuICAgICAgfVxuICAgICAgaSA9IHt9O1xuICAgICAgbm9kZSA9IG51bGw7XG4gICAgICBpZiAobnVsbCAhPSBjb25maWcpXG4gICAgICAgIGZvciAocHJvcE5hbWUgaW4gKGRpZFdhcm5BYm91dE9sZEpTWFJ1bnRpbWUgfHxcbiAgICAgICAgICAhKFwiX19zZWxmXCIgaW4gY29uZmlnKSB8fFxuICAgICAgICAgIFwia2V5XCIgaW4gY29uZmlnIHx8XG4gICAgICAgICAgKChkaWRXYXJuQWJvdXRPbGRKU1hSdW50aW1lID0gITApLFxuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIFwiWW91ciBhcHAgKG9yIG9uZSBvZiBpdHMgZGVwZW5kZW5jaWVzKSBpcyB1c2luZyBhbiBvdXRkYXRlZCBKU1ggdHJhbnNmb3JtLiBVcGRhdGUgdG8gdGhlIG1vZGVybiBKU1ggdHJhbnNmb3JtIGZvciBmYXN0ZXIgcGVyZm9ybWFuY2U6IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvbmV3LWpzeC10cmFuc2Zvcm1cIlxuICAgICAgICAgICkpLFxuICAgICAgICBoYXNWYWxpZEtleShjb25maWcpICYmXG4gICAgICAgICAgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSksIChub2RlID0gXCJcIiArIGNvbmZpZy5rZXkpKSxcbiAgICAgICAgY29uZmlnKSlcbiAgICAgICAgICBoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpICYmXG4gICAgICAgICAgICBcImtleVwiICE9PSBwcm9wTmFtZSAmJlxuICAgICAgICAgICAgXCJfX3NlbGZcIiAhPT0gcHJvcE5hbWUgJiZcbiAgICAgICAgICAgIFwiX19zb3VyY2VcIiAhPT0gcHJvcE5hbWUgJiZcbiAgICAgICAgICAgIChpW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV0pO1xuICAgICAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gICAgICBpZiAoMSA9PT0gY2hpbGRyZW5MZW5ndGgpIGkuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIGVsc2UgaWYgKDEgPCBjaGlsZHJlbkxlbmd0aCkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIHZhciBjaGlsZEFycmF5ID0gQXJyYXkoY2hpbGRyZW5MZW5ndGgpLCBfaSA9IDA7XG4gICAgICAgICAgX2kgPCBjaGlsZHJlbkxlbmd0aDtcbiAgICAgICAgICBfaSsrXG4gICAgICAgIClcbiAgICAgICAgICBjaGlsZEFycmF5W19pXSA9IGFyZ3VtZW50c1tfaSArIDJdO1xuICAgICAgICBPYmplY3QuZnJlZXplICYmIE9iamVjdC5mcmVlemUoY2hpbGRBcnJheSk7XG4gICAgICAgIGkuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgJiYgdHlwZS5kZWZhdWx0UHJvcHMpXG4gICAgICAgIGZvciAocHJvcE5hbWUgaW4gKChjaGlsZHJlbkxlbmd0aCA9IHR5cGUuZGVmYXVsdFByb3BzKSwgY2hpbGRyZW5MZW5ndGgpKVxuICAgICAgICAgIHZvaWQgMCA9PT0gaVtwcm9wTmFtZV0gJiYgKGlbcHJvcE5hbWVdID0gY2hpbGRyZW5MZW5ndGhbcHJvcE5hbWVdKTtcbiAgICAgIG5vZGUgJiZcbiAgICAgICAgZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIoXG4gICAgICAgICAgaSxcbiAgICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0eXBlXG4gICAgICAgICAgICA/IHR5cGUuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICA6IHR5cGVcbiAgICAgICAgKTtcbiAgICAgIHZhciBwcm9wTmFtZSA9IDFlNCA+IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzKys7XG4gICAgICByZXR1cm4gUmVhY3RFbGVtZW50KFxuICAgICAgICB0eXBlLFxuICAgICAgICBub2RlLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgZ2V0T3duZXIoKSxcbiAgICAgICAgaSxcbiAgICAgICAgcHJvcE5hbWUgPyBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKSA6IHVua25vd25Pd25lckRlYnVnU3RhY2ssXG4gICAgICAgIHByb3BOYW1lID8gY3JlYXRlVGFzayhnZXRUYXNrTmFtZSh0eXBlKSkgOiB1bmtub3duT3duZXJEZWJ1Z1Rhc2tcbiAgICAgICk7XG4gICAgfTtcbiAgICBleHBvcnRzLmNyZWF0ZVJlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZWZPYmplY3QgPSB7IGN1cnJlbnQ6IG51bGwgfTtcbiAgICAgIE9iamVjdC5zZWFsKHJlZk9iamVjdCk7XG4gICAgICByZXR1cm4gcmVmT2JqZWN0O1xuICAgIH07XG4gICAgZXhwb3J0cy5mb3J3YXJkUmVmID0gZnVuY3Rpb24gKHJlbmRlcikge1xuICAgICAgbnVsbCAhPSByZW5kZXIgJiYgcmVuZGVyLiQkdHlwZW9mID09PSBSRUFDVF9NRU1PX1RZUEVcbiAgICAgICAgPyBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlcXVpcmVzIGEgcmVuZGVyIGZ1bmN0aW9uIGJ1dCByZWNlaXZlZCBhIGBtZW1vYCBjb21wb25lbnQuIEluc3RlYWQgb2YgZm9yd2FyZFJlZihtZW1vKC4uLikpLCB1c2UgbWVtbyhmb3J3YXJkUmVmKC4uLikpLlwiXG4gICAgICAgICAgKVxuICAgICAgICA6IFwiZnVuY3Rpb25cIiAhPT0gdHlwZW9mIHJlbmRlclxuICAgICAgICAgID8gY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlcXVpcmVzIGEgcmVuZGVyIGZ1bmN0aW9uIGJ1dCB3YXMgZ2l2ZW4gJXMuXCIsXG4gICAgICAgICAgICAgIG51bGwgPT09IHJlbmRlciA/IFwibnVsbFwiIDogdHlwZW9mIHJlbmRlclxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogMCAhPT0gcmVuZGVyLmxlbmd0aCAmJlxuICAgICAgICAgICAgMiAhPT0gcmVuZGVyLmxlbmd0aCAmJlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlbmRlciBmdW5jdGlvbnMgYWNjZXB0IGV4YWN0bHkgdHdvIHBhcmFtZXRlcnM6IHByb3BzIGFuZCByZWYuICVzXCIsXG4gICAgICAgICAgICAgIDEgPT09IHJlbmRlci5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IFwiRGlkIHlvdSBmb3JnZXQgdG8gdXNlIHRoZSByZWYgcGFyYW1ldGVyP1wiXG4gICAgICAgICAgICAgICAgOiBcIkFueSBhZGRpdGlvbmFsIHBhcmFtZXRlciB3aWxsIGJlIHVuZGVmaW5lZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgIG51bGwgIT0gcmVuZGVyICYmXG4gICAgICAgIG51bGwgIT0gcmVuZGVyLmRlZmF1bHRQcm9wcyAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiZm9yd2FyZFJlZiByZW5kZXIgZnVuY3Rpb25zIGRvIG5vdCBzdXBwb3J0IGRlZmF1bHRQcm9wcy4gRGlkIHlvdSBhY2NpZGVudGFsbHkgcGFzcyBhIFJlYWN0IGNvbXBvbmVudD9cIlxuICAgICAgICApO1xuICAgICAgdmFyIGVsZW1lbnRUeXBlID0geyAkJHR5cGVvZjogUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSwgcmVuZGVyOiByZW5kZXIgfSxcbiAgICAgICAgb3duTmFtZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50VHlwZSwgXCJkaXNwbGF5TmFtZVwiLCB7XG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gb3duTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgIG93bk5hbWUgPSBuYW1lO1xuICAgICAgICAgIHJlbmRlci5uYW1lIHx8XG4gICAgICAgICAgICByZW5kZXIuZGlzcGxheU5hbWUgfHxcbiAgICAgICAgICAgIChPYmplY3QuZGVmaW5lUHJvcGVydHkocmVuZGVyLCBcIm5hbWVcIiwgeyB2YWx1ZTogbmFtZSB9KSxcbiAgICAgICAgICAgIChyZW5kZXIuZGlzcGxheU5hbWUgPSBuYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGVsZW1lbnRUeXBlO1xuICAgIH07XG4gICAgZXhwb3J0cy5pc1ZhbGlkRWxlbWVudCA9IGlzVmFsaWRFbGVtZW50O1xuICAgIGV4cG9ydHMubGF6eSA9IGZ1bmN0aW9uIChjdG9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAkJHR5cGVvZjogUkVBQ1RfTEFaWV9UWVBFLFxuICAgICAgICBfcGF5bG9hZDogeyBfc3RhdHVzOiAtMSwgX3Jlc3VsdDogY3RvciB9LFxuICAgICAgICBfaW5pdDogbGF6eUluaXRpYWxpemVyXG4gICAgICB9O1xuICAgIH07XG4gICAgZXhwb3J0cy5tZW1vID0gZnVuY3Rpb24gKHR5cGUsIGNvbXBhcmUpIHtcbiAgICAgIG51bGwgPT0gdHlwZSAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwibWVtbzogVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBjb21wb25lbnQuIEluc3RlYWQgcmVjZWl2ZWQ6ICVzXCIsXG4gICAgICAgICAgbnVsbCA9PT0gdHlwZSA/IFwibnVsbFwiIDogdHlwZW9mIHR5cGVcbiAgICAgICAgKTtcbiAgICAgIGNvbXBhcmUgPSB7XG4gICAgICAgICQkdHlwZW9mOiBSRUFDVF9NRU1PX1RZUEUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGNvbXBhcmU6IHZvaWQgMCA9PT0gY29tcGFyZSA/IG51bGwgOiBjb21wYXJlXG4gICAgICB9O1xuICAgICAgdmFyIG93bk5hbWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcGFyZSwgXCJkaXNwbGF5TmFtZVwiLCB7XG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gb3duTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgIG93bk5hbWUgPSBuYW1lO1xuICAgICAgICAgIHR5cGUubmFtZSB8fFxuICAgICAgICAgICAgdHlwZS5kaXNwbGF5TmFtZSB8fFxuICAgICAgICAgICAgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIm5hbWVcIiwgeyB2YWx1ZTogbmFtZSB9KSxcbiAgICAgICAgICAgICh0eXBlLmRpc3BsYXlOYW1lID0gbmFtZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb21wYXJlO1xuICAgIH07XG4gICAgZXhwb3J0cy5zdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICAgIHZhciBwcmV2VHJhbnNpdGlvbiA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQsXG4gICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uID0ge307XG4gICAgICBSZWFjdFNoYXJlZEludGVybmFscy5UID0gY3VycmVudFRyYW5zaXRpb247XG4gICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyA9IG5ldyBTZXQoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHNjb3BlKCksXG4gICAgICAgICAgb25TdGFydFRyYW5zaXRpb25GaW5pc2ggPSBSZWFjdFNoYXJlZEludGVybmFscy5TO1xuICAgICAgICBudWxsICE9PSBvblN0YXJ0VHJhbnNpdGlvbkZpbmlzaCAmJlxuICAgICAgICAgIG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoKGN1cnJlbnRUcmFuc2l0aW9uLCByZXR1cm5WYWx1ZSk7XG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiByZXR1cm5WYWx1ZSAmJlxuICAgICAgICAgIG51bGwgIT09IHJldHVyblZhbHVlICYmXG4gICAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgcmV0dXJuVmFsdWUudGhlbiAmJlxuICAgICAgICAgIHJldHVyblZhbHVlLnRoZW4obm9vcCwgcmVwb3J0R2xvYmFsRXJyb3IpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVwb3J0R2xvYmFsRXJyb3IoZXJyb3IpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgbnVsbCA9PT0gcHJldlRyYW5zaXRpb24gJiZcbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyAmJlxuICAgICAgICAgICgoc2NvcGUgPSBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycy5zaXplKSxcbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycy5jbGVhcigpLFxuICAgICAgICAgIDEwIDwgc2NvcGUgJiZcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgXCJEZXRlY3RlZCBhIGxhcmdlIG51bWJlciBvZiB1cGRhdGVzIGluc2lkZSBzdGFydFRyYW5zaXRpb24uIElmIHRoaXMgaXMgZHVlIHRvIGEgc3Vic2NyaXB0aW9uIHBsZWFzZSByZS13cml0ZSBpdCB0byB1c2UgUmVhY3QgcHJvdmlkZWQgaG9va3MuIE90aGVyd2lzZSBjb25jdXJyZW50IG1vZGUgZ3VhcmFudGVlcyBhcmUgb2ZmIHRoZSB0YWJsZS5cIlxuICAgICAgICAgICAgKSksXG4gICAgICAgICAgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBwcmV2VHJhbnNpdGlvbik7XG4gICAgICB9XG4gICAgfTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX3VzZUNhY2hlUmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUNhY2hlUmVmcmVzaCgpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2UgPSBmdW5jdGlvbiAodXNhYmxlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2UodXNhYmxlKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlQWN0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYWN0aW9uLCBpbml0aWFsU3RhdGUsIHBlcm1hbGluaykge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlQWN0aW9uU3RhdGUoXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgICBwZXJtYWxpbmtcbiAgICAgICk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUNhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBkZXBzKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VDYWxsYmFjayhjYWxsYmFjaywgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUNvbnRleHQgPSBmdW5jdGlvbiAoQ29udGV4dCkge1xuICAgICAgdmFyIGRpc3BhdGNoZXIgPSByZXNvbHZlRGlzcGF0Y2hlcigpO1xuICAgICAgQ29udGV4dC4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OU1VNRVJfVFlQRSAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiQ2FsbGluZyB1c2VDb250ZXh0KENvbnRleHQuQ29uc3VtZXIpIGlzIG5vdCBzdXBwb3J0ZWQgYW5kIHdpbGwgY2F1c2UgYnVncy4gRGlkIHlvdSBtZWFuIHRvIGNhbGwgdXNlQ29udGV4dChDb250ZXh0KSBpbnN0ZWFkP1wiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gZGlzcGF0Y2hlci51c2VDb250ZXh0KENvbnRleHQpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VEZWJ1Z1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXR0ZXJGbikge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlRGVidWdWYWx1ZSh2YWx1ZSwgZm9ybWF0dGVyRm4pO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VEZWZlcnJlZFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBpbml0aWFsVmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZURlZmVycmVkVmFsdWUodmFsdWUsIGluaXRpYWxWYWx1ZSk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUVmZmVjdCA9IGZ1bmN0aW9uIChjcmVhdGUsIGNyZWF0ZURlcHMsIHVwZGF0ZSkge1xuICAgICAgbnVsbCA9PSBjcmVhdGUgJiZcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiUmVhY3QgSG9vayB1c2VFZmZlY3QgcmVxdWlyZXMgYW4gZWZmZWN0IGNhbGxiYWNrLiBEaWQgeW91IGZvcmdldCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gdGhlIGhvb2s/XCJcbiAgICAgICAgKTtcbiAgICAgIHZhciBkaXNwYXRjaGVyID0gcmVzb2x2ZURpc3BhdGNoZXIoKTtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB1cGRhdGUpXG4gICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgIFwidXNlRWZmZWN0IENSVUQgb3ZlcmxvYWQgaXMgbm90IGVuYWJsZWQgaW4gdGhpcyBidWlsZCBvZiBSZWFjdC5cIlxuICAgICAgICApO1xuICAgICAgcmV0dXJuIGRpc3BhdGNoZXIudXNlRWZmZWN0KGNyZWF0ZSwgY3JlYXRlRGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlSWQoKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlSW1wZXJhdGl2ZUhhbmRsZSA9IGZ1bmN0aW9uIChyZWYsIGNyZWF0ZSwgZGVwcykge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGNyZWF0ZSwgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUluc2VydGlvbkVmZmVjdCA9IGZ1bmN0aW9uIChjcmVhdGUsIGRlcHMpIHtcbiAgICAgIG51bGwgPT0gY3JlYXRlICYmXG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIlJlYWN0IEhvb2sgdXNlSW5zZXJ0aW9uRWZmZWN0IHJlcXVpcmVzIGFuIGVmZmVjdCBjYWxsYmFjay4gRGlkIHlvdSBmb3JnZXQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIHRoZSBob29rP1wiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VJbnNlcnRpb25FZmZlY3QoY3JlYXRlLCBkZXBzKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlTGF5b3V0RWZmZWN0ID0gZnVuY3Rpb24gKGNyZWF0ZSwgZGVwcykge1xuICAgICAgbnVsbCA9PSBjcmVhdGUgJiZcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiUmVhY3QgSG9vayB1c2VMYXlvdXRFZmZlY3QgcmVxdWlyZXMgYW4gZWZmZWN0IGNhbGxiYWNrLiBEaWQgeW91IGZvcmdldCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gdGhlIGhvb2s/XCJcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUxheW91dEVmZmVjdChjcmVhdGUsIGRlcHMpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VNZW1vID0gZnVuY3Rpb24gKGNyZWF0ZSwgZGVwcykge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlTWVtbyhjcmVhdGUsIGRlcHMpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VPcHRpbWlzdGljID0gZnVuY3Rpb24gKHBhc3N0aHJvdWdoLCByZWR1Y2VyKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VPcHRpbWlzdGljKHBhc3N0aHJvdWdoLCByZWR1Y2VyKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlUmVkdWNlciA9IGZ1bmN0aW9uIChyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VSZWR1Y2VyKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VSZWYgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VSZWYoaW5pdGlhbFZhbHVlKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlU3RhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VTdGF0ZShpbml0aWFsU3RhdGUpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VTeW5jRXh0ZXJuYWxTdG9yZSA9IGZ1bmN0aW9uIChcbiAgICAgIHN1YnNjcmliZSxcbiAgICAgIGdldFNuYXBzaG90LFxuICAgICAgZ2V0U2VydmVyU25hcHNob3RcbiAgICApIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgICAgICBzdWJzY3JpYmUsXG4gICAgICAgIGdldFNuYXBzaG90LFxuICAgICAgICBnZXRTZXJ2ZXJTbmFwc2hvdFxuICAgICAgKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVRyYW5zaXRpb24oKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudmVyc2lvbiA9IFwiMTkuMS4xXCI7XG4gICAgXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAmJlxuICAgICAgXCJmdW5jdGlvblwiID09PVxuICAgICAgICB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdG9wICYmXG4gICAgICBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0b3AoRXJyb3IoKSk7XG4gIH0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QucHJvZHVjdGlvbi5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC5kZXZlbG9wbWVudC5qcycpO1xufVxuIiwidmFyIFNNQUxMX1dPUkRTID0gL1xcYig/OmFuP2Q/fGFbc3RdfGJlY2F1c2V8YnV0fGJ5fGVufGZvcnxpW2ZuXXxuZWl0aGVyfG5vcnxvW2Zucl18b25seXxvdmVyfHBlcnxzb3xzb21lfHRoYVt0bl18dGhlfHRvfHVwfHVwb258dnM/XFwuP3x2ZXJzdXN8dmlhfHdoZW58d2l0aHx3aXRob3V0fHlldClcXGIvaTtcbnZhciBUT0tFTlMgPSAvW15cXHM64oCT4oCULV0rfC4vZztcbnZhciBXSElURVNQQUNFID0gL1xccy87XG52YXIgSVNfTUFOVUFMX0NBU0UgPSAvLig/PVtBLVpdfFxcLi4pLztcbnZhciBBTFBIQU5VTUVSSUNfUEFUVEVSTiA9IC9bQS1aYS16MC05XFx1MDBDMC1cXHUwMEZGXS87XG5leHBvcnQgZnVuY3Rpb24gdGl0bGVDYXNlKGlucHV0KSB7XG4gICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgdmFyIG07XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgd2hpbGUgKChtID0gVE9LRU5TLmV4ZWMoaW5wdXQpKSAhPT0gbnVsbCkge1xuICAgICAgICB2YXIgdG9rZW4gPSBtWzBdLCBpbmRleCA9IG0uaW5kZXg7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gSWdub3JlIGFscmVhZHkgY2FwaXRhbGl6ZWQgd29yZHMuXG4gICAgICAgICFJU19NQU5VQUxfQ0FTRS50ZXN0KHRva2VuKSAmJlxuICAgICAgICAgICAgLy8gSWdub3JlIHNtYWxsIHdvcmRzIGV4Y2VwdCBhdCBiZWdpbm5pbmcgb3IgZW5kLlxuICAgICAgICAgICAgKCFTTUFMTF9XT1JEUy50ZXN0KHRva2VuKSB8fFxuICAgICAgICAgICAgICAgIGluZGV4ID09PSAwIHx8XG4gICAgICAgICAgICAgICAgaW5kZXggKyB0b2tlbi5sZW5ndGggPT09IGlucHV0Lmxlbmd0aCkgJiZcbiAgICAgICAgICAgIC8vIElnbm9yZSBVUkxzLlxuICAgICAgICAgICAgKGlucHV0LmNoYXJBdChpbmRleCArIHRva2VuLmxlbmd0aCkgIT09IFwiOlwiIHx8XG4gICAgICAgICAgICAgICAgV0hJVEVTUEFDRS50ZXN0KGlucHV0LmNoYXJBdChpbmRleCArIHRva2VuLmxlbmd0aCArIDEpKSkpIHtcbiAgICAgICAgICAgIC8vIEZpbmQgYW5kIHVwcGVyY2FzZSBmaXJzdCB3b3JkIGNoYXJhY3Rlciwgc2tpcHMgb3ZlciAqbW9kaWZpZXJzKi5cbiAgICAgICAgICAgIHJlc3VsdCArPSB0b2tlbi5yZXBsYWNlKEFMUEhBTlVNRVJJQ19QQVRURVJOLCBmdW5jdGlvbiAobSkgeyByZXR1cm4gbS50b1VwcGVyQ2FzZSgpOyB9KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCArPSB0b2tlbjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIi8qKlxuICogVGhpcyBmaWxlIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGZyb20gYHByZS1wdWJsaXNoLmpzYC5cbiAqIERvIG5vdCBtYW51YWxseSBlZGl0LlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBcImFyZWFcIjogdHJ1ZSxcbiAgXCJiYXNlXCI6IHRydWUsXG4gIFwiYnJcIjogdHJ1ZSxcbiAgXCJjb2xcIjogdHJ1ZSxcbiAgXCJlbWJlZFwiOiB0cnVlLFxuICBcImhyXCI6IHRydWUsXG4gIFwiaW1nXCI6IHRydWUsXG4gIFwiaW5wdXRcIjogdHJ1ZSxcbiAgXCJsaW5rXCI6IHRydWUsXG4gIFwibWV0YVwiOiB0cnVlLFxuICBcInBhcmFtXCI6IHRydWUsXG4gIFwic291cmNlXCI6IHRydWUsXG4gIFwidHJhY2tcIjogdHJ1ZSxcbiAgXCJ3YnJcIjogdHJ1ZVxufTtcbiIsImltcG9ydCB0eXBlIHsgQ29udGFjdCBhcyBGZGMzQ29udGFjdCwgQ29udGV4dCBhcyBGREMzQ29udGV4dCB9IGZyb20gXCJAZmlub3MvZmRjM1wiO1xuaW1wb3J0IHR5cGUge1xuXHRBYWRVc2VyQ29udmVyc2F0aW9uTWVtYmVyLFxuXHRDaGFubmVsLFxuXHRDaGF0TWVzc2FnZSxcblx0Q29udGFjdCxcblx0RHJpdmVJdGVtLFxuXHRFbnRpdHksXG5cdEV2ZW50LFxuXHRNZXNzYWdlLFxuXHRQcmVzZW5jZSxcblx0U2VhcmNoUmVzcG9uc2UsXG5cdFRlYW0sXG5cdFVzZXJcbn0gZnJvbSBcIkBtaWNyb3NvZnQvbWljcm9zb2Z0LWdyYXBoLXR5cGVzXCI7XG5pbXBvcnQge1xuXHRjb25uZWN0LFxuXHRlbmFibGVMb2dnaW5nLFxuXHRUZWFtc0Nvbm5lY3Rpb24sXG5cdHR5cGUgR3JhcGhSZXNwb25zZSxcblx0dHlwZSBNaWNyb3NvZnQzNjVDb25uZWN0aW9uXG59IGZyb20gXCJAb3BlbmZpbi9taWNyb3NvZnQzNjVcIjtcbmltcG9ydCB7XG5cdEJ1dHRvblN0eWxlLFxuXHRDTElUZW1wbGF0ZSxcblx0dHlwZSBDTElGaWx0ZXIsXG5cdHR5cGUgSG9tZURpc3BhdGNoZWRTZWFyY2hSZXN1bHQsXG5cdHR5cGUgSG9tZVNlYXJjaExpc3RlbmVyUmVzcG9uc2UsXG5cdHR5cGUgSG9tZVNlYXJjaFJlc3BvbnNlLFxuXHR0eXBlIEhvbWVTZWFyY2hSZXN1bHQsXG5cdHR5cGUgVGVtcGxhdGVGcmFnbWVudCxcblx0dHlwZSBDTElTZWFyY2hSZXN1bHRMb2FkaW5nLFxuXHR0eXBlIEhvbWVBY3Rpb24sXG5cdHR5cGUgQ0xJU2VhcmNoUmVzdWx0Q3VzdG9tXG59IGZyb20gXCJAb3BlbmZpbi93b3Jrc3BhY2VcIjtcbmltcG9ydCB0eXBlIHsgQ3VzdG9tUGFsZXR0ZVNldCB9IGZyb20gXCJAb3BlbmZpbi93b3Jrc3BhY2UtcGxhdGZvcm1cIjtcbmltcG9ydCB0eXBlIHtcblx0QWN0aW9uRGF0YSxcblx0QWN0aW9uTG9hZGluZ0RhdGEsXG5cdEdyYXBoQmF0Y2hSZXF1ZXN0LFxuXHRHcmFwaEJhdGNoUmVzcG9uc2UsXG5cdEdyYXBoQmF0Y2hSZXNwb25zZUl0ZW0sXG5cdEdyYXBoTGlzdFJlc3BvbnNlLFxuXHRJbnRlZ3JhdGlvbkhlbHBlcnMsXG5cdExvZ2dlcixcblx0TWljcm9zb2Z0MzY1T2JqZWN0VHlwZXMsXG5cdE1pY3Jvc29mdDM2NVNldHRpbmdzLFxuXHRUZW1wbGF0ZUhlbHBlcnNcbn0gZnJvbSBcIi4vc2hhcGVzXCI7XG5cbi8qKlxuICogSW1wbGVtZW50IHRoZSBpbnRlZ3JhdGlvbiBwcm92aWRlciBmb3IgbWljcm9zb2Z0IDM2NSByZXN1bHRzLlxuICovXG5leHBvcnQgY2xhc3MgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24ge1xuXHQvKipcblx0ICogVGhlIGRlZmF1bHQgYmFzZSBzY29yZSBmb3Igb3JkZXJpbmcuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX0RFRkFVTFRfQkFTRV9TQ09SRSA9IDUwMDAwMDtcblxuXHQvKipcblx0ICogVGhlIGtleSB0byB1c2UgZm9yIGEgY2FsbCBrZXkgYWN0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9BQ1RJT05fVEVBTVNfQ0FMTCA9IFwiVGVhbXMgQ2FsbFwiO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IHRvIHVzZSBmb3IgYSBvdXRsb29rIGVtYWlsIGtleSBhY3Rpb24uXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX0FDVElPTl9PVVRMT09LX0VNQUlMID0gXCJPdXRsb29rIEVtYWlsXCI7XG5cblx0LyoqXG5cdCAqIFRoZSBrZXkgdG8gdXNlIGZvciBhIHRlYW1zIG1lZXRpbmcga2V5IGFjdGlvbi5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfQUNUSU9OX1RFQU1TX01FRVRJTkcgPSBcIlRlYW1zIE1lZXRpbmdcIjtcblxuXHQvKipcblx0ICogVGhlIGtleSB0byB1c2UgZm9yIGEgb3V0bG9vayBldmVudCBrZXkgYWN0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9BQ1RJT05fT1VUTE9PS19FVkVOVCA9IFwiT3V0bG9vayBFdmVudFwiO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IHRvIHVzZSBmb3IgYSBjaGF0IGtleSBhY3Rpb24uXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX0FDVElPTl9URUFNU19DSEFUID0gXCJUZWFtcyBDaGF0XCI7XG5cblx0LyoqXG5cdCAqIFRoZSBrZXkgdG8gdXNlIGZvciBhIGNhbGwga2V5IGFjdGlvbi5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfQUNUSU9OX1BIT05FX0NBTEwgPSBcIkNhbGxcIjtcblxuXHQvKipcblx0ICogVGhlIGtleSB0byB1c2UgZm9yIGFuIG9wZW4ga2V5IGFjdGlvbi5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfQUNUSU9OX09QRU4gPSBcIk9wZW5cIjtcblxuXHQvKipcblx0ICogVGhlIGtleSB0byB1c2UgZm9yIGFuIHNoYXJlIGNvbnRhY3QuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX0FDVElPTl9TSEFSRV9DT05UQUNUID0gXCJTaGFyZSBDb250YWN0XCI7XG5cblx0LyoqXG5cdCAqIFRoZSBrZXkgdG8gdXNlIGZvciBhIGNvcHkga2V5IGFjdGlvbi5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfQUNUSU9OX0NPUFkgPSBcIkNvcHkgSlNPTiB0byBDbGlwYm9hcmRcIjtcblxuXHQvKipcblx0ICogVGhlIGtleSB0byB1c2UgZm9yIGEgY29ubmVjdCBrZXkgYWN0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9BQ1RJT05fQ09OTkVDVCA9IFwiQ29ubmVjdFwiO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IGZvciB0aGUgbXMgMzY1IGZpbHRlcnMuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX01TMzY1X0ZJTFRFUlMgPSBcIk1TMzY1XCI7XG5cblx0LyoqXG5cdCAqIFRoZSB1cmwgZm9yIHRlYW1zLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9URUFNU19VUkwgPSBcImh0dHBzOi8vdGVhbXMubWljcm9zb2Z0LmNvbS9cIjtcblxuXHQvKipcblx0ICogVGhlIHByb3RvY29sIGZvciB0ZWFtcy5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfVEVBTVNfUFJPVE9DT0wgPSBcIm1zdGVhbXM6XCI7XG5cblx0LyoqXG5cdCAqIFRoZSBzZXR0aW5ncyBmb3IgdGhlIGludGVncmF0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgX2xvZ2dlcjogTG9nZ2VyIHwgdW5kZWZpbmVkO1xuXG5cdC8qKlxuXHQgKiBUaGUgaW50ZWdyYXRpb24gaGVscGVycy5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIF9pbnRlZ3JhdGlvbkhlbHBlcnM6IEludGVncmF0aW9uSGVscGVycyB8IHVuZGVmaW5lZDtcblxuXHQvKipcblx0ICogVGhlIG1vZHVsZSBkZWZpbml0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgX2RlZmluaXRpb246XG5cdFx0fCB7IGlkOiBzdHJpbmc7IHRpdGxlOiBzdHJpbmc7IGJhc2VTY29yZT86IG51bWJlcjsgZGF0YTogTWljcm9zb2Z0MzY1U2V0dGluZ3MgfVxuXHRcdHwgdW5kZWZpbmVkO1xuXG5cdC8qKlxuXHQgKiBUaGUgc2V0dGluZ3MgZm9yIHRoZSBpbnRlZ3JhdGlvbi5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIF9zZXR0aW5nczogTWljcm9zb2Z0MzY1U2V0dGluZ3MgfCB1bmRlZmluZWQ7XG5cblx0LyoqXG5cdCAqIFRoZSBNaWNyb3NvZnQgMzY1IGNvbm5lY3Rpb24uXG5cdCAqL1xuXHRwcml2YXRlIF9tczM2NUNvbm5lY3Rpb24/OiBNaWNyb3NvZnQzNjVDb25uZWN0aW9uO1xuXG5cdC8qKlxuXHQgKiBBbnkgZXJyb3JzIGR1cmluZyBjb25uZWN0aW9uLlxuXHQgKi9cblx0cHJpdmF0ZSBfY29ubmVjdGlvbkVycm9yPzogc3RyaW5nO1xuXG5cdC8qKlxuXHQgKiBUaGUgaG9tZSByZXNwb25zZSB3aGVuIHRoZSBjb25uZWN0IGZhaWx1cmUgZW50cnkgd2FzIGNyZWF0ZWQuXG5cdCAqL1xuXHRwcml2YXRlIF9jb25uZWN0TGFzdFJlc3BvbnNlPzogSG9tZVNlYXJjaExpc3RlbmVyUmVzcG9uc2U7XG5cblx0LyoqXG5cdCAqIE1haW50YWluIGEgY2FjaGUgb2YgdGhlIHByb2ZpbGUgaW1hZ2VzLlxuXHQgKi9cblx0cHJpdmF0ZSByZWFkb25seSBfcHJvZmlsZUltYWdlQ2FjaGU6IHtcblx0XHRbaWQ6IHN0cmluZ106IHtcblx0XHRcdGFkZGVkOiBudW1iZXI7XG5cdFx0XHRkYXRhOiBzdHJpbmc7XG5cdFx0fTtcblx0fTtcblxuXHQvKipcblx0ICogTWFpbnRhaW4gYSBjYWNoZSBvZiB0aGUgdXNlcnMgdGVhbXMgYW5kIGNoYW5uZWxzLlxuXHQgKi9cblx0cHJpdmF0ZSBfdGVhbXNBbmRDaGFubmVsc0NhY2hlOiB7IHRlYW06IFRlYW07IGNoYW5uZWxzOiBDaGFubmVsW10gfVtdO1xuXG5cdC8qKlxuXHQgKiBUaGUgY2FjaGUgY2xlYW51cCB0aW1lciBpZC5cblx0ICovXG5cdHByaXZhdGUgX2NhY2hlSW50ZXJ2YWxJZD86IG51bWJlcjtcblxuXHQvKipcblx0ICogVGhlIGNhY2hlIGNvdW50ZXIuXG5cdCAqL1xuXHRwcml2YXRlIF9jYWNoZUNvdW50ZXI6IG51bWJlcjtcblxuXHQvKipcblx0ICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIE1pY3Jvc29mdDM2NVByb3ZpZGVyLlxuXHQgKi9cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5fcHJvZmlsZUltYWdlQ2FjaGUgPSB7fTtcblx0XHR0aGlzLl90ZWFtc0FuZENoYW5uZWxzQ2FjaGUgPSBbXTtcblx0XHR0aGlzLl9jYWNoZUNvdW50ZXIgPSAwO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemUgdGhlIG1vZHVsZS5cblx0ICogQHBhcmFtIGRlZmluaXRpb24gVGhlIGRlZmluaXRpb24gb2YgdGhlIG1vZHVsZSBmcm9tIGNvbmZpZ3VyYXRpb24gaW5jbHVkZSBjdXN0b20gb3B0aW9ucy5cblx0ICogQHBhcmFtIGRlZmluaXRpb24uaWQgVGhlIGlkIHRvIHVzZSB3aGVuIHRoZSBpbnRlZ3JhdGlvbiBpcyB1c2VkIGFzIGEgbW9kdWxlLlxuXHQgKiBAcGFyYW0gZGVmaW5pdGlvbi50aXRsZSBUaGUgdGl0bGUgdG8gdXNlIHdoZW4gdGhlIGludGVncmF0aW9uIGlzIHVzZWQgYXMgYSBtb2R1bGUuXG5cdCAqIEBwYXJhbSBkZWZpbml0aW9uLmRhdGEgVGhlIHNldHRpbmdzIGZvciB0aGUgbW9kdWxlLlxuXHQgKiBAcGFyYW0gbG9nZ2VyQ3JlYXRvciBGb3IgbG9nZ2luZyBlbnRyaWVzLlxuXHQgKiBAcGFyYW0gaGVscGVycyBIZWxwZXIgbWV0aG9kcyBmb3IgdGhlIG1vZHVsZSB0byBpbnRlcmFjdCB3aXRoIHRoZSBhcHBsaWNhdGlvbiBjb3JlLlxuXHQgKiBAcmV0dXJucyBOb3RoaW5nLlxuXHQgKi9cblx0cHVibGljIGFzeW5jIGluaXRpYWxpemUoXG5cdFx0ZGVmaW5pdGlvbjogeyBpZDogc3RyaW5nOyB0aXRsZTogc3RyaW5nOyBkYXRhOiBNaWNyb3NvZnQzNjVTZXR0aW5ncyB9LFxuXHRcdGxvZ2dlckNyZWF0b3I6IChncm91cDogc3RyaW5nKSA9PiBMb2dnZXIsXG5cdFx0aGVscGVyczogSW50ZWdyYXRpb25IZWxwZXJzXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuX2RlZmluaXRpb24gPSBkZWZpbml0aW9uO1xuXHRcdHRoaXMuX3NldHRpbmdzID0gZGVmaW5pdGlvbi5kYXRhO1xuXHRcdHRoaXMuX2ludGVncmF0aW9uSGVscGVycyA9IGhlbHBlcnM7XG5cblx0XHR0aGlzLl9kZWZpbml0aW9uLnRpdGxlID8/PSBcIk1pY3Jvc29mdCAzNjVcIjtcblx0XHR0aGlzLl9zZXR0aW5ncy5ncmFwaEV4cGxvcmVyUHJlZml4ID8/PSBcIm1zXCI7XG5cblx0XHR0aGlzLl9sb2dnZXIgPSBsb2dnZXJDcmVhdG9yKHRoaXMuX2RlZmluaXRpb24udGl0bGUpO1xuXHRcdHRoaXMuX2xvZ2dlci5pbmZvKGBJbml0aWFsaXppbmcgJHt0aGlzLl9kZWZpbml0aW9uLnRpdGxlfWApO1xuXG5cdFx0aWYgKCF0aGlzLl9zZXR0aW5ncy5jbGllbnRJZCkge1xuXHRcdFx0dGhpcy5fbG9nZ2VyLmVycm9yKFwiQ29uZmlndXJhdGlvbiBpcyBtaXNzaW5nIGNsaWVudElkXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5fc2V0dGluZ3MudGVuYW50SWQpIHtcblx0XHRcdHRoaXMuX2xvZ2dlci5lcnJvcihcIkNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZyB0ZW5hbnRJZFwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLmNvbm5lY3RUb01TMzY1KCk7XG5cblx0XHQvLyBGb3IgdGhlbWVkIGljb25zIHdlIGZldGNoIHRoZSBzdmcgY29udGVudCBzbyB0aGF0IHdlIGNhbiByZXBsYWNlIGNvbG9yc1xuXHRcdC8vIHdoZW4gdGhleSBhcmUgdXNlZCwgaW5zdGVhZCBvZiBsaW5raW5nIGRpcmVjdGx5IHRvIHRoZSBzb3VyY2Vcblx0XHRjb25zdCB0aGVtZWRJY29ucyA9IFtcblx0XHRcdFwiY2FsZW5kYXJcIixcblx0XHRcdFwiY2FsbFwiLFxuXHRcdFx0XCJjaGFubmVsXCIsXG5cdFx0XHRcImNoYXRcIixcblx0XHRcdFwiY29udGFjdFwiLFxuXHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XCJzaGFyZVwiLFxuXHRcdFx0XCJ0ZWFtXCIsXG5cdFx0XHRcImZpbGVcIixcblx0XHRcdFwiZm9sZGVyXCJcblx0XHRdO1xuXHRcdGZvciAoY29uc3QgdGhlbWVkSWNvbiBvZiB0aGVtZWRJY29ucykge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLl9zZXR0aW5ncy5pbWFnZXNbdGhlbWVkSWNvbl0pO1xuXHRcdFx0Y29uc3Qgc3ZnID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXHRcdFx0dGhpcy5fc2V0dGluZ3MuaW1hZ2VzW3RoZW1lZEljb25dID0gdGhpcy5zdmdUb0lubGluZShzdmcpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgbW9kdWxlIGlzIGJlaW5nIGRlcmVnaXN0ZXJlZC5cblx0ICogQHJldHVybnMgTm90aGluZy5cblx0ICovXG5cdHB1YmxpYyBhc3luYyBjbG9zZWRvd24oKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbikge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiRGlzY29ubmVjdGluZyBmcm9tIE1TIEdyYXBoIEFQSVwiKTtcblx0XHRcdGF3YWl0IHRoaXMuX21zMzY1Q29ubmVjdGlvbi5kaXNjb25uZWN0KCk7XG5cdFx0XHR0aGlzLl9tczM2NUNvbm5lY3Rpb24gPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICh0aGlzLl9jYWNoZUludGVydmFsSWQpIHtcblx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2NhY2hlSW50ZXJ2YWxJZCk7XG5cdFx0XHR0aGlzLl9jYWNoZUludGVydmFsSWQgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdldCBhIGxpc3Qgb2YgdGhlIHN0YXRpYyBoZWxwIGVudHJpZXMuXG5cdCAqIEByZXR1cm5zIFRoZSBsaXN0IG9mIGhlbHAgZW50cmllcy5cblx0ICovXG5cdHB1YmxpYyBhc3luYyBnZXRIZWxwU2VhcmNoRW50cmllcygpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPltdPiB7XG5cdFx0aWYgKHRoaXMuX2ludGVncmF0aW9uSGVscGVycykge1xuXHRcdFx0Y29uc3QgYWRkaXRpb25hbERlc2NyaXB0aW9uOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0Y29uc3QgYWRkaXRpb25hbEhlbHA6IHN0cmluZ1tdID0gW107XG5cblx0XHRcdGlmICghdGhpcy5fc2V0dGluZ3M/LmRpc2FibGVHcmFwaEV4cGxvcmVyKSB7XG5cdFx0XHRcdGFkZGl0aW9uYWxEZXNjcmlwdGlvbi5wdXNoKFxuXHRcdFx0XHRcdGBZb3UgY2FuIGFsc28gc3BlY2lmeSBhIHF1ZXJ5IGFzIGEgZ3JhcGggZXhwbG9yZXIgcGF0aCBhbmQgcGFyYW1ldGVycywgYnkgdXNpbmcgdGhlIC8ke3RoaXMuX3NldHRpbmdzPy5ncmFwaEV4cGxvcmVyUHJlZml4fSBwcmVmaXhgXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGFkZGl0aW9uYWxIZWxwLnB1c2goXG5cdFx0XHRcdFx0YC8ke3RoaXMuX3NldHRpbmdzPy5ncmFwaEV4cGxvcmVyUHJlZml4fS9tZWAsXG5cdFx0XHRcdFx0YC8ke3RoaXMuX3NldHRpbmdzPy5ncmFwaEV4cGxvcmVyUHJlZml4fS91c2Vycz8kZmlsdGVyPXN0YXJ0c1dpdGgoZGlzcGxheU5hbWUsJ2pvaG4nKWBcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LWhlbHAxYCxcblx0XHRcdFx0XHRzY29yZTogdGhpcy5fZGVmaW5pdGlvbj8uYmFzZVNjb3JlID8/IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9ERUZBVUxUX0JBU0VfU0NPUkUsXG5cdFx0XHRcdFx0dGl0bGU6IHRoaXMuX2RlZmluaXRpb24/LnRpdGxlID8/IFwiXCIsXG5cdFx0XHRcdFx0bGFiZWw6IFwiSGVscFwiLFxuXHRcdFx0XHRcdGljb246IHRoaXMuX3NldHRpbmdzPy5pbWFnZXMubWljcm9zb2Z0MzY1LFxuXHRcdFx0XHRcdGFjdGlvbnM6IFtdLFxuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0XHRcdHRlbXBsYXRlQ29udGVudDogYXdhaXQgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzPy50ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlSGVscChcblx0XHRcdFx0XHRcdFwiTWljcm9zb2Z0IDM2NVwiLFxuXHRcdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0XHRcIlRoZSBNaWNyb3NvZnQgMzY1IGludGVncmF0aW9uIGNhbiBiZSB1c2VkIHRvIHNlYXJjaCBtdWx0aXBsZSBkYXRhIHNvdXJjZSBpbiB5b3VyIHBsYXRmb3JtLlwiLFxuXHRcdFx0XHRcdFx0XHRcIlVzaW5nIGEgZnJlZWZvcm0gcXVlcnkgd2lsbCBzZWFyY2ggdGhlIGNvbnRlbnQgb2YgVXNlcnMsIENvbnRhY3RzLCBFLW1haWwsIEV2ZW50cywgQ2hhdCBNZXNzYWdlcywgVGVhbXMgYW5kIENoYW5uZWxzXCJcblx0XHRcdFx0XHRcdF0uY29uY2F0KGFkZGl0aW9uYWxEZXNjcmlwdGlvbiksXG5cdFx0XHRcdFx0XHRhZGRpdGlvbmFsSGVscFxuXHRcdFx0XHRcdClcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LWhlbHAyYCxcblx0XHRcdFx0XHRzY29yZTogdGhpcy5fZGVmaW5pdGlvbj8uYmFzZVNjb3JlID8/IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9ERUZBVUxUX0JBU0VfU0NPUkUsXG5cdFx0XHRcdFx0dGl0bGU6IGAke3RoaXMuX2RlZmluaXRpb24/LnRpdGxlfSBSZWNlbnRgLFxuXHRcdFx0XHRcdGxhYmVsOiBcIkhlbHBcIixcblx0XHRcdFx0XHRpY29uOiB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLm1pY3Jvc29mdDM2NSxcblx0XHRcdFx0XHRhY3Rpb25zOiBbXSxcblx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRwcm92aWRlcklkOiB0aGlzLl9kZWZpbml0aW9uPy5pZCxcblx0XHRcdFx0XHRcdHBvcHVsYXRlUXVlcnk6IFwiL3JlY2VudFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0XHRcdHRlbXBsYXRlQ29udGVudDogYXdhaXQgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzPy50ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlSGVscChcblx0XHRcdFx0XHRcdFwiTWljcm9zb2Z0IDM2NSBSZWNlbnRcIixcblx0XHRcdFx0XHRcdFtcIlJ1bm5pbmcgdGhpcyBjb21tYW5kIHdpbGwgcmV0cmlldmUgdGhlIG1vc3QgcmVjZW50IGZpbGVzIGZyb20gTVMzNjVcIl0sXG5cdFx0XHRcdFx0XHRbXCIvcmVjZW50XCJdXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHR9XG5cdFx0XHRdO1xuXHRcdH1cblx0XHRyZXR1cm4gW107XG5cdH1cblxuXHQvKipcblx0ICogR2V0IGVudHJpZXMgdG8gc2hvdyB3aGlsZSB0aGUgaW50ZWdyYXRpb24gaXMgc2VhcmNoaW5nLlxuXHQgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIHNlYXJjaCBmb3IuXG5cdCAqIEBwYXJhbSBsYXN0UmVzcG9uc2UgVGhlIGxhc3Qgc2VhcmNoIHJlc3BvbnNlIHVzZWQgZm9yIHVwZGF0aW5nIGV4aXN0aW5nIHJlc3VsdHMuXG5cdCAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBzZWFyY2ggcXVlcnkuXG5cdCAqIEBwYXJhbSBvcHRpb25zLnF1ZXJ5TWluTGVuZ3RoIFRoZSBtaW5pbXVtIGxlbmd0aCBiZWZvcmUgYSBxdWVyeSBpcyBhY3Rpb25lZC5cblx0ICogQHBhcmFtIG9wdGlvbnMucXVlcnlBZ2FpbnN0IFRoZSBmaWVsZHMgaW4gdGhlIGRhdGEgdG8gcXVlcnkgYWdhaW5zdC5cblx0ICogQHBhcmFtIG9wdGlvbnMuaXNTdWdnZXN0aW9uIElzIHRoZSBxdWVyeSBmcm9tIGEgc3VnZ2VzdGlvbi5cblx0ICogQHJldHVybnMgVGhlIGxpc3Qgb2YgcmVzdWx0cyBhbmQgbmV3IGZpbHRlcnMuXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgZ2V0U2VhcmNoUmVzdWx0c1Byb2dyZXNzPyhcblx0XHRxdWVyeTogc3RyaW5nLFxuXHRcdGxhc3RSZXNwb25zZTogSG9tZVNlYXJjaExpc3RlbmVyUmVzcG9uc2UsXG5cdFx0b3B0aW9uczoge1xuXHRcdFx0cXVlcnlNaW5MZW5ndGg/OiBudW1iZXI7XG5cdFx0XHRxdWVyeUFnYWluc3Q/OiBzdHJpbmdbXTtcblx0XHRcdGlzU3VnZ2VzdGlvbj86IGJvb2xlYW47XG5cdFx0fVxuXHQpOiBQcm9taXNlPEhvbWVTZWFyY2hSZXN1bHRbXT4ge1xuXHRcdGlmICghdGhpcy5fbXMzNjVDb25uZWN0aW9uICYmIHRoaXMuX2ludGVncmF0aW9uSGVscGVycykge1xuXHRcdFx0Y29uc3QgdGhlbWVDbGllbnQgPSBhd2FpdCB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMuZ2V0VGhlbWVDbGllbnQoKTtcblx0XHRcdHRoaXMuX2Nvbm5lY3RMYXN0UmVzcG9uc2UgPSBsYXN0UmVzcG9uc2U7XG5cdFx0XHRjb25zdCByZXN1bHRzID0gW107XG5cdFx0XHRpZiAodGhpcy5fY29ubmVjdGlvbkVycm9yKSB7XG5cdFx0XHRcdGNvbnN0IGNvbm5lY3RSZXN1bHQgPSBhd2FpdCB0aGlzLmNyZWF0ZUNvbm5lY3RSZXN1bHQoXG5cdFx0XHRcdFx0dGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLnRlbXBsYXRlSGVscGVycyxcblx0XHRcdFx0XHRhd2FpdCB0aGVtZUNsaWVudC5nZXRQYWxldHRlKClcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKGNvbm5lY3RSZXN1bHQpIHtcblx0XHRcdFx0XHRyZXN1bHRzLnB1c2goY29ubmVjdFJlc3VsdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH1cblxuXHRcdGNvbnN0IG1pbkxlbmd0aCA9IG9wdGlvbnM/LnF1ZXJ5TWluTGVuZ3RoID8/IDM7XG5cdFx0cmV0dXJuIHF1ZXJ5Lmxlbmd0aCA+PSBtaW5MZW5ndGggPyBbdGhpcy5jcmVhdGVTZWFyY2hpbmdSZXN1bHQoKV0gOiBbXTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgYSBsaXN0IG9mIHNlYXJjaCByZXN1bHRzIGJhc2VkIG9uIHRoZSBxdWVyeSBhbmQgZmlsdGVycy5cblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB0byBzZWFyY2ggZm9yLlxuXHQgKiBAcGFyYW0gZmlsdGVycyBUaGUgZmlsdGVycyB0byBhcHBseS5cblx0ICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCBzZWFyY2ggcmVzcG9uc2UgdXNlZCBmb3IgdXBkYXRpbmcgZXhpc3RpbmcgcmVzdWx0cy5cblx0ICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIHNlYXJjaCBxdWVyeS5cblx0ICogQHBhcmFtIG9wdGlvbnMucXVlcnlNaW5MZW5ndGggVGhlIG1pbmltdW0gbGVuZ3RoIG9mIHRoZSBxdWVyeSBiZWZvcmUgc2hvd2luZyByZXN1bHRzLlxuXHQgKiBAcGFyYW0gb3B0aW9ucy5xdWVyeUFnYWluc3QgVGhlIGZpZWxkIHRvIHNlYXJjaCBhZ2FpbnN0LlxuXHQgKiBAcmV0dXJucyBUaGUgbGlzdCBvZiByZXN1bHRzIGFuZCBuZXcgZmlsdGVycy5cblx0ICovXG5cdHB1YmxpYyBhc3luYyBnZXRTZWFyY2hSZXN1bHRzKFxuXHRcdHF1ZXJ5OiBzdHJpbmcsXG5cdFx0ZmlsdGVyczogQ0xJRmlsdGVyW10sXG5cdFx0bGFzdFJlc3BvbnNlOiBIb21lU2VhcmNoTGlzdGVuZXJSZXNwb25zZSxcblx0XHRvcHRpb25zPzoge1xuXHRcdFx0cXVlcnlNaW5MZW5ndGg/OiBudW1iZXI7XG5cdFx0XHRxdWVyeUFnYWluc3Q/OiBzdHJpbmdbXTtcblx0XHR9XG5cdCk6IFByb21pc2U8SG9tZVNlYXJjaFJlc3BvbnNlPiB7XG5cdFx0Y29uc3QgaXNSZWNlbnQgPSBxdWVyeSA9PT0gXCIvcmVjZW50XCI7XG5cdFx0Y29uc3QgZGVmYXVsdEZpbHRlcnM6IE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzW10gPSBpc1JlY2VudFxuXHRcdFx0PyBbXCJGaWxlXCJdXG5cdFx0XHQ6IFtcIlVzZXJcIiwgXCJDb250YWN0XCIsIFwiRXZlbnRcIiwgXCJNZXNzYWdlXCIsIFwiQ2hhbm5lbFwiLCBcIlRlYW1cIiwgXCJDaGF0TWVzc2FnZVwiLCBcIkZpbGVcIl07XG5cblx0XHRjb25zdCBtaW5MZW5ndGggPSBvcHRpb25zPy5xdWVyeU1pbkxlbmd0aCA/PyAzO1xuXG5cdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbiAmJiB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMpIHtcblx0XHRcdGNvbnN0IHRoZW1lQ2xpZW50ID0gYXdhaXQgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLmdldFRoZW1lQ2xpZW50KCk7XG5cdFx0XHRjb25zdCBwYWxldHRlID0gYXdhaXQgdGhlbWVDbGllbnQuZ2V0UGFsZXR0ZSgpO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHQvLyBJZiBxdWVyeSBzdGFydHMgd2l0aCBtcyBqdXN0IGRvIGEgcGFzc3Rocm91Z2ggdG8gdGhlIGdyYXBoIEFQSVxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0IXRoaXMuX3NldHRpbmdzPy5kaXNhYmxlR3JhcGhFeHBsb3JlciAmJlxuXHRcdFx0XHRcdHF1ZXJ5LnN0YXJ0c1dpdGgoYC8ke3RoaXMuX3NldHRpbmdzPy5ncmFwaEV4cGxvcmVyUHJlZml4fS9gKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRjb25zdCBwYXRoID0gcXVlcnkucmVwbGFjZShgLyR7dGhpcy5fc2V0dGluZ3M/LmdyYXBoRXhwbG9yZXJQcmVmaXh9L2AsIFwiXCIpO1xuXHRcdFx0XHRcdGlmIChwYXRoLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZ1bGxQYXRoID0gYC92MS4wLyR7cGF0aH1gO1xuXG5cdFx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJHcmFwaCBBUEkgUmVxdWVzdFwiLCBmdWxsUGF0aCk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0KGZ1bGxQYXRoKTtcblx0XHRcdFx0XHRcdGNvbnN0IGpzb25SZXN1bHQgPSBhd2FpdCB0aGlzLmNyZWF0ZUdyYXBoSnNvblJlc3VsdChcblx0XHRcdFx0XHRcdFx0dGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLnRlbXBsYXRlSGVscGVycyxcblx0XHRcdFx0XHRcdFx0cGFsZXR0ZSxcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2Vcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRsYXN0UmVzcG9uc2UucmVzcG9uZChbanNvblJlc3VsdF0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChpc1JlY2VudCB8fCAocXVlcnkubGVuZ3RoID49IG1pbkxlbmd0aCAmJiAhcXVlcnkuc3RhcnRzV2l0aChcIi9cIikpKSB7XG5cdFx0XHRcdFx0Y29uc3QgbXMzNjVGaWx0ZXIgPSBmaWx0ZXJzPy5maW5kKChmKSA9PiBmLmlkID09PSBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fTVMzNjVfRklMVEVSUyk7XG5cblx0XHRcdFx0XHRsZXQgaW5jbHVkZU9wdGlvbnM6IE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzW10gPSBbLi4uZGVmYXVsdEZpbHRlcnNdO1xuXG5cdFx0XHRcdFx0aWYgKG1zMzY1RmlsdGVyPy5vcHRpb25zICYmIEFycmF5LmlzQXJyYXkobXMzNjVGaWx0ZXIub3B0aW9ucykpIHtcblx0XHRcdFx0XHRcdGluY2x1ZGVPcHRpb25zID0gbXMzNjVGaWx0ZXIub3B0aW9uc1xuXHRcdFx0XHRcdFx0XHQuZmlsdGVyKChvKSA9PiBvLmlzU2VsZWN0ZWQpXG5cdFx0XHRcdFx0XHRcdC5tYXAoKG8pID0+IG8udmFsdWUgYXMgTWljcm9zb2Z0MzY1T2JqZWN0VHlwZXMpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNvbnN0IGJhdGNoUmVxdWVzdHM6IEdyYXBoQmF0Y2hSZXF1ZXN0W10gPSBbXTtcblxuXHRcdFx0XHRcdGlmIChpbmNsdWRlT3B0aW9ucy5pbmNsdWRlcyhcIlVzZXJcIikpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHVzZXJTZWFyY2hGaWVsZHM6IChrZXlvZiBVc2VyKVtdID0gW1xuXHRcdFx0XHRcdFx0XHRcImRpc3BsYXlOYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFwiZ2l2ZW5OYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFwic3VybmFtZVwiLFxuXHRcdFx0XHRcdFx0XHRcImRlcGFydG1lbnRcIixcblx0XHRcdFx0XHRcdFx0XCJqb2JUaXRsZVwiLFxuXHRcdFx0XHRcdFx0XHRcIm1vYmlsZVBob25lXCJcblx0XHRcdFx0XHRcdF07XG5cdFx0XHRcdFx0XHRjb25zdCB1c2VyU2VhcmNoUXVlcnkgPSB1c2VyU2VhcmNoRmllbGRzLm1hcCgocykgPT4gYFwiJHtzfToke3F1ZXJ5fVwiYCkuam9pbihcIiBPUiBcIik7XG5cblx0XHRcdFx0XHRcdGJhdGNoUmVxdWVzdHMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdGlkOiBcIlVzZXJcIixcblx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRcdFx0XHR1cmw6IGAvdXNlcnM/JHNlYXJjaD0ke2VuY29kZVVSSUNvbXBvbmVudCh1c2VyU2VhcmNoUXVlcnkpfSYkdG9wPTEwYCxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XHRcdENvbnNpc3RlbmN5TGV2ZWw6IFwiZXZlbnR1YWxcIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGluY2x1ZGVPcHRpb25zLmluY2x1ZGVzKFwiQ29udGFjdFwiKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29udGFjdFNlYXJjaFF1ZXJ5ID0gYFwiJHtxdWVyeX1cImA7XG5cdFx0XHRcdFx0XHRiYXRjaFJlcXVlc3RzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRpZDogXCJDb250YWN0XCIsXG5cdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0XHRcdFx0dXJsOiBgL21lL2NvbnRhY3RzPyRzZWFyY2g9JHtlbmNvZGVVUklDb21wb25lbnQoY29udGFjdFNlYXJjaFF1ZXJ5KX0mJHRvcD0xMGBcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaW5jbHVkZU9wdGlvbnMuaW5jbHVkZXMoXCJNZXNzYWdlXCIpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBtZXNzYWdlU2VhcmNoUXVlcnkgPSBgXCIke3F1ZXJ5fVwiYDtcblx0XHRcdFx0XHRcdGJhdGNoUmVxdWVzdHMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdGlkOiBcIk1lc3NhZ2VcIixcblx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRcdFx0XHR1cmw6IGAvbWUvbWVzc2FnZXM/JHNlbGVjdD1zZW5kZXIsc3ViamVjdCxib2R5UHJldmlldyxyZWNlaXZlZERhdGVUaW1lLHdlYkxpbmsmJHNlYXJjaD0ke2VuY29kZVVSSUNvbXBvbmVudChcblx0XHRcdFx0XHRcdFx0XHRtZXNzYWdlU2VhcmNoUXVlcnlcblx0XHRcdFx0XHRcdFx0KX0mJHRvcD0xMGBcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaW5jbHVkZU9wdGlvbnMuaW5jbHVkZXMoXCJFdmVudFwiKSkge1xuXHRcdFx0XHRcdFx0YmF0Y2hSZXF1ZXN0cy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0aWQ6IFwiRXZlbnRcIixcblx0XHRcdFx0XHRcdFx0dXJsOiBcIi9zZWFyY2gvcXVlcnlcIixcblx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0XHRcdFx0Ym9keToge1xuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RzOiBbXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVudGl0eVR5cGVzOiBbXCJldmVudFwiXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0cXVlcnk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRxdWVyeVN0cmluZzogcXVlcnlcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZnJvbTogMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2l6ZTogMTBcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGluY2x1ZGVPcHRpb25zLmluY2x1ZGVzKFwiQ2hhdE1lc3NhZ2VcIikpIHtcblx0XHRcdFx0XHRcdGJhdGNoUmVxdWVzdHMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdGlkOiBcIkNoYXRNZXNzYWdlXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogXCIvc2VhcmNoL3F1ZXJ5XCIsXG5cdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0czogW1xuXHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbnRpdHlUeXBlczogW1wiY2hhdE1lc3NhZ2VcIl0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHF1ZXJ5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cXVlcnlTdHJpbmc6IHF1ZXJ5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZyb206IDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNpemU6IDEwXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGluY2x1ZGVPcHRpb25zLmluY2x1ZGVzKFwiRmlsZVwiKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVNlYXJjaFF1ZXJ5ID0gYCcke3F1ZXJ5fSdgO1xuXHRcdFx0XHRcdFx0YmF0Y2hSZXF1ZXN0cy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0aWQ6IFwiRmlsZVwiLFxuXHRcdFx0XHRcdFx0XHR1cmw6IGlzUmVjZW50XG5cdFx0XHRcdFx0XHRcdFx0PyBcIi9tZS9kcml2ZS9yZWNlbnRcIlxuXHRcdFx0XHRcdFx0XHRcdDogYC9tZS9kcml2ZS9yb290L3NlYXJjaChxPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmaWxlU2VhcmNoUXVlcnlcblx0XHRcdFx0XHRcdFx0XHRcdCl9KT8kdG9wPTEwJiRvcmRlcmJ5PWxhc3RNb2RpZmllZERhdGVUaW1lIGRlc2MmJGV4cGFuZD10aHVtYm5haWxzYCxcblx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb25zdCBob21lUmVzdWx0czogSG9tZVNlYXJjaFJlc3VsdFtdID0gYXdhaXQgdGhpcy5zZW5kQmF0Y2hRdWVyeShcblx0XHRcdFx0XHRcdHF1ZXJ5LFxuXHRcdFx0XHRcdFx0aW5jbHVkZU9wdGlvbnMsXG5cdFx0XHRcdFx0XHRiYXRjaFJlcXVlc3RzXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdGlmIChpbmNsdWRlT3B0aW9ucy5pbmNsdWRlcyhcIlRlYW1cIikgfHwgaW5jbHVkZU9wdGlvbnMuaW5jbHVkZXMoXCJDaGFubmVsXCIpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCB0ZWFtQW5kQ2hhbm5lbHMgb2YgdGhpcy5fdGVhbXNBbmRDaGFubmVsc0NhY2hlKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0XHRpbmNsdWRlT3B0aW9ucy5pbmNsdWRlcyhcIlRlYW1cIikgJiZcblx0XHRcdFx0XHRcdFx0XHQodGVhbUFuZENoYW5uZWxzLnRlYW0uZGlzcGxheU5hbWU/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkgPz9cblx0XHRcdFx0XHRcdFx0XHRcdHRlYW1BbmRDaGFubmVscy50ZWFtLmRlc2NyaXB0aW9uPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpKVxuXHRcdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0XHRob21lUmVzdWx0cy5wdXNoKFxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVMb2FkaW5nUmVzdWx0KFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMudGVtcGxhdGVIZWxwZXJzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYWxldHRlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZWFtQW5kQ2hhbm5lbHMudGVhbSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJkaXNwbGF5TmFtZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIlRlYW1cIlxuXHRcdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKGluY2x1ZGVPcHRpb25zLmluY2x1ZGVzKFwiQ2hhbm5lbFwiKSkge1xuXHRcdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgY2hhbm5lbCBvZiB0ZWFtQW5kQ2hhbm5lbHMuY2hhbm5lbHMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hhbm5lbC5kaXNwbGF5TmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSA/P1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjaGFubmVsLmRlc2NyaXB0aW9uPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpXG5cdFx0XHRcdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aG9tZVJlc3VsdHMucHVzaChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUxvYWRpbmdSZXN1bHQoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMudGVtcGxhdGVIZWxwZXJzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFsZXR0ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Li4uY2hhbm5lbCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGVhbTogdGVhbUFuZENoYW5uZWxzLnRlYW1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcImRpc3BsYXlOYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcIkNoYW5uZWxcIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRsYXN0UmVzcG9uc2UucmVzcG9uZChob21lUmVzdWx0cyk7XG5cblx0XHRcdFx0XHRjb25zdCByZXN1bHRUeXBlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHNlYXJjaFJlc3VsdCBvZiBob21lUmVzdWx0cykge1xuXHRcdFx0XHRcdFx0aWYgKHNlYXJjaFJlc3VsdC5sYWJlbCkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRUeXBlcy5hZGQoc2VhcmNoUmVzdWx0LmxhYmVsKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb25zdCBuZXdGaWx0ZXJzID0gcmVzdWx0VHlwZXMuZW50cmllcygpO1xuXHRcdFx0XHRcdGxhc3RSZXNwb25zZS51cGRhdGVDb250ZXh0KHtcblx0XHRcdFx0XHRcdGZpbHRlcnM6IFtcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGlkOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fTVMzNjVfRklMVEVSUyxcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogXCJNaWNyb3NvZnQgMzY1XCIsXG5cdFx0XHRcdFx0XHRcdFx0b3B0aW9uczogWy4uLm5ld0ZpbHRlcnNdLm1hcCgoZikgPT4gKHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBmWzBdLFxuXHRcdFx0XHRcdFx0XHRcdFx0aXNTZWxlY3RlZDogdHJ1ZVxuXHRcdFx0XHRcdFx0XHRcdH0pKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBtZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IGVycjtcblx0XHRcdFx0bGFzdFJlc3BvbnNlLnJlc3BvbmQoW1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlR3JhcGhKc29uUmVzdWx0KHRoaXMuX2ludGVncmF0aW9uSGVscGVycy50ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHtcblx0XHRcdFx0XHRcdHN0YXR1czogNDAwLFxuXHRcdFx0XHRcdFx0ZGF0YTogbWVzc2FnZVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdF0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRsYXN0UmVzcG9uc2UucmV2b2tlKGAke3RoaXMuX2RlZmluaXRpb24/LmlkfS1zZWFyY2hpbmdgKTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN1bHRzOiBbXVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQW4gZW50cnkgaGFzIGJlZW4gc2VsZWN0ZWQuXG5cdCAqIEBwYXJhbSByZXN1bHQgVGhlIGRpc3BhdGNoZWQgcmVzdWx0LlxuXHQgKiBAcGFyYW0gbGFzdFJlc3BvbnNlIFRoZSBsYXN0IHJlc3BvbnNlLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBpdGVtIHdhcyBoYW5kbGVkLlxuXHQgKi9cblx0cHVibGljIGFzeW5jIGl0ZW1TZWxlY3Rpb24oXG5cdFx0cmVzdWx0OiBIb21lRGlzcGF0Y2hlZFNlYXJjaFJlc3VsdCxcblx0XHRsYXN0UmVzcG9uc2U6IEhvbWVTZWFyY2hMaXN0ZW5lclJlc3BvbnNlXG5cdCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmIChyZXN1bHQuYWN0aW9uLnRyaWdnZXIgPT09IFwiZm9jdXMtY2hhbmdlXCIpIHtcblx0XHRcdGlmIChyZXN1bHQuZGF0YT8uc3RhdGUgPT09IFwibG9hZGluZ1wiICYmIHRoaXMuX21zMzY1Q29ubmVjdGlvbiAmJiB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMpIHtcblx0XHRcdFx0Y29uc3QgdGhlbWVDbGllbnQgPSBhd2FpdCB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMuZ2V0VGhlbWVDbGllbnQoKTtcblx0XHRcdFx0Y29uc3QgcGFsZXR0ZSA9IGF3YWl0IHRoZW1lQ2xpZW50LmdldFBhbGV0dGUoKTtcblx0XHRcdFx0Y29uc3QgdGVtcGxhdGVIZWxwZXJzID0gdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLnRlbXBsYXRlSGVscGVycztcblx0XHRcdFx0Y29uc3QgYWN0aW9uRGF0YSA9IHJlc3VsdC5kYXRhIGFzIEFjdGlvbkxvYWRpbmdEYXRhO1xuXHRcdFx0XHRjb25zdCBvYmpUeXBlID0gYWN0aW9uRGF0YS5vYmpUeXBlIGFzIE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzO1xuXG5cdFx0XHRcdGNvbnN0IHJlc3VsdEhhbmRsZXJzOiB7XG5cdFx0XHRcdFx0W2tleSBpbiBNaWNyb3NvZnQzNjVPYmplY3RUeXBlc10/OiAoKSA9PiBQcm9taXNlPEhvbWVTZWFyY2hSZXN1bHQ+O1xuXHRcdFx0XHR9ID0ge1xuXHRcdFx0XHRcdFVzZXI6IGFzeW5jICgpID0+IHRoaXMuY3JlYXRlVXNlclJlc3VsdCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGFjdGlvbkRhdGEub2JqIGFzIFVzZXIpLFxuXHRcdFx0XHRcdENvbnRhY3Q6IGFzeW5jICgpID0+IHRoaXMuY3JlYXRlQ29udGFjdFJlc3VsdCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGFjdGlvbkRhdGEub2JqIGFzIENvbnRhY3QpLFxuXHRcdFx0XHRcdE1lc3NhZ2U6IGFzeW5jICgpID0+IHRoaXMuY3JlYXRlTWVzc2FnZVJlc3VsdCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGFjdGlvbkRhdGEub2JqIGFzIE1lc3NhZ2UpLFxuXHRcdFx0XHRcdEV2ZW50OiBhc3luYyAoKSA9PiB0aGlzLmNyZWF0ZUV2ZW50UmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYWN0aW9uRGF0YS5vYmogYXMgRXZlbnQpLFxuXHRcdFx0XHRcdENoYXRNZXNzYWdlOiBhc3luYyAoKSA9PlxuXHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDaGF0TWVzc2FnZVJlc3VsdCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGFjdGlvbkRhdGEub2JqIGFzIENoYXRNZXNzYWdlKSxcblx0XHRcdFx0XHRDaGFubmVsOiBhc3luYyAoKSA9PlxuXHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDaGFubmVsUmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYWN0aW9uRGF0YS5vYmogYXMgQ2hhbm5lbCAmIHsgdGVhbTogVGVhbSB9KSxcblx0XHRcdFx0XHRUZWFtOiBhc3luYyAoKSA9PiB0aGlzLmNyZWF0ZVRlYW1SZXN1bHQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBhY3Rpb25EYXRhLm9iaiBhcyBUZWFtKSxcblx0XHRcdFx0XHRGaWxlOiBhc3luYyAoKSA9PiB0aGlzLmNyZWF0ZUZpbGVSZXN1bHQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBhY3Rpb25EYXRhLm9iaiBhcyBEcml2ZUl0ZW0pXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Y29uc3QgdHlwZUhhbmRsZXIgPSByZXN1bHRIYW5kbGVyc1tvYmpUeXBlXTtcblx0XHRcdFx0aWYgKHR5cGVIYW5kbGVyKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgdHlwZUhhbmRsZXIoKTtcblx0XHRcdFx0XHRpZiAocmVzKSB7XG5cdFx0XHRcdFx0XHRsYXN0UmVzcG9uc2UucmVzcG9uZChbcmVzXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IGVsc2UgaWYgKHJlc3VsdC5hY3Rpb24udHJpZ2dlciA9PT0gXCJ1c2VyLWFjdGlvblwiKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVBY3Rpb24ocmVzdWx0LmFjdGlvbi5uYW1lLCByZXN1bHQuZGF0YSBhcyBBY3Rpb25EYXRhLCBsYXN0UmVzcG9uc2UpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb25uZWN0IHRvIHRoZSBncmFwaCBBUEkuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNvbm5lY3RUb01TMzY1KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIXRoaXMuX3NldHRpbmdzPy5jbGllbnRJZCB8fCAhdGhpcy5fc2V0dGluZ3M/LnRlbmFudElkIHx8ICF0aGlzLl9zZXR0aW5ncz8ucmVkaXJlY3RVcmkpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBtaXNzaW5nIGNsaWVudElkLCB0ZW5hbnRJZCBvciByZWRpcmVjdFVyaVwiKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiQ29ubmVjdGluZyB0byBNUyBHcmFwaCBBUElcIiwge1xuXHRcdFx0XHRjbGllbnRJZDogdGhpcy5fc2V0dGluZ3MuY2xpZW50SWQsXG5cdFx0XHRcdHRlbmFudElkOiB0aGlzLl9zZXR0aW5ncy50ZW5hbnRJZCxcblx0XHRcdFx0cmVkaXJlY3RVcmk6IHRoaXMuX3NldHRpbmdzLnJlZGlyZWN0VXJpXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKHRoaXMuX3NldHRpbmdzLmVuYWJsZUxpYkxvZ2dpbmcpIHtcblx0XHRcdFx0ZW5hYmxlTG9nZ2luZygpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9jb25uZWN0aW9uRXJyb3IgPSB1bmRlZmluZWQ7XG5cdFx0XHR0aGlzLl9tczM2NUNvbm5lY3Rpb24gPSBhd2FpdCBjb25uZWN0KFxuXHRcdFx0XHR0aGlzLl9zZXR0aW5ncy5jbGllbnRJZCxcblx0XHRcdFx0dGhpcy5fc2V0dGluZ3MudGVuYW50SWQsXG5cdFx0XHRcdHRoaXMuX3NldHRpbmdzLnJlZGlyZWN0VXJpLFxuXHRcdFx0XHR0aGlzLl9zZXR0aW5ncy5wZXJtaXNzaW9uc1xuXHRcdFx0KTtcblxuXHRcdFx0dGhpcy5fY2FjaGVJbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKGFzeW5jICgpID0+IHRoaXMudXBkYXRlQ2FjaGUoKSwgMzAwMDApO1xuXHRcdFx0d2luZG93LnNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZUNhY2hlKCk7XG5cdFx0XHR9LCAwKTtcblxuXHRcdFx0aWYgKHRoaXMuX2Nvbm5lY3RMYXN0UmVzcG9uc2UpIHtcblx0XHRcdFx0dGhpcy5fY29ubmVjdExhc3RSZXNwb25zZS5yZXZva2UoYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LWNvbm5lY3RgKTtcblx0XHRcdFx0dGhpcy5fY29ubmVjdExhc3RSZXNwb25zZSA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHRoaXMuX21zMzY1Q29ubmVjdGlvbiA9IHVuZGVmaW5lZDtcblx0XHRcdHRoaXMuX2Nvbm5lY3Rpb25FcnJvciA9IHRoaXMuZm9ybWF0RXJyb3IoZXJyKTtcblx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJDb25uZWN0aW5nIHRvIE1TIEdyYXBoIEFQSSBmYWlsZWRcIiwgZXJyKTtcblx0XHRcdGlmICh0aGlzLl9jb25uZWN0TGFzdFJlc3BvbnNlICYmIHRoaXMuX2ludGVncmF0aW9uSGVscGVycykge1xuXHRcdFx0XHRjb25zdCB0aGVtZUNsaWVudCA9IGF3YWl0IHRoaXMuX2ludGVncmF0aW9uSGVscGVycy5nZXRUaGVtZUNsaWVudCgpO1xuXHRcdFx0XHR0aGlzLl9jb25uZWN0TGFzdFJlc3BvbnNlLnJlc3BvbmQoW1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlQ29ubmVjdFJlc3VsdChcblx0XHRcdFx0XHRcdHRoaXMuX2ludGVncmF0aW9uSGVscGVycy50ZW1wbGF0ZUhlbHBlcnMsXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGVtZUNsaWVudC5nZXRQYWxldHRlKClcblx0XHRcdFx0XHQpXG5cdFx0XHRcdF0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgYW4gYWN0aW9uIGZyb20gYSBob21lIHRlbXBsYXRlLlxuXHQgKiBAcGFyYW0gYWN0aW9uTmFtZSBUaGUgbmFtZSBvZiB0aGUgYWN0aW9uLlxuXHQgKiBAcGFyYW0gYWN0aW9uRGF0YSBUaGUgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIGFjdGlvbi5cblx0ICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCByZXNwb25zZSBpbiBjYXNlIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSByZXN1bHRzLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBhY3Rpb24gd2FzIGhhbmRsZWQuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGhhbmRsZUFjdGlvbihcblx0XHRhY3Rpb25OYW1lOiBzdHJpbmcsXG5cdFx0YWN0aW9uRGF0YTogQWN0aW9uRGF0YSxcblx0XHRsYXN0UmVzcG9uc2U6IEhvbWVTZWFyY2hMaXN0ZW5lclJlc3BvbnNlXG5cdCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdHN3aXRjaCAoYWN0aW9uTmFtZSkge1xuXHRcdFx0Y2FzZSBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX0NPTk5FQ1Q6XG5cdFx0XHRcdGxhc3RSZXNwb25zZS5yZXZva2UoYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LWNvbm5lY3RgKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5jb25uZWN0VG9NUzM2NSgpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdGNhc2UgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DQUxMOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVUZWFtc0NhbGwoYWN0aW9uRGF0YSk7XG5cdFx0XHRjYXNlIE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfTUVFVElORzpcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlVGVhbXNNZWV0aW5nKGFjdGlvbkRhdGEpO1xuXHRcdFx0Y2FzZSBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX0NIQVQ6XG5cdFx0XHRcdHJldHVybiB0aGlzLmhhbmRsZVRlYW1zQ2hhdChhY3Rpb25EYXRhKTtcblx0XHRcdGNhc2UgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PVVRMT09LX0VNQUlMOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVPdXRsb29rTWFpbChhY3Rpb25EYXRhKTtcblx0XHRcdGNhc2UgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PVVRMT09LX0VWRU5UOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVPdXRsb29rRXZlbnQoYWN0aW9uRGF0YSk7XG5cdFx0XHRjYXNlIE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fUEhPTkVfQ0FMTDpcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlUGhvbmVDYWxsKGFjdGlvbkRhdGEpO1xuXHRcdFx0Y2FzZSBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1NIQVJFX0NPTlRBQ1Q6XG5cdFx0XHRcdHJldHVybiB0aGlzLmhhbmRsZVNoYXJlQ29udGFjdChhY3Rpb25EYXRhKTtcblx0XHRcdGNhc2UgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9DT1BZOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVDb3B5KGFjdGlvbkRhdGEpO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYgKGFjdGlvbk5hbWUuc3RhcnRzV2l0aChNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09QRU4pKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlT3BlbihhY3Rpb25OYW1lLCBhY3Rpb25EYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBhIHRlYW1zIGNhbGwuXG5cdCAqIEBwYXJhbSBhY3Rpb25EYXRhIFRoZSBkYXRhIGZvciB0aGUgY2FsbC5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiBpdCB3YXMgaGFuZGxlZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlVGVhbXNDYWxsKGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJUZWFtcyBDYWxsXCIsIGFjdGlvbkRhdGEuZW1haWxzKTtcblx0XHRcdGNvbnN0IHRlYW1zQ29ubmVjdGlvbiA9IG5ldyBUZWFtc0Nvbm5lY3Rpb24odGhpcy5fbXMzNjVDb25uZWN0aW9uKTtcblx0XHRcdGF3YWl0IHRlYW1zQ29ubmVjdGlvbi5zdGFydENhbGwoYWN0aW9uRGF0YS5lbWFpbHMpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJObyBjb25uZWN0aW9uXCIpO1xuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBhIHRlYW1zIG1lZXRpbmcuXG5cdCAqIEBwYXJhbSBhY3Rpb25EYXRhIFRoZSBkYXRhIGZvciB0aGUgbWVldGluZy5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiBpdCB3YXMgaGFuZGxlZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlVGVhbXNNZWV0aW5nKGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uICYmIGFjdGlvbkRhdGEuZW1haWxzKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJUZWFtcyBNZWV0aW5nXCIsIHRoaXMuX21zMzY1Q29ubmVjdGlvbi5jdXJyZW50VXNlci5tYWlsLCBhY3Rpb25EYXRhLmVtYWlscyk7XG5cdFx0XHRhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3Nlcihcblx0XHRcdFx0YCR7TWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX1RFQU1TX1BST1RPQ09MfS9sL21lZXRpbmcvbmV3P2F0dGVuZGVlcz0ke1xuXHRcdFx0XHRcdHRoaXMuX21zMzY1Q29ubmVjdGlvbi5jdXJyZW50VXNlci5tYWlsXG5cdFx0XHRcdH0sJHthY3Rpb25EYXRhLmVtYWlscy5qb2luKFwiLFwiKX1gXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJObyBjb25uZWN0aW9uLCBvciBhY3Rpb24gZW1haWxzXCIsIGFjdGlvbkRhdGEuZW1haWxzKTtcblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgYSB0ZWFtcyBjaGF0LlxuXHQgKiBAcGFyYW0gYWN0aW9uRGF0YSBUaGUgZGF0YSBmb3IgdGhlIGNoYXQuXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgaXQgd2FzIGhhbmRsZWQuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGhhbmRsZVRlYW1zQ2hhdChhY3Rpb25EYXRhOiBBY3Rpb25EYXRhKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbj8uY3VycmVudFVzZXI/Lm1haWwpIHtcblx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcblx0XHRcdFx0XCJUZWFtcyBDaGF0XCIsXG5cdFx0XHRcdHRoaXMuX21zMzY1Q29ubmVjdGlvbi5jdXJyZW50VXNlci5tYWlsLFxuXHRcdFx0XHRhY3Rpb25EYXRhLnRlYW1JZCxcblx0XHRcdFx0YWN0aW9uRGF0YS5jaGFubmVsSWQsXG5cdFx0XHRcdGFjdGlvbkRhdGEuZW1haWxzXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgdGVhbXNDb25uZWN0aW9uID0gbmV3IFRlYW1zQ29ubmVjdGlvbih0aGlzLl9tczM2NUNvbm5lY3Rpb24pO1xuXG5cdFx0XHRpZiAoYWN0aW9uRGF0YS5jaGF0SWQgJiYgYWN0aW9uRGF0YS5tZXNzYWdlSWQpIHtcblx0XHRcdFx0YXdhaXQgZmluLlN5c3RlbS5vcGVuVXJsV2l0aEJyb3dzZXIoXG5cdFx0XHRcdFx0YCR7TWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX1RFQU1TX1BST1RPQ09MfS9sL21lc3NhZ2UvJHthY3Rpb25EYXRhLmNoYXRJZH0vJHthY3Rpb25EYXRhLm1lc3NhZ2VJZH1gXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2UgaWYgKGFjdGlvbkRhdGEudGVhbUlkKSB7XG5cdFx0XHRcdGF3YWl0IHRlYW1zQ29ubmVjdGlvbi5zdGFydENoYXQoeyB0ZWFtSWQ6IGFjdGlvbkRhdGEudGVhbUlkLCBjaGFubmVsSWQ6IGFjdGlvbkRhdGEuY2hhbm5lbElkIH0pO1xuXHRcdFx0fSBlbHNlIGlmIChhY3Rpb25EYXRhLmVtYWlscykge1xuXHRcdFx0XHRhd2FpdCB0ZWFtc0Nvbm5lY3Rpb24uc3RhcnRDaGF0KHtcblx0XHRcdFx0XHRlbWFpbEFkZHJlc3NlczogW3RoaXMuX21zMzY1Q29ubmVjdGlvbi5jdXJyZW50VXNlci5tYWlsLCAuLi5hY3Rpb25EYXRhLmVtYWlsc11cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcblx0XHRcdFwiTm8gY29ubmVjdGlvbiB1c2VyIG1haWwsIG9yIGFjdGlvbiBlbWFpbHNcIixcblx0XHRcdHRoaXMuX21zMzY1Q29ubmVjdGlvbj8uY3VycmVudFVzZXI/Lm1haWwsXG5cdFx0XHRhY3Rpb25EYXRhLmVtYWlsc1xuXHRcdCk7XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogSGFuZGxlIGFuIG91dGxvb2sgZW1haWwuXG5cdCAqIEBwYXJhbSBhY3Rpb25EYXRhIFRoZSBkYXRhIGZvciB0aGUgZW1haWwuXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgaXQgd2FzIGhhbmRsZWQuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGhhbmRsZU91dGxvb2tNYWlsKGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRpZiAodGhpcy5faW50ZWdyYXRpb25IZWxwZXJzICYmIHRoaXMuX21zMzY1Q29ubmVjdGlvbiAmJiBhY3Rpb25EYXRhLmVtYWlscykge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiT3BlbiBPdXRsb29rIE1haWxcIiwgYWN0aW9uRGF0YS5lbWFpbHMpO1xuXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX21zMzY1Q29ubmVjdGlvbi5leGVjdXRlQXBpUmVxdWVzdDxNZXNzYWdlPihcIi92MS4wL21lL21lc3NhZ2VzXCIsIFwiUE9TVFwiLCB7XG5cdFx0XHRcdHRvUmVjaXBpZW50czogYWN0aW9uRGF0YS5lbWFpbHMubWFwKChlKSA9PiAoe1xuXHRcdFx0XHRcdGVtYWlsQWRkcmVzczoge1xuXHRcdFx0XHRcdFx0YWRkcmVzczogZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkpXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKHJlc3BvbnNlPy5kYXRhPy53ZWJMaW5rKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuX2ludGVncmF0aW9uSGVscGVycy5sYXVuY2hWaWV3KHsgdXJsOiByZXNwb25zZS5kYXRhLndlYkxpbmsgfSk7XG5cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJObyB3ZWJMaW5rIGluIHJlc3BvbnNlIGRhdGFcIiwgcmVzcG9uc2UuZGF0YSk7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgYW4gb3V0bG9vayBldmVudC5cblx0ICogQHBhcmFtIGFjdGlvbkRhdGEgVGhlIGRhdGEgZm9yIHRoZSBldmVudC5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiBpdCB3YXMgaGFuZGxlZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlT3V0bG9va0V2ZW50KGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRpZiAodGhpcy5faW50ZWdyYXRpb25IZWxwZXJzICYmIHRoaXMuX21zMzY1Q29ubmVjdGlvbiAmJiBhY3Rpb25EYXRhLmVtYWlscykge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiT3BlbiBPdXRsb29rIEV2ZW50XCIsIGFjdGlvbkRhdGEuZW1haWxzKTtcblxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8RXZlbnQ+KFwiL3YxLjAvbWUvZXZlbnRzXCIsIFwiUE9TVFwiLCB7XG5cdFx0XHRcdGF0dGVuZGVlczogYWN0aW9uRGF0YS5lbWFpbHMubWFwKChlKSA9PiAoe1xuXHRcdFx0XHRcdGVtYWlsQWRkcmVzczoge1xuXHRcdFx0XHRcdFx0YWRkcmVzczogZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkpXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKHJlc3BvbnNlPy5kYXRhPy53ZWJMaW5rKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuX2ludGVncmF0aW9uSGVscGVycy5sYXVuY2hWaWV3KHsgdXJsOiByZXNwb25zZS5kYXRhLndlYkxpbmsgfSk7XG5cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJObyB3ZWJMaW5rIGluIHJlc3BvbnNlIGRhdGFcIiwgcmVzcG9uc2UuZGF0YSk7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgYSBwaG9uZSBjYWxsLlxuXHQgKiBAcGFyYW0gYWN0aW9uRGF0YSBUaGUgZGF0YSBmb3IgdGhlIGNhbGwuXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgaXQgd2FzIGhhbmRsZWQuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGhhbmRsZVBob25lQ2FsbChhY3Rpb25EYXRhOiBBY3Rpb25EYXRhKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiUGhvbmUgQ2FsbFwiLCBhY3Rpb25EYXRhLnBob25lKTtcblx0XHRhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3NlcihgdGVsOiR7YWN0aW9uRGF0YS5waG9uZX1gKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgb3BlbiBvZiBhIHVybC5cblx0ICogQHBhcmFtIGFjdGlvbk5hbWUgVGhlIG5hbWUgb2YgdGhlIGFjdGlvbi5cblx0ICogQHBhcmFtIGFjdGlvbkRhdGEgVGhlIGRhdGEgZm9yIHRoZSB1cmwgb3BlbmluZy5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgdXJsIHdhcyBvcGVuZWQuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGhhbmRsZU9wZW4oYWN0aW9uTmFtZTogc3RyaW5nLCBhY3Rpb25EYXRhOiBBY3Rpb25EYXRhKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Y29uc3QgbGlua0luZGV4ID0gYWN0aW9uTmFtZS5pbmRleE9mKFwiX1wiKTtcblx0XHRjb25zdCB1ID0gbGlua0luZGV4IDwgMCA/IGFjdGlvbkRhdGEudXJsIDogYWN0aW9uRGF0YS51cmxzPy5bYWN0aW9uTmFtZS5zbGljZShsaW5rSW5kZXggKyAxKV07XG5cblx0XHRpZiAodSkge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiT3BlblwiLCB1KTtcblxuXHRcdFx0aWYgKHUuc3RhcnRzV2l0aChNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fVEVBTVNfVVJMKSkge1xuXHRcdFx0XHRhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3Nlcihcblx0XHRcdFx0XHR1LnJlcGxhY2UoTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX1RFQU1TX1VSTCwgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX1RFQU1TX1BST1RPQ09MKVxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLmxhdW5jaFZpZXcoeyB1cmw6IHUgfSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihgVXJsIG5vdCBmb3VuZCBpbiBhY3Rpb25EYXRhLCBsaW5rSW5kZXggJHtsaW5rSW5kZXh9YCk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBzaGFyaW5nIGEgY29udGFjdC5cblx0ICogQHBhcmFtIGFjdGlvbkRhdGEgVGhlIGRhdGEgZm9yIHRoZSBzaGFyaW5nLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB1cmwgd2FzIG9wZW5lZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlU2hhcmVDb250YWN0KGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRpZiAoYWN0aW9uRGF0YT8uZW1haWxzPy5bMF0pIHtcblx0XHRcdGNvbnN0IGZkYzNDb250YWN0OiBGZGMzQ29udGFjdCA9IHtcblx0XHRcdFx0dHlwZTogXCJmZGMzLmNvbnRhY3RcIixcblx0XHRcdFx0bmFtZTogYWN0aW9uRGF0YS5uYW1lLFxuXHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdGVtYWlsOiBhY3Rpb25EYXRhLmVtYWlsc1swXVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0aWYgKHdpbmRvdy5mZGMzKSB7XG5cdFx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcIlNoYXJlIENvbnRhY3RcIiwgZmRjM0NvbnRhY3QpO1xuXHRcdFx0XHRhd2FpdCB3aW5kb3c/LmZkYzMucmFpc2VJbnRlbnQoXCJWaWV3Q29udGFjdFwiLCBmZGMzQ29udGFjdCBhcyBGREMzQ29udGV4dCk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkZEQzMgQVBJIGlzIG5vdCBhdmFpbGFibGUgc28gVmlld0NvbnRhY3QgY2Fubm90IGJlIHJhaXNlZC5cIiwgZmRjM0NvbnRhY3QpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJObyBjb250YWN0IGluZm9ybWF0aW9uIHRvIHNoYXJlXCIsIGFjdGlvbkRhdGEuZW1haWxzKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogSGFuZGxlIGNvcHkgdG8gY2xpcGJvYXJkIGZvciBKU09OIGRhdGEuXG5cdCAqIEBwYXJhbSBhY3Rpb25EYXRhIFRoZSBkYXRhIGZvciBjb3B5aW5nLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB1cmwgd2FzIG9wZW5lZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlQ29weShhY3Rpb25EYXRhOiBBY3Rpb25EYXRhKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiQ29weSBKU09OXCIsIGFjdGlvbkRhdGEuanNvbik7XG5cdFx0YXdhaXQgZmluLkNsaXBib2FyZC53cml0ZVRleHQoeyBkYXRhOiBKU09OLnN0cmluZ2lmeShhY3Rpb25EYXRhLmpzb24sIHVuZGVmaW5lZCwgXCJcXHRcIikgfSk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvKipcblx0ICogU2VuZCBhIGJhdGNoIHF1ZXJ5IHRvIHRoZSBNUzM2NSBncmFwaC5cblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB0byBzZW5kLlxuXHQgKiBAcGFyYW0gaW5jbHVkZU9wdGlvbnMgVGhlIG9iamVjdCB0eXBlcyB0byBpbmNsdWRlLlxuXHQgKiBAcGFyYW0gYmF0Y2hSZXF1ZXN0cyBUaGUgYmF0Y2ggcmVxdWVzdHMgdG8gc2VuZC5cblx0ICogQHJldHVybnMgVGhlIHJlc3VsdHMgdG8gZGlzcGxheSBpbiBob21lLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBzZW5kQmF0Y2hRdWVyeShcblx0XHRxdWVyeTogc3RyaW5nLFxuXHRcdGluY2x1ZGVPcHRpb25zOiBNaWNyb3NvZnQzNjVPYmplY3RUeXBlc1tdLFxuXHRcdGJhdGNoUmVxdWVzdHM6IEdyYXBoQmF0Y2hSZXF1ZXN0W11cblx0KTogUHJvbWlzZTxIb21lU2VhcmNoUmVzdWx0W10+IHtcblx0XHRjb25zdCBob21lUmVzdWx0czogSG9tZVNlYXJjaFJlc3VsdFtdID0gW107XG5cblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uICYmIHRoaXMuX2ludGVncmF0aW9uSGVscGVycykge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiR3JhcGggQVBJIEJhdGNoIFJlcXVlc3RcIiwgYmF0Y2hSZXF1ZXN0cyk7XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IGJhdGNoUmVzcG9uc2VzID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PEdyYXBoQmF0Y2hSZXNwb25zZT4oXG5cdFx0XHRcdFx0XCIvdjEuMC8kYmF0Y2hcIixcblx0XHRcdFx0XHRcIlBPU1RcIixcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0czogYmF0Y2hSZXF1ZXN0c1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoYmF0Y2hSZXNwb25zZXMuZGF0YT8ucmVzcG9uc2VzICYmIEFycmF5LmlzQXJyYXkoYmF0Y2hSZXNwb25zZXMuZGF0YS5yZXNwb25zZXMpKSB7XG5cdFx0XHRcdFx0Y29uc3QgdGhlbWVDbGllbnQgPSBhd2FpdCB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMuZ2V0VGhlbWVDbGllbnQoKTtcblx0XHRcdFx0XHRjb25zdCBwYWxldHRlID0gYXdhaXQgdGhlbWVDbGllbnQuZ2V0UGFsZXR0ZSgpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmF0Y2hSZXNwb25zZSBvZiBiYXRjaFJlc3BvbnNlcy5kYXRhLnJlc3BvbnNlcykge1xuXHRcdFx0XHRcdFx0aWYgKGJhdGNoUmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKGAke2JhdGNoUmVzcG9uc2UuaWR9IFJlc3BvbnNlYCwgYmF0Y2hSZXNwb25zZS5ib2R5KTtcblxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmhhbmRsZUJhdGNoUXVlcnlSZXNwb25zZShcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMudGVtcGxhdGVIZWxwZXJzLFxuXHRcdFx0XHRcdFx0XHRcdHBhbGV0dGUsXG5cdFx0XHRcdFx0XHRcdFx0aW5jbHVkZU9wdGlvbnMsXG5cdFx0XHRcdFx0XHRcdFx0YmF0Y2hSZXNwb25zZSxcblx0XHRcdFx0XHRcdFx0XHRob21lUmVzdWx0c1xuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcblx0XHRcdFx0XHRcdFx0XHRgJHtiYXRjaFJlc3BvbnNlLmlkfSBSZXNwb25zZSBGYWlsZWRgLFxuXHRcdFx0XHRcdFx0XHRcdGJhdGNoUmVzcG9uc2Uuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdGJhdGNoUmVzcG9uc2UuYm9keVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJCYXRjaCBSZXNwb25zZSBGYWlsZWRcIiwgZXJyKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIk5vIGNvbm5lY3Rpb24gZm9yIHNlbmRpbmcgYmF0Y2ggcmVxdWVzdFwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaG9tZVJlc3VsdHM7XG5cdH1cblxuXHQvKipcblx0ICogSGFuZGxlIHRoZSByZXNwb25zZSBmcm9tIGEgYmF0Y2ggcXVlcnkuXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIGluY2x1ZGVPcHRpb25zIFRoZSBvYmplY3QgdHlwZXMgdGhhdCB3ZXJlIGluY2x1ZGVkIGluIHRoZSBiYXRjaCByZXF1ZXN0LlxuXHQgKiBAcGFyYW0gYmF0Y2hSZXNwb25zZSBUaGUgcmVzcG9uc2UgZnJvbSB0aGUgcXVlcnkuXG5cdCAqIEBwYXJhbSBob21lUmVzdWx0cyBUaGUgcmVzdWx0cyBmb3IgdGhlIHJlc3BvbnNlcy5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlQmF0Y2hRdWVyeVJlc3BvbnNlKFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0aW5jbHVkZU9wdGlvbnM6IE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzW10sXG5cdFx0YmF0Y2hSZXNwb25zZTogR3JhcGhCYXRjaFJlc3BvbnNlSXRlbSxcblx0XHRob21lUmVzdWx0czogSG9tZVNlYXJjaFJlc3VsdFtdXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHR5cGUgPSBiYXRjaFJlc3BvbnNlLmlkLnNwbGl0KFwiLVwiKVswXSBhcyBNaWNyb3NvZnQzNjVPYmplY3RUeXBlcztcblxuXHRcdGlmIChpbmNsdWRlT3B0aW9ucy5pbmNsdWRlcyh0eXBlKSkge1xuXHRcdFx0aWYgKHR5cGUgPT09IFwiVXNlclwiKSB7XG5cdFx0XHRcdGNvbnN0IHVzZXJzID0gKGJhdGNoUmVzcG9uc2UuYm9keSBhcyBHcmFwaExpc3RSZXNwb25zZTxVc2VyPikudmFsdWU7XG5cblx0XHRcdFx0aWYgKHVzZXJzPy5sZW5ndGgpIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHUgb2YgdXNlcnMpIHtcblx0XHRcdFx0XHRcdGhvbWVSZXN1bHRzLnB1c2goXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlTG9hZGluZ1Jlc3VsdCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHUsIFwiZGlzcGxheU5hbWVcIiwgXCJVc2VyXCIpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcIkNvbnRhY3RcIikge1xuXHRcdFx0XHRjb25zdCBjb250YWN0cyA9IChiYXRjaFJlc3BvbnNlLmJvZHkgYXMgR3JhcGhMaXN0UmVzcG9uc2U8Q29udGFjdD4pLnZhbHVlO1xuXHRcdFx0XHRpZiAoY29udGFjdHM/Lmxlbmd0aCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYyBvZiBjb250YWN0cykge1xuXHRcdFx0XHRcdFx0aG9tZVJlc3VsdHMucHVzaChcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVMb2FkaW5nUmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYywgXCJkaXNwbGF5TmFtZVwiLCBcIkNvbnRhY3RcIilcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiTWVzc2FnZVwiKSB7XG5cdFx0XHRcdGNvbnN0IG1lc3NhZ2VzID0gKGJhdGNoUmVzcG9uc2UuYm9keSBhcyBHcmFwaExpc3RSZXNwb25zZTxNZXNzYWdlPikudmFsdWU7XG5cdFx0XHRcdGlmIChtZXNzYWdlcz8ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBtc2cgb2YgbWVzc2FnZXMuZmlsdGVyKFxuXHRcdFx0XHRcdFx0KG0pID0+IG0uc3ViamVjdCAmJiAhbS5zdWJqZWN0LnN0YXJ0c1dpdGgoXCJDYW5jZWxlZFwiKSAmJiAhbS5zdWJqZWN0LnN0YXJ0c1dpdGgoXCJVbmRlbGl2ZXJhYmxlXCIpXG5cdFx0XHRcdFx0KSkge1xuXHRcdFx0XHRcdFx0aG9tZVJlc3VsdHMucHVzaChcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVMb2FkaW5nUmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgbXNnLCBcInN1YmplY3RcIiwgXCJNZXNzYWdlXCIpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcIkV2ZW50XCIpIHtcblx0XHRcdFx0Y29uc3QgZ3JhcGhSZXNwb25zZSA9IGJhdGNoUmVzcG9uc2UuYm9keSBhcyBHcmFwaExpc3RSZXNwb25zZTxTZWFyY2hSZXNwb25zZT47XG5cdFx0XHRcdGNvbnN0IHNlYXJjaFJlc3BvbnNlID0gZ3JhcGhSZXNwb25zZT8udmFsdWU/LlswXTtcblx0XHRcdFx0Y29uc3QgZXZlbnRzID0gc2VhcmNoUmVzcG9uc2U/LmhpdHNDb250YWluZXJzPy5bMF0/LmhpdHM7XG5cdFx0XHRcdGlmIChldmVudHM/Lmxlbmd0aCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgZXZ0IG9mIGV2ZW50cy5maWx0ZXIoKGUpID0+IChlLnJlc291cmNlIGFzIEV2ZW50KS5zdWJqZWN0KSkge1xuXHRcdFx0XHRcdFx0aG9tZVJlc3VsdHMucHVzaChcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVMb2FkaW5nUmVzdWx0KFxuXHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlSGVscGVycyxcblx0XHRcdFx0XHRcdFx0XHRwYWxldHRlLFxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiB0aGlzLmJhc2U2NElkVG9VcmwoZXZ0LmhpdElkKSxcblx0XHRcdFx0XHRcdFx0XHRcdC4uLmV2dC5yZXNvdXJjZVxuXHRcdFx0XHRcdFx0XHRcdH0gYXMgRXZlbnQsXG5cdFx0XHRcdFx0XHRcdFx0XCJzdWJqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJFdmVudFwiXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiQ2hhdE1lc3NhZ2VcIikge1xuXHRcdFx0XHRjb25zdCBncmFwaFJlc3BvbnNlID0gYmF0Y2hSZXNwb25zZS5ib2R5IGFzIEdyYXBoTGlzdFJlc3BvbnNlPFNlYXJjaFJlc3BvbnNlPjtcblx0XHRcdFx0Y29uc3Qgc2VhcmNoUmVzcG9uc2UgPSBncmFwaFJlc3BvbnNlPy52YWx1ZT8uWzBdO1xuXHRcdFx0XHRjb25zdCBjaGF0TWVzc2FnZXMgPSBzZWFyY2hSZXNwb25zZT8uaGl0c0NvbnRhaW5lcnM/LlswXT8uaGl0cztcblx0XHRcdFx0aWYgKGNoYXRNZXNzYWdlcz8ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBjaHQgb2YgY2hhdE1lc3NhZ2VzKSB7XG5cdFx0XHRcdFx0XHRob21lUmVzdWx0cy5wdXNoKFxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUxvYWRpbmdSZXN1bHQoXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVIZWxwZXJzLFxuXHRcdFx0XHRcdFx0XHRcdHBhbGV0dGUsXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IHRoaXMuYmFzZTY0SWRUb1VybChjaHQuaGl0SWQpLFxuXHRcdFx0XHRcdFx0XHRcdFx0Li4uY2h0LnJlc291cmNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0c3VtbWFyeTogY2h0LnN1bW1hcnlcblx0XHRcdFx0XHRcdFx0XHR9IGFzIENoYXRNZXNzYWdlLFxuXHRcdFx0XHRcdFx0XHRcdFwic3VtbWFyeVwiLFxuXHRcdFx0XHRcdFx0XHRcdFwiQ2hhdE1lc3NhZ2VcIlxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcIkZpbGVcIikge1xuXHRcdFx0XHRjb25zdCBmaWxlcyA9IChiYXRjaFJlc3BvbnNlLmJvZHkgYXMgR3JhcGhMaXN0UmVzcG9uc2U8RHJpdmVJdGVtPikudmFsdWU7XG5cdFx0XHRcdGlmIChmaWxlcz8ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBmIG9mIGZpbGVzKSB7XG5cdFx0XHRcdFx0XHRob21lUmVzdWx0cy5wdXNoKGF3YWl0IHRoaXMuY3JlYXRlTG9hZGluZ1Jlc3VsdCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGYsIFwibmFtZVwiLCBcIkZpbGVcIikpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByZXN1bHQgZm9yIGhvbWUgdG8gYWxsb3cgcmVjb25uZWN0aW9uLlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRvIGhlbHAgd2l0aCBjcmVhdGluZyB0ZW1wbGF0ZXMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBjdXJyZW50IHBhbGV0dGUuXG5cdCAqIEByZXR1cm5zIFRoZSBjb25uZWN0IHRlbXBsYXRlLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVDb25uZWN0UmVzdWx0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXRcblx0KTogUHJvbWlzZTxDTElTZWFyY2hSZXN1bHRDdXN0b208SG9tZUFjdGlvbj4+IHtcblx0XHRjb25zdCBsYXlvdXQgPSBhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdFtcblx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcInJvd1wiLFxuXHRcdFx0XHRcdFthd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGV4dChcInRpdGxlXCIsIDEyLCB7IGZvbnRXZWlnaHQ6IFwiYm9sZFwiIH0pXSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRwYWRkaW5nQm90dG9tOiBcIjVweFwiLFxuXHRcdFx0XHRcdFx0Z2FwOiBcIjVweFwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGV4dChcImRlc2NyaXB0aW9uXCIsIDEyKSxcblx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZVRleHQoXCJlcnJvclwiLCAxMiwge1xuXHRcdFx0XHRcdGZvbnRGYW1pbHk6IFwibW9ub3NwYWNlXCIsXG5cdFx0XHRcdFx0ZmxleDogMVxuXHRcdFx0XHR9KSxcblx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUJ1dHRvbihcblx0XHRcdFx0XHRCdXR0b25TdHlsZS5QcmltYXJ5LFxuXHRcdFx0XHRcdFwiY29ubmVjdFwiLFxuXHRcdFx0XHRcdE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fQ09OTkVDVFxuXHRcdFx0XHQpXG5cdFx0XHRdLFxuXHRcdFx0e1xuXHRcdFx0XHRwYWRkaW5nOiBcIjEwcHhcIixcblx0XHRcdFx0Z2FwOiBcIjE1cHhcIixcblx0XHRcdFx0ZmxleDogXCIxXCJcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LWNvbm5lY3RgLFxuXHRcdFx0c2NvcmU6IHRoaXMuX2RlZmluaXRpb24/LmJhc2VTY29yZSA/PyBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fREVGQVVMVF9CQVNFX1NDT1JFLFxuXHRcdFx0dGl0bGU6IHRoaXMuX2RlZmluaXRpb24/LnRpdGxlID8/IFwiXCIsXG5cdFx0XHRsYWJlbDogXCJDb25uZWN0XCIsXG5cdFx0XHRpY29uOiB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLm1pY3Jvc29mdDM2NSxcblx0XHRcdGFjdGlvbnM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fQ09OTkVDVCxcblx0XHRcdFx0XHRob3RrZXk6IFwiRW50ZXJcIlxuXHRcdFx0XHR9XG5cdFx0XHRdLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRwcm92aWRlcklkOiB0aGlzLl9kZWZpbml0aW9uPy5pZFxuXHRcdFx0fSBhcyBBY3Rpb25EYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkN1c3RvbSxcblx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRsYXlvdXQsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHR0aXRsZTogYCR7dGhpcy5fZGVmaW5pdGlvbj8udGl0bGV9IENvbm5lY3Rpb25gLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBgJHt0aGlzLl9kZWZpbml0aW9uPy50aXRsZX0gZmFpbGVkIHRvIGNvbm5lY3QgZHVlIHRvIHRoZSBmb2xsb3dpbmcgZXJyb3JgLFxuXHRcdFx0XHRcdGVycm9yOiB0aGlzLl9jb25uZWN0aW9uRXJyb3IgPz8gXCJVbmtub3duIGNvbm5lY3Rpb24gZXJyb3JcIixcblx0XHRcdFx0XHRjb25uZWN0OiBcIkNvbm5lY3RcIlxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByZXN1bHQgdG8gc2hvdyB3ZSBhcmUgc2VhcmNoaW5nLlxuXHQgKiBAcmV0dXJucyBIb21lIHRlbXBsYXRlIGZvciBzZWFyY2hpbmcuXG5cdCAqL1xuXHRwcml2YXRlIGNyZWF0ZVNlYXJjaGluZ1Jlc3VsdCgpOiBDTElTZWFyY2hSZXN1bHRMb2FkaW5nPEhvbWVBY3Rpb24+IHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tc2VhcmNoaW5nYCxcblx0XHRcdHNjb3JlOiB0aGlzLl9kZWZpbml0aW9uPy5iYXNlU2NvcmUgPz8gTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0RFRkFVTFRfQkFTRV9TQ09SRSxcblx0XHRcdHRpdGxlOiBcIlNlYXJjaGluZyAuLi5cIixcblx0XHRcdGljb246IHRoaXMuX3NldHRpbmdzPy5pbWFnZXMubWljcm9zb2Z0MzY1LFxuXHRcdFx0YWN0aW9uczogW10sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuTG9hZGluZyxcblx0XHRcdHRlbXBsYXRlQ29udGVudDogXCJcIlxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgaG9tZSBzZWFyY2ggcmVzdWx0IHdoaWNoIGRpc3BsYXkgSlNPTi5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlIHRvIGNvbnZlcnQgdG8gdGhlIGhvbWUgdGVtcGxhdGUuXG5cdCAqIEByZXR1cm5zIFRoZSBob21lIHRlbXBsYXRlLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVHcmFwaEpzb25SZXN1bHQoXG5cdFx0dGVtcGxhdGVIZWxwZXJzOiBUZW1wbGF0ZUhlbHBlcnMsXG5cdFx0cGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCxcblx0XHRyZXNwb25zZTogR3JhcGhSZXNwb25zZVxuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPj4ge1xuXHRcdHJldHVybiB7XG5cdFx0XHRrZXk6IGAke3RoaXMuX2RlZmluaXRpb24/LmlkfS1yZXN0YCxcblx0XHRcdHNjb3JlOiB0aGlzLl9kZWZpbml0aW9uPy5iYXNlU2NvcmUgPz8gTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0RFRkFVTFRfQkFTRV9TQ09SRSxcblx0XHRcdHRpdGxlOiBcIkdyYXBoIFJlc3VsdFwiLFxuXHRcdFx0bGFiZWw6IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwID8gXCJKU09OXCIgOiBcIkVycm9yXCIsXG5cdFx0XHRpY29uOiB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLm1pY3Jvc29mdDM2NSxcblx0XHRcdGFjdGlvbnM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fQ09QWSxcblx0XHRcdFx0XHRob3RrZXk6IFwiRW50ZXJcIlxuXHRcdFx0XHR9XG5cdFx0XHRdLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRwcm92aWRlcklkOiB0aGlzLl9kZWZpbml0aW9uPy5pZCxcblx0XHRcdFx0anNvbjogcmVzcG9uc2UuZGF0YVxuXHRcdFx0fSBhcyBBY3Rpb25EYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkN1c3RvbSxcblx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRsYXlvdXQ6IGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUZXh0KFwianNvblwiLCAxMiwge1xuXHRcdFx0XHRcdGZvbnRTaXplOiBcIjEycHhcIixcblx0XHRcdFx0XHRmb250RmFtaWx5OiBcIm1vbm9zcGFjZVwiLFxuXHRcdFx0XHRcdGNvbG9yOiByZXNwb25zZS5zdGF0dXMgPT09IDIwMCA/IHBhbGV0dGUudGV4dERlZmF1bHQgOiBcInJlZFwiLFxuXHRcdFx0XHRcdHdoaXRlU3BhY2U6IFwicHJlXCIsXG5cdFx0XHRcdFx0b3ZlcmZsb3c6IFwiYXV0b1wiLFxuXHRcdFx0XHRcdGZsZXg6IDFcblx0XHRcdFx0fSksXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRqc29uOiBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLCB1bmRlZmluZWQsIFwiICBcIilcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmVzdWx0IHdoaWNoIHNob3cgYSBsb2FkaW5nIHRlbXBsYXRlLlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRvIGhlbHAgd2l0aCBjcmVhdGluZyB0ZW1wbGF0ZXMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBjdXJyZW50IHBhbGV0dGUuXG5cdCAqIEBwYXJhbSBvYmogVGhlIG9iamVjdCB0byBkaXNwbGF5IGxvYWRpbmcgZm9yLlxuXHQgKiBAcGFyYW0gdGl0bGUgVGhlIHRpdGxlIG9mIHRoZSBpdGVtLlxuXHQgKiBAcGFyYW0gb2JqVHlwZSBUaGUgdHlwZSBvZiB0aGUgaXRlbS5cblx0ICogQHJldHVybnMgVGhlIGhvbWUgc2VhcmNoIHJlc3VsdC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlTG9hZGluZ1Jlc3VsdDxUIGV4dGVuZHMgRW50aXR5Pihcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdG9iajogVCxcblx0XHR0aXRsZToga2V5b2YgVCxcblx0XHRvYmpUeXBlOiBNaWNyb3NvZnQzNjVPYmplY3RUeXBlc1xuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdExvYWRpbmc8SG9tZUFjdGlvbj4+IHtcblx0XHRjb25zdCBpY29ucyA9IHtcblx0XHRcdFVzZXI6IFwidGVhbXNcIixcblx0XHRcdENvbnRhY3Q6IFwiY29udGFjdFwiLFxuXHRcdFx0TWVzc2FnZTogXCJlbWFpbFwiLFxuXHRcdFx0RXZlbnQ6IFwiY2FsZW5kYXJcIixcblx0XHRcdENoYW5uZWw6IFwiY2hhbm5lbFwiLFxuXHRcdFx0VGVhbTogXCJ0ZWFtXCIsXG5cdFx0XHRDaGF0TWVzc2FnZTogXCJjaGF0XCIsXG5cdFx0XHRGaWxlOiBcImZpbGVcIlxuXHRcdH07XG5cblx0XHRsZXQgbGFiZWwgPSBvYmpUeXBlLnNwbGl0KC8oPz1bQS1aXSkvKS5qb2luKFwiIFwiKTtcblx0XHRsZXQgbWltZUljb247XG5cdFx0aWYgKG9ialR5cGUgPT09IFwiRmlsZVwiKSB7XG5cdFx0XHRtaW1lSWNvbiA9IHRoaXMuZ2V0TWltZUljb24ob2JqIGFzIERyaXZlSXRlbSwgcGFsZXR0ZSk7XG5cdFx0XHRpZiAodGhpcy5kcml2ZUl0ZW1Jc0ZvbGRlcihvYmopKSB7XG5cdFx0XHRcdGxhYmVsID0gXCJGb2xkZXJcIjtcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5kcml2ZUl0ZW1Jc0ltYWdlKG9iaikpIHtcblx0XHRcdFx0bGFiZWwgPSBcIkltYWdlXCI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LSR7b2JqLmlkfWAsXG5cdFx0XHRzY29yZTogdGhpcy5vYmplY3RUeXBlVG9PcmRlcihvYmpUeXBlKSxcblx0XHRcdHRpdGxlOiAob2JqW3RpdGxlXSBhcyB1bmtub3duIGFzIHN0cmluZykgPz8gYFVudGl0bGVkICR7b2JqVHlwZX1gLFxuXHRcdFx0bGFiZWwsXG5cdFx0XHRpY29uOiBtaW1lSWNvbiA/PyB0aGlzLmdldFRoZW1lZEljb24oaWNvbnNbb2JqVHlwZV0sIHBhbGV0dGUpLFxuXHRcdFx0YWN0aW9uczogW10sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRvYmpUeXBlLFxuXHRcdFx0XHRvYmosXG5cdFx0XHRcdHN0YXRlOiBcImxvYWRpbmdcIlxuXHRcdFx0fSBhcyBBY3Rpb25Mb2FkaW5nRGF0YSxcblx0XHRcdHRlbXBsYXRlOiBDTElUZW1wbGF0ZS5Mb2FkaW5nLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiBcIlwiXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByZXN1bHQgdG8gZGlzcGxheSBhIHVzZXIuXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIHVzZXIgVGhlIHVzZXIgdG8gZGlzcGxheS5cblx0ICogQHJldHVybnMgVGhlIGNyZWF0ZWQgdGVtcGxhdGUuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZVVzZXJSZXN1bHQoXG5cdFx0dGVtcGxhdGVIZWxwZXJzOiBUZW1wbGF0ZUhlbHBlcnMsXG5cdFx0cGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCxcblx0XHR1c2VyOiBVc2VyXG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0Q3VzdG9tPEhvbWVBY3Rpb24+PiB7XG5cdFx0bGV0IHBpY0RhdGE6IHN0cmluZyB8IHVuZGVmaW5lZDtcblx0XHRsZXQgcHJlc2VuY2U6IFByZXNlbmNlIHwgdW5kZWZpbmVkO1xuXHRcdGxldCBhdmFpbGFibGVDb2xvcjogXCJyZWRcIiB8IFwiZ3JlZW5cIiB8IFwib3JhbmdlXCIgPSBcInJlZFwiO1xuXHRcdGxldCBhdmFpbGFibGVJY29uOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLmNyb3NzO1xuXHRcdGxldCBhdmFpbGFiaWxpdHk6IHN0cmluZyA9IFwiVW5rbm93blwiO1xuXHRcdGNvbnN0IHRlYW1zOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbikge1xuXHRcdFx0Y29uc3QgYmF0Y2hSZXF1ZXN0czogc3RyaW5nW10gPSBbXTtcblxuXHRcdFx0YmF0Y2hSZXF1ZXN0cy5wdXNoKGAvdXNlcnMvJHt1c2VyLmlkfS9wcmVzZW5jZWAsIGAvdXNlcnMvJHt1c2VyLmlkfS9tZW1iZXJPZmApO1xuXG5cdFx0XHRpZiAodXNlci5pZCkge1xuXHRcdFx0XHRpZiAodGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbdXNlci5pZF0pIHtcblx0XHRcdFx0XHRwaWNEYXRhID0gdGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbdXNlci5pZF0uZGF0YTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRiYXRjaFJlcXVlc3RzLnB1c2goYC91c2Vycy8ke3VzZXIuaWR9L3Bob3RvLyR2YWx1ZWApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcIkdyYXBoIEFQSSBCYXRjaCBSZXF1ZXN0XCIsIGJhdGNoUmVxdWVzdHMpO1xuXG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PEdyYXBoQmF0Y2hSZXNwb25zZT4oXG5cdFx0XHRcdFx0XCIvdjEuMC8kYmF0Y2hcIixcblx0XHRcdFx0XHRcIlBPU1RcIixcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0czogYmF0Y2hSZXF1ZXN0cy5tYXAoKHIsIGlkeCkgPT4gKHtcblx0XHRcdFx0XHRcdFx0aWQ6IChpZHggKyAxKS50b1N0cmluZygpLFxuXHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogclxuXHRcdFx0XHRcdFx0fSkpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IHByZXNlbmNlUmVzcG9uc2UgPSByZXNwb25zZS5kYXRhPy5yZXNwb25zZXMuZmluZCgocikgPT4gci5pZCA9PT0gXCIxXCIpO1xuXHRcdFx0XHRpZiAocHJlc2VuY2VSZXNwb25zZT8uc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRwcmVzZW5jZSA9IHByZXNlbmNlUmVzcG9uc2UuYm9keSBhcyBQcmVzZW5jZTtcblxuXHRcdFx0XHRcdC8vIEF2YWlsYWJpbGl0eSBpcyBpbiBQYXNjYWwgY2FzZSwgc28gc3BsaXQgb24gY2FwaXRhbHMgYW5kIGpvaW4gd2l0aCBzcGFjZVxuXHRcdFx0XHRcdGF2YWlsYWJpbGl0eSA9IHByZXNlbmNlPy5hdmFpbGFiaWxpdHk/LnNwbGl0KC8oPz1bQS1aXSkvKS5qb2luKFwiIFwiKSA/PyBhdmFpbGFiaWxpdHk7XG5cblx0XHRcdFx0XHRpZiAocHJlc2VuY2U/LmF2YWlsYWJpbGl0eSA9PT0gXCJBdmFpbGFibGVcIikge1xuXHRcdFx0XHRcdFx0YXZhaWxhYmxlQ29sb3IgPSBcImdyZWVuXCI7XG5cdFx0XHRcdFx0XHRhdmFpbGFibGVJY29uID0gdGhpcy5fc2V0dGluZ3M/LmltYWdlcy5jaGVjaztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHByZXNlbmNlPy5hdmFpbGFiaWxpdHkgPT09IFwiQXdheVwiIHx8IHByZXNlbmNlPy5hdmFpbGFiaWxpdHkgPT09IFwiQmVSaWdodEJhY2tcIikge1xuXHRcdFx0XHRcdFx0YXZhaWxhYmxlQ29sb3IgPSBcIm9yYW5nZVwiO1xuXHRcdFx0XHRcdFx0YXZhaWxhYmxlSWNvbiA9IHRoaXMuX3NldHRpbmdzPy5pbWFnZXMuY2xvY2s7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXG5cdFx0XHRcdFx0XHRcIkZhaWxlZCBnZXR0aW5nIHVzZXIgcHJlc2VuY2VcIixcblx0XHRcdFx0XHRcdHByZXNlbmNlUmVzcG9uc2U/LnN0YXR1cyxcblx0XHRcdFx0XHRcdHByZXNlbmNlUmVzcG9uc2U/LmJvZHlcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgdGVhbXNSZXNwb25zZSA9IHJlc3BvbnNlLmRhdGE/LnJlc3BvbnNlcy5maW5kKChyKSA9PiByLmlkID09PSBcIjJcIik7XG5cdFx0XHRcdGlmICh0ZWFtc1Jlc3BvbnNlPy5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdGNvbnN0IG1lbWJlck9mID0gKFxuXHRcdFx0XHRcdFx0dGVhbXNSZXNwb25zZS5ib2R5IGFzIEdyYXBoTGlzdFJlc3BvbnNlPFxuXHRcdFx0XHRcdFx0XHRUZWFtICYge1xuXHRcdFx0XHRcdFx0XHRcdFwiQG9kYXRhLnR5cGVcIjogc3RyaW5nO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQ+XG5cdFx0XHRcdFx0KS52YWx1ZTtcblx0XHRcdFx0XHRpZiAobWVtYmVyT2YpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGV4Y2x1ZGVHcm91cHMgPSBbXCJBbGwgVXNlcnNcIl07XG5cdFx0XHRcdFx0XHRjb25zdCB0ZWFtc01lbWJlciA9IG1lbWJlck9mLmZpbHRlcihcblx0XHRcdFx0XHRcdFx0KG0pID0+XG5cdFx0XHRcdFx0XHRcdFx0bVtcIkBvZGF0YS50eXBlXCJdID09PSBcIiNtaWNyb3NvZnQuZ3JhcGguZ3JvdXBcIiAmJiAhZXhjbHVkZUdyb3Vwcy5pbmNsdWRlcyhtLmRpc3BsYXlOYW1lID8/IFwiXCIpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBtZW1iZXIgb2YgdGVhbXNNZW1iZXIpIHtcblx0XHRcdFx0XHRcdFx0aWYgKG1lbWJlci5kaXNwbGF5TmFtZSkge1xuXHRcdFx0XHRcdFx0XHRcdHRlYW1zLnB1c2gobWVtYmVyLmRpc3BsYXlOYW1lKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFwiRmFpbGVkIGdldHRpbmcgdXNlciB0ZWFtc1wiLCB0ZWFtc1Jlc3BvbnNlPy5zdGF0dXMsIHRlYW1zUmVzcG9uc2U/LmJvZHkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgcHJvZmlsZVJlc3BvbnNlID0gcmVzcG9uc2UuZGF0YT8ucmVzcG9uc2VzLmZpbmQoKHIpID0+IHIuaWQgPT09IFwiM1wiKTtcblx0XHRcdFx0aWYgKHByb2ZpbGVSZXNwb25zZSkge1xuXHRcdFx0XHRcdGlmIChwcm9maWxlUmVzcG9uc2U/LnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRcdFx0XHRwaWNEYXRhID0gYGRhdGE6aW1hZ2UvanBlZztiYXNlNjQsJHtwcm9maWxlUmVzcG9uc2UuYm9keSBhcyBzdHJpbmd9YDtcblx0XHRcdFx0XHRcdHRoaXMuX3Byb2ZpbGVJbWFnZUNhY2hlW3VzZXIuaWQgPz8gXCJcIl0gPSB7XG5cdFx0XHRcdFx0XHRcdGRhdGE6IHBpY0RhdGEsXG5cdFx0XHRcdFx0XHRcdGFkZGVkOiBEYXRlLm5vdygpXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgcmVxdWVzdCBmYWlsZWQgdGhlIEpTT04gZXJyb3IgaXMgc3RpbGwgYmFzZTY0IGVuY29kZWRcblx0XHRcdFx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXG5cdFx0XHRcdFx0XHRcdFwiRmFpbGVkIGdldHRpbmcgdXNlciBwcm9maWxlIHBpY1wiLFxuXHRcdFx0XHRcdFx0XHRwcm9maWxlUmVzcG9uc2Uuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRhdG9iKHByb2ZpbGVSZXNwb25zZS5ib2R5IGFzIHN0cmluZylcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkZhaWxlZCBwZXJmb3JtaW5nIEFQSSBiYXRjaCByZXF1ZXN0XCIsIGVycik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgcGFpcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9W10gPSBbXTtcblxuXHRcdGlmICh1c2VyLmpvYlRpdGxlKSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiVGl0bGVcIiwgdmFsdWU6IHVzZXIuam9iVGl0bGUgfSk7XG5cdFx0fVxuXG5cdFx0aWYgKHVzZXIuZGVwYXJ0bWVudCkge1xuXHRcdFx0cGFpcnMucHVzaCh7IGxhYmVsOiBcIkRlcGFydG1lbnRcIiwgdmFsdWU6IHVzZXIuZGVwYXJ0bWVudCB9KTtcblx0XHR9XG5cblx0XHRpZiAodXNlci5tYWlsKSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiRS1tYWlsXCIsIHZhbHVlOiB1c2VyLm1haWwgfSk7XG5cdFx0fVxuXG5cdFx0bGV0IHBob25lO1xuXHRcdGlmICh1c2VyLm1vYmlsZVBob25lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiQ2VsbFwiLCB2YWx1ZTogdXNlci5tb2JpbGVQaG9uZSB9KTtcblx0XHRcdHBob25lID0gdXNlci5tb2JpbGVQaG9uZTtcblx0XHR9XG5cblx0XHRpZiAodXNlci5idXNpbmVzc1Bob25lcz8ubGVuZ3RoKSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiQnVzaW5lc3NcIiwgdmFsdWU6IHVzZXIuYnVzaW5lc3NQaG9uZXNbMF0gfSk7XG5cdFx0XHRwaG9uZSA9IHBob25lID8/IHVzZXIuYnVzaW5lc3NQaG9uZXNbMF07XG5cdFx0fVxuXHRcdGlmICh0ZWFtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiVGVhbXNcIiwgdmFsdWU6IHRlYW1zLmpvaW4oXCIsIFwiKSB9KTtcblx0XHR9XG5cblx0XHRjb25zdCBidXR0b25zOiB7XG5cdFx0XHR0aXRsZUtleTogc3RyaW5nO1xuXHRcdFx0YWN0aW9uOiBzdHJpbmc7XG5cdFx0XHRpbWFnZUtleTogc3RyaW5nO1xuXHRcdFx0aW1hZ2VBbHRUZXh0OiBzdHJpbmc7XG5cdFx0fVtdID0gW1xuXHRcdFx0e1xuXHRcdFx0XHR0aXRsZUtleTogXCJjYWxsVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX0NBTEwsXG5cdFx0XHRcdGltYWdlS2V5OiBcImNhbGxJbWFnZVwiLFxuXHRcdFx0XHRpbWFnZUFsdFRleHQ6IFwiVGVhbXMgQ2FsbFwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0aXRsZUtleTogXCJlbWFpbFRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PVVRMT09LX0VNQUlMLFxuXHRcdFx0XHRpbWFnZUtleTogXCJlbWFpbEltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJFLW1haWxcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwibWVldGluZ1RpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19NRUVUSU5HLFxuXHRcdFx0XHRpbWFnZUtleTogXCJtZWV0aW5nSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIk1lZXRpbmdcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwiY2hhdFRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DSEFULFxuXHRcdFx0XHRpbWFnZUtleTogXCJjaGF0SW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkNoYXRcIlxuXHRcdFx0fVxuXHRcdF07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tJHt1c2VyLmlkfWAsXG5cdFx0XHRzY29yZTogdGhpcy5vYmplY3RUeXBlVG9PcmRlcihcIlVzZXJcIiksXG5cdFx0XHR0aXRsZTogdXNlci5kaXNwbGF5TmFtZSA/PyBcIlwiLFxuXHRcdFx0bGFiZWw6IFwiVXNlclwiLFxuXHRcdFx0aWNvbjogdGhpcy5nZXRUaGVtZWRJY29uKFwidGVhbXNcIiwgcGFsZXR0ZSksXG5cdFx0XHRhY3Rpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX0NBTEwsXG5cdFx0XHRcdFx0aG90a2V5OiBcIkVudGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWQsXG5cdFx0XHRcdG9ialR5cGU6IFwiVXNlclwiLFxuXHRcdFx0XHRvYmo6IHVzZXIsXG5cdFx0XHRcdGVtYWlsczogW3VzZXIubWFpbF0sXG5cdFx0XHRcdHBob25lLFxuXHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XHRcdFwicm93XCIsXG5cdFx0XHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlSW1hZ2UoXCJwaWNEYXRhXCIsIHVzZXIuZGlzcGxheU5hbWUgPz8gXCJcIiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0d2lkdGg6IFwiNDRweFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjQ0cHhcIixcblx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdEZpdDogXCJjb3ZlclwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0Ym9yZGVyUmFkaXVzOiBcIjUwJVwiXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUltYWdlKFwic3RhdHVzXCIsIGF2YWlsYWJpbGl0eSwge1xuXHRcdFx0XHRcdFx0XHRcdFx0d2lkdGg6IFwiMTZweFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjE2cHhcIixcblx0XHRcdFx0XHRcdFx0XHRcdGJhY2tncm91bmRDb2xvcjogYXZhaWxhYmxlQ29sb3IsXG5cdFx0XHRcdFx0XHRcdFx0XHRib3JkZXJSYWRpdXM6IFwiNTAlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRib3JkZXI6IFwiMnB4IHNvbGlkIHdoaXRlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWRkaW5nOiBcIjJweFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb246IFwicmVsYXRpdmVcIixcblx0XHRcdFx0XHRcdFx0XHRcdGxlZnQ6IFwiLTE0cHhcIixcblx0XHRcdFx0XHRcdFx0XHRcdHRvcDogXCIyOHB4XCJcblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdFx0XHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZVRpdGxlKFwiZGlzcGxheU5hbWVcIiksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUZXh0KFwiYXZhaWxhYmlsaXR5XCIsIDEwLCB7fSlcblx0XHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG92ZXJmbG93OiBcImhpZGRlblwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0Ym9yZGVyQm90dG9tOiBgMXB4IHNvbGlkICR7cGFsZXR0ZS5iYWNrZ3JvdW5kNn1gLFxuXHRcdFx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdFx0Z2FwOiBcIjVweFwiXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVBhaXJzTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgcGFpcnMpLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVCdXR0b25zTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYnV0dG9ucylcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHBhZGRpbmc6IFwiMTBweFwiLFxuXHRcdFx0XHRcdFx0Z2FwOiBcIjE1cHhcIixcblx0XHRcdFx0XHRcdGZsZXg6IFwiMVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0cGljRGF0YTogcGljRGF0YSA/PyB0aGlzLmdldFRoZW1lZEljb24oXCJjb250YWN0XCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdHN0YXR1czogYXZhaWxhYmxlSWNvbiA/PyBcIlwiLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiB1c2VyLmRpc3BsYXlOYW1lID8/IFwiXCIsXG5cdFx0XHRcdFx0YXZhaWxhYmlsaXR5LFxuXHRcdFx0XHRcdC4uLnRoaXMubWFwUGFpcnNUb0RhdGEocGFpcnMpLFxuXHRcdFx0XHRcdGNhbGxUaXRsZTogXCJUZWFtcyBDYWxsXCIsXG5cdFx0XHRcdFx0Y2FsbEltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJ0ZWFtc1wiLCBwYWxldHRlKSxcblx0XHRcdFx0XHRlbWFpbFRpdGxlOiBcIk91dGxvb2sgRS1tYWlsXCIsXG5cdFx0XHRcdFx0ZW1haWxJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiZW1haWxcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0bWVldGluZ1RpdGxlOiBcIlRlYW1zIE1lZXRpbmdcIixcblx0XHRcdFx0XHRtZWV0aW5nSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNhbGVuZGFyXCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdGNoYXRUaXRsZTogXCJUZWFtcyBDaGF0XCIsXG5cdFx0XHRcdFx0Y2hhdEltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJjaGF0XCIsIHBhbGV0dGUpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJlc3VsdCB0byBzaG93IGEgY29udGFjdC5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gY29udGFjdCBUaGUgY29udGFjdCBkZXRhaWxzLlxuXHQgKiBAcmV0dXJucyBUaGUgY29udGFjdCB0ZW1wbGF0ZS5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlQ29udGFjdFJlc3VsdChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdGNvbnRhY3Q6IENvbnRhY3Rcblx0KTogUHJvbWlzZTxDTElTZWFyY2hSZXN1bHRDdXN0b208SG9tZUFjdGlvbj4+IHtcblx0XHRsZXQgcGljRGF0YTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLl9tczM2NUNvbm5lY3Rpb24gJiYgY29udGFjdC5pZCkge1xuXHRcdFx0XHRpZiAodGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbY29udGFjdC5pZF0pIHtcblx0XHRcdFx0XHRwaWNEYXRhID0gdGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbY29udGFjdC5pZF0uZGF0YTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBiYXRjaFJlcXVlc3RzOiBzdHJpbmdbXSA9IFtgL21lL2NvbnRhY3RzLyR7Y29udGFjdC5pZH0vcGhvdG8vJHZhbHVlYF07XG5cblx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJHcmFwaCBBUEkgQmF0Y2ggUmVxdWVzdFwiLCB7XG5cdFx0XHRcdFx0XHRwaG90bzogYmF0Y2hSZXF1ZXN0c1swXVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8R3JhcGhCYXRjaFJlc3BvbnNlPihcblx0XHRcdFx0XHRcdFwiL3YxLjAvJGJhdGNoXCIsXG5cdFx0XHRcdFx0XHRcIlBPU1RcIixcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0cmVxdWVzdHM6IGJhdGNoUmVxdWVzdHMubWFwKChyLCBpZHgpID0+ICh7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IChpZHggKyAxKS50b1N0cmluZygpLFxuXHRcdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0XHRcdFx0XHR1cmw6IHJcblx0XHRcdFx0XHRcdFx0fSkpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdGNvbnN0IHByb2ZpbGVSZXNwb25zZSA9IHJlc3BvbnNlLmRhdGE/LnJlc3BvbnNlcy5maW5kKChyKSA9PiByLmlkID09PSBcIjFcIik7XG5cdFx0XHRcdFx0aWYgKHByb2ZpbGVSZXNwb25zZT8uc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRcdHBpY0RhdGEgPSBgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwke3Byb2ZpbGVSZXNwb25zZS5ib2R5IGFzIHN0cmluZ31gO1xuXHRcdFx0XHRcdFx0dGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbY29udGFjdC5pZF0gPSB7XG5cdFx0XHRcdFx0XHRcdGRhdGE6IHBpY0RhdGEsXG5cdFx0XHRcdFx0XHRcdGFkZGVkOiBEYXRlLm5vdygpXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgcmVxdWVzdCBmYWlsZWQgdGhlIEpTT04gZXJyb3IgaXMgc3RpbGwgYmFzZTY0IGVuY29kZWRcblx0XHRcdFx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXG5cdFx0XHRcdFx0XHRcdFwiRmFpbGVkIGdldHRpbmcgY29udGFjdCBwcm9maWxlIHBpY1wiLFxuXHRcdFx0XHRcdFx0XHRwcm9maWxlUmVzcG9uc2U/LnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0YXRvYihwcm9maWxlUmVzcG9uc2U/LmJvZHkgYXMgc3RyaW5nKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJGYWlsZWQgcGVyZm9ybWluZyBBUEkgYmF0Y2ggcmVxdWVzdFwiLCBlcnIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHBhaXJzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfVtdID0gW107XG5cblx0XHRpZiAoY29udGFjdC5jb21wYW55TmFtZSkge1xuXHRcdFx0cGFpcnMucHVzaCh7IGxhYmVsOiBcIkNvbXBhbnlcIiwgdmFsdWU6IGNvbnRhY3QuY29tcGFueU5hbWUgfSk7XG5cdFx0fVxuXG5cdFx0aWYgKGNvbnRhY3Quam9iVGl0bGUpIHtcblx0XHRcdHBhaXJzLnB1c2goeyBsYWJlbDogXCJUaXRsZVwiLCB2YWx1ZTogY29udGFjdC5qb2JUaXRsZSB9KTtcblx0XHR9XG5cblx0XHRpZiAoY29udGFjdC5kZXBhcnRtZW50KSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiRGVwYXJ0bWVudFwiLCB2YWx1ZTogY29udGFjdC5kZXBhcnRtZW50IH0pO1xuXHRcdH1cblxuXHRcdGxldCBwaG9uZTtcblx0XHRsZXQgZW1haWw7XG5cblx0XHRpZiAoY29udGFjdC5tb2JpbGVQaG9uZSkge1xuXHRcdFx0cGFpcnMucHVzaCh7IGxhYmVsOiBcIkNlbGxcIiwgdmFsdWU6IGNvbnRhY3QubW9iaWxlUGhvbmUgfSk7XG5cdFx0XHRwaG9uZSA9IGNvbnRhY3QubW9iaWxlUGhvbmU7XG5cdFx0fVxuXG5cdFx0aWYgKGNvbnRhY3QuYnVzaW5lc3NQaG9uZXM/Lmxlbmd0aCkge1xuXHRcdFx0cGFpcnMucHVzaCh7IGxhYmVsOiBcIkJ1c2luZXNzXCIsIHZhbHVlOiBjb250YWN0LmJ1c2luZXNzUGhvbmVzWzBdIH0pO1xuXHRcdFx0cGhvbmUgPSBwaG9uZSA/PyBjb250YWN0LmJ1c2luZXNzUGhvbmVzWzBdO1xuXHRcdH1cblxuXHRcdGlmIChjb250YWN0LmVtYWlsQWRkcmVzc2VzPy5sZW5ndGgpIHtcblx0XHRcdGZvciAoY29uc3QgZSBvZiBjb250YWN0LmVtYWlsQWRkcmVzc2VzKSB7XG5cdFx0XHRcdGlmIChlLmFkZHJlc3M/Lmxlbmd0aCkge1xuXHRcdFx0XHRcdHBhaXJzLnB1c2goeyBsYWJlbDogXCJFLW1haWxcIiwgdmFsdWU6IGUuYWRkcmVzcyB9KTtcblx0XHRcdFx0XHRlbWFpbCA9IGVtYWlsID8/IGUuYWRkcmVzcztcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbnM6IHtcblx0XHRcdHRpdGxlS2V5OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb246IHN0cmluZztcblx0XHRcdGltYWdlS2V5OiBzdHJpbmc7XG5cdFx0XHRpbWFnZUFsdFRleHQ6IHN0cmluZztcblx0XHR9W10gPSBbXTtcblxuXHRcdGlmIChwaG9uZSkge1xuXHRcdFx0YnV0dG9ucy5wdXNoKHtcblx0XHRcdFx0dGl0bGVLZXk6IFwiY2FsbFRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9QSE9ORV9DQUxMLFxuXHRcdFx0XHRpbWFnZUtleTogXCJjYWxsSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkNhbGxcIlxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGVtYWlsKSB7XG5cdFx0XHRidXR0b25zLnB1c2goe1xuXHRcdFx0XHR0aXRsZUtleTogXCJlbWFpbFRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PVVRMT09LX0VNQUlMLFxuXHRcdFx0XHRpbWFnZUtleTogXCJlbWFpbEltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJFLW1haWxcIlxuXHRcdFx0fSk7XG5cdFx0XHRidXR0b25zLnB1c2goe1xuXHRcdFx0XHR0aXRsZUtleTogXCJjYWxlbmRhclRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PVVRMT09LX0VWRU5ULFxuXHRcdFx0XHRpbWFnZUtleTogXCJjYWxlbmRhckltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJDYWxlbmRhclwiXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tJHtjb250YWN0LmlkfWAsXG5cdFx0XHRzY29yZTogdGhpcy5vYmplY3RUeXBlVG9PcmRlcihcIkNvbnRhY3RcIiksXG5cdFx0XHR0aXRsZTogY29udGFjdC5kaXNwbGF5TmFtZSA/PyBcIlwiLFxuXHRcdFx0bGFiZWw6IFwiQ29udGFjdFwiLFxuXHRcdFx0aWNvbjogdGhpcy5nZXRUaGVtZWRJY29uKFwiY29udGFjdFwiLCBwYWxldHRlKSxcblx0XHRcdGFjdGlvbnM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fUEhPTkVfQ0FMTCxcblx0XHRcdFx0XHRob3RrZXk6IFwiRW50ZXJcIlxuXHRcdFx0XHR9XG5cdFx0XHRdLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRwcm92aWRlcklkOiB0aGlzLl9kZWZpbml0aW9uPy5pZCxcblx0XHRcdFx0b2JqVHlwZTogXCJDb250YWN0XCIsXG5cdFx0XHRcdG9iajogY29udGFjdCxcblx0XHRcdFx0ZW1haWxzOiBbZW1haWxdLFxuXHRcdFx0XHRwaG9uZSxcblx0XHRcdFx0bmFtZTogY29udGFjdC5kaXNwbGF5TmFtZVxuXHRcdFx0fSBhcyBBY3Rpb25EYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkN1c3RvbSxcblx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRsYXlvdXQ6IGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XHRcdFx0XHRcInJvd1wiLFxuXHRcdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUltYWdlKFwicGljRGF0YVwiLCBjb250YWN0LmRpc3BsYXlOYW1lID8/IFwiXCIsIHtcblx0XHRcdFx0XHRcdFx0XHRcdHdpZHRoOiBcIjQ0cHhcIixcblx0XHRcdFx0XHRcdFx0XHRcdGhlaWdodDogXCI0NHB4XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRvYmplY3RGaXQ6IFwiY292ZXJcIixcblx0XHRcdFx0XHRcdFx0XHRcdGJvcmRlclJhZGl1czogXCI1MCVcIlxuXHRcdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGl0bGUoXCJkaXNwbGF5TmFtZVwiKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZVRleHQoXCJjb21wYW55XCIsIDEwLCB7fSlcblx0XHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG92ZXJmbG93OiBcImhpZGRlblwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0Ym9yZGVyQm90dG9tOiBgMXB4IHNvbGlkICR7cGFsZXR0ZS5iYWNrZ3JvdW5kNn1gLFxuXHRcdFx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdFx0Z2FwOiBcIjVweFwiXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVBhaXJzTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgcGFpcnMpLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVCdXR0b25zTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYnV0dG9ucylcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHBhZGRpbmc6IFwiMTBweFwiLFxuXHRcdFx0XHRcdFx0Z2FwOiBcIjE1cHhcIixcblx0XHRcdFx0XHRcdGZsZXg6IFwiMVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0cGljRGF0YTogcGljRGF0YSA/PyB0aGlzLmdldFRoZW1lZEljb24oXCJjb250YWN0XCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiBjb250YWN0LmRpc3BsYXlOYW1lID8/IFwiXCIsXG5cdFx0XHRcdFx0Li4udGhpcy5tYXBQYWlyc1RvRGF0YShwYWlycyksXG5cdFx0XHRcdFx0Y2FsbFRpdGxlOiBcIkNhbGxcIixcblx0XHRcdFx0XHRjYWxsSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNhbGxcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0ZW1haWxUaXRsZTogXCJPdXRsb29rIEUtbWFpbFwiLFxuXHRcdFx0XHRcdGVtYWlsSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImVtYWlsXCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdGNhbGVuZGFyVGl0bGU6IFwiT3V0bG9vayBDYWxlbmRhclwiLFxuXHRcdFx0XHRcdGNhbGVuZGFySW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNhbGVuZGFyXCIsIHBhbGV0dGUpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJlc3VsdCB0byBkaXNwbGF5IGEgbWVzc2FnZS5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSBkYXRhLlxuXHQgKiBAcmV0dXJucyBUaGUgbWVzc2FnZSB0ZW1wbGF0ZS5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlTWVzc2FnZVJlc3VsdChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdG1lc3NhZ2U6IE1lc3NhZ2Vcblx0KTogUHJvbWlzZTxDTElTZWFyY2hSZXN1bHRDdXN0b208SG9tZUFjdGlvbj4+IHtcblx0XHRjb25zdCBwYWlyczogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyB3aWRlPzogYm9vbGVhbiB9W10gPSBbXTtcblxuXHRcdGlmIChtZXNzYWdlLnNlbmRlcj8uZW1haWxBZGRyZXNzPy5uYW1lID8/IG1lc3NhZ2Uuc2VuZGVyPy5lbWFpbEFkZHJlc3M/LmFkZHJlc3MpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJGcm9tXCIsXG5cdFx0XHRcdHZhbHVlOiBtZXNzYWdlLnNlbmRlci5lbWFpbEFkZHJlc3M/Lm5hbWUgPz8gbWVzc2FnZS5zZW5kZXIuZW1haWxBZGRyZXNzPy5hZGRyZXNzID8/IFwiXCJcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChtZXNzYWdlLnJlY2VpdmVkRGF0ZVRpbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJSZWNlaXZlZFwiLFxuXHRcdFx0XHR2YWx1ZTogbmV3IERhdGUobWVzc2FnZS5yZWNlaXZlZERhdGVUaW1lKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAobWVzc2FnZS5ib2R5UHJldmlldykge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIlByZXZpZXdcIixcblx0XHRcdFx0dmFsdWU6IHRoaXMuc2FuaXRpemVTdHJpbmcobWVzc2FnZS5ib2R5UHJldmlldyksXG5cdFx0XHRcdHdpZGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbnM6IHtcblx0XHRcdHRpdGxlS2V5OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb246IHN0cmluZztcblx0XHRcdGltYWdlS2V5OiBzdHJpbmc7XG5cdFx0XHRpbWFnZUFsdFRleHQ6IHN0cmluZztcblx0XHR9W10gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcIm9wZW5UaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fT1BFTixcblx0XHRcdFx0aW1hZ2VLZXk6IFwib3BlbkltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJPcGVuXCJcblx0XHRcdH1cblx0XHRdO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LSR7bWVzc2FnZS5pZH1gLFxuXHRcdFx0c2NvcmU6IHRoaXMub2JqZWN0VHlwZVRvT3JkZXIoXCJNZXNzYWdlXCIpLFxuXHRcdFx0dGl0bGU6IG1lc3NhZ2Uuc3ViamVjdCA/PyBcIlVudGl0bGVkIE1lc3NhZ2VcIixcblx0XHRcdGxhYmVsOiBcIk1lc3NhZ2VcIixcblx0XHRcdGljb246IHRoaXMuZ2V0VGhlbWVkSWNvbihcImVtYWlsXCIsIHBhbGV0dGUpLFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PUEVOLFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRvYmpUeXBlOiBcIk1lc3NhZ2VcIixcblx0XHRcdFx0b2JqOiBtZXNzYWdlLFxuXHRcdFx0XHR1cmw6IG1lc3NhZ2Uud2ViTGlua1xuXHRcdFx0fSBhcyBBY3Rpb25EYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkN1c3RvbSxcblx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRsYXlvdXQ6IGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFwicm93XCIsIFthd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGl0bGUoXCJzdWJqZWN0XCIpXSwge1xuXHRcdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdGdhcDogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVQYWlyc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHBhaXJzKSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlQnV0dG9uc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGJ1dHRvbnMpXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwYWRkaW5nOiBcIjEwcHhcIixcblx0XHRcdFx0XHRcdGdhcDogXCIxNXB4XCIsXG5cdFx0XHRcdFx0XHRmbGV4OiBcIjFcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KSxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHN1YmplY3Q6IG1lc3NhZ2Uuc3ViamVjdCA/PyBcIk5vIFN1YmplY3RcIixcblx0XHRcdFx0XHQuLi50aGlzLm1hcFBhaXJzVG9EYXRhKHBhaXJzKSxcblx0XHRcdFx0XHRvcGVuVGl0bGU6IFwiT3BlbiBPdXRsb29rXCIsXG5cdFx0XHRcdFx0b3BlbkltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJvdXRsb29rXCIsIHBhbGV0dGUpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJlc3VsdCB0ZW1wbGF0ZSBmb3IgZXZlbnQuXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCBkYXRhLlxuXHQgKiBAcmV0dXJucyBUaGUgZXZlbnQgdGVtcGxhdGUuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUV2ZW50UmVzdWx0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0ZXZlbnQ6IEV2ZW50XG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0Q3VzdG9tPEhvbWVBY3Rpb24+PiB7XG5cdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbikge1xuXHRcdFx0Y29uc3QgYmF0Y2hSZXF1ZXN0czogc3RyaW5nW10gPSBbYC9tZS9ldmVudHMvJHtldmVudC5pZH1gXTtcblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiR3JhcGggQVBJIEJhdGNoIFJlcXVlc3RcIiwge1xuXHRcdFx0XHRcdHBob3RvOiBiYXRjaFJlcXVlc3RzWzBdXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PEdyYXBoQmF0Y2hSZXNwb25zZTxFdmVudD4+KFxuXHRcdFx0XHRcdFwiL3YxLjAvJGJhdGNoXCIsXG5cdFx0XHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmVxdWVzdHM6IGJhdGNoUmVxdWVzdHMubWFwKChyLCBpZHgpID0+ICh7XG5cdFx0XHRcdFx0XHRcdGlkOiAoaWR4ICsgMSkudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRcdFx0XHR1cmw6IHJcblx0XHRcdFx0XHRcdH0pKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblxuXHRcdFx0XHRjb25zdCBldmVudFJlc3BvbnNlID0gcmVzcG9uc2UuZGF0YT8ucmVzcG9uc2VzLmZpbmQoKHIpID0+IHIuaWQgPT09IFwiMVwiKTtcblx0XHRcdFx0aWYgKGV2ZW50UmVzcG9uc2U/LnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRcdFx0ZXZlbnQgPSB7XG5cdFx0XHRcdFx0XHQuLi5ldmVudCxcblx0XHRcdFx0XHRcdC4uLmV2ZW50UmVzcG9uc2UuYm9keVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkZhaWxlZCBnZXR0aW5nIGV2ZW50XCIsIGV2ZW50UmVzcG9uc2U/LnN0YXR1cywgZXZlbnRSZXNwb25zZT8uYm9keSBhcyBzdHJpbmcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkZhaWxlZCBwZXJmb3JtaW5nIEFQSSBiYXRjaCByZXF1ZXN0XCIsIGVycik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgcGFpcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU6IHN0cmluZzsgd2lkZT86IGJvb2xlYW4gfVtdID0gW107XG5cblx0XHRpZiAoZXZlbnQuc3RhcnQ/LmRhdGVUaW1lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiU3RhcnRcIixcblx0XHRcdFx0dmFsdWU6IG5ldyBEYXRlKGV2ZW50LnN0YXJ0Py5kYXRlVGltZSkudG9Mb2NhbGVTdHJpbmcoKVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGV2ZW50LmVuZD8uZGF0ZVRpbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJFbmRcIixcblx0XHRcdFx0dmFsdWU6IG5ldyBEYXRlKGV2ZW50LmVuZD8uZGF0ZVRpbWUpLnRvTG9jYWxlU3RyaW5nKClcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChldmVudC5ib2R5UHJldmlldykge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIlByZXZpZXdcIixcblx0XHRcdFx0dmFsdWU6IHRoaXMuc2FuaXRpemVTdHJpbmcoZXZlbnQuYm9keVByZXZpZXcpLFxuXHRcdFx0XHR3aWRlOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRjb25zdCBidXR0b25zOiB7XG5cdFx0XHR0aXRsZUtleTogc3RyaW5nO1xuXHRcdFx0YWN0aW9uOiBzdHJpbmc7XG5cdFx0XHRpbWFnZUtleTogc3RyaW5nO1xuXHRcdFx0aW1hZ2VBbHRUZXh0OiBzdHJpbmc7XG5cdFx0fVtdID0gW1xuXHRcdFx0e1xuXHRcdFx0XHR0aXRsZUtleTogXCJvcGVuVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09QRU4sXG5cdFx0XHRcdGltYWdlS2V5OiBcIm9wZW5JbWFnZVwiLFxuXHRcdFx0XHRpbWFnZUFsdFRleHQ6IFwiT3BlblwiXG5cdFx0XHR9XG5cdFx0XTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRrZXk6IGAke3RoaXMuX2RlZmluaXRpb24/LmlkfS0ke2V2ZW50LmlkfWAsXG5cdFx0XHRzY29yZTogdGhpcy5vYmplY3RUeXBlVG9PcmRlcihcIkV2ZW50XCIpLFxuXHRcdFx0dGl0bGU6IGV2ZW50LnN1YmplY3QgPz8gXCJVbnRpdGxlZCBFdmVudFwiLFxuXHRcdFx0bGFiZWw6IFwiRXZlbnRcIixcblx0XHRcdGljb246IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNhbGVuZGFyXCIsIHBhbGV0dGUpLFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PUEVOLFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRvYmpUeXBlOiBcIkV2ZW50XCIsXG5cdFx0XHRcdG9iajogZXZlbnQsXG5cdFx0XHRcdHVybDogZXZlbnQud2ViTGlua1xuXHRcdFx0fSBhcyBBY3Rpb25EYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkN1c3RvbSxcblx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRsYXlvdXQ6IGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFwicm93XCIsIFthd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGl0bGUoXCJzdWJqZWN0XCIpXSwge1xuXHRcdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdGdhcDogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVQYWlyc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHBhaXJzKSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlQnV0dG9uc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGJ1dHRvbnMpXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwYWRkaW5nOiBcIjEwcHhcIixcblx0XHRcdFx0XHRcdGdhcDogXCIxNXB4XCIsXG5cdFx0XHRcdFx0XHRmbGV4OiBcIjFcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KSxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHN1YmplY3Q6IGV2ZW50LnN1YmplY3QgPz8gXCJVbnRpdGxlZCBFdmVudFwiLFxuXHRcdFx0XHRcdC4uLnRoaXMubWFwUGFpcnNUb0RhdGEocGFpcnMpLFxuXHRcdFx0XHRcdG9wZW5UaXRsZTogXCJPcGVuIE91dGxvb2tcIixcblx0XHRcdFx0XHRvcGVuSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcIm91dGxvb2tcIiwgcGFsZXR0ZSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmVzdWx0IGZvciBhIGNoYXQgbWVzc2FnZS5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gY2hhdE1lc3NhZ2UgVGhlIGNoYXQgbWVzc2FnZSBkYXRhLlxuXHQgKiBAcmV0dXJucyBUaGUgY2hhdCBtZXNzYWdlIHRlbXBsYXRlLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVDaGF0TWVzc2FnZVJlc3VsdChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdGNoYXRNZXNzYWdlOiBDaGF0TWVzc2FnZVxuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPj4ge1xuXHRcdGlmICh0aGlzLl9tczM2NUNvbm5lY3Rpb24pIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IGJhdGNoUmVxdWVzdHM6IHN0cmluZ1tdID0gW2AvY2hhdHMvJHtjaGF0TWVzc2FnZS5jaGF0SWR9L21lc3NhZ2VzLyR7Y2hhdE1lc3NhZ2UuZXRhZ31gXTtcblxuXHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJHcmFwaCBBUEkgQmF0Y2ggUmVxdWVzdFwiLCB7XG5cdFx0XHRcdFx0cGhvdG86IGJhdGNoUmVxdWVzdHNbMF1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8R3JhcGhCYXRjaFJlc3BvbnNlPENoYXRNZXNzYWdlPj4oXG5cdFx0XHRcdFx0XCIvdjEuMC8kYmF0Y2hcIixcblx0XHRcdFx0XHRcIlBPU1RcIixcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0czogYmF0Y2hSZXF1ZXN0cy5tYXAoKHIsIGlkeCkgPT4gKHtcblx0XHRcdFx0XHRcdFx0aWQ6IChpZHggKyAxKS50b1N0cmluZygpLFxuXHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogclxuXHRcdFx0XHRcdFx0fSkpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IGNoYXRNZXNzYWdlUmVzcG9uc2UgPSByZXNwb25zZS5kYXRhPy5yZXNwb25zZXMuZmluZCgocikgPT4gci5pZCA9PT0gXCIxXCIpO1xuXHRcdFx0XHRpZiAoY2hhdE1lc3NhZ2VSZXNwb25zZT8uc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRjaGF0TWVzc2FnZSA9IHtcblx0XHRcdFx0XHRcdC4uLmNoYXRNZXNzYWdlLFxuXHRcdFx0XHRcdFx0Li4uY2hhdE1lc3NhZ2VSZXNwb25zZS5ib2R5LFxuXHRcdFx0XHRcdFx0c3VtbWFyeTogY2hhdE1lc3NhZ2VSZXNwb25zZS5ib2R5LnN1bW1hcnkgPz8gY2hhdE1lc3NhZ2Uuc3VtbWFyeVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcblx0XHRcdFx0XHRcdFwiRmFpbGVkIGdldHRpbmcgZXZlbnRcIixcblx0XHRcdFx0XHRcdGNoYXRNZXNzYWdlUmVzcG9uc2U/LnN0YXR1cyxcblx0XHRcdFx0XHRcdGNoYXRNZXNzYWdlUmVzcG9uc2U/LmJvZHkgYXMgc3RyaW5nXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJGYWlsZWQgcGVyZm9ybWluZyBBUEkgYmF0Y2ggcmVxdWVzdFwiLCBlcnIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IHBhaXJzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IHdpZGU/OiBib29sZWFuIH1bXSA9IFtdO1xuXG5cdFx0aWYgKGNoYXRNZXNzYWdlLmxhc3RNb2RpZmllZERhdGVUaW1lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiRGF0ZS9UaW1lXCIsXG5cdFx0XHRcdHZhbHVlOiBuZXcgRGF0ZShjaGF0TWVzc2FnZS5sYXN0TW9kaWZpZWREYXRlVGltZSkudG9Mb2NhbGVTdHJpbmcoKVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGNoYXRNZXNzYWdlLmZyb20/LnVzZXI/LmRpc3BsYXlOYW1lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiRnJvbVwiLFxuXHRcdFx0XHR2YWx1ZTogY2hhdE1lc3NhZ2UuZnJvbS51c2VyLmRpc3BsYXlOYW1lXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoY2hhdE1lc3NhZ2UuYm9keT8uY29udGVudCkge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIlByZXZpZXdcIixcblx0XHRcdFx0dmFsdWU6IHRoaXMuc2FuaXRpemVTdHJpbmcoY2hhdE1lc3NhZ2UuYm9keT8uY29udGVudCksXG5cdFx0XHRcdHdpZGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbnM6IHtcblx0XHRcdHRpdGxlS2V5OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb246IHN0cmluZztcblx0XHRcdGltYWdlS2V5OiBzdHJpbmc7XG5cdFx0XHRpbWFnZUFsdFRleHQ6IHN0cmluZztcblx0XHR9W10gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcIm9wZW5UaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfQ0hBVCxcblx0XHRcdFx0aW1hZ2VLZXk6IFwib3BlbkltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJPcGVuXCJcblx0XHRcdH1cblx0XHRdO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LSR7Y2hhdE1lc3NhZ2UuaWR9YCxcblx0XHRcdHNjb3JlOiB0aGlzLm9iamVjdFR5cGVUb09yZGVyKFwiQ2hhdE1lc3NhZ2VcIiksXG5cdFx0XHR0aXRsZTogY2hhdE1lc3NhZ2Uuc3VtbWFyeSA/PyBcIlVudGl0bGVkIENoYXQgTWVzc2FnZVwiLFxuXHRcdFx0bGFiZWw6IFwiQ2hhdCBNZXNzYWdlXCIsXG5cdFx0XHRpY29uOiB0aGlzLmdldFRoZW1lZEljb24oXCJjaGF0XCIsIHBhbGV0dGUpLFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DSEFULFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRvYmpUeXBlOiBcIkNoYXRNZXNzYWdlXCIsXG5cdFx0XHRcdG9iajogY2hhdE1lc3NhZ2UsXG5cdFx0XHRcdHVybDogY2hhdE1lc3NhZ2Uud2ViVXJsLFxuXHRcdFx0XHRjaGF0SWQ6IGNoYXRNZXNzYWdlLmNoYXRJZCxcblx0XHRcdFx0bWVzc2FnZUlkOiBjaGF0TWVzc2FnZS5pZFxuXHRcdFx0fSBhcyBBY3Rpb25EYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkN1c3RvbSxcblx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRsYXlvdXQ6IGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFwicm93XCIsIFthd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGl0bGUoXCJzdW1tYXJ5XCIpXSwge1xuXHRcdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdGdhcDogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVQYWlyc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHBhaXJzKSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlQnV0dG9uc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGJ1dHRvbnMpXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwYWRkaW5nOiBcIjEwcHhcIixcblx0XHRcdFx0XHRcdGdhcDogXCIxNXB4XCIsXG5cdFx0XHRcdFx0XHRmbGV4OiBcIjFcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KSxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHN1bW1hcnk6IGNoYXRNZXNzYWdlLnN1bW1hcnkgPz8gXCJVbnRpdGxlZCBDaGF0IE1lc3NhZ2VcIixcblx0XHRcdFx0XHQuLi50aGlzLm1hcFBhaXJzVG9EYXRhKHBhaXJzKSxcblx0XHRcdFx0XHRvcGVuVGl0bGU6IFwiT3BlbiBDaGF0IE1lc3NhZ2VcIixcblx0XHRcdFx0XHRvcGVuSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcInRlYW1zXCIsIHBhbGV0dGUpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSB0aGUgcmVzdWx0IGZvciBhIHRlYW0uXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIHRlYW0gVGhlIHRlYW0gZGF0YS5cblx0ICogQHJldHVybnMgVGhlIHRlYW0gcmVzdWx0IHRlbXBsYXRlLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVUZWFtUmVzdWx0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0dGVhbTogVGVhbVxuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPj4ge1xuXHRcdGNvbnN0IHRlYW1NZW1iZXJzID0gdGVhbS5pZCA/IGF3YWl0IHRoaXMuZ2V0VGVhbU1lbWJlcnModGVhbS5pZCkgOiBbXTtcblxuXHRcdGNvbnN0IHBhaXJzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlPzogc3RyaW5nOyBsaW5rcz86IHN0cmluZ1tdOyBzcmNzPzogc3RyaW5nW107IHdpZGU/OiBib29sZWFuIH1bXSA9IFtdO1xuXHRcdGNvbnN0IHVybHM6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuXG5cdFx0aWYgKHRlYW0uY2hhbm5lbHM/Lmxlbmd0aCkge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIkNoYW5uZWwgTGlzdFwiLFxuXHRcdFx0XHRsaW5rczogdGVhbS5jaGFubmVscz8ubWFwKChjKSA9PiBjLmRpc3BsYXlOYW1lID8/IFwiXCIpXG5cdFx0XHR9KTtcblxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0ZWFtLmNoYW5uZWxzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHVybHNbYENoYW5uZWwgTGlzdF9saW5rXyR7aX1gXSA9IHRlYW0uY2hhbm5lbHNbaV0ud2ViVXJsID8/IFwiXCI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRlYW1NZW1iZXJzLmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgdXNlclBob3RvcyA9IGF3YWl0IHRoaXMuZ2V0VXNlclBob3Rvcyh0ZWFtTWVtYmVycywgMTYpO1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIk1lbWJlciBMaXN0XCIsXG5cdFx0XHRcdHNyY3M6IHVzZXJQaG90b3Ncblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICh0ZWFtLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiRGVzY3JpcHRpb25cIixcblx0XHRcdFx0dmFsdWU6IHRlYW0uZGVzY3JpcHRpb24sXG5cdFx0XHRcdHdpZGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbnM6IHtcblx0XHRcdHRpdGxlS2V5OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb246IHN0cmluZztcblx0XHRcdGltYWdlS2V5OiBzdHJpbmc7XG5cdFx0XHRpbWFnZUFsdFRleHQ6IHN0cmluZztcblx0XHR9W10gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcIm9wZW5UaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfQ0FMTCxcblx0XHRcdFx0aW1hZ2VLZXk6IFwib3BlbkltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJPcGVuXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcImVtYWlsVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09VVExPT0tfRU1BSUwsXG5cdFx0XHRcdGltYWdlS2V5OiBcImVtYWlsSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkVtYWlsXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcIm1lZXRpbmdUaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfTUVFVElORyxcblx0XHRcdFx0aW1hZ2VLZXk6IFwibWVldGluZ0ltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJNZWV0aW5nXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcImNoYXRUaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfQ0hBVCxcblx0XHRcdFx0aW1hZ2VLZXk6IFwiY2hhdEltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJDaGF0XCJcblx0XHRcdH1cblx0XHRdO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LSR7dGVhbS5pZH1gLFxuXHRcdFx0c2NvcmU6IHRoaXMub2JqZWN0VHlwZVRvT3JkZXIoXCJUZWFtXCIpLFxuXHRcdFx0dGl0bGU6IHRlYW0uZGlzcGxheU5hbWUgPz8gXCJVbnRpdGxlZCBUZWFtXCIsXG5cdFx0XHRsYWJlbDogXCJUZWFtXCIsXG5cdFx0XHRpY29uOiB0aGlzLmdldFRoZW1lZEljb24oXCJ0ZWFtXCIsIHBhbGV0dGUpLFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DQUxMLFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRvYmpUeXBlOiBcIlRlYW1cIixcblx0XHRcdFx0b2JqOiB0ZWFtLFxuXHRcdFx0XHR1cmw6IHRlYW0ud2ViVXJsLFxuXHRcdFx0XHR1cmxzLFxuXHRcdFx0XHRlbWFpbHM6IHRlYW1NZW1iZXJzLmZpbHRlcigodCkgPT4gdC5lbWFpbCkubWFwKCh0KSA9PiB0LmVtYWlsKSxcblx0XHRcdFx0dGVhbUlkOiB0ZWFtLmlkXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXCJyb3dcIiwgW2F3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUaXRsZShcImRpc3BsYXlOYW1lXCIpXSwge1xuXHRcdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdGdhcDogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVQYWlyc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHBhaXJzKSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlQnV0dG9uc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGJ1dHRvbnMpXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwYWRkaW5nOiBcIjEwcHhcIixcblx0XHRcdFx0XHRcdGdhcDogXCIxNXB4XCIsXG5cdFx0XHRcdFx0XHRmbGV4OiBcIjFcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KSxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiB0ZWFtLmRpc3BsYXlOYW1lID8/IFwiVW50aXRsZWQgVGVhbVwiLFxuXHRcdFx0XHRcdC4uLnRoaXMubWFwUGFpcnNUb0RhdGEocGFpcnMpLFxuXHRcdFx0XHRcdG9wZW5UaXRsZTogXCJPcGVuIFRlYW1zXCIsXG5cdFx0XHRcdFx0b3BlbkltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJ0ZWFtc1wiLCBwYWxldHRlKSxcblx0XHRcdFx0XHRlbWFpbFRpdGxlOiBcIk91dGxvb2sgRS1tYWlsXCIsXG5cdFx0XHRcdFx0ZW1haWxJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiZW1haWxcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0bWVldGluZ1RpdGxlOiBcIlRlYW1zIE1lZXRpbmdcIixcblx0XHRcdFx0XHRtZWV0aW5nSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNhbGVuZGFyXCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdGNoYXRUaXRsZTogXCJUZWFtcyBDaGF0XCIsXG5cdFx0XHRcdFx0Y2hhdEltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJjaGF0XCIsIHBhbGV0dGUpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJlc3VsdCB0ZW1wbGF0ZSBmb3IgYSBjaGFubmVsLlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRvIGhlbHAgd2l0aCBjcmVhdGluZyB0ZW1wbGF0ZXMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBjdXJyZW50IHBhbGV0dGUuXG5cdCAqIEBwYXJhbSBjaGFubmVsIFRoZSBjaGFubmVsIGRhdGEuXG5cdCAqIEByZXR1cm5zIFRoZSBjaGFubmVsIHJlc3VsdCB0ZW1wbGF0ZS5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlQ2hhbm5lbFJlc3VsdChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdGNoYW5uZWw6IENoYW5uZWwgJiB7IHRlYW06IFRlYW0gfVxuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPj4ge1xuXHRcdGNvbnN0IGNoYW5uZWxNZW1iZXJzID1cblx0XHRcdGNoYW5uZWwudGVhbT8uaWQgJiYgY2hhbm5lbD8uaWQgPyBhd2FpdCB0aGlzLmdldENoYW5uZWxNZW1iZXJzKGNoYW5uZWwudGVhbS5pZCwgY2hhbm5lbC5pZCkgOiBbXTtcblxuXHRcdGNvbnN0IHBhaXJzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlPzogc3RyaW5nOyBsaW5rcz86IHN0cmluZ1tdOyBzcmNzPzogc3RyaW5nW107IHdpZGU/OiBib29sZWFuIH1bXSA9IFtdO1xuXG5cdFx0aWYgKGNoYW5uZWwudGVhbS5kaXNwbGF5TmFtZSkge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIlRlYW1cIixcblx0XHRcdFx0dmFsdWU6IGNoYW5uZWwudGVhbS5kaXNwbGF5TmFtZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGNoYW5uZWxNZW1iZXJzLmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgdXNlclBob3RvcyA9IGF3YWl0IHRoaXMuZ2V0VXNlclBob3RvcyhjaGFubmVsTWVtYmVycywgMTYpO1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIk1lbWJlciBMaXN0XCIsXG5cdFx0XHRcdHNyY3M6IHVzZXJQaG90b3Ncblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChjaGFubmVsLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiRGVzY3JpcHRpb25cIixcblx0XHRcdFx0dmFsdWU6IGNoYW5uZWwuZGVzY3JpcHRpb24sXG5cdFx0XHRcdHdpZGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbnM6IHtcblx0XHRcdHRpdGxlS2V5OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb246IHN0cmluZztcblx0XHRcdGltYWdlS2V5OiBzdHJpbmc7XG5cdFx0XHRpbWFnZUFsdFRleHQ6IHN0cmluZztcblx0XHR9W10gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcIm9wZW5UaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfQ0FMTCxcblx0XHRcdFx0aW1hZ2VLZXk6IFwib3BlbkltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJPcGVuXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcImVtYWlsVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09VVExPT0tfRU1BSUwsXG5cdFx0XHRcdGltYWdlS2V5OiBcImVtYWlsSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkVtYWlsXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcIm1lZXRpbmdUaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfTUVFVElORyxcblx0XHRcdFx0aW1hZ2VLZXk6IFwibWVldGluZ0ltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJNZWV0aW5nXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcImNoYXRUaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfQ0hBVCxcblx0XHRcdFx0aW1hZ2VLZXk6IFwiY2hhdEltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJDaGF0XCJcblx0XHRcdH1cblx0XHRdO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LSR7Y2hhbm5lbC5pZH1gLFxuXHRcdFx0c2NvcmU6IHRoaXMub2JqZWN0VHlwZVRvT3JkZXIoXCJDaGFubmVsXCIpLFxuXHRcdFx0dGl0bGU6IGNoYW5uZWwuZGlzcGxheU5hbWUgPz8gXCJVbnRpdGxlZCBDaGFubmVsXCIsXG5cdFx0XHRsYWJlbDogXCJDaGFubmVsXCIsXG5cdFx0XHRpY29uOiB0aGlzLmdldFRoZW1lZEljb24oXCJjaGFubmVsXCIsIHBhbGV0dGUpLFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DQUxMLFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRvYmpUeXBlOiBcIkNoYW5uZWxcIixcblx0XHRcdFx0b2JqOiBjaGFubmVsLFxuXHRcdFx0XHR1cmw6IGNoYW5uZWwud2ViVXJsLFxuXHRcdFx0XHRlbWFpbHM6IGNoYW5uZWxNZW1iZXJzLmZpbHRlcigobSkgPT4gbS5lbWFpbCkubWFwKChtKSA9PiBtLmVtYWlsKSxcblx0XHRcdFx0dGVhbUlkOiBjaGFubmVsLnRlYW0uaWQsXG5cdFx0XHRcdGNoYW5uZWxJZDogY2hhbm5lbC5pZFxuXHRcdFx0fSBhcyBBY3Rpb25EYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkN1c3RvbSxcblx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRsYXlvdXQ6IGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFwicm93XCIsIFthd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGl0bGUoXCJkaXNwbGF5TmFtZVwiKV0sIHtcblx0XHRcdFx0XHRcdFx0Ym9yZGVyQm90dG9tOiBgMXB4IHNvbGlkICR7cGFsZXR0ZS5iYWNrZ3JvdW5kNn1gLFxuXHRcdFx0XHRcdFx0XHRwYWRkaW5nQm90dG9tOiBcIjVweFwiLFxuXHRcdFx0XHRcdFx0XHRnYXA6IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdG92ZXJmbG93OiBcImhpZGRlblwiXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlUGFpcnNMYXlvdXQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBwYWlycyksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUJ1dHRvbnNMYXlvdXQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBidXR0b25zKVxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cGFkZGluZzogXCIxMHB4XCIsXG5cdFx0XHRcdFx0XHRnYXA6IFwiMTVweFwiLFxuXHRcdFx0XHRcdFx0ZmxleDogXCIxXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCksXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogY2hhbm5lbC5kaXNwbGF5TmFtZSA/PyBcIlVudGl0bGVkIENoYW5uZWxcIixcblx0XHRcdFx0XHQuLi50aGlzLm1hcFBhaXJzVG9EYXRhKHBhaXJzKSxcblx0XHRcdFx0XHRvcGVuVGl0bGU6IFwiT3BlbiBUZWFtc1wiLFxuXHRcdFx0XHRcdG9wZW5JbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwidGVhbXNcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0ZW1haWxUaXRsZTogXCJPdXRsb29rIEUtbWFpbFwiLFxuXHRcdFx0XHRcdGVtYWlsSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImVtYWlsXCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdG1lZXRpbmdUaXRsZTogXCJUZWFtcyBNZWV0aW5nXCIsXG5cdFx0XHRcdFx0bWVldGluZ0ltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJjYWxlbmRhclwiLCBwYWxldHRlKSxcblx0XHRcdFx0XHRjaGF0VGl0bGU6IFwiVGVhbXMgQ2hhdFwiLFxuXHRcdFx0XHRcdGNoYXRJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiY2hhdFwiLCBwYWxldHRlKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgdGhlIHJlc3VsdCB0ZW1wbGF0ZSBmb3IgYSBkcml2ZSBpdGVtLlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRvIGhlbHAgd2l0aCBjcmVhdGluZyB0ZW1wbGF0ZXMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBjdXJyZW50IHBhbGV0dGUuXG5cdCAqIEBwYXJhbSBkcml2ZUl0ZW0gVGhlIGRyaXZlIGl0ZW0gZGF0YS5cblx0ICogQHJldHVybnMgVGhlIHJlc3VsdCB0ZW1wbGF0ZSBmb3IgdGhlIGRyaXZlIGl0ZW0uXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUZpbGVSZXN1bHQoXG5cdFx0dGVtcGxhdGVIZWxwZXJzOiBUZW1wbGF0ZUhlbHBlcnMsXG5cdFx0cGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCxcblx0XHRkcml2ZUl0ZW06IERyaXZlSXRlbVxuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPj4ge1xuXHRcdGNvbnN0IHBhaXJzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlPzogc3RyaW5nOyBsaW5rcz86IHN0cmluZ1tdOyBzcmNzPzogc3RyaW5nW107IHdpZGU/OiBib29sZWFuIH1bXSA9IFtdO1xuXHRcdGNvbnN0IHVybHMgPSB7fTtcblxuXHRcdGNvbnN0IG1pbWVJY29uID0gdGhpcy5nZXRNaW1lSWNvbihkcml2ZUl0ZW0sIHBhbGV0dGUpO1xuXG5cdFx0aWYgKGRyaXZlSXRlbS5jcmVhdGVkQnk/LnVzZXI/LmRpc3BsYXlOYW1lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiQ3JlYXRlZCBCeVwiLFxuXHRcdFx0XHR2YWx1ZTogZHJpdmVJdGVtLmNyZWF0ZWRCeT8udXNlcj8uZGlzcGxheU5hbWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChkcml2ZUl0ZW0uY3JlYXRlZERhdGVUaW1lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiQ3JlYXRlZCBPblwiLFxuXHRcdFx0XHR2YWx1ZTogbmV3IERhdGUoZHJpdmVJdGVtLmNyZWF0ZWREYXRlVGltZSkudG9Mb2NhbGVTdHJpbmcoKVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGRyaXZlSXRlbS5sYXN0TW9kaWZpZWRCeT8udXNlcj8uZGlzcGxheU5hbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJVcGRhdGVkIEJ5XCIsXG5cdFx0XHRcdHZhbHVlOiBkcml2ZUl0ZW0ubGFzdE1vZGlmaWVkQnk/LnVzZXI/LmRpc3BsYXlOYW1lXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoZHJpdmVJdGVtLmxhc3RNb2RpZmllZERhdGVUaW1lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiVXBkYXRlZCBPblwiLFxuXHRcdFx0XHR2YWx1ZTogbmV3IERhdGUoZHJpdmVJdGVtLmxhc3RNb2RpZmllZERhdGVUaW1lKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRjb25zdCBidXR0b25zOiB7XG5cdFx0XHR0aXRsZUtleTogc3RyaW5nO1xuXHRcdFx0YWN0aW9uOiBzdHJpbmc7XG5cdFx0XHRpbWFnZUtleTogc3RyaW5nO1xuXHRcdFx0aW1hZ2VBbHRUZXh0OiBzdHJpbmc7XG5cdFx0fVtdID0gW1xuXHRcdFx0e1xuXHRcdFx0XHR0aXRsZUtleTogXCJvcGVuVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09QRU4sXG5cdFx0XHRcdGltYWdlS2V5OiBcIm9wZW5JbWFnZVwiLFxuXHRcdFx0XHRpbWFnZUFsdFRleHQ6IFwiT3BlblwiXG5cdFx0XHR9XG5cdFx0XTtcblxuXHRcdGNvbnN0IGlzRm9sZGVyID0gdGhpcy5kcml2ZUl0ZW1Jc0ZvbGRlcihkcml2ZUl0ZW0pO1xuXHRcdGNvbnN0IHR5cGVOYW1lID0gaXNGb2xkZXIgPyBcIkZvbGRlclwiIDogXCJGaWxlXCI7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tJHtkcml2ZUl0ZW0uaWR9YCxcblx0XHRcdHNjb3JlOiB0aGlzLm9iamVjdFR5cGVUb09yZGVyKFwiRmlsZVwiKSxcblx0XHRcdHRpdGxlOiBkcml2ZUl0ZW0ubmFtZSA/PyBgVW50aXRsZWQgJHt0eXBlTmFtZX1gLFxuXHRcdFx0bGFiZWw6IHR5cGVOYW1lLFxuXHRcdFx0aWNvbjogbWltZUljb24gPz8gdGhpcy5nZXRUaGVtZWRJY29uKHR5cGVOYW1lLnRvTG93ZXJDYXNlKCksIHBhbGV0dGUpLFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PUEVOLFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRvYmpUeXBlOiBcIkZpbGVcIixcblx0XHRcdFx0b2JqOiBkcml2ZUl0ZW0sXG5cdFx0XHRcdHVybDogZHJpdmVJdGVtLndlYlVybCxcblx0XHRcdFx0dXJsc1xuXHRcdFx0fSBhcyBBY3Rpb25EYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkN1c3RvbSxcblx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRsYXlvdXQ6IGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFwicm93XCIsIFthd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGl0bGUoXCJkaXNwbGF5TmFtZVwiKV0sIHtcblx0XHRcdFx0XHRcdFx0Ym9yZGVyQm90dG9tOiBgMXB4IHNvbGlkICR7cGFsZXR0ZS5iYWNrZ3JvdW5kNn1gLFxuXHRcdFx0XHRcdFx0XHRwYWRkaW5nQm90dG9tOiBcIjVweFwiLFxuXHRcdFx0XHRcdFx0XHRnYXA6IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdG92ZXJmbG93OiBcImhpZGRlblwiXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlUGFpcnNMYXlvdXQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBwYWlycyksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUJ1dHRvbnNMYXlvdXQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBidXR0b25zKVxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cGFkZGluZzogXCIxMHB4XCIsXG5cdFx0XHRcdFx0XHRnYXA6IFwiMTVweFwiLFxuXHRcdFx0XHRcdFx0ZmxleDogXCIxXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCksXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogZHJpdmVJdGVtLm5hbWUgPz8gXCJVbnRpdGxlZCBGaWxlXCIsXG5cdFx0XHRcdFx0Li4udGhpcy5tYXBQYWlyc1RvRGF0YShwYWlycyksXG5cdFx0XHRcdFx0b3BlblRpdGxlOiBcIk9wZW4gRmlsZVwiLFxuXHRcdFx0XHRcdG9wZW5JbWFnZTogbWltZUljb24gPz8gdGhpcy5nZXRUaGVtZWRJY29uKFwiZmlsZVwiLCBwYWxldHRlKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGVhbSBtZW1iZXJzIGZvciBhIHRlYW0uXG5cdCAqIEBwYXJhbSB0ZWFtSWQgVGhlIGlkIG9mIHRoZSB0ZWFtIHRvIGdldCB0aGUgbWVtYmVycy5cblx0ICogQHJldHVybnMgVGhlIEFjdGl2ZURpcmVjdG9yeSBkYXRhIGZvciB0aGUgdGVhbSBtZW1iZXJzLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBnZXRUZWFtTWVtYmVycyh0ZWFtSWQ6IHN0cmluZyk6IFByb21pc2U8QWFkVXNlckNvbnZlcnNhdGlvbk1lbWJlcltdPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLl9tczM2NUNvbm5lY3Rpb24pIHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiR2V0IFRlYW0gTWVtYmVycyBSZXF1ZXN0XCIpO1xuXG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PFxuXHRcdFx0XHRcdEdyYXBoTGlzdFJlc3BvbnNlPEFhZFVzZXJDb252ZXJzYXRpb25NZW1iZXI+XG5cdFx0XHRcdD4oYC92MS4wL3RlYW1zLyR7dGVhbUlkfS9tZW1iZXJzYCwgXCJHRVRcIik7XG5cblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiR2V0IFRlYW0gTWVtYmVycyBSZXNwb25zZVwiLCByZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGE/LnZhbHVlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGEudmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJGYWlsZWQgZ2V0dGluZyB0ZWFtIG1lbWJlcnNcIiwgZXJyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gW107XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSBtZW1iZXJzIG9mIGEgdGVhbXMgY2hhbm5lbC5cblx0ICogQHBhcmFtIHRlYW1JZCBUaGUgdGVhbSBpZC5cblx0ICogQHBhcmFtIGNoYW5uZWxJZCBUaGUgY2hhbm5lbCBpZC5cblx0ICogQHJldHVybnMgVGhlIEFjdGl2ZURpcmVjdG9yeSBkYXRhIGZvciB0aGUgdGVhbSBjaGFubmVsIG1lbWJlcnMuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGdldENoYW5uZWxNZW1iZXJzKHRlYW1JZDogc3RyaW5nLCBjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8QWFkVXNlckNvbnZlcnNhdGlvbk1lbWJlcltdPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLl9tczM2NUNvbm5lY3Rpb24pIHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiR2V0IENoYW5uZWwgTWVtYmVycyBSZXF1ZXN0XCIpO1xuXG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PFxuXHRcdFx0XHRcdEdyYXBoTGlzdFJlc3BvbnNlPEFhZFVzZXJDb252ZXJzYXRpb25NZW1iZXI+XG5cdFx0XHRcdD4oYC92MS4wL3RlYW1zLyR7dGVhbUlkfS9jaGFubmVscy8ke2NoYW5uZWxJZH0vbWVtYmVyc2AsIFwiR0VUXCIpO1xuXG5cdFx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcIkdldCBDaGFubmVsIE1lbWJlcnMgUmVzcG9uc2VcIiwgcmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdGlmIChyZXNwb25zZS5kYXRhPy52YWx1ZSkge1xuXHRcdFx0XHRcdHJldHVybiByZXNwb25zZS5kYXRhLnZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFwiRmFpbGVkIGdldHRpbmcgY2hhbm5lbCBtZW1iZXJzXCIsIGVycik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB1c2VycyBwaG90b3MuXG5cdCAqIEBwYXJhbSB1c2VycyBUaGUgdXNlcnMgdG8gZ2V0IHRoZSBwaG90b3MgZm9yLlxuXHQgKiBAcGFyYW0gc2l6ZSBUaGUgc2l6ZSBvZiB0aGUgcGhvdG9zLlxuXHQgKiBAcmV0dXJucyBMaXN0IG9mIHVybHMgdG8gdGhlIHBob3Rvcy5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgZ2V0VXNlclBob3Rvcyh1c2VyczogQWFkVXNlckNvbnZlcnNhdGlvbk1lbWJlcltdLCBzaXplOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLl9tczM2NUNvbm5lY3Rpb24pIHtcblx0XHRcdFx0Y29uc3QgbG9va3VwVXNlcnMgPSB1c2Vycy5maWx0ZXIoKHUpID0+ICF0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZVt1LmlkID8/IFwiXCJdKTtcblxuXHRcdFx0XHRpZiAobG9va3VwVXNlcnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGNvbnN0IGNodW5rQ291bnQgPSBNYXRoLmNlaWwobG9va3VwVXNlcnMubGVuZ3RoIC8gMjApO1xuXG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjaHVua0NvdW50OyBpKyspIHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PEdyYXBoQmF0Y2hSZXNwb25zZT4oXG5cdFx0XHRcdFx0XHRcdFwiL3YxLjAvJGJhdGNoXCIsXG5cdFx0XHRcdFx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdHM6IGxvb2t1cFVzZXJzLnNsaWNlKGkgKiAyMCwgKGkgKyAxKSAqIDIwKS5tYXAoKHUsIGlkeCkgPT4gKHtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBgcGhvdG9zJHtpZHggKyAxfWAsXG5cdFx0XHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHR1cmw6IGAvdXNlcnMvJHt1LnVzZXJJZH0vcGhvdG8vJHZhbHVlYFxuXHRcdFx0XHRcdFx0XHRcdH0pKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YT8ucmVzcG9uc2VzKSB7XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgciBvZiByZXNwb25zZS5kYXRhLnJlc3BvbnNlcykge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGxvb2t1cElkeCA9IE51bWJlci5wYXJzZUludChyLmlkLnJlcGxhY2UoXCJwaG90b3NcIiwgXCJcIiksIDEwKTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCB1c2VyID0gbG9va3VwVXNlcnNbbG9va3VwSWR4IC0gMV07XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHVzZXIuaWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCBwaWNEYXRhO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHIuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGljRGF0YSA9IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7ci5ib2R5IGFzIHN0cmluZ31gO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGljRGF0YSA9IHRoaXMuc3ZnVG9JbmxpbmUodGhpcy5pbWFnZVByb2ZpbGVOb25lKHNpemUsIHVzZXIuZGlzcGxheU5hbWUgPz8gXCI/XCIpKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX3Byb2ZpbGVJbWFnZUNhY2hlW3VzZXIuaWRdID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhOiBwaWNEYXRhLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRlZDogRGF0ZS5ub3coKVxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LXR5cGUtYXNzZXJ0aW9uXG5cdFx0XHRcdHJldHVybiB1c2Vycy5tYXAoKHUpID0+IHUuaWQgJiYgdGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbdS5pZF0uZGF0YSkuZmlsdGVyKEJvb2xlYW4pIGFzIHN0cmluZ1tdO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkZhaWxlZCBnZXR0aW5nIHVzZXIgcGhvdG9zXCIsIGVycik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cblx0LyoqXG5cdCAqIE1hcCBkYXRhIHRvIHRlbXBsYXRlIGxheW91dC5cblx0ICogQHBhcmFtIHBhaXJzIFRoZSBkYXRhIHBhaXJzIHRvIG1hcC5cblx0ICogQHJldHVybnMgVGhlIG1hcHBlZCBkYXRhLlxuXHQgKi9cblx0cHJpdmF0ZSBtYXBQYWlyc1RvRGF0YShcblx0XHRwYWlyczoge1xuXHRcdFx0bGFiZWw6IHN0cmluZztcblx0XHRcdHZhbHVlPzogc3RyaW5nO1xuXHRcdFx0bGlua3M/OiBzdHJpbmdbXTtcblx0XHRcdHNyY3M/OiBzdHJpbmdbXTtcblx0XHRcdHdpZGU/OiBib29sZWFuO1xuXHRcdH1bXVxuXHQpOiB7IFtpZDogc3RyaW5nXTogc3RyaW5nIH0ge1xuXHRcdGNvbnN0IHBhaXJEYXRhOiB7IFtpZDogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcblx0XHRmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcblx0XHRcdHBhaXJEYXRhW2Ake3BhaXIubGFiZWx9VGl0bGVgXSA9IHBhaXIubGFiZWw7XG5cdFx0XHRpZiAocGFpci52YWx1ZSkge1xuXHRcdFx0XHRwYWlyRGF0YVtwYWlyLmxhYmVsXSA9IHRoaXMuc2FuaXRpemVTdHJpbmcocGFpci52YWx1ZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAocGFpci5saW5rcykge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhaXIubGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRwYWlyRGF0YVtgJHtwYWlyLmxhYmVsfV9saW5rXyR7aX1gXSA9IHBhaXIubGlua3NbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChwYWlyLnNyY3MpIHtcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYWlyLnNyY3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRwYWlyRGF0YVtgJHtwYWlyLmxhYmVsfV9zcmNfJHtpfWBdID0gcGFpci5zcmNzW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBwYWlyRGF0YTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgdGhlIHRlbXBsYXRlIGxheW91dCBmb3IgYSBwYWlyLlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRlbXBsYXRlIGhlbHBlcnMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBwYWxldHRlLlxuXHQgKiBAcGFyYW0gcGFpcnMgVGhlIHBhaXIgdG8gY3JlYXRlIHRoZSBlbnRyeSBmb3IuXG5cdCAqIEByZXR1cm5zIFRoZSBwYWlyIHRlbXBsYXRlLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVQYWlyc0xheW91dChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdHBhaXJzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlPzogc3RyaW5nOyBsaW5rcz86IHN0cmluZ1tdOyBzcmNzPzogc3RyaW5nW107IHdpZGU/OiBib29sZWFuIH1bXVxuXHQpOiBQcm9taXNlPFRlbXBsYXRlRnJhZ21lbnQ+IHtcblx0XHRyZXR1cm4gdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFwiY29sdW1uXCIsXG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbChwYWlycy5tYXAoYXN5bmMgKHApID0+IHRoaXMuY3JlYXRlUGFpckxheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHApKSksXG5cdFx0XHR7IGdhcDogXCI1cHhcIiwgZmxleDogXCIxXCIgfVxuXHRcdCk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIHRoZSBwYWlycyBsYXlvdXQuXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIHBhaXIgVGhlIHBhaXIgZGF0YS5cblx0ICogQHBhcmFtIHBhaXIubGFiZWwgTGFiZWwgZm9yIHRoZSBwYWlyLlxuXHQgKiBAcGFyYW0gcGFpci52YWx1ZSBUaGUgdmFsdWUgZm9yIHRoZSBwYWlyLlxuXHQgKiBAcGFyYW0gcGFpci5saW5rcyBBbnkgbGlua3MgdG8gZGlzcGxheSBpbiB0aGUgcGFpci5cblx0ICogQHBhcmFtIHBhaXIuc3JjcyBBbnkgaW1hZ2Ugc291cmNlcyBmb3IgdGhlIHBhaXIuXG5cdCAqIEBwYXJhbSBwYWlyLndpZGUgRGlzcGxheSB0aGUgcGFpciBpbiB3aWRlIGZvcm1hdC5cblx0ICogQHJldHVybnMgVGhlIGZvcm1hdHRlZCBwYWlycy5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlUGFpckxheW91dChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdHBhaXI6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU/OiBzdHJpbmc7IGxpbmtzPzogc3RyaW5nW107IHNyY3M/OiBzdHJpbmdbXTsgd2lkZT86IGJvb2xlYW4gfVxuXHQpOiBQcm9taXNlPFRlbXBsYXRlRnJhZ21lbnQ+IHtcblx0XHRjb25zdCBlbGVtZW50czogVGVtcGxhdGVGcmFnbWVudFtdID0gW1xuXHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZVRleHQoYCR7cGFpci5sYWJlbH1UaXRsZWAsIDEwLCB7XG5cdFx0XHRcdGNvbG9yOiBwYWxldHRlLmlucHV0UGxhY2Vob2xkZXIsXG5cdFx0XHRcdGZsZXg6IDFcblx0XHRcdH0pXG5cdFx0XTtcblxuXHRcdGlmIChwYWlyLnZhbHVlKSB7XG5cdFx0XHRlbGVtZW50cy5wdXNoKFxuXHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGV4dChgJHtwYWlyLmxhYmVsfWAsIDEwLCB7XG5cdFx0XHRcdFx0ZmxleDogcGFpci53aWRlID8gMSA6IDMsXG5cdFx0XHRcdFx0ZGlzcGxheTogXCJmbGV4XCIsXG5cdFx0XHRcdFx0ZmxleFdyYXA6IFwid3JhcFwiLFxuXHRcdFx0XHRcdGp1c3RpZnlDb250ZW50OiBwYWlyLndpZGUgPyBcImZsZXgtc3RhcnRcIiA6IFwiZmxleC1lbmRcIixcblx0XHRcdFx0XHR3b3JkQnJlYWs6IFwiYnJlYWstYWxsXCJcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKHBhaXIubGlua3M/Lmxlbmd0aCkge1xuXHRcdFx0ZWxlbWVudHMucHVzaChcblx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcInJvd1wiLFxuXHRcdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0XHRcdFx0cGFpci5saW5rcy5tYXAoYXN5bmMgKGwsIGlkeCkgPT5cblx0XHRcdFx0XHRcdFx0dGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUxpbmsoXG5cdFx0XHRcdFx0XHRcdFx0YCR7cGFpci5sYWJlbH1fbGlua18ke2lkeH1gLFxuXHRcdFx0XHRcdFx0XHRcdGAke01pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fT1BFTn1fJHtwYWlyLmxhYmVsfV9saW5rXyR7aWR4fWAsXG5cdFx0XHRcdFx0XHRcdFx0MTBcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0eyBnYXA6IFwiNXB4XCIsIGZsZXg6IDMsIGp1c3RpZnlDb250ZW50OiBcImZsZXgtZW5kXCIsIGZsZXhXcmFwOiBcIndyYXBcIiB9XG5cdFx0XHRcdClcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKHBhaXIuc3Jjcz8ubGVuZ3RoKSB7XG5cdFx0XHRlbGVtZW50cy5wdXNoKFxuXHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XHRcdFwicm93XCIsXG5cdFx0XHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRcdFx0XHRwYWlyLnNyY3MubWFwKGFzeW5jIChzLCBpZHgpID0+XG5cdFx0XHRcdFx0XHRcdHRlbXBsYXRlSGVscGVycy5jcmVhdGVJbWFnZShgJHtwYWlyLmxhYmVsfV9zcmNfJHtpZHh9YCwgXCJNZW1iZXJcIiwge1xuXHRcdFx0XHRcdFx0XHRcdHdpZHRoOiBcIjE2cHhcIixcblx0XHRcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiMTZweFwiLFxuXHRcdFx0XHRcdFx0XHRcdG9iamVjdEZpdDogXCJjb3ZlclwiLFxuXHRcdFx0XHRcdFx0XHRcdGJvcmRlclJhZGl1czogXCI1MCVcIlxuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0eyBnYXA6IFwiNXB4XCIsIGZsZXg6IDMsIGp1c3RpZnlDb250ZW50OiBcImZsZXgtZW5kXCIsIGZsZXhXcmFwOiBcIndyYXBcIiB9XG5cdFx0XHRcdClcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIocGFpci53aWRlID8gXCJjb2x1bW5cIiA6IFwicm93XCIsIGVsZW1lbnRzLCB7XG5cdFx0XHRqdXN0aWZ5Q29udGVudDogXCJzcGFjZS1iZXR3ZWVuXCIsXG5cdFx0XHRnYXA6IHBhaXIud2lkZSA/IFwiNXB4XCIgOiBcIjEwcHhcIlxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIGxheW91dCB3aXRoIGJ1dHRvbnMuXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIGJ1dHRvbnMgVGhlIGJ1dHRvbnMgdG8gZGlzcGxheS5cblx0ICogQHJldHVybnMgVGhlIGJ1dHRvbnMgbGF5b3V0LlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVCdXR0b25zTGF5b3V0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0YnV0dG9uczoge1xuXHRcdFx0dGl0bGVLZXk6IHN0cmluZztcblx0XHRcdGFjdGlvbjogc3RyaW5nO1xuXHRcdFx0aW1hZ2VLZXk6IHN0cmluZztcblx0XHRcdGltYWdlQWx0VGV4dDogc3RyaW5nO1xuXHRcdH1bXVxuXHQpOiBQcm9taXNlPFRlbXBsYXRlRnJhZ21lbnQ+IHtcblx0XHRyZXR1cm4gdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFwicm93XCIsXG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0YnV0dG9ucy5tYXAoYXN5bmMgKGIpID0+XG5cdFx0XHRcdFx0dGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUJ1dHRvbihcblx0XHRcdFx0XHRcdEJ1dHRvblN0eWxlLlNlY29uZGFyeSxcblx0XHRcdFx0XHRcdGIudGl0bGVLZXksXG5cdFx0XHRcdFx0XHRiLmFjdGlvbixcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Ym9yZGVyOiBcIm5vbmVcIixcblx0XHRcdFx0XHRcdFx0Ym9yZGVyUmFkaXVzOiBcIjUwJVwiLFxuXHRcdFx0XHRcdFx0XHR3aWR0aDogXCI0MHB4XCIsXG5cdFx0XHRcdFx0XHRcdGhlaWdodDogXCI0MHB4XCIsXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmc6IFwiMHB4XCIsXG5cdFx0XHRcdFx0XHRcdGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuXHRcdFx0XHRcdFx0XHRiYWNrZ3JvdW5kQ29sb3I6IHBhbGV0dGUuYmFja2dyb3VuZDJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVJbWFnZShiLmltYWdlS2V5LCBiLmltYWdlQWx0VGV4dCwge1xuXHRcdFx0XHRcdFx0XHRcdHdpZHRoOiBcIjE2cHhcIixcblx0XHRcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiMTZweFwiXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHQpXG5cdFx0XHQpLFxuXHRcdFx0e1xuXHRcdFx0XHRqdXN0aWZ5Q29udGVudDogXCJzcGFjZS1hcm91bmRcIixcblx0XHRcdFx0Z2FwOiBcIjEwcHhcIlxuXHRcdFx0fVxuXHRcdCk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgcHJvZmlsZSBpbWFnZSB1c2luZyBpbml0aWFscy5cblx0ICogQHBhcmFtIHNpemUgVGhlIHNpemUgb2YgdGhlIGltYWdlIHRvIGNyZWF0ZS5cblx0ICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIHVzZXIuXG5cdCAqIEByZXR1cm5zIFNWRyBpbWFnZS5cblx0ICovXG5cdHByaXZhdGUgaW1hZ2VQcm9maWxlTm9uZShzaXplOiBudW1iZXIsIG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGA8c3ZnIGZpbGw9XCIjREREREREXCIgdmlld0JveD1cIjAgMCA1MTIgNTEyXCIgaGVpZ2h0PVwiJHtzaXplfXB4XCIgd2lkdGg9XCIke3NpemV9cHhcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG5cdFx0PHN0eWxlPnRleHR7Zm9udDogYm9sZCAzNTBweCBzYW5zLXNlcmlmO2ZpbGw6IGJsYWNrO308L3N0eWxlPlxuXHRcdDxyZWN0IHdpZHRoPVwiNTEyXCIgaGVpZ2h0PVwiNTEyXCIgLz5cblx0XHQ8dGV4dCB4PVwiNTAlXCIgeT1cIjUwJVwiIGRvbWluYW50LWJhc2VsaW5lPVwibWlkZGxlXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIj4ke25hbWVbMF19PC90ZXh0PlxuXHRcdDwvc3ZnPmA7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydCBhbmQgc3ZnIGludG8gaW5saW5lIGZvcm1hdC5cblx0ICogQHBhcmFtIHN2ZyBUaGUgU1ZHIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIFRoZSBjb252ZXJ0ZWQgaW1hZ2UuXG5cdCAqL1xuXHRwcml2YXRlIHN2Z1RvSW5saW5lKHN2Zzogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gYGRhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCR7c3ZnLnJlcGxhY2UoLyMvZywgXCIlMjNcIil9YDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgYmFzZTY0IElEIGluIHRvIHVybCBmb3JtYXQuXG5cdCAqIEBwYXJhbSBiNjRJZCBUaGUgYmFzZTY0IGlkIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIFRoZSB1cmwgZm9ybSBvZiB0aGUgaWQuXG5cdCAqL1xuXHRwcml2YXRlIGJhc2U2NElkVG9VcmwoYjY0SWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gYjY0SWQgPyBiNjRJZC5yZXBsYWNlKC9cXCsvZywgXCJfXCIpLnJlcGxhY2UoL1xcLy9nLCBcIi1cIikgOiBiNjRJZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGJhc2ljIHN0cmluZyBzYW5pdGl6ZSBmdW5jdGlvbiB0aGF0IHJlbW92ZXMgYW5nbGUgYnJhY2tldHMgPD4gZnJvbSBhIHN0cmluZy5cblx0ICogQHBhcmFtIGNvbnRlbnQgdGhlIGNvbnRlbnQgdG8gc2FuaXRpemVcblx0ICogQHJldHVybnMgYSBzdHJpbmcgd2l0aG91dCBhbmdsZSBicmFja2V0cyA8PlxuXHQgKi9cblx0cHJpdmF0ZSBzYW5pdGl6ZVN0cmluZyhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmIChjb250ZW50ICE9PSB1bmRlZmluZWQgJiYgY29udGVudCAhPT0gbnVsbCAmJiB0eXBlb2YgY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0cmV0dXJuIGNvbnRlbnRcblx0XHRcdFx0LnJlcGxhY2UoLzxbXj5dKj4/L2dtLCBcIlwiKVxuXHRcdFx0XHQucmVwbGFjZSgvJmd0Oy9nLCBcIj5cIilcblx0XHRcdFx0LnJlcGxhY2UoLyZsdDsvZywgXCI8XCIpXG5cdFx0XHRcdC5yZXBsYWNlKC8mYW1wOy9nLCBcIiZcIilcblx0XHRcdFx0LnJlcGxhY2UoLyZuYnNwOy9nLCBcIiBcIilcblx0XHRcdFx0LnJlcGxhY2UoL1xcblxccypcXG4vZywgXCJcXG5cIik7XG5cdFx0fVxuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnQgdGhlIG9iamVjdCB0eXBlIHRvIGEgdmFsdWUgZm9yIG9yZGVyaW5nLlxuXHQgKiBAcGFyYW0gb2JqVHlwZSBUaGUgb2JqZWN0IHR5cGUuXG5cdCAqIEByZXR1cm5zIFRoZSBvcmRlcmluZyBudW1iZXIuXG5cdCAqL1xuXHRwcml2YXRlIG9iamVjdFR5cGVUb09yZGVyKG9ialR5cGU6IE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzKTogbnVtYmVyIHtcblx0XHRjb25zdCBvYmpUeXBlT3JkZXI6IHsgW2tleSBpbiBNaWNyb3NvZnQzNjVPYmplY3RUeXBlc106IG51bWJlciB9ID0ge1xuXHRcdFx0VXNlcjogMTAwLFxuXHRcdFx0Q29udGFjdDogMjAwLFxuXHRcdFx0TWVzc2FnZTogMzAwLFxuXHRcdFx0Q2hhdE1lc3NhZ2U6IDQwMCxcblx0XHRcdEV2ZW50OiA1MDAsXG5cdFx0XHRUZWFtOiA2MDAsXG5cdFx0XHRDaGFubmVsOiA3MDAsXG5cdFx0XHRGaWxlOiA4MDBcblx0XHR9O1xuXHRcdHJldHVybiAoXG5cdFx0XHQodGhpcy5fZGVmaW5pdGlvbj8uYmFzZVNjb3JlID8/IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9ERUZBVUxUX0JBU0VfU0NPUkUpICsgb2JqVHlwZU9yZGVyW29ialR5cGVdXG5cdFx0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgdGhlIGNhY2hlIGFuZCByZW1vdmUgYW55IHN0YWxlIGRhdGEuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZUNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIENsZWFudXAgYW55IG9sZCBjYWNoZWQgcHJvZmlsZSBpbWFnZXNcblx0XHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fcHJvZmlsZUltYWdlQ2FjaGUpO1xuXHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0Y29uc3QgdHRsID0ga2V5cy5sZW5ndGggPiA1MCA/IDMwMDAwIDogMzAwMDAwO1xuXHRcdGZvciAoY29uc3QgaWQgb2Yga2V5cykge1xuXHRcdFx0aWYgKG5vdyAtIHRoaXMuX3Byb2ZpbGVJbWFnZUNhY2hlW2lkXS5hZGRlZCA+IHR0bCkge1xuXHRcdFx0XHRkZWxldGUgdGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbaWRdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFVwZGF0ZSB0aGUgdGVhbXMgYW5kIGNoYW5uZWxzXG5cdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbiAmJiB0aGlzLl9jYWNoZUNvdW50ZXIgJSA2ID09PSAwKSB7XG5cdFx0XHQvLyBVcGRhdGUgZXZlcnkgMyBtaW51dGVzXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PEdyYXBoTGlzdFJlc3BvbnNlPFRlYW0+PihcIi92MS4wL21lL2pvaW5lZFRlYW1zXCIpO1xuXG5cdFx0XHRcdGNvbnN0IGpvaW5lZFRlYW1zID0gcmVzcG9uc2UuZGF0YT8udmFsdWUgPz8gW107XG5cdFx0XHRcdGNvbnN0IGNoYW5uZWxzRm9yVGVhbTogeyBbaWQ6IHN0cmluZ106IENoYW5uZWxbXSB9ID0ge307XG5cblx0XHRcdFx0aWYgKGpvaW5lZFRlYW1zLmxlbmd0aCkge1xuXHRcdFx0XHRcdGNvbnN0IGJhdGNoQ2hhbm5lbHM6IHN0cmluZ1tdID0gam9pbmVkVGVhbXMubWFwKCh0KSA9PiBgL3RlYW1zLyR7dC5pZH0vY2hhbm5lbHNgKTtcblxuXHRcdFx0XHRcdGNvbnN0IGJhdGNoUmVzcG9uc2VzID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PEdyYXBoQmF0Y2hSZXNwb25zZT4oXG5cdFx0XHRcdFx0XHRcIi92MS4wLyRiYXRjaFwiLFxuXHRcdFx0XHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RzOiBiYXRjaENoYW5uZWxzLm1hcCgodXJsLCBpZHgpID0+ICh7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IGBUZWFtQ2hhbm5lbHMtJHsoaWR4ICsgMSkudG9TdHJpbmcoKX1gLFxuXHRcdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0XHRcdFx0XHR1cmxcblx0XHRcdFx0XHRcdFx0fSkpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdGlmIChiYXRjaFJlc3BvbnNlcy5kYXRhPy5yZXNwb25zZXMgJiYgQXJyYXkuaXNBcnJheShiYXRjaFJlc3BvbnNlcy5kYXRhPy5yZXNwb25zZXMpKSB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJhdGNoUmVzcG9uc2Ugb2YgYmF0Y2hSZXNwb25zZXMuZGF0YS5yZXNwb25zZXMpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGJhdGNoUmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oYCR7YmF0Y2hSZXNwb25zZS5pZH0gUmVzcG9uc2VgLCBiYXRjaFJlc3BvbnNlLmJvZHkpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgY2hhbm5lbHMgPSBiYXRjaFJlc3BvbnNlLmJvZHkgYXMgR3JhcGhMaXN0UmVzcG9uc2U8Q2hhbm5lbD47XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoY2hhbm5lbHMudmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgY2hhbm5lbCBvZiBjaGFubmVscy52YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgd2ViVXJsIGZvciB0aGUgdGVhbXMgbWFuYWdlbWVudCBwYWdlIG5lZWRzIGNvbnN0cnVjdGluZyBmcm9tIHRoZSBmaXJzdCBjaGFubmVsIGluIGVhY2ggdGVhbVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB3ZSBhbHNvIGNvbm5lY3QgdGhlIHRlYW0gdG8gdGhlIGNoYW5uZWxzIGFuZCB2aWNlIHZlcnNhXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjaGFubmVsLndlYlVybCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHdlYlVybCA9IG5ldyBVUkwoY2hhbm5lbC53ZWJVcmwpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh3ZWJVcmwuc2VhcmNoUGFyYW1zLmhhcyhcImdyb3VwSWRcIikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGdyb3VwSWQgPSB3ZWJVcmwuc2VhcmNoUGFyYW1zLmdldChcImdyb3VwSWRcIik7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCB0ZWFtID0gam9pbmVkVGVhbXMuZmluZCgodCkgPT4gdC5pZCA9PT0gZ3JvdXBJZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGVhbT8uaWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGVhbS53ZWJVcmwgPSBjaGFubmVsLndlYlVybDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hhbm5lbHNGb3JUZWFtW3RlYW0uaWRdID0gY2hhbm5lbHNGb3JUZWFtW3RlYW0uaWRdID8/IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaGFubmVsc0ZvclRlYW1bdGVhbS5pZF0ucHVzaChjaGFubmVsKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcblx0XHRcdFx0XHRcdFx0XHRcdGAke2JhdGNoUmVzcG9uc2UuaWR9IFJlc3BvbnNlIEZhaWxlZGAsXG5cdFx0XHRcdFx0XHRcdFx0XHRiYXRjaFJlc3BvbnNlLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdGJhdGNoUmVzcG9uc2UuYm9keVxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLl90ZWFtc0FuZENoYW5uZWxzQ2FjaGUgPSBqb2luZWRUZWFtcy5tYXAoKHQpID0+ICh7XG5cdFx0XHRcdFx0dGVhbTogdCxcblx0XHRcdFx0XHRjaGFubmVsczogY2hhbm5lbHNGb3JUZWFtW3QuaWQgPz8gXCJcIl0gPz8gW11cblx0XHRcdFx0fSkpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIGpvaW5lZCB0ZWFtc1wiLCBlcnIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuX2NhY2hlQ291bnRlcisrO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgaWNvbiBiYXNlZCBvbiB0aGUgTUlNRSB0eXBlIGZvciBhIGRyaXZlIGl0ZW0uXG5cdCAqIEBwYXJhbSBkcml2ZUl0ZW0gVGhlIGRyaXZlIGl0ZW0uXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBwYWxldHRlIGZvciB0aGVtaW5nLlxuXHQgKiBAcmV0dXJucyBUaGUgaWNvbnMgZm9yIHRoZSBkcml2ZSBpdGVtLlxuXHQgKi9cblx0cHJpdmF0ZSBnZXRNaW1lSWNvbihkcml2ZUl0ZW06IERyaXZlSXRlbSwgcGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCk6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwge1xuXHRcdGNvbnN0IG1pbWVUeXBlID0gZHJpdmVJdGVtLmZpbGU/Lm1pbWVUeXBlID8/IFwiXCI7XG5cdFx0Y29uc3QgZmlsZW5hbWUgPSBkcml2ZUl0ZW0ubmFtZSA/PyBcIlwiO1xuXHRcdGNvbnN0IHBhY2thZ2VUeXBlID0gZHJpdmVJdGVtLnBhY2thZ2U/LnR5cGUgPz8gXCJcIjtcblx0XHRpZiAoXG5cdFx0XHRtaW1lVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudFwiIHx8XG5cdFx0XHRtaW1lVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9tc3dvcmRcIiB8fFxuXHRcdFx0ZmlsZW5hbWUuZW5kc1dpdGgoXCIuZG9jeFwiKSB8fFxuXHRcdFx0ZmlsZW5hbWUuZW5kc1dpdGgoXCIuZG9jXCIpXG5cdFx0KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fc2V0dGluZ3M/LmltYWdlcy53b3JkO1xuXHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRtaW1lVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldFwiIHx8XG5cdFx0XHRtaW1lVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWxcIiB8fFxuXHRcdFx0ZmlsZW5hbWUuZW5kc1dpdGgoXCIueGxzeFwiKSB8fFxuXHRcdFx0ZmlsZW5hbWUuZW5kc1dpdGgoXCIueGxzXCIpXG5cdFx0KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fc2V0dGluZ3M/LmltYWdlcy5leGNlbDtcblx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0bWltZVR5cGUgPT09IFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnByZXNlbnRhdGlvbm1sLnByZXNlbnRhdGlvblwiIHx8XG5cdFx0XHRtaW1lVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi92bmQubXMtcG93ZXJwb2ludFwiIHx8XG5cdFx0XHRmaWxlbmFtZS5lbmRzV2l0aChcIi5wcHR4XCIpIHx8XG5cdFx0XHRmaWxlbmFtZS5lbmRzV2l0aChcIi5wcHRcIilcblx0XHQpIHtcblx0XHRcdHJldHVybiB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLnBvd2VycG9pbnQ7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmRyaXZlSXRlbUlzSW1hZ2UoZHJpdmVJdGVtKSkge1xuXHRcdFx0aWYgKGRyaXZlSXRlbS50aHVtYm5haWxzICYmIEFycmF5LmlzQXJyYXkoZHJpdmVJdGVtLnRodW1ibmFpbHMpICYmIGRyaXZlSXRlbS50aHVtYm5haWxzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3QgdGh1bWJuYWlsU2V0ID0gZHJpdmVJdGVtLnRodW1ibmFpbHNbMF07XG5cdFx0XHRcdGlmICh0aHVtYm5haWxTZXQ/LnNtYWxsID8/IHRodW1ibmFpbFNldC5tZWRpdW0pIHtcblx0XHRcdFx0XHRyZXR1cm4gdGh1bWJuYWlsU2V0LnNtYWxsPy51cmwgPz8gdGh1bWJuYWlsU2V0Lm1lZGl1bT8udXJsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChwYWNrYWdlVHlwZSA9PT0gXCJvbmVOb3RlXCIgfHwgZmlsZW5hbWUuZW5kc1dpdGgoXCJvbmV0b2MyXCIpIHx8IGZpbGVuYW1lLmVuZHNXaXRoKFwib25lXCIpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fc2V0dGluZ3M/LmltYWdlcy5vbmVub3RlO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5kcml2ZUl0ZW1Jc0ZvbGRlcihkcml2ZUl0ZW0pKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRUaGVtZWRJY29uKFwiZm9sZGVyXCIsIHBhbGV0dGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgYSB0aGVtZSB2ZXJzaW9uIG9mIGFuIGljb24uXG5cdCAqIEBwYXJhbSB0aGVtZWRJY29uIFRoZSB0aGVtZSBpY29uIHRvIHRoZW0uXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBwYWxldHRlIHRvIHVzZSBmb3IgdGhlbWluZy5cblx0ICogQHJldHVybnMgVGhlIHRoZW1lZCBpY29uLlxuXHQgKi9cblx0cHJpdmF0ZSBnZXRUaGVtZWRJY29uKHRoZW1lZEljb246IHN0cmluZywgcGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCk6IHN0cmluZyB7XG5cdFx0aWYgKCF0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzW3RoZW1lZEljb25dKSB7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cdFx0Y29uc3QgaWNvbiA9IHRoaXMuX3NldHRpbmdzLmltYWdlc1t0aGVtZWRJY29uXTtcblx0XHRpZiAoaWNvbi5zdGFydHNXaXRoKFwiZGF0YTppbWFnZS9zdmcreG1sXCIpKSB7XG5cdFx0XHRyZXR1cm4gaWNvbi5yZXBsYWNlKC9yZ2JcXCgwLDAsMFxcKS9nLCBwYWxldHRlLnRleHREZWZhdWx0Py5yZXBsYWNlKC8jL2csIFwiJTIzXCIpID8/IFwiMCwwLDBcIik7XG5cdFx0fVxuXHRcdHJldHVybiBpY29uO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIHRvIHNlZSBpZiBhIGRyaXZlIGl0ZW0gaXMgZm9sZGVyLlxuXHQgKiBAcGFyYW0gZHJpdmVJdGVtIFRoZSBkcml2ZXIgaXRlbSB0byBjaGVjay5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgaXRlbSBpcyBhIGZvbGRlci5cblx0ICovXG5cdHByaXZhdGUgZHJpdmVJdGVtSXNGb2xkZXIoZHJpdmVJdGVtOiBEcml2ZUl0ZW0pOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZHJpdmVJdGVtLmZpbGUgPT09IHVuZGVmaW5lZCAmJiBkcml2ZUl0ZW0uZm9sZGVyICE9PSB1bmRlZmluZWQ7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgdG8gc2VlIGlmIGEgZHJpdmUgaXRlbSBpcyBhbiBpbWFnZS5cblx0ICogQHBhcmFtIGRyaXZlSXRlbSBUaGUgZHJpdmUgaXRlbSB0byBjaGVjay5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgaXRlbSBpcyBhblxuXHQgKi9cblx0cHJpdmF0ZSBkcml2ZUl0ZW1Jc0ltYWdlKGRyaXZlSXRlbTogRHJpdmVJdGVtKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIChcblx0XHRcdGRyaXZlSXRlbS5maWxlPy5taW1lVHlwZT8uc3RhcnRzV2l0aChcImltYWdlL1wiKSA/P1xuXHRcdFx0ZHJpdmVJdGVtLm5hbWU/LmVuZHNXaXRoKFwiLmpwZWdcIikgPz9cblx0XHRcdGRyaXZlSXRlbS5uYW1lPy5lbmRzV2l0aChcIi5qcGdcIikgPz9cblx0XHRcdGRyaXZlSXRlbS5uYW1lPy5lbmRzV2l0aChcIi5naWZcIikgPz9cblx0XHRcdGRyaXZlSXRlbS5uYW1lPy5lbmRzV2l0aChcIi53ZWJwXCIpID8/XG5cdFx0XHRkcml2ZUl0ZW0ubmFtZT8uZW5kc1dpdGgoXCIucG5nXCIpID8/XG5cdFx0XHRmYWxzZVxuXHRcdCk7XG5cdH1cblxuXHQvKipcblx0ICogRm9ybWF0IGFuIGVycm9yIHRvIGEgcmVhZGFibGUgc3RyaW5nLlxuXHQgKiBAcGFyYW0gZXJyIFRoZSBlcnJvciB0byBmb3JtYXQuXG5cdCAqIEByZXR1cm5zIFRoZSBmb3JtYXR0ZWQgZXJyb3IuXG5cdCAqL1xuXHRwcml2YXRlIGZvcm1hdEVycm9yKGVycjogdW5rbm93bik6IHN0cmluZyB7XG5cdFx0aWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gZXJyLm1lc3NhZ2U7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgZXJyID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRyZXR1cm4gZXJyO1xuXHRcdH1cblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXJyKTtcblx0fVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5tZCA9IChtb2R1bGUpID0+IHtcblx0bW9kdWxlLnBhdGhzID0gW107XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiaW1wb3J0IHsgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24gfSBmcm9tIFwiLi9tczM2NS1pbnRlZ3JhdGlvblwiO1xuXG4vKipcbiAqIFRoaXMgZW50cnkgcG9pbnQgaXMgdXNlZCBieSB3ZWJwYWNrIHRvIGNyZWF0ZSBhIG1vZHVsZSBmaWxlIHdoaWNoIGNhbiBiZSBjb25zdW1lZFxuICogYnkgdGhlIHdvcmtzcGFjZS1wbGF0Zm9ybS1zdGFydGVyIGV4YW1wbGUuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnRyeVBvaW50czogeyBbaWQ6IHN0cmluZ106IE1pY3Jvc29mdDM2NUludGVncmF0aW9uIH0gPSB7XG5cdGludGVncmF0aW9uczogbmV3IE1pY3Jvc29mdDM2NUludGVncmF0aW9uKClcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=